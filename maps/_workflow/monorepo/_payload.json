[{"data":1,"prerenderedAt":627},["ShallowReactive",2],{"navigation":3,"/maps/_workflow/monorepo":161,"/maps/_workflow/monorepo-surround":619},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":613,"_id":614,"_source":615,"_file":616,"_stem":617,"_extension":618},"/maps/_workflow/monorepo","_workflow",false,true,"","Monorepo","Monorepo 工程化实践指南，包含项目管理、依赖处理、任务调度等核心概念，以及 Lerna 等工具的使用说明。",{"type":170,"children":171,"toc":608},"root",[172,181,218,223,230,236,242,260,266,284,290,302,308,313,319,324,582,591,597,602],{"type":173,"tag":174,"props":175,"children":177},"element","h2",{"id":176},"todo",[178],{"type":179,"value":180},"text","TODO",{"type":173,"tag":182,"props":183,"children":184},"ul",{},[185,198,208],{"type":173,"tag":186,"props":187,"children":188},"li",{},[189],{"type":173,"tag":190,"props":191,"children":195},"a",{"href":192,"rel":193},"https://juejin.cn/post/7102452341210611720",[194],"nofollow",[196],{"type":179,"value":197},"现代 Monorepo 工程技术选型，聊聊我的思考",{"type":173,"tag":186,"props":199,"children":200},{},[201],{"type":173,"tag":190,"props":202,"children":205},{"href":203,"rel":204},"https://monorepo.tools/",[194],[206],{"type":179,"value":207},"Monorepo Tools",{"type":173,"tag":186,"props":209,"children":210},{},[211],{"type":173,"tag":190,"props":212,"children":215},{"href":213,"rel":214},"https://juejin.cn/post/6972139870231724045",[194],[216],{"type":179,"value":217},"Monorepo 的这些坑，我们帮你踩过了",{"type":173,"tag":174,"props":219,"children":221},{"id":220},"简介",[222],{"type":179,"value":220},{"type":173,"tag":224,"props":225,"children":227},"h4",{"id":226},"monorepo-是什么",[228],{"type":179,"value":229},"monorepo 是什么？",{"type":173,"tag":231,"props":232,"children":233},"p",{},[234],{"type":179,"value":235},"monorepo 对应 multi-repo，是“把多个仓库放到一个仓库中来管理”这种技术的统称，它可以给不同项目带来一致的工作流，使团队协作更加容易，减小项目的开发和维护成本。",{"type":173,"tag":224,"props":237,"children":239},{"id":238},"使用-monorepo-能解决什么问题",[240],{"type":179,"value":241},"使用 monorepo 能解决什么问题？",{"type":173,"tag":182,"props":243,"children":244},{},[245,250,255],{"type":173,"tag":186,"props":246,"children":247},{},[248],{"type":179,"value":249},"重复编码：不同项目需要维护多套基础建设（Husky、Linter、Test、CI、Sentry、Sonar）",{"type":173,"tag":186,"props":251,"children":252},{},[253],{"type":179,"value":254},"简化调试：多仓共享及调试代码成本高昂",{"type":173,"tag":186,"props":256,"children":257},{},[258],{"type":179,"value":259},"版本管理：公共部分代码一定是最新版本，所以便于调试和发版",{"type":173,"tag":224,"props":261,"children":263},{"id":262},"使用-monorepo-带来了什么问题",[264],{"type":179,"value":265},"使用 monorepo 带来了什么问题？",{"type":173,"tag":182,"props":267,"children":268},{},[269,274,279],{"type":173,"tag":186,"props":270,"children":271},{},[272],{"type":179,"value":273},"幽灵依赖：除非使用 pnpm 严格限制依赖，不然很容易碰到幽灵依赖的问题",{"type":173,"tag":186,"props":275,"children":276},{},[277],{"type":179,"value":278},"按需构建：需要手动使用 yarn lerna:changed 找出变化的项目进行按需构建",{"type":173,"tag":186,"props":280,"children":281},{},[282],{"type":179,"value":283},"提交记录混乱：需要使用更规范的分支管理及提交信息管理",{"type":173,"tag":174,"props":285,"children":287},{"id":286},"lerna",[288],{"type":179,"value":289},"Lerna",{"type":173,"tag":231,"props":291,"children":292},{},[293,295],{"type":179,"value":294},"见：",{"type":173,"tag":190,"props":296,"children":299},{"href":297,"rel":298},"https://lerna.js.org/docs/introduction",[194],[300],{"type":179,"value":301},"Lerna Doc",{"type":173,"tag":224,"props":303,"children":305},{"id":304},"lerna-如何管理项目间的依赖",[306],{"type":179,"value":307},"lerna 如何管理项目间的依赖？",{"type":173,"tag":231,"props":309,"children":310},{},[311],{"type":179,"value":312},"使用 lerna bootstrap --use-workspaces 指令将会使 lerna 代理包管理器的依赖 linking 过程（类似 yarn 的 pnp 模式）；如果不带 --use-workspaces 指令，将会使用传统的符号链接进行依赖管理。",{"type":173,"tag":224,"props":314,"children":316},{"id":315},"lerna-如何管理并行任务的依赖关系",[317],{"type":179,"value":318},"lerna 如何管理并行任务的依赖关系？",{"type":173,"tag":231,"props":320,"children":321},{},[322],{"type":179,"value":323},"可以在 nx.json 中启用 targetDefaults 配置指定任务间的依赖关系。",{"type":173,"tag":325,"props":326,"children":330},"pre",{"className":327,"code":328,"language":329,"meta":166,"style":166},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","{\n  ...\n  \"targetDefaults\": {\n    \"build\": {\n      \"dependsOn\": [\"^build\", \"prebuild\"]\n    },\n    \"test\": {\n      \"dependsOn\": [\"build\"]\n    }\n  }\n}\n","js",[331],{"type":173,"tag":332,"props":333,"children":334},"code",{"__ignoreMap":166},[335,347,357,388,417,481,490,515,555,564,573],{"type":173,"tag":336,"props":337,"children":340},"span",{"class":338,"line":339},"line",1,[341],{"type":173,"tag":336,"props":342,"children":344},{"style":343},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[345],{"type":179,"value":346},"{\n",{"type":173,"tag":336,"props":348,"children":350},{"class":338,"line":349},2,[351],{"type":173,"tag":336,"props":352,"children":354},{"style":353},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[355],{"type":179,"value":356},"  ...\n",{"type":173,"tag":336,"props":358,"children":360},{"class":338,"line":359},3,[361,367,373,378,384],{"type":173,"tag":336,"props":362,"children":364},{"style":363},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[365],{"type":179,"value":366},"  \"",{"type":173,"tag":336,"props":368,"children":370},{"style":369},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[371],{"type":179,"value":372},"targetDefaults",{"type":173,"tag":336,"props":374,"children":375},{"style":363},[376],{"type":179,"value":377},"\"",{"type":173,"tag":336,"props":379,"children":381},{"style":380},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[382],{"type":179,"value":383},": ",{"type":173,"tag":336,"props":385,"children":386},{"style":343},[387],{"type":179,"value":346},{"type":173,"tag":336,"props":389,"children":391},{"class":338,"line":390},4,[392,397,403,407,412],{"type":173,"tag":336,"props":393,"children":394},{"style":363},[395],{"type":179,"value":396},"    \"",{"type":173,"tag":336,"props":398,"children":400},{"style":399},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[401],{"type":179,"value":402},"build",{"type":173,"tag":336,"props":404,"children":405},{"style":363},[406],{"type":179,"value":377},{"type":173,"tag":336,"props":408,"children":409},{"style":343},[410],{"type":179,"value":411},":",{"type":173,"tag":336,"props":413,"children":414},{"style":343},[415],{"type":179,"value":416}," {\n",{"type":173,"tag":336,"props":418,"children":420},{"class":338,"line":419},5,[421,426,431,435,439,444,448,453,457,462,467,472,476],{"type":173,"tag":336,"props":422,"children":423},{"style":363},[424],{"type":179,"value":425},"      \"",{"type":173,"tag":336,"props":427,"children":428},{"style":399},[429],{"type":179,"value":430},"dependsOn",{"type":173,"tag":336,"props":432,"children":433},{"style":363},[434],{"type":179,"value":377},{"type":173,"tag":336,"props":436,"children":437},{"style":343},[438],{"type":179,"value":411},{"type":173,"tag":336,"props":440,"children":441},{"style":380},[442],{"type":179,"value":443}," [",{"type":173,"tag":336,"props":445,"children":446},{"style":363},[447],{"type":179,"value":377},{"type":173,"tag":336,"props":449,"children":450},{"style":369},[451],{"type":179,"value":452},"^build",{"type":173,"tag":336,"props":454,"children":455},{"style":363},[456],{"type":179,"value":377},{"type":173,"tag":336,"props":458,"children":459},{"style":343},[460],{"type":179,"value":461},",",{"type":173,"tag":336,"props":463,"children":464},{"style":363},[465],{"type":179,"value":466}," \"",{"type":173,"tag":336,"props":468,"children":469},{"style":369},[470],{"type":179,"value":471},"prebuild",{"type":173,"tag":336,"props":473,"children":474},{"style":363},[475],{"type":179,"value":377},{"type":173,"tag":336,"props":477,"children":478},{"style":380},[479],{"type":179,"value":480},"]\n",{"type":173,"tag":336,"props":482,"children":484},{"class":338,"line":483},6,[485],{"type":173,"tag":336,"props":486,"children":487},{"style":343},[488],{"type":179,"value":489},"    },\n",{"type":173,"tag":336,"props":491,"children":493},{"class":338,"line":492},7,[494,498,503,507,511],{"type":173,"tag":336,"props":495,"children":496},{"style":363},[497],{"type":179,"value":396},{"type":173,"tag":336,"props":499,"children":500},{"style":399},[501],{"type":179,"value":502},"test",{"type":173,"tag":336,"props":504,"children":505},{"style":363},[506],{"type":179,"value":377},{"type":173,"tag":336,"props":508,"children":509},{"style":343},[510],{"type":179,"value":411},{"type":173,"tag":336,"props":512,"children":513},{"style":343},[514],{"type":179,"value":416},{"type":173,"tag":336,"props":516,"children":518},{"class":338,"line":517},8,[519,523,527,531,535,539,543,547,551],{"type":173,"tag":336,"props":520,"children":521},{"style":363},[522],{"type":179,"value":425},{"type":173,"tag":336,"props":524,"children":525},{"style":399},[526],{"type":179,"value":430},{"type":173,"tag":336,"props":528,"children":529},{"style":363},[530],{"type":179,"value":377},{"type":173,"tag":336,"props":532,"children":533},{"style":343},[534],{"type":179,"value":411},{"type":173,"tag":336,"props":536,"children":537},{"style":380},[538],{"type":179,"value":443},{"type":173,"tag":336,"props":540,"children":541},{"style":363},[542],{"type":179,"value":377},{"type":173,"tag":336,"props":544,"children":545},{"style":369},[546],{"type":179,"value":402},{"type":173,"tag":336,"props":548,"children":549},{"style":363},[550],{"type":179,"value":377},{"type":173,"tag":336,"props":552,"children":553},{"style":380},[554],{"type":179,"value":480},{"type":173,"tag":336,"props":556,"children":558},{"class":338,"line":557},9,[559],{"type":173,"tag":336,"props":560,"children":561},{"style":343},[562],{"type":179,"value":563},"    }\n",{"type":173,"tag":336,"props":565,"children":567},{"class":338,"line":566},10,[568],{"type":173,"tag":336,"props":569,"children":570},{"style":343},[571],{"type":179,"value":572},"  }\n",{"type":173,"tag":336,"props":574,"children":576},{"class":338,"line":575},11,[577],{"type":173,"tag":336,"props":578,"children":579},{"style":343},[580],{"type":179,"value":581},"}\n",{"type":173,"tag":231,"props":583,"children":584},{},[585],{"type":173,"tag":586,"props":587,"children":590},"img",{"alt":588,"src":589},"Command Execution","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20221005225436.png",[],{"type":173,"tag":224,"props":592,"children":594},{"id":593},"lerna-的任务缓存哈希来源",[595],{"type":179,"value":596},"lerna 的任务缓存哈希来源？",{"type":173,"tag":231,"props":598,"children":599},{},[600],{"type":179,"value":601},"可以在任务中启用任务的缓存，如果项目源文件、项目依赖、全局配置、执行环境（NodeJS Version）、命令行参数等条件都没有改变，则这个项目的任务就会命中上一次缓存。",{"type":173,"tag":603,"props":604,"children":605},"style",{},[606],{"type":179,"value":607},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":349,"depth":349,"links":609},[610,611,612],{"id":176,"depth":349,"text":180},{"id":220,"depth":349,"text":220},{"id":286,"depth":349,"text":289},"markdown","content:6.maps:_workflow:monorepo.md","content","6.maps/_workflow/monorepo.md","6.maps/_workflow/monorepo","md",[620,623],{"_path":621,"title":622,"description":166},"/maps/_workflow/linter/linter","Linter",{"_path":624,"title":625,"description":626},"/maps/_workflow/package-manager","包管理器","用于管理项目依赖的工具",1749722327856]