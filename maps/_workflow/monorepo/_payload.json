[{"data":1,"prerenderedAt":624},["ShallowReactive",2],{"navigation":3,"/maps/_workflow/monorepo":158,"/maps/_workflow/monorepo-surround":616},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":610,"_id":611,"_source":612,"_file":613,"_stem":614,"_extension":615},"/maps/_workflow/monorepo","_workflow",false,true,"","Monorepo","Monorepo 工程化实践指南，包含项目管理、依赖处理、任务调度等核心概念，以及 Lerna 等工具的使用说明。",{"type":167,"children":168,"toc":605},"root",[169,178,215,220,227,233,239,257,263,281,287,299,305,310,316,321,579,588,594,599],{"type":170,"tag":171,"props":172,"children":174},"element","h2",{"id":173},"todo",[175],{"type":176,"value":177},"text","TODO",{"type":170,"tag":179,"props":180,"children":181},"ul",{},[182,195,205],{"type":170,"tag":183,"props":184,"children":185},"li",{},[186],{"type":170,"tag":187,"props":188,"children":192},"a",{"href":189,"rel":190},"https://juejin.cn/post/7102452341210611720",[191],"nofollow",[193],{"type":176,"value":194},"现代 Monorepo 工程技术选型，聊聊我的思考",{"type":170,"tag":183,"props":196,"children":197},{},[198],{"type":170,"tag":187,"props":199,"children":202},{"href":200,"rel":201},"https://monorepo.tools/",[191],[203],{"type":176,"value":204},"Monorepo Tools",{"type":170,"tag":183,"props":206,"children":207},{},[208],{"type":170,"tag":187,"props":209,"children":212},{"href":210,"rel":211},"https://juejin.cn/post/6972139870231724045",[191],[213],{"type":176,"value":214},"Monorepo 的这些坑，我们帮你踩过了",{"type":170,"tag":171,"props":216,"children":218},{"id":217},"简介",[219],{"type":176,"value":217},{"type":170,"tag":221,"props":222,"children":224},"h4",{"id":223},"monorepo-是什么",[225],{"type":176,"value":226},"monorepo 是什么？",{"type":170,"tag":228,"props":229,"children":230},"p",{},[231],{"type":176,"value":232},"monorepo 对应 multi-repo，是“把多个仓库放到一个仓库中来管理”这种技术的统称，它可以给不同项目带来一致的工作流，使团队协作更加容易，减小项目的开发和维护成本。",{"type":170,"tag":221,"props":234,"children":236},{"id":235},"使用-monorepo-能解决什么问题",[237],{"type":176,"value":238},"使用 monorepo 能解决什么问题？",{"type":170,"tag":179,"props":240,"children":241},{},[242,247,252],{"type":170,"tag":183,"props":243,"children":244},{},[245],{"type":176,"value":246},"重复编码：不同项目需要维护多套基础建设（Husky、Linter、Test、CI、Sentry、Sonar）",{"type":170,"tag":183,"props":248,"children":249},{},[250],{"type":176,"value":251},"简化调试：多仓共享及调试代码成本高昂",{"type":170,"tag":183,"props":253,"children":254},{},[255],{"type":176,"value":256},"版本管理：公共部分代码一定是最新版本，所以便于调试和发版",{"type":170,"tag":221,"props":258,"children":260},{"id":259},"使用-monorepo-带来了什么问题",[261],{"type":176,"value":262},"使用 monorepo 带来了什么问题？",{"type":170,"tag":179,"props":264,"children":265},{},[266,271,276],{"type":170,"tag":183,"props":267,"children":268},{},[269],{"type":176,"value":270},"幽灵依赖：除非使用 pnpm 严格限制依赖，不然很容易碰到幽灵依赖的问题",{"type":170,"tag":183,"props":272,"children":273},{},[274],{"type":176,"value":275},"按需构建：需要手动使用 yarn lerna:changed 找出变化的项目进行按需构建",{"type":170,"tag":183,"props":277,"children":278},{},[279],{"type":176,"value":280},"提交记录混乱：需要使用更规范的分支管理及提交信息管理",{"type":170,"tag":171,"props":282,"children":284},{"id":283},"lerna",[285],{"type":176,"value":286},"Lerna",{"type":170,"tag":228,"props":288,"children":289},{},[290,292],{"type":176,"value":291},"见：",{"type":170,"tag":187,"props":293,"children":296},{"href":294,"rel":295},"https://lerna.js.org/docs/introduction",[191],[297],{"type":176,"value":298},"Lerna Doc",{"type":170,"tag":221,"props":300,"children":302},{"id":301},"lerna-如何管理项目间的依赖",[303],{"type":176,"value":304},"lerna 如何管理项目间的依赖？",{"type":170,"tag":228,"props":306,"children":307},{},[308],{"type":176,"value":309},"使用 lerna bootstrap --use-workspaces 指令将会使 lerna 代理包管理器的依赖 linking 过程（类似 yarn 的 pnp 模式）；如果不带 --use-workspaces 指令，将会使用传统的符号链接进行依赖管理。",{"type":170,"tag":221,"props":311,"children":313},{"id":312},"lerna-如何管理并行任务的依赖关系",[314],{"type":176,"value":315},"lerna 如何管理并行任务的依赖关系？",{"type":170,"tag":228,"props":317,"children":318},{},[319],{"type":176,"value":320},"可以在 nx.json 中启用 targetDefaults 配置指定任务间的依赖关系。",{"type":170,"tag":322,"props":323,"children":327},"pre",{"className":324,"code":325,"language":326,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","{\n  ...\n  \"targetDefaults\": {\n    \"build\": {\n      \"dependsOn\": [\"^build\", \"prebuild\"]\n    },\n    \"test\": {\n      \"dependsOn\": [\"build\"]\n    }\n  }\n}\n","js",[328],{"type":170,"tag":329,"props":330,"children":331},"code",{"__ignoreMap":163},[332,344,354,385,414,478,487,512,552,561,570],{"type":170,"tag":333,"props":334,"children":337},"span",{"class":335,"line":336},"line",1,[338],{"type":170,"tag":333,"props":339,"children":341},{"style":340},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[342],{"type":176,"value":343},"{\n",{"type":170,"tag":333,"props":345,"children":347},{"class":335,"line":346},2,[348],{"type":170,"tag":333,"props":349,"children":351},{"style":350},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[352],{"type":176,"value":353},"  ...\n",{"type":170,"tag":333,"props":355,"children":357},{"class":335,"line":356},3,[358,364,370,375,381],{"type":170,"tag":333,"props":359,"children":361},{"style":360},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[362],{"type":176,"value":363},"  \"",{"type":170,"tag":333,"props":365,"children":367},{"style":366},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[368],{"type":176,"value":369},"targetDefaults",{"type":170,"tag":333,"props":371,"children":372},{"style":360},[373],{"type":176,"value":374},"\"",{"type":170,"tag":333,"props":376,"children":378},{"style":377},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[379],{"type":176,"value":380},": ",{"type":170,"tag":333,"props":382,"children":383},{"style":340},[384],{"type":176,"value":343},{"type":170,"tag":333,"props":386,"children":388},{"class":335,"line":387},4,[389,394,400,404,409],{"type":170,"tag":333,"props":390,"children":391},{"style":360},[392],{"type":176,"value":393},"    \"",{"type":170,"tag":333,"props":395,"children":397},{"style":396},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[398],{"type":176,"value":399},"build",{"type":170,"tag":333,"props":401,"children":402},{"style":360},[403],{"type":176,"value":374},{"type":170,"tag":333,"props":405,"children":406},{"style":340},[407],{"type":176,"value":408},":",{"type":170,"tag":333,"props":410,"children":411},{"style":340},[412],{"type":176,"value":413}," {\n",{"type":170,"tag":333,"props":415,"children":417},{"class":335,"line":416},5,[418,423,428,432,436,441,445,450,454,459,464,469,473],{"type":170,"tag":333,"props":419,"children":420},{"style":360},[421],{"type":176,"value":422},"      \"",{"type":170,"tag":333,"props":424,"children":425},{"style":396},[426],{"type":176,"value":427},"dependsOn",{"type":170,"tag":333,"props":429,"children":430},{"style":360},[431],{"type":176,"value":374},{"type":170,"tag":333,"props":433,"children":434},{"style":340},[435],{"type":176,"value":408},{"type":170,"tag":333,"props":437,"children":438},{"style":377},[439],{"type":176,"value":440}," [",{"type":170,"tag":333,"props":442,"children":443},{"style":360},[444],{"type":176,"value":374},{"type":170,"tag":333,"props":446,"children":447},{"style":366},[448],{"type":176,"value":449},"^build",{"type":170,"tag":333,"props":451,"children":452},{"style":360},[453],{"type":176,"value":374},{"type":170,"tag":333,"props":455,"children":456},{"style":340},[457],{"type":176,"value":458},",",{"type":170,"tag":333,"props":460,"children":461},{"style":360},[462],{"type":176,"value":463}," \"",{"type":170,"tag":333,"props":465,"children":466},{"style":366},[467],{"type":176,"value":468},"prebuild",{"type":170,"tag":333,"props":470,"children":471},{"style":360},[472],{"type":176,"value":374},{"type":170,"tag":333,"props":474,"children":475},{"style":377},[476],{"type":176,"value":477},"]\n",{"type":170,"tag":333,"props":479,"children":481},{"class":335,"line":480},6,[482],{"type":170,"tag":333,"props":483,"children":484},{"style":340},[485],{"type":176,"value":486},"    },\n",{"type":170,"tag":333,"props":488,"children":490},{"class":335,"line":489},7,[491,495,500,504,508],{"type":170,"tag":333,"props":492,"children":493},{"style":360},[494],{"type":176,"value":393},{"type":170,"tag":333,"props":496,"children":497},{"style":396},[498],{"type":176,"value":499},"test",{"type":170,"tag":333,"props":501,"children":502},{"style":360},[503],{"type":176,"value":374},{"type":170,"tag":333,"props":505,"children":506},{"style":340},[507],{"type":176,"value":408},{"type":170,"tag":333,"props":509,"children":510},{"style":340},[511],{"type":176,"value":413},{"type":170,"tag":333,"props":513,"children":515},{"class":335,"line":514},8,[516,520,524,528,532,536,540,544,548],{"type":170,"tag":333,"props":517,"children":518},{"style":360},[519],{"type":176,"value":422},{"type":170,"tag":333,"props":521,"children":522},{"style":396},[523],{"type":176,"value":427},{"type":170,"tag":333,"props":525,"children":526},{"style":360},[527],{"type":176,"value":374},{"type":170,"tag":333,"props":529,"children":530},{"style":340},[531],{"type":176,"value":408},{"type":170,"tag":333,"props":533,"children":534},{"style":377},[535],{"type":176,"value":440},{"type":170,"tag":333,"props":537,"children":538},{"style":360},[539],{"type":176,"value":374},{"type":170,"tag":333,"props":541,"children":542},{"style":366},[543],{"type":176,"value":399},{"type":170,"tag":333,"props":545,"children":546},{"style":360},[547],{"type":176,"value":374},{"type":170,"tag":333,"props":549,"children":550},{"style":377},[551],{"type":176,"value":477},{"type":170,"tag":333,"props":553,"children":555},{"class":335,"line":554},9,[556],{"type":170,"tag":333,"props":557,"children":558},{"style":340},[559],{"type":176,"value":560},"    }\n",{"type":170,"tag":333,"props":562,"children":564},{"class":335,"line":563},10,[565],{"type":170,"tag":333,"props":566,"children":567},{"style":340},[568],{"type":176,"value":569},"  }\n",{"type":170,"tag":333,"props":571,"children":573},{"class":335,"line":572},11,[574],{"type":170,"tag":333,"props":575,"children":576},{"style":340},[577],{"type":176,"value":578},"}\n",{"type":170,"tag":228,"props":580,"children":581},{},[582],{"type":170,"tag":583,"props":584,"children":587},"img",{"alt":585,"src":586},"Command Execution","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20221005225436.png",[],{"type":170,"tag":221,"props":589,"children":591},{"id":590},"lerna-的任务缓存哈希来源",[592],{"type":176,"value":593},"lerna 的任务缓存哈希来源？",{"type":170,"tag":228,"props":595,"children":596},{},[597],{"type":176,"value":598},"可以在任务中启用任务的缓存，如果项目源文件、项目依赖、全局配置、执行环境（NodeJS Version）、命令行参数等条件都没有改变，则这个项目的任务就会命中上一次缓存。",{"type":170,"tag":600,"props":601,"children":602},"style",{},[603],{"type":176,"value":604},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":346,"depth":346,"links":606},[607,608,609],{"id":173,"depth":346,"text":177},{"id":217,"depth":346,"text":217},{"id":283,"depth":346,"text":286},"markdown","content:6.maps:_workflow:monorepo.md","content","6.maps/_workflow/monorepo.md","6.maps/_workflow/monorepo","md",[617,620],{"_path":618,"title":619,"description":163},"/maps/_workflow/linter/linter","Linter",{"_path":621,"title":622,"description":623},"/maps/_workflow/package-manager","包管理器","用于管理项目依赖的工具",1748756310080]