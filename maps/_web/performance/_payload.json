[{"data":1,"prerenderedAt":1843},["ShallowReactive",2],{"navigation":3,"/maps/_web/performance":158,"/maps/_web/performance-surround":1834},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":1828,"_id":1829,"_source":1830,"_file":1831,"_stem":1832,"_extension":1833},"/maps/_web/performance","_web",false,true,"","页面性能","全面的网页性能优化指南，涵盖性能指标、监控方案、优化策略，以及 SSR、PWA 等现代 Web 应用的性能优化实践。",{"type":167,"children":168,"toc":1817},"root",[169,177,184,190,196,201,207,212,221,227,232,238,267,292,306,312,363,370,374,387,392,398,403,409,417,423,428,436,446,452,457,463,468,867,878,884,889,900,906,911,1084,1095,1101,1106,1285,1296,1302,1313,1319,1330,1336,1341,1352,1358,1383,1390,1403,1408,1414,1419,1425,1431,1436,1442,1447,1455,1474,1480,1492,1498,1503,1509,1514,1522,1528,1538,1544,1549,1557,1563,1568,1573,1586,1591,1604,1609,1633,1638,1651,1656,1689,1694,1704,1811],{"type":170,"tag":171,"props":172,"children":174},"element","h2",{"id":173},"指标与模型",[175],{"type":176,"value":173},"text",{"type":170,"tag":178,"props":179,"children":181},"h4",{"id":180},"网页性能的上下游",[182],{"type":176,"value":183},"网页性能的上下游？",{"type":170,"tag":185,"props":186,"children":187},"p",{},[188],{"type":176,"value":189},"选定合适的 API 收集数据，进行简单预处理后，通过 SDK 上报到后端或者云服务。为了展示收集到的数据，可以设置 99 线等图表，在某些特定的业务场景，还可以设置 A/B 图和告警。",{"type":170,"tag":178,"props":191,"children":193},{"id":192},"性能指标和性能模型的不同",[194],{"type":176,"value":195},"性能指标和性能模型的不同？",{"type":170,"tag":185,"props":197,"children":198},{},[199],{"type":176,"value":200},"两个立场不同，性能指标如 Navigation Timing 使用绝对的量来衡量页面各项性能参数，性能模型如 Web Vitals 使用算法定性分析页面加载时的用户体验。",{"type":170,"tag":178,"props":202,"children":204},{"id":203},"为什么需要性能模型",[205],{"type":176,"value":206},"为什么需要性能模型？",{"type":170,"tag":185,"props":208,"children":209},{},[210],{"type":176,"value":211},"用户体验很难用具体或者绝对的量来衡定，比如说在渐进式加载中，只对比白屏时间和 onload 时间只能说明用户提早看到了内容，却不能说明渐进式加载好在哪里，好了多少。",{"type":170,"tag":185,"props":213,"children":214},{},[215],{"type":170,"tag":216,"props":217,"children":220},"img",{"alt":218,"src":219},"页面渐进式加载示例","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/progressive-rendering.png",[],{"type":170,"tag":178,"props":222,"children":224},{"id":223},"合成监控和真实用户监控是什么",[225],{"type":176,"value":226},"合成监控和真实用户监控是什么？",{"type":170,"tag":185,"props":228,"children":229},{},[230],{"type":176,"value":231},"从技术上来说，可以把监控分为合成监控（Synthetic Monitoring，SYN）和真实用户监控（Real User Monitoring，RUM）。合成监控是在一个模拟的场景中，使用 Lighthouse 等工具，提取出性能指标并获得审计报告。真实用户监控是在真实用户访问时，通过数据源获取数据，再上报到日志服务器，以用来展示和分析这么一流程。",{"type":170,"tag":178,"props":233,"children":235},{"id":234},"web-vitals-有哪些指标",[236],{"type":176,"value":237},"Web Vitals 有哪些指标？",{"type":170,"tag":185,"props":239,"children":240},{},[241,243,250,252,258,259,265],{"type":176,"value":242},"Web Vitals 关注 ",{"type":170,"tag":244,"props":245,"children":247},"abbr",{"title":246},"Largest Contentful Paint",[248],{"type":176,"value":249},"LCP",{"type":176,"value":251},"、",{"type":170,"tag":244,"props":253,"children":255},{"title":254},"First Input Delay",[256],{"type":176,"value":257},"FID",{"type":176,"value":251},{"type":170,"tag":244,"props":260,"children":262},{"title":261},"Cumulative Layout Shift",[263],{"type":176,"value":264},"CLS",{"type":176,"value":266}," 的测量，分别描述最大内容渲染时间评分、页面可交互时间评分和布局偏移评分。",{"type":170,"tag":268,"props":269,"children":271},"div",{"style":270},"display:flex; justify-content:space-evenly;",[272,274,280,281,286,287],{"type":176,"value":273},"\n  ",{"type":170,"tag":216,"props":275,"children":279},{"src":276,"width":277,"alt":278},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/lcp_ux.svg","33%","Largest Contentful Paint threshold recommendations",[],{"type":176,"value":273},{"type":170,"tag":216,"props":282,"children":285},{"src":283,"width":277,"alt":284},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/fid_ux.svg","First Input Delay threshold recommendations",[],{"type":176,"value":273},{"type":170,"tag":216,"props":288,"children":291},{"src":289,"width":277,"alt":290},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/cls_ux.svg","Cumulative Layout Shift threshold recommendations",[],{"type":170,"tag":185,"props":293,"children":294},{},[295,297],{"type":176,"value":296},"见：",{"type":170,"tag":298,"props":299,"children":303},"a",{"href":300,"rel":301},"https://github.com/GoogleChrome/web-vitals",[302],"nofollow",[304],{"type":176,"value":305},"Web Vitals",{"type":170,"tag":178,"props":307,"children":309},{"id":308},"有哪些开发工具",[310],{"type":176,"value":311},"有哪些开发工具？",{"type":170,"tag":313,"props":314,"children":315},"ul",{},[316,327,339,351],{"type":170,"tag":317,"props":318,"children":319},"li",{},[320,325],{"type":170,"tag":298,"props":321,"children":323},{"href":300,"rel":322},[302],[324],{"type":176,"value":305},{"type":176,"value":326},"，获取 Web Vitals 评分。",{"type":170,"tag":317,"props":328,"children":329},{},[330,337],{"type":170,"tag":298,"props":331,"children":334},{"href":332,"rel":333},"https://github.com/cssmagic/simple-web-perf",[302],[335],{"type":176,"value":336},"simple-web-perf",{"type":176,"value":338},"，Navigation Timing 数据上报封装。",{"type":170,"tag":317,"props":340,"children":341},{},[342,349],{"type":170,"tag":298,"props":343,"children":346},{"href":344,"rel":345},"https://github.com/Lionad-Morotar/webpack-lighthouse-plugin",[302],[347],{"type":176,"value":348},"webpack-lighthouse-plugin",{"type":176,"value":350},"，在打包结束后自动运行 Lighthouse 并输出报告。",{"type":170,"tag":317,"props":352,"children":353},{},[354,361],{"type":170,"tag":298,"props":355,"children":358},{"href":356,"rel":357},"https://github.com/cloudfour/lighthouse-parade",[302],[359],{"type":176,"value":360},"lighthouse-parade",{"type":176,"value":362},"，递归抓取页面并评分，输出关于网站的完整报告。",{"type":170,"tag":185,"props":364,"children":365},{},[366],{"type":170,"tag":216,"props":367,"children":369},{"alt":348,"src":368},"https://github.com/Lionad-Morotar/webpack-lighthouse-plugin/blob/main/assets/example.gif?raw=true",[],{"type":170,"tag":371,"props":372,"children":373},"hr",{},[],{"type":170,"tag":313,"props":375,"children":376},{},[377],{"type":170,"tag":317,"props":378,"children":379},{},[380],{"type":170,"tag":298,"props":381,"children":384},{"href":382,"rel":383},"https://developer.mozilla.org/zh-CN/docs/Web/Performance",[302],[385],{"type":176,"value":386},"TODO，Web Performance @MDN",{"type":170,"tag":171,"props":388,"children":390},{"id":389},"如何测量性能指标",[391],{"type":176,"value":389},{"type":170,"tag":178,"props":393,"children":395},{"id":394},"怎么测定页面帧率",[396],{"type":176,"value":397},"怎么测定页面帧率？",{"type":170,"tag":185,"props":399,"children":400},{},[401],{"type":176,"value":402},"可以使用 requestAnimationFrame，但是不推荐，因为脚本本身就会对性能造成影响。",{"type":170,"tag":178,"props":404,"children":406},{"id":405},"可以使用哪些-api-测量性能",[407],{"type":176,"value":408},"可以使用哪些 API 测量性能？",{"type":170,"tag":185,"props":410,"children":411},{},[412],{"type":170,"tag":216,"props":413,"children":416},{"alt":414,"src":415},"Web Performance Related Specs","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220630135906.png",[],{"type":170,"tag":178,"props":418,"children":420},{"id":419},"performance-timing-被弃用了",[421],{"type":176,"value":422},"Performance Timing 被弃用了？",{"type":170,"tag":185,"props":424,"children":425},{},[426],{"type":176,"value":427},"Performance Timing 被弃用了，取而代之的是 Performance Navigation Timing。不应该再使用 performance.navigation、performance.getEntries 等 API，这些旧的 API 没有办法肩检测如加载新脚本等情况，不支持新的性能指标如 Long Tasks API，此外可能干扰页面性能，所以推荐使用 Navigation Timing API 获取数据，并使用 Performance Observer 进行侦测。",{"type":170,"tag":185,"props":429,"children":430},{},[431],{"type":170,"tag":216,"props":432,"children":435},{"alt":433,"src":434},"Navigation Timing Level 2","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628165411.png",[],{"type":170,"tag":185,"props":437,"children":438},{},[439,440],{"type":176,"value":296},{"type":170,"tag":298,"props":441,"children":444},{"href":442,"rel":443},"https://www.w3.org/TR/navigation-timing-2/",[302],[445],{"type":176,"value":433},{"type":170,"tag":178,"props":447,"children":449},{"id":448},"navigation-timing-中不同的阶段是连续的吗",[450],{"type":176,"value":451},"Navigation Timing 中不同的阶段是连续的吗？",{"type":170,"tag":185,"props":453,"children":454},{},[455],{"type":176,"value":456},"可能不是。如浏览器有同域下最多 6 个请求并行的限制，那么 domainLoopupEnd 到 requestStart 之间可能会出现较长的等待时间（Stalled Time）。此外，不一定每个阶段都会有数据，如：未发生跳转时，redirectCount 为 0；如果页面没有 service worker，那么 workerStart 为 0；DNS 从缓存中获取时，domainLoopupStart 和 domainLoopupEnd 可能相等。",{"type":170,"tag":178,"props":458,"children":460},{"id":459},"performanceobserver-是什么",[461],{"type":176,"value":462},"PerformanceObserver 是什么？",{"type":170,"tag":185,"props":464,"children":465},{},[466],{"type":176,"value":467},"“有效的性能测量的第一条规则是确保性能测量技术本身不会导致性能问题”，使用 Performance Observer 可以获取某个具体类型的指标的同时不会干扰或影响页面性能，因为它会在浏览器空闲时期执行。",{"type":170,"tag":469,"props":470,"children":474},"pre",{"className":471,"code":472,"language":473,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","try {\n  // \"element\"、\"event\"、\"first-input\"、\n  // \"largest-contentful-paint\"、\"layout-shift\"、\n  // \"longtask\"、\"mark\"、\"measure\"、\n  // \"navigation\"、\"paint\"、\"resource\"\n    PerformanceObserver.supportedEntryTypes.map(type => {\n        new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            console.log(entry.toJSON())\n          }\n        }).observe({\n        type,\n        // 使用 buffered 可以在第一次回调时获取缓存区中的历史记录\n        buffered: true\n      })\n    })\n} catch {\n    // nothing  \n}\n","js",[475],{"type":170,"tag":476,"props":477,"children":478},"code",{"__ignoreMap":163},[479,497,507,516,525,534,586,627,681,722,731,761,775,784,804,818,831,849,858],{"type":170,"tag":480,"props":481,"children":484},"span",{"class":482,"line":483},"line",1,[485,491],{"type":170,"tag":480,"props":486,"children":488},{"style":487},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[489],{"type":176,"value":490},"try",{"type":170,"tag":480,"props":492,"children":494},{"style":493},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[495],{"type":176,"value":496}," {\n",{"type":170,"tag":480,"props":498,"children":500},{"class":482,"line":499},2,[501],{"type":170,"tag":480,"props":502,"children":504},{"style":503},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[505],{"type":176,"value":506},"  // \"element\"、\"event\"、\"first-input\"、\n",{"type":170,"tag":480,"props":508,"children":510},{"class":482,"line":509},3,[511],{"type":170,"tag":480,"props":512,"children":513},{"style":503},[514],{"type":176,"value":515},"  // \"largest-contentful-paint\"、\"layout-shift\"、\n",{"type":170,"tag":480,"props":517,"children":519},{"class":482,"line":518},4,[520],{"type":170,"tag":480,"props":521,"children":522},{"style":503},[523],{"type":176,"value":524},"  // \"longtask\"、\"mark\"、\"measure\"、\n",{"type":170,"tag":480,"props":526,"children":528},{"class":482,"line":527},5,[529],{"type":170,"tag":480,"props":530,"children":531},{"style":503},[532],{"type":176,"value":533},"  // \"navigation\"、\"paint\"、\"resource\"\n",{"type":170,"tag":480,"props":535,"children":537},{"class":482,"line":536},6,[538,544,549,554,558,564,570,576,582],{"type":170,"tag":480,"props":539,"children":541},{"style":540},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[542],{"type":176,"value":543},"    PerformanceObserver",{"type":170,"tag":480,"props":545,"children":546},{"style":493},[547],{"type":176,"value":548},".",{"type":170,"tag":480,"props":550,"children":551},{"style":540},[552],{"type":176,"value":553},"supportedEntryTypes",{"type":170,"tag":480,"props":555,"children":556},{"style":493},[557],{"type":176,"value":548},{"type":170,"tag":480,"props":559,"children":561},{"style":560},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[562],{"type":176,"value":563},"map",{"type":170,"tag":480,"props":565,"children":567},{"style":566},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[568],{"type":176,"value":569},"(",{"type":170,"tag":480,"props":571,"children":573},{"style":572},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[574],{"type":176,"value":575},"type",{"type":170,"tag":480,"props":577,"children":579},{"style":578},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[580],{"type":176,"value":581}," =>",{"type":170,"tag":480,"props":583,"children":584},{"style":493},[585],{"type":176,"value":496},{"type":170,"tag":480,"props":587,"children":589},{"class":482,"line":588},7,[590,596,601,605,609,614,619,623],{"type":170,"tag":480,"props":591,"children":593},{"style":592},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[594],{"type":176,"value":595},"        new",{"type":170,"tag":480,"props":597,"children":598},{"style":560},[599],{"type":176,"value":600}," PerformanceObserver",{"type":170,"tag":480,"props":602,"children":603},{"style":566},[604],{"type":176,"value":569},{"type":170,"tag":480,"props":606,"children":607},{"style":493},[608],{"type":176,"value":569},{"type":170,"tag":480,"props":610,"children":611},{"style":572},[612],{"type":176,"value":613},"list",{"type":170,"tag":480,"props":615,"children":616},{"style":493},[617],{"type":176,"value":618},")",{"type":170,"tag":480,"props":620,"children":621},{"style":578},[622],{"type":176,"value":581},{"type":170,"tag":480,"props":624,"children":625},{"style":493},[626],{"type":176,"value":496},{"type":170,"tag":480,"props":628,"children":630},{"class":482,"line":629},8,[631,636,641,646,652,657,662,666,671,676],{"type":170,"tag":480,"props":632,"children":633},{"style":487},[634],{"type":176,"value":635},"          for",{"type":170,"tag":480,"props":637,"children":638},{"style":566},[639],{"type":176,"value":640}," (",{"type":170,"tag":480,"props":642,"children":643},{"style":578},[644],{"type":176,"value":645},"const",{"type":170,"tag":480,"props":647,"children":649},{"style":648},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[650],{"type":176,"value":651}," entry",{"type":170,"tag":480,"props":653,"children":654},{"style":592},[655],{"type":176,"value":656}," of",{"type":170,"tag":480,"props":658,"children":659},{"style":540},[660],{"type":176,"value":661}," list",{"type":170,"tag":480,"props":663,"children":664},{"style":493},[665],{"type":176,"value":548},{"type":170,"tag":480,"props":667,"children":668},{"style":560},[669],{"type":176,"value":670},"getEntries",{"type":170,"tag":480,"props":672,"children":673},{"style":566},[674],{"type":176,"value":675},"()) ",{"type":170,"tag":480,"props":677,"children":678},{"style":493},[679],{"type":176,"value":680},"{\n",{"type":170,"tag":480,"props":682,"children":684},{"class":482,"line":683},9,[685,690,694,699,703,708,712,717],{"type":170,"tag":480,"props":686,"children":687},{"style":540},[688],{"type":176,"value":689},"            console",{"type":170,"tag":480,"props":691,"children":692},{"style":493},[693],{"type":176,"value":548},{"type":170,"tag":480,"props":695,"children":696},{"style":560},[697],{"type":176,"value":698},"log",{"type":170,"tag":480,"props":700,"children":701},{"style":566},[702],{"type":176,"value":569},{"type":170,"tag":480,"props":704,"children":705},{"style":540},[706],{"type":176,"value":707},"entry",{"type":170,"tag":480,"props":709,"children":710},{"style":493},[711],{"type":176,"value":548},{"type":170,"tag":480,"props":713,"children":714},{"style":560},[715],{"type":176,"value":716},"toJSON",{"type":170,"tag":480,"props":718,"children":719},{"style":566},[720],{"type":176,"value":721},"())\n",{"type":170,"tag":480,"props":723,"children":725},{"class":482,"line":724},10,[726],{"type":170,"tag":480,"props":727,"children":728},{"style":493},[729],{"type":176,"value":730},"          }\n",{"type":170,"tag":480,"props":732,"children":734},{"class":482,"line":733},11,[735,740,744,748,753,757],{"type":170,"tag":480,"props":736,"children":737},{"style":493},[738],{"type":176,"value":739},"        }",{"type":170,"tag":480,"props":741,"children":742},{"style":566},[743],{"type":176,"value":618},{"type":170,"tag":480,"props":745,"children":746},{"style":493},[747],{"type":176,"value":548},{"type":170,"tag":480,"props":749,"children":750},{"style":560},[751],{"type":176,"value":752},"observe",{"type":170,"tag":480,"props":754,"children":755},{"style":566},[756],{"type":176,"value":569},{"type":170,"tag":480,"props":758,"children":759},{"style":493},[760],{"type":176,"value":680},{"type":170,"tag":480,"props":762,"children":764},{"class":482,"line":763},12,[765,770],{"type":170,"tag":480,"props":766,"children":767},{"style":540},[768],{"type":176,"value":769},"        type",{"type":170,"tag":480,"props":771,"children":772},{"style":493},[773],{"type":176,"value":774},",\n",{"type":170,"tag":480,"props":776,"children":778},{"class":482,"line":777},13,[779],{"type":170,"tag":480,"props":780,"children":781},{"style":503},[782],{"type":176,"value":783},"        // 使用 buffered 可以在第一次回调时获取缓存区中的历史记录\n",{"type":170,"tag":480,"props":785,"children":787},{"class":482,"line":786},14,[788,793,798],{"type":170,"tag":480,"props":789,"children":790},{"style":566},[791],{"type":176,"value":792},"        buffered",{"type":170,"tag":480,"props":794,"children":795},{"style":493},[796],{"type":176,"value":797},":",{"type":170,"tag":480,"props":799,"children":801},{"style":800},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[802],{"type":176,"value":803}," true\n",{"type":170,"tag":480,"props":805,"children":807},{"class":482,"line":806},15,[808,813],{"type":170,"tag":480,"props":809,"children":810},{"style":493},[811],{"type":176,"value":812},"      }",{"type":170,"tag":480,"props":814,"children":815},{"style":566},[816],{"type":176,"value":817},")\n",{"type":170,"tag":480,"props":819,"children":821},{"class":482,"line":820},16,[822,827],{"type":170,"tag":480,"props":823,"children":824},{"style":493},[825],{"type":176,"value":826},"    }",{"type":170,"tag":480,"props":828,"children":829},{"style":566},[830],{"type":176,"value":817},{"type":170,"tag":480,"props":832,"children":834},{"class":482,"line":833},17,[835,840,845],{"type":170,"tag":480,"props":836,"children":837},{"style":493},[838],{"type":176,"value":839},"}",{"type":170,"tag":480,"props":841,"children":842},{"style":487},[843],{"type":176,"value":844}," catch",{"type":170,"tag":480,"props":846,"children":847},{"style":493},[848],{"type":176,"value":496},{"type":170,"tag":480,"props":850,"children":852},{"class":482,"line":851},18,[853],{"type":170,"tag":480,"props":854,"children":855},{"style":503},[856],{"type":176,"value":857},"    // nothing  \n",{"type":170,"tag":480,"props":859,"children":861},{"class":482,"line":860},19,[862],{"type":170,"tag":480,"props":863,"children":864},{"style":493},[865],{"type":176,"value":866},"}\n",{"type":170,"tag":185,"props":868,"children":869},{},[870,871],{"type":176,"value":296},{"type":170,"tag":298,"props":872,"children":875},{"href":873,"rel":874},"https://web.dev/custom-metrics/#",[302],[876],{"type":176,"value":877},"Performance Observer",{"type":170,"tag":178,"props":879,"children":881},{"id":880},"long-tasks-api-是什么",[882],{"type":176,"value":883},"Long Tasks API 是什么？",{"type":170,"tag":185,"props":885,"children":886},{},[887],{"type":176,"value":888},"Long Tasks API 将会汇报使主线程阻塞超过 50ms 的任何任务。通过观测阻塞时长，可以获得诸如 TTI（Time To Interactive）、TBT（Total Blocking Time）等数据。",{"type":170,"tag":185,"props":890,"children":891},{},[892,893],{"type":176,"value":296},{"type":170,"tag":298,"props":894,"children":897},{"href":895,"rel":896},"https://web.dev/custom-metrics/#long-tasks-api",[302],[898],{"type":176,"value":899},"Long Tasks API",{"type":170,"tag":178,"props":901,"children":903},{"id":902},"如何测量函数执行的时长",[904],{"type":176,"value":905},"如何测量函数执行的时长？",{"type":170,"tag":185,"props":907,"children":908},{},[909],{"type":176,"value":910},"可以使用 Date.now()、performance.now()，但是如果不考虑兼容性的话，使用 User Timing API 要更好一些，它可以和相关套件很好的结合：比如说在 Performance 面板中可视化，或通过 Performance Observer 进行观测。",{"type":170,"tag":469,"props":912,"children":914},{"className":471,"code":913,"language":473,"meta":163,"style":163},"performance.mark('myTask:start')\nawait task()\nperformance.mark('myTask:end')\nperformance.measure('myTask', 'myTask:start', 'myTask:end')\n",[915],{"type":170,"tag":476,"props":916,"children":917},{"__ignoreMap":163},[918,959,977,1013],{"type":170,"tag":480,"props":919,"children":920},{"class":482,"line":483},[921,926,930,935,939,945,951,955],{"type":170,"tag":480,"props":922,"children":923},{"style":540},[924],{"type":176,"value":925},"performance",{"type":170,"tag":480,"props":927,"children":928},{"style":493},[929],{"type":176,"value":548},{"type":170,"tag":480,"props":931,"children":932},{"style":560},[933],{"type":176,"value":934},"mark",{"type":170,"tag":480,"props":936,"children":937},{"style":540},[938],{"type":176,"value":569},{"type":170,"tag":480,"props":940,"children":942},{"style":941},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[943],{"type":176,"value":944},"'",{"type":170,"tag":480,"props":946,"children":948},{"style":947},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[949],{"type":176,"value":950},"myTask:start",{"type":170,"tag":480,"props":952,"children":953},{"style":941},[954],{"type":176,"value":944},{"type":170,"tag":480,"props":956,"children":957},{"style":540},[958],{"type":176,"value":817},{"type":170,"tag":480,"props":960,"children":961},{"class":482,"line":499},[962,967,972],{"type":170,"tag":480,"props":963,"children":964},{"style":487},[965],{"type":176,"value":966},"await",{"type":170,"tag":480,"props":968,"children":969},{"style":560},[970],{"type":176,"value":971}," task",{"type":170,"tag":480,"props":973,"children":974},{"style":540},[975],{"type":176,"value":976},"()\n",{"type":170,"tag":480,"props":978,"children":979},{"class":482,"line":509},[980,984,988,992,996,1000,1005,1009],{"type":170,"tag":480,"props":981,"children":982},{"style":540},[983],{"type":176,"value":925},{"type":170,"tag":480,"props":985,"children":986},{"style":493},[987],{"type":176,"value":548},{"type":170,"tag":480,"props":989,"children":990},{"style":560},[991],{"type":176,"value":934},{"type":170,"tag":480,"props":993,"children":994},{"style":540},[995],{"type":176,"value":569},{"type":170,"tag":480,"props":997,"children":998},{"style":941},[999],{"type":176,"value":944},{"type":170,"tag":480,"props":1001,"children":1002},{"style":947},[1003],{"type":176,"value":1004},"myTask:end",{"type":170,"tag":480,"props":1006,"children":1007},{"style":941},[1008],{"type":176,"value":944},{"type":170,"tag":480,"props":1010,"children":1011},{"style":540},[1012],{"type":176,"value":817},{"type":170,"tag":480,"props":1014,"children":1015},{"class":482,"line":518},[1016,1020,1024,1029,1033,1037,1042,1046,1051,1056,1060,1064,1068,1072,1076,1080],{"type":170,"tag":480,"props":1017,"children":1018},{"style":540},[1019],{"type":176,"value":925},{"type":170,"tag":480,"props":1021,"children":1022},{"style":493},[1023],{"type":176,"value":548},{"type":170,"tag":480,"props":1025,"children":1026},{"style":560},[1027],{"type":176,"value":1028},"measure",{"type":170,"tag":480,"props":1030,"children":1031},{"style":540},[1032],{"type":176,"value":569},{"type":170,"tag":480,"props":1034,"children":1035},{"style":941},[1036],{"type":176,"value":944},{"type":170,"tag":480,"props":1038,"children":1039},{"style":947},[1040],{"type":176,"value":1041},"myTask",{"type":170,"tag":480,"props":1043,"children":1044},{"style":941},[1045],{"type":176,"value":944},{"type":170,"tag":480,"props":1047,"children":1048},{"style":493},[1049],{"type":176,"value":1050},",",{"type":170,"tag":480,"props":1052,"children":1053},{"style":941},[1054],{"type":176,"value":1055}," '",{"type":170,"tag":480,"props":1057,"children":1058},{"style":947},[1059],{"type":176,"value":950},{"type":170,"tag":480,"props":1061,"children":1062},{"style":941},[1063],{"type":176,"value":944},{"type":170,"tag":480,"props":1065,"children":1066},{"style":493},[1067],{"type":176,"value":1050},{"type":170,"tag":480,"props":1069,"children":1070},{"style":941},[1071],{"type":176,"value":1055},{"type":170,"tag":480,"props":1073,"children":1074},{"style":947},[1075],{"type":176,"value":1004},{"type":170,"tag":480,"props":1077,"children":1078},{"style":941},[1079],{"type":176,"value":944},{"type":170,"tag":480,"props":1081,"children":1082},{"style":540},[1083],{"type":176,"value":817},{"type":170,"tag":185,"props":1085,"children":1086},{},[1087,1088],{"type":176,"value":296},{"type":170,"tag":298,"props":1089,"children":1092},{"href":1090,"rel":1091},"https://web.dev/custom-metrics/#user-timing-api",[302],[1093],{"type":176,"value":1094},"User Timing API",{"type":170,"tag":178,"props":1096,"children":1098},{"id":1097},"如何测量元素的渲染时间",[1099],{"type":176,"value":1100},"如何测量元素的渲染时间？",{"type":170,"tag":185,"props":1102,"children":1103},{},[1104],{"type":176,"value":1105},"可以使用 Element Timing API。通过给 element 增加 elementtiming 属性，可以在注册 Performance Observer 后监听 element 类型的事件并获得元素渲染时间。LCP 指标就是建立在 ET API 基础上的，只是汇报的是最大内容元素的渲染时间。",{"type":170,"tag":469,"props":1107,"children":1111},{"className":1108,"code":1109,"language":1110,"meta":163,"style":163},"language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Cimg elementtiming=\"hero-image\" />\n\u003Cscript>\n  new PerformanceObserver(/* ... */)\n    .observe({ type: 'element', buffered: true })\n\u003C/script>\n","html",[1112],{"type":170,"tag":476,"props":1113,"children":1114},{"__ignoreMap":163},[1115,1158,1175,1200,1269],{"type":170,"tag":480,"props":1116,"children":1117},{"class":482,"line":483},[1118,1123,1128,1134,1139,1144,1149,1153],{"type":170,"tag":480,"props":1119,"children":1120},{"style":493},[1121],{"type":176,"value":1122},"\u003C",{"type":170,"tag":480,"props":1124,"children":1126},{"style":1125},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1127],{"type":176,"value":216},{"type":170,"tag":480,"props":1129,"children":1131},{"style":1130},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1132],{"type":176,"value":1133}," elementtiming",{"type":170,"tag":480,"props":1135,"children":1136},{"style":493},[1137],{"type":176,"value":1138},"=",{"type":170,"tag":480,"props":1140,"children":1141},{"style":941},[1142],{"type":176,"value":1143},"\"",{"type":170,"tag":480,"props":1145,"children":1146},{"style":947},[1147],{"type":176,"value":1148},"hero-image",{"type":170,"tag":480,"props":1150,"children":1151},{"style":941},[1152],{"type":176,"value":1143},{"type":170,"tag":480,"props":1154,"children":1155},{"style":493},[1156],{"type":176,"value":1157}," />\n",{"type":170,"tag":480,"props":1159,"children":1160},{"class":482,"line":499},[1161,1165,1170],{"type":170,"tag":480,"props":1162,"children":1163},{"style":493},[1164],{"type":176,"value":1122},{"type":170,"tag":480,"props":1166,"children":1167},{"style":1125},[1168],{"type":176,"value":1169},"script",{"type":170,"tag":480,"props":1171,"children":1172},{"style":493},[1173],{"type":176,"value":1174},">\n",{"type":170,"tag":480,"props":1176,"children":1177},{"class":482,"line":509},[1178,1183,1187,1191,1196],{"type":170,"tag":480,"props":1179,"children":1180},{"style":592},[1181],{"type":176,"value":1182},"  new",{"type":170,"tag":480,"props":1184,"children":1185},{"style":560},[1186],{"type":176,"value":600},{"type":170,"tag":480,"props":1188,"children":1189},{"style":540},[1190],{"type":176,"value":569},{"type":170,"tag":480,"props":1192,"children":1193},{"style":503},[1194],{"type":176,"value":1195},"/* ... */",{"type":170,"tag":480,"props":1197,"children":1198},{"style":540},[1199],{"type":176,"value":817},{"type":170,"tag":480,"props":1201,"children":1202},{"class":482,"line":518},[1203,1208,1212,1216,1221,1226,1230,1234,1238,1242,1246,1251,1255,1260,1265],{"type":170,"tag":480,"props":1204,"children":1205},{"style":493},[1206],{"type":176,"value":1207},"    .",{"type":170,"tag":480,"props":1209,"children":1210},{"style":560},[1211],{"type":176,"value":752},{"type":170,"tag":480,"props":1213,"children":1214},{"style":540},[1215],{"type":176,"value":569},{"type":170,"tag":480,"props":1217,"children":1218},{"style":493},[1219],{"type":176,"value":1220},"{",{"type":170,"tag":480,"props":1222,"children":1223},{"style":566},[1224],{"type":176,"value":1225}," type",{"type":170,"tag":480,"props":1227,"children":1228},{"style":493},[1229],{"type":176,"value":797},{"type":170,"tag":480,"props":1231,"children":1232},{"style":941},[1233],{"type":176,"value":1055},{"type":170,"tag":480,"props":1235,"children":1236},{"style":947},[1237],{"type":176,"value":170},{"type":170,"tag":480,"props":1239,"children":1240},{"style":941},[1241],{"type":176,"value":944},{"type":170,"tag":480,"props":1243,"children":1244},{"style":493},[1245],{"type":176,"value":1050},{"type":170,"tag":480,"props":1247,"children":1248},{"style":566},[1249],{"type":176,"value":1250}," buffered",{"type":170,"tag":480,"props":1252,"children":1253},{"style":493},[1254],{"type":176,"value":797},{"type":170,"tag":480,"props":1256,"children":1257},{"style":800},[1258],{"type":176,"value":1259}," true",{"type":170,"tag":480,"props":1261,"children":1262},{"style":493},[1263],{"type":176,"value":1264}," }",{"type":170,"tag":480,"props":1266,"children":1267},{"style":540},[1268],{"type":176,"value":817},{"type":170,"tag":480,"props":1270,"children":1271},{"class":482,"line":527},[1272,1277,1281],{"type":170,"tag":480,"props":1273,"children":1274},{"style":493},[1275],{"type":176,"value":1276},"\u003C/",{"type":170,"tag":480,"props":1278,"children":1279},{"style":1125},[1280],{"type":176,"value":1169},{"type":170,"tag":480,"props":1282,"children":1283},{"style":493},[1284],{"type":176,"value":1174},{"type":170,"tag":185,"props":1286,"children":1287},{},[1288,1289],{"type":176,"value":296},{"type":170,"tag":298,"props":1290,"children":1293},{"href":1291,"rel":1292},"https://web.dev/custom-metrics/#element-timing-api",[302],[1294],{"type":176,"value":1295},"Element Timing API",{"type":170,"tag":178,"props":1297,"children":1299},{"id":1298},"event-timing-api-是什么",[1300],{"type":176,"value":1301},"Event Timing API 是什么？",{"type":170,"tag":185,"props":1303,"children":1304},{},[1305,1306],{"type":176,"value":296},{"type":170,"tag":298,"props":1307,"children":1310},{"href":1308,"rel":1309},"https://web.dev/custom-metrics/#event-timing-api",[302],[1311],{"type":176,"value":1312},"Event Timing API",{"type":170,"tag":178,"props":1314,"children":1316},{"id":1315},"resource-timing-api-是什么",[1317],{"type":176,"value":1318},"Resource Timing API 是什么？",{"type":170,"tag":185,"props":1320,"children":1321},{},[1322,1323],{"type":176,"value":296},{"type":170,"tag":298,"props":1324,"children":1327},{"href":1325,"rel":1326},"https://web.dev/custom-metrics/#resource-timing-api",[302],[1328],{"type":176,"value":1329},"Resource Timing API",{"type":170,"tag":178,"props":1331,"children":1333},{"id":1332},"navigation-timing-api-是什么",[1334],{"type":176,"value":1335},"Navigation Timing API 是什么？",{"type":170,"tag":185,"props":1337,"children":1338},{},[1339],{"type":176,"value":1340},"类似于 Resource Timing API，但不同的地方在于它会在导航时被触发，还附带了 DOMContentLoaded 和 load 事件的触发事件。",{"type":170,"tag":185,"props":1342,"children":1343},{},[1344,1345],{"type":176,"value":296},{"type":170,"tag":298,"props":1346,"children":1349},{"href":1347,"rel":1348},"https://web.dev/custom-metrics/#navigation-timing-api",[302],[1350],{"type":176,"value":1351},"Navigation Timing API",{"type":170,"tag":178,"props":1353,"children":1355},{"id":1354},"除了规范定义数据还可以上报哪些",[1356],{"type":176,"value":1357},"除了规范定义数据，还可以上报哪些？",{"type":170,"tag":185,"props":1359,"children":1360},{},[1361,1367,1369,1374,1376,1381],{"type":170,"tag":1362,"props":1363,"children":1364},"strong",{},[1365],{"type":176,"value":1366},"5W",{"type":176,"value":1368},"：时间、地理位置、页面 URL、浏览器、系统、账号 ID、现场还原。",{"type":170,"tag":1362,"props":1370,"children":1371},{},[1372],{"type":176,"value":1373},"网络",{"type":176,"value":1375},"：页面加载方式、Service Worker、HTTP 协议版本、资源压缩方式。",{"type":170,"tag":1362,"props":1377,"children":1378},{},[1379],{"type":176,"value":1380},"其它",{"type":176,"value":1382},"：页面在前台还是后台。",{"type":170,"tag":1384,"props":1385,"children":1387},"h3",{"id":1386},"links",[1388],{"type":176,"value":1389},"Links",{"type":170,"tag":313,"props":1391,"children":1392},{},[1393],{"type":170,"tag":317,"props":1394,"children":1395},{},[1396],{"type":170,"tag":298,"props":1397,"children":1400},{"href":1398,"rel":1399},"https://mp.weixin.qq.com/s/pqFhhb5u6w7gmUutilH5xQ",[302],[1401],{"type":176,"value":1402},"蚂蚁金服如何把前端性能监控做到极致?",{"type":170,"tag":171,"props":1404,"children":1406},{"id":1405},"性能优化",[1407],{"type":176,"value":1405},{"type":170,"tag":178,"props":1409,"children":1411},{"id":1410},"做性能优化的基本法则是什么",[1412],{"type":176,"value":1413},"做性能优化的基本法则是什么？",{"type":170,"tag":185,"props":1415,"children":1416},{},[1417],{"type":176,"value":1418},"编译层参见 webpack 优化；网络层减少请求；客户端预加载、预渲染、预执行。以及两句名言：“空间换时间”、“串行改并行”。",{"type":170,"tag":171,"props":1420,"children":1422},{"id":1421},"ssr-及混合应用优化",[1423],{"type":176,"value":1424},"SSR 及混合应用优化",{"type":170,"tag":178,"props":1426,"children":1428},{"id":1427},"csr-是什么",[1429],{"type":176,"value":1430},"CSR 是什么？",{"type":170,"tag":185,"props":1432,"children":1433},{},[1434],{"type":176,"value":1435},"Client Side Rendering，和 SSR 相对应，指页面渲染、逻辑、路由、请求都是在浏览器发生的。想要提高 CSR 项目的用户体验，可以考虑在编译时通过预渲染首屏、骨架屏等形式对性能指标进行优化，或者，上 SSR。",{"type":170,"tag":178,"props":1437,"children":1439},{"id":1438},"从-csr-到-ssr-有哪些过渡方案",[1440],{"type":176,"value":1441},"从 CSR 到 SSR 有哪些过渡方案？",{"type":170,"tag":185,"props":1443,"children":1444},{},[1445],{"type":176,"value":1446},"CSP -> CSP with prerender -> SSR with hydration -> static SSR -> SSR",{"type":170,"tag":185,"props":1448,"children":1449},{},[1450],{"type":170,"tag":216,"props":1451,"children":1454},{"alt":1452,"src":1453},"From CSP to SSR","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220629020645.png",[],{"type":170,"tag":185,"props":1456,"children":1457},{},[1458,1459,1466,1467],{"type":176,"value":296},{"type":170,"tag":298,"props":1460,"children":1463},{"href":1461,"rel":1462},"https://web.dev/rendering-on-the-web/",[302],[1464],{"type":176,"value":1465},"TODO，Rendering on the Web",{"type":176,"value":251},{"type":170,"tag":298,"props":1468,"children":1471},{"href":1469,"rel":1470},"https://blog.csdn.net/m0_37411791/article/details/106513195?utm_source=blogxgwz7",[302],[1472],{"type":176,"value":1473},"CSR、SSR、NSR、ESR傻傻分不清楚",{"type":170,"tag":178,"props":1475,"children":1477},{"id":1476},"esr-是什么",[1478],{"type":176,"value":1479},"ESR 是什么？",{"type":170,"tag":185,"props":1481,"children":1482},{},[1483,1485],{"type":176,"value":1484},"TODO，",{"type":170,"tag":298,"props":1486,"children":1489},{"href":1487,"rel":1488},"https://juejin.im/post/5ecf90b7f265da76e7651a96",[302],[1490],{"type":176,"value":1491},"边缘计算说过吗？淘宝用它提升了69%的首屏性能",{"type":170,"tag":178,"props":1493,"children":1495},{"id":1494},"经典直出方案是什么",[1496],{"type":176,"value":1497},"经典直出方案是什么？",{"type":170,"tag":185,"props":1499,"children":1500},{},[1501],{"type":176,"value":1502},"直出指在后端渲染好 HTML 后再回传给客户端这种方式，直出可以节约许多 HTML 渲染及 AJAX 请求的时间，对 Web 前端的侵入性最小。",{"type":170,"tag":178,"props":1504,"children":1506},{"id":1505},"离线包缓存是什么",[1507],{"type":176,"value":1508},"离线包缓存是什么？",{"type":170,"tag":185,"props":1510,"children":1511},{},[1512],{"type":176,"value":1513},"直出方案仍需要把时间花在请求、加载 HTML 上，离线包缓存意味着把 HTML、CSS、JS、数据提前缓存在本地，只有部分需要异步更新的页面才通过请求的方式加载新数据并重新渲染页面。",{"type":170,"tag":185,"props":1515,"children":1516},{},[1517],{"type":170,"tag":216,"props":1518,"children":1521},{"alt":1519,"src":1520},"直出 VS 离线包缓存","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628233615.png",[],{"type":170,"tag":178,"props":1523,"children":1525},{"id":1524},"容器化方案是什么",[1526],{"type":176,"value":1527},"容器化方案是什么？",{"type":170,"tag":185,"props":1529,"children":1530},{},[1531,1532],{"type":176,"value":1484},{"type":170,"tag":298,"props":1533,"children":1536},{"href":1534,"rel":1535},"http://www.alloyteam.com/2020/06/fast-open-h5/",[302],[1537],{"type":176,"value":1534},{"type":170,"tag":178,"props":1539,"children":1541},{"id":1540},"pwa-怎么配合-ssr-做优化",[1542],{"type":176,"value":1543},"PWA 怎么配合 SSR 做优化？",{"type":170,"tag":185,"props":1545,"children":1546},{},[1547],{"type":176,"value":1548},"PWA 能够通过 Service Worker 对缓存进行精细化控制，在客户端使用无头浏览器提前加载 HTML，等到实际加载时请求的就是由 Service Worker 缓存下来的资源了。",{"type":170,"tag":185,"props":1550,"children":1551},{},[1552],{"type":170,"tag":216,"props":1553,"children":1556},{"alt":1554,"src":1555},"PWA + Headless Webview","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628235637.png?w=30",[],{"type":170,"tag":178,"props":1558,"children":1560},{"id":1559},"nsr-是什么",[1561],{"type":176,"value":1562},"NSR 是什么？",{"type":170,"tag":185,"props":1564,"children":1565},{},[1566],{"type":176,"value":1567},"Native Side Render，GMTC 2019 UC 团队提到的一种“前端 SSR”方案，它借助浏览器启动一个额外的 JS Runtime，将提前下载好的 HTML 模板和数据预渲染出来。这种方案的瓶颈在于他会带来额外的流量和性能开销，所以如何预测用户行为，提高命中率是非常重要的事。",{"type":170,"tag":1384,"props":1569,"children":1571},{"id":1570},"links-1",[1572],{"type":176,"value":1389},{"type":170,"tag":313,"props":1574,"children":1575},{},[1576],{"type":170,"tag":317,"props":1577,"children":1578},{},[1579],{"type":170,"tag":298,"props":1580,"children":1583},{"href":1581,"rel":1582},"http://www.alloyteam.com/2019/10/h5-performance-optimize",[302],[1584],{"type":176,"value":1585},"H5 秒开方案大全",{"type":170,"tag":171,"props":1587,"children":1589},{"id":1588},"阅读更多",[1590],{"type":176,"value":1588},{"type":170,"tag":178,"props":1592,"children":1594},{"id":1593},"react-16-加载性能优化指南",[1595,1602],{"type":170,"tag":1596,"props":1597,"children":1601},"link",{"type":1598,"to":1599,"source":1600},"h5","https://mgear-file.oss-cn-shanghai.aliyuncs.com/React%2016%20%E5%8A%A0%E8%BD%BD%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97.html","https://zhuanlan.zhihu.com/p/37148975",[],{"type":176,"value":1603},"《React 16 加载性能优化指南》",{"type":170,"tag":185,"props":1605,"children":1606},{},[1607],{"type":176,"value":1608},"作者把页面加载状态划分了四个步骤：",{"type":170,"tag":1610,"props":1611,"children":1612},"ol",{},[1613,1618,1623,1628],{"type":170,"tag":317,"props":1614,"children":1615},{},[1616],{"type":176,"value":1617},"打开页面到首屏渲染（浏览器首次渲染可见的内容）",{"type":170,"tag":317,"props":1619,"children":1620},{},[1621],{"type":176,"value":1622},"首屏渲染到首次内容渲染（相关业务的内容）",{"type":170,"tag":317,"props":1624,"children":1625},{},[1626],{"type":176,"value":1627},"内容渲染到页面可交互",{"type":170,"tag":317,"props":1629,"children":1630},{},[1631],{"type":176,"value":1632},"页面逐渐加载（诸如图片等元素）直到页面内容加载完毕",{"type":170,"tag":185,"props":1634,"children":1635},{},[1636],{"type":176,"value":1637},"在很多应用中，首屏渲染约等于首次内容渲染，这是因为加载 HTML 和 CSS 之后，要等待业务 JS 加载完毕才能看到有意义的内容。其实可以通过几种方法完善首屏加载的 HTML 和 CSS，增加加载状态，减少用户等待焦虑。",{"type":170,"tag":313,"props":1639,"children":1640},{},[1641,1646],{"type":170,"tag":317,"props":1642,"children":1643},{},[1644],{"type":176,"value":1645},"在 HTML 模板中使用 SVG 图案（比如通过 html-webpack-plugin 自动插入）",{"type":170,"tag":317,"props":1647,"children":1648},{},[1649],{"type":176,"value":1650},"使用 pupeteer 等工具预渲染首屏",{"type":170,"tag":185,"props":1652,"children":1653},{},[1654],{"type":176,"value":1655},"业务内容加载的过程中，JS 的影响最大。业务 JS 代码可以大致划分为：基础框架、垫片、业务基础库、业务代码这四大类，所以讲到优化 JS 其实是说如何通过分缓存去优化几种不同类型的 JS。",{"type":170,"tag":313,"props":1657,"children":1658},{},[1659,1664,1669,1674,1679,1684],{"type":170,"tag":317,"props":1660,"children":1661},{},[1662],{"type":176,"value":1663},"基础框架需要长时间缓存，适合强缓存",{"type":170,"tag":317,"props":1665,"children":1666},{},[1667],{"type":176,"value":1668},"使用 polyfill.io，根据 UA 自动垫片",{"type":170,"tag":317,"props":1670,"children":1671},{},[1672],{"type":176,"value":1673},"使用 SplitChunksPlugin 替代 CommonChunksPlugin",{"type":170,"tag":317,"props":1675,"children":1676},{},[1677],{"type":176,"value":1678},"使用 TreeShaking",{"type":170,"tag":317,"props":1680,"children":1681},{},[1682],{"type":176,"value":1683},"如果打包出来的 Bundle 体积巨大，可以考虑使用代码分割功能，比如 React Loadable 动态载入代码。",{"type":170,"tag":317,"props":1685,"children":1686},{},[1687],{"type":176,"value":1688},"为绝大多数用户提供 ES6+ 的代码，使用 nomodule 标志为老的浏览器保留 ES5 版本代码",{"type":170,"tag":185,"props":1690,"children":1691},{},[1692],{"type":176,"value":1693},"最后，在页面可交互到页面加载完毕这个阶段，可以使用图片懒加载或者骨架屏等形式提高体验。",{"type":170,"tag":178,"props":1695,"children":1697},{"id":1696},"关于性能优化的9大策略和6大指标",[1698],{"type":170,"tag":298,"props":1699,"children":1702},{"href":1700,"rel":1701},"https://juejin.cn/post/6981673766178783262",[302],[1703],{"type":176,"value":1696},{"type":170,"tag":313,"props":1705,"children":1706},{},[1707],{"type":170,"tag":317,"props":1708,"children":1709},{},[1710,1712],{"type":176,"value":1711},"网络层面\n",{"type":170,"tag":313,"props":1713,"children":1714},{},[1715,1788,1793],{"type":170,"tag":317,"props":1716,"children":1717},{},[1718,1720,1758],{"type":176,"value":1719},"构建工具优化\n",{"type":170,"tag":313,"props":1721,"children":1722},{},[1723,1728,1733,1738,1743,1748,1753],{"type":170,"tag":317,"props":1724,"children":1725},{},[1726],{"type":176,"value":1727},"include/exclude 避免不必要的查找，比如用在 babel-loader 可以避免不必要的转译",{"type":170,"tag":317,"props":1729,"children":1730},{},[1731],{"type":176,"value":1732},"babel-loader 可配置 cache，只编译修改过的文件",{"type":170,"tag":317,"props":1734,"children":1735},{},[1736],{"type":176,"value":1737},"alias 优化文件查找性能",{"type":170,"tag":317,"props":1739,"children":1740},{},[1741],{"type":176,"value":1742},"thread-loader 多进程编译",{"type":170,"tag":317,"props":1744,"children":1745},{},[1746],{"type":176,"value":1747},"BundleAnalyzer 分析文件体积",{"type":170,"tag":317,"props":1749,"children":1750},{},[1751],{"type":176,"value":1752},"SplitChunks 替换 CommonChunks，渐进式加载",{"type":170,"tag":317,"props":1754,"children":1755},{},[1756],{"type":176,"value":1757},"摇树优化",{"type":170,"tag":313,"props":1759,"children":1760},{},[1761,1766,1771,1776],{"type":170,"tag":317,"props":1762,"children":1763},{},[1764],{"type":176,"value":1765},"按需加载",{"type":170,"tag":317,"props":1767,"children":1768},{},[1769],{"type":176,"value":1770},"动态垫片",{"type":170,"tag":317,"props":1772,"children":1773},{},[1774],{"type":176,"value":1775},"变量提升",{"type":170,"tag":317,"props":1777,"children":1778},{},[1779,1781],{"type":176,"value":1780},"压缩，比如 ",{"type":170,"tag":298,"props":1782,"children":1785},{"href":1783,"rel":1784},"https://webpack.docschina.org/plugins/terser-webpack-plugin/",[302],[1786],{"type":176,"value":1787},"terser",{"type":170,"tag":317,"props":1789,"children":1790},{},[1791],{"type":176,"value":1792},"图像策略",{"type":170,"tag":317,"props":1794,"children":1795},{},[1796,1798],{"type":176,"value":1797},"内容分发\n",{"type":170,"tag":313,"props":1799,"children":1800},{},[1801,1806],{"type":170,"tag":317,"props":1802,"children":1803},{},[1804],{"type":176,"value":1805},"域名分开，避免 Cookie",{"type":170,"tag":317,"props":1807,"children":1808},{},[1809],{"type":176,"value":1810},"静态资源走 CDN",{"type":170,"tag":1812,"props":1813,"children":1814},"style",{},[1815],{"type":176,"value":1816},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":499,"depth":499,"links":1818},[1819,1820,1823,1824,1827],{"id":173,"depth":499,"text":173},{"id":389,"depth":499,"text":389,"children":1821},[1822],{"id":1386,"depth":509,"text":1389},{"id":1405,"depth":499,"text":1405},{"id":1421,"depth":499,"text":1424,"children":1825},[1826],{"id":1570,"depth":509,"text":1389},{"id":1588,"depth":499,"text":1588},"markdown","content:6.maps:_web:performance.md","content","6.maps/_web/performance.md","6.maps/_web/performance","md",[1835,1839],{"_path":1836,"title":1837,"description":1838},"/maps/_web/miniapp","小程序","微信小程序开发指南，包含双线程模型、Exparser 组件框架、分包异步化等技术原理和最佳实践。",{"_path":1840,"title":1841,"description":1842},"/maps/_windows/windows","Windows","记录一些使用 Windows 碰到的问题",1742958679234]