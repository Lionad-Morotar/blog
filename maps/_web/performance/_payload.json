[{"data":1,"prerenderedAt":1840},["ShallowReactive",2],{"navigation":3,"/maps/_web/performance":155,"/maps/_web/performance-surround":1831},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":156,"_dir":157,"_draft":158,"_partial":159,"_locale":160,"title":161,"description":162,"body":163,"_type":1825,"_id":1826,"_source":1827,"_file":1828,"_stem":1829,"_extension":1830},"/maps/_web/performance","_web",false,true,"","页面性能","全面的网页性能优化指南，涵盖性能指标、监控方案、优化策略，以及 SSR、PWA 等现代 Web 应用的性能优化实践。",{"type":164,"children":165,"toc":1814},"root",[166,174,181,187,193,198,204,209,218,224,229,235,264,289,303,309,360,367,371,384,389,395,400,406,414,420,425,433,443,449,454,460,465,864,875,881,886,897,903,908,1081,1092,1098,1103,1282,1293,1299,1310,1316,1327,1333,1338,1349,1355,1380,1387,1400,1405,1411,1416,1422,1428,1433,1439,1444,1452,1471,1477,1489,1495,1500,1506,1511,1519,1525,1535,1541,1546,1554,1560,1565,1570,1583,1588,1601,1606,1630,1635,1648,1653,1686,1691,1701,1808],{"type":167,"tag":168,"props":169,"children":171},"element","h2",{"id":170},"指标与模型",[172],{"type":173,"value":170},"text",{"type":167,"tag":175,"props":176,"children":178},"h4",{"id":177},"网页性能的上下游",[179],{"type":173,"value":180},"网页性能的上下游？",{"type":167,"tag":182,"props":183,"children":184},"p",{},[185],{"type":173,"value":186},"选定合适的 API 收集数据，进行简单预处理后，通过 SDK 上报到后端或者云服务。为了展示收集到的数据，可以设置 99 线等图表，在某些特定的业务场景，还可以设置 A/B 图和告警。",{"type":167,"tag":175,"props":188,"children":190},{"id":189},"性能指标和性能模型的不同",[191],{"type":173,"value":192},"性能指标和性能模型的不同？",{"type":167,"tag":182,"props":194,"children":195},{},[196],{"type":173,"value":197},"两个立场不同，性能指标如 Navigation Timing 使用绝对的量来衡量页面各项性能参数，性能模型如 Web Vitals 使用算法定性分析页面加载时的用户体验。",{"type":167,"tag":175,"props":199,"children":201},{"id":200},"为什么需要性能模型",[202],{"type":173,"value":203},"为什么需要性能模型？",{"type":167,"tag":182,"props":205,"children":206},{},[207],{"type":173,"value":208},"用户体验很难用具体或者绝对的量来衡定，比如说在渐进式加载中，只对比白屏时间和 onload 时间只能说明用户提早看到了内容，却不能说明渐进式加载好在哪里，好了多少。",{"type":167,"tag":182,"props":210,"children":211},{},[212],{"type":167,"tag":213,"props":214,"children":217},"img",{"alt":215,"src":216},"页面渐进式加载示例","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/progressive-rendering.png",[],{"type":167,"tag":175,"props":219,"children":221},{"id":220},"合成监控和真实用户监控是什么",[222],{"type":173,"value":223},"合成监控和真实用户监控是什么？",{"type":167,"tag":182,"props":225,"children":226},{},[227],{"type":173,"value":228},"从技术上来说，可以把监控分为合成监控（Synthetic Monitoring，SYN）和真实用户监控（Real User Monitoring，RUM）。合成监控是在一个模拟的场景中，使用 Lighthouse 等工具，提取出性能指标并获得审计报告。真实用户监控是在真实用户访问时，通过数据源获取数据，再上报到日志服务器，以用来展示和分析这么一流程。",{"type":167,"tag":175,"props":230,"children":232},{"id":231},"web-vitals-有哪些指标",[233],{"type":173,"value":234},"Web Vitals 有哪些指标？",{"type":167,"tag":182,"props":236,"children":237},{},[238,240,247,249,255,256,262],{"type":173,"value":239},"Web Vitals 关注 ",{"type":167,"tag":241,"props":242,"children":244},"abbr",{"title":243},"Largest Contentful Paint",[245],{"type":173,"value":246},"LCP",{"type":173,"value":248},"、",{"type":167,"tag":241,"props":250,"children":252},{"title":251},"First Input Delay",[253],{"type":173,"value":254},"FID",{"type":173,"value":248},{"type":167,"tag":241,"props":257,"children":259},{"title":258},"Cumulative Layout Shift",[260],{"type":173,"value":261},"CLS",{"type":173,"value":263}," 的测量，分别描述最大内容渲染时间评分、页面可交互时间评分和布局偏移评分。",{"type":167,"tag":265,"props":266,"children":268},"div",{"style":267},"display:flex; justify-content:space-evenly;",[269,271,277,278,283,284],{"type":173,"value":270},"\n  ",{"type":167,"tag":213,"props":272,"children":276},{"src":273,"width":274,"alt":275},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/lcp_ux.svg","33%","Largest Contentful Paint threshold recommendations",[],{"type":173,"value":270},{"type":167,"tag":213,"props":279,"children":282},{"src":280,"width":274,"alt":281},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/fid_ux.svg","First Input Delay threshold recommendations",[],{"type":173,"value":270},{"type":167,"tag":213,"props":285,"children":288},{"src":286,"width":274,"alt":287},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/cls_ux.svg","Cumulative Layout Shift threshold recommendations",[],{"type":167,"tag":182,"props":290,"children":291},{},[292,294],{"type":173,"value":293},"见：",{"type":167,"tag":295,"props":296,"children":300},"a",{"href":297,"rel":298},"https://github.com/GoogleChrome/web-vitals",[299],"nofollow",[301],{"type":173,"value":302},"Web Vitals",{"type":167,"tag":175,"props":304,"children":306},{"id":305},"有哪些开发工具",[307],{"type":173,"value":308},"有哪些开发工具？",{"type":167,"tag":310,"props":311,"children":312},"ul",{},[313,324,336,348],{"type":167,"tag":314,"props":315,"children":316},"li",{},[317,322],{"type":167,"tag":295,"props":318,"children":320},{"href":297,"rel":319},[299],[321],{"type":173,"value":302},{"type":173,"value":323},"，获取 Web Vitals 评分。",{"type":167,"tag":314,"props":325,"children":326},{},[327,334],{"type":167,"tag":295,"props":328,"children":331},{"href":329,"rel":330},"https://github.com/cssmagic/simple-web-perf",[299],[332],{"type":173,"value":333},"simple-web-perf",{"type":173,"value":335},"，Navigation Timing 数据上报封装。",{"type":167,"tag":314,"props":337,"children":338},{},[339,346],{"type":167,"tag":295,"props":340,"children":343},{"href":341,"rel":342},"https://github.com/Lionad-Morotar/webpack-lighthouse-plugin",[299],[344],{"type":173,"value":345},"webpack-lighthouse-plugin",{"type":173,"value":347},"，在打包结束后自动运行 Lighthouse 并输出报告。",{"type":167,"tag":314,"props":349,"children":350},{},[351,358],{"type":167,"tag":295,"props":352,"children":355},{"href":353,"rel":354},"https://github.com/cloudfour/lighthouse-parade",[299],[356],{"type":173,"value":357},"lighthouse-parade",{"type":173,"value":359},"，递归抓取页面并评分，输出关于网站的完整报告。",{"type":167,"tag":182,"props":361,"children":362},{},[363],{"type":167,"tag":213,"props":364,"children":366},{"alt":345,"src":365},"https://github.com/Lionad-Morotar/webpack-lighthouse-plugin/blob/main/assets/example.gif?raw=true",[],{"type":167,"tag":368,"props":369,"children":370},"hr",{},[],{"type":167,"tag":310,"props":372,"children":373},{},[374],{"type":167,"tag":314,"props":375,"children":376},{},[377],{"type":167,"tag":295,"props":378,"children":381},{"href":379,"rel":380},"https://developer.mozilla.org/zh-CN/docs/Web/Performance",[299],[382],{"type":173,"value":383},"TODO，Web Performance @MDN",{"type":167,"tag":168,"props":385,"children":387},{"id":386},"如何测量性能指标",[388],{"type":173,"value":386},{"type":167,"tag":175,"props":390,"children":392},{"id":391},"怎么测定页面帧率",[393],{"type":173,"value":394},"怎么测定页面帧率？",{"type":167,"tag":182,"props":396,"children":397},{},[398],{"type":173,"value":399},"可以使用 requestAnimationFrame，但是不推荐，因为脚本本身就会对性能造成影响。",{"type":167,"tag":175,"props":401,"children":403},{"id":402},"可以使用哪些-api-测量性能",[404],{"type":173,"value":405},"可以使用哪些 API 测量性能？",{"type":167,"tag":182,"props":407,"children":408},{},[409],{"type":167,"tag":213,"props":410,"children":413},{"alt":411,"src":412},"Web Performance Related Specs","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220630135906.png",[],{"type":167,"tag":175,"props":415,"children":417},{"id":416},"performance-timing-被弃用了",[418],{"type":173,"value":419},"Performance Timing 被弃用了？",{"type":167,"tag":182,"props":421,"children":422},{},[423],{"type":173,"value":424},"Performance Timing 被弃用了，取而代之的是 Performance Navigation Timing。不应该再使用 performance.navigation、performance.getEntries 等 API，这些旧的 API 没有办法肩检测如加载新脚本等情况，不支持新的性能指标如 Long Tasks API，此外可能干扰页面性能，所以推荐使用 Navigation Timing API 获取数据，并使用 Performance Observer 进行侦测。",{"type":167,"tag":182,"props":426,"children":427},{},[428],{"type":167,"tag":213,"props":429,"children":432},{"alt":430,"src":431},"Navigation Timing Level 2","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628165411.png",[],{"type":167,"tag":182,"props":434,"children":435},{},[436,437],{"type":173,"value":293},{"type":167,"tag":295,"props":438,"children":441},{"href":439,"rel":440},"https://www.w3.org/TR/navigation-timing-2/",[299],[442],{"type":173,"value":430},{"type":167,"tag":175,"props":444,"children":446},{"id":445},"navigation-timing-中不同的阶段是连续的吗",[447],{"type":173,"value":448},"Navigation Timing 中不同的阶段是连续的吗？",{"type":167,"tag":182,"props":450,"children":451},{},[452],{"type":173,"value":453},"可能不是。如浏览器有同域下最多 6 个请求并行的限制，那么 domainLoopupEnd 到 requestStart 之间可能会出现较长的等待时间（Stalled Time）。此外，不一定每个阶段都会有数据，如：未发生跳转时，redirectCount 为 0；如果页面没有 service worker，那么 workerStart 为 0；DNS 从缓存中获取时，domainLoopupStart 和 domainLoopupEnd 可能相等。",{"type":167,"tag":175,"props":455,"children":457},{"id":456},"performanceobserver-是什么",[458],{"type":173,"value":459},"PerformanceObserver 是什么？",{"type":167,"tag":182,"props":461,"children":462},{},[463],{"type":173,"value":464},"“有效的性能测量的第一条规则是确保性能测量技术本身不会导致性能问题”，使用 Performance Observer 可以获取某个具体类型的指标的同时不会干扰或影响页面性能，因为它会在浏览器空闲时期执行。",{"type":167,"tag":466,"props":467,"children":471},"pre",{"className":468,"code":469,"language":470,"meta":160,"style":160},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","try {\n  // \"element\"、\"event\"、\"first-input\"、\n  // \"largest-contentful-paint\"、\"layout-shift\"、\n  // \"longtask\"、\"mark\"、\"measure\"、\n  // \"navigation\"、\"paint\"、\"resource\"\n    PerformanceObserver.supportedEntryTypes.map(type => {\n        new PerformanceObserver((list) => {\n          for (const entry of list.getEntries()) {\n            console.log(entry.toJSON())\n          }\n        }).observe({\n        type,\n        // 使用 buffered 可以在第一次回调时获取缓存区中的历史记录\n        buffered: true\n      })\n    })\n} catch {\n    // nothing  \n}\n","js",[472],{"type":167,"tag":473,"props":474,"children":475},"code",{"__ignoreMap":160},[476,494,504,513,522,531,583,624,678,719,728,758,772,781,801,815,828,846,855],{"type":167,"tag":477,"props":478,"children":481},"span",{"class":479,"line":480},"line",1,[482,488],{"type":167,"tag":477,"props":483,"children":485},{"style":484},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[486],{"type":173,"value":487},"try",{"type":167,"tag":477,"props":489,"children":491},{"style":490},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[492],{"type":173,"value":493}," {\n",{"type":167,"tag":477,"props":495,"children":497},{"class":479,"line":496},2,[498],{"type":167,"tag":477,"props":499,"children":501},{"style":500},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[502],{"type":173,"value":503},"  // \"element\"、\"event\"、\"first-input\"、\n",{"type":167,"tag":477,"props":505,"children":507},{"class":479,"line":506},3,[508],{"type":167,"tag":477,"props":509,"children":510},{"style":500},[511],{"type":173,"value":512},"  // \"largest-contentful-paint\"、\"layout-shift\"、\n",{"type":167,"tag":477,"props":514,"children":516},{"class":479,"line":515},4,[517],{"type":167,"tag":477,"props":518,"children":519},{"style":500},[520],{"type":173,"value":521},"  // \"longtask\"、\"mark\"、\"measure\"、\n",{"type":167,"tag":477,"props":523,"children":525},{"class":479,"line":524},5,[526],{"type":167,"tag":477,"props":527,"children":528},{"style":500},[529],{"type":173,"value":530},"  // \"navigation\"、\"paint\"、\"resource\"\n",{"type":167,"tag":477,"props":532,"children":534},{"class":479,"line":533},6,[535,541,546,551,555,561,567,573,579],{"type":167,"tag":477,"props":536,"children":538},{"style":537},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[539],{"type":173,"value":540},"    PerformanceObserver",{"type":167,"tag":477,"props":542,"children":543},{"style":490},[544],{"type":173,"value":545},".",{"type":167,"tag":477,"props":547,"children":548},{"style":537},[549],{"type":173,"value":550},"supportedEntryTypes",{"type":167,"tag":477,"props":552,"children":553},{"style":490},[554],{"type":173,"value":545},{"type":167,"tag":477,"props":556,"children":558},{"style":557},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[559],{"type":173,"value":560},"map",{"type":167,"tag":477,"props":562,"children":564},{"style":563},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[565],{"type":173,"value":566},"(",{"type":167,"tag":477,"props":568,"children":570},{"style":569},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[571],{"type":173,"value":572},"type",{"type":167,"tag":477,"props":574,"children":576},{"style":575},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[577],{"type":173,"value":578}," =>",{"type":167,"tag":477,"props":580,"children":581},{"style":490},[582],{"type":173,"value":493},{"type":167,"tag":477,"props":584,"children":586},{"class":479,"line":585},7,[587,593,598,602,606,611,616,620],{"type":167,"tag":477,"props":588,"children":590},{"style":589},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[591],{"type":173,"value":592},"        new",{"type":167,"tag":477,"props":594,"children":595},{"style":557},[596],{"type":173,"value":597}," PerformanceObserver",{"type":167,"tag":477,"props":599,"children":600},{"style":563},[601],{"type":173,"value":566},{"type":167,"tag":477,"props":603,"children":604},{"style":490},[605],{"type":173,"value":566},{"type":167,"tag":477,"props":607,"children":608},{"style":569},[609],{"type":173,"value":610},"list",{"type":167,"tag":477,"props":612,"children":613},{"style":490},[614],{"type":173,"value":615},")",{"type":167,"tag":477,"props":617,"children":618},{"style":575},[619],{"type":173,"value":578},{"type":167,"tag":477,"props":621,"children":622},{"style":490},[623],{"type":173,"value":493},{"type":167,"tag":477,"props":625,"children":627},{"class":479,"line":626},8,[628,633,638,643,649,654,659,663,668,673],{"type":167,"tag":477,"props":629,"children":630},{"style":484},[631],{"type":173,"value":632},"          for",{"type":167,"tag":477,"props":634,"children":635},{"style":563},[636],{"type":173,"value":637}," (",{"type":167,"tag":477,"props":639,"children":640},{"style":575},[641],{"type":173,"value":642},"const",{"type":167,"tag":477,"props":644,"children":646},{"style":645},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[647],{"type":173,"value":648}," entry",{"type":167,"tag":477,"props":650,"children":651},{"style":589},[652],{"type":173,"value":653}," of",{"type":167,"tag":477,"props":655,"children":656},{"style":537},[657],{"type":173,"value":658}," list",{"type":167,"tag":477,"props":660,"children":661},{"style":490},[662],{"type":173,"value":545},{"type":167,"tag":477,"props":664,"children":665},{"style":557},[666],{"type":173,"value":667},"getEntries",{"type":167,"tag":477,"props":669,"children":670},{"style":563},[671],{"type":173,"value":672},"()) ",{"type":167,"tag":477,"props":674,"children":675},{"style":490},[676],{"type":173,"value":677},"{\n",{"type":167,"tag":477,"props":679,"children":681},{"class":479,"line":680},9,[682,687,691,696,700,705,709,714],{"type":167,"tag":477,"props":683,"children":684},{"style":537},[685],{"type":173,"value":686},"            console",{"type":167,"tag":477,"props":688,"children":689},{"style":490},[690],{"type":173,"value":545},{"type":167,"tag":477,"props":692,"children":693},{"style":557},[694],{"type":173,"value":695},"log",{"type":167,"tag":477,"props":697,"children":698},{"style":563},[699],{"type":173,"value":566},{"type":167,"tag":477,"props":701,"children":702},{"style":537},[703],{"type":173,"value":704},"entry",{"type":167,"tag":477,"props":706,"children":707},{"style":490},[708],{"type":173,"value":545},{"type":167,"tag":477,"props":710,"children":711},{"style":557},[712],{"type":173,"value":713},"toJSON",{"type":167,"tag":477,"props":715,"children":716},{"style":563},[717],{"type":173,"value":718},"())\n",{"type":167,"tag":477,"props":720,"children":722},{"class":479,"line":721},10,[723],{"type":167,"tag":477,"props":724,"children":725},{"style":490},[726],{"type":173,"value":727},"          }\n",{"type":167,"tag":477,"props":729,"children":731},{"class":479,"line":730},11,[732,737,741,745,750,754],{"type":167,"tag":477,"props":733,"children":734},{"style":490},[735],{"type":173,"value":736},"        }",{"type":167,"tag":477,"props":738,"children":739},{"style":563},[740],{"type":173,"value":615},{"type":167,"tag":477,"props":742,"children":743},{"style":490},[744],{"type":173,"value":545},{"type":167,"tag":477,"props":746,"children":747},{"style":557},[748],{"type":173,"value":749},"observe",{"type":167,"tag":477,"props":751,"children":752},{"style":563},[753],{"type":173,"value":566},{"type":167,"tag":477,"props":755,"children":756},{"style":490},[757],{"type":173,"value":677},{"type":167,"tag":477,"props":759,"children":761},{"class":479,"line":760},12,[762,767],{"type":167,"tag":477,"props":763,"children":764},{"style":537},[765],{"type":173,"value":766},"        type",{"type":167,"tag":477,"props":768,"children":769},{"style":490},[770],{"type":173,"value":771},",\n",{"type":167,"tag":477,"props":773,"children":775},{"class":479,"line":774},13,[776],{"type":167,"tag":477,"props":777,"children":778},{"style":500},[779],{"type":173,"value":780},"        // 使用 buffered 可以在第一次回调时获取缓存区中的历史记录\n",{"type":167,"tag":477,"props":782,"children":784},{"class":479,"line":783},14,[785,790,795],{"type":167,"tag":477,"props":786,"children":787},{"style":563},[788],{"type":173,"value":789},"        buffered",{"type":167,"tag":477,"props":791,"children":792},{"style":490},[793],{"type":173,"value":794},":",{"type":167,"tag":477,"props":796,"children":798},{"style":797},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[799],{"type":173,"value":800}," true\n",{"type":167,"tag":477,"props":802,"children":804},{"class":479,"line":803},15,[805,810],{"type":167,"tag":477,"props":806,"children":807},{"style":490},[808],{"type":173,"value":809},"      }",{"type":167,"tag":477,"props":811,"children":812},{"style":563},[813],{"type":173,"value":814},")\n",{"type":167,"tag":477,"props":816,"children":818},{"class":479,"line":817},16,[819,824],{"type":167,"tag":477,"props":820,"children":821},{"style":490},[822],{"type":173,"value":823},"    }",{"type":167,"tag":477,"props":825,"children":826},{"style":563},[827],{"type":173,"value":814},{"type":167,"tag":477,"props":829,"children":831},{"class":479,"line":830},17,[832,837,842],{"type":167,"tag":477,"props":833,"children":834},{"style":490},[835],{"type":173,"value":836},"}",{"type":167,"tag":477,"props":838,"children":839},{"style":484},[840],{"type":173,"value":841}," catch",{"type":167,"tag":477,"props":843,"children":844},{"style":490},[845],{"type":173,"value":493},{"type":167,"tag":477,"props":847,"children":849},{"class":479,"line":848},18,[850],{"type":167,"tag":477,"props":851,"children":852},{"style":500},[853],{"type":173,"value":854},"    // nothing  \n",{"type":167,"tag":477,"props":856,"children":858},{"class":479,"line":857},19,[859],{"type":167,"tag":477,"props":860,"children":861},{"style":490},[862],{"type":173,"value":863},"}\n",{"type":167,"tag":182,"props":865,"children":866},{},[867,868],{"type":173,"value":293},{"type":167,"tag":295,"props":869,"children":872},{"href":870,"rel":871},"https://web.dev/custom-metrics/#",[299],[873],{"type":173,"value":874},"Performance Observer",{"type":167,"tag":175,"props":876,"children":878},{"id":877},"long-tasks-api-是什么",[879],{"type":173,"value":880},"Long Tasks API 是什么？",{"type":167,"tag":182,"props":882,"children":883},{},[884],{"type":173,"value":885},"Long Tasks API 将会汇报使主线程阻塞超过 50ms 的任何任务。通过观测阻塞时长，可以获得诸如 TTI（Time To Interactive）、TBT（Total Blocking Time）等数据。",{"type":167,"tag":182,"props":887,"children":888},{},[889,890],{"type":173,"value":293},{"type":167,"tag":295,"props":891,"children":894},{"href":892,"rel":893},"https://web.dev/custom-metrics/#long-tasks-api",[299],[895],{"type":173,"value":896},"Long Tasks API",{"type":167,"tag":175,"props":898,"children":900},{"id":899},"如何测量函数执行的时长",[901],{"type":173,"value":902},"如何测量函数执行的时长？",{"type":167,"tag":182,"props":904,"children":905},{},[906],{"type":173,"value":907},"可以使用 Date.now()、performance.now()，但是如果不考虑兼容性的话，使用 User Timing API 要更好一些，它可以和相关套件很好的结合：比如说在 Performance 面板中可视化，或通过 Performance Observer 进行观测。",{"type":167,"tag":466,"props":909,"children":911},{"className":468,"code":910,"language":470,"meta":160,"style":160},"performance.mark('myTask:start')\nawait task()\nperformance.mark('myTask:end')\nperformance.measure('myTask', 'myTask:start', 'myTask:end')\n",[912],{"type":167,"tag":473,"props":913,"children":914},{"__ignoreMap":160},[915,956,974,1010],{"type":167,"tag":477,"props":916,"children":917},{"class":479,"line":480},[918,923,927,932,936,942,948,952],{"type":167,"tag":477,"props":919,"children":920},{"style":537},[921],{"type":173,"value":922},"performance",{"type":167,"tag":477,"props":924,"children":925},{"style":490},[926],{"type":173,"value":545},{"type":167,"tag":477,"props":928,"children":929},{"style":557},[930],{"type":173,"value":931},"mark",{"type":167,"tag":477,"props":933,"children":934},{"style":537},[935],{"type":173,"value":566},{"type":167,"tag":477,"props":937,"children":939},{"style":938},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[940],{"type":173,"value":941},"'",{"type":167,"tag":477,"props":943,"children":945},{"style":944},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[946],{"type":173,"value":947},"myTask:start",{"type":167,"tag":477,"props":949,"children":950},{"style":938},[951],{"type":173,"value":941},{"type":167,"tag":477,"props":953,"children":954},{"style":537},[955],{"type":173,"value":814},{"type":167,"tag":477,"props":957,"children":958},{"class":479,"line":496},[959,964,969],{"type":167,"tag":477,"props":960,"children":961},{"style":484},[962],{"type":173,"value":963},"await",{"type":167,"tag":477,"props":965,"children":966},{"style":557},[967],{"type":173,"value":968}," task",{"type":167,"tag":477,"props":970,"children":971},{"style":537},[972],{"type":173,"value":973},"()\n",{"type":167,"tag":477,"props":975,"children":976},{"class":479,"line":506},[977,981,985,989,993,997,1002,1006],{"type":167,"tag":477,"props":978,"children":979},{"style":537},[980],{"type":173,"value":922},{"type":167,"tag":477,"props":982,"children":983},{"style":490},[984],{"type":173,"value":545},{"type":167,"tag":477,"props":986,"children":987},{"style":557},[988],{"type":173,"value":931},{"type":167,"tag":477,"props":990,"children":991},{"style":537},[992],{"type":173,"value":566},{"type":167,"tag":477,"props":994,"children":995},{"style":938},[996],{"type":173,"value":941},{"type":167,"tag":477,"props":998,"children":999},{"style":944},[1000],{"type":173,"value":1001},"myTask:end",{"type":167,"tag":477,"props":1003,"children":1004},{"style":938},[1005],{"type":173,"value":941},{"type":167,"tag":477,"props":1007,"children":1008},{"style":537},[1009],{"type":173,"value":814},{"type":167,"tag":477,"props":1011,"children":1012},{"class":479,"line":515},[1013,1017,1021,1026,1030,1034,1039,1043,1048,1053,1057,1061,1065,1069,1073,1077],{"type":167,"tag":477,"props":1014,"children":1015},{"style":537},[1016],{"type":173,"value":922},{"type":167,"tag":477,"props":1018,"children":1019},{"style":490},[1020],{"type":173,"value":545},{"type":167,"tag":477,"props":1022,"children":1023},{"style":557},[1024],{"type":173,"value":1025},"measure",{"type":167,"tag":477,"props":1027,"children":1028},{"style":537},[1029],{"type":173,"value":566},{"type":167,"tag":477,"props":1031,"children":1032},{"style":938},[1033],{"type":173,"value":941},{"type":167,"tag":477,"props":1035,"children":1036},{"style":944},[1037],{"type":173,"value":1038},"myTask",{"type":167,"tag":477,"props":1040,"children":1041},{"style":938},[1042],{"type":173,"value":941},{"type":167,"tag":477,"props":1044,"children":1045},{"style":490},[1046],{"type":173,"value":1047},",",{"type":167,"tag":477,"props":1049,"children":1050},{"style":938},[1051],{"type":173,"value":1052}," '",{"type":167,"tag":477,"props":1054,"children":1055},{"style":944},[1056],{"type":173,"value":947},{"type":167,"tag":477,"props":1058,"children":1059},{"style":938},[1060],{"type":173,"value":941},{"type":167,"tag":477,"props":1062,"children":1063},{"style":490},[1064],{"type":173,"value":1047},{"type":167,"tag":477,"props":1066,"children":1067},{"style":938},[1068],{"type":173,"value":1052},{"type":167,"tag":477,"props":1070,"children":1071},{"style":944},[1072],{"type":173,"value":1001},{"type":167,"tag":477,"props":1074,"children":1075},{"style":938},[1076],{"type":173,"value":941},{"type":167,"tag":477,"props":1078,"children":1079},{"style":537},[1080],{"type":173,"value":814},{"type":167,"tag":182,"props":1082,"children":1083},{},[1084,1085],{"type":173,"value":293},{"type":167,"tag":295,"props":1086,"children":1089},{"href":1087,"rel":1088},"https://web.dev/custom-metrics/#user-timing-api",[299],[1090],{"type":173,"value":1091},"User Timing API",{"type":167,"tag":175,"props":1093,"children":1095},{"id":1094},"如何测量元素的渲染时间",[1096],{"type":173,"value":1097},"如何测量元素的渲染时间？",{"type":167,"tag":182,"props":1099,"children":1100},{},[1101],{"type":173,"value":1102},"可以使用 Element Timing API。通过给 element 增加 elementtiming 属性，可以在注册 Performance Observer 后监听 element 类型的事件并获得元素渲染时间。LCP 指标就是建立在 ET API 基础上的，只是汇报的是最大内容元素的渲染时间。",{"type":167,"tag":466,"props":1104,"children":1108},{"className":1105,"code":1106,"language":1107,"meta":160,"style":160},"language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Cimg elementtiming=\"hero-image\" />\n\u003Cscript>\n  new PerformanceObserver(/* ... */)\n    .observe({ type: 'element', buffered: true })\n\u003C/script>\n","html",[1109],{"type":167,"tag":473,"props":1110,"children":1111},{"__ignoreMap":160},[1112,1155,1172,1197,1266],{"type":167,"tag":477,"props":1113,"children":1114},{"class":479,"line":480},[1115,1120,1125,1131,1136,1141,1146,1150],{"type":167,"tag":477,"props":1116,"children":1117},{"style":490},[1118],{"type":173,"value":1119},"\u003C",{"type":167,"tag":477,"props":1121,"children":1123},{"style":1122},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1124],{"type":173,"value":213},{"type":167,"tag":477,"props":1126,"children":1128},{"style":1127},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1129],{"type":173,"value":1130}," elementtiming",{"type":167,"tag":477,"props":1132,"children":1133},{"style":490},[1134],{"type":173,"value":1135},"=",{"type":167,"tag":477,"props":1137,"children":1138},{"style":938},[1139],{"type":173,"value":1140},"\"",{"type":167,"tag":477,"props":1142,"children":1143},{"style":944},[1144],{"type":173,"value":1145},"hero-image",{"type":167,"tag":477,"props":1147,"children":1148},{"style":938},[1149],{"type":173,"value":1140},{"type":167,"tag":477,"props":1151,"children":1152},{"style":490},[1153],{"type":173,"value":1154}," />\n",{"type":167,"tag":477,"props":1156,"children":1157},{"class":479,"line":496},[1158,1162,1167],{"type":167,"tag":477,"props":1159,"children":1160},{"style":490},[1161],{"type":173,"value":1119},{"type":167,"tag":477,"props":1163,"children":1164},{"style":1122},[1165],{"type":173,"value":1166},"script",{"type":167,"tag":477,"props":1168,"children":1169},{"style":490},[1170],{"type":173,"value":1171},">\n",{"type":167,"tag":477,"props":1173,"children":1174},{"class":479,"line":506},[1175,1180,1184,1188,1193],{"type":167,"tag":477,"props":1176,"children":1177},{"style":589},[1178],{"type":173,"value":1179},"  new",{"type":167,"tag":477,"props":1181,"children":1182},{"style":557},[1183],{"type":173,"value":597},{"type":167,"tag":477,"props":1185,"children":1186},{"style":537},[1187],{"type":173,"value":566},{"type":167,"tag":477,"props":1189,"children":1190},{"style":500},[1191],{"type":173,"value":1192},"/* ... */",{"type":167,"tag":477,"props":1194,"children":1195},{"style":537},[1196],{"type":173,"value":814},{"type":167,"tag":477,"props":1198,"children":1199},{"class":479,"line":515},[1200,1205,1209,1213,1218,1223,1227,1231,1235,1239,1243,1248,1252,1257,1262],{"type":167,"tag":477,"props":1201,"children":1202},{"style":490},[1203],{"type":173,"value":1204},"    .",{"type":167,"tag":477,"props":1206,"children":1207},{"style":557},[1208],{"type":173,"value":749},{"type":167,"tag":477,"props":1210,"children":1211},{"style":537},[1212],{"type":173,"value":566},{"type":167,"tag":477,"props":1214,"children":1215},{"style":490},[1216],{"type":173,"value":1217},"{",{"type":167,"tag":477,"props":1219,"children":1220},{"style":563},[1221],{"type":173,"value":1222}," type",{"type":167,"tag":477,"props":1224,"children":1225},{"style":490},[1226],{"type":173,"value":794},{"type":167,"tag":477,"props":1228,"children":1229},{"style":938},[1230],{"type":173,"value":1052},{"type":167,"tag":477,"props":1232,"children":1233},{"style":944},[1234],{"type":173,"value":167},{"type":167,"tag":477,"props":1236,"children":1237},{"style":938},[1238],{"type":173,"value":941},{"type":167,"tag":477,"props":1240,"children":1241},{"style":490},[1242],{"type":173,"value":1047},{"type":167,"tag":477,"props":1244,"children":1245},{"style":563},[1246],{"type":173,"value":1247}," buffered",{"type":167,"tag":477,"props":1249,"children":1250},{"style":490},[1251],{"type":173,"value":794},{"type":167,"tag":477,"props":1253,"children":1254},{"style":797},[1255],{"type":173,"value":1256}," true",{"type":167,"tag":477,"props":1258,"children":1259},{"style":490},[1260],{"type":173,"value":1261}," }",{"type":167,"tag":477,"props":1263,"children":1264},{"style":537},[1265],{"type":173,"value":814},{"type":167,"tag":477,"props":1267,"children":1268},{"class":479,"line":524},[1269,1274,1278],{"type":167,"tag":477,"props":1270,"children":1271},{"style":490},[1272],{"type":173,"value":1273},"\u003C/",{"type":167,"tag":477,"props":1275,"children":1276},{"style":1122},[1277],{"type":173,"value":1166},{"type":167,"tag":477,"props":1279,"children":1280},{"style":490},[1281],{"type":173,"value":1171},{"type":167,"tag":182,"props":1283,"children":1284},{},[1285,1286],{"type":173,"value":293},{"type":167,"tag":295,"props":1287,"children":1290},{"href":1288,"rel":1289},"https://web.dev/custom-metrics/#element-timing-api",[299],[1291],{"type":173,"value":1292},"Element Timing API",{"type":167,"tag":175,"props":1294,"children":1296},{"id":1295},"event-timing-api-是什么",[1297],{"type":173,"value":1298},"Event Timing API 是什么？",{"type":167,"tag":182,"props":1300,"children":1301},{},[1302,1303],{"type":173,"value":293},{"type":167,"tag":295,"props":1304,"children":1307},{"href":1305,"rel":1306},"https://web.dev/custom-metrics/#event-timing-api",[299],[1308],{"type":173,"value":1309},"Event Timing API",{"type":167,"tag":175,"props":1311,"children":1313},{"id":1312},"resource-timing-api-是什么",[1314],{"type":173,"value":1315},"Resource Timing API 是什么？",{"type":167,"tag":182,"props":1317,"children":1318},{},[1319,1320],{"type":173,"value":293},{"type":167,"tag":295,"props":1321,"children":1324},{"href":1322,"rel":1323},"https://web.dev/custom-metrics/#resource-timing-api",[299],[1325],{"type":173,"value":1326},"Resource Timing API",{"type":167,"tag":175,"props":1328,"children":1330},{"id":1329},"navigation-timing-api-是什么",[1331],{"type":173,"value":1332},"Navigation Timing API 是什么？",{"type":167,"tag":182,"props":1334,"children":1335},{},[1336],{"type":173,"value":1337},"类似于 Resource Timing API，但不同的地方在于它会在导航时被触发，还附带了 DOMContentLoaded 和 load 事件的触发事件。",{"type":167,"tag":182,"props":1339,"children":1340},{},[1341,1342],{"type":173,"value":293},{"type":167,"tag":295,"props":1343,"children":1346},{"href":1344,"rel":1345},"https://web.dev/custom-metrics/#navigation-timing-api",[299],[1347],{"type":173,"value":1348},"Navigation Timing API",{"type":167,"tag":175,"props":1350,"children":1352},{"id":1351},"除了规范定义数据还可以上报哪些",[1353],{"type":173,"value":1354},"除了规范定义数据，还可以上报哪些？",{"type":167,"tag":182,"props":1356,"children":1357},{},[1358,1364,1366,1371,1373,1378],{"type":167,"tag":1359,"props":1360,"children":1361},"strong",{},[1362],{"type":173,"value":1363},"5W",{"type":173,"value":1365},"：时间、地理位置、页面 URL、浏览器、系统、账号 ID、现场还原。",{"type":167,"tag":1359,"props":1367,"children":1368},{},[1369],{"type":173,"value":1370},"网络",{"type":173,"value":1372},"：页面加载方式、Service Worker、HTTP 协议版本、资源压缩方式。",{"type":167,"tag":1359,"props":1374,"children":1375},{},[1376],{"type":173,"value":1377},"其它",{"type":173,"value":1379},"：页面在前台还是后台。",{"type":167,"tag":1381,"props":1382,"children":1384},"h3",{"id":1383},"links",[1385],{"type":173,"value":1386},"Links",{"type":167,"tag":310,"props":1388,"children":1389},{},[1390],{"type":167,"tag":314,"props":1391,"children":1392},{},[1393],{"type":167,"tag":295,"props":1394,"children":1397},{"href":1395,"rel":1396},"https://mp.weixin.qq.com/s/pqFhhb5u6w7gmUutilH5xQ",[299],[1398],{"type":173,"value":1399},"蚂蚁金服如何把前端性能监控做到极致?",{"type":167,"tag":168,"props":1401,"children":1403},{"id":1402},"性能优化",[1404],{"type":173,"value":1402},{"type":167,"tag":175,"props":1406,"children":1408},{"id":1407},"做性能优化的基本法则是什么",[1409],{"type":173,"value":1410},"做性能优化的基本法则是什么？",{"type":167,"tag":182,"props":1412,"children":1413},{},[1414],{"type":173,"value":1415},"编译层参见 webpack 优化；网络层减少请求；客户端预加载、预渲染、预执行。以及两句名言：“空间换时间”、“串行改并行”。",{"type":167,"tag":168,"props":1417,"children":1419},{"id":1418},"ssr-及混合应用优化",[1420],{"type":173,"value":1421},"SSR 及混合应用优化",{"type":167,"tag":175,"props":1423,"children":1425},{"id":1424},"csr-是什么",[1426],{"type":173,"value":1427},"CSR 是什么？",{"type":167,"tag":182,"props":1429,"children":1430},{},[1431],{"type":173,"value":1432},"Client Side Rendering，和 SSR 相对应，指页面渲染、逻辑、路由、请求都是在浏览器发生的。想要提高 CSR 项目的用户体验，可以考虑在编译时通过预渲染首屏、骨架屏等形式对性能指标进行优化，或者，上 SSR。",{"type":167,"tag":175,"props":1434,"children":1436},{"id":1435},"从-csr-到-ssr-有哪些过渡方案",[1437],{"type":173,"value":1438},"从 CSR 到 SSR 有哪些过渡方案？",{"type":167,"tag":182,"props":1440,"children":1441},{},[1442],{"type":173,"value":1443},"CSP -> CSP with prerender -> SSR with hydration -> static SSR -> SSR",{"type":167,"tag":182,"props":1445,"children":1446},{},[1447],{"type":167,"tag":213,"props":1448,"children":1451},{"alt":1449,"src":1450},"From CSP to SSR","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220629020645.png",[],{"type":167,"tag":182,"props":1453,"children":1454},{},[1455,1456,1463,1464],{"type":173,"value":293},{"type":167,"tag":295,"props":1457,"children":1460},{"href":1458,"rel":1459},"https://web.dev/rendering-on-the-web/",[299],[1461],{"type":173,"value":1462},"TODO，Rendering on the Web",{"type":173,"value":248},{"type":167,"tag":295,"props":1465,"children":1468},{"href":1466,"rel":1467},"https://blog.csdn.net/m0_37411791/article/details/106513195?utm_source=blogxgwz7",[299],[1469],{"type":173,"value":1470},"CSR、SSR、NSR、ESR傻傻分不清楚",{"type":167,"tag":175,"props":1472,"children":1474},{"id":1473},"esr-是什么",[1475],{"type":173,"value":1476},"ESR 是什么？",{"type":167,"tag":182,"props":1478,"children":1479},{},[1480,1482],{"type":173,"value":1481},"TODO，",{"type":167,"tag":295,"props":1483,"children":1486},{"href":1484,"rel":1485},"https://juejin.im/post/5ecf90b7f265da76e7651a96",[299],[1487],{"type":173,"value":1488},"边缘计算说过吗？淘宝用它提升了69%的首屏性能",{"type":167,"tag":175,"props":1490,"children":1492},{"id":1491},"经典直出方案是什么",[1493],{"type":173,"value":1494},"经典直出方案是什么？",{"type":167,"tag":182,"props":1496,"children":1497},{},[1498],{"type":173,"value":1499},"直出指在后端渲染好 HTML 后再回传给客户端这种方式，直出可以节约许多 HTML 渲染及 AJAX 请求的时间，对 Web 前端的侵入性最小。",{"type":167,"tag":175,"props":1501,"children":1503},{"id":1502},"离线包缓存是什么",[1504],{"type":173,"value":1505},"离线包缓存是什么？",{"type":167,"tag":182,"props":1507,"children":1508},{},[1509],{"type":173,"value":1510},"直出方案仍需要把时间花在请求、加载 HTML 上，离线包缓存意味着把 HTML、CSS、JS、数据提前缓存在本地，只有部分需要异步更新的页面才通过请求的方式加载新数据并重新渲染页面。",{"type":167,"tag":182,"props":1512,"children":1513},{},[1514],{"type":167,"tag":213,"props":1515,"children":1518},{"alt":1516,"src":1517},"直出 VS 离线包缓存","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628233615.png",[],{"type":167,"tag":175,"props":1520,"children":1522},{"id":1521},"容器化方案是什么",[1523],{"type":173,"value":1524},"容器化方案是什么？",{"type":167,"tag":182,"props":1526,"children":1527},{},[1528,1529],{"type":173,"value":1481},{"type":167,"tag":295,"props":1530,"children":1533},{"href":1531,"rel":1532},"http://www.alloyteam.com/2020/06/fast-open-h5/",[299],[1534],{"type":173,"value":1531},{"type":167,"tag":175,"props":1536,"children":1538},{"id":1537},"pwa-怎么配合-ssr-做优化",[1539],{"type":173,"value":1540},"PWA 怎么配合 SSR 做优化？",{"type":167,"tag":182,"props":1542,"children":1543},{},[1544],{"type":173,"value":1545},"PWA 能够通过 Service Worker 对缓存进行精细化控制，在客户端使用无头浏览器提前加载 HTML，等到实际加载时请求的就是由 Service Worker 缓存下来的资源了。",{"type":167,"tag":182,"props":1547,"children":1548},{},[1549],{"type":167,"tag":213,"props":1550,"children":1553},{"alt":1551,"src":1552},"PWA + Headless Webview","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220628235637.png?w=30",[],{"type":167,"tag":175,"props":1555,"children":1557},{"id":1556},"nsr-是什么",[1558],{"type":173,"value":1559},"NSR 是什么？",{"type":167,"tag":182,"props":1561,"children":1562},{},[1563],{"type":173,"value":1564},"Native Side Render，GMTC 2019 UC 团队提到的一种“前端 SSR”方案，它借助浏览器启动一个额外的 JS Runtime，将提前下载好的 HTML 模板和数据预渲染出来。这种方案的瓶颈在于他会带来额外的流量和性能开销，所以如何预测用户行为，提高命中率是非常重要的事。",{"type":167,"tag":1381,"props":1566,"children":1568},{"id":1567},"links-1",[1569],{"type":173,"value":1386},{"type":167,"tag":310,"props":1571,"children":1572},{},[1573],{"type":167,"tag":314,"props":1574,"children":1575},{},[1576],{"type":167,"tag":295,"props":1577,"children":1580},{"href":1578,"rel":1579},"http://www.alloyteam.com/2019/10/h5-performance-optimize",[299],[1581],{"type":173,"value":1582},"H5 秒开方案大全",{"type":167,"tag":168,"props":1584,"children":1586},{"id":1585},"阅读更多",[1587],{"type":173,"value":1585},{"type":167,"tag":175,"props":1589,"children":1591},{"id":1590},"react-16-加载性能优化指南",[1592,1599],{"type":167,"tag":1593,"props":1594,"children":1598},"link",{"type":1595,"to":1596,"source":1597},"h5","https://mgear-file.oss-cn-shanghai.aliyuncs.com/React%2016%20%E5%8A%A0%E8%BD%BD%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96%E6%8C%87%E5%8D%97.html","https://zhuanlan.zhihu.com/p/37148975",[],{"type":173,"value":1600},"《React 16 加载性能优化指南》",{"type":167,"tag":182,"props":1602,"children":1603},{},[1604],{"type":173,"value":1605},"作者把页面加载状态划分了四个步骤：",{"type":167,"tag":1607,"props":1608,"children":1609},"ol",{},[1610,1615,1620,1625],{"type":167,"tag":314,"props":1611,"children":1612},{},[1613],{"type":173,"value":1614},"打开页面到首屏渲染（浏览器首次渲染可见的内容）",{"type":167,"tag":314,"props":1616,"children":1617},{},[1618],{"type":173,"value":1619},"首屏渲染到首次内容渲染（相关业务的内容）",{"type":167,"tag":314,"props":1621,"children":1622},{},[1623],{"type":173,"value":1624},"内容渲染到页面可交互",{"type":167,"tag":314,"props":1626,"children":1627},{},[1628],{"type":173,"value":1629},"页面逐渐加载（诸如图片等元素）直到页面内容加载完毕",{"type":167,"tag":182,"props":1631,"children":1632},{},[1633],{"type":173,"value":1634},"在很多应用中，首屏渲染约等于首次内容渲染，这是因为加载 HTML 和 CSS 之后，要等待业务 JS 加载完毕才能看到有意义的内容。其实可以通过几种方法完善首屏加载的 HTML 和 CSS，增加加载状态，减少用户等待焦虑。",{"type":167,"tag":310,"props":1636,"children":1637},{},[1638,1643],{"type":167,"tag":314,"props":1639,"children":1640},{},[1641],{"type":173,"value":1642},"在 HTML 模板中使用 SVG 图案（比如通过 html-webpack-plugin 自动插入）",{"type":167,"tag":314,"props":1644,"children":1645},{},[1646],{"type":173,"value":1647},"使用 pupeteer 等工具预渲染首屏",{"type":167,"tag":182,"props":1649,"children":1650},{},[1651],{"type":173,"value":1652},"业务内容加载的过程中，JS 的影响最大。业务 JS 代码可以大致划分为：基础框架、垫片、业务基础库、业务代码这四大类，所以讲到优化 JS 其实是说如何通过分缓存去优化几种不同类型的 JS。",{"type":167,"tag":310,"props":1654,"children":1655},{},[1656,1661,1666,1671,1676,1681],{"type":167,"tag":314,"props":1657,"children":1658},{},[1659],{"type":173,"value":1660},"基础框架需要长时间缓存，适合强缓存",{"type":167,"tag":314,"props":1662,"children":1663},{},[1664],{"type":173,"value":1665},"使用 polyfill.io，根据 UA 自动垫片",{"type":167,"tag":314,"props":1667,"children":1668},{},[1669],{"type":173,"value":1670},"使用 SplitChunksPlugin 替代 CommonChunksPlugin",{"type":167,"tag":314,"props":1672,"children":1673},{},[1674],{"type":173,"value":1675},"使用 TreeShaking",{"type":167,"tag":314,"props":1677,"children":1678},{},[1679],{"type":173,"value":1680},"如果打包出来的 Bundle 体积巨大，可以考虑使用代码分割功能，比如 React Loadable 动态载入代码。",{"type":167,"tag":314,"props":1682,"children":1683},{},[1684],{"type":173,"value":1685},"为绝大多数用户提供 ES6+ 的代码，使用 nomodule 标志为老的浏览器保留 ES5 版本代码",{"type":167,"tag":182,"props":1687,"children":1688},{},[1689],{"type":173,"value":1690},"最后，在页面可交互到页面加载完毕这个阶段，可以使用图片懒加载或者骨架屏等形式提高体验。",{"type":167,"tag":175,"props":1692,"children":1694},{"id":1693},"关于性能优化的9大策略和6大指标",[1695],{"type":167,"tag":295,"props":1696,"children":1699},{"href":1697,"rel":1698},"https://juejin.cn/post/6981673766178783262",[299],[1700],{"type":173,"value":1693},{"type":167,"tag":310,"props":1702,"children":1703},{},[1704],{"type":167,"tag":314,"props":1705,"children":1706},{},[1707,1709],{"type":173,"value":1708},"网络层面\n",{"type":167,"tag":310,"props":1710,"children":1711},{},[1712,1785,1790],{"type":167,"tag":314,"props":1713,"children":1714},{},[1715,1717,1755],{"type":173,"value":1716},"构建工具优化\n",{"type":167,"tag":310,"props":1718,"children":1719},{},[1720,1725,1730,1735,1740,1745,1750],{"type":167,"tag":314,"props":1721,"children":1722},{},[1723],{"type":173,"value":1724},"include/exclude 避免不必要的查找，比如用在 babel-loader 可以避免不必要的转译",{"type":167,"tag":314,"props":1726,"children":1727},{},[1728],{"type":173,"value":1729},"babel-loader 可配置 cache，只编译修改过的文件",{"type":167,"tag":314,"props":1731,"children":1732},{},[1733],{"type":173,"value":1734},"alias 优化文件查找性能",{"type":167,"tag":314,"props":1736,"children":1737},{},[1738],{"type":173,"value":1739},"thread-loader 多进程编译",{"type":167,"tag":314,"props":1741,"children":1742},{},[1743],{"type":173,"value":1744},"BundleAnalyzer 分析文件体积",{"type":167,"tag":314,"props":1746,"children":1747},{},[1748],{"type":173,"value":1749},"SplitChunks 替换 CommonChunks，渐进式加载",{"type":167,"tag":314,"props":1751,"children":1752},{},[1753],{"type":173,"value":1754},"摇树优化",{"type":167,"tag":310,"props":1756,"children":1757},{},[1758,1763,1768,1773],{"type":167,"tag":314,"props":1759,"children":1760},{},[1761],{"type":173,"value":1762},"按需加载",{"type":167,"tag":314,"props":1764,"children":1765},{},[1766],{"type":173,"value":1767},"动态垫片",{"type":167,"tag":314,"props":1769,"children":1770},{},[1771],{"type":173,"value":1772},"变量提升",{"type":167,"tag":314,"props":1774,"children":1775},{},[1776,1778],{"type":173,"value":1777},"压缩，比如 ",{"type":167,"tag":295,"props":1779,"children":1782},{"href":1780,"rel":1781},"https://webpack.docschina.org/plugins/terser-webpack-plugin/",[299],[1783],{"type":173,"value":1784},"terser",{"type":167,"tag":314,"props":1786,"children":1787},{},[1788],{"type":173,"value":1789},"图像策略",{"type":167,"tag":314,"props":1791,"children":1792},{},[1793,1795],{"type":173,"value":1794},"内容分发\n",{"type":167,"tag":310,"props":1796,"children":1797},{},[1798,1803],{"type":167,"tag":314,"props":1799,"children":1800},{},[1801],{"type":173,"value":1802},"域名分开，避免 Cookie",{"type":167,"tag":314,"props":1804,"children":1805},{},[1806],{"type":173,"value":1807},"静态资源走 CDN",{"type":167,"tag":1809,"props":1810,"children":1811},"style",{},[1812],{"type":173,"value":1813},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":160,"searchDepth":496,"depth":496,"links":1815},[1816,1817,1820,1821,1824],{"id":170,"depth":496,"text":170},{"id":386,"depth":496,"text":386,"children":1818},[1819],{"id":1383,"depth":506,"text":1386},{"id":1402,"depth":496,"text":1402},{"id":1418,"depth":496,"text":1421,"children":1822},[1823],{"id":1567,"depth":506,"text":1386},{"id":1585,"depth":496,"text":1585},"markdown","content:6.maps:_web:performance.md","content","6.maps/_web/performance.md","6.maps/_web/performance","md",[1832,1836],{"_path":1833,"title":1834,"description":1835},"/maps/_web/miniapp","小程序","微信小程序开发指南，包含双线程模型、Exparser 组件框架、分包异步化等技术原理和最佳实践。",{"_path":1837,"title":1838,"description":1839},"/maps/_windows/windows","Windows","记录一些使用 Windows 碰到的问题",1742348682404]