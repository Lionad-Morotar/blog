[{"data":1,"prerenderedAt":564},["ShallowReactive",2],{"navigation":3,"/maps/_cross-platform/flutter":158,"/maps/_cross-platform/flutter-surround":555},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":549,"_id":550,"_source":551,"_file":552,"_stem":553,"_extension":554},"/maps/_cross-platform/flutter","_cross-platform",false,true,"","Flutter","Flutter 是 Google 开发的跨平台 UI 框架，可以快速在 iOS 和 Android 上构建高质量的原生用户界面。",{"type":167,"children":168,"toc":547},"root",[169,185,196,206,211,220,225,233,238,246,251,259,264,272,277,285,290,471,476,484,492,497,505,510,518,523,528,533,541],{"type":170,"tag":171,"props":172,"children":174},"element","h4",{"id":173},"flutter-architectural-overview-cn",[175],{"type":170,"tag":176,"props":177,"children":181},"a",{"href":178,"rel":179},"https://flutter.cn/docs/resources/architectural-overview",[180],"nofollow",[182],{"type":183,"value":184},"text","Flutter architectural overview - CN",{"type":170,"tag":171,"props":186,"children":188},{"id":187},"flutter-architectural-overview",[189],{"type":170,"tag":176,"props":190,"children":193},{"href":191,"rel":192},"https://docs.flutter.dev/resources/architectural-overview",[180],[194],{"type":183,"value":195},"Flutter architectural overview",{"type":170,"tag":197,"props":198,"children":199},"p",{},[200],{"type":170,"tag":201,"props":202,"children":205},"img",{"alt":203,"src":204},"flutter architectural layers","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220615164750.png?type=win11-square",[],{"type":170,"tag":197,"props":207,"children":208},{},[209],{"type":183,"value":210},"响应式及声明式的视图是从 React 框架中获取的灵感。",{"type":170,"tag":197,"props":212,"children":213},{},[214],{"type":170,"tag":215,"props":216,"children":217},"q",{},[218],{"type":183,"value":219},"Flutter is a reactive, pseudo-declarative UI framework, in which the developer provides a mapping from application state to interface state, and the framework takes on the task of updating the interface at runtime when the application state changes. This model is inspired by work that came from Facebook for their own React framework.",{"type":170,"tag":197,"props":221,"children":222},{},[223],{"type":183,"value":224},"build 每帧都会调用，和 Vue 的 watcher.update 相比有很大不同。归因为两者的体量根本就不是一个层面的。",{"type":170,"tag":197,"props":226,"children":227},{},[228],{"type":170,"tag":215,"props":229,"children":230},{},[231],{"type":183,"value":232},"The build() method is by design fast to execute and should be free of side effects, allowing it to be called by the framework whenever needed (potentially as often as once per rendered frame).",{"type":170,"tag":197,"props":234,"children":235},{},[236],{"type":183,"value":237},"快速的对象初始化及 GC 的速度和具体语言相关？有很大差异么？",{"type":170,"tag":197,"props":239,"children":240},{},[241],{"type":170,"tag":215,"props":242,"children":243},{},[244],{"type":183,"value":245},"This approach relies on certain characteristics of a language runtime (in particular, fast object instantiation and deletion). Fortunately, Dart is particularly well suited for this task.",{"type":170,"tag":197,"props":247,"children":248},{},[249],{"type":183,"value":250},"在 HTML 中用 center tag 是禁忌，应该用 CSS 做，这是前端某种常识。然而在 Flutter 中，padding、alignment 等都是由组件（类似 React 组件）来控制的，一个 Container 由 LimitedBox、ConstrainedBox、Align、Padding、DecoratedBox、Transform 组件组成。这是因为 Flutter 把组件设计的功能单一但覆盖面广泛，这是它的“组合优于继承”原则（？）。",{"type":170,"tag":197,"props":252,"children":253},{},[254],{"type":170,"tag":215,"props":255,"children":256},{},[257],{"type":183,"value":258},"So, for example, to center a widget, rather than adjusting a notional Align property, you wrap it in a Center widget. Specifically, Container is made up of the LimitedBox, ConstrainedBox, Align, Padding, DecoratedBox, and Transform widgets.",{"type":170,"tag":197,"props":260,"children":261},{},[262],{"type":183,"value":263},"为什么 build 需要无副作用。",{"type":170,"tag":197,"props":265,"children":266},{},[267],{"type":170,"tag":215,"props":268,"children":269},{},[270],{"type":183,"value":271},"A widget’s build function should be free of side effects. ",{"type":170,"tag":197,"props":273,"children":274},{},[275],{"type":183,"value":276},"无状态组件需要 build，而有状态组件则不需要，因为其用户接口（界面）通过状态自动 build 了。没有找到可以类比的东西。",{"type":170,"tag":197,"props":278,"children":279},{},[280],{"type":170,"tag":215,"props":281,"children":282},{},[283],{"type":183,"value":284},"StatefulWidgets don’t have a build method; instead, their user interface is built through their State object.",{"type":170,"tag":197,"props":286,"children":287},{},[288],{"type":183,"value":289},"Theme、Navigator、MediaQuery 等上下文都需要在使用到的时候去“of”一下才能拿到，这是“最基本的状态管理”，我不理解。",{"type":170,"tag":291,"props":292,"children":296},"pre",{"className":293,"code":294,"language":295,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","Container(\n  color: Theme.of(context).secondaryHeaderColor,\n  child: Text(\n    'Text with a background color',\n    style: Theme.of(context).textTheme.headline6,\n  ),\n);\n","js",[297],{"type":170,"tag":298,"props":299,"children":300},"code",{"__ignoreMap":163},[301,319,358,376,401,444,457],{"type":170,"tag":302,"props":303,"children":306},"span",{"class":304,"line":305},"line",1,[307,313],{"type":170,"tag":302,"props":308,"children":310},{"style":309},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[311],{"type":183,"value":312},"Container",{"type":170,"tag":302,"props":314,"children":316},{"style":315},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[317],{"type":183,"value":318},"(\n",{"type":170,"tag":302,"props":320,"children":322},{"class":304,"line":321},2,[323,328,334,339,344,348,353],{"type":170,"tag":302,"props":324,"children":325},{"style":315},[326],{"type":183,"value":327},"  color: Theme",{"type":170,"tag":302,"props":329,"children":331},{"style":330},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[332],{"type":183,"value":333},".",{"type":170,"tag":302,"props":335,"children":336},{"style":309},[337],{"type":183,"value":338},"of",{"type":170,"tag":302,"props":340,"children":341},{"style":315},[342],{"type":183,"value":343},"(context)",{"type":170,"tag":302,"props":345,"children":346},{"style":330},[347],{"type":183,"value":333},{"type":170,"tag":302,"props":349,"children":350},{"style":315},[351],{"type":183,"value":352},"secondaryHeaderColor",{"type":170,"tag":302,"props":354,"children":355},{"style":330},[356],{"type":183,"value":357},",\n",{"type":170,"tag":302,"props":359,"children":361},{"class":304,"line":360},3,[362,367,372],{"type":170,"tag":302,"props":363,"children":364},{"style":315},[365],{"type":183,"value":366},"  child: ",{"type":170,"tag":302,"props":368,"children":369},{"style":309},[370],{"type":183,"value":371},"Text",{"type":170,"tag":302,"props":373,"children":374},{"style":315},[375],{"type":183,"value":318},{"type":170,"tag":302,"props":377,"children":379},{"class":304,"line":378},4,[380,386,392,397],{"type":170,"tag":302,"props":381,"children":383},{"style":382},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[384],{"type":183,"value":385},"    '",{"type":170,"tag":302,"props":387,"children":389},{"style":388},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[390],{"type":183,"value":391},"Text with a background color",{"type":170,"tag":302,"props":393,"children":394},{"style":382},[395],{"type":183,"value":396},"'",{"type":170,"tag":302,"props":398,"children":399},{"style":330},[400],{"type":183,"value":357},{"type":170,"tag":302,"props":402,"children":404},{"class":304,"line":403},5,[405,410,414,418,422,426,431,435,440],{"type":170,"tag":302,"props":406,"children":407},{"style":315},[408],{"type":183,"value":409},"    style: Theme",{"type":170,"tag":302,"props":411,"children":412},{"style":330},[413],{"type":183,"value":333},{"type":170,"tag":302,"props":415,"children":416},{"style":309},[417],{"type":183,"value":338},{"type":170,"tag":302,"props":419,"children":420},{"style":315},[421],{"type":183,"value":343},{"type":170,"tag":302,"props":423,"children":424},{"style":330},[425],{"type":183,"value":333},{"type":170,"tag":302,"props":427,"children":428},{"style":315},[429],{"type":183,"value":430},"textTheme",{"type":170,"tag":302,"props":432,"children":433},{"style":330},[434],{"type":183,"value":333},{"type":170,"tag":302,"props":436,"children":437},{"style":315},[438],{"type":183,"value":439},"headline6",{"type":170,"tag":302,"props":441,"children":442},{"style":330},[443],{"type":183,"value":357},{"type":170,"tag":302,"props":445,"children":447},{"class":304,"line":446},6,[448,453],{"type":170,"tag":302,"props":449,"children":450},{"style":315},[451],{"type":183,"value":452},"  )",{"type":170,"tag":302,"props":454,"children":455},{"style":330},[456],{"type":183,"value":357},{"type":170,"tag":302,"props":458,"children":460},{"class":304,"line":459},7,[461,466],{"type":170,"tag":302,"props":462,"children":463},{"style":315},[464],{"type":183,"value":465},")",{"type":170,"tag":302,"props":467,"children":468},{"style":330},[469],{"type":183,"value":470},";\n",{"type":170,"tag":197,"props":472,"children":473},{},[474],{"type":183,"value":475},"大部分跨平台框架使用 JS 作为基于 Java 的安卓以及基于 OC 的 iOS 的系统 UI 库的中间层，以及 UI 与 app logic 大量交互，拖累的性能。在 Flutter 中，Dart 代码最终被编译为 native 代码，直接交由 Skia 绘制。这就意味着没有中间层通讯以及 JS 缓慢速度带来的性能损耗。",{"type":170,"tag":197,"props":477,"children":478},{},[479],{"type":170,"tag":215,"props":480,"children":481},{},[482],{"type":183,"value":483},"Cross-platform frameworks typically work by creating an abstraction layer over the underlying native Android and iOS UI libraries, attempting to smooth out the inconsistencies of each platform representation. App code is often written in an interpreted language like JavaScript, which must in turn interact with the Java-based Android or Objective-C-based iOS system libraries to display UI.",{"type":170,"tag":197,"props":485,"children":486},{},[487],{"type":170,"tag":201,"props":488,"children":491},{"alt":489,"src":490},"what's render means in flutter","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220615164637.png",[],{"type":170,"tag":197,"props":493,"children":494},{},[495],{"type":183,"value":496},"Layouts 时，依据深度优先策略把 constraints（min size、max size）自根像叶传递，相反地，实际的元素尺寸信息由叶向根传递。这有点类似某个浏览器中的布局算法？",{"type":170,"tag":197,"props":498,"children":499},{},[500],{"type":170,"tag":201,"props":501,"children":504},{"alt":502,"src":503},"from widgets to element tree, to render tree","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220615164604.png",[],{"type":170,"tag":197,"props":506,"children":507},{},[508],{"type":183,"value":509},"事件不是 Dart 层处理，最终还是交给 Embedded 层处理，为什么要优于“跨平台的框架”？",{"type":170,"tag":197,"props":511,"children":512},{},[513],{"type":170,"tag":215,"props":514,"children":515},{},[516],{"type":183,"value":517},"When you start a Flutter app, the embedder provides the entrypoint, initializes the Flutter engine, obtains threads for UI and rastering, and creates a texture that Flutter can write to. The embedder is also responsible for the app lifecycle, including input gestures (such as mouse, keyboard, touch), window sizing, thread management, and platform messages.",{"type":170,"tag":197,"props":519,"children":520},{},[521],{"type":183,"value":522},"Skia 对接的是 iOS 或 macOS 的 UIViewController 和 NSViewController，安卓的 Activity，以及 Windows 的 ANGLE。这些平台的绘图库（？）直接和驱动打交道（？）。",{"type":170,"tag":197,"props":524,"children":525},{},[526],{"type":183,"value":527},"... 跳过“集成其它代码”部分",{"type":170,"tag":197,"props":529,"children":530},{},[531],{"type":183,"value":532},"Flutter 如果要在 Web 端用 WebGL 绘制，需要引入编译为 WASM 的 Skia 引擎。",{"type":170,"tag":197,"props":534,"children":535},{},[536],{"type":170,"tag":201,"props":537,"children":540},{"alt":538,"src":539},"flutter web support","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220615164818.png?type=win11-square",[],{"type":170,"tag":542,"props":543,"children":544},"style",{},[545],{"type":183,"value":546},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":321,"depth":321,"links":548},[],"markdown","content:6.maps:_cross-platform:flutter.md","content","6.maps/_cross-platform/flutter.md","6.maps/_cross-platform/flutter","md",[556,560],{"_path":557,"title":558,"description":559},"/maps/_cross-platform/device-metrics","Device Metrics","Understand how device pixels, points, and scale factor work together.",{"_path":561,"title":562,"description":563},"/maps/_cross-platform/taro","Taro","Taro 是一个多端开发解决方案，支持用 React/Vue/Nerv 等框架开发小程序、H5、App 等应用。",1742808188384]