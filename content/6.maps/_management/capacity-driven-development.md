---
title: Capacity-driven development（产能驱动开发）
description: 警惕用「填满人」替代「保障价值流」的局部最优，建议用系统健康与组织调度来管理空闲产能。
---

## Brief
在现代软件开发实践中，成功的关键是聚焦工作流本身，而不是单纯追求资源利用率最大化。Stream-aligned 团队本应围绕单一且有价值的流（例如一条用户旅程或一个产品）工作，从而高效地交付端到端价值。

目前出现了一个令人担忧的趋势：所谓“产能驱动开发”。当这些团队出现空闲产能时，会去承接来自其他产品或其他价值流的功能。这在短期内似乎提高了效率，但本质上只是适合应对突发需求高峰的局部优化。一旦被常态化，会显著增加团队认知负荷和技术债；在最坏情况下，由于跨产品频繁上下文切换的成本不断叠加，可能导致类似“拥塞崩溃”的现象，整体交付能力反而下降。

当团队出现富余产能时，更好的选择是优先投入到系统健康的改进上。为了更有效地管理产能，可以：
- 使用 WIP 限制（Work-in-Progress limits）来控制相邻价值流上的并行工作；
- 通过跨技能训练（cross-training）来平衡不同时间段的需求高峰；
- 在需要时采用动态重组团队（dynamic reteaming），而不是简单通过“多接单”填满人力。

## Details

### 背景与现状：从「人不能闲着」到「流不能乱」

#### 为什么现在要讨论 Capacity-driven development

在很多正在向现代工程体系演进的组织里，大家已经接受：

- 用 stream-aligned 团队围绕某条价值流或产品组织；
- 通过端到端 ownership 保证交付速度和反馈闭环。

但是在落地过程中，传统的「人力利用率」心智往往没有一起升级：

- 当发现某个团队近期需求较少，就自然地把其他产品/流的 backlog 塞过去；
- 产能调度的基本目标仍然是“不要有闲人”，而不是“保障关键流的稳态和系统健康”。

在这种语境下，“产能驱动开发”很容易变成一种不被察觉、但对系统长期健康影响巨大的反模式。

### 问题与风险：局部最优带来的系统性退化

#### 核心矛盾：填满人 vs 保持单一价值流专注

原文指出的本质冲突是：

- 设计初衷：stream-aligned 团队只专注于一个单一、清晰的价值流；
- 实际操作：当有空档，就去做其他产品或 value stream 的功能。

这种偏差带来的典型风险包括：

- 价值流聚焦被打散，团队从“深耕一个流”变成“多线拉扯”；
- 注意力被短期需求填满，长期的系统性改进持续被挤出优先级。

#### 认知负荷与上下文切换成本

当团队开始常态化接多个流的工作时：

- 业务维度：
  - 团队被迫理解多个产品/旅程的规则和边界；
  - 心智模型从“一条清晰主线”变成若干不完整的碎片。
- 技术维度：
  - 可能涉及不同代码库、部署 pipeline、监控体系、合规约束；
  - 每一次任务切换，都是一次完整的上下文加载与卸载。

这些成本短期内很隐性，但累积效果往往是：

- Throughput 下降：表面上故事点完成不少，实际交付节奏变慢；
- 质量波动：在不熟悉的上下文里更容易引入缺陷，也更难做好非功能性要求。

#### 技术债与“拥塞崩溃”

原文特别强调的“congestion collapse”值得重视：

- 当多个产品/流都把团队视作“可借用的通用产能池”时：
  - 任何流的需求高峰都会叠加到这个团队上；
  - 优先级频繁重排，上下文不断来回切换。
- 结果是：
  - 看起来事情全都在推进，实际上没有一个流推进得好；
  - 新需求和缺陷互相挤压，技术债只增不减。

同时，当团队只作为“支援劳动力”参与其他流时：

- 对于那些流的技术决策和演进路径缺乏长期 ownership；
- 为赶进度容易落入局部 hack，长远看拖累系统整体演进。

### 模式与原理：从「产能导向」回到「价值流导向」

#### Capacity-driven development 的模式特征

从模式角度看，capacity-driven development 具有几个典型特征：

- 优化目标被设在“让每个团队都满负荷工作”，而不是：
  - 缩短端到端 lead time；
  - 提升关键流的可靠性和可预期性；
  - 改善架构和工程基础设施。
- 组织层面缺乏系统性调度手段，于是：
  - 用“多接项目/多接 feature”来填平不均匀负载；
  - 把结构性问题（流划分、组织边界、平台能力不足）压在一线团队的 task 分配上。

原文的态度非常明确：这种做法仅在**应对突发需求高峰**时是合理的局部优化，一旦常态化，就是系统性的反模式。

#### 推荐的原则：空闲产能优先投向系统健康

原文给出的对策是把“多余产能”视为改善系统健康的机会，而不是自由市场里的“可出售工时”：

- 当一个 stream-aligned 团队出现富余产能时，更优先的方向包括：
  - 偿还技术债；
  - 提升平台与工程效率；
  - 强化可观测性与稳定性；
  - 改善开发者体验（DevEx）等。

这背后的逻辑是：

- 系统健康的改进往往难以在高需求期挤进 backlog；
- 利用低需求期系统性加强“基础设施”，能提升未来处理高负载的能力；
- 与“多接其他流需求”相比，这种投资对长期吞吐量和质量更有保障。

### 对比与演进：旧的「多项目团队」思路 vs 新的 Stream-aligned 实践

#### 传统多项目模式的惯性

很多团队的历史状态是“多项目执行单元”：

- 同一团队同时为多个产品、多个项目服务；
- 通过工时分配和项目数量来衡量价值；
- “谁有空就去哪儿支援”是默认调度策略。

在这种文化下，当组织开始谈 stream-aligned 时，容易出现“名义上围绕流组织，实际上仍然是通用产能池”的过渡态，也就是本文批评的产能驱动模式。

#### 向流导向模式的演进重点

要真正从“多项目团队”演进为“stream-aligned 团队”，需要在实践上做到：

- 唯一主责流：
  - 每个团队只拥有一个一等公民级别的价值流；
  - 其他工作的参与被定义为“例外支援”，而不是默认期望。
- 上下文数量有上限：
  - 有意识地限制团队同时参与的产品/流数量；
  - 对跨域工作尽量通过接口协作、平台能力、组织重构来吸收，而不是压到现有团队上。
- 明确“系统健康工作”的合法性：
  - 在组织层面默认：在主责流相对平稳时，把空档用来改善系统，而不是自动帮其他流清 backlog；
  - 让架构演进、技术债治理、DevEx 优化成为 backlog 的一等公民。

### 系统影响：对架构、工程效率与组织协作的牵引

#### 对架构与技术栈治理的一致性影响

当团队经常在多个价值流之间来回：

- 容易在不同业务中种下风格各异的实现方式：
  - 技术选型和编码风格漂移，难以形成清晰的架构“主干”；
  - 局部为了短期交付做出的折衷，很难在后续获得时间系统清理。
- 领域边界容易变模糊：
  - 谁对哪个域的长期演进负责不清晰；
  - 通用能力和业务特定实现混杂在一起。

反之，如果坚持流导向原则、避免常态化跨流开发：

- 领域边界和所有权更清晰，有利于中长期的架构演进；
- 可以更从容地在每条流内打磨稳定的技术栈与平台能力。

#### 对工程效率与质量文化的影响

在产能驱动模式下：

- 指标和文化可能偏向：
  - 以任务数量、支援次数、工时填满度作为成功衡量；
  - 没有显性空间讨论系统健康、架构演进、工程基础设施。
- 对质量与可维护性的长期关注被弱化：
  - 团队处在持续多线程状态，很难在某个流/系统上形成深度掌控；
  - 缺陷与技术债在多个产品间分散，使得治理难度和成本都上升。

而按照原文建议将空闲产能投入系统健康：

- 有助于形成“质量、可靠性、工程基础设施是团队职责一部分”的共识；
- 从长期来看，提高处理高峰期的抗压能力，降低事故率。

### 落地建议：如何在实际团队中避免「产能驱动陷阱」

#### 1. 明确：跨流支援是短期应急，而非常态机制

可以在团队与管理层达成几个基础原则：

- Stream-aligned 团队的**默认状态**：
  - 专注于单一主责价值流；
  - 富余产能用于该流相关的系统健康与工程提升。
- 跨流支援的**触发条件**应当明确且有限：
  - 例如：重大业务活动、突发流量高峰、严重生产事故等；
  - 支援时间范围和职责范围事先约定清楚，不演化为长期分身。

这有助于把“不断接其他流需求”的惯性约束在例外范围之内。

#### 2. 使用 WIP limits 控制跨流在制品

针对“多流并行导致拥塞”的核心问题，可以：

- 在团队内部：
  - 定义团队整体的在制品上限；
  - 为跨产品/跨流的工作单独设置更严格的 WIP 配额（比如最多 1 个）。
- 在相邻流层面：
  - 对同一组团队能够同时承载的邻接流工作量设置总 WIP；
  - 严格采用“拉动式”机制：团队依据 WIP 余量拉取，而不是由上游不断推任务。

这样可以把“多塞需求”的冲动转化为对现有工作流动性的显性权衡。

#### 3. 通过 Cross-training 与 Dynamic reteaming 做结构性平衡

原文建议的 cross-training 和 dynamic reteaming，可以理解为：

- Cross-training：
  - 在同一条流或强相关流内部，提升团队成员的技能冗余；
  - 使团队在需求侧波动时可以在**同一上下文内**灵活调度人，而非强迫个人去适配完全不同的产品/技术栈。
- Dynamic reteaming：
  - 当某些流长期高压而另一些长期低压时，考虑调整团队边界；
  - 通过拆分、合并或重划 stream 来对齐长期负载，而不是用临时借人解决结构性矛盾。

这两种手段的共同点是：用组织结构和技能结构调整匹配长期 demand pattern，而不是简单做短期工时调度。

#### 4. 让“系统健康”成为 backlog 中的显式选项

要避免“有空就去帮其他流做 feature”的惯性，需要在实践层面：

- 把系统健康相关事项加入 backlog，并定期 review：
  - 技术债偿还项；
  - 架构演进与平台能力增强；
  - 可观测性、SLO 实现与运维自动化改进；
  - 开发效率工具和实践优化。
- 对这类工作给出明确的业务/工程价值叙事：
  - 例如减少事故恢复时间、缩短 lead time、降低新功能引入边际成本等；
  - 让管理层看到“空档做系统健康”并不是“没有产出”。

这样，当团队出现富余产能时，有一个“默认优先队列”，而不是只能通过接额外需求来证明存在价值。

整体来看，这条雷达的核心提醒是：**不要用看似合理的“产能利用率最大化”破坏流导向团队的设计初衷。**在 stream-aligned 的世界里，真正值得优化的是价值流的稳定性与系统健康，而不是把每一点空闲时间都填满跨流需求。用 WIP 限制、跨技能训练与动态重组这类系统性手段管理波动，才更符合长期的架构与工程效率目标。
