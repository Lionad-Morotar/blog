---
title: 使用 DDD 重构项目的一次尝试
description: 基于 Vibe Coding 的 AI 辅助重构实践
---

## 步骤

1. 创建 copilot-instructions.md，描述项目现状

参考：https://docs.github.com/en/copilot/how-tos/configure-custom-instructions/add-repository-instructions

2. 基于项目现状，对重构进行宏观规划

```
作为前端专家，根据 .github/copilot-instructions.md，首先从宏观角度规划，如何将项目进行 DDD 重构。
1. 目标是将项目拆分成人和机皆易读的小型领域
2. 通过接口层及适配器层拆分 coze 及 openai 的具体实现
3. 你还有哪些计划？请补充
4. 先做好宏观规划，然后等我确认和补充
```

3. 从各个角度审视项目重构计划，直到满意，最后需要输出到一个文档，比如 `docs/ddd-refactor.md`

```
作为前端专家，精通 Nuxt 和 TS，对 DDD 实践了然于胸，审视以下计划，及提出可能的改进方案：
---
## 一、现状分析
5. **配置中心化**：将分散的 Agent 配置统一管理，支持动态加载
```

Qoder Max 也是不负我望，生成了洋洋洒洒小千字的重构计划文档。

![创建项目文档](https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20251215212914971.png)

4. 基于最终的重构计划，逐步进行重构。

```
以前端专家角色，精通 DDD、Nuxt、TypeScript，重构项目：
1. 按照 docs/ddd-refactor.md 中的建议，逐步对项目进行 DDD 重构
2. 无需在未完成前完成测试代码（如 pnpm build），仅需逐步改进并生成对应测试用例
3. 在最终完成后，完善项目的测试用例
```

可以看到 Agent 首先创建了一个看着不错的任务清单，然后哼哧哼哧干了起来。

![创建代办](https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20251215212640637.png)

5. 当重构完成后，让 Agent 审视改动，并给出下一步优化建议，如此反复。

```
从各个角度考虑，分点描述，你还有哪些优秀的、可落地的重构建议？
```

因为 Agent 内置的 Todo 非常容易丢失进度，所以可以使用中间文件比如 `docs/todo.md` 来跟踪宏观进度。

```
以前端专家角色，精通 DDD、Nuxt、TypeScript，重构项目：
1. 按照 docs/todo.md 中待办项，逐步对项目进行重构与优化
2. 使用 docs/todo.md 作为你的代办记录，如果优化过程你有新的项目，需将其整理到 docs/todo.md 中，以备后用
​```
