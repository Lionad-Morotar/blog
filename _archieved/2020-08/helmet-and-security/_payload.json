[{"data":1,"prerenderedAt":5034},["ShallowReactive",2],{"navigation":3,"/_archieved/2020-08/helmet-and-security":410,"/_archieved/2020-08/helmet-and-security-surround":5026},[4,32,83,102,129,135,141,147,393,399,405],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96,99],{"title":88,"_path":89},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":91,"_path":92},"🌐 AnySort","/tools/anysort",{"title":94,"_path":95},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":97,"_path":98},"👓 Crapto","/tools/crypto-inline",{"title":100,"_path":101},"🖨️ any-to-base64","/tools/any-to-base64",{"title":103,"_path":104,"children":105},"吉他剧场 / Music","/music",[106,108,111,114,117,120,123,126],{"title":107,"_path":104},"🎸 FingerStyle！",{"title":109,"_path":110},"🌬️ 等待的风","/music/wind",{"title":112,"_path":113},"💕 约定的海洋","/music/ocean",{"title":115,"_path":116},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":118,"_path":119},"🌏 残酷天使的行动纲领","/music/eva",{"title":121,"_path":122},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":124,"_path":125},"🍷 Wu Wei","/music/wu-wei",{"title":127,"_path":128},"🌅 无题","/music/untitled",{"title":130,"_path":131,"children":132},"画点什么 / Paint","/paint",[133],{"title":134,"_path":131},"🚧 正在施工",{"title":136,"_path":137,"children":138},"读书笔记 / Notes","/books",[139],{"title":140,"_path":137},"📕 读书笔记",{"title":142,"_path":143,"children":144},"知识地图 / Maps","/maps",[145],{"title":146,"_path":143},"🏁 知识地图",{"title":148,"_path":149,"children":150},"零散的笔记 / Gists","/gists",[151,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390],{"title":152,"_path":149},"🧊 Gists",{"title":154,"_path":155},"网站的可访问性","/gists/accessibility",{"title":157,"_path":158},"Bit","/gists/bit",{"title":160,"_path":161},"图片模糊","/gists/blur",{"title":163,"_path":164},"渲染相关笔记","/gists/c4d",{"title":166,"_path":167},"CDN 问题记录","/gists/cdn",{"title":169,"_path":170},"消毒剂","/gists/cleaner",{"title":172,"_path":173},"Windows Command","/gists/cmd",{"title":175,"_path":176},"Command","/gists/command",{"title":178,"_path":179},"复杂科学","/gists/complexity-science",{"title":181,"_path":182},"GitHub Copilot","/gists/copilot",{"title":184,"_path":185},"宇宙","/gists/cosmos",{"title":187,"_path":188},"C++","/gists/cpp",{"title":190,"_path":191},"Data Structure","/gists/data-structure",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"设计模式","/gists/design-patterns",{"title":199,"_path":200},"Developer Experience","/gists/developer-experience",{"title":202,"_path":203},"Device Metrics","/gists/device-metrix",{"title":205,"_path":206},"数字化转型","/gists/digital-transformation",{"title":208,"_path":209},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":211,"_path":212},"正则表达式","/gists/eegex",{"title":214,"_path":215},"Emoji","/gists/emoji",{"title":217,"_path":218},"工程","/gists/engineering",{"title":220,"_path":221},"熵","/gists/entropy",{"title":223,"_path":224},"Environment","/gists/environment",{"title":226,"_path":227},"Erlang","/gists/erlang",{"title":229,"_path":230},"逃离塔克夫","/gists/escape-from-tarkov",{"title":232,"_path":233},"ESNext (ES6-ES11)","/gists/esnext",{"title":235,"_path":236},"Eval！","/gists/eval",{"title":238,"_path":239},"Flutter","/gists/flutter",{"title":241,"_path":242},"字体","/gists/font",{"title":244,"_path":245},"JS 函数式编程","/gists/functional",{"title":247,"_path":248},"游戏化","/gists/gamification",{"title":250,"_path":251},"Google C++ Standard","/gists/google-cpp-standard",{"title":253,"_path":254},"双向链接完全体","/gists/graph",{"title":256,"_path":257},"Hardwares","/gists/hardwares",{"title":259,"_path":260},"哈希冲突","/gists/hash-collision",{"title":262,"_path":263},"信息设计","/gists/information-design",{"title":265,"_path":266},"InstantPage","/gists/instant.page",{"title":268,"_path":269},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":271,"_path":272},"KVStore","/gists/key-value-db",{"title":274,"_path":275},"Kubernetes","/gists/kubernetes",{"title":277,"_path":278},"Makefile","/gists/makefile",{"title":280,"_path":281},"Markdown Inline Style","/gists/markdown-nice",{"title":283,"_path":284},"小程序","/gists/miniapp",{"title":286,"_path":287},"减小页面快照体积","/gists/minify-html",{"title":289,"_path":290},"mklink","/gists/mklink",{"title":292,"_path":293},"Mock","/gists/mock",{"title":295,"_path":296},"多人协作系统","/gists/multiplayer",{"title":298,"_path":299},"多端应用","/gists/multy-end-app",{"title":301,"_path":302},"神经科学","/gists/neuroscience",{"title":304,"_path":305},"OO","/gists/oo",{"title":307,"_path":308},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":310,"_path":311},"PInvoke","/gists/pinvoke",{"title":313,"_path":314},"像素","/gists/pixel",{"title":316,"_path":317},"PowerShell","/gists/powershell",{"title":319,"_path":320},"量子","/gists/quantum",{"title":322,"_path":323},"保持好奇心","/gists/questions",{"title":325,"_path":326},"React Native","/gists/react-native",{"title":328,"_path":329},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":331,"_path":332},"SEO","/gists/seo",{"title":334,"_path":335},"Shader","/gists/shader",{"title":337,"_path":338},"Shape Up","/gists/shape-up",{"title":340,"_path":341},"睡觉","/gists/sleep",{"title":343,"_path":344},"记录奇怪的问题","/gists/solved",{"title":346,"_path":347},"States","/gists/states",{"title":349,"_path":350},"Storage","/gists/storage",{"title":352,"_path":353},"音视频流处理","/gists/stream-cli",{"title":355,"_path":356},"Symbol","/gists/symbol",{"title":358,"_path":359},"系统论","/gists/systems-theory",{"title":361,"_path":362},"Taro","/gists/taro",{"title":364,"_path":365},"任务切片","/gists/task-slice",{"title":367,"_path":368},"技术偏好","/gists/tech-dudge",{"title":370,"_path":371},"Untitled","/gists/untitled",{"title":373,"_path":374},"可变字体","/gists/variable-font",{"title":376,"_path":377},"视觉错觉","/gists/visual-illusion",{"title":379,"_path":380},"SS(SSR)","/gists/vpn",{"title":382,"_path":383},"VS Code 插件开发","/gists/vscode-plugin",{"title":385,"_path":386},"Web Components","/gists/web-components",{"title":388,"_path":389},"Windows","/gists/windows",{"title":391,"_path":392},"查缺补漏","/gists/wrong",{"title":394,"_path":395,"children":396},"代码笔记 / Gists","/source-code",[397],{"title":398,"_path":395},"🚄 代码笔记",{"title":400,"_path":401,"children":402},"我 / Abount","/hire",[403],{"title":404,"_path":401},"📬 技术简历",{"title":406,"_path":407,"children":408},"todo","/todo",[409],{"title":406,"_path":407},{"_path":411,"_dir":412,"_draft":413,"_partial":414,"_locale":415,"title":416,"description":417,"body":418,"_type":5020,"_id":5021,"_source":5022,"_file":5023,"_stem":5024,"_extension":5025},"/_archieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":419,"children":420,"toc":5003},"root",[421,443,474,479,641,646,654,659,666,690,697,742,754,766,772,835,856,862,922,934,1002,1016,1021,1081,1106,1140,1149,1175,1181,1218,1959,1979,2186,2192,2217,2260,2268,2824,2829,2877,2913,2921,2933,2939,2963,2970,2993,2998,3228,3247,3559,3564,3570,3609,3619,3684,3696,3704,3709,3741,3753,4457,4478,4486,4492,4552,4564,4570,4583,4596,4655,4660,4665,4684,4707,4740,4997],{"type":422,"tag":423,"props":424,"children":425},"element","p",{},[426,429],{"type":427,"value":428},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":422,"tag":430,"props":431,"children":432},"sup",{},[433],{"type":422,"tag":434,"props":435,"children":440},"a",{"href":436,"ariaDescribedBy":437,"dataFootnoteRef":415,"id":439},"#user-content-fn-helmet",[438],"footnote-label","user-content-fnref-helmet",[441],{"type":427,"value":442},"1",{"type":422,"tag":423,"props":444,"children":445},{},[446,448,459,461,472],{"type":427,"value":447},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":422,"tag":430,"props":449,"children":450},{},[451],{"type":422,"tag":434,"props":452,"children":456},{"href":453,"ariaDescribedBy":454,"dataFootnoteRef":415,"id":455},"#user-content-fn-dns-rebinding-1",[438],"user-content-fnref-dns-rebinding-1",[457],{"type":427,"value":458},"2",{"type":427,"value":460}," 问题，它就无能为力",{"type":422,"tag":430,"props":462,"children":463},{},[464],{"type":422,"tag":434,"props":465,"children":469},{"href":466,"ariaDescribedBy":467,"dataFootnoteRef":415,"id":468},"#user-content-fn-dns-rebinding-2",[438],"user-content-fnref-dns-rebinding-2",[470],{"type":427,"value":471},"3",{"type":427,"value":473},"。不过尽管不是银弹，它确实还是很有效的。",{"type":422,"tag":423,"props":475,"children":476},{},[477],{"type":427,"value":478},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":422,"tag":480,"props":481,"children":485},"pre",{"code":482,"language":483,"meta":415,"className":484,"style":415},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[486],{"type":422,"tag":487,"props":488,"children":489},"code",{"__ignoreMap":415},[490,547,556,582,590],{"type":422,"tag":491,"props":492,"children":495},"span",{"class":493,"line":494},"line",1,[496,502,508,514,520,526,532,538,542],{"type":422,"tag":491,"props":497,"children":499},{"style":498},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[500],{"type":427,"value":501},"const",{"type":422,"tag":491,"props":503,"children":505},{"style":504},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[506],{"type":427,"value":507}," express",{"type":422,"tag":491,"props":509,"children":511},{"style":510},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[512],{"type":427,"value":513}," =",{"type":422,"tag":491,"props":515,"children":517},{"style":516},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[518],{"type":427,"value":519}," require",{"type":422,"tag":491,"props":521,"children":523},{"style":522},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[524],{"type":427,"value":525},"(",{"type":422,"tag":491,"props":527,"children":529},{"style":528},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[530],{"type":427,"value":531},"'",{"type":422,"tag":491,"props":533,"children":535},{"style":534},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[536],{"type":427,"value":537},"express",{"type":422,"tag":491,"props":539,"children":540},{"style":528},[541],{"type":427,"value":531},{"type":422,"tag":491,"props":543,"children":544},{"style":522},[545],{"type":427,"value":546},")\n",{"type":422,"tag":491,"props":548,"children":550},{"class":493,"line":549},2,[551],{"type":422,"tag":491,"props":552,"children":553},{"emptyLinePlaceholder":414},[554],{"type":427,"value":555},"\n",{"type":422,"tag":491,"props":557,"children":559},{"class":493,"line":558},3,[560,564,569,573,577],{"type":422,"tag":491,"props":561,"children":562},{"style":498},[563],{"type":427,"value":501},{"type":422,"tag":491,"props":565,"children":566},{"style":504},[567],{"type":427,"value":568}," app",{"type":422,"tag":491,"props":570,"children":571},{"style":510},[572],{"type":427,"value":513},{"type":422,"tag":491,"props":574,"children":575},{"style":516},[576],{"type":427,"value":507},{"type":422,"tag":491,"props":578,"children":579},{"style":522},[580],{"type":427,"value":581},"()\n",{"type":422,"tag":491,"props":583,"children":585},{"class":493,"line":584},4,[586],{"type":422,"tag":491,"props":587,"children":588},{"emptyLinePlaceholder":414},[589],{"type":427,"value":555},{"type":422,"tag":491,"props":591,"children":593},{"class":493,"line":592},5,[594,599,605,610,614,619,623,627,632,636],{"type":422,"tag":491,"props":595,"children":596},{"style":522},[597],{"type":427,"value":598},"app",{"type":422,"tag":491,"props":600,"children":602},{"style":601},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[603],{"type":427,"value":604},".",{"type":422,"tag":491,"props":606,"children":607},{"style":516},[608],{"type":427,"value":609},"use",{"type":422,"tag":491,"props":611,"children":612},{"style":522},[613],{"type":427,"value":525},{"type":422,"tag":491,"props":615,"children":616},{"style":516},[617],{"type":427,"value":618},"require",{"type":422,"tag":491,"props":620,"children":621},{"style":522},[622],{"type":427,"value":525},{"type":422,"tag":491,"props":624,"children":625},{"style":528},[626],{"type":427,"value":531},{"type":422,"tag":491,"props":628,"children":629},{"style":534},[630],{"type":427,"value":631},"helmet",{"type":422,"tag":491,"props":633,"children":634},{"style":528},[635],{"type":427,"value":531},{"type":422,"tag":491,"props":637,"children":638},{"style":522},[639],{"type":427,"value":640},")())\n",{"type":422,"tag":423,"props":642,"children":643},{},[644],{"type":427,"value":645},"新的响应请求的 Headers 会变成这样：",{"type":422,"tag":480,"props":647,"children":649},{"code":648},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[650],{"type":422,"tag":487,"props":651,"children":652},{"__ignoreMap":415},[653],{"type":427,"value":648},{"type":422,"tag":423,"props":655,"children":656},{},[657],{"type":427,"value":658},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":422,"tag":660,"props":661,"children":663},"h2",{"id":662},"_11-种安全策略",[664],{"type":427,"value":665},"11 种安全策略",{"type":422,"tag":423,"props":667,"children":668},{},[669,671,677,688],{"type":427,"value":670},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":422,"tag":487,"props":672,"children":674},{"className":673},[],[675],{"type":427,"value":676},"OWASP Secure Headers",{"type":422,"tag":430,"props":678,"children":679},{},[680],{"type":422,"tag":434,"props":681,"children":685},{"href":682,"ariaDescribedBy":683,"dataFootnoteRef":415,"id":684},"#user-content-fn-shp",[438],"user-content-fnref-shp",[686],{"type":427,"value":687},"4",{"type":427,"value":689}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":422,"tag":691,"props":692,"children":694},"h3",{"id":693},"移除-x-powered-by",[695],{"type":427,"value":696},"移除 X-Powered-By",{"type":422,"tag":480,"props":698,"children":700},{"code":699,"language":483,"meta":415,"className":484,"style":415},"response.removeHeader('X-Powered-By')\n",[701],{"type":422,"tag":487,"props":702,"children":703},{"__ignoreMap":415},[704],{"type":422,"tag":491,"props":705,"children":706},{"class":493,"line":494},[707,712,716,721,725,729,734,738],{"type":422,"tag":491,"props":708,"children":709},{"style":522},[710],{"type":427,"value":711},"response",{"type":422,"tag":491,"props":713,"children":714},{"style":601},[715],{"type":427,"value":604},{"type":422,"tag":491,"props":717,"children":718},{"style":516},[719],{"type":427,"value":720},"removeHeader",{"type":422,"tag":491,"props":722,"children":723},{"style":522},[724],{"type":427,"value":525},{"type":422,"tag":491,"props":726,"children":727},{"style":528},[728],{"type":427,"value":531},{"type":422,"tag":491,"props":730,"children":731},{"style":534},[732],{"type":427,"value":733},"X-Powered-By",{"type":422,"tag":491,"props":735,"children":736},{"style":528},[737],{"type":427,"value":531},{"type":422,"tag":491,"props":739,"children":740},{"style":522},[741],{"type":427,"value":546},{"type":422,"tag":423,"props":743,"children":744},{},[745,747,752],{"type":427,"value":746},"一些框架会在请求头中添加 ",{"type":422,"tag":487,"props":748,"children":750},{"className":749},[],[751],{"type":427,"value":733},{"type":427,"value":753},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":422,"tag":423,"props":755,"children":756},{},[757,759,764],{"type":427,"value":758},"由于 Express 默认会给响应头增加 ",{"type":422,"tag":487,"props":760,"children":762},{"className":761},[],[763],{"type":427,"value":733},{"type":427,"value":765},"，所以 Helmet 直接把它移除了。",{"type":422,"tag":691,"props":767,"children":769},{"id":768},"移除-mime-嗅探",[770],{"type":427,"value":771},"移除 MIME 嗅探",{"type":422,"tag":480,"props":773,"children":775},{"code":774,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[776],{"type":422,"tag":487,"props":777,"children":778},{"__ignoreMap":415},[779],{"type":422,"tag":491,"props":780,"children":781},{"class":493,"line":494},[782,786,790,795,799,803,808,812,817,822,827,831],{"type":422,"tag":491,"props":783,"children":784},{"style":522},[785],{"type":427,"value":711},{"type":422,"tag":491,"props":787,"children":788},{"style":601},[789],{"type":427,"value":604},{"type":422,"tag":491,"props":791,"children":792},{"style":516},[793],{"type":427,"value":794},"setHeader",{"type":422,"tag":491,"props":796,"children":797},{"style":522},[798],{"type":427,"value":525},{"type":422,"tag":491,"props":800,"children":801},{"style":528},[802],{"type":427,"value":531},{"type":422,"tag":491,"props":804,"children":805},{"style":534},[806],{"type":427,"value":807},"X-Content-Type-Options",{"type":422,"tag":491,"props":809,"children":810},{"style":528},[811],{"type":427,"value":531},{"type":422,"tag":491,"props":813,"children":814},{"style":601},[815],{"type":427,"value":816},",",{"type":422,"tag":491,"props":818,"children":819},{"style":528},[820],{"type":427,"value":821}," '",{"type":422,"tag":491,"props":823,"children":824},{"style":534},[825],{"type":427,"value":826},"nosniff",{"type":422,"tag":491,"props":828,"children":829},{"style":528},[830],{"type":427,"value":531},{"type":422,"tag":491,"props":832,"children":833},{"style":522},[834],{"type":427,"value":546},{"type":422,"tag":423,"props":836,"children":837},{},[838,840,846,848,854],{"type":427,"value":839},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":422,"tag":487,"props":841,"children":843},{"className":842},[],[844],{"type":427,"value":845},"Content-Type",{"type":427,"value":847},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":422,"tag":487,"props":849,"children":851},{"className":850},[],[852],{"type":427,"value":853},"X-Content-Type-Options = nosniff",{"type":427,"value":855}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":422,"tag":691,"props":857,"children":859},{"id":858},"移除-x-xss-protection",[860],{"type":427,"value":861},"移除 X-XSS-Protection",{"type":422,"tag":480,"props":863,"children":865},{"code":864,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('X-XSS-Protection', '0')\n",[866],{"type":422,"tag":487,"props":867,"children":868},{"__ignoreMap":415},[869],{"type":422,"tag":491,"props":870,"children":871},{"class":493,"line":494},[872,876,880,884,888,892,897,901,905,909,914,918],{"type":422,"tag":491,"props":873,"children":874},{"style":522},[875],{"type":427,"value":711},{"type":422,"tag":491,"props":877,"children":878},{"style":601},[879],{"type":427,"value":604},{"type":422,"tag":491,"props":881,"children":882},{"style":516},[883],{"type":427,"value":794},{"type":422,"tag":491,"props":885,"children":886},{"style":522},[887],{"type":427,"value":525},{"type":422,"tag":491,"props":889,"children":890},{"style":528},[891],{"type":427,"value":531},{"type":422,"tag":491,"props":893,"children":894},{"style":534},[895],{"type":427,"value":896},"X-XSS-Protection",{"type":422,"tag":491,"props":898,"children":899},{"style":528},[900],{"type":427,"value":531},{"type":422,"tag":491,"props":902,"children":903},{"style":601},[904],{"type":427,"value":816},{"type":422,"tag":491,"props":906,"children":907},{"style":528},[908],{"type":427,"value":821},{"type":422,"tag":491,"props":910,"children":911},{"style":534},[912],{"type":427,"value":913},"0",{"type":422,"tag":491,"props":915,"children":916},{"style":528},[917],{"type":427,"value":531},{"type":422,"tag":491,"props":919,"children":920},{"style":522},[921],{"type":427,"value":546},{"type":422,"tag":423,"props":923,"children":924},{},[925,927,932],{"type":427,"value":926},"不是应该打开 ",{"type":422,"tag":487,"props":928,"children":930},{"className":929},[],[931],{"type":427,"value":896},{"type":427,"value":933},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":422,"tag":423,"props":935,"children":936},{},[937,939,945,947,958,960,965,967,973,975,986,988,993,995,1000],{"type":427,"value":938},"这得追溯回去年的 Chrome 移除 ",{"type":422,"tag":487,"props":940,"children":942},{"className":941},[],[943],{"type":427,"value":944},"XSS Auditor",{"type":427,"value":946},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":422,"tag":430,"props":948,"children":949},{},[950],{"type":422,"tag":434,"props":951,"children":955},{"href":952,"ariaDescribedBy":953,"dataFootnoteRef":415,"id":954},"#user-content-fn-xss-auditor",[438],"user-content-fnref-xss-auditor",[956],{"type":427,"value":957},"5",{"type":427,"value":959},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":422,"tag":487,"props":961,"children":963},{"className":962},[],[964],{"type":427,"value":944},{"type":427,"value":966},"，并开始使用 ",{"type":422,"tag":487,"props":968,"children":970},{"className":969},[],[971],{"type":427,"value":972},"CSP",{"type":427,"value":974}," 等现代标准（更现代的标准）",{"type":422,"tag":430,"props":976,"children":977},{},[978],{"type":422,"tag":434,"props":979,"children":983},{"href":980,"ariaDescribedBy":981,"dataFootnoteRef":415,"id":982},"#user-content-fn-delete-xss-auditor",[438],"user-content-fnref-delete-xss-auditor",[984],{"type":427,"value":985},"6",{"type":427,"value":987},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":422,"tag":487,"props":989,"children":991},{"className":990},[],[992],{"type":427,"value":896},{"type":427,"value":994}," 这个响应头是让浏览器不要再用 ",{"type":422,"tag":487,"props":996,"children":998},{"className":997},[],[999],{"type":427,"value":944},{"type":427,"value":1001},"。",{"type":422,"tag":423,"props":1003,"children":1004},{},[1005,1007,1015],{"type":427,"value":1006},"见：",{"type":422,"tag":434,"props":1008,"children":1012},{"href":1009,"rel":1010},"https://github.com/OWASP/CheatSheetSeries/issues/376",[1011],"nofollow",[1013],{"type":427,"value":1014},"#376",{"type":427,"value":1001},{"type":422,"tag":691,"props":1017,"children":1019},{"id":1018},"禁止页面被嵌套",[1020],{"type":427,"value":1018},{"type":422,"tag":480,"props":1022,"children":1024},{"code":1023,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[1025],{"type":422,"tag":487,"props":1026,"children":1027},{"__ignoreMap":415},[1028],{"type":422,"tag":491,"props":1029,"children":1030},{"class":493,"line":494},[1031,1035,1039,1043,1047,1051,1056,1060,1064,1068,1073,1077],{"type":422,"tag":491,"props":1032,"children":1033},{"style":522},[1034],{"type":427,"value":711},{"type":422,"tag":491,"props":1036,"children":1037},{"style":601},[1038],{"type":427,"value":604},{"type":422,"tag":491,"props":1040,"children":1041},{"style":516},[1042],{"type":427,"value":794},{"type":422,"tag":491,"props":1044,"children":1045},{"style":522},[1046],{"type":427,"value":525},{"type":422,"tag":491,"props":1048,"children":1049},{"style":528},[1050],{"type":427,"value":531},{"type":422,"tag":491,"props":1052,"children":1053},{"style":534},[1054],{"type":427,"value":1055},"X-Frame-Options",{"type":422,"tag":491,"props":1057,"children":1058},{"style":528},[1059],{"type":427,"value":531},{"type":422,"tag":491,"props":1061,"children":1062},{"style":601},[1063],{"type":427,"value":816},{"type":422,"tag":491,"props":1065,"children":1066},{"style":528},[1067],{"type":427,"value":821},{"type":422,"tag":491,"props":1069,"children":1070},{"style":534},[1071],{"type":427,"value":1072},"SAMEORIGIN",{"type":422,"tag":491,"props":1074,"children":1075},{"style":528},[1076],{"type":427,"value":531},{"type":422,"tag":491,"props":1078,"children":1079},{"style":522},[1080],{"type":427,"value":546},{"type":422,"tag":423,"props":1082,"children":1083},{},[1084,1089,1091,1096,1098,1104],{"type":422,"tag":487,"props":1085,"children":1087},{"className":1086},[],[1088],{"type":427,"value":1055},{"type":427,"value":1090}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":422,"tag":487,"props":1092,"children":1094},{"className":1093},[],[1095],{"type":427,"value":1055},{"type":427,"value":1097}," 为 ",{"type":422,"tag":487,"props":1099,"children":1101},{"className":1100},[],[1102],{"type":427,"value":1103},"SameOrigin",{"type":427,"value":1105},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":422,"tag":423,"props":1107,"children":1108},{},[1109,1111,1117,1119,1124,1125,1131,1133,1138],{"type":427,"value":1110},"本来它的值有三种选择，",{"type":422,"tag":487,"props":1112,"children":1114},{"className":1113},[],[1115],{"type":427,"value":1116},"Deny",{"type":427,"value":1118},"、",{"type":422,"tag":487,"props":1120,"children":1122},{"className":1121},[],[1123],{"type":427,"value":1103},{"type":427,"value":1118},{"type":422,"tag":487,"props":1126,"children":1128},{"className":1127},[],[1129],{"type":427,"value":1130},"AllowFrom",{"type":427,"value":1132},"。但 ",{"type":422,"tag":487,"props":1134,"children":1136},{"className":1135},[],[1137],{"type":427,"value":1130},{"type":427,"value":1139}," 因为其兼容性原因，被 Helmet 弃用：",{"type":422,"tag":423,"props":1141,"children":1142},{},[1143],{"type":422,"tag":1144,"props":1145,"children":1148},"img",{"alt":1146,"src":1147},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":422,"tag":423,"props":1150,"children":1151},{},[1152,1154,1159,1161,1167,1169,1174],{"type":427,"value":1153},"此外，可以在 ",{"type":422,"tag":487,"props":1155,"children":1157},{"className":1156},[],[1158],{"type":427,"value":972},{"type":427,"value":1160}," 中设置 ",{"type":422,"tag":487,"props":1162,"children":1164},{"className":1163},[],[1165],{"type":427,"value":1166},"frame-ancestors",{"type":427,"value":1168}," 指令来替代 ",{"type":422,"tag":487,"props":1170,"children":1172},{"className":1171},[],[1173],{"type":427,"value":1055},{"type":427,"value":1001},{"type":422,"tag":691,"props":1176,"children":1178},{"id":1177},"移除-referer",[1179],{"type":427,"value":1180},"移除 Referer",{"type":422,"tag":423,"props":1182,"children":1183},{},[1184,1190,1192,1198,1209,1211,1216],{"type":422,"tag":487,"props":1185,"children":1187},{"className":1186},[],[1188],{"type":427,"value":1189},"Referrer-Policy",{"type":427,"value":1191}," 可以控制浏览器请求头的 ",{"type":422,"tag":487,"props":1193,"children":1195},{"className":1194},[],[1196],{"type":427,"value":1197},"Referer",{"type":422,"tag":430,"props":1199,"children":1200},{},[1201],{"type":422,"tag":434,"props":1202,"children":1206},{"href":1203,"ariaDescribedBy":1204,"dataFootnoteRef":415,"id":1205},"#user-content-fn-referer",[438],"user-content-fnref-referer",[1207],{"type":427,"value":1208},"7",{"type":427,"value":1210}," 的显示方式。移除 ",{"type":422,"tag":487,"props":1212,"children":1214},{"className":1213},[],[1215],{"type":427,"value":1197},{"type":427,"value":1217}," 能保护用户的访问记录，防止隐私泄漏。",{"type":422,"tag":480,"props":1219,"children":1221},{"code":1220,"language":483,"meta":415,"className":484,"style":415},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1222],{"type":422,"tag":487,"props":1223,"children":1224},{"__ignoreMap":415},[1225,1256,1265,1287,1295,1315,1324,1345,1354,1375,1384,1405,1414,1435,1444,1465,1474,1495,1504,1513,1522,1583,1657,1688,1701,1710,1753,1762,1797,1830,1884,1929,1942,1951],{"type":422,"tag":491,"props":1226,"children":1227},{"class":493,"line":494},[1228,1232,1237,1241,1246,1251],{"type":422,"tag":491,"props":1229,"children":1230},{"style":498},[1231],{"type":427,"value":501},{"type":422,"tag":491,"props":1233,"children":1234},{"style":504},[1235],{"type":427,"value":1236}," ALLOWED_TOKENS",{"type":422,"tag":491,"props":1238,"children":1239},{"style":510},[1240],{"type":427,"value":513},{"type":422,"tag":491,"props":1242,"children":1243},{"style":510},[1244],{"type":427,"value":1245}," new",{"type":422,"tag":491,"props":1247,"children":1248},{"style":516},[1249],{"type":427,"value":1250}," Set",{"type":422,"tag":491,"props":1252,"children":1253},{"style":522},[1254],{"type":427,"value":1255},"([\n",{"type":422,"tag":491,"props":1257,"children":1258},{"class":493,"line":549},[1259],{"type":422,"tag":491,"props":1260,"children":1262},{"style":1261},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1263],{"type":427,"value":1264},"  // 任何时候都不携带 Referer\n",{"type":422,"tag":491,"props":1266,"children":1267},{"class":493,"line":558},[1268,1273,1278,1282],{"type":422,"tag":491,"props":1269,"children":1270},{"style":528},[1271],{"type":427,"value":1272},"  '",{"type":422,"tag":491,"props":1274,"children":1275},{"style":534},[1276],{"type":427,"value":1277},"no-referrer",{"type":422,"tag":491,"props":1279,"children":1280},{"style":528},[1281],{"type":427,"value":531},{"type":422,"tag":491,"props":1283,"children":1284},{"style":601},[1285],{"type":427,"value":1286},",\n",{"type":422,"tag":491,"props":1288,"children":1289},{"class":493,"line":584},[1290],{"type":422,"tag":491,"props":1291,"children":1292},{"style":1261},[1293],{"type":427,"value":1294},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":422,"tag":491,"props":1296,"children":1297},{"class":493,"line":592},[1298,1302,1307,1311],{"type":422,"tag":491,"props":1299,"children":1300},{"style":528},[1301],{"type":427,"value":1272},{"type":422,"tag":491,"props":1303,"children":1304},{"style":534},[1305],{"type":427,"value":1306},"no-referrer-when-downgrade",{"type":422,"tag":491,"props":1308,"children":1309},{"style":528},[1310],{"type":427,"value":531},{"type":422,"tag":491,"props":1312,"children":1313},{"style":601},[1314],{"type":427,"value":1286},{"type":422,"tag":491,"props":1316,"children":1318},{"class":493,"line":1317},6,[1319],{"type":422,"tag":491,"props":1320,"children":1321},{"style":1261},[1322],{"type":427,"value":1323},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":422,"tag":491,"props":1325,"children":1327},{"class":493,"line":1326},7,[1328,1332,1337,1341],{"type":422,"tag":491,"props":1329,"children":1330},{"style":528},[1331],{"type":427,"value":1272},{"type":422,"tag":491,"props":1333,"children":1334},{"style":534},[1335],{"type":427,"value":1336},"same-origin",{"type":422,"tag":491,"props":1338,"children":1339},{"style":528},[1340],{"type":427,"value":531},{"type":422,"tag":491,"props":1342,"children":1343},{"style":601},[1344],{"type":427,"value":1286},{"type":422,"tag":491,"props":1346,"children":1348},{"class":493,"line":1347},8,[1349],{"type":422,"tag":491,"props":1350,"children":1351},{"style":1261},[1352],{"type":427,"value":1353},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":422,"tag":491,"props":1355,"children":1357},{"class":493,"line":1356},9,[1358,1362,1367,1371],{"type":422,"tag":491,"props":1359,"children":1360},{"style":528},[1361],{"type":427,"value":1272},{"type":422,"tag":491,"props":1363,"children":1364},{"style":534},[1365],{"type":427,"value":1366},"origin",{"type":422,"tag":491,"props":1368,"children":1369},{"style":528},[1370],{"type":427,"value":531},{"type":422,"tag":491,"props":1372,"children":1373},{"style":601},[1374],{"type":427,"value":1286},{"type":422,"tag":491,"props":1376,"children":1378},{"class":493,"line":1377},10,[1379],{"type":422,"tag":491,"props":1380,"children":1381},{"style":1261},[1382],{"type":427,"value":1383},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":422,"tag":491,"props":1385,"children":1387},{"class":493,"line":1386},11,[1388,1392,1397,1401],{"type":422,"tag":491,"props":1389,"children":1390},{"style":528},[1391],{"type":427,"value":1272},{"type":422,"tag":491,"props":1393,"children":1394},{"style":534},[1395],{"type":427,"value":1396},"strict-origin",{"type":422,"tag":491,"props":1398,"children":1399},{"style":528},[1400],{"type":427,"value":531},{"type":422,"tag":491,"props":1402,"children":1403},{"style":601},[1404],{"type":427,"value":1286},{"type":422,"tag":491,"props":1406,"children":1408},{"class":493,"line":1407},12,[1409],{"type":422,"tag":491,"props":1410,"children":1411},{"style":1261},[1412],{"type":427,"value":1413},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":422,"tag":491,"props":1415,"children":1417},{"class":493,"line":1416},13,[1418,1422,1427,1431],{"type":422,"tag":491,"props":1419,"children":1420},{"style":528},[1421],{"type":427,"value":1272},{"type":422,"tag":491,"props":1423,"children":1424},{"style":534},[1425],{"type":427,"value":1426},"origin-when-cross-origin",{"type":422,"tag":491,"props":1428,"children":1429},{"style":528},[1430],{"type":427,"value":531},{"type":422,"tag":491,"props":1432,"children":1433},{"style":601},[1434],{"type":427,"value":1286},{"type":422,"tag":491,"props":1436,"children":1438},{"class":493,"line":1437},14,[1439],{"type":422,"tag":491,"props":1440,"children":1441},{"style":1261},[1442],{"type":427,"value":1443},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":422,"tag":491,"props":1445,"children":1447},{"class":493,"line":1446},15,[1448,1452,1457,1461],{"type":422,"tag":491,"props":1449,"children":1450},{"style":528},[1451],{"type":427,"value":1272},{"type":422,"tag":491,"props":1453,"children":1454},{"style":534},[1455],{"type":427,"value":1456},"strict-origin-when-cross-origin",{"type":422,"tag":491,"props":1458,"children":1459},{"style":528},[1460],{"type":427,"value":531},{"type":422,"tag":491,"props":1462,"children":1463},{"style":601},[1464],{"type":427,"value":1286},{"type":422,"tag":491,"props":1466,"children":1468},{"class":493,"line":1467},16,[1469],{"type":422,"tag":491,"props":1470,"children":1471},{"style":1261},[1472],{"type":427,"value":1473},"  // 所有请求都携带上完整的 Referer\n",{"type":422,"tag":491,"props":1475,"children":1477},{"class":493,"line":1476},17,[1478,1482,1487,1491],{"type":422,"tag":491,"props":1479,"children":1480},{"style":528},[1481],{"type":427,"value":1272},{"type":422,"tag":491,"props":1483,"children":1484},{"style":534},[1485],{"type":427,"value":1486},"unsafe-url",{"type":422,"tag":491,"props":1488,"children":1489},{"style":528},[1490],{"type":427,"value":531},{"type":422,"tag":491,"props":1492,"children":1493},{"style":601},[1494],{"type":427,"value":1286},{"type":422,"tag":491,"props":1496,"children":1498},{"class":493,"line":1497},18,[1499],{"type":422,"tag":491,"props":1500,"children":1501},{"style":1261},[1502],{"type":427,"value":1503},"  // 无策略\n",{"type":422,"tag":491,"props":1505,"children":1507},{"class":493,"line":1506},19,[1508],{"type":422,"tag":491,"props":1509,"children":1510},{"style":528},[1511],{"type":427,"value":1512},"  ''\n",{"type":422,"tag":491,"props":1514,"children":1516},{"class":493,"line":1515},20,[1517],{"type":422,"tag":491,"props":1518,"children":1519},{"style":522},[1520],{"type":427,"value":1521},"])\n",{"type":422,"tag":491,"props":1523,"children":1525},{"class":493,"line":1524},21,[1526,1531,1536,1541,1547,1551,1556,1560,1564,1568,1573,1578],{"type":422,"tag":491,"props":1527,"children":1528},{"style":498},[1529],{"type":427,"value":1530},"function",{"type":422,"tag":491,"props":1532,"children":1533},{"style":516},[1534],{"type":427,"value":1535}," getHeaderValueFromOptions",{"type":422,"tag":491,"props":1537,"children":1538},{"style":601},[1539],{"type":427,"value":1540},"({",{"type":422,"tag":491,"props":1542,"children":1544},{"style":1543},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1545],{"type":427,"value":1546}," policy",{"type":422,"tag":491,"props":1548,"children":1549},{"style":510},[1550],{"type":427,"value":513},{"type":422,"tag":491,"props":1552,"children":1553},{"style":522},[1554],{"type":427,"value":1555}," [",{"type":422,"tag":491,"props":1557,"children":1558},{"style":528},[1559],{"type":427,"value":531},{"type":422,"tag":491,"props":1561,"children":1562},{"style":534},[1563],{"type":427,"value":1277},{"type":422,"tag":491,"props":1565,"children":1566},{"style":528},[1567],{"type":427,"value":531},{"type":422,"tag":491,"props":1569,"children":1570},{"style":522},[1571],{"type":427,"value":1572},"] ",{"type":422,"tag":491,"props":1574,"children":1575},{"style":601},[1576],{"type":427,"value":1577},"})",{"type":422,"tag":491,"props":1579,"children":1580},{"style":601},[1581],{"type":427,"value":1582}," {\n",{"type":422,"tag":491,"props":1584,"children":1586},{"class":493,"line":1585},22,[1587,1592,1597,1601,1606,1610,1615,1619,1624,1628,1633,1638,1643,1647,1652],{"type":422,"tag":491,"props":1588,"children":1589},{"style":498},[1590],{"type":427,"value":1591},"  const",{"type":422,"tag":491,"props":1593,"children":1594},{"style":504},[1595],{"type":427,"value":1596}," tokens",{"type":422,"tag":491,"props":1598,"children":1599},{"style":510},[1600],{"type":427,"value":513},{"type":422,"tag":491,"props":1602,"children":1603},{"style":510},[1604],{"type":427,"value":1605}," typeof",{"type":422,"tag":491,"props":1607,"children":1608},{"style":522},[1609],{"type":427,"value":1546},{"type":422,"tag":491,"props":1611,"children":1612},{"style":510},[1613],{"type":427,"value":1614}," ===",{"type":422,"tag":491,"props":1616,"children":1617},{"style":528},[1618],{"type":427,"value":821},{"type":422,"tag":491,"props":1620,"children":1621},{"style":534},[1622],{"type":427,"value":1623},"string",{"type":422,"tag":491,"props":1625,"children":1626},{"style":528},[1627],{"type":427,"value":531},{"type":422,"tag":491,"props":1629,"children":1630},{"style":510},[1631],{"type":427,"value":1632}," ?",{"type":422,"tag":491,"props":1634,"children":1636},{"style":1635},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1637],{"type":427,"value":1555},{"type":422,"tag":491,"props":1639,"children":1640},{"style":522},[1641],{"type":427,"value":1642},"policy",{"type":422,"tag":491,"props":1644,"children":1645},{"style":1635},[1646],{"type":427,"value":1572},{"type":422,"tag":491,"props":1648,"children":1649},{"style":510},[1650],{"type":427,"value":1651},":",{"type":422,"tag":491,"props":1653,"children":1654},{"style":522},[1655],{"type":427,"value":1656}," policy\n",{"type":422,"tag":491,"props":1658,"children":1660},{"class":493,"line":1659},23,[1661,1666,1670,1675,1679,1684],{"type":422,"tag":491,"props":1662,"children":1663},{"style":522},[1664],{"type":427,"value":1665},"    tokensSeen",{"type":422,"tag":491,"props":1667,"children":1668},{"style":601},[1669],{"type":427,"value":604},{"type":422,"tag":491,"props":1671,"children":1672},{"style":516},[1673],{"type":427,"value":1674},"add",{"type":422,"tag":491,"props":1676,"children":1677},{"style":1635},[1678],{"type":427,"value":525},{"type":422,"tag":491,"props":1680,"children":1681},{"style":522},[1682],{"type":427,"value":1683},"token",{"type":422,"tag":491,"props":1685,"children":1686},{"style":1635},[1687],{"type":427,"value":546},{"type":422,"tag":491,"props":1689,"children":1691},{"class":493,"line":1690},24,[1692,1697],{"type":422,"tag":491,"props":1693,"children":1694},{"style":601},[1695],{"type":427,"value":1696},"  }",{"type":422,"tag":491,"props":1698,"children":1699},{"style":522},[1700],{"type":427,"value":546},{"type":422,"tag":491,"props":1702,"children":1704},{"class":493,"line":1703},25,[1705],{"type":422,"tag":491,"props":1706,"children":1707},{"style":1261},[1708],{"type":427,"value":1709},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":422,"tag":491,"props":1711,"children":1713},{"class":493,"line":1712},26,[1714,1720,1724,1728,1733,1737,1741,1745,1749],{"type":422,"tag":491,"props":1715,"children":1717},{"style":1716},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1718],{"type":427,"value":1719},"  return",{"type":422,"tag":491,"props":1721,"children":1722},{"style":522},[1723],{"type":427,"value":1596},{"type":422,"tag":491,"props":1725,"children":1726},{"style":601},[1727],{"type":427,"value":604},{"type":422,"tag":491,"props":1729,"children":1730},{"style":516},[1731],{"type":427,"value":1732},"join",{"type":422,"tag":491,"props":1734,"children":1735},{"style":522},[1736],{"type":427,"value":525},{"type":422,"tag":491,"props":1738,"children":1739},{"style":528},[1740],{"type":427,"value":531},{"type":422,"tag":491,"props":1742,"children":1743},{"style":534},[1744],{"type":427,"value":816},{"type":422,"tag":491,"props":1746,"children":1747},{"style":528},[1748],{"type":427,"value":531},{"type":422,"tag":491,"props":1750,"children":1751},{"style":522},[1752],{"type":427,"value":546},{"type":422,"tag":491,"props":1754,"children":1756},{"class":493,"line":1755},27,[1757],{"type":422,"tag":491,"props":1758,"children":1759},{"style":522},[1760],{"type":427,"value":1761},"}\n",{"type":422,"tag":491,"props":1763,"children":1765},{"class":493,"line":1764},28,[1766,1770,1775,1779,1784,1788,1793],{"type":422,"tag":491,"props":1767,"children":1768},{"style":498},[1769],{"type":427,"value":1530},{"type":422,"tag":491,"props":1771,"children":1772},{"style":516},[1773],{"type":427,"value":1774}," referrerPolicy",{"type":422,"tag":491,"props":1776,"children":1777},{"style":601},[1778],{"type":427,"value":525},{"type":422,"tag":491,"props":1780,"children":1781},{"style":1543},[1782],{"type":427,"value":1783},"options",{"type":422,"tag":491,"props":1785,"children":1786},{"style":510},[1787],{"type":427,"value":513},{"type":422,"tag":491,"props":1789,"children":1790},{"style":601},[1791],{"type":427,"value":1792}," {})",{"type":422,"tag":491,"props":1794,"children":1795},{"style":601},[1796],{"type":427,"value":1582},{"type":422,"tag":491,"props":1798,"children":1800},{"class":493,"line":1799},29,[1801,1805,1810,1814,1818,1822,1826],{"type":422,"tag":491,"props":1802,"children":1803},{"style":498},[1804],{"type":427,"value":1591},{"type":422,"tag":491,"props":1806,"children":1807},{"style":504},[1808],{"type":427,"value":1809}," headerValue",{"type":422,"tag":491,"props":1811,"children":1812},{"style":510},[1813],{"type":427,"value":513},{"type":422,"tag":491,"props":1815,"children":1816},{"style":516},[1817],{"type":427,"value":1535},{"type":422,"tag":491,"props":1819,"children":1820},{"style":1635},[1821],{"type":427,"value":525},{"type":422,"tag":491,"props":1823,"children":1824},{"style":522},[1825],{"type":427,"value":1783},{"type":422,"tag":491,"props":1827,"children":1828},{"style":1635},[1829],{"type":427,"value":546},{"type":422,"tag":491,"props":1831,"children":1833},{"class":493,"line":1832},30,[1834,1838,1843,1848,1852,1857,1861,1866,1870,1875,1880],{"type":422,"tag":491,"props":1835,"children":1836},{"style":1716},[1837],{"type":427,"value":1719},{"type":422,"tag":491,"props":1839,"children":1840},{"style":498},[1841],{"type":427,"value":1842}," function",{"type":422,"tag":491,"props":1844,"children":1845},{"style":516},[1846],{"type":427,"value":1847}," referrerPolicyMiddleware",{"type":422,"tag":491,"props":1849,"children":1850},{"style":601},[1851],{"type":427,"value":525},{"type":422,"tag":491,"props":1853,"children":1854},{"style":1543},[1855],{"type":427,"value":1856},"_req",{"type":422,"tag":491,"props":1858,"children":1859},{"style":601},[1860],{"type":427,"value":816},{"type":422,"tag":491,"props":1862,"children":1863},{"style":1543},[1864],{"type":427,"value":1865}," res",{"type":422,"tag":491,"props":1867,"children":1868},{"style":601},[1869],{"type":427,"value":816},{"type":422,"tag":491,"props":1871,"children":1872},{"style":1543},[1873],{"type":427,"value":1874}," next",{"type":422,"tag":491,"props":1876,"children":1877},{"style":601},[1878],{"type":427,"value":1879},")",{"type":422,"tag":491,"props":1881,"children":1882},{"style":601},[1883],{"type":427,"value":1582},{"type":422,"tag":491,"props":1885,"children":1887},{"class":493,"line":1886},31,[1888,1893,1897,1901,1905,1909,1913,1917,1921,1925],{"type":422,"tag":491,"props":1889,"children":1890},{"style":522},[1891],{"type":427,"value":1892},"    res",{"type":422,"tag":491,"props":1894,"children":1895},{"style":601},[1896],{"type":427,"value":604},{"type":422,"tag":491,"props":1898,"children":1899},{"style":516},[1900],{"type":427,"value":794},{"type":422,"tag":491,"props":1902,"children":1903},{"style":1635},[1904],{"type":427,"value":525},{"type":422,"tag":491,"props":1906,"children":1907},{"style":528},[1908],{"type":427,"value":531},{"type":422,"tag":491,"props":1910,"children":1911},{"style":534},[1912],{"type":427,"value":1189},{"type":422,"tag":491,"props":1914,"children":1915},{"style":528},[1916],{"type":427,"value":531},{"type":422,"tag":491,"props":1918,"children":1919},{"style":601},[1920],{"type":427,"value":816},{"type":422,"tag":491,"props":1922,"children":1923},{"style":522},[1924],{"type":427,"value":1809},{"type":422,"tag":491,"props":1926,"children":1927},{"style":1635},[1928],{"type":427,"value":546},{"type":422,"tag":491,"props":1930,"children":1932},{"class":493,"line":1931},32,[1933,1938],{"type":422,"tag":491,"props":1934,"children":1935},{"style":516},[1936],{"type":427,"value":1937},"    next",{"type":422,"tag":491,"props":1939,"children":1940},{"style":1635},[1941],{"type":427,"value":581},{"type":422,"tag":491,"props":1943,"children":1945},{"class":493,"line":1944},33,[1946],{"type":422,"tag":491,"props":1947,"children":1948},{"style":601},[1949],{"type":427,"value":1950},"  }\n",{"type":422,"tag":491,"props":1952,"children":1954},{"class":493,"line":1953},34,[1955],{"type":422,"tag":491,"props":1956,"children":1957},{"style":601},[1958],{"type":427,"value":1761},{"type":422,"tag":423,"props":1960,"children":1961},{},[1962,1964,1970,1972,1977],{"type":427,"value":1963},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":422,"tag":487,"props":1965,"children":1967},{"className":1966},[],[1968],{"type":427,"value":1969},"Referrer Policy",{"type":427,"value":1971},"。Meta 标签设置的 ",{"type":422,"tag":487,"props":1973,"children":1975},{"className":1974},[],[1976],{"type":427,"value":1969},{"type":427,"value":1978}," 对整个页面都有效果（但优先级最低）。",{"type":422,"tag":480,"props":1980,"children":1984},{"code":1981,"language":1982,"meta":415,"className":1983,"style":415},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1985],{"type":422,"tag":487,"props":1986,"children":1987},{"__ignoreMap":415},[1988,2053,2121],{"type":422,"tag":491,"props":1989,"children":1990},{"class":493,"line":494},[1991,1996,2002,2008,2013,2018,2023,2027,2032,2036,2040,2044,2048],{"type":422,"tag":491,"props":1992,"children":1993},{"style":601},[1994],{"type":427,"value":1995},"\u003C",{"type":422,"tag":491,"props":1997,"children":1999},{"style":1998},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[2000],{"type":427,"value":2001},"meta",{"type":422,"tag":491,"props":2003,"children":2005},{"style":2004},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[2006],{"type":427,"value":2007}," name",{"type":422,"tag":491,"props":2009,"children":2010},{"style":601},[2011],{"type":427,"value":2012},"=",{"type":422,"tag":491,"props":2014,"children":2015},{"style":528},[2016],{"type":427,"value":2017},"\"",{"type":422,"tag":491,"props":2019,"children":2020},{"style":534},[2021],{"type":427,"value":2022},"referrer",{"type":422,"tag":491,"props":2024,"children":2025},{"style":528},[2026],{"type":427,"value":2017},{"type":422,"tag":491,"props":2028,"children":2029},{"style":2004},[2030],{"type":427,"value":2031}," content",{"type":422,"tag":491,"props":2033,"children":2034},{"style":601},[2035],{"type":427,"value":2012},{"type":422,"tag":491,"props":2037,"children":2038},{"style":528},[2039],{"type":427,"value":2017},{"type":422,"tag":491,"props":2041,"children":2042},{"style":534},[2043],{"type":427,"value":1366},{"type":422,"tag":491,"props":2045,"children":2046},{"style":528},[2047],{"type":427,"value":2017},{"type":422,"tag":491,"props":2049,"children":2050},{"style":601},[2051],{"type":427,"value":2052}," />\n",{"type":422,"tag":491,"props":2054,"children":2055},{"class":493,"line":549},[2056,2060,2064,2069,2073,2077,2082,2086,2091,2095,2099,2103,2107,2112,2116],{"type":422,"tag":491,"props":2057,"children":2058},{"style":601},[2059],{"type":427,"value":1995},{"type":422,"tag":491,"props":2061,"children":2062},{"style":1998},[2063],{"type":427,"value":434},{"type":422,"tag":491,"props":2065,"children":2066},{"style":2004},[2067],{"type":427,"value":2068}," href",{"type":422,"tag":491,"props":2070,"children":2071},{"style":601},[2072],{"type":427,"value":2012},{"type":422,"tag":491,"props":2074,"children":2075},{"style":528},[2076],{"type":427,"value":2017},{"type":422,"tag":491,"props":2078,"children":2079},{"style":534},[2080],{"type":427,"value":2081},"http://example.com",{"type":422,"tag":491,"props":2083,"children":2084},{"style":528},[2085],{"type":427,"value":2017},{"type":422,"tag":491,"props":2087,"children":2088},{"style":2004},[2089],{"type":427,"value":2090}," referrerpolicy",{"type":422,"tag":491,"props":2092,"children":2093},{"style":601},[2094],{"type":427,"value":2012},{"type":422,"tag":491,"props":2096,"children":2097},{"style":528},[2098],{"type":427,"value":2017},{"type":422,"tag":491,"props":2100,"children":2101},{"style":534},[2102],{"type":427,"value":1366},{"type":422,"tag":491,"props":2104,"children":2105},{"style":528},[2106],{"type":427,"value":2017},{"type":422,"tag":491,"props":2108,"children":2109},{"style":601},[2110],{"type":427,"value":2111},">\u003C/",{"type":422,"tag":491,"props":2113,"children":2114},{"style":1998},[2115],{"type":427,"value":434},{"type":422,"tag":491,"props":2117,"children":2118},{"style":601},[2119],{"type":427,"value":2120},">\n",{"type":422,"tag":491,"props":2122,"children":2123},{"class":493,"line":558},[2124,2128,2132,2136,2140,2144,2148,2152,2157,2161,2165,2170,2174,2178,2182],{"type":422,"tag":491,"props":2125,"children":2126},{"style":601},[2127],{"type":427,"value":1995},{"type":422,"tag":491,"props":2129,"children":2130},{"style":1998},[2131],{"type":427,"value":434},{"type":422,"tag":491,"props":2133,"children":2134},{"style":2004},[2135],{"type":427,"value":2068},{"type":422,"tag":491,"props":2137,"children":2138},{"style":601},[2139],{"type":427,"value":2012},{"type":422,"tag":491,"props":2141,"children":2142},{"style":528},[2143],{"type":427,"value":2017},{"type":422,"tag":491,"props":2145,"children":2146},{"style":534},[2147],{"type":427,"value":2081},{"type":422,"tag":491,"props":2149,"children":2150},{"style":528},[2151],{"type":427,"value":2017},{"type":422,"tag":491,"props":2153,"children":2154},{"style":2004},[2155],{"type":427,"value":2156}," rel",{"type":422,"tag":491,"props":2158,"children":2159},{"style":601},[2160],{"type":427,"value":2012},{"type":422,"tag":491,"props":2162,"children":2163},{"style":528},[2164],{"type":427,"value":2017},{"type":422,"tag":491,"props":2166,"children":2167},{"style":534},[2168],{"type":427,"value":2169},"noreferrer",{"type":422,"tag":491,"props":2171,"children":2172},{"style":528},[2173],{"type":427,"value":2017},{"type":422,"tag":491,"props":2175,"children":2176},{"style":601},[2177],{"type":427,"value":2111},{"type":422,"tag":491,"props":2179,"children":2180},{"style":1998},[2181],{"type":427,"value":434},{"type":422,"tag":491,"props":2183,"children":2184},{"style":601},[2185],{"type":427,"value":2120},{"type":422,"tag":691,"props":2187,"children":2189},{"id":2188},"强制使用-https",[2190],{"type":427,"value":2191},"强制使用 HTTPS",{"type":422,"tag":423,"props":2193,"children":2194},{},[2195,2197,2203,2205,2216],{"type":427,"value":2196},"通过设置请求头的 ",{"type":422,"tag":487,"props":2198,"children":2200},{"className":2199},[],[2201],{"type":427,"value":2202},"Strict-Transport-Security（STS）",{"type":427,"value":2204},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":422,"tag":430,"props":2206,"children":2207},{},[2208],{"type":422,"tag":434,"props":2209,"children":2213},{"href":2210,"ariaDescribedBy":2211,"dataFootnoteRef":415,"id":2212},"#user-content-fn-timeend",[438],"user-content-fnref-timeend",[2214],{"type":427,"value":2215},"8",{"type":427,"value":1001},{"type":422,"tag":423,"props":2218,"children":2219},{},[2220,2222,2228,2230,2236,2238,2244,2246,2252,2254,2259],{"type":427,"value":2221},"这个规范本身很好理解，通过 ",{"type":422,"tag":487,"props":2223,"children":2225},{"className":2224},[],[2226],{"type":427,"value":2227},"max-age",{"type":427,"value":2229}," 可以指定倒计时时间；",{"type":422,"tag":487,"props":2231,"children":2233},{"className":2232},[],[2234],{"type":427,"value":2235},"includesSubDomains",{"type":427,"value":2237}," 指定子域的 ",{"type":422,"tag":487,"props":2239,"children":2241},{"className":2240},[],[2242],{"type":427,"value":2243},"HSTS",{"type":427,"value":2245},"；",{"type":422,"tag":487,"props":2247,"children":2249},{"className":2248},[],[2250],{"type":427,"value":2251},"preload",{"type":427,"value":2253}," 指定预加载内容的 ",{"type":422,"tag":487,"props":2255,"children":2257},{"className":2256},[],[2258],{"type":427,"value":2243},{"type":427,"value":1001},{"type":422,"tag":480,"props":2261,"children":2263},{"code":2262},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2264],{"type":422,"tag":487,"props":2265,"children":2266},{"__ignoreMap":415},[2267],{"type":427,"value":2262},{"type":422,"tag":480,"props":2269,"children":2271},{"code":2270,"language":483,"meta":415,"className":484,"style":415},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2272],{"type":422,"tag":487,"props":2273,"children":2274},{"__ignoreMap":415},[2275,2337,2364,2437,2500,2537,2544,2597,2637,2644,2676,2707,2755,2799,2810,2817],{"type":422,"tag":491,"props":2276,"children":2277},{"class":493,"line":494},[2278,2282,2287,2291,2296,2300,2306,2311,2316,2320,2325,2329,2333],{"type":422,"tag":491,"props":2279,"children":2280},{"style":498},[2281],{"type":427,"value":501},{"type":422,"tag":491,"props":2283,"children":2284},{"style":504},[2285],{"type":427,"value":2286}," DEFAULT_MAX_AGE",{"type":422,"tag":491,"props":2288,"children":2289},{"style":510},[2290],{"type":427,"value":513},{"type":422,"tag":491,"props":2292,"children":2293},{"style":516},[2294],{"type":427,"value":2295}," String",{"type":422,"tag":491,"props":2297,"children":2298},{"style":522},[2299],{"type":427,"value":525},{"type":422,"tag":491,"props":2301,"children":2303},{"style":2302},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2304],{"type":427,"value":2305},"180",{"type":422,"tag":491,"props":2307,"children":2308},{"style":510},[2309],{"type":427,"value":2310}," *",{"type":422,"tag":491,"props":2312,"children":2313},{"style":2302},[2314],{"type":427,"value":2315}," 24",{"type":422,"tag":491,"props":2317,"children":2318},{"style":510},[2319],{"type":427,"value":2310},{"type":422,"tag":491,"props":2321,"children":2322},{"style":2302},[2323],{"type":427,"value":2324}," 60",{"type":422,"tag":491,"props":2326,"children":2327},{"style":510},[2328],{"type":427,"value":2310},{"type":422,"tag":491,"props":2330,"children":2331},{"style":2302},[2332],{"type":427,"value":2324},{"type":422,"tag":491,"props":2334,"children":2335},{"style":522},[2336],{"type":427,"value":546},{"type":422,"tag":491,"props":2338,"children":2339},{"class":493,"line":549},[2340,2344,2348,2352,2356,2360],{"type":422,"tag":491,"props":2341,"children":2342},{"style":498},[2343],{"type":427,"value":1530},{"type":422,"tag":491,"props":2345,"children":2346},{"style":516},[2347],{"type":427,"value":1535},{"type":422,"tag":491,"props":2349,"children":2350},{"style":601},[2351],{"type":427,"value":525},{"type":422,"tag":491,"props":2353,"children":2354},{"style":1543},[2355],{"type":427,"value":1783},{"type":422,"tag":491,"props":2357,"children":2358},{"style":601},[2359],{"type":427,"value":1879},{"type":422,"tag":491,"props":2361,"children":2362},{"style":601},[2363],{"type":427,"value":1582},{"type":422,"tag":491,"props":2365,"children":2366},{"class":493,"line":558},[2367,2371,2376,2380,2384,2389,2394,2400,2404,2409,2414,2419,2423,2428,2432],{"type":422,"tag":491,"props":2368,"children":2369},{"style":498},[2370],{"type":427,"value":1591},{"type":422,"tag":491,"props":2372,"children":2373},{"style":504},[2374],{"type":427,"value":2375}," directives",{"type":422,"tag":491,"props":2377,"children":2378},{"style":510},[2379],{"type":427,"value":513},{"type":422,"tag":491,"props":2381,"children":2382},{"style":1635},[2383],{"type":427,"value":1555},{"type":422,"tag":491,"props":2385,"children":2386},{"style":528},[2387],{"type":427,"value":2388},"`",{"type":422,"tag":491,"props":2390,"children":2391},{"style":534},[2392],{"type":427,"value":2393},"max-age=",{"type":422,"tag":491,"props":2395,"children":2397},{"style":2396},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2398],{"type":427,"value":2399},"${",{"type":422,"tag":491,"props":2401,"children":2402},{"style":522},[2403],{"type":427,"value":1783},{"type":422,"tag":491,"props":2405,"children":2407},{"style":2406},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2408],{"type":427,"value":604},{"type":422,"tag":491,"props":2410,"children":2411},{"style":522},[2412],{"type":427,"value":2413},"maxAge",{"type":422,"tag":491,"props":2415,"children":2416},{"style":510},[2417],{"type":427,"value":2418}," ||",{"type":422,"tag":491,"props":2420,"children":2421},{"style":504},[2422],{"type":427,"value":2286},{"type":422,"tag":491,"props":2424,"children":2425},{"style":2396},[2426],{"type":427,"value":2427},"}",{"type":422,"tag":491,"props":2429,"children":2430},{"style":528},[2431],{"type":427,"value":2388},{"type":422,"tag":491,"props":2433,"children":2434},{"style":1635},[2435],{"type":427,"value":2436},"]\n",{"type":422,"tag":491,"props":2438,"children":2439},{"class":493,"line":584},[2440,2445,2450,2454,2458,2463,2467,2473,2477,2482,2486,2490,2495],{"type":422,"tag":491,"props":2441,"children":2442},{"style":1716},[2443],{"type":427,"value":2444},"  if",{"type":422,"tag":491,"props":2446,"children":2447},{"style":1635},[2448],{"type":427,"value":2449}," (",{"type":422,"tag":491,"props":2451,"children":2452},{"style":522},[2453],{"type":427,"value":1783},{"type":422,"tag":491,"props":2455,"children":2456},{"style":601},[2457],{"type":427,"value":604},{"type":422,"tag":491,"props":2459,"children":2460},{"style":522},[2461],{"type":427,"value":2462},"includeSubDomains",{"type":422,"tag":491,"props":2464,"children":2465},{"style":510},[2466],{"type":427,"value":1614},{"type":422,"tag":491,"props":2468,"children":2470},{"style":2469},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2471],{"type":427,"value":2472}," undefined",{"type":422,"tag":491,"props":2474,"children":2475},{"style":510},[2476],{"type":427,"value":2418},{"type":422,"tag":491,"props":2478,"children":2479},{"style":522},[2480],{"type":427,"value":2481}," options",{"type":422,"tag":491,"props":2483,"children":2484},{"style":601},[2485],{"type":427,"value":604},{"type":422,"tag":491,"props":2487,"children":2488},{"style":522},[2489],{"type":427,"value":2462},{"type":422,"tag":491,"props":2491,"children":2492},{"style":1635},[2493],{"type":427,"value":2494},") ",{"type":422,"tag":491,"props":2496,"children":2497},{"style":601},[2498],{"type":427,"value":2499},"{\n",{"type":422,"tag":491,"props":2501,"children":2502},{"class":493,"line":592},[2503,2508,2512,2517,2521,2525,2529,2533],{"type":422,"tag":491,"props":2504,"children":2505},{"style":522},[2506],{"type":427,"value":2507},"    directives",{"type":422,"tag":491,"props":2509,"children":2510},{"style":601},[2511],{"type":427,"value":604},{"type":422,"tag":491,"props":2513,"children":2514},{"style":516},[2515],{"type":427,"value":2516},"push",{"type":422,"tag":491,"props":2518,"children":2519},{"style":1635},[2520],{"type":427,"value":525},{"type":422,"tag":491,"props":2522,"children":2523},{"style":528},[2524],{"type":427,"value":531},{"type":422,"tag":491,"props":2526,"children":2527},{"style":534},[2528],{"type":427,"value":2462},{"type":422,"tag":491,"props":2530,"children":2531},{"style":528},[2532],{"type":427,"value":531},{"type":422,"tag":491,"props":2534,"children":2535},{"style":1635},[2536],{"type":427,"value":546},{"type":422,"tag":491,"props":2538,"children":2539},{"class":493,"line":1317},[2540],{"type":422,"tag":491,"props":2541,"children":2542},{"style":601},[2543],{"type":427,"value":1950},{"type":422,"tag":491,"props":2545,"children":2546},{"class":493,"line":1326},[2547,2552,2556,2560,2565,2569,2573,2577,2581,2585,2589,2593],{"type":422,"tag":491,"props":2548,"children":2549},{"style":522},[2550],{"type":427,"value":2551},"  options",{"type":422,"tag":491,"props":2553,"children":2554},{"style":601},[2555],{"type":427,"value":604},{"type":422,"tag":491,"props":2557,"children":2558},{"style":522},[2559],{"type":427,"value":2251},{"type":422,"tag":491,"props":2561,"children":2562},{"style":510},[2563],{"type":427,"value":2564}," &&",{"type":422,"tag":491,"props":2566,"children":2567},{"style":522},[2568],{"type":427,"value":2375},{"type":422,"tag":491,"props":2570,"children":2571},{"style":601},[2572],{"type":427,"value":604},{"type":422,"tag":491,"props":2574,"children":2575},{"style":516},[2576],{"type":427,"value":2516},{"type":422,"tag":491,"props":2578,"children":2579},{"style":1635},[2580],{"type":427,"value":525},{"type":422,"tag":491,"props":2582,"children":2583},{"style":528},[2584],{"type":427,"value":531},{"type":422,"tag":491,"props":2586,"children":2587},{"style":534},[2588],{"type":427,"value":2251},{"type":422,"tag":491,"props":2590,"children":2591},{"style":528},[2592],{"type":427,"value":531},{"type":422,"tag":491,"props":2594,"children":2595},{"style":1635},[2596],{"type":427,"value":546},{"type":422,"tag":491,"props":2598,"children":2599},{"class":493,"line":1347},[2600,2604,2608,2612,2616,2620,2624,2629,2633],{"type":422,"tag":491,"props":2601,"children":2602},{"style":1716},[2603],{"type":427,"value":1719},{"type":422,"tag":491,"props":2605,"children":2606},{"style":522},[2607],{"type":427,"value":2375},{"type":422,"tag":491,"props":2609,"children":2610},{"style":601},[2611],{"type":427,"value":604},{"type":422,"tag":491,"props":2613,"children":2614},{"style":516},[2615],{"type":427,"value":1732},{"type":422,"tag":491,"props":2617,"children":2618},{"style":1635},[2619],{"type":427,"value":525},{"type":422,"tag":491,"props":2621,"children":2622},{"style":528},[2623],{"type":427,"value":531},{"type":422,"tag":491,"props":2625,"children":2626},{"style":534},[2627],{"type":427,"value":2628},"; ",{"type":422,"tag":491,"props":2630,"children":2631},{"style":528},[2632],{"type":427,"value":531},{"type":422,"tag":491,"props":2634,"children":2635},{"style":1635},[2636],{"type":427,"value":546},{"type":422,"tag":491,"props":2638,"children":2639},{"class":493,"line":1356},[2640],{"type":422,"tag":491,"props":2641,"children":2642},{"style":601},[2643],{"type":427,"value":1761},{"type":422,"tag":491,"props":2645,"children":2646},{"class":493,"line":1377},[2647,2651,2656,2660,2664,2668,2672],{"type":422,"tag":491,"props":2648,"children":2649},{"style":498},[2650],{"type":427,"value":1530},{"type":422,"tag":491,"props":2652,"children":2653},{"style":516},[2654],{"type":427,"value":2655}," strictTransportSecurity",{"type":422,"tag":491,"props":2657,"children":2658},{"style":601},[2659],{"type":427,"value":525},{"type":422,"tag":491,"props":2661,"children":2662},{"style":1543},[2663],{"type":427,"value":1783},{"type":422,"tag":491,"props":2665,"children":2666},{"style":510},[2667],{"type":427,"value":513},{"type":422,"tag":491,"props":2669,"children":2670},{"style":601},[2671],{"type":427,"value":1792},{"type":422,"tag":491,"props":2673,"children":2674},{"style":601},[2675],{"type":427,"value":1582},{"type":422,"tag":491,"props":2677,"children":2678},{"class":493,"line":1386},[2679,2683,2687,2691,2695,2699,2703],{"type":422,"tag":491,"props":2680,"children":2681},{"style":498},[2682],{"type":427,"value":1591},{"type":422,"tag":491,"props":2684,"children":2685},{"style":504},[2686],{"type":427,"value":1809},{"type":422,"tag":491,"props":2688,"children":2689},{"style":510},[2690],{"type":427,"value":513},{"type":422,"tag":491,"props":2692,"children":2693},{"style":516},[2694],{"type":427,"value":1535},{"type":422,"tag":491,"props":2696,"children":2697},{"style":1635},[2698],{"type":427,"value":525},{"type":422,"tag":491,"props":2700,"children":2701},{"style":522},[2702],{"type":427,"value":1783},{"type":422,"tag":491,"props":2704,"children":2705},{"style":1635},[2706],{"type":427,"value":546},{"type":422,"tag":491,"props":2708,"children":2709},{"class":493,"line":1407},[2710,2714,2718,2723,2727,2731,2735,2739,2743,2747,2751],{"type":422,"tag":491,"props":2711,"children":2712},{"style":1716},[2713],{"type":427,"value":1719},{"type":422,"tag":491,"props":2715,"children":2716},{"style":498},[2717],{"type":427,"value":1842},{"type":422,"tag":491,"props":2719,"children":2720},{"style":516},[2721],{"type":427,"value":2722}," strictTransportSecurityMiddleware",{"type":422,"tag":491,"props":2724,"children":2725},{"style":601},[2726],{"type":427,"value":525},{"type":422,"tag":491,"props":2728,"children":2729},{"style":1543},[2730],{"type":427,"value":1856},{"type":422,"tag":491,"props":2732,"children":2733},{"style":601},[2734],{"type":427,"value":816},{"type":422,"tag":491,"props":2736,"children":2737},{"style":1543},[2738],{"type":427,"value":1865},{"type":422,"tag":491,"props":2740,"children":2741},{"style":601},[2742],{"type":427,"value":816},{"type":422,"tag":491,"props":2744,"children":2745},{"style":1543},[2746],{"type":427,"value":1874},{"type":422,"tag":491,"props":2748,"children":2749},{"style":601},[2750],{"type":427,"value":1879},{"type":422,"tag":491,"props":2752,"children":2753},{"style":601},[2754],{"type":427,"value":1582},{"type":422,"tag":491,"props":2756,"children":2757},{"class":493,"line":1416},[2758,2762,2766,2770,2774,2778,2783,2787,2791,2795],{"type":422,"tag":491,"props":2759,"children":2760},{"style":522},[2761],{"type":427,"value":1892},{"type":422,"tag":491,"props":2763,"children":2764},{"style":601},[2765],{"type":427,"value":604},{"type":422,"tag":491,"props":2767,"children":2768},{"style":516},[2769],{"type":427,"value":794},{"type":422,"tag":491,"props":2771,"children":2772},{"style":1635},[2773],{"type":427,"value":525},{"type":422,"tag":491,"props":2775,"children":2776},{"style":528},[2777],{"type":427,"value":531},{"type":422,"tag":491,"props":2779,"children":2780},{"style":534},[2781],{"type":427,"value":2782},"Strict-Transport-Security",{"type":422,"tag":491,"props":2784,"children":2785},{"style":528},[2786],{"type":427,"value":531},{"type":422,"tag":491,"props":2788,"children":2789},{"style":601},[2790],{"type":427,"value":816},{"type":422,"tag":491,"props":2792,"children":2793},{"style":522},[2794],{"type":427,"value":1809},{"type":422,"tag":491,"props":2796,"children":2797},{"style":1635},[2798],{"type":427,"value":546},{"type":422,"tag":491,"props":2800,"children":2801},{"class":493,"line":1437},[2802,2806],{"type":422,"tag":491,"props":2803,"children":2804},{"style":516},[2805],{"type":427,"value":1937},{"type":422,"tag":491,"props":2807,"children":2808},{"style":1635},[2809],{"type":427,"value":581},{"type":422,"tag":491,"props":2811,"children":2812},{"class":493,"line":1446},[2813],{"type":422,"tag":491,"props":2814,"children":2815},{"style":601},[2816],{"type":427,"value":1950},{"type":422,"tag":491,"props":2818,"children":2819},{"class":493,"line":1467},[2820],{"type":422,"tag":491,"props":2821,"children":2822},{"style":601},[2823],{"type":427,"value":1761},{"type":422,"tag":691,"props":2825,"children":2827},{"id":2826},"可选用证书透明性策略",[2828],{"type":427,"value":2826},{"type":422,"tag":480,"props":2830,"children":2832},{"code":2831,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('Expect-CT' /* someValue */)\n",[2833],{"type":422,"tag":487,"props":2834,"children":2835},{"__ignoreMap":415},[2836],{"type":422,"tag":491,"props":2837,"children":2838},{"class":493,"line":494},[2839,2843,2847,2851,2855,2859,2864,2868,2873],{"type":422,"tag":491,"props":2840,"children":2841},{"style":522},[2842],{"type":427,"value":711},{"type":422,"tag":491,"props":2844,"children":2845},{"style":601},[2846],{"type":427,"value":604},{"type":422,"tag":491,"props":2848,"children":2849},{"style":516},[2850],{"type":427,"value":794},{"type":422,"tag":491,"props":2852,"children":2853},{"style":522},[2854],{"type":427,"value":525},{"type":422,"tag":491,"props":2856,"children":2857},{"style":528},[2858],{"type":427,"value":531},{"type":422,"tag":491,"props":2860,"children":2861},{"style":534},[2862],{"type":427,"value":2863},"Expect-CT",{"type":422,"tag":491,"props":2865,"children":2866},{"style":528},[2867],{"type":427,"value":531},{"type":422,"tag":491,"props":2869,"children":2870},{"style":1261},[2871],{"type":427,"value":2872}," /* someValue */",{"type":422,"tag":491,"props":2874,"children":2875},{"style":522},[2876],{"type":427,"value":546},{"type":422,"tag":423,"props":2878,"children":2879},{},[2880,2885,2887,2898,2900,2911],{"type":422,"tag":487,"props":2881,"children":2883},{"className":2882},[],[2884],{"type":427,"value":2863},{"type":427,"value":2886}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":422,"tag":430,"props":2888,"children":2889},{},[2890],{"type":422,"tag":434,"props":2891,"children":2895},{"href":2892,"ariaDescribedBy":2893,"dataFootnoteRef":415,"id":2894},"#user-content-fn-chrome-ct",[438],"user-content-fnref-chrome-ct",[2896],{"type":427,"value":2897},"9",{"type":427,"value":2899},"），避免中间人攻击",{"type":422,"tag":430,"props":2901,"children":2902},{},[2903],{"type":422,"tag":434,"props":2904,"children":2908},{"href":2905,"ariaDescribedBy":2906,"dataFootnoteRef":415,"id":2907},"#user-content-fn-ct",[438],"user-content-fnref-ct",[2909],{"type":427,"value":2910},"10",{"type":427,"value":2912},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":422,"tag":480,"props":2914,"children":2916},{"code":2915},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2917],{"type":422,"tag":487,"props":2918,"children":2919},{"__ignoreMap":415},[2920],{"type":427,"value":2915},{"type":422,"tag":423,"props":2922,"children":2923},{},[2924,2926,2931],{"type":427,"value":2925},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":422,"tag":487,"props":2927,"children":2929},{"className":2928},[],[2930],{"type":427,"value":2863},{"type":427,"value":2932}," 就作不上用咯... TODO",{"type":422,"tag":691,"props":2934,"children":2936},{"id":2935},"拒绝来自-pdfflash-的跨域请求",[2937],{"type":427,"value":2938},"拒绝来自 PDF、Flash 的跨域请求",{"type":422,"tag":423,"props":2940,"children":2941},{},[2942,2948,2950,2961],{"type":422,"tag":487,"props":2943,"children":2945},{"className":2944},[],[2946],{"type":427,"value":2947},"X-Permitted-Cross-Domain-Policies",{"type":427,"value":2949}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":422,"tag":430,"props":2951,"children":2952},{},[2953],{"type":422,"tag":434,"props":2954,"children":2958},{"href":2955,"ariaDescribedBy":2956,"dataFootnoteRef":415,"id":2957},"#user-content-fn-pdf-reader",[438],"user-content-fnref-pdf-reader",[2959],{"type":427,"value":2960},"11",{"type":427,"value":2962},"：",{"type":422,"tag":423,"props":2964,"children":2965},{},[2966],{"type":422,"tag":1144,"props":2967,"children":2969},{"alt":2947,"src":2968},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":422,"tag":2971,"props":2972,"children":2973},"ol",{},[2974,2980],{"type":422,"tag":2975,"props":2976,"children":2977},"li",{},[2978],{"type":427,"value":2979},"用户在 A 网站打开了某个 PDF；",{"type":422,"tag":2975,"props":2981,"children":2982},{},[2983,2985,2991],{"type":427,"value":2984},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":422,"tag":487,"props":2986,"children":2988},{"className":2987},[],[2989],{"type":427,"value":2990},"crossdomain.xml",{"type":427,"value":2992}," 文件（策略文件）作为跨域策略应对方案。",{"type":422,"tag":423,"props":2994,"children":2995},{},[2996],{"type":427,"value":2997},"一个策略文件可能长这样：",{"type":422,"tag":480,"props":2999,"children":3001},{"code":3000,"language":1982,"meta":415,"className":1983,"style":415},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[3002],{"type":422,"tag":487,"props":3003,"children":3004},{"__ignoreMap":415},[3005,3013,3029,3068,3104,3140,3176,3212],{"type":422,"tag":491,"props":3006,"children":3007},{"class":493,"line":494},[3008],{"type":422,"tag":491,"props":3009,"children":3010},{"style":1261},[3011],{"type":427,"value":3012},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":422,"tag":491,"props":3014,"children":3015},{"class":493,"line":549},[3016,3020,3025],{"type":422,"tag":491,"props":3017,"children":3018},{"style":601},[3019],{"type":427,"value":1995},{"type":422,"tag":491,"props":3021,"children":3022},{"style":1998},[3023],{"type":427,"value":3024},"cross-domain-policy",{"type":422,"tag":491,"props":3026,"children":3027},{"style":601},[3028],{"type":427,"value":2120},{"type":422,"tag":491,"props":3030,"children":3031},{"class":493,"line":558},[3032,3037,3042,3047,3051,3055,3060,3064],{"type":422,"tag":491,"props":3033,"children":3034},{"style":601},[3035],{"type":427,"value":3036},"  \u003C",{"type":422,"tag":491,"props":3038,"children":3039},{"style":1998},[3040],{"type":427,"value":3041},"allow-access-from",{"type":422,"tag":491,"props":3043,"children":3044},{"style":2004},[3045],{"type":427,"value":3046}," domain",{"type":422,"tag":491,"props":3048,"children":3049},{"style":601},[3050],{"type":427,"value":2012},{"type":422,"tag":491,"props":3052,"children":3053},{"style":528},[3054],{"type":427,"value":2017},{"type":422,"tag":491,"props":3056,"children":3057},{"style":534},[3058],{"type":427,"value":3059},"*.taobao.com",{"type":422,"tag":491,"props":3061,"children":3062},{"style":528},[3063],{"type":427,"value":2017},{"type":422,"tag":491,"props":3065,"children":3066},{"style":601},[3067],{"type":427,"value":2052},{"type":422,"tag":491,"props":3069,"children":3070},{"class":493,"line":584},[3071,3075,3079,3083,3087,3091,3096,3100],{"type":422,"tag":491,"props":3072,"children":3073},{"style":601},[3074],{"type":427,"value":3036},{"type":422,"tag":491,"props":3076,"children":3077},{"style":1998},[3078],{"type":427,"value":3041},{"type":422,"tag":491,"props":3080,"children":3081},{"style":2004},[3082],{"type":427,"value":3046},{"type":422,"tag":491,"props":3084,"children":3085},{"style":601},[3086],{"type":427,"value":2012},{"type":422,"tag":491,"props":3088,"children":3089},{"style":528},[3090],{"type":427,"value":2017},{"type":422,"tag":491,"props":3092,"children":3093},{"style":534},[3094],{"type":427,"value":3095},"*.taobao.net",{"type":422,"tag":491,"props":3097,"children":3098},{"style":528},[3099],{"type":427,"value":2017},{"type":422,"tag":491,"props":3101,"children":3102},{"style":601},[3103],{"type":427,"value":2052},{"type":422,"tag":491,"props":3105,"children":3106},{"class":493,"line":592},[3107,3111,3115,3119,3123,3127,3132,3136],{"type":422,"tag":491,"props":3108,"children":3109},{"style":601},[3110],{"type":427,"value":3036},{"type":422,"tag":491,"props":3112,"children":3113},{"style":1998},[3114],{"type":427,"value":3041},{"type":422,"tag":491,"props":3116,"children":3117},{"style":2004},[3118],{"type":427,"value":3046},{"type":422,"tag":491,"props":3120,"children":3121},{"style":601},[3122],{"type":427,"value":2012},{"type":422,"tag":491,"props":3124,"children":3125},{"style":528},[3126],{"type":427,"value":2017},{"type":422,"tag":491,"props":3128,"children":3129},{"style":534},[3130],{"type":427,"value":3131},"*.taobaocdn.com",{"type":422,"tag":491,"props":3133,"children":3134},{"style":528},[3135],{"type":427,"value":2017},{"type":422,"tag":491,"props":3137,"children":3138},{"style":601},[3139],{"type":427,"value":2052},{"type":422,"tag":491,"props":3141,"children":3142},{"class":493,"line":1317},[3143,3147,3151,3155,3159,3163,3168,3172],{"type":422,"tag":491,"props":3144,"children":3145},{"style":601},[3146],{"type":427,"value":3036},{"type":422,"tag":491,"props":3148,"children":3149},{"style":1998},[3150],{"type":427,"value":3041},{"type":422,"tag":491,"props":3152,"children":3153},{"style":2004},[3154],{"type":427,"value":3046},{"type":422,"tag":491,"props":3156,"children":3157},{"style":601},[3158],{"type":427,"value":2012},{"type":422,"tag":491,"props":3160,"children":3161},{"style":528},[3162],{"type":427,"value":2017},{"type":422,"tag":491,"props":3164,"children":3165},{"style":534},[3166],{"type":427,"value":3167},"*.tbcdn.cn",{"type":422,"tag":491,"props":3169,"children":3170},{"style":528},[3171],{"type":427,"value":2017},{"type":422,"tag":491,"props":3173,"children":3174},{"style":601},[3175],{"type":427,"value":2052},{"type":422,"tag":491,"props":3177,"children":3178},{"class":493,"line":1326},[3179,3183,3187,3191,3195,3199,3204,3208],{"type":422,"tag":491,"props":3180,"children":3181},{"style":601},[3182],{"type":427,"value":3036},{"type":422,"tag":491,"props":3184,"children":3185},{"style":1998},[3186],{"type":427,"value":3041},{"type":422,"tag":491,"props":3188,"children":3189},{"style":2004},[3190],{"type":427,"value":3046},{"type":422,"tag":491,"props":3192,"children":3193},{"style":601},[3194],{"type":427,"value":2012},{"type":422,"tag":491,"props":3196,"children":3197},{"style":528},[3198],{"type":427,"value":2017},{"type":422,"tag":491,"props":3200,"children":3201},{"style":534},[3202],{"type":427,"value":3203},"*.alicdn.com",{"type":422,"tag":491,"props":3205,"children":3206},{"style":528},[3207],{"type":427,"value":2017},{"type":422,"tag":491,"props":3209,"children":3210},{"style":601},[3211],{"type":427,"value":2052},{"type":422,"tag":491,"props":3213,"children":3214},{"class":493,"line":1347},[3215,3220,3224],{"type":422,"tag":491,"props":3216,"children":3217},{"style":601},[3218],{"type":427,"value":3219},"\u003C/",{"type":422,"tag":491,"props":3221,"children":3222},{"style":1998},[3223],{"type":427,"value":3024},{"type":422,"tag":491,"props":3225,"children":3226},{"style":601},[3227],{"type":427,"value":2120},{"type":422,"tag":423,"props":3229,"children":3230},{},[3231,3233,3238,3240,3245],{"type":427,"value":3232},"其中，若请求响应头包含了 ",{"type":422,"tag":487,"props":3234,"children":3236},{"className":3235},[],[3237],{"type":427,"value":2947},{"type":427,"value":3239},"，便可指定浏览器针对 ",{"type":422,"tag":487,"props":3241,"children":3243},{"className":3242},[],[3244],{"type":427,"value":2990},{"type":427,"value":3246}," 的应对行为。",{"type":422,"tag":480,"props":3248,"children":3250},{"code":3249,"language":483,"meta":415,"className":484,"style":415},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3251],{"type":422,"tag":487,"props":3252,"children":3253},{"__ignoreMap":415},[3254,3282,3290,3310,3318,3338,3346,3366,3374,3391,3398,3443,3491,3534,3545,3552],{"type":422,"tag":491,"props":3255,"children":3256},{"class":493,"line":494},[3257,3261,3266,3270,3274,3278],{"type":422,"tag":491,"props":3258,"children":3259},{"style":498},[3260],{"type":427,"value":501},{"type":422,"tag":491,"props":3262,"children":3263},{"style":504},[3264],{"type":427,"value":3265}," ALLOWED_PERMITTED_POLICIES",{"type":422,"tag":491,"props":3267,"children":3268},{"style":510},[3269],{"type":427,"value":513},{"type":422,"tag":491,"props":3271,"children":3272},{"style":510},[3273],{"type":427,"value":1245},{"type":422,"tag":491,"props":3275,"children":3276},{"style":516},[3277],{"type":427,"value":1250},{"type":422,"tag":491,"props":3279,"children":3280},{"style":522},[3281],{"type":427,"value":1255},{"type":422,"tag":491,"props":3283,"children":3284},{"class":493,"line":549},[3285],{"type":422,"tag":491,"props":3286,"children":3287},{"style":1261},[3288],{"type":427,"value":3289},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":422,"tag":491,"props":3291,"children":3292},{"class":493,"line":558},[3293,3297,3302,3306],{"type":422,"tag":491,"props":3294,"children":3295},{"style":528},[3296],{"type":427,"value":1272},{"type":422,"tag":491,"props":3298,"children":3299},{"style":534},[3300],{"type":427,"value":3301},"master-only",{"type":422,"tag":491,"props":3303,"children":3304},{"style":528},[3305],{"type":427,"value":531},{"type":422,"tag":491,"props":3307,"children":3308},{"style":601},[3309],{"type":427,"value":1286},{"type":422,"tag":491,"props":3311,"children":3312},{"class":493,"line":584},[3313],{"type":422,"tag":491,"props":3314,"children":3315},{"style":1261},[3316],{"type":427,"value":3317},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":422,"tag":491,"props":3319,"children":3320},{"class":493,"line":592},[3321,3325,3330,3334],{"type":422,"tag":491,"props":3322,"children":3323},{"style":528},[3324],{"type":427,"value":1272},{"type":422,"tag":491,"props":3326,"children":3327},{"style":534},[3328],{"type":427,"value":3329},"by-content-type",{"type":422,"tag":491,"props":3331,"children":3332},{"style":528},[3333],{"type":427,"value":531},{"type":422,"tag":491,"props":3335,"children":3336},{"style":601},[3337],{"type":427,"value":1286},{"type":422,"tag":491,"props":3339,"children":3340},{"class":493,"line":1317},[3341],{"type":422,"tag":491,"props":3342,"children":3343},{"style":1261},[3344],{"type":427,"value":3345},"  // 不使用任何位置的 crossdomain.xml\n",{"type":422,"tag":491,"props":3347,"children":3348},{"class":493,"line":1326},[3349,3353,3358,3362],{"type":422,"tag":491,"props":3350,"children":3351},{"style":528},[3352],{"type":427,"value":1272},{"type":422,"tag":491,"props":3354,"children":3355},{"style":534},[3356],{"type":427,"value":3357},"none",{"type":422,"tag":491,"props":3359,"children":3360},{"style":528},[3361],{"type":427,"value":531},{"type":422,"tag":491,"props":3363,"children":3364},{"style":601},[3365],{"type":427,"value":1286},{"type":422,"tag":491,"props":3367,"children":3368},{"class":493,"line":1347},[3369],{"type":422,"tag":491,"props":3370,"children":3371},{"style":1261},[3372],{"type":427,"value":3373},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":422,"tag":491,"props":3375,"children":3376},{"class":493,"line":1356},[3377,3381,3386],{"type":422,"tag":491,"props":3378,"children":3379},{"style":528},[3380],{"type":427,"value":1272},{"type":422,"tag":491,"props":3382,"children":3383},{"style":534},[3384],{"type":427,"value":3385},"all",{"type":422,"tag":491,"props":3387,"children":3388},{"style":528},[3389],{"type":427,"value":3390},"'\n",{"type":422,"tag":491,"props":3392,"children":3393},{"class":493,"line":1377},[3394],{"type":422,"tag":491,"props":3395,"children":3396},{"style":522},[3397],{"type":427,"value":1521},{"type":422,"tag":491,"props":3399,"children":3400},{"class":493,"line":1386},[3401,3405,3410,3414,3419,3423,3427,3431,3435,3439],{"type":422,"tag":491,"props":3402,"children":3403},{"style":498},[3404],{"type":427,"value":1530},{"type":422,"tag":491,"props":3406,"children":3407},{"style":516},[3408],{"type":427,"value":3409}," xPermittedCrossDomainPolicies",{"type":422,"tag":491,"props":3411,"children":3412},{"style":601},[3413],{"type":427,"value":525},{"type":422,"tag":491,"props":3415,"children":3416},{"style":1543},[3417],{"type":427,"value":3418},"headerValue",{"type":422,"tag":491,"props":3420,"children":3421},{"style":510},[3422],{"type":427,"value":513},{"type":422,"tag":491,"props":3424,"children":3425},{"style":528},[3426],{"type":427,"value":821},{"type":422,"tag":491,"props":3428,"children":3429},{"style":534},[3430],{"type":427,"value":3357},{"type":422,"tag":491,"props":3432,"children":3433},{"style":528},[3434],{"type":427,"value":531},{"type":422,"tag":491,"props":3436,"children":3437},{"style":601},[3438],{"type":427,"value":1879},{"type":422,"tag":491,"props":3440,"children":3441},{"style":601},[3442],{"type":427,"value":1582},{"type":422,"tag":491,"props":3444,"children":3445},{"class":493,"line":1407},[3446,3450,3454,3459,3463,3467,3471,3475,3479,3483,3487],{"type":422,"tag":491,"props":3447,"children":3448},{"style":1716},[3449],{"type":427,"value":1719},{"type":422,"tag":491,"props":3451,"children":3452},{"style":498},[3453],{"type":427,"value":1842},{"type":422,"tag":491,"props":3455,"children":3456},{"style":516},[3457],{"type":427,"value":3458}," xPermittedCrossDomainPoliciesMiddleware",{"type":422,"tag":491,"props":3460,"children":3461},{"style":601},[3462],{"type":427,"value":525},{"type":422,"tag":491,"props":3464,"children":3465},{"style":1543},[3466],{"type":427,"value":1856},{"type":422,"tag":491,"props":3468,"children":3469},{"style":601},[3470],{"type":427,"value":816},{"type":422,"tag":491,"props":3472,"children":3473},{"style":1543},[3474],{"type":427,"value":1865},{"type":422,"tag":491,"props":3476,"children":3477},{"style":601},[3478],{"type":427,"value":816},{"type":422,"tag":491,"props":3480,"children":3481},{"style":1543},[3482],{"type":427,"value":1874},{"type":422,"tag":491,"props":3484,"children":3485},{"style":601},[3486],{"type":427,"value":1879},{"type":422,"tag":491,"props":3488,"children":3489},{"style":601},[3490],{"type":427,"value":1582},{"type":422,"tag":491,"props":3492,"children":3493},{"class":493,"line":1416},[3494,3498,3502,3506,3510,3514,3518,3522,3526,3530],{"type":422,"tag":491,"props":3495,"children":3496},{"style":522},[3497],{"type":427,"value":1892},{"type":422,"tag":491,"props":3499,"children":3500},{"style":601},[3501],{"type":427,"value":604},{"type":422,"tag":491,"props":3503,"children":3504},{"style":516},[3505],{"type":427,"value":794},{"type":422,"tag":491,"props":3507,"children":3508},{"style":1635},[3509],{"type":427,"value":525},{"type":422,"tag":491,"props":3511,"children":3512},{"style":528},[3513],{"type":427,"value":531},{"type":422,"tag":491,"props":3515,"children":3516},{"style":534},[3517],{"type":427,"value":2947},{"type":422,"tag":491,"props":3519,"children":3520},{"style":528},[3521],{"type":427,"value":531},{"type":422,"tag":491,"props":3523,"children":3524},{"style":601},[3525],{"type":427,"value":816},{"type":422,"tag":491,"props":3527,"children":3528},{"style":522},[3529],{"type":427,"value":1809},{"type":422,"tag":491,"props":3531,"children":3532},{"style":1635},[3533],{"type":427,"value":546},{"type":422,"tag":491,"props":3535,"children":3536},{"class":493,"line":1437},[3537,3541],{"type":422,"tag":491,"props":3538,"children":3539},{"style":516},[3540],{"type":427,"value":1937},{"type":422,"tag":491,"props":3542,"children":3543},{"style":1635},[3544],{"type":427,"value":581},{"type":422,"tag":491,"props":3546,"children":3547},{"class":493,"line":1446},[3548],{"type":422,"tag":491,"props":3549,"children":3550},{"style":601},[3551],{"type":427,"value":1950},{"type":422,"tag":491,"props":3553,"children":3554},{"class":493,"line":1467},[3555],{"type":422,"tag":491,"props":3556,"children":3557},{"style":601},[3558],{"type":427,"value":1761},{"type":422,"tag":423,"props":3560,"children":3561},{},[3562],{"type":427,"value":3563},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":422,"tag":691,"props":3565,"children":3567},{"id":3566},"开启-csp",[3568],{"type":427,"value":3569},"开启 CSP",{"type":422,"tag":423,"props":3571,"children":3572},{},[3573,3575,3580,3582,3587,3589,3594,3596,3607],{"type":427,"value":3574},"还记得刚才提到 Chrome 关闭了 ",{"type":422,"tag":487,"props":3576,"children":3578},{"className":3577},[],[3579],{"type":427,"value":944},{"type":427,"value":3581}," 吗？既然不再使用 ",{"type":422,"tag":487,"props":3583,"children":3585},{"className":3584},[],[3586],{"type":427,"value":944},{"type":427,"value":3588},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":422,"tag":487,"props":3590,"children":3592},{"className":3591},[],[3593],{"type":427,"value":972},{"type":427,"value":3595}," 标准",{"type":422,"tag":430,"props":3597,"children":3598},{},[3599],{"type":422,"tag":434,"props":3600,"children":3604},{"href":3601,"ariaDescribedBy":3602,"dataFootnoteRef":415,"id":3603},"#user-content-fn-csp-standard",[438],"user-content-fnref-csp-standard",[3605],{"type":427,"value":3606},"12",{"type":427,"value":3608},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":422,"tag":423,"props":3610,"children":3611},{},[3612,3617],{"type":422,"tag":487,"props":3613,"children":3615},{"className":3614},[],[3616],{"type":427,"value":972},{"type":427,"value":3618}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":422,"tag":480,"props":3620,"children":3622},{"code":3621,"language":1982,"meta":415,"className":1983,"style":415},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3623],{"type":422,"tag":487,"props":3624,"children":3625},{"__ignoreMap":415},[3626],{"type":422,"tag":491,"props":3627,"children":3628},{"class":493,"line":494},[3629,3633,3637,3642,3646,3650,3655,3659,3663,3667,3671,3676,3680],{"type":422,"tag":491,"props":3630,"children":3631},{"style":601},[3632],{"type":427,"value":1995},{"type":422,"tag":491,"props":3634,"children":3635},{"style":1998},[3636],{"type":427,"value":2001},{"type":422,"tag":491,"props":3638,"children":3639},{"style":2004},[3640],{"type":427,"value":3641}," http-equiv",{"type":422,"tag":491,"props":3643,"children":3644},{"style":601},[3645],{"type":427,"value":2012},{"type":422,"tag":491,"props":3647,"children":3648},{"style":528},[3649],{"type":427,"value":2017},{"type":422,"tag":491,"props":3651,"children":3652},{"style":534},[3653],{"type":427,"value":3654},"Content-Security-Policy",{"type":422,"tag":491,"props":3656,"children":3657},{"style":528},[3658],{"type":427,"value":2017},{"type":422,"tag":491,"props":3660,"children":3661},{"style":2004},[3662],{"type":427,"value":2031},{"type":422,"tag":491,"props":3664,"children":3665},{"style":601},[3666],{"type":427,"value":2012},{"type":422,"tag":491,"props":3668,"children":3669},{"style":528},[3670],{"type":427,"value":2017},{"type":422,"tag":491,"props":3672,"children":3673},{"style":534},[3674],{"type":427,"value":3675},"default-src 'self'; img-src https://*; child-src 'none';",{"type":422,"tag":491,"props":3677,"children":3678},{"style":528},[3679],{"type":427,"value":2017},{"type":422,"tag":491,"props":3681,"children":3682},{"style":601},[3683],{"type":427,"value":2052},{"type":422,"tag":423,"props":3685,"children":3686},{},[3687,3689,3694],{"type":427,"value":3688},"一个典型的 ",{"type":422,"tag":487,"props":3690,"children":3692},{"className":3691},[],[3693],{"type":427,"value":972},{"type":427,"value":3695}," 头如下：",{"type":422,"tag":480,"props":3697,"children":3699},{"code":3698},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3700],{"type":422,"tag":487,"props":3701,"children":3702},{"__ignoreMap":415},[3703],{"type":427,"value":3698},{"type":422,"tag":423,"props":3705,"children":3706},{},[3707],{"type":427,"value":3708},"大致来说，CSP 相关以下几种安全行为：",{"type":422,"tag":3710,"props":3711,"children":3712},"ul",{},[3713,3718,3723,3728],{"type":422,"tag":2975,"props":3714,"children":3715},{},[3716],{"type":427,"value":3717},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":422,"tag":2975,"props":3719,"children":3720},{},[3721],{"type":427,"value":3722},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":422,"tag":2975,"props":3724,"children":3725},{},[3726],{"type":427,"value":3727},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":422,"tag":2975,"props":3729,"children":3730},{},[3731,3733,3739],{"type":427,"value":3732},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":422,"tag":487,"props":3734,"children":3736},{"className":3735},[],[3737],{"type":427,"value":3738},"Content-Security-Policy-Report-Only",{"type":427,"value":3740}," Header。",{"type":422,"tag":423,"props":3742,"children":3743},{},[3744,3746,3751],{"type":427,"value":3745},"那么我们看看 Helmet 中默认配置的 ",{"type":422,"tag":487,"props":3747,"children":3749},{"className":3748},[],[3750],{"type":427,"value":972},{"type":427,"value":3752}," 策略：",{"type":422,"tag":480,"props":3754,"children":3756},{"code":3755,"language":483,"meta":415,"className":484,"style":415},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3757],{"type":422,"tag":487,"props":3758,"children":3759},{"__ignoreMap":415},[3760,3780,3788,3835,3843,3887,3895,3924,3932,4010,4018,4061,4069,4129,4137,4182,4190,4234,4242,4250,4258,4266,4315,4323,4401,4409,4417,4425,4450],{"type":422,"tag":491,"props":3761,"children":3762},{"class":493,"line":494},[3763,3767,3772,3776],{"type":422,"tag":491,"props":3764,"children":3765},{"style":498},[3766],{"type":427,"value":501},{"type":422,"tag":491,"props":3768,"children":3769},{"style":504},[3770],{"type":427,"value":3771}," DEFAULT_DIRECTIVES",{"type":422,"tag":491,"props":3773,"children":3774},{"style":510},[3775],{"type":427,"value":513},{"type":422,"tag":491,"props":3777,"children":3778},{"style":601},[3779],{"type":427,"value":1582},{"type":422,"tag":491,"props":3781,"children":3782},{"class":493,"line":549},[3783],{"type":422,"tag":491,"props":3784,"children":3785},{"style":1261},[3786],{"type":427,"value":3787},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":422,"tag":491,"props":3789,"children":3790},{"class":493,"line":558},[3791,3795,3801,3805,3809,3813,3817,3822,3826,3831],{"type":422,"tag":491,"props":3792,"children":3793},{"style":528},[3794],{"type":427,"value":1272},{"type":422,"tag":491,"props":3796,"children":3798},{"style":3797},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3799],{"type":427,"value":3800},"default-src",{"type":422,"tag":491,"props":3802,"children":3803},{"style":528},[3804],{"type":427,"value":531},{"type":422,"tag":491,"props":3806,"children":3807},{"style":601},[3808],{"type":427,"value":1651},{"type":422,"tag":491,"props":3810,"children":3811},{"style":522},[3812],{"type":427,"value":1555},{"type":422,"tag":491,"props":3814,"children":3815},{"style":528},[3816],{"type":427,"value":2017},{"type":422,"tag":491,"props":3818,"children":3819},{"style":534},[3820],{"type":427,"value":3821},"'self'",{"type":422,"tag":491,"props":3823,"children":3824},{"style":528},[3825],{"type":427,"value":2017},{"type":422,"tag":491,"props":3827,"children":3828},{"style":522},[3829],{"type":427,"value":3830},"]",{"type":422,"tag":491,"props":3832,"children":3833},{"style":601},[3834],{"type":427,"value":1286},{"type":422,"tag":491,"props":3836,"children":3837},{"class":493,"line":584},[3838],{"type":422,"tag":491,"props":3839,"children":3840},{"style":1261},[3841],{"type":427,"value":3842},"  // 限制 base 标签的 URI 为源地址\n",{"type":422,"tag":491,"props":3844,"children":3845},{"class":493,"line":592},[3846,3850,3855,3859,3863,3867,3871,3875,3879,3883],{"type":422,"tag":491,"props":3847,"children":3848},{"style":528},[3849],{"type":427,"value":1272},{"type":422,"tag":491,"props":3851,"children":3852},{"style":3797},[3853],{"type":427,"value":3854},"base-uri",{"type":422,"tag":491,"props":3856,"children":3857},{"style":528},[3858],{"type":427,"value":531},{"type":422,"tag":491,"props":3860,"children":3861},{"style":601},[3862],{"type":427,"value":1651},{"type":422,"tag":491,"props":3864,"children":3865},{"style":522},[3866],{"type":427,"value":1555},{"type":422,"tag":491,"props":3868,"children":3869},{"style":528},[3870],{"type":427,"value":2017},{"type":422,"tag":491,"props":3872,"children":3873},{"style":534},[3874],{"type":427,"value":3821},{"type":422,"tag":491,"props":3876,"children":3877},{"style":528},[3878],{"type":427,"value":2017},{"type":422,"tag":491,"props":3880,"children":3881},{"style":522},[3882],{"type":427,"value":3830},{"type":422,"tag":491,"props":3884,"children":3885},{"style":601},[3886],{"type":427,"value":1286},{"type":422,"tag":491,"props":3888,"children":3889},{"class":493,"line":1317},[3890],{"type":422,"tag":491,"props":3891,"children":3892},{"style":1261},[3893],{"type":427,"value":3894},"  // 禁止通过 HTTP 协议加载内容\n",{"type":422,"tag":491,"props":3896,"children":3897},{"class":493,"line":1326},[3898,3902,3907,3911,3915,3920],{"type":422,"tag":491,"props":3899,"children":3900},{"style":528},[3901],{"type":427,"value":1272},{"type":422,"tag":491,"props":3903,"children":3904},{"style":3797},[3905],{"type":427,"value":3906},"block-all-mixed-content",{"type":422,"tag":491,"props":3908,"children":3909},{"style":528},[3910],{"type":427,"value":531},{"type":422,"tag":491,"props":3912,"children":3913},{"style":601},[3914],{"type":427,"value":1651},{"type":422,"tag":491,"props":3916,"children":3917},{"style":522},[3918],{"type":427,"value":3919}," []",{"type":422,"tag":491,"props":3921,"children":3922},{"style":601},[3923],{"type":427,"value":1286},{"type":422,"tag":491,"props":3925,"children":3926},{"class":493,"line":1347},[3927],{"type":422,"tag":491,"props":3928,"children":3929},{"style":1261},[3930],{"type":427,"value":3931},"  // 限制字体加载地址\n",{"type":422,"tag":491,"props":3933,"children":3934},{"class":493,"line":1356},[3935,3939,3944,3948,3952,3956,3960,3964,3968,3972,3976,3981,3985,3989,3993,3998,4002,4006],{"type":422,"tag":491,"props":3936,"children":3937},{"style":528},[3938],{"type":427,"value":1272},{"type":422,"tag":491,"props":3940,"children":3941},{"style":3797},[3942],{"type":427,"value":3943},"font-src",{"type":422,"tag":491,"props":3945,"children":3946},{"style":528},[3947],{"type":427,"value":531},{"type":422,"tag":491,"props":3949,"children":3950},{"style":601},[3951],{"type":427,"value":1651},{"type":422,"tag":491,"props":3953,"children":3954},{"style":522},[3955],{"type":427,"value":1555},{"type":422,"tag":491,"props":3957,"children":3958},{"style":528},[3959],{"type":427,"value":2017},{"type":422,"tag":491,"props":3961,"children":3962},{"style":534},[3963],{"type":427,"value":3821},{"type":422,"tag":491,"props":3965,"children":3966},{"style":528},[3967],{"type":427,"value":2017},{"type":422,"tag":491,"props":3969,"children":3970},{"style":601},[3971],{"type":427,"value":816},{"type":422,"tag":491,"props":3973,"children":3974},{"style":528},[3975],{"type":427,"value":821},{"type":422,"tag":491,"props":3977,"children":3978},{"style":534},[3979],{"type":427,"value":3980},"https:",{"type":422,"tag":491,"props":3982,"children":3983},{"style":528},[3984],{"type":427,"value":531},{"type":422,"tag":491,"props":3986,"children":3987},{"style":601},[3988],{"type":427,"value":816},{"type":422,"tag":491,"props":3990,"children":3991},{"style":528},[3992],{"type":427,"value":821},{"type":422,"tag":491,"props":3994,"children":3995},{"style":534},[3996],{"type":427,"value":3997},"data:",{"type":422,"tag":491,"props":3999,"children":4000},{"style":528},[4001],{"type":427,"value":531},{"type":422,"tag":491,"props":4003,"children":4004},{"style":522},[4005],{"type":427,"value":3830},{"type":422,"tag":491,"props":4007,"children":4008},{"style":601},[4009],{"type":427,"value":1286},{"type":422,"tag":491,"props":4011,"children":4012},{"class":493,"line":1377},[4013],{"type":422,"tag":491,"props":4014,"children":4015},{"style":1261},[4016],{"type":427,"value":4017},"  // 限制嵌入的外部资源\n",{"type":422,"tag":491,"props":4019,"children":4020},{"class":493,"line":1386},[4021,4025,4029,4033,4037,4041,4045,4049,4053,4057],{"type":422,"tag":491,"props":4022,"children":4023},{"style":528},[4024],{"type":427,"value":1272},{"type":422,"tag":491,"props":4026,"children":4027},{"style":3797},[4028],{"type":427,"value":1166},{"type":422,"tag":491,"props":4030,"children":4031},{"style":528},[4032],{"type":427,"value":531},{"type":422,"tag":491,"props":4034,"children":4035},{"style":601},[4036],{"type":427,"value":1651},{"type":422,"tag":491,"props":4038,"children":4039},{"style":522},[4040],{"type":427,"value":1555},{"type":422,"tag":491,"props":4042,"children":4043},{"style":528},[4044],{"type":427,"value":2017},{"type":422,"tag":491,"props":4046,"children":4047},{"style":534},[4048],{"type":427,"value":3821},{"type":422,"tag":491,"props":4050,"children":4051},{"style":528},[4052],{"type":427,"value":2017},{"type":422,"tag":491,"props":4054,"children":4055},{"style":522},[4056],{"type":427,"value":3830},{"type":422,"tag":491,"props":4058,"children":4059},{"style":601},[4060],{"type":427,"value":1286},{"type":422,"tag":491,"props":4062,"children":4063},{"class":493,"line":1407},[4064],{"type":422,"tag":491,"props":4065,"children":4066},{"style":1261},[4067],{"type":427,"value":4068},"  // 限制图片加载地址\n",{"type":422,"tag":491,"props":4070,"children":4071},{"class":493,"line":1416},[4072,4076,4081,4085,4089,4093,4097,4101,4105,4109,4113,4117,4121,4125],{"type":422,"tag":491,"props":4073,"children":4074},{"style":528},[4075],{"type":427,"value":1272},{"type":422,"tag":491,"props":4077,"children":4078},{"style":3797},[4079],{"type":427,"value":4080},"img-src",{"type":422,"tag":491,"props":4082,"children":4083},{"style":528},[4084],{"type":427,"value":531},{"type":422,"tag":491,"props":4086,"children":4087},{"style":601},[4088],{"type":427,"value":1651},{"type":422,"tag":491,"props":4090,"children":4091},{"style":522},[4092],{"type":427,"value":1555},{"type":422,"tag":491,"props":4094,"children":4095},{"style":528},[4096],{"type":427,"value":2017},{"type":422,"tag":491,"props":4098,"children":4099},{"style":534},[4100],{"type":427,"value":3821},{"type":422,"tag":491,"props":4102,"children":4103},{"style":528},[4104],{"type":427,"value":2017},{"type":422,"tag":491,"props":4106,"children":4107},{"style":601},[4108],{"type":427,"value":816},{"type":422,"tag":491,"props":4110,"children":4111},{"style":528},[4112],{"type":427,"value":821},{"type":422,"tag":491,"props":4114,"children":4115},{"style":534},[4116],{"type":427,"value":3997},{"type":422,"tag":491,"props":4118,"children":4119},{"style":528},[4120],{"type":427,"value":531},{"type":422,"tag":491,"props":4122,"children":4123},{"style":522},[4124],{"type":427,"value":3830},{"type":422,"tag":491,"props":4126,"children":4127},{"style":601},[4128],{"type":427,"value":1286},{"type":422,"tag":491,"props":4130,"children":4131},{"class":493,"line":1437},[4132],{"type":422,"tag":491,"props":4133,"children":4134},{"style":1261},[4135],{"type":427,"value":4136},"  // 禁用 object 标签\n",{"type":422,"tag":491,"props":4138,"children":4139},{"class":493,"line":1446},[4140,4144,4149,4153,4157,4161,4165,4170,4174,4178],{"type":422,"tag":491,"props":4141,"children":4142},{"style":528},[4143],{"type":427,"value":1272},{"type":422,"tag":491,"props":4145,"children":4146},{"style":3797},[4147],{"type":427,"value":4148},"object-src",{"type":422,"tag":491,"props":4150,"children":4151},{"style":528},[4152],{"type":427,"value":531},{"type":422,"tag":491,"props":4154,"children":4155},{"style":601},[4156],{"type":427,"value":1651},{"type":422,"tag":491,"props":4158,"children":4159},{"style":522},[4160],{"type":427,"value":1555},{"type":422,"tag":491,"props":4162,"children":4163},{"style":528},[4164],{"type":427,"value":2017},{"type":422,"tag":491,"props":4166,"children":4167},{"style":534},[4168],{"type":427,"value":4169},"'none'",{"type":422,"tag":491,"props":4171,"children":4172},{"style":528},[4173],{"type":427,"value":2017},{"type":422,"tag":491,"props":4175,"children":4176},{"style":522},[4177],{"type":427,"value":3830},{"type":422,"tag":491,"props":4179,"children":4180},{"style":601},[4181],{"type":427,"value":1286},{"type":422,"tag":491,"props":4183,"children":4184},{"class":493,"line":1467},[4185],{"type":422,"tag":491,"props":4186,"children":4187},{"style":1261},[4188],{"type":427,"value":4189},"  // 只从源地址加载脚本\n",{"type":422,"tag":491,"props":4191,"children":4192},{"class":493,"line":1476},[4193,4197,4202,4206,4210,4214,4218,4222,4226,4230],{"type":422,"tag":491,"props":4194,"children":4195},{"style":528},[4196],{"type":427,"value":1272},{"type":422,"tag":491,"props":4198,"children":4199},{"style":3797},[4200],{"type":427,"value":4201},"script-src",{"type":422,"tag":491,"props":4203,"children":4204},{"style":528},[4205],{"type":427,"value":531},{"type":422,"tag":491,"props":4207,"children":4208},{"style":601},[4209],{"type":427,"value":1651},{"type":422,"tag":491,"props":4211,"children":4212},{"style":522},[4213],{"type":427,"value":1555},{"type":422,"tag":491,"props":4215,"children":4216},{"style":528},[4217],{"type":427,"value":2017},{"type":422,"tag":491,"props":4219,"children":4220},{"style":534},[4221],{"type":427,"value":3821},{"type":422,"tag":491,"props":4223,"children":4224},{"style":528},[4225],{"type":427,"value":2017},{"type":422,"tag":491,"props":4227,"children":4228},{"style":522},[4229],{"type":427,"value":3830},{"type":422,"tag":491,"props":4231,"children":4232},{"style":601},[4233],{"type":427,"value":1286},{"type":422,"tag":491,"props":4235,"children":4236},{"class":493,"line":1497},[4237],{"type":422,"tag":491,"props":4238,"children":4239},{"style":1261},[4240],{"type":427,"value":4241},"  // 禁用内联脚本\n",{"type":422,"tag":491,"props":4243,"children":4244},{"class":493,"line":1506},[4245],{"type":422,"tag":491,"props":4246,"children":4247},{"style":1261},[4248],{"type":427,"value":4249},"  // ？这里没能理解\n",{"type":422,"tag":491,"props":4251,"children":4252},{"class":493,"line":1515},[4253],{"type":422,"tag":491,"props":4254,"children":4255},{"style":1261},[4256],{"type":427,"value":4257},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":422,"tag":491,"props":4259,"children":4260},{"class":493,"line":1524},[4261],{"type":422,"tag":491,"props":4262,"children":4263},{"style":1261},[4264],{"type":427,"value":4265},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":422,"tag":491,"props":4267,"children":4268},{"class":493,"line":1585},[4269,4273,4278,4282,4286,4290,4294,4298,4302,4306,4310],{"type":422,"tag":491,"props":4270,"children":4271},{"style":528},[4272],{"type":427,"value":1272},{"type":422,"tag":491,"props":4274,"children":4275},{"style":3797},[4276],{"type":427,"value":4277},"script-src-attr",{"type":422,"tag":491,"props":4279,"children":4280},{"style":528},[4281],{"type":427,"value":531},{"type":422,"tag":491,"props":4283,"children":4284},{"style":601},[4285],{"type":427,"value":1651},{"type":422,"tag":491,"props":4287,"children":4288},{"style":522},[4289],{"type":427,"value":1555},{"type":422,"tag":491,"props":4291,"children":4292},{"style":528},[4293],{"type":427,"value":2017},{"type":422,"tag":491,"props":4295,"children":4296},{"style":534},[4297],{"type":427,"value":4169},{"type":422,"tag":491,"props":4299,"children":4300},{"style":528},[4301],{"type":427,"value":2017},{"type":422,"tag":491,"props":4303,"children":4304},{"style":522},[4305],{"type":427,"value":3830},{"type":422,"tag":491,"props":4307,"children":4308},{"style":601},[4309],{"type":427,"value":816},{"type":422,"tag":491,"props":4311,"children":4312},{"style":522},[4313],{"type":427,"value":4314},"‘\n",{"type":422,"tag":491,"props":4316,"children":4317},{"class":493,"line":1659},[4318],{"type":422,"tag":491,"props":4319,"children":4320},{"style":1261},[4321],{"type":427,"value":4322},"  // 限制样式表加载地址\n",{"type":422,"tag":491,"props":4324,"children":4325},{"class":493,"line":1690},[4326,4330,4335,4339,4343,4347,4351,4355,4359,4363,4367,4371,4375,4379,4384,4389,4393,4397],{"type":422,"tag":491,"props":4327,"children":4328},{"style":528},[4329],{"type":427,"value":1272},{"type":422,"tag":491,"props":4331,"children":4332},{"style":3797},[4333],{"type":427,"value":4334},"style-src",{"type":422,"tag":491,"props":4336,"children":4337},{"style":528},[4338],{"type":427,"value":531},{"type":422,"tag":491,"props":4340,"children":4341},{"style":601},[4342],{"type":427,"value":1651},{"type":422,"tag":491,"props":4344,"children":4345},{"style":522},[4346],{"type":427,"value":1555},{"type":422,"tag":491,"props":4348,"children":4349},{"style":528},[4350],{"type":427,"value":2017},{"type":422,"tag":491,"props":4352,"children":4353},{"style":534},[4354],{"type":427,"value":3821},{"type":422,"tag":491,"props":4356,"children":4357},{"style":528},[4358],{"type":427,"value":2017},{"type":422,"tag":491,"props":4360,"children":4361},{"style":601},[4362],{"type":427,"value":816},{"type":422,"tag":491,"props":4364,"children":4365},{"style":528},[4366],{"type":427,"value":821},{"type":422,"tag":491,"props":4368,"children":4369},{"style":534},[4370],{"type":427,"value":3980},{"type":422,"tag":491,"props":4372,"children":4373},{"style":528},[4374],{"type":427,"value":531},{"type":422,"tag":491,"props":4376,"children":4377},{"style":601},[4378],{"type":427,"value":816},{"type":422,"tag":491,"props":4380,"children":4381},{"style":528},[4382],{"type":427,"value":4383}," \"",{"type":422,"tag":491,"props":4385,"children":4386},{"style":534},[4387],{"type":427,"value":4388},"'unsafe-inline'",{"type":422,"tag":491,"props":4390,"children":4391},{"style":528},[4392],{"type":427,"value":2017},{"type":422,"tag":491,"props":4394,"children":4395},{"style":522},[4396],{"type":427,"value":3830},{"type":422,"tag":491,"props":4398,"children":4399},{"style":601},[4400],{"type":427,"value":1286},{"type":422,"tag":491,"props":4402,"children":4403},{"class":493,"line":1703},[4404],{"type":422,"tag":491,"props":4405,"children":4406},{"style":1261},[4407],{"type":427,"value":4408},"  // 不使用升级协议指令\n",{"type":422,"tag":491,"props":4410,"children":4411},{"class":493,"line":1712},[4412],{"type":422,"tag":491,"props":4413,"children":4414},{"style":1261},[4415],{"type":427,"value":4416},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":422,"tag":491,"props":4418,"children":4419},{"class":493,"line":1755},[4420],{"type":422,"tag":491,"props":4421,"children":4422},{"style":1261},[4423],{"type":427,"value":4424},"  // 所以默认不开启此指令\n",{"type":422,"tag":491,"props":4426,"children":4427},{"class":493,"line":1764},[4428,4432,4437,4441,4445],{"type":422,"tag":491,"props":4429,"children":4430},{"style":528},[4431],{"type":427,"value":1272},{"type":422,"tag":491,"props":4433,"children":4434},{"style":3797},[4435],{"type":427,"value":4436},"upgrade-insecure-requests",{"type":422,"tag":491,"props":4438,"children":4439},{"style":528},[4440],{"type":427,"value":531},{"type":422,"tag":491,"props":4442,"children":4443},{"style":601},[4444],{"type":427,"value":1651},{"type":422,"tag":491,"props":4446,"children":4447},{"style":522},[4448],{"type":427,"value":4449}," []\n",{"type":422,"tag":491,"props":4451,"children":4452},{"class":493,"line":1799},[4453],{"type":422,"tag":491,"props":4454,"children":4455},{"style":601},[4456],{"type":427,"value":1761},{"type":422,"tag":423,"props":4458,"children":4459},{},[4460,4462,4468,4470,4476],{"type":427,"value":4461},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":422,"tag":487,"props":4463,"children":4465},{"className":4464},[],[4466],{"type":427,"value":4467},"CSP 1.0",{"type":427,"value":4469}," 的兼容性，我没有找到最新版本规范（",{"type":422,"tag":487,"props":4471,"children":4473},{"className":4472},[],[4474],{"type":427,"value":4475},"CSP 3.0",{"type":427,"value":4477},"）的兼容性数据 😝。",{"type":422,"tag":423,"props":4479,"children":4480},{},[4481],{"type":422,"tag":1144,"props":4482,"children":4485},{"alt":4483,"src":4484},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":422,"tag":691,"props":4487,"children":4489},{"id":4488},"移除下载文件后的打开按钮",[4490],{"type":427,"value":4491},"移除下载文件后的“打开”按钮",{"type":422,"tag":480,"props":4493,"children":4495},{"code":4494,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('X-Download-Options', 'noopen')\n",[4496],{"type":422,"tag":487,"props":4497,"children":4498},{"__ignoreMap":415},[4499],{"type":422,"tag":491,"props":4500,"children":4501},{"class":493,"line":494},[4502,4506,4510,4514,4518,4522,4527,4531,4535,4539,4544,4548],{"type":422,"tag":491,"props":4503,"children":4504},{"style":522},[4505],{"type":427,"value":711},{"type":422,"tag":491,"props":4507,"children":4508},{"style":601},[4509],{"type":427,"value":604},{"type":422,"tag":491,"props":4511,"children":4512},{"style":516},[4513],{"type":427,"value":794},{"type":422,"tag":491,"props":4515,"children":4516},{"style":522},[4517],{"type":427,"value":525},{"type":422,"tag":491,"props":4519,"children":4520},{"style":528},[4521],{"type":427,"value":531},{"type":422,"tag":491,"props":4523,"children":4524},{"style":534},[4525],{"type":427,"value":4526},"X-Download-Options",{"type":422,"tag":491,"props":4528,"children":4529},{"style":528},[4530],{"type":427,"value":531},{"type":422,"tag":491,"props":4532,"children":4533},{"style":601},[4534],{"type":427,"value":816},{"type":422,"tag":491,"props":4536,"children":4537},{"style":528},[4538],{"type":427,"value":821},{"type":422,"tag":491,"props":4540,"children":4541},{"style":534},[4542],{"type":427,"value":4543},"noopen",{"type":422,"tag":491,"props":4545,"children":4546},{"style":528},[4547],{"type":427,"value":531},{"type":422,"tag":491,"props":4549,"children":4550},{"style":522},[4551],{"type":427,"value":546},{"type":422,"tag":423,"props":4553,"children":4554},{},[4555,4557,4562],{"type":427,"value":4556},"在下载文件时，",{"type":422,"tag":487,"props":4558,"children":4560},{"className":4559},[],[4561],{"type":427,"value":4526},{"type":427,"value":4563}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":422,"tag":691,"props":4565,"children":4567},{"id":4566},"开启-dns-预取",[4568],{"type":427,"value":4569},"开启 DNS 预取",{"type":422,"tag":423,"props":4571,"children":4572},{},[4573,4575,4581],{"type":427,"value":4574},"通过设置 ",{"type":422,"tag":487,"props":4576,"children":4578},{"className":4577},[],[4579],{"type":427,"value":4580},"X-DNS-Prefetch-Control",{"type":427,"value":4582}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":422,"tag":423,"props":4584,"children":4585},{},[4586,4588,4595],{"type":427,"value":4587},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":422,"tag":434,"props":4589,"children":4592},{"href":4590,"rel":4591},"https://github.com/helmetjs/helmet/issues/111",[1011],[4593],{"type":427,"value":4594},"Issue",{"type":427,"value":1001},{"type":422,"tag":480,"props":4597,"children":4599},{"code":4598,"language":483,"meta":415,"className":484,"style":415},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4600],{"type":422,"tag":487,"props":4601,"children":4602},{"__ignoreMap":415},[4603],{"type":422,"tag":491,"props":4604,"children":4605},{"class":493,"line":494},[4606,4610,4614,4618,4622,4626,4630,4634,4638,4642,4647,4651],{"type":422,"tag":491,"props":4607,"children":4608},{"style":522},[4609],{"type":427,"value":711},{"type":422,"tag":491,"props":4611,"children":4612},{"style":601},[4613],{"type":427,"value":604},{"type":422,"tag":491,"props":4615,"children":4616},{"style":516},[4617],{"type":427,"value":794},{"type":422,"tag":491,"props":4619,"children":4620},{"style":522},[4621],{"type":427,"value":525},{"type":422,"tag":491,"props":4623,"children":4624},{"style":528},[4625],{"type":427,"value":531},{"type":422,"tag":491,"props":4627,"children":4628},{"style":534},[4629],{"type":427,"value":4580},{"type":422,"tag":491,"props":4631,"children":4632},{"style":528},[4633],{"type":427,"value":531},{"type":422,"tag":491,"props":4635,"children":4636},{"style":601},[4637],{"type":427,"value":816},{"type":422,"tag":491,"props":4639,"children":4640},{"style":528},[4641],{"type":427,"value":821},{"type":422,"tag":491,"props":4643,"children":4644},{"style":534},[4645],{"type":427,"value":4646},"on",{"type":422,"tag":491,"props":4648,"children":4649},{"style":528},[4650],{"type":427,"value":531},{"type":422,"tag":491,"props":4652,"children":4653},{"style":522},[4654],{"type":427,"value":546},{"type":422,"tag":660,"props":4656,"children":4658},{"id":4657},"阅读更多",[4659],{"type":427,"value":4657},{"type":422,"tag":423,"props":4661,"children":4662},{},[4663],{"type":427,"value":4664},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":422,"tag":3710,"props":4666,"children":4667},{},[4668],{"type":422,"tag":2975,"props":4669,"children":4670},{},[4671,4673],{"type":427,"value":4672},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":422,"tag":430,"props":4674,"children":4675},{},[4676],{"type":422,"tag":434,"props":4677,"children":4681},{"href":4678,"ariaDescribedBy":4679,"dataFootnoteRef":415,"id":4680},"#user-content-fn-secure-cookie",[438],"user-content-fnref-secure-cookie",[4682],{"type":427,"value":4683},"13",{"type":422,"tag":423,"props":4685,"children":4686},{},[4687,4689,4696,4698,4705],{"type":427,"value":4688},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":422,"tag":434,"props":4690,"children":4693},{"href":4691,"rel":4692},"https://owasp.org/www-project-secure-headers/",[1011],[4694],{"type":427,"value":4695},"OWASP Secure Headers Project",{"type":427,"value":4697},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":422,"tag":434,"props":4699,"children":4702},{"href":4700,"rel":4701},"https://infosec.mozilla.org/guidelines/web_security",[1011],[4703],{"type":427,"value":4704},"Web Security",{"type":427,"value":4706},"。以下是一些额外的可供探索的页面：",{"type":422,"tag":3710,"props":4708,"children":4709},{},[4710,4720,4730],{"type":422,"tag":2975,"props":4711,"children":4712},{},[4713],{"type":422,"tag":434,"props":4714,"children":4717},{"href":4715,"rel":4716},"https://www.zhihu.com/question/21979782",[1011],[4718],{"type":427,"value":4719},"Content Security Policy (CSP) 是什么？",{"type":422,"tag":2975,"props":4721,"children":4722},{},[4723],{"type":422,"tag":434,"props":4724,"children":4727},{"href":4725,"rel":4726},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[1011],[4728],{"type":427,"value":4729},"CORS@MDN",{"type":422,"tag":2975,"props":4731,"children":4732},{},[4733],{"type":422,"tag":434,"props":4734,"children":4737},{"href":4735,"rel":4736},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[1011],[4738],{"type":427,"value":4739},"OWASP Top 10 2017（RC2）",{"type":422,"tag":4741,"props":4742,"children":4745},"section",{"className":4743,"dataFootnotes":415},[4744],"footnotes",[4746,4753],{"type":422,"tag":660,"props":4747,"children":4750},{"className":4748,"id":438},[4749],"sr-only",[4751],{"type":427,"value":4752},"Footnotes",{"type":422,"tag":2971,"props":4754,"children":4755},{},[4756,4778,4797,4816,4833,4852,4871,4884,4902,4921,4940,4959,4978],{"type":422,"tag":2975,"props":4757,"children":4759},{"id":4758},"user-content-fn-helmet",[4760,4767,4769],{"type":422,"tag":434,"props":4761,"children":4764},{"href":4762,"rel":4763},"https://helmetjs.github.io/",[1011],[4765],{"type":427,"value":4766},"HELMET",{"type":427,"value":4768}," ",{"type":422,"tag":434,"props":4770,"children":4775},{"href":4771,"ariaLabel":4772,"className":4773,"dataFootnoteBackref":415},"#user-content-fnref-helmet","Back to reference 1",[4774],"data-footnote-backref",[4776],{"type":427,"value":4777},"↩",{"type":422,"tag":2975,"props":4779,"children":4781},{"id":4780},"user-content-fn-dns-rebinding-1",[4782,4789,4790],{"type":422,"tag":434,"props":4783,"children":4786},{"href":4784,"rel":4785},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[1011],[4787],{"type":427,"value":4788},"来自微信外挂的安全风险",{"type":427,"value":4768},{"type":422,"tag":434,"props":4791,"children":4795},{"href":4792,"ariaLabel":4793,"className":4794,"dataFootnoteBackref":415},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4774],[4796],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4798,"children":4800},{"id":4799},"user-content-fn-dns-rebinding-2",[4801,4808,4809],{"type":422,"tag":434,"props":4802,"children":4805},{"href":4803,"rel":4804},"https://github.com/helmetjs/helmet/issues/182",[1011],[4806],{"type":427,"value":4807},"GitHub Issue",{"type":427,"value":4768},{"type":422,"tag":434,"props":4810,"children":4814},{"href":4811,"ariaLabel":4812,"className":4813,"dataFootnoteBackref":415},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4774],[4815],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4817,"children":4819},{"id":4818},"user-content-fn-shp",[4820,4825,4826],{"type":422,"tag":434,"props":4821,"children":4823},{"href":4691,"rel":4822},[1011],[4824],{"type":427,"value":4695},{"type":427,"value":4768},{"type":422,"tag":434,"props":4827,"children":4831},{"href":4828,"ariaLabel":4829,"className":4830,"dataFootnoteBackref":415},"#user-content-fnref-shp","Back to reference 4",[4774],[4832],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4834,"children":4836},{"id":4835},"user-content-fn-xss-auditor",[4837,4844,4845],{"type":422,"tag":434,"props":4838,"children":4841},{"href":4839,"rel":4840},"https://www.chromestatus.com/feature/5021976655560704",[1011],[4842],{"type":427,"value":4843},"XSS Auditor (removed)",{"type":427,"value":4768},{"type":422,"tag":434,"props":4846,"children":4850},{"href":4847,"ariaLabel":4848,"className":4849,"dataFootnoteBackref":415},"#user-content-fnref-xss-auditor","Back to reference 5",[4774],[4851],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4853,"children":4855},{"id":4854},"user-content-fn-delete-xss-auditor",[4856,4863,4864],{"type":422,"tag":434,"props":4857,"children":4860},{"href":4858,"rel":4859},"https://zhuanlan.zhihu.com/p/74288648",[1011],[4861],{"type":427,"value":4862},"Google 将删除 Chrome 内置的 XSS 保护",{"type":427,"value":4768},{"type":422,"tag":434,"props":4865,"children":4869},{"href":4866,"ariaLabel":4867,"className":4868,"dataFootnoteBackref":415},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4774],[4870],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4872,"children":4874},{"id":4873},"user-content-fn-referer",[4875,4877],{"type":427,"value":4876},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":422,"tag":434,"props":4878,"children":4882},{"href":4879,"ariaLabel":4880,"className":4881,"dataFootnoteBackref":415},"#user-content-fnref-referer","Back to reference 7",[4774],[4883],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4885,"children":4887},{"id":4886},"user-content-fn-timeend",[4888,4894,4895],{"type":422,"tag":434,"props":4889,"children":4892},{"href":4890,"rel":4891},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[1011],[4893],{"type":427,"value":2782},{"type":427,"value":4768},{"type":422,"tag":434,"props":4896,"children":4900},{"href":4897,"ariaLabel":4898,"className":4899,"dataFootnoteBackref":415},"#user-content-fnref-timeend","Back to reference 8",[4774],[4901],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4903,"children":4905},{"id":4904},"user-content-fn-chrome-ct",[4906,4913,4914],{"type":422,"tag":434,"props":4907,"children":4910},{"href":4908,"rel":4909},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[1011],[4911],{"type":427,"value":4912},"Chrome 证书透明度（CT）相关政策",{"type":427,"value":4768},{"type":422,"tag":434,"props":4915,"children":4919},{"href":4916,"ariaLabel":4917,"className":4918,"dataFootnoteBackref":415},"#user-content-fnref-chrome-ct","Back to reference 9",[4774],[4920],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4922,"children":4924},{"id":4923},"user-content-fn-ct",[4925,4932,4933],{"type":422,"tag":434,"props":4926,"children":4929},{"href":4927,"rel":4928},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[1011],[4930],{"type":427,"value":4931},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":427,"value":4768},{"type":422,"tag":434,"props":4934,"children":4938},{"href":4935,"ariaLabel":4936,"className":4937,"dataFootnoteBackref":415},"#user-content-fnref-ct","Back to reference 10",[4774],[4939],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4941,"children":4943},{"id":4942},"user-content-fn-pdf-reader",[4944,4951,4952],{"type":422,"tag":434,"props":4945,"children":4948},{"href":4946,"rel":4947},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[1011],[4949],{"type":427,"value":4950},"Cross Domain Configuration",{"type":427,"value":4768},{"type":422,"tag":434,"props":4953,"children":4957},{"href":4954,"ariaLabel":4955,"className":4956,"dataFootnoteBackref":415},"#user-content-fnref-pdf-reader","Back to reference 11",[4774],[4958],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4960,"children":4962},{"id":4961},"user-content-fn-csp-standard",[4963,4970,4971],{"type":422,"tag":434,"props":4964,"children":4967},{"href":4965,"rel":4966},"https://www.w3.org/TR/CSP/",[1011],[4968],{"type":427,"value":4969},"Content Security Policy Level 3",{"type":427,"value":4768},{"type":422,"tag":434,"props":4972,"children":4976},{"href":4973,"ariaLabel":4974,"className":4975,"dataFootnoteBackref":415},"#user-content-fnref-csp-standard","Back to reference 12",[4774],[4977],{"type":427,"value":4777},{"type":422,"tag":2975,"props":4979,"children":4981},{"id":4980},"user-content-fn-secure-cookie",[4982,4989,4990],{"type":422,"tag":434,"props":4983,"children":4986},{"href":4984,"rel":4985},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[1011],[4987],{"type":427,"value":4988},"Secure-Cookie",{"type":427,"value":4768},{"type":422,"tag":434,"props":4991,"children":4995},{"href":4992,"ariaLabel":4993,"className":4994,"dataFootnoteBackref":415},"#user-content-fnref-secure-cookie","Back to reference 13",[4774],[4996],{"type":427,"value":4777},{"type":422,"tag":4998,"props":4999,"children":5000},"style",{},[5001],{"type":427,"value":5002},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":415,"searchDepth":549,"depth":549,"links":5004},[5005,5018,5019],{"id":662,"depth":549,"text":665,"children":5006},[5007,5008,5009,5010,5011,5012,5013,5014,5015,5016,5017],{"id":693,"depth":558,"text":696},{"id":768,"depth":558,"text":771},{"id":858,"depth":558,"text":861},{"id":1018,"depth":558,"text":1018},{"id":1177,"depth":558,"text":1180},{"id":2188,"depth":558,"text":2191},{"id":2826,"depth":558,"text":2826},{"id":2935,"depth":558,"text":2938},{"id":3566,"depth":558,"text":3569},{"id":4488,"depth":558,"text":4491},{"id":4566,"depth":558,"text":4569},{"id":4657,"depth":549,"text":4657},{"id":438,"depth":549,"text":4752},"markdown","content:_archieved:2020-08:helmet-and-security.md","content","_archieved/2020-08/helmet-and-security.md","_archieved/2020-08/helmet-and-security","md",[5027,5031],{"_path":5028,"title":5029,"description":5030},"/_archieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5032,"title":5033,"description":415},"/_archieved/2020-10/noname","无题",1732808116325]