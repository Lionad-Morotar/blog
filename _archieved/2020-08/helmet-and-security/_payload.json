[{"data":1,"prerenderedAt":5040},["ShallowReactive",2],{"navigation":3,"/_archieved/2020-08/helmet-and-security":416,"/_archieved/2020-08/helmet-and-security-surround":5032},[4,32,86,108,135,141,147,153,399,405,411],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":42,"_path":43},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":45,"_path":46},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":48,"_path":49},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":51,"_path":52},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":54,"_path":55},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":57,"_path":58},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":60,"_path":61},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":63,"_path":64},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":66,"_path":67},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":69,"_path":70},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":72,"_path":73},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":75,"_path":76},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":78,"_path":79},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":81,"_path":82},"🚝 四十二篇系列","/articles/fourty-two",{"title":84,"_path":85},"📝 技术博客归档","/articles/fold",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102,105],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107},"🖨️ any-to-base64","/tools/any-to-base64",{"title":109,"_path":110,"children":111},"吉他剧场 / Music","/music",[112,114,117,120,123,126,129,132],{"title":113,"_path":110},"🎸 FingerStyle！",{"title":115,"_path":116},"🌬️ 等待的风","/music/wind",{"title":118,"_path":119},"💕 约定的海洋","/music/ocean",{"title":121,"_path":122},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":124,"_path":125},"🌏 残酷天使的行动纲领","/music/eva",{"title":127,"_path":128},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":130,"_path":131},"🍷 Wu Wei","/music/wu-wei",{"title":133,"_path":134},"🌅 无题","/music/untitled",{"title":136,"_path":137,"children":138},"画点什么 / Paint","/paint",[139],{"title":140,"_path":137},"🚧 正在施工",{"title":142,"_path":143,"children":144},"读书笔记 / Notes","/books",[145],{"title":146,"_path":143},"📕 读书笔记",{"title":148,"_path":149,"children":150},"知识地图 / Maps","/maps",[151],{"title":152,"_path":149},"🏁 知识地图",{"title":154,"_path":155,"children":156},"零散的笔记 / Gists","/gists",[157,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390,393,396],{"title":158,"_path":155},"🧊 Gists",{"title":160,"_path":161},"网站的可访问性","/gists/accessibility",{"title":163,"_path":164},"Bit","/gists/bit",{"title":166,"_path":167},"图片模糊","/gists/blur",{"title":169,"_path":170},"渲染相关笔记","/gists/c4d",{"title":172,"_path":173},"CDN 问题记录","/gists/cdn",{"title":175,"_path":176},"消毒剂","/gists/cleaner",{"title":178,"_path":179},"Windows Command","/gists/cmd",{"title":181,"_path":182},"Command","/gists/command",{"title":184,"_path":185},"复杂科学","/gists/complexity-science",{"title":187,"_path":188},"GitHub Copilot","/gists/copilot",{"title":190,"_path":191},"宇宙","/gists/cosmos",{"title":193,"_path":194},"C++","/gists/cpp",{"title":196,"_path":197},"Data Structure","/gists/data-structure",{"title":199,"_path":200},"DEPRESSION","/gists/depression",{"title":202,"_path":203},"设计模式","/gists/design-patterns",{"title":205,"_path":206},"Developer Experience","/gists/developer-experience",{"title":208,"_path":209},"Device Metrics","/gists/device-metrix",{"title":211,"_path":212},"数字化转型","/gists/digital-transformation",{"title":214,"_path":215},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":217,"_path":218},"正则表达式","/gists/eegex",{"title":220,"_path":221},"Emoji","/gists/emoji",{"title":223,"_path":224},"工程","/gists/engineering",{"title":226,"_path":227},"熵","/gists/entropy",{"title":229,"_path":230},"Environment","/gists/environment",{"title":232,"_path":233},"Erlang","/gists/erlang",{"title":235,"_path":236},"逃离塔克夫","/gists/escape-from-tarkov",{"title":238,"_path":239},"ESNext (ES6-ES11)","/gists/esnext",{"title":241,"_path":242},"Eval！","/gists/eval",{"title":244,"_path":245},"Flutter","/gists/flutter",{"title":247,"_path":248},"字体","/gists/font",{"title":250,"_path":251},"JS 函数式编程","/gists/functional",{"title":253,"_path":254},"游戏化","/gists/gamification",{"title":256,"_path":257},"Google C++ Standard","/gists/google-cpp-standard",{"title":259,"_path":260},"双向链接完全体","/gists/graph",{"title":262,"_path":263},"Hardwares","/gists/hardwares",{"title":265,"_path":266},"哈希冲突","/gists/hash-collision",{"title":268,"_path":269},"信息设计","/gists/information-design",{"title":271,"_path":272},"InstantPage","/gists/instant.page",{"title":274,"_path":275},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":277,"_path":278},"KVStore","/gists/key-value-db",{"title":280,"_path":281},"Kubernetes","/gists/kubernetes",{"title":283,"_path":284},"Makefile","/gists/makefile",{"title":286,"_path":287},"Markdown Inline Style","/gists/markdown-nice",{"title":289,"_path":290},"小程序","/gists/miniapp",{"title":292,"_path":293},"减小页面快照体积","/gists/minify-html",{"title":295,"_path":296},"mklink","/gists/mklink",{"title":298,"_path":299},"Mock","/gists/mock",{"title":301,"_path":302},"多人协作系统","/gists/multiplayer",{"title":304,"_path":305},"多端应用","/gists/multy-end-app",{"title":307,"_path":308},"神经科学","/gists/neuroscience",{"title":310,"_path":311},"OO","/gists/oo",{"title":313,"_path":314},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":316,"_path":317},"PInvoke","/gists/pinvoke",{"title":319,"_path":320},"像素","/gists/pixel",{"title":322,"_path":323},"PowerShell","/gists/powershell",{"title":325,"_path":326},"量子","/gists/quantum",{"title":328,"_path":329},"保持好奇心","/gists/questions",{"title":331,"_path":332},"React Native","/gists/react-native",{"title":334,"_path":335},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":337,"_path":338},"SEO","/gists/seo",{"title":340,"_path":341},"Shader","/gists/shader",{"title":343,"_path":344},"Shape Up","/gists/shape-up",{"title":346,"_path":347},"睡觉","/gists/sleep",{"title":349,"_path":350},"记录奇怪的问题","/gists/solved",{"title":352,"_path":353},"States","/gists/states",{"title":355,"_path":356},"Storage","/gists/storage",{"title":358,"_path":359},"音视频流处理","/gists/stream-cli",{"title":361,"_path":362},"Symbol","/gists/symbol",{"title":364,"_path":365},"系统论","/gists/systems-theory",{"title":367,"_path":368},"Taro","/gists/taro",{"title":370,"_path":371},"任务切片","/gists/task-slice",{"title":373,"_path":374},"技术偏好","/gists/tech-dudge",{"title":376,"_path":377},"Untitled","/gists/untitled",{"title":379,"_path":380},"可变字体","/gists/variable-font",{"title":382,"_path":383},"视觉错觉","/gists/visual-illusion",{"title":385,"_path":386},"SS(SSR)","/gists/vpn",{"title":388,"_path":389},"VS Code 插件开发","/gists/vscode-plugin",{"title":391,"_path":392},"Web Components","/gists/web-components",{"title":394,"_path":395},"Windows","/gists/windows",{"title":397,"_path":398},"查缺补漏","/gists/wrong",{"title":400,"_path":401,"children":402},"代码笔记 / Gists","/source-code",[403],{"title":404,"_path":401},"🚄 代码笔记",{"title":406,"_path":407,"children":408},"我 / About","/hire",[409],{"title":410,"_path":407},"📬 技术简历",{"title":412,"_path":413,"children":414},"todo","/todo",[415],{"title":412,"_path":413},{"_path":417,"_dir":418,"_draft":419,"_partial":420,"_locale":421,"title":422,"description":423,"body":424,"_type":5026,"_id":5027,"_source":5028,"_file":5029,"_stem":5030,"_extension":5031},"/_archieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":425,"children":426,"toc":5009},"root",[427,449,480,485,647,652,660,665,672,696,703,748,760,772,778,841,862,868,928,940,1008,1022,1027,1087,1112,1146,1155,1181,1187,1224,1965,1985,2192,2198,2223,2266,2274,2830,2835,2883,2919,2927,2939,2945,2969,2976,2999,3004,3234,3253,3565,3570,3576,3615,3625,3690,3702,3710,3715,3747,3759,4463,4484,4492,4498,4558,4570,4576,4589,4602,4661,4666,4671,4690,4713,4746,5003],{"type":428,"tag":429,"props":430,"children":431},"element","p",{},[432,435],{"type":433,"value":434},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":428,"tag":436,"props":437,"children":438},"sup",{},[439],{"type":428,"tag":440,"props":441,"children":446},"a",{"href":442,"ariaDescribedBy":443,"dataFootnoteRef":421,"id":445},"#user-content-fn-helmet",[444],"footnote-label","user-content-fnref-helmet",[447],{"type":433,"value":448},"1",{"type":428,"tag":429,"props":450,"children":451},{},[452,454,465,467,478],{"type":433,"value":453},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":428,"tag":436,"props":455,"children":456},{},[457],{"type":428,"tag":440,"props":458,"children":462},{"href":459,"ariaDescribedBy":460,"dataFootnoteRef":421,"id":461},"#user-content-fn-dns-rebinding-1",[444],"user-content-fnref-dns-rebinding-1",[463],{"type":433,"value":464},"2",{"type":433,"value":466}," 问题，它就无能为力",{"type":428,"tag":436,"props":468,"children":469},{},[470],{"type":428,"tag":440,"props":471,"children":475},{"href":472,"ariaDescribedBy":473,"dataFootnoteRef":421,"id":474},"#user-content-fn-dns-rebinding-2",[444],"user-content-fnref-dns-rebinding-2",[476],{"type":433,"value":477},"3",{"type":433,"value":479},"。不过尽管不是银弹，它确实还是很有效的。",{"type":428,"tag":429,"props":481,"children":482},{},[483],{"type":433,"value":484},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":428,"tag":486,"props":487,"children":491},"pre",{"code":488,"language":489,"meta":421,"className":490,"style":421},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[492],{"type":428,"tag":493,"props":494,"children":495},"code",{"__ignoreMap":421},[496,553,562,588,596],{"type":428,"tag":497,"props":498,"children":501},"span",{"class":499,"line":500},"line",1,[502,508,514,520,526,532,538,544,548],{"type":428,"tag":497,"props":503,"children":505},{"style":504},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[506],{"type":433,"value":507},"const",{"type":428,"tag":497,"props":509,"children":511},{"style":510},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[512],{"type":433,"value":513}," express",{"type":428,"tag":497,"props":515,"children":517},{"style":516},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[518],{"type":433,"value":519}," =",{"type":428,"tag":497,"props":521,"children":523},{"style":522},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[524],{"type":433,"value":525}," require",{"type":428,"tag":497,"props":527,"children":529},{"style":528},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[530],{"type":433,"value":531},"(",{"type":428,"tag":497,"props":533,"children":535},{"style":534},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[536],{"type":433,"value":537},"'",{"type":428,"tag":497,"props":539,"children":541},{"style":540},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[542],{"type":433,"value":543},"express",{"type":428,"tag":497,"props":545,"children":546},{"style":534},[547],{"type":433,"value":537},{"type":428,"tag":497,"props":549,"children":550},{"style":528},[551],{"type":433,"value":552},")\n",{"type":428,"tag":497,"props":554,"children":556},{"class":499,"line":555},2,[557],{"type":428,"tag":497,"props":558,"children":559},{"emptyLinePlaceholder":420},[560],{"type":433,"value":561},"\n",{"type":428,"tag":497,"props":563,"children":565},{"class":499,"line":564},3,[566,570,575,579,583],{"type":428,"tag":497,"props":567,"children":568},{"style":504},[569],{"type":433,"value":507},{"type":428,"tag":497,"props":571,"children":572},{"style":510},[573],{"type":433,"value":574}," app",{"type":428,"tag":497,"props":576,"children":577},{"style":516},[578],{"type":433,"value":519},{"type":428,"tag":497,"props":580,"children":581},{"style":522},[582],{"type":433,"value":513},{"type":428,"tag":497,"props":584,"children":585},{"style":528},[586],{"type":433,"value":587},"()\n",{"type":428,"tag":497,"props":589,"children":591},{"class":499,"line":590},4,[592],{"type":428,"tag":497,"props":593,"children":594},{"emptyLinePlaceholder":420},[595],{"type":433,"value":561},{"type":428,"tag":497,"props":597,"children":599},{"class":499,"line":598},5,[600,605,611,616,620,625,629,633,638,642],{"type":428,"tag":497,"props":601,"children":602},{"style":528},[603],{"type":433,"value":604},"app",{"type":428,"tag":497,"props":606,"children":608},{"style":607},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[609],{"type":433,"value":610},".",{"type":428,"tag":497,"props":612,"children":613},{"style":522},[614],{"type":433,"value":615},"use",{"type":428,"tag":497,"props":617,"children":618},{"style":528},[619],{"type":433,"value":531},{"type":428,"tag":497,"props":621,"children":622},{"style":522},[623],{"type":433,"value":624},"require",{"type":428,"tag":497,"props":626,"children":627},{"style":528},[628],{"type":433,"value":531},{"type":428,"tag":497,"props":630,"children":631},{"style":534},[632],{"type":433,"value":537},{"type":428,"tag":497,"props":634,"children":635},{"style":540},[636],{"type":433,"value":637},"helmet",{"type":428,"tag":497,"props":639,"children":640},{"style":534},[641],{"type":433,"value":537},{"type":428,"tag":497,"props":643,"children":644},{"style":528},[645],{"type":433,"value":646},")())\n",{"type":428,"tag":429,"props":648,"children":649},{},[650],{"type":433,"value":651},"新的响应请求的 Headers 会变成这样：",{"type":428,"tag":486,"props":653,"children":655},{"code":654},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[656],{"type":428,"tag":493,"props":657,"children":658},{"__ignoreMap":421},[659],{"type":433,"value":654},{"type":428,"tag":429,"props":661,"children":662},{},[663],{"type":433,"value":664},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":428,"tag":666,"props":667,"children":669},"h2",{"id":668},"_11-种安全策略",[670],{"type":433,"value":671},"11 种安全策略",{"type":428,"tag":429,"props":673,"children":674},{},[675,677,683,694],{"type":433,"value":676},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":428,"tag":493,"props":678,"children":680},{"className":679},[],[681],{"type":433,"value":682},"OWASP Secure Headers",{"type":428,"tag":436,"props":684,"children":685},{},[686],{"type":428,"tag":440,"props":687,"children":691},{"href":688,"ariaDescribedBy":689,"dataFootnoteRef":421,"id":690},"#user-content-fn-shp",[444],"user-content-fnref-shp",[692],{"type":433,"value":693},"4",{"type":433,"value":695}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":428,"tag":697,"props":698,"children":700},"h3",{"id":699},"移除-x-powered-by",[701],{"type":433,"value":702},"移除 X-Powered-By",{"type":428,"tag":486,"props":704,"children":706},{"code":705,"language":489,"meta":421,"className":490,"style":421},"response.removeHeader('X-Powered-By')\n",[707],{"type":428,"tag":493,"props":708,"children":709},{"__ignoreMap":421},[710],{"type":428,"tag":497,"props":711,"children":712},{"class":499,"line":500},[713,718,722,727,731,735,740,744],{"type":428,"tag":497,"props":714,"children":715},{"style":528},[716],{"type":433,"value":717},"response",{"type":428,"tag":497,"props":719,"children":720},{"style":607},[721],{"type":433,"value":610},{"type":428,"tag":497,"props":723,"children":724},{"style":522},[725],{"type":433,"value":726},"removeHeader",{"type":428,"tag":497,"props":728,"children":729},{"style":528},[730],{"type":433,"value":531},{"type":428,"tag":497,"props":732,"children":733},{"style":534},[734],{"type":433,"value":537},{"type":428,"tag":497,"props":736,"children":737},{"style":540},[738],{"type":433,"value":739},"X-Powered-By",{"type":428,"tag":497,"props":741,"children":742},{"style":534},[743],{"type":433,"value":537},{"type":428,"tag":497,"props":745,"children":746},{"style":528},[747],{"type":433,"value":552},{"type":428,"tag":429,"props":749,"children":750},{},[751,753,758],{"type":433,"value":752},"一些框架会在请求头中添加 ",{"type":428,"tag":493,"props":754,"children":756},{"className":755},[],[757],{"type":433,"value":739},{"type":433,"value":759},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":428,"tag":429,"props":761,"children":762},{},[763,765,770],{"type":433,"value":764},"由于 Express 默认会给响应头增加 ",{"type":428,"tag":493,"props":766,"children":768},{"className":767},[],[769],{"type":433,"value":739},{"type":433,"value":771},"，所以 Helmet 直接把它移除了。",{"type":428,"tag":697,"props":773,"children":775},{"id":774},"移除-mime-嗅探",[776],{"type":433,"value":777},"移除 MIME 嗅探",{"type":428,"tag":486,"props":779,"children":781},{"code":780,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[782],{"type":428,"tag":493,"props":783,"children":784},{"__ignoreMap":421},[785],{"type":428,"tag":497,"props":786,"children":787},{"class":499,"line":500},[788,792,796,801,805,809,814,818,823,828,833,837],{"type":428,"tag":497,"props":789,"children":790},{"style":528},[791],{"type":433,"value":717},{"type":428,"tag":497,"props":793,"children":794},{"style":607},[795],{"type":433,"value":610},{"type":428,"tag":497,"props":797,"children":798},{"style":522},[799],{"type":433,"value":800},"setHeader",{"type":428,"tag":497,"props":802,"children":803},{"style":528},[804],{"type":433,"value":531},{"type":428,"tag":497,"props":806,"children":807},{"style":534},[808],{"type":433,"value":537},{"type":428,"tag":497,"props":810,"children":811},{"style":540},[812],{"type":433,"value":813},"X-Content-Type-Options",{"type":428,"tag":497,"props":815,"children":816},{"style":534},[817],{"type":433,"value":537},{"type":428,"tag":497,"props":819,"children":820},{"style":607},[821],{"type":433,"value":822},",",{"type":428,"tag":497,"props":824,"children":825},{"style":534},[826],{"type":433,"value":827}," '",{"type":428,"tag":497,"props":829,"children":830},{"style":540},[831],{"type":433,"value":832},"nosniff",{"type":428,"tag":497,"props":834,"children":835},{"style":534},[836],{"type":433,"value":537},{"type":428,"tag":497,"props":838,"children":839},{"style":528},[840],{"type":433,"value":552},{"type":428,"tag":429,"props":842,"children":843},{},[844,846,852,854,860],{"type":433,"value":845},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":428,"tag":493,"props":847,"children":849},{"className":848},[],[850],{"type":433,"value":851},"Content-Type",{"type":433,"value":853},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":428,"tag":493,"props":855,"children":857},{"className":856},[],[858],{"type":433,"value":859},"X-Content-Type-Options = nosniff",{"type":433,"value":861}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":428,"tag":697,"props":863,"children":865},{"id":864},"移除-x-xss-protection",[866],{"type":433,"value":867},"移除 X-XSS-Protection",{"type":428,"tag":486,"props":869,"children":871},{"code":870,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('X-XSS-Protection', '0')\n",[872],{"type":428,"tag":493,"props":873,"children":874},{"__ignoreMap":421},[875],{"type":428,"tag":497,"props":876,"children":877},{"class":499,"line":500},[878,882,886,890,894,898,903,907,911,915,920,924],{"type":428,"tag":497,"props":879,"children":880},{"style":528},[881],{"type":433,"value":717},{"type":428,"tag":497,"props":883,"children":884},{"style":607},[885],{"type":433,"value":610},{"type":428,"tag":497,"props":887,"children":888},{"style":522},[889],{"type":433,"value":800},{"type":428,"tag":497,"props":891,"children":892},{"style":528},[893],{"type":433,"value":531},{"type":428,"tag":497,"props":895,"children":896},{"style":534},[897],{"type":433,"value":537},{"type":428,"tag":497,"props":899,"children":900},{"style":540},[901],{"type":433,"value":902},"X-XSS-Protection",{"type":428,"tag":497,"props":904,"children":905},{"style":534},[906],{"type":433,"value":537},{"type":428,"tag":497,"props":908,"children":909},{"style":607},[910],{"type":433,"value":822},{"type":428,"tag":497,"props":912,"children":913},{"style":534},[914],{"type":433,"value":827},{"type":428,"tag":497,"props":916,"children":917},{"style":540},[918],{"type":433,"value":919},"0",{"type":428,"tag":497,"props":921,"children":922},{"style":534},[923],{"type":433,"value":537},{"type":428,"tag":497,"props":925,"children":926},{"style":528},[927],{"type":433,"value":552},{"type":428,"tag":429,"props":929,"children":930},{},[931,933,938],{"type":433,"value":932},"不是应该打开 ",{"type":428,"tag":493,"props":934,"children":936},{"className":935},[],[937],{"type":433,"value":902},{"type":433,"value":939},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":428,"tag":429,"props":941,"children":942},{},[943,945,951,953,964,966,971,973,979,981,992,994,999,1001,1006],{"type":433,"value":944},"这得追溯回去年的 Chrome 移除 ",{"type":428,"tag":493,"props":946,"children":948},{"className":947},[],[949],{"type":433,"value":950},"XSS Auditor",{"type":433,"value":952},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":428,"tag":436,"props":954,"children":955},{},[956],{"type":428,"tag":440,"props":957,"children":961},{"href":958,"ariaDescribedBy":959,"dataFootnoteRef":421,"id":960},"#user-content-fn-xss-auditor",[444],"user-content-fnref-xss-auditor",[962],{"type":433,"value":963},"5",{"type":433,"value":965},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":428,"tag":493,"props":967,"children":969},{"className":968},[],[970],{"type":433,"value":950},{"type":433,"value":972},"，并开始使用 ",{"type":428,"tag":493,"props":974,"children":976},{"className":975},[],[977],{"type":433,"value":978},"CSP",{"type":433,"value":980}," 等现代标准（更现代的标准）",{"type":428,"tag":436,"props":982,"children":983},{},[984],{"type":428,"tag":440,"props":985,"children":989},{"href":986,"ariaDescribedBy":987,"dataFootnoteRef":421,"id":988},"#user-content-fn-delete-xss-auditor",[444],"user-content-fnref-delete-xss-auditor",[990],{"type":433,"value":991},"6",{"type":433,"value":993},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":428,"tag":493,"props":995,"children":997},{"className":996},[],[998],{"type":433,"value":902},{"type":433,"value":1000}," 这个响应头是让浏览器不要再用 ",{"type":428,"tag":493,"props":1002,"children":1004},{"className":1003},[],[1005],{"type":433,"value":950},{"type":433,"value":1007},"。",{"type":428,"tag":429,"props":1009,"children":1010},{},[1011,1013,1021],{"type":433,"value":1012},"见：",{"type":428,"tag":440,"props":1014,"children":1018},{"href":1015,"rel":1016},"https://github.com/OWASP/CheatSheetSeries/issues/376",[1017],"nofollow",[1019],{"type":433,"value":1020},"#376",{"type":433,"value":1007},{"type":428,"tag":697,"props":1023,"children":1025},{"id":1024},"禁止页面被嵌套",[1026],{"type":433,"value":1024},{"type":428,"tag":486,"props":1028,"children":1030},{"code":1029,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[1031],{"type":428,"tag":493,"props":1032,"children":1033},{"__ignoreMap":421},[1034],{"type":428,"tag":497,"props":1035,"children":1036},{"class":499,"line":500},[1037,1041,1045,1049,1053,1057,1062,1066,1070,1074,1079,1083],{"type":428,"tag":497,"props":1038,"children":1039},{"style":528},[1040],{"type":433,"value":717},{"type":428,"tag":497,"props":1042,"children":1043},{"style":607},[1044],{"type":433,"value":610},{"type":428,"tag":497,"props":1046,"children":1047},{"style":522},[1048],{"type":433,"value":800},{"type":428,"tag":497,"props":1050,"children":1051},{"style":528},[1052],{"type":433,"value":531},{"type":428,"tag":497,"props":1054,"children":1055},{"style":534},[1056],{"type":433,"value":537},{"type":428,"tag":497,"props":1058,"children":1059},{"style":540},[1060],{"type":433,"value":1061},"X-Frame-Options",{"type":428,"tag":497,"props":1063,"children":1064},{"style":534},[1065],{"type":433,"value":537},{"type":428,"tag":497,"props":1067,"children":1068},{"style":607},[1069],{"type":433,"value":822},{"type":428,"tag":497,"props":1071,"children":1072},{"style":534},[1073],{"type":433,"value":827},{"type":428,"tag":497,"props":1075,"children":1076},{"style":540},[1077],{"type":433,"value":1078},"SAMEORIGIN",{"type":428,"tag":497,"props":1080,"children":1081},{"style":534},[1082],{"type":433,"value":537},{"type":428,"tag":497,"props":1084,"children":1085},{"style":528},[1086],{"type":433,"value":552},{"type":428,"tag":429,"props":1088,"children":1089},{},[1090,1095,1097,1102,1104,1110],{"type":428,"tag":493,"props":1091,"children":1093},{"className":1092},[],[1094],{"type":433,"value":1061},{"type":433,"value":1096}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":428,"tag":493,"props":1098,"children":1100},{"className":1099},[],[1101],{"type":433,"value":1061},{"type":433,"value":1103}," 为 ",{"type":428,"tag":493,"props":1105,"children":1107},{"className":1106},[],[1108],{"type":433,"value":1109},"SameOrigin",{"type":433,"value":1111},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":428,"tag":429,"props":1113,"children":1114},{},[1115,1117,1123,1125,1130,1131,1137,1139,1144],{"type":433,"value":1116},"本来它的值有三种选择，",{"type":428,"tag":493,"props":1118,"children":1120},{"className":1119},[],[1121],{"type":433,"value":1122},"Deny",{"type":433,"value":1124},"、",{"type":428,"tag":493,"props":1126,"children":1128},{"className":1127},[],[1129],{"type":433,"value":1109},{"type":433,"value":1124},{"type":428,"tag":493,"props":1132,"children":1134},{"className":1133},[],[1135],{"type":433,"value":1136},"AllowFrom",{"type":433,"value":1138},"。但 ",{"type":428,"tag":493,"props":1140,"children":1142},{"className":1141},[],[1143],{"type":433,"value":1136},{"type":433,"value":1145}," 因为其兼容性原因，被 Helmet 弃用：",{"type":428,"tag":429,"props":1147,"children":1148},{},[1149],{"type":428,"tag":1150,"props":1151,"children":1154},"img",{"alt":1152,"src":1153},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":428,"tag":429,"props":1156,"children":1157},{},[1158,1160,1165,1167,1173,1175,1180],{"type":433,"value":1159},"此外，可以在 ",{"type":428,"tag":493,"props":1161,"children":1163},{"className":1162},[],[1164],{"type":433,"value":978},{"type":433,"value":1166}," 中设置 ",{"type":428,"tag":493,"props":1168,"children":1170},{"className":1169},[],[1171],{"type":433,"value":1172},"frame-ancestors",{"type":433,"value":1174}," 指令来替代 ",{"type":428,"tag":493,"props":1176,"children":1178},{"className":1177},[],[1179],{"type":433,"value":1061},{"type":433,"value":1007},{"type":428,"tag":697,"props":1182,"children":1184},{"id":1183},"移除-referer",[1185],{"type":433,"value":1186},"移除 Referer",{"type":428,"tag":429,"props":1188,"children":1189},{},[1190,1196,1198,1204,1215,1217,1222],{"type":428,"tag":493,"props":1191,"children":1193},{"className":1192},[],[1194],{"type":433,"value":1195},"Referrer-Policy",{"type":433,"value":1197}," 可以控制浏览器请求头的 ",{"type":428,"tag":493,"props":1199,"children":1201},{"className":1200},[],[1202],{"type":433,"value":1203},"Referer",{"type":428,"tag":436,"props":1205,"children":1206},{},[1207],{"type":428,"tag":440,"props":1208,"children":1212},{"href":1209,"ariaDescribedBy":1210,"dataFootnoteRef":421,"id":1211},"#user-content-fn-referer",[444],"user-content-fnref-referer",[1213],{"type":433,"value":1214},"7",{"type":433,"value":1216}," 的显示方式。移除 ",{"type":428,"tag":493,"props":1218,"children":1220},{"className":1219},[],[1221],{"type":433,"value":1203},{"type":433,"value":1223}," 能保护用户的访问记录，防止隐私泄漏。",{"type":428,"tag":486,"props":1225,"children":1227},{"code":1226,"language":489,"meta":421,"className":490,"style":421},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1228],{"type":428,"tag":493,"props":1229,"children":1230},{"__ignoreMap":421},[1231,1262,1271,1293,1301,1321,1330,1351,1360,1381,1390,1411,1420,1441,1450,1471,1480,1501,1510,1519,1528,1589,1663,1694,1707,1716,1759,1768,1803,1836,1890,1935,1948,1957],{"type":428,"tag":497,"props":1232,"children":1233},{"class":499,"line":500},[1234,1238,1243,1247,1252,1257],{"type":428,"tag":497,"props":1235,"children":1236},{"style":504},[1237],{"type":433,"value":507},{"type":428,"tag":497,"props":1239,"children":1240},{"style":510},[1241],{"type":433,"value":1242}," ALLOWED_TOKENS",{"type":428,"tag":497,"props":1244,"children":1245},{"style":516},[1246],{"type":433,"value":519},{"type":428,"tag":497,"props":1248,"children":1249},{"style":516},[1250],{"type":433,"value":1251}," new",{"type":428,"tag":497,"props":1253,"children":1254},{"style":522},[1255],{"type":433,"value":1256}," Set",{"type":428,"tag":497,"props":1258,"children":1259},{"style":528},[1260],{"type":433,"value":1261},"([\n",{"type":428,"tag":497,"props":1263,"children":1264},{"class":499,"line":555},[1265],{"type":428,"tag":497,"props":1266,"children":1268},{"style":1267},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1269],{"type":433,"value":1270},"  // 任何时候都不携带 Referer\n",{"type":428,"tag":497,"props":1272,"children":1273},{"class":499,"line":564},[1274,1279,1284,1288],{"type":428,"tag":497,"props":1275,"children":1276},{"style":534},[1277],{"type":433,"value":1278},"  '",{"type":428,"tag":497,"props":1280,"children":1281},{"style":540},[1282],{"type":433,"value":1283},"no-referrer",{"type":428,"tag":497,"props":1285,"children":1286},{"style":534},[1287],{"type":433,"value":537},{"type":428,"tag":497,"props":1289,"children":1290},{"style":607},[1291],{"type":433,"value":1292},",\n",{"type":428,"tag":497,"props":1294,"children":1295},{"class":499,"line":590},[1296],{"type":428,"tag":497,"props":1297,"children":1298},{"style":1267},[1299],{"type":433,"value":1300},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":428,"tag":497,"props":1302,"children":1303},{"class":499,"line":598},[1304,1308,1313,1317],{"type":428,"tag":497,"props":1305,"children":1306},{"style":534},[1307],{"type":433,"value":1278},{"type":428,"tag":497,"props":1309,"children":1310},{"style":540},[1311],{"type":433,"value":1312},"no-referrer-when-downgrade",{"type":428,"tag":497,"props":1314,"children":1315},{"style":534},[1316],{"type":433,"value":537},{"type":428,"tag":497,"props":1318,"children":1319},{"style":607},[1320],{"type":433,"value":1292},{"type":428,"tag":497,"props":1322,"children":1324},{"class":499,"line":1323},6,[1325],{"type":428,"tag":497,"props":1326,"children":1327},{"style":1267},[1328],{"type":433,"value":1329},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":428,"tag":497,"props":1331,"children":1333},{"class":499,"line":1332},7,[1334,1338,1343,1347],{"type":428,"tag":497,"props":1335,"children":1336},{"style":534},[1337],{"type":433,"value":1278},{"type":428,"tag":497,"props":1339,"children":1340},{"style":540},[1341],{"type":433,"value":1342},"same-origin",{"type":428,"tag":497,"props":1344,"children":1345},{"style":534},[1346],{"type":433,"value":537},{"type":428,"tag":497,"props":1348,"children":1349},{"style":607},[1350],{"type":433,"value":1292},{"type":428,"tag":497,"props":1352,"children":1354},{"class":499,"line":1353},8,[1355],{"type":428,"tag":497,"props":1356,"children":1357},{"style":1267},[1358],{"type":433,"value":1359},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":428,"tag":497,"props":1361,"children":1363},{"class":499,"line":1362},9,[1364,1368,1373,1377],{"type":428,"tag":497,"props":1365,"children":1366},{"style":534},[1367],{"type":433,"value":1278},{"type":428,"tag":497,"props":1369,"children":1370},{"style":540},[1371],{"type":433,"value":1372},"origin",{"type":428,"tag":497,"props":1374,"children":1375},{"style":534},[1376],{"type":433,"value":537},{"type":428,"tag":497,"props":1378,"children":1379},{"style":607},[1380],{"type":433,"value":1292},{"type":428,"tag":497,"props":1382,"children":1384},{"class":499,"line":1383},10,[1385],{"type":428,"tag":497,"props":1386,"children":1387},{"style":1267},[1388],{"type":433,"value":1389},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":428,"tag":497,"props":1391,"children":1393},{"class":499,"line":1392},11,[1394,1398,1403,1407],{"type":428,"tag":497,"props":1395,"children":1396},{"style":534},[1397],{"type":433,"value":1278},{"type":428,"tag":497,"props":1399,"children":1400},{"style":540},[1401],{"type":433,"value":1402},"strict-origin",{"type":428,"tag":497,"props":1404,"children":1405},{"style":534},[1406],{"type":433,"value":537},{"type":428,"tag":497,"props":1408,"children":1409},{"style":607},[1410],{"type":433,"value":1292},{"type":428,"tag":497,"props":1412,"children":1414},{"class":499,"line":1413},12,[1415],{"type":428,"tag":497,"props":1416,"children":1417},{"style":1267},[1418],{"type":433,"value":1419},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":428,"tag":497,"props":1421,"children":1423},{"class":499,"line":1422},13,[1424,1428,1433,1437],{"type":428,"tag":497,"props":1425,"children":1426},{"style":534},[1427],{"type":433,"value":1278},{"type":428,"tag":497,"props":1429,"children":1430},{"style":540},[1431],{"type":433,"value":1432},"origin-when-cross-origin",{"type":428,"tag":497,"props":1434,"children":1435},{"style":534},[1436],{"type":433,"value":537},{"type":428,"tag":497,"props":1438,"children":1439},{"style":607},[1440],{"type":433,"value":1292},{"type":428,"tag":497,"props":1442,"children":1444},{"class":499,"line":1443},14,[1445],{"type":428,"tag":497,"props":1446,"children":1447},{"style":1267},[1448],{"type":433,"value":1449},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":428,"tag":497,"props":1451,"children":1453},{"class":499,"line":1452},15,[1454,1458,1463,1467],{"type":428,"tag":497,"props":1455,"children":1456},{"style":534},[1457],{"type":433,"value":1278},{"type":428,"tag":497,"props":1459,"children":1460},{"style":540},[1461],{"type":433,"value":1462},"strict-origin-when-cross-origin",{"type":428,"tag":497,"props":1464,"children":1465},{"style":534},[1466],{"type":433,"value":537},{"type":428,"tag":497,"props":1468,"children":1469},{"style":607},[1470],{"type":433,"value":1292},{"type":428,"tag":497,"props":1472,"children":1474},{"class":499,"line":1473},16,[1475],{"type":428,"tag":497,"props":1476,"children":1477},{"style":1267},[1478],{"type":433,"value":1479},"  // 所有请求都携带上完整的 Referer\n",{"type":428,"tag":497,"props":1481,"children":1483},{"class":499,"line":1482},17,[1484,1488,1493,1497],{"type":428,"tag":497,"props":1485,"children":1486},{"style":534},[1487],{"type":433,"value":1278},{"type":428,"tag":497,"props":1489,"children":1490},{"style":540},[1491],{"type":433,"value":1492},"unsafe-url",{"type":428,"tag":497,"props":1494,"children":1495},{"style":534},[1496],{"type":433,"value":537},{"type":428,"tag":497,"props":1498,"children":1499},{"style":607},[1500],{"type":433,"value":1292},{"type":428,"tag":497,"props":1502,"children":1504},{"class":499,"line":1503},18,[1505],{"type":428,"tag":497,"props":1506,"children":1507},{"style":1267},[1508],{"type":433,"value":1509},"  // 无策略\n",{"type":428,"tag":497,"props":1511,"children":1513},{"class":499,"line":1512},19,[1514],{"type":428,"tag":497,"props":1515,"children":1516},{"style":534},[1517],{"type":433,"value":1518},"  ''\n",{"type":428,"tag":497,"props":1520,"children":1522},{"class":499,"line":1521},20,[1523],{"type":428,"tag":497,"props":1524,"children":1525},{"style":528},[1526],{"type":433,"value":1527},"])\n",{"type":428,"tag":497,"props":1529,"children":1531},{"class":499,"line":1530},21,[1532,1537,1542,1547,1553,1557,1562,1566,1570,1574,1579,1584],{"type":428,"tag":497,"props":1533,"children":1534},{"style":504},[1535],{"type":433,"value":1536},"function",{"type":428,"tag":497,"props":1538,"children":1539},{"style":522},[1540],{"type":433,"value":1541}," getHeaderValueFromOptions",{"type":428,"tag":497,"props":1543,"children":1544},{"style":607},[1545],{"type":433,"value":1546},"({",{"type":428,"tag":497,"props":1548,"children":1550},{"style":1549},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1551],{"type":433,"value":1552}," policy",{"type":428,"tag":497,"props":1554,"children":1555},{"style":516},[1556],{"type":433,"value":519},{"type":428,"tag":497,"props":1558,"children":1559},{"style":528},[1560],{"type":433,"value":1561}," [",{"type":428,"tag":497,"props":1563,"children":1564},{"style":534},[1565],{"type":433,"value":537},{"type":428,"tag":497,"props":1567,"children":1568},{"style":540},[1569],{"type":433,"value":1283},{"type":428,"tag":497,"props":1571,"children":1572},{"style":534},[1573],{"type":433,"value":537},{"type":428,"tag":497,"props":1575,"children":1576},{"style":528},[1577],{"type":433,"value":1578},"] ",{"type":428,"tag":497,"props":1580,"children":1581},{"style":607},[1582],{"type":433,"value":1583},"})",{"type":428,"tag":497,"props":1585,"children":1586},{"style":607},[1587],{"type":433,"value":1588}," {\n",{"type":428,"tag":497,"props":1590,"children":1592},{"class":499,"line":1591},22,[1593,1598,1603,1607,1612,1616,1621,1625,1630,1634,1639,1644,1649,1653,1658],{"type":428,"tag":497,"props":1594,"children":1595},{"style":504},[1596],{"type":433,"value":1597},"  const",{"type":428,"tag":497,"props":1599,"children":1600},{"style":510},[1601],{"type":433,"value":1602}," tokens",{"type":428,"tag":497,"props":1604,"children":1605},{"style":516},[1606],{"type":433,"value":519},{"type":428,"tag":497,"props":1608,"children":1609},{"style":516},[1610],{"type":433,"value":1611}," typeof",{"type":428,"tag":497,"props":1613,"children":1614},{"style":528},[1615],{"type":433,"value":1552},{"type":428,"tag":497,"props":1617,"children":1618},{"style":516},[1619],{"type":433,"value":1620}," ===",{"type":428,"tag":497,"props":1622,"children":1623},{"style":534},[1624],{"type":433,"value":827},{"type":428,"tag":497,"props":1626,"children":1627},{"style":540},[1628],{"type":433,"value":1629},"string",{"type":428,"tag":497,"props":1631,"children":1632},{"style":534},[1633],{"type":433,"value":537},{"type":428,"tag":497,"props":1635,"children":1636},{"style":516},[1637],{"type":433,"value":1638}," ?",{"type":428,"tag":497,"props":1640,"children":1642},{"style":1641},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1643],{"type":433,"value":1561},{"type":428,"tag":497,"props":1645,"children":1646},{"style":528},[1647],{"type":433,"value":1648},"policy",{"type":428,"tag":497,"props":1650,"children":1651},{"style":1641},[1652],{"type":433,"value":1578},{"type":428,"tag":497,"props":1654,"children":1655},{"style":516},[1656],{"type":433,"value":1657},":",{"type":428,"tag":497,"props":1659,"children":1660},{"style":528},[1661],{"type":433,"value":1662}," policy\n",{"type":428,"tag":497,"props":1664,"children":1666},{"class":499,"line":1665},23,[1667,1672,1676,1681,1685,1690],{"type":428,"tag":497,"props":1668,"children":1669},{"style":528},[1670],{"type":433,"value":1671},"    tokensSeen",{"type":428,"tag":497,"props":1673,"children":1674},{"style":607},[1675],{"type":433,"value":610},{"type":428,"tag":497,"props":1677,"children":1678},{"style":522},[1679],{"type":433,"value":1680},"add",{"type":428,"tag":497,"props":1682,"children":1683},{"style":1641},[1684],{"type":433,"value":531},{"type":428,"tag":497,"props":1686,"children":1687},{"style":528},[1688],{"type":433,"value":1689},"token",{"type":428,"tag":497,"props":1691,"children":1692},{"style":1641},[1693],{"type":433,"value":552},{"type":428,"tag":497,"props":1695,"children":1697},{"class":499,"line":1696},24,[1698,1703],{"type":428,"tag":497,"props":1699,"children":1700},{"style":607},[1701],{"type":433,"value":1702},"  }",{"type":428,"tag":497,"props":1704,"children":1705},{"style":528},[1706],{"type":433,"value":552},{"type":428,"tag":497,"props":1708,"children":1710},{"class":499,"line":1709},25,[1711],{"type":428,"tag":497,"props":1712,"children":1713},{"style":1267},[1714],{"type":433,"value":1715},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":428,"tag":497,"props":1717,"children":1719},{"class":499,"line":1718},26,[1720,1726,1730,1734,1739,1743,1747,1751,1755],{"type":428,"tag":497,"props":1721,"children":1723},{"style":1722},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1724],{"type":433,"value":1725},"  return",{"type":428,"tag":497,"props":1727,"children":1728},{"style":528},[1729],{"type":433,"value":1602},{"type":428,"tag":497,"props":1731,"children":1732},{"style":607},[1733],{"type":433,"value":610},{"type":428,"tag":497,"props":1735,"children":1736},{"style":522},[1737],{"type":433,"value":1738},"join",{"type":428,"tag":497,"props":1740,"children":1741},{"style":528},[1742],{"type":433,"value":531},{"type":428,"tag":497,"props":1744,"children":1745},{"style":534},[1746],{"type":433,"value":537},{"type":428,"tag":497,"props":1748,"children":1749},{"style":540},[1750],{"type":433,"value":822},{"type":428,"tag":497,"props":1752,"children":1753},{"style":534},[1754],{"type":433,"value":537},{"type":428,"tag":497,"props":1756,"children":1757},{"style":528},[1758],{"type":433,"value":552},{"type":428,"tag":497,"props":1760,"children":1762},{"class":499,"line":1761},27,[1763],{"type":428,"tag":497,"props":1764,"children":1765},{"style":528},[1766],{"type":433,"value":1767},"}\n",{"type":428,"tag":497,"props":1769,"children":1771},{"class":499,"line":1770},28,[1772,1776,1781,1785,1790,1794,1799],{"type":428,"tag":497,"props":1773,"children":1774},{"style":504},[1775],{"type":433,"value":1536},{"type":428,"tag":497,"props":1777,"children":1778},{"style":522},[1779],{"type":433,"value":1780}," referrerPolicy",{"type":428,"tag":497,"props":1782,"children":1783},{"style":607},[1784],{"type":433,"value":531},{"type":428,"tag":497,"props":1786,"children":1787},{"style":1549},[1788],{"type":433,"value":1789},"options",{"type":428,"tag":497,"props":1791,"children":1792},{"style":516},[1793],{"type":433,"value":519},{"type":428,"tag":497,"props":1795,"children":1796},{"style":607},[1797],{"type":433,"value":1798}," {})",{"type":428,"tag":497,"props":1800,"children":1801},{"style":607},[1802],{"type":433,"value":1588},{"type":428,"tag":497,"props":1804,"children":1806},{"class":499,"line":1805},29,[1807,1811,1816,1820,1824,1828,1832],{"type":428,"tag":497,"props":1808,"children":1809},{"style":504},[1810],{"type":433,"value":1597},{"type":428,"tag":497,"props":1812,"children":1813},{"style":510},[1814],{"type":433,"value":1815}," headerValue",{"type":428,"tag":497,"props":1817,"children":1818},{"style":516},[1819],{"type":433,"value":519},{"type":428,"tag":497,"props":1821,"children":1822},{"style":522},[1823],{"type":433,"value":1541},{"type":428,"tag":497,"props":1825,"children":1826},{"style":1641},[1827],{"type":433,"value":531},{"type":428,"tag":497,"props":1829,"children":1830},{"style":528},[1831],{"type":433,"value":1789},{"type":428,"tag":497,"props":1833,"children":1834},{"style":1641},[1835],{"type":433,"value":552},{"type":428,"tag":497,"props":1837,"children":1839},{"class":499,"line":1838},30,[1840,1844,1849,1854,1858,1863,1867,1872,1876,1881,1886],{"type":428,"tag":497,"props":1841,"children":1842},{"style":1722},[1843],{"type":433,"value":1725},{"type":428,"tag":497,"props":1845,"children":1846},{"style":504},[1847],{"type":433,"value":1848}," function",{"type":428,"tag":497,"props":1850,"children":1851},{"style":522},[1852],{"type":433,"value":1853}," referrerPolicyMiddleware",{"type":428,"tag":497,"props":1855,"children":1856},{"style":607},[1857],{"type":433,"value":531},{"type":428,"tag":497,"props":1859,"children":1860},{"style":1549},[1861],{"type":433,"value":1862},"_req",{"type":428,"tag":497,"props":1864,"children":1865},{"style":607},[1866],{"type":433,"value":822},{"type":428,"tag":497,"props":1868,"children":1869},{"style":1549},[1870],{"type":433,"value":1871}," res",{"type":428,"tag":497,"props":1873,"children":1874},{"style":607},[1875],{"type":433,"value":822},{"type":428,"tag":497,"props":1877,"children":1878},{"style":1549},[1879],{"type":433,"value":1880}," next",{"type":428,"tag":497,"props":1882,"children":1883},{"style":607},[1884],{"type":433,"value":1885},")",{"type":428,"tag":497,"props":1887,"children":1888},{"style":607},[1889],{"type":433,"value":1588},{"type":428,"tag":497,"props":1891,"children":1893},{"class":499,"line":1892},31,[1894,1899,1903,1907,1911,1915,1919,1923,1927,1931],{"type":428,"tag":497,"props":1895,"children":1896},{"style":528},[1897],{"type":433,"value":1898},"    res",{"type":428,"tag":497,"props":1900,"children":1901},{"style":607},[1902],{"type":433,"value":610},{"type":428,"tag":497,"props":1904,"children":1905},{"style":522},[1906],{"type":433,"value":800},{"type":428,"tag":497,"props":1908,"children":1909},{"style":1641},[1910],{"type":433,"value":531},{"type":428,"tag":497,"props":1912,"children":1913},{"style":534},[1914],{"type":433,"value":537},{"type":428,"tag":497,"props":1916,"children":1917},{"style":540},[1918],{"type":433,"value":1195},{"type":428,"tag":497,"props":1920,"children":1921},{"style":534},[1922],{"type":433,"value":537},{"type":428,"tag":497,"props":1924,"children":1925},{"style":607},[1926],{"type":433,"value":822},{"type":428,"tag":497,"props":1928,"children":1929},{"style":528},[1930],{"type":433,"value":1815},{"type":428,"tag":497,"props":1932,"children":1933},{"style":1641},[1934],{"type":433,"value":552},{"type":428,"tag":497,"props":1936,"children":1938},{"class":499,"line":1937},32,[1939,1944],{"type":428,"tag":497,"props":1940,"children":1941},{"style":522},[1942],{"type":433,"value":1943},"    next",{"type":428,"tag":497,"props":1945,"children":1946},{"style":1641},[1947],{"type":433,"value":587},{"type":428,"tag":497,"props":1949,"children":1951},{"class":499,"line":1950},33,[1952],{"type":428,"tag":497,"props":1953,"children":1954},{"style":607},[1955],{"type":433,"value":1956},"  }\n",{"type":428,"tag":497,"props":1958,"children":1960},{"class":499,"line":1959},34,[1961],{"type":428,"tag":497,"props":1962,"children":1963},{"style":607},[1964],{"type":433,"value":1767},{"type":428,"tag":429,"props":1966,"children":1967},{},[1968,1970,1976,1978,1983],{"type":433,"value":1969},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":428,"tag":493,"props":1971,"children":1973},{"className":1972},[],[1974],{"type":433,"value":1975},"Referrer Policy",{"type":433,"value":1977},"。Meta 标签设置的 ",{"type":428,"tag":493,"props":1979,"children":1981},{"className":1980},[],[1982],{"type":433,"value":1975},{"type":433,"value":1984}," 对整个页面都有效果（但优先级最低）。",{"type":428,"tag":486,"props":1986,"children":1990},{"code":1987,"language":1988,"meta":421,"className":1989,"style":421},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1991],{"type":428,"tag":493,"props":1992,"children":1993},{"__ignoreMap":421},[1994,2059,2127],{"type":428,"tag":497,"props":1995,"children":1996},{"class":499,"line":500},[1997,2002,2008,2014,2019,2024,2029,2033,2038,2042,2046,2050,2054],{"type":428,"tag":497,"props":1998,"children":1999},{"style":607},[2000],{"type":433,"value":2001},"\u003C",{"type":428,"tag":497,"props":2003,"children":2005},{"style":2004},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[2006],{"type":433,"value":2007},"meta",{"type":428,"tag":497,"props":2009,"children":2011},{"style":2010},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[2012],{"type":433,"value":2013}," name",{"type":428,"tag":497,"props":2015,"children":2016},{"style":607},[2017],{"type":433,"value":2018},"=",{"type":428,"tag":497,"props":2020,"children":2021},{"style":534},[2022],{"type":433,"value":2023},"\"",{"type":428,"tag":497,"props":2025,"children":2026},{"style":540},[2027],{"type":433,"value":2028},"referrer",{"type":428,"tag":497,"props":2030,"children":2031},{"style":534},[2032],{"type":433,"value":2023},{"type":428,"tag":497,"props":2034,"children":2035},{"style":2010},[2036],{"type":433,"value":2037}," content",{"type":428,"tag":497,"props":2039,"children":2040},{"style":607},[2041],{"type":433,"value":2018},{"type":428,"tag":497,"props":2043,"children":2044},{"style":534},[2045],{"type":433,"value":2023},{"type":428,"tag":497,"props":2047,"children":2048},{"style":540},[2049],{"type":433,"value":1372},{"type":428,"tag":497,"props":2051,"children":2052},{"style":534},[2053],{"type":433,"value":2023},{"type":428,"tag":497,"props":2055,"children":2056},{"style":607},[2057],{"type":433,"value":2058}," />\n",{"type":428,"tag":497,"props":2060,"children":2061},{"class":499,"line":555},[2062,2066,2070,2075,2079,2083,2088,2092,2097,2101,2105,2109,2113,2118,2122],{"type":428,"tag":497,"props":2063,"children":2064},{"style":607},[2065],{"type":433,"value":2001},{"type":428,"tag":497,"props":2067,"children":2068},{"style":2004},[2069],{"type":433,"value":440},{"type":428,"tag":497,"props":2071,"children":2072},{"style":2010},[2073],{"type":433,"value":2074}," href",{"type":428,"tag":497,"props":2076,"children":2077},{"style":607},[2078],{"type":433,"value":2018},{"type":428,"tag":497,"props":2080,"children":2081},{"style":534},[2082],{"type":433,"value":2023},{"type":428,"tag":497,"props":2084,"children":2085},{"style":540},[2086],{"type":433,"value":2087},"http://example.com",{"type":428,"tag":497,"props":2089,"children":2090},{"style":534},[2091],{"type":433,"value":2023},{"type":428,"tag":497,"props":2093,"children":2094},{"style":2010},[2095],{"type":433,"value":2096}," referrerpolicy",{"type":428,"tag":497,"props":2098,"children":2099},{"style":607},[2100],{"type":433,"value":2018},{"type":428,"tag":497,"props":2102,"children":2103},{"style":534},[2104],{"type":433,"value":2023},{"type":428,"tag":497,"props":2106,"children":2107},{"style":540},[2108],{"type":433,"value":1372},{"type":428,"tag":497,"props":2110,"children":2111},{"style":534},[2112],{"type":433,"value":2023},{"type":428,"tag":497,"props":2114,"children":2115},{"style":607},[2116],{"type":433,"value":2117},">\u003C/",{"type":428,"tag":497,"props":2119,"children":2120},{"style":2004},[2121],{"type":433,"value":440},{"type":428,"tag":497,"props":2123,"children":2124},{"style":607},[2125],{"type":433,"value":2126},">\n",{"type":428,"tag":497,"props":2128,"children":2129},{"class":499,"line":564},[2130,2134,2138,2142,2146,2150,2154,2158,2163,2167,2171,2176,2180,2184,2188],{"type":428,"tag":497,"props":2131,"children":2132},{"style":607},[2133],{"type":433,"value":2001},{"type":428,"tag":497,"props":2135,"children":2136},{"style":2004},[2137],{"type":433,"value":440},{"type":428,"tag":497,"props":2139,"children":2140},{"style":2010},[2141],{"type":433,"value":2074},{"type":428,"tag":497,"props":2143,"children":2144},{"style":607},[2145],{"type":433,"value":2018},{"type":428,"tag":497,"props":2147,"children":2148},{"style":534},[2149],{"type":433,"value":2023},{"type":428,"tag":497,"props":2151,"children":2152},{"style":540},[2153],{"type":433,"value":2087},{"type":428,"tag":497,"props":2155,"children":2156},{"style":534},[2157],{"type":433,"value":2023},{"type":428,"tag":497,"props":2159,"children":2160},{"style":2010},[2161],{"type":433,"value":2162}," rel",{"type":428,"tag":497,"props":2164,"children":2165},{"style":607},[2166],{"type":433,"value":2018},{"type":428,"tag":497,"props":2168,"children":2169},{"style":534},[2170],{"type":433,"value":2023},{"type":428,"tag":497,"props":2172,"children":2173},{"style":540},[2174],{"type":433,"value":2175},"noreferrer",{"type":428,"tag":497,"props":2177,"children":2178},{"style":534},[2179],{"type":433,"value":2023},{"type":428,"tag":497,"props":2181,"children":2182},{"style":607},[2183],{"type":433,"value":2117},{"type":428,"tag":497,"props":2185,"children":2186},{"style":2004},[2187],{"type":433,"value":440},{"type":428,"tag":497,"props":2189,"children":2190},{"style":607},[2191],{"type":433,"value":2126},{"type":428,"tag":697,"props":2193,"children":2195},{"id":2194},"强制使用-https",[2196],{"type":433,"value":2197},"强制使用 HTTPS",{"type":428,"tag":429,"props":2199,"children":2200},{},[2201,2203,2209,2211,2222],{"type":433,"value":2202},"通过设置请求头的 ",{"type":428,"tag":493,"props":2204,"children":2206},{"className":2205},[],[2207],{"type":433,"value":2208},"Strict-Transport-Security（STS）",{"type":433,"value":2210},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":428,"tag":436,"props":2212,"children":2213},{},[2214],{"type":428,"tag":440,"props":2215,"children":2219},{"href":2216,"ariaDescribedBy":2217,"dataFootnoteRef":421,"id":2218},"#user-content-fn-timeend",[444],"user-content-fnref-timeend",[2220],{"type":433,"value":2221},"8",{"type":433,"value":1007},{"type":428,"tag":429,"props":2224,"children":2225},{},[2226,2228,2234,2236,2242,2244,2250,2252,2258,2260,2265],{"type":433,"value":2227},"这个规范本身很好理解，通过 ",{"type":428,"tag":493,"props":2229,"children":2231},{"className":2230},[],[2232],{"type":433,"value":2233},"max-age",{"type":433,"value":2235}," 可以指定倒计时时间；",{"type":428,"tag":493,"props":2237,"children":2239},{"className":2238},[],[2240],{"type":433,"value":2241},"includesSubDomains",{"type":433,"value":2243}," 指定子域的 ",{"type":428,"tag":493,"props":2245,"children":2247},{"className":2246},[],[2248],{"type":433,"value":2249},"HSTS",{"type":433,"value":2251},"；",{"type":428,"tag":493,"props":2253,"children":2255},{"className":2254},[],[2256],{"type":433,"value":2257},"preload",{"type":433,"value":2259}," 指定预加载内容的 ",{"type":428,"tag":493,"props":2261,"children":2263},{"className":2262},[],[2264],{"type":433,"value":2249},{"type":433,"value":1007},{"type":428,"tag":486,"props":2267,"children":2269},{"code":2268},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2270],{"type":428,"tag":493,"props":2271,"children":2272},{"__ignoreMap":421},[2273],{"type":433,"value":2268},{"type":428,"tag":486,"props":2275,"children":2277},{"code":2276,"language":489,"meta":421,"className":490,"style":421},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2278],{"type":428,"tag":493,"props":2279,"children":2280},{"__ignoreMap":421},[2281,2343,2370,2443,2506,2543,2550,2603,2643,2650,2682,2713,2761,2805,2816,2823],{"type":428,"tag":497,"props":2282,"children":2283},{"class":499,"line":500},[2284,2288,2293,2297,2302,2306,2312,2317,2322,2326,2331,2335,2339],{"type":428,"tag":497,"props":2285,"children":2286},{"style":504},[2287],{"type":433,"value":507},{"type":428,"tag":497,"props":2289,"children":2290},{"style":510},[2291],{"type":433,"value":2292}," DEFAULT_MAX_AGE",{"type":428,"tag":497,"props":2294,"children":2295},{"style":516},[2296],{"type":433,"value":519},{"type":428,"tag":497,"props":2298,"children":2299},{"style":522},[2300],{"type":433,"value":2301}," String",{"type":428,"tag":497,"props":2303,"children":2304},{"style":528},[2305],{"type":433,"value":531},{"type":428,"tag":497,"props":2307,"children":2309},{"style":2308},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2310],{"type":433,"value":2311},"180",{"type":428,"tag":497,"props":2313,"children":2314},{"style":516},[2315],{"type":433,"value":2316}," *",{"type":428,"tag":497,"props":2318,"children":2319},{"style":2308},[2320],{"type":433,"value":2321}," 24",{"type":428,"tag":497,"props":2323,"children":2324},{"style":516},[2325],{"type":433,"value":2316},{"type":428,"tag":497,"props":2327,"children":2328},{"style":2308},[2329],{"type":433,"value":2330}," 60",{"type":428,"tag":497,"props":2332,"children":2333},{"style":516},[2334],{"type":433,"value":2316},{"type":428,"tag":497,"props":2336,"children":2337},{"style":2308},[2338],{"type":433,"value":2330},{"type":428,"tag":497,"props":2340,"children":2341},{"style":528},[2342],{"type":433,"value":552},{"type":428,"tag":497,"props":2344,"children":2345},{"class":499,"line":555},[2346,2350,2354,2358,2362,2366],{"type":428,"tag":497,"props":2347,"children":2348},{"style":504},[2349],{"type":433,"value":1536},{"type":428,"tag":497,"props":2351,"children":2352},{"style":522},[2353],{"type":433,"value":1541},{"type":428,"tag":497,"props":2355,"children":2356},{"style":607},[2357],{"type":433,"value":531},{"type":428,"tag":497,"props":2359,"children":2360},{"style":1549},[2361],{"type":433,"value":1789},{"type":428,"tag":497,"props":2363,"children":2364},{"style":607},[2365],{"type":433,"value":1885},{"type":428,"tag":497,"props":2367,"children":2368},{"style":607},[2369],{"type":433,"value":1588},{"type":428,"tag":497,"props":2371,"children":2372},{"class":499,"line":564},[2373,2377,2382,2386,2390,2395,2400,2406,2410,2415,2420,2425,2429,2434,2438],{"type":428,"tag":497,"props":2374,"children":2375},{"style":504},[2376],{"type":433,"value":1597},{"type":428,"tag":497,"props":2378,"children":2379},{"style":510},[2380],{"type":433,"value":2381}," directives",{"type":428,"tag":497,"props":2383,"children":2384},{"style":516},[2385],{"type":433,"value":519},{"type":428,"tag":497,"props":2387,"children":2388},{"style":1641},[2389],{"type":433,"value":1561},{"type":428,"tag":497,"props":2391,"children":2392},{"style":534},[2393],{"type":433,"value":2394},"`",{"type":428,"tag":497,"props":2396,"children":2397},{"style":540},[2398],{"type":433,"value":2399},"max-age=",{"type":428,"tag":497,"props":2401,"children":2403},{"style":2402},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2404],{"type":433,"value":2405},"${",{"type":428,"tag":497,"props":2407,"children":2408},{"style":528},[2409],{"type":433,"value":1789},{"type":428,"tag":497,"props":2411,"children":2413},{"style":2412},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2414],{"type":433,"value":610},{"type":428,"tag":497,"props":2416,"children":2417},{"style":528},[2418],{"type":433,"value":2419},"maxAge",{"type":428,"tag":497,"props":2421,"children":2422},{"style":516},[2423],{"type":433,"value":2424}," ||",{"type":428,"tag":497,"props":2426,"children":2427},{"style":510},[2428],{"type":433,"value":2292},{"type":428,"tag":497,"props":2430,"children":2431},{"style":2402},[2432],{"type":433,"value":2433},"}",{"type":428,"tag":497,"props":2435,"children":2436},{"style":534},[2437],{"type":433,"value":2394},{"type":428,"tag":497,"props":2439,"children":2440},{"style":1641},[2441],{"type":433,"value":2442},"]\n",{"type":428,"tag":497,"props":2444,"children":2445},{"class":499,"line":590},[2446,2451,2456,2460,2464,2469,2473,2479,2483,2488,2492,2496,2501],{"type":428,"tag":497,"props":2447,"children":2448},{"style":1722},[2449],{"type":433,"value":2450},"  if",{"type":428,"tag":497,"props":2452,"children":2453},{"style":1641},[2454],{"type":433,"value":2455}," (",{"type":428,"tag":497,"props":2457,"children":2458},{"style":528},[2459],{"type":433,"value":1789},{"type":428,"tag":497,"props":2461,"children":2462},{"style":607},[2463],{"type":433,"value":610},{"type":428,"tag":497,"props":2465,"children":2466},{"style":528},[2467],{"type":433,"value":2468},"includeSubDomains",{"type":428,"tag":497,"props":2470,"children":2471},{"style":516},[2472],{"type":433,"value":1620},{"type":428,"tag":497,"props":2474,"children":2476},{"style":2475},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2477],{"type":433,"value":2478}," undefined",{"type":428,"tag":497,"props":2480,"children":2481},{"style":516},[2482],{"type":433,"value":2424},{"type":428,"tag":497,"props":2484,"children":2485},{"style":528},[2486],{"type":433,"value":2487}," options",{"type":428,"tag":497,"props":2489,"children":2490},{"style":607},[2491],{"type":433,"value":610},{"type":428,"tag":497,"props":2493,"children":2494},{"style":528},[2495],{"type":433,"value":2468},{"type":428,"tag":497,"props":2497,"children":2498},{"style":1641},[2499],{"type":433,"value":2500},") ",{"type":428,"tag":497,"props":2502,"children":2503},{"style":607},[2504],{"type":433,"value":2505},"{\n",{"type":428,"tag":497,"props":2507,"children":2508},{"class":499,"line":598},[2509,2514,2518,2523,2527,2531,2535,2539],{"type":428,"tag":497,"props":2510,"children":2511},{"style":528},[2512],{"type":433,"value":2513},"    directives",{"type":428,"tag":497,"props":2515,"children":2516},{"style":607},[2517],{"type":433,"value":610},{"type":428,"tag":497,"props":2519,"children":2520},{"style":522},[2521],{"type":433,"value":2522},"push",{"type":428,"tag":497,"props":2524,"children":2525},{"style":1641},[2526],{"type":433,"value":531},{"type":428,"tag":497,"props":2528,"children":2529},{"style":534},[2530],{"type":433,"value":537},{"type":428,"tag":497,"props":2532,"children":2533},{"style":540},[2534],{"type":433,"value":2468},{"type":428,"tag":497,"props":2536,"children":2537},{"style":534},[2538],{"type":433,"value":537},{"type":428,"tag":497,"props":2540,"children":2541},{"style":1641},[2542],{"type":433,"value":552},{"type":428,"tag":497,"props":2544,"children":2545},{"class":499,"line":1323},[2546],{"type":428,"tag":497,"props":2547,"children":2548},{"style":607},[2549],{"type":433,"value":1956},{"type":428,"tag":497,"props":2551,"children":2552},{"class":499,"line":1332},[2553,2558,2562,2566,2571,2575,2579,2583,2587,2591,2595,2599],{"type":428,"tag":497,"props":2554,"children":2555},{"style":528},[2556],{"type":433,"value":2557},"  options",{"type":428,"tag":497,"props":2559,"children":2560},{"style":607},[2561],{"type":433,"value":610},{"type":428,"tag":497,"props":2563,"children":2564},{"style":528},[2565],{"type":433,"value":2257},{"type":428,"tag":497,"props":2567,"children":2568},{"style":516},[2569],{"type":433,"value":2570}," &&",{"type":428,"tag":497,"props":2572,"children":2573},{"style":528},[2574],{"type":433,"value":2381},{"type":428,"tag":497,"props":2576,"children":2577},{"style":607},[2578],{"type":433,"value":610},{"type":428,"tag":497,"props":2580,"children":2581},{"style":522},[2582],{"type":433,"value":2522},{"type":428,"tag":497,"props":2584,"children":2585},{"style":1641},[2586],{"type":433,"value":531},{"type":428,"tag":497,"props":2588,"children":2589},{"style":534},[2590],{"type":433,"value":537},{"type":428,"tag":497,"props":2592,"children":2593},{"style":540},[2594],{"type":433,"value":2257},{"type":428,"tag":497,"props":2596,"children":2597},{"style":534},[2598],{"type":433,"value":537},{"type":428,"tag":497,"props":2600,"children":2601},{"style":1641},[2602],{"type":433,"value":552},{"type":428,"tag":497,"props":2604,"children":2605},{"class":499,"line":1353},[2606,2610,2614,2618,2622,2626,2630,2635,2639],{"type":428,"tag":497,"props":2607,"children":2608},{"style":1722},[2609],{"type":433,"value":1725},{"type":428,"tag":497,"props":2611,"children":2612},{"style":528},[2613],{"type":433,"value":2381},{"type":428,"tag":497,"props":2615,"children":2616},{"style":607},[2617],{"type":433,"value":610},{"type":428,"tag":497,"props":2619,"children":2620},{"style":522},[2621],{"type":433,"value":1738},{"type":428,"tag":497,"props":2623,"children":2624},{"style":1641},[2625],{"type":433,"value":531},{"type":428,"tag":497,"props":2627,"children":2628},{"style":534},[2629],{"type":433,"value":537},{"type":428,"tag":497,"props":2631,"children":2632},{"style":540},[2633],{"type":433,"value":2634},"; ",{"type":428,"tag":497,"props":2636,"children":2637},{"style":534},[2638],{"type":433,"value":537},{"type":428,"tag":497,"props":2640,"children":2641},{"style":1641},[2642],{"type":433,"value":552},{"type":428,"tag":497,"props":2644,"children":2645},{"class":499,"line":1362},[2646],{"type":428,"tag":497,"props":2647,"children":2648},{"style":607},[2649],{"type":433,"value":1767},{"type":428,"tag":497,"props":2651,"children":2652},{"class":499,"line":1383},[2653,2657,2662,2666,2670,2674,2678],{"type":428,"tag":497,"props":2654,"children":2655},{"style":504},[2656],{"type":433,"value":1536},{"type":428,"tag":497,"props":2658,"children":2659},{"style":522},[2660],{"type":433,"value":2661}," strictTransportSecurity",{"type":428,"tag":497,"props":2663,"children":2664},{"style":607},[2665],{"type":433,"value":531},{"type":428,"tag":497,"props":2667,"children":2668},{"style":1549},[2669],{"type":433,"value":1789},{"type":428,"tag":497,"props":2671,"children":2672},{"style":516},[2673],{"type":433,"value":519},{"type":428,"tag":497,"props":2675,"children":2676},{"style":607},[2677],{"type":433,"value":1798},{"type":428,"tag":497,"props":2679,"children":2680},{"style":607},[2681],{"type":433,"value":1588},{"type":428,"tag":497,"props":2683,"children":2684},{"class":499,"line":1392},[2685,2689,2693,2697,2701,2705,2709],{"type":428,"tag":497,"props":2686,"children":2687},{"style":504},[2688],{"type":433,"value":1597},{"type":428,"tag":497,"props":2690,"children":2691},{"style":510},[2692],{"type":433,"value":1815},{"type":428,"tag":497,"props":2694,"children":2695},{"style":516},[2696],{"type":433,"value":519},{"type":428,"tag":497,"props":2698,"children":2699},{"style":522},[2700],{"type":433,"value":1541},{"type":428,"tag":497,"props":2702,"children":2703},{"style":1641},[2704],{"type":433,"value":531},{"type":428,"tag":497,"props":2706,"children":2707},{"style":528},[2708],{"type":433,"value":1789},{"type":428,"tag":497,"props":2710,"children":2711},{"style":1641},[2712],{"type":433,"value":552},{"type":428,"tag":497,"props":2714,"children":2715},{"class":499,"line":1413},[2716,2720,2724,2729,2733,2737,2741,2745,2749,2753,2757],{"type":428,"tag":497,"props":2717,"children":2718},{"style":1722},[2719],{"type":433,"value":1725},{"type":428,"tag":497,"props":2721,"children":2722},{"style":504},[2723],{"type":433,"value":1848},{"type":428,"tag":497,"props":2725,"children":2726},{"style":522},[2727],{"type":433,"value":2728}," strictTransportSecurityMiddleware",{"type":428,"tag":497,"props":2730,"children":2731},{"style":607},[2732],{"type":433,"value":531},{"type":428,"tag":497,"props":2734,"children":2735},{"style":1549},[2736],{"type":433,"value":1862},{"type":428,"tag":497,"props":2738,"children":2739},{"style":607},[2740],{"type":433,"value":822},{"type":428,"tag":497,"props":2742,"children":2743},{"style":1549},[2744],{"type":433,"value":1871},{"type":428,"tag":497,"props":2746,"children":2747},{"style":607},[2748],{"type":433,"value":822},{"type":428,"tag":497,"props":2750,"children":2751},{"style":1549},[2752],{"type":433,"value":1880},{"type":428,"tag":497,"props":2754,"children":2755},{"style":607},[2756],{"type":433,"value":1885},{"type":428,"tag":497,"props":2758,"children":2759},{"style":607},[2760],{"type":433,"value":1588},{"type":428,"tag":497,"props":2762,"children":2763},{"class":499,"line":1422},[2764,2768,2772,2776,2780,2784,2789,2793,2797,2801],{"type":428,"tag":497,"props":2765,"children":2766},{"style":528},[2767],{"type":433,"value":1898},{"type":428,"tag":497,"props":2769,"children":2770},{"style":607},[2771],{"type":433,"value":610},{"type":428,"tag":497,"props":2773,"children":2774},{"style":522},[2775],{"type":433,"value":800},{"type":428,"tag":497,"props":2777,"children":2778},{"style":1641},[2779],{"type":433,"value":531},{"type":428,"tag":497,"props":2781,"children":2782},{"style":534},[2783],{"type":433,"value":537},{"type":428,"tag":497,"props":2785,"children":2786},{"style":540},[2787],{"type":433,"value":2788},"Strict-Transport-Security",{"type":428,"tag":497,"props":2790,"children":2791},{"style":534},[2792],{"type":433,"value":537},{"type":428,"tag":497,"props":2794,"children":2795},{"style":607},[2796],{"type":433,"value":822},{"type":428,"tag":497,"props":2798,"children":2799},{"style":528},[2800],{"type":433,"value":1815},{"type":428,"tag":497,"props":2802,"children":2803},{"style":1641},[2804],{"type":433,"value":552},{"type":428,"tag":497,"props":2806,"children":2807},{"class":499,"line":1443},[2808,2812],{"type":428,"tag":497,"props":2809,"children":2810},{"style":522},[2811],{"type":433,"value":1943},{"type":428,"tag":497,"props":2813,"children":2814},{"style":1641},[2815],{"type":433,"value":587},{"type":428,"tag":497,"props":2817,"children":2818},{"class":499,"line":1452},[2819],{"type":428,"tag":497,"props":2820,"children":2821},{"style":607},[2822],{"type":433,"value":1956},{"type":428,"tag":497,"props":2824,"children":2825},{"class":499,"line":1473},[2826],{"type":428,"tag":497,"props":2827,"children":2828},{"style":607},[2829],{"type":433,"value":1767},{"type":428,"tag":697,"props":2831,"children":2833},{"id":2832},"可选用证书透明性策略",[2834],{"type":433,"value":2832},{"type":428,"tag":486,"props":2836,"children":2838},{"code":2837,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('Expect-CT' /* someValue */)\n",[2839],{"type":428,"tag":493,"props":2840,"children":2841},{"__ignoreMap":421},[2842],{"type":428,"tag":497,"props":2843,"children":2844},{"class":499,"line":500},[2845,2849,2853,2857,2861,2865,2870,2874,2879],{"type":428,"tag":497,"props":2846,"children":2847},{"style":528},[2848],{"type":433,"value":717},{"type":428,"tag":497,"props":2850,"children":2851},{"style":607},[2852],{"type":433,"value":610},{"type":428,"tag":497,"props":2854,"children":2855},{"style":522},[2856],{"type":433,"value":800},{"type":428,"tag":497,"props":2858,"children":2859},{"style":528},[2860],{"type":433,"value":531},{"type":428,"tag":497,"props":2862,"children":2863},{"style":534},[2864],{"type":433,"value":537},{"type":428,"tag":497,"props":2866,"children":2867},{"style":540},[2868],{"type":433,"value":2869},"Expect-CT",{"type":428,"tag":497,"props":2871,"children":2872},{"style":534},[2873],{"type":433,"value":537},{"type":428,"tag":497,"props":2875,"children":2876},{"style":1267},[2877],{"type":433,"value":2878}," /* someValue */",{"type":428,"tag":497,"props":2880,"children":2881},{"style":528},[2882],{"type":433,"value":552},{"type":428,"tag":429,"props":2884,"children":2885},{},[2886,2891,2893,2904,2906,2917],{"type":428,"tag":493,"props":2887,"children":2889},{"className":2888},[],[2890],{"type":433,"value":2869},{"type":433,"value":2892}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":428,"tag":436,"props":2894,"children":2895},{},[2896],{"type":428,"tag":440,"props":2897,"children":2901},{"href":2898,"ariaDescribedBy":2899,"dataFootnoteRef":421,"id":2900},"#user-content-fn-chrome-ct",[444],"user-content-fnref-chrome-ct",[2902],{"type":433,"value":2903},"9",{"type":433,"value":2905},"），避免中间人攻击",{"type":428,"tag":436,"props":2907,"children":2908},{},[2909],{"type":428,"tag":440,"props":2910,"children":2914},{"href":2911,"ariaDescribedBy":2912,"dataFootnoteRef":421,"id":2913},"#user-content-fn-ct",[444],"user-content-fnref-ct",[2915],{"type":433,"value":2916},"10",{"type":433,"value":2918},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":428,"tag":486,"props":2920,"children":2922},{"code":2921},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2923],{"type":428,"tag":493,"props":2924,"children":2925},{"__ignoreMap":421},[2926],{"type":433,"value":2921},{"type":428,"tag":429,"props":2928,"children":2929},{},[2930,2932,2937],{"type":433,"value":2931},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":428,"tag":493,"props":2933,"children":2935},{"className":2934},[],[2936],{"type":433,"value":2869},{"type":433,"value":2938}," 就作不上用咯... TODO",{"type":428,"tag":697,"props":2940,"children":2942},{"id":2941},"拒绝来自-pdfflash-的跨域请求",[2943],{"type":433,"value":2944},"拒绝来自 PDF、Flash 的跨域请求",{"type":428,"tag":429,"props":2946,"children":2947},{},[2948,2954,2956,2967],{"type":428,"tag":493,"props":2949,"children":2951},{"className":2950},[],[2952],{"type":433,"value":2953},"X-Permitted-Cross-Domain-Policies",{"type":433,"value":2955}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":428,"tag":436,"props":2957,"children":2958},{},[2959],{"type":428,"tag":440,"props":2960,"children":2964},{"href":2961,"ariaDescribedBy":2962,"dataFootnoteRef":421,"id":2963},"#user-content-fn-pdf-reader",[444],"user-content-fnref-pdf-reader",[2965],{"type":433,"value":2966},"11",{"type":433,"value":2968},"：",{"type":428,"tag":429,"props":2970,"children":2971},{},[2972],{"type":428,"tag":1150,"props":2973,"children":2975},{"alt":2953,"src":2974},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":428,"tag":2977,"props":2978,"children":2979},"ol",{},[2980,2986],{"type":428,"tag":2981,"props":2982,"children":2983},"li",{},[2984],{"type":433,"value":2985},"用户在 A 网站打开了某个 PDF；",{"type":428,"tag":2981,"props":2987,"children":2988},{},[2989,2991,2997],{"type":433,"value":2990},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":428,"tag":493,"props":2992,"children":2994},{"className":2993},[],[2995],{"type":433,"value":2996},"crossdomain.xml",{"type":433,"value":2998}," 文件（策略文件）作为跨域策略应对方案。",{"type":428,"tag":429,"props":3000,"children":3001},{},[3002],{"type":433,"value":3003},"一个策略文件可能长这样：",{"type":428,"tag":486,"props":3005,"children":3007},{"code":3006,"language":1988,"meta":421,"className":1989,"style":421},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[3008],{"type":428,"tag":493,"props":3009,"children":3010},{"__ignoreMap":421},[3011,3019,3035,3074,3110,3146,3182,3218],{"type":428,"tag":497,"props":3012,"children":3013},{"class":499,"line":500},[3014],{"type":428,"tag":497,"props":3015,"children":3016},{"style":1267},[3017],{"type":433,"value":3018},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":428,"tag":497,"props":3020,"children":3021},{"class":499,"line":555},[3022,3026,3031],{"type":428,"tag":497,"props":3023,"children":3024},{"style":607},[3025],{"type":433,"value":2001},{"type":428,"tag":497,"props":3027,"children":3028},{"style":2004},[3029],{"type":433,"value":3030},"cross-domain-policy",{"type":428,"tag":497,"props":3032,"children":3033},{"style":607},[3034],{"type":433,"value":2126},{"type":428,"tag":497,"props":3036,"children":3037},{"class":499,"line":564},[3038,3043,3048,3053,3057,3061,3066,3070],{"type":428,"tag":497,"props":3039,"children":3040},{"style":607},[3041],{"type":433,"value":3042},"  \u003C",{"type":428,"tag":497,"props":3044,"children":3045},{"style":2004},[3046],{"type":433,"value":3047},"allow-access-from",{"type":428,"tag":497,"props":3049,"children":3050},{"style":2010},[3051],{"type":433,"value":3052}," domain",{"type":428,"tag":497,"props":3054,"children":3055},{"style":607},[3056],{"type":433,"value":2018},{"type":428,"tag":497,"props":3058,"children":3059},{"style":534},[3060],{"type":433,"value":2023},{"type":428,"tag":497,"props":3062,"children":3063},{"style":540},[3064],{"type":433,"value":3065},"*.taobao.com",{"type":428,"tag":497,"props":3067,"children":3068},{"style":534},[3069],{"type":433,"value":2023},{"type":428,"tag":497,"props":3071,"children":3072},{"style":607},[3073],{"type":433,"value":2058},{"type":428,"tag":497,"props":3075,"children":3076},{"class":499,"line":590},[3077,3081,3085,3089,3093,3097,3102,3106],{"type":428,"tag":497,"props":3078,"children":3079},{"style":607},[3080],{"type":433,"value":3042},{"type":428,"tag":497,"props":3082,"children":3083},{"style":2004},[3084],{"type":433,"value":3047},{"type":428,"tag":497,"props":3086,"children":3087},{"style":2010},[3088],{"type":433,"value":3052},{"type":428,"tag":497,"props":3090,"children":3091},{"style":607},[3092],{"type":433,"value":2018},{"type":428,"tag":497,"props":3094,"children":3095},{"style":534},[3096],{"type":433,"value":2023},{"type":428,"tag":497,"props":3098,"children":3099},{"style":540},[3100],{"type":433,"value":3101},"*.taobao.net",{"type":428,"tag":497,"props":3103,"children":3104},{"style":534},[3105],{"type":433,"value":2023},{"type":428,"tag":497,"props":3107,"children":3108},{"style":607},[3109],{"type":433,"value":2058},{"type":428,"tag":497,"props":3111,"children":3112},{"class":499,"line":598},[3113,3117,3121,3125,3129,3133,3138,3142],{"type":428,"tag":497,"props":3114,"children":3115},{"style":607},[3116],{"type":433,"value":3042},{"type":428,"tag":497,"props":3118,"children":3119},{"style":2004},[3120],{"type":433,"value":3047},{"type":428,"tag":497,"props":3122,"children":3123},{"style":2010},[3124],{"type":433,"value":3052},{"type":428,"tag":497,"props":3126,"children":3127},{"style":607},[3128],{"type":433,"value":2018},{"type":428,"tag":497,"props":3130,"children":3131},{"style":534},[3132],{"type":433,"value":2023},{"type":428,"tag":497,"props":3134,"children":3135},{"style":540},[3136],{"type":433,"value":3137},"*.taobaocdn.com",{"type":428,"tag":497,"props":3139,"children":3140},{"style":534},[3141],{"type":433,"value":2023},{"type":428,"tag":497,"props":3143,"children":3144},{"style":607},[3145],{"type":433,"value":2058},{"type":428,"tag":497,"props":3147,"children":3148},{"class":499,"line":1323},[3149,3153,3157,3161,3165,3169,3174,3178],{"type":428,"tag":497,"props":3150,"children":3151},{"style":607},[3152],{"type":433,"value":3042},{"type":428,"tag":497,"props":3154,"children":3155},{"style":2004},[3156],{"type":433,"value":3047},{"type":428,"tag":497,"props":3158,"children":3159},{"style":2010},[3160],{"type":433,"value":3052},{"type":428,"tag":497,"props":3162,"children":3163},{"style":607},[3164],{"type":433,"value":2018},{"type":428,"tag":497,"props":3166,"children":3167},{"style":534},[3168],{"type":433,"value":2023},{"type":428,"tag":497,"props":3170,"children":3171},{"style":540},[3172],{"type":433,"value":3173},"*.tbcdn.cn",{"type":428,"tag":497,"props":3175,"children":3176},{"style":534},[3177],{"type":433,"value":2023},{"type":428,"tag":497,"props":3179,"children":3180},{"style":607},[3181],{"type":433,"value":2058},{"type":428,"tag":497,"props":3183,"children":3184},{"class":499,"line":1332},[3185,3189,3193,3197,3201,3205,3210,3214],{"type":428,"tag":497,"props":3186,"children":3187},{"style":607},[3188],{"type":433,"value":3042},{"type":428,"tag":497,"props":3190,"children":3191},{"style":2004},[3192],{"type":433,"value":3047},{"type":428,"tag":497,"props":3194,"children":3195},{"style":2010},[3196],{"type":433,"value":3052},{"type":428,"tag":497,"props":3198,"children":3199},{"style":607},[3200],{"type":433,"value":2018},{"type":428,"tag":497,"props":3202,"children":3203},{"style":534},[3204],{"type":433,"value":2023},{"type":428,"tag":497,"props":3206,"children":3207},{"style":540},[3208],{"type":433,"value":3209},"*.alicdn.com",{"type":428,"tag":497,"props":3211,"children":3212},{"style":534},[3213],{"type":433,"value":2023},{"type":428,"tag":497,"props":3215,"children":3216},{"style":607},[3217],{"type":433,"value":2058},{"type":428,"tag":497,"props":3219,"children":3220},{"class":499,"line":1353},[3221,3226,3230],{"type":428,"tag":497,"props":3222,"children":3223},{"style":607},[3224],{"type":433,"value":3225},"\u003C/",{"type":428,"tag":497,"props":3227,"children":3228},{"style":2004},[3229],{"type":433,"value":3030},{"type":428,"tag":497,"props":3231,"children":3232},{"style":607},[3233],{"type":433,"value":2126},{"type":428,"tag":429,"props":3235,"children":3236},{},[3237,3239,3244,3246,3251],{"type":433,"value":3238},"其中，若请求响应头包含了 ",{"type":428,"tag":493,"props":3240,"children":3242},{"className":3241},[],[3243],{"type":433,"value":2953},{"type":433,"value":3245},"，便可指定浏览器针对 ",{"type":428,"tag":493,"props":3247,"children":3249},{"className":3248},[],[3250],{"type":433,"value":2996},{"type":433,"value":3252}," 的应对行为。",{"type":428,"tag":486,"props":3254,"children":3256},{"code":3255,"language":489,"meta":421,"className":490,"style":421},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3257],{"type":428,"tag":493,"props":3258,"children":3259},{"__ignoreMap":421},[3260,3288,3296,3316,3324,3344,3352,3372,3380,3397,3404,3449,3497,3540,3551,3558],{"type":428,"tag":497,"props":3261,"children":3262},{"class":499,"line":500},[3263,3267,3272,3276,3280,3284],{"type":428,"tag":497,"props":3264,"children":3265},{"style":504},[3266],{"type":433,"value":507},{"type":428,"tag":497,"props":3268,"children":3269},{"style":510},[3270],{"type":433,"value":3271}," ALLOWED_PERMITTED_POLICIES",{"type":428,"tag":497,"props":3273,"children":3274},{"style":516},[3275],{"type":433,"value":519},{"type":428,"tag":497,"props":3277,"children":3278},{"style":516},[3279],{"type":433,"value":1251},{"type":428,"tag":497,"props":3281,"children":3282},{"style":522},[3283],{"type":433,"value":1256},{"type":428,"tag":497,"props":3285,"children":3286},{"style":528},[3287],{"type":433,"value":1261},{"type":428,"tag":497,"props":3289,"children":3290},{"class":499,"line":555},[3291],{"type":428,"tag":497,"props":3292,"children":3293},{"style":1267},[3294],{"type":433,"value":3295},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":428,"tag":497,"props":3297,"children":3298},{"class":499,"line":564},[3299,3303,3308,3312],{"type":428,"tag":497,"props":3300,"children":3301},{"style":534},[3302],{"type":433,"value":1278},{"type":428,"tag":497,"props":3304,"children":3305},{"style":540},[3306],{"type":433,"value":3307},"master-only",{"type":428,"tag":497,"props":3309,"children":3310},{"style":534},[3311],{"type":433,"value":537},{"type":428,"tag":497,"props":3313,"children":3314},{"style":607},[3315],{"type":433,"value":1292},{"type":428,"tag":497,"props":3317,"children":3318},{"class":499,"line":590},[3319],{"type":428,"tag":497,"props":3320,"children":3321},{"style":1267},[3322],{"type":433,"value":3323},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":428,"tag":497,"props":3325,"children":3326},{"class":499,"line":598},[3327,3331,3336,3340],{"type":428,"tag":497,"props":3328,"children":3329},{"style":534},[3330],{"type":433,"value":1278},{"type":428,"tag":497,"props":3332,"children":3333},{"style":540},[3334],{"type":433,"value":3335},"by-content-type",{"type":428,"tag":497,"props":3337,"children":3338},{"style":534},[3339],{"type":433,"value":537},{"type":428,"tag":497,"props":3341,"children":3342},{"style":607},[3343],{"type":433,"value":1292},{"type":428,"tag":497,"props":3345,"children":3346},{"class":499,"line":1323},[3347],{"type":428,"tag":497,"props":3348,"children":3349},{"style":1267},[3350],{"type":433,"value":3351},"  // 不使用任何位置的 crossdomain.xml\n",{"type":428,"tag":497,"props":3353,"children":3354},{"class":499,"line":1332},[3355,3359,3364,3368],{"type":428,"tag":497,"props":3356,"children":3357},{"style":534},[3358],{"type":433,"value":1278},{"type":428,"tag":497,"props":3360,"children":3361},{"style":540},[3362],{"type":433,"value":3363},"none",{"type":428,"tag":497,"props":3365,"children":3366},{"style":534},[3367],{"type":433,"value":537},{"type":428,"tag":497,"props":3369,"children":3370},{"style":607},[3371],{"type":433,"value":1292},{"type":428,"tag":497,"props":3373,"children":3374},{"class":499,"line":1353},[3375],{"type":428,"tag":497,"props":3376,"children":3377},{"style":1267},[3378],{"type":433,"value":3379},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":428,"tag":497,"props":3381,"children":3382},{"class":499,"line":1362},[3383,3387,3392],{"type":428,"tag":497,"props":3384,"children":3385},{"style":534},[3386],{"type":433,"value":1278},{"type":428,"tag":497,"props":3388,"children":3389},{"style":540},[3390],{"type":433,"value":3391},"all",{"type":428,"tag":497,"props":3393,"children":3394},{"style":534},[3395],{"type":433,"value":3396},"'\n",{"type":428,"tag":497,"props":3398,"children":3399},{"class":499,"line":1383},[3400],{"type":428,"tag":497,"props":3401,"children":3402},{"style":528},[3403],{"type":433,"value":1527},{"type":428,"tag":497,"props":3405,"children":3406},{"class":499,"line":1392},[3407,3411,3416,3420,3425,3429,3433,3437,3441,3445],{"type":428,"tag":497,"props":3408,"children":3409},{"style":504},[3410],{"type":433,"value":1536},{"type":428,"tag":497,"props":3412,"children":3413},{"style":522},[3414],{"type":433,"value":3415}," xPermittedCrossDomainPolicies",{"type":428,"tag":497,"props":3417,"children":3418},{"style":607},[3419],{"type":433,"value":531},{"type":428,"tag":497,"props":3421,"children":3422},{"style":1549},[3423],{"type":433,"value":3424},"headerValue",{"type":428,"tag":497,"props":3426,"children":3427},{"style":516},[3428],{"type":433,"value":519},{"type":428,"tag":497,"props":3430,"children":3431},{"style":534},[3432],{"type":433,"value":827},{"type":428,"tag":497,"props":3434,"children":3435},{"style":540},[3436],{"type":433,"value":3363},{"type":428,"tag":497,"props":3438,"children":3439},{"style":534},[3440],{"type":433,"value":537},{"type":428,"tag":497,"props":3442,"children":3443},{"style":607},[3444],{"type":433,"value":1885},{"type":428,"tag":497,"props":3446,"children":3447},{"style":607},[3448],{"type":433,"value":1588},{"type":428,"tag":497,"props":3450,"children":3451},{"class":499,"line":1413},[3452,3456,3460,3465,3469,3473,3477,3481,3485,3489,3493],{"type":428,"tag":497,"props":3453,"children":3454},{"style":1722},[3455],{"type":433,"value":1725},{"type":428,"tag":497,"props":3457,"children":3458},{"style":504},[3459],{"type":433,"value":1848},{"type":428,"tag":497,"props":3461,"children":3462},{"style":522},[3463],{"type":433,"value":3464}," xPermittedCrossDomainPoliciesMiddleware",{"type":428,"tag":497,"props":3466,"children":3467},{"style":607},[3468],{"type":433,"value":531},{"type":428,"tag":497,"props":3470,"children":3471},{"style":1549},[3472],{"type":433,"value":1862},{"type":428,"tag":497,"props":3474,"children":3475},{"style":607},[3476],{"type":433,"value":822},{"type":428,"tag":497,"props":3478,"children":3479},{"style":1549},[3480],{"type":433,"value":1871},{"type":428,"tag":497,"props":3482,"children":3483},{"style":607},[3484],{"type":433,"value":822},{"type":428,"tag":497,"props":3486,"children":3487},{"style":1549},[3488],{"type":433,"value":1880},{"type":428,"tag":497,"props":3490,"children":3491},{"style":607},[3492],{"type":433,"value":1885},{"type":428,"tag":497,"props":3494,"children":3495},{"style":607},[3496],{"type":433,"value":1588},{"type":428,"tag":497,"props":3498,"children":3499},{"class":499,"line":1422},[3500,3504,3508,3512,3516,3520,3524,3528,3532,3536],{"type":428,"tag":497,"props":3501,"children":3502},{"style":528},[3503],{"type":433,"value":1898},{"type":428,"tag":497,"props":3505,"children":3506},{"style":607},[3507],{"type":433,"value":610},{"type":428,"tag":497,"props":3509,"children":3510},{"style":522},[3511],{"type":433,"value":800},{"type":428,"tag":497,"props":3513,"children":3514},{"style":1641},[3515],{"type":433,"value":531},{"type":428,"tag":497,"props":3517,"children":3518},{"style":534},[3519],{"type":433,"value":537},{"type":428,"tag":497,"props":3521,"children":3522},{"style":540},[3523],{"type":433,"value":2953},{"type":428,"tag":497,"props":3525,"children":3526},{"style":534},[3527],{"type":433,"value":537},{"type":428,"tag":497,"props":3529,"children":3530},{"style":607},[3531],{"type":433,"value":822},{"type":428,"tag":497,"props":3533,"children":3534},{"style":528},[3535],{"type":433,"value":1815},{"type":428,"tag":497,"props":3537,"children":3538},{"style":1641},[3539],{"type":433,"value":552},{"type":428,"tag":497,"props":3541,"children":3542},{"class":499,"line":1443},[3543,3547],{"type":428,"tag":497,"props":3544,"children":3545},{"style":522},[3546],{"type":433,"value":1943},{"type":428,"tag":497,"props":3548,"children":3549},{"style":1641},[3550],{"type":433,"value":587},{"type":428,"tag":497,"props":3552,"children":3553},{"class":499,"line":1452},[3554],{"type":428,"tag":497,"props":3555,"children":3556},{"style":607},[3557],{"type":433,"value":1956},{"type":428,"tag":497,"props":3559,"children":3560},{"class":499,"line":1473},[3561],{"type":428,"tag":497,"props":3562,"children":3563},{"style":607},[3564],{"type":433,"value":1767},{"type":428,"tag":429,"props":3566,"children":3567},{},[3568],{"type":433,"value":3569},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":428,"tag":697,"props":3571,"children":3573},{"id":3572},"开启-csp",[3574],{"type":433,"value":3575},"开启 CSP",{"type":428,"tag":429,"props":3577,"children":3578},{},[3579,3581,3586,3588,3593,3595,3600,3602,3613],{"type":433,"value":3580},"还记得刚才提到 Chrome 关闭了 ",{"type":428,"tag":493,"props":3582,"children":3584},{"className":3583},[],[3585],{"type":433,"value":950},{"type":433,"value":3587}," 吗？既然不再使用 ",{"type":428,"tag":493,"props":3589,"children":3591},{"className":3590},[],[3592],{"type":433,"value":950},{"type":433,"value":3594},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":428,"tag":493,"props":3596,"children":3598},{"className":3597},[],[3599],{"type":433,"value":978},{"type":433,"value":3601}," 标准",{"type":428,"tag":436,"props":3603,"children":3604},{},[3605],{"type":428,"tag":440,"props":3606,"children":3610},{"href":3607,"ariaDescribedBy":3608,"dataFootnoteRef":421,"id":3609},"#user-content-fn-csp-standard",[444],"user-content-fnref-csp-standard",[3611],{"type":433,"value":3612},"12",{"type":433,"value":3614},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":428,"tag":429,"props":3616,"children":3617},{},[3618,3623],{"type":428,"tag":493,"props":3619,"children":3621},{"className":3620},[],[3622],{"type":433,"value":978},{"type":433,"value":3624}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":428,"tag":486,"props":3626,"children":3628},{"code":3627,"language":1988,"meta":421,"className":1989,"style":421},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3629],{"type":428,"tag":493,"props":3630,"children":3631},{"__ignoreMap":421},[3632],{"type":428,"tag":497,"props":3633,"children":3634},{"class":499,"line":500},[3635,3639,3643,3648,3652,3656,3661,3665,3669,3673,3677,3682,3686],{"type":428,"tag":497,"props":3636,"children":3637},{"style":607},[3638],{"type":433,"value":2001},{"type":428,"tag":497,"props":3640,"children":3641},{"style":2004},[3642],{"type":433,"value":2007},{"type":428,"tag":497,"props":3644,"children":3645},{"style":2010},[3646],{"type":433,"value":3647}," http-equiv",{"type":428,"tag":497,"props":3649,"children":3650},{"style":607},[3651],{"type":433,"value":2018},{"type":428,"tag":497,"props":3653,"children":3654},{"style":534},[3655],{"type":433,"value":2023},{"type":428,"tag":497,"props":3657,"children":3658},{"style":540},[3659],{"type":433,"value":3660},"Content-Security-Policy",{"type":428,"tag":497,"props":3662,"children":3663},{"style":534},[3664],{"type":433,"value":2023},{"type":428,"tag":497,"props":3666,"children":3667},{"style":2010},[3668],{"type":433,"value":2037},{"type":428,"tag":497,"props":3670,"children":3671},{"style":607},[3672],{"type":433,"value":2018},{"type":428,"tag":497,"props":3674,"children":3675},{"style":534},[3676],{"type":433,"value":2023},{"type":428,"tag":497,"props":3678,"children":3679},{"style":540},[3680],{"type":433,"value":3681},"default-src 'self'; img-src https://*; child-src 'none';",{"type":428,"tag":497,"props":3683,"children":3684},{"style":534},[3685],{"type":433,"value":2023},{"type":428,"tag":497,"props":3687,"children":3688},{"style":607},[3689],{"type":433,"value":2058},{"type":428,"tag":429,"props":3691,"children":3692},{},[3693,3695,3700],{"type":433,"value":3694},"一个典型的 ",{"type":428,"tag":493,"props":3696,"children":3698},{"className":3697},[],[3699],{"type":433,"value":978},{"type":433,"value":3701}," 头如下：",{"type":428,"tag":486,"props":3703,"children":3705},{"code":3704},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3706],{"type":428,"tag":493,"props":3707,"children":3708},{"__ignoreMap":421},[3709],{"type":433,"value":3704},{"type":428,"tag":429,"props":3711,"children":3712},{},[3713],{"type":433,"value":3714},"大致来说，CSP 相关以下几种安全行为：",{"type":428,"tag":3716,"props":3717,"children":3718},"ul",{},[3719,3724,3729,3734],{"type":428,"tag":2981,"props":3720,"children":3721},{},[3722],{"type":433,"value":3723},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":428,"tag":2981,"props":3725,"children":3726},{},[3727],{"type":433,"value":3728},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":428,"tag":2981,"props":3730,"children":3731},{},[3732],{"type":433,"value":3733},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":428,"tag":2981,"props":3735,"children":3736},{},[3737,3739,3745],{"type":433,"value":3738},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":428,"tag":493,"props":3740,"children":3742},{"className":3741},[],[3743],{"type":433,"value":3744},"Content-Security-Policy-Report-Only",{"type":433,"value":3746}," Header。",{"type":428,"tag":429,"props":3748,"children":3749},{},[3750,3752,3757],{"type":433,"value":3751},"那么我们看看 Helmet 中默认配置的 ",{"type":428,"tag":493,"props":3753,"children":3755},{"className":3754},[],[3756],{"type":433,"value":978},{"type":433,"value":3758}," 策略：",{"type":428,"tag":486,"props":3760,"children":3762},{"code":3761,"language":489,"meta":421,"className":490,"style":421},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3763],{"type":428,"tag":493,"props":3764,"children":3765},{"__ignoreMap":421},[3766,3786,3794,3841,3849,3893,3901,3930,3938,4016,4024,4067,4075,4135,4143,4188,4196,4240,4248,4256,4264,4272,4321,4329,4407,4415,4423,4431,4456],{"type":428,"tag":497,"props":3767,"children":3768},{"class":499,"line":500},[3769,3773,3778,3782],{"type":428,"tag":497,"props":3770,"children":3771},{"style":504},[3772],{"type":433,"value":507},{"type":428,"tag":497,"props":3774,"children":3775},{"style":510},[3776],{"type":433,"value":3777}," DEFAULT_DIRECTIVES",{"type":428,"tag":497,"props":3779,"children":3780},{"style":516},[3781],{"type":433,"value":519},{"type":428,"tag":497,"props":3783,"children":3784},{"style":607},[3785],{"type":433,"value":1588},{"type":428,"tag":497,"props":3787,"children":3788},{"class":499,"line":555},[3789],{"type":428,"tag":497,"props":3790,"children":3791},{"style":1267},[3792],{"type":433,"value":3793},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":428,"tag":497,"props":3795,"children":3796},{"class":499,"line":564},[3797,3801,3807,3811,3815,3819,3823,3828,3832,3837],{"type":428,"tag":497,"props":3798,"children":3799},{"style":534},[3800],{"type":433,"value":1278},{"type":428,"tag":497,"props":3802,"children":3804},{"style":3803},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3805],{"type":433,"value":3806},"default-src",{"type":428,"tag":497,"props":3808,"children":3809},{"style":534},[3810],{"type":433,"value":537},{"type":428,"tag":497,"props":3812,"children":3813},{"style":607},[3814],{"type":433,"value":1657},{"type":428,"tag":497,"props":3816,"children":3817},{"style":528},[3818],{"type":433,"value":1561},{"type":428,"tag":497,"props":3820,"children":3821},{"style":534},[3822],{"type":433,"value":2023},{"type":428,"tag":497,"props":3824,"children":3825},{"style":540},[3826],{"type":433,"value":3827},"'self'",{"type":428,"tag":497,"props":3829,"children":3830},{"style":534},[3831],{"type":433,"value":2023},{"type":428,"tag":497,"props":3833,"children":3834},{"style":528},[3835],{"type":433,"value":3836},"]",{"type":428,"tag":497,"props":3838,"children":3839},{"style":607},[3840],{"type":433,"value":1292},{"type":428,"tag":497,"props":3842,"children":3843},{"class":499,"line":590},[3844],{"type":428,"tag":497,"props":3845,"children":3846},{"style":1267},[3847],{"type":433,"value":3848},"  // 限制 base 标签的 URI 为源地址\n",{"type":428,"tag":497,"props":3850,"children":3851},{"class":499,"line":598},[3852,3856,3861,3865,3869,3873,3877,3881,3885,3889],{"type":428,"tag":497,"props":3853,"children":3854},{"style":534},[3855],{"type":433,"value":1278},{"type":428,"tag":497,"props":3857,"children":3858},{"style":3803},[3859],{"type":433,"value":3860},"base-uri",{"type":428,"tag":497,"props":3862,"children":3863},{"style":534},[3864],{"type":433,"value":537},{"type":428,"tag":497,"props":3866,"children":3867},{"style":607},[3868],{"type":433,"value":1657},{"type":428,"tag":497,"props":3870,"children":3871},{"style":528},[3872],{"type":433,"value":1561},{"type":428,"tag":497,"props":3874,"children":3875},{"style":534},[3876],{"type":433,"value":2023},{"type":428,"tag":497,"props":3878,"children":3879},{"style":540},[3880],{"type":433,"value":3827},{"type":428,"tag":497,"props":3882,"children":3883},{"style":534},[3884],{"type":433,"value":2023},{"type":428,"tag":497,"props":3886,"children":3887},{"style":528},[3888],{"type":433,"value":3836},{"type":428,"tag":497,"props":3890,"children":3891},{"style":607},[3892],{"type":433,"value":1292},{"type":428,"tag":497,"props":3894,"children":3895},{"class":499,"line":1323},[3896],{"type":428,"tag":497,"props":3897,"children":3898},{"style":1267},[3899],{"type":433,"value":3900},"  // 禁止通过 HTTP 协议加载内容\n",{"type":428,"tag":497,"props":3902,"children":3903},{"class":499,"line":1332},[3904,3908,3913,3917,3921,3926],{"type":428,"tag":497,"props":3905,"children":3906},{"style":534},[3907],{"type":433,"value":1278},{"type":428,"tag":497,"props":3909,"children":3910},{"style":3803},[3911],{"type":433,"value":3912},"block-all-mixed-content",{"type":428,"tag":497,"props":3914,"children":3915},{"style":534},[3916],{"type":433,"value":537},{"type":428,"tag":497,"props":3918,"children":3919},{"style":607},[3920],{"type":433,"value":1657},{"type":428,"tag":497,"props":3922,"children":3923},{"style":528},[3924],{"type":433,"value":3925}," []",{"type":428,"tag":497,"props":3927,"children":3928},{"style":607},[3929],{"type":433,"value":1292},{"type":428,"tag":497,"props":3931,"children":3932},{"class":499,"line":1353},[3933],{"type":428,"tag":497,"props":3934,"children":3935},{"style":1267},[3936],{"type":433,"value":3937},"  // 限制字体加载地址\n",{"type":428,"tag":497,"props":3939,"children":3940},{"class":499,"line":1362},[3941,3945,3950,3954,3958,3962,3966,3970,3974,3978,3982,3987,3991,3995,3999,4004,4008,4012],{"type":428,"tag":497,"props":3942,"children":3943},{"style":534},[3944],{"type":433,"value":1278},{"type":428,"tag":497,"props":3946,"children":3947},{"style":3803},[3948],{"type":433,"value":3949},"font-src",{"type":428,"tag":497,"props":3951,"children":3952},{"style":534},[3953],{"type":433,"value":537},{"type":428,"tag":497,"props":3955,"children":3956},{"style":607},[3957],{"type":433,"value":1657},{"type":428,"tag":497,"props":3959,"children":3960},{"style":528},[3961],{"type":433,"value":1561},{"type":428,"tag":497,"props":3963,"children":3964},{"style":534},[3965],{"type":433,"value":2023},{"type":428,"tag":497,"props":3967,"children":3968},{"style":540},[3969],{"type":433,"value":3827},{"type":428,"tag":497,"props":3971,"children":3972},{"style":534},[3973],{"type":433,"value":2023},{"type":428,"tag":497,"props":3975,"children":3976},{"style":607},[3977],{"type":433,"value":822},{"type":428,"tag":497,"props":3979,"children":3980},{"style":534},[3981],{"type":433,"value":827},{"type":428,"tag":497,"props":3983,"children":3984},{"style":540},[3985],{"type":433,"value":3986},"https:",{"type":428,"tag":497,"props":3988,"children":3989},{"style":534},[3990],{"type":433,"value":537},{"type":428,"tag":497,"props":3992,"children":3993},{"style":607},[3994],{"type":433,"value":822},{"type":428,"tag":497,"props":3996,"children":3997},{"style":534},[3998],{"type":433,"value":827},{"type":428,"tag":497,"props":4000,"children":4001},{"style":540},[4002],{"type":433,"value":4003},"data:",{"type":428,"tag":497,"props":4005,"children":4006},{"style":534},[4007],{"type":433,"value":537},{"type":428,"tag":497,"props":4009,"children":4010},{"style":528},[4011],{"type":433,"value":3836},{"type":428,"tag":497,"props":4013,"children":4014},{"style":607},[4015],{"type":433,"value":1292},{"type":428,"tag":497,"props":4017,"children":4018},{"class":499,"line":1383},[4019],{"type":428,"tag":497,"props":4020,"children":4021},{"style":1267},[4022],{"type":433,"value":4023},"  // 限制嵌入的外部资源\n",{"type":428,"tag":497,"props":4025,"children":4026},{"class":499,"line":1392},[4027,4031,4035,4039,4043,4047,4051,4055,4059,4063],{"type":428,"tag":497,"props":4028,"children":4029},{"style":534},[4030],{"type":433,"value":1278},{"type":428,"tag":497,"props":4032,"children":4033},{"style":3803},[4034],{"type":433,"value":1172},{"type":428,"tag":497,"props":4036,"children":4037},{"style":534},[4038],{"type":433,"value":537},{"type":428,"tag":497,"props":4040,"children":4041},{"style":607},[4042],{"type":433,"value":1657},{"type":428,"tag":497,"props":4044,"children":4045},{"style":528},[4046],{"type":433,"value":1561},{"type":428,"tag":497,"props":4048,"children":4049},{"style":534},[4050],{"type":433,"value":2023},{"type":428,"tag":497,"props":4052,"children":4053},{"style":540},[4054],{"type":433,"value":3827},{"type":428,"tag":497,"props":4056,"children":4057},{"style":534},[4058],{"type":433,"value":2023},{"type":428,"tag":497,"props":4060,"children":4061},{"style":528},[4062],{"type":433,"value":3836},{"type":428,"tag":497,"props":4064,"children":4065},{"style":607},[4066],{"type":433,"value":1292},{"type":428,"tag":497,"props":4068,"children":4069},{"class":499,"line":1413},[4070],{"type":428,"tag":497,"props":4071,"children":4072},{"style":1267},[4073],{"type":433,"value":4074},"  // 限制图片加载地址\n",{"type":428,"tag":497,"props":4076,"children":4077},{"class":499,"line":1422},[4078,4082,4087,4091,4095,4099,4103,4107,4111,4115,4119,4123,4127,4131],{"type":428,"tag":497,"props":4079,"children":4080},{"style":534},[4081],{"type":433,"value":1278},{"type":428,"tag":497,"props":4083,"children":4084},{"style":3803},[4085],{"type":433,"value":4086},"img-src",{"type":428,"tag":497,"props":4088,"children":4089},{"style":534},[4090],{"type":433,"value":537},{"type":428,"tag":497,"props":4092,"children":4093},{"style":607},[4094],{"type":433,"value":1657},{"type":428,"tag":497,"props":4096,"children":4097},{"style":528},[4098],{"type":433,"value":1561},{"type":428,"tag":497,"props":4100,"children":4101},{"style":534},[4102],{"type":433,"value":2023},{"type":428,"tag":497,"props":4104,"children":4105},{"style":540},[4106],{"type":433,"value":3827},{"type":428,"tag":497,"props":4108,"children":4109},{"style":534},[4110],{"type":433,"value":2023},{"type":428,"tag":497,"props":4112,"children":4113},{"style":607},[4114],{"type":433,"value":822},{"type":428,"tag":497,"props":4116,"children":4117},{"style":534},[4118],{"type":433,"value":827},{"type":428,"tag":497,"props":4120,"children":4121},{"style":540},[4122],{"type":433,"value":4003},{"type":428,"tag":497,"props":4124,"children":4125},{"style":534},[4126],{"type":433,"value":537},{"type":428,"tag":497,"props":4128,"children":4129},{"style":528},[4130],{"type":433,"value":3836},{"type":428,"tag":497,"props":4132,"children":4133},{"style":607},[4134],{"type":433,"value":1292},{"type":428,"tag":497,"props":4136,"children":4137},{"class":499,"line":1443},[4138],{"type":428,"tag":497,"props":4139,"children":4140},{"style":1267},[4141],{"type":433,"value":4142},"  // 禁用 object 标签\n",{"type":428,"tag":497,"props":4144,"children":4145},{"class":499,"line":1452},[4146,4150,4155,4159,4163,4167,4171,4176,4180,4184],{"type":428,"tag":497,"props":4147,"children":4148},{"style":534},[4149],{"type":433,"value":1278},{"type":428,"tag":497,"props":4151,"children":4152},{"style":3803},[4153],{"type":433,"value":4154},"object-src",{"type":428,"tag":497,"props":4156,"children":4157},{"style":534},[4158],{"type":433,"value":537},{"type":428,"tag":497,"props":4160,"children":4161},{"style":607},[4162],{"type":433,"value":1657},{"type":428,"tag":497,"props":4164,"children":4165},{"style":528},[4166],{"type":433,"value":1561},{"type":428,"tag":497,"props":4168,"children":4169},{"style":534},[4170],{"type":433,"value":2023},{"type":428,"tag":497,"props":4172,"children":4173},{"style":540},[4174],{"type":433,"value":4175},"'none'",{"type":428,"tag":497,"props":4177,"children":4178},{"style":534},[4179],{"type":433,"value":2023},{"type":428,"tag":497,"props":4181,"children":4182},{"style":528},[4183],{"type":433,"value":3836},{"type":428,"tag":497,"props":4185,"children":4186},{"style":607},[4187],{"type":433,"value":1292},{"type":428,"tag":497,"props":4189,"children":4190},{"class":499,"line":1473},[4191],{"type":428,"tag":497,"props":4192,"children":4193},{"style":1267},[4194],{"type":433,"value":4195},"  // 只从源地址加载脚本\n",{"type":428,"tag":497,"props":4197,"children":4198},{"class":499,"line":1482},[4199,4203,4208,4212,4216,4220,4224,4228,4232,4236],{"type":428,"tag":497,"props":4200,"children":4201},{"style":534},[4202],{"type":433,"value":1278},{"type":428,"tag":497,"props":4204,"children":4205},{"style":3803},[4206],{"type":433,"value":4207},"script-src",{"type":428,"tag":497,"props":4209,"children":4210},{"style":534},[4211],{"type":433,"value":537},{"type":428,"tag":497,"props":4213,"children":4214},{"style":607},[4215],{"type":433,"value":1657},{"type":428,"tag":497,"props":4217,"children":4218},{"style":528},[4219],{"type":433,"value":1561},{"type":428,"tag":497,"props":4221,"children":4222},{"style":534},[4223],{"type":433,"value":2023},{"type":428,"tag":497,"props":4225,"children":4226},{"style":540},[4227],{"type":433,"value":3827},{"type":428,"tag":497,"props":4229,"children":4230},{"style":534},[4231],{"type":433,"value":2023},{"type":428,"tag":497,"props":4233,"children":4234},{"style":528},[4235],{"type":433,"value":3836},{"type":428,"tag":497,"props":4237,"children":4238},{"style":607},[4239],{"type":433,"value":1292},{"type":428,"tag":497,"props":4241,"children":4242},{"class":499,"line":1503},[4243],{"type":428,"tag":497,"props":4244,"children":4245},{"style":1267},[4246],{"type":433,"value":4247},"  // 禁用内联脚本\n",{"type":428,"tag":497,"props":4249,"children":4250},{"class":499,"line":1512},[4251],{"type":428,"tag":497,"props":4252,"children":4253},{"style":1267},[4254],{"type":433,"value":4255},"  // ？这里没能理解\n",{"type":428,"tag":497,"props":4257,"children":4258},{"class":499,"line":1521},[4259],{"type":428,"tag":497,"props":4260,"children":4261},{"style":1267},[4262],{"type":433,"value":4263},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":428,"tag":497,"props":4265,"children":4266},{"class":499,"line":1530},[4267],{"type":428,"tag":497,"props":4268,"children":4269},{"style":1267},[4270],{"type":433,"value":4271},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":428,"tag":497,"props":4273,"children":4274},{"class":499,"line":1591},[4275,4279,4284,4288,4292,4296,4300,4304,4308,4312,4316],{"type":428,"tag":497,"props":4276,"children":4277},{"style":534},[4278],{"type":433,"value":1278},{"type":428,"tag":497,"props":4280,"children":4281},{"style":3803},[4282],{"type":433,"value":4283},"script-src-attr",{"type":428,"tag":497,"props":4285,"children":4286},{"style":534},[4287],{"type":433,"value":537},{"type":428,"tag":497,"props":4289,"children":4290},{"style":607},[4291],{"type":433,"value":1657},{"type":428,"tag":497,"props":4293,"children":4294},{"style":528},[4295],{"type":433,"value":1561},{"type":428,"tag":497,"props":4297,"children":4298},{"style":534},[4299],{"type":433,"value":2023},{"type":428,"tag":497,"props":4301,"children":4302},{"style":540},[4303],{"type":433,"value":4175},{"type":428,"tag":497,"props":4305,"children":4306},{"style":534},[4307],{"type":433,"value":2023},{"type":428,"tag":497,"props":4309,"children":4310},{"style":528},[4311],{"type":433,"value":3836},{"type":428,"tag":497,"props":4313,"children":4314},{"style":607},[4315],{"type":433,"value":822},{"type":428,"tag":497,"props":4317,"children":4318},{"style":528},[4319],{"type":433,"value":4320},"‘\n",{"type":428,"tag":497,"props":4322,"children":4323},{"class":499,"line":1665},[4324],{"type":428,"tag":497,"props":4325,"children":4326},{"style":1267},[4327],{"type":433,"value":4328},"  // 限制样式表加载地址\n",{"type":428,"tag":497,"props":4330,"children":4331},{"class":499,"line":1696},[4332,4336,4341,4345,4349,4353,4357,4361,4365,4369,4373,4377,4381,4385,4390,4395,4399,4403],{"type":428,"tag":497,"props":4333,"children":4334},{"style":534},[4335],{"type":433,"value":1278},{"type":428,"tag":497,"props":4337,"children":4338},{"style":3803},[4339],{"type":433,"value":4340},"style-src",{"type":428,"tag":497,"props":4342,"children":4343},{"style":534},[4344],{"type":433,"value":537},{"type":428,"tag":497,"props":4346,"children":4347},{"style":607},[4348],{"type":433,"value":1657},{"type":428,"tag":497,"props":4350,"children":4351},{"style":528},[4352],{"type":433,"value":1561},{"type":428,"tag":497,"props":4354,"children":4355},{"style":534},[4356],{"type":433,"value":2023},{"type":428,"tag":497,"props":4358,"children":4359},{"style":540},[4360],{"type":433,"value":3827},{"type":428,"tag":497,"props":4362,"children":4363},{"style":534},[4364],{"type":433,"value":2023},{"type":428,"tag":497,"props":4366,"children":4367},{"style":607},[4368],{"type":433,"value":822},{"type":428,"tag":497,"props":4370,"children":4371},{"style":534},[4372],{"type":433,"value":827},{"type":428,"tag":497,"props":4374,"children":4375},{"style":540},[4376],{"type":433,"value":3986},{"type":428,"tag":497,"props":4378,"children":4379},{"style":534},[4380],{"type":433,"value":537},{"type":428,"tag":497,"props":4382,"children":4383},{"style":607},[4384],{"type":433,"value":822},{"type":428,"tag":497,"props":4386,"children":4387},{"style":534},[4388],{"type":433,"value":4389}," \"",{"type":428,"tag":497,"props":4391,"children":4392},{"style":540},[4393],{"type":433,"value":4394},"'unsafe-inline'",{"type":428,"tag":497,"props":4396,"children":4397},{"style":534},[4398],{"type":433,"value":2023},{"type":428,"tag":497,"props":4400,"children":4401},{"style":528},[4402],{"type":433,"value":3836},{"type":428,"tag":497,"props":4404,"children":4405},{"style":607},[4406],{"type":433,"value":1292},{"type":428,"tag":497,"props":4408,"children":4409},{"class":499,"line":1709},[4410],{"type":428,"tag":497,"props":4411,"children":4412},{"style":1267},[4413],{"type":433,"value":4414},"  // 不使用升级协议指令\n",{"type":428,"tag":497,"props":4416,"children":4417},{"class":499,"line":1718},[4418],{"type":428,"tag":497,"props":4419,"children":4420},{"style":1267},[4421],{"type":433,"value":4422},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":428,"tag":497,"props":4424,"children":4425},{"class":499,"line":1761},[4426],{"type":428,"tag":497,"props":4427,"children":4428},{"style":1267},[4429],{"type":433,"value":4430},"  // 所以默认不开启此指令\n",{"type":428,"tag":497,"props":4432,"children":4433},{"class":499,"line":1770},[4434,4438,4443,4447,4451],{"type":428,"tag":497,"props":4435,"children":4436},{"style":534},[4437],{"type":433,"value":1278},{"type":428,"tag":497,"props":4439,"children":4440},{"style":3803},[4441],{"type":433,"value":4442},"upgrade-insecure-requests",{"type":428,"tag":497,"props":4444,"children":4445},{"style":534},[4446],{"type":433,"value":537},{"type":428,"tag":497,"props":4448,"children":4449},{"style":607},[4450],{"type":433,"value":1657},{"type":428,"tag":497,"props":4452,"children":4453},{"style":528},[4454],{"type":433,"value":4455}," []\n",{"type":428,"tag":497,"props":4457,"children":4458},{"class":499,"line":1805},[4459],{"type":428,"tag":497,"props":4460,"children":4461},{"style":607},[4462],{"type":433,"value":1767},{"type":428,"tag":429,"props":4464,"children":4465},{},[4466,4468,4474,4476,4482],{"type":433,"value":4467},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":428,"tag":493,"props":4469,"children":4471},{"className":4470},[],[4472],{"type":433,"value":4473},"CSP 1.0",{"type":433,"value":4475}," 的兼容性，我没有找到最新版本规范（",{"type":428,"tag":493,"props":4477,"children":4479},{"className":4478},[],[4480],{"type":433,"value":4481},"CSP 3.0",{"type":433,"value":4483},"）的兼容性数据 😝。",{"type":428,"tag":429,"props":4485,"children":4486},{},[4487],{"type":428,"tag":1150,"props":4488,"children":4491},{"alt":4489,"src":4490},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":428,"tag":697,"props":4493,"children":4495},{"id":4494},"移除下载文件后的打开按钮",[4496],{"type":433,"value":4497},"移除下载文件后的“打开”按钮",{"type":428,"tag":486,"props":4499,"children":4501},{"code":4500,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('X-Download-Options', 'noopen')\n",[4502],{"type":428,"tag":493,"props":4503,"children":4504},{"__ignoreMap":421},[4505],{"type":428,"tag":497,"props":4506,"children":4507},{"class":499,"line":500},[4508,4512,4516,4520,4524,4528,4533,4537,4541,4545,4550,4554],{"type":428,"tag":497,"props":4509,"children":4510},{"style":528},[4511],{"type":433,"value":717},{"type":428,"tag":497,"props":4513,"children":4514},{"style":607},[4515],{"type":433,"value":610},{"type":428,"tag":497,"props":4517,"children":4518},{"style":522},[4519],{"type":433,"value":800},{"type":428,"tag":497,"props":4521,"children":4522},{"style":528},[4523],{"type":433,"value":531},{"type":428,"tag":497,"props":4525,"children":4526},{"style":534},[4527],{"type":433,"value":537},{"type":428,"tag":497,"props":4529,"children":4530},{"style":540},[4531],{"type":433,"value":4532},"X-Download-Options",{"type":428,"tag":497,"props":4534,"children":4535},{"style":534},[4536],{"type":433,"value":537},{"type":428,"tag":497,"props":4538,"children":4539},{"style":607},[4540],{"type":433,"value":822},{"type":428,"tag":497,"props":4542,"children":4543},{"style":534},[4544],{"type":433,"value":827},{"type":428,"tag":497,"props":4546,"children":4547},{"style":540},[4548],{"type":433,"value":4549},"noopen",{"type":428,"tag":497,"props":4551,"children":4552},{"style":534},[4553],{"type":433,"value":537},{"type":428,"tag":497,"props":4555,"children":4556},{"style":528},[4557],{"type":433,"value":552},{"type":428,"tag":429,"props":4559,"children":4560},{},[4561,4563,4568],{"type":433,"value":4562},"在下载文件时，",{"type":428,"tag":493,"props":4564,"children":4566},{"className":4565},[],[4567],{"type":433,"value":4532},{"type":433,"value":4569}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":428,"tag":697,"props":4571,"children":4573},{"id":4572},"开启-dns-预取",[4574],{"type":433,"value":4575},"开启 DNS 预取",{"type":428,"tag":429,"props":4577,"children":4578},{},[4579,4581,4587],{"type":433,"value":4580},"通过设置 ",{"type":428,"tag":493,"props":4582,"children":4584},{"className":4583},[],[4585],{"type":433,"value":4586},"X-DNS-Prefetch-Control",{"type":433,"value":4588}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":428,"tag":429,"props":4590,"children":4591},{},[4592,4594,4601],{"type":433,"value":4593},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":428,"tag":440,"props":4595,"children":4598},{"href":4596,"rel":4597},"https://github.com/helmetjs/helmet/issues/111",[1017],[4599],{"type":433,"value":4600},"Issue",{"type":433,"value":1007},{"type":428,"tag":486,"props":4603,"children":4605},{"code":4604,"language":489,"meta":421,"className":490,"style":421},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4606],{"type":428,"tag":493,"props":4607,"children":4608},{"__ignoreMap":421},[4609],{"type":428,"tag":497,"props":4610,"children":4611},{"class":499,"line":500},[4612,4616,4620,4624,4628,4632,4636,4640,4644,4648,4653,4657],{"type":428,"tag":497,"props":4613,"children":4614},{"style":528},[4615],{"type":433,"value":717},{"type":428,"tag":497,"props":4617,"children":4618},{"style":607},[4619],{"type":433,"value":610},{"type":428,"tag":497,"props":4621,"children":4622},{"style":522},[4623],{"type":433,"value":800},{"type":428,"tag":497,"props":4625,"children":4626},{"style":528},[4627],{"type":433,"value":531},{"type":428,"tag":497,"props":4629,"children":4630},{"style":534},[4631],{"type":433,"value":537},{"type":428,"tag":497,"props":4633,"children":4634},{"style":540},[4635],{"type":433,"value":4586},{"type":428,"tag":497,"props":4637,"children":4638},{"style":534},[4639],{"type":433,"value":537},{"type":428,"tag":497,"props":4641,"children":4642},{"style":607},[4643],{"type":433,"value":822},{"type":428,"tag":497,"props":4645,"children":4646},{"style":534},[4647],{"type":433,"value":827},{"type":428,"tag":497,"props":4649,"children":4650},{"style":540},[4651],{"type":433,"value":4652},"on",{"type":428,"tag":497,"props":4654,"children":4655},{"style":534},[4656],{"type":433,"value":537},{"type":428,"tag":497,"props":4658,"children":4659},{"style":528},[4660],{"type":433,"value":552},{"type":428,"tag":666,"props":4662,"children":4664},{"id":4663},"阅读更多",[4665],{"type":433,"value":4663},{"type":428,"tag":429,"props":4667,"children":4668},{},[4669],{"type":433,"value":4670},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":428,"tag":3716,"props":4672,"children":4673},{},[4674],{"type":428,"tag":2981,"props":4675,"children":4676},{},[4677,4679],{"type":433,"value":4678},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":428,"tag":436,"props":4680,"children":4681},{},[4682],{"type":428,"tag":440,"props":4683,"children":4687},{"href":4684,"ariaDescribedBy":4685,"dataFootnoteRef":421,"id":4686},"#user-content-fn-secure-cookie",[444],"user-content-fnref-secure-cookie",[4688],{"type":433,"value":4689},"13",{"type":428,"tag":429,"props":4691,"children":4692},{},[4693,4695,4702,4704,4711],{"type":433,"value":4694},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":428,"tag":440,"props":4696,"children":4699},{"href":4697,"rel":4698},"https://owasp.org/www-project-secure-headers/",[1017],[4700],{"type":433,"value":4701},"OWASP Secure Headers Project",{"type":433,"value":4703},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":428,"tag":440,"props":4705,"children":4708},{"href":4706,"rel":4707},"https://infosec.mozilla.org/guidelines/web_security",[1017],[4709],{"type":433,"value":4710},"Web Security",{"type":433,"value":4712},"。以下是一些额外的可供探索的页面：",{"type":428,"tag":3716,"props":4714,"children":4715},{},[4716,4726,4736],{"type":428,"tag":2981,"props":4717,"children":4718},{},[4719],{"type":428,"tag":440,"props":4720,"children":4723},{"href":4721,"rel":4722},"https://www.zhihu.com/question/21979782",[1017],[4724],{"type":433,"value":4725},"Content Security Policy (CSP) 是什么？",{"type":428,"tag":2981,"props":4727,"children":4728},{},[4729],{"type":428,"tag":440,"props":4730,"children":4733},{"href":4731,"rel":4732},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[1017],[4734],{"type":433,"value":4735},"CORS@MDN",{"type":428,"tag":2981,"props":4737,"children":4738},{},[4739],{"type":428,"tag":440,"props":4740,"children":4743},{"href":4741,"rel":4742},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[1017],[4744],{"type":433,"value":4745},"OWASP Top 10 2017（RC2）",{"type":428,"tag":4747,"props":4748,"children":4751},"section",{"className":4749,"dataFootnotes":421},[4750],"footnotes",[4752,4759],{"type":428,"tag":666,"props":4753,"children":4756},{"className":4754,"id":444},[4755],"sr-only",[4757],{"type":433,"value":4758},"Footnotes",{"type":428,"tag":2977,"props":4760,"children":4761},{},[4762,4784,4803,4822,4839,4858,4877,4890,4908,4927,4946,4965,4984],{"type":428,"tag":2981,"props":4763,"children":4765},{"id":4764},"user-content-fn-helmet",[4766,4773,4775],{"type":428,"tag":440,"props":4767,"children":4770},{"href":4768,"rel":4769},"https://helmetjs.github.io/",[1017],[4771],{"type":433,"value":4772},"HELMET",{"type":433,"value":4774}," ",{"type":428,"tag":440,"props":4776,"children":4781},{"href":4777,"ariaLabel":4778,"className":4779,"dataFootnoteBackref":421},"#user-content-fnref-helmet","Back to reference 1",[4780],"data-footnote-backref",[4782],{"type":433,"value":4783},"↩",{"type":428,"tag":2981,"props":4785,"children":4787},{"id":4786},"user-content-fn-dns-rebinding-1",[4788,4795,4796],{"type":428,"tag":440,"props":4789,"children":4792},{"href":4790,"rel":4791},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[1017],[4793],{"type":433,"value":4794},"来自微信外挂的安全风险",{"type":433,"value":4774},{"type":428,"tag":440,"props":4797,"children":4801},{"href":4798,"ariaLabel":4799,"className":4800,"dataFootnoteBackref":421},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4780],[4802],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4804,"children":4806},{"id":4805},"user-content-fn-dns-rebinding-2",[4807,4814,4815],{"type":428,"tag":440,"props":4808,"children":4811},{"href":4809,"rel":4810},"https://github.com/helmetjs/helmet/issues/182",[1017],[4812],{"type":433,"value":4813},"GitHub Issue",{"type":433,"value":4774},{"type":428,"tag":440,"props":4816,"children":4820},{"href":4817,"ariaLabel":4818,"className":4819,"dataFootnoteBackref":421},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4780],[4821],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4823,"children":4825},{"id":4824},"user-content-fn-shp",[4826,4831,4832],{"type":428,"tag":440,"props":4827,"children":4829},{"href":4697,"rel":4828},[1017],[4830],{"type":433,"value":4701},{"type":433,"value":4774},{"type":428,"tag":440,"props":4833,"children":4837},{"href":4834,"ariaLabel":4835,"className":4836,"dataFootnoteBackref":421},"#user-content-fnref-shp","Back to reference 4",[4780],[4838],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4840,"children":4842},{"id":4841},"user-content-fn-xss-auditor",[4843,4850,4851],{"type":428,"tag":440,"props":4844,"children":4847},{"href":4845,"rel":4846},"https://www.chromestatus.com/feature/5021976655560704",[1017],[4848],{"type":433,"value":4849},"XSS Auditor (removed)",{"type":433,"value":4774},{"type":428,"tag":440,"props":4852,"children":4856},{"href":4853,"ariaLabel":4854,"className":4855,"dataFootnoteBackref":421},"#user-content-fnref-xss-auditor","Back to reference 5",[4780],[4857],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4859,"children":4861},{"id":4860},"user-content-fn-delete-xss-auditor",[4862,4869,4870],{"type":428,"tag":440,"props":4863,"children":4866},{"href":4864,"rel":4865},"https://zhuanlan.zhihu.com/p/74288648",[1017],[4867],{"type":433,"value":4868},"Google 将删除 Chrome 内置的 XSS 保护",{"type":433,"value":4774},{"type":428,"tag":440,"props":4871,"children":4875},{"href":4872,"ariaLabel":4873,"className":4874,"dataFootnoteBackref":421},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4780],[4876],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4878,"children":4880},{"id":4879},"user-content-fn-referer",[4881,4883],{"type":433,"value":4882},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":428,"tag":440,"props":4884,"children":4888},{"href":4885,"ariaLabel":4886,"className":4887,"dataFootnoteBackref":421},"#user-content-fnref-referer","Back to reference 7",[4780],[4889],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4891,"children":4893},{"id":4892},"user-content-fn-timeend",[4894,4900,4901],{"type":428,"tag":440,"props":4895,"children":4898},{"href":4896,"rel":4897},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[1017],[4899],{"type":433,"value":2788},{"type":433,"value":4774},{"type":428,"tag":440,"props":4902,"children":4906},{"href":4903,"ariaLabel":4904,"className":4905,"dataFootnoteBackref":421},"#user-content-fnref-timeend","Back to reference 8",[4780],[4907],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4909,"children":4911},{"id":4910},"user-content-fn-chrome-ct",[4912,4919,4920],{"type":428,"tag":440,"props":4913,"children":4916},{"href":4914,"rel":4915},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[1017],[4917],{"type":433,"value":4918},"Chrome 证书透明度（CT）相关政策",{"type":433,"value":4774},{"type":428,"tag":440,"props":4921,"children":4925},{"href":4922,"ariaLabel":4923,"className":4924,"dataFootnoteBackref":421},"#user-content-fnref-chrome-ct","Back to reference 9",[4780],[4926],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4928,"children":4930},{"id":4929},"user-content-fn-ct",[4931,4938,4939],{"type":428,"tag":440,"props":4932,"children":4935},{"href":4933,"rel":4934},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[1017],[4936],{"type":433,"value":4937},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":433,"value":4774},{"type":428,"tag":440,"props":4940,"children":4944},{"href":4941,"ariaLabel":4942,"className":4943,"dataFootnoteBackref":421},"#user-content-fnref-ct","Back to reference 10",[4780],[4945],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4947,"children":4949},{"id":4948},"user-content-fn-pdf-reader",[4950,4957,4958],{"type":428,"tag":440,"props":4951,"children":4954},{"href":4952,"rel":4953},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[1017],[4955],{"type":433,"value":4956},"Cross Domain Configuration",{"type":433,"value":4774},{"type":428,"tag":440,"props":4959,"children":4963},{"href":4960,"ariaLabel":4961,"className":4962,"dataFootnoteBackref":421},"#user-content-fnref-pdf-reader","Back to reference 11",[4780],[4964],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4966,"children":4968},{"id":4967},"user-content-fn-csp-standard",[4969,4976,4977],{"type":428,"tag":440,"props":4970,"children":4973},{"href":4971,"rel":4972},"https://www.w3.org/TR/CSP/",[1017],[4974],{"type":433,"value":4975},"Content Security Policy Level 3",{"type":433,"value":4774},{"type":428,"tag":440,"props":4978,"children":4982},{"href":4979,"ariaLabel":4980,"className":4981,"dataFootnoteBackref":421},"#user-content-fnref-csp-standard","Back to reference 12",[4780],[4983],{"type":433,"value":4783},{"type":428,"tag":2981,"props":4985,"children":4987},{"id":4986},"user-content-fn-secure-cookie",[4988,4995,4996],{"type":428,"tag":440,"props":4989,"children":4992},{"href":4990,"rel":4991},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[1017],[4993],{"type":433,"value":4994},"Secure-Cookie",{"type":433,"value":4774},{"type":428,"tag":440,"props":4997,"children":5001},{"href":4998,"ariaLabel":4999,"className":5000,"dataFootnoteBackref":421},"#user-content-fnref-secure-cookie","Back to reference 13",[4780],[5002],{"type":433,"value":4783},{"type":428,"tag":5004,"props":5005,"children":5006},"style",{},[5007],{"type":433,"value":5008},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":421,"searchDepth":555,"depth":555,"links":5010},[5011,5024,5025],{"id":668,"depth":555,"text":671,"children":5012},[5013,5014,5015,5016,5017,5018,5019,5020,5021,5022,5023],{"id":699,"depth":564,"text":702},{"id":774,"depth":564,"text":777},{"id":864,"depth":564,"text":867},{"id":1024,"depth":564,"text":1024},{"id":1183,"depth":564,"text":1186},{"id":2194,"depth":564,"text":2197},{"id":2832,"depth":564,"text":2832},{"id":2941,"depth":564,"text":2944},{"id":3572,"depth":564,"text":3575},{"id":4494,"depth":564,"text":4497},{"id":4572,"depth":564,"text":4575},{"id":4663,"depth":555,"text":4663},{"id":444,"depth":555,"text":4758},"markdown","content:_archieved:2020-08:helmet-and-security.md","content","_archieved/2020-08/helmet-and-security.md","_archieved/2020-08/helmet-and-security","md",[5033,5037],{"_path":5034,"title":5035,"description":5036},"/_archieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5038,"title":5039,"description":421},"/_archieved/2020-10/noname","无题",1739578920078]