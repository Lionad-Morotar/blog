[{"data":1,"prerenderedAt":5009},["Reactive",2],{"navigation":3,"/_archieved/2020-08/helmet-and-security":386,"/_archieved/2020-08/helmet-and-security-surround":5001},[4,32,80,96,123,129,135,369,375,381],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":42,"_path":43},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":45,"_path":46},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":48,"_path":49},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":51,"_path":52},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":54,"_path":55},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":57,"_path":58},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":60,"_path":61},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":63,"_path":64},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":66,"_path":67},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":69,"_path":70},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":72,"_path":73},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":75,"_path":76},"🚝 四十二篇系列","/articles/fourty-two",{"title":78,"_path":79},"📝 技术博客归档","/articles/fold",{"title":81,"_path":82,"children":83},"造物 / Make","/tools",[84,87,90,93],{"title":85,"_path":86},"🌐 AnySort","/tools/anysort",{"title":88,"_path":89},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":91,"_path":92},"👓 Crapto","/tools/crypto-inline",{"title":94,"_path":95},"🖨️ any-to-base64","/tools/any-to-base64",{"title":97,"_path":98,"children":99},"吉他剧场 / Music","/music",[100,102,105,108,111,114,117,120],{"title":101,"_path":98},"🎸 FingerStyle！",{"title":103,"_path":104},"🌬️ 等待的风","/music/wind",{"title":106,"_path":107},"💕 约定的海洋","/music/ocean",{"title":109,"_path":110},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":112,"_path":113},"🌏 残酷天使的行动纲领","/music/eva",{"title":115,"_path":116},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":118,"_path":119},"🍷 Wu Wei","/music/wu-wei",{"title":121,"_path":122},"🌅 无题","/music/untitled",{"title":124,"_path":125,"children":126},"画点什么 / Paint","/paint",[127],{"title":128,"_path":125},"🚧 正在施工",{"title":130,"_path":131,"children":132},"知识地图 / Maps","/maps",[133],{"title":134,"_path":131},"🏁 知识地图",{"title":136,"_path":137,"children":138},"零散的笔记 / Gists","/gists",[139,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366],{"title":140,"_path":137},"🧊 Gists",{"title":142,"_path":143},"网站的可访问性","/gists/accessibility",{"title":145,"_path":146},"Bit","/gists/bit",{"title":148,"_path":149},"图片模糊","/gists/blur",{"title":151,"_path":152},"渲染相关笔记","/gists/c4d",{"title":154,"_path":155},"CDN 问题记录","/gists/cdn",{"title":157,"_path":158},"消毒剂","/gists/cleaner",{"title":160,"_path":161},"Windows Command","/gists/cmd",{"title":163,"_path":164},"Command","/gists/command",{"title":166,"_path":167},"复杂科学","/gists/complexity-science",{"title":169,"_path":170},"宇宙","/gists/cosmos",{"title":172,"_path":173},"C++","/gists/cpp",{"title":175,"_path":176},"Data Structure","/gists/data-structure",{"title":178,"_path":179},"DEPRESSION","/gists/depression",{"title":181,"_path":182},"设计模式","/gists/design-patterns",{"title":184,"_path":185},"Developer Experience","/gists/developer-experience",{"title":187,"_path":188},"Device Metrics","/gists/device-metrix",{"title":190,"_path":191},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":193,"_path":194},"正则表达式","/gists/eegex",{"title":196,"_path":197},"Emoji","/gists/emoji",{"title":199,"_path":200},"工程","/gists/engineering",{"title":202,"_path":203},"熵","/gists/entropy",{"title":205,"_path":206},"Environment","/gists/environment",{"title":208,"_path":209},"Erlang","/gists/erlang",{"title":211,"_path":212},"逃离塔克夫","/gists/escape-from-tarkov",{"title":214,"_path":215},"ESNext (ES6-ES11)","/gists/esnext",{"title":217,"_path":218},"Eval！","/gists/eval",{"title":220,"_path":221},"Flutter","/gists/flutter",{"title":223,"_path":224},"字体","/gists/font",{"title":226,"_path":227},"JS 函数式编程","/gists/functional",{"title":229,"_path":230},"Google C++ Standard","/gists/google-cpp-standard",{"title":232,"_path":233},"双向链接完全体","/gists/graph",{"title":235,"_path":236},"Hardwares","/gists/hardwares",{"title":238,"_path":239},"哈希冲突","/gists/hash-collision",{"title":241,"_path":242},"信息设计","/gists/information-design",{"title":244,"_path":245},"InstantPage","/gists/instant.page",{"title":247,"_path":248},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":250,"_path":251},"KVStore","/gists/key-value-db",{"title":253,"_path":254},"Kubernetes","/gists/kubernetes",{"title":256,"_path":257},"Makefile","/gists/makefile",{"title":259,"_path":260},"Markdown Inline Style","/gists/markdown-nice",{"title":262,"_path":263},"小程序","/gists/miniapp",{"title":265,"_path":266},"减小页面快照体积","/gists/minify-html",{"title":268,"_path":269},"mklink","/gists/mklink",{"title":271,"_path":272},"Mock","/gists/mock",{"title":274,"_path":275},"多端应用","/gists/multy-end-app",{"title":277,"_path":278},"神经科学","/gists/neuroscience",{"title":280,"_path":281},"OO","/gists/oo",{"title":283,"_path":284},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":286,"_path":287},"人物","/gists/person",{"title":289,"_path":290},"PInvoke","/gists/pinvoke",{"title":292,"_path":293},"像素","/gists/pixel",{"title":295,"_path":296},"PowerShell","/gists/powershell",{"title":298,"_path":299},"量子","/gists/quantum",{"title":301,"_path":302},"保持好奇心","/gists/questions",{"title":304,"_path":305},"React Native","/gists/react-native",{"title":307,"_path":308},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":310,"_path":311},"SEO","/gists/seo",{"title":313,"_path":314},"Shader","/gists/shader",{"title":316,"_path":317},"Shape Up","/gists/shape-up",{"title":319,"_path":320},"睡觉","/gists/sleep",{"title":322,"_path":323},"States","/gists/states",{"title":325,"_path":326},"Storage","/gists/storage",{"title":328,"_path":329},"音视频流处理","/gists/stream-cli",{"title":331,"_path":332},"Symbol","/gists/symbol",{"title":334,"_path":335},"系统论","/gists/systems-theory",{"title":337,"_path":338},"Taro","/gists/taro",{"title":340,"_path":341},"任务切片","/gists/task-slice",{"title":343,"_path":344},"技术偏好","/gists/tech-dudge",{"title":346,"_path":347},"Untitled","/gists/untitled",{"title":349,"_path":350},"可变字体","/gists/variable-font",{"title":352,"_path":353},"视觉错觉","/gists/visual-illusion",{"title":355,"_path":356},"SS(SSR)","/gists/vpn",{"title":358,"_path":359},"VS Code 插件开发","/gists/vscode-plugin",{"title":361,"_path":362},"Web Components","/gists/web-components",{"title":364,"_path":365},"Windows","/gists/windows",{"title":367,"_path":368},"查缺补漏","/gists/wrong",{"title":370,"_path":371,"children":372},"代码笔记 / Gists","/source-code",[373],{"title":374,"_path":371},"🚄 代码笔记",{"title":376,"_path":377,"children":378},"我 / Abount","/hire",[379],{"title":380,"_path":377},"📬 技术简历",{"title":382,"_path":383,"children":384},"todo","/todo",[385],{"title":382,"_path":383},{"_path":387,"_dir":388,"_draft":389,"_partial":390,"_locale":391,"title":392,"description":393,"body":394,"_type":4996,"_id":4997,"_source":4998,"_file":4999,"_extension":5000},"/_archieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":395,"children":396,"toc":4979},"root",[397,419,450,455,617,622,630,635,642,666,673,718,730,742,748,811,832,838,898,910,978,992,997,1057,1082,1116,1125,1151,1157,1194,1935,1955,2162,2168,2193,2236,2244,2800,2805,2853,2889,2897,2909,2915,2939,2946,2969,2974,3204,3223,3535,3540,3546,3585,3595,3660,3672,3680,3685,3717,3729,4433,4454,4462,4468,4528,4540,4546,4559,4572,4631,4636,4641,4660,4683,4716,4973],{"type":398,"tag":399,"props":400,"children":401},"element","p",{},[402,405],{"type":403,"value":404},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":398,"tag":406,"props":407,"children":408},"sup",{},[409],{"type":398,"tag":410,"props":411,"children":416},"a",{"href":412,"ariaDescribedBy":413,"dataFootnoteRef":391,"id":415},"#user-content-fn-helmet",[414],"footnote-label","user-content-fnref-helmet",[417],{"type":403,"value":418},"1",{"type":398,"tag":399,"props":420,"children":421},{},[422,424,435,437,448],{"type":403,"value":423},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":398,"tag":406,"props":425,"children":426},{},[427],{"type":398,"tag":410,"props":428,"children":432},{"href":429,"ariaDescribedBy":430,"dataFootnoteRef":391,"id":431},"#user-content-fn-dns-rebinding-1",[414],"user-content-fnref-dns-rebinding-1",[433],{"type":403,"value":434},"2",{"type":403,"value":436}," 问题，它就无能为力",{"type":398,"tag":406,"props":438,"children":439},{},[440],{"type":398,"tag":410,"props":441,"children":445},{"href":442,"ariaDescribedBy":443,"dataFootnoteRef":391,"id":444},"#user-content-fn-dns-rebinding-2",[414],"user-content-fnref-dns-rebinding-2",[446],{"type":403,"value":447},"3",{"type":403,"value":449},"。不过尽管不是银弹，它确实还是很有效的。",{"type":398,"tag":399,"props":451,"children":452},{},[453],{"type":403,"value":454},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":398,"tag":456,"props":457,"children":461},"pre",{"code":458,"language":459,"meta":391,"className":460,"style":391},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[462],{"type":398,"tag":463,"props":464,"children":465},"code",{"__ignoreMap":391},[466,523,532,558,566],{"type":398,"tag":467,"props":468,"children":471},"span",{"class":469,"line":470},"line",1,[472,478,484,490,496,502,508,514,518],{"type":398,"tag":467,"props":473,"children":475},{"style":474},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[476],{"type":403,"value":477},"const",{"type":398,"tag":467,"props":479,"children":481},{"style":480},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[482],{"type":403,"value":483}," express",{"type":398,"tag":467,"props":485,"children":487},{"style":486},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[488],{"type":403,"value":489}," =",{"type":398,"tag":467,"props":491,"children":493},{"style":492},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[494],{"type":403,"value":495}," require",{"type":398,"tag":467,"props":497,"children":499},{"style":498},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[500],{"type":403,"value":501},"(",{"type":398,"tag":467,"props":503,"children":505},{"style":504},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[506],{"type":403,"value":507},"'",{"type":398,"tag":467,"props":509,"children":511},{"style":510},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[512],{"type":403,"value":513},"express",{"type":398,"tag":467,"props":515,"children":516},{"style":504},[517],{"type":403,"value":507},{"type":398,"tag":467,"props":519,"children":520},{"style":498},[521],{"type":403,"value":522},")\n",{"type":398,"tag":467,"props":524,"children":526},{"class":469,"line":525},2,[527],{"type":398,"tag":467,"props":528,"children":529},{"emptyLinePlaceholder":390},[530],{"type":403,"value":531},"\n",{"type":398,"tag":467,"props":533,"children":535},{"class":469,"line":534},3,[536,540,545,549,553],{"type":398,"tag":467,"props":537,"children":538},{"style":474},[539],{"type":403,"value":477},{"type":398,"tag":467,"props":541,"children":542},{"style":480},[543],{"type":403,"value":544}," app",{"type":398,"tag":467,"props":546,"children":547},{"style":486},[548],{"type":403,"value":489},{"type":398,"tag":467,"props":550,"children":551},{"style":492},[552],{"type":403,"value":483},{"type":398,"tag":467,"props":554,"children":555},{"style":498},[556],{"type":403,"value":557},"()\n",{"type":398,"tag":467,"props":559,"children":561},{"class":469,"line":560},4,[562],{"type":398,"tag":467,"props":563,"children":564},{"emptyLinePlaceholder":390},[565],{"type":403,"value":531},{"type":398,"tag":467,"props":567,"children":569},{"class":469,"line":568},5,[570,575,581,586,590,595,599,603,608,612],{"type":398,"tag":467,"props":571,"children":572},{"style":498},[573],{"type":403,"value":574},"app",{"type":398,"tag":467,"props":576,"children":578},{"style":577},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[579],{"type":403,"value":580},".",{"type":398,"tag":467,"props":582,"children":583},{"style":492},[584],{"type":403,"value":585},"use",{"type":398,"tag":467,"props":587,"children":588},{"style":498},[589],{"type":403,"value":501},{"type":398,"tag":467,"props":591,"children":592},{"style":492},[593],{"type":403,"value":594},"require",{"type":398,"tag":467,"props":596,"children":597},{"style":498},[598],{"type":403,"value":501},{"type":398,"tag":467,"props":600,"children":601},{"style":504},[602],{"type":403,"value":507},{"type":398,"tag":467,"props":604,"children":605},{"style":510},[606],{"type":403,"value":607},"helmet",{"type":398,"tag":467,"props":609,"children":610},{"style":504},[611],{"type":403,"value":507},{"type":398,"tag":467,"props":613,"children":614},{"style":498},[615],{"type":403,"value":616},")())\n",{"type":398,"tag":399,"props":618,"children":619},{},[620],{"type":403,"value":621},"新的响应请求的 Headers 会变成这样：",{"type":398,"tag":456,"props":623,"children":625},{"code":624},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[626],{"type":398,"tag":463,"props":627,"children":628},{"__ignoreMap":391},[629],{"type":403,"value":624},{"type":398,"tag":399,"props":631,"children":632},{},[633],{"type":403,"value":634},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":398,"tag":636,"props":637,"children":639},"h2",{"id":638},"_11-种安全策略",[640],{"type":403,"value":641},"11 种安全策略",{"type":398,"tag":399,"props":643,"children":644},{},[645,647,653,664],{"type":403,"value":646},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":398,"tag":463,"props":648,"children":650},{"className":649},[],[651],{"type":403,"value":652},"OWASP Secure Headers",{"type":398,"tag":406,"props":654,"children":655},{},[656],{"type":398,"tag":410,"props":657,"children":661},{"href":658,"ariaDescribedBy":659,"dataFootnoteRef":391,"id":660},"#user-content-fn-shp",[414],"user-content-fnref-shp",[662],{"type":403,"value":663},"4",{"type":403,"value":665}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":398,"tag":667,"props":668,"children":670},"h3",{"id":669},"移除-x-powered-by",[671],{"type":403,"value":672},"移除 X-Powered-By",{"type":398,"tag":456,"props":674,"children":676},{"code":675,"language":459,"meta":391,"className":460,"style":391},"response.removeHeader('X-Powered-By')\n",[677],{"type":398,"tag":463,"props":678,"children":679},{"__ignoreMap":391},[680],{"type":398,"tag":467,"props":681,"children":682},{"class":469,"line":470},[683,688,692,697,701,705,710,714],{"type":398,"tag":467,"props":684,"children":685},{"style":498},[686],{"type":403,"value":687},"response",{"type":398,"tag":467,"props":689,"children":690},{"style":577},[691],{"type":403,"value":580},{"type":398,"tag":467,"props":693,"children":694},{"style":492},[695],{"type":403,"value":696},"removeHeader",{"type":398,"tag":467,"props":698,"children":699},{"style":498},[700],{"type":403,"value":501},{"type":398,"tag":467,"props":702,"children":703},{"style":504},[704],{"type":403,"value":507},{"type":398,"tag":467,"props":706,"children":707},{"style":510},[708],{"type":403,"value":709},"X-Powered-By",{"type":398,"tag":467,"props":711,"children":712},{"style":504},[713],{"type":403,"value":507},{"type":398,"tag":467,"props":715,"children":716},{"style":498},[717],{"type":403,"value":522},{"type":398,"tag":399,"props":719,"children":720},{},[721,723,728],{"type":403,"value":722},"一些框架会在请求头中添加 ",{"type":398,"tag":463,"props":724,"children":726},{"className":725},[],[727],{"type":403,"value":709},{"type":403,"value":729},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":398,"tag":399,"props":731,"children":732},{},[733,735,740],{"type":403,"value":734},"由于 Express 默认会给响应头增加 ",{"type":398,"tag":463,"props":736,"children":738},{"className":737},[],[739],{"type":403,"value":709},{"type":403,"value":741},"，所以 Helmet 直接把它移除了。",{"type":398,"tag":667,"props":743,"children":745},{"id":744},"移除-mime-嗅探",[746],{"type":403,"value":747},"移除 MIME 嗅探",{"type":398,"tag":456,"props":749,"children":751},{"code":750,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[752],{"type":398,"tag":463,"props":753,"children":754},{"__ignoreMap":391},[755],{"type":398,"tag":467,"props":756,"children":757},{"class":469,"line":470},[758,762,766,771,775,779,784,788,793,798,803,807],{"type":398,"tag":467,"props":759,"children":760},{"style":498},[761],{"type":403,"value":687},{"type":398,"tag":467,"props":763,"children":764},{"style":577},[765],{"type":403,"value":580},{"type":398,"tag":467,"props":767,"children":768},{"style":492},[769],{"type":403,"value":770},"setHeader",{"type":398,"tag":467,"props":772,"children":773},{"style":498},[774],{"type":403,"value":501},{"type":398,"tag":467,"props":776,"children":777},{"style":504},[778],{"type":403,"value":507},{"type":398,"tag":467,"props":780,"children":781},{"style":510},[782],{"type":403,"value":783},"X-Content-Type-Options",{"type":398,"tag":467,"props":785,"children":786},{"style":504},[787],{"type":403,"value":507},{"type":398,"tag":467,"props":789,"children":790},{"style":577},[791],{"type":403,"value":792},",",{"type":398,"tag":467,"props":794,"children":795},{"style":504},[796],{"type":403,"value":797}," '",{"type":398,"tag":467,"props":799,"children":800},{"style":510},[801],{"type":403,"value":802},"nosniff",{"type":398,"tag":467,"props":804,"children":805},{"style":504},[806],{"type":403,"value":507},{"type":398,"tag":467,"props":808,"children":809},{"style":498},[810],{"type":403,"value":522},{"type":398,"tag":399,"props":812,"children":813},{},[814,816,822,824,830],{"type":403,"value":815},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":398,"tag":463,"props":817,"children":819},{"className":818},[],[820],{"type":403,"value":821},"Content-Type",{"type":403,"value":823},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":398,"tag":463,"props":825,"children":827},{"className":826},[],[828],{"type":403,"value":829},"X-Content-Type-Options = nosniff",{"type":403,"value":831}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":398,"tag":667,"props":833,"children":835},{"id":834},"移除-x-xss-protection",[836],{"type":403,"value":837},"移除 X-XSS-Protection",{"type":398,"tag":456,"props":839,"children":841},{"code":840,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('X-XSS-Protection', '0')\n",[842],{"type":398,"tag":463,"props":843,"children":844},{"__ignoreMap":391},[845],{"type":398,"tag":467,"props":846,"children":847},{"class":469,"line":470},[848,852,856,860,864,868,873,877,881,885,890,894],{"type":398,"tag":467,"props":849,"children":850},{"style":498},[851],{"type":403,"value":687},{"type":398,"tag":467,"props":853,"children":854},{"style":577},[855],{"type":403,"value":580},{"type":398,"tag":467,"props":857,"children":858},{"style":492},[859],{"type":403,"value":770},{"type":398,"tag":467,"props":861,"children":862},{"style":498},[863],{"type":403,"value":501},{"type":398,"tag":467,"props":865,"children":866},{"style":504},[867],{"type":403,"value":507},{"type":398,"tag":467,"props":869,"children":870},{"style":510},[871],{"type":403,"value":872},"X-XSS-Protection",{"type":398,"tag":467,"props":874,"children":875},{"style":504},[876],{"type":403,"value":507},{"type":398,"tag":467,"props":878,"children":879},{"style":577},[880],{"type":403,"value":792},{"type":398,"tag":467,"props":882,"children":883},{"style":504},[884],{"type":403,"value":797},{"type":398,"tag":467,"props":886,"children":887},{"style":510},[888],{"type":403,"value":889},"0",{"type":398,"tag":467,"props":891,"children":892},{"style":504},[893],{"type":403,"value":507},{"type":398,"tag":467,"props":895,"children":896},{"style":498},[897],{"type":403,"value":522},{"type":398,"tag":399,"props":899,"children":900},{},[901,903,908],{"type":403,"value":902},"不是应该打开 ",{"type":398,"tag":463,"props":904,"children":906},{"className":905},[],[907],{"type":403,"value":872},{"type":403,"value":909},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":398,"tag":399,"props":911,"children":912},{},[913,915,921,923,934,936,941,943,949,951,962,964,969,971,976],{"type":403,"value":914},"这得追溯回去年的 Chrome 移除 ",{"type":398,"tag":463,"props":916,"children":918},{"className":917},[],[919],{"type":403,"value":920},"XSS Auditor",{"type":403,"value":922},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":398,"tag":406,"props":924,"children":925},{},[926],{"type":398,"tag":410,"props":927,"children":931},{"href":928,"ariaDescribedBy":929,"dataFootnoteRef":391,"id":930},"#user-content-fn-xss-auditor",[414],"user-content-fnref-xss-auditor",[932],{"type":403,"value":933},"5",{"type":403,"value":935},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":398,"tag":463,"props":937,"children":939},{"className":938},[],[940],{"type":403,"value":920},{"type":403,"value":942},"，并开始使用 ",{"type":398,"tag":463,"props":944,"children":946},{"className":945},[],[947],{"type":403,"value":948},"CSP",{"type":403,"value":950}," 等现代标准（更现代的标准）",{"type":398,"tag":406,"props":952,"children":953},{},[954],{"type":398,"tag":410,"props":955,"children":959},{"href":956,"ariaDescribedBy":957,"dataFootnoteRef":391,"id":958},"#user-content-fn-delete-xss-auditor",[414],"user-content-fnref-delete-xss-auditor",[960],{"type":403,"value":961},"6",{"type":403,"value":963},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":398,"tag":463,"props":965,"children":967},{"className":966},[],[968],{"type":403,"value":872},{"type":403,"value":970}," 这个响应头是让浏览器不要再用 ",{"type":398,"tag":463,"props":972,"children":974},{"className":973},[],[975],{"type":403,"value":920},{"type":403,"value":977},"。",{"type":398,"tag":399,"props":979,"children":980},{},[981,983,991],{"type":403,"value":982},"见：",{"type":398,"tag":410,"props":984,"children":988},{"href":985,"rel":986},"https://github.com/OWASP/CheatSheetSeries/issues/376",[987],"nofollow",[989],{"type":403,"value":990},"#376",{"type":403,"value":977},{"type":398,"tag":667,"props":993,"children":995},{"id":994},"禁止页面被嵌套",[996],{"type":403,"value":994},{"type":398,"tag":456,"props":998,"children":1000},{"code":999,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[1001],{"type":398,"tag":463,"props":1002,"children":1003},{"__ignoreMap":391},[1004],{"type":398,"tag":467,"props":1005,"children":1006},{"class":469,"line":470},[1007,1011,1015,1019,1023,1027,1032,1036,1040,1044,1049,1053],{"type":398,"tag":467,"props":1008,"children":1009},{"style":498},[1010],{"type":403,"value":687},{"type":398,"tag":467,"props":1012,"children":1013},{"style":577},[1014],{"type":403,"value":580},{"type":398,"tag":467,"props":1016,"children":1017},{"style":492},[1018],{"type":403,"value":770},{"type":398,"tag":467,"props":1020,"children":1021},{"style":498},[1022],{"type":403,"value":501},{"type":398,"tag":467,"props":1024,"children":1025},{"style":504},[1026],{"type":403,"value":507},{"type":398,"tag":467,"props":1028,"children":1029},{"style":510},[1030],{"type":403,"value":1031},"X-Frame-Options",{"type":398,"tag":467,"props":1033,"children":1034},{"style":504},[1035],{"type":403,"value":507},{"type":398,"tag":467,"props":1037,"children":1038},{"style":577},[1039],{"type":403,"value":792},{"type":398,"tag":467,"props":1041,"children":1042},{"style":504},[1043],{"type":403,"value":797},{"type":398,"tag":467,"props":1045,"children":1046},{"style":510},[1047],{"type":403,"value":1048},"SAMEORIGIN",{"type":398,"tag":467,"props":1050,"children":1051},{"style":504},[1052],{"type":403,"value":507},{"type":398,"tag":467,"props":1054,"children":1055},{"style":498},[1056],{"type":403,"value":522},{"type":398,"tag":399,"props":1058,"children":1059},{},[1060,1065,1067,1072,1074,1080],{"type":398,"tag":463,"props":1061,"children":1063},{"className":1062},[],[1064],{"type":403,"value":1031},{"type":403,"value":1066}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":398,"tag":463,"props":1068,"children":1070},{"className":1069},[],[1071],{"type":403,"value":1031},{"type":403,"value":1073}," 为 ",{"type":398,"tag":463,"props":1075,"children":1077},{"className":1076},[],[1078],{"type":403,"value":1079},"SameOrigin",{"type":403,"value":1081},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":398,"tag":399,"props":1083,"children":1084},{},[1085,1087,1093,1095,1100,1101,1107,1109,1114],{"type":403,"value":1086},"本来它的值有三种选择，",{"type":398,"tag":463,"props":1088,"children":1090},{"className":1089},[],[1091],{"type":403,"value":1092},"Deny",{"type":403,"value":1094},"、",{"type":398,"tag":463,"props":1096,"children":1098},{"className":1097},[],[1099],{"type":403,"value":1079},{"type":403,"value":1094},{"type":398,"tag":463,"props":1102,"children":1104},{"className":1103},[],[1105],{"type":403,"value":1106},"AllowFrom",{"type":403,"value":1108},"。但 ",{"type":398,"tag":463,"props":1110,"children":1112},{"className":1111},[],[1113],{"type":403,"value":1106},{"type":403,"value":1115}," 因为其兼容性原因，被 Helmet 弃用：",{"type":398,"tag":399,"props":1117,"children":1118},{},[1119],{"type":398,"tag":1120,"props":1121,"children":1124},"img",{"alt":1122,"src":1123},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":398,"tag":399,"props":1126,"children":1127},{},[1128,1130,1135,1137,1143,1145,1150],{"type":403,"value":1129},"此外，可以在 ",{"type":398,"tag":463,"props":1131,"children":1133},{"className":1132},[],[1134],{"type":403,"value":948},{"type":403,"value":1136}," 中设置 ",{"type":398,"tag":463,"props":1138,"children":1140},{"className":1139},[],[1141],{"type":403,"value":1142},"frame-ancestors",{"type":403,"value":1144}," 指令来替代 ",{"type":398,"tag":463,"props":1146,"children":1148},{"className":1147},[],[1149],{"type":403,"value":1031},{"type":403,"value":977},{"type":398,"tag":667,"props":1152,"children":1154},{"id":1153},"移除-referer",[1155],{"type":403,"value":1156},"移除 Referer",{"type":398,"tag":399,"props":1158,"children":1159},{},[1160,1166,1168,1174,1185,1187,1192],{"type":398,"tag":463,"props":1161,"children":1163},{"className":1162},[],[1164],{"type":403,"value":1165},"Referrer-Policy",{"type":403,"value":1167}," 可以控制浏览器请求头的 ",{"type":398,"tag":463,"props":1169,"children":1171},{"className":1170},[],[1172],{"type":403,"value":1173},"Referer",{"type":398,"tag":406,"props":1175,"children":1176},{},[1177],{"type":398,"tag":410,"props":1178,"children":1182},{"href":1179,"ariaDescribedBy":1180,"dataFootnoteRef":391,"id":1181},"#user-content-fn-referer",[414],"user-content-fnref-referer",[1183],{"type":403,"value":1184},"7",{"type":403,"value":1186}," 的显示方式。移除 ",{"type":398,"tag":463,"props":1188,"children":1190},{"className":1189},[],[1191],{"type":403,"value":1173},{"type":403,"value":1193}," 能保护用户的访问记录，防止隐私泄漏。",{"type":398,"tag":456,"props":1195,"children":1197},{"code":1196,"language":459,"meta":391,"className":460,"style":391},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1198],{"type":398,"tag":463,"props":1199,"children":1200},{"__ignoreMap":391},[1201,1232,1241,1263,1271,1291,1300,1321,1330,1351,1360,1381,1390,1411,1420,1441,1450,1471,1480,1489,1498,1559,1633,1664,1677,1686,1729,1738,1773,1806,1860,1905,1918,1927],{"type":398,"tag":467,"props":1202,"children":1203},{"class":469,"line":470},[1204,1208,1213,1217,1222,1227],{"type":398,"tag":467,"props":1205,"children":1206},{"style":474},[1207],{"type":403,"value":477},{"type":398,"tag":467,"props":1209,"children":1210},{"style":480},[1211],{"type":403,"value":1212}," ALLOWED_TOKENS",{"type":398,"tag":467,"props":1214,"children":1215},{"style":486},[1216],{"type":403,"value":489},{"type":398,"tag":467,"props":1218,"children":1219},{"style":486},[1220],{"type":403,"value":1221}," new",{"type":398,"tag":467,"props":1223,"children":1224},{"style":492},[1225],{"type":403,"value":1226}," Set",{"type":398,"tag":467,"props":1228,"children":1229},{"style":498},[1230],{"type":403,"value":1231},"([\n",{"type":398,"tag":467,"props":1233,"children":1234},{"class":469,"line":525},[1235],{"type":398,"tag":467,"props":1236,"children":1238},{"style":1237},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1239],{"type":403,"value":1240},"  // 任何时候都不携带 Referer\n",{"type":398,"tag":467,"props":1242,"children":1243},{"class":469,"line":534},[1244,1249,1254,1258],{"type":398,"tag":467,"props":1245,"children":1246},{"style":504},[1247],{"type":403,"value":1248},"  '",{"type":398,"tag":467,"props":1250,"children":1251},{"style":510},[1252],{"type":403,"value":1253},"no-referrer",{"type":398,"tag":467,"props":1255,"children":1256},{"style":504},[1257],{"type":403,"value":507},{"type":398,"tag":467,"props":1259,"children":1260},{"style":577},[1261],{"type":403,"value":1262},",\n",{"type":398,"tag":467,"props":1264,"children":1265},{"class":469,"line":560},[1266],{"type":398,"tag":467,"props":1267,"children":1268},{"style":1237},[1269],{"type":403,"value":1270},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":398,"tag":467,"props":1272,"children":1273},{"class":469,"line":568},[1274,1278,1283,1287],{"type":398,"tag":467,"props":1275,"children":1276},{"style":504},[1277],{"type":403,"value":1248},{"type":398,"tag":467,"props":1279,"children":1280},{"style":510},[1281],{"type":403,"value":1282},"no-referrer-when-downgrade",{"type":398,"tag":467,"props":1284,"children":1285},{"style":504},[1286],{"type":403,"value":507},{"type":398,"tag":467,"props":1288,"children":1289},{"style":577},[1290],{"type":403,"value":1262},{"type":398,"tag":467,"props":1292,"children":1294},{"class":469,"line":1293},6,[1295],{"type":398,"tag":467,"props":1296,"children":1297},{"style":1237},[1298],{"type":403,"value":1299},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":398,"tag":467,"props":1301,"children":1303},{"class":469,"line":1302},7,[1304,1308,1313,1317],{"type":398,"tag":467,"props":1305,"children":1306},{"style":504},[1307],{"type":403,"value":1248},{"type":398,"tag":467,"props":1309,"children":1310},{"style":510},[1311],{"type":403,"value":1312},"same-origin",{"type":398,"tag":467,"props":1314,"children":1315},{"style":504},[1316],{"type":403,"value":507},{"type":398,"tag":467,"props":1318,"children":1319},{"style":577},[1320],{"type":403,"value":1262},{"type":398,"tag":467,"props":1322,"children":1324},{"class":469,"line":1323},8,[1325],{"type":398,"tag":467,"props":1326,"children":1327},{"style":1237},[1328],{"type":403,"value":1329},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":398,"tag":467,"props":1331,"children":1333},{"class":469,"line":1332},9,[1334,1338,1343,1347],{"type":398,"tag":467,"props":1335,"children":1336},{"style":504},[1337],{"type":403,"value":1248},{"type":398,"tag":467,"props":1339,"children":1340},{"style":510},[1341],{"type":403,"value":1342},"origin",{"type":398,"tag":467,"props":1344,"children":1345},{"style":504},[1346],{"type":403,"value":507},{"type":398,"tag":467,"props":1348,"children":1349},{"style":577},[1350],{"type":403,"value":1262},{"type":398,"tag":467,"props":1352,"children":1354},{"class":469,"line":1353},10,[1355],{"type":398,"tag":467,"props":1356,"children":1357},{"style":1237},[1358],{"type":403,"value":1359},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":398,"tag":467,"props":1361,"children":1363},{"class":469,"line":1362},11,[1364,1368,1373,1377],{"type":398,"tag":467,"props":1365,"children":1366},{"style":504},[1367],{"type":403,"value":1248},{"type":398,"tag":467,"props":1369,"children":1370},{"style":510},[1371],{"type":403,"value":1372},"strict-origin",{"type":398,"tag":467,"props":1374,"children":1375},{"style":504},[1376],{"type":403,"value":507},{"type":398,"tag":467,"props":1378,"children":1379},{"style":577},[1380],{"type":403,"value":1262},{"type":398,"tag":467,"props":1382,"children":1384},{"class":469,"line":1383},12,[1385],{"type":398,"tag":467,"props":1386,"children":1387},{"style":1237},[1388],{"type":403,"value":1389},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":398,"tag":467,"props":1391,"children":1393},{"class":469,"line":1392},13,[1394,1398,1403,1407],{"type":398,"tag":467,"props":1395,"children":1396},{"style":504},[1397],{"type":403,"value":1248},{"type":398,"tag":467,"props":1399,"children":1400},{"style":510},[1401],{"type":403,"value":1402},"origin-when-cross-origin",{"type":398,"tag":467,"props":1404,"children":1405},{"style":504},[1406],{"type":403,"value":507},{"type":398,"tag":467,"props":1408,"children":1409},{"style":577},[1410],{"type":403,"value":1262},{"type":398,"tag":467,"props":1412,"children":1414},{"class":469,"line":1413},14,[1415],{"type":398,"tag":467,"props":1416,"children":1417},{"style":1237},[1418],{"type":403,"value":1419},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":398,"tag":467,"props":1421,"children":1423},{"class":469,"line":1422},15,[1424,1428,1433,1437],{"type":398,"tag":467,"props":1425,"children":1426},{"style":504},[1427],{"type":403,"value":1248},{"type":398,"tag":467,"props":1429,"children":1430},{"style":510},[1431],{"type":403,"value":1432},"strict-origin-when-cross-origin",{"type":398,"tag":467,"props":1434,"children":1435},{"style":504},[1436],{"type":403,"value":507},{"type":398,"tag":467,"props":1438,"children":1439},{"style":577},[1440],{"type":403,"value":1262},{"type":398,"tag":467,"props":1442,"children":1444},{"class":469,"line":1443},16,[1445],{"type":398,"tag":467,"props":1446,"children":1447},{"style":1237},[1448],{"type":403,"value":1449},"  // 所有请求都携带上完整的 Referer\n",{"type":398,"tag":467,"props":1451,"children":1453},{"class":469,"line":1452},17,[1454,1458,1463,1467],{"type":398,"tag":467,"props":1455,"children":1456},{"style":504},[1457],{"type":403,"value":1248},{"type":398,"tag":467,"props":1459,"children":1460},{"style":510},[1461],{"type":403,"value":1462},"unsafe-url",{"type":398,"tag":467,"props":1464,"children":1465},{"style":504},[1466],{"type":403,"value":507},{"type":398,"tag":467,"props":1468,"children":1469},{"style":577},[1470],{"type":403,"value":1262},{"type":398,"tag":467,"props":1472,"children":1474},{"class":469,"line":1473},18,[1475],{"type":398,"tag":467,"props":1476,"children":1477},{"style":1237},[1478],{"type":403,"value":1479},"  // 无策略\n",{"type":398,"tag":467,"props":1481,"children":1483},{"class":469,"line":1482},19,[1484],{"type":398,"tag":467,"props":1485,"children":1486},{"style":504},[1487],{"type":403,"value":1488},"  ''\n",{"type":398,"tag":467,"props":1490,"children":1492},{"class":469,"line":1491},20,[1493],{"type":398,"tag":467,"props":1494,"children":1495},{"style":498},[1496],{"type":403,"value":1497},"])\n",{"type":398,"tag":467,"props":1499,"children":1501},{"class":469,"line":1500},21,[1502,1507,1512,1517,1523,1527,1532,1536,1540,1544,1549,1554],{"type":398,"tag":467,"props":1503,"children":1504},{"style":474},[1505],{"type":403,"value":1506},"function",{"type":398,"tag":467,"props":1508,"children":1509},{"style":492},[1510],{"type":403,"value":1511}," getHeaderValueFromOptions",{"type":398,"tag":467,"props":1513,"children":1514},{"style":577},[1515],{"type":403,"value":1516},"({",{"type":398,"tag":467,"props":1518,"children":1520},{"style":1519},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[1521],{"type":403,"value":1522}," policy",{"type":398,"tag":467,"props":1524,"children":1525},{"style":486},[1526],{"type":403,"value":489},{"type":398,"tag":467,"props":1528,"children":1529},{"style":498},[1530],{"type":403,"value":1531}," [",{"type":398,"tag":467,"props":1533,"children":1534},{"style":504},[1535],{"type":403,"value":507},{"type":398,"tag":467,"props":1537,"children":1538},{"style":510},[1539],{"type":403,"value":1253},{"type":398,"tag":467,"props":1541,"children":1542},{"style":504},[1543],{"type":403,"value":507},{"type":398,"tag":467,"props":1545,"children":1546},{"style":498},[1547],{"type":403,"value":1548},"] ",{"type":398,"tag":467,"props":1550,"children":1551},{"style":577},[1552],{"type":403,"value":1553},"})",{"type":398,"tag":467,"props":1555,"children":1556},{"style":577},[1557],{"type":403,"value":1558}," {\n",{"type":398,"tag":467,"props":1560,"children":1562},{"class":469,"line":1561},22,[1563,1568,1573,1577,1582,1586,1591,1595,1600,1604,1609,1614,1619,1623,1628],{"type":398,"tag":467,"props":1564,"children":1565},{"style":474},[1566],{"type":403,"value":1567},"  const",{"type":398,"tag":467,"props":1569,"children":1570},{"style":480},[1571],{"type":403,"value":1572}," tokens",{"type":398,"tag":467,"props":1574,"children":1575},{"style":486},[1576],{"type":403,"value":489},{"type":398,"tag":467,"props":1578,"children":1579},{"style":486},[1580],{"type":403,"value":1581}," typeof",{"type":398,"tag":467,"props":1583,"children":1584},{"style":498},[1585],{"type":403,"value":1522},{"type":398,"tag":467,"props":1587,"children":1588},{"style":486},[1589],{"type":403,"value":1590}," ===",{"type":398,"tag":467,"props":1592,"children":1593},{"style":504},[1594],{"type":403,"value":797},{"type":398,"tag":467,"props":1596,"children":1597},{"style":510},[1598],{"type":403,"value":1599},"string",{"type":398,"tag":467,"props":1601,"children":1602},{"style":504},[1603],{"type":403,"value":507},{"type":398,"tag":467,"props":1605,"children":1606},{"style":486},[1607],{"type":403,"value":1608}," ?",{"type":398,"tag":467,"props":1610,"children":1612},{"style":1611},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1613],{"type":403,"value":1531},{"type":398,"tag":467,"props":1615,"children":1616},{"style":498},[1617],{"type":403,"value":1618},"policy",{"type":398,"tag":467,"props":1620,"children":1621},{"style":1611},[1622],{"type":403,"value":1548},{"type":398,"tag":467,"props":1624,"children":1625},{"style":486},[1626],{"type":403,"value":1627},":",{"type":398,"tag":467,"props":1629,"children":1630},{"style":498},[1631],{"type":403,"value":1632}," policy\n",{"type":398,"tag":467,"props":1634,"children":1636},{"class":469,"line":1635},23,[1637,1642,1646,1651,1655,1660],{"type":398,"tag":467,"props":1638,"children":1639},{"style":498},[1640],{"type":403,"value":1641},"    tokensSeen",{"type":398,"tag":467,"props":1643,"children":1644},{"style":577},[1645],{"type":403,"value":580},{"type":398,"tag":467,"props":1647,"children":1648},{"style":492},[1649],{"type":403,"value":1650},"add",{"type":398,"tag":467,"props":1652,"children":1653},{"style":1611},[1654],{"type":403,"value":501},{"type":398,"tag":467,"props":1656,"children":1657},{"style":498},[1658],{"type":403,"value":1659},"token",{"type":398,"tag":467,"props":1661,"children":1662},{"style":1611},[1663],{"type":403,"value":522},{"type":398,"tag":467,"props":1665,"children":1667},{"class":469,"line":1666},24,[1668,1673],{"type":398,"tag":467,"props":1669,"children":1670},{"style":577},[1671],{"type":403,"value":1672},"  }",{"type":398,"tag":467,"props":1674,"children":1675},{"style":498},[1676],{"type":403,"value":522},{"type":398,"tag":467,"props":1678,"children":1680},{"class":469,"line":1679},25,[1681],{"type":398,"tag":467,"props":1682,"children":1683},{"style":1237},[1684],{"type":403,"value":1685},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":398,"tag":467,"props":1687,"children":1689},{"class":469,"line":1688},26,[1690,1696,1700,1704,1709,1713,1717,1721,1725],{"type":398,"tag":467,"props":1691,"children":1693},{"style":1692},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1694],{"type":403,"value":1695},"  return",{"type":398,"tag":467,"props":1697,"children":1698},{"style":498},[1699],{"type":403,"value":1572},{"type":398,"tag":467,"props":1701,"children":1702},{"style":577},[1703],{"type":403,"value":580},{"type":398,"tag":467,"props":1705,"children":1706},{"style":492},[1707],{"type":403,"value":1708},"join",{"type":398,"tag":467,"props":1710,"children":1711},{"style":498},[1712],{"type":403,"value":501},{"type":398,"tag":467,"props":1714,"children":1715},{"style":504},[1716],{"type":403,"value":507},{"type":398,"tag":467,"props":1718,"children":1719},{"style":510},[1720],{"type":403,"value":792},{"type":398,"tag":467,"props":1722,"children":1723},{"style":504},[1724],{"type":403,"value":507},{"type":398,"tag":467,"props":1726,"children":1727},{"style":498},[1728],{"type":403,"value":522},{"type":398,"tag":467,"props":1730,"children":1732},{"class":469,"line":1731},27,[1733],{"type":398,"tag":467,"props":1734,"children":1735},{"style":498},[1736],{"type":403,"value":1737},"}\n",{"type":398,"tag":467,"props":1739,"children":1741},{"class":469,"line":1740},28,[1742,1746,1751,1755,1760,1764,1769],{"type":398,"tag":467,"props":1743,"children":1744},{"style":474},[1745],{"type":403,"value":1506},{"type":398,"tag":467,"props":1747,"children":1748},{"style":492},[1749],{"type":403,"value":1750}," referrerPolicy",{"type":398,"tag":467,"props":1752,"children":1753},{"style":577},[1754],{"type":403,"value":501},{"type":398,"tag":467,"props":1756,"children":1757},{"style":1519},[1758],{"type":403,"value":1759},"options",{"type":398,"tag":467,"props":1761,"children":1762},{"style":486},[1763],{"type":403,"value":489},{"type":398,"tag":467,"props":1765,"children":1766},{"style":577},[1767],{"type":403,"value":1768}," {})",{"type":398,"tag":467,"props":1770,"children":1771},{"style":577},[1772],{"type":403,"value":1558},{"type":398,"tag":467,"props":1774,"children":1776},{"class":469,"line":1775},29,[1777,1781,1786,1790,1794,1798,1802],{"type":398,"tag":467,"props":1778,"children":1779},{"style":474},[1780],{"type":403,"value":1567},{"type":398,"tag":467,"props":1782,"children":1783},{"style":480},[1784],{"type":403,"value":1785}," headerValue",{"type":398,"tag":467,"props":1787,"children":1788},{"style":486},[1789],{"type":403,"value":489},{"type":398,"tag":467,"props":1791,"children":1792},{"style":492},[1793],{"type":403,"value":1511},{"type":398,"tag":467,"props":1795,"children":1796},{"style":1611},[1797],{"type":403,"value":501},{"type":398,"tag":467,"props":1799,"children":1800},{"style":498},[1801],{"type":403,"value":1759},{"type":398,"tag":467,"props":1803,"children":1804},{"style":1611},[1805],{"type":403,"value":522},{"type":398,"tag":467,"props":1807,"children":1809},{"class":469,"line":1808},30,[1810,1814,1819,1824,1828,1833,1837,1842,1846,1851,1856],{"type":398,"tag":467,"props":1811,"children":1812},{"style":1692},[1813],{"type":403,"value":1695},{"type":398,"tag":467,"props":1815,"children":1816},{"style":474},[1817],{"type":403,"value":1818}," function",{"type":398,"tag":467,"props":1820,"children":1821},{"style":492},[1822],{"type":403,"value":1823}," referrerPolicyMiddleware",{"type":398,"tag":467,"props":1825,"children":1826},{"style":577},[1827],{"type":403,"value":501},{"type":398,"tag":467,"props":1829,"children":1830},{"style":1519},[1831],{"type":403,"value":1832},"_req",{"type":398,"tag":467,"props":1834,"children":1835},{"style":577},[1836],{"type":403,"value":792},{"type":398,"tag":467,"props":1838,"children":1839},{"style":1519},[1840],{"type":403,"value":1841}," res",{"type":398,"tag":467,"props":1843,"children":1844},{"style":577},[1845],{"type":403,"value":792},{"type":398,"tag":467,"props":1847,"children":1848},{"style":1519},[1849],{"type":403,"value":1850}," next",{"type":398,"tag":467,"props":1852,"children":1853},{"style":577},[1854],{"type":403,"value":1855},")",{"type":398,"tag":467,"props":1857,"children":1858},{"style":577},[1859],{"type":403,"value":1558},{"type":398,"tag":467,"props":1861,"children":1863},{"class":469,"line":1862},31,[1864,1869,1873,1877,1881,1885,1889,1893,1897,1901],{"type":398,"tag":467,"props":1865,"children":1866},{"style":498},[1867],{"type":403,"value":1868},"    res",{"type":398,"tag":467,"props":1870,"children":1871},{"style":577},[1872],{"type":403,"value":580},{"type":398,"tag":467,"props":1874,"children":1875},{"style":492},[1876],{"type":403,"value":770},{"type":398,"tag":467,"props":1878,"children":1879},{"style":1611},[1880],{"type":403,"value":501},{"type":398,"tag":467,"props":1882,"children":1883},{"style":504},[1884],{"type":403,"value":507},{"type":398,"tag":467,"props":1886,"children":1887},{"style":510},[1888],{"type":403,"value":1165},{"type":398,"tag":467,"props":1890,"children":1891},{"style":504},[1892],{"type":403,"value":507},{"type":398,"tag":467,"props":1894,"children":1895},{"style":577},[1896],{"type":403,"value":792},{"type":398,"tag":467,"props":1898,"children":1899},{"style":498},[1900],{"type":403,"value":1785},{"type":398,"tag":467,"props":1902,"children":1903},{"style":1611},[1904],{"type":403,"value":522},{"type":398,"tag":467,"props":1906,"children":1908},{"class":469,"line":1907},32,[1909,1914],{"type":398,"tag":467,"props":1910,"children":1911},{"style":492},[1912],{"type":403,"value":1913},"    next",{"type":398,"tag":467,"props":1915,"children":1916},{"style":1611},[1917],{"type":403,"value":557},{"type":398,"tag":467,"props":1919,"children":1921},{"class":469,"line":1920},33,[1922],{"type":398,"tag":467,"props":1923,"children":1924},{"style":577},[1925],{"type":403,"value":1926},"  }\n",{"type":398,"tag":467,"props":1928,"children":1930},{"class":469,"line":1929},34,[1931],{"type":398,"tag":467,"props":1932,"children":1933},{"style":577},[1934],{"type":403,"value":1737},{"type":398,"tag":399,"props":1936,"children":1937},{},[1938,1940,1946,1948,1953],{"type":403,"value":1939},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":398,"tag":463,"props":1941,"children":1943},{"className":1942},[],[1944],{"type":403,"value":1945},"Referrer Policy",{"type":403,"value":1947},"。Meta 标签设置的 ",{"type":398,"tag":463,"props":1949,"children":1951},{"className":1950},[],[1952],{"type":403,"value":1945},{"type":403,"value":1954}," 对整个页面都有效果（但优先级最低）。",{"type":398,"tag":456,"props":1956,"children":1960},{"code":1957,"language":1958,"meta":391,"className":1959,"style":391},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1961],{"type":398,"tag":463,"props":1962,"children":1963},{"__ignoreMap":391},[1964,2029,2097],{"type":398,"tag":467,"props":1965,"children":1966},{"class":469,"line":470},[1967,1972,1978,1984,1989,1994,1999,2003,2008,2012,2016,2020,2024],{"type":398,"tag":467,"props":1968,"children":1969},{"style":577},[1970],{"type":403,"value":1971},"\u003C",{"type":398,"tag":467,"props":1973,"children":1975},{"style":1974},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1976],{"type":403,"value":1977},"meta",{"type":398,"tag":467,"props":1979,"children":1981},{"style":1980},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1982],{"type":403,"value":1983}," name",{"type":398,"tag":467,"props":1985,"children":1986},{"style":577},[1987],{"type":403,"value":1988},"=",{"type":398,"tag":467,"props":1990,"children":1991},{"style":504},[1992],{"type":403,"value":1993},"\"",{"type":398,"tag":467,"props":1995,"children":1996},{"style":510},[1997],{"type":403,"value":1998},"referrer",{"type":398,"tag":467,"props":2000,"children":2001},{"style":504},[2002],{"type":403,"value":1993},{"type":398,"tag":467,"props":2004,"children":2005},{"style":1980},[2006],{"type":403,"value":2007}," content",{"type":398,"tag":467,"props":2009,"children":2010},{"style":577},[2011],{"type":403,"value":1988},{"type":398,"tag":467,"props":2013,"children":2014},{"style":504},[2015],{"type":403,"value":1993},{"type":398,"tag":467,"props":2017,"children":2018},{"style":510},[2019],{"type":403,"value":1342},{"type":398,"tag":467,"props":2021,"children":2022},{"style":504},[2023],{"type":403,"value":1993},{"type":398,"tag":467,"props":2025,"children":2026},{"style":577},[2027],{"type":403,"value":2028}," />\n",{"type":398,"tag":467,"props":2030,"children":2031},{"class":469,"line":525},[2032,2036,2040,2045,2049,2053,2058,2062,2067,2071,2075,2079,2083,2088,2092],{"type":398,"tag":467,"props":2033,"children":2034},{"style":577},[2035],{"type":403,"value":1971},{"type":398,"tag":467,"props":2037,"children":2038},{"style":1974},[2039],{"type":403,"value":410},{"type":398,"tag":467,"props":2041,"children":2042},{"style":1980},[2043],{"type":403,"value":2044}," href",{"type":398,"tag":467,"props":2046,"children":2047},{"style":577},[2048],{"type":403,"value":1988},{"type":398,"tag":467,"props":2050,"children":2051},{"style":504},[2052],{"type":403,"value":1993},{"type":398,"tag":467,"props":2054,"children":2055},{"style":510},[2056],{"type":403,"value":2057},"http://example.com",{"type":398,"tag":467,"props":2059,"children":2060},{"style":504},[2061],{"type":403,"value":1993},{"type":398,"tag":467,"props":2063,"children":2064},{"style":1980},[2065],{"type":403,"value":2066}," referrerpolicy",{"type":398,"tag":467,"props":2068,"children":2069},{"style":577},[2070],{"type":403,"value":1988},{"type":398,"tag":467,"props":2072,"children":2073},{"style":504},[2074],{"type":403,"value":1993},{"type":398,"tag":467,"props":2076,"children":2077},{"style":510},[2078],{"type":403,"value":1342},{"type":398,"tag":467,"props":2080,"children":2081},{"style":504},[2082],{"type":403,"value":1993},{"type":398,"tag":467,"props":2084,"children":2085},{"style":577},[2086],{"type":403,"value":2087},">\u003C/",{"type":398,"tag":467,"props":2089,"children":2090},{"style":1974},[2091],{"type":403,"value":410},{"type":398,"tag":467,"props":2093,"children":2094},{"style":577},[2095],{"type":403,"value":2096},">\n",{"type":398,"tag":467,"props":2098,"children":2099},{"class":469,"line":534},[2100,2104,2108,2112,2116,2120,2124,2128,2133,2137,2141,2146,2150,2154,2158],{"type":398,"tag":467,"props":2101,"children":2102},{"style":577},[2103],{"type":403,"value":1971},{"type":398,"tag":467,"props":2105,"children":2106},{"style":1974},[2107],{"type":403,"value":410},{"type":398,"tag":467,"props":2109,"children":2110},{"style":1980},[2111],{"type":403,"value":2044},{"type":398,"tag":467,"props":2113,"children":2114},{"style":577},[2115],{"type":403,"value":1988},{"type":398,"tag":467,"props":2117,"children":2118},{"style":504},[2119],{"type":403,"value":1993},{"type":398,"tag":467,"props":2121,"children":2122},{"style":510},[2123],{"type":403,"value":2057},{"type":398,"tag":467,"props":2125,"children":2126},{"style":504},[2127],{"type":403,"value":1993},{"type":398,"tag":467,"props":2129,"children":2130},{"style":1980},[2131],{"type":403,"value":2132}," rel",{"type":398,"tag":467,"props":2134,"children":2135},{"style":577},[2136],{"type":403,"value":1988},{"type":398,"tag":467,"props":2138,"children":2139},{"style":504},[2140],{"type":403,"value":1993},{"type":398,"tag":467,"props":2142,"children":2143},{"style":510},[2144],{"type":403,"value":2145},"noreferrer",{"type":398,"tag":467,"props":2147,"children":2148},{"style":504},[2149],{"type":403,"value":1993},{"type":398,"tag":467,"props":2151,"children":2152},{"style":577},[2153],{"type":403,"value":2087},{"type":398,"tag":467,"props":2155,"children":2156},{"style":1974},[2157],{"type":403,"value":410},{"type":398,"tag":467,"props":2159,"children":2160},{"style":577},[2161],{"type":403,"value":2096},{"type":398,"tag":667,"props":2163,"children":2165},{"id":2164},"强制使用-https",[2166],{"type":403,"value":2167},"强制使用 HTTPS",{"type":398,"tag":399,"props":2169,"children":2170},{},[2171,2173,2179,2181,2192],{"type":403,"value":2172},"通过设置请求头的 ",{"type":398,"tag":463,"props":2174,"children":2176},{"className":2175},[],[2177],{"type":403,"value":2178},"Strict-Transport-Security（STS）",{"type":403,"value":2180},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":398,"tag":406,"props":2182,"children":2183},{},[2184],{"type":398,"tag":410,"props":2185,"children":2189},{"href":2186,"ariaDescribedBy":2187,"dataFootnoteRef":391,"id":2188},"#user-content-fn-timeend",[414],"user-content-fnref-timeend",[2190],{"type":403,"value":2191},"8",{"type":403,"value":977},{"type":398,"tag":399,"props":2194,"children":2195},{},[2196,2198,2204,2206,2212,2214,2220,2222,2228,2230,2235],{"type":403,"value":2197},"这个规范本身很好理解，通过 ",{"type":398,"tag":463,"props":2199,"children":2201},{"className":2200},[],[2202],{"type":403,"value":2203},"max-age",{"type":403,"value":2205}," 可以指定倒计时时间；",{"type":398,"tag":463,"props":2207,"children":2209},{"className":2208},[],[2210],{"type":403,"value":2211},"includesSubDomains",{"type":403,"value":2213}," 指定子域的 ",{"type":398,"tag":463,"props":2215,"children":2217},{"className":2216},[],[2218],{"type":403,"value":2219},"HSTS",{"type":403,"value":2221},"；",{"type":398,"tag":463,"props":2223,"children":2225},{"className":2224},[],[2226],{"type":403,"value":2227},"preload",{"type":403,"value":2229}," 指定预加载内容的 ",{"type":398,"tag":463,"props":2231,"children":2233},{"className":2232},[],[2234],{"type":403,"value":2219},{"type":403,"value":977},{"type":398,"tag":456,"props":2237,"children":2239},{"code":2238},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2240],{"type":398,"tag":463,"props":2241,"children":2242},{"__ignoreMap":391},[2243],{"type":403,"value":2238},{"type":398,"tag":456,"props":2245,"children":2247},{"code":2246,"language":459,"meta":391,"className":460,"style":391},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2248],{"type":398,"tag":463,"props":2249,"children":2250},{"__ignoreMap":391},[2251,2313,2340,2413,2476,2513,2520,2573,2613,2620,2652,2683,2731,2775,2786,2793],{"type":398,"tag":467,"props":2252,"children":2253},{"class":469,"line":470},[2254,2258,2263,2267,2272,2276,2282,2287,2292,2296,2301,2305,2309],{"type":398,"tag":467,"props":2255,"children":2256},{"style":474},[2257],{"type":403,"value":477},{"type":398,"tag":467,"props":2259,"children":2260},{"style":480},[2261],{"type":403,"value":2262}," DEFAULT_MAX_AGE",{"type":398,"tag":467,"props":2264,"children":2265},{"style":486},[2266],{"type":403,"value":489},{"type":398,"tag":467,"props":2268,"children":2269},{"style":492},[2270],{"type":403,"value":2271}," String",{"type":398,"tag":467,"props":2273,"children":2274},{"style":498},[2275],{"type":403,"value":501},{"type":398,"tag":467,"props":2277,"children":2279},{"style":2278},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2280],{"type":403,"value":2281},"180",{"type":398,"tag":467,"props":2283,"children":2284},{"style":486},[2285],{"type":403,"value":2286}," *",{"type":398,"tag":467,"props":2288,"children":2289},{"style":2278},[2290],{"type":403,"value":2291}," 24",{"type":398,"tag":467,"props":2293,"children":2294},{"style":486},[2295],{"type":403,"value":2286},{"type":398,"tag":467,"props":2297,"children":2298},{"style":2278},[2299],{"type":403,"value":2300}," 60",{"type":398,"tag":467,"props":2302,"children":2303},{"style":486},[2304],{"type":403,"value":2286},{"type":398,"tag":467,"props":2306,"children":2307},{"style":2278},[2308],{"type":403,"value":2300},{"type":398,"tag":467,"props":2310,"children":2311},{"style":498},[2312],{"type":403,"value":522},{"type":398,"tag":467,"props":2314,"children":2315},{"class":469,"line":525},[2316,2320,2324,2328,2332,2336],{"type":398,"tag":467,"props":2317,"children":2318},{"style":474},[2319],{"type":403,"value":1506},{"type":398,"tag":467,"props":2321,"children":2322},{"style":492},[2323],{"type":403,"value":1511},{"type":398,"tag":467,"props":2325,"children":2326},{"style":577},[2327],{"type":403,"value":501},{"type":398,"tag":467,"props":2329,"children":2330},{"style":1519},[2331],{"type":403,"value":1759},{"type":398,"tag":467,"props":2333,"children":2334},{"style":577},[2335],{"type":403,"value":1855},{"type":398,"tag":467,"props":2337,"children":2338},{"style":577},[2339],{"type":403,"value":1558},{"type":398,"tag":467,"props":2341,"children":2342},{"class":469,"line":534},[2343,2347,2352,2356,2360,2365,2370,2376,2380,2385,2390,2395,2399,2404,2408],{"type":398,"tag":467,"props":2344,"children":2345},{"style":474},[2346],{"type":403,"value":1567},{"type":398,"tag":467,"props":2348,"children":2349},{"style":480},[2350],{"type":403,"value":2351}," directives",{"type":398,"tag":467,"props":2353,"children":2354},{"style":486},[2355],{"type":403,"value":489},{"type":398,"tag":467,"props":2357,"children":2358},{"style":1611},[2359],{"type":403,"value":1531},{"type":398,"tag":467,"props":2361,"children":2362},{"style":504},[2363],{"type":403,"value":2364},"`",{"type":398,"tag":467,"props":2366,"children":2367},{"style":510},[2368],{"type":403,"value":2369},"max-age=",{"type":398,"tag":467,"props":2371,"children":2373},{"style":2372},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2374],{"type":403,"value":2375},"${",{"type":398,"tag":467,"props":2377,"children":2378},{"style":498},[2379],{"type":403,"value":1759},{"type":398,"tag":467,"props":2381,"children":2383},{"style":2382},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2384],{"type":403,"value":580},{"type":398,"tag":467,"props":2386,"children":2387},{"style":498},[2388],{"type":403,"value":2389},"maxAge",{"type":398,"tag":467,"props":2391,"children":2392},{"style":486},[2393],{"type":403,"value":2394}," ||",{"type":398,"tag":467,"props":2396,"children":2397},{"style":480},[2398],{"type":403,"value":2262},{"type":398,"tag":467,"props":2400,"children":2401},{"style":2372},[2402],{"type":403,"value":2403},"}",{"type":398,"tag":467,"props":2405,"children":2406},{"style":504},[2407],{"type":403,"value":2364},{"type":398,"tag":467,"props":2409,"children":2410},{"style":1611},[2411],{"type":403,"value":2412},"]\n",{"type":398,"tag":467,"props":2414,"children":2415},{"class":469,"line":560},[2416,2421,2426,2430,2434,2439,2443,2449,2453,2458,2462,2466,2471],{"type":398,"tag":467,"props":2417,"children":2418},{"style":1692},[2419],{"type":403,"value":2420},"  if",{"type":398,"tag":467,"props":2422,"children":2423},{"style":1611},[2424],{"type":403,"value":2425}," (",{"type":398,"tag":467,"props":2427,"children":2428},{"style":498},[2429],{"type":403,"value":1759},{"type":398,"tag":467,"props":2431,"children":2432},{"style":577},[2433],{"type":403,"value":580},{"type":398,"tag":467,"props":2435,"children":2436},{"style":498},[2437],{"type":403,"value":2438},"includeSubDomains",{"type":398,"tag":467,"props":2440,"children":2441},{"style":486},[2442],{"type":403,"value":1590},{"type":398,"tag":467,"props":2444,"children":2446},{"style":2445},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2447],{"type":403,"value":2448}," undefined",{"type":398,"tag":467,"props":2450,"children":2451},{"style":486},[2452],{"type":403,"value":2394},{"type":398,"tag":467,"props":2454,"children":2455},{"style":498},[2456],{"type":403,"value":2457}," options",{"type":398,"tag":467,"props":2459,"children":2460},{"style":577},[2461],{"type":403,"value":580},{"type":398,"tag":467,"props":2463,"children":2464},{"style":498},[2465],{"type":403,"value":2438},{"type":398,"tag":467,"props":2467,"children":2468},{"style":1611},[2469],{"type":403,"value":2470},") ",{"type":398,"tag":467,"props":2472,"children":2473},{"style":577},[2474],{"type":403,"value":2475},"{\n",{"type":398,"tag":467,"props":2477,"children":2478},{"class":469,"line":568},[2479,2484,2488,2493,2497,2501,2505,2509],{"type":398,"tag":467,"props":2480,"children":2481},{"style":498},[2482],{"type":403,"value":2483},"    directives",{"type":398,"tag":467,"props":2485,"children":2486},{"style":577},[2487],{"type":403,"value":580},{"type":398,"tag":467,"props":2489,"children":2490},{"style":492},[2491],{"type":403,"value":2492},"push",{"type":398,"tag":467,"props":2494,"children":2495},{"style":1611},[2496],{"type":403,"value":501},{"type":398,"tag":467,"props":2498,"children":2499},{"style":504},[2500],{"type":403,"value":507},{"type":398,"tag":467,"props":2502,"children":2503},{"style":510},[2504],{"type":403,"value":2438},{"type":398,"tag":467,"props":2506,"children":2507},{"style":504},[2508],{"type":403,"value":507},{"type":398,"tag":467,"props":2510,"children":2511},{"style":1611},[2512],{"type":403,"value":522},{"type":398,"tag":467,"props":2514,"children":2515},{"class":469,"line":1293},[2516],{"type":398,"tag":467,"props":2517,"children":2518},{"style":577},[2519],{"type":403,"value":1926},{"type":398,"tag":467,"props":2521,"children":2522},{"class":469,"line":1302},[2523,2528,2532,2536,2541,2545,2549,2553,2557,2561,2565,2569],{"type":398,"tag":467,"props":2524,"children":2525},{"style":498},[2526],{"type":403,"value":2527},"  options",{"type":398,"tag":467,"props":2529,"children":2530},{"style":577},[2531],{"type":403,"value":580},{"type":398,"tag":467,"props":2533,"children":2534},{"style":498},[2535],{"type":403,"value":2227},{"type":398,"tag":467,"props":2537,"children":2538},{"style":486},[2539],{"type":403,"value":2540}," &&",{"type":398,"tag":467,"props":2542,"children":2543},{"style":498},[2544],{"type":403,"value":2351},{"type":398,"tag":467,"props":2546,"children":2547},{"style":577},[2548],{"type":403,"value":580},{"type":398,"tag":467,"props":2550,"children":2551},{"style":492},[2552],{"type":403,"value":2492},{"type":398,"tag":467,"props":2554,"children":2555},{"style":1611},[2556],{"type":403,"value":501},{"type":398,"tag":467,"props":2558,"children":2559},{"style":504},[2560],{"type":403,"value":507},{"type":398,"tag":467,"props":2562,"children":2563},{"style":510},[2564],{"type":403,"value":2227},{"type":398,"tag":467,"props":2566,"children":2567},{"style":504},[2568],{"type":403,"value":507},{"type":398,"tag":467,"props":2570,"children":2571},{"style":1611},[2572],{"type":403,"value":522},{"type":398,"tag":467,"props":2574,"children":2575},{"class":469,"line":1323},[2576,2580,2584,2588,2592,2596,2600,2605,2609],{"type":398,"tag":467,"props":2577,"children":2578},{"style":1692},[2579],{"type":403,"value":1695},{"type":398,"tag":467,"props":2581,"children":2582},{"style":498},[2583],{"type":403,"value":2351},{"type":398,"tag":467,"props":2585,"children":2586},{"style":577},[2587],{"type":403,"value":580},{"type":398,"tag":467,"props":2589,"children":2590},{"style":492},[2591],{"type":403,"value":1708},{"type":398,"tag":467,"props":2593,"children":2594},{"style":1611},[2595],{"type":403,"value":501},{"type":398,"tag":467,"props":2597,"children":2598},{"style":504},[2599],{"type":403,"value":507},{"type":398,"tag":467,"props":2601,"children":2602},{"style":510},[2603],{"type":403,"value":2604},"; ",{"type":398,"tag":467,"props":2606,"children":2607},{"style":504},[2608],{"type":403,"value":507},{"type":398,"tag":467,"props":2610,"children":2611},{"style":1611},[2612],{"type":403,"value":522},{"type":398,"tag":467,"props":2614,"children":2615},{"class":469,"line":1332},[2616],{"type":398,"tag":467,"props":2617,"children":2618},{"style":577},[2619],{"type":403,"value":1737},{"type":398,"tag":467,"props":2621,"children":2622},{"class":469,"line":1353},[2623,2627,2632,2636,2640,2644,2648],{"type":398,"tag":467,"props":2624,"children":2625},{"style":474},[2626],{"type":403,"value":1506},{"type":398,"tag":467,"props":2628,"children":2629},{"style":492},[2630],{"type":403,"value":2631}," strictTransportSecurity",{"type":398,"tag":467,"props":2633,"children":2634},{"style":577},[2635],{"type":403,"value":501},{"type":398,"tag":467,"props":2637,"children":2638},{"style":1519},[2639],{"type":403,"value":1759},{"type":398,"tag":467,"props":2641,"children":2642},{"style":486},[2643],{"type":403,"value":489},{"type":398,"tag":467,"props":2645,"children":2646},{"style":577},[2647],{"type":403,"value":1768},{"type":398,"tag":467,"props":2649,"children":2650},{"style":577},[2651],{"type":403,"value":1558},{"type":398,"tag":467,"props":2653,"children":2654},{"class":469,"line":1362},[2655,2659,2663,2667,2671,2675,2679],{"type":398,"tag":467,"props":2656,"children":2657},{"style":474},[2658],{"type":403,"value":1567},{"type":398,"tag":467,"props":2660,"children":2661},{"style":480},[2662],{"type":403,"value":1785},{"type":398,"tag":467,"props":2664,"children":2665},{"style":486},[2666],{"type":403,"value":489},{"type":398,"tag":467,"props":2668,"children":2669},{"style":492},[2670],{"type":403,"value":1511},{"type":398,"tag":467,"props":2672,"children":2673},{"style":1611},[2674],{"type":403,"value":501},{"type":398,"tag":467,"props":2676,"children":2677},{"style":498},[2678],{"type":403,"value":1759},{"type":398,"tag":467,"props":2680,"children":2681},{"style":1611},[2682],{"type":403,"value":522},{"type":398,"tag":467,"props":2684,"children":2685},{"class":469,"line":1383},[2686,2690,2694,2699,2703,2707,2711,2715,2719,2723,2727],{"type":398,"tag":467,"props":2687,"children":2688},{"style":1692},[2689],{"type":403,"value":1695},{"type":398,"tag":467,"props":2691,"children":2692},{"style":474},[2693],{"type":403,"value":1818},{"type":398,"tag":467,"props":2695,"children":2696},{"style":492},[2697],{"type":403,"value":2698}," strictTransportSecurityMiddleware",{"type":398,"tag":467,"props":2700,"children":2701},{"style":577},[2702],{"type":403,"value":501},{"type":398,"tag":467,"props":2704,"children":2705},{"style":1519},[2706],{"type":403,"value":1832},{"type":398,"tag":467,"props":2708,"children":2709},{"style":577},[2710],{"type":403,"value":792},{"type":398,"tag":467,"props":2712,"children":2713},{"style":1519},[2714],{"type":403,"value":1841},{"type":398,"tag":467,"props":2716,"children":2717},{"style":577},[2718],{"type":403,"value":792},{"type":398,"tag":467,"props":2720,"children":2721},{"style":1519},[2722],{"type":403,"value":1850},{"type":398,"tag":467,"props":2724,"children":2725},{"style":577},[2726],{"type":403,"value":1855},{"type":398,"tag":467,"props":2728,"children":2729},{"style":577},[2730],{"type":403,"value":1558},{"type":398,"tag":467,"props":2732,"children":2733},{"class":469,"line":1392},[2734,2738,2742,2746,2750,2754,2759,2763,2767,2771],{"type":398,"tag":467,"props":2735,"children":2736},{"style":498},[2737],{"type":403,"value":1868},{"type":398,"tag":467,"props":2739,"children":2740},{"style":577},[2741],{"type":403,"value":580},{"type":398,"tag":467,"props":2743,"children":2744},{"style":492},[2745],{"type":403,"value":770},{"type":398,"tag":467,"props":2747,"children":2748},{"style":1611},[2749],{"type":403,"value":501},{"type":398,"tag":467,"props":2751,"children":2752},{"style":504},[2753],{"type":403,"value":507},{"type":398,"tag":467,"props":2755,"children":2756},{"style":510},[2757],{"type":403,"value":2758},"Strict-Transport-Security",{"type":398,"tag":467,"props":2760,"children":2761},{"style":504},[2762],{"type":403,"value":507},{"type":398,"tag":467,"props":2764,"children":2765},{"style":577},[2766],{"type":403,"value":792},{"type":398,"tag":467,"props":2768,"children":2769},{"style":498},[2770],{"type":403,"value":1785},{"type":398,"tag":467,"props":2772,"children":2773},{"style":1611},[2774],{"type":403,"value":522},{"type":398,"tag":467,"props":2776,"children":2777},{"class":469,"line":1413},[2778,2782],{"type":398,"tag":467,"props":2779,"children":2780},{"style":492},[2781],{"type":403,"value":1913},{"type":398,"tag":467,"props":2783,"children":2784},{"style":1611},[2785],{"type":403,"value":557},{"type":398,"tag":467,"props":2787,"children":2788},{"class":469,"line":1422},[2789],{"type":398,"tag":467,"props":2790,"children":2791},{"style":577},[2792],{"type":403,"value":1926},{"type":398,"tag":467,"props":2794,"children":2795},{"class":469,"line":1443},[2796],{"type":398,"tag":467,"props":2797,"children":2798},{"style":577},[2799],{"type":403,"value":1737},{"type":398,"tag":667,"props":2801,"children":2803},{"id":2802},"可选用证书透明性策略",[2804],{"type":403,"value":2802},{"type":398,"tag":456,"props":2806,"children":2808},{"code":2807,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('Expect-CT' /* someValue */)\n",[2809],{"type":398,"tag":463,"props":2810,"children":2811},{"__ignoreMap":391},[2812],{"type":398,"tag":467,"props":2813,"children":2814},{"class":469,"line":470},[2815,2819,2823,2827,2831,2835,2840,2844,2849],{"type":398,"tag":467,"props":2816,"children":2817},{"style":498},[2818],{"type":403,"value":687},{"type":398,"tag":467,"props":2820,"children":2821},{"style":577},[2822],{"type":403,"value":580},{"type":398,"tag":467,"props":2824,"children":2825},{"style":492},[2826],{"type":403,"value":770},{"type":398,"tag":467,"props":2828,"children":2829},{"style":498},[2830],{"type":403,"value":501},{"type":398,"tag":467,"props":2832,"children":2833},{"style":504},[2834],{"type":403,"value":507},{"type":398,"tag":467,"props":2836,"children":2837},{"style":510},[2838],{"type":403,"value":2839},"Expect-CT",{"type":398,"tag":467,"props":2841,"children":2842},{"style":504},[2843],{"type":403,"value":507},{"type":398,"tag":467,"props":2845,"children":2846},{"style":1237},[2847],{"type":403,"value":2848}," /* someValue */",{"type":398,"tag":467,"props":2850,"children":2851},{"style":498},[2852],{"type":403,"value":522},{"type":398,"tag":399,"props":2854,"children":2855},{},[2856,2861,2863,2874,2876,2887],{"type":398,"tag":463,"props":2857,"children":2859},{"className":2858},[],[2860],{"type":403,"value":2839},{"type":403,"value":2862}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":398,"tag":406,"props":2864,"children":2865},{},[2866],{"type":398,"tag":410,"props":2867,"children":2871},{"href":2868,"ariaDescribedBy":2869,"dataFootnoteRef":391,"id":2870},"#user-content-fn-chrome-ct",[414],"user-content-fnref-chrome-ct",[2872],{"type":403,"value":2873},"9",{"type":403,"value":2875},"），避免中间人攻击",{"type":398,"tag":406,"props":2877,"children":2878},{},[2879],{"type":398,"tag":410,"props":2880,"children":2884},{"href":2881,"ariaDescribedBy":2882,"dataFootnoteRef":391,"id":2883},"#user-content-fn-ct",[414],"user-content-fnref-ct",[2885],{"type":403,"value":2886},"10",{"type":403,"value":2888},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":398,"tag":456,"props":2890,"children":2892},{"code":2891},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2893],{"type":398,"tag":463,"props":2894,"children":2895},{"__ignoreMap":391},[2896],{"type":403,"value":2891},{"type":398,"tag":399,"props":2898,"children":2899},{},[2900,2902,2907],{"type":403,"value":2901},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":398,"tag":463,"props":2903,"children":2905},{"className":2904},[],[2906],{"type":403,"value":2839},{"type":403,"value":2908}," 就作不上用咯... TODO",{"type":398,"tag":667,"props":2910,"children":2912},{"id":2911},"拒绝来自-pdfflash-的跨域请求",[2913],{"type":403,"value":2914},"拒绝来自 PDF、Flash 的跨域请求",{"type":398,"tag":399,"props":2916,"children":2917},{},[2918,2924,2926,2937],{"type":398,"tag":463,"props":2919,"children":2921},{"className":2920},[],[2922],{"type":403,"value":2923},"X-Permitted-Cross-Domain-Policies",{"type":403,"value":2925}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":398,"tag":406,"props":2927,"children":2928},{},[2929],{"type":398,"tag":410,"props":2930,"children":2934},{"href":2931,"ariaDescribedBy":2932,"dataFootnoteRef":391,"id":2933},"#user-content-fn-pdf-reader",[414],"user-content-fnref-pdf-reader",[2935],{"type":403,"value":2936},"11",{"type":403,"value":2938},"：",{"type":398,"tag":399,"props":2940,"children":2941},{},[2942],{"type":398,"tag":1120,"props":2943,"children":2945},{"alt":2923,"src":2944},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":398,"tag":2947,"props":2948,"children":2949},"ol",{},[2950,2956],{"type":398,"tag":2951,"props":2952,"children":2953},"li",{},[2954],{"type":403,"value":2955},"用户在 A 网站打开了某个 PDF；",{"type":398,"tag":2951,"props":2957,"children":2958},{},[2959,2961,2967],{"type":403,"value":2960},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":398,"tag":463,"props":2962,"children":2964},{"className":2963},[],[2965],{"type":403,"value":2966},"crossdomain.xml",{"type":403,"value":2968}," 文件（策略文件）作为跨域策略应对方案。",{"type":398,"tag":399,"props":2970,"children":2971},{},[2972],{"type":403,"value":2973},"一个策略文件可能长这样：",{"type":398,"tag":456,"props":2975,"children":2977},{"code":2976,"language":1958,"meta":391,"className":1959,"style":391},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2978],{"type":398,"tag":463,"props":2979,"children":2980},{"__ignoreMap":391},[2981,2989,3005,3044,3080,3116,3152,3188],{"type":398,"tag":467,"props":2982,"children":2983},{"class":469,"line":470},[2984],{"type":398,"tag":467,"props":2985,"children":2986},{"style":1237},[2987],{"type":403,"value":2988},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":398,"tag":467,"props":2990,"children":2991},{"class":469,"line":525},[2992,2996,3001],{"type":398,"tag":467,"props":2993,"children":2994},{"style":577},[2995],{"type":403,"value":1971},{"type":398,"tag":467,"props":2997,"children":2998},{"style":1974},[2999],{"type":403,"value":3000},"cross-domain-policy",{"type":398,"tag":467,"props":3002,"children":3003},{"style":577},[3004],{"type":403,"value":2096},{"type":398,"tag":467,"props":3006,"children":3007},{"class":469,"line":534},[3008,3013,3018,3023,3027,3031,3036,3040],{"type":398,"tag":467,"props":3009,"children":3010},{"style":577},[3011],{"type":403,"value":3012},"  \u003C",{"type":398,"tag":467,"props":3014,"children":3015},{"style":1974},[3016],{"type":403,"value":3017},"allow-access-from",{"type":398,"tag":467,"props":3019,"children":3020},{"style":1980},[3021],{"type":403,"value":3022}," domain",{"type":398,"tag":467,"props":3024,"children":3025},{"style":577},[3026],{"type":403,"value":1988},{"type":398,"tag":467,"props":3028,"children":3029},{"style":504},[3030],{"type":403,"value":1993},{"type":398,"tag":467,"props":3032,"children":3033},{"style":510},[3034],{"type":403,"value":3035},"*.taobao.com",{"type":398,"tag":467,"props":3037,"children":3038},{"style":504},[3039],{"type":403,"value":1993},{"type":398,"tag":467,"props":3041,"children":3042},{"style":577},[3043],{"type":403,"value":2028},{"type":398,"tag":467,"props":3045,"children":3046},{"class":469,"line":560},[3047,3051,3055,3059,3063,3067,3072,3076],{"type":398,"tag":467,"props":3048,"children":3049},{"style":577},[3050],{"type":403,"value":3012},{"type":398,"tag":467,"props":3052,"children":3053},{"style":1974},[3054],{"type":403,"value":3017},{"type":398,"tag":467,"props":3056,"children":3057},{"style":1980},[3058],{"type":403,"value":3022},{"type":398,"tag":467,"props":3060,"children":3061},{"style":577},[3062],{"type":403,"value":1988},{"type":398,"tag":467,"props":3064,"children":3065},{"style":504},[3066],{"type":403,"value":1993},{"type":398,"tag":467,"props":3068,"children":3069},{"style":510},[3070],{"type":403,"value":3071},"*.taobao.net",{"type":398,"tag":467,"props":3073,"children":3074},{"style":504},[3075],{"type":403,"value":1993},{"type":398,"tag":467,"props":3077,"children":3078},{"style":577},[3079],{"type":403,"value":2028},{"type":398,"tag":467,"props":3081,"children":3082},{"class":469,"line":568},[3083,3087,3091,3095,3099,3103,3108,3112],{"type":398,"tag":467,"props":3084,"children":3085},{"style":577},[3086],{"type":403,"value":3012},{"type":398,"tag":467,"props":3088,"children":3089},{"style":1974},[3090],{"type":403,"value":3017},{"type":398,"tag":467,"props":3092,"children":3093},{"style":1980},[3094],{"type":403,"value":3022},{"type":398,"tag":467,"props":3096,"children":3097},{"style":577},[3098],{"type":403,"value":1988},{"type":398,"tag":467,"props":3100,"children":3101},{"style":504},[3102],{"type":403,"value":1993},{"type":398,"tag":467,"props":3104,"children":3105},{"style":510},[3106],{"type":403,"value":3107},"*.taobaocdn.com",{"type":398,"tag":467,"props":3109,"children":3110},{"style":504},[3111],{"type":403,"value":1993},{"type":398,"tag":467,"props":3113,"children":3114},{"style":577},[3115],{"type":403,"value":2028},{"type":398,"tag":467,"props":3117,"children":3118},{"class":469,"line":1293},[3119,3123,3127,3131,3135,3139,3144,3148],{"type":398,"tag":467,"props":3120,"children":3121},{"style":577},[3122],{"type":403,"value":3012},{"type":398,"tag":467,"props":3124,"children":3125},{"style":1974},[3126],{"type":403,"value":3017},{"type":398,"tag":467,"props":3128,"children":3129},{"style":1980},[3130],{"type":403,"value":3022},{"type":398,"tag":467,"props":3132,"children":3133},{"style":577},[3134],{"type":403,"value":1988},{"type":398,"tag":467,"props":3136,"children":3137},{"style":504},[3138],{"type":403,"value":1993},{"type":398,"tag":467,"props":3140,"children":3141},{"style":510},[3142],{"type":403,"value":3143},"*.tbcdn.cn",{"type":398,"tag":467,"props":3145,"children":3146},{"style":504},[3147],{"type":403,"value":1993},{"type":398,"tag":467,"props":3149,"children":3150},{"style":577},[3151],{"type":403,"value":2028},{"type":398,"tag":467,"props":3153,"children":3154},{"class":469,"line":1302},[3155,3159,3163,3167,3171,3175,3180,3184],{"type":398,"tag":467,"props":3156,"children":3157},{"style":577},[3158],{"type":403,"value":3012},{"type":398,"tag":467,"props":3160,"children":3161},{"style":1974},[3162],{"type":403,"value":3017},{"type":398,"tag":467,"props":3164,"children":3165},{"style":1980},[3166],{"type":403,"value":3022},{"type":398,"tag":467,"props":3168,"children":3169},{"style":577},[3170],{"type":403,"value":1988},{"type":398,"tag":467,"props":3172,"children":3173},{"style":504},[3174],{"type":403,"value":1993},{"type":398,"tag":467,"props":3176,"children":3177},{"style":510},[3178],{"type":403,"value":3179},"*.alicdn.com",{"type":398,"tag":467,"props":3181,"children":3182},{"style":504},[3183],{"type":403,"value":1993},{"type":398,"tag":467,"props":3185,"children":3186},{"style":577},[3187],{"type":403,"value":2028},{"type":398,"tag":467,"props":3189,"children":3190},{"class":469,"line":1323},[3191,3196,3200],{"type":398,"tag":467,"props":3192,"children":3193},{"style":577},[3194],{"type":403,"value":3195},"\u003C/",{"type":398,"tag":467,"props":3197,"children":3198},{"style":1974},[3199],{"type":403,"value":3000},{"type":398,"tag":467,"props":3201,"children":3202},{"style":577},[3203],{"type":403,"value":2096},{"type":398,"tag":399,"props":3205,"children":3206},{},[3207,3209,3214,3216,3221],{"type":403,"value":3208},"其中，若请求响应头包含了 ",{"type":398,"tag":463,"props":3210,"children":3212},{"className":3211},[],[3213],{"type":403,"value":2923},{"type":403,"value":3215},"，便可指定浏览器针对 ",{"type":398,"tag":463,"props":3217,"children":3219},{"className":3218},[],[3220],{"type":403,"value":2966},{"type":403,"value":3222}," 的应对行为。",{"type":398,"tag":456,"props":3224,"children":3226},{"code":3225,"language":459,"meta":391,"className":460,"style":391},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3227],{"type":398,"tag":463,"props":3228,"children":3229},{"__ignoreMap":391},[3230,3258,3266,3286,3294,3314,3322,3342,3350,3367,3374,3419,3467,3510,3521,3528],{"type":398,"tag":467,"props":3231,"children":3232},{"class":469,"line":470},[3233,3237,3242,3246,3250,3254],{"type":398,"tag":467,"props":3234,"children":3235},{"style":474},[3236],{"type":403,"value":477},{"type":398,"tag":467,"props":3238,"children":3239},{"style":480},[3240],{"type":403,"value":3241}," ALLOWED_PERMITTED_POLICIES",{"type":398,"tag":467,"props":3243,"children":3244},{"style":486},[3245],{"type":403,"value":489},{"type":398,"tag":467,"props":3247,"children":3248},{"style":486},[3249],{"type":403,"value":1221},{"type":398,"tag":467,"props":3251,"children":3252},{"style":492},[3253],{"type":403,"value":1226},{"type":398,"tag":467,"props":3255,"children":3256},{"style":498},[3257],{"type":403,"value":1231},{"type":398,"tag":467,"props":3259,"children":3260},{"class":469,"line":525},[3261],{"type":398,"tag":467,"props":3262,"children":3263},{"style":1237},[3264],{"type":403,"value":3265},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":398,"tag":467,"props":3267,"children":3268},{"class":469,"line":534},[3269,3273,3278,3282],{"type":398,"tag":467,"props":3270,"children":3271},{"style":504},[3272],{"type":403,"value":1248},{"type":398,"tag":467,"props":3274,"children":3275},{"style":510},[3276],{"type":403,"value":3277},"master-only",{"type":398,"tag":467,"props":3279,"children":3280},{"style":504},[3281],{"type":403,"value":507},{"type":398,"tag":467,"props":3283,"children":3284},{"style":577},[3285],{"type":403,"value":1262},{"type":398,"tag":467,"props":3287,"children":3288},{"class":469,"line":560},[3289],{"type":398,"tag":467,"props":3290,"children":3291},{"style":1237},[3292],{"type":403,"value":3293},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":398,"tag":467,"props":3295,"children":3296},{"class":469,"line":568},[3297,3301,3306,3310],{"type":398,"tag":467,"props":3298,"children":3299},{"style":504},[3300],{"type":403,"value":1248},{"type":398,"tag":467,"props":3302,"children":3303},{"style":510},[3304],{"type":403,"value":3305},"by-content-type",{"type":398,"tag":467,"props":3307,"children":3308},{"style":504},[3309],{"type":403,"value":507},{"type":398,"tag":467,"props":3311,"children":3312},{"style":577},[3313],{"type":403,"value":1262},{"type":398,"tag":467,"props":3315,"children":3316},{"class":469,"line":1293},[3317],{"type":398,"tag":467,"props":3318,"children":3319},{"style":1237},[3320],{"type":403,"value":3321},"  // 不使用任何位置的 crossdomain.xml\n",{"type":398,"tag":467,"props":3323,"children":3324},{"class":469,"line":1302},[3325,3329,3334,3338],{"type":398,"tag":467,"props":3326,"children":3327},{"style":504},[3328],{"type":403,"value":1248},{"type":398,"tag":467,"props":3330,"children":3331},{"style":510},[3332],{"type":403,"value":3333},"none",{"type":398,"tag":467,"props":3335,"children":3336},{"style":504},[3337],{"type":403,"value":507},{"type":398,"tag":467,"props":3339,"children":3340},{"style":577},[3341],{"type":403,"value":1262},{"type":398,"tag":467,"props":3343,"children":3344},{"class":469,"line":1323},[3345],{"type":398,"tag":467,"props":3346,"children":3347},{"style":1237},[3348],{"type":403,"value":3349},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":398,"tag":467,"props":3351,"children":3352},{"class":469,"line":1332},[3353,3357,3362],{"type":398,"tag":467,"props":3354,"children":3355},{"style":504},[3356],{"type":403,"value":1248},{"type":398,"tag":467,"props":3358,"children":3359},{"style":510},[3360],{"type":403,"value":3361},"all",{"type":398,"tag":467,"props":3363,"children":3364},{"style":504},[3365],{"type":403,"value":3366},"'\n",{"type":398,"tag":467,"props":3368,"children":3369},{"class":469,"line":1353},[3370],{"type":398,"tag":467,"props":3371,"children":3372},{"style":498},[3373],{"type":403,"value":1497},{"type":398,"tag":467,"props":3375,"children":3376},{"class":469,"line":1362},[3377,3381,3386,3390,3395,3399,3403,3407,3411,3415],{"type":398,"tag":467,"props":3378,"children":3379},{"style":474},[3380],{"type":403,"value":1506},{"type":398,"tag":467,"props":3382,"children":3383},{"style":492},[3384],{"type":403,"value":3385}," xPermittedCrossDomainPolicies",{"type":398,"tag":467,"props":3387,"children":3388},{"style":577},[3389],{"type":403,"value":501},{"type":398,"tag":467,"props":3391,"children":3392},{"style":1519},[3393],{"type":403,"value":3394},"headerValue",{"type":398,"tag":467,"props":3396,"children":3397},{"style":486},[3398],{"type":403,"value":489},{"type":398,"tag":467,"props":3400,"children":3401},{"style":504},[3402],{"type":403,"value":797},{"type":398,"tag":467,"props":3404,"children":3405},{"style":510},[3406],{"type":403,"value":3333},{"type":398,"tag":467,"props":3408,"children":3409},{"style":504},[3410],{"type":403,"value":507},{"type":398,"tag":467,"props":3412,"children":3413},{"style":577},[3414],{"type":403,"value":1855},{"type":398,"tag":467,"props":3416,"children":3417},{"style":577},[3418],{"type":403,"value":1558},{"type":398,"tag":467,"props":3420,"children":3421},{"class":469,"line":1383},[3422,3426,3430,3435,3439,3443,3447,3451,3455,3459,3463],{"type":398,"tag":467,"props":3423,"children":3424},{"style":1692},[3425],{"type":403,"value":1695},{"type":398,"tag":467,"props":3427,"children":3428},{"style":474},[3429],{"type":403,"value":1818},{"type":398,"tag":467,"props":3431,"children":3432},{"style":492},[3433],{"type":403,"value":3434}," xPermittedCrossDomainPoliciesMiddleware",{"type":398,"tag":467,"props":3436,"children":3437},{"style":577},[3438],{"type":403,"value":501},{"type":398,"tag":467,"props":3440,"children":3441},{"style":1519},[3442],{"type":403,"value":1832},{"type":398,"tag":467,"props":3444,"children":3445},{"style":577},[3446],{"type":403,"value":792},{"type":398,"tag":467,"props":3448,"children":3449},{"style":1519},[3450],{"type":403,"value":1841},{"type":398,"tag":467,"props":3452,"children":3453},{"style":577},[3454],{"type":403,"value":792},{"type":398,"tag":467,"props":3456,"children":3457},{"style":1519},[3458],{"type":403,"value":1850},{"type":398,"tag":467,"props":3460,"children":3461},{"style":577},[3462],{"type":403,"value":1855},{"type":398,"tag":467,"props":3464,"children":3465},{"style":577},[3466],{"type":403,"value":1558},{"type":398,"tag":467,"props":3468,"children":3469},{"class":469,"line":1392},[3470,3474,3478,3482,3486,3490,3494,3498,3502,3506],{"type":398,"tag":467,"props":3471,"children":3472},{"style":498},[3473],{"type":403,"value":1868},{"type":398,"tag":467,"props":3475,"children":3476},{"style":577},[3477],{"type":403,"value":580},{"type":398,"tag":467,"props":3479,"children":3480},{"style":492},[3481],{"type":403,"value":770},{"type":398,"tag":467,"props":3483,"children":3484},{"style":1611},[3485],{"type":403,"value":501},{"type":398,"tag":467,"props":3487,"children":3488},{"style":504},[3489],{"type":403,"value":507},{"type":398,"tag":467,"props":3491,"children":3492},{"style":510},[3493],{"type":403,"value":2923},{"type":398,"tag":467,"props":3495,"children":3496},{"style":504},[3497],{"type":403,"value":507},{"type":398,"tag":467,"props":3499,"children":3500},{"style":577},[3501],{"type":403,"value":792},{"type":398,"tag":467,"props":3503,"children":3504},{"style":498},[3505],{"type":403,"value":1785},{"type":398,"tag":467,"props":3507,"children":3508},{"style":1611},[3509],{"type":403,"value":522},{"type":398,"tag":467,"props":3511,"children":3512},{"class":469,"line":1413},[3513,3517],{"type":398,"tag":467,"props":3514,"children":3515},{"style":492},[3516],{"type":403,"value":1913},{"type":398,"tag":467,"props":3518,"children":3519},{"style":1611},[3520],{"type":403,"value":557},{"type":398,"tag":467,"props":3522,"children":3523},{"class":469,"line":1422},[3524],{"type":398,"tag":467,"props":3525,"children":3526},{"style":577},[3527],{"type":403,"value":1926},{"type":398,"tag":467,"props":3529,"children":3530},{"class":469,"line":1443},[3531],{"type":398,"tag":467,"props":3532,"children":3533},{"style":577},[3534],{"type":403,"value":1737},{"type":398,"tag":399,"props":3536,"children":3537},{},[3538],{"type":403,"value":3539},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":398,"tag":667,"props":3541,"children":3543},{"id":3542},"开启-csp",[3544],{"type":403,"value":3545},"开启 CSP",{"type":398,"tag":399,"props":3547,"children":3548},{},[3549,3551,3556,3558,3563,3565,3570,3572,3583],{"type":403,"value":3550},"还记得刚才提到 Chrome 关闭了 ",{"type":398,"tag":463,"props":3552,"children":3554},{"className":3553},[],[3555],{"type":403,"value":920},{"type":403,"value":3557}," 吗？既然不再使用 ",{"type":398,"tag":463,"props":3559,"children":3561},{"className":3560},[],[3562],{"type":403,"value":920},{"type":403,"value":3564},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":398,"tag":463,"props":3566,"children":3568},{"className":3567},[],[3569],{"type":403,"value":948},{"type":403,"value":3571}," 标准",{"type":398,"tag":406,"props":3573,"children":3574},{},[3575],{"type":398,"tag":410,"props":3576,"children":3580},{"href":3577,"ariaDescribedBy":3578,"dataFootnoteRef":391,"id":3579},"#user-content-fn-csp-standard",[414],"user-content-fnref-csp-standard",[3581],{"type":403,"value":3582},"12",{"type":403,"value":3584},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":398,"tag":399,"props":3586,"children":3587},{},[3588,3593],{"type":398,"tag":463,"props":3589,"children":3591},{"className":3590},[],[3592],{"type":403,"value":948},{"type":403,"value":3594}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":398,"tag":456,"props":3596,"children":3598},{"code":3597,"language":1958,"meta":391,"className":1959,"style":391},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3599],{"type":398,"tag":463,"props":3600,"children":3601},{"__ignoreMap":391},[3602],{"type":398,"tag":467,"props":3603,"children":3604},{"class":469,"line":470},[3605,3609,3613,3618,3622,3626,3631,3635,3639,3643,3647,3652,3656],{"type":398,"tag":467,"props":3606,"children":3607},{"style":577},[3608],{"type":403,"value":1971},{"type":398,"tag":467,"props":3610,"children":3611},{"style":1974},[3612],{"type":403,"value":1977},{"type":398,"tag":467,"props":3614,"children":3615},{"style":1980},[3616],{"type":403,"value":3617}," http-equiv",{"type":398,"tag":467,"props":3619,"children":3620},{"style":577},[3621],{"type":403,"value":1988},{"type":398,"tag":467,"props":3623,"children":3624},{"style":504},[3625],{"type":403,"value":1993},{"type":398,"tag":467,"props":3627,"children":3628},{"style":510},[3629],{"type":403,"value":3630},"Content-Security-Policy",{"type":398,"tag":467,"props":3632,"children":3633},{"style":504},[3634],{"type":403,"value":1993},{"type":398,"tag":467,"props":3636,"children":3637},{"style":1980},[3638],{"type":403,"value":2007},{"type":398,"tag":467,"props":3640,"children":3641},{"style":577},[3642],{"type":403,"value":1988},{"type":398,"tag":467,"props":3644,"children":3645},{"style":504},[3646],{"type":403,"value":1993},{"type":398,"tag":467,"props":3648,"children":3649},{"style":510},[3650],{"type":403,"value":3651},"default-src 'self'; img-src https://*; child-src 'none';",{"type":398,"tag":467,"props":3653,"children":3654},{"style":504},[3655],{"type":403,"value":1993},{"type":398,"tag":467,"props":3657,"children":3658},{"style":577},[3659],{"type":403,"value":2028},{"type":398,"tag":399,"props":3661,"children":3662},{},[3663,3665,3670],{"type":403,"value":3664},"一个典型的 ",{"type":398,"tag":463,"props":3666,"children":3668},{"className":3667},[],[3669],{"type":403,"value":948},{"type":403,"value":3671}," 头如下：",{"type":398,"tag":456,"props":3673,"children":3675},{"code":3674},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3676],{"type":398,"tag":463,"props":3677,"children":3678},{"__ignoreMap":391},[3679],{"type":403,"value":3674},{"type":398,"tag":399,"props":3681,"children":3682},{},[3683],{"type":403,"value":3684},"大致来说，CSP 相关以下几种安全行为：",{"type":398,"tag":3686,"props":3687,"children":3688},"ul",{},[3689,3694,3699,3704],{"type":398,"tag":2951,"props":3690,"children":3691},{},[3692],{"type":403,"value":3693},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":398,"tag":2951,"props":3695,"children":3696},{},[3697],{"type":403,"value":3698},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":398,"tag":2951,"props":3700,"children":3701},{},[3702],{"type":403,"value":3703},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":398,"tag":2951,"props":3705,"children":3706},{},[3707,3709,3715],{"type":403,"value":3708},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":398,"tag":463,"props":3710,"children":3712},{"className":3711},[],[3713],{"type":403,"value":3714},"Content-Security-Policy-Report-Only",{"type":403,"value":3716}," Header。",{"type":398,"tag":399,"props":3718,"children":3719},{},[3720,3722,3727],{"type":403,"value":3721},"那么我们看看 Helmet 中默认配置的 ",{"type":398,"tag":463,"props":3723,"children":3725},{"className":3724},[],[3726],{"type":403,"value":948},{"type":403,"value":3728}," 策略：",{"type":398,"tag":456,"props":3730,"children":3732},{"code":3731,"language":459,"meta":391,"className":460,"style":391},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3733],{"type":398,"tag":463,"props":3734,"children":3735},{"__ignoreMap":391},[3736,3756,3764,3811,3819,3863,3871,3900,3908,3986,3994,4037,4045,4105,4113,4158,4166,4210,4218,4226,4234,4242,4291,4299,4377,4385,4393,4401,4426],{"type":398,"tag":467,"props":3737,"children":3738},{"class":469,"line":470},[3739,3743,3748,3752],{"type":398,"tag":467,"props":3740,"children":3741},{"style":474},[3742],{"type":403,"value":477},{"type":398,"tag":467,"props":3744,"children":3745},{"style":480},[3746],{"type":403,"value":3747}," DEFAULT_DIRECTIVES",{"type":398,"tag":467,"props":3749,"children":3750},{"style":486},[3751],{"type":403,"value":489},{"type":398,"tag":467,"props":3753,"children":3754},{"style":577},[3755],{"type":403,"value":1558},{"type":398,"tag":467,"props":3757,"children":3758},{"class":469,"line":525},[3759],{"type":398,"tag":467,"props":3760,"children":3761},{"style":1237},[3762],{"type":403,"value":3763},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":398,"tag":467,"props":3765,"children":3766},{"class":469,"line":534},[3767,3771,3777,3781,3785,3789,3793,3798,3802,3807],{"type":398,"tag":467,"props":3768,"children":3769},{"style":504},[3770],{"type":403,"value":1248},{"type":398,"tag":467,"props":3772,"children":3774},{"style":3773},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3775],{"type":403,"value":3776},"default-src",{"type":398,"tag":467,"props":3778,"children":3779},{"style":504},[3780],{"type":403,"value":507},{"type":398,"tag":467,"props":3782,"children":3783},{"style":577},[3784],{"type":403,"value":1627},{"type":398,"tag":467,"props":3786,"children":3787},{"style":498},[3788],{"type":403,"value":1531},{"type":398,"tag":467,"props":3790,"children":3791},{"style":504},[3792],{"type":403,"value":1993},{"type":398,"tag":467,"props":3794,"children":3795},{"style":510},[3796],{"type":403,"value":3797},"'self'",{"type":398,"tag":467,"props":3799,"children":3800},{"style":504},[3801],{"type":403,"value":1993},{"type":398,"tag":467,"props":3803,"children":3804},{"style":498},[3805],{"type":403,"value":3806},"]",{"type":398,"tag":467,"props":3808,"children":3809},{"style":577},[3810],{"type":403,"value":1262},{"type":398,"tag":467,"props":3812,"children":3813},{"class":469,"line":560},[3814],{"type":398,"tag":467,"props":3815,"children":3816},{"style":1237},[3817],{"type":403,"value":3818},"  // 限制 base 标签的 URI 为源地址\n",{"type":398,"tag":467,"props":3820,"children":3821},{"class":469,"line":568},[3822,3826,3831,3835,3839,3843,3847,3851,3855,3859],{"type":398,"tag":467,"props":3823,"children":3824},{"style":504},[3825],{"type":403,"value":1248},{"type":398,"tag":467,"props":3827,"children":3828},{"style":3773},[3829],{"type":403,"value":3830},"base-uri",{"type":398,"tag":467,"props":3832,"children":3833},{"style":504},[3834],{"type":403,"value":507},{"type":398,"tag":467,"props":3836,"children":3837},{"style":577},[3838],{"type":403,"value":1627},{"type":398,"tag":467,"props":3840,"children":3841},{"style":498},[3842],{"type":403,"value":1531},{"type":398,"tag":467,"props":3844,"children":3845},{"style":504},[3846],{"type":403,"value":1993},{"type":398,"tag":467,"props":3848,"children":3849},{"style":510},[3850],{"type":403,"value":3797},{"type":398,"tag":467,"props":3852,"children":3853},{"style":504},[3854],{"type":403,"value":1993},{"type":398,"tag":467,"props":3856,"children":3857},{"style":498},[3858],{"type":403,"value":3806},{"type":398,"tag":467,"props":3860,"children":3861},{"style":577},[3862],{"type":403,"value":1262},{"type":398,"tag":467,"props":3864,"children":3865},{"class":469,"line":1293},[3866],{"type":398,"tag":467,"props":3867,"children":3868},{"style":1237},[3869],{"type":403,"value":3870},"  // 禁止通过 HTTP 协议加载内容\n",{"type":398,"tag":467,"props":3872,"children":3873},{"class":469,"line":1302},[3874,3878,3883,3887,3891,3896],{"type":398,"tag":467,"props":3875,"children":3876},{"style":504},[3877],{"type":403,"value":1248},{"type":398,"tag":467,"props":3879,"children":3880},{"style":3773},[3881],{"type":403,"value":3882},"block-all-mixed-content",{"type":398,"tag":467,"props":3884,"children":3885},{"style":504},[3886],{"type":403,"value":507},{"type":398,"tag":467,"props":3888,"children":3889},{"style":577},[3890],{"type":403,"value":1627},{"type":398,"tag":467,"props":3892,"children":3893},{"style":498},[3894],{"type":403,"value":3895}," []",{"type":398,"tag":467,"props":3897,"children":3898},{"style":577},[3899],{"type":403,"value":1262},{"type":398,"tag":467,"props":3901,"children":3902},{"class":469,"line":1323},[3903],{"type":398,"tag":467,"props":3904,"children":3905},{"style":1237},[3906],{"type":403,"value":3907},"  // 限制字体加载地址\n",{"type":398,"tag":467,"props":3909,"children":3910},{"class":469,"line":1332},[3911,3915,3920,3924,3928,3932,3936,3940,3944,3948,3952,3957,3961,3965,3969,3974,3978,3982],{"type":398,"tag":467,"props":3912,"children":3913},{"style":504},[3914],{"type":403,"value":1248},{"type":398,"tag":467,"props":3916,"children":3917},{"style":3773},[3918],{"type":403,"value":3919},"font-src",{"type":398,"tag":467,"props":3921,"children":3922},{"style":504},[3923],{"type":403,"value":507},{"type":398,"tag":467,"props":3925,"children":3926},{"style":577},[3927],{"type":403,"value":1627},{"type":398,"tag":467,"props":3929,"children":3930},{"style":498},[3931],{"type":403,"value":1531},{"type":398,"tag":467,"props":3933,"children":3934},{"style":504},[3935],{"type":403,"value":1993},{"type":398,"tag":467,"props":3937,"children":3938},{"style":510},[3939],{"type":403,"value":3797},{"type":398,"tag":467,"props":3941,"children":3942},{"style":504},[3943],{"type":403,"value":1993},{"type":398,"tag":467,"props":3945,"children":3946},{"style":577},[3947],{"type":403,"value":792},{"type":398,"tag":467,"props":3949,"children":3950},{"style":504},[3951],{"type":403,"value":797},{"type":398,"tag":467,"props":3953,"children":3954},{"style":510},[3955],{"type":403,"value":3956},"https:",{"type":398,"tag":467,"props":3958,"children":3959},{"style":504},[3960],{"type":403,"value":507},{"type":398,"tag":467,"props":3962,"children":3963},{"style":577},[3964],{"type":403,"value":792},{"type":398,"tag":467,"props":3966,"children":3967},{"style":504},[3968],{"type":403,"value":797},{"type":398,"tag":467,"props":3970,"children":3971},{"style":510},[3972],{"type":403,"value":3973},"data:",{"type":398,"tag":467,"props":3975,"children":3976},{"style":504},[3977],{"type":403,"value":507},{"type":398,"tag":467,"props":3979,"children":3980},{"style":498},[3981],{"type":403,"value":3806},{"type":398,"tag":467,"props":3983,"children":3984},{"style":577},[3985],{"type":403,"value":1262},{"type":398,"tag":467,"props":3987,"children":3988},{"class":469,"line":1353},[3989],{"type":398,"tag":467,"props":3990,"children":3991},{"style":1237},[3992],{"type":403,"value":3993},"  // 限制嵌入的外部资源\n",{"type":398,"tag":467,"props":3995,"children":3996},{"class":469,"line":1362},[3997,4001,4005,4009,4013,4017,4021,4025,4029,4033],{"type":398,"tag":467,"props":3998,"children":3999},{"style":504},[4000],{"type":403,"value":1248},{"type":398,"tag":467,"props":4002,"children":4003},{"style":3773},[4004],{"type":403,"value":1142},{"type":398,"tag":467,"props":4006,"children":4007},{"style":504},[4008],{"type":403,"value":507},{"type":398,"tag":467,"props":4010,"children":4011},{"style":577},[4012],{"type":403,"value":1627},{"type":398,"tag":467,"props":4014,"children":4015},{"style":498},[4016],{"type":403,"value":1531},{"type":398,"tag":467,"props":4018,"children":4019},{"style":504},[4020],{"type":403,"value":1993},{"type":398,"tag":467,"props":4022,"children":4023},{"style":510},[4024],{"type":403,"value":3797},{"type":398,"tag":467,"props":4026,"children":4027},{"style":504},[4028],{"type":403,"value":1993},{"type":398,"tag":467,"props":4030,"children":4031},{"style":498},[4032],{"type":403,"value":3806},{"type":398,"tag":467,"props":4034,"children":4035},{"style":577},[4036],{"type":403,"value":1262},{"type":398,"tag":467,"props":4038,"children":4039},{"class":469,"line":1383},[4040],{"type":398,"tag":467,"props":4041,"children":4042},{"style":1237},[4043],{"type":403,"value":4044},"  // 限制图片加载地址\n",{"type":398,"tag":467,"props":4046,"children":4047},{"class":469,"line":1392},[4048,4052,4057,4061,4065,4069,4073,4077,4081,4085,4089,4093,4097,4101],{"type":398,"tag":467,"props":4049,"children":4050},{"style":504},[4051],{"type":403,"value":1248},{"type":398,"tag":467,"props":4053,"children":4054},{"style":3773},[4055],{"type":403,"value":4056},"img-src",{"type":398,"tag":467,"props":4058,"children":4059},{"style":504},[4060],{"type":403,"value":507},{"type":398,"tag":467,"props":4062,"children":4063},{"style":577},[4064],{"type":403,"value":1627},{"type":398,"tag":467,"props":4066,"children":4067},{"style":498},[4068],{"type":403,"value":1531},{"type":398,"tag":467,"props":4070,"children":4071},{"style":504},[4072],{"type":403,"value":1993},{"type":398,"tag":467,"props":4074,"children":4075},{"style":510},[4076],{"type":403,"value":3797},{"type":398,"tag":467,"props":4078,"children":4079},{"style":504},[4080],{"type":403,"value":1993},{"type":398,"tag":467,"props":4082,"children":4083},{"style":577},[4084],{"type":403,"value":792},{"type":398,"tag":467,"props":4086,"children":4087},{"style":504},[4088],{"type":403,"value":797},{"type":398,"tag":467,"props":4090,"children":4091},{"style":510},[4092],{"type":403,"value":3973},{"type":398,"tag":467,"props":4094,"children":4095},{"style":504},[4096],{"type":403,"value":507},{"type":398,"tag":467,"props":4098,"children":4099},{"style":498},[4100],{"type":403,"value":3806},{"type":398,"tag":467,"props":4102,"children":4103},{"style":577},[4104],{"type":403,"value":1262},{"type":398,"tag":467,"props":4106,"children":4107},{"class":469,"line":1413},[4108],{"type":398,"tag":467,"props":4109,"children":4110},{"style":1237},[4111],{"type":403,"value":4112},"  // 禁用 object 标签\n",{"type":398,"tag":467,"props":4114,"children":4115},{"class":469,"line":1422},[4116,4120,4125,4129,4133,4137,4141,4146,4150,4154],{"type":398,"tag":467,"props":4117,"children":4118},{"style":504},[4119],{"type":403,"value":1248},{"type":398,"tag":467,"props":4121,"children":4122},{"style":3773},[4123],{"type":403,"value":4124},"object-src",{"type":398,"tag":467,"props":4126,"children":4127},{"style":504},[4128],{"type":403,"value":507},{"type":398,"tag":467,"props":4130,"children":4131},{"style":577},[4132],{"type":403,"value":1627},{"type":398,"tag":467,"props":4134,"children":4135},{"style":498},[4136],{"type":403,"value":1531},{"type":398,"tag":467,"props":4138,"children":4139},{"style":504},[4140],{"type":403,"value":1993},{"type":398,"tag":467,"props":4142,"children":4143},{"style":510},[4144],{"type":403,"value":4145},"'none'",{"type":398,"tag":467,"props":4147,"children":4148},{"style":504},[4149],{"type":403,"value":1993},{"type":398,"tag":467,"props":4151,"children":4152},{"style":498},[4153],{"type":403,"value":3806},{"type":398,"tag":467,"props":4155,"children":4156},{"style":577},[4157],{"type":403,"value":1262},{"type":398,"tag":467,"props":4159,"children":4160},{"class":469,"line":1443},[4161],{"type":398,"tag":467,"props":4162,"children":4163},{"style":1237},[4164],{"type":403,"value":4165},"  // 只从源地址加载脚本\n",{"type":398,"tag":467,"props":4167,"children":4168},{"class":469,"line":1452},[4169,4173,4178,4182,4186,4190,4194,4198,4202,4206],{"type":398,"tag":467,"props":4170,"children":4171},{"style":504},[4172],{"type":403,"value":1248},{"type":398,"tag":467,"props":4174,"children":4175},{"style":3773},[4176],{"type":403,"value":4177},"script-src",{"type":398,"tag":467,"props":4179,"children":4180},{"style":504},[4181],{"type":403,"value":507},{"type":398,"tag":467,"props":4183,"children":4184},{"style":577},[4185],{"type":403,"value":1627},{"type":398,"tag":467,"props":4187,"children":4188},{"style":498},[4189],{"type":403,"value":1531},{"type":398,"tag":467,"props":4191,"children":4192},{"style":504},[4193],{"type":403,"value":1993},{"type":398,"tag":467,"props":4195,"children":4196},{"style":510},[4197],{"type":403,"value":3797},{"type":398,"tag":467,"props":4199,"children":4200},{"style":504},[4201],{"type":403,"value":1993},{"type":398,"tag":467,"props":4203,"children":4204},{"style":498},[4205],{"type":403,"value":3806},{"type":398,"tag":467,"props":4207,"children":4208},{"style":577},[4209],{"type":403,"value":1262},{"type":398,"tag":467,"props":4211,"children":4212},{"class":469,"line":1473},[4213],{"type":398,"tag":467,"props":4214,"children":4215},{"style":1237},[4216],{"type":403,"value":4217},"  // 禁用内联脚本\n",{"type":398,"tag":467,"props":4219,"children":4220},{"class":469,"line":1482},[4221],{"type":398,"tag":467,"props":4222,"children":4223},{"style":1237},[4224],{"type":403,"value":4225},"  // ？这里没能理解\n",{"type":398,"tag":467,"props":4227,"children":4228},{"class":469,"line":1491},[4229],{"type":398,"tag":467,"props":4230,"children":4231},{"style":1237},[4232],{"type":403,"value":4233},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":398,"tag":467,"props":4235,"children":4236},{"class":469,"line":1500},[4237],{"type":398,"tag":467,"props":4238,"children":4239},{"style":1237},[4240],{"type":403,"value":4241},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":398,"tag":467,"props":4243,"children":4244},{"class":469,"line":1561},[4245,4249,4254,4258,4262,4266,4270,4274,4278,4282,4286],{"type":398,"tag":467,"props":4246,"children":4247},{"style":504},[4248],{"type":403,"value":1248},{"type":398,"tag":467,"props":4250,"children":4251},{"style":3773},[4252],{"type":403,"value":4253},"script-src-attr",{"type":398,"tag":467,"props":4255,"children":4256},{"style":504},[4257],{"type":403,"value":507},{"type":398,"tag":467,"props":4259,"children":4260},{"style":577},[4261],{"type":403,"value":1627},{"type":398,"tag":467,"props":4263,"children":4264},{"style":498},[4265],{"type":403,"value":1531},{"type":398,"tag":467,"props":4267,"children":4268},{"style":504},[4269],{"type":403,"value":1993},{"type":398,"tag":467,"props":4271,"children":4272},{"style":510},[4273],{"type":403,"value":4145},{"type":398,"tag":467,"props":4275,"children":4276},{"style":504},[4277],{"type":403,"value":1993},{"type":398,"tag":467,"props":4279,"children":4280},{"style":498},[4281],{"type":403,"value":3806},{"type":398,"tag":467,"props":4283,"children":4284},{"style":577},[4285],{"type":403,"value":792},{"type":398,"tag":467,"props":4287,"children":4288},{"style":498},[4289],{"type":403,"value":4290},"‘\n",{"type":398,"tag":467,"props":4292,"children":4293},{"class":469,"line":1635},[4294],{"type":398,"tag":467,"props":4295,"children":4296},{"style":1237},[4297],{"type":403,"value":4298},"  // 限制样式表加载地址\n",{"type":398,"tag":467,"props":4300,"children":4301},{"class":469,"line":1666},[4302,4306,4311,4315,4319,4323,4327,4331,4335,4339,4343,4347,4351,4355,4360,4365,4369,4373],{"type":398,"tag":467,"props":4303,"children":4304},{"style":504},[4305],{"type":403,"value":1248},{"type":398,"tag":467,"props":4307,"children":4308},{"style":3773},[4309],{"type":403,"value":4310},"style-src",{"type":398,"tag":467,"props":4312,"children":4313},{"style":504},[4314],{"type":403,"value":507},{"type":398,"tag":467,"props":4316,"children":4317},{"style":577},[4318],{"type":403,"value":1627},{"type":398,"tag":467,"props":4320,"children":4321},{"style":498},[4322],{"type":403,"value":1531},{"type":398,"tag":467,"props":4324,"children":4325},{"style":504},[4326],{"type":403,"value":1993},{"type":398,"tag":467,"props":4328,"children":4329},{"style":510},[4330],{"type":403,"value":3797},{"type":398,"tag":467,"props":4332,"children":4333},{"style":504},[4334],{"type":403,"value":1993},{"type":398,"tag":467,"props":4336,"children":4337},{"style":577},[4338],{"type":403,"value":792},{"type":398,"tag":467,"props":4340,"children":4341},{"style":504},[4342],{"type":403,"value":797},{"type":398,"tag":467,"props":4344,"children":4345},{"style":510},[4346],{"type":403,"value":3956},{"type":398,"tag":467,"props":4348,"children":4349},{"style":504},[4350],{"type":403,"value":507},{"type":398,"tag":467,"props":4352,"children":4353},{"style":577},[4354],{"type":403,"value":792},{"type":398,"tag":467,"props":4356,"children":4357},{"style":504},[4358],{"type":403,"value":4359}," \"",{"type":398,"tag":467,"props":4361,"children":4362},{"style":510},[4363],{"type":403,"value":4364},"'unsafe-inline'",{"type":398,"tag":467,"props":4366,"children":4367},{"style":504},[4368],{"type":403,"value":1993},{"type":398,"tag":467,"props":4370,"children":4371},{"style":498},[4372],{"type":403,"value":3806},{"type":398,"tag":467,"props":4374,"children":4375},{"style":577},[4376],{"type":403,"value":1262},{"type":398,"tag":467,"props":4378,"children":4379},{"class":469,"line":1679},[4380],{"type":398,"tag":467,"props":4381,"children":4382},{"style":1237},[4383],{"type":403,"value":4384},"  // 不使用升级协议指令\n",{"type":398,"tag":467,"props":4386,"children":4387},{"class":469,"line":1688},[4388],{"type":398,"tag":467,"props":4389,"children":4390},{"style":1237},[4391],{"type":403,"value":4392},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":398,"tag":467,"props":4394,"children":4395},{"class":469,"line":1731},[4396],{"type":398,"tag":467,"props":4397,"children":4398},{"style":1237},[4399],{"type":403,"value":4400},"  // 所以默认不开启此指令\n",{"type":398,"tag":467,"props":4402,"children":4403},{"class":469,"line":1740},[4404,4408,4413,4417,4421],{"type":398,"tag":467,"props":4405,"children":4406},{"style":504},[4407],{"type":403,"value":1248},{"type":398,"tag":467,"props":4409,"children":4410},{"style":3773},[4411],{"type":403,"value":4412},"upgrade-insecure-requests",{"type":398,"tag":467,"props":4414,"children":4415},{"style":504},[4416],{"type":403,"value":507},{"type":398,"tag":467,"props":4418,"children":4419},{"style":577},[4420],{"type":403,"value":1627},{"type":398,"tag":467,"props":4422,"children":4423},{"style":498},[4424],{"type":403,"value":4425}," []\n",{"type":398,"tag":467,"props":4427,"children":4428},{"class":469,"line":1775},[4429],{"type":398,"tag":467,"props":4430,"children":4431},{"style":577},[4432],{"type":403,"value":1737},{"type":398,"tag":399,"props":4434,"children":4435},{},[4436,4438,4444,4446,4452],{"type":403,"value":4437},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":398,"tag":463,"props":4439,"children":4441},{"className":4440},[],[4442],{"type":403,"value":4443},"CSP 1.0",{"type":403,"value":4445}," 的兼容性，我没有找到最新版本规范（",{"type":398,"tag":463,"props":4447,"children":4449},{"className":4448},[],[4450],{"type":403,"value":4451},"CSP 3.0",{"type":403,"value":4453},"）的兼容性数据 😝。",{"type":398,"tag":399,"props":4455,"children":4456},{},[4457],{"type":398,"tag":1120,"props":4458,"children":4461},{"alt":4459,"src":4460},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":398,"tag":667,"props":4463,"children":4465},{"id":4464},"移除下载文件后的打开按钮",[4466],{"type":403,"value":4467},"移除下载文件后的“打开”按钮",{"type":398,"tag":456,"props":4469,"children":4471},{"code":4470,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('X-Download-Options', 'noopen')\n",[4472],{"type":398,"tag":463,"props":4473,"children":4474},{"__ignoreMap":391},[4475],{"type":398,"tag":467,"props":4476,"children":4477},{"class":469,"line":470},[4478,4482,4486,4490,4494,4498,4503,4507,4511,4515,4520,4524],{"type":398,"tag":467,"props":4479,"children":4480},{"style":498},[4481],{"type":403,"value":687},{"type":398,"tag":467,"props":4483,"children":4484},{"style":577},[4485],{"type":403,"value":580},{"type":398,"tag":467,"props":4487,"children":4488},{"style":492},[4489],{"type":403,"value":770},{"type":398,"tag":467,"props":4491,"children":4492},{"style":498},[4493],{"type":403,"value":501},{"type":398,"tag":467,"props":4495,"children":4496},{"style":504},[4497],{"type":403,"value":507},{"type":398,"tag":467,"props":4499,"children":4500},{"style":510},[4501],{"type":403,"value":4502},"X-Download-Options",{"type":398,"tag":467,"props":4504,"children":4505},{"style":504},[4506],{"type":403,"value":507},{"type":398,"tag":467,"props":4508,"children":4509},{"style":577},[4510],{"type":403,"value":792},{"type":398,"tag":467,"props":4512,"children":4513},{"style":504},[4514],{"type":403,"value":797},{"type":398,"tag":467,"props":4516,"children":4517},{"style":510},[4518],{"type":403,"value":4519},"noopen",{"type":398,"tag":467,"props":4521,"children":4522},{"style":504},[4523],{"type":403,"value":507},{"type":398,"tag":467,"props":4525,"children":4526},{"style":498},[4527],{"type":403,"value":522},{"type":398,"tag":399,"props":4529,"children":4530},{},[4531,4533,4538],{"type":403,"value":4532},"在下载文件时，",{"type":398,"tag":463,"props":4534,"children":4536},{"className":4535},[],[4537],{"type":403,"value":4502},{"type":403,"value":4539}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":398,"tag":667,"props":4541,"children":4543},{"id":4542},"开启-dns-预取",[4544],{"type":403,"value":4545},"开启 DNS 预取",{"type":398,"tag":399,"props":4547,"children":4548},{},[4549,4551,4557],{"type":403,"value":4550},"通过设置 ",{"type":398,"tag":463,"props":4552,"children":4554},{"className":4553},[],[4555],{"type":403,"value":4556},"X-DNS-Prefetch-Control",{"type":403,"value":4558}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":398,"tag":399,"props":4560,"children":4561},{},[4562,4564,4571],{"type":403,"value":4563},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":398,"tag":410,"props":4565,"children":4568},{"href":4566,"rel":4567},"https://github.com/helmetjs/helmet/issues/111",[987],[4569],{"type":403,"value":4570},"Issue",{"type":403,"value":977},{"type":398,"tag":456,"props":4573,"children":4575},{"code":4574,"language":459,"meta":391,"className":460,"style":391},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4576],{"type":398,"tag":463,"props":4577,"children":4578},{"__ignoreMap":391},[4579],{"type":398,"tag":467,"props":4580,"children":4581},{"class":469,"line":470},[4582,4586,4590,4594,4598,4602,4606,4610,4614,4618,4623,4627],{"type":398,"tag":467,"props":4583,"children":4584},{"style":498},[4585],{"type":403,"value":687},{"type":398,"tag":467,"props":4587,"children":4588},{"style":577},[4589],{"type":403,"value":580},{"type":398,"tag":467,"props":4591,"children":4592},{"style":492},[4593],{"type":403,"value":770},{"type":398,"tag":467,"props":4595,"children":4596},{"style":498},[4597],{"type":403,"value":501},{"type":398,"tag":467,"props":4599,"children":4600},{"style":504},[4601],{"type":403,"value":507},{"type":398,"tag":467,"props":4603,"children":4604},{"style":510},[4605],{"type":403,"value":4556},{"type":398,"tag":467,"props":4607,"children":4608},{"style":504},[4609],{"type":403,"value":507},{"type":398,"tag":467,"props":4611,"children":4612},{"style":577},[4613],{"type":403,"value":792},{"type":398,"tag":467,"props":4615,"children":4616},{"style":504},[4617],{"type":403,"value":797},{"type":398,"tag":467,"props":4619,"children":4620},{"style":510},[4621],{"type":403,"value":4622},"on",{"type":398,"tag":467,"props":4624,"children":4625},{"style":504},[4626],{"type":403,"value":507},{"type":398,"tag":467,"props":4628,"children":4629},{"style":498},[4630],{"type":403,"value":522},{"type":398,"tag":636,"props":4632,"children":4634},{"id":4633},"阅读更多",[4635],{"type":403,"value":4633},{"type":398,"tag":399,"props":4637,"children":4638},{},[4639],{"type":403,"value":4640},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":398,"tag":3686,"props":4642,"children":4643},{},[4644],{"type":398,"tag":2951,"props":4645,"children":4646},{},[4647,4649],{"type":403,"value":4648},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":398,"tag":406,"props":4650,"children":4651},{},[4652],{"type":398,"tag":410,"props":4653,"children":4657},{"href":4654,"ariaDescribedBy":4655,"dataFootnoteRef":391,"id":4656},"#user-content-fn-secure-cookie",[414],"user-content-fnref-secure-cookie",[4658],{"type":403,"value":4659},"13",{"type":398,"tag":399,"props":4661,"children":4662},{},[4663,4665,4672,4674,4681],{"type":403,"value":4664},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":398,"tag":410,"props":4666,"children":4669},{"href":4667,"rel":4668},"https://owasp.org/www-project-secure-headers/",[987],[4670],{"type":403,"value":4671},"OWASP Secure Headers Project",{"type":403,"value":4673},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":398,"tag":410,"props":4675,"children":4678},{"href":4676,"rel":4677},"https://infosec.mozilla.org/guidelines/web_security",[987],[4679],{"type":403,"value":4680},"Web Security",{"type":403,"value":4682},"。以下是一些额外的可供探索的页面：",{"type":398,"tag":3686,"props":4684,"children":4685},{},[4686,4696,4706],{"type":398,"tag":2951,"props":4687,"children":4688},{},[4689],{"type":398,"tag":410,"props":4690,"children":4693},{"href":4691,"rel":4692},"https://www.zhihu.com/question/21979782",[987],[4694],{"type":403,"value":4695},"Content Security Policy (CSP) 是什么？",{"type":398,"tag":2951,"props":4697,"children":4698},{},[4699],{"type":398,"tag":410,"props":4700,"children":4703},{"href":4701,"rel":4702},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[987],[4704],{"type":403,"value":4705},"CORS@MDN",{"type":398,"tag":2951,"props":4707,"children":4708},{},[4709],{"type":398,"tag":410,"props":4710,"children":4713},{"href":4711,"rel":4712},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[987],[4714],{"type":403,"value":4715},"OWASP Top 10 2017（RC2）",{"type":398,"tag":4717,"props":4718,"children":4721},"section",{"className":4719,"dataFootnotes":391},[4720],"footnotes",[4722,4729],{"type":398,"tag":636,"props":4723,"children":4726},{"className":4724,"id":414},[4725],"sr-only",[4727],{"type":403,"value":4728},"Footnotes",{"type":398,"tag":2947,"props":4730,"children":4731},{},[4732,4754,4773,4792,4809,4828,4847,4860,4878,4897,4916,4935,4954],{"type":398,"tag":2951,"props":4733,"children":4735},{"id":4734},"user-content-fn-helmet",[4736,4743,4745],{"type":398,"tag":410,"props":4737,"children":4740},{"href":4738,"rel":4739},"https://helmetjs.github.io/",[987],[4741],{"type":403,"value":4742},"HELMET",{"type":403,"value":4744}," ",{"type":398,"tag":410,"props":4746,"children":4751},{"href":4747,"ariaLabel":4748,"className":4749,"dataFootnoteBackref":391},"#user-content-fnref-helmet","Back to reference 1",[4750],"data-footnote-backref",[4752],{"type":403,"value":4753},"↩",{"type":398,"tag":2951,"props":4755,"children":4757},{"id":4756},"user-content-fn-dns-rebinding-1",[4758,4765,4766],{"type":398,"tag":410,"props":4759,"children":4762},{"href":4760,"rel":4761},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[987],[4763],{"type":403,"value":4764},"来自微信外挂的安全风险",{"type":403,"value":4744},{"type":398,"tag":410,"props":4767,"children":4771},{"href":4768,"ariaLabel":4769,"className":4770,"dataFootnoteBackref":391},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4750],[4772],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4774,"children":4776},{"id":4775},"user-content-fn-dns-rebinding-2",[4777,4784,4785],{"type":398,"tag":410,"props":4778,"children":4781},{"href":4779,"rel":4780},"https://github.com/helmetjs/helmet/issues/182",[987],[4782],{"type":403,"value":4783},"GitHub Issue",{"type":403,"value":4744},{"type":398,"tag":410,"props":4786,"children":4790},{"href":4787,"ariaLabel":4788,"className":4789,"dataFootnoteBackref":391},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4750],[4791],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4793,"children":4795},{"id":4794},"user-content-fn-shp",[4796,4801,4802],{"type":398,"tag":410,"props":4797,"children":4799},{"href":4667,"rel":4798},[987],[4800],{"type":403,"value":4671},{"type":403,"value":4744},{"type":398,"tag":410,"props":4803,"children":4807},{"href":4804,"ariaLabel":4805,"className":4806,"dataFootnoteBackref":391},"#user-content-fnref-shp","Back to reference 4",[4750],[4808],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4810,"children":4812},{"id":4811},"user-content-fn-xss-auditor",[4813,4820,4821],{"type":398,"tag":410,"props":4814,"children":4817},{"href":4815,"rel":4816},"https://www.chromestatus.com/feature/5021976655560704",[987],[4818],{"type":403,"value":4819},"XSS Auditor (removed)",{"type":403,"value":4744},{"type":398,"tag":410,"props":4822,"children":4826},{"href":4823,"ariaLabel":4824,"className":4825,"dataFootnoteBackref":391},"#user-content-fnref-xss-auditor","Back to reference 5",[4750],[4827],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4829,"children":4831},{"id":4830},"user-content-fn-delete-xss-auditor",[4832,4839,4840],{"type":398,"tag":410,"props":4833,"children":4836},{"href":4834,"rel":4835},"https://zhuanlan.zhihu.com/p/74288648",[987],[4837],{"type":403,"value":4838},"Google 将删除 Chrome 内置的 XSS 保护",{"type":403,"value":4744},{"type":398,"tag":410,"props":4841,"children":4845},{"href":4842,"ariaLabel":4843,"className":4844,"dataFootnoteBackref":391},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4750],[4846],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4848,"children":4850},{"id":4849},"user-content-fn-referer",[4851,4853],{"type":403,"value":4852},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":398,"tag":410,"props":4854,"children":4858},{"href":4855,"ariaLabel":4856,"className":4857,"dataFootnoteBackref":391},"#user-content-fnref-referer","Back to reference 7",[4750],[4859],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4861,"children":4863},{"id":4862},"user-content-fn-timeend",[4864,4870,4871],{"type":398,"tag":410,"props":4865,"children":4868},{"href":4866,"rel":4867},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[987],[4869],{"type":403,"value":2758},{"type":403,"value":4744},{"type":398,"tag":410,"props":4872,"children":4876},{"href":4873,"ariaLabel":4874,"className":4875,"dataFootnoteBackref":391},"#user-content-fnref-timeend","Back to reference 8",[4750],[4877],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4879,"children":4881},{"id":4880},"user-content-fn-chrome-ct",[4882,4889,4890],{"type":398,"tag":410,"props":4883,"children":4886},{"href":4884,"rel":4885},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[987],[4887],{"type":403,"value":4888},"Chrome 证书透明度（CT）相关政策",{"type":403,"value":4744},{"type":398,"tag":410,"props":4891,"children":4895},{"href":4892,"ariaLabel":4893,"className":4894,"dataFootnoteBackref":391},"#user-content-fnref-chrome-ct","Back to reference 9",[4750],[4896],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4898,"children":4900},{"id":4899},"user-content-fn-ct",[4901,4908,4909],{"type":398,"tag":410,"props":4902,"children":4905},{"href":4903,"rel":4904},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[987],[4906],{"type":403,"value":4907},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":403,"value":4744},{"type":398,"tag":410,"props":4910,"children":4914},{"href":4911,"ariaLabel":4912,"className":4913,"dataFootnoteBackref":391},"#user-content-fnref-ct","Back to reference 10",[4750],[4915],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4917,"children":4919},{"id":4918},"user-content-fn-pdf-reader",[4920,4927,4928],{"type":398,"tag":410,"props":4921,"children":4924},{"href":4922,"rel":4923},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[987],[4925],{"type":403,"value":4926},"Cross Domain Configuration",{"type":403,"value":4744},{"type":398,"tag":410,"props":4929,"children":4933},{"href":4930,"ariaLabel":4931,"className":4932,"dataFootnoteBackref":391},"#user-content-fnref-pdf-reader","Back to reference 11",[4750],[4934],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4936,"children":4938},{"id":4937},"user-content-fn-csp-standard",[4939,4946,4947],{"type":398,"tag":410,"props":4940,"children":4943},{"href":4941,"rel":4942},"https://www.w3.org/TR/CSP/",[987],[4944],{"type":403,"value":4945},"Content Security Policy Level 3",{"type":403,"value":4744},{"type":398,"tag":410,"props":4948,"children":4952},{"href":4949,"ariaLabel":4950,"className":4951,"dataFootnoteBackref":391},"#user-content-fnref-csp-standard","Back to reference 12",[4750],[4953],{"type":403,"value":4753},{"type":398,"tag":2951,"props":4955,"children":4957},{"id":4956},"user-content-fn-secure-cookie",[4958,4965,4966],{"type":398,"tag":410,"props":4959,"children":4962},{"href":4960,"rel":4961},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[987],[4963],{"type":403,"value":4964},"Secure-Cookie",{"type":403,"value":4744},{"type":398,"tag":410,"props":4967,"children":4971},{"href":4968,"ariaLabel":4969,"className":4970,"dataFootnoteBackref":391},"#user-content-fnref-secure-cookie","Back to reference 13",[4750],[4972],{"type":403,"value":4753},{"type":398,"tag":4974,"props":4975,"children":4976},"style",{},[4977],{"type":403,"value":4978},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":391,"searchDepth":525,"depth":525,"links":4980},[4981,4994,4995],{"id":638,"depth":525,"text":641,"children":4982},[4983,4984,4985,4986,4987,4988,4989,4990,4991,4992,4993],{"id":669,"depth":534,"text":672},{"id":744,"depth":534,"text":747},{"id":834,"depth":534,"text":837},{"id":994,"depth":534,"text":994},{"id":1153,"depth":534,"text":1156},{"id":2164,"depth":534,"text":2167},{"id":2802,"depth":534,"text":2802},{"id":2911,"depth":534,"text":2914},{"id":3542,"depth":534,"text":3545},{"id":4464,"depth":534,"text":4467},{"id":4542,"depth":534,"text":4545},{"id":4633,"depth":525,"text":4633},{"id":414,"depth":525,"text":4728},"markdown","content:_archieved:2020-08:helmet-and-security.md","content","_archieved/2020-08/helmet-and-security.md","md",[5002,5006],{"_path":5003,"title":5004,"description":5005},"/_archieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5007,"title":5008,"description":391},"/_archieved/2020-10/noname","无题",1710257719936]