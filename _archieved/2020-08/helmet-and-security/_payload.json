[{"data":1,"prerenderedAt":5012},["Reactive",2],{"navigation":3,"/_archieved/2020-08/helmet-and-security":389,"/_archieved/2020-08/helmet-and-security-surround":5004},[4,32,83,99,126,132,138,372,378,384],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96],{"title":88,"_path":89},"🌐 AnySort","/tools/anysort",{"title":91,"_path":92},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":94,"_path":95},"👓 Crapto","/tools/crypto-inline",{"title":97,"_path":98},"🖨️ any-to-base64","/tools/any-to-base64",{"title":100,"_path":101,"children":102},"吉他剧场 / Music","/music",[103,105,108,111,114,117,120,123],{"title":104,"_path":101},"🎸 FingerStyle！",{"title":106,"_path":107},"🌬️ 等待的风","/music/wind",{"title":109,"_path":110},"💕 约定的海洋","/music/ocean",{"title":112,"_path":113},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":115,"_path":116},"🌏 残酷天使的行动纲领","/music/eva",{"title":118,"_path":119},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":121,"_path":122},"🍷 Wu Wei","/music/wu-wei",{"title":124,"_path":125},"🌅 无题","/music/untitled",{"title":127,"_path":128,"children":129},"画点什么 / Paint","/paint",[130],{"title":131,"_path":128},"🚧 正在施工",{"title":133,"_path":134,"children":135},"知识地图 / Maps","/maps",[136],{"title":137,"_path":134},"🏁 知识地图",{"title":139,"_path":140,"children":141},"零散的笔记 / Gists","/gists",[142,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369],{"title":143,"_path":140},"🧊 Gists",{"title":145,"_path":146},"网站的可访问性","/gists/accessibility",{"title":148,"_path":149},"Bit","/gists/bit",{"title":151,"_path":152},"图片模糊","/gists/blur",{"title":154,"_path":155},"渲染相关笔记","/gists/c4d",{"title":157,"_path":158},"CDN 问题记录","/gists/cdn",{"title":160,"_path":161},"消毒剂","/gists/cleaner",{"title":163,"_path":164},"Windows Command","/gists/cmd",{"title":166,"_path":167},"Command","/gists/command",{"title":169,"_path":170},"复杂科学","/gists/complexity-science",{"title":172,"_path":173},"宇宙","/gists/cosmos",{"title":175,"_path":176},"C++","/gists/cpp",{"title":178,"_path":179},"Data Structure","/gists/data-structure",{"title":181,"_path":182},"DEPRESSION","/gists/depression",{"title":184,"_path":185},"设计模式","/gists/design-patterns",{"title":187,"_path":188},"Developer Experience","/gists/developer-experience",{"title":190,"_path":191},"Device Metrics","/gists/device-metrix",{"title":193,"_path":194},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":196,"_path":197},"正则表达式","/gists/eegex",{"title":199,"_path":200},"Emoji","/gists/emoji",{"title":202,"_path":203},"工程","/gists/engineering",{"title":205,"_path":206},"熵","/gists/entropy",{"title":208,"_path":209},"Environment","/gists/environment",{"title":211,"_path":212},"Erlang","/gists/erlang",{"title":214,"_path":215},"逃离塔克夫","/gists/escape-from-tarkov",{"title":217,"_path":218},"ESNext (ES6-ES11)","/gists/esnext",{"title":220,"_path":221},"Eval！","/gists/eval",{"title":223,"_path":224},"Flutter","/gists/flutter",{"title":226,"_path":227},"字体","/gists/font",{"title":229,"_path":230},"JS 函数式编程","/gists/functional",{"title":232,"_path":233},"Google C++ Standard","/gists/google-cpp-standard",{"title":235,"_path":236},"双向链接完全体","/gists/graph",{"title":238,"_path":239},"Hardwares","/gists/hardwares",{"title":241,"_path":242},"哈希冲突","/gists/hash-collision",{"title":244,"_path":245},"信息设计","/gists/information-design",{"title":247,"_path":248},"InstantPage","/gists/instant.page",{"title":250,"_path":251},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":253,"_path":254},"KVStore","/gists/key-value-db",{"title":256,"_path":257},"Kubernetes","/gists/kubernetes",{"title":259,"_path":260},"Makefile","/gists/makefile",{"title":262,"_path":263},"Markdown Inline Style","/gists/markdown-nice",{"title":265,"_path":266},"小程序","/gists/miniapp",{"title":268,"_path":269},"减小页面快照体积","/gists/minify-html",{"title":271,"_path":272},"mklink","/gists/mklink",{"title":274,"_path":275},"Mock","/gists/mock",{"title":277,"_path":278},"多端应用","/gists/multy-end-app",{"title":280,"_path":281},"神经科学","/gists/neuroscience",{"title":283,"_path":284},"OO","/gists/oo",{"title":286,"_path":287},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":289,"_path":290},"人物","/gists/person",{"title":292,"_path":293},"PInvoke","/gists/pinvoke",{"title":295,"_path":296},"像素","/gists/pixel",{"title":298,"_path":299},"PowerShell","/gists/powershell",{"title":301,"_path":302},"量子","/gists/quantum",{"title":304,"_path":305},"保持好奇心","/gists/questions",{"title":307,"_path":308},"React Native","/gists/react-native",{"title":310,"_path":311},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":313,"_path":314},"SEO","/gists/seo",{"title":316,"_path":317},"Shader","/gists/shader",{"title":319,"_path":320},"Shape Up","/gists/shape-up",{"title":322,"_path":323},"睡觉","/gists/sleep",{"title":325,"_path":326},"States","/gists/states",{"title":328,"_path":329},"Storage","/gists/storage",{"title":331,"_path":332},"音视频流处理","/gists/stream-cli",{"title":334,"_path":335},"Symbol","/gists/symbol",{"title":337,"_path":338},"系统论","/gists/systems-theory",{"title":340,"_path":341},"Taro","/gists/taro",{"title":343,"_path":344},"任务切片","/gists/task-slice",{"title":346,"_path":347},"技术偏好","/gists/tech-dudge",{"title":349,"_path":350},"Untitled","/gists/untitled",{"title":352,"_path":353},"可变字体","/gists/variable-font",{"title":355,"_path":356},"视觉错觉","/gists/visual-illusion",{"title":358,"_path":359},"SS(SSR)","/gists/vpn",{"title":361,"_path":362},"VS Code 插件开发","/gists/vscode-plugin",{"title":364,"_path":365},"Web Components","/gists/web-components",{"title":367,"_path":368},"Windows","/gists/windows",{"title":370,"_path":371},"查缺补漏","/gists/wrong",{"title":373,"_path":374,"children":375},"代码笔记 / Gists","/source-code",[376],{"title":377,"_path":374},"🚄 代码笔记",{"title":379,"_path":380,"children":381},"我 / Abount","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"title":385,"_path":386,"children":387},"todo","/todo",[388],{"title":385,"_path":386},{"_path":390,"_dir":391,"_draft":392,"_partial":393,"_locale":394,"title":395,"description":396,"body":397,"_type":4999,"_id":5000,"_source":5001,"_file":5002,"_extension":5003},"/_archieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":398,"children":399,"toc":4982},"root",[400,422,453,458,620,625,633,638,645,669,676,721,733,745,751,814,835,841,901,913,981,995,1000,1060,1085,1119,1128,1154,1160,1197,1938,1958,2165,2171,2196,2239,2247,2803,2808,2856,2892,2900,2912,2918,2942,2949,2972,2977,3207,3226,3538,3543,3549,3588,3598,3663,3675,3683,3688,3720,3732,4436,4457,4465,4471,4531,4543,4549,4562,4575,4634,4639,4644,4663,4686,4719,4976],{"type":401,"tag":402,"props":403,"children":404},"element","p",{},[405,408],{"type":406,"value":407},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":401,"tag":409,"props":410,"children":411},"sup",{},[412],{"type":401,"tag":413,"props":414,"children":419},"a",{"href":415,"ariaDescribedBy":416,"dataFootnoteRef":394,"id":418},"#user-content-fn-helmet",[417],"footnote-label","user-content-fnref-helmet",[420],{"type":406,"value":421},"1",{"type":401,"tag":402,"props":423,"children":424},{},[425,427,438,440,451],{"type":406,"value":426},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":401,"tag":409,"props":428,"children":429},{},[430],{"type":401,"tag":413,"props":431,"children":435},{"href":432,"ariaDescribedBy":433,"dataFootnoteRef":394,"id":434},"#user-content-fn-dns-rebinding-1",[417],"user-content-fnref-dns-rebinding-1",[436],{"type":406,"value":437},"2",{"type":406,"value":439}," 问题，它就无能为力",{"type":401,"tag":409,"props":441,"children":442},{},[443],{"type":401,"tag":413,"props":444,"children":448},{"href":445,"ariaDescribedBy":446,"dataFootnoteRef":394,"id":447},"#user-content-fn-dns-rebinding-2",[417],"user-content-fnref-dns-rebinding-2",[449],{"type":406,"value":450},"3",{"type":406,"value":452},"。不过尽管不是银弹，它确实还是很有效的。",{"type":401,"tag":402,"props":454,"children":455},{},[456],{"type":406,"value":457},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":401,"tag":459,"props":460,"children":464},"pre",{"code":461,"language":462,"meta":394,"className":463,"style":394},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[465],{"type":401,"tag":466,"props":467,"children":468},"code",{"__ignoreMap":394},[469,526,535,561,569],{"type":401,"tag":470,"props":471,"children":474},"span",{"class":472,"line":473},"line",1,[475,481,487,493,499,505,511,517,521],{"type":401,"tag":470,"props":476,"children":478},{"style":477},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[479],{"type":406,"value":480},"const",{"type":401,"tag":470,"props":482,"children":484},{"style":483},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[485],{"type":406,"value":486}," express",{"type":401,"tag":470,"props":488,"children":490},{"style":489},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[491],{"type":406,"value":492}," =",{"type":401,"tag":470,"props":494,"children":496},{"style":495},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[497],{"type":406,"value":498}," require",{"type":401,"tag":470,"props":500,"children":502},{"style":501},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[503],{"type":406,"value":504},"(",{"type":401,"tag":470,"props":506,"children":508},{"style":507},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[509],{"type":406,"value":510},"'",{"type":401,"tag":470,"props":512,"children":514},{"style":513},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[515],{"type":406,"value":516},"express",{"type":401,"tag":470,"props":518,"children":519},{"style":507},[520],{"type":406,"value":510},{"type":401,"tag":470,"props":522,"children":523},{"style":501},[524],{"type":406,"value":525},")\n",{"type":401,"tag":470,"props":527,"children":529},{"class":472,"line":528},2,[530],{"type":401,"tag":470,"props":531,"children":532},{"emptyLinePlaceholder":393},[533],{"type":406,"value":534},"\n",{"type":401,"tag":470,"props":536,"children":538},{"class":472,"line":537},3,[539,543,548,552,556],{"type":401,"tag":470,"props":540,"children":541},{"style":477},[542],{"type":406,"value":480},{"type":401,"tag":470,"props":544,"children":545},{"style":483},[546],{"type":406,"value":547}," app",{"type":401,"tag":470,"props":549,"children":550},{"style":489},[551],{"type":406,"value":492},{"type":401,"tag":470,"props":553,"children":554},{"style":495},[555],{"type":406,"value":486},{"type":401,"tag":470,"props":557,"children":558},{"style":501},[559],{"type":406,"value":560},"()\n",{"type":401,"tag":470,"props":562,"children":564},{"class":472,"line":563},4,[565],{"type":401,"tag":470,"props":566,"children":567},{"emptyLinePlaceholder":393},[568],{"type":406,"value":534},{"type":401,"tag":470,"props":570,"children":572},{"class":472,"line":571},5,[573,578,584,589,593,598,602,606,611,615],{"type":401,"tag":470,"props":574,"children":575},{"style":501},[576],{"type":406,"value":577},"app",{"type":401,"tag":470,"props":579,"children":581},{"style":580},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[582],{"type":406,"value":583},".",{"type":401,"tag":470,"props":585,"children":586},{"style":495},[587],{"type":406,"value":588},"use",{"type":401,"tag":470,"props":590,"children":591},{"style":501},[592],{"type":406,"value":504},{"type":401,"tag":470,"props":594,"children":595},{"style":495},[596],{"type":406,"value":597},"require",{"type":401,"tag":470,"props":599,"children":600},{"style":501},[601],{"type":406,"value":504},{"type":401,"tag":470,"props":603,"children":604},{"style":507},[605],{"type":406,"value":510},{"type":401,"tag":470,"props":607,"children":608},{"style":513},[609],{"type":406,"value":610},"helmet",{"type":401,"tag":470,"props":612,"children":613},{"style":507},[614],{"type":406,"value":510},{"type":401,"tag":470,"props":616,"children":617},{"style":501},[618],{"type":406,"value":619},")())\n",{"type":401,"tag":402,"props":621,"children":622},{},[623],{"type":406,"value":624},"新的响应请求的 Headers 会变成这样：",{"type":401,"tag":459,"props":626,"children":628},{"code":627},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[629],{"type":401,"tag":466,"props":630,"children":631},{"__ignoreMap":394},[632],{"type":406,"value":627},{"type":401,"tag":402,"props":634,"children":635},{},[636],{"type":406,"value":637},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":401,"tag":639,"props":640,"children":642},"h2",{"id":641},"_11-种安全策略",[643],{"type":406,"value":644},"11 种安全策略",{"type":401,"tag":402,"props":646,"children":647},{},[648,650,656,667],{"type":406,"value":649},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":401,"tag":466,"props":651,"children":653},{"className":652},[],[654],{"type":406,"value":655},"OWASP Secure Headers",{"type":401,"tag":409,"props":657,"children":658},{},[659],{"type":401,"tag":413,"props":660,"children":664},{"href":661,"ariaDescribedBy":662,"dataFootnoteRef":394,"id":663},"#user-content-fn-shp",[417],"user-content-fnref-shp",[665],{"type":406,"value":666},"4",{"type":406,"value":668}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":401,"tag":670,"props":671,"children":673},"h3",{"id":672},"移除-x-powered-by",[674],{"type":406,"value":675},"移除 X-Powered-By",{"type":401,"tag":459,"props":677,"children":679},{"code":678,"language":462,"meta":394,"className":463,"style":394},"response.removeHeader('X-Powered-By')\n",[680],{"type":401,"tag":466,"props":681,"children":682},{"__ignoreMap":394},[683],{"type":401,"tag":470,"props":684,"children":685},{"class":472,"line":473},[686,691,695,700,704,708,713,717],{"type":401,"tag":470,"props":687,"children":688},{"style":501},[689],{"type":406,"value":690},"response",{"type":401,"tag":470,"props":692,"children":693},{"style":580},[694],{"type":406,"value":583},{"type":401,"tag":470,"props":696,"children":697},{"style":495},[698],{"type":406,"value":699},"removeHeader",{"type":401,"tag":470,"props":701,"children":702},{"style":501},[703],{"type":406,"value":504},{"type":401,"tag":470,"props":705,"children":706},{"style":507},[707],{"type":406,"value":510},{"type":401,"tag":470,"props":709,"children":710},{"style":513},[711],{"type":406,"value":712},"X-Powered-By",{"type":401,"tag":470,"props":714,"children":715},{"style":507},[716],{"type":406,"value":510},{"type":401,"tag":470,"props":718,"children":719},{"style":501},[720],{"type":406,"value":525},{"type":401,"tag":402,"props":722,"children":723},{},[724,726,731],{"type":406,"value":725},"一些框架会在请求头中添加 ",{"type":401,"tag":466,"props":727,"children":729},{"className":728},[],[730],{"type":406,"value":712},{"type":406,"value":732},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":401,"tag":402,"props":734,"children":735},{},[736,738,743],{"type":406,"value":737},"由于 Express 默认会给响应头增加 ",{"type":401,"tag":466,"props":739,"children":741},{"className":740},[],[742],{"type":406,"value":712},{"type":406,"value":744},"，所以 Helmet 直接把它移除了。",{"type":401,"tag":670,"props":746,"children":748},{"id":747},"移除-mime-嗅探",[749],{"type":406,"value":750},"移除 MIME 嗅探",{"type":401,"tag":459,"props":752,"children":754},{"code":753,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[755],{"type":401,"tag":466,"props":756,"children":757},{"__ignoreMap":394},[758],{"type":401,"tag":470,"props":759,"children":760},{"class":472,"line":473},[761,765,769,774,778,782,787,791,796,801,806,810],{"type":401,"tag":470,"props":762,"children":763},{"style":501},[764],{"type":406,"value":690},{"type":401,"tag":470,"props":766,"children":767},{"style":580},[768],{"type":406,"value":583},{"type":401,"tag":470,"props":770,"children":771},{"style":495},[772],{"type":406,"value":773},"setHeader",{"type":401,"tag":470,"props":775,"children":776},{"style":501},[777],{"type":406,"value":504},{"type":401,"tag":470,"props":779,"children":780},{"style":507},[781],{"type":406,"value":510},{"type":401,"tag":470,"props":783,"children":784},{"style":513},[785],{"type":406,"value":786},"X-Content-Type-Options",{"type":401,"tag":470,"props":788,"children":789},{"style":507},[790],{"type":406,"value":510},{"type":401,"tag":470,"props":792,"children":793},{"style":580},[794],{"type":406,"value":795},",",{"type":401,"tag":470,"props":797,"children":798},{"style":507},[799],{"type":406,"value":800}," '",{"type":401,"tag":470,"props":802,"children":803},{"style":513},[804],{"type":406,"value":805},"nosniff",{"type":401,"tag":470,"props":807,"children":808},{"style":507},[809],{"type":406,"value":510},{"type":401,"tag":470,"props":811,"children":812},{"style":501},[813],{"type":406,"value":525},{"type":401,"tag":402,"props":815,"children":816},{},[817,819,825,827,833],{"type":406,"value":818},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":401,"tag":466,"props":820,"children":822},{"className":821},[],[823],{"type":406,"value":824},"Content-Type",{"type":406,"value":826},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":401,"tag":466,"props":828,"children":830},{"className":829},[],[831],{"type":406,"value":832},"X-Content-Type-Options = nosniff",{"type":406,"value":834}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":401,"tag":670,"props":836,"children":838},{"id":837},"移除-x-xss-protection",[839],{"type":406,"value":840},"移除 X-XSS-Protection",{"type":401,"tag":459,"props":842,"children":844},{"code":843,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('X-XSS-Protection', '0')\n",[845],{"type":401,"tag":466,"props":846,"children":847},{"__ignoreMap":394},[848],{"type":401,"tag":470,"props":849,"children":850},{"class":472,"line":473},[851,855,859,863,867,871,876,880,884,888,893,897],{"type":401,"tag":470,"props":852,"children":853},{"style":501},[854],{"type":406,"value":690},{"type":401,"tag":470,"props":856,"children":857},{"style":580},[858],{"type":406,"value":583},{"type":401,"tag":470,"props":860,"children":861},{"style":495},[862],{"type":406,"value":773},{"type":401,"tag":470,"props":864,"children":865},{"style":501},[866],{"type":406,"value":504},{"type":401,"tag":470,"props":868,"children":869},{"style":507},[870],{"type":406,"value":510},{"type":401,"tag":470,"props":872,"children":873},{"style":513},[874],{"type":406,"value":875},"X-XSS-Protection",{"type":401,"tag":470,"props":877,"children":878},{"style":507},[879],{"type":406,"value":510},{"type":401,"tag":470,"props":881,"children":882},{"style":580},[883],{"type":406,"value":795},{"type":401,"tag":470,"props":885,"children":886},{"style":507},[887],{"type":406,"value":800},{"type":401,"tag":470,"props":889,"children":890},{"style":513},[891],{"type":406,"value":892},"0",{"type":401,"tag":470,"props":894,"children":895},{"style":507},[896],{"type":406,"value":510},{"type":401,"tag":470,"props":898,"children":899},{"style":501},[900],{"type":406,"value":525},{"type":401,"tag":402,"props":902,"children":903},{},[904,906,911],{"type":406,"value":905},"不是应该打开 ",{"type":401,"tag":466,"props":907,"children":909},{"className":908},[],[910],{"type":406,"value":875},{"type":406,"value":912},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":401,"tag":402,"props":914,"children":915},{},[916,918,924,926,937,939,944,946,952,954,965,967,972,974,979],{"type":406,"value":917},"这得追溯回去年的 Chrome 移除 ",{"type":401,"tag":466,"props":919,"children":921},{"className":920},[],[922],{"type":406,"value":923},"XSS Auditor",{"type":406,"value":925},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":401,"tag":409,"props":927,"children":928},{},[929],{"type":401,"tag":413,"props":930,"children":934},{"href":931,"ariaDescribedBy":932,"dataFootnoteRef":394,"id":933},"#user-content-fn-xss-auditor",[417],"user-content-fnref-xss-auditor",[935],{"type":406,"value":936},"5",{"type":406,"value":938},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":401,"tag":466,"props":940,"children":942},{"className":941},[],[943],{"type":406,"value":923},{"type":406,"value":945},"，并开始使用 ",{"type":401,"tag":466,"props":947,"children":949},{"className":948},[],[950],{"type":406,"value":951},"CSP",{"type":406,"value":953}," 等现代标准（更现代的标准）",{"type":401,"tag":409,"props":955,"children":956},{},[957],{"type":401,"tag":413,"props":958,"children":962},{"href":959,"ariaDescribedBy":960,"dataFootnoteRef":394,"id":961},"#user-content-fn-delete-xss-auditor",[417],"user-content-fnref-delete-xss-auditor",[963],{"type":406,"value":964},"6",{"type":406,"value":966},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":401,"tag":466,"props":968,"children":970},{"className":969},[],[971],{"type":406,"value":875},{"type":406,"value":973}," 这个响应头是让浏览器不要再用 ",{"type":401,"tag":466,"props":975,"children":977},{"className":976},[],[978],{"type":406,"value":923},{"type":406,"value":980},"。",{"type":401,"tag":402,"props":982,"children":983},{},[984,986,994],{"type":406,"value":985},"见：",{"type":401,"tag":413,"props":987,"children":991},{"href":988,"rel":989},"https://github.com/OWASP/CheatSheetSeries/issues/376",[990],"nofollow",[992],{"type":406,"value":993},"#376",{"type":406,"value":980},{"type":401,"tag":670,"props":996,"children":998},{"id":997},"禁止页面被嵌套",[999],{"type":406,"value":997},{"type":401,"tag":459,"props":1001,"children":1003},{"code":1002,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[1004],{"type":401,"tag":466,"props":1005,"children":1006},{"__ignoreMap":394},[1007],{"type":401,"tag":470,"props":1008,"children":1009},{"class":472,"line":473},[1010,1014,1018,1022,1026,1030,1035,1039,1043,1047,1052,1056],{"type":401,"tag":470,"props":1011,"children":1012},{"style":501},[1013],{"type":406,"value":690},{"type":401,"tag":470,"props":1015,"children":1016},{"style":580},[1017],{"type":406,"value":583},{"type":401,"tag":470,"props":1019,"children":1020},{"style":495},[1021],{"type":406,"value":773},{"type":401,"tag":470,"props":1023,"children":1024},{"style":501},[1025],{"type":406,"value":504},{"type":401,"tag":470,"props":1027,"children":1028},{"style":507},[1029],{"type":406,"value":510},{"type":401,"tag":470,"props":1031,"children":1032},{"style":513},[1033],{"type":406,"value":1034},"X-Frame-Options",{"type":401,"tag":470,"props":1036,"children":1037},{"style":507},[1038],{"type":406,"value":510},{"type":401,"tag":470,"props":1040,"children":1041},{"style":580},[1042],{"type":406,"value":795},{"type":401,"tag":470,"props":1044,"children":1045},{"style":507},[1046],{"type":406,"value":800},{"type":401,"tag":470,"props":1048,"children":1049},{"style":513},[1050],{"type":406,"value":1051},"SAMEORIGIN",{"type":401,"tag":470,"props":1053,"children":1054},{"style":507},[1055],{"type":406,"value":510},{"type":401,"tag":470,"props":1057,"children":1058},{"style":501},[1059],{"type":406,"value":525},{"type":401,"tag":402,"props":1061,"children":1062},{},[1063,1068,1070,1075,1077,1083],{"type":401,"tag":466,"props":1064,"children":1066},{"className":1065},[],[1067],{"type":406,"value":1034},{"type":406,"value":1069}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":401,"tag":466,"props":1071,"children":1073},{"className":1072},[],[1074],{"type":406,"value":1034},{"type":406,"value":1076}," 为 ",{"type":401,"tag":466,"props":1078,"children":1080},{"className":1079},[],[1081],{"type":406,"value":1082},"SameOrigin",{"type":406,"value":1084},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":401,"tag":402,"props":1086,"children":1087},{},[1088,1090,1096,1098,1103,1104,1110,1112,1117],{"type":406,"value":1089},"本来它的值有三种选择，",{"type":401,"tag":466,"props":1091,"children":1093},{"className":1092},[],[1094],{"type":406,"value":1095},"Deny",{"type":406,"value":1097},"、",{"type":401,"tag":466,"props":1099,"children":1101},{"className":1100},[],[1102],{"type":406,"value":1082},{"type":406,"value":1097},{"type":401,"tag":466,"props":1105,"children":1107},{"className":1106},[],[1108],{"type":406,"value":1109},"AllowFrom",{"type":406,"value":1111},"。但 ",{"type":401,"tag":466,"props":1113,"children":1115},{"className":1114},[],[1116],{"type":406,"value":1109},{"type":406,"value":1118}," 因为其兼容性原因，被 Helmet 弃用：",{"type":401,"tag":402,"props":1120,"children":1121},{},[1122],{"type":401,"tag":1123,"props":1124,"children":1127},"img",{"alt":1125,"src":1126},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":401,"tag":402,"props":1129,"children":1130},{},[1131,1133,1138,1140,1146,1148,1153],{"type":406,"value":1132},"此外，可以在 ",{"type":401,"tag":466,"props":1134,"children":1136},{"className":1135},[],[1137],{"type":406,"value":951},{"type":406,"value":1139}," 中设置 ",{"type":401,"tag":466,"props":1141,"children":1143},{"className":1142},[],[1144],{"type":406,"value":1145},"frame-ancestors",{"type":406,"value":1147}," 指令来替代 ",{"type":401,"tag":466,"props":1149,"children":1151},{"className":1150},[],[1152],{"type":406,"value":1034},{"type":406,"value":980},{"type":401,"tag":670,"props":1155,"children":1157},{"id":1156},"移除-referer",[1158],{"type":406,"value":1159},"移除 Referer",{"type":401,"tag":402,"props":1161,"children":1162},{},[1163,1169,1171,1177,1188,1190,1195],{"type":401,"tag":466,"props":1164,"children":1166},{"className":1165},[],[1167],{"type":406,"value":1168},"Referrer-Policy",{"type":406,"value":1170}," 可以控制浏览器请求头的 ",{"type":401,"tag":466,"props":1172,"children":1174},{"className":1173},[],[1175],{"type":406,"value":1176},"Referer",{"type":401,"tag":409,"props":1178,"children":1179},{},[1180],{"type":401,"tag":413,"props":1181,"children":1185},{"href":1182,"ariaDescribedBy":1183,"dataFootnoteRef":394,"id":1184},"#user-content-fn-referer",[417],"user-content-fnref-referer",[1186],{"type":406,"value":1187},"7",{"type":406,"value":1189}," 的显示方式。移除 ",{"type":401,"tag":466,"props":1191,"children":1193},{"className":1192},[],[1194],{"type":406,"value":1176},{"type":406,"value":1196}," 能保护用户的访问记录，防止隐私泄漏。",{"type":401,"tag":459,"props":1198,"children":1200},{"code":1199,"language":462,"meta":394,"className":463,"style":394},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1201],{"type":401,"tag":466,"props":1202,"children":1203},{"__ignoreMap":394},[1204,1235,1244,1266,1274,1294,1303,1324,1333,1354,1363,1384,1393,1414,1423,1444,1453,1474,1483,1492,1501,1562,1636,1667,1680,1689,1732,1741,1776,1809,1863,1908,1921,1930],{"type":401,"tag":470,"props":1205,"children":1206},{"class":472,"line":473},[1207,1211,1216,1220,1225,1230],{"type":401,"tag":470,"props":1208,"children":1209},{"style":477},[1210],{"type":406,"value":480},{"type":401,"tag":470,"props":1212,"children":1213},{"style":483},[1214],{"type":406,"value":1215}," ALLOWED_TOKENS",{"type":401,"tag":470,"props":1217,"children":1218},{"style":489},[1219],{"type":406,"value":492},{"type":401,"tag":470,"props":1221,"children":1222},{"style":489},[1223],{"type":406,"value":1224}," new",{"type":401,"tag":470,"props":1226,"children":1227},{"style":495},[1228],{"type":406,"value":1229}," Set",{"type":401,"tag":470,"props":1231,"children":1232},{"style":501},[1233],{"type":406,"value":1234},"([\n",{"type":401,"tag":470,"props":1236,"children":1237},{"class":472,"line":528},[1238],{"type":401,"tag":470,"props":1239,"children":1241},{"style":1240},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1242],{"type":406,"value":1243},"  // 任何时候都不携带 Referer\n",{"type":401,"tag":470,"props":1245,"children":1246},{"class":472,"line":537},[1247,1252,1257,1261],{"type":401,"tag":470,"props":1248,"children":1249},{"style":507},[1250],{"type":406,"value":1251},"  '",{"type":401,"tag":470,"props":1253,"children":1254},{"style":513},[1255],{"type":406,"value":1256},"no-referrer",{"type":401,"tag":470,"props":1258,"children":1259},{"style":507},[1260],{"type":406,"value":510},{"type":401,"tag":470,"props":1262,"children":1263},{"style":580},[1264],{"type":406,"value":1265},",\n",{"type":401,"tag":470,"props":1267,"children":1268},{"class":472,"line":563},[1269],{"type":401,"tag":470,"props":1270,"children":1271},{"style":1240},[1272],{"type":406,"value":1273},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":401,"tag":470,"props":1275,"children":1276},{"class":472,"line":571},[1277,1281,1286,1290],{"type":401,"tag":470,"props":1278,"children":1279},{"style":507},[1280],{"type":406,"value":1251},{"type":401,"tag":470,"props":1282,"children":1283},{"style":513},[1284],{"type":406,"value":1285},"no-referrer-when-downgrade",{"type":401,"tag":470,"props":1287,"children":1288},{"style":507},[1289],{"type":406,"value":510},{"type":401,"tag":470,"props":1291,"children":1292},{"style":580},[1293],{"type":406,"value":1265},{"type":401,"tag":470,"props":1295,"children":1297},{"class":472,"line":1296},6,[1298],{"type":401,"tag":470,"props":1299,"children":1300},{"style":1240},[1301],{"type":406,"value":1302},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":401,"tag":470,"props":1304,"children":1306},{"class":472,"line":1305},7,[1307,1311,1316,1320],{"type":401,"tag":470,"props":1308,"children":1309},{"style":507},[1310],{"type":406,"value":1251},{"type":401,"tag":470,"props":1312,"children":1313},{"style":513},[1314],{"type":406,"value":1315},"same-origin",{"type":401,"tag":470,"props":1317,"children":1318},{"style":507},[1319],{"type":406,"value":510},{"type":401,"tag":470,"props":1321,"children":1322},{"style":580},[1323],{"type":406,"value":1265},{"type":401,"tag":470,"props":1325,"children":1327},{"class":472,"line":1326},8,[1328],{"type":401,"tag":470,"props":1329,"children":1330},{"style":1240},[1331],{"type":406,"value":1332},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":401,"tag":470,"props":1334,"children":1336},{"class":472,"line":1335},9,[1337,1341,1346,1350],{"type":401,"tag":470,"props":1338,"children":1339},{"style":507},[1340],{"type":406,"value":1251},{"type":401,"tag":470,"props":1342,"children":1343},{"style":513},[1344],{"type":406,"value":1345},"origin",{"type":401,"tag":470,"props":1347,"children":1348},{"style":507},[1349],{"type":406,"value":510},{"type":401,"tag":470,"props":1351,"children":1352},{"style":580},[1353],{"type":406,"value":1265},{"type":401,"tag":470,"props":1355,"children":1357},{"class":472,"line":1356},10,[1358],{"type":401,"tag":470,"props":1359,"children":1360},{"style":1240},[1361],{"type":406,"value":1362},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":401,"tag":470,"props":1364,"children":1366},{"class":472,"line":1365},11,[1367,1371,1376,1380],{"type":401,"tag":470,"props":1368,"children":1369},{"style":507},[1370],{"type":406,"value":1251},{"type":401,"tag":470,"props":1372,"children":1373},{"style":513},[1374],{"type":406,"value":1375},"strict-origin",{"type":401,"tag":470,"props":1377,"children":1378},{"style":507},[1379],{"type":406,"value":510},{"type":401,"tag":470,"props":1381,"children":1382},{"style":580},[1383],{"type":406,"value":1265},{"type":401,"tag":470,"props":1385,"children":1387},{"class":472,"line":1386},12,[1388],{"type":401,"tag":470,"props":1389,"children":1390},{"style":1240},[1391],{"type":406,"value":1392},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":401,"tag":470,"props":1394,"children":1396},{"class":472,"line":1395},13,[1397,1401,1406,1410],{"type":401,"tag":470,"props":1398,"children":1399},{"style":507},[1400],{"type":406,"value":1251},{"type":401,"tag":470,"props":1402,"children":1403},{"style":513},[1404],{"type":406,"value":1405},"origin-when-cross-origin",{"type":401,"tag":470,"props":1407,"children":1408},{"style":507},[1409],{"type":406,"value":510},{"type":401,"tag":470,"props":1411,"children":1412},{"style":580},[1413],{"type":406,"value":1265},{"type":401,"tag":470,"props":1415,"children":1417},{"class":472,"line":1416},14,[1418],{"type":401,"tag":470,"props":1419,"children":1420},{"style":1240},[1421],{"type":406,"value":1422},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":401,"tag":470,"props":1424,"children":1426},{"class":472,"line":1425},15,[1427,1431,1436,1440],{"type":401,"tag":470,"props":1428,"children":1429},{"style":507},[1430],{"type":406,"value":1251},{"type":401,"tag":470,"props":1432,"children":1433},{"style":513},[1434],{"type":406,"value":1435},"strict-origin-when-cross-origin",{"type":401,"tag":470,"props":1437,"children":1438},{"style":507},[1439],{"type":406,"value":510},{"type":401,"tag":470,"props":1441,"children":1442},{"style":580},[1443],{"type":406,"value":1265},{"type":401,"tag":470,"props":1445,"children":1447},{"class":472,"line":1446},16,[1448],{"type":401,"tag":470,"props":1449,"children":1450},{"style":1240},[1451],{"type":406,"value":1452},"  // 所有请求都携带上完整的 Referer\n",{"type":401,"tag":470,"props":1454,"children":1456},{"class":472,"line":1455},17,[1457,1461,1466,1470],{"type":401,"tag":470,"props":1458,"children":1459},{"style":507},[1460],{"type":406,"value":1251},{"type":401,"tag":470,"props":1462,"children":1463},{"style":513},[1464],{"type":406,"value":1465},"unsafe-url",{"type":401,"tag":470,"props":1467,"children":1468},{"style":507},[1469],{"type":406,"value":510},{"type":401,"tag":470,"props":1471,"children":1472},{"style":580},[1473],{"type":406,"value":1265},{"type":401,"tag":470,"props":1475,"children":1477},{"class":472,"line":1476},18,[1478],{"type":401,"tag":470,"props":1479,"children":1480},{"style":1240},[1481],{"type":406,"value":1482},"  // 无策略\n",{"type":401,"tag":470,"props":1484,"children":1486},{"class":472,"line":1485},19,[1487],{"type":401,"tag":470,"props":1488,"children":1489},{"style":507},[1490],{"type":406,"value":1491},"  ''\n",{"type":401,"tag":470,"props":1493,"children":1495},{"class":472,"line":1494},20,[1496],{"type":401,"tag":470,"props":1497,"children":1498},{"style":501},[1499],{"type":406,"value":1500},"])\n",{"type":401,"tag":470,"props":1502,"children":1504},{"class":472,"line":1503},21,[1505,1510,1515,1520,1526,1530,1535,1539,1543,1547,1552,1557],{"type":401,"tag":470,"props":1506,"children":1507},{"style":477},[1508],{"type":406,"value":1509},"function",{"type":401,"tag":470,"props":1511,"children":1512},{"style":495},[1513],{"type":406,"value":1514}," getHeaderValueFromOptions",{"type":401,"tag":470,"props":1516,"children":1517},{"style":580},[1518],{"type":406,"value":1519},"({",{"type":401,"tag":470,"props":1521,"children":1523},{"style":1522},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[1524],{"type":406,"value":1525}," policy",{"type":401,"tag":470,"props":1527,"children":1528},{"style":489},[1529],{"type":406,"value":492},{"type":401,"tag":470,"props":1531,"children":1532},{"style":501},[1533],{"type":406,"value":1534}," [",{"type":401,"tag":470,"props":1536,"children":1537},{"style":507},[1538],{"type":406,"value":510},{"type":401,"tag":470,"props":1540,"children":1541},{"style":513},[1542],{"type":406,"value":1256},{"type":401,"tag":470,"props":1544,"children":1545},{"style":507},[1546],{"type":406,"value":510},{"type":401,"tag":470,"props":1548,"children":1549},{"style":501},[1550],{"type":406,"value":1551},"] ",{"type":401,"tag":470,"props":1553,"children":1554},{"style":580},[1555],{"type":406,"value":1556},"})",{"type":401,"tag":470,"props":1558,"children":1559},{"style":580},[1560],{"type":406,"value":1561}," {\n",{"type":401,"tag":470,"props":1563,"children":1565},{"class":472,"line":1564},22,[1566,1571,1576,1580,1585,1589,1594,1598,1603,1607,1612,1617,1622,1626,1631],{"type":401,"tag":470,"props":1567,"children":1568},{"style":477},[1569],{"type":406,"value":1570},"  const",{"type":401,"tag":470,"props":1572,"children":1573},{"style":483},[1574],{"type":406,"value":1575}," tokens",{"type":401,"tag":470,"props":1577,"children":1578},{"style":489},[1579],{"type":406,"value":492},{"type":401,"tag":470,"props":1581,"children":1582},{"style":489},[1583],{"type":406,"value":1584}," typeof",{"type":401,"tag":470,"props":1586,"children":1587},{"style":501},[1588],{"type":406,"value":1525},{"type":401,"tag":470,"props":1590,"children":1591},{"style":489},[1592],{"type":406,"value":1593}," ===",{"type":401,"tag":470,"props":1595,"children":1596},{"style":507},[1597],{"type":406,"value":800},{"type":401,"tag":470,"props":1599,"children":1600},{"style":513},[1601],{"type":406,"value":1602},"string",{"type":401,"tag":470,"props":1604,"children":1605},{"style":507},[1606],{"type":406,"value":510},{"type":401,"tag":470,"props":1608,"children":1609},{"style":489},[1610],{"type":406,"value":1611}," ?",{"type":401,"tag":470,"props":1613,"children":1615},{"style":1614},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1616],{"type":406,"value":1534},{"type":401,"tag":470,"props":1618,"children":1619},{"style":501},[1620],{"type":406,"value":1621},"policy",{"type":401,"tag":470,"props":1623,"children":1624},{"style":1614},[1625],{"type":406,"value":1551},{"type":401,"tag":470,"props":1627,"children":1628},{"style":489},[1629],{"type":406,"value":1630},":",{"type":401,"tag":470,"props":1632,"children":1633},{"style":501},[1634],{"type":406,"value":1635}," policy\n",{"type":401,"tag":470,"props":1637,"children":1639},{"class":472,"line":1638},23,[1640,1645,1649,1654,1658,1663],{"type":401,"tag":470,"props":1641,"children":1642},{"style":501},[1643],{"type":406,"value":1644},"    tokensSeen",{"type":401,"tag":470,"props":1646,"children":1647},{"style":580},[1648],{"type":406,"value":583},{"type":401,"tag":470,"props":1650,"children":1651},{"style":495},[1652],{"type":406,"value":1653},"add",{"type":401,"tag":470,"props":1655,"children":1656},{"style":1614},[1657],{"type":406,"value":504},{"type":401,"tag":470,"props":1659,"children":1660},{"style":501},[1661],{"type":406,"value":1662},"token",{"type":401,"tag":470,"props":1664,"children":1665},{"style":1614},[1666],{"type":406,"value":525},{"type":401,"tag":470,"props":1668,"children":1670},{"class":472,"line":1669},24,[1671,1676],{"type":401,"tag":470,"props":1672,"children":1673},{"style":580},[1674],{"type":406,"value":1675},"  }",{"type":401,"tag":470,"props":1677,"children":1678},{"style":501},[1679],{"type":406,"value":525},{"type":401,"tag":470,"props":1681,"children":1683},{"class":472,"line":1682},25,[1684],{"type":401,"tag":470,"props":1685,"children":1686},{"style":1240},[1687],{"type":406,"value":1688},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":401,"tag":470,"props":1690,"children":1692},{"class":472,"line":1691},26,[1693,1699,1703,1707,1712,1716,1720,1724,1728],{"type":401,"tag":470,"props":1694,"children":1696},{"style":1695},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1697],{"type":406,"value":1698},"  return",{"type":401,"tag":470,"props":1700,"children":1701},{"style":501},[1702],{"type":406,"value":1575},{"type":401,"tag":470,"props":1704,"children":1705},{"style":580},[1706],{"type":406,"value":583},{"type":401,"tag":470,"props":1708,"children":1709},{"style":495},[1710],{"type":406,"value":1711},"join",{"type":401,"tag":470,"props":1713,"children":1714},{"style":501},[1715],{"type":406,"value":504},{"type":401,"tag":470,"props":1717,"children":1718},{"style":507},[1719],{"type":406,"value":510},{"type":401,"tag":470,"props":1721,"children":1722},{"style":513},[1723],{"type":406,"value":795},{"type":401,"tag":470,"props":1725,"children":1726},{"style":507},[1727],{"type":406,"value":510},{"type":401,"tag":470,"props":1729,"children":1730},{"style":501},[1731],{"type":406,"value":525},{"type":401,"tag":470,"props":1733,"children":1735},{"class":472,"line":1734},27,[1736],{"type":401,"tag":470,"props":1737,"children":1738},{"style":501},[1739],{"type":406,"value":1740},"}\n",{"type":401,"tag":470,"props":1742,"children":1744},{"class":472,"line":1743},28,[1745,1749,1754,1758,1763,1767,1772],{"type":401,"tag":470,"props":1746,"children":1747},{"style":477},[1748],{"type":406,"value":1509},{"type":401,"tag":470,"props":1750,"children":1751},{"style":495},[1752],{"type":406,"value":1753}," referrerPolicy",{"type":401,"tag":470,"props":1755,"children":1756},{"style":580},[1757],{"type":406,"value":504},{"type":401,"tag":470,"props":1759,"children":1760},{"style":1522},[1761],{"type":406,"value":1762},"options",{"type":401,"tag":470,"props":1764,"children":1765},{"style":489},[1766],{"type":406,"value":492},{"type":401,"tag":470,"props":1768,"children":1769},{"style":580},[1770],{"type":406,"value":1771}," {})",{"type":401,"tag":470,"props":1773,"children":1774},{"style":580},[1775],{"type":406,"value":1561},{"type":401,"tag":470,"props":1777,"children":1779},{"class":472,"line":1778},29,[1780,1784,1789,1793,1797,1801,1805],{"type":401,"tag":470,"props":1781,"children":1782},{"style":477},[1783],{"type":406,"value":1570},{"type":401,"tag":470,"props":1785,"children":1786},{"style":483},[1787],{"type":406,"value":1788}," headerValue",{"type":401,"tag":470,"props":1790,"children":1791},{"style":489},[1792],{"type":406,"value":492},{"type":401,"tag":470,"props":1794,"children":1795},{"style":495},[1796],{"type":406,"value":1514},{"type":401,"tag":470,"props":1798,"children":1799},{"style":1614},[1800],{"type":406,"value":504},{"type":401,"tag":470,"props":1802,"children":1803},{"style":501},[1804],{"type":406,"value":1762},{"type":401,"tag":470,"props":1806,"children":1807},{"style":1614},[1808],{"type":406,"value":525},{"type":401,"tag":470,"props":1810,"children":1812},{"class":472,"line":1811},30,[1813,1817,1822,1827,1831,1836,1840,1845,1849,1854,1859],{"type":401,"tag":470,"props":1814,"children":1815},{"style":1695},[1816],{"type":406,"value":1698},{"type":401,"tag":470,"props":1818,"children":1819},{"style":477},[1820],{"type":406,"value":1821}," function",{"type":401,"tag":470,"props":1823,"children":1824},{"style":495},[1825],{"type":406,"value":1826}," referrerPolicyMiddleware",{"type":401,"tag":470,"props":1828,"children":1829},{"style":580},[1830],{"type":406,"value":504},{"type":401,"tag":470,"props":1832,"children":1833},{"style":1522},[1834],{"type":406,"value":1835},"_req",{"type":401,"tag":470,"props":1837,"children":1838},{"style":580},[1839],{"type":406,"value":795},{"type":401,"tag":470,"props":1841,"children":1842},{"style":1522},[1843],{"type":406,"value":1844}," res",{"type":401,"tag":470,"props":1846,"children":1847},{"style":580},[1848],{"type":406,"value":795},{"type":401,"tag":470,"props":1850,"children":1851},{"style":1522},[1852],{"type":406,"value":1853}," next",{"type":401,"tag":470,"props":1855,"children":1856},{"style":580},[1857],{"type":406,"value":1858},")",{"type":401,"tag":470,"props":1860,"children":1861},{"style":580},[1862],{"type":406,"value":1561},{"type":401,"tag":470,"props":1864,"children":1866},{"class":472,"line":1865},31,[1867,1872,1876,1880,1884,1888,1892,1896,1900,1904],{"type":401,"tag":470,"props":1868,"children":1869},{"style":501},[1870],{"type":406,"value":1871},"    res",{"type":401,"tag":470,"props":1873,"children":1874},{"style":580},[1875],{"type":406,"value":583},{"type":401,"tag":470,"props":1877,"children":1878},{"style":495},[1879],{"type":406,"value":773},{"type":401,"tag":470,"props":1881,"children":1882},{"style":1614},[1883],{"type":406,"value":504},{"type":401,"tag":470,"props":1885,"children":1886},{"style":507},[1887],{"type":406,"value":510},{"type":401,"tag":470,"props":1889,"children":1890},{"style":513},[1891],{"type":406,"value":1168},{"type":401,"tag":470,"props":1893,"children":1894},{"style":507},[1895],{"type":406,"value":510},{"type":401,"tag":470,"props":1897,"children":1898},{"style":580},[1899],{"type":406,"value":795},{"type":401,"tag":470,"props":1901,"children":1902},{"style":501},[1903],{"type":406,"value":1788},{"type":401,"tag":470,"props":1905,"children":1906},{"style":1614},[1907],{"type":406,"value":525},{"type":401,"tag":470,"props":1909,"children":1911},{"class":472,"line":1910},32,[1912,1917],{"type":401,"tag":470,"props":1913,"children":1914},{"style":495},[1915],{"type":406,"value":1916},"    next",{"type":401,"tag":470,"props":1918,"children":1919},{"style":1614},[1920],{"type":406,"value":560},{"type":401,"tag":470,"props":1922,"children":1924},{"class":472,"line":1923},33,[1925],{"type":401,"tag":470,"props":1926,"children":1927},{"style":580},[1928],{"type":406,"value":1929},"  }\n",{"type":401,"tag":470,"props":1931,"children":1933},{"class":472,"line":1932},34,[1934],{"type":401,"tag":470,"props":1935,"children":1936},{"style":580},[1937],{"type":406,"value":1740},{"type":401,"tag":402,"props":1939,"children":1940},{},[1941,1943,1949,1951,1956],{"type":406,"value":1942},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":401,"tag":466,"props":1944,"children":1946},{"className":1945},[],[1947],{"type":406,"value":1948},"Referrer Policy",{"type":406,"value":1950},"。Meta 标签设置的 ",{"type":401,"tag":466,"props":1952,"children":1954},{"className":1953},[],[1955],{"type":406,"value":1948},{"type":406,"value":1957}," 对整个页面都有效果（但优先级最低）。",{"type":401,"tag":459,"props":1959,"children":1963},{"code":1960,"language":1961,"meta":394,"className":1962,"style":394},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1964],{"type":401,"tag":466,"props":1965,"children":1966},{"__ignoreMap":394},[1967,2032,2100],{"type":401,"tag":470,"props":1968,"children":1969},{"class":472,"line":473},[1970,1975,1981,1987,1992,1997,2002,2006,2011,2015,2019,2023,2027],{"type":401,"tag":470,"props":1971,"children":1972},{"style":580},[1973],{"type":406,"value":1974},"\u003C",{"type":401,"tag":470,"props":1976,"children":1978},{"style":1977},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1979],{"type":406,"value":1980},"meta",{"type":401,"tag":470,"props":1982,"children":1984},{"style":1983},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1985],{"type":406,"value":1986}," name",{"type":401,"tag":470,"props":1988,"children":1989},{"style":580},[1990],{"type":406,"value":1991},"=",{"type":401,"tag":470,"props":1993,"children":1994},{"style":507},[1995],{"type":406,"value":1996},"\"",{"type":401,"tag":470,"props":1998,"children":1999},{"style":513},[2000],{"type":406,"value":2001},"referrer",{"type":401,"tag":470,"props":2003,"children":2004},{"style":507},[2005],{"type":406,"value":1996},{"type":401,"tag":470,"props":2007,"children":2008},{"style":1983},[2009],{"type":406,"value":2010}," content",{"type":401,"tag":470,"props":2012,"children":2013},{"style":580},[2014],{"type":406,"value":1991},{"type":401,"tag":470,"props":2016,"children":2017},{"style":507},[2018],{"type":406,"value":1996},{"type":401,"tag":470,"props":2020,"children":2021},{"style":513},[2022],{"type":406,"value":1345},{"type":401,"tag":470,"props":2024,"children":2025},{"style":507},[2026],{"type":406,"value":1996},{"type":401,"tag":470,"props":2028,"children":2029},{"style":580},[2030],{"type":406,"value":2031}," />\n",{"type":401,"tag":470,"props":2033,"children":2034},{"class":472,"line":528},[2035,2039,2043,2048,2052,2056,2061,2065,2070,2074,2078,2082,2086,2091,2095],{"type":401,"tag":470,"props":2036,"children":2037},{"style":580},[2038],{"type":406,"value":1974},{"type":401,"tag":470,"props":2040,"children":2041},{"style":1977},[2042],{"type":406,"value":413},{"type":401,"tag":470,"props":2044,"children":2045},{"style":1983},[2046],{"type":406,"value":2047}," href",{"type":401,"tag":470,"props":2049,"children":2050},{"style":580},[2051],{"type":406,"value":1991},{"type":401,"tag":470,"props":2053,"children":2054},{"style":507},[2055],{"type":406,"value":1996},{"type":401,"tag":470,"props":2057,"children":2058},{"style":513},[2059],{"type":406,"value":2060},"http://example.com",{"type":401,"tag":470,"props":2062,"children":2063},{"style":507},[2064],{"type":406,"value":1996},{"type":401,"tag":470,"props":2066,"children":2067},{"style":1983},[2068],{"type":406,"value":2069}," referrerpolicy",{"type":401,"tag":470,"props":2071,"children":2072},{"style":580},[2073],{"type":406,"value":1991},{"type":401,"tag":470,"props":2075,"children":2076},{"style":507},[2077],{"type":406,"value":1996},{"type":401,"tag":470,"props":2079,"children":2080},{"style":513},[2081],{"type":406,"value":1345},{"type":401,"tag":470,"props":2083,"children":2084},{"style":507},[2085],{"type":406,"value":1996},{"type":401,"tag":470,"props":2087,"children":2088},{"style":580},[2089],{"type":406,"value":2090},">\u003C/",{"type":401,"tag":470,"props":2092,"children":2093},{"style":1977},[2094],{"type":406,"value":413},{"type":401,"tag":470,"props":2096,"children":2097},{"style":580},[2098],{"type":406,"value":2099},">\n",{"type":401,"tag":470,"props":2101,"children":2102},{"class":472,"line":537},[2103,2107,2111,2115,2119,2123,2127,2131,2136,2140,2144,2149,2153,2157,2161],{"type":401,"tag":470,"props":2104,"children":2105},{"style":580},[2106],{"type":406,"value":1974},{"type":401,"tag":470,"props":2108,"children":2109},{"style":1977},[2110],{"type":406,"value":413},{"type":401,"tag":470,"props":2112,"children":2113},{"style":1983},[2114],{"type":406,"value":2047},{"type":401,"tag":470,"props":2116,"children":2117},{"style":580},[2118],{"type":406,"value":1991},{"type":401,"tag":470,"props":2120,"children":2121},{"style":507},[2122],{"type":406,"value":1996},{"type":401,"tag":470,"props":2124,"children":2125},{"style":513},[2126],{"type":406,"value":2060},{"type":401,"tag":470,"props":2128,"children":2129},{"style":507},[2130],{"type":406,"value":1996},{"type":401,"tag":470,"props":2132,"children":2133},{"style":1983},[2134],{"type":406,"value":2135}," rel",{"type":401,"tag":470,"props":2137,"children":2138},{"style":580},[2139],{"type":406,"value":1991},{"type":401,"tag":470,"props":2141,"children":2142},{"style":507},[2143],{"type":406,"value":1996},{"type":401,"tag":470,"props":2145,"children":2146},{"style":513},[2147],{"type":406,"value":2148},"noreferrer",{"type":401,"tag":470,"props":2150,"children":2151},{"style":507},[2152],{"type":406,"value":1996},{"type":401,"tag":470,"props":2154,"children":2155},{"style":580},[2156],{"type":406,"value":2090},{"type":401,"tag":470,"props":2158,"children":2159},{"style":1977},[2160],{"type":406,"value":413},{"type":401,"tag":470,"props":2162,"children":2163},{"style":580},[2164],{"type":406,"value":2099},{"type":401,"tag":670,"props":2166,"children":2168},{"id":2167},"强制使用-https",[2169],{"type":406,"value":2170},"强制使用 HTTPS",{"type":401,"tag":402,"props":2172,"children":2173},{},[2174,2176,2182,2184,2195],{"type":406,"value":2175},"通过设置请求头的 ",{"type":401,"tag":466,"props":2177,"children":2179},{"className":2178},[],[2180],{"type":406,"value":2181},"Strict-Transport-Security（STS）",{"type":406,"value":2183},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":401,"tag":409,"props":2185,"children":2186},{},[2187],{"type":401,"tag":413,"props":2188,"children":2192},{"href":2189,"ariaDescribedBy":2190,"dataFootnoteRef":394,"id":2191},"#user-content-fn-timeend",[417],"user-content-fnref-timeend",[2193],{"type":406,"value":2194},"8",{"type":406,"value":980},{"type":401,"tag":402,"props":2197,"children":2198},{},[2199,2201,2207,2209,2215,2217,2223,2225,2231,2233,2238],{"type":406,"value":2200},"这个规范本身很好理解，通过 ",{"type":401,"tag":466,"props":2202,"children":2204},{"className":2203},[],[2205],{"type":406,"value":2206},"max-age",{"type":406,"value":2208}," 可以指定倒计时时间；",{"type":401,"tag":466,"props":2210,"children":2212},{"className":2211},[],[2213],{"type":406,"value":2214},"includesSubDomains",{"type":406,"value":2216}," 指定子域的 ",{"type":401,"tag":466,"props":2218,"children":2220},{"className":2219},[],[2221],{"type":406,"value":2222},"HSTS",{"type":406,"value":2224},"；",{"type":401,"tag":466,"props":2226,"children":2228},{"className":2227},[],[2229],{"type":406,"value":2230},"preload",{"type":406,"value":2232}," 指定预加载内容的 ",{"type":401,"tag":466,"props":2234,"children":2236},{"className":2235},[],[2237],{"type":406,"value":2222},{"type":406,"value":980},{"type":401,"tag":459,"props":2240,"children":2242},{"code":2241},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2243],{"type":401,"tag":466,"props":2244,"children":2245},{"__ignoreMap":394},[2246],{"type":406,"value":2241},{"type":401,"tag":459,"props":2248,"children":2250},{"code":2249,"language":462,"meta":394,"className":463,"style":394},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2251],{"type":401,"tag":466,"props":2252,"children":2253},{"__ignoreMap":394},[2254,2316,2343,2416,2479,2516,2523,2576,2616,2623,2655,2686,2734,2778,2789,2796],{"type":401,"tag":470,"props":2255,"children":2256},{"class":472,"line":473},[2257,2261,2266,2270,2275,2279,2285,2290,2295,2299,2304,2308,2312],{"type":401,"tag":470,"props":2258,"children":2259},{"style":477},[2260],{"type":406,"value":480},{"type":401,"tag":470,"props":2262,"children":2263},{"style":483},[2264],{"type":406,"value":2265}," DEFAULT_MAX_AGE",{"type":401,"tag":470,"props":2267,"children":2268},{"style":489},[2269],{"type":406,"value":492},{"type":401,"tag":470,"props":2271,"children":2272},{"style":495},[2273],{"type":406,"value":2274}," String",{"type":401,"tag":470,"props":2276,"children":2277},{"style":501},[2278],{"type":406,"value":504},{"type":401,"tag":470,"props":2280,"children":2282},{"style":2281},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2283],{"type":406,"value":2284},"180",{"type":401,"tag":470,"props":2286,"children":2287},{"style":489},[2288],{"type":406,"value":2289}," *",{"type":401,"tag":470,"props":2291,"children":2292},{"style":2281},[2293],{"type":406,"value":2294}," 24",{"type":401,"tag":470,"props":2296,"children":2297},{"style":489},[2298],{"type":406,"value":2289},{"type":401,"tag":470,"props":2300,"children":2301},{"style":2281},[2302],{"type":406,"value":2303}," 60",{"type":401,"tag":470,"props":2305,"children":2306},{"style":489},[2307],{"type":406,"value":2289},{"type":401,"tag":470,"props":2309,"children":2310},{"style":2281},[2311],{"type":406,"value":2303},{"type":401,"tag":470,"props":2313,"children":2314},{"style":501},[2315],{"type":406,"value":525},{"type":401,"tag":470,"props":2317,"children":2318},{"class":472,"line":528},[2319,2323,2327,2331,2335,2339],{"type":401,"tag":470,"props":2320,"children":2321},{"style":477},[2322],{"type":406,"value":1509},{"type":401,"tag":470,"props":2324,"children":2325},{"style":495},[2326],{"type":406,"value":1514},{"type":401,"tag":470,"props":2328,"children":2329},{"style":580},[2330],{"type":406,"value":504},{"type":401,"tag":470,"props":2332,"children":2333},{"style":1522},[2334],{"type":406,"value":1762},{"type":401,"tag":470,"props":2336,"children":2337},{"style":580},[2338],{"type":406,"value":1858},{"type":401,"tag":470,"props":2340,"children":2341},{"style":580},[2342],{"type":406,"value":1561},{"type":401,"tag":470,"props":2344,"children":2345},{"class":472,"line":537},[2346,2350,2355,2359,2363,2368,2373,2379,2383,2388,2393,2398,2402,2407,2411],{"type":401,"tag":470,"props":2347,"children":2348},{"style":477},[2349],{"type":406,"value":1570},{"type":401,"tag":470,"props":2351,"children":2352},{"style":483},[2353],{"type":406,"value":2354}," directives",{"type":401,"tag":470,"props":2356,"children":2357},{"style":489},[2358],{"type":406,"value":492},{"type":401,"tag":470,"props":2360,"children":2361},{"style":1614},[2362],{"type":406,"value":1534},{"type":401,"tag":470,"props":2364,"children":2365},{"style":507},[2366],{"type":406,"value":2367},"`",{"type":401,"tag":470,"props":2369,"children":2370},{"style":513},[2371],{"type":406,"value":2372},"max-age=",{"type":401,"tag":470,"props":2374,"children":2376},{"style":2375},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2377],{"type":406,"value":2378},"${",{"type":401,"tag":470,"props":2380,"children":2381},{"style":501},[2382],{"type":406,"value":1762},{"type":401,"tag":470,"props":2384,"children":2386},{"style":2385},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2387],{"type":406,"value":583},{"type":401,"tag":470,"props":2389,"children":2390},{"style":501},[2391],{"type":406,"value":2392},"maxAge",{"type":401,"tag":470,"props":2394,"children":2395},{"style":489},[2396],{"type":406,"value":2397}," ||",{"type":401,"tag":470,"props":2399,"children":2400},{"style":483},[2401],{"type":406,"value":2265},{"type":401,"tag":470,"props":2403,"children":2404},{"style":2375},[2405],{"type":406,"value":2406},"}",{"type":401,"tag":470,"props":2408,"children":2409},{"style":507},[2410],{"type":406,"value":2367},{"type":401,"tag":470,"props":2412,"children":2413},{"style":1614},[2414],{"type":406,"value":2415},"]\n",{"type":401,"tag":470,"props":2417,"children":2418},{"class":472,"line":563},[2419,2424,2429,2433,2437,2442,2446,2452,2456,2461,2465,2469,2474],{"type":401,"tag":470,"props":2420,"children":2421},{"style":1695},[2422],{"type":406,"value":2423},"  if",{"type":401,"tag":470,"props":2425,"children":2426},{"style":1614},[2427],{"type":406,"value":2428}," (",{"type":401,"tag":470,"props":2430,"children":2431},{"style":501},[2432],{"type":406,"value":1762},{"type":401,"tag":470,"props":2434,"children":2435},{"style":580},[2436],{"type":406,"value":583},{"type":401,"tag":470,"props":2438,"children":2439},{"style":501},[2440],{"type":406,"value":2441},"includeSubDomains",{"type":401,"tag":470,"props":2443,"children":2444},{"style":489},[2445],{"type":406,"value":1593},{"type":401,"tag":470,"props":2447,"children":2449},{"style":2448},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2450],{"type":406,"value":2451}," undefined",{"type":401,"tag":470,"props":2453,"children":2454},{"style":489},[2455],{"type":406,"value":2397},{"type":401,"tag":470,"props":2457,"children":2458},{"style":501},[2459],{"type":406,"value":2460}," options",{"type":401,"tag":470,"props":2462,"children":2463},{"style":580},[2464],{"type":406,"value":583},{"type":401,"tag":470,"props":2466,"children":2467},{"style":501},[2468],{"type":406,"value":2441},{"type":401,"tag":470,"props":2470,"children":2471},{"style":1614},[2472],{"type":406,"value":2473},") ",{"type":401,"tag":470,"props":2475,"children":2476},{"style":580},[2477],{"type":406,"value":2478},"{\n",{"type":401,"tag":470,"props":2480,"children":2481},{"class":472,"line":571},[2482,2487,2491,2496,2500,2504,2508,2512],{"type":401,"tag":470,"props":2483,"children":2484},{"style":501},[2485],{"type":406,"value":2486},"    directives",{"type":401,"tag":470,"props":2488,"children":2489},{"style":580},[2490],{"type":406,"value":583},{"type":401,"tag":470,"props":2492,"children":2493},{"style":495},[2494],{"type":406,"value":2495},"push",{"type":401,"tag":470,"props":2497,"children":2498},{"style":1614},[2499],{"type":406,"value":504},{"type":401,"tag":470,"props":2501,"children":2502},{"style":507},[2503],{"type":406,"value":510},{"type":401,"tag":470,"props":2505,"children":2506},{"style":513},[2507],{"type":406,"value":2441},{"type":401,"tag":470,"props":2509,"children":2510},{"style":507},[2511],{"type":406,"value":510},{"type":401,"tag":470,"props":2513,"children":2514},{"style":1614},[2515],{"type":406,"value":525},{"type":401,"tag":470,"props":2517,"children":2518},{"class":472,"line":1296},[2519],{"type":401,"tag":470,"props":2520,"children":2521},{"style":580},[2522],{"type":406,"value":1929},{"type":401,"tag":470,"props":2524,"children":2525},{"class":472,"line":1305},[2526,2531,2535,2539,2544,2548,2552,2556,2560,2564,2568,2572],{"type":401,"tag":470,"props":2527,"children":2528},{"style":501},[2529],{"type":406,"value":2530},"  options",{"type":401,"tag":470,"props":2532,"children":2533},{"style":580},[2534],{"type":406,"value":583},{"type":401,"tag":470,"props":2536,"children":2537},{"style":501},[2538],{"type":406,"value":2230},{"type":401,"tag":470,"props":2540,"children":2541},{"style":489},[2542],{"type":406,"value":2543}," &&",{"type":401,"tag":470,"props":2545,"children":2546},{"style":501},[2547],{"type":406,"value":2354},{"type":401,"tag":470,"props":2549,"children":2550},{"style":580},[2551],{"type":406,"value":583},{"type":401,"tag":470,"props":2553,"children":2554},{"style":495},[2555],{"type":406,"value":2495},{"type":401,"tag":470,"props":2557,"children":2558},{"style":1614},[2559],{"type":406,"value":504},{"type":401,"tag":470,"props":2561,"children":2562},{"style":507},[2563],{"type":406,"value":510},{"type":401,"tag":470,"props":2565,"children":2566},{"style":513},[2567],{"type":406,"value":2230},{"type":401,"tag":470,"props":2569,"children":2570},{"style":507},[2571],{"type":406,"value":510},{"type":401,"tag":470,"props":2573,"children":2574},{"style":1614},[2575],{"type":406,"value":525},{"type":401,"tag":470,"props":2577,"children":2578},{"class":472,"line":1326},[2579,2583,2587,2591,2595,2599,2603,2608,2612],{"type":401,"tag":470,"props":2580,"children":2581},{"style":1695},[2582],{"type":406,"value":1698},{"type":401,"tag":470,"props":2584,"children":2585},{"style":501},[2586],{"type":406,"value":2354},{"type":401,"tag":470,"props":2588,"children":2589},{"style":580},[2590],{"type":406,"value":583},{"type":401,"tag":470,"props":2592,"children":2593},{"style":495},[2594],{"type":406,"value":1711},{"type":401,"tag":470,"props":2596,"children":2597},{"style":1614},[2598],{"type":406,"value":504},{"type":401,"tag":470,"props":2600,"children":2601},{"style":507},[2602],{"type":406,"value":510},{"type":401,"tag":470,"props":2604,"children":2605},{"style":513},[2606],{"type":406,"value":2607},"; ",{"type":401,"tag":470,"props":2609,"children":2610},{"style":507},[2611],{"type":406,"value":510},{"type":401,"tag":470,"props":2613,"children":2614},{"style":1614},[2615],{"type":406,"value":525},{"type":401,"tag":470,"props":2617,"children":2618},{"class":472,"line":1335},[2619],{"type":401,"tag":470,"props":2620,"children":2621},{"style":580},[2622],{"type":406,"value":1740},{"type":401,"tag":470,"props":2624,"children":2625},{"class":472,"line":1356},[2626,2630,2635,2639,2643,2647,2651],{"type":401,"tag":470,"props":2627,"children":2628},{"style":477},[2629],{"type":406,"value":1509},{"type":401,"tag":470,"props":2631,"children":2632},{"style":495},[2633],{"type":406,"value":2634}," strictTransportSecurity",{"type":401,"tag":470,"props":2636,"children":2637},{"style":580},[2638],{"type":406,"value":504},{"type":401,"tag":470,"props":2640,"children":2641},{"style":1522},[2642],{"type":406,"value":1762},{"type":401,"tag":470,"props":2644,"children":2645},{"style":489},[2646],{"type":406,"value":492},{"type":401,"tag":470,"props":2648,"children":2649},{"style":580},[2650],{"type":406,"value":1771},{"type":401,"tag":470,"props":2652,"children":2653},{"style":580},[2654],{"type":406,"value":1561},{"type":401,"tag":470,"props":2656,"children":2657},{"class":472,"line":1365},[2658,2662,2666,2670,2674,2678,2682],{"type":401,"tag":470,"props":2659,"children":2660},{"style":477},[2661],{"type":406,"value":1570},{"type":401,"tag":470,"props":2663,"children":2664},{"style":483},[2665],{"type":406,"value":1788},{"type":401,"tag":470,"props":2667,"children":2668},{"style":489},[2669],{"type":406,"value":492},{"type":401,"tag":470,"props":2671,"children":2672},{"style":495},[2673],{"type":406,"value":1514},{"type":401,"tag":470,"props":2675,"children":2676},{"style":1614},[2677],{"type":406,"value":504},{"type":401,"tag":470,"props":2679,"children":2680},{"style":501},[2681],{"type":406,"value":1762},{"type":401,"tag":470,"props":2683,"children":2684},{"style":1614},[2685],{"type":406,"value":525},{"type":401,"tag":470,"props":2687,"children":2688},{"class":472,"line":1386},[2689,2693,2697,2702,2706,2710,2714,2718,2722,2726,2730],{"type":401,"tag":470,"props":2690,"children":2691},{"style":1695},[2692],{"type":406,"value":1698},{"type":401,"tag":470,"props":2694,"children":2695},{"style":477},[2696],{"type":406,"value":1821},{"type":401,"tag":470,"props":2698,"children":2699},{"style":495},[2700],{"type":406,"value":2701}," strictTransportSecurityMiddleware",{"type":401,"tag":470,"props":2703,"children":2704},{"style":580},[2705],{"type":406,"value":504},{"type":401,"tag":470,"props":2707,"children":2708},{"style":1522},[2709],{"type":406,"value":1835},{"type":401,"tag":470,"props":2711,"children":2712},{"style":580},[2713],{"type":406,"value":795},{"type":401,"tag":470,"props":2715,"children":2716},{"style":1522},[2717],{"type":406,"value":1844},{"type":401,"tag":470,"props":2719,"children":2720},{"style":580},[2721],{"type":406,"value":795},{"type":401,"tag":470,"props":2723,"children":2724},{"style":1522},[2725],{"type":406,"value":1853},{"type":401,"tag":470,"props":2727,"children":2728},{"style":580},[2729],{"type":406,"value":1858},{"type":401,"tag":470,"props":2731,"children":2732},{"style":580},[2733],{"type":406,"value":1561},{"type":401,"tag":470,"props":2735,"children":2736},{"class":472,"line":1395},[2737,2741,2745,2749,2753,2757,2762,2766,2770,2774],{"type":401,"tag":470,"props":2738,"children":2739},{"style":501},[2740],{"type":406,"value":1871},{"type":401,"tag":470,"props":2742,"children":2743},{"style":580},[2744],{"type":406,"value":583},{"type":401,"tag":470,"props":2746,"children":2747},{"style":495},[2748],{"type":406,"value":773},{"type":401,"tag":470,"props":2750,"children":2751},{"style":1614},[2752],{"type":406,"value":504},{"type":401,"tag":470,"props":2754,"children":2755},{"style":507},[2756],{"type":406,"value":510},{"type":401,"tag":470,"props":2758,"children":2759},{"style":513},[2760],{"type":406,"value":2761},"Strict-Transport-Security",{"type":401,"tag":470,"props":2763,"children":2764},{"style":507},[2765],{"type":406,"value":510},{"type":401,"tag":470,"props":2767,"children":2768},{"style":580},[2769],{"type":406,"value":795},{"type":401,"tag":470,"props":2771,"children":2772},{"style":501},[2773],{"type":406,"value":1788},{"type":401,"tag":470,"props":2775,"children":2776},{"style":1614},[2777],{"type":406,"value":525},{"type":401,"tag":470,"props":2779,"children":2780},{"class":472,"line":1416},[2781,2785],{"type":401,"tag":470,"props":2782,"children":2783},{"style":495},[2784],{"type":406,"value":1916},{"type":401,"tag":470,"props":2786,"children":2787},{"style":1614},[2788],{"type":406,"value":560},{"type":401,"tag":470,"props":2790,"children":2791},{"class":472,"line":1425},[2792],{"type":401,"tag":470,"props":2793,"children":2794},{"style":580},[2795],{"type":406,"value":1929},{"type":401,"tag":470,"props":2797,"children":2798},{"class":472,"line":1446},[2799],{"type":401,"tag":470,"props":2800,"children":2801},{"style":580},[2802],{"type":406,"value":1740},{"type":401,"tag":670,"props":2804,"children":2806},{"id":2805},"可选用证书透明性策略",[2807],{"type":406,"value":2805},{"type":401,"tag":459,"props":2809,"children":2811},{"code":2810,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('Expect-CT' /* someValue */)\n",[2812],{"type":401,"tag":466,"props":2813,"children":2814},{"__ignoreMap":394},[2815],{"type":401,"tag":470,"props":2816,"children":2817},{"class":472,"line":473},[2818,2822,2826,2830,2834,2838,2843,2847,2852],{"type":401,"tag":470,"props":2819,"children":2820},{"style":501},[2821],{"type":406,"value":690},{"type":401,"tag":470,"props":2823,"children":2824},{"style":580},[2825],{"type":406,"value":583},{"type":401,"tag":470,"props":2827,"children":2828},{"style":495},[2829],{"type":406,"value":773},{"type":401,"tag":470,"props":2831,"children":2832},{"style":501},[2833],{"type":406,"value":504},{"type":401,"tag":470,"props":2835,"children":2836},{"style":507},[2837],{"type":406,"value":510},{"type":401,"tag":470,"props":2839,"children":2840},{"style":513},[2841],{"type":406,"value":2842},"Expect-CT",{"type":401,"tag":470,"props":2844,"children":2845},{"style":507},[2846],{"type":406,"value":510},{"type":401,"tag":470,"props":2848,"children":2849},{"style":1240},[2850],{"type":406,"value":2851}," /* someValue */",{"type":401,"tag":470,"props":2853,"children":2854},{"style":501},[2855],{"type":406,"value":525},{"type":401,"tag":402,"props":2857,"children":2858},{},[2859,2864,2866,2877,2879,2890],{"type":401,"tag":466,"props":2860,"children":2862},{"className":2861},[],[2863],{"type":406,"value":2842},{"type":406,"value":2865}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":401,"tag":409,"props":2867,"children":2868},{},[2869],{"type":401,"tag":413,"props":2870,"children":2874},{"href":2871,"ariaDescribedBy":2872,"dataFootnoteRef":394,"id":2873},"#user-content-fn-chrome-ct",[417],"user-content-fnref-chrome-ct",[2875],{"type":406,"value":2876},"9",{"type":406,"value":2878},"），避免中间人攻击",{"type":401,"tag":409,"props":2880,"children":2881},{},[2882],{"type":401,"tag":413,"props":2883,"children":2887},{"href":2884,"ariaDescribedBy":2885,"dataFootnoteRef":394,"id":2886},"#user-content-fn-ct",[417],"user-content-fnref-ct",[2888],{"type":406,"value":2889},"10",{"type":406,"value":2891},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":401,"tag":459,"props":2893,"children":2895},{"code":2894},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2896],{"type":401,"tag":466,"props":2897,"children":2898},{"__ignoreMap":394},[2899],{"type":406,"value":2894},{"type":401,"tag":402,"props":2901,"children":2902},{},[2903,2905,2910],{"type":406,"value":2904},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":401,"tag":466,"props":2906,"children":2908},{"className":2907},[],[2909],{"type":406,"value":2842},{"type":406,"value":2911}," 就作不上用咯... TODO",{"type":401,"tag":670,"props":2913,"children":2915},{"id":2914},"拒绝来自-pdfflash-的跨域请求",[2916],{"type":406,"value":2917},"拒绝来自 PDF、Flash 的跨域请求",{"type":401,"tag":402,"props":2919,"children":2920},{},[2921,2927,2929,2940],{"type":401,"tag":466,"props":2922,"children":2924},{"className":2923},[],[2925],{"type":406,"value":2926},"X-Permitted-Cross-Domain-Policies",{"type":406,"value":2928}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":401,"tag":409,"props":2930,"children":2931},{},[2932],{"type":401,"tag":413,"props":2933,"children":2937},{"href":2934,"ariaDescribedBy":2935,"dataFootnoteRef":394,"id":2936},"#user-content-fn-pdf-reader",[417],"user-content-fnref-pdf-reader",[2938],{"type":406,"value":2939},"11",{"type":406,"value":2941},"：",{"type":401,"tag":402,"props":2943,"children":2944},{},[2945],{"type":401,"tag":1123,"props":2946,"children":2948},{"alt":2926,"src":2947},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":401,"tag":2950,"props":2951,"children":2952},"ol",{},[2953,2959],{"type":401,"tag":2954,"props":2955,"children":2956},"li",{},[2957],{"type":406,"value":2958},"用户在 A 网站打开了某个 PDF；",{"type":401,"tag":2954,"props":2960,"children":2961},{},[2962,2964,2970],{"type":406,"value":2963},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":401,"tag":466,"props":2965,"children":2967},{"className":2966},[],[2968],{"type":406,"value":2969},"crossdomain.xml",{"type":406,"value":2971}," 文件（策略文件）作为跨域策略应对方案。",{"type":401,"tag":402,"props":2973,"children":2974},{},[2975],{"type":406,"value":2976},"一个策略文件可能长这样：",{"type":401,"tag":459,"props":2978,"children":2980},{"code":2979,"language":1961,"meta":394,"className":1962,"style":394},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2981],{"type":401,"tag":466,"props":2982,"children":2983},{"__ignoreMap":394},[2984,2992,3008,3047,3083,3119,3155,3191],{"type":401,"tag":470,"props":2985,"children":2986},{"class":472,"line":473},[2987],{"type":401,"tag":470,"props":2988,"children":2989},{"style":1240},[2990],{"type":406,"value":2991},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":401,"tag":470,"props":2993,"children":2994},{"class":472,"line":528},[2995,2999,3004],{"type":401,"tag":470,"props":2996,"children":2997},{"style":580},[2998],{"type":406,"value":1974},{"type":401,"tag":470,"props":3000,"children":3001},{"style":1977},[3002],{"type":406,"value":3003},"cross-domain-policy",{"type":401,"tag":470,"props":3005,"children":3006},{"style":580},[3007],{"type":406,"value":2099},{"type":401,"tag":470,"props":3009,"children":3010},{"class":472,"line":537},[3011,3016,3021,3026,3030,3034,3039,3043],{"type":401,"tag":470,"props":3012,"children":3013},{"style":580},[3014],{"type":406,"value":3015},"  \u003C",{"type":401,"tag":470,"props":3017,"children":3018},{"style":1977},[3019],{"type":406,"value":3020},"allow-access-from",{"type":401,"tag":470,"props":3022,"children":3023},{"style":1983},[3024],{"type":406,"value":3025}," domain",{"type":401,"tag":470,"props":3027,"children":3028},{"style":580},[3029],{"type":406,"value":1991},{"type":401,"tag":470,"props":3031,"children":3032},{"style":507},[3033],{"type":406,"value":1996},{"type":401,"tag":470,"props":3035,"children":3036},{"style":513},[3037],{"type":406,"value":3038},"*.taobao.com",{"type":401,"tag":470,"props":3040,"children":3041},{"style":507},[3042],{"type":406,"value":1996},{"type":401,"tag":470,"props":3044,"children":3045},{"style":580},[3046],{"type":406,"value":2031},{"type":401,"tag":470,"props":3048,"children":3049},{"class":472,"line":563},[3050,3054,3058,3062,3066,3070,3075,3079],{"type":401,"tag":470,"props":3051,"children":3052},{"style":580},[3053],{"type":406,"value":3015},{"type":401,"tag":470,"props":3055,"children":3056},{"style":1977},[3057],{"type":406,"value":3020},{"type":401,"tag":470,"props":3059,"children":3060},{"style":1983},[3061],{"type":406,"value":3025},{"type":401,"tag":470,"props":3063,"children":3064},{"style":580},[3065],{"type":406,"value":1991},{"type":401,"tag":470,"props":3067,"children":3068},{"style":507},[3069],{"type":406,"value":1996},{"type":401,"tag":470,"props":3071,"children":3072},{"style":513},[3073],{"type":406,"value":3074},"*.taobao.net",{"type":401,"tag":470,"props":3076,"children":3077},{"style":507},[3078],{"type":406,"value":1996},{"type":401,"tag":470,"props":3080,"children":3081},{"style":580},[3082],{"type":406,"value":2031},{"type":401,"tag":470,"props":3084,"children":3085},{"class":472,"line":571},[3086,3090,3094,3098,3102,3106,3111,3115],{"type":401,"tag":470,"props":3087,"children":3088},{"style":580},[3089],{"type":406,"value":3015},{"type":401,"tag":470,"props":3091,"children":3092},{"style":1977},[3093],{"type":406,"value":3020},{"type":401,"tag":470,"props":3095,"children":3096},{"style":1983},[3097],{"type":406,"value":3025},{"type":401,"tag":470,"props":3099,"children":3100},{"style":580},[3101],{"type":406,"value":1991},{"type":401,"tag":470,"props":3103,"children":3104},{"style":507},[3105],{"type":406,"value":1996},{"type":401,"tag":470,"props":3107,"children":3108},{"style":513},[3109],{"type":406,"value":3110},"*.taobaocdn.com",{"type":401,"tag":470,"props":3112,"children":3113},{"style":507},[3114],{"type":406,"value":1996},{"type":401,"tag":470,"props":3116,"children":3117},{"style":580},[3118],{"type":406,"value":2031},{"type":401,"tag":470,"props":3120,"children":3121},{"class":472,"line":1296},[3122,3126,3130,3134,3138,3142,3147,3151],{"type":401,"tag":470,"props":3123,"children":3124},{"style":580},[3125],{"type":406,"value":3015},{"type":401,"tag":470,"props":3127,"children":3128},{"style":1977},[3129],{"type":406,"value":3020},{"type":401,"tag":470,"props":3131,"children":3132},{"style":1983},[3133],{"type":406,"value":3025},{"type":401,"tag":470,"props":3135,"children":3136},{"style":580},[3137],{"type":406,"value":1991},{"type":401,"tag":470,"props":3139,"children":3140},{"style":507},[3141],{"type":406,"value":1996},{"type":401,"tag":470,"props":3143,"children":3144},{"style":513},[3145],{"type":406,"value":3146},"*.tbcdn.cn",{"type":401,"tag":470,"props":3148,"children":3149},{"style":507},[3150],{"type":406,"value":1996},{"type":401,"tag":470,"props":3152,"children":3153},{"style":580},[3154],{"type":406,"value":2031},{"type":401,"tag":470,"props":3156,"children":3157},{"class":472,"line":1305},[3158,3162,3166,3170,3174,3178,3183,3187],{"type":401,"tag":470,"props":3159,"children":3160},{"style":580},[3161],{"type":406,"value":3015},{"type":401,"tag":470,"props":3163,"children":3164},{"style":1977},[3165],{"type":406,"value":3020},{"type":401,"tag":470,"props":3167,"children":3168},{"style":1983},[3169],{"type":406,"value":3025},{"type":401,"tag":470,"props":3171,"children":3172},{"style":580},[3173],{"type":406,"value":1991},{"type":401,"tag":470,"props":3175,"children":3176},{"style":507},[3177],{"type":406,"value":1996},{"type":401,"tag":470,"props":3179,"children":3180},{"style":513},[3181],{"type":406,"value":3182},"*.alicdn.com",{"type":401,"tag":470,"props":3184,"children":3185},{"style":507},[3186],{"type":406,"value":1996},{"type":401,"tag":470,"props":3188,"children":3189},{"style":580},[3190],{"type":406,"value":2031},{"type":401,"tag":470,"props":3192,"children":3193},{"class":472,"line":1326},[3194,3199,3203],{"type":401,"tag":470,"props":3195,"children":3196},{"style":580},[3197],{"type":406,"value":3198},"\u003C/",{"type":401,"tag":470,"props":3200,"children":3201},{"style":1977},[3202],{"type":406,"value":3003},{"type":401,"tag":470,"props":3204,"children":3205},{"style":580},[3206],{"type":406,"value":2099},{"type":401,"tag":402,"props":3208,"children":3209},{},[3210,3212,3217,3219,3224],{"type":406,"value":3211},"其中，若请求响应头包含了 ",{"type":401,"tag":466,"props":3213,"children":3215},{"className":3214},[],[3216],{"type":406,"value":2926},{"type":406,"value":3218},"，便可指定浏览器针对 ",{"type":401,"tag":466,"props":3220,"children":3222},{"className":3221},[],[3223],{"type":406,"value":2969},{"type":406,"value":3225}," 的应对行为。",{"type":401,"tag":459,"props":3227,"children":3229},{"code":3228,"language":462,"meta":394,"className":463,"style":394},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3230],{"type":401,"tag":466,"props":3231,"children":3232},{"__ignoreMap":394},[3233,3261,3269,3289,3297,3317,3325,3345,3353,3370,3377,3422,3470,3513,3524,3531],{"type":401,"tag":470,"props":3234,"children":3235},{"class":472,"line":473},[3236,3240,3245,3249,3253,3257],{"type":401,"tag":470,"props":3237,"children":3238},{"style":477},[3239],{"type":406,"value":480},{"type":401,"tag":470,"props":3241,"children":3242},{"style":483},[3243],{"type":406,"value":3244}," ALLOWED_PERMITTED_POLICIES",{"type":401,"tag":470,"props":3246,"children":3247},{"style":489},[3248],{"type":406,"value":492},{"type":401,"tag":470,"props":3250,"children":3251},{"style":489},[3252],{"type":406,"value":1224},{"type":401,"tag":470,"props":3254,"children":3255},{"style":495},[3256],{"type":406,"value":1229},{"type":401,"tag":470,"props":3258,"children":3259},{"style":501},[3260],{"type":406,"value":1234},{"type":401,"tag":470,"props":3262,"children":3263},{"class":472,"line":528},[3264],{"type":401,"tag":470,"props":3265,"children":3266},{"style":1240},[3267],{"type":406,"value":3268},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":401,"tag":470,"props":3270,"children":3271},{"class":472,"line":537},[3272,3276,3281,3285],{"type":401,"tag":470,"props":3273,"children":3274},{"style":507},[3275],{"type":406,"value":1251},{"type":401,"tag":470,"props":3277,"children":3278},{"style":513},[3279],{"type":406,"value":3280},"master-only",{"type":401,"tag":470,"props":3282,"children":3283},{"style":507},[3284],{"type":406,"value":510},{"type":401,"tag":470,"props":3286,"children":3287},{"style":580},[3288],{"type":406,"value":1265},{"type":401,"tag":470,"props":3290,"children":3291},{"class":472,"line":563},[3292],{"type":401,"tag":470,"props":3293,"children":3294},{"style":1240},[3295],{"type":406,"value":3296},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":401,"tag":470,"props":3298,"children":3299},{"class":472,"line":571},[3300,3304,3309,3313],{"type":401,"tag":470,"props":3301,"children":3302},{"style":507},[3303],{"type":406,"value":1251},{"type":401,"tag":470,"props":3305,"children":3306},{"style":513},[3307],{"type":406,"value":3308},"by-content-type",{"type":401,"tag":470,"props":3310,"children":3311},{"style":507},[3312],{"type":406,"value":510},{"type":401,"tag":470,"props":3314,"children":3315},{"style":580},[3316],{"type":406,"value":1265},{"type":401,"tag":470,"props":3318,"children":3319},{"class":472,"line":1296},[3320],{"type":401,"tag":470,"props":3321,"children":3322},{"style":1240},[3323],{"type":406,"value":3324},"  // 不使用任何位置的 crossdomain.xml\n",{"type":401,"tag":470,"props":3326,"children":3327},{"class":472,"line":1305},[3328,3332,3337,3341],{"type":401,"tag":470,"props":3329,"children":3330},{"style":507},[3331],{"type":406,"value":1251},{"type":401,"tag":470,"props":3333,"children":3334},{"style":513},[3335],{"type":406,"value":3336},"none",{"type":401,"tag":470,"props":3338,"children":3339},{"style":507},[3340],{"type":406,"value":510},{"type":401,"tag":470,"props":3342,"children":3343},{"style":580},[3344],{"type":406,"value":1265},{"type":401,"tag":470,"props":3346,"children":3347},{"class":472,"line":1326},[3348],{"type":401,"tag":470,"props":3349,"children":3350},{"style":1240},[3351],{"type":406,"value":3352},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":401,"tag":470,"props":3354,"children":3355},{"class":472,"line":1335},[3356,3360,3365],{"type":401,"tag":470,"props":3357,"children":3358},{"style":507},[3359],{"type":406,"value":1251},{"type":401,"tag":470,"props":3361,"children":3362},{"style":513},[3363],{"type":406,"value":3364},"all",{"type":401,"tag":470,"props":3366,"children":3367},{"style":507},[3368],{"type":406,"value":3369},"'\n",{"type":401,"tag":470,"props":3371,"children":3372},{"class":472,"line":1356},[3373],{"type":401,"tag":470,"props":3374,"children":3375},{"style":501},[3376],{"type":406,"value":1500},{"type":401,"tag":470,"props":3378,"children":3379},{"class":472,"line":1365},[3380,3384,3389,3393,3398,3402,3406,3410,3414,3418],{"type":401,"tag":470,"props":3381,"children":3382},{"style":477},[3383],{"type":406,"value":1509},{"type":401,"tag":470,"props":3385,"children":3386},{"style":495},[3387],{"type":406,"value":3388}," xPermittedCrossDomainPolicies",{"type":401,"tag":470,"props":3390,"children":3391},{"style":580},[3392],{"type":406,"value":504},{"type":401,"tag":470,"props":3394,"children":3395},{"style":1522},[3396],{"type":406,"value":3397},"headerValue",{"type":401,"tag":470,"props":3399,"children":3400},{"style":489},[3401],{"type":406,"value":492},{"type":401,"tag":470,"props":3403,"children":3404},{"style":507},[3405],{"type":406,"value":800},{"type":401,"tag":470,"props":3407,"children":3408},{"style":513},[3409],{"type":406,"value":3336},{"type":401,"tag":470,"props":3411,"children":3412},{"style":507},[3413],{"type":406,"value":510},{"type":401,"tag":470,"props":3415,"children":3416},{"style":580},[3417],{"type":406,"value":1858},{"type":401,"tag":470,"props":3419,"children":3420},{"style":580},[3421],{"type":406,"value":1561},{"type":401,"tag":470,"props":3423,"children":3424},{"class":472,"line":1386},[3425,3429,3433,3438,3442,3446,3450,3454,3458,3462,3466],{"type":401,"tag":470,"props":3426,"children":3427},{"style":1695},[3428],{"type":406,"value":1698},{"type":401,"tag":470,"props":3430,"children":3431},{"style":477},[3432],{"type":406,"value":1821},{"type":401,"tag":470,"props":3434,"children":3435},{"style":495},[3436],{"type":406,"value":3437}," xPermittedCrossDomainPoliciesMiddleware",{"type":401,"tag":470,"props":3439,"children":3440},{"style":580},[3441],{"type":406,"value":504},{"type":401,"tag":470,"props":3443,"children":3444},{"style":1522},[3445],{"type":406,"value":1835},{"type":401,"tag":470,"props":3447,"children":3448},{"style":580},[3449],{"type":406,"value":795},{"type":401,"tag":470,"props":3451,"children":3452},{"style":1522},[3453],{"type":406,"value":1844},{"type":401,"tag":470,"props":3455,"children":3456},{"style":580},[3457],{"type":406,"value":795},{"type":401,"tag":470,"props":3459,"children":3460},{"style":1522},[3461],{"type":406,"value":1853},{"type":401,"tag":470,"props":3463,"children":3464},{"style":580},[3465],{"type":406,"value":1858},{"type":401,"tag":470,"props":3467,"children":3468},{"style":580},[3469],{"type":406,"value":1561},{"type":401,"tag":470,"props":3471,"children":3472},{"class":472,"line":1395},[3473,3477,3481,3485,3489,3493,3497,3501,3505,3509],{"type":401,"tag":470,"props":3474,"children":3475},{"style":501},[3476],{"type":406,"value":1871},{"type":401,"tag":470,"props":3478,"children":3479},{"style":580},[3480],{"type":406,"value":583},{"type":401,"tag":470,"props":3482,"children":3483},{"style":495},[3484],{"type":406,"value":773},{"type":401,"tag":470,"props":3486,"children":3487},{"style":1614},[3488],{"type":406,"value":504},{"type":401,"tag":470,"props":3490,"children":3491},{"style":507},[3492],{"type":406,"value":510},{"type":401,"tag":470,"props":3494,"children":3495},{"style":513},[3496],{"type":406,"value":2926},{"type":401,"tag":470,"props":3498,"children":3499},{"style":507},[3500],{"type":406,"value":510},{"type":401,"tag":470,"props":3502,"children":3503},{"style":580},[3504],{"type":406,"value":795},{"type":401,"tag":470,"props":3506,"children":3507},{"style":501},[3508],{"type":406,"value":1788},{"type":401,"tag":470,"props":3510,"children":3511},{"style":1614},[3512],{"type":406,"value":525},{"type":401,"tag":470,"props":3514,"children":3515},{"class":472,"line":1416},[3516,3520],{"type":401,"tag":470,"props":3517,"children":3518},{"style":495},[3519],{"type":406,"value":1916},{"type":401,"tag":470,"props":3521,"children":3522},{"style":1614},[3523],{"type":406,"value":560},{"type":401,"tag":470,"props":3525,"children":3526},{"class":472,"line":1425},[3527],{"type":401,"tag":470,"props":3528,"children":3529},{"style":580},[3530],{"type":406,"value":1929},{"type":401,"tag":470,"props":3532,"children":3533},{"class":472,"line":1446},[3534],{"type":401,"tag":470,"props":3535,"children":3536},{"style":580},[3537],{"type":406,"value":1740},{"type":401,"tag":402,"props":3539,"children":3540},{},[3541],{"type":406,"value":3542},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":401,"tag":670,"props":3544,"children":3546},{"id":3545},"开启-csp",[3547],{"type":406,"value":3548},"开启 CSP",{"type":401,"tag":402,"props":3550,"children":3551},{},[3552,3554,3559,3561,3566,3568,3573,3575,3586],{"type":406,"value":3553},"还记得刚才提到 Chrome 关闭了 ",{"type":401,"tag":466,"props":3555,"children":3557},{"className":3556},[],[3558],{"type":406,"value":923},{"type":406,"value":3560}," 吗？既然不再使用 ",{"type":401,"tag":466,"props":3562,"children":3564},{"className":3563},[],[3565],{"type":406,"value":923},{"type":406,"value":3567},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":401,"tag":466,"props":3569,"children":3571},{"className":3570},[],[3572],{"type":406,"value":951},{"type":406,"value":3574}," 标准",{"type":401,"tag":409,"props":3576,"children":3577},{},[3578],{"type":401,"tag":413,"props":3579,"children":3583},{"href":3580,"ariaDescribedBy":3581,"dataFootnoteRef":394,"id":3582},"#user-content-fn-csp-standard",[417],"user-content-fnref-csp-standard",[3584],{"type":406,"value":3585},"12",{"type":406,"value":3587},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":401,"tag":402,"props":3589,"children":3590},{},[3591,3596],{"type":401,"tag":466,"props":3592,"children":3594},{"className":3593},[],[3595],{"type":406,"value":951},{"type":406,"value":3597}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":401,"tag":459,"props":3599,"children":3601},{"code":3600,"language":1961,"meta":394,"className":1962,"style":394},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3602],{"type":401,"tag":466,"props":3603,"children":3604},{"__ignoreMap":394},[3605],{"type":401,"tag":470,"props":3606,"children":3607},{"class":472,"line":473},[3608,3612,3616,3621,3625,3629,3634,3638,3642,3646,3650,3655,3659],{"type":401,"tag":470,"props":3609,"children":3610},{"style":580},[3611],{"type":406,"value":1974},{"type":401,"tag":470,"props":3613,"children":3614},{"style":1977},[3615],{"type":406,"value":1980},{"type":401,"tag":470,"props":3617,"children":3618},{"style":1983},[3619],{"type":406,"value":3620}," http-equiv",{"type":401,"tag":470,"props":3622,"children":3623},{"style":580},[3624],{"type":406,"value":1991},{"type":401,"tag":470,"props":3626,"children":3627},{"style":507},[3628],{"type":406,"value":1996},{"type":401,"tag":470,"props":3630,"children":3631},{"style":513},[3632],{"type":406,"value":3633},"Content-Security-Policy",{"type":401,"tag":470,"props":3635,"children":3636},{"style":507},[3637],{"type":406,"value":1996},{"type":401,"tag":470,"props":3639,"children":3640},{"style":1983},[3641],{"type":406,"value":2010},{"type":401,"tag":470,"props":3643,"children":3644},{"style":580},[3645],{"type":406,"value":1991},{"type":401,"tag":470,"props":3647,"children":3648},{"style":507},[3649],{"type":406,"value":1996},{"type":401,"tag":470,"props":3651,"children":3652},{"style":513},[3653],{"type":406,"value":3654},"default-src 'self'; img-src https://*; child-src 'none';",{"type":401,"tag":470,"props":3656,"children":3657},{"style":507},[3658],{"type":406,"value":1996},{"type":401,"tag":470,"props":3660,"children":3661},{"style":580},[3662],{"type":406,"value":2031},{"type":401,"tag":402,"props":3664,"children":3665},{},[3666,3668,3673],{"type":406,"value":3667},"一个典型的 ",{"type":401,"tag":466,"props":3669,"children":3671},{"className":3670},[],[3672],{"type":406,"value":951},{"type":406,"value":3674}," 头如下：",{"type":401,"tag":459,"props":3676,"children":3678},{"code":3677},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3679],{"type":401,"tag":466,"props":3680,"children":3681},{"__ignoreMap":394},[3682],{"type":406,"value":3677},{"type":401,"tag":402,"props":3684,"children":3685},{},[3686],{"type":406,"value":3687},"大致来说，CSP 相关以下几种安全行为：",{"type":401,"tag":3689,"props":3690,"children":3691},"ul",{},[3692,3697,3702,3707],{"type":401,"tag":2954,"props":3693,"children":3694},{},[3695],{"type":406,"value":3696},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":401,"tag":2954,"props":3698,"children":3699},{},[3700],{"type":406,"value":3701},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":401,"tag":2954,"props":3703,"children":3704},{},[3705],{"type":406,"value":3706},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":401,"tag":2954,"props":3708,"children":3709},{},[3710,3712,3718],{"type":406,"value":3711},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":401,"tag":466,"props":3713,"children":3715},{"className":3714},[],[3716],{"type":406,"value":3717},"Content-Security-Policy-Report-Only",{"type":406,"value":3719}," Header。",{"type":401,"tag":402,"props":3721,"children":3722},{},[3723,3725,3730],{"type":406,"value":3724},"那么我们看看 Helmet 中默认配置的 ",{"type":401,"tag":466,"props":3726,"children":3728},{"className":3727},[],[3729],{"type":406,"value":951},{"type":406,"value":3731}," 策略：",{"type":401,"tag":459,"props":3733,"children":3735},{"code":3734,"language":462,"meta":394,"className":463,"style":394},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3736],{"type":401,"tag":466,"props":3737,"children":3738},{"__ignoreMap":394},[3739,3759,3767,3814,3822,3866,3874,3903,3911,3989,3997,4040,4048,4108,4116,4161,4169,4213,4221,4229,4237,4245,4294,4302,4380,4388,4396,4404,4429],{"type":401,"tag":470,"props":3740,"children":3741},{"class":472,"line":473},[3742,3746,3751,3755],{"type":401,"tag":470,"props":3743,"children":3744},{"style":477},[3745],{"type":406,"value":480},{"type":401,"tag":470,"props":3747,"children":3748},{"style":483},[3749],{"type":406,"value":3750}," DEFAULT_DIRECTIVES",{"type":401,"tag":470,"props":3752,"children":3753},{"style":489},[3754],{"type":406,"value":492},{"type":401,"tag":470,"props":3756,"children":3757},{"style":580},[3758],{"type":406,"value":1561},{"type":401,"tag":470,"props":3760,"children":3761},{"class":472,"line":528},[3762],{"type":401,"tag":470,"props":3763,"children":3764},{"style":1240},[3765],{"type":406,"value":3766},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":401,"tag":470,"props":3768,"children":3769},{"class":472,"line":537},[3770,3774,3780,3784,3788,3792,3796,3801,3805,3810],{"type":401,"tag":470,"props":3771,"children":3772},{"style":507},[3773],{"type":406,"value":1251},{"type":401,"tag":470,"props":3775,"children":3777},{"style":3776},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3778],{"type":406,"value":3779},"default-src",{"type":401,"tag":470,"props":3781,"children":3782},{"style":507},[3783],{"type":406,"value":510},{"type":401,"tag":470,"props":3785,"children":3786},{"style":580},[3787],{"type":406,"value":1630},{"type":401,"tag":470,"props":3789,"children":3790},{"style":501},[3791],{"type":406,"value":1534},{"type":401,"tag":470,"props":3793,"children":3794},{"style":507},[3795],{"type":406,"value":1996},{"type":401,"tag":470,"props":3797,"children":3798},{"style":513},[3799],{"type":406,"value":3800},"'self'",{"type":401,"tag":470,"props":3802,"children":3803},{"style":507},[3804],{"type":406,"value":1996},{"type":401,"tag":470,"props":3806,"children":3807},{"style":501},[3808],{"type":406,"value":3809},"]",{"type":401,"tag":470,"props":3811,"children":3812},{"style":580},[3813],{"type":406,"value":1265},{"type":401,"tag":470,"props":3815,"children":3816},{"class":472,"line":563},[3817],{"type":401,"tag":470,"props":3818,"children":3819},{"style":1240},[3820],{"type":406,"value":3821},"  // 限制 base 标签的 URI 为源地址\n",{"type":401,"tag":470,"props":3823,"children":3824},{"class":472,"line":571},[3825,3829,3834,3838,3842,3846,3850,3854,3858,3862],{"type":401,"tag":470,"props":3826,"children":3827},{"style":507},[3828],{"type":406,"value":1251},{"type":401,"tag":470,"props":3830,"children":3831},{"style":3776},[3832],{"type":406,"value":3833},"base-uri",{"type":401,"tag":470,"props":3835,"children":3836},{"style":507},[3837],{"type":406,"value":510},{"type":401,"tag":470,"props":3839,"children":3840},{"style":580},[3841],{"type":406,"value":1630},{"type":401,"tag":470,"props":3843,"children":3844},{"style":501},[3845],{"type":406,"value":1534},{"type":401,"tag":470,"props":3847,"children":3848},{"style":507},[3849],{"type":406,"value":1996},{"type":401,"tag":470,"props":3851,"children":3852},{"style":513},[3853],{"type":406,"value":3800},{"type":401,"tag":470,"props":3855,"children":3856},{"style":507},[3857],{"type":406,"value":1996},{"type":401,"tag":470,"props":3859,"children":3860},{"style":501},[3861],{"type":406,"value":3809},{"type":401,"tag":470,"props":3863,"children":3864},{"style":580},[3865],{"type":406,"value":1265},{"type":401,"tag":470,"props":3867,"children":3868},{"class":472,"line":1296},[3869],{"type":401,"tag":470,"props":3870,"children":3871},{"style":1240},[3872],{"type":406,"value":3873},"  // 禁止通过 HTTP 协议加载内容\n",{"type":401,"tag":470,"props":3875,"children":3876},{"class":472,"line":1305},[3877,3881,3886,3890,3894,3899],{"type":401,"tag":470,"props":3878,"children":3879},{"style":507},[3880],{"type":406,"value":1251},{"type":401,"tag":470,"props":3882,"children":3883},{"style":3776},[3884],{"type":406,"value":3885},"block-all-mixed-content",{"type":401,"tag":470,"props":3887,"children":3888},{"style":507},[3889],{"type":406,"value":510},{"type":401,"tag":470,"props":3891,"children":3892},{"style":580},[3893],{"type":406,"value":1630},{"type":401,"tag":470,"props":3895,"children":3896},{"style":501},[3897],{"type":406,"value":3898}," []",{"type":401,"tag":470,"props":3900,"children":3901},{"style":580},[3902],{"type":406,"value":1265},{"type":401,"tag":470,"props":3904,"children":3905},{"class":472,"line":1326},[3906],{"type":401,"tag":470,"props":3907,"children":3908},{"style":1240},[3909],{"type":406,"value":3910},"  // 限制字体加载地址\n",{"type":401,"tag":470,"props":3912,"children":3913},{"class":472,"line":1335},[3914,3918,3923,3927,3931,3935,3939,3943,3947,3951,3955,3960,3964,3968,3972,3977,3981,3985],{"type":401,"tag":470,"props":3915,"children":3916},{"style":507},[3917],{"type":406,"value":1251},{"type":401,"tag":470,"props":3919,"children":3920},{"style":3776},[3921],{"type":406,"value":3922},"font-src",{"type":401,"tag":470,"props":3924,"children":3925},{"style":507},[3926],{"type":406,"value":510},{"type":401,"tag":470,"props":3928,"children":3929},{"style":580},[3930],{"type":406,"value":1630},{"type":401,"tag":470,"props":3932,"children":3933},{"style":501},[3934],{"type":406,"value":1534},{"type":401,"tag":470,"props":3936,"children":3937},{"style":507},[3938],{"type":406,"value":1996},{"type":401,"tag":470,"props":3940,"children":3941},{"style":513},[3942],{"type":406,"value":3800},{"type":401,"tag":470,"props":3944,"children":3945},{"style":507},[3946],{"type":406,"value":1996},{"type":401,"tag":470,"props":3948,"children":3949},{"style":580},[3950],{"type":406,"value":795},{"type":401,"tag":470,"props":3952,"children":3953},{"style":507},[3954],{"type":406,"value":800},{"type":401,"tag":470,"props":3956,"children":3957},{"style":513},[3958],{"type":406,"value":3959},"https:",{"type":401,"tag":470,"props":3961,"children":3962},{"style":507},[3963],{"type":406,"value":510},{"type":401,"tag":470,"props":3965,"children":3966},{"style":580},[3967],{"type":406,"value":795},{"type":401,"tag":470,"props":3969,"children":3970},{"style":507},[3971],{"type":406,"value":800},{"type":401,"tag":470,"props":3973,"children":3974},{"style":513},[3975],{"type":406,"value":3976},"data:",{"type":401,"tag":470,"props":3978,"children":3979},{"style":507},[3980],{"type":406,"value":510},{"type":401,"tag":470,"props":3982,"children":3983},{"style":501},[3984],{"type":406,"value":3809},{"type":401,"tag":470,"props":3986,"children":3987},{"style":580},[3988],{"type":406,"value":1265},{"type":401,"tag":470,"props":3990,"children":3991},{"class":472,"line":1356},[3992],{"type":401,"tag":470,"props":3993,"children":3994},{"style":1240},[3995],{"type":406,"value":3996},"  // 限制嵌入的外部资源\n",{"type":401,"tag":470,"props":3998,"children":3999},{"class":472,"line":1365},[4000,4004,4008,4012,4016,4020,4024,4028,4032,4036],{"type":401,"tag":470,"props":4001,"children":4002},{"style":507},[4003],{"type":406,"value":1251},{"type":401,"tag":470,"props":4005,"children":4006},{"style":3776},[4007],{"type":406,"value":1145},{"type":401,"tag":470,"props":4009,"children":4010},{"style":507},[4011],{"type":406,"value":510},{"type":401,"tag":470,"props":4013,"children":4014},{"style":580},[4015],{"type":406,"value":1630},{"type":401,"tag":470,"props":4017,"children":4018},{"style":501},[4019],{"type":406,"value":1534},{"type":401,"tag":470,"props":4021,"children":4022},{"style":507},[4023],{"type":406,"value":1996},{"type":401,"tag":470,"props":4025,"children":4026},{"style":513},[4027],{"type":406,"value":3800},{"type":401,"tag":470,"props":4029,"children":4030},{"style":507},[4031],{"type":406,"value":1996},{"type":401,"tag":470,"props":4033,"children":4034},{"style":501},[4035],{"type":406,"value":3809},{"type":401,"tag":470,"props":4037,"children":4038},{"style":580},[4039],{"type":406,"value":1265},{"type":401,"tag":470,"props":4041,"children":4042},{"class":472,"line":1386},[4043],{"type":401,"tag":470,"props":4044,"children":4045},{"style":1240},[4046],{"type":406,"value":4047},"  // 限制图片加载地址\n",{"type":401,"tag":470,"props":4049,"children":4050},{"class":472,"line":1395},[4051,4055,4060,4064,4068,4072,4076,4080,4084,4088,4092,4096,4100,4104],{"type":401,"tag":470,"props":4052,"children":4053},{"style":507},[4054],{"type":406,"value":1251},{"type":401,"tag":470,"props":4056,"children":4057},{"style":3776},[4058],{"type":406,"value":4059},"img-src",{"type":401,"tag":470,"props":4061,"children":4062},{"style":507},[4063],{"type":406,"value":510},{"type":401,"tag":470,"props":4065,"children":4066},{"style":580},[4067],{"type":406,"value":1630},{"type":401,"tag":470,"props":4069,"children":4070},{"style":501},[4071],{"type":406,"value":1534},{"type":401,"tag":470,"props":4073,"children":4074},{"style":507},[4075],{"type":406,"value":1996},{"type":401,"tag":470,"props":4077,"children":4078},{"style":513},[4079],{"type":406,"value":3800},{"type":401,"tag":470,"props":4081,"children":4082},{"style":507},[4083],{"type":406,"value":1996},{"type":401,"tag":470,"props":4085,"children":4086},{"style":580},[4087],{"type":406,"value":795},{"type":401,"tag":470,"props":4089,"children":4090},{"style":507},[4091],{"type":406,"value":800},{"type":401,"tag":470,"props":4093,"children":4094},{"style":513},[4095],{"type":406,"value":3976},{"type":401,"tag":470,"props":4097,"children":4098},{"style":507},[4099],{"type":406,"value":510},{"type":401,"tag":470,"props":4101,"children":4102},{"style":501},[4103],{"type":406,"value":3809},{"type":401,"tag":470,"props":4105,"children":4106},{"style":580},[4107],{"type":406,"value":1265},{"type":401,"tag":470,"props":4109,"children":4110},{"class":472,"line":1416},[4111],{"type":401,"tag":470,"props":4112,"children":4113},{"style":1240},[4114],{"type":406,"value":4115},"  // 禁用 object 标签\n",{"type":401,"tag":470,"props":4117,"children":4118},{"class":472,"line":1425},[4119,4123,4128,4132,4136,4140,4144,4149,4153,4157],{"type":401,"tag":470,"props":4120,"children":4121},{"style":507},[4122],{"type":406,"value":1251},{"type":401,"tag":470,"props":4124,"children":4125},{"style":3776},[4126],{"type":406,"value":4127},"object-src",{"type":401,"tag":470,"props":4129,"children":4130},{"style":507},[4131],{"type":406,"value":510},{"type":401,"tag":470,"props":4133,"children":4134},{"style":580},[4135],{"type":406,"value":1630},{"type":401,"tag":470,"props":4137,"children":4138},{"style":501},[4139],{"type":406,"value":1534},{"type":401,"tag":470,"props":4141,"children":4142},{"style":507},[4143],{"type":406,"value":1996},{"type":401,"tag":470,"props":4145,"children":4146},{"style":513},[4147],{"type":406,"value":4148},"'none'",{"type":401,"tag":470,"props":4150,"children":4151},{"style":507},[4152],{"type":406,"value":1996},{"type":401,"tag":470,"props":4154,"children":4155},{"style":501},[4156],{"type":406,"value":3809},{"type":401,"tag":470,"props":4158,"children":4159},{"style":580},[4160],{"type":406,"value":1265},{"type":401,"tag":470,"props":4162,"children":4163},{"class":472,"line":1446},[4164],{"type":401,"tag":470,"props":4165,"children":4166},{"style":1240},[4167],{"type":406,"value":4168},"  // 只从源地址加载脚本\n",{"type":401,"tag":470,"props":4170,"children":4171},{"class":472,"line":1455},[4172,4176,4181,4185,4189,4193,4197,4201,4205,4209],{"type":401,"tag":470,"props":4173,"children":4174},{"style":507},[4175],{"type":406,"value":1251},{"type":401,"tag":470,"props":4177,"children":4178},{"style":3776},[4179],{"type":406,"value":4180},"script-src",{"type":401,"tag":470,"props":4182,"children":4183},{"style":507},[4184],{"type":406,"value":510},{"type":401,"tag":470,"props":4186,"children":4187},{"style":580},[4188],{"type":406,"value":1630},{"type":401,"tag":470,"props":4190,"children":4191},{"style":501},[4192],{"type":406,"value":1534},{"type":401,"tag":470,"props":4194,"children":4195},{"style":507},[4196],{"type":406,"value":1996},{"type":401,"tag":470,"props":4198,"children":4199},{"style":513},[4200],{"type":406,"value":3800},{"type":401,"tag":470,"props":4202,"children":4203},{"style":507},[4204],{"type":406,"value":1996},{"type":401,"tag":470,"props":4206,"children":4207},{"style":501},[4208],{"type":406,"value":3809},{"type":401,"tag":470,"props":4210,"children":4211},{"style":580},[4212],{"type":406,"value":1265},{"type":401,"tag":470,"props":4214,"children":4215},{"class":472,"line":1476},[4216],{"type":401,"tag":470,"props":4217,"children":4218},{"style":1240},[4219],{"type":406,"value":4220},"  // 禁用内联脚本\n",{"type":401,"tag":470,"props":4222,"children":4223},{"class":472,"line":1485},[4224],{"type":401,"tag":470,"props":4225,"children":4226},{"style":1240},[4227],{"type":406,"value":4228},"  // ？这里没能理解\n",{"type":401,"tag":470,"props":4230,"children":4231},{"class":472,"line":1494},[4232],{"type":401,"tag":470,"props":4233,"children":4234},{"style":1240},[4235],{"type":406,"value":4236},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":401,"tag":470,"props":4238,"children":4239},{"class":472,"line":1503},[4240],{"type":401,"tag":470,"props":4241,"children":4242},{"style":1240},[4243],{"type":406,"value":4244},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":401,"tag":470,"props":4246,"children":4247},{"class":472,"line":1564},[4248,4252,4257,4261,4265,4269,4273,4277,4281,4285,4289],{"type":401,"tag":470,"props":4249,"children":4250},{"style":507},[4251],{"type":406,"value":1251},{"type":401,"tag":470,"props":4253,"children":4254},{"style":3776},[4255],{"type":406,"value":4256},"script-src-attr",{"type":401,"tag":470,"props":4258,"children":4259},{"style":507},[4260],{"type":406,"value":510},{"type":401,"tag":470,"props":4262,"children":4263},{"style":580},[4264],{"type":406,"value":1630},{"type":401,"tag":470,"props":4266,"children":4267},{"style":501},[4268],{"type":406,"value":1534},{"type":401,"tag":470,"props":4270,"children":4271},{"style":507},[4272],{"type":406,"value":1996},{"type":401,"tag":470,"props":4274,"children":4275},{"style":513},[4276],{"type":406,"value":4148},{"type":401,"tag":470,"props":4278,"children":4279},{"style":507},[4280],{"type":406,"value":1996},{"type":401,"tag":470,"props":4282,"children":4283},{"style":501},[4284],{"type":406,"value":3809},{"type":401,"tag":470,"props":4286,"children":4287},{"style":580},[4288],{"type":406,"value":795},{"type":401,"tag":470,"props":4290,"children":4291},{"style":501},[4292],{"type":406,"value":4293},"‘\n",{"type":401,"tag":470,"props":4295,"children":4296},{"class":472,"line":1638},[4297],{"type":401,"tag":470,"props":4298,"children":4299},{"style":1240},[4300],{"type":406,"value":4301},"  // 限制样式表加载地址\n",{"type":401,"tag":470,"props":4303,"children":4304},{"class":472,"line":1669},[4305,4309,4314,4318,4322,4326,4330,4334,4338,4342,4346,4350,4354,4358,4363,4368,4372,4376],{"type":401,"tag":470,"props":4306,"children":4307},{"style":507},[4308],{"type":406,"value":1251},{"type":401,"tag":470,"props":4310,"children":4311},{"style":3776},[4312],{"type":406,"value":4313},"style-src",{"type":401,"tag":470,"props":4315,"children":4316},{"style":507},[4317],{"type":406,"value":510},{"type":401,"tag":470,"props":4319,"children":4320},{"style":580},[4321],{"type":406,"value":1630},{"type":401,"tag":470,"props":4323,"children":4324},{"style":501},[4325],{"type":406,"value":1534},{"type":401,"tag":470,"props":4327,"children":4328},{"style":507},[4329],{"type":406,"value":1996},{"type":401,"tag":470,"props":4331,"children":4332},{"style":513},[4333],{"type":406,"value":3800},{"type":401,"tag":470,"props":4335,"children":4336},{"style":507},[4337],{"type":406,"value":1996},{"type":401,"tag":470,"props":4339,"children":4340},{"style":580},[4341],{"type":406,"value":795},{"type":401,"tag":470,"props":4343,"children":4344},{"style":507},[4345],{"type":406,"value":800},{"type":401,"tag":470,"props":4347,"children":4348},{"style":513},[4349],{"type":406,"value":3959},{"type":401,"tag":470,"props":4351,"children":4352},{"style":507},[4353],{"type":406,"value":510},{"type":401,"tag":470,"props":4355,"children":4356},{"style":580},[4357],{"type":406,"value":795},{"type":401,"tag":470,"props":4359,"children":4360},{"style":507},[4361],{"type":406,"value":4362}," \"",{"type":401,"tag":470,"props":4364,"children":4365},{"style":513},[4366],{"type":406,"value":4367},"'unsafe-inline'",{"type":401,"tag":470,"props":4369,"children":4370},{"style":507},[4371],{"type":406,"value":1996},{"type":401,"tag":470,"props":4373,"children":4374},{"style":501},[4375],{"type":406,"value":3809},{"type":401,"tag":470,"props":4377,"children":4378},{"style":580},[4379],{"type":406,"value":1265},{"type":401,"tag":470,"props":4381,"children":4382},{"class":472,"line":1682},[4383],{"type":401,"tag":470,"props":4384,"children":4385},{"style":1240},[4386],{"type":406,"value":4387},"  // 不使用升级协议指令\n",{"type":401,"tag":470,"props":4389,"children":4390},{"class":472,"line":1691},[4391],{"type":401,"tag":470,"props":4392,"children":4393},{"style":1240},[4394],{"type":406,"value":4395},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":401,"tag":470,"props":4397,"children":4398},{"class":472,"line":1734},[4399],{"type":401,"tag":470,"props":4400,"children":4401},{"style":1240},[4402],{"type":406,"value":4403},"  // 所以默认不开启此指令\n",{"type":401,"tag":470,"props":4405,"children":4406},{"class":472,"line":1743},[4407,4411,4416,4420,4424],{"type":401,"tag":470,"props":4408,"children":4409},{"style":507},[4410],{"type":406,"value":1251},{"type":401,"tag":470,"props":4412,"children":4413},{"style":3776},[4414],{"type":406,"value":4415},"upgrade-insecure-requests",{"type":401,"tag":470,"props":4417,"children":4418},{"style":507},[4419],{"type":406,"value":510},{"type":401,"tag":470,"props":4421,"children":4422},{"style":580},[4423],{"type":406,"value":1630},{"type":401,"tag":470,"props":4425,"children":4426},{"style":501},[4427],{"type":406,"value":4428}," []\n",{"type":401,"tag":470,"props":4430,"children":4431},{"class":472,"line":1778},[4432],{"type":401,"tag":470,"props":4433,"children":4434},{"style":580},[4435],{"type":406,"value":1740},{"type":401,"tag":402,"props":4437,"children":4438},{},[4439,4441,4447,4449,4455],{"type":406,"value":4440},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":401,"tag":466,"props":4442,"children":4444},{"className":4443},[],[4445],{"type":406,"value":4446},"CSP 1.0",{"type":406,"value":4448}," 的兼容性，我没有找到最新版本规范（",{"type":401,"tag":466,"props":4450,"children":4452},{"className":4451},[],[4453],{"type":406,"value":4454},"CSP 3.0",{"type":406,"value":4456},"）的兼容性数据 😝。",{"type":401,"tag":402,"props":4458,"children":4459},{},[4460],{"type":401,"tag":1123,"props":4461,"children":4464},{"alt":4462,"src":4463},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":401,"tag":670,"props":4466,"children":4468},{"id":4467},"移除下载文件后的打开按钮",[4469],{"type":406,"value":4470},"移除下载文件后的“打开”按钮",{"type":401,"tag":459,"props":4472,"children":4474},{"code":4473,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('X-Download-Options', 'noopen')\n",[4475],{"type":401,"tag":466,"props":4476,"children":4477},{"__ignoreMap":394},[4478],{"type":401,"tag":470,"props":4479,"children":4480},{"class":472,"line":473},[4481,4485,4489,4493,4497,4501,4506,4510,4514,4518,4523,4527],{"type":401,"tag":470,"props":4482,"children":4483},{"style":501},[4484],{"type":406,"value":690},{"type":401,"tag":470,"props":4486,"children":4487},{"style":580},[4488],{"type":406,"value":583},{"type":401,"tag":470,"props":4490,"children":4491},{"style":495},[4492],{"type":406,"value":773},{"type":401,"tag":470,"props":4494,"children":4495},{"style":501},[4496],{"type":406,"value":504},{"type":401,"tag":470,"props":4498,"children":4499},{"style":507},[4500],{"type":406,"value":510},{"type":401,"tag":470,"props":4502,"children":4503},{"style":513},[4504],{"type":406,"value":4505},"X-Download-Options",{"type":401,"tag":470,"props":4507,"children":4508},{"style":507},[4509],{"type":406,"value":510},{"type":401,"tag":470,"props":4511,"children":4512},{"style":580},[4513],{"type":406,"value":795},{"type":401,"tag":470,"props":4515,"children":4516},{"style":507},[4517],{"type":406,"value":800},{"type":401,"tag":470,"props":4519,"children":4520},{"style":513},[4521],{"type":406,"value":4522},"noopen",{"type":401,"tag":470,"props":4524,"children":4525},{"style":507},[4526],{"type":406,"value":510},{"type":401,"tag":470,"props":4528,"children":4529},{"style":501},[4530],{"type":406,"value":525},{"type":401,"tag":402,"props":4532,"children":4533},{},[4534,4536,4541],{"type":406,"value":4535},"在下载文件时，",{"type":401,"tag":466,"props":4537,"children":4539},{"className":4538},[],[4540],{"type":406,"value":4505},{"type":406,"value":4542}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":401,"tag":670,"props":4544,"children":4546},{"id":4545},"开启-dns-预取",[4547],{"type":406,"value":4548},"开启 DNS 预取",{"type":401,"tag":402,"props":4550,"children":4551},{},[4552,4554,4560],{"type":406,"value":4553},"通过设置 ",{"type":401,"tag":466,"props":4555,"children":4557},{"className":4556},[],[4558],{"type":406,"value":4559},"X-DNS-Prefetch-Control",{"type":406,"value":4561}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":401,"tag":402,"props":4563,"children":4564},{},[4565,4567,4574],{"type":406,"value":4566},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":401,"tag":413,"props":4568,"children":4571},{"href":4569,"rel":4570},"https://github.com/helmetjs/helmet/issues/111",[990],[4572],{"type":406,"value":4573},"Issue",{"type":406,"value":980},{"type":401,"tag":459,"props":4576,"children":4578},{"code":4577,"language":462,"meta":394,"className":463,"style":394},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4579],{"type":401,"tag":466,"props":4580,"children":4581},{"__ignoreMap":394},[4582],{"type":401,"tag":470,"props":4583,"children":4584},{"class":472,"line":473},[4585,4589,4593,4597,4601,4605,4609,4613,4617,4621,4626,4630],{"type":401,"tag":470,"props":4586,"children":4587},{"style":501},[4588],{"type":406,"value":690},{"type":401,"tag":470,"props":4590,"children":4591},{"style":580},[4592],{"type":406,"value":583},{"type":401,"tag":470,"props":4594,"children":4595},{"style":495},[4596],{"type":406,"value":773},{"type":401,"tag":470,"props":4598,"children":4599},{"style":501},[4600],{"type":406,"value":504},{"type":401,"tag":470,"props":4602,"children":4603},{"style":507},[4604],{"type":406,"value":510},{"type":401,"tag":470,"props":4606,"children":4607},{"style":513},[4608],{"type":406,"value":4559},{"type":401,"tag":470,"props":4610,"children":4611},{"style":507},[4612],{"type":406,"value":510},{"type":401,"tag":470,"props":4614,"children":4615},{"style":580},[4616],{"type":406,"value":795},{"type":401,"tag":470,"props":4618,"children":4619},{"style":507},[4620],{"type":406,"value":800},{"type":401,"tag":470,"props":4622,"children":4623},{"style":513},[4624],{"type":406,"value":4625},"on",{"type":401,"tag":470,"props":4627,"children":4628},{"style":507},[4629],{"type":406,"value":510},{"type":401,"tag":470,"props":4631,"children":4632},{"style":501},[4633],{"type":406,"value":525},{"type":401,"tag":639,"props":4635,"children":4637},{"id":4636},"阅读更多",[4638],{"type":406,"value":4636},{"type":401,"tag":402,"props":4640,"children":4641},{},[4642],{"type":406,"value":4643},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":401,"tag":3689,"props":4645,"children":4646},{},[4647],{"type":401,"tag":2954,"props":4648,"children":4649},{},[4650,4652],{"type":406,"value":4651},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":401,"tag":409,"props":4653,"children":4654},{},[4655],{"type":401,"tag":413,"props":4656,"children":4660},{"href":4657,"ariaDescribedBy":4658,"dataFootnoteRef":394,"id":4659},"#user-content-fn-secure-cookie",[417],"user-content-fnref-secure-cookie",[4661],{"type":406,"value":4662},"13",{"type":401,"tag":402,"props":4664,"children":4665},{},[4666,4668,4675,4677,4684],{"type":406,"value":4667},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":401,"tag":413,"props":4669,"children":4672},{"href":4670,"rel":4671},"https://owasp.org/www-project-secure-headers/",[990],[4673],{"type":406,"value":4674},"OWASP Secure Headers Project",{"type":406,"value":4676},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":401,"tag":413,"props":4678,"children":4681},{"href":4679,"rel":4680},"https://infosec.mozilla.org/guidelines/web_security",[990],[4682],{"type":406,"value":4683},"Web Security",{"type":406,"value":4685},"。以下是一些额外的可供探索的页面：",{"type":401,"tag":3689,"props":4687,"children":4688},{},[4689,4699,4709],{"type":401,"tag":2954,"props":4690,"children":4691},{},[4692],{"type":401,"tag":413,"props":4693,"children":4696},{"href":4694,"rel":4695},"https://www.zhihu.com/question/21979782",[990],[4697],{"type":406,"value":4698},"Content Security Policy (CSP) 是什么？",{"type":401,"tag":2954,"props":4700,"children":4701},{},[4702],{"type":401,"tag":413,"props":4703,"children":4706},{"href":4704,"rel":4705},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[990],[4707],{"type":406,"value":4708},"CORS@MDN",{"type":401,"tag":2954,"props":4710,"children":4711},{},[4712],{"type":401,"tag":413,"props":4713,"children":4716},{"href":4714,"rel":4715},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[990],[4717],{"type":406,"value":4718},"OWASP Top 10 2017（RC2）",{"type":401,"tag":4720,"props":4721,"children":4724},"section",{"className":4722,"dataFootnotes":394},[4723],"footnotes",[4725,4732],{"type":401,"tag":639,"props":4726,"children":4729},{"className":4727,"id":417},[4728],"sr-only",[4730],{"type":406,"value":4731},"Footnotes",{"type":401,"tag":2950,"props":4733,"children":4734},{},[4735,4757,4776,4795,4812,4831,4850,4863,4881,4900,4919,4938,4957],{"type":401,"tag":2954,"props":4736,"children":4738},{"id":4737},"user-content-fn-helmet",[4739,4746,4748],{"type":401,"tag":413,"props":4740,"children":4743},{"href":4741,"rel":4742},"https://helmetjs.github.io/",[990],[4744],{"type":406,"value":4745},"HELMET",{"type":406,"value":4747}," ",{"type":401,"tag":413,"props":4749,"children":4754},{"href":4750,"ariaLabel":4751,"className":4752,"dataFootnoteBackref":394},"#user-content-fnref-helmet","Back to reference 1",[4753],"data-footnote-backref",[4755],{"type":406,"value":4756},"↩",{"type":401,"tag":2954,"props":4758,"children":4760},{"id":4759},"user-content-fn-dns-rebinding-1",[4761,4768,4769],{"type":401,"tag":413,"props":4762,"children":4765},{"href":4763,"rel":4764},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[990],[4766],{"type":406,"value":4767},"来自微信外挂的安全风险",{"type":406,"value":4747},{"type":401,"tag":413,"props":4770,"children":4774},{"href":4771,"ariaLabel":4772,"className":4773,"dataFootnoteBackref":394},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4753],[4775],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4777,"children":4779},{"id":4778},"user-content-fn-dns-rebinding-2",[4780,4787,4788],{"type":401,"tag":413,"props":4781,"children":4784},{"href":4782,"rel":4783},"https://github.com/helmetjs/helmet/issues/182",[990],[4785],{"type":406,"value":4786},"GitHub Issue",{"type":406,"value":4747},{"type":401,"tag":413,"props":4789,"children":4793},{"href":4790,"ariaLabel":4791,"className":4792,"dataFootnoteBackref":394},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4753],[4794],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4796,"children":4798},{"id":4797},"user-content-fn-shp",[4799,4804,4805],{"type":401,"tag":413,"props":4800,"children":4802},{"href":4670,"rel":4801},[990],[4803],{"type":406,"value":4674},{"type":406,"value":4747},{"type":401,"tag":413,"props":4806,"children":4810},{"href":4807,"ariaLabel":4808,"className":4809,"dataFootnoteBackref":394},"#user-content-fnref-shp","Back to reference 4",[4753],[4811],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4813,"children":4815},{"id":4814},"user-content-fn-xss-auditor",[4816,4823,4824],{"type":401,"tag":413,"props":4817,"children":4820},{"href":4818,"rel":4819},"https://www.chromestatus.com/feature/5021976655560704",[990],[4821],{"type":406,"value":4822},"XSS Auditor (removed)",{"type":406,"value":4747},{"type":401,"tag":413,"props":4825,"children":4829},{"href":4826,"ariaLabel":4827,"className":4828,"dataFootnoteBackref":394},"#user-content-fnref-xss-auditor","Back to reference 5",[4753],[4830],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4832,"children":4834},{"id":4833},"user-content-fn-delete-xss-auditor",[4835,4842,4843],{"type":401,"tag":413,"props":4836,"children":4839},{"href":4837,"rel":4838},"https://zhuanlan.zhihu.com/p/74288648",[990],[4840],{"type":406,"value":4841},"Google 将删除 Chrome 内置的 XSS 保护",{"type":406,"value":4747},{"type":401,"tag":413,"props":4844,"children":4848},{"href":4845,"ariaLabel":4846,"className":4847,"dataFootnoteBackref":394},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4753],[4849],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4851,"children":4853},{"id":4852},"user-content-fn-referer",[4854,4856],{"type":406,"value":4855},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":401,"tag":413,"props":4857,"children":4861},{"href":4858,"ariaLabel":4859,"className":4860,"dataFootnoteBackref":394},"#user-content-fnref-referer","Back to reference 7",[4753],[4862],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4864,"children":4866},{"id":4865},"user-content-fn-timeend",[4867,4873,4874],{"type":401,"tag":413,"props":4868,"children":4871},{"href":4869,"rel":4870},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[990],[4872],{"type":406,"value":2761},{"type":406,"value":4747},{"type":401,"tag":413,"props":4875,"children":4879},{"href":4876,"ariaLabel":4877,"className":4878,"dataFootnoteBackref":394},"#user-content-fnref-timeend","Back to reference 8",[4753],[4880],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4882,"children":4884},{"id":4883},"user-content-fn-chrome-ct",[4885,4892,4893],{"type":401,"tag":413,"props":4886,"children":4889},{"href":4887,"rel":4888},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[990],[4890],{"type":406,"value":4891},"Chrome 证书透明度（CT）相关政策",{"type":406,"value":4747},{"type":401,"tag":413,"props":4894,"children":4898},{"href":4895,"ariaLabel":4896,"className":4897,"dataFootnoteBackref":394},"#user-content-fnref-chrome-ct","Back to reference 9",[4753],[4899],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4901,"children":4903},{"id":4902},"user-content-fn-ct",[4904,4911,4912],{"type":401,"tag":413,"props":4905,"children":4908},{"href":4906,"rel":4907},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[990],[4909],{"type":406,"value":4910},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":406,"value":4747},{"type":401,"tag":413,"props":4913,"children":4917},{"href":4914,"ariaLabel":4915,"className":4916,"dataFootnoteBackref":394},"#user-content-fnref-ct","Back to reference 10",[4753],[4918],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4920,"children":4922},{"id":4921},"user-content-fn-pdf-reader",[4923,4930,4931],{"type":401,"tag":413,"props":4924,"children":4927},{"href":4925,"rel":4926},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[990],[4928],{"type":406,"value":4929},"Cross Domain Configuration",{"type":406,"value":4747},{"type":401,"tag":413,"props":4932,"children":4936},{"href":4933,"ariaLabel":4934,"className":4935,"dataFootnoteBackref":394},"#user-content-fnref-pdf-reader","Back to reference 11",[4753],[4937],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4939,"children":4941},{"id":4940},"user-content-fn-csp-standard",[4942,4949,4950],{"type":401,"tag":413,"props":4943,"children":4946},{"href":4944,"rel":4945},"https://www.w3.org/TR/CSP/",[990],[4947],{"type":406,"value":4948},"Content Security Policy Level 3",{"type":406,"value":4747},{"type":401,"tag":413,"props":4951,"children":4955},{"href":4952,"ariaLabel":4953,"className":4954,"dataFootnoteBackref":394},"#user-content-fnref-csp-standard","Back to reference 12",[4753],[4956],{"type":406,"value":4756},{"type":401,"tag":2954,"props":4958,"children":4960},{"id":4959},"user-content-fn-secure-cookie",[4961,4968,4969],{"type":401,"tag":413,"props":4962,"children":4965},{"href":4963,"rel":4964},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[990],[4966],{"type":406,"value":4967},"Secure-Cookie",{"type":406,"value":4747},{"type":401,"tag":413,"props":4970,"children":4974},{"href":4971,"ariaLabel":4972,"className":4973,"dataFootnoteBackref":394},"#user-content-fnref-secure-cookie","Back to reference 13",[4753],[4975],{"type":406,"value":4756},{"type":401,"tag":4977,"props":4978,"children":4979},"style",{},[4980],{"type":406,"value":4981},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":394,"searchDepth":528,"depth":528,"links":4983},[4984,4997,4998],{"id":641,"depth":528,"text":644,"children":4985},[4986,4987,4988,4989,4990,4991,4992,4993,4994,4995,4996],{"id":672,"depth":537,"text":675},{"id":747,"depth":537,"text":750},{"id":837,"depth":537,"text":840},{"id":997,"depth":537,"text":997},{"id":1156,"depth":537,"text":1159},{"id":2167,"depth":537,"text":2170},{"id":2805,"depth":537,"text":2805},{"id":2914,"depth":537,"text":2917},{"id":3545,"depth":537,"text":3548},{"id":4467,"depth":537,"text":4470},{"id":4545,"depth":537,"text":4548},{"id":4636,"depth":528,"text":4636},{"id":417,"depth":528,"text":4731},"markdown","content:_archieved:2020-08:helmet-and-security.md","content","_archieved/2020-08/helmet-and-security.md","md",[5005,5009],{"_path":5006,"title":5007,"description":5008},"/_archieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5010,"title":5011,"description":394},"/_archieved/2020-10/noname","无题",1711806186272]