[{"data":1,"prerenderedAt":5006},["Reactive",2],{"navigation":3,"/_archieved/2020-08/helmet-and-security":383,"/_archieved/2020-08/helmet-and-security-surround":4998},[4,32,80,96,123,129,135,366,372,378],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":42,"_path":43},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":45,"_path":46},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":48,"_path":49},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":51,"_path":52},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":54,"_path":55},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":57,"_path":58},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":60,"_path":61},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":63,"_path":64},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":66,"_path":67},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":69,"_path":70},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":72,"_path":73},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":75,"_path":76},"🚝 四十二篇系列","/articles/fourty-two",{"title":78,"_path":79},"📝 技术博客归档","/articles/fold",{"title":81,"_path":82,"children":83},"造物 / Make","/tools",[84,87,90,93],{"title":85,"_path":86},"🌐 AnySort","/tools/anysort",{"title":88,"_path":89},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":91,"_path":92},"👓 Crapto","/tools/crypto-inline",{"title":94,"_path":95},"🖨️ any-to-base64","/tools/any-to-base64",{"title":97,"_path":98,"children":99},"吉他剧场 / Music","/music",[100,102,105,108,111,114,117,120],{"title":101,"_path":98},"🎸 FingerStyle！",{"title":103,"_path":104},"🌬️ 等待的风","/music/wind",{"title":106,"_path":107},"💕 约定的海洋","/music/ocean",{"title":109,"_path":110},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":112,"_path":113},"🌏 残酷天使的行动纲领","/music/eva",{"title":115,"_path":116},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":118,"_path":119},"🍷 Wu Wei","/music/wu-wei",{"title":121,"_path":122},"🌅 无题","/music/untitled",{"title":124,"_path":125,"children":126},"画点什么 / Paint","/paint",[127],{"title":128,"_path":125},"🚧 正在施工",{"title":130,"_path":131,"children":132},"知识地图 / Maps","/maps",[133],{"title":134,"_path":131},"🏁 知识地图",{"title":136,"_path":137,"children":138},"零散的笔记 / Gists","/gists",[139,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363],{"title":140,"_path":137},"🧊 Gists",{"title":142,"_path":143},"网站的可访问性","/gists/accessibility",{"title":145,"_path":146},"图片模糊","/gists/blur",{"title":148,"_path":149},"渲染相关笔记","/gists/c4d",{"title":151,"_path":152},"CDN 问题记录","/gists/cdn",{"title":154,"_path":155},"消毒剂","/gists/cleaner",{"title":157,"_path":158},"Windows Command","/gists/cmd",{"title":160,"_path":161},"Command","/gists/command",{"title":163,"_path":164},"复杂科学","/gists/complexity-science",{"title":166,"_path":167},"宇宙","/gists/cosmos",{"title":169,"_path":170},"C++","/gists/cpp",{"title":172,"_path":173},"Data Structure","/gists/data-structure",{"title":175,"_path":176},"DEPRESSION","/gists/depression",{"title":178,"_path":179},"设计模式","/gists/design-patterns",{"title":181,"_path":182},"Developer Experience","/gists/developer-experience",{"title":184,"_path":185},"Device Metrics","/gists/device-metrix",{"title":187,"_path":188},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":190,"_path":191},"正则表达式","/gists/eegex",{"title":193,"_path":194},"Emoji","/gists/emoji",{"title":196,"_path":197},"工程","/gists/engineering",{"title":199,"_path":200},"熵","/gists/entropy",{"title":202,"_path":203},"Environment","/gists/environment",{"title":205,"_path":206},"Erlang","/gists/erlang",{"title":208,"_path":209},"逃离塔克夫","/gists/escape-from-tarkov",{"title":211,"_path":212},"ESNext (ES6-ES11)","/gists/esnext",{"title":214,"_path":215},"Eval！","/gists/eval",{"title":217,"_path":218},"Flutter","/gists/flutter",{"title":220,"_path":221},"字体","/gists/font",{"title":223,"_path":224},"JS 函数式编程","/gists/functional",{"title":226,"_path":227},"Google C++ Standard","/gists/google-cpp-standard",{"title":229,"_path":230},"双向链接完全体","/gists/graph",{"title":232,"_path":233},"Hardwares","/gists/hardwares",{"title":235,"_path":236},"哈希冲突","/gists/hash-collision",{"title":238,"_path":239},"信息设计","/gists/information-design",{"title":241,"_path":242},"InstantPage","/gists/instant.page",{"title":244,"_path":245},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":247,"_path":248},"KVStore","/gists/key-value-db",{"title":250,"_path":251},"Kubernetes","/gists/kubernetes",{"title":253,"_path":254},"Makefile","/gists/makefile",{"title":256,"_path":257},"Markdown Inline Style","/gists/markdown-nice",{"title":259,"_path":260},"小程序","/gists/miniapp",{"title":262,"_path":263},"减小页面快照体积","/gists/minify-html",{"title":265,"_path":266},"mklink","/gists/mklink",{"title":268,"_path":269},"Mock","/gists/mock",{"title":271,"_path":272},"多端应用","/gists/multy-end-app",{"title":274,"_path":275},"神经科学","/gists/neuroscience",{"title":277,"_path":278},"OO","/gists/oo",{"title":280,"_path":281},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":283,"_path":284},"人物","/gists/person",{"title":286,"_path":287},"PInvoke","/gists/pinvoke",{"title":289,"_path":290},"像素","/gists/pixel",{"title":292,"_path":293},"PowerShell","/gists/powershell",{"title":295,"_path":296},"量子","/gists/quantum",{"title":298,"_path":299},"保持好奇心","/gists/questions",{"title":301,"_path":302},"React Native","/gists/react-native",{"title":304,"_path":305},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":307,"_path":308},"SEO","/gists/seo",{"title":310,"_path":311},"Shader","/gists/shader",{"title":313,"_path":314},"Shape Up","/gists/shape-up",{"title":316,"_path":317},"睡觉","/gists/sleep",{"title":319,"_path":320},"States","/gists/states",{"title":322,"_path":323},"Storage","/gists/storage",{"title":325,"_path":326},"音视频流处理","/gists/stream-cli",{"title":328,"_path":329},"Symbol","/gists/symbol",{"title":331,"_path":332},"系统论","/gists/systems-theory",{"title":334,"_path":335},"Taro","/gists/taro",{"title":337,"_path":338},"任务切片","/gists/task-slice",{"title":340,"_path":341},"技术偏好","/gists/tech-dudge",{"title":343,"_path":344},"Untitled","/gists/untitled",{"title":346,"_path":347},"可变字体","/gists/variable-font",{"title":349,"_path":350},"视觉错觉","/gists/visual-illusion",{"title":352,"_path":353},"SS(SSR)","/gists/vpn",{"title":355,"_path":356},"VS Code 插件开发","/gists/vscode-plugin",{"title":358,"_path":359},"Web Components","/gists/web-components",{"title":361,"_path":362},"Windows","/gists/windows",{"title":364,"_path":365},"查缺补漏","/gists/wrong",{"title":367,"_path":368,"children":369},"代码笔记 / Gists","/source-code",[370],{"title":371,"_path":368},"🚄 代码笔记",{"title":373,"_path":374,"children":375},"我 / Abount","/hire",[376],{"title":377,"_path":374},"📬 技术简历",{"title":379,"_path":380,"children":381},"todo","/todo",[382],{"title":379,"_path":380},{"_path":384,"_dir":385,"_draft":386,"_partial":387,"_locale":388,"title":389,"description":390,"body":391,"_type":4993,"_id":4994,"_source":4995,"_file":4996,"_extension":4997},"/_archieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":392,"children":393,"toc":4976},"root",[394,416,447,452,614,619,627,632,639,663,670,715,727,739,745,808,829,835,895,907,975,989,994,1054,1079,1113,1122,1148,1154,1191,1932,1952,2159,2165,2190,2233,2241,2797,2802,2850,2886,2894,2906,2912,2936,2943,2966,2971,3201,3220,3532,3537,3543,3582,3592,3657,3669,3677,3682,3714,3726,4430,4451,4459,4465,4525,4537,4543,4556,4569,4628,4633,4638,4657,4680,4713,4970],{"type":395,"tag":396,"props":397,"children":398},"element","p",{},[399,402],{"type":400,"value":401},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":395,"tag":403,"props":404,"children":405},"sup",{},[406],{"type":395,"tag":407,"props":408,"children":413},"a",{"href":409,"ariaDescribedBy":410,"dataFootnoteRef":388,"id":412},"#user-content-fn-helmet",[411],"footnote-label","user-content-fnref-helmet",[414],{"type":400,"value":415},"1",{"type":395,"tag":396,"props":417,"children":418},{},[419,421,432,434,445],{"type":400,"value":420},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":395,"tag":403,"props":422,"children":423},{},[424],{"type":395,"tag":407,"props":425,"children":429},{"href":426,"ariaDescribedBy":427,"dataFootnoteRef":388,"id":428},"#user-content-fn-dns-rebinding-1",[411],"user-content-fnref-dns-rebinding-1",[430],{"type":400,"value":431},"2",{"type":400,"value":433}," 问题，它就无能为力",{"type":395,"tag":403,"props":435,"children":436},{},[437],{"type":395,"tag":407,"props":438,"children":442},{"href":439,"ariaDescribedBy":440,"dataFootnoteRef":388,"id":441},"#user-content-fn-dns-rebinding-2",[411],"user-content-fnref-dns-rebinding-2",[443],{"type":400,"value":444},"3",{"type":400,"value":446},"。不过尽管不是银弹，它确实还是很有效的。",{"type":395,"tag":396,"props":448,"children":449},{},[450],{"type":400,"value":451},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":395,"tag":453,"props":454,"children":458},"pre",{"code":455,"language":456,"meta":388,"className":457,"style":388},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[459],{"type":395,"tag":460,"props":461,"children":462},"code",{"__ignoreMap":388},[463,520,529,555,563],{"type":395,"tag":464,"props":465,"children":468},"span",{"class":466,"line":467},"line",1,[469,475,481,487,493,499,505,511,515],{"type":395,"tag":464,"props":470,"children":472},{"style":471},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[473],{"type":400,"value":474},"const",{"type":395,"tag":464,"props":476,"children":478},{"style":477},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[479],{"type":400,"value":480}," express",{"type":395,"tag":464,"props":482,"children":484},{"style":483},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[485],{"type":400,"value":486}," =",{"type":395,"tag":464,"props":488,"children":490},{"style":489},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[491],{"type":400,"value":492}," require",{"type":395,"tag":464,"props":494,"children":496},{"style":495},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[497],{"type":400,"value":498},"(",{"type":395,"tag":464,"props":500,"children":502},{"style":501},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[503],{"type":400,"value":504},"'",{"type":395,"tag":464,"props":506,"children":508},{"style":507},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[509],{"type":400,"value":510},"express",{"type":395,"tag":464,"props":512,"children":513},{"style":501},[514],{"type":400,"value":504},{"type":395,"tag":464,"props":516,"children":517},{"style":495},[518],{"type":400,"value":519},")\n",{"type":395,"tag":464,"props":521,"children":523},{"class":466,"line":522},2,[524],{"type":395,"tag":464,"props":525,"children":526},{"emptyLinePlaceholder":387},[527],{"type":400,"value":528},"\n",{"type":395,"tag":464,"props":530,"children":532},{"class":466,"line":531},3,[533,537,542,546,550],{"type":395,"tag":464,"props":534,"children":535},{"style":471},[536],{"type":400,"value":474},{"type":395,"tag":464,"props":538,"children":539},{"style":477},[540],{"type":400,"value":541}," app",{"type":395,"tag":464,"props":543,"children":544},{"style":483},[545],{"type":400,"value":486},{"type":395,"tag":464,"props":547,"children":548},{"style":489},[549],{"type":400,"value":480},{"type":395,"tag":464,"props":551,"children":552},{"style":495},[553],{"type":400,"value":554},"()\n",{"type":395,"tag":464,"props":556,"children":558},{"class":466,"line":557},4,[559],{"type":395,"tag":464,"props":560,"children":561},{"emptyLinePlaceholder":387},[562],{"type":400,"value":528},{"type":395,"tag":464,"props":564,"children":566},{"class":466,"line":565},5,[567,572,578,583,587,592,596,600,605,609],{"type":395,"tag":464,"props":568,"children":569},{"style":495},[570],{"type":400,"value":571},"app",{"type":395,"tag":464,"props":573,"children":575},{"style":574},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[576],{"type":400,"value":577},".",{"type":395,"tag":464,"props":579,"children":580},{"style":489},[581],{"type":400,"value":582},"use",{"type":395,"tag":464,"props":584,"children":585},{"style":495},[586],{"type":400,"value":498},{"type":395,"tag":464,"props":588,"children":589},{"style":489},[590],{"type":400,"value":591},"require",{"type":395,"tag":464,"props":593,"children":594},{"style":495},[595],{"type":400,"value":498},{"type":395,"tag":464,"props":597,"children":598},{"style":501},[599],{"type":400,"value":504},{"type":395,"tag":464,"props":601,"children":602},{"style":507},[603],{"type":400,"value":604},"helmet",{"type":395,"tag":464,"props":606,"children":607},{"style":501},[608],{"type":400,"value":504},{"type":395,"tag":464,"props":610,"children":611},{"style":495},[612],{"type":400,"value":613},")())\n",{"type":395,"tag":396,"props":615,"children":616},{},[617],{"type":400,"value":618},"新的响应请求的 Headers 会变成这样：",{"type":395,"tag":453,"props":620,"children":622},{"code":621},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[623],{"type":395,"tag":460,"props":624,"children":625},{"__ignoreMap":388},[626],{"type":400,"value":621},{"type":395,"tag":396,"props":628,"children":629},{},[630],{"type":400,"value":631},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":395,"tag":633,"props":634,"children":636},"h2",{"id":635},"_11-种安全策略",[637],{"type":400,"value":638},"11 种安全策略",{"type":395,"tag":396,"props":640,"children":641},{},[642,644,650,661],{"type":400,"value":643},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":395,"tag":460,"props":645,"children":647},{"className":646},[],[648],{"type":400,"value":649},"OWASP Secure Headers",{"type":395,"tag":403,"props":651,"children":652},{},[653],{"type":395,"tag":407,"props":654,"children":658},{"href":655,"ariaDescribedBy":656,"dataFootnoteRef":388,"id":657},"#user-content-fn-shp",[411],"user-content-fnref-shp",[659],{"type":400,"value":660},"4",{"type":400,"value":662}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":395,"tag":664,"props":665,"children":667},"h3",{"id":666},"移除-x-powered-by",[668],{"type":400,"value":669},"移除 X-Powered-By",{"type":395,"tag":453,"props":671,"children":673},{"code":672,"language":456,"meta":388,"className":457,"style":388},"response.removeHeader('X-Powered-By')\n",[674],{"type":395,"tag":460,"props":675,"children":676},{"__ignoreMap":388},[677],{"type":395,"tag":464,"props":678,"children":679},{"class":466,"line":467},[680,685,689,694,698,702,707,711],{"type":395,"tag":464,"props":681,"children":682},{"style":495},[683],{"type":400,"value":684},"response",{"type":395,"tag":464,"props":686,"children":687},{"style":574},[688],{"type":400,"value":577},{"type":395,"tag":464,"props":690,"children":691},{"style":489},[692],{"type":400,"value":693},"removeHeader",{"type":395,"tag":464,"props":695,"children":696},{"style":495},[697],{"type":400,"value":498},{"type":395,"tag":464,"props":699,"children":700},{"style":501},[701],{"type":400,"value":504},{"type":395,"tag":464,"props":703,"children":704},{"style":507},[705],{"type":400,"value":706},"X-Powered-By",{"type":395,"tag":464,"props":708,"children":709},{"style":501},[710],{"type":400,"value":504},{"type":395,"tag":464,"props":712,"children":713},{"style":495},[714],{"type":400,"value":519},{"type":395,"tag":396,"props":716,"children":717},{},[718,720,725],{"type":400,"value":719},"一些框架会在请求头中添加 ",{"type":395,"tag":460,"props":721,"children":723},{"className":722},[],[724],{"type":400,"value":706},{"type":400,"value":726},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":395,"tag":396,"props":728,"children":729},{},[730,732,737],{"type":400,"value":731},"由于 Express 默认会给响应头增加 ",{"type":395,"tag":460,"props":733,"children":735},{"className":734},[],[736],{"type":400,"value":706},{"type":400,"value":738},"，所以 Helmet 直接把它移除了。",{"type":395,"tag":664,"props":740,"children":742},{"id":741},"移除-mime-嗅探",[743],{"type":400,"value":744},"移除 MIME 嗅探",{"type":395,"tag":453,"props":746,"children":748},{"code":747,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[749],{"type":395,"tag":460,"props":750,"children":751},{"__ignoreMap":388},[752],{"type":395,"tag":464,"props":753,"children":754},{"class":466,"line":467},[755,759,763,768,772,776,781,785,790,795,800,804],{"type":395,"tag":464,"props":756,"children":757},{"style":495},[758],{"type":400,"value":684},{"type":395,"tag":464,"props":760,"children":761},{"style":574},[762],{"type":400,"value":577},{"type":395,"tag":464,"props":764,"children":765},{"style":489},[766],{"type":400,"value":767},"setHeader",{"type":395,"tag":464,"props":769,"children":770},{"style":495},[771],{"type":400,"value":498},{"type":395,"tag":464,"props":773,"children":774},{"style":501},[775],{"type":400,"value":504},{"type":395,"tag":464,"props":777,"children":778},{"style":507},[779],{"type":400,"value":780},"X-Content-Type-Options",{"type":395,"tag":464,"props":782,"children":783},{"style":501},[784],{"type":400,"value":504},{"type":395,"tag":464,"props":786,"children":787},{"style":574},[788],{"type":400,"value":789},",",{"type":395,"tag":464,"props":791,"children":792},{"style":501},[793],{"type":400,"value":794}," '",{"type":395,"tag":464,"props":796,"children":797},{"style":507},[798],{"type":400,"value":799},"nosniff",{"type":395,"tag":464,"props":801,"children":802},{"style":501},[803],{"type":400,"value":504},{"type":395,"tag":464,"props":805,"children":806},{"style":495},[807],{"type":400,"value":519},{"type":395,"tag":396,"props":809,"children":810},{},[811,813,819,821,827],{"type":400,"value":812},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":395,"tag":460,"props":814,"children":816},{"className":815},[],[817],{"type":400,"value":818},"Content-Type",{"type":400,"value":820},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":395,"tag":460,"props":822,"children":824},{"className":823},[],[825],{"type":400,"value":826},"X-Content-Type-Options = nosniff",{"type":400,"value":828}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":395,"tag":664,"props":830,"children":832},{"id":831},"移除-x-xss-protection",[833],{"type":400,"value":834},"移除 X-XSS-Protection",{"type":395,"tag":453,"props":836,"children":838},{"code":837,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('X-XSS-Protection', '0')\n",[839],{"type":395,"tag":460,"props":840,"children":841},{"__ignoreMap":388},[842],{"type":395,"tag":464,"props":843,"children":844},{"class":466,"line":467},[845,849,853,857,861,865,870,874,878,882,887,891],{"type":395,"tag":464,"props":846,"children":847},{"style":495},[848],{"type":400,"value":684},{"type":395,"tag":464,"props":850,"children":851},{"style":574},[852],{"type":400,"value":577},{"type":395,"tag":464,"props":854,"children":855},{"style":489},[856],{"type":400,"value":767},{"type":395,"tag":464,"props":858,"children":859},{"style":495},[860],{"type":400,"value":498},{"type":395,"tag":464,"props":862,"children":863},{"style":501},[864],{"type":400,"value":504},{"type":395,"tag":464,"props":866,"children":867},{"style":507},[868],{"type":400,"value":869},"X-XSS-Protection",{"type":395,"tag":464,"props":871,"children":872},{"style":501},[873],{"type":400,"value":504},{"type":395,"tag":464,"props":875,"children":876},{"style":574},[877],{"type":400,"value":789},{"type":395,"tag":464,"props":879,"children":880},{"style":501},[881],{"type":400,"value":794},{"type":395,"tag":464,"props":883,"children":884},{"style":507},[885],{"type":400,"value":886},"0",{"type":395,"tag":464,"props":888,"children":889},{"style":501},[890],{"type":400,"value":504},{"type":395,"tag":464,"props":892,"children":893},{"style":495},[894],{"type":400,"value":519},{"type":395,"tag":396,"props":896,"children":897},{},[898,900,905],{"type":400,"value":899},"不是应该打开 ",{"type":395,"tag":460,"props":901,"children":903},{"className":902},[],[904],{"type":400,"value":869},{"type":400,"value":906},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":395,"tag":396,"props":908,"children":909},{},[910,912,918,920,931,933,938,940,946,948,959,961,966,968,973],{"type":400,"value":911},"这得追溯回去年的 Chrome 移除 ",{"type":395,"tag":460,"props":913,"children":915},{"className":914},[],[916],{"type":400,"value":917},"XSS Auditor",{"type":400,"value":919},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":395,"tag":403,"props":921,"children":922},{},[923],{"type":395,"tag":407,"props":924,"children":928},{"href":925,"ariaDescribedBy":926,"dataFootnoteRef":388,"id":927},"#user-content-fn-xss-auditor",[411],"user-content-fnref-xss-auditor",[929],{"type":400,"value":930},"5",{"type":400,"value":932},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":395,"tag":460,"props":934,"children":936},{"className":935},[],[937],{"type":400,"value":917},{"type":400,"value":939},"，并开始使用 ",{"type":395,"tag":460,"props":941,"children":943},{"className":942},[],[944],{"type":400,"value":945},"CSP",{"type":400,"value":947}," 等现代标准（更现代的标准）",{"type":395,"tag":403,"props":949,"children":950},{},[951],{"type":395,"tag":407,"props":952,"children":956},{"href":953,"ariaDescribedBy":954,"dataFootnoteRef":388,"id":955},"#user-content-fn-delete-xss-auditor",[411],"user-content-fnref-delete-xss-auditor",[957],{"type":400,"value":958},"6",{"type":400,"value":960},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":395,"tag":460,"props":962,"children":964},{"className":963},[],[965],{"type":400,"value":869},{"type":400,"value":967}," 这个响应头是让浏览器不要再用 ",{"type":395,"tag":460,"props":969,"children":971},{"className":970},[],[972],{"type":400,"value":917},{"type":400,"value":974},"。",{"type":395,"tag":396,"props":976,"children":977},{},[978,980,988],{"type":400,"value":979},"见：",{"type":395,"tag":407,"props":981,"children":985},{"href":982,"rel":983},"https://github.com/OWASP/CheatSheetSeries/issues/376",[984],"nofollow",[986],{"type":400,"value":987},"#376",{"type":400,"value":974},{"type":395,"tag":664,"props":990,"children":992},{"id":991},"禁止页面被嵌套",[993],{"type":400,"value":991},{"type":395,"tag":453,"props":995,"children":997},{"code":996,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[998],{"type":395,"tag":460,"props":999,"children":1000},{"__ignoreMap":388},[1001],{"type":395,"tag":464,"props":1002,"children":1003},{"class":466,"line":467},[1004,1008,1012,1016,1020,1024,1029,1033,1037,1041,1046,1050],{"type":395,"tag":464,"props":1005,"children":1006},{"style":495},[1007],{"type":400,"value":684},{"type":395,"tag":464,"props":1009,"children":1010},{"style":574},[1011],{"type":400,"value":577},{"type":395,"tag":464,"props":1013,"children":1014},{"style":489},[1015],{"type":400,"value":767},{"type":395,"tag":464,"props":1017,"children":1018},{"style":495},[1019],{"type":400,"value":498},{"type":395,"tag":464,"props":1021,"children":1022},{"style":501},[1023],{"type":400,"value":504},{"type":395,"tag":464,"props":1025,"children":1026},{"style":507},[1027],{"type":400,"value":1028},"X-Frame-Options",{"type":395,"tag":464,"props":1030,"children":1031},{"style":501},[1032],{"type":400,"value":504},{"type":395,"tag":464,"props":1034,"children":1035},{"style":574},[1036],{"type":400,"value":789},{"type":395,"tag":464,"props":1038,"children":1039},{"style":501},[1040],{"type":400,"value":794},{"type":395,"tag":464,"props":1042,"children":1043},{"style":507},[1044],{"type":400,"value":1045},"SAMEORIGIN",{"type":395,"tag":464,"props":1047,"children":1048},{"style":501},[1049],{"type":400,"value":504},{"type":395,"tag":464,"props":1051,"children":1052},{"style":495},[1053],{"type":400,"value":519},{"type":395,"tag":396,"props":1055,"children":1056},{},[1057,1062,1064,1069,1071,1077],{"type":395,"tag":460,"props":1058,"children":1060},{"className":1059},[],[1061],{"type":400,"value":1028},{"type":400,"value":1063}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":395,"tag":460,"props":1065,"children":1067},{"className":1066},[],[1068],{"type":400,"value":1028},{"type":400,"value":1070}," 为 ",{"type":395,"tag":460,"props":1072,"children":1074},{"className":1073},[],[1075],{"type":400,"value":1076},"SameOrigin",{"type":400,"value":1078},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":395,"tag":396,"props":1080,"children":1081},{},[1082,1084,1090,1092,1097,1098,1104,1106,1111],{"type":400,"value":1083},"本来它的值有三种选择，",{"type":395,"tag":460,"props":1085,"children":1087},{"className":1086},[],[1088],{"type":400,"value":1089},"Deny",{"type":400,"value":1091},"、",{"type":395,"tag":460,"props":1093,"children":1095},{"className":1094},[],[1096],{"type":400,"value":1076},{"type":400,"value":1091},{"type":395,"tag":460,"props":1099,"children":1101},{"className":1100},[],[1102],{"type":400,"value":1103},"AllowFrom",{"type":400,"value":1105},"。但 ",{"type":395,"tag":460,"props":1107,"children":1109},{"className":1108},[],[1110],{"type":400,"value":1103},{"type":400,"value":1112}," 因为其兼容性原因，被 Helmet 弃用：",{"type":395,"tag":396,"props":1114,"children":1115},{},[1116],{"type":395,"tag":1117,"props":1118,"children":1121},"img",{"alt":1119,"src":1120},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":395,"tag":396,"props":1123,"children":1124},{},[1125,1127,1132,1134,1140,1142,1147],{"type":400,"value":1126},"此外，可以在 ",{"type":395,"tag":460,"props":1128,"children":1130},{"className":1129},[],[1131],{"type":400,"value":945},{"type":400,"value":1133}," 中设置 ",{"type":395,"tag":460,"props":1135,"children":1137},{"className":1136},[],[1138],{"type":400,"value":1139},"frame-ancestors",{"type":400,"value":1141}," 指令来替代 ",{"type":395,"tag":460,"props":1143,"children":1145},{"className":1144},[],[1146],{"type":400,"value":1028},{"type":400,"value":974},{"type":395,"tag":664,"props":1149,"children":1151},{"id":1150},"移除-referer",[1152],{"type":400,"value":1153},"移除 Referer",{"type":395,"tag":396,"props":1155,"children":1156},{},[1157,1163,1165,1171,1182,1184,1189],{"type":395,"tag":460,"props":1158,"children":1160},{"className":1159},[],[1161],{"type":400,"value":1162},"Referrer-Policy",{"type":400,"value":1164}," 可以控制浏览器请求头的 ",{"type":395,"tag":460,"props":1166,"children":1168},{"className":1167},[],[1169],{"type":400,"value":1170},"Referer",{"type":395,"tag":403,"props":1172,"children":1173},{},[1174],{"type":395,"tag":407,"props":1175,"children":1179},{"href":1176,"ariaDescribedBy":1177,"dataFootnoteRef":388,"id":1178},"#user-content-fn-referer",[411],"user-content-fnref-referer",[1180],{"type":400,"value":1181},"7",{"type":400,"value":1183}," 的显示方式。移除 ",{"type":395,"tag":460,"props":1185,"children":1187},{"className":1186},[],[1188],{"type":400,"value":1170},{"type":400,"value":1190}," 能保护用户的访问记录，防止隐私泄漏。",{"type":395,"tag":453,"props":1192,"children":1194},{"code":1193,"language":456,"meta":388,"className":457,"style":388},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1195],{"type":395,"tag":460,"props":1196,"children":1197},{"__ignoreMap":388},[1198,1229,1238,1260,1268,1288,1297,1318,1327,1348,1357,1378,1387,1408,1417,1438,1447,1468,1477,1486,1495,1556,1630,1661,1674,1683,1726,1735,1770,1803,1857,1902,1915,1924],{"type":395,"tag":464,"props":1199,"children":1200},{"class":466,"line":467},[1201,1205,1210,1214,1219,1224],{"type":395,"tag":464,"props":1202,"children":1203},{"style":471},[1204],{"type":400,"value":474},{"type":395,"tag":464,"props":1206,"children":1207},{"style":477},[1208],{"type":400,"value":1209}," ALLOWED_TOKENS",{"type":395,"tag":464,"props":1211,"children":1212},{"style":483},[1213],{"type":400,"value":486},{"type":395,"tag":464,"props":1215,"children":1216},{"style":483},[1217],{"type":400,"value":1218}," new",{"type":395,"tag":464,"props":1220,"children":1221},{"style":489},[1222],{"type":400,"value":1223}," Set",{"type":395,"tag":464,"props":1225,"children":1226},{"style":495},[1227],{"type":400,"value":1228},"([\n",{"type":395,"tag":464,"props":1230,"children":1231},{"class":466,"line":522},[1232],{"type":395,"tag":464,"props":1233,"children":1235},{"style":1234},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1236],{"type":400,"value":1237},"  // 任何时候都不携带 Referer\n",{"type":395,"tag":464,"props":1239,"children":1240},{"class":466,"line":531},[1241,1246,1251,1255],{"type":395,"tag":464,"props":1242,"children":1243},{"style":501},[1244],{"type":400,"value":1245},"  '",{"type":395,"tag":464,"props":1247,"children":1248},{"style":507},[1249],{"type":400,"value":1250},"no-referrer",{"type":395,"tag":464,"props":1252,"children":1253},{"style":501},[1254],{"type":400,"value":504},{"type":395,"tag":464,"props":1256,"children":1257},{"style":574},[1258],{"type":400,"value":1259},",\n",{"type":395,"tag":464,"props":1261,"children":1262},{"class":466,"line":557},[1263],{"type":395,"tag":464,"props":1264,"children":1265},{"style":1234},[1266],{"type":400,"value":1267},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":395,"tag":464,"props":1269,"children":1270},{"class":466,"line":565},[1271,1275,1280,1284],{"type":395,"tag":464,"props":1272,"children":1273},{"style":501},[1274],{"type":400,"value":1245},{"type":395,"tag":464,"props":1276,"children":1277},{"style":507},[1278],{"type":400,"value":1279},"no-referrer-when-downgrade",{"type":395,"tag":464,"props":1281,"children":1282},{"style":501},[1283],{"type":400,"value":504},{"type":395,"tag":464,"props":1285,"children":1286},{"style":574},[1287],{"type":400,"value":1259},{"type":395,"tag":464,"props":1289,"children":1291},{"class":466,"line":1290},6,[1292],{"type":395,"tag":464,"props":1293,"children":1294},{"style":1234},[1295],{"type":400,"value":1296},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":395,"tag":464,"props":1298,"children":1300},{"class":466,"line":1299},7,[1301,1305,1310,1314],{"type":395,"tag":464,"props":1302,"children":1303},{"style":501},[1304],{"type":400,"value":1245},{"type":395,"tag":464,"props":1306,"children":1307},{"style":507},[1308],{"type":400,"value":1309},"same-origin",{"type":395,"tag":464,"props":1311,"children":1312},{"style":501},[1313],{"type":400,"value":504},{"type":395,"tag":464,"props":1315,"children":1316},{"style":574},[1317],{"type":400,"value":1259},{"type":395,"tag":464,"props":1319,"children":1321},{"class":466,"line":1320},8,[1322],{"type":395,"tag":464,"props":1323,"children":1324},{"style":1234},[1325],{"type":400,"value":1326},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":395,"tag":464,"props":1328,"children":1330},{"class":466,"line":1329},9,[1331,1335,1340,1344],{"type":395,"tag":464,"props":1332,"children":1333},{"style":501},[1334],{"type":400,"value":1245},{"type":395,"tag":464,"props":1336,"children":1337},{"style":507},[1338],{"type":400,"value":1339},"origin",{"type":395,"tag":464,"props":1341,"children":1342},{"style":501},[1343],{"type":400,"value":504},{"type":395,"tag":464,"props":1345,"children":1346},{"style":574},[1347],{"type":400,"value":1259},{"type":395,"tag":464,"props":1349,"children":1351},{"class":466,"line":1350},10,[1352],{"type":395,"tag":464,"props":1353,"children":1354},{"style":1234},[1355],{"type":400,"value":1356},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":395,"tag":464,"props":1358,"children":1360},{"class":466,"line":1359},11,[1361,1365,1370,1374],{"type":395,"tag":464,"props":1362,"children":1363},{"style":501},[1364],{"type":400,"value":1245},{"type":395,"tag":464,"props":1366,"children":1367},{"style":507},[1368],{"type":400,"value":1369},"strict-origin",{"type":395,"tag":464,"props":1371,"children":1372},{"style":501},[1373],{"type":400,"value":504},{"type":395,"tag":464,"props":1375,"children":1376},{"style":574},[1377],{"type":400,"value":1259},{"type":395,"tag":464,"props":1379,"children":1381},{"class":466,"line":1380},12,[1382],{"type":395,"tag":464,"props":1383,"children":1384},{"style":1234},[1385],{"type":400,"value":1386},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":395,"tag":464,"props":1388,"children":1390},{"class":466,"line":1389},13,[1391,1395,1400,1404],{"type":395,"tag":464,"props":1392,"children":1393},{"style":501},[1394],{"type":400,"value":1245},{"type":395,"tag":464,"props":1396,"children":1397},{"style":507},[1398],{"type":400,"value":1399},"origin-when-cross-origin",{"type":395,"tag":464,"props":1401,"children":1402},{"style":501},[1403],{"type":400,"value":504},{"type":395,"tag":464,"props":1405,"children":1406},{"style":574},[1407],{"type":400,"value":1259},{"type":395,"tag":464,"props":1409,"children":1411},{"class":466,"line":1410},14,[1412],{"type":395,"tag":464,"props":1413,"children":1414},{"style":1234},[1415],{"type":400,"value":1416},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":395,"tag":464,"props":1418,"children":1420},{"class":466,"line":1419},15,[1421,1425,1430,1434],{"type":395,"tag":464,"props":1422,"children":1423},{"style":501},[1424],{"type":400,"value":1245},{"type":395,"tag":464,"props":1426,"children":1427},{"style":507},[1428],{"type":400,"value":1429},"strict-origin-when-cross-origin",{"type":395,"tag":464,"props":1431,"children":1432},{"style":501},[1433],{"type":400,"value":504},{"type":395,"tag":464,"props":1435,"children":1436},{"style":574},[1437],{"type":400,"value":1259},{"type":395,"tag":464,"props":1439,"children":1441},{"class":466,"line":1440},16,[1442],{"type":395,"tag":464,"props":1443,"children":1444},{"style":1234},[1445],{"type":400,"value":1446},"  // 所有请求都携带上完整的 Referer\n",{"type":395,"tag":464,"props":1448,"children":1450},{"class":466,"line":1449},17,[1451,1455,1460,1464],{"type":395,"tag":464,"props":1452,"children":1453},{"style":501},[1454],{"type":400,"value":1245},{"type":395,"tag":464,"props":1456,"children":1457},{"style":507},[1458],{"type":400,"value":1459},"unsafe-url",{"type":395,"tag":464,"props":1461,"children":1462},{"style":501},[1463],{"type":400,"value":504},{"type":395,"tag":464,"props":1465,"children":1466},{"style":574},[1467],{"type":400,"value":1259},{"type":395,"tag":464,"props":1469,"children":1471},{"class":466,"line":1470},18,[1472],{"type":395,"tag":464,"props":1473,"children":1474},{"style":1234},[1475],{"type":400,"value":1476},"  // 无策略\n",{"type":395,"tag":464,"props":1478,"children":1480},{"class":466,"line":1479},19,[1481],{"type":395,"tag":464,"props":1482,"children":1483},{"style":501},[1484],{"type":400,"value":1485},"  ''\n",{"type":395,"tag":464,"props":1487,"children":1489},{"class":466,"line":1488},20,[1490],{"type":395,"tag":464,"props":1491,"children":1492},{"style":495},[1493],{"type":400,"value":1494},"])\n",{"type":395,"tag":464,"props":1496,"children":1498},{"class":466,"line":1497},21,[1499,1504,1509,1514,1520,1524,1529,1533,1537,1541,1546,1551],{"type":395,"tag":464,"props":1500,"children":1501},{"style":471},[1502],{"type":400,"value":1503},"function",{"type":395,"tag":464,"props":1505,"children":1506},{"style":489},[1507],{"type":400,"value":1508}," getHeaderValueFromOptions",{"type":395,"tag":464,"props":1510,"children":1511},{"style":574},[1512],{"type":400,"value":1513},"({",{"type":395,"tag":464,"props":1515,"children":1517},{"style":1516},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[1518],{"type":400,"value":1519}," policy",{"type":395,"tag":464,"props":1521,"children":1522},{"style":483},[1523],{"type":400,"value":486},{"type":395,"tag":464,"props":1525,"children":1526},{"style":495},[1527],{"type":400,"value":1528}," [",{"type":395,"tag":464,"props":1530,"children":1531},{"style":501},[1532],{"type":400,"value":504},{"type":395,"tag":464,"props":1534,"children":1535},{"style":507},[1536],{"type":400,"value":1250},{"type":395,"tag":464,"props":1538,"children":1539},{"style":501},[1540],{"type":400,"value":504},{"type":395,"tag":464,"props":1542,"children":1543},{"style":495},[1544],{"type":400,"value":1545},"] ",{"type":395,"tag":464,"props":1547,"children":1548},{"style":574},[1549],{"type":400,"value":1550},"})",{"type":395,"tag":464,"props":1552,"children":1553},{"style":574},[1554],{"type":400,"value":1555}," {\n",{"type":395,"tag":464,"props":1557,"children":1559},{"class":466,"line":1558},22,[1560,1565,1570,1574,1579,1583,1588,1592,1597,1601,1606,1611,1616,1620,1625],{"type":395,"tag":464,"props":1561,"children":1562},{"style":471},[1563],{"type":400,"value":1564},"  const",{"type":395,"tag":464,"props":1566,"children":1567},{"style":477},[1568],{"type":400,"value":1569}," tokens",{"type":395,"tag":464,"props":1571,"children":1572},{"style":483},[1573],{"type":400,"value":486},{"type":395,"tag":464,"props":1575,"children":1576},{"style":483},[1577],{"type":400,"value":1578}," typeof",{"type":395,"tag":464,"props":1580,"children":1581},{"style":495},[1582],{"type":400,"value":1519},{"type":395,"tag":464,"props":1584,"children":1585},{"style":483},[1586],{"type":400,"value":1587}," ===",{"type":395,"tag":464,"props":1589,"children":1590},{"style":501},[1591],{"type":400,"value":794},{"type":395,"tag":464,"props":1593,"children":1594},{"style":507},[1595],{"type":400,"value":1596},"string",{"type":395,"tag":464,"props":1598,"children":1599},{"style":501},[1600],{"type":400,"value":504},{"type":395,"tag":464,"props":1602,"children":1603},{"style":483},[1604],{"type":400,"value":1605}," ?",{"type":395,"tag":464,"props":1607,"children":1609},{"style":1608},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1610],{"type":400,"value":1528},{"type":395,"tag":464,"props":1612,"children":1613},{"style":495},[1614],{"type":400,"value":1615},"policy",{"type":395,"tag":464,"props":1617,"children":1618},{"style":1608},[1619],{"type":400,"value":1545},{"type":395,"tag":464,"props":1621,"children":1622},{"style":483},[1623],{"type":400,"value":1624},":",{"type":395,"tag":464,"props":1626,"children":1627},{"style":495},[1628],{"type":400,"value":1629}," policy\n",{"type":395,"tag":464,"props":1631,"children":1633},{"class":466,"line":1632},23,[1634,1639,1643,1648,1652,1657],{"type":395,"tag":464,"props":1635,"children":1636},{"style":495},[1637],{"type":400,"value":1638},"    tokensSeen",{"type":395,"tag":464,"props":1640,"children":1641},{"style":574},[1642],{"type":400,"value":577},{"type":395,"tag":464,"props":1644,"children":1645},{"style":489},[1646],{"type":400,"value":1647},"add",{"type":395,"tag":464,"props":1649,"children":1650},{"style":1608},[1651],{"type":400,"value":498},{"type":395,"tag":464,"props":1653,"children":1654},{"style":495},[1655],{"type":400,"value":1656},"token",{"type":395,"tag":464,"props":1658,"children":1659},{"style":1608},[1660],{"type":400,"value":519},{"type":395,"tag":464,"props":1662,"children":1664},{"class":466,"line":1663},24,[1665,1670],{"type":395,"tag":464,"props":1666,"children":1667},{"style":574},[1668],{"type":400,"value":1669},"  }",{"type":395,"tag":464,"props":1671,"children":1672},{"style":495},[1673],{"type":400,"value":519},{"type":395,"tag":464,"props":1675,"children":1677},{"class":466,"line":1676},25,[1678],{"type":395,"tag":464,"props":1679,"children":1680},{"style":1234},[1681],{"type":400,"value":1682},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":395,"tag":464,"props":1684,"children":1686},{"class":466,"line":1685},26,[1687,1693,1697,1701,1706,1710,1714,1718,1722],{"type":395,"tag":464,"props":1688,"children":1690},{"style":1689},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1691],{"type":400,"value":1692},"  return",{"type":395,"tag":464,"props":1694,"children":1695},{"style":495},[1696],{"type":400,"value":1569},{"type":395,"tag":464,"props":1698,"children":1699},{"style":574},[1700],{"type":400,"value":577},{"type":395,"tag":464,"props":1702,"children":1703},{"style":489},[1704],{"type":400,"value":1705},"join",{"type":395,"tag":464,"props":1707,"children":1708},{"style":495},[1709],{"type":400,"value":498},{"type":395,"tag":464,"props":1711,"children":1712},{"style":501},[1713],{"type":400,"value":504},{"type":395,"tag":464,"props":1715,"children":1716},{"style":507},[1717],{"type":400,"value":789},{"type":395,"tag":464,"props":1719,"children":1720},{"style":501},[1721],{"type":400,"value":504},{"type":395,"tag":464,"props":1723,"children":1724},{"style":495},[1725],{"type":400,"value":519},{"type":395,"tag":464,"props":1727,"children":1729},{"class":466,"line":1728},27,[1730],{"type":395,"tag":464,"props":1731,"children":1732},{"style":495},[1733],{"type":400,"value":1734},"}\n",{"type":395,"tag":464,"props":1736,"children":1738},{"class":466,"line":1737},28,[1739,1743,1748,1752,1757,1761,1766],{"type":395,"tag":464,"props":1740,"children":1741},{"style":471},[1742],{"type":400,"value":1503},{"type":395,"tag":464,"props":1744,"children":1745},{"style":489},[1746],{"type":400,"value":1747}," referrerPolicy",{"type":395,"tag":464,"props":1749,"children":1750},{"style":574},[1751],{"type":400,"value":498},{"type":395,"tag":464,"props":1753,"children":1754},{"style":1516},[1755],{"type":400,"value":1756},"options",{"type":395,"tag":464,"props":1758,"children":1759},{"style":483},[1760],{"type":400,"value":486},{"type":395,"tag":464,"props":1762,"children":1763},{"style":574},[1764],{"type":400,"value":1765}," {})",{"type":395,"tag":464,"props":1767,"children":1768},{"style":574},[1769],{"type":400,"value":1555},{"type":395,"tag":464,"props":1771,"children":1773},{"class":466,"line":1772},29,[1774,1778,1783,1787,1791,1795,1799],{"type":395,"tag":464,"props":1775,"children":1776},{"style":471},[1777],{"type":400,"value":1564},{"type":395,"tag":464,"props":1779,"children":1780},{"style":477},[1781],{"type":400,"value":1782}," headerValue",{"type":395,"tag":464,"props":1784,"children":1785},{"style":483},[1786],{"type":400,"value":486},{"type":395,"tag":464,"props":1788,"children":1789},{"style":489},[1790],{"type":400,"value":1508},{"type":395,"tag":464,"props":1792,"children":1793},{"style":1608},[1794],{"type":400,"value":498},{"type":395,"tag":464,"props":1796,"children":1797},{"style":495},[1798],{"type":400,"value":1756},{"type":395,"tag":464,"props":1800,"children":1801},{"style":1608},[1802],{"type":400,"value":519},{"type":395,"tag":464,"props":1804,"children":1806},{"class":466,"line":1805},30,[1807,1811,1816,1821,1825,1830,1834,1839,1843,1848,1853],{"type":395,"tag":464,"props":1808,"children":1809},{"style":1689},[1810],{"type":400,"value":1692},{"type":395,"tag":464,"props":1812,"children":1813},{"style":471},[1814],{"type":400,"value":1815}," function",{"type":395,"tag":464,"props":1817,"children":1818},{"style":489},[1819],{"type":400,"value":1820}," referrerPolicyMiddleware",{"type":395,"tag":464,"props":1822,"children":1823},{"style":574},[1824],{"type":400,"value":498},{"type":395,"tag":464,"props":1826,"children":1827},{"style":1516},[1828],{"type":400,"value":1829},"_req",{"type":395,"tag":464,"props":1831,"children":1832},{"style":574},[1833],{"type":400,"value":789},{"type":395,"tag":464,"props":1835,"children":1836},{"style":1516},[1837],{"type":400,"value":1838}," res",{"type":395,"tag":464,"props":1840,"children":1841},{"style":574},[1842],{"type":400,"value":789},{"type":395,"tag":464,"props":1844,"children":1845},{"style":1516},[1846],{"type":400,"value":1847}," next",{"type":395,"tag":464,"props":1849,"children":1850},{"style":574},[1851],{"type":400,"value":1852},")",{"type":395,"tag":464,"props":1854,"children":1855},{"style":574},[1856],{"type":400,"value":1555},{"type":395,"tag":464,"props":1858,"children":1860},{"class":466,"line":1859},31,[1861,1866,1870,1874,1878,1882,1886,1890,1894,1898],{"type":395,"tag":464,"props":1862,"children":1863},{"style":495},[1864],{"type":400,"value":1865},"    res",{"type":395,"tag":464,"props":1867,"children":1868},{"style":574},[1869],{"type":400,"value":577},{"type":395,"tag":464,"props":1871,"children":1872},{"style":489},[1873],{"type":400,"value":767},{"type":395,"tag":464,"props":1875,"children":1876},{"style":1608},[1877],{"type":400,"value":498},{"type":395,"tag":464,"props":1879,"children":1880},{"style":501},[1881],{"type":400,"value":504},{"type":395,"tag":464,"props":1883,"children":1884},{"style":507},[1885],{"type":400,"value":1162},{"type":395,"tag":464,"props":1887,"children":1888},{"style":501},[1889],{"type":400,"value":504},{"type":395,"tag":464,"props":1891,"children":1892},{"style":574},[1893],{"type":400,"value":789},{"type":395,"tag":464,"props":1895,"children":1896},{"style":495},[1897],{"type":400,"value":1782},{"type":395,"tag":464,"props":1899,"children":1900},{"style":1608},[1901],{"type":400,"value":519},{"type":395,"tag":464,"props":1903,"children":1905},{"class":466,"line":1904},32,[1906,1911],{"type":395,"tag":464,"props":1907,"children":1908},{"style":489},[1909],{"type":400,"value":1910},"    next",{"type":395,"tag":464,"props":1912,"children":1913},{"style":1608},[1914],{"type":400,"value":554},{"type":395,"tag":464,"props":1916,"children":1918},{"class":466,"line":1917},33,[1919],{"type":395,"tag":464,"props":1920,"children":1921},{"style":574},[1922],{"type":400,"value":1923},"  }\n",{"type":395,"tag":464,"props":1925,"children":1927},{"class":466,"line":1926},34,[1928],{"type":395,"tag":464,"props":1929,"children":1930},{"style":574},[1931],{"type":400,"value":1734},{"type":395,"tag":396,"props":1933,"children":1934},{},[1935,1937,1943,1945,1950],{"type":400,"value":1936},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":395,"tag":460,"props":1938,"children":1940},{"className":1939},[],[1941],{"type":400,"value":1942},"Referrer Policy",{"type":400,"value":1944},"。Meta 标签设置的 ",{"type":395,"tag":460,"props":1946,"children":1948},{"className":1947},[],[1949],{"type":400,"value":1942},{"type":400,"value":1951}," 对整个页面都有效果（但优先级最低）。",{"type":395,"tag":453,"props":1953,"children":1957},{"code":1954,"language":1955,"meta":388,"className":1956,"style":388},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1958],{"type":395,"tag":460,"props":1959,"children":1960},{"__ignoreMap":388},[1961,2026,2094],{"type":395,"tag":464,"props":1962,"children":1963},{"class":466,"line":467},[1964,1969,1975,1981,1986,1991,1996,2000,2005,2009,2013,2017,2021],{"type":395,"tag":464,"props":1965,"children":1966},{"style":574},[1967],{"type":400,"value":1968},"\u003C",{"type":395,"tag":464,"props":1970,"children":1972},{"style":1971},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1973],{"type":400,"value":1974},"meta",{"type":395,"tag":464,"props":1976,"children":1978},{"style":1977},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1979],{"type":400,"value":1980}," name",{"type":395,"tag":464,"props":1982,"children":1983},{"style":574},[1984],{"type":400,"value":1985},"=",{"type":395,"tag":464,"props":1987,"children":1988},{"style":501},[1989],{"type":400,"value":1990},"\"",{"type":395,"tag":464,"props":1992,"children":1993},{"style":507},[1994],{"type":400,"value":1995},"referrer",{"type":395,"tag":464,"props":1997,"children":1998},{"style":501},[1999],{"type":400,"value":1990},{"type":395,"tag":464,"props":2001,"children":2002},{"style":1977},[2003],{"type":400,"value":2004}," content",{"type":395,"tag":464,"props":2006,"children":2007},{"style":574},[2008],{"type":400,"value":1985},{"type":395,"tag":464,"props":2010,"children":2011},{"style":501},[2012],{"type":400,"value":1990},{"type":395,"tag":464,"props":2014,"children":2015},{"style":507},[2016],{"type":400,"value":1339},{"type":395,"tag":464,"props":2018,"children":2019},{"style":501},[2020],{"type":400,"value":1990},{"type":395,"tag":464,"props":2022,"children":2023},{"style":574},[2024],{"type":400,"value":2025}," />\n",{"type":395,"tag":464,"props":2027,"children":2028},{"class":466,"line":522},[2029,2033,2037,2042,2046,2050,2055,2059,2064,2068,2072,2076,2080,2085,2089],{"type":395,"tag":464,"props":2030,"children":2031},{"style":574},[2032],{"type":400,"value":1968},{"type":395,"tag":464,"props":2034,"children":2035},{"style":1971},[2036],{"type":400,"value":407},{"type":395,"tag":464,"props":2038,"children":2039},{"style":1977},[2040],{"type":400,"value":2041}," href",{"type":395,"tag":464,"props":2043,"children":2044},{"style":574},[2045],{"type":400,"value":1985},{"type":395,"tag":464,"props":2047,"children":2048},{"style":501},[2049],{"type":400,"value":1990},{"type":395,"tag":464,"props":2051,"children":2052},{"style":507},[2053],{"type":400,"value":2054},"http://example.com",{"type":395,"tag":464,"props":2056,"children":2057},{"style":501},[2058],{"type":400,"value":1990},{"type":395,"tag":464,"props":2060,"children":2061},{"style":1977},[2062],{"type":400,"value":2063}," referrerpolicy",{"type":395,"tag":464,"props":2065,"children":2066},{"style":574},[2067],{"type":400,"value":1985},{"type":395,"tag":464,"props":2069,"children":2070},{"style":501},[2071],{"type":400,"value":1990},{"type":395,"tag":464,"props":2073,"children":2074},{"style":507},[2075],{"type":400,"value":1339},{"type":395,"tag":464,"props":2077,"children":2078},{"style":501},[2079],{"type":400,"value":1990},{"type":395,"tag":464,"props":2081,"children":2082},{"style":574},[2083],{"type":400,"value":2084},">\u003C/",{"type":395,"tag":464,"props":2086,"children":2087},{"style":1971},[2088],{"type":400,"value":407},{"type":395,"tag":464,"props":2090,"children":2091},{"style":574},[2092],{"type":400,"value":2093},">\n",{"type":395,"tag":464,"props":2095,"children":2096},{"class":466,"line":531},[2097,2101,2105,2109,2113,2117,2121,2125,2130,2134,2138,2143,2147,2151,2155],{"type":395,"tag":464,"props":2098,"children":2099},{"style":574},[2100],{"type":400,"value":1968},{"type":395,"tag":464,"props":2102,"children":2103},{"style":1971},[2104],{"type":400,"value":407},{"type":395,"tag":464,"props":2106,"children":2107},{"style":1977},[2108],{"type":400,"value":2041},{"type":395,"tag":464,"props":2110,"children":2111},{"style":574},[2112],{"type":400,"value":1985},{"type":395,"tag":464,"props":2114,"children":2115},{"style":501},[2116],{"type":400,"value":1990},{"type":395,"tag":464,"props":2118,"children":2119},{"style":507},[2120],{"type":400,"value":2054},{"type":395,"tag":464,"props":2122,"children":2123},{"style":501},[2124],{"type":400,"value":1990},{"type":395,"tag":464,"props":2126,"children":2127},{"style":1977},[2128],{"type":400,"value":2129}," rel",{"type":395,"tag":464,"props":2131,"children":2132},{"style":574},[2133],{"type":400,"value":1985},{"type":395,"tag":464,"props":2135,"children":2136},{"style":501},[2137],{"type":400,"value":1990},{"type":395,"tag":464,"props":2139,"children":2140},{"style":507},[2141],{"type":400,"value":2142},"noreferrer",{"type":395,"tag":464,"props":2144,"children":2145},{"style":501},[2146],{"type":400,"value":1990},{"type":395,"tag":464,"props":2148,"children":2149},{"style":574},[2150],{"type":400,"value":2084},{"type":395,"tag":464,"props":2152,"children":2153},{"style":1971},[2154],{"type":400,"value":407},{"type":395,"tag":464,"props":2156,"children":2157},{"style":574},[2158],{"type":400,"value":2093},{"type":395,"tag":664,"props":2160,"children":2162},{"id":2161},"强制使用-https",[2163],{"type":400,"value":2164},"强制使用 HTTPS",{"type":395,"tag":396,"props":2166,"children":2167},{},[2168,2170,2176,2178,2189],{"type":400,"value":2169},"通过设置请求头的 ",{"type":395,"tag":460,"props":2171,"children":2173},{"className":2172},[],[2174],{"type":400,"value":2175},"Strict-Transport-Security（STS）",{"type":400,"value":2177},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":395,"tag":403,"props":2179,"children":2180},{},[2181],{"type":395,"tag":407,"props":2182,"children":2186},{"href":2183,"ariaDescribedBy":2184,"dataFootnoteRef":388,"id":2185},"#user-content-fn-timeend",[411],"user-content-fnref-timeend",[2187],{"type":400,"value":2188},"8",{"type":400,"value":974},{"type":395,"tag":396,"props":2191,"children":2192},{},[2193,2195,2201,2203,2209,2211,2217,2219,2225,2227,2232],{"type":400,"value":2194},"这个规范本身很好理解，通过 ",{"type":395,"tag":460,"props":2196,"children":2198},{"className":2197},[],[2199],{"type":400,"value":2200},"max-age",{"type":400,"value":2202}," 可以指定倒计时时间；",{"type":395,"tag":460,"props":2204,"children":2206},{"className":2205},[],[2207],{"type":400,"value":2208},"includesSubDomains",{"type":400,"value":2210}," 指定子域的 ",{"type":395,"tag":460,"props":2212,"children":2214},{"className":2213},[],[2215],{"type":400,"value":2216},"HSTS",{"type":400,"value":2218},"；",{"type":395,"tag":460,"props":2220,"children":2222},{"className":2221},[],[2223],{"type":400,"value":2224},"preload",{"type":400,"value":2226}," 指定预加载内容的 ",{"type":395,"tag":460,"props":2228,"children":2230},{"className":2229},[],[2231],{"type":400,"value":2216},{"type":400,"value":974},{"type":395,"tag":453,"props":2234,"children":2236},{"code":2235},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2237],{"type":395,"tag":460,"props":2238,"children":2239},{"__ignoreMap":388},[2240],{"type":400,"value":2235},{"type":395,"tag":453,"props":2242,"children":2244},{"code":2243,"language":456,"meta":388,"className":457,"style":388},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2245],{"type":395,"tag":460,"props":2246,"children":2247},{"__ignoreMap":388},[2248,2310,2337,2410,2473,2510,2517,2570,2610,2617,2649,2680,2728,2772,2783,2790],{"type":395,"tag":464,"props":2249,"children":2250},{"class":466,"line":467},[2251,2255,2260,2264,2269,2273,2279,2284,2289,2293,2298,2302,2306],{"type":395,"tag":464,"props":2252,"children":2253},{"style":471},[2254],{"type":400,"value":474},{"type":395,"tag":464,"props":2256,"children":2257},{"style":477},[2258],{"type":400,"value":2259}," DEFAULT_MAX_AGE",{"type":395,"tag":464,"props":2261,"children":2262},{"style":483},[2263],{"type":400,"value":486},{"type":395,"tag":464,"props":2265,"children":2266},{"style":489},[2267],{"type":400,"value":2268}," String",{"type":395,"tag":464,"props":2270,"children":2271},{"style":495},[2272],{"type":400,"value":498},{"type":395,"tag":464,"props":2274,"children":2276},{"style":2275},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2277],{"type":400,"value":2278},"180",{"type":395,"tag":464,"props":2280,"children":2281},{"style":483},[2282],{"type":400,"value":2283}," *",{"type":395,"tag":464,"props":2285,"children":2286},{"style":2275},[2287],{"type":400,"value":2288}," 24",{"type":395,"tag":464,"props":2290,"children":2291},{"style":483},[2292],{"type":400,"value":2283},{"type":395,"tag":464,"props":2294,"children":2295},{"style":2275},[2296],{"type":400,"value":2297}," 60",{"type":395,"tag":464,"props":2299,"children":2300},{"style":483},[2301],{"type":400,"value":2283},{"type":395,"tag":464,"props":2303,"children":2304},{"style":2275},[2305],{"type":400,"value":2297},{"type":395,"tag":464,"props":2307,"children":2308},{"style":495},[2309],{"type":400,"value":519},{"type":395,"tag":464,"props":2311,"children":2312},{"class":466,"line":522},[2313,2317,2321,2325,2329,2333],{"type":395,"tag":464,"props":2314,"children":2315},{"style":471},[2316],{"type":400,"value":1503},{"type":395,"tag":464,"props":2318,"children":2319},{"style":489},[2320],{"type":400,"value":1508},{"type":395,"tag":464,"props":2322,"children":2323},{"style":574},[2324],{"type":400,"value":498},{"type":395,"tag":464,"props":2326,"children":2327},{"style":1516},[2328],{"type":400,"value":1756},{"type":395,"tag":464,"props":2330,"children":2331},{"style":574},[2332],{"type":400,"value":1852},{"type":395,"tag":464,"props":2334,"children":2335},{"style":574},[2336],{"type":400,"value":1555},{"type":395,"tag":464,"props":2338,"children":2339},{"class":466,"line":531},[2340,2344,2349,2353,2357,2362,2367,2373,2377,2382,2387,2392,2396,2401,2405],{"type":395,"tag":464,"props":2341,"children":2342},{"style":471},[2343],{"type":400,"value":1564},{"type":395,"tag":464,"props":2345,"children":2346},{"style":477},[2347],{"type":400,"value":2348}," directives",{"type":395,"tag":464,"props":2350,"children":2351},{"style":483},[2352],{"type":400,"value":486},{"type":395,"tag":464,"props":2354,"children":2355},{"style":1608},[2356],{"type":400,"value":1528},{"type":395,"tag":464,"props":2358,"children":2359},{"style":501},[2360],{"type":400,"value":2361},"`",{"type":395,"tag":464,"props":2363,"children":2364},{"style":507},[2365],{"type":400,"value":2366},"max-age=",{"type":395,"tag":464,"props":2368,"children":2370},{"style":2369},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2371],{"type":400,"value":2372},"${",{"type":395,"tag":464,"props":2374,"children":2375},{"style":495},[2376],{"type":400,"value":1756},{"type":395,"tag":464,"props":2378,"children":2380},{"style":2379},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2381],{"type":400,"value":577},{"type":395,"tag":464,"props":2383,"children":2384},{"style":495},[2385],{"type":400,"value":2386},"maxAge",{"type":395,"tag":464,"props":2388,"children":2389},{"style":483},[2390],{"type":400,"value":2391}," ||",{"type":395,"tag":464,"props":2393,"children":2394},{"style":477},[2395],{"type":400,"value":2259},{"type":395,"tag":464,"props":2397,"children":2398},{"style":2369},[2399],{"type":400,"value":2400},"}",{"type":395,"tag":464,"props":2402,"children":2403},{"style":501},[2404],{"type":400,"value":2361},{"type":395,"tag":464,"props":2406,"children":2407},{"style":1608},[2408],{"type":400,"value":2409},"]\n",{"type":395,"tag":464,"props":2411,"children":2412},{"class":466,"line":557},[2413,2418,2423,2427,2431,2436,2440,2446,2450,2455,2459,2463,2468],{"type":395,"tag":464,"props":2414,"children":2415},{"style":1689},[2416],{"type":400,"value":2417},"  if",{"type":395,"tag":464,"props":2419,"children":2420},{"style":1608},[2421],{"type":400,"value":2422}," (",{"type":395,"tag":464,"props":2424,"children":2425},{"style":495},[2426],{"type":400,"value":1756},{"type":395,"tag":464,"props":2428,"children":2429},{"style":574},[2430],{"type":400,"value":577},{"type":395,"tag":464,"props":2432,"children":2433},{"style":495},[2434],{"type":400,"value":2435},"includeSubDomains",{"type":395,"tag":464,"props":2437,"children":2438},{"style":483},[2439],{"type":400,"value":1587},{"type":395,"tag":464,"props":2441,"children":2443},{"style":2442},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2444],{"type":400,"value":2445}," undefined",{"type":395,"tag":464,"props":2447,"children":2448},{"style":483},[2449],{"type":400,"value":2391},{"type":395,"tag":464,"props":2451,"children":2452},{"style":495},[2453],{"type":400,"value":2454}," options",{"type":395,"tag":464,"props":2456,"children":2457},{"style":574},[2458],{"type":400,"value":577},{"type":395,"tag":464,"props":2460,"children":2461},{"style":495},[2462],{"type":400,"value":2435},{"type":395,"tag":464,"props":2464,"children":2465},{"style":1608},[2466],{"type":400,"value":2467},") ",{"type":395,"tag":464,"props":2469,"children":2470},{"style":574},[2471],{"type":400,"value":2472},"{\n",{"type":395,"tag":464,"props":2474,"children":2475},{"class":466,"line":565},[2476,2481,2485,2490,2494,2498,2502,2506],{"type":395,"tag":464,"props":2477,"children":2478},{"style":495},[2479],{"type":400,"value":2480},"    directives",{"type":395,"tag":464,"props":2482,"children":2483},{"style":574},[2484],{"type":400,"value":577},{"type":395,"tag":464,"props":2486,"children":2487},{"style":489},[2488],{"type":400,"value":2489},"push",{"type":395,"tag":464,"props":2491,"children":2492},{"style":1608},[2493],{"type":400,"value":498},{"type":395,"tag":464,"props":2495,"children":2496},{"style":501},[2497],{"type":400,"value":504},{"type":395,"tag":464,"props":2499,"children":2500},{"style":507},[2501],{"type":400,"value":2435},{"type":395,"tag":464,"props":2503,"children":2504},{"style":501},[2505],{"type":400,"value":504},{"type":395,"tag":464,"props":2507,"children":2508},{"style":1608},[2509],{"type":400,"value":519},{"type":395,"tag":464,"props":2511,"children":2512},{"class":466,"line":1290},[2513],{"type":395,"tag":464,"props":2514,"children":2515},{"style":574},[2516],{"type":400,"value":1923},{"type":395,"tag":464,"props":2518,"children":2519},{"class":466,"line":1299},[2520,2525,2529,2533,2538,2542,2546,2550,2554,2558,2562,2566],{"type":395,"tag":464,"props":2521,"children":2522},{"style":495},[2523],{"type":400,"value":2524},"  options",{"type":395,"tag":464,"props":2526,"children":2527},{"style":574},[2528],{"type":400,"value":577},{"type":395,"tag":464,"props":2530,"children":2531},{"style":495},[2532],{"type":400,"value":2224},{"type":395,"tag":464,"props":2534,"children":2535},{"style":483},[2536],{"type":400,"value":2537}," &&",{"type":395,"tag":464,"props":2539,"children":2540},{"style":495},[2541],{"type":400,"value":2348},{"type":395,"tag":464,"props":2543,"children":2544},{"style":574},[2545],{"type":400,"value":577},{"type":395,"tag":464,"props":2547,"children":2548},{"style":489},[2549],{"type":400,"value":2489},{"type":395,"tag":464,"props":2551,"children":2552},{"style":1608},[2553],{"type":400,"value":498},{"type":395,"tag":464,"props":2555,"children":2556},{"style":501},[2557],{"type":400,"value":504},{"type":395,"tag":464,"props":2559,"children":2560},{"style":507},[2561],{"type":400,"value":2224},{"type":395,"tag":464,"props":2563,"children":2564},{"style":501},[2565],{"type":400,"value":504},{"type":395,"tag":464,"props":2567,"children":2568},{"style":1608},[2569],{"type":400,"value":519},{"type":395,"tag":464,"props":2571,"children":2572},{"class":466,"line":1320},[2573,2577,2581,2585,2589,2593,2597,2602,2606],{"type":395,"tag":464,"props":2574,"children":2575},{"style":1689},[2576],{"type":400,"value":1692},{"type":395,"tag":464,"props":2578,"children":2579},{"style":495},[2580],{"type":400,"value":2348},{"type":395,"tag":464,"props":2582,"children":2583},{"style":574},[2584],{"type":400,"value":577},{"type":395,"tag":464,"props":2586,"children":2587},{"style":489},[2588],{"type":400,"value":1705},{"type":395,"tag":464,"props":2590,"children":2591},{"style":1608},[2592],{"type":400,"value":498},{"type":395,"tag":464,"props":2594,"children":2595},{"style":501},[2596],{"type":400,"value":504},{"type":395,"tag":464,"props":2598,"children":2599},{"style":507},[2600],{"type":400,"value":2601},"; ",{"type":395,"tag":464,"props":2603,"children":2604},{"style":501},[2605],{"type":400,"value":504},{"type":395,"tag":464,"props":2607,"children":2608},{"style":1608},[2609],{"type":400,"value":519},{"type":395,"tag":464,"props":2611,"children":2612},{"class":466,"line":1329},[2613],{"type":395,"tag":464,"props":2614,"children":2615},{"style":574},[2616],{"type":400,"value":1734},{"type":395,"tag":464,"props":2618,"children":2619},{"class":466,"line":1350},[2620,2624,2629,2633,2637,2641,2645],{"type":395,"tag":464,"props":2621,"children":2622},{"style":471},[2623],{"type":400,"value":1503},{"type":395,"tag":464,"props":2625,"children":2626},{"style":489},[2627],{"type":400,"value":2628}," strictTransportSecurity",{"type":395,"tag":464,"props":2630,"children":2631},{"style":574},[2632],{"type":400,"value":498},{"type":395,"tag":464,"props":2634,"children":2635},{"style":1516},[2636],{"type":400,"value":1756},{"type":395,"tag":464,"props":2638,"children":2639},{"style":483},[2640],{"type":400,"value":486},{"type":395,"tag":464,"props":2642,"children":2643},{"style":574},[2644],{"type":400,"value":1765},{"type":395,"tag":464,"props":2646,"children":2647},{"style":574},[2648],{"type":400,"value":1555},{"type":395,"tag":464,"props":2650,"children":2651},{"class":466,"line":1359},[2652,2656,2660,2664,2668,2672,2676],{"type":395,"tag":464,"props":2653,"children":2654},{"style":471},[2655],{"type":400,"value":1564},{"type":395,"tag":464,"props":2657,"children":2658},{"style":477},[2659],{"type":400,"value":1782},{"type":395,"tag":464,"props":2661,"children":2662},{"style":483},[2663],{"type":400,"value":486},{"type":395,"tag":464,"props":2665,"children":2666},{"style":489},[2667],{"type":400,"value":1508},{"type":395,"tag":464,"props":2669,"children":2670},{"style":1608},[2671],{"type":400,"value":498},{"type":395,"tag":464,"props":2673,"children":2674},{"style":495},[2675],{"type":400,"value":1756},{"type":395,"tag":464,"props":2677,"children":2678},{"style":1608},[2679],{"type":400,"value":519},{"type":395,"tag":464,"props":2681,"children":2682},{"class":466,"line":1380},[2683,2687,2691,2696,2700,2704,2708,2712,2716,2720,2724],{"type":395,"tag":464,"props":2684,"children":2685},{"style":1689},[2686],{"type":400,"value":1692},{"type":395,"tag":464,"props":2688,"children":2689},{"style":471},[2690],{"type":400,"value":1815},{"type":395,"tag":464,"props":2692,"children":2693},{"style":489},[2694],{"type":400,"value":2695}," strictTransportSecurityMiddleware",{"type":395,"tag":464,"props":2697,"children":2698},{"style":574},[2699],{"type":400,"value":498},{"type":395,"tag":464,"props":2701,"children":2702},{"style":1516},[2703],{"type":400,"value":1829},{"type":395,"tag":464,"props":2705,"children":2706},{"style":574},[2707],{"type":400,"value":789},{"type":395,"tag":464,"props":2709,"children":2710},{"style":1516},[2711],{"type":400,"value":1838},{"type":395,"tag":464,"props":2713,"children":2714},{"style":574},[2715],{"type":400,"value":789},{"type":395,"tag":464,"props":2717,"children":2718},{"style":1516},[2719],{"type":400,"value":1847},{"type":395,"tag":464,"props":2721,"children":2722},{"style":574},[2723],{"type":400,"value":1852},{"type":395,"tag":464,"props":2725,"children":2726},{"style":574},[2727],{"type":400,"value":1555},{"type":395,"tag":464,"props":2729,"children":2730},{"class":466,"line":1389},[2731,2735,2739,2743,2747,2751,2756,2760,2764,2768],{"type":395,"tag":464,"props":2732,"children":2733},{"style":495},[2734],{"type":400,"value":1865},{"type":395,"tag":464,"props":2736,"children":2737},{"style":574},[2738],{"type":400,"value":577},{"type":395,"tag":464,"props":2740,"children":2741},{"style":489},[2742],{"type":400,"value":767},{"type":395,"tag":464,"props":2744,"children":2745},{"style":1608},[2746],{"type":400,"value":498},{"type":395,"tag":464,"props":2748,"children":2749},{"style":501},[2750],{"type":400,"value":504},{"type":395,"tag":464,"props":2752,"children":2753},{"style":507},[2754],{"type":400,"value":2755},"Strict-Transport-Security",{"type":395,"tag":464,"props":2757,"children":2758},{"style":501},[2759],{"type":400,"value":504},{"type":395,"tag":464,"props":2761,"children":2762},{"style":574},[2763],{"type":400,"value":789},{"type":395,"tag":464,"props":2765,"children":2766},{"style":495},[2767],{"type":400,"value":1782},{"type":395,"tag":464,"props":2769,"children":2770},{"style":1608},[2771],{"type":400,"value":519},{"type":395,"tag":464,"props":2773,"children":2774},{"class":466,"line":1410},[2775,2779],{"type":395,"tag":464,"props":2776,"children":2777},{"style":489},[2778],{"type":400,"value":1910},{"type":395,"tag":464,"props":2780,"children":2781},{"style":1608},[2782],{"type":400,"value":554},{"type":395,"tag":464,"props":2784,"children":2785},{"class":466,"line":1419},[2786],{"type":395,"tag":464,"props":2787,"children":2788},{"style":574},[2789],{"type":400,"value":1923},{"type":395,"tag":464,"props":2791,"children":2792},{"class":466,"line":1440},[2793],{"type":395,"tag":464,"props":2794,"children":2795},{"style":574},[2796],{"type":400,"value":1734},{"type":395,"tag":664,"props":2798,"children":2800},{"id":2799},"可选用证书透明性策略",[2801],{"type":400,"value":2799},{"type":395,"tag":453,"props":2803,"children":2805},{"code":2804,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('Expect-CT' /* someValue */)\n",[2806],{"type":395,"tag":460,"props":2807,"children":2808},{"__ignoreMap":388},[2809],{"type":395,"tag":464,"props":2810,"children":2811},{"class":466,"line":467},[2812,2816,2820,2824,2828,2832,2837,2841,2846],{"type":395,"tag":464,"props":2813,"children":2814},{"style":495},[2815],{"type":400,"value":684},{"type":395,"tag":464,"props":2817,"children":2818},{"style":574},[2819],{"type":400,"value":577},{"type":395,"tag":464,"props":2821,"children":2822},{"style":489},[2823],{"type":400,"value":767},{"type":395,"tag":464,"props":2825,"children":2826},{"style":495},[2827],{"type":400,"value":498},{"type":395,"tag":464,"props":2829,"children":2830},{"style":501},[2831],{"type":400,"value":504},{"type":395,"tag":464,"props":2833,"children":2834},{"style":507},[2835],{"type":400,"value":2836},"Expect-CT",{"type":395,"tag":464,"props":2838,"children":2839},{"style":501},[2840],{"type":400,"value":504},{"type":395,"tag":464,"props":2842,"children":2843},{"style":1234},[2844],{"type":400,"value":2845}," /* someValue */",{"type":395,"tag":464,"props":2847,"children":2848},{"style":495},[2849],{"type":400,"value":519},{"type":395,"tag":396,"props":2851,"children":2852},{},[2853,2858,2860,2871,2873,2884],{"type":395,"tag":460,"props":2854,"children":2856},{"className":2855},[],[2857],{"type":400,"value":2836},{"type":400,"value":2859}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":395,"tag":403,"props":2861,"children":2862},{},[2863],{"type":395,"tag":407,"props":2864,"children":2868},{"href":2865,"ariaDescribedBy":2866,"dataFootnoteRef":388,"id":2867},"#user-content-fn-chrome-ct",[411],"user-content-fnref-chrome-ct",[2869],{"type":400,"value":2870},"9",{"type":400,"value":2872},"），避免中间人攻击",{"type":395,"tag":403,"props":2874,"children":2875},{},[2876],{"type":395,"tag":407,"props":2877,"children":2881},{"href":2878,"ariaDescribedBy":2879,"dataFootnoteRef":388,"id":2880},"#user-content-fn-ct",[411],"user-content-fnref-ct",[2882],{"type":400,"value":2883},"10",{"type":400,"value":2885},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":395,"tag":453,"props":2887,"children":2889},{"code":2888},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2890],{"type":395,"tag":460,"props":2891,"children":2892},{"__ignoreMap":388},[2893],{"type":400,"value":2888},{"type":395,"tag":396,"props":2895,"children":2896},{},[2897,2899,2904],{"type":400,"value":2898},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":395,"tag":460,"props":2900,"children":2902},{"className":2901},[],[2903],{"type":400,"value":2836},{"type":400,"value":2905}," 就作不上用咯... TODO",{"type":395,"tag":664,"props":2907,"children":2909},{"id":2908},"拒绝来自-pdfflash-的跨域请求",[2910],{"type":400,"value":2911},"拒绝来自 PDF、Flash 的跨域请求",{"type":395,"tag":396,"props":2913,"children":2914},{},[2915,2921,2923,2934],{"type":395,"tag":460,"props":2916,"children":2918},{"className":2917},[],[2919],{"type":400,"value":2920},"X-Permitted-Cross-Domain-Policies",{"type":400,"value":2922}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":395,"tag":403,"props":2924,"children":2925},{},[2926],{"type":395,"tag":407,"props":2927,"children":2931},{"href":2928,"ariaDescribedBy":2929,"dataFootnoteRef":388,"id":2930},"#user-content-fn-pdf-reader",[411],"user-content-fnref-pdf-reader",[2932],{"type":400,"value":2933},"11",{"type":400,"value":2935},"：",{"type":395,"tag":396,"props":2937,"children":2938},{},[2939],{"type":395,"tag":1117,"props":2940,"children":2942},{"alt":2920,"src":2941},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":395,"tag":2944,"props":2945,"children":2946},"ol",{},[2947,2953],{"type":395,"tag":2948,"props":2949,"children":2950},"li",{},[2951],{"type":400,"value":2952},"用户在 A 网站打开了某个 PDF；",{"type":395,"tag":2948,"props":2954,"children":2955},{},[2956,2958,2964],{"type":400,"value":2957},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":395,"tag":460,"props":2959,"children":2961},{"className":2960},[],[2962],{"type":400,"value":2963},"crossdomain.xml",{"type":400,"value":2965}," 文件（策略文件）作为跨域策略应对方案。",{"type":395,"tag":396,"props":2967,"children":2968},{},[2969],{"type":400,"value":2970},"一个策略文件可能长这样：",{"type":395,"tag":453,"props":2972,"children":2974},{"code":2973,"language":1955,"meta":388,"className":1956,"style":388},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2975],{"type":395,"tag":460,"props":2976,"children":2977},{"__ignoreMap":388},[2978,2986,3002,3041,3077,3113,3149,3185],{"type":395,"tag":464,"props":2979,"children":2980},{"class":466,"line":467},[2981],{"type":395,"tag":464,"props":2982,"children":2983},{"style":1234},[2984],{"type":400,"value":2985},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":395,"tag":464,"props":2987,"children":2988},{"class":466,"line":522},[2989,2993,2998],{"type":395,"tag":464,"props":2990,"children":2991},{"style":574},[2992],{"type":400,"value":1968},{"type":395,"tag":464,"props":2994,"children":2995},{"style":1971},[2996],{"type":400,"value":2997},"cross-domain-policy",{"type":395,"tag":464,"props":2999,"children":3000},{"style":574},[3001],{"type":400,"value":2093},{"type":395,"tag":464,"props":3003,"children":3004},{"class":466,"line":531},[3005,3010,3015,3020,3024,3028,3033,3037],{"type":395,"tag":464,"props":3006,"children":3007},{"style":574},[3008],{"type":400,"value":3009},"  \u003C",{"type":395,"tag":464,"props":3011,"children":3012},{"style":1971},[3013],{"type":400,"value":3014},"allow-access-from",{"type":395,"tag":464,"props":3016,"children":3017},{"style":1977},[3018],{"type":400,"value":3019}," domain",{"type":395,"tag":464,"props":3021,"children":3022},{"style":574},[3023],{"type":400,"value":1985},{"type":395,"tag":464,"props":3025,"children":3026},{"style":501},[3027],{"type":400,"value":1990},{"type":395,"tag":464,"props":3029,"children":3030},{"style":507},[3031],{"type":400,"value":3032},"*.taobao.com",{"type":395,"tag":464,"props":3034,"children":3035},{"style":501},[3036],{"type":400,"value":1990},{"type":395,"tag":464,"props":3038,"children":3039},{"style":574},[3040],{"type":400,"value":2025},{"type":395,"tag":464,"props":3042,"children":3043},{"class":466,"line":557},[3044,3048,3052,3056,3060,3064,3069,3073],{"type":395,"tag":464,"props":3045,"children":3046},{"style":574},[3047],{"type":400,"value":3009},{"type":395,"tag":464,"props":3049,"children":3050},{"style":1971},[3051],{"type":400,"value":3014},{"type":395,"tag":464,"props":3053,"children":3054},{"style":1977},[3055],{"type":400,"value":3019},{"type":395,"tag":464,"props":3057,"children":3058},{"style":574},[3059],{"type":400,"value":1985},{"type":395,"tag":464,"props":3061,"children":3062},{"style":501},[3063],{"type":400,"value":1990},{"type":395,"tag":464,"props":3065,"children":3066},{"style":507},[3067],{"type":400,"value":3068},"*.taobao.net",{"type":395,"tag":464,"props":3070,"children":3071},{"style":501},[3072],{"type":400,"value":1990},{"type":395,"tag":464,"props":3074,"children":3075},{"style":574},[3076],{"type":400,"value":2025},{"type":395,"tag":464,"props":3078,"children":3079},{"class":466,"line":565},[3080,3084,3088,3092,3096,3100,3105,3109],{"type":395,"tag":464,"props":3081,"children":3082},{"style":574},[3083],{"type":400,"value":3009},{"type":395,"tag":464,"props":3085,"children":3086},{"style":1971},[3087],{"type":400,"value":3014},{"type":395,"tag":464,"props":3089,"children":3090},{"style":1977},[3091],{"type":400,"value":3019},{"type":395,"tag":464,"props":3093,"children":3094},{"style":574},[3095],{"type":400,"value":1985},{"type":395,"tag":464,"props":3097,"children":3098},{"style":501},[3099],{"type":400,"value":1990},{"type":395,"tag":464,"props":3101,"children":3102},{"style":507},[3103],{"type":400,"value":3104},"*.taobaocdn.com",{"type":395,"tag":464,"props":3106,"children":3107},{"style":501},[3108],{"type":400,"value":1990},{"type":395,"tag":464,"props":3110,"children":3111},{"style":574},[3112],{"type":400,"value":2025},{"type":395,"tag":464,"props":3114,"children":3115},{"class":466,"line":1290},[3116,3120,3124,3128,3132,3136,3141,3145],{"type":395,"tag":464,"props":3117,"children":3118},{"style":574},[3119],{"type":400,"value":3009},{"type":395,"tag":464,"props":3121,"children":3122},{"style":1971},[3123],{"type":400,"value":3014},{"type":395,"tag":464,"props":3125,"children":3126},{"style":1977},[3127],{"type":400,"value":3019},{"type":395,"tag":464,"props":3129,"children":3130},{"style":574},[3131],{"type":400,"value":1985},{"type":395,"tag":464,"props":3133,"children":3134},{"style":501},[3135],{"type":400,"value":1990},{"type":395,"tag":464,"props":3137,"children":3138},{"style":507},[3139],{"type":400,"value":3140},"*.tbcdn.cn",{"type":395,"tag":464,"props":3142,"children":3143},{"style":501},[3144],{"type":400,"value":1990},{"type":395,"tag":464,"props":3146,"children":3147},{"style":574},[3148],{"type":400,"value":2025},{"type":395,"tag":464,"props":3150,"children":3151},{"class":466,"line":1299},[3152,3156,3160,3164,3168,3172,3177,3181],{"type":395,"tag":464,"props":3153,"children":3154},{"style":574},[3155],{"type":400,"value":3009},{"type":395,"tag":464,"props":3157,"children":3158},{"style":1971},[3159],{"type":400,"value":3014},{"type":395,"tag":464,"props":3161,"children":3162},{"style":1977},[3163],{"type":400,"value":3019},{"type":395,"tag":464,"props":3165,"children":3166},{"style":574},[3167],{"type":400,"value":1985},{"type":395,"tag":464,"props":3169,"children":3170},{"style":501},[3171],{"type":400,"value":1990},{"type":395,"tag":464,"props":3173,"children":3174},{"style":507},[3175],{"type":400,"value":3176},"*.alicdn.com",{"type":395,"tag":464,"props":3178,"children":3179},{"style":501},[3180],{"type":400,"value":1990},{"type":395,"tag":464,"props":3182,"children":3183},{"style":574},[3184],{"type":400,"value":2025},{"type":395,"tag":464,"props":3186,"children":3187},{"class":466,"line":1320},[3188,3193,3197],{"type":395,"tag":464,"props":3189,"children":3190},{"style":574},[3191],{"type":400,"value":3192},"\u003C/",{"type":395,"tag":464,"props":3194,"children":3195},{"style":1971},[3196],{"type":400,"value":2997},{"type":395,"tag":464,"props":3198,"children":3199},{"style":574},[3200],{"type":400,"value":2093},{"type":395,"tag":396,"props":3202,"children":3203},{},[3204,3206,3211,3213,3218],{"type":400,"value":3205},"其中，若请求响应头包含了 ",{"type":395,"tag":460,"props":3207,"children":3209},{"className":3208},[],[3210],{"type":400,"value":2920},{"type":400,"value":3212},"，便可指定浏览器针对 ",{"type":395,"tag":460,"props":3214,"children":3216},{"className":3215},[],[3217],{"type":400,"value":2963},{"type":400,"value":3219}," 的应对行为。",{"type":395,"tag":453,"props":3221,"children":3223},{"code":3222,"language":456,"meta":388,"className":457,"style":388},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3224],{"type":395,"tag":460,"props":3225,"children":3226},{"__ignoreMap":388},[3227,3255,3263,3283,3291,3311,3319,3339,3347,3364,3371,3416,3464,3507,3518,3525],{"type":395,"tag":464,"props":3228,"children":3229},{"class":466,"line":467},[3230,3234,3239,3243,3247,3251],{"type":395,"tag":464,"props":3231,"children":3232},{"style":471},[3233],{"type":400,"value":474},{"type":395,"tag":464,"props":3235,"children":3236},{"style":477},[3237],{"type":400,"value":3238}," ALLOWED_PERMITTED_POLICIES",{"type":395,"tag":464,"props":3240,"children":3241},{"style":483},[3242],{"type":400,"value":486},{"type":395,"tag":464,"props":3244,"children":3245},{"style":483},[3246],{"type":400,"value":1218},{"type":395,"tag":464,"props":3248,"children":3249},{"style":489},[3250],{"type":400,"value":1223},{"type":395,"tag":464,"props":3252,"children":3253},{"style":495},[3254],{"type":400,"value":1228},{"type":395,"tag":464,"props":3256,"children":3257},{"class":466,"line":522},[3258],{"type":395,"tag":464,"props":3259,"children":3260},{"style":1234},[3261],{"type":400,"value":3262},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":395,"tag":464,"props":3264,"children":3265},{"class":466,"line":531},[3266,3270,3275,3279],{"type":395,"tag":464,"props":3267,"children":3268},{"style":501},[3269],{"type":400,"value":1245},{"type":395,"tag":464,"props":3271,"children":3272},{"style":507},[3273],{"type":400,"value":3274},"master-only",{"type":395,"tag":464,"props":3276,"children":3277},{"style":501},[3278],{"type":400,"value":504},{"type":395,"tag":464,"props":3280,"children":3281},{"style":574},[3282],{"type":400,"value":1259},{"type":395,"tag":464,"props":3284,"children":3285},{"class":466,"line":557},[3286],{"type":395,"tag":464,"props":3287,"children":3288},{"style":1234},[3289],{"type":400,"value":3290},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":395,"tag":464,"props":3292,"children":3293},{"class":466,"line":565},[3294,3298,3303,3307],{"type":395,"tag":464,"props":3295,"children":3296},{"style":501},[3297],{"type":400,"value":1245},{"type":395,"tag":464,"props":3299,"children":3300},{"style":507},[3301],{"type":400,"value":3302},"by-content-type",{"type":395,"tag":464,"props":3304,"children":3305},{"style":501},[3306],{"type":400,"value":504},{"type":395,"tag":464,"props":3308,"children":3309},{"style":574},[3310],{"type":400,"value":1259},{"type":395,"tag":464,"props":3312,"children":3313},{"class":466,"line":1290},[3314],{"type":395,"tag":464,"props":3315,"children":3316},{"style":1234},[3317],{"type":400,"value":3318},"  // 不使用任何位置的 crossdomain.xml\n",{"type":395,"tag":464,"props":3320,"children":3321},{"class":466,"line":1299},[3322,3326,3331,3335],{"type":395,"tag":464,"props":3323,"children":3324},{"style":501},[3325],{"type":400,"value":1245},{"type":395,"tag":464,"props":3327,"children":3328},{"style":507},[3329],{"type":400,"value":3330},"none",{"type":395,"tag":464,"props":3332,"children":3333},{"style":501},[3334],{"type":400,"value":504},{"type":395,"tag":464,"props":3336,"children":3337},{"style":574},[3338],{"type":400,"value":1259},{"type":395,"tag":464,"props":3340,"children":3341},{"class":466,"line":1320},[3342],{"type":395,"tag":464,"props":3343,"children":3344},{"style":1234},[3345],{"type":400,"value":3346},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":395,"tag":464,"props":3348,"children":3349},{"class":466,"line":1329},[3350,3354,3359],{"type":395,"tag":464,"props":3351,"children":3352},{"style":501},[3353],{"type":400,"value":1245},{"type":395,"tag":464,"props":3355,"children":3356},{"style":507},[3357],{"type":400,"value":3358},"all",{"type":395,"tag":464,"props":3360,"children":3361},{"style":501},[3362],{"type":400,"value":3363},"'\n",{"type":395,"tag":464,"props":3365,"children":3366},{"class":466,"line":1350},[3367],{"type":395,"tag":464,"props":3368,"children":3369},{"style":495},[3370],{"type":400,"value":1494},{"type":395,"tag":464,"props":3372,"children":3373},{"class":466,"line":1359},[3374,3378,3383,3387,3392,3396,3400,3404,3408,3412],{"type":395,"tag":464,"props":3375,"children":3376},{"style":471},[3377],{"type":400,"value":1503},{"type":395,"tag":464,"props":3379,"children":3380},{"style":489},[3381],{"type":400,"value":3382}," xPermittedCrossDomainPolicies",{"type":395,"tag":464,"props":3384,"children":3385},{"style":574},[3386],{"type":400,"value":498},{"type":395,"tag":464,"props":3388,"children":3389},{"style":1516},[3390],{"type":400,"value":3391},"headerValue",{"type":395,"tag":464,"props":3393,"children":3394},{"style":483},[3395],{"type":400,"value":486},{"type":395,"tag":464,"props":3397,"children":3398},{"style":501},[3399],{"type":400,"value":794},{"type":395,"tag":464,"props":3401,"children":3402},{"style":507},[3403],{"type":400,"value":3330},{"type":395,"tag":464,"props":3405,"children":3406},{"style":501},[3407],{"type":400,"value":504},{"type":395,"tag":464,"props":3409,"children":3410},{"style":574},[3411],{"type":400,"value":1852},{"type":395,"tag":464,"props":3413,"children":3414},{"style":574},[3415],{"type":400,"value":1555},{"type":395,"tag":464,"props":3417,"children":3418},{"class":466,"line":1380},[3419,3423,3427,3432,3436,3440,3444,3448,3452,3456,3460],{"type":395,"tag":464,"props":3420,"children":3421},{"style":1689},[3422],{"type":400,"value":1692},{"type":395,"tag":464,"props":3424,"children":3425},{"style":471},[3426],{"type":400,"value":1815},{"type":395,"tag":464,"props":3428,"children":3429},{"style":489},[3430],{"type":400,"value":3431}," xPermittedCrossDomainPoliciesMiddleware",{"type":395,"tag":464,"props":3433,"children":3434},{"style":574},[3435],{"type":400,"value":498},{"type":395,"tag":464,"props":3437,"children":3438},{"style":1516},[3439],{"type":400,"value":1829},{"type":395,"tag":464,"props":3441,"children":3442},{"style":574},[3443],{"type":400,"value":789},{"type":395,"tag":464,"props":3445,"children":3446},{"style":1516},[3447],{"type":400,"value":1838},{"type":395,"tag":464,"props":3449,"children":3450},{"style":574},[3451],{"type":400,"value":789},{"type":395,"tag":464,"props":3453,"children":3454},{"style":1516},[3455],{"type":400,"value":1847},{"type":395,"tag":464,"props":3457,"children":3458},{"style":574},[3459],{"type":400,"value":1852},{"type":395,"tag":464,"props":3461,"children":3462},{"style":574},[3463],{"type":400,"value":1555},{"type":395,"tag":464,"props":3465,"children":3466},{"class":466,"line":1389},[3467,3471,3475,3479,3483,3487,3491,3495,3499,3503],{"type":395,"tag":464,"props":3468,"children":3469},{"style":495},[3470],{"type":400,"value":1865},{"type":395,"tag":464,"props":3472,"children":3473},{"style":574},[3474],{"type":400,"value":577},{"type":395,"tag":464,"props":3476,"children":3477},{"style":489},[3478],{"type":400,"value":767},{"type":395,"tag":464,"props":3480,"children":3481},{"style":1608},[3482],{"type":400,"value":498},{"type":395,"tag":464,"props":3484,"children":3485},{"style":501},[3486],{"type":400,"value":504},{"type":395,"tag":464,"props":3488,"children":3489},{"style":507},[3490],{"type":400,"value":2920},{"type":395,"tag":464,"props":3492,"children":3493},{"style":501},[3494],{"type":400,"value":504},{"type":395,"tag":464,"props":3496,"children":3497},{"style":574},[3498],{"type":400,"value":789},{"type":395,"tag":464,"props":3500,"children":3501},{"style":495},[3502],{"type":400,"value":1782},{"type":395,"tag":464,"props":3504,"children":3505},{"style":1608},[3506],{"type":400,"value":519},{"type":395,"tag":464,"props":3508,"children":3509},{"class":466,"line":1410},[3510,3514],{"type":395,"tag":464,"props":3511,"children":3512},{"style":489},[3513],{"type":400,"value":1910},{"type":395,"tag":464,"props":3515,"children":3516},{"style":1608},[3517],{"type":400,"value":554},{"type":395,"tag":464,"props":3519,"children":3520},{"class":466,"line":1419},[3521],{"type":395,"tag":464,"props":3522,"children":3523},{"style":574},[3524],{"type":400,"value":1923},{"type":395,"tag":464,"props":3526,"children":3527},{"class":466,"line":1440},[3528],{"type":395,"tag":464,"props":3529,"children":3530},{"style":574},[3531],{"type":400,"value":1734},{"type":395,"tag":396,"props":3533,"children":3534},{},[3535],{"type":400,"value":3536},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":395,"tag":664,"props":3538,"children":3540},{"id":3539},"开启-csp",[3541],{"type":400,"value":3542},"开启 CSP",{"type":395,"tag":396,"props":3544,"children":3545},{},[3546,3548,3553,3555,3560,3562,3567,3569,3580],{"type":400,"value":3547},"还记得刚才提到 Chrome 关闭了 ",{"type":395,"tag":460,"props":3549,"children":3551},{"className":3550},[],[3552],{"type":400,"value":917},{"type":400,"value":3554}," 吗？既然不再使用 ",{"type":395,"tag":460,"props":3556,"children":3558},{"className":3557},[],[3559],{"type":400,"value":917},{"type":400,"value":3561},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":395,"tag":460,"props":3563,"children":3565},{"className":3564},[],[3566],{"type":400,"value":945},{"type":400,"value":3568}," 标准",{"type":395,"tag":403,"props":3570,"children":3571},{},[3572],{"type":395,"tag":407,"props":3573,"children":3577},{"href":3574,"ariaDescribedBy":3575,"dataFootnoteRef":388,"id":3576},"#user-content-fn-csp-standard",[411],"user-content-fnref-csp-standard",[3578],{"type":400,"value":3579},"12",{"type":400,"value":3581},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":395,"tag":396,"props":3583,"children":3584},{},[3585,3590],{"type":395,"tag":460,"props":3586,"children":3588},{"className":3587},[],[3589],{"type":400,"value":945},{"type":400,"value":3591}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":395,"tag":453,"props":3593,"children":3595},{"code":3594,"language":1955,"meta":388,"className":1956,"style":388},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3596],{"type":395,"tag":460,"props":3597,"children":3598},{"__ignoreMap":388},[3599],{"type":395,"tag":464,"props":3600,"children":3601},{"class":466,"line":467},[3602,3606,3610,3615,3619,3623,3628,3632,3636,3640,3644,3649,3653],{"type":395,"tag":464,"props":3603,"children":3604},{"style":574},[3605],{"type":400,"value":1968},{"type":395,"tag":464,"props":3607,"children":3608},{"style":1971},[3609],{"type":400,"value":1974},{"type":395,"tag":464,"props":3611,"children":3612},{"style":1977},[3613],{"type":400,"value":3614}," http-equiv",{"type":395,"tag":464,"props":3616,"children":3617},{"style":574},[3618],{"type":400,"value":1985},{"type":395,"tag":464,"props":3620,"children":3621},{"style":501},[3622],{"type":400,"value":1990},{"type":395,"tag":464,"props":3624,"children":3625},{"style":507},[3626],{"type":400,"value":3627},"Content-Security-Policy",{"type":395,"tag":464,"props":3629,"children":3630},{"style":501},[3631],{"type":400,"value":1990},{"type":395,"tag":464,"props":3633,"children":3634},{"style":1977},[3635],{"type":400,"value":2004},{"type":395,"tag":464,"props":3637,"children":3638},{"style":574},[3639],{"type":400,"value":1985},{"type":395,"tag":464,"props":3641,"children":3642},{"style":501},[3643],{"type":400,"value":1990},{"type":395,"tag":464,"props":3645,"children":3646},{"style":507},[3647],{"type":400,"value":3648},"default-src 'self'; img-src https://*; child-src 'none';",{"type":395,"tag":464,"props":3650,"children":3651},{"style":501},[3652],{"type":400,"value":1990},{"type":395,"tag":464,"props":3654,"children":3655},{"style":574},[3656],{"type":400,"value":2025},{"type":395,"tag":396,"props":3658,"children":3659},{},[3660,3662,3667],{"type":400,"value":3661},"一个典型的 ",{"type":395,"tag":460,"props":3663,"children":3665},{"className":3664},[],[3666],{"type":400,"value":945},{"type":400,"value":3668}," 头如下：",{"type":395,"tag":453,"props":3670,"children":3672},{"code":3671},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3673],{"type":395,"tag":460,"props":3674,"children":3675},{"__ignoreMap":388},[3676],{"type":400,"value":3671},{"type":395,"tag":396,"props":3678,"children":3679},{},[3680],{"type":400,"value":3681},"大致来说，CSP 相关以下几种安全行为：",{"type":395,"tag":3683,"props":3684,"children":3685},"ul",{},[3686,3691,3696,3701],{"type":395,"tag":2948,"props":3687,"children":3688},{},[3689],{"type":400,"value":3690},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":395,"tag":2948,"props":3692,"children":3693},{},[3694],{"type":400,"value":3695},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":395,"tag":2948,"props":3697,"children":3698},{},[3699],{"type":400,"value":3700},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":395,"tag":2948,"props":3702,"children":3703},{},[3704,3706,3712],{"type":400,"value":3705},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":395,"tag":460,"props":3707,"children":3709},{"className":3708},[],[3710],{"type":400,"value":3711},"Content-Security-Policy-Report-Only",{"type":400,"value":3713}," Header。",{"type":395,"tag":396,"props":3715,"children":3716},{},[3717,3719,3724],{"type":400,"value":3718},"那么我们看看 Helmet 中默认配置的 ",{"type":395,"tag":460,"props":3720,"children":3722},{"className":3721},[],[3723],{"type":400,"value":945},{"type":400,"value":3725}," 策略：",{"type":395,"tag":453,"props":3727,"children":3729},{"code":3728,"language":456,"meta":388,"className":457,"style":388},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3730],{"type":395,"tag":460,"props":3731,"children":3732},{"__ignoreMap":388},[3733,3753,3761,3808,3816,3860,3868,3897,3905,3983,3991,4034,4042,4102,4110,4155,4163,4207,4215,4223,4231,4239,4288,4296,4374,4382,4390,4398,4423],{"type":395,"tag":464,"props":3734,"children":3735},{"class":466,"line":467},[3736,3740,3745,3749],{"type":395,"tag":464,"props":3737,"children":3738},{"style":471},[3739],{"type":400,"value":474},{"type":395,"tag":464,"props":3741,"children":3742},{"style":477},[3743],{"type":400,"value":3744}," DEFAULT_DIRECTIVES",{"type":395,"tag":464,"props":3746,"children":3747},{"style":483},[3748],{"type":400,"value":486},{"type":395,"tag":464,"props":3750,"children":3751},{"style":574},[3752],{"type":400,"value":1555},{"type":395,"tag":464,"props":3754,"children":3755},{"class":466,"line":522},[3756],{"type":395,"tag":464,"props":3757,"children":3758},{"style":1234},[3759],{"type":400,"value":3760},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":395,"tag":464,"props":3762,"children":3763},{"class":466,"line":531},[3764,3768,3774,3778,3782,3786,3790,3795,3799,3804],{"type":395,"tag":464,"props":3765,"children":3766},{"style":501},[3767],{"type":400,"value":1245},{"type":395,"tag":464,"props":3769,"children":3771},{"style":3770},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3772],{"type":400,"value":3773},"default-src",{"type":395,"tag":464,"props":3775,"children":3776},{"style":501},[3777],{"type":400,"value":504},{"type":395,"tag":464,"props":3779,"children":3780},{"style":574},[3781],{"type":400,"value":1624},{"type":395,"tag":464,"props":3783,"children":3784},{"style":495},[3785],{"type":400,"value":1528},{"type":395,"tag":464,"props":3787,"children":3788},{"style":501},[3789],{"type":400,"value":1990},{"type":395,"tag":464,"props":3791,"children":3792},{"style":507},[3793],{"type":400,"value":3794},"'self'",{"type":395,"tag":464,"props":3796,"children":3797},{"style":501},[3798],{"type":400,"value":1990},{"type":395,"tag":464,"props":3800,"children":3801},{"style":495},[3802],{"type":400,"value":3803},"]",{"type":395,"tag":464,"props":3805,"children":3806},{"style":574},[3807],{"type":400,"value":1259},{"type":395,"tag":464,"props":3809,"children":3810},{"class":466,"line":557},[3811],{"type":395,"tag":464,"props":3812,"children":3813},{"style":1234},[3814],{"type":400,"value":3815},"  // 限制 base 标签的 URI 为源地址\n",{"type":395,"tag":464,"props":3817,"children":3818},{"class":466,"line":565},[3819,3823,3828,3832,3836,3840,3844,3848,3852,3856],{"type":395,"tag":464,"props":3820,"children":3821},{"style":501},[3822],{"type":400,"value":1245},{"type":395,"tag":464,"props":3824,"children":3825},{"style":3770},[3826],{"type":400,"value":3827},"base-uri",{"type":395,"tag":464,"props":3829,"children":3830},{"style":501},[3831],{"type":400,"value":504},{"type":395,"tag":464,"props":3833,"children":3834},{"style":574},[3835],{"type":400,"value":1624},{"type":395,"tag":464,"props":3837,"children":3838},{"style":495},[3839],{"type":400,"value":1528},{"type":395,"tag":464,"props":3841,"children":3842},{"style":501},[3843],{"type":400,"value":1990},{"type":395,"tag":464,"props":3845,"children":3846},{"style":507},[3847],{"type":400,"value":3794},{"type":395,"tag":464,"props":3849,"children":3850},{"style":501},[3851],{"type":400,"value":1990},{"type":395,"tag":464,"props":3853,"children":3854},{"style":495},[3855],{"type":400,"value":3803},{"type":395,"tag":464,"props":3857,"children":3858},{"style":574},[3859],{"type":400,"value":1259},{"type":395,"tag":464,"props":3861,"children":3862},{"class":466,"line":1290},[3863],{"type":395,"tag":464,"props":3864,"children":3865},{"style":1234},[3866],{"type":400,"value":3867},"  // 禁止通过 HTTP 协议加载内容\n",{"type":395,"tag":464,"props":3869,"children":3870},{"class":466,"line":1299},[3871,3875,3880,3884,3888,3893],{"type":395,"tag":464,"props":3872,"children":3873},{"style":501},[3874],{"type":400,"value":1245},{"type":395,"tag":464,"props":3876,"children":3877},{"style":3770},[3878],{"type":400,"value":3879},"block-all-mixed-content",{"type":395,"tag":464,"props":3881,"children":3882},{"style":501},[3883],{"type":400,"value":504},{"type":395,"tag":464,"props":3885,"children":3886},{"style":574},[3887],{"type":400,"value":1624},{"type":395,"tag":464,"props":3889,"children":3890},{"style":495},[3891],{"type":400,"value":3892}," []",{"type":395,"tag":464,"props":3894,"children":3895},{"style":574},[3896],{"type":400,"value":1259},{"type":395,"tag":464,"props":3898,"children":3899},{"class":466,"line":1320},[3900],{"type":395,"tag":464,"props":3901,"children":3902},{"style":1234},[3903],{"type":400,"value":3904},"  // 限制字体加载地址\n",{"type":395,"tag":464,"props":3906,"children":3907},{"class":466,"line":1329},[3908,3912,3917,3921,3925,3929,3933,3937,3941,3945,3949,3954,3958,3962,3966,3971,3975,3979],{"type":395,"tag":464,"props":3909,"children":3910},{"style":501},[3911],{"type":400,"value":1245},{"type":395,"tag":464,"props":3913,"children":3914},{"style":3770},[3915],{"type":400,"value":3916},"font-src",{"type":395,"tag":464,"props":3918,"children":3919},{"style":501},[3920],{"type":400,"value":504},{"type":395,"tag":464,"props":3922,"children":3923},{"style":574},[3924],{"type":400,"value":1624},{"type":395,"tag":464,"props":3926,"children":3927},{"style":495},[3928],{"type":400,"value":1528},{"type":395,"tag":464,"props":3930,"children":3931},{"style":501},[3932],{"type":400,"value":1990},{"type":395,"tag":464,"props":3934,"children":3935},{"style":507},[3936],{"type":400,"value":3794},{"type":395,"tag":464,"props":3938,"children":3939},{"style":501},[3940],{"type":400,"value":1990},{"type":395,"tag":464,"props":3942,"children":3943},{"style":574},[3944],{"type":400,"value":789},{"type":395,"tag":464,"props":3946,"children":3947},{"style":501},[3948],{"type":400,"value":794},{"type":395,"tag":464,"props":3950,"children":3951},{"style":507},[3952],{"type":400,"value":3953},"https:",{"type":395,"tag":464,"props":3955,"children":3956},{"style":501},[3957],{"type":400,"value":504},{"type":395,"tag":464,"props":3959,"children":3960},{"style":574},[3961],{"type":400,"value":789},{"type":395,"tag":464,"props":3963,"children":3964},{"style":501},[3965],{"type":400,"value":794},{"type":395,"tag":464,"props":3967,"children":3968},{"style":507},[3969],{"type":400,"value":3970},"data:",{"type":395,"tag":464,"props":3972,"children":3973},{"style":501},[3974],{"type":400,"value":504},{"type":395,"tag":464,"props":3976,"children":3977},{"style":495},[3978],{"type":400,"value":3803},{"type":395,"tag":464,"props":3980,"children":3981},{"style":574},[3982],{"type":400,"value":1259},{"type":395,"tag":464,"props":3984,"children":3985},{"class":466,"line":1350},[3986],{"type":395,"tag":464,"props":3987,"children":3988},{"style":1234},[3989],{"type":400,"value":3990},"  // 限制嵌入的外部资源\n",{"type":395,"tag":464,"props":3992,"children":3993},{"class":466,"line":1359},[3994,3998,4002,4006,4010,4014,4018,4022,4026,4030],{"type":395,"tag":464,"props":3995,"children":3996},{"style":501},[3997],{"type":400,"value":1245},{"type":395,"tag":464,"props":3999,"children":4000},{"style":3770},[4001],{"type":400,"value":1139},{"type":395,"tag":464,"props":4003,"children":4004},{"style":501},[4005],{"type":400,"value":504},{"type":395,"tag":464,"props":4007,"children":4008},{"style":574},[4009],{"type":400,"value":1624},{"type":395,"tag":464,"props":4011,"children":4012},{"style":495},[4013],{"type":400,"value":1528},{"type":395,"tag":464,"props":4015,"children":4016},{"style":501},[4017],{"type":400,"value":1990},{"type":395,"tag":464,"props":4019,"children":4020},{"style":507},[4021],{"type":400,"value":3794},{"type":395,"tag":464,"props":4023,"children":4024},{"style":501},[4025],{"type":400,"value":1990},{"type":395,"tag":464,"props":4027,"children":4028},{"style":495},[4029],{"type":400,"value":3803},{"type":395,"tag":464,"props":4031,"children":4032},{"style":574},[4033],{"type":400,"value":1259},{"type":395,"tag":464,"props":4035,"children":4036},{"class":466,"line":1380},[4037],{"type":395,"tag":464,"props":4038,"children":4039},{"style":1234},[4040],{"type":400,"value":4041},"  // 限制图片加载地址\n",{"type":395,"tag":464,"props":4043,"children":4044},{"class":466,"line":1389},[4045,4049,4054,4058,4062,4066,4070,4074,4078,4082,4086,4090,4094,4098],{"type":395,"tag":464,"props":4046,"children":4047},{"style":501},[4048],{"type":400,"value":1245},{"type":395,"tag":464,"props":4050,"children":4051},{"style":3770},[4052],{"type":400,"value":4053},"img-src",{"type":395,"tag":464,"props":4055,"children":4056},{"style":501},[4057],{"type":400,"value":504},{"type":395,"tag":464,"props":4059,"children":4060},{"style":574},[4061],{"type":400,"value":1624},{"type":395,"tag":464,"props":4063,"children":4064},{"style":495},[4065],{"type":400,"value":1528},{"type":395,"tag":464,"props":4067,"children":4068},{"style":501},[4069],{"type":400,"value":1990},{"type":395,"tag":464,"props":4071,"children":4072},{"style":507},[4073],{"type":400,"value":3794},{"type":395,"tag":464,"props":4075,"children":4076},{"style":501},[4077],{"type":400,"value":1990},{"type":395,"tag":464,"props":4079,"children":4080},{"style":574},[4081],{"type":400,"value":789},{"type":395,"tag":464,"props":4083,"children":4084},{"style":501},[4085],{"type":400,"value":794},{"type":395,"tag":464,"props":4087,"children":4088},{"style":507},[4089],{"type":400,"value":3970},{"type":395,"tag":464,"props":4091,"children":4092},{"style":501},[4093],{"type":400,"value":504},{"type":395,"tag":464,"props":4095,"children":4096},{"style":495},[4097],{"type":400,"value":3803},{"type":395,"tag":464,"props":4099,"children":4100},{"style":574},[4101],{"type":400,"value":1259},{"type":395,"tag":464,"props":4103,"children":4104},{"class":466,"line":1410},[4105],{"type":395,"tag":464,"props":4106,"children":4107},{"style":1234},[4108],{"type":400,"value":4109},"  // 禁用 object 标签\n",{"type":395,"tag":464,"props":4111,"children":4112},{"class":466,"line":1419},[4113,4117,4122,4126,4130,4134,4138,4143,4147,4151],{"type":395,"tag":464,"props":4114,"children":4115},{"style":501},[4116],{"type":400,"value":1245},{"type":395,"tag":464,"props":4118,"children":4119},{"style":3770},[4120],{"type":400,"value":4121},"object-src",{"type":395,"tag":464,"props":4123,"children":4124},{"style":501},[4125],{"type":400,"value":504},{"type":395,"tag":464,"props":4127,"children":4128},{"style":574},[4129],{"type":400,"value":1624},{"type":395,"tag":464,"props":4131,"children":4132},{"style":495},[4133],{"type":400,"value":1528},{"type":395,"tag":464,"props":4135,"children":4136},{"style":501},[4137],{"type":400,"value":1990},{"type":395,"tag":464,"props":4139,"children":4140},{"style":507},[4141],{"type":400,"value":4142},"'none'",{"type":395,"tag":464,"props":4144,"children":4145},{"style":501},[4146],{"type":400,"value":1990},{"type":395,"tag":464,"props":4148,"children":4149},{"style":495},[4150],{"type":400,"value":3803},{"type":395,"tag":464,"props":4152,"children":4153},{"style":574},[4154],{"type":400,"value":1259},{"type":395,"tag":464,"props":4156,"children":4157},{"class":466,"line":1440},[4158],{"type":395,"tag":464,"props":4159,"children":4160},{"style":1234},[4161],{"type":400,"value":4162},"  // 只从源地址加载脚本\n",{"type":395,"tag":464,"props":4164,"children":4165},{"class":466,"line":1449},[4166,4170,4175,4179,4183,4187,4191,4195,4199,4203],{"type":395,"tag":464,"props":4167,"children":4168},{"style":501},[4169],{"type":400,"value":1245},{"type":395,"tag":464,"props":4171,"children":4172},{"style":3770},[4173],{"type":400,"value":4174},"script-src",{"type":395,"tag":464,"props":4176,"children":4177},{"style":501},[4178],{"type":400,"value":504},{"type":395,"tag":464,"props":4180,"children":4181},{"style":574},[4182],{"type":400,"value":1624},{"type":395,"tag":464,"props":4184,"children":4185},{"style":495},[4186],{"type":400,"value":1528},{"type":395,"tag":464,"props":4188,"children":4189},{"style":501},[4190],{"type":400,"value":1990},{"type":395,"tag":464,"props":4192,"children":4193},{"style":507},[4194],{"type":400,"value":3794},{"type":395,"tag":464,"props":4196,"children":4197},{"style":501},[4198],{"type":400,"value":1990},{"type":395,"tag":464,"props":4200,"children":4201},{"style":495},[4202],{"type":400,"value":3803},{"type":395,"tag":464,"props":4204,"children":4205},{"style":574},[4206],{"type":400,"value":1259},{"type":395,"tag":464,"props":4208,"children":4209},{"class":466,"line":1470},[4210],{"type":395,"tag":464,"props":4211,"children":4212},{"style":1234},[4213],{"type":400,"value":4214},"  // 禁用内联脚本\n",{"type":395,"tag":464,"props":4216,"children":4217},{"class":466,"line":1479},[4218],{"type":395,"tag":464,"props":4219,"children":4220},{"style":1234},[4221],{"type":400,"value":4222},"  // ？这里没能理解\n",{"type":395,"tag":464,"props":4224,"children":4225},{"class":466,"line":1488},[4226],{"type":395,"tag":464,"props":4227,"children":4228},{"style":1234},[4229],{"type":400,"value":4230},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":395,"tag":464,"props":4232,"children":4233},{"class":466,"line":1497},[4234],{"type":395,"tag":464,"props":4235,"children":4236},{"style":1234},[4237],{"type":400,"value":4238},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":395,"tag":464,"props":4240,"children":4241},{"class":466,"line":1558},[4242,4246,4251,4255,4259,4263,4267,4271,4275,4279,4283],{"type":395,"tag":464,"props":4243,"children":4244},{"style":501},[4245],{"type":400,"value":1245},{"type":395,"tag":464,"props":4247,"children":4248},{"style":3770},[4249],{"type":400,"value":4250},"script-src-attr",{"type":395,"tag":464,"props":4252,"children":4253},{"style":501},[4254],{"type":400,"value":504},{"type":395,"tag":464,"props":4256,"children":4257},{"style":574},[4258],{"type":400,"value":1624},{"type":395,"tag":464,"props":4260,"children":4261},{"style":495},[4262],{"type":400,"value":1528},{"type":395,"tag":464,"props":4264,"children":4265},{"style":501},[4266],{"type":400,"value":1990},{"type":395,"tag":464,"props":4268,"children":4269},{"style":507},[4270],{"type":400,"value":4142},{"type":395,"tag":464,"props":4272,"children":4273},{"style":501},[4274],{"type":400,"value":1990},{"type":395,"tag":464,"props":4276,"children":4277},{"style":495},[4278],{"type":400,"value":3803},{"type":395,"tag":464,"props":4280,"children":4281},{"style":574},[4282],{"type":400,"value":789},{"type":395,"tag":464,"props":4284,"children":4285},{"style":495},[4286],{"type":400,"value":4287},"‘\n",{"type":395,"tag":464,"props":4289,"children":4290},{"class":466,"line":1632},[4291],{"type":395,"tag":464,"props":4292,"children":4293},{"style":1234},[4294],{"type":400,"value":4295},"  // 限制样式表加载地址\n",{"type":395,"tag":464,"props":4297,"children":4298},{"class":466,"line":1663},[4299,4303,4308,4312,4316,4320,4324,4328,4332,4336,4340,4344,4348,4352,4357,4362,4366,4370],{"type":395,"tag":464,"props":4300,"children":4301},{"style":501},[4302],{"type":400,"value":1245},{"type":395,"tag":464,"props":4304,"children":4305},{"style":3770},[4306],{"type":400,"value":4307},"style-src",{"type":395,"tag":464,"props":4309,"children":4310},{"style":501},[4311],{"type":400,"value":504},{"type":395,"tag":464,"props":4313,"children":4314},{"style":574},[4315],{"type":400,"value":1624},{"type":395,"tag":464,"props":4317,"children":4318},{"style":495},[4319],{"type":400,"value":1528},{"type":395,"tag":464,"props":4321,"children":4322},{"style":501},[4323],{"type":400,"value":1990},{"type":395,"tag":464,"props":4325,"children":4326},{"style":507},[4327],{"type":400,"value":3794},{"type":395,"tag":464,"props":4329,"children":4330},{"style":501},[4331],{"type":400,"value":1990},{"type":395,"tag":464,"props":4333,"children":4334},{"style":574},[4335],{"type":400,"value":789},{"type":395,"tag":464,"props":4337,"children":4338},{"style":501},[4339],{"type":400,"value":794},{"type":395,"tag":464,"props":4341,"children":4342},{"style":507},[4343],{"type":400,"value":3953},{"type":395,"tag":464,"props":4345,"children":4346},{"style":501},[4347],{"type":400,"value":504},{"type":395,"tag":464,"props":4349,"children":4350},{"style":574},[4351],{"type":400,"value":789},{"type":395,"tag":464,"props":4353,"children":4354},{"style":501},[4355],{"type":400,"value":4356}," \"",{"type":395,"tag":464,"props":4358,"children":4359},{"style":507},[4360],{"type":400,"value":4361},"'unsafe-inline'",{"type":395,"tag":464,"props":4363,"children":4364},{"style":501},[4365],{"type":400,"value":1990},{"type":395,"tag":464,"props":4367,"children":4368},{"style":495},[4369],{"type":400,"value":3803},{"type":395,"tag":464,"props":4371,"children":4372},{"style":574},[4373],{"type":400,"value":1259},{"type":395,"tag":464,"props":4375,"children":4376},{"class":466,"line":1676},[4377],{"type":395,"tag":464,"props":4378,"children":4379},{"style":1234},[4380],{"type":400,"value":4381},"  // 不使用升级协议指令\n",{"type":395,"tag":464,"props":4383,"children":4384},{"class":466,"line":1685},[4385],{"type":395,"tag":464,"props":4386,"children":4387},{"style":1234},[4388],{"type":400,"value":4389},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":395,"tag":464,"props":4391,"children":4392},{"class":466,"line":1728},[4393],{"type":395,"tag":464,"props":4394,"children":4395},{"style":1234},[4396],{"type":400,"value":4397},"  // 所以默认不开启此指令\n",{"type":395,"tag":464,"props":4399,"children":4400},{"class":466,"line":1737},[4401,4405,4410,4414,4418],{"type":395,"tag":464,"props":4402,"children":4403},{"style":501},[4404],{"type":400,"value":1245},{"type":395,"tag":464,"props":4406,"children":4407},{"style":3770},[4408],{"type":400,"value":4409},"upgrade-insecure-requests",{"type":395,"tag":464,"props":4411,"children":4412},{"style":501},[4413],{"type":400,"value":504},{"type":395,"tag":464,"props":4415,"children":4416},{"style":574},[4417],{"type":400,"value":1624},{"type":395,"tag":464,"props":4419,"children":4420},{"style":495},[4421],{"type":400,"value":4422}," []\n",{"type":395,"tag":464,"props":4424,"children":4425},{"class":466,"line":1772},[4426],{"type":395,"tag":464,"props":4427,"children":4428},{"style":574},[4429],{"type":400,"value":1734},{"type":395,"tag":396,"props":4431,"children":4432},{},[4433,4435,4441,4443,4449],{"type":400,"value":4434},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":395,"tag":460,"props":4436,"children":4438},{"className":4437},[],[4439],{"type":400,"value":4440},"CSP 1.0",{"type":400,"value":4442}," 的兼容性，我没有找到最新版本规范（",{"type":395,"tag":460,"props":4444,"children":4446},{"className":4445},[],[4447],{"type":400,"value":4448},"CSP 3.0",{"type":400,"value":4450},"）的兼容性数据 😝。",{"type":395,"tag":396,"props":4452,"children":4453},{},[4454],{"type":395,"tag":1117,"props":4455,"children":4458},{"alt":4456,"src":4457},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":395,"tag":664,"props":4460,"children":4462},{"id":4461},"移除下载文件后的打开按钮",[4463],{"type":400,"value":4464},"移除下载文件后的“打开”按钮",{"type":395,"tag":453,"props":4466,"children":4468},{"code":4467,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('X-Download-Options', 'noopen')\n",[4469],{"type":395,"tag":460,"props":4470,"children":4471},{"__ignoreMap":388},[4472],{"type":395,"tag":464,"props":4473,"children":4474},{"class":466,"line":467},[4475,4479,4483,4487,4491,4495,4500,4504,4508,4512,4517,4521],{"type":395,"tag":464,"props":4476,"children":4477},{"style":495},[4478],{"type":400,"value":684},{"type":395,"tag":464,"props":4480,"children":4481},{"style":574},[4482],{"type":400,"value":577},{"type":395,"tag":464,"props":4484,"children":4485},{"style":489},[4486],{"type":400,"value":767},{"type":395,"tag":464,"props":4488,"children":4489},{"style":495},[4490],{"type":400,"value":498},{"type":395,"tag":464,"props":4492,"children":4493},{"style":501},[4494],{"type":400,"value":504},{"type":395,"tag":464,"props":4496,"children":4497},{"style":507},[4498],{"type":400,"value":4499},"X-Download-Options",{"type":395,"tag":464,"props":4501,"children":4502},{"style":501},[4503],{"type":400,"value":504},{"type":395,"tag":464,"props":4505,"children":4506},{"style":574},[4507],{"type":400,"value":789},{"type":395,"tag":464,"props":4509,"children":4510},{"style":501},[4511],{"type":400,"value":794},{"type":395,"tag":464,"props":4513,"children":4514},{"style":507},[4515],{"type":400,"value":4516},"noopen",{"type":395,"tag":464,"props":4518,"children":4519},{"style":501},[4520],{"type":400,"value":504},{"type":395,"tag":464,"props":4522,"children":4523},{"style":495},[4524],{"type":400,"value":519},{"type":395,"tag":396,"props":4526,"children":4527},{},[4528,4530,4535],{"type":400,"value":4529},"在下载文件时，",{"type":395,"tag":460,"props":4531,"children":4533},{"className":4532},[],[4534],{"type":400,"value":4499},{"type":400,"value":4536}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":395,"tag":664,"props":4538,"children":4540},{"id":4539},"开启-dns-预取",[4541],{"type":400,"value":4542},"开启 DNS 预取",{"type":395,"tag":396,"props":4544,"children":4545},{},[4546,4548,4554],{"type":400,"value":4547},"通过设置 ",{"type":395,"tag":460,"props":4549,"children":4551},{"className":4550},[],[4552],{"type":400,"value":4553},"X-DNS-Prefetch-Control",{"type":400,"value":4555}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":395,"tag":396,"props":4557,"children":4558},{},[4559,4561,4568],{"type":400,"value":4560},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":395,"tag":407,"props":4562,"children":4565},{"href":4563,"rel":4564},"https://github.com/helmetjs/helmet/issues/111",[984],[4566],{"type":400,"value":4567},"Issue",{"type":400,"value":974},{"type":395,"tag":453,"props":4570,"children":4572},{"code":4571,"language":456,"meta":388,"className":457,"style":388},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4573],{"type":395,"tag":460,"props":4574,"children":4575},{"__ignoreMap":388},[4576],{"type":395,"tag":464,"props":4577,"children":4578},{"class":466,"line":467},[4579,4583,4587,4591,4595,4599,4603,4607,4611,4615,4620,4624],{"type":395,"tag":464,"props":4580,"children":4581},{"style":495},[4582],{"type":400,"value":684},{"type":395,"tag":464,"props":4584,"children":4585},{"style":574},[4586],{"type":400,"value":577},{"type":395,"tag":464,"props":4588,"children":4589},{"style":489},[4590],{"type":400,"value":767},{"type":395,"tag":464,"props":4592,"children":4593},{"style":495},[4594],{"type":400,"value":498},{"type":395,"tag":464,"props":4596,"children":4597},{"style":501},[4598],{"type":400,"value":504},{"type":395,"tag":464,"props":4600,"children":4601},{"style":507},[4602],{"type":400,"value":4553},{"type":395,"tag":464,"props":4604,"children":4605},{"style":501},[4606],{"type":400,"value":504},{"type":395,"tag":464,"props":4608,"children":4609},{"style":574},[4610],{"type":400,"value":789},{"type":395,"tag":464,"props":4612,"children":4613},{"style":501},[4614],{"type":400,"value":794},{"type":395,"tag":464,"props":4616,"children":4617},{"style":507},[4618],{"type":400,"value":4619},"on",{"type":395,"tag":464,"props":4621,"children":4622},{"style":501},[4623],{"type":400,"value":504},{"type":395,"tag":464,"props":4625,"children":4626},{"style":495},[4627],{"type":400,"value":519},{"type":395,"tag":633,"props":4629,"children":4631},{"id":4630},"阅读更多",[4632],{"type":400,"value":4630},{"type":395,"tag":396,"props":4634,"children":4635},{},[4636],{"type":400,"value":4637},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":395,"tag":3683,"props":4639,"children":4640},{},[4641],{"type":395,"tag":2948,"props":4642,"children":4643},{},[4644,4646],{"type":400,"value":4645},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":395,"tag":403,"props":4647,"children":4648},{},[4649],{"type":395,"tag":407,"props":4650,"children":4654},{"href":4651,"ariaDescribedBy":4652,"dataFootnoteRef":388,"id":4653},"#user-content-fn-secure-cookie",[411],"user-content-fnref-secure-cookie",[4655],{"type":400,"value":4656},"13",{"type":395,"tag":396,"props":4658,"children":4659},{},[4660,4662,4669,4671,4678],{"type":400,"value":4661},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":395,"tag":407,"props":4663,"children":4666},{"href":4664,"rel":4665},"https://owasp.org/www-project-secure-headers/",[984],[4667],{"type":400,"value":4668},"OWASP Secure Headers Project",{"type":400,"value":4670},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":395,"tag":407,"props":4672,"children":4675},{"href":4673,"rel":4674},"https://infosec.mozilla.org/guidelines/web_security",[984],[4676],{"type":400,"value":4677},"Web Security",{"type":400,"value":4679},"。以下是一些额外的可供探索的页面：",{"type":395,"tag":3683,"props":4681,"children":4682},{},[4683,4693,4703],{"type":395,"tag":2948,"props":4684,"children":4685},{},[4686],{"type":395,"tag":407,"props":4687,"children":4690},{"href":4688,"rel":4689},"https://www.zhihu.com/question/21979782",[984],[4691],{"type":400,"value":4692},"Content Security Policy (CSP) 是什么？",{"type":395,"tag":2948,"props":4694,"children":4695},{},[4696],{"type":395,"tag":407,"props":4697,"children":4700},{"href":4698,"rel":4699},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[984],[4701],{"type":400,"value":4702},"CORS@MDN",{"type":395,"tag":2948,"props":4704,"children":4705},{},[4706],{"type":395,"tag":407,"props":4707,"children":4710},{"href":4708,"rel":4709},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[984],[4711],{"type":400,"value":4712},"OWASP Top 10 2017（RC2）",{"type":395,"tag":4714,"props":4715,"children":4718},"section",{"className":4716,"dataFootnotes":388},[4717],"footnotes",[4719,4726],{"type":395,"tag":633,"props":4720,"children":4723},{"className":4721,"id":411},[4722],"sr-only",[4724],{"type":400,"value":4725},"Footnotes",{"type":395,"tag":2944,"props":4727,"children":4728},{},[4729,4751,4770,4789,4806,4825,4844,4857,4875,4894,4913,4932,4951],{"type":395,"tag":2948,"props":4730,"children":4732},{"id":4731},"user-content-fn-helmet",[4733,4740,4742],{"type":395,"tag":407,"props":4734,"children":4737},{"href":4735,"rel":4736},"https://helmetjs.github.io/",[984],[4738],{"type":400,"value":4739},"HELMET",{"type":400,"value":4741}," ",{"type":395,"tag":407,"props":4743,"children":4748},{"href":4744,"ariaLabel":4745,"className":4746,"dataFootnoteBackref":388},"#user-content-fnref-helmet","Back to reference 1",[4747],"data-footnote-backref",[4749],{"type":400,"value":4750},"↩",{"type":395,"tag":2948,"props":4752,"children":4754},{"id":4753},"user-content-fn-dns-rebinding-1",[4755,4762,4763],{"type":395,"tag":407,"props":4756,"children":4759},{"href":4757,"rel":4758},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[984],[4760],{"type":400,"value":4761},"来自微信外挂的安全风险",{"type":400,"value":4741},{"type":395,"tag":407,"props":4764,"children":4768},{"href":4765,"ariaLabel":4766,"className":4767,"dataFootnoteBackref":388},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4747],[4769],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4771,"children":4773},{"id":4772},"user-content-fn-dns-rebinding-2",[4774,4781,4782],{"type":395,"tag":407,"props":4775,"children":4778},{"href":4776,"rel":4777},"https://github.com/helmetjs/helmet/issues/182",[984],[4779],{"type":400,"value":4780},"GitHub Issue",{"type":400,"value":4741},{"type":395,"tag":407,"props":4783,"children":4787},{"href":4784,"ariaLabel":4785,"className":4786,"dataFootnoteBackref":388},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4747],[4788],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4790,"children":4792},{"id":4791},"user-content-fn-shp",[4793,4798,4799],{"type":395,"tag":407,"props":4794,"children":4796},{"href":4664,"rel":4795},[984],[4797],{"type":400,"value":4668},{"type":400,"value":4741},{"type":395,"tag":407,"props":4800,"children":4804},{"href":4801,"ariaLabel":4802,"className":4803,"dataFootnoteBackref":388},"#user-content-fnref-shp","Back to reference 4",[4747],[4805],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4807,"children":4809},{"id":4808},"user-content-fn-xss-auditor",[4810,4817,4818],{"type":395,"tag":407,"props":4811,"children":4814},{"href":4812,"rel":4813},"https://www.chromestatus.com/feature/5021976655560704",[984],[4815],{"type":400,"value":4816},"XSS Auditor (removed)",{"type":400,"value":4741},{"type":395,"tag":407,"props":4819,"children":4823},{"href":4820,"ariaLabel":4821,"className":4822,"dataFootnoteBackref":388},"#user-content-fnref-xss-auditor","Back to reference 5",[4747],[4824],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4826,"children":4828},{"id":4827},"user-content-fn-delete-xss-auditor",[4829,4836,4837],{"type":395,"tag":407,"props":4830,"children":4833},{"href":4831,"rel":4832},"https://zhuanlan.zhihu.com/p/74288648",[984],[4834],{"type":400,"value":4835},"Google 将删除 Chrome 内置的 XSS 保护",{"type":400,"value":4741},{"type":395,"tag":407,"props":4838,"children":4842},{"href":4839,"ariaLabel":4840,"className":4841,"dataFootnoteBackref":388},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4747],[4843],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4845,"children":4847},{"id":4846},"user-content-fn-referer",[4848,4850],{"type":400,"value":4849},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":395,"tag":407,"props":4851,"children":4855},{"href":4852,"ariaLabel":4853,"className":4854,"dataFootnoteBackref":388},"#user-content-fnref-referer","Back to reference 7",[4747],[4856],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4858,"children":4860},{"id":4859},"user-content-fn-timeend",[4861,4867,4868],{"type":395,"tag":407,"props":4862,"children":4865},{"href":4863,"rel":4864},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[984],[4866],{"type":400,"value":2755},{"type":400,"value":4741},{"type":395,"tag":407,"props":4869,"children":4873},{"href":4870,"ariaLabel":4871,"className":4872,"dataFootnoteBackref":388},"#user-content-fnref-timeend","Back to reference 8",[4747],[4874],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4876,"children":4878},{"id":4877},"user-content-fn-chrome-ct",[4879,4886,4887],{"type":395,"tag":407,"props":4880,"children":4883},{"href":4881,"rel":4882},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[984],[4884],{"type":400,"value":4885},"Chrome 证书透明度（CT）相关政策",{"type":400,"value":4741},{"type":395,"tag":407,"props":4888,"children":4892},{"href":4889,"ariaLabel":4890,"className":4891,"dataFootnoteBackref":388},"#user-content-fnref-chrome-ct","Back to reference 9",[4747],[4893],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4895,"children":4897},{"id":4896},"user-content-fn-ct",[4898,4905,4906],{"type":395,"tag":407,"props":4899,"children":4902},{"href":4900,"rel":4901},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[984],[4903],{"type":400,"value":4904},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":400,"value":4741},{"type":395,"tag":407,"props":4907,"children":4911},{"href":4908,"ariaLabel":4909,"className":4910,"dataFootnoteBackref":388},"#user-content-fnref-ct","Back to reference 10",[4747],[4912],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4914,"children":4916},{"id":4915},"user-content-fn-pdf-reader",[4917,4924,4925],{"type":395,"tag":407,"props":4918,"children":4921},{"href":4919,"rel":4920},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[984],[4922],{"type":400,"value":4923},"Cross Domain Configuration",{"type":400,"value":4741},{"type":395,"tag":407,"props":4926,"children":4930},{"href":4927,"ariaLabel":4928,"className":4929,"dataFootnoteBackref":388},"#user-content-fnref-pdf-reader","Back to reference 11",[4747],[4931],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4933,"children":4935},{"id":4934},"user-content-fn-csp-standard",[4936,4943,4944],{"type":395,"tag":407,"props":4937,"children":4940},{"href":4938,"rel":4939},"https://www.w3.org/TR/CSP/",[984],[4941],{"type":400,"value":4942},"Content Security Policy Level 3",{"type":400,"value":4741},{"type":395,"tag":407,"props":4945,"children":4949},{"href":4946,"ariaLabel":4947,"className":4948,"dataFootnoteBackref":388},"#user-content-fnref-csp-standard","Back to reference 12",[4747],[4950],{"type":400,"value":4750},{"type":395,"tag":2948,"props":4952,"children":4954},{"id":4953},"user-content-fn-secure-cookie",[4955,4962,4963],{"type":395,"tag":407,"props":4956,"children":4959},{"href":4957,"rel":4958},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[984],[4960],{"type":400,"value":4961},"Secure-Cookie",{"type":400,"value":4741},{"type":395,"tag":407,"props":4964,"children":4968},{"href":4965,"ariaLabel":4966,"className":4967,"dataFootnoteBackref":388},"#user-content-fnref-secure-cookie","Back to reference 13",[4747],[4969],{"type":400,"value":4750},{"type":395,"tag":4971,"props":4972,"children":4973},"style",{},[4974],{"type":400,"value":4975},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":388,"searchDepth":522,"depth":522,"links":4977},[4978,4991,4992],{"id":635,"depth":522,"text":638,"children":4979},[4980,4981,4982,4983,4984,4985,4986,4987,4988,4989,4990],{"id":666,"depth":531,"text":669},{"id":741,"depth":531,"text":744},{"id":831,"depth":531,"text":834},{"id":991,"depth":531,"text":991},{"id":1150,"depth":531,"text":1153},{"id":2161,"depth":531,"text":2164},{"id":2799,"depth":531,"text":2799},{"id":2908,"depth":531,"text":2911},{"id":3539,"depth":531,"text":3542},{"id":4461,"depth":531,"text":4464},{"id":4539,"depth":531,"text":4542},{"id":4630,"depth":522,"text":4630},{"id":411,"depth":522,"text":4725},"markdown","content:_archieved:2020-08:helmet-and-security.md","content","_archieved/2020-08/helmet-and-security.md","md",[4999,5003],{"_path":5000,"title":5001,"description":5002},"/_archieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5004,"title":5005,"description":388},"/_archieved/2020-10/noname","无题",1708107572669]