[{"data":1,"prerenderedAt":3053},["ShallowReactive",2],{"navigation":3,"/_archieved/2020-05/type-check":416,"/_archieved/2020-05/type-check-surround":3046},[4,32,86,108,135,141,147,153,399,405,411],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":42,"_path":43},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":45,"_path":46},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":48,"_path":49},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":51,"_path":52},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":54,"_path":55},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":57,"_path":58},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":60,"_path":61},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":63,"_path":64},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":66,"_path":67},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":69,"_path":70},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":72,"_path":73},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":75,"_path":76},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":78,"_path":79},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":81,"_path":82},"🚝 四十二篇系列","/articles/fourty-two",{"title":84,"_path":85},"📝 技术博客归档","/articles/fold",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102,105],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107},"🖨️ any-to-base64","/tools/any-to-base64",{"title":109,"_path":110,"children":111},"吉他剧场 / Music","/music",[112,114,117,120,123,126,129,132],{"title":113,"_path":110},"🎸 FingerStyle！",{"title":115,"_path":116},"🌬️ 等待的风","/music/wind",{"title":118,"_path":119},"💕 约定的海洋","/music/ocean",{"title":121,"_path":122},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":124,"_path":125},"🌏 残酷天使的行动纲领","/music/eva",{"title":127,"_path":128},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":130,"_path":131},"🍷 Wu Wei","/music/wu-wei",{"title":133,"_path":134},"🌅 无题","/music/untitled",{"title":136,"_path":137,"children":138},"画点什么 / Paint","/paint",[139],{"title":140,"_path":137},"🚧 正在施工",{"title":142,"_path":143,"children":144},"读书笔记 / Notes","/books",[145],{"title":146,"_path":143},"📕 读书笔记",{"title":148,"_path":149,"children":150},"知识地图 / Maps","/maps",[151],{"title":152,"_path":149},"🏁 知识地图",{"title":154,"_path":155,"children":156},"零散的笔记 / Gists","/gists",[157,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390,393,396],{"title":158,"_path":155},"🧊 Gists",{"title":160,"_path":161},"网站的可访问性","/gists/accessibility",{"title":163,"_path":164},"Bit","/gists/bit",{"title":166,"_path":167},"图片模糊","/gists/blur",{"title":169,"_path":170},"渲染相关笔记","/gists/c4d",{"title":172,"_path":173},"CDN 问题记录","/gists/cdn",{"title":175,"_path":176},"消毒剂","/gists/cleaner",{"title":178,"_path":179},"Windows Command","/gists/cmd",{"title":181,"_path":182},"Command","/gists/command",{"title":184,"_path":185},"复杂科学","/gists/complexity-science",{"title":187,"_path":188},"GitHub Copilot","/gists/copilot",{"title":190,"_path":191},"宇宙","/gists/cosmos",{"title":193,"_path":194},"C++","/gists/cpp",{"title":196,"_path":197},"Data Structure","/gists/data-structure",{"title":199,"_path":200},"DEPRESSION","/gists/depression",{"title":202,"_path":203},"设计模式","/gists/design-patterns",{"title":205,"_path":206},"Developer Experience","/gists/developer-experience",{"title":208,"_path":209},"Device Metrics","/gists/device-metrix",{"title":211,"_path":212},"数字化转型","/gists/digital-transformation",{"title":214,"_path":215},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":217,"_path":218},"正则表达式","/gists/eegex",{"title":220,"_path":221},"Emoji","/gists/emoji",{"title":223,"_path":224},"工程","/gists/engineering",{"title":226,"_path":227},"熵","/gists/entropy",{"title":229,"_path":230},"Environment","/gists/environment",{"title":232,"_path":233},"Erlang","/gists/erlang",{"title":235,"_path":236},"逃离塔克夫","/gists/escape-from-tarkov",{"title":238,"_path":239},"ESNext (ES6-ES11)","/gists/esnext",{"title":241,"_path":242},"Eval！","/gists/eval",{"title":244,"_path":245},"Flutter","/gists/flutter",{"title":247,"_path":248},"字体","/gists/font",{"title":250,"_path":251},"JS 函数式编程","/gists/functional",{"title":253,"_path":254},"游戏化","/gists/gamification",{"title":256,"_path":257},"Google C++ Standard","/gists/google-cpp-standard",{"title":259,"_path":260},"双向链接完全体","/gists/graph",{"title":262,"_path":263},"Hardwares","/gists/hardwares",{"title":265,"_path":266},"哈希冲突","/gists/hash-collision",{"title":268,"_path":269},"信息设计","/gists/information-design",{"title":271,"_path":272},"InstantPage","/gists/instant.page",{"title":274,"_path":275},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":277,"_path":278},"KVStore","/gists/key-value-db",{"title":280,"_path":281},"Kubernetes","/gists/kubernetes",{"title":283,"_path":284},"Makefile","/gists/makefile",{"title":286,"_path":287},"Markdown Inline Style","/gists/markdown-nice",{"title":289,"_path":290},"小程序","/gists/miniapp",{"title":292,"_path":293},"减小页面快照体积","/gists/minify-html",{"title":295,"_path":296},"mklink","/gists/mklink",{"title":298,"_path":299},"Mock","/gists/mock",{"title":301,"_path":302},"多人协作系统","/gists/multiplayer",{"title":304,"_path":305},"多端应用","/gists/multy-end-app",{"title":307,"_path":308},"神经科学","/gists/neuroscience",{"title":310,"_path":311},"OO","/gists/oo",{"title":313,"_path":314},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":316,"_path":317},"PInvoke","/gists/pinvoke",{"title":319,"_path":320},"像素","/gists/pixel",{"title":322,"_path":323},"PowerShell","/gists/powershell",{"title":325,"_path":326},"量子","/gists/quantum",{"title":328,"_path":329},"保持好奇心","/gists/questions",{"title":331,"_path":332},"React Native","/gists/react-native",{"title":334,"_path":335},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":337,"_path":338},"SEO","/gists/seo",{"title":340,"_path":341},"Shader","/gists/shader",{"title":343,"_path":344},"Shape Up","/gists/shape-up",{"title":346,"_path":347},"睡觉","/gists/sleep",{"title":349,"_path":350},"记录奇怪的问题","/gists/solved",{"title":352,"_path":353},"States","/gists/states",{"title":355,"_path":356},"Storage","/gists/storage",{"title":358,"_path":359},"音视频流处理","/gists/stream-cli",{"title":361,"_path":362},"Symbol","/gists/symbol",{"title":364,"_path":365},"系统论","/gists/systems-theory",{"title":367,"_path":368},"Taro","/gists/taro",{"title":370,"_path":371},"任务切片","/gists/task-slice",{"title":373,"_path":374},"技术偏好","/gists/tech-dudge",{"title":376,"_path":377},"Untitled","/gists/untitled",{"title":379,"_path":380},"可变字体","/gists/variable-font",{"title":382,"_path":383},"视觉错觉","/gists/visual-illusion",{"title":385,"_path":386},"SS(SSR)","/gists/vpn",{"title":388,"_path":389},"VS Code 插件开发","/gists/vscode-plugin",{"title":391,"_path":392},"Web Components","/gists/web-components",{"title":394,"_path":395},"Windows","/gists/windows",{"title":397,"_path":398},"查缺补漏","/gists/wrong",{"title":400,"_path":401,"children":402},"代码笔记 / Gists","/source-code",[403],{"title":404,"_path":401},"🚄 代码笔记",{"title":406,"_path":407,"children":408},"我 / Abount","/hire",[409],{"title":410,"_path":407},"📬 技术简历",{"title":412,"_path":413,"children":414},"todo","/todo",[415],{"title":412,"_path":413},{"_path":417,"_dir":418,"_draft":419,"_partial":420,"_locale":421,"title":422,"description":421,"body":423,"_type":3040,"_id":3041,"_source":3042,"_file":3043,"_stem":3044,"_extension":3045},"/_archieved/2020-05/type-check","2020-05",false,true,"","🎫 常用类型判断方法的优势及缺陷",{"type":424,"children":425,"toc":3023},"root",[426,434,440,460,465,469,474,479,484,553,558,701,706,719,724,738,751,756,762,767,795,800,823,828,832,837,1176,1181,1189,1295,1300,1329,1334,1339,1561,1566,1593,1598,1603,1608,1621,1626,1631,1841,1846,1867,1871,1876,2169,2174,2179,2184,2312,2317,2563,2568,2713,2718,2723,2831,2836,2841,2901,2909,2914,2919,2924,2929,2947,2952,2957,2962,3017],{"type":427,"tag":428,"props":429,"children":431},"element","h2",{"id":430},"常用判断方法",[432],{"type":433,"value":430},"text",{"type":427,"tag":435,"props":436,"children":437},"p",{},[438],{"type":433,"value":439},"类型判断，在 JavaScript 中是一个很经典的问题了。围绕类型判断，有几种常见的解决方法，下是最常用的三种：",{"type":427,"tag":441,"props":442,"children":443},"ul",{},[444,450,455],{"type":427,"tag":445,"props":446,"children":447},"li",{},[448],{"type":433,"value":449},"typeof",{"type":427,"tag":445,"props":451,"children":452},{},[453],{"type":433,"value":454},"instanceof",{"type":427,"tag":445,"props":456,"children":457},{},[458],{"type":433,"value":459},"Object.prototype.toString.call",{"type":427,"tag":435,"props":461,"children":462},{},[463],{"type":433,"value":464},"我将在此文中根据这几种方法在 ECMAScript 规范下的描述及我们开发时的实际情况，聊聊这几种方法的优劣势所在。",{"type":427,"tag":428,"props":466,"children":467},{"id":449},[468],{"type":433,"value":449},{"type":427,"tag":435,"props":470,"children":471},{},[472],{"type":433,"value":473},"当我还是一个 JS 萌新的时候，我就爱上了 typeof 运算符，因为它的作用正如其名，非常好理解。\n利用 typeof 我们可以轻松判断常见的基础类型，如 Number、String、Boolean 等。",{"type":427,"tag":435,"props":475,"children":476},{},[477],{"type":433,"value":478},"ECMAScript 文档中有对 typeof 这样描述：",{"type":427,"tag":435,"props":480,"children":481},{},[482],{"type":433,"value":483},"$\\it{UnaryExpression} \\quad: \\quad \\bf{typeof} \\quad \\it{UnaryExpression}$",{"type":427,"tag":485,"props":486,"children":487},"ol",{},[488,493,528,539,548],{"type":427,"tag":445,"props":489,"children":490},{},[491],{"type":433,"value":492},"Let val be the result of evaluating UnaryExpression.",{"type":427,"tag":445,"props":494,"children":495},{},[496,498,504,506],{"type":433,"value":497},"If ",{"type":427,"tag":499,"props":500,"children":501},"em",{},[502],{"type":433,"value":503},"Type(val)",{"type":433,"value":505}," is Reference, then\n",{"type":427,"tag":441,"props":507,"children":508},{},[509],{"type":427,"tag":445,"props":510,"children":511},{},[512,513,518,520,526],{"type":433,"value":497},{"type":427,"tag":499,"props":514,"children":515},{},[516],{"type":433,"value":517},"IsUnresolvableReference(val)",{"type":433,"value":519}," is true, return ",{"type":427,"tag":521,"props":522,"children":523},"strong",{},[524],{"type":433,"value":525},"\"undefined\"",{"type":433,"value":527},".",{"type":427,"tag":445,"props":529,"children":530},{},[531,533,538],{"type":433,"value":532},"Let val be ",{"type":427,"tag":499,"props":534,"children":535},{},[536],{"type":433,"value":537},"GetValue(val)",{"type":433,"value":527},{"type":427,"tag":445,"props":540,"children":541},{},[542,547],{"type":427,"tag":499,"props":543,"children":544},{},[545],{"type":433,"value":546},"ReturnIfAbrupt(val)",{"type":433,"value":527},{"type":427,"tag":445,"props":549,"children":550},{},[551],{"type":433,"value":552},"Return a String according to Table Below.",{"type":427,"tag":435,"props":554,"children":555},{},[556],{"type":433,"value":557},"简单来说，就是先判断是不是引用未知，是则返回 'undefined'，不然就根据下表找值。",{"type":427,"tag":559,"props":560,"children":561},"table",{},[562,582],{"type":427,"tag":563,"props":564,"children":565},"thead",{},[566],{"type":427,"tag":567,"props":568,"children":569},"tr",{},[570,577],{"type":427,"tag":571,"props":572,"children":574},"th",{"align":573},"center",[575],{"type":433,"value":576},"类型",{"type":427,"tag":571,"props":578,"children":579},{"align":573},[580],{"type":433,"value":581},"返回",{"type":427,"tag":583,"props":584,"children":585},"tbody",{},[586,599,612,625,638,651,663,675,688],{"type":427,"tag":567,"props":587,"children":588},{},[589,595],{"type":427,"tag":590,"props":591,"children":592},"td",{"align":573},[593],{"type":433,"value":594},"Undefined",{"type":427,"tag":590,"props":596,"children":597},{"align":573},[598],{"type":433,"value":525},{"type":427,"tag":567,"props":600,"children":601},{},[602,607],{"type":427,"tag":590,"props":603,"children":604},{"align":573},[605],{"type":433,"value":606},"Null",{"type":427,"tag":590,"props":608,"children":609},{"align":573},[610],{"type":433,"value":611},"\"object\"",{"type":427,"tag":567,"props":613,"children":614},{},[615,620],{"type":427,"tag":590,"props":616,"children":617},{"align":573},[618],{"type":433,"value":619},"Boolean",{"type":427,"tag":590,"props":621,"children":622},{"align":573},[623],{"type":433,"value":624},"\"boolean\"",{"type":427,"tag":567,"props":626,"children":627},{},[628,633],{"type":427,"tag":590,"props":629,"children":630},{"align":573},[631],{"type":433,"value":632},"Number",{"type":427,"tag":590,"props":634,"children":635},{"align":573},[636],{"type":433,"value":637},"\"number\"",{"type":427,"tag":567,"props":639,"children":640},{},[641,646],{"type":427,"tag":590,"props":642,"children":643},{"align":573},[644],{"type":433,"value":645},"String",{"type":427,"tag":590,"props":647,"children":648},{"align":573},[649],{"type":433,"value":650},"\"string\"",{"type":427,"tag":567,"props":652,"children":653},{},[654,659],{"type":427,"tag":590,"props":655,"children":656},{"align":573},[657],{"type":433,"value":658},"Object (ordinary and does not implement [[Call]])",{"type":427,"tag":590,"props":660,"children":661},{"align":573},[662],{"type":433,"value":611},{"type":427,"tag":567,"props":664,"children":665},{},[666,671],{"type":427,"tag":590,"props":667,"children":668},{"align":573},[669],{"type":433,"value":670},"Object (standard exotic and does not implement [[Call]])",{"type":427,"tag":590,"props":672,"children":673},{"align":573},[674],{"type":433,"value":611},{"type":427,"tag":567,"props":676,"children":677},{},[678,683],{"type":427,"tag":590,"props":679,"children":680},{"align":573},[681],{"type":433,"value":682},"Object (implements [[Call]])",{"type":427,"tag":590,"props":684,"children":685},{"align":573},[686],{"type":433,"value":687},"\"function\"",{"type":427,"tag":567,"props":689,"children":690},{},[691,696],{"type":427,"tag":590,"props":692,"children":693},{"align":573},[694],{"type":433,"value":695},"Object (non-standard exotic and does not implement [[Call]])",{"type":427,"tag":590,"props":697,"children":698},{"align":573},[699],{"type":433,"value":700},"Implementation-defined. Must not be \"undefined\", \"boolean\", \"function\", \"number\", \"symbol\", or \"string\".",{"type":427,"tag":435,"props":702,"children":703},{},[704],{"type":433,"value":705},"这里我们详细说说两点：",{"type":427,"tag":485,"props":707,"children":708},{},[709,714],{"type":427,"tag":445,"props":710,"children":711},{},[712],{"type":433,"value":713},"判断内置对象",{"type":427,"tag":445,"props":715,"children":716},{},[717],{"type":433,"value":718},"typeof null === 'object'",{"type":427,"tag":720,"props":721,"children":722},"h3",{"id":713},[723],{"type":433,"value":713},{"type":427,"tag":435,"props":725,"children":726},{},[727,729,736],{"type":433,"value":728},"Function 作为内置对象，为什么 ",{"type":427,"tag":730,"props":731,"children":733},"code",{"className":732},[],[734],{"type":433,"value":735},"typeof (function a(){})",{"type":433,"value":737}," 的值不为“object”呢？",{"type":427,"tag":435,"props":739,"children":740},{},[741,743,749],{"type":433,"value":742},"其实上面那张表有相应线索，倒数第二条，这是一个特殊判定，“如果对象实现了内部方法[[Call]]” 或 “是 ",{"type":427,"tag":730,"props":744,"children":746},{"className":745},[],[747],{"type":433,"value":748},"Callable",{"type":433,"value":750}," 对象”，那么返回值为“function”。",{"type":427,"tag":435,"props":752,"children":753},{},[754],{"type":433,"value":755},"用 typeof 判断对象太麻烦了，一点儿也不实在。一般情况下，我们会用等下介绍的 Object.prototype.toString 去判断内置对象。",{"type":427,"tag":720,"props":757,"children":759},{"id":758},"typeof-null",[760],{"type":433,"value":761},"typeof null",{"type":427,"tag":435,"props":763,"children":764},{},[765],{"type":433,"value":766},"null 是用来标记“期待指向”的，不是 Object 类型，所以 typeof null === 'object' 是一个程序错误。\n这要追溯到第一版 JavaScript。这版 JS 的实现中，值是存储在 32 位单位中，其中端序最小的 3 位，用来表示值的类型，如下：",{"type":427,"tag":441,"props":768,"children":769},{},[770,775,780,785,790],{"type":427,"tag":445,"props":771,"children":772},{},[773],{"type":433,"value":774},"000：Object",{"type":427,"tag":445,"props":776,"children":777},{},[778],{"type":433,"value":779},"001：Int",{"type":427,"tag":445,"props":781,"children":782},{},[783],{"type":433,"value":784},"010：Double",{"type":427,"tag":445,"props":786,"children":787},{},[788],{"type":433,"value":789},"100：String",{"type":427,"tag":445,"props":791,"children":792},{},[793],{"type":433,"value":794},"110：Boolean",{"type":427,"tag":435,"props":796,"children":797},{},[798],{"type":433,"value":799},"此外，还有两种特殊值：",{"type":427,"tag":441,"props":801,"children":802},{},[803,813],{"type":427,"tag":445,"props":804,"children":805},{},[806,811],{"type":427,"tag":521,"props":807,"children":808},{},[809],{"type":433,"value":810},"undefined",{"type":433,"value":812}," (JSVAL_VOID): $-2^{32}$",{"type":427,"tag":445,"props":814,"children":815},{},[816,821],{"type":427,"tag":521,"props":817,"children":818},{},[819],{"type":433,"value":820},"null",{"type":433,"value":822}," (JSVAL_NULL): 用全为 0 的机器码表示的 NULL 指针（或，一个指向 0 的 Object 类型的值）",{"type":427,"tag":435,"props":824,"children":825},{},[826],{"type":433,"value":827},"也就是说，对程序而言，typeof null 判断类型是根据前三位 0 取得的“object”。这是一个历史遗留问题，有人提出过修复方案，但是怕影响历史遗留代码，修复便被否决了。",{"type":427,"tag":428,"props":829,"children":830},{"id":454},[831],{"type":433,"value":454},{"type":427,"tag":435,"props":833,"children":834},{},[835],{"type":433,"value":836},"内置 instanceof 运算符是用来检测构造函数的 prototype 属性是否存在于某个实例对象的原型链。\n用代码解释要更直观一些：",{"type":427,"tag":838,"props":839,"children":843},"pre",{"className":840,"code":841,"language":842,"meta":421,"style":421},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function Car(make, model, year) {\n  this.make = make\n  this.model = model\n  this.year = year\n}\nconst auto = new Car('Honda', 'Accord', 1998)\n\n// true\nconsole.log((auto.__proto__ === Car.prototype) === auto instanceof Car)\n","js",[844],{"type":427,"tag":730,"props":845,"children":846},{"__ignoreMap":421},[847,906,936,962,988,997,1078,1087,1097],{"type":427,"tag":848,"props":849,"children":852},"span",{"class":850,"line":851},"line",1,[853,859,865,871,877,882,887,891,896,901],{"type":427,"tag":848,"props":854,"children":856},{"style":855},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[857],{"type":433,"value":858},"function",{"type":427,"tag":848,"props":860,"children":862},{"style":861},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[863],{"type":433,"value":864}," Car",{"type":427,"tag":848,"props":866,"children":868},{"style":867},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[869],{"type":433,"value":870},"(",{"type":427,"tag":848,"props":872,"children":874},{"style":873},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[875],{"type":433,"value":876},"make",{"type":427,"tag":848,"props":878,"children":879},{"style":867},[880],{"type":433,"value":881},",",{"type":427,"tag":848,"props":883,"children":884},{"style":873},[885],{"type":433,"value":886}," model",{"type":427,"tag":848,"props":888,"children":889},{"style":867},[890],{"type":433,"value":881},{"type":427,"tag":848,"props":892,"children":893},{"style":873},[894],{"type":433,"value":895}," year",{"type":427,"tag":848,"props":897,"children":898},{"style":867},[899],{"type":433,"value":900},")",{"type":427,"tag":848,"props":902,"children":903},{"style":867},[904],{"type":433,"value":905}," {\n",{"type":427,"tag":848,"props":907,"children":909},{"class":850,"line":908},2,[910,916,920,925,931],{"type":427,"tag":848,"props":911,"children":913},{"style":912},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[914],{"type":433,"value":915},"  this",{"type":427,"tag":848,"props":917,"children":918},{"style":867},[919],{"type":433,"value":527},{"type":427,"tag":848,"props":921,"children":923},{"style":922},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[924],{"type":433,"value":876},{"type":427,"tag":848,"props":926,"children":928},{"style":927},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[929],{"type":433,"value":930}," =",{"type":427,"tag":848,"props":932,"children":933},{"style":922},[934],{"type":433,"value":935}," make\n",{"type":427,"tag":848,"props":937,"children":939},{"class":850,"line":938},3,[940,944,948,953,957],{"type":427,"tag":848,"props":941,"children":942},{"style":912},[943],{"type":433,"value":915},{"type":427,"tag":848,"props":945,"children":946},{"style":867},[947],{"type":433,"value":527},{"type":427,"tag":848,"props":949,"children":950},{"style":922},[951],{"type":433,"value":952},"model",{"type":427,"tag":848,"props":954,"children":955},{"style":927},[956],{"type":433,"value":930},{"type":427,"tag":848,"props":958,"children":959},{"style":922},[960],{"type":433,"value":961}," model\n",{"type":427,"tag":848,"props":963,"children":965},{"class":850,"line":964},4,[966,970,974,979,983],{"type":427,"tag":848,"props":967,"children":968},{"style":912},[969],{"type":433,"value":915},{"type":427,"tag":848,"props":971,"children":972},{"style":867},[973],{"type":433,"value":527},{"type":427,"tag":848,"props":975,"children":976},{"style":922},[977],{"type":433,"value":978},"year",{"type":427,"tag":848,"props":980,"children":981},{"style":927},[982],{"type":433,"value":930},{"type":427,"tag":848,"props":984,"children":985},{"style":922},[986],{"type":433,"value":987}," year\n",{"type":427,"tag":848,"props":989,"children":991},{"class":850,"line":990},5,[992],{"type":427,"tag":848,"props":993,"children":994},{"style":867},[995],{"type":433,"value":996},"}\n",{"type":427,"tag":848,"props":998,"children":1000},{"class":850,"line":999},6,[1001,1006,1012,1016,1021,1025,1029,1035,1041,1045,1049,1054,1059,1063,1067,1073],{"type":427,"tag":848,"props":1002,"children":1003},{"style":855},[1004],{"type":433,"value":1005},"const",{"type":427,"tag":848,"props":1007,"children":1009},{"style":1008},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1010],{"type":433,"value":1011}," auto",{"type":427,"tag":848,"props":1013,"children":1014},{"style":927},[1015],{"type":433,"value":930},{"type":427,"tag":848,"props":1017,"children":1018},{"style":927},[1019],{"type":433,"value":1020}," new",{"type":427,"tag":848,"props":1022,"children":1023},{"style":861},[1024],{"type":433,"value":864},{"type":427,"tag":848,"props":1026,"children":1027},{"style":922},[1028],{"type":433,"value":870},{"type":427,"tag":848,"props":1030,"children":1032},{"style":1031},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1033],{"type":433,"value":1034},"'",{"type":427,"tag":848,"props":1036,"children":1038},{"style":1037},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1039],{"type":433,"value":1040},"Honda",{"type":427,"tag":848,"props":1042,"children":1043},{"style":1031},[1044],{"type":433,"value":1034},{"type":427,"tag":848,"props":1046,"children":1047},{"style":867},[1048],{"type":433,"value":881},{"type":427,"tag":848,"props":1050,"children":1051},{"style":1031},[1052],{"type":433,"value":1053}," '",{"type":427,"tag":848,"props":1055,"children":1056},{"style":1037},[1057],{"type":433,"value":1058},"Accord",{"type":427,"tag":848,"props":1060,"children":1061},{"style":1031},[1062],{"type":433,"value":1034},{"type":427,"tag":848,"props":1064,"children":1065},{"style":867},[1066],{"type":433,"value":881},{"type":427,"tag":848,"props":1068,"children":1070},{"style":1069},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1071],{"type":433,"value":1072}," 1998",{"type":427,"tag":848,"props":1074,"children":1075},{"style":922},[1076],{"type":433,"value":1077},")\n",{"type":427,"tag":848,"props":1079,"children":1081},{"class":850,"line":1080},7,[1082],{"type":427,"tag":848,"props":1083,"children":1084},{"emptyLinePlaceholder":420},[1085],{"type":433,"value":1086},"\n",{"type":427,"tag":848,"props":1088,"children":1090},{"class":850,"line":1089},8,[1091],{"type":427,"tag":848,"props":1092,"children":1094},{"style":1093},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1095],{"type":433,"value":1096},"// true\n",{"type":427,"tag":848,"props":1098,"children":1100},{"class":850,"line":1099},9,[1101,1106,1110,1115,1120,1124,1129,1134,1139,1143,1148,1153,1158,1163,1167,1172],{"type":427,"tag":848,"props":1102,"children":1103},{"style":922},[1104],{"type":433,"value":1105},"console",{"type":427,"tag":848,"props":1107,"children":1108},{"style":867},[1109],{"type":433,"value":527},{"type":427,"tag":848,"props":1111,"children":1112},{"style":861},[1113],{"type":433,"value":1114},"log",{"type":427,"tag":848,"props":1116,"children":1117},{"style":922},[1118],{"type":433,"value":1119},"((auto",{"type":427,"tag":848,"props":1121,"children":1122},{"style":867},[1123],{"type":433,"value":527},{"type":427,"tag":848,"props":1125,"children":1126},{"style":1008},[1127],{"type":433,"value":1128},"__proto__",{"type":427,"tag":848,"props":1130,"children":1131},{"style":927},[1132],{"type":433,"value":1133}," ===",{"type":427,"tag":848,"props":1135,"children":1137},{"style":1136},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1138],{"type":433,"value":864},{"type":427,"tag":848,"props":1140,"children":1141},{"style":867},[1142],{"type":433,"value":527},{"type":427,"tag":848,"props":1144,"children":1145},{"style":1008},[1146],{"type":433,"value":1147},"prototype",{"type":427,"tag":848,"props":1149,"children":1150},{"style":922},[1151],{"type":433,"value":1152},") ",{"type":427,"tag":848,"props":1154,"children":1155},{"style":927},[1156],{"type":433,"value":1157},"===",{"type":427,"tag":848,"props":1159,"children":1160},{"style":922},[1161],{"type":433,"value":1162}," auto ",{"type":427,"tag":848,"props":1164,"children":1165},{"style":927},[1166],{"type":433,"value":454},{"type":427,"tag":848,"props":1168,"children":1170},{"style":1169},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[1171],{"type":433,"value":864},{"type":427,"tag":848,"props":1173,"children":1174},{"style":922},[1175],{"type":433,"value":1077},{"type":427,"tag":435,"props":1177,"children":1178},{},[1179],{"type":433,"value":1180},"我们直接看看规范是怎么定义 instanceof 运算符的：",{"type":427,"tag":435,"props":1182,"children":1183},{},[1184],{"type":427,"tag":521,"props":1185,"children":1186},{},[1187],{"type":433,"value":1188},"InstanceofOperator(O, C)",{"type":427,"tag":485,"props":1190,"children":1191},{},[1192,1210,1228,1237,1262,1285],{"type":427,"tag":445,"props":1193,"children":1194},{},[1195,1196,1201,1203,1208],{"type":433,"value":497},{"type":427,"tag":499,"props":1197,"children":1198},{},[1199],{"type":433,"value":1200},"Type(C)",{"type":433,"value":1202}," is not Object, throw a ",{"type":427,"tag":521,"props":1204,"children":1205},{},[1206],{"type":433,"value":1207},"TypeError",{"type":433,"value":1209}," exception.",{"type":427,"tag":445,"props":1211,"children":1212},{},[1213,1215,1220,1222,1227],{"type":433,"value":1214},"Let ",{"type":427,"tag":499,"props":1216,"children":1217},{},[1218],{"type":433,"value":1219},"instOfHandler",{"type":433,"value":1221}," be ",{"type":427,"tag":499,"props":1223,"children":1224},{},[1225],{"type":433,"value":1226},"GetMethod(C,@@hasInstance)",{"type":433,"value":527},{"type":427,"tag":445,"props":1229,"children":1230},{},[1231,1236],{"type":427,"tag":499,"props":1232,"children":1233},{},[1234],{"type":433,"value":1235},"ReturnIfAbrupt(instOfHandler)",{"type":433,"value":527},{"type":427,"tag":445,"props":1238,"children":1239},{},[1240,1242,1246,1248],{"type":433,"value":1241},"If instOfHandler is not ",{"type":427,"tag":521,"props":1243,"children":1244},{},[1245],{"type":433,"value":810},{"type":433,"value":1247},", then\n",{"type":427,"tag":441,"props":1249,"children":1250},{},[1251],{"type":427,"tag":445,"props":1252,"children":1253},{},[1254,1256,1261],{"type":433,"value":1255},"Return ",{"type":427,"tag":499,"props":1257,"children":1258},{},[1259],{"type":433,"value":1260},"ToBoolean(Call(instOfHandler, C, «O»))",{"type":433,"value":527},{"type":427,"tag":445,"props":1263,"children":1264},{},[1265,1266,1271,1273,1278,1280,1284],{"type":433,"value":497},{"type":427,"tag":499,"props":1267,"children":1268},{},[1269],{"type":433,"value":1270},"IsCallable(C)",{"type":433,"value":1272}," is ",{"type":427,"tag":521,"props":1274,"children":1275},{},[1276],{"type":433,"value":1277},"false",{"type":433,"value":1279},", throw a ",{"type":427,"tag":521,"props":1281,"children":1282},{},[1283],{"type":433,"value":1207},{"type":433,"value":1209},{"type":427,"tag":445,"props":1286,"children":1287},{},[1288,1289,1294],{"type":433,"value":1255},{"type":427,"tag":499,"props":1290,"children":1291},{},[1292],{"type":433,"value":1293},"OrdinaryHasInstance(C, O)",{"type":433,"value":527},{"type":427,"tag":435,"props":1296,"children":1297},{},[1298],{"type":433,"value":1299},"第一条，如果 C 的类型不是对象，那么会抛出类型错误，重现如下：",{"type":427,"tag":838,"props":1301,"children":1303},{"className":840,"code":1302,"language":842,"meta":421,"style":421},";[] instanceof 1\n",[1304],{"type":427,"tag":730,"props":1305,"children":1306},{"__ignoreMap":421},[1307],{"type":427,"tag":848,"props":1308,"children":1309},{"class":850,"line":851},[1310,1315,1320,1324],{"type":427,"tag":848,"props":1311,"children":1312},{"style":867},[1313],{"type":433,"value":1314},";",{"type":427,"tag":848,"props":1316,"children":1317},{"style":922},[1318],{"type":433,"value":1319},"[] ",{"type":427,"tag":848,"props":1321,"children":1322},{"style":927},[1323],{"type":433,"value":454},{"type":427,"tag":848,"props":1325,"children":1326},{"style":1069},[1327],{"type":433,"value":1328}," 1\n",{"type":427,"tag":435,"props":1330,"children":1331},{},[1332],{"type":433,"value":1333},"::: danger\nVM1008:1 Uncaught TypeError: Right-hand side of 'instanceof' is not an object\n:::",{"type":427,"tag":435,"props":1335,"children":1336},{},[1337],{"type":433,"value":1338},"第二至第四条，判断 C 是否有内置的 hasInstance 实现，即 Symbol.hasInstance，如果有，则调用此方法。\n也就是说，对复杂类型，我们可以通过 Symbol，自定义 instanceof 运算符的实现，用下列代码举例：",{"type":427,"tag":838,"props":1340,"children":1342},{"className":840,"code":1341,"language":842,"meta":421,"style":421},"class Lionad {\n  static [Symbol.hasInstance](obj) {\n    return obj && obj.isCute\n  }\n}\n\nconsole.log({} instanceof Lionad) // false\nconsole.log({ isCute: true } instanceof Lionad) // true\n",[1343],{"type":427,"tag":730,"props":1344,"children":1345},{"__ignoreMap":421},[1346,1363,1403,1435,1443,1450,1457,1499],{"type":427,"tag":848,"props":1347,"children":1348},{"class":850,"line":851},[1349,1354,1359],{"type":427,"tag":848,"props":1350,"children":1351},{"style":855},[1352],{"type":433,"value":1353},"class",{"type":427,"tag":848,"props":1355,"children":1356},{"style":1169},[1357],{"type":433,"value":1358}," Lionad",{"type":427,"tag":848,"props":1360,"children":1361},{"style":867},[1362],{"type":433,"value":905},{"type":427,"tag":848,"props":1364,"children":1365},{"class":850,"line":908},[1366,1372,1377,1381,1386,1390,1395,1399],{"type":427,"tag":848,"props":1367,"children":1369},{"style":1368},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1370],{"type":433,"value":1371},"  static",{"type":427,"tag":848,"props":1373,"children":1374},{"style":922},[1375],{"type":433,"value":1376}," [Symbol",{"type":427,"tag":848,"props":1378,"children":1379},{"style":867},[1380],{"type":433,"value":527},{"type":427,"tag":848,"props":1382,"children":1383},{"style":922},[1384],{"type":433,"value":1385},"hasInstance]",{"type":427,"tag":848,"props":1387,"children":1388},{"style":867},[1389],{"type":433,"value":870},{"type":427,"tag":848,"props":1391,"children":1392},{"style":873},[1393],{"type":433,"value":1394},"obj",{"type":427,"tag":848,"props":1396,"children":1397},{"style":867},[1398],{"type":433,"value":900},{"type":427,"tag":848,"props":1400,"children":1401},{"style":867},[1402],{"type":433,"value":905},{"type":427,"tag":848,"props":1404,"children":1405},{"class":850,"line":938},[1406,1412,1417,1422,1426,1430],{"type":427,"tag":848,"props":1407,"children":1409},{"style":1408},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1410],{"type":433,"value":1411},"    return",{"type":427,"tag":848,"props":1413,"children":1414},{"style":922},[1415],{"type":433,"value":1416}," obj",{"type":427,"tag":848,"props":1418,"children":1419},{"style":927},[1420],{"type":433,"value":1421}," &&",{"type":427,"tag":848,"props":1423,"children":1424},{"style":922},[1425],{"type":433,"value":1416},{"type":427,"tag":848,"props":1427,"children":1428},{"style":867},[1429],{"type":433,"value":527},{"type":427,"tag":848,"props":1431,"children":1432},{"style":922},[1433],{"type":433,"value":1434},"isCute\n",{"type":427,"tag":848,"props":1436,"children":1437},{"class":850,"line":964},[1438],{"type":427,"tag":848,"props":1439,"children":1440},{"style":867},[1441],{"type":433,"value":1442},"  }\n",{"type":427,"tag":848,"props":1444,"children":1445},{"class":850,"line":990},[1446],{"type":427,"tag":848,"props":1447,"children":1448},{"style":867},[1449],{"type":433,"value":996},{"type":427,"tag":848,"props":1451,"children":1452},{"class":850,"line":999},[1453],{"type":427,"tag":848,"props":1454,"children":1455},{"emptyLinePlaceholder":420},[1456],{"type":433,"value":1086},{"type":427,"tag":848,"props":1458,"children":1459},{"class":850,"line":1080},[1460,1464,1468,1472,1476,1481,1486,1490,1494],{"type":427,"tag":848,"props":1461,"children":1462},{"style":922},[1463],{"type":433,"value":1105},{"type":427,"tag":848,"props":1465,"children":1466},{"style":867},[1467],{"type":433,"value":527},{"type":427,"tag":848,"props":1469,"children":1470},{"style":861},[1471],{"type":433,"value":1114},{"type":427,"tag":848,"props":1473,"children":1474},{"style":922},[1475],{"type":433,"value":870},{"type":427,"tag":848,"props":1477,"children":1478},{"style":867},[1479],{"type":433,"value":1480},"{}",{"type":427,"tag":848,"props":1482,"children":1483},{"style":927},[1484],{"type":433,"value":1485}," instanceof",{"type":427,"tag":848,"props":1487,"children":1488},{"style":1169},[1489],{"type":433,"value":1358},{"type":427,"tag":848,"props":1491,"children":1492},{"style":922},[1493],{"type":433,"value":1152},{"type":427,"tag":848,"props":1495,"children":1496},{"style":1093},[1497],{"type":433,"value":1498},"// false\n",{"type":427,"tag":848,"props":1500,"children":1501},{"class":850,"line":1089},[1502,1506,1510,1514,1518,1523,1529,1534,1540,1545,1549,1553,1557],{"type":427,"tag":848,"props":1503,"children":1504},{"style":922},[1505],{"type":433,"value":1105},{"type":427,"tag":848,"props":1507,"children":1508},{"style":867},[1509],{"type":433,"value":527},{"type":427,"tag":848,"props":1511,"children":1512},{"style":861},[1513],{"type":433,"value":1114},{"type":427,"tag":848,"props":1515,"children":1516},{"style":922},[1517],{"type":433,"value":870},{"type":427,"tag":848,"props":1519,"children":1520},{"style":867},[1521],{"type":433,"value":1522},"{",{"type":427,"tag":848,"props":1524,"children":1526},{"style":1525},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1527],{"type":433,"value":1528}," isCute",{"type":427,"tag":848,"props":1530,"children":1531},{"style":867},[1532],{"type":433,"value":1533},":",{"type":427,"tag":848,"props":1535,"children":1537},{"style":1536},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1538],{"type":433,"value":1539}," true",{"type":427,"tag":848,"props":1541,"children":1542},{"style":867},[1543],{"type":433,"value":1544}," }",{"type":427,"tag":848,"props":1546,"children":1547},{"style":927},[1548],{"type":433,"value":1485},{"type":427,"tag":848,"props":1550,"children":1551},{"style":1169},[1552],{"type":433,"value":1358},{"type":427,"tag":848,"props":1554,"children":1555},{"style":922},[1556],{"type":433,"value":1152},{"type":427,"tag":848,"props":1558,"children":1559},{"style":1093},[1560],{"type":433,"value":1096},{"type":427,"tag":435,"props":1562,"children":1563},{},[1564],{"type":433,"value":1565},"这之后，第五条，如果 C 非 Callable 对象（还记得我们在 typeof 提到的内部方法[[call]]吗，Callable 对象即实现了[[call]]内部方法的对象，比如说某个函数），抛出类型错误，重现如下：",{"type":427,"tag":838,"props":1567,"children":1569},{"className":840,"code":1568,"language":842,"meta":421,"style":421},";[] instanceof []\n",[1570],{"type":427,"tag":730,"props":1571,"children":1572},{"__ignoreMap":421},[1573],{"type":427,"tag":848,"props":1574,"children":1575},{"class":850,"line":851},[1576,1580,1584,1588],{"type":427,"tag":848,"props":1577,"children":1578},{"style":867},[1579],{"type":433,"value":1314},{"type":427,"tag":848,"props":1581,"children":1582},{"style":922},[1583],{"type":433,"value":1319},{"type":427,"tag":848,"props":1585,"children":1586},{"style":927},[1587],{"type":433,"value":454},{"type":427,"tag":848,"props":1589,"children":1590},{"style":922},[1591],{"type":433,"value":1592}," []\n",{"type":427,"tag":435,"props":1594,"children":1595},{},[1596],{"type":433,"value":1597},"::: danger\nVM684:1 Uncaught TypeError: Right-hand side of 'instanceof' is not callable\n:::",{"type":427,"tag":435,"props":1599,"children":1600},{},[1601],{"type":433,"value":1602},"最后，返回调用内置 instanceof 实现的结果。",{"type":427,"tag":435,"props":1604,"children":1605},{},[1606],{"type":433,"value":1607},"不过，需要强调的是，instanceof 也有缺陷存在，主要体现在两个方面：",{"type":427,"tag":485,"props":1609,"children":1610},{},[1611,1616],{"type":427,"tag":445,"props":1612,"children":1613},{},[1614],{"type":433,"value":1615},"判断的依据是原型链",{"type":427,"tag":445,"props":1617,"children":1618},{},[1619],{"type":433,"value":1620},"跨宿主运算",{"type":427,"tag":720,"props":1622,"children":1624},{"id":1623},"依据原型链",[1625],{"type":433,"value":1623},{"type":427,"tag":435,"props":1627,"children":1628},{},[1629],{"type":433,"value":1630},"使用 instanceof 运算符判断对象字面量，会出现另人诧异的结果，见下代码：",{"type":427,"tag":838,"props":1632,"children":1634},{"className":840,"code":1633,"language":842,"meta":421,"style":421},"console.log(\n  'hello world' instanceof String, // false\n  new String('asdf') instanceof String, // true\n  {} instanceof Object, // true\n  [] instanceof Object, // true\n  Object.create(null) instanceof Object // false\n)\n",[1635],{"type":427,"tag":730,"props":1636,"children":1637},{"__ignoreMap":421},[1638,1658,1693,1743,1768,1792,1834],{"type":427,"tag":848,"props":1639,"children":1640},{"class":850,"line":851},[1641,1645,1649,1653],{"type":427,"tag":848,"props":1642,"children":1643},{"style":922},[1644],{"type":433,"value":1105},{"type":427,"tag":848,"props":1646,"children":1647},{"style":867},[1648],{"type":433,"value":527},{"type":427,"tag":848,"props":1650,"children":1651},{"style":861},[1652],{"type":433,"value":1114},{"type":427,"tag":848,"props":1654,"children":1655},{"style":922},[1656],{"type":433,"value":1657},"(\n",{"type":427,"tag":848,"props":1659,"children":1660},{"class":850,"line":908},[1661,1666,1671,1675,1679,1684,1688],{"type":427,"tag":848,"props":1662,"children":1663},{"style":1031},[1664],{"type":433,"value":1665},"  '",{"type":427,"tag":848,"props":1667,"children":1668},{"style":1037},[1669],{"type":433,"value":1670},"hello world",{"type":427,"tag":848,"props":1672,"children":1673},{"style":1031},[1674],{"type":433,"value":1034},{"type":427,"tag":848,"props":1676,"children":1677},{"style":927},[1678],{"type":433,"value":1485},{"type":427,"tag":848,"props":1680,"children":1681},{"style":1169},[1682],{"type":433,"value":1683}," String",{"type":427,"tag":848,"props":1685,"children":1686},{"style":867},[1687],{"type":433,"value":881},{"type":427,"tag":848,"props":1689,"children":1690},{"style":1093},[1691],{"type":433,"value":1692}," // false\n",{"type":427,"tag":848,"props":1694,"children":1695},{"class":850,"line":938},[1696,1701,1705,1709,1713,1718,1722,1726,1730,1734,1738],{"type":427,"tag":848,"props":1697,"children":1698},{"style":927},[1699],{"type":433,"value":1700},"  new",{"type":427,"tag":848,"props":1702,"children":1703},{"style":861},[1704],{"type":433,"value":1683},{"type":427,"tag":848,"props":1706,"children":1707},{"style":922},[1708],{"type":433,"value":870},{"type":427,"tag":848,"props":1710,"children":1711},{"style":1031},[1712],{"type":433,"value":1034},{"type":427,"tag":848,"props":1714,"children":1715},{"style":1037},[1716],{"type":433,"value":1717},"asdf",{"type":427,"tag":848,"props":1719,"children":1720},{"style":1031},[1721],{"type":433,"value":1034},{"type":427,"tag":848,"props":1723,"children":1724},{"style":922},[1725],{"type":433,"value":1152},{"type":427,"tag":848,"props":1727,"children":1728},{"style":927},[1729],{"type":433,"value":454},{"type":427,"tag":848,"props":1731,"children":1732},{"style":1169},[1733],{"type":433,"value":1683},{"type":427,"tag":848,"props":1735,"children":1736},{"style":867},[1737],{"type":433,"value":881},{"type":427,"tag":848,"props":1739,"children":1740},{"style":1093},[1741],{"type":433,"value":1742}," // true\n",{"type":427,"tag":848,"props":1744,"children":1745},{"class":850,"line":964},[1746,1751,1755,1760,1764],{"type":427,"tag":848,"props":1747,"children":1748},{"style":867},[1749],{"type":433,"value":1750},"  {}",{"type":427,"tag":848,"props":1752,"children":1753},{"style":927},[1754],{"type":433,"value":1485},{"type":427,"tag":848,"props":1756,"children":1757},{"style":1169},[1758],{"type":433,"value":1759}," Object",{"type":427,"tag":848,"props":1761,"children":1762},{"style":867},[1763],{"type":433,"value":881},{"type":427,"tag":848,"props":1765,"children":1766},{"style":1093},[1767],{"type":433,"value":1742},{"type":427,"tag":848,"props":1769,"children":1770},{"class":850,"line":990},[1771,1776,1780,1784,1788],{"type":427,"tag":848,"props":1772,"children":1773},{"style":922},[1774],{"type":433,"value":1775},"  [] ",{"type":427,"tag":848,"props":1777,"children":1778},{"style":927},[1779],{"type":433,"value":454},{"type":427,"tag":848,"props":1781,"children":1782},{"style":1169},[1783],{"type":433,"value":1759},{"type":427,"tag":848,"props":1785,"children":1786},{"style":867},[1787],{"type":433,"value":881},{"type":427,"tag":848,"props":1789,"children":1790},{"style":1093},[1791],{"type":433,"value":1742},{"type":427,"tag":848,"props":1793,"children":1794},{"class":850,"line":999},[1795,1800,1804,1809,1813,1818,1822,1826,1830],{"type":427,"tag":848,"props":1796,"children":1797},{"style":922},[1798],{"type":433,"value":1799},"  Object",{"type":427,"tag":848,"props":1801,"children":1802},{"style":867},[1803],{"type":433,"value":527},{"type":427,"tag":848,"props":1805,"children":1806},{"style":861},[1807],{"type":433,"value":1808},"create",{"type":427,"tag":848,"props":1810,"children":1811},{"style":922},[1812],{"type":433,"value":870},{"type":427,"tag":848,"props":1814,"children":1816},{"style":1815},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1817],{"type":433,"value":820},{"type":427,"tag":848,"props":1819,"children":1820},{"style":922},[1821],{"type":433,"value":1152},{"type":427,"tag":848,"props":1823,"children":1824},{"style":927},[1825],{"type":433,"value":454},{"type":427,"tag":848,"props":1827,"children":1828},{"style":1169},[1829],{"type":433,"value":1759},{"type":427,"tag":848,"props":1831,"children":1832},{"style":1093},[1833],{"type":433,"value":1692},{"type":427,"tag":848,"props":1835,"children":1836},{"class":850,"line":1080},[1837],{"type":427,"tag":848,"props":1838,"children":1839},{"style":922},[1840],{"type":433,"value":1077},{"type":427,"tag":435,"props":1842,"children":1843},{},[1844],{"type":433,"value":1845},"题外话，上面几行代码还隐式说明了这些问题：",{"type":427,"tag":441,"props":1847,"children":1848},{},[1849],{"type":427,"tag":445,"props":1850,"children":1851},{},[1852,1854,1859,1861],{"type":433,"value":1853},"对于对象字面量 ",{"type":427,"tag":730,"props":1855,"children":1857},{"className":1856},[],[1858],{"type":433,"value":1480},{"type":433,"value":1860}," 有 ",{"type":427,"tag":730,"props":1862,"children":1864},{"className":1863},[],[1865],{"type":433,"value":1866},"({}).__proto__ === Object.prototype",{"type":427,"tag":720,"props":1868,"children":1869},{"id":1620},[1870],{"type":433,"value":1620},{"type":427,"tag":435,"props":1872,"children":1873},{},[1874],{"type":433,"value":1875},"关于跨宿主运算，可以尝试以下代码重现:",{"type":427,"tag":838,"props":1877,"children":1879},{"className":840,"code":1878,"language":842,"meta":421,"style":421},"const iframe = document.createElement('iframe')\ndocument.body.appendChild(iframe)\nxArray = window.frames[window.frames.length - 1].Array\nconst xArr = new xArray(1, 2, 3)\n\nconsole.log(xArr instanceof xArray) // true\nconsole.log(xArr instanceof Array) // false\n",[1880],{"type":427,"tag":730,"props":1881,"children":1882},{"__ignoreMap":421},[1883,1934,1965,2034,2090,2097,2133],{"type":427,"tag":848,"props":1884,"children":1885},{"class":850,"line":851},[1886,1890,1895,1899,1904,1908,1913,1917,1921,1926,1930],{"type":427,"tag":848,"props":1887,"children":1888},{"style":855},[1889],{"type":433,"value":1005},{"type":427,"tag":848,"props":1891,"children":1892},{"style":1008},[1893],{"type":433,"value":1894}," iframe",{"type":427,"tag":848,"props":1896,"children":1897},{"style":927},[1898],{"type":433,"value":930},{"type":427,"tag":848,"props":1900,"children":1901},{"style":922},[1902],{"type":433,"value":1903}," document",{"type":427,"tag":848,"props":1905,"children":1906},{"style":867},[1907],{"type":433,"value":527},{"type":427,"tag":848,"props":1909,"children":1910},{"style":861},[1911],{"type":433,"value":1912},"createElement",{"type":427,"tag":848,"props":1914,"children":1915},{"style":922},[1916],{"type":433,"value":870},{"type":427,"tag":848,"props":1918,"children":1919},{"style":1031},[1920],{"type":433,"value":1034},{"type":427,"tag":848,"props":1922,"children":1923},{"style":1037},[1924],{"type":433,"value":1925},"iframe",{"type":427,"tag":848,"props":1927,"children":1928},{"style":1031},[1929],{"type":433,"value":1034},{"type":427,"tag":848,"props":1931,"children":1932},{"style":922},[1933],{"type":433,"value":1077},{"type":427,"tag":848,"props":1935,"children":1936},{"class":850,"line":908},[1937,1942,1946,1951,1955,1960],{"type":427,"tag":848,"props":1938,"children":1939},{"style":922},[1940],{"type":433,"value":1941},"document",{"type":427,"tag":848,"props":1943,"children":1944},{"style":867},[1945],{"type":433,"value":527},{"type":427,"tag":848,"props":1947,"children":1948},{"style":922},[1949],{"type":433,"value":1950},"body",{"type":427,"tag":848,"props":1952,"children":1953},{"style":867},[1954],{"type":433,"value":527},{"type":427,"tag":848,"props":1956,"children":1957},{"style":861},[1958],{"type":433,"value":1959},"appendChild",{"type":427,"tag":848,"props":1961,"children":1962},{"style":922},[1963],{"type":433,"value":1964},"(iframe)\n",{"type":427,"tag":848,"props":1966,"children":1967},{"class":850,"line":938},[1968,1973,1978,1983,1987,1992,1996,2001,2005,2010,2015,2020,2025,2029],{"type":427,"tag":848,"props":1969,"children":1970},{"style":922},[1971],{"type":433,"value":1972},"xArray ",{"type":427,"tag":848,"props":1974,"children":1975},{"style":927},[1976],{"type":433,"value":1977},"=",{"type":427,"tag":848,"props":1979,"children":1980},{"style":922},[1981],{"type":433,"value":1982}," window",{"type":427,"tag":848,"props":1984,"children":1985},{"style":867},[1986],{"type":433,"value":527},{"type":427,"tag":848,"props":1988,"children":1989},{"style":922},[1990],{"type":433,"value":1991},"frames[window",{"type":427,"tag":848,"props":1993,"children":1994},{"style":867},[1995],{"type":433,"value":527},{"type":427,"tag":848,"props":1997,"children":1998},{"style":922},[1999],{"type":433,"value":2000},"frames",{"type":427,"tag":848,"props":2002,"children":2003},{"style":867},[2004],{"type":433,"value":527},{"type":427,"tag":848,"props":2006,"children":2007},{"style":1008},[2008],{"type":433,"value":2009},"length",{"type":427,"tag":848,"props":2011,"children":2012},{"style":927},[2013],{"type":433,"value":2014}," -",{"type":427,"tag":848,"props":2016,"children":2017},{"style":1069},[2018],{"type":433,"value":2019}," 1",{"type":427,"tag":848,"props":2021,"children":2022},{"style":922},[2023],{"type":433,"value":2024},"]",{"type":427,"tag":848,"props":2026,"children":2027},{"style":867},[2028],{"type":433,"value":527},{"type":427,"tag":848,"props":2030,"children":2031},{"style":922},[2032],{"type":433,"value":2033},"Array\n",{"type":427,"tag":848,"props":2035,"children":2036},{"class":850,"line":964},[2037,2041,2046,2050,2054,2059,2063,2068,2072,2077,2081,2086],{"type":427,"tag":848,"props":2038,"children":2039},{"style":855},[2040],{"type":433,"value":1005},{"type":427,"tag":848,"props":2042,"children":2043},{"style":1008},[2044],{"type":433,"value":2045}," xArr",{"type":427,"tag":848,"props":2047,"children":2048},{"style":927},[2049],{"type":433,"value":930},{"type":427,"tag":848,"props":2051,"children":2052},{"style":927},[2053],{"type":433,"value":1020},{"type":427,"tag":848,"props":2055,"children":2056},{"style":861},[2057],{"type":433,"value":2058}," xArray",{"type":427,"tag":848,"props":2060,"children":2061},{"style":922},[2062],{"type":433,"value":870},{"type":427,"tag":848,"props":2064,"children":2065},{"style":1069},[2066],{"type":433,"value":2067},"1",{"type":427,"tag":848,"props":2069,"children":2070},{"style":867},[2071],{"type":433,"value":881},{"type":427,"tag":848,"props":2073,"children":2074},{"style":1069},[2075],{"type":433,"value":2076}," 2",{"type":427,"tag":848,"props":2078,"children":2079},{"style":867},[2080],{"type":433,"value":881},{"type":427,"tag":848,"props":2082,"children":2083},{"style":1069},[2084],{"type":433,"value":2085}," 3",{"type":427,"tag":848,"props":2087,"children":2088},{"style":922},[2089],{"type":433,"value":1077},{"type":427,"tag":848,"props":2091,"children":2092},{"class":850,"line":990},[2093],{"type":427,"tag":848,"props":2094,"children":2095},{"emptyLinePlaceholder":420},[2096],{"type":433,"value":1086},{"type":427,"tag":848,"props":2098,"children":2099},{"class":850,"line":999},[2100,2104,2108,2112,2117,2121,2125,2129],{"type":427,"tag":848,"props":2101,"children":2102},{"style":922},[2103],{"type":433,"value":1105},{"type":427,"tag":848,"props":2105,"children":2106},{"style":867},[2107],{"type":433,"value":527},{"type":427,"tag":848,"props":2109,"children":2110},{"style":861},[2111],{"type":433,"value":1114},{"type":427,"tag":848,"props":2113,"children":2114},{"style":922},[2115],{"type":433,"value":2116},"(xArr ",{"type":427,"tag":848,"props":2118,"children":2119},{"style":927},[2120],{"type":433,"value":454},{"type":427,"tag":848,"props":2122,"children":2123},{"style":1169},[2124],{"type":433,"value":2058},{"type":427,"tag":848,"props":2126,"children":2127},{"style":922},[2128],{"type":433,"value":1152},{"type":427,"tag":848,"props":2130,"children":2131},{"style":1093},[2132],{"type":433,"value":1096},{"type":427,"tag":848,"props":2134,"children":2135},{"class":850,"line":1080},[2136,2140,2144,2148,2152,2156,2161,2165],{"type":427,"tag":848,"props":2137,"children":2138},{"style":922},[2139],{"type":433,"value":1105},{"type":427,"tag":848,"props":2141,"children":2142},{"style":867},[2143],{"type":433,"value":527},{"type":427,"tag":848,"props":2145,"children":2146},{"style":861},[2147],{"type":433,"value":1114},{"type":427,"tag":848,"props":2149,"children":2150},{"style":922},[2151],{"type":433,"value":2116},{"type":427,"tag":848,"props":2153,"children":2154},{"style":927},[2155],{"type":433,"value":454},{"type":427,"tag":848,"props":2157,"children":2158},{"style":1169},[2159],{"type":433,"value":2160}," Array",{"type":427,"tag":848,"props":2162,"children":2163},{"style":922},[2164],{"type":433,"value":1152},{"type":427,"tag":848,"props":2166,"children":2167},{"style":1093},[2168],{"type":433,"value":1498},{"type":427,"tag":435,"props":2170,"children":2171},{},[2172],{"type":433,"value":2173},"因为 iframe 中的数组实例不是父窗口的 Array 的实例，所以在 xArr 的原型链上是找不到 Array 的，所以结果为 false。",{"type":427,"tag":428,"props":2175,"children":2177},{"id":2176},"objectprototypetostringcall",[2178],{"type":433,"value":459},{"type":427,"tag":435,"props":2180,"children":2181},{},[2182],{"type":433,"value":2183},"一般来说，在业务代码中，我们使用 typeof 和 instanceof 运算符判断变量的类型就足够了。虽然这两种方法都有缺陷，但是我们记住这些常见的容易混淆的地方，避免使用就可以。\n下面要介绍的是一种更精确的方法，一般会用在工具函数或者类库中，如：",{"type":427,"tag":838,"props":2185,"children":2187},{"className":840,"code":2186,"language":842,"meta":421,"style":421},"function isArray(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\nisArray([]) // true\n",[2188],{"type":427,"tag":730,"props":2189,"children":2190},{"__ignoreMap":421},[2191,2220,2288,2295],{"type":427,"tag":848,"props":2192,"children":2193},{"class":850,"line":851},[2194,2198,2203,2207,2212,2216],{"type":427,"tag":848,"props":2195,"children":2196},{"style":855},[2197],{"type":433,"value":858},{"type":427,"tag":848,"props":2199,"children":2200},{"style":861},[2201],{"type":433,"value":2202}," isArray",{"type":427,"tag":848,"props":2204,"children":2205},{"style":867},[2206],{"type":433,"value":870},{"type":427,"tag":848,"props":2208,"children":2209},{"style":873},[2210],{"type":433,"value":2211},"arr",{"type":427,"tag":848,"props":2213,"children":2214},{"style":867},[2215],{"type":433,"value":900},{"type":427,"tag":848,"props":2217,"children":2218},{"style":867},[2219],{"type":433,"value":905},{"type":427,"tag":848,"props":2221,"children":2222},{"class":850,"line":908},[2223,2228,2232,2236,2240,2244,2249,2253,2258,2262,2266,2270,2274,2278,2283],{"type":427,"tag":848,"props":2224,"children":2225},{"style":1408},[2226],{"type":433,"value":2227},"  return",{"type":427,"tag":848,"props":2229,"children":2230},{"style":1136},[2231],{"type":433,"value":1759},{"type":427,"tag":848,"props":2233,"children":2234},{"style":867},[2235],{"type":433,"value":527},{"type":427,"tag":848,"props":2237,"children":2238},{"style":1008},[2239],{"type":433,"value":1147},{"type":427,"tag":848,"props":2241,"children":2242},{"style":867},[2243],{"type":433,"value":527},{"type":427,"tag":848,"props":2245,"children":2246},{"style":922},[2247],{"type":433,"value":2248},"toString",{"type":427,"tag":848,"props":2250,"children":2251},{"style":867},[2252],{"type":433,"value":527},{"type":427,"tag":848,"props":2254,"children":2255},{"style":861},[2256],{"type":433,"value":2257},"call",{"type":427,"tag":848,"props":2259,"children":2260},{"style":1525},[2261],{"type":433,"value":870},{"type":427,"tag":848,"props":2263,"children":2264},{"style":922},[2265],{"type":433,"value":2211},{"type":427,"tag":848,"props":2267,"children":2268},{"style":1525},[2269],{"type":433,"value":1152},{"type":427,"tag":848,"props":2271,"children":2272},{"style":927},[2273],{"type":433,"value":1157},{"type":427,"tag":848,"props":2275,"children":2276},{"style":1031},[2277],{"type":433,"value":1053},{"type":427,"tag":848,"props":2279,"children":2280},{"style":1037},[2281],{"type":433,"value":2282},"[object Array]",{"type":427,"tag":848,"props":2284,"children":2285},{"style":1031},[2286],{"type":433,"value":2287},"'\n",{"type":427,"tag":848,"props":2289,"children":2290},{"class":850,"line":938},[2291],{"type":427,"tag":848,"props":2292,"children":2293},{"style":867},[2294],{"type":433,"value":996},{"type":427,"tag":848,"props":2296,"children":2297},{"class":850,"line":964},[2298,2303,2308],{"type":427,"tag":848,"props":2299,"children":2300},{"style":861},[2301],{"type":433,"value":2302},"isArray",{"type":427,"tag":848,"props":2304,"children":2305},{"style":922},[2306],{"type":433,"value":2307},"([]) ",{"type":427,"tag":848,"props":2309,"children":2310},{"style":1093},[2311],{"type":433,"value":1096},{"type":427,"tag":435,"props":2313,"children":2314},{},[2315],{"type":433,"value":2316},"那么 Object.prototype.toString 到底能分辨几种类型呢？查阅 ES6 规范文档，可以得到其实现，如下：",{"type":427,"tag":485,"props":2318,"children":2319},{},[2320,2350,2375,2386,2397,2406,2417,2428,2439,2450,2461,2472,2483,2494,2505,2516,2527,2536,2547],{"type":427,"tag":445,"props":2321,"children":2322},{},[2323,2325,2330,2332,2336,2338,2349],{"type":433,"value":2324},"If the ",{"type":427,"tag":521,"props":2326,"children":2327},{},[2328],{"type":433,"value":2329},"this",{"type":433,"value":2331}," value is ",{"type":427,"tag":521,"props":2333,"children":2334},{},[2335],{"type":433,"value":810},{"type":433,"value":2337},", return ",{"type":427,"tag":521,"props":2339,"children":2340},{},[2341,2343,2348],{"type":433,"value":2342},"\"",{"type":427,"tag":848,"props":2344,"children":2345},{},[2346],{"type":433,"value":2347},"object Undefined",{"type":433,"value":2342},{"type":433,"value":527},{"type":427,"tag":445,"props":2351,"children":2352},{},[2353,2354,2358,2359,2363,2364,2374],{"type":433,"value":2324},{"type":427,"tag":521,"props":2355,"children":2356},{},[2357],{"type":433,"value":2329},{"type":433,"value":2331},{"type":427,"tag":521,"props":2360,"children":2361},{},[2362],{"type":433,"value":820},{"type":433,"value":2337},{"type":427,"tag":521,"props":2365,"children":2366},{},[2367,2368,2373],{"type":433,"value":2342},{"type":427,"tag":848,"props":2369,"children":2370},{},[2371],{"type":433,"value":2372},"object Null",{"type":433,"value":2342},{"type":433,"value":527},{"type":427,"tag":445,"props":2376,"children":2377},{},[2378,2380,2385],{"type":433,"value":2379},"Let O be ",{"type":427,"tag":499,"props":2381,"children":2382},{},[2383],{"type":433,"value":2384},"ToObject(this value)",{"type":433,"value":527},{"type":427,"tag":445,"props":2387,"children":2388},{},[2389,2391,2396],{"type":433,"value":2390},"Let isArray be ",{"type":427,"tag":499,"props":2392,"children":2393},{},[2394],{"type":433,"value":2395},"IsArray(O)",{"type":433,"value":527},{"type":427,"tag":445,"props":2398,"children":2399},{},[2400,2405],{"type":427,"tag":499,"props":2401,"children":2402},{},[2403],{"type":433,"value":2404},"ReturnIfAbrupt(isArray)",{"type":433,"value":527},{"type":427,"tag":445,"props":2407,"children":2408},{},[2409,2411,2416],{"type":433,"value":2410},"If isArray is true, let builtinTag be ",{"type":427,"tag":521,"props":2412,"children":2413},{},[2414],{"type":433,"value":2415},"\"Array\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2418,"children":2419},{},[2420,2422,2427],{"type":433,"value":2421},"Else, if O is an exotic String object, let builtinTag be ",{"type":427,"tag":521,"props":2423,"children":2424},{},[2425],{"type":433,"value":2426},"\"String\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2429,"children":2430},{},[2431,2433,2438],{"type":433,"value":2432},"Else, if O has an [[ParameterMap]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2434,"children":2435},{},[2436],{"type":433,"value":2437},"\"Arguments\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2440,"children":2441},{},[2442,2444,2449],{"type":433,"value":2443},"Else, if O has a [[Call]] internal method, let builtinTag be ",{"type":427,"tag":521,"props":2445,"children":2446},{},[2447],{"type":433,"value":2448},"\"Function\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2451,"children":2452},{},[2453,2455,2460],{"type":433,"value":2454},"Else, if O has an [[ErrorData]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2456,"children":2457},{},[2458],{"type":433,"value":2459},"\"Error\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2462,"children":2463},{},[2464,2466,2471],{"type":433,"value":2465},"Else, if O has a [[BooleanData]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2467,"children":2468},{},[2469],{"type":433,"value":2470},"\"Boolean\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2473,"children":2474},{},[2475,2477,2482],{"type":433,"value":2476},"Else, if O has a [[NumberData]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2478,"children":2479},{},[2480],{"type":433,"value":2481},"\"Number\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2484,"children":2485},{},[2486,2488,2493],{"type":433,"value":2487},"Else, if O has a [[DateValue]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2489,"children":2490},{},[2491],{"type":433,"value":2492},"\"Date\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2495,"children":2496},{},[2497,2499,2504],{"type":433,"value":2498},"Else, if O has a [[RegExpMatcher]] internal slot, let builtinTag be ",{"type":427,"tag":521,"props":2500,"children":2501},{},[2502],{"type":433,"value":2503},"\"RegExp\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2506,"children":2507},{},[2508,2510,2515],{"type":433,"value":2509},"Else, let builtinTag be ",{"type":427,"tag":521,"props":2511,"children":2512},{},[2513],{"type":433,"value":2514},"\"Object\"",{"type":433,"value":527},{"type":427,"tag":445,"props":2517,"children":2518},{},[2519,2521,2526],{"type":433,"value":2520},"Let tag be ",{"type":427,"tag":499,"props":2522,"children":2523},{},[2524],{"type":433,"value":2525},"Get(O, @@toStringTag)",{"type":433,"value":527},{"type":427,"tag":445,"props":2528,"children":2529},{},[2530,2535],{"type":427,"tag":499,"props":2531,"children":2532},{},[2533],{"type":433,"value":2534},"ReturnIfAbrupt(tag)",{"type":433,"value":527},{"type":427,"tag":445,"props":2537,"children":2538},{},[2539,2540,2545],{"type":433,"value":497},{"type":427,"tag":499,"props":2541,"children":2542},{},[2543],{"type":433,"value":2544},"Type(tag)",{"type":433,"value":2546}," is not String, let tag be builtinTag.",{"type":427,"tag":445,"props":2548,"children":2549},{},[2550,2552,2562],{"type":433,"value":2551},"Return the String that is the result of concatenating ",{"type":427,"tag":521,"props":2553,"children":2554},{},[2555,2556,2561],{"type":433,"value":2342},{"type":427,"tag":848,"props":2557,"children":2558},{},[2559],{"type":433,"value":2560},"object \"**, tag, and **\"",{"type":433,"value":2342},{"type":433,"value":527},{"type":427,"tag":435,"props":2564,"children":2565},{},[2566],{"type":433,"value":2567},"细数下来，Object.prototype.toString 不仅可以区分 Object、Function、Date、RegExp 等常见对象，它还能区分 Error、Arguments 等，见下代码：",{"type":427,"tag":838,"props":2569,"children":2571},{"className":840,"code":2570,"language":842,"meta":421,"style":421},";(function() {\n  console.log(\n    typeof arguments, // 'object'\n    Object.prototype.toString.call(arguments) // '[object Arguments]'\n  )\n})()\n",[2572],{"type":427,"tag":730,"props":2573,"children":2574},{"__ignoreMap":421},[2575,2599,2619,2642,2692,2700],{"type":427,"tag":848,"props":2576,"children":2577},{"class":850,"line":851},[2578,2582,2586,2590,2595],{"type":427,"tag":848,"props":2579,"children":2580},{"style":867},[2581],{"type":433,"value":1314},{"type":427,"tag":848,"props":2583,"children":2584},{"style":922},[2585],{"type":433,"value":870},{"type":427,"tag":848,"props":2587,"children":2588},{"style":855},[2589],{"type":433,"value":858},{"type":427,"tag":848,"props":2591,"children":2592},{"style":867},[2593],{"type":433,"value":2594},"()",{"type":427,"tag":848,"props":2596,"children":2597},{"style":867},[2598],{"type":433,"value":905},{"type":427,"tag":848,"props":2600,"children":2601},{"class":850,"line":908},[2602,2607,2611,2615],{"type":427,"tag":848,"props":2603,"children":2604},{"style":922},[2605],{"type":433,"value":2606},"  console",{"type":427,"tag":848,"props":2608,"children":2609},{"style":867},[2610],{"type":433,"value":527},{"type":427,"tag":848,"props":2612,"children":2613},{"style":861},[2614],{"type":433,"value":1114},{"type":427,"tag":848,"props":2616,"children":2617},{"style":1525},[2618],{"type":433,"value":1657},{"type":427,"tag":848,"props":2620,"children":2621},{"class":850,"line":938},[2622,2627,2633,2637],{"type":427,"tag":848,"props":2623,"children":2624},{"style":927},[2625],{"type":433,"value":2626},"    typeof",{"type":427,"tag":848,"props":2628,"children":2630},{"style":2629},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2631],{"type":433,"value":2632}," arguments",{"type":427,"tag":848,"props":2634,"children":2635},{"style":867},[2636],{"type":433,"value":881},{"type":427,"tag":848,"props":2638,"children":2639},{"style":1093},[2640],{"type":433,"value":2641}," // 'object'\n",{"type":427,"tag":848,"props":2643,"children":2644},{"class":850,"line":964},[2645,2650,2654,2658,2662,2666,2670,2674,2678,2683,2687],{"type":427,"tag":848,"props":2646,"children":2647},{"style":1136},[2648],{"type":433,"value":2649},"    Object",{"type":427,"tag":848,"props":2651,"children":2652},{"style":867},[2653],{"type":433,"value":527},{"type":427,"tag":848,"props":2655,"children":2656},{"style":1008},[2657],{"type":433,"value":1147},{"type":427,"tag":848,"props":2659,"children":2660},{"style":867},[2661],{"type":433,"value":527},{"type":427,"tag":848,"props":2663,"children":2664},{"style":922},[2665],{"type":433,"value":2248},{"type":427,"tag":848,"props":2667,"children":2668},{"style":867},[2669],{"type":433,"value":527},{"type":427,"tag":848,"props":2671,"children":2672},{"style":861},[2673],{"type":433,"value":2257},{"type":427,"tag":848,"props":2675,"children":2676},{"style":1525},[2677],{"type":433,"value":870},{"type":427,"tag":848,"props":2679,"children":2680},{"style":2629},[2681],{"type":433,"value":2682},"arguments",{"type":427,"tag":848,"props":2684,"children":2685},{"style":1525},[2686],{"type":433,"value":1152},{"type":427,"tag":848,"props":2688,"children":2689},{"style":1093},[2690],{"type":433,"value":2691},"// '[object Arguments]'\n",{"type":427,"tag":848,"props":2693,"children":2694},{"class":850,"line":990},[2695],{"type":427,"tag":848,"props":2696,"children":2697},{"style":1525},[2698],{"type":433,"value":2699},"  )\n",{"type":427,"tag":848,"props":2701,"children":2702},{"class":850,"line":999},[2703,2708],{"type":427,"tag":848,"props":2704,"children":2705},{"style":867},[2706],{"type":433,"value":2707},"}",{"type":427,"tag":848,"props":2709,"children":2710},{"style":922},[2711],{"type":433,"value":2712},")()\n",{"type":427,"tag":720,"props":2714,"children":2716},{"id":2715},"如何扩展",[2717],{"type":433,"value":2715},{"type":427,"tag":435,"props":2719,"children":2720},{},[2721],{"type":433,"value":2722},"可以通过 Symbol.toStringTag 对已有对象的内置标签进行修改。这样就可以不需要通过构造函数的方法来分辨程序中不同种类的新对象。如下代码：",{"type":427,"tag":838,"props":2724,"children":2726},{"className":840,"code":2725,"language":842,"meta":421,"style":421},"var a = {}\na[Symbol.toStringTag] = '1234'\nObject.prototype.toString.call(a)\n// >>> \"[object 1234]\"\n",[2727],{"type":427,"tag":730,"props":2728,"children":2729},{"__ignoreMap":421},[2730,2752,2786,2823],{"type":427,"tag":848,"props":2731,"children":2732},{"class":850,"line":851},[2733,2738,2743,2747],{"type":427,"tag":848,"props":2734,"children":2735},{"style":855},[2736],{"type":433,"value":2737},"var",{"type":427,"tag":848,"props":2739,"children":2740},{"style":922},[2741],{"type":433,"value":2742}," a ",{"type":427,"tag":848,"props":2744,"children":2745},{"style":927},[2746],{"type":433,"value":1977},{"type":427,"tag":848,"props":2748,"children":2749},{"style":867},[2750],{"type":433,"value":2751}," {}\n",{"type":427,"tag":848,"props":2753,"children":2754},{"class":850,"line":908},[2755,2760,2764,2769,2773,2777,2782],{"type":427,"tag":848,"props":2756,"children":2757},{"style":922},[2758],{"type":433,"value":2759},"a[Symbol",{"type":427,"tag":848,"props":2761,"children":2762},{"style":867},[2763],{"type":433,"value":527},{"type":427,"tag":848,"props":2765,"children":2766},{"style":922},[2767],{"type":433,"value":2768},"toStringTag] ",{"type":427,"tag":848,"props":2770,"children":2771},{"style":927},[2772],{"type":433,"value":1977},{"type":427,"tag":848,"props":2774,"children":2775},{"style":1031},[2776],{"type":433,"value":1053},{"type":427,"tag":848,"props":2778,"children":2779},{"style":1037},[2780],{"type":433,"value":2781},"1234",{"type":427,"tag":848,"props":2783,"children":2784},{"style":1031},[2785],{"type":433,"value":2287},{"type":427,"tag":848,"props":2787,"children":2788},{"class":850,"line":938},[2789,2794,2798,2802,2806,2810,2814,2818],{"type":427,"tag":848,"props":2790,"children":2791},{"style":1136},[2792],{"type":433,"value":2793},"Object",{"type":427,"tag":848,"props":2795,"children":2796},{"style":867},[2797],{"type":433,"value":527},{"type":427,"tag":848,"props":2799,"children":2800},{"style":1008},[2801],{"type":433,"value":1147},{"type":427,"tag":848,"props":2803,"children":2804},{"style":867},[2805],{"type":433,"value":527},{"type":427,"tag":848,"props":2807,"children":2808},{"style":922},[2809],{"type":433,"value":2248},{"type":427,"tag":848,"props":2811,"children":2812},{"style":867},[2813],{"type":433,"value":527},{"type":427,"tag":848,"props":2815,"children":2816},{"style":861},[2817],{"type":433,"value":2257},{"type":427,"tag":848,"props":2819,"children":2820},{"style":922},[2821],{"type":433,"value":2822},"(a)\n",{"type":427,"tag":848,"props":2824,"children":2825},{"class":850,"line":964},[2826],{"type":427,"tag":848,"props":2827,"children":2828},{"style":1093},[2829],{"type":433,"value":2830},"// >>> \"[object 1234]\"\n",{"type":427,"tag":720,"props":2832,"children":2834},{"id":2833},"缺陷所在",[2835],{"type":433,"value":2833},{"type":427,"tag":435,"props":2837,"children":2838},{},[2839],{"type":433,"value":2840},"JS 中的对象，按照执行环境来划分可以分为内置对象（Build-In Object）和宿主对象（Host Object），如 Window、History 就是执行环境（浏览器）提供的对象。\n缺陷呢，往往就存在于规范中没有被定义的行为。\n比如，Window 对象的 Symbol.toString 是浏览器定义的行为，而且往往不同浏览器，实现还不一样。",{"type":427,"tag":838,"props":2842,"children":2844},{"className":840,"code":2843,"language":842,"meta":421,"style":421},"Window.toString()\n// [object Window] ?\n// [object Object] ?\n// [object DOMWindow] ?\n// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",[2845],{"type":427,"tag":730,"props":2846,"children":2847},{"__ignoreMap":421},[2848,2869,2877,2885,2893],{"type":427,"tag":848,"props":2849,"children":2850},{"class":850,"line":851},[2851,2856,2860,2864],{"type":427,"tag":848,"props":2852,"children":2853},{"style":922},[2854],{"type":433,"value":2855},"Window",{"type":427,"tag":848,"props":2857,"children":2858},{"style":867},[2859],{"type":433,"value":527},{"type":427,"tag":848,"props":2861,"children":2862},{"style":861},[2863],{"type":433,"value":2248},{"type":427,"tag":848,"props":2865,"children":2866},{"style":922},[2867],{"type":433,"value":2868},"()\n",{"type":427,"tag":848,"props":2870,"children":2871},{"class":850,"line":908},[2872],{"type":427,"tag":848,"props":2873,"children":2874},{"style":1093},[2875],{"type":433,"value":2876},"// [object Window] ?\n",{"type":427,"tag":848,"props":2878,"children":2879},{"class":850,"line":938},[2880],{"type":427,"tag":848,"props":2881,"children":2882},{"style":1093},[2883],{"type":433,"value":2884},"// [object Object] ?\n",{"type":427,"tag":848,"props":2886,"children":2887},{"class":850,"line":964},[2888],{"type":427,"tag":848,"props":2889,"children":2890},{"style":1093},[2891],{"type":433,"value":2892},"// [object DOMWindow] ?\n",{"type":427,"tag":848,"props":2894,"children":2895},{"class":850,"line":990},[2896],{"type":427,"tag":848,"props":2897,"children":2898},{"style":1093},[2899],{"type":433,"value":2900},"// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",{"type":427,"tag":435,"props":2902,"children":2903},{},[2904],{"type":427,"tag":521,"props":2905,"children":2906},{},[2907],{"type":433,"value":2908},"(￣ ▽ ￣)\" 害。",{"type":427,"tag":428,"props":2910,"children":2912},{"id":2911},"最后",[2913],{"type":433,"value":2911},{"type":427,"tag":435,"props":2915,"children":2916},{},[2917],{"type":433,"value":2918},"想不到吧，JS 类型判断这个问题居然没有完美的解法，每种解法都有缺陷。",{"type":427,"tag":435,"props":2920,"children":2921},{},[2922],{"type":433,"value":2923},"那么我们平常写代码到底用哪种呢？",{"type":427,"tag":435,"props":2925,"children":2926},{},[2927],{"type":433,"value":2928},"虽然我刚才提到“业务代码可以使用 typeof 或 instanceof，库和工具函数等需要更精准的情况则用 Object.prototype.toString”，但是，这并不是绝对的。\n我们仔细思考一下这三种方法的本质：",{"type":427,"tag":441,"props":2930,"children":2931},{},[2932,2937,2942],{"type":427,"tag":445,"props":2933,"children":2934},{},[2935],{"type":433,"value":2936},"typeof 根据最小三位字节判断变量类型",{"type":427,"tag":445,"props":2938,"children":2939},{},[2940],{"type":433,"value":2941},"instanceof 根据原型链判断",{"type":427,"tag":445,"props":2943,"children":2944},{},[2945],{"type":433,"value":2946},"Object.prototype.toString 主要是根据对象的内置标签（Build-In Tag）判断",{"type":427,"tag":435,"props":2948,"children":2949},{},[2950],{"type":433,"value":2951},"那么熟记这三条规则，写代码时就能游刃有余了。",{"type":427,"tag":435,"props":2953,"children":2954},{},[2955],{"type":433,"value":2956},"感谢看到结尾，如有错误请务必指正，十分感谢。如果喜欢请点赞、投币、关注三连吧！我是 Lionad，爱你萌！",{"type":427,"tag":428,"props":2958,"children":2960},{"id":2959},"阅读更多",[2961],{"type":433,"value":2959},{"type":427,"tag":441,"props":2963,"children":2964},{},[2965,2977,2987,2997,3007],{"type":427,"tag":445,"props":2966,"children":2967},{},[2968],{"type":427,"tag":2969,"props":2970,"children":2974},"a",{"href":2971,"rel":2972},"https://book.douban.com/subject/27133542/",[2973],"nofollow",[2975],{"type":433,"value":2976},"《JavaScript 框架设计》",{"type":427,"tag":445,"props":2978,"children":2979},{},[2980],{"type":427,"tag":2969,"props":2981,"children":2984},{"href":2982,"rel":2983},"https://justjavac.com/javascript/2012/12/23/what-is-javascripts-typeof-operator-used-for.html",[2973],[2985],{"type":433,"value":2986},"JavaScript 的 typeof 的用途",{"type":427,"tag":445,"props":2988,"children":2989},{},[2990],{"type":427,"tag":2969,"props":2991,"children":2994},{"href":2992,"rel":2993},"https://2ality.com/2013/10/typeof-null.html",[2973],[2995],{"type":433,"value":2996},"The history of “typeof null”",{"type":427,"tag":445,"props":2998,"children":2999},{},[3000],{"type":427,"tag":2969,"props":3001,"children":3004},{"href":3002,"rel":3003},"http://www.ecma-international.org/ecma-262/6.0/#sec-typeof-operator",[2973],[3005],{"type":433,"value":3006},"ECMAScript® 2015 Language Specification",{"type":427,"tag":445,"props":3008,"children":3009},{},[3010],{"type":427,"tag":2969,"props":3011,"children":3014},{"href":3012,"rel":3013},"https://juejin.im/post/5b0b9b9051882515773ae714",[2973],[3015],{"type":433,"value":3016},"instanceof 和 typeof 原理",{"type":427,"tag":3018,"props":3019,"children":3020},"style",{},[3021],{"type":433,"value":3022},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":421,"searchDepth":908,"depth":908,"links":3024},[3025,3026,3030,3034,3038,3039],{"id":430,"depth":908,"text":430},{"id":449,"depth":908,"text":449,"children":3027},[3028,3029],{"id":713,"depth":938,"text":713},{"id":758,"depth":938,"text":761},{"id":454,"depth":908,"text":454,"children":3031},[3032,3033],{"id":1623,"depth":938,"text":1623},{"id":1620,"depth":938,"text":1620},{"id":2176,"depth":908,"text":459,"children":3035},[3036,3037],{"id":2715,"depth":938,"text":2715},{"id":2833,"depth":938,"text":2833},{"id":2911,"depth":908,"text":2911},{"id":2959,"depth":908,"text":2959},"markdown","content:_archieved:2020-05:type-check.md","content","_archieved/2020-05/type-check.md","_archieved/2020-05/type-check","md",[3047,3050],{"_path":3048,"title":3049,"description":421},"/_archieved/2020-05/js-module-history","JS 模块化简史",{"_path":3051,"title":3052,"description":421},"/_archieved/2020-06/punctuations","✒️ 关于标点的那些事儿",1738321911771]