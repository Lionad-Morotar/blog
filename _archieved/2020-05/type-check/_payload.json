[{"data":1,"prerenderedAt":3047},["ShallowReactive",2],{"navigation":3,"/_archieved/2020-05/type-check":410,"/_archieved/2020-05/type-check-surround":3040},[4,32,83,102,129,135,141,147,393,399,405],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96,99],{"title":88,"_path":89},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":91,"_path":92},"🌐 AnySort","/tools/anysort",{"title":94,"_path":95},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":97,"_path":98},"👓 Crapto","/tools/crypto-inline",{"title":100,"_path":101},"🖨️ any-to-base64","/tools/any-to-base64",{"title":103,"_path":104,"children":105},"吉他剧场 / Music","/music",[106,108,111,114,117,120,123,126],{"title":107,"_path":104},"🎸 FingerStyle！",{"title":109,"_path":110},"🌬️ 等待的风","/music/wind",{"title":112,"_path":113},"💕 约定的海洋","/music/ocean",{"title":115,"_path":116},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":118,"_path":119},"🌏 残酷天使的行动纲领","/music/eva",{"title":121,"_path":122},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":124,"_path":125},"🍷 Wu Wei","/music/wu-wei",{"title":127,"_path":128},"🌅 无题","/music/untitled",{"title":130,"_path":131,"children":132},"画点什么 / Paint","/paint",[133],{"title":134,"_path":131},"🚧 正在施工",{"title":136,"_path":137,"children":138},"读书笔记 / Notes","/books",[139],{"title":140,"_path":137},"📕 读书笔记",{"title":142,"_path":143,"children":144},"知识地图 / Maps","/maps",[145],{"title":146,"_path":143},"🏁 知识地图",{"title":148,"_path":149,"children":150},"零散的笔记 / Gists","/gists",[151,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390],{"title":152,"_path":149},"🧊 Gists",{"title":154,"_path":155},"网站的可访问性","/gists/accessibility",{"title":157,"_path":158},"Bit","/gists/bit",{"title":160,"_path":161},"图片模糊","/gists/blur",{"title":163,"_path":164},"渲染相关笔记","/gists/c4d",{"title":166,"_path":167},"CDN 问题记录","/gists/cdn",{"title":169,"_path":170},"消毒剂","/gists/cleaner",{"title":172,"_path":173},"Windows Command","/gists/cmd",{"title":175,"_path":176},"Command","/gists/command",{"title":178,"_path":179},"复杂科学","/gists/complexity-science",{"title":181,"_path":182},"GitHub Copilot","/gists/copilot",{"title":184,"_path":185},"宇宙","/gists/cosmos",{"title":187,"_path":188},"C++","/gists/cpp",{"title":190,"_path":191},"Data Structure","/gists/data-structure",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"设计模式","/gists/design-patterns",{"title":199,"_path":200},"Developer Experience","/gists/developer-experience",{"title":202,"_path":203},"Device Metrics","/gists/device-metrix",{"title":205,"_path":206},"数字化转型","/gists/digital-transformation",{"title":208,"_path":209},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":211,"_path":212},"正则表达式","/gists/eegex",{"title":214,"_path":215},"Emoji","/gists/emoji",{"title":217,"_path":218},"工程","/gists/engineering",{"title":220,"_path":221},"熵","/gists/entropy",{"title":223,"_path":224},"Environment","/gists/environment",{"title":226,"_path":227},"Erlang","/gists/erlang",{"title":229,"_path":230},"逃离塔克夫","/gists/escape-from-tarkov",{"title":232,"_path":233},"ESNext (ES6-ES11)","/gists/esnext",{"title":235,"_path":236},"Eval！","/gists/eval",{"title":238,"_path":239},"Flutter","/gists/flutter",{"title":241,"_path":242},"字体","/gists/font",{"title":244,"_path":245},"JS 函数式编程","/gists/functional",{"title":247,"_path":248},"游戏化","/gists/gamification",{"title":250,"_path":251},"Google C++ Standard","/gists/google-cpp-standard",{"title":253,"_path":254},"双向链接完全体","/gists/graph",{"title":256,"_path":257},"Hardwares","/gists/hardwares",{"title":259,"_path":260},"哈希冲突","/gists/hash-collision",{"title":262,"_path":263},"信息设计","/gists/information-design",{"title":265,"_path":266},"InstantPage","/gists/instant.page",{"title":268,"_path":269},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":271,"_path":272},"KVStore","/gists/key-value-db",{"title":274,"_path":275},"Kubernetes","/gists/kubernetes",{"title":277,"_path":278},"Makefile","/gists/makefile",{"title":280,"_path":281},"Markdown Inline Style","/gists/markdown-nice",{"title":283,"_path":284},"小程序","/gists/miniapp",{"title":286,"_path":287},"减小页面快照体积","/gists/minify-html",{"title":289,"_path":290},"mklink","/gists/mklink",{"title":292,"_path":293},"Mock","/gists/mock",{"title":295,"_path":296},"多人协作系统","/gists/multiplayer",{"title":298,"_path":299},"多端应用","/gists/multy-end-app",{"title":301,"_path":302},"神经科学","/gists/neuroscience",{"title":304,"_path":305},"OO","/gists/oo",{"title":307,"_path":308},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":310,"_path":311},"PInvoke","/gists/pinvoke",{"title":313,"_path":314},"像素","/gists/pixel",{"title":316,"_path":317},"PowerShell","/gists/powershell",{"title":319,"_path":320},"量子","/gists/quantum",{"title":322,"_path":323},"保持好奇心","/gists/questions",{"title":325,"_path":326},"React Native","/gists/react-native",{"title":328,"_path":329},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":331,"_path":332},"SEO","/gists/seo",{"title":334,"_path":335},"Shader","/gists/shader",{"title":337,"_path":338},"Shape Up","/gists/shape-up",{"title":340,"_path":341},"睡觉","/gists/sleep",{"title":343,"_path":344},"记录奇怪的问题","/gists/solved",{"title":346,"_path":347},"States","/gists/states",{"title":349,"_path":350},"Storage","/gists/storage",{"title":352,"_path":353},"音视频流处理","/gists/stream-cli",{"title":355,"_path":356},"Symbol","/gists/symbol",{"title":358,"_path":359},"系统论","/gists/systems-theory",{"title":361,"_path":362},"Taro","/gists/taro",{"title":364,"_path":365},"任务切片","/gists/task-slice",{"title":367,"_path":368},"技术偏好","/gists/tech-dudge",{"title":370,"_path":371},"Untitled","/gists/untitled",{"title":373,"_path":374},"可变字体","/gists/variable-font",{"title":376,"_path":377},"视觉错觉","/gists/visual-illusion",{"title":379,"_path":380},"SS(SSR)","/gists/vpn",{"title":382,"_path":383},"VS Code 插件开发","/gists/vscode-plugin",{"title":385,"_path":386},"Web Components","/gists/web-components",{"title":388,"_path":389},"Windows","/gists/windows",{"title":391,"_path":392},"查缺补漏","/gists/wrong",{"title":394,"_path":395,"children":396},"代码笔记 / Gists","/source-code",[397],{"title":398,"_path":395},"🚄 代码笔记",{"title":400,"_path":401,"children":402},"我 / Abount","/hire",[403],{"title":404,"_path":401},"📬 技术简历",{"title":406,"_path":407,"children":408},"todo","/todo",[409],{"title":406,"_path":407},{"_path":411,"_dir":412,"_draft":413,"_partial":414,"_locale":415,"title":416,"description":415,"body":417,"_type":3034,"_id":3035,"_source":3036,"_file":3037,"_stem":3038,"_extension":3039},"/_archieved/2020-05/type-check","2020-05",false,true,"","🎫 常用类型判断方法的优势及缺陷",{"type":418,"children":419,"toc":3017},"root",[420,428,434,454,459,463,468,473,478,547,552,695,700,713,718,732,745,750,756,761,789,794,817,822,826,831,1170,1175,1183,1289,1294,1323,1328,1333,1555,1560,1587,1592,1597,1602,1615,1620,1625,1835,1840,1861,1865,1870,2163,2168,2173,2178,2306,2311,2557,2562,2707,2712,2717,2825,2830,2835,2895,2903,2908,2913,2918,2923,2941,2946,2951,2956,3011],{"type":421,"tag":422,"props":423,"children":425},"element","h2",{"id":424},"常用判断方法",[426],{"type":427,"value":424},"text",{"type":421,"tag":429,"props":430,"children":431},"p",{},[432],{"type":427,"value":433},"类型判断，在 JavaScript 中是一个很经典的问题了。围绕类型判断，有几种常见的解决方法，下是最常用的三种：",{"type":421,"tag":435,"props":436,"children":437},"ul",{},[438,444,449],{"type":421,"tag":439,"props":440,"children":441},"li",{},[442],{"type":427,"value":443},"typeof",{"type":421,"tag":439,"props":445,"children":446},{},[447],{"type":427,"value":448},"instanceof",{"type":421,"tag":439,"props":450,"children":451},{},[452],{"type":427,"value":453},"Object.prototype.toString.call",{"type":421,"tag":429,"props":455,"children":456},{},[457],{"type":427,"value":458},"我将在此文中根据这几种方法在 ECMAScript 规范下的描述及我们开发时的实际情况，聊聊这几种方法的优劣势所在。",{"type":421,"tag":422,"props":460,"children":461},{"id":443},[462],{"type":427,"value":443},{"type":421,"tag":429,"props":464,"children":465},{},[466],{"type":427,"value":467},"当我还是一个 JS 萌新的时候，我就爱上了 typeof 运算符，因为它的作用正如其名，非常好理解。\n利用 typeof 我们可以轻松判断常见的基础类型，如 Number、String、Boolean 等。",{"type":421,"tag":429,"props":469,"children":470},{},[471],{"type":427,"value":472},"ECMAScript 文档中有对 typeof 这样描述：",{"type":421,"tag":429,"props":474,"children":475},{},[476],{"type":427,"value":477},"$\\it{UnaryExpression} \\quad: \\quad \\bf{typeof} \\quad \\it{UnaryExpression}$",{"type":421,"tag":479,"props":480,"children":481},"ol",{},[482,487,522,533,542],{"type":421,"tag":439,"props":483,"children":484},{},[485],{"type":427,"value":486},"Let val be the result of evaluating UnaryExpression.",{"type":421,"tag":439,"props":488,"children":489},{},[490,492,498,500],{"type":427,"value":491},"If ",{"type":421,"tag":493,"props":494,"children":495},"em",{},[496],{"type":427,"value":497},"Type(val)",{"type":427,"value":499}," is Reference, then\n",{"type":421,"tag":435,"props":501,"children":502},{},[503],{"type":421,"tag":439,"props":504,"children":505},{},[506,507,512,514,520],{"type":427,"value":491},{"type":421,"tag":493,"props":508,"children":509},{},[510],{"type":427,"value":511},"IsUnresolvableReference(val)",{"type":427,"value":513}," is true, return ",{"type":421,"tag":515,"props":516,"children":517},"strong",{},[518],{"type":427,"value":519},"\"undefined\"",{"type":427,"value":521},".",{"type":421,"tag":439,"props":523,"children":524},{},[525,527,532],{"type":427,"value":526},"Let val be ",{"type":421,"tag":493,"props":528,"children":529},{},[530],{"type":427,"value":531},"GetValue(val)",{"type":427,"value":521},{"type":421,"tag":439,"props":534,"children":535},{},[536,541],{"type":421,"tag":493,"props":537,"children":538},{},[539],{"type":427,"value":540},"ReturnIfAbrupt(val)",{"type":427,"value":521},{"type":421,"tag":439,"props":543,"children":544},{},[545],{"type":427,"value":546},"Return a String according to Table Below.",{"type":421,"tag":429,"props":548,"children":549},{},[550],{"type":427,"value":551},"简单来说，就是先判断是不是引用未知，是则返回 'undefined'，不然就根据下表找值。",{"type":421,"tag":553,"props":554,"children":555},"table",{},[556,576],{"type":421,"tag":557,"props":558,"children":559},"thead",{},[560],{"type":421,"tag":561,"props":562,"children":563},"tr",{},[564,571],{"type":421,"tag":565,"props":566,"children":568},"th",{"align":567},"center",[569],{"type":427,"value":570},"类型",{"type":421,"tag":565,"props":572,"children":573},{"align":567},[574],{"type":427,"value":575},"返回",{"type":421,"tag":577,"props":578,"children":579},"tbody",{},[580,593,606,619,632,645,657,669,682],{"type":421,"tag":561,"props":581,"children":582},{},[583,589],{"type":421,"tag":584,"props":585,"children":586},"td",{"align":567},[587],{"type":427,"value":588},"Undefined",{"type":421,"tag":584,"props":590,"children":591},{"align":567},[592],{"type":427,"value":519},{"type":421,"tag":561,"props":594,"children":595},{},[596,601],{"type":421,"tag":584,"props":597,"children":598},{"align":567},[599],{"type":427,"value":600},"Null",{"type":421,"tag":584,"props":602,"children":603},{"align":567},[604],{"type":427,"value":605},"\"object\"",{"type":421,"tag":561,"props":607,"children":608},{},[609,614],{"type":421,"tag":584,"props":610,"children":611},{"align":567},[612],{"type":427,"value":613},"Boolean",{"type":421,"tag":584,"props":615,"children":616},{"align":567},[617],{"type":427,"value":618},"\"boolean\"",{"type":421,"tag":561,"props":620,"children":621},{},[622,627],{"type":421,"tag":584,"props":623,"children":624},{"align":567},[625],{"type":427,"value":626},"Number",{"type":421,"tag":584,"props":628,"children":629},{"align":567},[630],{"type":427,"value":631},"\"number\"",{"type":421,"tag":561,"props":633,"children":634},{},[635,640],{"type":421,"tag":584,"props":636,"children":637},{"align":567},[638],{"type":427,"value":639},"String",{"type":421,"tag":584,"props":641,"children":642},{"align":567},[643],{"type":427,"value":644},"\"string\"",{"type":421,"tag":561,"props":646,"children":647},{},[648,653],{"type":421,"tag":584,"props":649,"children":650},{"align":567},[651],{"type":427,"value":652},"Object (ordinary and does not implement [[Call]])",{"type":421,"tag":584,"props":654,"children":655},{"align":567},[656],{"type":427,"value":605},{"type":421,"tag":561,"props":658,"children":659},{},[660,665],{"type":421,"tag":584,"props":661,"children":662},{"align":567},[663],{"type":427,"value":664},"Object (standard exotic and does not implement [[Call]])",{"type":421,"tag":584,"props":666,"children":667},{"align":567},[668],{"type":427,"value":605},{"type":421,"tag":561,"props":670,"children":671},{},[672,677],{"type":421,"tag":584,"props":673,"children":674},{"align":567},[675],{"type":427,"value":676},"Object (implements [[Call]])",{"type":421,"tag":584,"props":678,"children":679},{"align":567},[680],{"type":427,"value":681},"\"function\"",{"type":421,"tag":561,"props":683,"children":684},{},[685,690],{"type":421,"tag":584,"props":686,"children":687},{"align":567},[688],{"type":427,"value":689},"Object (non-standard exotic and does not implement [[Call]])",{"type":421,"tag":584,"props":691,"children":692},{"align":567},[693],{"type":427,"value":694},"Implementation-defined. Must not be \"undefined\", \"boolean\", \"function\", \"number\", \"symbol\", or \"string\".",{"type":421,"tag":429,"props":696,"children":697},{},[698],{"type":427,"value":699},"这里我们详细说说两点：",{"type":421,"tag":479,"props":701,"children":702},{},[703,708],{"type":421,"tag":439,"props":704,"children":705},{},[706],{"type":427,"value":707},"判断内置对象",{"type":421,"tag":439,"props":709,"children":710},{},[711],{"type":427,"value":712},"typeof null === 'object'",{"type":421,"tag":714,"props":715,"children":716},"h3",{"id":707},[717],{"type":427,"value":707},{"type":421,"tag":429,"props":719,"children":720},{},[721,723,730],{"type":427,"value":722},"Function 作为内置对象，为什么 ",{"type":421,"tag":724,"props":725,"children":727},"code",{"className":726},[],[728],{"type":427,"value":729},"typeof (function a(){})",{"type":427,"value":731}," 的值不为“object”呢？",{"type":421,"tag":429,"props":733,"children":734},{},[735,737,743],{"type":427,"value":736},"其实上面那张表有相应线索，倒数第二条，这是一个特殊判定，“如果对象实现了内部方法[[Call]]” 或 “是 ",{"type":421,"tag":724,"props":738,"children":740},{"className":739},[],[741],{"type":427,"value":742},"Callable",{"type":427,"value":744}," 对象”，那么返回值为“function”。",{"type":421,"tag":429,"props":746,"children":747},{},[748],{"type":427,"value":749},"用 typeof 判断对象太麻烦了，一点儿也不实在。一般情况下，我们会用等下介绍的 Object.prototype.toString 去判断内置对象。",{"type":421,"tag":714,"props":751,"children":753},{"id":752},"typeof-null",[754],{"type":427,"value":755},"typeof null",{"type":421,"tag":429,"props":757,"children":758},{},[759],{"type":427,"value":760},"null 是用来标记“期待指向”的，不是 Object 类型，所以 typeof null === 'object' 是一个程序错误。\n这要追溯到第一版 JavaScript。这版 JS 的实现中，值是存储在 32 位单位中，其中端序最小的 3 位，用来表示值的类型，如下：",{"type":421,"tag":435,"props":762,"children":763},{},[764,769,774,779,784],{"type":421,"tag":439,"props":765,"children":766},{},[767],{"type":427,"value":768},"000：Object",{"type":421,"tag":439,"props":770,"children":771},{},[772],{"type":427,"value":773},"001：Int",{"type":421,"tag":439,"props":775,"children":776},{},[777],{"type":427,"value":778},"010：Double",{"type":421,"tag":439,"props":780,"children":781},{},[782],{"type":427,"value":783},"100：String",{"type":421,"tag":439,"props":785,"children":786},{},[787],{"type":427,"value":788},"110：Boolean",{"type":421,"tag":429,"props":790,"children":791},{},[792],{"type":427,"value":793},"此外，还有两种特殊值：",{"type":421,"tag":435,"props":795,"children":796},{},[797,807],{"type":421,"tag":439,"props":798,"children":799},{},[800,805],{"type":421,"tag":515,"props":801,"children":802},{},[803],{"type":427,"value":804},"undefined",{"type":427,"value":806}," (JSVAL_VOID): $-2^{32}$",{"type":421,"tag":439,"props":808,"children":809},{},[810,815],{"type":421,"tag":515,"props":811,"children":812},{},[813],{"type":427,"value":814},"null",{"type":427,"value":816}," (JSVAL_NULL): 用全为 0 的机器码表示的 NULL 指针（或，一个指向 0 的 Object 类型的值）",{"type":421,"tag":429,"props":818,"children":819},{},[820],{"type":427,"value":821},"也就是说，对程序而言，typeof null 判断类型是根据前三位 0 取得的“object”。这是一个历史遗留问题，有人提出过修复方案，但是怕影响历史遗留代码，修复便被否决了。",{"type":421,"tag":422,"props":823,"children":824},{"id":448},[825],{"type":427,"value":448},{"type":421,"tag":429,"props":827,"children":828},{},[829],{"type":427,"value":830},"内置 instanceof 运算符是用来检测构造函数的 prototype 属性是否存在于某个实例对象的原型链。\n用代码解释要更直观一些：",{"type":421,"tag":832,"props":833,"children":837},"pre",{"className":834,"code":835,"language":836,"meta":415,"style":415},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function Car(make, model, year) {\n  this.make = make\n  this.model = model\n  this.year = year\n}\nconst auto = new Car('Honda', 'Accord', 1998)\n\n// true\nconsole.log((auto.__proto__ === Car.prototype) === auto instanceof Car)\n","js",[838],{"type":421,"tag":724,"props":839,"children":840},{"__ignoreMap":415},[841,900,930,956,982,991,1072,1081,1091],{"type":421,"tag":842,"props":843,"children":846},"span",{"class":844,"line":845},"line",1,[847,853,859,865,871,876,881,885,890,895],{"type":421,"tag":842,"props":848,"children":850},{"style":849},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[851],{"type":427,"value":852},"function",{"type":421,"tag":842,"props":854,"children":856},{"style":855},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[857],{"type":427,"value":858}," Car",{"type":421,"tag":842,"props":860,"children":862},{"style":861},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[863],{"type":427,"value":864},"(",{"type":421,"tag":842,"props":866,"children":868},{"style":867},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[869],{"type":427,"value":870},"make",{"type":421,"tag":842,"props":872,"children":873},{"style":861},[874],{"type":427,"value":875},",",{"type":421,"tag":842,"props":877,"children":878},{"style":867},[879],{"type":427,"value":880}," model",{"type":421,"tag":842,"props":882,"children":883},{"style":861},[884],{"type":427,"value":875},{"type":421,"tag":842,"props":886,"children":887},{"style":867},[888],{"type":427,"value":889}," year",{"type":421,"tag":842,"props":891,"children":892},{"style":861},[893],{"type":427,"value":894},")",{"type":421,"tag":842,"props":896,"children":897},{"style":861},[898],{"type":427,"value":899}," {\n",{"type":421,"tag":842,"props":901,"children":903},{"class":844,"line":902},2,[904,910,914,919,925],{"type":421,"tag":842,"props":905,"children":907},{"style":906},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[908],{"type":427,"value":909},"  this",{"type":421,"tag":842,"props":911,"children":912},{"style":861},[913],{"type":427,"value":521},{"type":421,"tag":842,"props":915,"children":917},{"style":916},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[918],{"type":427,"value":870},{"type":421,"tag":842,"props":920,"children":922},{"style":921},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[923],{"type":427,"value":924}," =",{"type":421,"tag":842,"props":926,"children":927},{"style":916},[928],{"type":427,"value":929}," make\n",{"type":421,"tag":842,"props":931,"children":933},{"class":844,"line":932},3,[934,938,942,947,951],{"type":421,"tag":842,"props":935,"children":936},{"style":906},[937],{"type":427,"value":909},{"type":421,"tag":842,"props":939,"children":940},{"style":861},[941],{"type":427,"value":521},{"type":421,"tag":842,"props":943,"children":944},{"style":916},[945],{"type":427,"value":946},"model",{"type":421,"tag":842,"props":948,"children":949},{"style":921},[950],{"type":427,"value":924},{"type":421,"tag":842,"props":952,"children":953},{"style":916},[954],{"type":427,"value":955}," model\n",{"type":421,"tag":842,"props":957,"children":959},{"class":844,"line":958},4,[960,964,968,973,977],{"type":421,"tag":842,"props":961,"children":962},{"style":906},[963],{"type":427,"value":909},{"type":421,"tag":842,"props":965,"children":966},{"style":861},[967],{"type":427,"value":521},{"type":421,"tag":842,"props":969,"children":970},{"style":916},[971],{"type":427,"value":972},"year",{"type":421,"tag":842,"props":974,"children":975},{"style":921},[976],{"type":427,"value":924},{"type":421,"tag":842,"props":978,"children":979},{"style":916},[980],{"type":427,"value":981}," year\n",{"type":421,"tag":842,"props":983,"children":985},{"class":844,"line":984},5,[986],{"type":421,"tag":842,"props":987,"children":988},{"style":861},[989],{"type":427,"value":990},"}\n",{"type":421,"tag":842,"props":992,"children":994},{"class":844,"line":993},6,[995,1000,1006,1010,1015,1019,1023,1029,1035,1039,1043,1048,1053,1057,1061,1067],{"type":421,"tag":842,"props":996,"children":997},{"style":849},[998],{"type":427,"value":999},"const",{"type":421,"tag":842,"props":1001,"children":1003},{"style":1002},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1004],{"type":427,"value":1005}," auto",{"type":421,"tag":842,"props":1007,"children":1008},{"style":921},[1009],{"type":427,"value":924},{"type":421,"tag":842,"props":1011,"children":1012},{"style":921},[1013],{"type":427,"value":1014}," new",{"type":421,"tag":842,"props":1016,"children":1017},{"style":855},[1018],{"type":427,"value":858},{"type":421,"tag":842,"props":1020,"children":1021},{"style":916},[1022],{"type":427,"value":864},{"type":421,"tag":842,"props":1024,"children":1026},{"style":1025},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1027],{"type":427,"value":1028},"'",{"type":421,"tag":842,"props":1030,"children":1032},{"style":1031},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1033],{"type":427,"value":1034},"Honda",{"type":421,"tag":842,"props":1036,"children":1037},{"style":1025},[1038],{"type":427,"value":1028},{"type":421,"tag":842,"props":1040,"children":1041},{"style":861},[1042],{"type":427,"value":875},{"type":421,"tag":842,"props":1044,"children":1045},{"style":1025},[1046],{"type":427,"value":1047}," '",{"type":421,"tag":842,"props":1049,"children":1050},{"style":1031},[1051],{"type":427,"value":1052},"Accord",{"type":421,"tag":842,"props":1054,"children":1055},{"style":1025},[1056],{"type":427,"value":1028},{"type":421,"tag":842,"props":1058,"children":1059},{"style":861},[1060],{"type":427,"value":875},{"type":421,"tag":842,"props":1062,"children":1064},{"style":1063},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1065],{"type":427,"value":1066}," 1998",{"type":421,"tag":842,"props":1068,"children":1069},{"style":916},[1070],{"type":427,"value":1071},")\n",{"type":421,"tag":842,"props":1073,"children":1075},{"class":844,"line":1074},7,[1076],{"type":421,"tag":842,"props":1077,"children":1078},{"emptyLinePlaceholder":414},[1079],{"type":427,"value":1080},"\n",{"type":421,"tag":842,"props":1082,"children":1084},{"class":844,"line":1083},8,[1085],{"type":421,"tag":842,"props":1086,"children":1088},{"style":1087},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1089],{"type":427,"value":1090},"// true\n",{"type":421,"tag":842,"props":1092,"children":1094},{"class":844,"line":1093},9,[1095,1100,1104,1109,1114,1118,1123,1128,1133,1137,1142,1147,1152,1157,1161,1166],{"type":421,"tag":842,"props":1096,"children":1097},{"style":916},[1098],{"type":427,"value":1099},"console",{"type":421,"tag":842,"props":1101,"children":1102},{"style":861},[1103],{"type":427,"value":521},{"type":421,"tag":842,"props":1105,"children":1106},{"style":855},[1107],{"type":427,"value":1108},"log",{"type":421,"tag":842,"props":1110,"children":1111},{"style":916},[1112],{"type":427,"value":1113},"((auto",{"type":421,"tag":842,"props":1115,"children":1116},{"style":861},[1117],{"type":427,"value":521},{"type":421,"tag":842,"props":1119,"children":1120},{"style":1002},[1121],{"type":427,"value":1122},"__proto__",{"type":421,"tag":842,"props":1124,"children":1125},{"style":921},[1126],{"type":427,"value":1127}," ===",{"type":421,"tag":842,"props":1129,"children":1131},{"style":1130},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1132],{"type":427,"value":858},{"type":421,"tag":842,"props":1134,"children":1135},{"style":861},[1136],{"type":427,"value":521},{"type":421,"tag":842,"props":1138,"children":1139},{"style":1002},[1140],{"type":427,"value":1141},"prototype",{"type":421,"tag":842,"props":1143,"children":1144},{"style":916},[1145],{"type":427,"value":1146},") ",{"type":421,"tag":842,"props":1148,"children":1149},{"style":921},[1150],{"type":427,"value":1151},"===",{"type":421,"tag":842,"props":1153,"children":1154},{"style":916},[1155],{"type":427,"value":1156}," auto ",{"type":421,"tag":842,"props":1158,"children":1159},{"style":921},[1160],{"type":427,"value":448},{"type":421,"tag":842,"props":1162,"children":1164},{"style":1163},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[1165],{"type":427,"value":858},{"type":421,"tag":842,"props":1167,"children":1168},{"style":916},[1169],{"type":427,"value":1071},{"type":421,"tag":429,"props":1171,"children":1172},{},[1173],{"type":427,"value":1174},"我们直接看看规范是怎么定义 instanceof 运算符的：",{"type":421,"tag":429,"props":1176,"children":1177},{},[1178],{"type":421,"tag":515,"props":1179,"children":1180},{},[1181],{"type":427,"value":1182},"InstanceofOperator(O, C)",{"type":421,"tag":479,"props":1184,"children":1185},{},[1186,1204,1222,1231,1256,1279],{"type":421,"tag":439,"props":1187,"children":1188},{},[1189,1190,1195,1197,1202],{"type":427,"value":491},{"type":421,"tag":493,"props":1191,"children":1192},{},[1193],{"type":427,"value":1194},"Type(C)",{"type":427,"value":1196}," is not Object, throw a ",{"type":421,"tag":515,"props":1198,"children":1199},{},[1200],{"type":427,"value":1201},"TypeError",{"type":427,"value":1203}," exception.",{"type":421,"tag":439,"props":1205,"children":1206},{},[1207,1209,1214,1216,1221],{"type":427,"value":1208},"Let ",{"type":421,"tag":493,"props":1210,"children":1211},{},[1212],{"type":427,"value":1213},"instOfHandler",{"type":427,"value":1215}," be ",{"type":421,"tag":493,"props":1217,"children":1218},{},[1219],{"type":427,"value":1220},"GetMethod(C,@@hasInstance)",{"type":427,"value":521},{"type":421,"tag":439,"props":1223,"children":1224},{},[1225,1230],{"type":421,"tag":493,"props":1226,"children":1227},{},[1228],{"type":427,"value":1229},"ReturnIfAbrupt(instOfHandler)",{"type":427,"value":521},{"type":421,"tag":439,"props":1232,"children":1233},{},[1234,1236,1240,1242],{"type":427,"value":1235},"If instOfHandler is not ",{"type":421,"tag":515,"props":1237,"children":1238},{},[1239],{"type":427,"value":804},{"type":427,"value":1241},", then\n",{"type":421,"tag":435,"props":1243,"children":1244},{},[1245],{"type":421,"tag":439,"props":1246,"children":1247},{},[1248,1250,1255],{"type":427,"value":1249},"Return ",{"type":421,"tag":493,"props":1251,"children":1252},{},[1253],{"type":427,"value":1254},"ToBoolean(Call(instOfHandler, C, «O»))",{"type":427,"value":521},{"type":421,"tag":439,"props":1257,"children":1258},{},[1259,1260,1265,1267,1272,1274,1278],{"type":427,"value":491},{"type":421,"tag":493,"props":1261,"children":1262},{},[1263],{"type":427,"value":1264},"IsCallable(C)",{"type":427,"value":1266}," is ",{"type":421,"tag":515,"props":1268,"children":1269},{},[1270],{"type":427,"value":1271},"false",{"type":427,"value":1273},", throw a ",{"type":421,"tag":515,"props":1275,"children":1276},{},[1277],{"type":427,"value":1201},{"type":427,"value":1203},{"type":421,"tag":439,"props":1280,"children":1281},{},[1282,1283,1288],{"type":427,"value":1249},{"type":421,"tag":493,"props":1284,"children":1285},{},[1286],{"type":427,"value":1287},"OrdinaryHasInstance(C, O)",{"type":427,"value":521},{"type":421,"tag":429,"props":1290,"children":1291},{},[1292],{"type":427,"value":1293},"第一条，如果 C 的类型不是对象，那么会抛出类型错误，重现如下：",{"type":421,"tag":832,"props":1295,"children":1297},{"className":834,"code":1296,"language":836,"meta":415,"style":415},";[] instanceof 1\n",[1298],{"type":421,"tag":724,"props":1299,"children":1300},{"__ignoreMap":415},[1301],{"type":421,"tag":842,"props":1302,"children":1303},{"class":844,"line":845},[1304,1309,1314,1318],{"type":421,"tag":842,"props":1305,"children":1306},{"style":861},[1307],{"type":427,"value":1308},";",{"type":421,"tag":842,"props":1310,"children":1311},{"style":916},[1312],{"type":427,"value":1313},"[] ",{"type":421,"tag":842,"props":1315,"children":1316},{"style":921},[1317],{"type":427,"value":448},{"type":421,"tag":842,"props":1319,"children":1320},{"style":1063},[1321],{"type":427,"value":1322}," 1\n",{"type":421,"tag":429,"props":1324,"children":1325},{},[1326],{"type":427,"value":1327},"::: danger\nVM1008:1 Uncaught TypeError: Right-hand side of 'instanceof' is not an object\n:::",{"type":421,"tag":429,"props":1329,"children":1330},{},[1331],{"type":427,"value":1332},"第二至第四条，判断 C 是否有内置的 hasInstance 实现，即 Symbol.hasInstance，如果有，则调用此方法。\n也就是说，对复杂类型，我们可以通过 Symbol，自定义 instanceof 运算符的实现，用下列代码举例：",{"type":421,"tag":832,"props":1334,"children":1336},{"className":834,"code":1335,"language":836,"meta":415,"style":415},"class Lionad {\n  static [Symbol.hasInstance](obj) {\n    return obj && obj.isCute\n  }\n}\n\nconsole.log({} instanceof Lionad) // false\nconsole.log({ isCute: true } instanceof Lionad) // true\n",[1337],{"type":421,"tag":724,"props":1338,"children":1339},{"__ignoreMap":415},[1340,1357,1397,1429,1437,1444,1451,1493],{"type":421,"tag":842,"props":1341,"children":1342},{"class":844,"line":845},[1343,1348,1353],{"type":421,"tag":842,"props":1344,"children":1345},{"style":849},[1346],{"type":427,"value":1347},"class",{"type":421,"tag":842,"props":1349,"children":1350},{"style":1163},[1351],{"type":427,"value":1352}," Lionad",{"type":421,"tag":842,"props":1354,"children":1355},{"style":861},[1356],{"type":427,"value":899},{"type":421,"tag":842,"props":1358,"children":1359},{"class":844,"line":902},[1360,1366,1371,1375,1380,1384,1389,1393],{"type":421,"tag":842,"props":1361,"children":1363},{"style":1362},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1364],{"type":427,"value":1365},"  static",{"type":421,"tag":842,"props":1367,"children":1368},{"style":916},[1369],{"type":427,"value":1370}," [Symbol",{"type":421,"tag":842,"props":1372,"children":1373},{"style":861},[1374],{"type":427,"value":521},{"type":421,"tag":842,"props":1376,"children":1377},{"style":916},[1378],{"type":427,"value":1379},"hasInstance]",{"type":421,"tag":842,"props":1381,"children":1382},{"style":861},[1383],{"type":427,"value":864},{"type":421,"tag":842,"props":1385,"children":1386},{"style":867},[1387],{"type":427,"value":1388},"obj",{"type":421,"tag":842,"props":1390,"children":1391},{"style":861},[1392],{"type":427,"value":894},{"type":421,"tag":842,"props":1394,"children":1395},{"style":861},[1396],{"type":427,"value":899},{"type":421,"tag":842,"props":1398,"children":1399},{"class":844,"line":932},[1400,1406,1411,1416,1420,1424],{"type":421,"tag":842,"props":1401,"children":1403},{"style":1402},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1404],{"type":427,"value":1405},"    return",{"type":421,"tag":842,"props":1407,"children":1408},{"style":916},[1409],{"type":427,"value":1410}," obj",{"type":421,"tag":842,"props":1412,"children":1413},{"style":921},[1414],{"type":427,"value":1415}," &&",{"type":421,"tag":842,"props":1417,"children":1418},{"style":916},[1419],{"type":427,"value":1410},{"type":421,"tag":842,"props":1421,"children":1422},{"style":861},[1423],{"type":427,"value":521},{"type":421,"tag":842,"props":1425,"children":1426},{"style":916},[1427],{"type":427,"value":1428},"isCute\n",{"type":421,"tag":842,"props":1430,"children":1431},{"class":844,"line":958},[1432],{"type":421,"tag":842,"props":1433,"children":1434},{"style":861},[1435],{"type":427,"value":1436},"  }\n",{"type":421,"tag":842,"props":1438,"children":1439},{"class":844,"line":984},[1440],{"type":421,"tag":842,"props":1441,"children":1442},{"style":861},[1443],{"type":427,"value":990},{"type":421,"tag":842,"props":1445,"children":1446},{"class":844,"line":993},[1447],{"type":421,"tag":842,"props":1448,"children":1449},{"emptyLinePlaceholder":414},[1450],{"type":427,"value":1080},{"type":421,"tag":842,"props":1452,"children":1453},{"class":844,"line":1074},[1454,1458,1462,1466,1470,1475,1480,1484,1488],{"type":421,"tag":842,"props":1455,"children":1456},{"style":916},[1457],{"type":427,"value":1099},{"type":421,"tag":842,"props":1459,"children":1460},{"style":861},[1461],{"type":427,"value":521},{"type":421,"tag":842,"props":1463,"children":1464},{"style":855},[1465],{"type":427,"value":1108},{"type":421,"tag":842,"props":1467,"children":1468},{"style":916},[1469],{"type":427,"value":864},{"type":421,"tag":842,"props":1471,"children":1472},{"style":861},[1473],{"type":427,"value":1474},"{}",{"type":421,"tag":842,"props":1476,"children":1477},{"style":921},[1478],{"type":427,"value":1479}," instanceof",{"type":421,"tag":842,"props":1481,"children":1482},{"style":1163},[1483],{"type":427,"value":1352},{"type":421,"tag":842,"props":1485,"children":1486},{"style":916},[1487],{"type":427,"value":1146},{"type":421,"tag":842,"props":1489,"children":1490},{"style":1087},[1491],{"type":427,"value":1492},"// false\n",{"type":421,"tag":842,"props":1494,"children":1495},{"class":844,"line":1083},[1496,1500,1504,1508,1512,1517,1523,1528,1534,1539,1543,1547,1551],{"type":421,"tag":842,"props":1497,"children":1498},{"style":916},[1499],{"type":427,"value":1099},{"type":421,"tag":842,"props":1501,"children":1502},{"style":861},[1503],{"type":427,"value":521},{"type":421,"tag":842,"props":1505,"children":1506},{"style":855},[1507],{"type":427,"value":1108},{"type":421,"tag":842,"props":1509,"children":1510},{"style":916},[1511],{"type":427,"value":864},{"type":421,"tag":842,"props":1513,"children":1514},{"style":861},[1515],{"type":427,"value":1516},"{",{"type":421,"tag":842,"props":1518,"children":1520},{"style":1519},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1521],{"type":427,"value":1522}," isCute",{"type":421,"tag":842,"props":1524,"children":1525},{"style":861},[1526],{"type":427,"value":1527},":",{"type":421,"tag":842,"props":1529,"children":1531},{"style":1530},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1532],{"type":427,"value":1533}," true",{"type":421,"tag":842,"props":1535,"children":1536},{"style":861},[1537],{"type":427,"value":1538}," }",{"type":421,"tag":842,"props":1540,"children":1541},{"style":921},[1542],{"type":427,"value":1479},{"type":421,"tag":842,"props":1544,"children":1545},{"style":1163},[1546],{"type":427,"value":1352},{"type":421,"tag":842,"props":1548,"children":1549},{"style":916},[1550],{"type":427,"value":1146},{"type":421,"tag":842,"props":1552,"children":1553},{"style":1087},[1554],{"type":427,"value":1090},{"type":421,"tag":429,"props":1556,"children":1557},{},[1558],{"type":427,"value":1559},"这之后，第五条，如果 C 非 Callable 对象（还记得我们在 typeof 提到的内部方法[[call]]吗，Callable 对象即实现了[[call]]内部方法的对象，比如说某个函数），抛出类型错误，重现如下：",{"type":421,"tag":832,"props":1561,"children":1563},{"className":834,"code":1562,"language":836,"meta":415,"style":415},";[] instanceof []\n",[1564],{"type":421,"tag":724,"props":1565,"children":1566},{"__ignoreMap":415},[1567],{"type":421,"tag":842,"props":1568,"children":1569},{"class":844,"line":845},[1570,1574,1578,1582],{"type":421,"tag":842,"props":1571,"children":1572},{"style":861},[1573],{"type":427,"value":1308},{"type":421,"tag":842,"props":1575,"children":1576},{"style":916},[1577],{"type":427,"value":1313},{"type":421,"tag":842,"props":1579,"children":1580},{"style":921},[1581],{"type":427,"value":448},{"type":421,"tag":842,"props":1583,"children":1584},{"style":916},[1585],{"type":427,"value":1586}," []\n",{"type":421,"tag":429,"props":1588,"children":1589},{},[1590],{"type":427,"value":1591},"::: danger\nVM684:1 Uncaught TypeError: Right-hand side of 'instanceof' is not callable\n:::",{"type":421,"tag":429,"props":1593,"children":1594},{},[1595],{"type":427,"value":1596},"最后，返回调用内置 instanceof 实现的结果。",{"type":421,"tag":429,"props":1598,"children":1599},{},[1600],{"type":427,"value":1601},"不过，需要强调的是，instanceof 也有缺陷存在，主要体现在两个方面：",{"type":421,"tag":479,"props":1603,"children":1604},{},[1605,1610],{"type":421,"tag":439,"props":1606,"children":1607},{},[1608],{"type":427,"value":1609},"判断的依据是原型链",{"type":421,"tag":439,"props":1611,"children":1612},{},[1613],{"type":427,"value":1614},"跨宿主运算",{"type":421,"tag":714,"props":1616,"children":1618},{"id":1617},"依据原型链",[1619],{"type":427,"value":1617},{"type":421,"tag":429,"props":1621,"children":1622},{},[1623],{"type":427,"value":1624},"使用 instanceof 运算符判断对象字面量，会出现另人诧异的结果，见下代码：",{"type":421,"tag":832,"props":1626,"children":1628},{"className":834,"code":1627,"language":836,"meta":415,"style":415},"console.log(\n  'hello world' instanceof String, // false\n  new String('asdf') instanceof String, // true\n  {} instanceof Object, // true\n  [] instanceof Object, // true\n  Object.create(null) instanceof Object // false\n)\n",[1629],{"type":421,"tag":724,"props":1630,"children":1631},{"__ignoreMap":415},[1632,1652,1687,1737,1762,1786,1828],{"type":421,"tag":842,"props":1633,"children":1634},{"class":844,"line":845},[1635,1639,1643,1647],{"type":421,"tag":842,"props":1636,"children":1637},{"style":916},[1638],{"type":427,"value":1099},{"type":421,"tag":842,"props":1640,"children":1641},{"style":861},[1642],{"type":427,"value":521},{"type":421,"tag":842,"props":1644,"children":1645},{"style":855},[1646],{"type":427,"value":1108},{"type":421,"tag":842,"props":1648,"children":1649},{"style":916},[1650],{"type":427,"value":1651},"(\n",{"type":421,"tag":842,"props":1653,"children":1654},{"class":844,"line":902},[1655,1660,1665,1669,1673,1678,1682],{"type":421,"tag":842,"props":1656,"children":1657},{"style":1025},[1658],{"type":427,"value":1659},"  '",{"type":421,"tag":842,"props":1661,"children":1662},{"style":1031},[1663],{"type":427,"value":1664},"hello world",{"type":421,"tag":842,"props":1666,"children":1667},{"style":1025},[1668],{"type":427,"value":1028},{"type":421,"tag":842,"props":1670,"children":1671},{"style":921},[1672],{"type":427,"value":1479},{"type":421,"tag":842,"props":1674,"children":1675},{"style":1163},[1676],{"type":427,"value":1677}," String",{"type":421,"tag":842,"props":1679,"children":1680},{"style":861},[1681],{"type":427,"value":875},{"type":421,"tag":842,"props":1683,"children":1684},{"style":1087},[1685],{"type":427,"value":1686}," // false\n",{"type":421,"tag":842,"props":1688,"children":1689},{"class":844,"line":932},[1690,1695,1699,1703,1707,1712,1716,1720,1724,1728,1732],{"type":421,"tag":842,"props":1691,"children":1692},{"style":921},[1693],{"type":427,"value":1694},"  new",{"type":421,"tag":842,"props":1696,"children":1697},{"style":855},[1698],{"type":427,"value":1677},{"type":421,"tag":842,"props":1700,"children":1701},{"style":916},[1702],{"type":427,"value":864},{"type":421,"tag":842,"props":1704,"children":1705},{"style":1025},[1706],{"type":427,"value":1028},{"type":421,"tag":842,"props":1708,"children":1709},{"style":1031},[1710],{"type":427,"value":1711},"asdf",{"type":421,"tag":842,"props":1713,"children":1714},{"style":1025},[1715],{"type":427,"value":1028},{"type":421,"tag":842,"props":1717,"children":1718},{"style":916},[1719],{"type":427,"value":1146},{"type":421,"tag":842,"props":1721,"children":1722},{"style":921},[1723],{"type":427,"value":448},{"type":421,"tag":842,"props":1725,"children":1726},{"style":1163},[1727],{"type":427,"value":1677},{"type":421,"tag":842,"props":1729,"children":1730},{"style":861},[1731],{"type":427,"value":875},{"type":421,"tag":842,"props":1733,"children":1734},{"style":1087},[1735],{"type":427,"value":1736}," // true\n",{"type":421,"tag":842,"props":1738,"children":1739},{"class":844,"line":958},[1740,1745,1749,1754,1758],{"type":421,"tag":842,"props":1741,"children":1742},{"style":861},[1743],{"type":427,"value":1744},"  {}",{"type":421,"tag":842,"props":1746,"children":1747},{"style":921},[1748],{"type":427,"value":1479},{"type":421,"tag":842,"props":1750,"children":1751},{"style":1163},[1752],{"type":427,"value":1753}," Object",{"type":421,"tag":842,"props":1755,"children":1756},{"style":861},[1757],{"type":427,"value":875},{"type":421,"tag":842,"props":1759,"children":1760},{"style":1087},[1761],{"type":427,"value":1736},{"type":421,"tag":842,"props":1763,"children":1764},{"class":844,"line":984},[1765,1770,1774,1778,1782],{"type":421,"tag":842,"props":1766,"children":1767},{"style":916},[1768],{"type":427,"value":1769},"  [] ",{"type":421,"tag":842,"props":1771,"children":1772},{"style":921},[1773],{"type":427,"value":448},{"type":421,"tag":842,"props":1775,"children":1776},{"style":1163},[1777],{"type":427,"value":1753},{"type":421,"tag":842,"props":1779,"children":1780},{"style":861},[1781],{"type":427,"value":875},{"type":421,"tag":842,"props":1783,"children":1784},{"style":1087},[1785],{"type":427,"value":1736},{"type":421,"tag":842,"props":1787,"children":1788},{"class":844,"line":993},[1789,1794,1798,1803,1807,1812,1816,1820,1824],{"type":421,"tag":842,"props":1790,"children":1791},{"style":916},[1792],{"type":427,"value":1793},"  Object",{"type":421,"tag":842,"props":1795,"children":1796},{"style":861},[1797],{"type":427,"value":521},{"type":421,"tag":842,"props":1799,"children":1800},{"style":855},[1801],{"type":427,"value":1802},"create",{"type":421,"tag":842,"props":1804,"children":1805},{"style":916},[1806],{"type":427,"value":864},{"type":421,"tag":842,"props":1808,"children":1810},{"style":1809},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1811],{"type":427,"value":814},{"type":421,"tag":842,"props":1813,"children":1814},{"style":916},[1815],{"type":427,"value":1146},{"type":421,"tag":842,"props":1817,"children":1818},{"style":921},[1819],{"type":427,"value":448},{"type":421,"tag":842,"props":1821,"children":1822},{"style":1163},[1823],{"type":427,"value":1753},{"type":421,"tag":842,"props":1825,"children":1826},{"style":1087},[1827],{"type":427,"value":1686},{"type":421,"tag":842,"props":1829,"children":1830},{"class":844,"line":1074},[1831],{"type":421,"tag":842,"props":1832,"children":1833},{"style":916},[1834],{"type":427,"value":1071},{"type":421,"tag":429,"props":1836,"children":1837},{},[1838],{"type":427,"value":1839},"题外话，上面几行代码还隐式说明了这些问题：",{"type":421,"tag":435,"props":1841,"children":1842},{},[1843],{"type":421,"tag":439,"props":1844,"children":1845},{},[1846,1848,1853,1855],{"type":427,"value":1847},"对于对象字面量 ",{"type":421,"tag":724,"props":1849,"children":1851},{"className":1850},[],[1852],{"type":427,"value":1474},{"type":427,"value":1854}," 有 ",{"type":421,"tag":724,"props":1856,"children":1858},{"className":1857},[],[1859],{"type":427,"value":1860},"({}).__proto__ === Object.prototype",{"type":421,"tag":714,"props":1862,"children":1863},{"id":1614},[1864],{"type":427,"value":1614},{"type":421,"tag":429,"props":1866,"children":1867},{},[1868],{"type":427,"value":1869},"关于跨宿主运算，可以尝试以下代码重现:",{"type":421,"tag":832,"props":1871,"children":1873},{"className":834,"code":1872,"language":836,"meta":415,"style":415},"const iframe = document.createElement('iframe')\ndocument.body.appendChild(iframe)\nxArray = window.frames[window.frames.length - 1].Array\nconst xArr = new xArray(1, 2, 3)\n\nconsole.log(xArr instanceof xArray) // true\nconsole.log(xArr instanceof Array) // false\n",[1874],{"type":421,"tag":724,"props":1875,"children":1876},{"__ignoreMap":415},[1877,1928,1959,2028,2084,2091,2127],{"type":421,"tag":842,"props":1878,"children":1879},{"class":844,"line":845},[1880,1884,1889,1893,1898,1902,1907,1911,1915,1920,1924],{"type":421,"tag":842,"props":1881,"children":1882},{"style":849},[1883],{"type":427,"value":999},{"type":421,"tag":842,"props":1885,"children":1886},{"style":1002},[1887],{"type":427,"value":1888}," iframe",{"type":421,"tag":842,"props":1890,"children":1891},{"style":921},[1892],{"type":427,"value":924},{"type":421,"tag":842,"props":1894,"children":1895},{"style":916},[1896],{"type":427,"value":1897}," document",{"type":421,"tag":842,"props":1899,"children":1900},{"style":861},[1901],{"type":427,"value":521},{"type":421,"tag":842,"props":1903,"children":1904},{"style":855},[1905],{"type":427,"value":1906},"createElement",{"type":421,"tag":842,"props":1908,"children":1909},{"style":916},[1910],{"type":427,"value":864},{"type":421,"tag":842,"props":1912,"children":1913},{"style":1025},[1914],{"type":427,"value":1028},{"type":421,"tag":842,"props":1916,"children":1917},{"style":1031},[1918],{"type":427,"value":1919},"iframe",{"type":421,"tag":842,"props":1921,"children":1922},{"style":1025},[1923],{"type":427,"value":1028},{"type":421,"tag":842,"props":1925,"children":1926},{"style":916},[1927],{"type":427,"value":1071},{"type":421,"tag":842,"props":1929,"children":1930},{"class":844,"line":902},[1931,1936,1940,1945,1949,1954],{"type":421,"tag":842,"props":1932,"children":1933},{"style":916},[1934],{"type":427,"value":1935},"document",{"type":421,"tag":842,"props":1937,"children":1938},{"style":861},[1939],{"type":427,"value":521},{"type":421,"tag":842,"props":1941,"children":1942},{"style":916},[1943],{"type":427,"value":1944},"body",{"type":421,"tag":842,"props":1946,"children":1947},{"style":861},[1948],{"type":427,"value":521},{"type":421,"tag":842,"props":1950,"children":1951},{"style":855},[1952],{"type":427,"value":1953},"appendChild",{"type":421,"tag":842,"props":1955,"children":1956},{"style":916},[1957],{"type":427,"value":1958},"(iframe)\n",{"type":421,"tag":842,"props":1960,"children":1961},{"class":844,"line":932},[1962,1967,1972,1977,1981,1986,1990,1995,1999,2004,2009,2014,2019,2023],{"type":421,"tag":842,"props":1963,"children":1964},{"style":916},[1965],{"type":427,"value":1966},"xArray ",{"type":421,"tag":842,"props":1968,"children":1969},{"style":921},[1970],{"type":427,"value":1971},"=",{"type":421,"tag":842,"props":1973,"children":1974},{"style":916},[1975],{"type":427,"value":1976}," window",{"type":421,"tag":842,"props":1978,"children":1979},{"style":861},[1980],{"type":427,"value":521},{"type":421,"tag":842,"props":1982,"children":1983},{"style":916},[1984],{"type":427,"value":1985},"frames[window",{"type":421,"tag":842,"props":1987,"children":1988},{"style":861},[1989],{"type":427,"value":521},{"type":421,"tag":842,"props":1991,"children":1992},{"style":916},[1993],{"type":427,"value":1994},"frames",{"type":421,"tag":842,"props":1996,"children":1997},{"style":861},[1998],{"type":427,"value":521},{"type":421,"tag":842,"props":2000,"children":2001},{"style":1002},[2002],{"type":427,"value":2003},"length",{"type":421,"tag":842,"props":2005,"children":2006},{"style":921},[2007],{"type":427,"value":2008}," -",{"type":421,"tag":842,"props":2010,"children":2011},{"style":1063},[2012],{"type":427,"value":2013}," 1",{"type":421,"tag":842,"props":2015,"children":2016},{"style":916},[2017],{"type":427,"value":2018},"]",{"type":421,"tag":842,"props":2020,"children":2021},{"style":861},[2022],{"type":427,"value":521},{"type":421,"tag":842,"props":2024,"children":2025},{"style":916},[2026],{"type":427,"value":2027},"Array\n",{"type":421,"tag":842,"props":2029,"children":2030},{"class":844,"line":958},[2031,2035,2040,2044,2048,2053,2057,2062,2066,2071,2075,2080],{"type":421,"tag":842,"props":2032,"children":2033},{"style":849},[2034],{"type":427,"value":999},{"type":421,"tag":842,"props":2036,"children":2037},{"style":1002},[2038],{"type":427,"value":2039}," xArr",{"type":421,"tag":842,"props":2041,"children":2042},{"style":921},[2043],{"type":427,"value":924},{"type":421,"tag":842,"props":2045,"children":2046},{"style":921},[2047],{"type":427,"value":1014},{"type":421,"tag":842,"props":2049,"children":2050},{"style":855},[2051],{"type":427,"value":2052}," xArray",{"type":421,"tag":842,"props":2054,"children":2055},{"style":916},[2056],{"type":427,"value":864},{"type":421,"tag":842,"props":2058,"children":2059},{"style":1063},[2060],{"type":427,"value":2061},"1",{"type":421,"tag":842,"props":2063,"children":2064},{"style":861},[2065],{"type":427,"value":875},{"type":421,"tag":842,"props":2067,"children":2068},{"style":1063},[2069],{"type":427,"value":2070}," 2",{"type":421,"tag":842,"props":2072,"children":2073},{"style":861},[2074],{"type":427,"value":875},{"type":421,"tag":842,"props":2076,"children":2077},{"style":1063},[2078],{"type":427,"value":2079}," 3",{"type":421,"tag":842,"props":2081,"children":2082},{"style":916},[2083],{"type":427,"value":1071},{"type":421,"tag":842,"props":2085,"children":2086},{"class":844,"line":984},[2087],{"type":421,"tag":842,"props":2088,"children":2089},{"emptyLinePlaceholder":414},[2090],{"type":427,"value":1080},{"type":421,"tag":842,"props":2092,"children":2093},{"class":844,"line":993},[2094,2098,2102,2106,2111,2115,2119,2123],{"type":421,"tag":842,"props":2095,"children":2096},{"style":916},[2097],{"type":427,"value":1099},{"type":421,"tag":842,"props":2099,"children":2100},{"style":861},[2101],{"type":427,"value":521},{"type":421,"tag":842,"props":2103,"children":2104},{"style":855},[2105],{"type":427,"value":1108},{"type":421,"tag":842,"props":2107,"children":2108},{"style":916},[2109],{"type":427,"value":2110},"(xArr ",{"type":421,"tag":842,"props":2112,"children":2113},{"style":921},[2114],{"type":427,"value":448},{"type":421,"tag":842,"props":2116,"children":2117},{"style":1163},[2118],{"type":427,"value":2052},{"type":421,"tag":842,"props":2120,"children":2121},{"style":916},[2122],{"type":427,"value":1146},{"type":421,"tag":842,"props":2124,"children":2125},{"style":1087},[2126],{"type":427,"value":1090},{"type":421,"tag":842,"props":2128,"children":2129},{"class":844,"line":1074},[2130,2134,2138,2142,2146,2150,2155,2159],{"type":421,"tag":842,"props":2131,"children":2132},{"style":916},[2133],{"type":427,"value":1099},{"type":421,"tag":842,"props":2135,"children":2136},{"style":861},[2137],{"type":427,"value":521},{"type":421,"tag":842,"props":2139,"children":2140},{"style":855},[2141],{"type":427,"value":1108},{"type":421,"tag":842,"props":2143,"children":2144},{"style":916},[2145],{"type":427,"value":2110},{"type":421,"tag":842,"props":2147,"children":2148},{"style":921},[2149],{"type":427,"value":448},{"type":421,"tag":842,"props":2151,"children":2152},{"style":1163},[2153],{"type":427,"value":2154}," Array",{"type":421,"tag":842,"props":2156,"children":2157},{"style":916},[2158],{"type":427,"value":1146},{"type":421,"tag":842,"props":2160,"children":2161},{"style":1087},[2162],{"type":427,"value":1492},{"type":421,"tag":429,"props":2164,"children":2165},{},[2166],{"type":427,"value":2167},"因为 iframe 中的数组实例不是父窗口的 Array 的实例，所以在 xArr 的原型链上是找不到 Array 的，所以结果为 false。",{"type":421,"tag":422,"props":2169,"children":2171},{"id":2170},"objectprototypetostringcall",[2172],{"type":427,"value":453},{"type":421,"tag":429,"props":2174,"children":2175},{},[2176],{"type":427,"value":2177},"一般来说，在业务代码中，我们使用 typeof 和 instanceof 运算符判断变量的类型就足够了。虽然这两种方法都有缺陷，但是我们记住这些常见的容易混淆的地方，避免使用就可以。\n下面要介绍的是一种更精确的方法，一般会用在工具函数或者类库中，如：",{"type":421,"tag":832,"props":2179,"children":2181},{"className":834,"code":2180,"language":836,"meta":415,"style":415},"function isArray(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\nisArray([]) // true\n",[2182],{"type":421,"tag":724,"props":2183,"children":2184},{"__ignoreMap":415},[2185,2214,2282,2289],{"type":421,"tag":842,"props":2186,"children":2187},{"class":844,"line":845},[2188,2192,2197,2201,2206,2210],{"type":421,"tag":842,"props":2189,"children":2190},{"style":849},[2191],{"type":427,"value":852},{"type":421,"tag":842,"props":2193,"children":2194},{"style":855},[2195],{"type":427,"value":2196}," isArray",{"type":421,"tag":842,"props":2198,"children":2199},{"style":861},[2200],{"type":427,"value":864},{"type":421,"tag":842,"props":2202,"children":2203},{"style":867},[2204],{"type":427,"value":2205},"arr",{"type":421,"tag":842,"props":2207,"children":2208},{"style":861},[2209],{"type":427,"value":894},{"type":421,"tag":842,"props":2211,"children":2212},{"style":861},[2213],{"type":427,"value":899},{"type":421,"tag":842,"props":2215,"children":2216},{"class":844,"line":902},[2217,2222,2226,2230,2234,2238,2243,2247,2252,2256,2260,2264,2268,2272,2277],{"type":421,"tag":842,"props":2218,"children":2219},{"style":1402},[2220],{"type":427,"value":2221},"  return",{"type":421,"tag":842,"props":2223,"children":2224},{"style":1130},[2225],{"type":427,"value":1753},{"type":421,"tag":842,"props":2227,"children":2228},{"style":861},[2229],{"type":427,"value":521},{"type":421,"tag":842,"props":2231,"children":2232},{"style":1002},[2233],{"type":427,"value":1141},{"type":421,"tag":842,"props":2235,"children":2236},{"style":861},[2237],{"type":427,"value":521},{"type":421,"tag":842,"props":2239,"children":2240},{"style":916},[2241],{"type":427,"value":2242},"toString",{"type":421,"tag":842,"props":2244,"children":2245},{"style":861},[2246],{"type":427,"value":521},{"type":421,"tag":842,"props":2248,"children":2249},{"style":855},[2250],{"type":427,"value":2251},"call",{"type":421,"tag":842,"props":2253,"children":2254},{"style":1519},[2255],{"type":427,"value":864},{"type":421,"tag":842,"props":2257,"children":2258},{"style":916},[2259],{"type":427,"value":2205},{"type":421,"tag":842,"props":2261,"children":2262},{"style":1519},[2263],{"type":427,"value":1146},{"type":421,"tag":842,"props":2265,"children":2266},{"style":921},[2267],{"type":427,"value":1151},{"type":421,"tag":842,"props":2269,"children":2270},{"style":1025},[2271],{"type":427,"value":1047},{"type":421,"tag":842,"props":2273,"children":2274},{"style":1031},[2275],{"type":427,"value":2276},"[object Array]",{"type":421,"tag":842,"props":2278,"children":2279},{"style":1025},[2280],{"type":427,"value":2281},"'\n",{"type":421,"tag":842,"props":2283,"children":2284},{"class":844,"line":932},[2285],{"type":421,"tag":842,"props":2286,"children":2287},{"style":861},[2288],{"type":427,"value":990},{"type":421,"tag":842,"props":2290,"children":2291},{"class":844,"line":958},[2292,2297,2302],{"type":421,"tag":842,"props":2293,"children":2294},{"style":855},[2295],{"type":427,"value":2296},"isArray",{"type":421,"tag":842,"props":2298,"children":2299},{"style":916},[2300],{"type":427,"value":2301},"([]) ",{"type":421,"tag":842,"props":2303,"children":2304},{"style":1087},[2305],{"type":427,"value":1090},{"type":421,"tag":429,"props":2307,"children":2308},{},[2309],{"type":427,"value":2310},"那么 Object.prototype.toString 到底能分辨几种类型呢？查阅 ES6 规范文档，可以得到其实现，如下：",{"type":421,"tag":479,"props":2312,"children":2313},{},[2314,2344,2369,2380,2391,2400,2411,2422,2433,2444,2455,2466,2477,2488,2499,2510,2521,2530,2541],{"type":421,"tag":439,"props":2315,"children":2316},{},[2317,2319,2324,2326,2330,2332,2343],{"type":427,"value":2318},"If the ",{"type":421,"tag":515,"props":2320,"children":2321},{},[2322],{"type":427,"value":2323},"this",{"type":427,"value":2325}," value is ",{"type":421,"tag":515,"props":2327,"children":2328},{},[2329],{"type":427,"value":804},{"type":427,"value":2331},", return ",{"type":421,"tag":515,"props":2333,"children":2334},{},[2335,2337,2342],{"type":427,"value":2336},"\"",{"type":421,"tag":842,"props":2338,"children":2339},{},[2340],{"type":427,"value":2341},"object Undefined",{"type":427,"value":2336},{"type":427,"value":521},{"type":421,"tag":439,"props":2345,"children":2346},{},[2347,2348,2352,2353,2357,2358,2368],{"type":427,"value":2318},{"type":421,"tag":515,"props":2349,"children":2350},{},[2351],{"type":427,"value":2323},{"type":427,"value":2325},{"type":421,"tag":515,"props":2354,"children":2355},{},[2356],{"type":427,"value":814},{"type":427,"value":2331},{"type":421,"tag":515,"props":2359,"children":2360},{},[2361,2362,2367],{"type":427,"value":2336},{"type":421,"tag":842,"props":2363,"children":2364},{},[2365],{"type":427,"value":2366},"object Null",{"type":427,"value":2336},{"type":427,"value":521},{"type":421,"tag":439,"props":2370,"children":2371},{},[2372,2374,2379],{"type":427,"value":2373},"Let O be ",{"type":421,"tag":493,"props":2375,"children":2376},{},[2377],{"type":427,"value":2378},"ToObject(this value)",{"type":427,"value":521},{"type":421,"tag":439,"props":2381,"children":2382},{},[2383,2385,2390],{"type":427,"value":2384},"Let isArray be ",{"type":421,"tag":493,"props":2386,"children":2387},{},[2388],{"type":427,"value":2389},"IsArray(O)",{"type":427,"value":521},{"type":421,"tag":439,"props":2392,"children":2393},{},[2394,2399],{"type":421,"tag":493,"props":2395,"children":2396},{},[2397],{"type":427,"value":2398},"ReturnIfAbrupt(isArray)",{"type":427,"value":521},{"type":421,"tag":439,"props":2401,"children":2402},{},[2403,2405,2410],{"type":427,"value":2404},"If isArray is true, let builtinTag be ",{"type":421,"tag":515,"props":2406,"children":2407},{},[2408],{"type":427,"value":2409},"\"Array\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2412,"children":2413},{},[2414,2416,2421],{"type":427,"value":2415},"Else, if O is an exotic String object, let builtinTag be ",{"type":421,"tag":515,"props":2417,"children":2418},{},[2419],{"type":427,"value":2420},"\"String\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2423,"children":2424},{},[2425,2427,2432],{"type":427,"value":2426},"Else, if O has an [[ParameterMap]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2428,"children":2429},{},[2430],{"type":427,"value":2431},"\"Arguments\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2434,"children":2435},{},[2436,2438,2443],{"type":427,"value":2437},"Else, if O has a [[Call]] internal method, let builtinTag be ",{"type":421,"tag":515,"props":2439,"children":2440},{},[2441],{"type":427,"value":2442},"\"Function\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2445,"children":2446},{},[2447,2449,2454],{"type":427,"value":2448},"Else, if O has an [[ErrorData]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2450,"children":2451},{},[2452],{"type":427,"value":2453},"\"Error\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2456,"children":2457},{},[2458,2460,2465],{"type":427,"value":2459},"Else, if O has a [[BooleanData]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2461,"children":2462},{},[2463],{"type":427,"value":2464},"\"Boolean\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2467,"children":2468},{},[2469,2471,2476],{"type":427,"value":2470},"Else, if O has a [[NumberData]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2472,"children":2473},{},[2474],{"type":427,"value":2475},"\"Number\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2478,"children":2479},{},[2480,2482,2487],{"type":427,"value":2481},"Else, if O has a [[DateValue]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2483,"children":2484},{},[2485],{"type":427,"value":2486},"\"Date\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2489,"children":2490},{},[2491,2493,2498],{"type":427,"value":2492},"Else, if O has a [[RegExpMatcher]] internal slot, let builtinTag be ",{"type":421,"tag":515,"props":2494,"children":2495},{},[2496],{"type":427,"value":2497},"\"RegExp\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2500,"children":2501},{},[2502,2504,2509],{"type":427,"value":2503},"Else, let builtinTag be ",{"type":421,"tag":515,"props":2505,"children":2506},{},[2507],{"type":427,"value":2508},"\"Object\"",{"type":427,"value":521},{"type":421,"tag":439,"props":2511,"children":2512},{},[2513,2515,2520],{"type":427,"value":2514},"Let tag be ",{"type":421,"tag":493,"props":2516,"children":2517},{},[2518],{"type":427,"value":2519},"Get(O, @@toStringTag)",{"type":427,"value":521},{"type":421,"tag":439,"props":2522,"children":2523},{},[2524,2529],{"type":421,"tag":493,"props":2525,"children":2526},{},[2527],{"type":427,"value":2528},"ReturnIfAbrupt(tag)",{"type":427,"value":521},{"type":421,"tag":439,"props":2531,"children":2532},{},[2533,2534,2539],{"type":427,"value":491},{"type":421,"tag":493,"props":2535,"children":2536},{},[2537],{"type":427,"value":2538},"Type(tag)",{"type":427,"value":2540}," is not String, let tag be builtinTag.",{"type":421,"tag":439,"props":2542,"children":2543},{},[2544,2546,2556],{"type":427,"value":2545},"Return the String that is the result of concatenating ",{"type":421,"tag":515,"props":2547,"children":2548},{},[2549,2550,2555],{"type":427,"value":2336},{"type":421,"tag":842,"props":2551,"children":2552},{},[2553],{"type":427,"value":2554},"object \"**, tag, and **\"",{"type":427,"value":2336},{"type":427,"value":521},{"type":421,"tag":429,"props":2558,"children":2559},{},[2560],{"type":427,"value":2561},"细数下来，Object.prototype.toString 不仅可以区分 Object、Function、Date、RegExp 等常见对象，它还能区分 Error、Arguments 等，见下代码：",{"type":421,"tag":832,"props":2563,"children":2565},{"className":834,"code":2564,"language":836,"meta":415,"style":415},";(function() {\n  console.log(\n    typeof arguments, // 'object'\n    Object.prototype.toString.call(arguments) // '[object Arguments]'\n  )\n})()\n",[2566],{"type":421,"tag":724,"props":2567,"children":2568},{"__ignoreMap":415},[2569,2593,2613,2636,2686,2694],{"type":421,"tag":842,"props":2570,"children":2571},{"class":844,"line":845},[2572,2576,2580,2584,2589],{"type":421,"tag":842,"props":2573,"children":2574},{"style":861},[2575],{"type":427,"value":1308},{"type":421,"tag":842,"props":2577,"children":2578},{"style":916},[2579],{"type":427,"value":864},{"type":421,"tag":842,"props":2581,"children":2582},{"style":849},[2583],{"type":427,"value":852},{"type":421,"tag":842,"props":2585,"children":2586},{"style":861},[2587],{"type":427,"value":2588},"()",{"type":421,"tag":842,"props":2590,"children":2591},{"style":861},[2592],{"type":427,"value":899},{"type":421,"tag":842,"props":2594,"children":2595},{"class":844,"line":902},[2596,2601,2605,2609],{"type":421,"tag":842,"props":2597,"children":2598},{"style":916},[2599],{"type":427,"value":2600},"  console",{"type":421,"tag":842,"props":2602,"children":2603},{"style":861},[2604],{"type":427,"value":521},{"type":421,"tag":842,"props":2606,"children":2607},{"style":855},[2608],{"type":427,"value":1108},{"type":421,"tag":842,"props":2610,"children":2611},{"style":1519},[2612],{"type":427,"value":1651},{"type":421,"tag":842,"props":2614,"children":2615},{"class":844,"line":932},[2616,2621,2627,2631],{"type":421,"tag":842,"props":2617,"children":2618},{"style":921},[2619],{"type":427,"value":2620},"    typeof",{"type":421,"tag":842,"props":2622,"children":2624},{"style":2623},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2625],{"type":427,"value":2626}," arguments",{"type":421,"tag":842,"props":2628,"children":2629},{"style":861},[2630],{"type":427,"value":875},{"type":421,"tag":842,"props":2632,"children":2633},{"style":1087},[2634],{"type":427,"value":2635}," // 'object'\n",{"type":421,"tag":842,"props":2637,"children":2638},{"class":844,"line":958},[2639,2644,2648,2652,2656,2660,2664,2668,2672,2677,2681],{"type":421,"tag":842,"props":2640,"children":2641},{"style":1130},[2642],{"type":427,"value":2643},"    Object",{"type":421,"tag":842,"props":2645,"children":2646},{"style":861},[2647],{"type":427,"value":521},{"type":421,"tag":842,"props":2649,"children":2650},{"style":1002},[2651],{"type":427,"value":1141},{"type":421,"tag":842,"props":2653,"children":2654},{"style":861},[2655],{"type":427,"value":521},{"type":421,"tag":842,"props":2657,"children":2658},{"style":916},[2659],{"type":427,"value":2242},{"type":421,"tag":842,"props":2661,"children":2662},{"style":861},[2663],{"type":427,"value":521},{"type":421,"tag":842,"props":2665,"children":2666},{"style":855},[2667],{"type":427,"value":2251},{"type":421,"tag":842,"props":2669,"children":2670},{"style":1519},[2671],{"type":427,"value":864},{"type":421,"tag":842,"props":2673,"children":2674},{"style":2623},[2675],{"type":427,"value":2676},"arguments",{"type":421,"tag":842,"props":2678,"children":2679},{"style":1519},[2680],{"type":427,"value":1146},{"type":421,"tag":842,"props":2682,"children":2683},{"style":1087},[2684],{"type":427,"value":2685},"// '[object Arguments]'\n",{"type":421,"tag":842,"props":2687,"children":2688},{"class":844,"line":984},[2689],{"type":421,"tag":842,"props":2690,"children":2691},{"style":1519},[2692],{"type":427,"value":2693},"  )\n",{"type":421,"tag":842,"props":2695,"children":2696},{"class":844,"line":993},[2697,2702],{"type":421,"tag":842,"props":2698,"children":2699},{"style":861},[2700],{"type":427,"value":2701},"}",{"type":421,"tag":842,"props":2703,"children":2704},{"style":916},[2705],{"type":427,"value":2706},")()\n",{"type":421,"tag":714,"props":2708,"children":2710},{"id":2709},"如何扩展",[2711],{"type":427,"value":2709},{"type":421,"tag":429,"props":2713,"children":2714},{},[2715],{"type":427,"value":2716},"可以通过 Symbol.toStringTag 对已有对象的内置标签进行修改。这样就可以不需要通过构造函数的方法来分辨程序中不同种类的新对象。如下代码：",{"type":421,"tag":832,"props":2718,"children":2720},{"className":834,"code":2719,"language":836,"meta":415,"style":415},"var a = {}\na[Symbol.toStringTag] = '1234'\nObject.prototype.toString.call(a)\n// >>> \"[object 1234]\"\n",[2721],{"type":421,"tag":724,"props":2722,"children":2723},{"__ignoreMap":415},[2724,2746,2780,2817],{"type":421,"tag":842,"props":2725,"children":2726},{"class":844,"line":845},[2727,2732,2737,2741],{"type":421,"tag":842,"props":2728,"children":2729},{"style":849},[2730],{"type":427,"value":2731},"var",{"type":421,"tag":842,"props":2733,"children":2734},{"style":916},[2735],{"type":427,"value":2736}," a ",{"type":421,"tag":842,"props":2738,"children":2739},{"style":921},[2740],{"type":427,"value":1971},{"type":421,"tag":842,"props":2742,"children":2743},{"style":861},[2744],{"type":427,"value":2745}," {}\n",{"type":421,"tag":842,"props":2747,"children":2748},{"class":844,"line":902},[2749,2754,2758,2763,2767,2771,2776],{"type":421,"tag":842,"props":2750,"children":2751},{"style":916},[2752],{"type":427,"value":2753},"a[Symbol",{"type":421,"tag":842,"props":2755,"children":2756},{"style":861},[2757],{"type":427,"value":521},{"type":421,"tag":842,"props":2759,"children":2760},{"style":916},[2761],{"type":427,"value":2762},"toStringTag] ",{"type":421,"tag":842,"props":2764,"children":2765},{"style":921},[2766],{"type":427,"value":1971},{"type":421,"tag":842,"props":2768,"children":2769},{"style":1025},[2770],{"type":427,"value":1047},{"type":421,"tag":842,"props":2772,"children":2773},{"style":1031},[2774],{"type":427,"value":2775},"1234",{"type":421,"tag":842,"props":2777,"children":2778},{"style":1025},[2779],{"type":427,"value":2281},{"type":421,"tag":842,"props":2781,"children":2782},{"class":844,"line":932},[2783,2788,2792,2796,2800,2804,2808,2812],{"type":421,"tag":842,"props":2784,"children":2785},{"style":1130},[2786],{"type":427,"value":2787},"Object",{"type":421,"tag":842,"props":2789,"children":2790},{"style":861},[2791],{"type":427,"value":521},{"type":421,"tag":842,"props":2793,"children":2794},{"style":1002},[2795],{"type":427,"value":1141},{"type":421,"tag":842,"props":2797,"children":2798},{"style":861},[2799],{"type":427,"value":521},{"type":421,"tag":842,"props":2801,"children":2802},{"style":916},[2803],{"type":427,"value":2242},{"type":421,"tag":842,"props":2805,"children":2806},{"style":861},[2807],{"type":427,"value":521},{"type":421,"tag":842,"props":2809,"children":2810},{"style":855},[2811],{"type":427,"value":2251},{"type":421,"tag":842,"props":2813,"children":2814},{"style":916},[2815],{"type":427,"value":2816},"(a)\n",{"type":421,"tag":842,"props":2818,"children":2819},{"class":844,"line":958},[2820],{"type":421,"tag":842,"props":2821,"children":2822},{"style":1087},[2823],{"type":427,"value":2824},"// >>> \"[object 1234]\"\n",{"type":421,"tag":714,"props":2826,"children":2828},{"id":2827},"缺陷所在",[2829],{"type":427,"value":2827},{"type":421,"tag":429,"props":2831,"children":2832},{},[2833],{"type":427,"value":2834},"JS 中的对象，按照执行环境来划分可以分为内置对象（Build-In Object）和宿主对象（Host Object），如 Window、History 就是执行环境（浏览器）提供的对象。\n缺陷呢，往往就存在于规范中没有被定义的行为。\n比如，Window 对象的 Symbol.toString 是浏览器定义的行为，而且往往不同浏览器，实现还不一样。",{"type":421,"tag":832,"props":2836,"children":2838},{"className":834,"code":2837,"language":836,"meta":415,"style":415},"Window.toString()\n// [object Window] ?\n// [object Object] ?\n// [object DOMWindow] ?\n// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",[2839],{"type":421,"tag":724,"props":2840,"children":2841},{"__ignoreMap":415},[2842,2863,2871,2879,2887],{"type":421,"tag":842,"props":2843,"children":2844},{"class":844,"line":845},[2845,2850,2854,2858],{"type":421,"tag":842,"props":2846,"children":2847},{"style":916},[2848],{"type":427,"value":2849},"Window",{"type":421,"tag":842,"props":2851,"children":2852},{"style":861},[2853],{"type":427,"value":521},{"type":421,"tag":842,"props":2855,"children":2856},{"style":855},[2857],{"type":427,"value":2242},{"type":421,"tag":842,"props":2859,"children":2860},{"style":916},[2861],{"type":427,"value":2862},"()\n",{"type":421,"tag":842,"props":2864,"children":2865},{"class":844,"line":902},[2866],{"type":421,"tag":842,"props":2867,"children":2868},{"style":1087},[2869],{"type":427,"value":2870},"// [object Window] ?\n",{"type":421,"tag":842,"props":2872,"children":2873},{"class":844,"line":932},[2874],{"type":421,"tag":842,"props":2875,"children":2876},{"style":1087},[2877],{"type":427,"value":2878},"// [object Object] ?\n",{"type":421,"tag":842,"props":2880,"children":2881},{"class":844,"line":958},[2882],{"type":421,"tag":842,"props":2883,"children":2884},{"style":1087},[2885],{"type":427,"value":2886},"// [object DOMWindow] ?\n",{"type":421,"tag":842,"props":2888,"children":2889},{"class":844,"line":984},[2890],{"type":421,"tag":842,"props":2891,"children":2892},{"style":1087},[2893],{"type":427,"value":2894},"// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",{"type":421,"tag":429,"props":2896,"children":2897},{},[2898],{"type":421,"tag":515,"props":2899,"children":2900},{},[2901],{"type":427,"value":2902},"(￣ ▽ ￣)\" 害。",{"type":421,"tag":422,"props":2904,"children":2906},{"id":2905},"最后",[2907],{"type":427,"value":2905},{"type":421,"tag":429,"props":2909,"children":2910},{},[2911],{"type":427,"value":2912},"想不到吧，JS 类型判断这个问题居然没有完美的解法，每种解法都有缺陷。",{"type":421,"tag":429,"props":2914,"children":2915},{},[2916],{"type":427,"value":2917},"那么我们平常写代码到底用哪种呢？",{"type":421,"tag":429,"props":2919,"children":2920},{},[2921],{"type":427,"value":2922},"虽然我刚才提到“业务代码可以使用 typeof 或 instanceof，库和工具函数等需要更精准的情况则用 Object.prototype.toString”，但是，这并不是绝对的。\n我们仔细思考一下这三种方法的本质：",{"type":421,"tag":435,"props":2924,"children":2925},{},[2926,2931,2936],{"type":421,"tag":439,"props":2927,"children":2928},{},[2929],{"type":427,"value":2930},"typeof 根据最小三位字节判断变量类型",{"type":421,"tag":439,"props":2932,"children":2933},{},[2934],{"type":427,"value":2935},"instanceof 根据原型链判断",{"type":421,"tag":439,"props":2937,"children":2938},{},[2939],{"type":427,"value":2940},"Object.prototype.toString 主要是根据对象的内置标签（Build-In Tag）判断",{"type":421,"tag":429,"props":2942,"children":2943},{},[2944],{"type":427,"value":2945},"那么熟记这三条规则，写代码时就能游刃有余了。",{"type":421,"tag":429,"props":2947,"children":2948},{},[2949],{"type":427,"value":2950},"感谢看到结尾，如有错误请务必指正，十分感谢。如果喜欢请点赞、投币、关注三连吧！我是 Lionad，爱你萌！",{"type":421,"tag":422,"props":2952,"children":2954},{"id":2953},"阅读更多",[2955],{"type":427,"value":2953},{"type":421,"tag":435,"props":2957,"children":2958},{},[2959,2971,2981,2991,3001],{"type":421,"tag":439,"props":2960,"children":2961},{},[2962],{"type":421,"tag":2963,"props":2964,"children":2968},"a",{"href":2965,"rel":2966},"https://book.douban.com/subject/27133542/",[2967],"nofollow",[2969],{"type":427,"value":2970},"《JavaScript 框架设计》",{"type":421,"tag":439,"props":2972,"children":2973},{},[2974],{"type":421,"tag":2963,"props":2975,"children":2978},{"href":2976,"rel":2977},"https://justjavac.com/javascript/2012/12/23/what-is-javascripts-typeof-operator-used-for.html",[2967],[2979],{"type":427,"value":2980},"JavaScript 的 typeof 的用途",{"type":421,"tag":439,"props":2982,"children":2983},{},[2984],{"type":421,"tag":2963,"props":2985,"children":2988},{"href":2986,"rel":2987},"https://2ality.com/2013/10/typeof-null.html",[2967],[2989],{"type":427,"value":2990},"The history of “typeof null”",{"type":421,"tag":439,"props":2992,"children":2993},{},[2994],{"type":421,"tag":2963,"props":2995,"children":2998},{"href":2996,"rel":2997},"http://www.ecma-international.org/ecma-262/6.0/#sec-typeof-operator",[2967],[2999],{"type":427,"value":3000},"ECMAScript® 2015 Language Specification",{"type":421,"tag":439,"props":3002,"children":3003},{},[3004],{"type":421,"tag":2963,"props":3005,"children":3008},{"href":3006,"rel":3007},"https://juejin.im/post/5b0b9b9051882515773ae714",[2967],[3009],{"type":427,"value":3010},"instanceof 和 typeof 原理",{"type":421,"tag":3012,"props":3013,"children":3014},"style",{},[3015],{"type":427,"value":3016},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":415,"searchDepth":902,"depth":902,"links":3018},[3019,3020,3024,3028,3032,3033],{"id":424,"depth":902,"text":424},{"id":443,"depth":902,"text":443,"children":3021},[3022,3023],{"id":707,"depth":932,"text":707},{"id":752,"depth":932,"text":755},{"id":448,"depth":902,"text":448,"children":3025},[3026,3027],{"id":1617,"depth":932,"text":1617},{"id":1614,"depth":932,"text":1614},{"id":2170,"depth":902,"text":453,"children":3029},[3030,3031],{"id":2709,"depth":932,"text":2709},{"id":2827,"depth":932,"text":2827},{"id":2905,"depth":902,"text":2905},{"id":2953,"depth":902,"text":2953},"markdown","content:_archieved:2020-05:type-check.md","content","_archieved/2020-05/type-check.md","_archieved/2020-05/type-check","md",[3041,3044],{"_path":3042,"title":3043,"description":415},"/_archieved/2020-05/js-module-history","JS 模块化简史",{"_path":3045,"title":3046,"description":415},"/_archieved/2020-06/punctuations","✒️ 关于标点的那些事儿",1732808707585]