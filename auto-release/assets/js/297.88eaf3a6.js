(window.webpackJsonp=window.webpackJsonp||[]).push([[297],{304:function(e,t,s){},309:function(e,t,s){"use strict";s(123);const o=s(55),i={touchstart:"onMouseDown",mousedown:"onMouseDown",touchend:"onMouseUp",mouseup:"onMouseUp",touchmove:"onMouseMove",mousemove:"onMouseMove",touchcancel:"onMouseUp",wheel:"onMouseWheel",mousewheel:"onMouseWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},n=["hover","hoverOut","tap","swipeUp","swipeDown"];var h={name:"gesture-cmpt",props:{...n.reduce((e,t)=>(e[t]=Function,e),{}),hoverTime:{type:[Number,String],default:100},enableMouse:{type:Boolean,default:!0},enableMouseWheel:{type:Boolean,default:!0},judgeConfig:{type:Object,default:()=>({tapTimeInterval:300,tapOffsetThresholdSquared:25,swipeOffsetThreshold:80})},freezeTime:{type:[Number,String],default:1e3/30},eventInvoke:{type:Function,default:()=>{}}},data:()=>({touchstartTime:0,touchendTime:0,touchstartCoord:{},touchendCoord:{},wheelOffset:0,mouseEnterTime:null,mouseLeaveTime:null,hoverTick:null,lastTouchendTime:0,lastTouchstartTime:0,lastTouchstartCoord:{},lastTouchendCoord:{},lastWheelOffset:0,shouldInit:null,ele:null,events:{listens:[]}}),computed:{timeInterval(){return this.touchendTime-this.touchstartTime},pageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},pageXOffsetAbs(){return Math.abs(this.pageXOffset)},pageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},pageYOffsetAbs(){return Math.abs(this.pageYOffset)},lastTimeInterval(){return this.lastTouchendTime-this.lastTouchstartTime},lastPageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},lastPageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},deltaTime(){return this.touchendTime-this.lastTouchstartTim},mouseHoverTime(){return this.mouseLeaveTime-this.mouseEnterTime}},mounted(){this.shouldInit=Object.keys(this.$props).find(e=>n.includes(e)&&this[e]),this.shouldInit&&(this.calcEventsName(),this.ele=this.$refs.gesture,this.events.listens.map(e=>{this.ele.addEventListener(e,this[i[e]])}))},beforeDestroy(){this.shouldInit&&this.events.listens.map(e=>{this.ele.removeEventListener(e,this[i[e]])})},methods:{onMouseEnter(e){this.mouseEnterTime||this.mouseLeaveTime||this.recordEnter(e),this.eventInvoke(e)},recordEnter(e){this.mouseEnterTime=e.timeStamp,this.hoverTick=setTimeout(()=>{this.recordLeave({timeStamp:+new Date+1/0})},this.hoverTime)},onMouseLeave(e){this.recordLeave(e)},recordLeave(e){this.mouseEnterTime&&!this.mouseLeaveTime&&(this.mouseLeaveTime=e.timeStamp),this.calcGestures(),this.hoverTick&&clearTimeout(this.hoverTick)},onMouseDown(e){this.onRecordMove(e),this.eventInvoke(e)},onRecordMove(e){this.recordDown(e),this.triggerMove()},recordDown(e){this.lastTouchstartTime=this.touchstartTime,this.touchstartTime=e.timeStamp;const t=e.touches?e.touches[0]:e;this.lastTouchstartCoord=this.touchstartCoord,this.touchstartCoord={pageX:t.pageX,pageY:t.pageY}},triggerMove(){this.events.moves.map(e=>{this.ele.addEventListener(e,this[i[e]])})},onMouseMove(e){this.eventInvoke(e)},onMouseWheel(e){this.lastWheelOffset=this.wheelOffset;const t=e.wheelDelta&&e.deltaY?-1*e.wheelDelta:event.deltaY;this.wheelOffset=t,this.calcGestures(),this.eventInvoke(e)},onMouseUp(e){this.recordUp(e),this.calcGestures(),this.unTriggerMove(),this.eventInvoke(e)},recordUp(e){this.lastTouchendTime=this.touchendTime,this.touchendTime=e.timeStamp;const t=e.changedTouches?e.changedTouches[0]:e;this.lastTouchendCoord=this.touchendCoord,this.touchendCoord={pageX:t.pageX,pageY:t.pageY}},unTriggerMove(){this.events.moves.map(e=>{this.ele.removeEventListener(e,this[i[e]])})},calcGestures:function(){let e=0;return function(){const t=+Date.now();if(t-e<+this.freezeTime)return;e=t;const{tapTimeInterval:s,tapOffsetThresholdSquared:o,swipeOffsetThreshold:i}=this.judgeConfig,h={hover:()=>this.mouseHoverTime>=+this.hoverTime,hoverOut:()=>!0,tap:()=>this.timeInterval<s&&this.pageXOffset**2<o,swipeUp:()=>{const e=this.timeInterval<s&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset>i,t=this.enableMouse&&this.wheelOffset<0;return e||t},swipeDown:()=>{const e=this.timeInterval<s&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset<i,t=this.enableMouse&&this.wheelOffset>0;return e||t}},r=n.find(e=>this[e]&&h[e]&&h[e]()&&(()=>this[e]()));r&&this[r](),this.reset()}}(),reset(){this.touchstartTime=null,this.touchendTime=null,this.touchstartCoord={},this.touchendCoord={},this.wheelOffset=0,this.mouseEnterTime=null,this.mouseLeaveTime=null,this.lastTouchendTime=null,this.lastTouchstartTime=null,this.lastTouchstartCoord={},this.lastTouchendCoord={},this.lastWheelOffset=0},calcEventsName(){const e=[...o.isMobile?["touchstart","touchend","touchcancel"]:this.enableMouse?["mousedown","mouseup","mouseenter","mouseleave"]:[],...this.enableMouseWheel?["onwheel"in document?"wheel":"mousewheel"]:[]],t=[...o.isMobile?["touchmove"]:[],...this.enableMouse?["mousemove"]:[]];this.events={listens:e,moves:t}}}},r=s(0),a=Object(r.a)(h,(function(){return(0,this._self._c)("div",{ref:"gesture"},[this._t("default")],2)}),[],!1,null,null,null);t.a=a.exports},315:function(e,t,s){"use strict";s(304)},321:function(e,t,s){"use strict";s.r(t);s(15);var o=s(309),i=s(55),n=s.n(i);const h="ID-"+String(Math.random()).slice(-6),r=(e,t)=>~~(Math.random()*(t-e))+e;var a={components:{Gesture:o.a},props:{images:Array,handleURL:Function},data:()=>({componentID:h,scrollTop:null,firstTime:!0,request:!1,visible:!1,$eles:[],displayImages:[],cordRec:null,offset:{x:0,y:0}}),computed:{animClass(){const e=[this.visible?"in":"out"];return!this.visible&&this.firstTime&&(this.firstTime=!1,e.pop()),e}},watch:{visible(e){e&&this.$nextTick(()=>{this.cardIn()})}},mounted(){const e=[];for(;e.length<10;){const t=r(0,this.images.length),s=this.images[t];!e.includes(s)&&s&&e.push(s)}this.displayImages=e.map(e=>({name:e.replace&&e.replace(".jpg","")||e.title||e.name,src:this.handleURL(e.imageURL||e)})),this.$nextTick(()=>{this.$eles=[...this.$refs[h+"-grid"].querySelectorAll(".grid__item")]})},beforeDestroy(){this.cancel()},methods:{cardIn(){this.$eles.map(e=>r(0,500)).map((e,t)=>{setTimeout(()=>{this.$eles[t].classList.add("in")},e)})},startBackground(){this.scrollTop=document.querySelector("html").scrollTop,this.visible=!0,this.listenOffset(),setTimeout(()=>{this.$root.$el.classList.add("no-move")},300)},stopBackground(){this.cordRec=null,this.visible=!1,this.cancel(),this.$root.$el.classList.remove("no-move"),document.querySelector("html").scrollTop=this.scrollTop,this.scrollTop=null,setTimeout(()=>{this.$refs[h+"-grid"].style.setProperty("--offset-x",0),this.$refs[h+"-grid"].style.setProperty("--offset-y",0)},1e3)},listenOffset(){document.addEventListener("mousemove",this.handleMove),document.addEventListener("touchmove",this.handleMove),document.addEventListener("mouseup",this.cancel),document.addEventListener("touchend",this.cancel),document.addEventListener("touchcancel",this.cancel)},handleMove(e){const t=e.touches?e.touches[0]:e;this.cordRec||(this.cordRec={x:t.pageX,y:t.pageY}),this.offset={x:t.pageX-this.cordRec.x,y:t.pageY-this.cordRec.y},this.calcOffset(),e.preventDefault&&e.preventDefault()},cancel(){document.removeEventListener("mousemove",this.handleMove),document.removeEventListener("touchmove",this.handleMove),document.removeEventListener("mouseup",this.cancel),document.removeEventListener("touchend",this.cancel),document.removeEventListener("touchcancel",this.cancel)},calcOffset(){const{x:e,y:t}=this.offset;n.a.requestAnimationFrame(()=>{this.$refs[h+"-grid"].style.setProperty("--offset-x",e+"px"),this.$refs[h+"-grid"].style.setProperty("--offset-y",t+"px")})},requestOnHover(e){e&&"mouseenter"===e.type&&(this.request=!0)}}},u=(s(315),s(0)),l=Object(u.a)(a,(function(){var e=this,t=e._self._c;return t("Gesture",{attrs:{hover:()=>this.startBackground(),hoverTime:"1500",eventInvoke:e.requestOnHover}},[t("div",{staticClass:"slot-con"},[e._t("default")],2),e._v(" "),t("div",{staticClass:"full-background-cmpt",class:e.animClass},[t("div",{ref:e.componentID+"-grid",staticClass:"grid"},[this.request?e._l(e.displayImages,(function(s){return t("div",{key:s.src,staticClass:"grid__item"},[t("div",{staticClass:"grid__item-img",style:{"background-image":`url('${encodeURI(s.src)}')`}},[t("div",{staticClass:"name"},[e._v(e._s(s.name))])])])})):e._e(),e._v(" "),t("div",{staticClass:"info"},[e._v("Favourite 100th")]),e._v(" "),t("div",{staticClass:"info-shadow"},[e._v("Favourite 100th")])],2),e._v(" "),t("div",{staticClass:"close-btn",on:{click:()=>this.stopBackground()}})])])}),[],!1,null,null,null);t.default=l.exports}}]);