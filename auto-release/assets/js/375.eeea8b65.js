(window.webpackJsonp=window.webpackJsonp||[]).push([[375],{675:function(e,t,s){"use strict";s.r(t);s(123);const o=s(55),h={touchstart:"onMouseDown",mousedown:"onMouseDown",touchend:"onMouseUp",mouseup:"onMouseUp",touchmove:"onMouseMove",mousemove:"onMouseMove",touchcancel:"onMouseUp",wheel:"onMouseWheel",mousewheel:"onMouseWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},i=["hover","hoverOut","tap","swipeUp","swipeDown"];var n={name:"gesture-cmpt",props:{...i.reduce((e,t)=>(e[t]=Function,e),{}),hoverTime:{type:[Number,String],default:100},enableMouse:{type:Boolean,default:!0},enableMouseWheel:{type:Boolean,default:!0},judgeConfig:{type:Object,default:()=>({tapTimeInterval:300,tapOffsetThresholdSquared:25,swipeOffsetThreshold:80})},freezeTime:{type:[Number,String],default:1e3/30},eventInvoke:{type:Function,default:()=>{}}},data:()=>({touchstartTime:0,touchendTime:0,touchstartCoord:{},touchendCoord:{},wheelOffset:0,mouseEnterTime:null,mouseLeaveTime:null,hoverTick:null,lastTouchendTime:0,lastTouchstartTime:0,lastTouchstartCoord:{},lastTouchendCoord:{},lastWheelOffset:0,shouldInit:null,ele:null,events:{listens:[]}}),computed:{timeInterval(){return this.touchendTime-this.touchstartTime},pageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},pageXOffsetAbs(){return Math.abs(this.pageXOffset)},pageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},pageYOffsetAbs(){return Math.abs(this.pageYOffset)},lastTimeInterval(){return this.lastTouchendTime-this.lastTouchstartTime},lastPageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},lastPageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},deltaTime(){return this.touchendTime-this.lastTouchstartTim},mouseHoverTime(){return this.mouseLeaveTime-this.mouseEnterTime}},mounted(){this.shouldInit=Object.keys(this.$props).find(e=>i.includes(e)&&this[e]),this.shouldInit&&(this.calcEventsName(),this.ele=this.$refs.gesture,this.events.listens.map(e=>{this.ele.addEventListener(e,this[h[e]])}))},beforeDestroy(){this.shouldInit&&this.events.listens.map(e=>{this.ele.removeEventListener(e,this[h[e]])})},methods:{onMouseEnter(e){this.mouseEnterTime||this.mouseLeaveTime||this.recordEnter(e),this.eventInvoke(e)},recordEnter(e){this.mouseEnterTime=e.timeStamp,this.hoverTick=setTimeout(()=>{this.recordLeave({timeStamp:+new Date+1/0})},this.hoverTime)},onMouseLeave(e){this.recordLeave(e)},recordLeave(e){this.mouseEnterTime&&!this.mouseLeaveTime&&(this.mouseLeaveTime=e.timeStamp),this.calcGestures(),this.hoverTick&&clearTimeout(this.hoverTick)},onMouseDown(e){this.onRecordMove(e),this.eventInvoke(e)},onRecordMove(e){this.recordDown(e),this.triggerMove()},recordDown(e){this.lastTouchstartTime=this.touchstartTime,this.touchstartTime=e.timeStamp;const t=e.touches?e.touches[0]:e;this.lastTouchstartCoord=this.touchstartCoord,this.touchstartCoord={pageX:t.pageX,pageY:t.pageY}},triggerMove(){this.events.moves.map(e=>{this.ele.addEventListener(e,this[h[e]])})},onMouseMove(e){this.eventInvoke(e)},onMouseWheel(e){this.lastWheelOffset=this.wheelOffset;const t=e.wheelDelta&&e.deltaY?-1*e.wheelDelta:event.deltaY;this.wheelOffset=t,this.calcGestures(),this.eventInvoke(e)},onMouseUp(e){this.recordUp(e),this.calcGestures(),this.unTriggerMove(),this.eventInvoke(e)},recordUp(e){this.lastTouchendTime=this.touchendTime,this.touchendTime=e.timeStamp;const t=e.changedTouches?e.changedTouches[0]:e;this.lastTouchendCoord=this.touchendCoord,this.touchendCoord={pageX:t.pageX,pageY:t.pageY}},unTriggerMove(){this.events.moves.map(e=>{this.ele.removeEventListener(e,this[h[e]])})},calcGestures:function(){let e=0;return function(){const t=+Date.now();if(t-e<+this.freezeTime)return;e=t;const{tapTimeInterval:s,tapOffsetThresholdSquared:o,swipeOffsetThreshold:h}=this.judgeConfig,n={hover:()=>this.mouseHoverTime>=+this.hoverTime,hoverOut:()=>!0,tap:()=>this.timeInterval<s&&this.pageXOffset**2<o,swipeUp:()=>{const e=this.timeInterval<s&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset>h,t=this.enableMouse&&this.wheelOffset<0;return e||t},swipeDown:()=>{const e=this.timeInterval<s&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset<h,t=this.enableMouse&&this.wheelOffset>0;return e||t}},u=i.find(e=>this[e]&&n[e]&&n[e]()&&(()=>this[e]()));u&&this[u](),this.reset()}}(),reset(){this.touchstartTime=null,this.touchendTime=null,this.touchstartCoord={},this.touchendCoord={},this.wheelOffset=0,this.mouseEnterTime=null,this.mouseLeaveTime=null,this.lastTouchendTime=null,this.lastTouchstartTime=null,this.lastTouchstartCoord={},this.lastTouchendCoord={},this.lastWheelOffset=0},calcEventsName(){const e=[...o.isMobile?["touchstart","touchend","touchcancel"]:this.enableMouse?["mousedown","mouseup","mouseenter","mouseleave"]:[],...this.enableMouseWheel?["onwheel"in document?"wheel":"mousewheel"]:[]],t=[...o.isMobile?["touchmove"]:[],...this.enableMouse?["mousemove"]:[]];this.events={listens:e,moves:t}}}},u=s(0),r=Object(u.a)(n,(function(){return(0,this._self._c)("div",{ref:"gesture"},[this._t("default")],2)}),[],!1,null,null,null);t.default=r.exports}}]);