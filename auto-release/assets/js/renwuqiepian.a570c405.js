(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{918:function(n,t,s){"use strict";s.r(t);var a=s(0),e=Object(a.a)({},(function(){var n=this,t=n._self._c;return t("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[t("h1",{attrs:{id:"任务切片"}},[n._v("任务切片")]),n._v(" "),t("p",[n._v("JS 执行会抢占 UI 渲染的时间，若 JS 任务长时间运作，页面看起来就会像“假死”，连滚动操作都无法正常进行。使用任务切片技术能使页面在不使用 Web Worker 的情况下榨干页面性能，并保持 UI 响应。")]),n._v(" "),t("p",[n._v("以下图形中有 400 个圆形。每 600ms 会对圆形进行一次更新。使用全量更新策略在我的个人电脑需要耗时约 360ms，也就意味着只有 2/5 的时间留给浏览器响应 UI 渲染。若使用任务切片，虽然总任务执行时间延长到 460ms，但令人惊喜的是，无论是滚动操作，还是界面中的动画，滚动页面带来的卡顿都得到缓解。")]),n._v(" "),t("Article-G200919-TaskSlice"),n._v(" "),t("p",[n._v("滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。\n滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试滚动测试。")]),n._v(" "),t("h2",{attrs:{id:"关键代码"}},[n._v("关键代码")]),n._v(" "),t("h4",{attrs:{id:"fps"}},[n._v("FPS")]),n._v(" "),t("p",[n._v("FPS 统计使用了 requestAnimationFrame API。")]),n._v(" "),t("p",[n._v("第一种方法来自 "),t("a",{attrs:{href:"https://mp.weixin.qq.com/s/fD-jtZ0ETUWwyL3YhmA3kw",target:"_blank",rel:"noopener noreferrer"}},[n._v("AlloyTeam 的示例代码")]),n._v("，通过累计时间以计算每一秒的帧率。")]),n._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("let")]),n._v(" lastTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" performance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("let")]),n._v(" frames "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("0")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[n._v("loop")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=>")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" currentTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" performance"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("now")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n    frames "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1")]),n._v("\n    "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("if")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("currentTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v(">")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1000")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),n._v(" lastTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n        fps "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" Math"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("round")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("frames "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("*")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1000")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("/")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("currentTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("-")]),n._v(" lastTime"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n        frames "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("0")]),n._v("\n        lastTime "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" currentTime\n        console"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("log")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token template-string"}},[t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[n._v("`")]),t("span",{pre:!0,attrs:{class:"token string"}},[n._v("fps:")]),t("span",{pre:!0,attrs:{class:"token interpolation"}},[t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[n._v("${")]),n._v("fps"),t("span",{pre:!0,attrs:{class:"token interpolation-punctuation punctuation"}},[n._v("}")])]),t("span",{pre:!0,attrs:{class:"token template-punctuation string"}},[n._v("`")])]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n      "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n    window"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("requestAnimationFrame")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("loop"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("loop")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n")])])]),t("p",[n._v("也可以实施计算每一秒帧率。")]),n._v(" "),t("div",{staticClass:"language-js extra-class"},[t("pre",{pre:!0,attrs:{class:"language-js"}},[t("code",[t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("let")]),n._v(" date "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("new")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Date")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token function-variable function"}},[n._v("step")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=>")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("{")]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("const")]),n._v(" currentFPS "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" Math"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("floor")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[n._v("1000")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("/")]),n._v(" Math"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("abs")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("date "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("-")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("date "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("=")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[n._v("+")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("new")]),n._v(" "),t("span",{pre:!0,attrs:{class:"token class-name"}},[n._v("Date")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token keyword"}},[n._v("this")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(".")]),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("$emit")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),t("span",{pre:!0,attrs:{class:"token string"}},[n._v("'onFPS'")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(",")]),n._v(" currentFPS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n  "),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("requestAnimationFrame")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("step"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("}")]),n._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[n._v("requestAnimationFrame")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v("(")]),n._v("step"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[n._v(")")]),n._v("\n")])])])],1)}),[],!1,null,null,null);t.default=e.exports}}]);