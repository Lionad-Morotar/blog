[{"data":1,"prerenderedAt":1848},["ShallowReactive",2],{"navigation":3,"/articles/zindex-manager":155,"/articles/zindex-manager-surround":1843},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":61,"_dir":156,"_draft":157,"_partial":157,"_locale":158,"title":60,"description":159,"body":160,"_type":1837,"_id":1838,"_source":1839,"_file":1840,"_stem":1841,"_extension":1842},"articles",false,"","使用 element-plus 内的层级管理器可以解决多组件库间层级不统一的问题",{"type":161,"children":162,"toc":1830},"root",[163,172,178,183,188,209,218,223,228,234,239,747,752,967,972,985,990,998,1003,1008,1013,1018,1023,1273,1278,1772,1777,1792,1825],{"type":164,"tag":165,"props":166,"children":168},"element","h2",{"id":167},"增订-2022年9月5日",[169],{"type":170,"value":171},"text","增订 | 2022年9月5日",{"type":164,"tag":173,"props":174,"children":175},"p",{},[176],{"type":170,"value":177},"终于把两个 ElementPlus 实例干得只剩了一个，也顺带解决了一些项目中出现的稀奇古怪的问题。不过，这里容我吐槽一句，目前来说 ElementPlus 的问题是真的多，因为遇见 A 问题所以升级 Element 版本却引起了 B 问题这种情况屡见不鲜。我经常对着问题一调试就是两三个小时，恍惚之间就下班了，觉得一天喂狗了。呼呼，我想摸鱼啊，请给机会！",{"type":164,"tag":165,"props":179,"children":181},{"id":180},"背景",[182],{"type":170,"value":180},{"type":164,"tag":173,"props":184,"children":185},{},[186],{"type":170,"value":187},"上周在项目中碰到个棘手的问题。公司某项目依赖了两个不同的组件库，element-plus@2.0.2 和 element-plus@2.1.8。由于没把两个组件库的 zIndex 统一管理起来，所以这两库的弹窗各弹各的，可能互相遮住，很是尴尬。",{"type":164,"tag":173,"props":189,"children":190},{},[191,193,207],{"type":170,"value":192},"举例说明一下，两个组件库以下使用简称 E1 和 E2。element-plus（以及 element-ui）在内部实现了 zIndex 管理器，使打开的弹框的 zIndex 永远递增，解决了在单个 element 内部打开 dialog、popover、selector-option 等组件时互相遮盖的问题。element 默认的 zIndex 起始值是 2000，首先打开一个弹窗，dialog1，dialog1 的 zIndex 设置为 2001，如果在 dialog1 中使用按钮用打开了新的 dialog2，那么 dialog2 的 zIndex 值被置为 2002，遮住了 dialog1，这是正常的",{"type":164,"tag":194,"props":195,"children":196},"sup",{},[197],{"type":164,"tag":198,"props":199,"children":204},"a",{"href":200,"ariaDescribedBy":201,"dataFootnoteRef":158,"id":203},"#user-content-fn-append-to-body",[202],"footnote-label","user-content-fnref-append-to-body",[205],{"type":170,"value":206},"1",{"type":170,"value":208},"。那么问题来了，以上两个 dialog 都是通过 E1 打开的，一但在 dialog2 引用了 E2 的组件，打开弹窗 dialog3，那么 dialog3 的 zIndex 使用的是 E2 从 2000 开始递增为 2001 的值，不足以遮盖 E1 中 2002 的 dialog2，所以 dialog3 被 dialog2 遮挡，显示异常。",{"type":164,"tag":173,"props":210,"children":211},{},[212],{"type":164,"tag":213,"props":214,"children":217},"img",{"alt":215,"src":216},"打开多个弹窗示例","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220814192040.png",[],{"type":164,"tag":165,"props":219,"children":221},{"id":220},"解决",[222],{"type":170,"value":220},{"type":164,"tag":173,"props":224,"children":225},{},[226],{"type":170,"value":227},"统一多组件库层叠顺序，意味着将 E1 和 E2 内部实现的 zIndex 管理器中的 zIndex 通过某种形式关联起来。由于对 element 内部的实现不是很熟悉，所以一开始团队成员内部讨论时提出过许多天马行空的设想，比如“将 E2 的 zIndex 管理器作为 external 载入”、或是“使用 MutationObserver 检测 DOM 变化读取最新的 zIndex 值”... 最坏的情况是把当前的 element fork 出一份代码来自己维护，改造 zIndex 管理器实现多项目的统一管理。这些方案听起来不是那么可靠，所以我们决定先看看 element 的实现再近一步思考更优雅的解决方案。",{"type":164,"tag":229,"props":230,"children":232},"h4",{"id":231},"层叠管理器",[233],{"type":170,"value":231},{"type":164,"tag":173,"props":235,"children":236},{},[237],{"type":170,"value":238},"element-plus 的层叠管理器（PopupManager）实现比较简单，其核心原理和 element-ui 一致，通过闭包维护了一个 zIndex 的值的单例，暴露出获取值以及递增值的接口，以方便内部的 dialog 等组件在需要的时候有能力获取最新 zIndex 或者对 zIndex 进行递增。element-plus 中的层叠值管理的实现甚至比 element-ui 还要简单，它是一个 vue3 的 hook，只有 20 行代码。",{"type":164,"tag":240,"props":241,"children":245},"pre",{"className":242,"code":243,"language":244,"meta":158,"style":158},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","import { ref, computed } from 'vue'\nimport { useGlobalConfig } from '../use-global-config'\n\nconst zIndex = ref(0)\n\nexport const useZIndex = () => {\n  const initialZIndex = useGlobalConfig('zIndex', 2000) // TODO: move to @element-plus/constants\n  const currentZIndex = computed(() => initialZIndex.value + zIndex.value)\n\n  const nextZIndex = () => {\n    zIndex.value++\n    return currentZIndex.value\n  }\n\n  return {\n    initialZIndex,\n    currentZIndex,\n    nextZIndex,\n  }\n}\n","js",[246],{"type":164,"tag":247,"props":248,"children":249},"code",{"__ignoreMap":158},[250,311,349,359,402,410,449,510,579,587,616,638,660,669,677,690,704,717,730,738],{"type":164,"tag":251,"props":252,"children":255},"span",{"class":253,"line":254},"line",1,[256,262,268,274,279,284,289,294,300,306],{"type":164,"tag":251,"props":257,"children":259},{"style":258},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[260],{"type":170,"value":261},"import",{"type":164,"tag":251,"props":263,"children":265},{"style":264},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[266],{"type":170,"value":267}," {",{"type":164,"tag":251,"props":269,"children":271},{"style":270},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[272],{"type":170,"value":273}," ref",{"type":164,"tag":251,"props":275,"children":276},{"style":264},[277],{"type":170,"value":278},",",{"type":164,"tag":251,"props":280,"children":281},{"style":270},[282],{"type":170,"value":283}," computed",{"type":164,"tag":251,"props":285,"children":286},{"style":264},[287],{"type":170,"value":288}," }",{"type":164,"tag":251,"props":290,"children":291},{"style":258},[292],{"type":170,"value":293}," from",{"type":164,"tag":251,"props":295,"children":297},{"style":296},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[298],{"type":170,"value":299}," '",{"type":164,"tag":251,"props":301,"children":303},{"style":302},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[304],{"type":170,"value":305},"vue",{"type":164,"tag":251,"props":307,"children":308},{"style":296},[309],{"type":170,"value":310},"'\n",{"type":164,"tag":251,"props":312,"children":314},{"class":253,"line":313},2,[315,319,323,328,332,336,340,345],{"type":164,"tag":251,"props":316,"children":317},{"style":258},[318],{"type":170,"value":261},{"type":164,"tag":251,"props":320,"children":321},{"style":264},[322],{"type":170,"value":267},{"type":164,"tag":251,"props":324,"children":325},{"style":270},[326],{"type":170,"value":327}," useGlobalConfig",{"type":164,"tag":251,"props":329,"children":330},{"style":264},[331],{"type":170,"value":288},{"type":164,"tag":251,"props":333,"children":334},{"style":258},[335],{"type":170,"value":293},{"type":164,"tag":251,"props":337,"children":338},{"style":296},[339],{"type":170,"value":299},{"type":164,"tag":251,"props":341,"children":342},{"style":302},[343],{"type":170,"value":344},"../use-global-config",{"type":164,"tag":251,"props":346,"children":347},{"style":296},[348],{"type":170,"value":310},{"type":164,"tag":251,"props":350,"children":352},{"class":253,"line":351},3,[353],{"type":164,"tag":251,"props":354,"children":356},{"emptyLinePlaceholder":355},true,[357],{"type":170,"value":358},"\n",{"type":164,"tag":251,"props":360,"children":362},{"class":253,"line":361},4,[363,369,375,381,386,391,397],{"type":164,"tag":251,"props":364,"children":366},{"style":365},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[367],{"type":170,"value":368},"const",{"type":164,"tag":251,"props":370,"children":372},{"style":371},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[373],{"type":170,"value":374}," zIndex",{"type":164,"tag":251,"props":376,"children":378},{"style":377},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[379],{"type":170,"value":380}," =",{"type":164,"tag":251,"props":382,"children":384},{"style":383},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[385],{"type":170,"value":273},{"type":164,"tag":251,"props":387,"children":388},{"style":270},[389],{"type":170,"value":390},"(",{"type":164,"tag":251,"props":392,"children":394},{"style":393},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[395],{"type":170,"value":396},"0",{"type":164,"tag":251,"props":398,"children":399},{"style":270},[400],{"type":170,"value":401},")\n",{"type":164,"tag":251,"props":403,"children":405},{"class":253,"line":404},5,[406],{"type":164,"tag":251,"props":407,"children":408},{"emptyLinePlaceholder":355},[409],{"type":170,"value":358},{"type":164,"tag":251,"props":411,"children":413},{"class":253,"line":412},6,[414,419,424,430,434,439,444],{"type":164,"tag":251,"props":415,"children":416},{"style":258},[417],{"type":170,"value":418},"export",{"type":164,"tag":251,"props":420,"children":421},{"style":365},[422],{"type":170,"value":423}," const",{"type":164,"tag":251,"props":425,"children":427},{"style":426},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[428],{"type":170,"value":429}," useZIndex",{"type":164,"tag":251,"props":431,"children":432},{"style":377},[433],{"type":170,"value":380},{"type":164,"tag":251,"props":435,"children":436},{"style":264},[437],{"type":170,"value":438}," ()",{"type":164,"tag":251,"props":440,"children":441},{"style":365},[442],{"type":170,"value":443}," =>",{"type":164,"tag":251,"props":445,"children":446},{"style":264},[447],{"type":170,"value":448}," {\n",{"type":164,"tag":251,"props":450,"children":452},{"class":253,"line":451},7,[453,458,463,467,471,476,481,486,490,494,499,504],{"type":164,"tag":251,"props":454,"children":455},{"style":365},[456],{"type":170,"value":457},"  const",{"type":164,"tag":251,"props":459,"children":460},{"style":371},[461],{"type":170,"value":462}," initialZIndex",{"type":164,"tag":251,"props":464,"children":465},{"style":377},[466],{"type":170,"value":380},{"type":164,"tag":251,"props":468,"children":469},{"style":383},[470],{"type":170,"value":327},{"type":164,"tag":251,"props":472,"children":474},{"style":473},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[475],{"type":170,"value":390},{"type":164,"tag":251,"props":477,"children":478},{"style":296},[479],{"type":170,"value":480},"'",{"type":164,"tag":251,"props":482,"children":483},{"style":302},[484],{"type":170,"value":485},"zIndex",{"type":164,"tag":251,"props":487,"children":488},{"style":296},[489],{"type":170,"value":480},{"type":164,"tag":251,"props":491,"children":492},{"style":264},[493],{"type":170,"value":278},{"type":164,"tag":251,"props":495,"children":496},{"style":393},[497],{"type":170,"value":498}," 2000",{"type":164,"tag":251,"props":500,"children":501},{"style":473},[502],{"type":170,"value":503},") ",{"type":164,"tag":251,"props":505,"children":507},{"style":506},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[508],{"type":170,"value":509},"// TODO: move to @element-plus/constants\n",{"type":164,"tag":251,"props":511,"children":513},{"class":253,"line":512},8,[514,518,523,527,531,535,540,544,548,553,558,563,567,571,575],{"type":164,"tag":251,"props":515,"children":516},{"style":365},[517],{"type":170,"value":457},{"type":164,"tag":251,"props":519,"children":520},{"style":371},[521],{"type":170,"value":522}," currentZIndex",{"type":164,"tag":251,"props":524,"children":525},{"style":377},[526],{"type":170,"value":380},{"type":164,"tag":251,"props":528,"children":529},{"style":383},[530],{"type":170,"value":283},{"type":164,"tag":251,"props":532,"children":533},{"style":473},[534],{"type":170,"value":390},{"type":164,"tag":251,"props":536,"children":537},{"style":264},[538],{"type":170,"value":539},"()",{"type":164,"tag":251,"props":541,"children":542},{"style":365},[543],{"type":170,"value":443},{"type":164,"tag":251,"props":545,"children":546},{"style":270},[547],{"type":170,"value":462},{"type":164,"tag":251,"props":549,"children":550},{"style":264},[551],{"type":170,"value":552},".",{"type":164,"tag":251,"props":554,"children":555},{"style":270},[556],{"type":170,"value":557},"value",{"type":164,"tag":251,"props":559,"children":560},{"style":377},[561],{"type":170,"value":562}," +",{"type":164,"tag":251,"props":564,"children":565},{"style":270},[566],{"type":170,"value":374},{"type":164,"tag":251,"props":568,"children":569},{"style":264},[570],{"type":170,"value":552},{"type":164,"tag":251,"props":572,"children":573},{"style":270},[574],{"type":170,"value":557},{"type":164,"tag":251,"props":576,"children":577},{"style":473},[578],{"type":170,"value":401},{"type":164,"tag":251,"props":580,"children":582},{"class":253,"line":581},9,[583],{"type":164,"tag":251,"props":584,"children":585},{"emptyLinePlaceholder":355},[586],{"type":170,"value":358},{"type":164,"tag":251,"props":588,"children":590},{"class":253,"line":589},10,[591,595,600,604,608,612],{"type":164,"tag":251,"props":592,"children":593},{"style":365},[594],{"type":170,"value":457},{"type":164,"tag":251,"props":596,"children":597},{"style":426},[598],{"type":170,"value":599}," nextZIndex",{"type":164,"tag":251,"props":601,"children":602},{"style":377},[603],{"type":170,"value":380},{"type":164,"tag":251,"props":605,"children":606},{"style":264},[607],{"type":170,"value":438},{"type":164,"tag":251,"props":609,"children":610},{"style":365},[611],{"type":170,"value":443},{"type":164,"tag":251,"props":613,"children":614},{"style":264},[615],{"type":170,"value":448},{"type":164,"tag":251,"props":617,"children":619},{"class":253,"line":618},11,[620,625,629,633],{"type":164,"tag":251,"props":621,"children":622},{"style":270},[623],{"type":170,"value":624},"    zIndex",{"type":164,"tag":251,"props":626,"children":627},{"style":264},[628],{"type":170,"value":552},{"type":164,"tag":251,"props":630,"children":631},{"style":270},[632],{"type":170,"value":557},{"type":164,"tag":251,"props":634,"children":635},{"style":377},[636],{"type":170,"value":637},"++\n",{"type":164,"tag":251,"props":639,"children":641},{"class":253,"line":640},12,[642,647,651,655],{"type":164,"tag":251,"props":643,"children":644},{"style":258},[645],{"type":170,"value":646},"    return",{"type":164,"tag":251,"props":648,"children":649},{"style":270},[650],{"type":170,"value":522},{"type":164,"tag":251,"props":652,"children":653},{"style":264},[654],{"type":170,"value":552},{"type":164,"tag":251,"props":656,"children":657},{"style":270},[658],{"type":170,"value":659},"value\n",{"type":164,"tag":251,"props":661,"children":663},{"class":253,"line":662},13,[664],{"type":164,"tag":251,"props":665,"children":666},{"style":264},[667],{"type":170,"value":668},"  }\n",{"type":164,"tag":251,"props":670,"children":672},{"class":253,"line":671},14,[673],{"type":164,"tag":251,"props":674,"children":675},{"emptyLinePlaceholder":355},[676],{"type":170,"value":358},{"type":164,"tag":251,"props":678,"children":680},{"class":253,"line":679},15,[681,686],{"type":164,"tag":251,"props":682,"children":683},{"style":258},[684],{"type":170,"value":685},"  return",{"type":164,"tag":251,"props":687,"children":688},{"style":264},[689],{"type":170,"value":448},{"type":164,"tag":251,"props":691,"children":693},{"class":253,"line":692},16,[694,699],{"type":164,"tag":251,"props":695,"children":696},{"style":270},[697],{"type":170,"value":698},"    initialZIndex",{"type":164,"tag":251,"props":700,"children":701},{"style":264},[702],{"type":170,"value":703},",\n",{"type":164,"tag":251,"props":705,"children":707},{"class":253,"line":706},17,[708,713],{"type":164,"tag":251,"props":709,"children":710},{"style":270},[711],{"type":170,"value":712},"    currentZIndex",{"type":164,"tag":251,"props":714,"children":715},{"style":264},[716],{"type":170,"value":703},{"type":164,"tag":251,"props":718,"children":720},{"class":253,"line":719},18,[721,726],{"type":164,"tag":251,"props":722,"children":723},{"style":270},[724],{"type":170,"value":725},"    nextZIndex",{"type":164,"tag":251,"props":727,"children":728},{"style":264},[729],{"type":170,"value":703},{"type":164,"tag":251,"props":731,"children":733},{"class":253,"line":732},19,[734],{"type":164,"tag":251,"props":735,"children":736},{"style":264},[737],{"type":170,"value":668},{"type":164,"tag":251,"props":739,"children":741},{"class":253,"line":740},20,[742],{"type":164,"tag":251,"props":743,"children":744},{"style":264},[745],{"type":170,"value":746},"}\n",{"type":164,"tag":173,"props":748,"children":749},{},[750],{"type":170,"value":751},"useZIndex 可以在任意 vue setup 中调用。调用后的回调提供了 initialZIndex、currentZIndex、nextZIndex 三个接口。initialZIndex 是通过 ElementConfigProvider 传入的 zIndex 初始值；用 currentZIndex 能拿到最新的 zIndex 值；用 nextZindex 可以给 zIndex 递增后获取其值，因为 zIndex 是全局的单例，所以使用 nextZIndex 拿到的值一定是全局最大的 zIndex。",{"type":164,"tag":240,"props":753,"children":756},{"className":754,"code":755,"language":305,"meta":158,"style":158},"language-vue shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Ctemplate>\n  \u003Cdialog :style=\"{zIndex}\" />\n\u003C/template>\n\u003Cscript setup>\nconst { useZIndex } from \"../hooks/use-z-index\";\n// 这个 zIndex 一定是当前 element 中最大的 zIndex\nconst zIndex = useZIndex.nextZIndex();\n\u003C/script>\n",[757],{"type":164,"tag":247,"props":758,"children":759},{"__ignoreMap":158},[760,779,842,858,879,908,916,952],{"type":164,"tag":251,"props":761,"children":762},{"class":253,"line":254},[763,768,774],{"type":164,"tag":251,"props":764,"children":765},{"style":264},[766],{"type":170,"value":767},"\u003C",{"type":164,"tag":251,"props":769,"children":771},{"style":770},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[772],{"type":170,"value":773},"template",{"type":164,"tag":251,"props":775,"children":776},{"style":264},[777],{"type":170,"value":778},">\n",{"type":164,"tag":251,"props":780,"children":781},{"class":253,"line":313},[782,787,792,797,803,808,814,819,823,828,832,838],{"type":164,"tag":251,"props":783,"children":784},{"style":264},[785],{"type":170,"value":786},"  \u003C",{"type":164,"tag":251,"props":788,"children":789},{"style":770},[790],{"type":170,"value":791},"dialog",{"type":164,"tag":251,"props":793,"children":794},{"style":264},[795],{"type":170,"value":796}," :",{"type":164,"tag":251,"props":798,"children":800},{"style":799},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[801],{"type":170,"value":802},"style",{"type":164,"tag":251,"props":804,"children":805},{"style":264},[806],{"type":170,"value":807},"=",{"type":164,"tag":251,"props":809,"children":811},{"style":810},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[812],{"type":170,"value":813},"\"",{"type":164,"tag":251,"props":815,"children":816},{"style":264},[817],{"type":170,"value":818},"{",{"type":164,"tag":251,"props":820,"children":821},{"style":270},[822],{"type":170,"value":485},{"type":164,"tag":251,"props":824,"children":825},{"style":264},[826],{"type":170,"value":827},"}",{"type":164,"tag":251,"props":829,"children":830},{"style":810},[831],{"type":170,"value":813},{"type":164,"tag":251,"props":833,"children":835},{"style":834},"--shiki-light:#39ADB5;--shiki-light-font-style:inherit;--shiki-default:#B31D28;--shiki-default-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;--shiki-sepia:#F44747;--shiki-sepia-font-style:inherit",[836],{"type":170,"value":837}," /",{"type":164,"tag":251,"props":839,"children":840},{"style":264},[841],{"type":170,"value":778},{"type":164,"tag":251,"props":843,"children":844},{"class":253,"line":351},[845,850,854],{"type":164,"tag":251,"props":846,"children":847},{"style":264},[848],{"type":170,"value":849},"\u003C/",{"type":164,"tag":251,"props":851,"children":852},{"style":770},[853],{"type":170,"value":773},{"type":164,"tag":251,"props":855,"children":856},{"style":264},[857],{"type":170,"value":778},{"type":164,"tag":251,"props":859,"children":860},{"class":253,"line":361},[861,865,870,875],{"type":164,"tag":251,"props":862,"children":863},{"style":264},[864],{"type":170,"value":767},{"type":164,"tag":251,"props":866,"children":867},{"style":770},[868],{"type":170,"value":869},"script",{"type":164,"tag":251,"props":871,"children":872},{"style":799},[873],{"type":170,"value":874}," setup",{"type":164,"tag":251,"props":876,"children":877},{"style":264},[878],{"type":170,"value":778},{"type":164,"tag":251,"props":880,"children":881},{"class":253,"line":404},[882,886,890,894,898,903],{"type":164,"tag":251,"props":883,"children":884},{"style":365},[885],{"type":170,"value":368},{"type":164,"tag":251,"props":887,"children":888},{"style":264},[889],{"type":170,"value":267},{"type":164,"tag":251,"props":891,"children":892},{"style":371},[893],{"type":170,"value":429},{"type":164,"tag":251,"props":895,"children":896},{"style":264},[897],{"type":170,"value":288},{"type":164,"tag":251,"props":899,"children":900},{"style":270},[901],{"type":170,"value":902}," from \"../hooks/use-z-index\"",{"type":164,"tag":251,"props":904,"children":905},{"style":264},[906],{"type":170,"value":907},";\n",{"type":164,"tag":251,"props":909,"children":910},{"class":253,"line":412},[911],{"type":164,"tag":251,"props":912,"children":913},{"style":506},[914],{"type":170,"value":915},"// 这个 zIndex 一定是当前 element 中最大的 zIndex\n",{"type":164,"tag":251,"props":917,"children":918},{"class":253,"line":451},[919,923,927,931,935,939,944,948],{"type":164,"tag":251,"props":920,"children":921},{"style":365},[922],{"type":170,"value":368},{"type":164,"tag":251,"props":924,"children":925},{"style":371},[926],{"type":170,"value":374},{"type":164,"tag":251,"props":928,"children":929},{"style":377},[930],{"type":170,"value":380},{"type":164,"tag":251,"props":932,"children":933},{"style":270},[934],{"type":170,"value":429},{"type":164,"tag":251,"props":936,"children":937},{"style":264},[938],{"type":170,"value":552},{"type":164,"tag":251,"props":940,"children":941},{"style":383},[942],{"type":170,"value":943},"nextZIndex",{"type":164,"tag":251,"props":945,"children":946},{"style":270},[947],{"type":170,"value":539},{"type":164,"tag":251,"props":949,"children":950},{"style":264},[951],{"type":170,"value":907},{"type":164,"tag":251,"props":953,"children":954},{"class":253,"line":512},[955,959,963],{"type":164,"tag":251,"props":956,"children":957},{"style":264},[958],{"type":170,"value":849},{"type":164,"tag":251,"props":960,"children":961},{"style":770},[962],{"type":170,"value":869},{"type":164,"tag":251,"props":964,"children":965},{"style":264},[966],{"type":170,"value":778},{"type":164,"tag":229,"props":968,"children":970},{"id":969},"思路分析",[971],{"type":170,"value":969},{"type":164,"tag":173,"props":973,"children":974},{},[975,977,983],{"type":170,"value":976},"既然在 element-plus 的内部能使用 ",{"type":164,"tag":247,"props":978,"children":980},{"className":979},[],[981],{"type":170,"value":982},"const { useZIndex } from ...",{"type":170,"value":984}," 的形式拿到 zIndex 管理器暴露的接口，那么在项目中是否能通过一样的方法得到它呢？",{"type":164,"tag":173,"props":986,"children":987},{},[988],{"type":170,"value":989},"答案是肯定的。通过观察 element 的默认导出可以发现其中有 useZIndex 的存在。",{"type":164,"tag":173,"props":991,"children":992},{},[993],{"type":164,"tag":213,"props":994,"children":997},{"alt":995,"src":996},"exports in element-plus","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220814195047.png",[],{"type":164,"tag":173,"props":999,"children":1000},{},[1001],{"type":170,"value":1002},"解决多组件库统一层叠顺序问题的本质就是在项目的应用层再实现一个 zIndex 管理器。管理器需要接受来自不同组件库的 zIndex 管理器，并在任一管理器中的 zIndex 值发生变化时，把变化同步到其它管理器中。",{"type":164,"tag":173,"props":1004,"children":1005},{},[1006],{"type":170,"value":1007},"举个例子，我们在文章开头先使用 E1 打开了 dialog1 和 dialog2，使 E1 的 zIndex 从 2000 递增到 2001 再递增到 2002，如果再打开 E2 的 dialog3，我们希望 dialog3 的 zIndex 从 2002 递增到 2003，这也就意味着打开 dialog1 和 dialog2 时的 zIndex 递增需要从 E1 同步到 E2。",{"type":164,"tag":173,"props":1009,"children":1010},{},[1011],{"type":170,"value":1012},"既然 element 导出了 useZIndex，那问题就好办了。我们可以在项目中拿到 E1 以及 E2 的 useZIndex，用 vue watch 监听两个 useZIndex 回传的 currentZIndex 接口，并把小的那个 zIndex（对应上述 E2）通过 nextZIndex 接口递增到大的（对应上述 E1）。这样一来，E1 和 E2 的 zIndex 就相等，在下一次打开弹窗时，无论是使用 E1 还是使用 E2 的弹窗，其 zIndex 值都能保证在项目中最大。",{"type":164,"tag":229,"props":1014,"children":1016},{"id":1015},"代码实现",[1017],{"type":170,"value":1015},{"type":164,"tag":173,"props":1019,"children":1020},{},[1021],{"type":170,"value":1022},"代码实现时，团队的小伙伴写了以下代码，这段代码非常好理解，这里就不细说了。",{"type":164,"tag":240,"props":1024,"children":1026},{"className":242,"code":1025,"language":244,"meta":158,"style":158},"watch([\n  () => e1ZIndexContext.currentZIndex.value,\n  () => e2ZIndexContext.currentZIndex.value,\n], ([z1, z2]) => {\n  if (z1 \u003C z2) {\n    e1ZIndexContext.nextZIndex()\n  } else {\n    e2ZIndexContext.nextZIndex()\n  }\n})\n",[1027],{"type":164,"tag":247,"props":1028,"children":1029},{"__ignoreMap":158},[1030,1043,1081,1117,1162,1197,1218,1235,1255,1262],{"type":164,"tag":251,"props":1031,"children":1032},{"class":253,"line":254},[1033,1038],{"type":164,"tag":251,"props":1034,"children":1035},{"style":383},[1036],{"type":170,"value":1037},"watch",{"type":164,"tag":251,"props":1039,"children":1040},{"style":270},[1041],{"type":170,"value":1042},"([\n",{"type":164,"tag":251,"props":1044,"children":1045},{"class":253,"line":313},[1046,1051,1055,1060,1064,1069,1073,1077],{"type":164,"tag":251,"props":1047,"children":1048},{"style":264},[1049],{"type":170,"value":1050},"  ()",{"type":164,"tag":251,"props":1052,"children":1053},{"style":365},[1054],{"type":170,"value":443},{"type":164,"tag":251,"props":1056,"children":1057},{"style":270},[1058],{"type":170,"value":1059}," e1ZIndexContext",{"type":164,"tag":251,"props":1061,"children":1062},{"style":264},[1063],{"type":170,"value":552},{"type":164,"tag":251,"props":1065,"children":1066},{"style":270},[1067],{"type":170,"value":1068},"currentZIndex",{"type":164,"tag":251,"props":1070,"children":1071},{"style":264},[1072],{"type":170,"value":552},{"type":164,"tag":251,"props":1074,"children":1075},{"style":270},[1076],{"type":170,"value":557},{"type":164,"tag":251,"props":1078,"children":1079},{"style":264},[1080],{"type":170,"value":703},{"type":164,"tag":251,"props":1082,"children":1083},{"class":253,"line":351},[1084,1088,1092,1097,1101,1105,1109,1113],{"type":164,"tag":251,"props":1085,"children":1086},{"style":264},[1087],{"type":170,"value":1050},{"type":164,"tag":251,"props":1089,"children":1090},{"style":365},[1091],{"type":170,"value":443},{"type":164,"tag":251,"props":1093,"children":1094},{"style":270},[1095],{"type":170,"value":1096}," e2ZIndexContext",{"type":164,"tag":251,"props":1098,"children":1099},{"style":264},[1100],{"type":170,"value":552},{"type":164,"tag":251,"props":1102,"children":1103},{"style":270},[1104],{"type":170,"value":1068},{"type":164,"tag":251,"props":1106,"children":1107},{"style":264},[1108],{"type":170,"value":552},{"type":164,"tag":251,"props":1110,"children":1111},{"style":270},[1112],{"type":170,"value":557},{"type":164,"tag":251,"props":1114,"children":1115},{"style":264},[1116],{"type":170,"value":703},{"type":164,"tag":251,"props":1118,"children":1119},{"class":253,"line":361},[1120,1125,1129,1134,1140,1144,1149,1154,1158],{"type":164,"tag":251,"props":1121,"children":1122},{"style":270},[1123],{"type":170,"value":1124},"]",{"type":164,"tag":251,"props":1126,"children":1127},{"style":264},[1128],{"type":170,"value":278},{"type":164,"tag":251,"props":1130,"children":1131},{"style":264},[1132],{"type":170,"value":1133}," ([",{"type":164,"tag":251,"props":1135,"children":1137},{"style":1136},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1138],{"type":170,"value":1139},"z1",{"type":164,"tag":251,"props":1141,"children":1142},{"style":264},[1143],{"type":170,"value":278},{"type":164,"tag":251,"props":1145,"children":1146},{"style":1136},[1147],{"type":170,"value":1148}," z2",{"type":164,"tag":251,"props":1150,"children":1151},{"style":264},[1152],{"type":170,"value":1153},"])",{"type":164,"tag":251,"props":1155,"children":1156},{"style":365},[1157],{"type":170,"value":443},{"type":164,"tag":251,"props":1159,"children":1160},{"style":264},[1161],{"type":170,"value":448},{"type":164,"tag":251,"props":1163,"children":1164},{"class":253,"line":404},[1165,1170,1175,1179,1184,1188,1192],{"type":164,"tag":251,"props":1166,"children":1167},{"style":258},[1168],{"type":170,"value":1169},"  if",{"type":164,"tag":251,"props":1171,"children":1172},{"style":473},[1173],{"type":170,"value":1174}," (",{"type":164,"tag":251,"props":1176,"children":1177},{"style":270},[1178],{"type":170,"value":1139},{"type":164,"tag":251,"props":1180,"children":1181},{"style":377},[1182],{"type":170,"value":1183}," \u003C",{"type":164,"tag":251,"props":1185,"children":1186},{"style":270},[1187],{"type":170,"value":1148},{"type":164,"tag":251,"props":1189,"children":1190},{"style":473},[1191],{"type":170,"value":503},{"type":164,"tag":251,"props":1193,"children":1194},{"style":264},[1195],{"type":170,"value":1196},"{\n",{"type":164,"tag":251,"props":1198,"children":1199},{"class":253,"line":412},[1200,1205,1209,1213],{"type":164,"tag":251,"props":1201,"children":1202},{"style":270},[1203],{"type":170,"value":1204},"    e1ZIndexContext",{"type":164,"tag":251,"props":1206,"children":1207},{"style":264},[1208],{"type":170,"value":552},{"type":164,"tag":251,"props":1210,"children":1211},{"style":383},[1212],{"type":170,"value":943},{"type":164,"tag":251,"props":1214,"children":1215},{"style":473},[1216],{"type":170,"value":1217},"()\n",{"type":164,"tag":251,"props":1219,"children":1220},{"class":253,"line":451},[1221,1226,1231],{"type":164,"tag":251,"props":1222,"children":1223},{"style":264},[1224],{"type":170,"value":1225},"  }",{"type":164,"tag":251,"props":1227,"children":1228},{"style":258},[1229],{"type":170,"value":1230}," else",{"type":164,"tag":251,"props":1232,"children":1233},{"style":264},[1234],{"type":170,"value":448},{"type":164,"tag":251,"props":1236,"children":1237},{"class":253,"line":512},[1238,1243,1247,1251],{"type":164,"tag":251,"props":1239,"children":1240},{"style":270},[1241],{"type":170,"value":1242},"    e2ZIndexContext",{"type":164,"tag":251,"props":1244,"children":1245},{"style":264},[1246],{"type":170,"value":552},{"type":164,"tag":251,"props":1248,"children":1249},{"style":383},[1250],{"type":170,"value":943},{"type":164,"tag":251,"props":1252,"children":1253},{"style":473},[1254],{"type":170,"value":1217},{"type":164,"tag":251,"props":1256,"children":1257},{"class":253,"line":581},[1258],{"type":164,"tag":251,"props":1259,"children":1260},{"style":264},[1261],{"type":170,"value":668},{"type":164,"tag":251,"props":1263,"children":1264},{"class":253,"line":589},[1265,1269],{"type":164,"tag":251,"props":1266,"children":1267},{"style":264},[1268],{"type":170,"value":827},{"type":164,"tag":251,"props":1270,"children":1271},{"style":270},[1272],{"type":170,"value":401},{"type":164,"tag":173,"props":1274,"children":1275},{},[1276],{"type":170,"value":1277},"需要注意的是，可能有非常多组件依赖了 useZIndex 的内部的响应式值，所以直接使用 watch 暴力递增 zIndex 是有问题的。想象一下，每递增一次，相关 vue 组件会被收集到等待更新的队列中，如果 z1 和 z2 的差值很大，容易报栈溢出问题。好在解决方式也非常简单，使用 nextTick 分担每个 tick 的任务，并在回调中，根据最新的 zIndex 值进行 zIndex 递增就行了。",{"type":164,"tag":240,"props":1279,"children":1281},{"className":242,"code":1280,"language":244,"meta":158,"style":158},"const { watch, nextTick } from \"vue\"\nconst unwatch = null\n\nexport function useSameZIndex(ctx1, ctx2) {\n  unwatch && unwatch()\n  unwatch = watch([\n    () => ctx1.currentZIndex.value,\n    () => ctx2.currentZIndex.value,\n  ], ([z1, z2]) => nextTick(() => {\n    const [nz1, nz2] = [\n      ctx1.currentZIndex.value,\n      ctx2.currentZIndex.value\n    ]\n    if (nz1 \u003C nz2) {\n      ctx1.nextZIndex()\n    } else {\n      ctx2.nextZIndex()\n    }\n  })\n}\n",[1282],{"type":164,"tag":247,"props":1283,"children":1284},{"__ignoreMap":158},[1285,1319,1341,1348,1392,1413,1432,1469,1504,1560,1600,1628,1652,1660,1692,1711,1727,1746,1754,1765],{"type":164,"tag":251,"props":1286,"children":1287},{"class":253,"line":254},[1288,1292,1296,1301,1305,1310,1314],{"type":164,"tag":251,"props":1289,"children":1290},{"style":365},[1291],{"type":170,"value":368},{"type":164,"tag":251,"props":1293,"children":1294},{"style":264},[1295],{"type":170,"value":267},{"type":164,"tag":251,"props":1297,"children":1298},{"style":371},[1299],{"type":170,"value":1300}," watch",{"type":164,"tag":251,"props":1302,"children":1303},{"style":264},[1304],{"type":170,"value":278},{"type":164,"tag":251,"props":1306,"children":1307},{"style":371},[1308],{"type":170,"value":1309}," nextTick",{"type":164,"tag":251,"props":1311,"children":1312},{"style":264},[1313],{"type":170,"value":288},{"type":164,"tag":251,"props":1315,"children":1316},{"style":270},[1317],{"type":170,"value":1318}," from \"vue\"\n",{"type":164,"tag":251,"props":1320,"children":1321},{"class":253,"line":313},[1322,1326,1331,1335],{"type":164,"tag":251,"props":1323,"children":1324},{"style":365},[1325],{"type":170,"value":368},{"type":164,"tag":251,"props":1327,"children":1328},{"style":371},[1329],{"type":170,"value":1330}," unwatch",{"type":164,"tag":251,"props":1332,"children":1333},{"style":377},[1334],{"type":170,"value":380},{"type":164,"tag":251,"props":1336,"children":1338},{"style":1337},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1339],{"type":170,"value":1340}," null\n",{"type":164,"tag":251,"props":1342,"children":1343},{"class":253,"line":351},[1344],{"type":164,"tag":251,"props":1345,"children":1346},{"emptyLinePlaceholder":355},[1347],{"type":170,"value":358},{"type":164,"tag":251,"props":1349,"children":1350},{"class":253,"line":361},[1351,1355,1360,1365,1369,1374,1378,1383,1388],{"type":164,"tag":251,"props":1352,"children":1353},{"style":258},[1354],{"type":170,"value":418},{"type":164,"tag":251,"props":1356,"children":1357},{"style":365},[1358],{"type":170,"value":1359}," function",{"type":164,"tag":251,"props":1361,"children":1362},{"style":383},[1363],{"type":170,"value":1364}," useSameZIndex",{"type":164,"tag":251,"props":1366,"children":1367},{"style":264},[1368],{"type":170,"value":390},{"type":164,"tag":251,"props":1370,"children":1371},{"style":1136},[1372],{"type":170,"value":1373},"ctx1",{"type":164,"tag":251,"props":1375,"children":1376},{"style":264},[1377],{"type":170,"value":278},{"type":164,"tag":251,"props":1379,"children":1380},{"style":1136},[1381],{"type":170,"value":1382}," ctx2",{"type":164,"tag":251,"props":1384,"children":1385},{"style":264},[1386],{"type":170,"value":1387},")",{"type":164,"tag":251,"props":1389,"children":1390},{"style":264},[1391],{"type":170,"value":448},{"type":164,"tag":251,"props":1393,"children":1394},{"class":253,"line":404},[1395,1400,1405,1409],{"type":164,"tag":251,"props":1396,"children":1397},{"style":270},[1398],{"type":170,"value":1399},"  unwatch",{"type":164,"tag":251,"props":1401,"children":1402},{"style":377},[1403],{"type":170,"value":1404}," &&",{"type":164,"tag":251,"props":1406,"children":1407},{"style":383},[1408],{"type":170,"value":1330},{"type":164,"tag":251,"props":1410,"children":1411},{"style":473},[1412],{"type":170,"value":1217},{"type":164,"tag":251,"props":1414,"children":1415},{"class":253,"line":412},[1416,1420,1424,1428],{"type":164,"tag":251,"props":1417,"children":1418},{"style":270},[1419],{"type":170,"value":1399},{"type":164,"tag":251,"props":1421,"children":1422},{"style":377},[1423],{"type":170,"value":380},{"type":164,"tag":251,"props":1425,"children":1426},{"style":383},[1427],{"type":170,"value":1300},{"type":164,"tag":251,"props":1429,"children":1430},{"style":473},[1431],{"type":170,"value":1042},{"type":164,"tag":251,"props":1433,"children":1434},{"class":253,"line":451},[1435,1440,1444,1449,1453,1457,1461,1465],{"type":164,"tag":251,"props":1436,"children":1437},{"style":264},[1438],{"type":170,"value":1439},"    ()",{"type":164,"tag":251,"props":1441,"children":1442},{"style":365},[1443],{"type":170,"value":443},{"type":164,"tag":251,"props":1445,"children":1446},{"style":270},[1447],{"type":170,"value":1448}," ctx1",{"type":164,"tag":251,"props":1450,"children":1451},{"style":264},[1452],{"type":170,"value":552},{"type":164,"tag":251,"props":1454,"children":1455},{"style":270},[1456],{"type":170,"value":1068},{"type":164,"tag":251,"props":1458,"children":1459},{"style":264},[1460],{"type":170,"value":552},{"type":164,"tag":251,"props":1462,"children":1463},{"style":270},[1464],{"type":170,"value":557},{"type":164,"tag":251,"props":1466,"children":1467},{"style":264},[1468],{"type":170,"value":703},{"type":164,"tag":251,"props":1470,"children":1471},{"class":253,"line":512},[1472,1476,1480,1484,1488,1492,1496,1500],{"type":164,"tag":251,"props":1473,"children":1474},{"style":264},[1475],{"type":170,"value":1439},{"type":164,"tag":251,"props":1477,"children":1478},{"style":365},[1479],{"type":170,"value":443},{"type":164,"tag":251,"props":1481,"children":1482},{"style":270},[1483],{"type":170,"value":1382},{"type":164,"tag":251,"props":1485,"children":1486},{"style":264},[1487],{"type":170,"value":552},{"type":164,"tag":251,"props":1489,"children":1490},{"style":270},[1491],{"type":170,"value":1068},{"type":164,"tag":251,"props":1493,"children":1494},{"style":264},[1495],{"type":170,"value":552},{"type":164,"tag":251,"props":1497,"children":1498},{"style":270},[1499],{"type":170,"value":557},{"type":164,"tag":251,"props":1501,"children":1502},{"style":264},[1503],{"type":170,"value":703},{"type":164,"tag":251,"props":1505,"children":1506},{"class":253,"line":581},[1507,1512,1516,1520,1524,1528,1532,1536,1540,1544,1548,1552,1556],{"type":164,"tag":251,"props":1508,"children":1509},{"style":473},[1510],{"type":170,"value":1511},"  ]",{"type":164,"tag":251,"props":1513,"children":1514},{"style":264},[1515],{"type":170,"value":278},{"type":164,"tag":251,"props":1517,"children":1518},{"style":264},[1519],{"type":170,"value":1133},{"type":164,"tag":251,"props":1521,"children":1522},{"style":1136},[1523],{"type":170,"value":1139},{"type":164,"tag":251,"props":1525,"children":1526},{"style":264},[1527],{"type":170,"value":278},{"type":164,"tag":251,"props":1529,"children":1530},{"style":1136},[1531],{"type":170,"value":1148},{"type":164,"tag":251,"props":1533,"children":1534},{"style":264},[1535],{"type":170,"value":1153},{"type":164,"tag":251,"props":1537,"children":1538},{"style":365},[1539],{"type":170,"value":443},{"type":164,"tag":251,"props":1541,"children":1542},{"style":383},[1543],{"type":170,"value":1309},{"type":164,"tag":251,"props":1545,"children":1546},{"style":473},[1547],{"type":170,"value":390},{"type":164,"tag":251,"props":1549,"children":1550},{"style":264},[1551],{"type":170,"value":539},{"type":164,"tag":251,"props":1553,"children":1554},{"style":365},[1555],{"type":170,"value":443},{"type":164,"tag":251,"props":1557,"children":1558},{"style":264},[1559],{"type":170,"value":448},{"type":164,"tag":251,"props":1561,"children":1562},{"class":253,"line":589},[1563,1568,1573,1578,1582,1587,1591,1595],{"type":164,"tag":251,"props":1564,"children":1565},{"style":365},[1566],{"type":170,"value":1567},"    const",{"type":164,"tag":251,"props":1569,"children":1570},{"style":264},[1571],{"type":170,"value":1572}," [",{"type":164,"tag":251,"props":1574,"children":1575},{"style":371},[1576],{"type":170,"value":1577},"nz1",{"type":164,"tag":251,"props":1579,"children":1580},{"style":264},[1581],{"type":170,"value":278},{"type":164,"tag":251,"props":1583,"children":1584},{"style":371},[1585],{"type":170,"value":1586}," nz2",{"type":164,"tag":251,"props":1588,"children":1589},{"style":264},[1590],{"type":170,"value":1124},{"type":164,"tag":251,"props":1592,"children":1593},{"style":377},[1594],{"type":170,"value":380},{"type":164,"tag":251,"props":1596,"children":1597},{"style":473},[1598],{"type":170,"value":1599}," [\n",{"type":164,"tag":251,"props":1601,"children":1602},{"class":253,"line":618},[1603,1608,1612,1616,1620,1624],{"type":164,"tag":251,"props":1604,"children":1605},{"style":270},[1606],{"type":170,"value":1607},"      ctx1",{"type":164,"tag":251,"props":1609,"children":1610},{"style":264},[1611],{"type":170,"value":552},{"type":164,"tag":251,"props":1613,"children":1614},{"style":270},[1615],{"type":170,"value":1068},{"type":164,"tag":251,"props":1617,"children":1618},{"style":264},[1619],{"type":170,"value":552},{"type":164,"tag":251,"props":1621,"children":1622},{"style":270},[1623],{"type":170,"value":557},{"type":164,"tag":251,"props":1625,"children":1626},{"style":264},[1627],{"type":170,"value":703},{"type":164,"tag":251,"props":1629,"children":1630},{"class":253,"line":640},[1631,1636,1640,1644,1648],{"type":164,"tag":251,"props":1632,"children":1633},{"style":270},[1634],{"type":170,"value":1635},"      ctx2",{"type":164,"tag":251,"props":1637,"children":1638},{"style":264},[1639],{"type":170,"value":552},{"type":164,"tag":251,"props":1641,"children":1642},{"style":270},[1643],{"type":170,"value":1068},{"type":164,"tag":251,"props":1645,"children":1646},{"style":264},[1647],{"type":170,"value":552},{"type":164,"tag":251,"props":1649,"children":1650},{"style":270},[1651],{"type":170,"value":659},{"type":164,"tag":251,"props":1653,"children":1654},{"class":253,"line":662},[1655],{"type":164,"tag":251,"props":1656,"children":1657},{"style":473},[1658],{"type":170,"value":1659},"    ]\n",{"type":164,"tag":251,"props":1661,"children":1662},{"class":253,"line":671},[1663,1668,1672,1676,1680,1684,1688],{"type":164,"tag":251,"props":1664,"children":1665},{"style":258},[1666],{"type":170,"value":1667},"    if",{"type":164,"tag":251,"props":1669,"children":1670},{"style":473},[1671],{"type":170,"value":1174},{"type":164,"tag":251,"props":1673,"children":1674},{"style":270},[1675],{"type":170,"value":1577},{"type":164,"tag":251,"props":1677,"children":1678},{"style":377},[1679],{"type":170,"value":1183},{"type":164,"tag":251,"props":1681,"children":1682},{"style":270},[1683],{"type":170,"value":1586},{"type":164,"tag":251,"props":1685,"children":1686},{"style":473},[1687],{"type":170,"value":503},{"type":164,"tag":251,"props":1689,"children":1690},{"style":264},[1691],{"type":170,"value":1196},{"type":164,"tag":251,"props":1693,"children":1694},{"class":253,"line":679},[1695,1699,1703,1707],{"type":164,"tag":251,"props":1696,"children":1697},{"style":270},[1698],{"type":170,"value":1607},{"type":164,"tag":251,"props":1700,"children":1701},{"style":264},[1702],{"type":170,"value":552},{"type":164,"tag":251,"props":1704,"children":1705},{"style":383},[1706],{"type":170,"value":943},{"type":164,"tag":251,"props":1708,"children":1709},{"style":473},[1710],{"type":170,"value":1217},{"type":164,"tag":251,"props":1712,"children":1713},{"class":253,"line":692},[1714,1719,1723],{"type":164,"tag":251,"props":1715,"children":1716},{"style":264},[1717],{"type":170,"value":1718},"    }",{"type":164,"tag":251,"props":1720,"children":1721},{"style":258},[1722],{"type":170,"value":1230},{"type":164,"tag":251,"props":1724,"children":1725},{"style":264},[1726],{"type":170,"value":448},{"type":164,"tag":251,"props":1728,"children":1729},{"class":253,"line":706},[1730,1734,1738,1742],{"type":164,"tag":251,"props":1731,"children":1732},{"style":270},[1733],{"type":170,"value":1635},{"type":164,"tag":251,"props":1735,"children":1736},{"style":264},[1737],{"type":170,"value":552},{"type":164,"tag":251,"props":1739,"children":1740},{"style":383},[1741],{"type":170,"value":943},{"type":164,"tag":251,"props":1743,"children":1744},{"style":473},[1745],{"type":170,"value":1217},{"type":164,"tag":251,"props":1747,"children":1748},{"class":253,"line":719},[1749],{"type":164,"tag":251,"props":1750,"children":1751},{"style":264},[1752],{"type":170,"value":1753},"    }\n",{"type":164,"tag":251,"props":1755,"children":1756},{"class":253,"line":732},[1757,1761],{"type":164,"tag":251,"props":1758,"children":1759},{"style":264},[1760],{"type":170,"value":1225},{"type":164,"tag":251,"props":1762,"children":1763},{"style":473},[1764],{"type":170,"value":401},{"type":164,"tag":251,"props":1766,"children":1767},{"class":253,"line":740},[1768],{"type":164,"tag":251,"props":1769,"children":1770},{"style":473},[1771],{"type":170,"value":746},{"type":164,"tag":165,"props":1773,"children":1775},{"id":1774},"更多",[1776],{"type":170,"value":1774},{"type":164,"tag":173,"props":1778,"children":1779},{},[1780,1782,1790],{"type":170,"value":1781},"以上分享的代码略为简单，想深入探索的话推荐直接看 element-plus 相关组件的源码，如 ",{"type":164,"tag":198,"props":1783,"children":1787},{"href":1784,"rel":1785},"https://github.com/element-plus/element-plus/blob/6503e5527715a6424433df0ff523b8910e891033/packages/components/message-box/src/index.vue",[1786],"nofollow",[1788],{"type":170,"value":1789},"message-box",{"type":170,"value":1791},"。虽然文中仅介绍了如何 watch 并递增管理器中的 zIndex 值，但是在实际项目开发时的使用场景肯定更加复杂，比方说，在 element-plus 上层封装业务 UI 库时可能会要用到全屏组件或是购物车等业务弹窗，那么这些库在全局的 zIndex 管理实际也可以使用 element-plus 的这套。总之，要活学活用嘛...",{"type":164,"tag":1793,"props":1794,"children":1797},"section",{"className":1795,"dataFootnotes":158},[1796],"footnotes",[1798,1805],{"type":164,"tag":165,"props":1799,"children":1802},{"className":1800,"id":202},[1801],"sr-only",[1803],{"type":170,"value":1804},"Footnotes",{"type":164,"tag":1806,"props":1807,"children":1808},"ol",{},[1809],{"type":164,"tag":1810,"props":1811,"children":1813},"li",{"id":1812},"user-content-fn-append-to-body",[1814,1816],{"type":170,"value":1815},"为了降低复杂度，这里只考虑将弹窗 teleport 到 body 中的情况。 ",{"type":164,"tag":198,"props":1817,"children":1822},{"href":1818,"ariaLabel":1819,"className":1820,"dataFootnoteBackref":158},"#user-content-fnref-append-to-body","Back to reference 1",[1821],"data-footnote-backref",[1823],{"type":170,"value":1824},"↩",{"type":164,"tag":802,"props":1826,"children":1827},{},[1828],{"type":170,"value":1829},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":158,"searchDepth":313,"depth":313,"links":1831},[1832,1833,1834,1835,1836],{"id":167,"depth":313,"text":171},{"id":180,"depth":313,"text":180},{"id":220,"depth":313,"text":220},{"id":1774,"depth":313,"text":1774},{"id":202,"depth":313,"text":1804},"markdown","content:2.articles:1104.zindex-manager.md","content","2.articles/1104.zindex-manager.md","2.articles/1104.zindex-manager","md",[1844,1846],{"_path":58,"title":57,"description":1845},"如何自定义 antd-table、vxe-table 等复杂组件的滚动条？",{"_path":64,"title":63,"description":1847},"如何破解滑块验证码？本文介绍使用Puppeteer操作浏览器进行图片对比、图片识别及优化鼠标轨迹以模仿真是用户等几种简单爬虫验证码破解思路，适用多种场景。",1742348678535]