[{"data":1,"prerenderedAt":2601},["ShallowReactive",2],{"navigation":3,"/articles/design-patterns-and-js-magic-pot":410,"/articles/design-patterns-and-js-magic-pot-surround":2596},[4,32,83,102,129,135,141,147,393,399,405],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96,99],{"title":88,"_path":89},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":91,"_path":92},"🌐 AnySort","/tools/anysort",{"title":94,"_path":95},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":97,"_path":98},"👓 Crapto","/tools/crypto-inline",{"title":100,"_path":101},"🖨️ any-to-base64","/tools/any-to-base64",{"title":103,"_path":104,"children":105},"吉他剧场 / Music","/music",[106,108,111,114,117,120,123,126],{"title":107,"_path":104},"🎸 FingerStyle！",{"title":109,"_path":110},"🌬️ 等待的风","/music/wind",{"title":112,"_path":113},"💕 约定的海洋","/music/ocean",{"title":115,"_path":116},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":118,"_path":119},"🌏 残酷天使的行动纲领","/music/eva",{"title":121,"_path":122},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":124,"_path":125},"🍷 Wu Wei","/music/wu-wei",{"title":127,"_path":128},"🌅 无题","/music/untitled",{"title":130,"_path":131,"children":132},"画点什么 / Paint","/paint",[133],{"title":134,"_path":131},"🚧 正在施工",{"title":136,"_path":137,"children":138},"读书笔记 / Notes","/books",[139],{"title":140,"_path":137},"📕 读书笔记",{"title":142,"_path":143,"children":144},"知识地图 / Maps","/maps",[145],{"title":146,"_path":143},"🏁 知识地图",{"title":148,"_path":149,"children":150},"零散的笔记 / Gists","/gists",[151,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390],{"title":152,"_path":149},"🧊 Gists",{"title":154,"_path":155},"网站的可访问性","/gists/accessibility",{"title":157,"_path":158},"Bit","/gists/bit",{"title":160,"_path":161},"图片模糊","/gists/blur",{"title":163,"_path":164},"渲染相关笔记","/gists/c4d",{"title":166,"_path":167},"CDN 问题记录","/gists/cdn",{"title":169,"_path":170},"消毒剂","/gists/cleaner",{"title":172,"_path":173},"Windows Command","/gists/cmd",{"title":175,"_path":176},"Command","/gists/command",{"title":178,"_path":179},"复杂科学","/gists/complexity-science",{"title":181,"_path":182},"GitHub Copilot","/gists/copilot",{"title":184,"_path":185},"宇宙","/gists/cosmos",{"title":187,"_path":188},"C++","/gists/cpp",{"title":190,"_path":191},"Data Structure","/gists/data-structure",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"设计模式","/gists/design-patterns",{"title":199,"_path":200},"Developer Experience","/gists/developer-experience",{"title":202,"_path":203},"Device Metrics","/gists/device-metrix",{"title":205,"_path":206},"数字化转型","/gists/digital-transformation",{"title":208,"_path":209},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":211,"_path":212},"正则表达式","/gists/eegex",{"title":214,"_path":215},"Emoji","/gists/emoji",{"title":217,"_path":218},"工程","/gists/engineering",{"title":220,"_path":221},"熵","/gists/entropy",{"title":223,"_path":224},"Environment","/gists/environment",{"title":226,"_path":227},"Erlang","/gists/erlang",{"title":229,"_path":230},"逃离塔克夫","/gists/escape-from-tarkov",{"title":232,"_path":233},"ESNext (ES6-ES11)","/gists/esnext",{"title":235,"_path":236},"Eval！","/gists/eval",{"title":238,"_path":239},"Flutter","/gists/flutter",{"title":241,"_path":242},"字体","/gists/font",{"title":244,"_path":245},"JS 函数式编程","/gists/functional",{"title":247,"_path":248},"游戏化","/gists/gamification",{"title":250,"_path":251},"Google C++ Standard","/gists/google-cpp-standard",{"title":253,"_path":254},"双向链接完全体","/gists/graph",{"title":256,"_path":257},"Hardwares","/gists/hardwares",{"title":259,"_path":260},"哈希冲突","/gists/hash-collision",{"title":262,"_path":263},"信息设计","/gists/information-design",{"title":265,"_path":266},"InstantPage","/gists/instant.page",{"title":268,"_path":269},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":271,"_path":272},"KVStore","/gists/key-value-db",{"title":274,"_path":275},"Kubernetes","/gists/kubernetes",{"title":277,"_path":278},"Makefile","/gists/makefile",{"title":280,"_path":281},"Markdown Inline Style","/gists/markdown-nice",{"title":283,"_path":284},"小程序","/gists/miniapp",{"title":286,"_path":287},"减小页面快照体积","/gists/minify-html",{"title":289,"_path":290},"mklink","/gists/mklink",{"title":292,"_path":293},"Mock","/gists/mock",{"title":295,"_path":296},"多人协作系统","/gists/multiplayer",{"title":298,"_path":299},"多端应用","/gists/multy-end-app",{"title":301,"_path":302},"神经科学","/gists/neuroscience",{"title":304,"_path":305},"OO","/gists/oo",{"title":307,"_path":308},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":310,"_path":311},"PInvoke","/gists/pinvoke",{"title":313,"_path":314},"像素","/gists/pixel",{"title":316,"_path":317},"PowerShell","/gists/powershell",{"title":319,"_path":320},"量子","/gists/quantum",{"title":322,"_path":323},"保持好奇心","/gists/questions",{"title":325,"_path":326},"React Native","/gists/react-native",{"title":328,"_path":329},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":331,"_path":332},"SEO","/gists/seo",{"title":334,"_path":335},"Shader","/gists/shader",{"title":337,"_path":338},"Shape Up","/gists/shape-up",{"title":340,"_path":341},"睡觉","/gists/sleep",{"title":343,"_path":344},"记录奇怪的问题","/gists/solved",{"title":346,"_path":347},"States","/gists/states",{"title":349,"_path":350},"Storage","/gists/storage",{"title":352,"_path":353},"音视频流处理","/gists/stream-cli",{"title":355,"_path":356},"Symbol","/gists/symbol",{"title":358,"_path":359},"系统论","/gists/systems-theory",{"title":361,"_path":362},"Taro","/gists/taro",{"title":364,"_path":365},"任务切片","/gists/task-slice",{"title":367,"_path":368},"技术偏好","/gists/tech-dudge",{"title":370,"_path":371},"Untitled","/gists/untitled",{"title":373,"_path":374},"可变字体","/gists/variable-font",{"title":376,"_path":377},"视觉错觉","/gists/visual-illusion",{"title":379,"_path":380},"SS(SSR)","/gists/vpn",{"title":382,"_path":383},"VS Code 插件开发","/gists/vscode-plugin",{"title":385,"_path":386},"Web Components","/gists/web-components",{"title":388,"_path":389},"Windows","/gists/windows",{"title":391,"_path":392},"查缺补漏","/gists/wrong",{"title":394,"_path":395,"children":396},"代码笔记 / Gists","/source-code",[397],{"title":398,"_path":395},"🚄 代码笔记",{"title":400,"_path":401,"children":402},"我 / Abount","/hire",[403],{"title":404,"_path":401},"📬 技术简历",{"title":406,"_path":407,"children":408},"todo","/todo",[409],{"title":406,"_path":407},{"_path":64,"_dir":411,"_draft":412,"_partial":412,"_locale":413,"title":63,"description":414,"body":415,"_type":2590,"_id":2591,"_source":2592,"_file":2593,"_stem":2594,"_extension":2595},"articles",false,"","排除人的因素，设计模式的本质只是相关代码复用。本文通过使用JS仿制并简化了几种OOL中经典设计模式，以探讨经典设计模式和代码模板的区别主要在于代码复用的层次不同，以及粗浅聊了聊设计模式与语言特征之间此强彼弱的关系。",{"type":416,"children":417,"toc":2580},"root",[418,430,436,457,462,471,483,488,493,498,507,532,537,591,596,623,633,638,643,648,653,658,666,671,676,688,693,698,721,729,734,986,1004,1253,1258,1263,1268,1364,1379,1657,1662,1680,1694,1709,1740,1745,1750,2152,2157,2162,2167,2177,2182,2197,2202,2236,2241,2246,2251,2261,2266,2279,2328,2333,2341,2346,2351,2356,2361,2371,2376,2381,2386,2419,2424,2447,2574],{"type":419,"tag":420,"props":421,"children":422},"element","blockquote",{},[423],{"type":419,"tag":424,"props":425,"children":426},"p",{},[427],{"type":428,"value":429},"text","设计模式最终要融入任何语言。",{"type":419,"tag":431,"props":432,"children":434},"h2",{"id":433},"设计模式是什么",[435],{"type":428,"value":433},{"type":419,"tag":424,"props":437,"children":438},{},[439,441,455],{"type":428,"value":440},"从《人月神话》到《大教堂与集市》，许多闻名业界的作品都“低代码、高文化",{"type":419,"tag":442,"props":443,"children":444},"sup",{},[445],{"type":419,"tag":446,"props":447,"children":452},"a",{"href":448,"ariaDescribedBy":449,"dataFootnoteRef":413,"id":451},"#user-content-fn-%E6%96%87%E5%8C%96",[450],"footnote-label","user-content-fnref-%E6%96%87%E5%8C%96",[453],{"type":428,"value":454},"1",{"type":428,"value":456},"”；各种代码文化运动可以看作“造神运动”此类周日剧场。许多大佬在向人们传授代码经验之余，都喜欢尝试用文化手段（不论是哲学思想还是艺术内涵），来统一人与代码的关系。这种跨界思考的过程通常比较晦涩，诸如“面向对象”、“设计模式”这些放到现在来说我们耳熟能详的词，在过去几十年都是由行业顶尖大佬们牵头搞研究，再经过不断地实践，逐渐沉淀下来形成的标准。",{"type":419,"tag":424,"props":458,"children":459},{},[460],{"type":428,"value":461},"设计模式是什么？",{"type":419,"tag":424,"props":463,"children":464},{},[465],{"type":419,"tag":466,"props":467,"children":468},"strong",{},[469],{"type":428,"value":470},"设计模式是一种标准，它描述了使用面向对象编程语言解决问题的方式。",{"type":419,"tag":424,"props":472,"children":473},{},[474,476,481],{"type":428,"value":475},"设计模式一词发源于建筑学作品《建筑模式语言》，后被一个人们称为“四人帮”（GoF）的小组种出它在软件界开的新花。无论是建筑学还是软件学中的设计模式，相同的地方是，它们都想解决“人”和“物”的关系相关问题，并且形成了一套特定的方法论。",{"type":419,"tag":466,"props":477,"children":478},{},[479],{"type":428,"value":480},"好比人们有了灶就可以长久保存火种，用名词把晦涩难懂的抽象定义为标准，这样有利于思想传播",{"type":428,"value":482},"。只要人们普遍接纳并熟知设计模式，便能畅通无阻地沟通代码的实现。当然，现实很丰满，畅快沟通有个大前提：程序设计时，大家需要使用面向对象编程语言来合作。",{"type":419,"tag":431,"props":484,"children":486},{"id":485},"为什么非面向对象不可",[487],{"type":428,"value":485},{"type":419,"tag":424,"props":489,"children":490},{},[491],{"type":428,"value":492},"构建大型软件不止面向对象这一条路，与面向对象相对应的还有结构化、形式化等程序设计方法。任意一种有自有优劣。面对日益复杂的软件，人们关心的重心逐步转移到软件的可重用性方面。面向对象凭借着分类、封装等天然符合人们认知规律的优势，得到快速发展，终打通需求分析、程序设计到编程语言等开发上下游工作，赢得了业界青睐。",{"type":419,"tag":424,"props":494,"children":495},{},[496],{"type":428,"value":497},"面向对象把功能作为节点，组合为功能网格，节点间通过消息通讯以及做对应的响应。这样一来，开发在编程时不再需要直面输入输出这种数据流动的思考方式，只需要按照指令维护各个对象内部的状态即可，节点对应的代码片段也就能得到重用。",{"type":419,"tag":424,"props":499,"children":500},{},[501],{"type":419,"tag":502,"props":503,"children":506},"img",{"alt":504,"src":505},"Message Passing In OO","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210511174933.png?w=40",[],{"type":419,"tag":424,"props":508,"children":509},{},[510,512,523,525,530],{"type":428,"value":511},"相比子程序复用，函数复用已经是巨大的进步",{"type":419,"tag":442,"props":513,"children":514},{},[515],{"type":419,"tag":446,"props":516,"children":520},{"href":517,"ariaDescribedBy":518,"dataFootnoteRef":413,"id":519},"#user-content-fn-fn-call",[450],"user-content-fnref-fn-call",[521],{"type":428,"value":522},"2",{"type":428,"value":524},"。类复用相比函数复用要更加抽象，因为它保存了函数和状态的集合；而设计模式比类复用在抽象上更胜一筹：设计模式不单单直接复用某个类，而是复用整个“功能网格”，把特定问题的解决方案相关的所有节点和通讯机制全部拷贝，固化下来，命名并形成标准。",{"type":419,"tag":466,"props":526,"children":527},{},[528],{"type":428,"value":529},"设计模式其实是使用面向对象编程语言时代码复用的高级形式，是面向对象发展壮大之路的必然的产物",{"type":428,"value":531},"。只要写代码，就会碰到复用性问题，四人帮偏好面向对象，所以“设计模式”只是他们用来传授的面向对象编程中的代码复用性经验的概括。换句话说，大部分情况下我们讨论的“设计模式”和“面向对象设计模式”完全等同。这也就解释了为什么非面向对象不可了。",{"type":419,"tag":424,"props":533,"children":534},{},[535],{"type":428,"value":536},"我们讨论一个新的问题，如果过滤掉设计模式中的面向对象成分，剩下的是些啥呢？",{"type":419,"tag":538,"props":539,"children":543},"pre",{"className":540,"code":541,"language":542,"meta":413,"style":413},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","console.log(DesignPatterns.filter(removeOO))\n","js",[544],{"type":419,"tag":545,"props":546,"children":547},"code",{"__ignoreMap":413},[548],{"type":419,"tag":549,"props":550,"children":553},"span",{"class":551,"line":552},"line",1,[554,560,566,572,577,581,586],{"type":419,"tag":549,"props":555,"children":557},{"style":556},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[558],{"type":428,"value":559},"console",{"type":419,"tag":549,"props":561,"children":563},{"style":562},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[564],{"type":428,"value":565},".",{"type":419,"tag":549,"props":567,"children":569},{"style":568},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[570],{"type":428,"value":571},"log",{"type":419,"tag":549,"props":573,"children":574},{"style":556},[575],{"type":428,"value":576},"(DesignPatterns",{"type":419,"tag":549,"props":578,"children":579},{"style":562},[580],{"type":428,"value":565},{"type":419,"tag":549,"props":582,"children":583},{"style":568},[584],{"type":428,"value":585},"filter",{"type":419,"tag":549,"props":587,"children":588},{"style":556},[589],{"type":428,"value":590},"(removeOO))\n",{"type":419,"tag":431,"props":592,"children":594},{"id":593},"设计模式的本质",[595],{"type":428,"value":593},{"type":419,"tag":424,"props":597,"children":598},{},[599,601,607,609,614,616,621],{"type":428,"value":600},"我们先直接删除上文关于设计模式的定义中的“面向对象”几个字，看看剩下些什么：设计模式是一种标准，它描述了",{"type":419,"tag":602,"props":603,"children":604},"del",{},[605],{"type":428,"value":606},"使用面向对象编程语言",{"type":428,"value":608},"解决问题的方式，是",{"type":419,"tag":602,"props":610,"children":611},{},[612],{"type":428,"value":613},"使用面向对象编程语言时",{"type":428,"value":615},"代码复用性的高级形式，是",{"type":419,"tag":602,"props":617,"children":618},{},[619],{"type":428,"value":620},"面向对象",{"type":428,"value":622},"发展壮大之路的必然的产物。",{"type":419,"tag":424,"props":624,"children":625},{},[626,628],{"type":428,"value":627},"句子有些不通顺，修补之后变成了：",{"type":419,"tag":466,"props":629,"children":630},{},[631],{"type":428,"value":632},"设计模式是一种标准，它描述了编程时解决问题的特定方式，是代码复用的高级形式及发展代码复用必然的产物。",{"type":419,"tag":424,"props":634,"children":635},{},[636],{"type":428,"value":637},"设计模式本质是什么？不言自明，它只是相关代码复用的一种抽象概念。",{"type":419,"tag":424,"props":639,"children":640},{},[641],{"type":428,"value":642},"说到代码复用，主要关系到代码组织。从函数复用，到使用设计模式，再到使用库、框架，三种代码复用方式的主要区别在于代码组织的粒度不同。",{"type":419,"tag":424,"props":644,"children":645},{},[646],{"type":428,"value":647},"函数复用比较简单，你可以写一个叫做 Add 的函数给两数相加，然后 Copy&Paste 到其他地方复用，或是把函数存放到 Utils.js 文件中，通过模块机制复用。为了了解如何使用某个函数，需要在使用前阅读注释。",{"type":419,"tag":424,"props":649,"children":650},{},[651],{"type":428,"value":652},"库和框架最为复杂，它们是组织了大量函数及实体形成的巨型代码片段。开发新项目时很少会花精力自研框架，一般都引现成的轮子直接开造。使用某库或框架前，必须详细阅读文档。",{"type":419,"tag":424,"props":654,"children":655},{},[656],{"type":428,"value":657},"设计模式则是单个或多个函数的组合（在 Java 中不是函数而是类），既可以在新项目里现写一个模式供使用，也可以引入社区现有的模块来复用。为了了解如何使用某个设计模式，需要提前了解该模式定义的实体以及实体是通讯机制。",{"type":419,"tag":424,"props":659,"children":660},{},[661],{"type":419,"tag":502,"props":662,"children":665},{"alt":663,"src":664},"函数、设计模式、框架间的升级关系","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210513145630.png?w=70",[],{"type":419,"tag":424,"props":667,"children":668},{},[669],{"type":428,"value":670},"设计模式作为最简单的实体和函数的组合，可看作函数的升级版或是框架的缩水版；去掉设计模式中的面向对象相关内容，就只剩下了函数。",{"type":419,"tag":424,"props":672,"children":673},{},[674],{"type":428,"value":675},"等等，“实体和实体间通讯机制”凭空消失了？",{"type":419,"tag":424,"props":677,"children":678},{},[679,681,686],{"type":428,"value":680},"并没有。但我想让他消失。下文将从 JavaScript 入手，介绍如何把设计模式的概念映射到语言特征中。语言特征可是个好东西呀！如果你同意抽象也像复用一样有函数复用、库和框架等不同复杂度的层次的话，那我认为",{"type":419,"tag":466,"props":682,"children":683},{},[684],{"type":428,"value":685},"语言特征就是抽象的基础了。除了语言本身以外，所有抽象的建立都依赖于语言特征",{"type":428,"value":687},"。把设计模式映射成语言特征后，我们就能跳出面向对象的禁锢，从新的、更高层的角度重新思考代码复用问题。",{"type":419,"tag":424,"props":689,"children":690},{},[691],{"type":428,"value":692},"回到正题，我们从 JS 开始说起。",{"type":419,"tag":431,"props":694,"children":696},{"id":695},"仿制设计模式",[697],{"type":428,"value":695},{"type":419,"tag":424,"props":699,"children":700},{},[701,703,708,719],{"type":428,"value":702},"编程语言并不是万能的。",{"type":419,"tag":466,"props":704,"children":705},{},[706],{"type":428,"value":707},"特定语言适合用来解决特定问题",{"type":419,"tag":442,"props":709,"children":710},{},[711],{"type":419,"tag":446,"props":712,"children":716},{"href":713,"ariaDescribedBy":714,"dataFootnoteRef":413,"id":715},"#user-content-fn-css",[450],"user-content-fnref-css",[717],{"type":428,"value":718},"3",{"type":428,"value":720},"。提到 JavaScript 诸多语言特征，其优点可以用寥寥三个词概括：“原型”、“对象”、“函数”。熟练掌握了这些内容，就能在 JS 的世界中游刃有余。",{"type":419,"tag":424,"props":722,"children":723},{},[724],{"type":419,"tag":502,"props":725,"children":728},{"alt":726,"src":727},"《JavaScript 精粹》VS《JavaScript 权威指南》","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200709104930.png",[],{"type":419,"tag":424,"props":730,"children":731},{},[732],{"type":428,"value":733},"传统面向对象语言以类封装状态，并向外暴露改变状态的方法。以下代码中的书本类为例：Book Class 保持有 name 状态，可以使用 getPrintName 方法返回包装后的 name 或使用 rename 修改 name 。",{"type":419,"tag":538,"props":735,"children":737},{"className":540,"code":736,"language":542,"meta":413,"style":413},"class Book {\n  constructor () {\n    this.name = '设计模式与JS魔法锅'\n  }\n  getPrintName () {\n    return '《' + this.name + '》'\n  }\n  rename (newName) {\n    this.name = newName\n  }\n}\n",[738],{"type":419,"tag":545,"props":739,"children":740},{"__ignoreMap":413},[741,761,779,821,830,848,907,915,944,969,977],{"type":419,"tag":549,"props":742,"children":743},{"class":551,"line":552},[744,750,756],{"type":419,"tag":549,"props":745,"children":747},{"style":746},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[748],{"type":428,"value":749},"class",{"type":419,"tag":549,"props":751,"children":753},{"style":752},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[754],{"type":428,"value":755}," Book",{"type":419,"tag":549,"props":757,"children":758},{"style":562},[759],{"type":428,"value":760}," {\n",{"type":419,"tag":549,"props":762,"children":764},{"class":551,"line":763},2,[765,770,775],{"type":419,"tag":549,"props":766,"children":767},{"style":746},[768],{"type":428,"value":769},"  constructor",{"type":419,"tag":549,"props":771,"children":772},{"style":562},[773],{"type":428,"value":774}," ()",{"type":419,"tag":549,"props":776,"children":777},{"style":562},[778],{"type":428,"value":760},{"type":419,"tag":549,"props":780,"children":782},{"class":551,"line":781},3,[783,789,793,798,804,810,816],{"type":419,"tag":549,"props":784,"children":786},{"style":785},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[787],{"type":428,"value":788},"    this",{"type":419,"tag":549,"props":790,"children":791},{"style":562},[792],{"type":428,"value":565},{"type":419,"tag":549,"props":794,"children":795},{"style":556},[796],{"type":428,"value":797},"name",{"type":419,"tag":549,"props":799,"children":801},{"style":800},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[802],{"type":428,"value":803}," =",{"type":419,"tag":549,"props":805,"children":807},{"style":806},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[808],{"type":428,"value":809}," '",{"type":419,"tag":549,"props":811,"children":813},{"style":812},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[814],{"type":428,"value":815},"设计模式与JS魔法锅",{"type":419,"tag":549,"props":817,"children":818},{"style":806},[819],{"type":428,"value":820},"'\n",{"type":419,"tag":549,"props":822,"children":824},{"class":551,"line":823},4,[825],{"type":419,"tag":549,"props":826,"children":827},{"style":562},[828],{"type":428,"value":829},"  }\n",{"type":419,"tag":549,"props":831,"children":833},{"class":551,"line":832},5,[834,840,844],{"type":419,"tag":549,"props":835,"children":837},{"style":836},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[838],{"type":428,"value":839},"  getPrintName",{"type":419,"tag":549,"props":841,"children":842},{"style":562},[843],{"type":428,"value":774},{"type":419,"tag":549,"props":845,"children":846},{"style":562},[847],{"type":428,"value":760},{"type":419,"tag":549,"props":849,"children":851},{"class":551,"line":850},6,[852,858,862,867,872,877,882,886,890,894,898,903],{"type":419,"tag":549,"props":853,"children":855},{"style":854},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[856],{"type":428,"value":857},"    return",{"type":419,"tag":549,"props":859,"children":860},{"style":806},[861],{"type":428,"value":809},{"type":419,"tag":549,"props":863,"children":864},{"style":812},[865],{"type":428,"value":866},"《",{"type":419,"tag":549,"props":868,"children":869},{"style":806},[870],{"type":428,"value":871},"'",{"type":419,"tag":549,"props":873,"children":874},{"style":800},[875],{"type":428,"value":876}," +",{"type":419,"tag":549,"props":878,"children":879},{"style":785},[880],{"type":428,"value":881}," this",{"type":419,"tag":549,"props":883,"children":884},{"style":562},[885],{"type":428,"value":565},{"type":419,"tag":549,"props":887,"children":888},{"style":556},[889],{"type":428,"value":797},{"type":419,"tag":549,"props":891,"children":892},{"style":800},[893],{"type":428,"value":876},{"type":419,"tag":549,"props":895,"children":896},{"style":806},[897],{"type":428,"value":809},{"type":419,"tag":549,"props":899,"children":900},{"style":812},[901],{"type":428,"value":902},"》",{"type":419,"tag":549,"props":904,"children":905},{"style":806},[906],{"type":428,"value":820},{"type":419,"tag":549,"props":908,"children":910},{"class":551,"line":909},7,[911],{"type":419,"tag":549,"props":912,"children":913},{"style":562},[914],{"type":428,"value":829},{"type":419,"tag":549,"props":916,"children":918},{"class":551,"line":917},8,[919,924,929,935,940],{"type":419,"tag":549,"props":920,"children":921},{"style":836},[922],{"type":428,"value":923},"  rename",{"type":419,"tag":549,"props":925,"children":926},{"style":562},[927],{"type":428,"value":928}," (",{"type":419,"tag":549,"props":930,"children":932},{"style":931},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[933],{"type":428,"value":934},"newName",{"type":419,"tag":549,"props":936,"children":937},{"style":562},[938],{"type":428,"value":939},")",{"type":419,"tag":549,"props":941,"children":942},{"style":562},[943],{"type":428,"value":760},{"type":419,"tag":549,"props":945,"children":947},{"class":551,"line":946},9,[948,952,956,960,964],{"type":419,"tag":549,"props":949,"children":950},{"style":785},[951],{"type":428,"value":788},{"type":419,"tag":549,"props":953,"children":954},{"style":562},[955],{"type":428,"value":565},{"type":419,"tag":549,"props":957,"children":958},{"style":556},[959],{"type":428,"value":797},{"type":419,"tag":549,"props":961,"children":962},{"style":800},[963],{"type":428,"value":803},{"type":419,"tag":549,"props":965,"children":966},{"style":556},[967],{"type":428,"value":968}," newName\n",{"type":419,"tag":549,"props":970,"children":972},{"class":551,"line":971},10,[973],{"type":419,"tag":549,"props":974,"children":975},{"style":562},[976],{"type":428,"value":829},{"type":419,"tag":549,"props":978,"children":980},{"class":551,"line":979},11,[981],{"type":419,"tag":549,"props":982,"children":983},{"style":562},[984],{"type":428,"value":985},"}\n",{"type":419,"tag":424,"props":987,"children":988},{},[989,991,1002],{"type":428,"value":990},"放到早期版本 JS 中，想要封装变量，这不好办。早期版本的 JS 没有块级作用域，所以声明的变量会在整个代码或函数作用域中生效。为了仿制类的状态封装能力，知名布道者道格拉斯发明了一种“模块模式”",{"type":419,"tag":442,"props":992,"children":993},{},[994],{"type":419,"tag":446,"props":995,"children":999},{"href":996,"ariaDescribedBy":997,"dataFootnoteRef":413,"id":998},"#user-content-fn-module-pattern",[450],"user-content-fnref-module-pattern",[1000],{"type":428,"value":1001},"4",{"type":428,"value":1003},"，即通过闭包来控制变量的访问权，代码如下：",{"type":419,"tag":538,"props":1005,"children":1007},{"className":540,"code":1006,"language":542,"meta":413,"style":413},"const aBook = (() => {\n  var name = '设计模式与JS魔法锅'\n  function getPrintName () {\n    return '《' + name + '》'\n  }\n  function rename (newName) {\n    name = newName\n  }\n  return {\n    getPrintName,\n    rename\n  }\n})()\n",[1008],{"type":419,"tag":545,"props":1009,"children":1010},{"__ignoreMap":413},[1011,1047,1076,1097,1140,1147,1175,1191,1198,1210,1223,1231,1239],{"type":419,"tag":549,"props":1012,"children":1013},{"class":551,"line":552},[1014,1019,1025,1029,1033,1038,1043],{"type":419,"tag":549,"props":1015,"children":1016},{"style":746},[1017],{"type":428,"value":1018},"const",{"type":419,"tag":549,"props":1020,"children":1022},{"style":1021},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1023],{"type":428,"value":1024}," aBook",{"type":419,"tag":549,"props":1026,"children":1027},{"style":800},[1028],{"type":428,"value":803},{"type":419,"tag":549,"props":1030,"children":1031},{"style":556},[1032],{"type":428,"value":928},{"type":419,"tag":549,"props":1034,"children":1035},{"style":562},[1036],{"type":428,"value":1037},"()",{"type":419,"tag":549,"props":1039,"children":1040},{"style":746},[1041],{"type":428,"value":1042}," =>",{"type":419,"tag":549,"props":1044,"children":1045},{"style":562},[1046],{"type":428,"value":760},{"type":419,"tag":549,"props":1048,"children":1049},{"class":551,"line":763},[1050,1055,1060,1064,1068,1072],{"type":419,"tag":549,"props":1051,"children":1052},{"style":746},[1053],{"type":428,"value":1054},"  var",{"type":419,"tag":549,"props":1056,"children":1057},{"style":556},[1058],{"type":428,"value":1059}," name",{"type":419,"tag":549,"props":1061,"children":1062},{"style":800},[1063],{"type":428,"value":803},{"type":419,"tag":549,"props":1065,"children":1066},{"style":806},[1067],{"type":428,"value":809},{"type":419,"tag":549,"props":1069,"children":1070},{"style":812},[1071],{"type":428,"value":815},{"type":419,"tag":549,"props":1073,"children":1074},{"style":806},[1075],{"type":428,"value":820},{"type":419,"tag":549,"props":1077,"children":1078},{"class":551,"line":781},[1079,1084,1089,1093],{"type":419,"tag":549,"props":1080,"children":1081},{"style":746},[1082],{"type":428,"value":1083},"  function",{"type":419,"tag":549,"props":1085,"children":1086},{"style":568},[1087],{"type":428,"value":1088}," getPrintName",{"type":419,"tag":549,"props":1090,"children":1091},{"style":562},[1092],{"type":428,"value":774},{"type":419,"tag":549,"props":1094,"children":1095},{"style":562},[1096],{"type":428,"value":760},{"type":419,"tag":549,"props":1098,"children":1099},{"class":551,"line":823},[1100,1104,1108,1112,1116,1120,1124,1128,1132,1136],{"type":419,"tag":549,"props":1101,"children":1102},{"style":854},[1103],{"type":428,"value":857},{"type":419,"tag":549,"props":1105,"children":1106},{"style":806},[1107],{"type":428,"value":809},{"type":419,"tag":549,"props":1109,"children":1110},{"style":812},[1111],{"type":428,"value":866},{"type":419,"tag":549,"props":1113,"children":1114},{"style":806},[1115],{"type":428,"value":871},{"type":419,"tag":549,"props":1117,"children":1118},{"style":800},[1119],{"type":428,"value":876},{"type":419,"tag":549,"props":1121,"children":1122},{"style":556},[1123],{"type":428,"value":1059},{"type":419,"tag":549,"props":1125,"children":1126},{"style":800},[1127],{"type":428,"value":876},{"type":419,"tag":549,"props":1129,"children":1130},{"style":806},[1131],{"type":428,"value":809},{"type":419,"tag":549,"props":1133,"children":1134},{"style":812},[1135],{"type":428,"value":902},{"type":419,"tag":549,"props":1137,"children":1138},{"style":806},[1139],{"type":428,"value":820},{"type":419,"tag":549,"props":1141,"children":1142},{"class":551,"line":832},[1143],{"type":419,"tag":549,"props":1144,"children":1145},{"style":562},[1146],{"type":428,"value":829},{"type":419,"tag":549,"props":1148,"children":1149},{"class":551,"line":850},[1150,1154,1159,1163,1167,1171],{"type":419,"tag":549,"props":1151,"children":1152},{"style":746},[1153],{"type":428,"value":1083},{"type":419,"tag":549,"props":1155,"children":1156},{"style":568},[1157],{"type":428,"value":1158}," rename",{"type":419,"tag":549,"props":1160,"children":1161},{"style":562},[1162],{"type":428,"value":928},{"type":419,"tag":549,"props":1164,"children":1165},{"style":931},[1166],{"type":428,"value":934},{"type":419,"tag":549,"props":1168,"children":1169},{"style":562},[1170],{"type":428,"value":939},{"type":419,"tag":549,"props":1172,"children":1173},{"style":562},[1174],{"type":428,"value":760},{"type":419,"tag":549,"props":1176,"children":1177},{"class":551,"line":909},[1178,1183,1187],{"type":419,"tag":549,"props":1179,"children":1180},{"style":556},[1181],{"type":428,"value":1182},"    name",{"type":419,"tag":549,"props":1184,"children":1185},{"style":800},[1186],{"type":428,"value":803},{"type":419,"tag":549,"props":1188,"children":1189},{"style":556},[1190],{"type":428,"value":968},{"type":419,"tag":549,"props":1192,"children":1193},{"class":551,"line":917},[1194],{"type":419,"tag":549,"props":1195,"children":1196},{"style":562},[1197],{"type":428,"value":829},{"type":419,"tag":549,"props":1199,"children":1200},{"class":551,"line":946},[1201,1206],{"type":419,"tag":549,"props":1202,"children":1203},{"style":854},[1204],{"type":428,"value":1205},"  return",{"type":419,"tag":549,"props":1207,"children":1208},{"style":562},[1209],{"type":428,"value":760},{"type":419,"tag":549,"props":1211,"children":1212},{"class":551,"line":971},[1213,1218],{"type":419,"tag":549,"props":1214,"children":1215},{"style":556},[1216],{"type":428,"value":1217},"    getPrintName",{"type":419,"tag":549,"props":1219,"children":1220},{"style":562},[1221],{"type":428,"value":1222},",\n",{"type":419,"tag":549,"props":1224,"children":1225},{"class":551,"line":979},[1226],{"type":419,"tag":549,"props":1227,"children":1228},{"style":556},[1229],{"type":428,"value":1230},"    rename\n",{"type":419,"tag":549,"props":1232,"children":1234},{"class":551,"line":1233},12,[1235],{"type":419,"tag":549,"props":1236,"children":1237},{"style":562},[1238],{"type":428,"value":829},{"type":419,"tag":549,"props":1240,"children":1242},{"class":551,"line":1241},13,[1243,1248],{"type":419,"tag":549,"props":1244,"children":1245},{"style":562},[1246],{"type":428,"value":1247},"}",{"type":419,"tag":549,"props":1249,"children":1250},{"style":556},[1251],{"type":428,"value":1252},")()\n",{"type":419,"tag":424,"props":1254,"children":1255},{},[1256],{"type":428,"value":1257},"看起来，模块模式就像是语言能力不足的补充。把目光从遥远的模块模式收回到 2015 年 ES6 发布之后，JavaScript 语言特征得到增强，曾风靡一时的潮词模块模式几乎从网络中销声匿迹了。现在我们可以自由地使用类封装状态，不必再写因缺乏语义显得蹩脚的 IIFE 。",{"type":419,"tag":424,"props":1259,"children":1260},{},[1261],{"type":428,"value":1262},"我们再来看看面向对象中的常见的装饰器模式。",{"type":419,"tag":424,"props":1264,"children":1265},{},[1266],{"type":428,"value":1267},"假设你在维护一个开源项目，项目中有些过时的 API，你想在别人调用该 API 时提示一句“你好，此 API 将在下个版本移除”。这段代码可以这样写：",{"type":419,"tag":538,"props":1269,"children":1271},{"className":540,"code":1270,"language":542,"meta":413,"style":413},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\nconst myAPI = {\n  @deprecate('WARN: oldAPI is decrapted, please use oldAPI_v2')\n  oldAPI() {}\n}\n",[1272],{"type":419,"tag":545,"props":1273,"children":1274},{"__ignoreMap":413},[1275,1284,1304,1340,1357],{"type":419,"tag":549,"props":1276,"children":1277},{"class":551,"line":552},[1278],{"type":419,"tag":549,"props":1279,"children":1281},{"style":1280},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1282],{"type":428,"value":1283},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\n",{"type":419,"tag":549,"props":1285,"children":1286},{"class":551,"line":763},[1287,1291,1296,1300],{"type":419,"tag":549,"props":1288,"children":1289},{"style":746},[1290],{"type":428,"value":1018},{"type":419,"tag":549,"props":1292,"children":1293},{"style":1021},[1294],{"type":428,"value":1295}," myAPI",{"type":419,"tag":549,"props":1297,"children":1298},{"style":800},[1299],{"type":428,"value":803},{"type":419,"tag":549,"props":1301,"children":1302},{"style":562},[1303],{"type":428,"value":760},{"type":419,"tag":549,"props":1305,"children":1306},{"class":551,"line":781},[1307,1312,1317,1322,1326,1331,1335],{"type":419,"tag":549,"props":1308,"children":1309},{"style":556},[1310],{"type":428,"value":1311},"  @",{"type":419,"tag":549,"props":1313,"children":1314},{"style":836},[1315],{"type":428,"value":1316},"deprecate",{"type":419,"tag":549,"props":1318,"children":1319},{"style":562},[1320],{"type":428,"value":1321},"(",{"type":419,"tag":549,"props":1323,"children":1324},{"style":806},[1325],{"type":428,"value":871},{"type":419,"tag":549,"props":1327,"children":1328},{"style":812},[1329],{"type":428,"value":1330},"WARN: oldAPI is decrapted, please use oldAPI_v2",{"type":419,"tag":549,"props":1332,"children":1333},{"style":806},[1334],{"type":428,"value":871},{"type":419,"tag":549,"props":1336,"children":1337},{"style":562},[1338],{"type":428,"value":1339},")\n",{"type":419,"tag":549,"props":1341,"children":1342},{"class":551,"line":823},[1343,1348,1352],{"type":419,"tag":549,"props":1344,"children":1345},{"style":836},[1346],{"type":428,"value":1347},"  oldAPI",{"type":419,"tag":549,"props":1349,"children":1350},{"style":562},[1351],{"type":428,"value":1037},{"type":419,"tag":549,"props":1353,"children":1354},{"style":562},[1355],{"type":428,"value":1356}," {}\n",{"type":419,"tag":549,"props":1358,"children":1359},{"class":551,"line":832},[1360],{"type":419,"tag":549,"props":1361,"children":1362},{"style":562},[1363],{"type":428,"value":985},{"type":419,"tag":424,"props":1365,"children":1366},{},[1367,1369,1377],{"type":428,"value":1368},"若不是",{"type":419,"tag":446,"props":1370,"children":1374},{"href":1371,"rel":1372},"https://github.com/tc39/proposal-decorators",[1373],"nofollow",[1375],{"type":428,"value":1376},"装饰器提案",{"type":428,"value":1378},"的出现，我赌五毛，社区里不会有太多讨论装饰器模式的文章。不过大家若有留意过平常的代码，肯定会注意到其实高阶函数就是装饰器的具体实现。函数在 JS 中是一等公民，通过函数组合可以极其方便地仿制某些设计模式。比如，下代码中，使用“局部应用”函数仿制了一个工厂模式：",{"type":419,"tag":538,"props":1380,"children":1382},{"className":540,"code":1381,"language":542,"meta":413,"style":413},"const Partial = (fn, ...args) => (...rest) => fn(...args, ...rest)\n\nconst Adder = (a, b) => a + b\n\nconst add5 = Partial(Adder, 5)\n\nadd5(5) // >>> 10\nadd5(10) // >>> 15\n",[1383],{"type":419,"tag":545,"props":1384,"children":1385},{"__ignoreMap":413},[1386,1487,1496,1552,1559,1598,1605,1632],{"type":419,"tag":549,"props":1387,"children":1388},{"class":551,"line":552},[1389,1393,1399,1403,1407,1412,1417,1422,1427,1431,1435,1439,1444,1449,1453,1457,1462,1466,1470,1474,1478,1482],{"type":419,"tag":549,"props":1390,"children":1391},{"style":746},[1392],{"type":428,"value":1018},{"type":419,"tag":549,"props":1394,"children":1396},{"style":1395},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1397],{"type":428,"value":1398}," Partial",{"type":419,"tag":549,"props":1400,"children":1401},{"style":800},[1402],{"type":428,"value":803},{"type":419,"tag":549,"props":1404,"children":1405},{"style":562},[1406],{"type":428,"value":928},{"type":419,"tag":549,"props":1408,"children":1409},{"style":931},[1410],{"type":428,"value":1411},"fn",{"type":419,"tag":549,"props":1413,"children":1414},{"style":562},[1415],{"type":428,"value":1416},",",{"type":419,"tag":549,"props":1418,"children":1419},{"style":800},[1420],{"type":428,"value":1421}," ...",{"type":419,"tag":549,"props":1423,"children":1424},{"style":931},[1425],{"type":428,"value":1426},"args",{"type":419,"tag":549,"props":1428,"children":1429},{"style":562},[1430],{"type":428,"value":939},{"type":419,"tag":549,"props":1432,"children":1433},{"style":746},[1434],{"type":428,"value":1042},{"type":419,"tag":549,"props":1436,"children":1437},{"style":562},[1438],{"type":428,"value":928},{"type":419,"tag":549,"props":1440,"children":1441},{"style":800},[1442],{"type":428,"value":1443},"...",{"type":419,"tag":549,"props":1445,"children":1446},{"style":931},[1447],{"type":428,"value":1448},"rest",{"type":419,"tag":549,"props":1450,"children":1451},{"style":562},[1452],{"type":428,"value":939},{"type":419,"tag":549,"props":1454,"children":1455},{"style":746},[1456],{"type":428,"value":1042},{"type":419,"tag":549,"props":1458,"children":1459},{"style":568},[1460],{"type":428,"value":1461}," fn",{"type":419,"tag":549,"props":1463,"children":1464},{"style":556},[1465],{"type":428,"value":1321},{"type":419,"tag":549,"props":1467,"children":1468},{"style":800},[1469],{"type":428,"value":1443},{"type":419,"tag":549,"props":1471,"children":1472},{"style":556},[1473],{"type":428,"value":1426},{"type":419,"tag":549,"props":1475,"children":1476},{"style":562},[1477],{"type":428,"value":1416},{"type":419,"tag":549,"props":1479,"children":1480},{"style":800},[1481],{"type":428,"value":1421},{"type":419,"tag":549,"props":1483,"children":1484},{"style":556},[1485],{"type":428,"value":1486},"rest)\n",{"type":419,"tag":549,"props":1488,"children":1489},{"class":551,"line":763},[1490],{"type":419,"tag":549,"props":1491,"children":1493},{"emptyLinePlaceholder":1492},true,[1494],{"type":428,"value":1495},"\n",{"type":419,"tag":549,"props":1497,"children":1498},{"class":551,"line":781},[1499,1503,1508,1512,1516,1520,1524,1529,1533,1537,1542,1547],{"type":419,"tag":549,"props":1500,"children":1501},{"style":746},[1502],{"type":428,"value":1018},{"type":419,"tag":549,"props":1504,"children":1505},{"style":1395},[1506],{"type":428,"value":1507}," Adder",{"type":419,"tag":549,"props":1509,"children":1510},{"style":800},[1511],{"type":428,"value":803},{"type":419,"tag":549,"props":1513,"children":1514},{"style":562},[1515],{"type":428,"value":928},{"type":419,"tag":549,"props":1517,"children":1518},{"style":931},[1519],{"type":428,"value":446},{"type":419,"tag":549,"props":1521,"children":1522},{"style":562},[1523],{"type":428,"value":1416},{"type":419,"tag":549,"props":1525,"children":1526},{"style":931},[1527],{"type":428,"value":1528}," b",{"type":419,"tag":549,"props":1530,"children":1531},{"style":562},[1532],{"type":428,"value":939},{"type":419,"tag":549,"props":1534,"children":1535},{"style":746},[1536],{"type":428,"value":1042},{"type":419,"tag":549,"props":1538,"children":1539},{"style":556},[1540],{"type":428,"value":1541}," a ",{"type":419,"tag":549,"props":1543,"children":1544},{"style":800},[1545],{"type":428,"value":1546},"+",{"type":419,"tag":549,"props":1548,"children":1549},{"style":556},[1550],{"type":428,"value":1551}," b\n",{"type":419,"tag":549,"props":1553,"children":1554},{"class":551,"line":823},[1555],{"type":419,"tag":549,"props":1556,"children":1557},{"emptyLinePlaceholder":1492},[1558],{"type":428,"value":1495},{"type":419,"tag":549,"props":1560,"children":1561},{"class":551,"line":832},[1562,1566,1571,1575,1579,1584,1588,1594],{"type":419,"tag":549,"props":1563,"children":1564},{"style":746},[1565],{"type":428,"value":1018},{"type":419,"tag":549,"props":1567,"children":1568},{"style":1021},[1569],{"type":428,"value":1570}," add5",{"type":419,"tag":549,"props":1572,"children":1573},{"style":800},[1574],{"type":428,"value":803},{"type":419,"tag":549,"props":1576,"children":1577},{"style":568},[1578],{"type":428,"value":1398},{"type":419,"tag":549,"props":1580,"children":1581},{"style":556},[1582],{"type":428,"value":1583},"(Adder",{"type":419,"tag":549,"props":1585,"children":1586},{"style":562},[1587],{"type":428,"value":1416},{"type":419,"tag":549,"props":1589,"children":1591},{"style":1590},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1592],{"type":428,"value":1593}," 5",{"type":419,"tag":549,"props":1595,"children":1596},{"style":556},[1597],{"type":428,"value":1339},{"type":419,"tag":549,"props":1599,"children":1600},{"class":551,"line":850},[1601],{"type":419,"tag":549,"props":1602,"children":1603},{"emptyLinePlaceholder":1492},[1604],{"type":428,"value":1495},{"type":419,"tag":549,"props":1606,"children":1607},{"class":551,"line":909},[1608,1613,1617,1622,1627],{"type":419,"tag":549,"props":1609,"children":1610},{"style":568},[1611],{"type":428,"value":1612},"add5",{"type":419,"tag":549,"props":1614,"children":1615},{"style":556},[1616],{"type":428,"value":1321},{"type":419,"tag":549,"props":1618,"children":1619},{"style":1590},[1620],{"type":428,"value":1621},"5",{"type":419,"tag":549,"props":1623,"children":1624},{"style":556},[1625],{"type":428,"value":1626},") ",{"type":419,"tag":549,"props":1628,"children":1629},{"style":1280},[1630],{"type":428,"value":1631},"// >>> 10\n",{"type":419,"tag":549,"props":1633,"children":1634},{"class":551,"line":917},[1635,1639,1643,1648,1652],{"type":419,"tag":549,"props":1636,"children":1637},{"style":568},[1638],{"type":428,"value":1612},{"type":419,"tag":549,"props":1640,"children":1641},{"style":556},[1642],{"type":428,"value":1321},{"type":419,"tag":549,"props":1644,"children":1645},{"style":1590},[1646],{"type":428,"value":1647},"10",{"type":419,"tag":549,"props":1649,"children":1650},{"style":556},[1651],{"type":428,"value":1626},{"type":419,"tag":549,"props":1653,"children":1654},{"style":1280},[1655],{"type":428,"value":1656},"// >>> 15\n",{"type":419,"tag":424,"props":1658,"children":1659},{},[1660],{"type":428,"value":1661},"我猜你想咆哮：“工厂模式根本就不是这样写的！”。哈哈，别那么固执，变通一些嘛。我们现在讨论的设计模式是去除了面向对象之后的余留物，几乎只保留了设计模式的本质，复用。换句话说，Partial 是“函数工厂”，是“生成器”，“产出”了仍能接受一个参数的函数。",{"type":419,"tag":1663,"props":1664,"children":1665},"details",{},[1666,1668,1674,1675],{"type":428,"value":1667},"\n    ",{"type":419,"tag":1669,"props":1670,"children":1671},"summary",{},[1672],{"type":428,"value":1673},"我用到了类吗？",{"type":428,"value":1667},{"type":419,"tag":424,"props":1676,"children":1677},{},[1678],{"type":428,"value":1679},"没有。",{"type":419,"tag":1663,"props":1681,"children":1682},{},[1683,1684,1689,1690],{"type":428,"value":1667},{"type":419,"tag":1669,"props":1685,"children":1686},{},[1687],{"type":428,"value":1688},"用到了原型吗？",{"type":428,"value":1667},{"type":419,"tag":424,"props":1691,"children":1692},{},[1693],{"type":428,"value":1679},{"type":419,"tag":1663,"props":1695,"children":1696},{},[1697,1698,1703,1704],{"type":428,"value":1667},{"type":419,"tag":1669,"props":1699,"children":1700},{},[1701],{"type":428,"value":1702},"那我在写什么？",{"type":428,"value":1667},{"type":419,"tag":424,"props":1705,"children":1706},{},[1707],{"type":428,"value":1708},"函数。",{"type":419,"tag":424,"props":1710,"children":1711},{},[1712,1714,1731,1733,1738],{"type":428,"value":1713},"函数，函数而已！",{"type":419,"tag":466,"props":1715,"children":1716},{},[1717,1719,1729],{"type":428,"value":1718},"“函数是一等公民",{"type":419,"tag":442,"props":1720,"children":1721},{},[1722],{"type":419,"tag":446,"props":1723,"children":1727},{"href":1724,"ariaDescribedBy":1725,"dataFootnoteRef":413,"id":1726},"#user-content-fn-firstclass",[450],"user-content-fnref-firstclass",[1728],{"type":428,"value":1621},{"type":428,"value":1730},"”",{"type":428,"value":1732},"，这句话得背熟了，因为诸如“闭包”、“回调”等概念都和函数有关，",{"type":419,"tag":602,"props":1734,"children":1735},{},[1736],{"type":428,"value":1737},"面试经常会问道",{"type":428,"value":1739},"你迟早会用上的。若谈论设计模式脱离不开语言特征的话，那扯上函数绝对不会有任何问题。",{"type":419,"tag":424,"props":1741,"children":1742},{},[1743],{"type":428,"value":1744},"亲函数而远类的写法可以帮助我们消化许多种类的设计模式，我们再来看最后一种，代理模式。",{"type":419,"tag":424,"props":1746,"children":1747},{},[1748],{"type":428,"value":1749},"ES6 原生支持代理模式。对，就是 Vue3 里的那个“Proxy”，直译为“代理器”。社区有很多讲 Vue3 原理分析的文章，肯定绕不开 Proxy，这里不再赘述了。以下展示一个使用 Proxy 拦截对象操作的小例子。",{"type":419,"tag":538,"props":1751,"children":1753},{"className":540,"code":1752,"language":542,"meta":413,"style":413},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\nconst proxy = new Proxy({}, {\n  set(target, key, value) {\n    invariant(key, 'set')\n    target[key] = value\n    return true\n  }\n})\n\nfunction invariant(key, action) {\n  if (key.startsWith('_')) {\n    throw new Error(`Invalid Key`)\n  }\n}\n\nproxy._prop = 'somevalue'\n// Error: Invalid Key\n",[1754],{"type":419,"tag":545,"props":1755,"children":1756},{"__ignoreMap":413},[1757,1765,1804,1847,1886,1918,1931,1938,1949,1956,1994,2046,2085,2092,2100,2108,2143],{"type":419,"tag":549,"props":1758,"children":1759},{"class":551,"line":552},[1760],{"type":419,"tag":549,"props":1761,"children":1762},{"style":1280},[1763],{"type":428,"value":1764},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\n",{"type":419,"tag":549,"props":1766,"children":1767},{"class":551,"line":763},[1768,1772,1777,1781,1786,1791,1795,1800],{"type":419,"tag":549,"props":1769,"children":1770},{"style":746},[1771],{"type":428,"value":1018},{"type":419,"tag":549,"props":1773,"children":1774},{"style":1021},[1775],{"type":428,"value":1776}," proxy",{"type":419,"tag":549,"props":1778,"children":1779},{"style":800},[1780],{"type":428,"value":803},{"type":419,"tag":549,"props":1782,"children":1783},{"style":800},[1784],{"type":428,"value":1785}," new",{"type":419,"tag":549,"props":1787,"children":1788},{"style":568},[1789],{"type":428,"value":1790}," Proxy",{"type":419,"tag":549,"props":1792,"children":1793},{"style":556},[1794],{"type":428,"value":1321},{"type":419,"tag":549,"props":1796,"children":1797},{"style":562},[1798],{"type":428,"value":1799},"{},",{"type":419,"tag":549,"props":1801,"children":1802},{"style":562},[1803],{"type":428,"value":760},{"type":419,"tag":549,"props":1805,"children":1806},{"class":551,"line":781},[1807,1812,1816,1821,1825,1830,1834,1839,1843],{"type":419,"tag":549,"props":1808,"children":1809},{"style":836},[1810],{"type":428,"value":1811},"  set",{"type":419,"tag":549,"props":1813,"children":1814},{"style":562},[1815],{"type":428,"value":1321},{"type":419,"tag":549,"props":1817,"children":1818},{"style":931},[1819],{"type":428,"value":1820},"target",{"type":419,"tag":549,"props":1822,"children":1823},{"style":562},[1824],{"type":428,"value":1416},{"type":419,"tag":549,"props":1826,"children":1827},{"style":931},[1828],{"type":428,"value":1829}," key",{"type":419,"tag":549,"props":1831,"children":1832},{"style":562},[1833],{"type":428,"value":1416},{"type":419,"tag":549,"props":1835,"children":1836},{"style":931},[1837],{"type":428,"value":1838}," value",{"type":419,"tag":549,"props":1840,"children":1841},{"style":562},[1842],{"type":428,"value":939},{"type":419,"tag":549,"props":1844,"children":1845},{"style":562},[1846],{"type":428,"value":760},{"type":419,"tag":549,"props":1848,"children":1849},{"class":551,"line":823},[1850,1855,1860,1865,1869,1873,1878,1882],{"type":419,"tag":549,"props":1851,"children":1852},{"style":568},[1853],{"type":428,"value":1854},"    invariant",{"type":419,"tag":549,"props":1856,"children":1858},{"style":1857},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1859],{"type":428,"value":1321},{"type":419,"tag":549,"props":1861,"children":1862},{"style":556},[1863],{"type":428,"value":1864},"key",{"type":419,"tag":549,"props":1866,"children":1867},{"style":562},[1868],{"type":428,"value":1416},{"type":419,"tag":549,"props":1870,"children":1871},{"style":806},[1872],{"type":428,"value":809},{"type":419,"tag":549,"props":1874,"children":1875},{"style":812},[1876],{"type":428,"value":1877},"set",{"type":419,"tag":549,"props":1879,"children":1880},{"style":806},[1881],{"type":428,"value":871},{"type":419,"tag":549,"props":1883,"children":1884},{"style":1857},[1885],{"type":428,"value":1339},{"type":419,"tag":549,"props":1887,"children":1888},{"class":551,"line":832},[1889,1894,1899,1903,1908,1913],{"type":419,"tag":549,"props":1890,"children":1891},{"style":556},[1892],{"type":428,"value":1893},"    target",{"type":419,"tag":549,"props":1895,"children":1896},{"style":1857},[1897],{"type":428,"value":1898},"[",{"type":419,"tag":549,"props":1900,"children":1901},{"style":556},[1902],{"type":428,"value":1864},{"type":419,"tag":549,"props":1904,"children":1905},{"style":1857},[1906],{"type":428,"value":1907},"] ",{"type":419,"tag":549,"props":1909,"children":1910},{"style":800},[1911],{"type":428,"value":1912},"=",{"type":419,"tag":549,"props":1914,"children":1915},{"style":556},[1916],{"type":428,"value":1917}," value\n",{"type":419,"tag":549,"props":1919,"children":1920},{"class":551,"line":850},[1921,1925],{"type":419,"tag":549,"props":1922,"children":1923},{"style":854},[1924],{"type":428,"value":857},{"type":419,"tag":549,"props":1926,"children":1928},{"style":1927},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1929],{"type":428,"value":1930}," true\n",{"type":419,"tag":549,"props":1932,"children":1933},{"class":551,"line":909},[1934],{"type":419,"tag":549,"props":1935,"children":1936},{"style":562},[1937],{"type":428,"value":829},{"type":419,"tag":549,"props":1939,"children":1940},{"class":551,"line":917},[1941,1945],{"type":419,"tag":549,"props":1942,"children":1943},{"style":562},[1944],{"type":428,"value":1247},{"type":419,"tag":549,"props":1946,"children":1947},{"style":556},[1948],{"type":428,"value":1339},{"type":419,"tag":549,"props":1950,"children":1951},{"class":551,"line":946},[1952],{"type":419,"tag":549,"props":1953,"children":1954},{"emptyLinePlaceholder":1492},[1955],{"type":428,"value":1495},{"type":419,"tag":549,"props":1957,"children":1958},{"class":551,"line":971},[1959,1964,1969,1973,1977,1981,1986,1990],{"type":419,"tag":549,"props":1960,"children":1961},{"style":746},[1962],{"type":428,"value":1963},"function",{"type":419,"tag":549,"props":1965,"children":1966},{"style":568},[1967],{"type":428,"value":1968}," invariant",{"type":419,"tag":549,"props":1970,"children":1971},{"style":562},[1972],{"type":428,"value":1321},{"type":419,"tag":549,"props":1974,"children":1975},{"style":931},[1976],{"type":428,"value":1864},{"type":419,"tag":549,"props":1978,"children":1979},{"style":562},[1980],{"type":428,"value":1416},{"type":419,"tag":549,"props":1982,"children":1983},{"style":931},[1984],{"type":428,"value":1985}," action",{"type":419,"tag":549,"props":1987,"children":1988},{"style":562},[1989],{"type":428,"value":939},{"type":419,"tag":549,"props":1991,"children":1992},{"style":562},[1993],{"type":428,"value":760},{"type":419,"tag":549,"props":1995,"children":1996},{"class":551,"line":979},[1997,2002,2006,2010,2014,2019,2023,2027,2032,2036,2041],{"type":419,"tag":549,"props":1998,"children":1999},{"style":854},[2000],{"type":428,"value":2001},"  if",{"type":419,"tag":549,"props":2003,"children":2004},{"style":1857},[2005],{"type":428,"value":928},{"type":419,"tag":549,"props":2007,"children":2008},{"style":556},[2009],{"type":428,"value":1864},{"type":419,"tag":549,"props":2011,"children":2012},{"style":562},[2013],{"type":428,"value":565},{"type":419,"tag":549,"props":2015,"children":2016},{"style":568},[2017],{"type":428,"value":2018},"startsWith",{"type":419,"tag":549,"props":2020,"children":2021},{"style":1857},[2022],{"type":428,"value":1321},{"type":419,"tag":549,"props":2024,"children":2025},{"style":806},[2026],{"type":428,"value":871},{"type":419,"tag":549,"props":2028,"children":2029},{"style":812},[2030],{"type":428,"value":2031},"_",{"type":419,"tag":549,"props":2033,"children":2034},{"style":806},[2035],{"type":428,"value":871},{"type":419,"tag":549,"props":2037,"children":2038},{"style":1857},[2039],{"type":428,"value":2040},")) ",{"type":419,"tag":549,"props":2042,"children":2043},{"style":562},[2044],{"type":428,"value":2045},"{\n",{"type":419,"tag":549,"props":2047,"children":2048},{"class":551,"line":1233},[2049,2054,2058,2063,2067,2072,2077,2081],{"type":419,"tag":549,"props":2050,"children":2051},{"style":854},[2052],{"type":428,"value":2053},"    throw",{"type":419,"tag":549,"props":2055,"children":2056},{"style":800},[2057],{"type":428,"value":1785},{"type":419,"tag":549,"props":2059,"children":2060},{"style":568},[2061],{"type":428,"value":2062}," Error",{"type":419,"tag":549,"props":2064,"children":2065},{"style":1857},[2066],{"type":428,"value":1321},{"type":419,"tag":549,"props":2068,"children":2069},{"style":806},[2070],{"type":428,"value":2071},"`",{"type":419,"tag":549,"props":2073,"children":2074},{"style":812},[2075],{"type":428,"value":2076},"Invalid Key",{"type":419,"tag":549,"props":2078,"children":2079},{"style":806},[2080],{"type":428,"value":2071},{"type":419,"tag":549,"props":2082,"children":2083},{"style":1857},[2084],{"type":428,"value":1339},{"type":419,"tag":549,"props":2086,"children":2087},{"class":551,"line":1241},[2088],{"type":419,"tag":549,"props":2089,"children":2090},{"style":562},[2091],{"type":428,"value":829},{"type":419,"tag":549,"props":2093,"children":2095},{"class":551,"line":2094},14,[2096],{"type":419,"tag":549,"props":2097,"children":2098},{"style":562},[2099],{"type":428,"value":985},{"type":419,"tag":549,"props":2101,"children":2103},{"class":551,"line":2102},15,[2104],{"type":419,"tag":549,"props":2105,"children":2106},{"emptyLinePlaceholder":1492},[2107],{"type":428,"value":1495},{"type":419,"tag":549,"props":2109,"children":2111},{"class":551,"line":2110},16,[2112,2117,2121,2126,2130,2134,2139],{"type":419,"tag":549,"props":2113,"children":2114},{"style":556},[2115],{"type":428,"value":2116},"proxy",{"type":419,"tag":549,"props":2118,"children":2119},{"style":562},[2120],{"type":428,"value":565},{"type":419,"tag":549,"props":2122,"children":2123},{"style":556},[2124],{"type":428,"value":2125},"_prop ",{"type":419,"tag":549,"props":2127,"children":2128},{"style":800},[2129],{"type":428,"value":1912},{"type":419,"tag":549,"props":2131,"children":2132},{"style":806},[2133],{"type":428,"value":809},{"type":419,"tag":549,"props":2135,"children":2136},{"style":812},[2137],{"type":428,"value":2138},"somevalue",{"type":419,"tag":549,"props":2140,"children":2141},{"style":806},[2142],{"type":428,"value":820},{"type":419,"tag":549,"props":2144,"children":2146},{"class":551,"line":2145},17,[2147],{"type":419,"tag":549,"props":2148,"children":2149},{"style":1280},[2150],{"type":428,"value":2151},"// Error: Invalid Key\n",{"type":419,"tag":424,"props":2153,"children":2154},{},[2155],{"type":428,"value":2156},"若脱离 ES 6，代理模式会变成什么？",{"type":419,"tag":424,"props":2158,"children":2159},{},[2160],{"type":428,"value":2161},"会变成一团带有 Proxy Patterns 注释的函数，会被某个 GitHub 上的库吸收下放到 Readme 中亦或是变成社区中新增的几篇“JS 中的代理模式”的博客... 害，无所谓了。",{"type":419,"tag":431,"props":2163,"children":2165},{"id":2164},"设计模式的消融",[2166],{"type":428,"value":2164},{"type":419,"tag":424,"props":2168,"children":2169},{},[2170,2175],{"type":419,"tag":466,"props":2171,"children":2172},{},[2173],{"type":428,"value":2174},"总的来说，设计模式无非有三种作用：创建对象、组合对象以及处理对象的依赖",{"type":428,"value":2176},"。面向对象设计模式所代表的复用性，只能在面向对象的上下文中使用。跳出面向对象，你会发现代码复用的层次可以更加开放，下至语言特征，上至框架。",{"type":419,"tag":424,"props":2178,"children":2179},{},[2180],{"type":428,"value":2181},"作为抽象的最低层级，JS 语言特征，离不开日益见新的语言规范。上文总结的设计模式与语言特征的重叠之处，可以概括为以下两点：",{"type":419,"tag":2183,"props":2184,"children":2185},"ul",{},[2186,2192],{"type":419,"tag":2187,"props":2188,"children":2189},"li",{},[2190],{"type":428,"value":2191},"若语言本身孱弱时，可通过语言特征的再上层抽象，如函数，来提高复用的层次（即发明一种新的设计模式）；",{"type":419,"tag":2187,"props":2193,"children":2194},{},[2195],{"type":428,"value":2196},"当语言逐渐强大时，设计模式的概念也随之弱化；",{"type":419,"tag":424,"props":2198,"children":2199},{},[2200],{"type":428,"value":2201},"听起来颇有些“设计模式是对语言能力不足的补充”的味道，难道说我们要开始编程语言的圣战？这让我回想起 Paul Graham 在《黑客与画家》中描写到他对“强大语言”的赤裸裸的崇拜:",{"type":419,"tag":420,"props":2203,"children":2204},{},[2205],{"type":419,"tag":424,"props":2206,"children":2207},{},[2208,2210,2214,2216,2219,2221,2224,2226,2229,2231],{"type":428,"value":2209},"如果你想解决一个困难的问题，",{"type":419,"tag":2211,"props":2212,"children":2213},"br",{},[],{"type":428,"value":2215},"\n关键不是你使用的语言是否强大，而是好几个因素同时发挥作用：",{"type":419,"tag":2211,"props":2217,"children":2218},{},[],{"type":428,"value":2220},"\n（a）使用一种强大的语言；",{"type":419,"tag":2211,"props":2222,"children":2223},{},[],{"type":428,"value":2225},"\n（b）为这个难题写一个真实世界中的编译器；",{"type":419,"tag":2211,"props":2227,"children":2228},{},[],{"type":428,"value":2230},"\n（c）或者... 你把自己变成这个难题的人肉编译器。\n",{"type":419,"tag":797,"props":2232,"children":2233},{},[2234],{"type":428,"value":2235},"Paul Graham",{"type":419,"tag":424,"props":2237,"children":2238},{},[2239],{"type":428,"value":2240},"Paul Graham 就觉得设计模式就是一种对语言能力不足的妥协，“语言的编程能力越强大，写出来的程序就越短”。当然，就算有一种语言可以强大到和破除面向对象设计模式的神话，关于语言的表达能力强弱的争论也不会停止。不过好消息是，脱离场景谈语言一定是错误的，正如没有人会指望用汇编来编写 Web 程序。",{"type":419,"tag":424,"props":2242,"children":2243},{},[2244],{"type":428,"value":2245},"我们没必要去追求极致的编程语言表达力，表达力和复杂度往往是正相关的，就像世界上所有的语言的法阵都会伴随着词语的演进、读音的兴替以及对错误语法的包容，但很少有人说（或敢说）“你看，白话文比起文言文来说真是不够格啊”。",{"type":419,"tag":424,"props":2247,"children":2248},{},[2249],{"type":428,"value":2250},"脱离面向对象，我们也可以谈论设计模式，因为我们聊的就是代码复用。就算使用函数式、声明式的语言解决问题，也许有特定范式可遵循。请想象一下 CSS 中的设计模式。嗯？CSS 有设计模式么？私以为有。特异性、继承和层叠这三种语言特征就是 CSS 的设计模式；在这三种基础特性之上建立起来的各种代码组织方案/命名方案（如 OOCSS、Atomic CSS），也算。",{"type":419,"tag":424,"props":2252,"children":2253},{},[2254,2259],{"type":419,"tag":466,"props":2255,"children":2256},{},[2257],{"type":428,"value":2258},"唯一不变的，只有抽象的复用",{"type":428,"value":2260},"。我们做的一切工作，只是在抽象出不同层次的代码复用的同时，尽可能把代码组织成容易理解的形式。重要的不是记住某个设计模式中的实体以及实体是如何通讯的，而是要理解该设计模式所代表的抽象的体量适合的场景。",{"type":419,"tag":431,"props":2262,"children":2264},{"id":2263},"语言的魔法锅",[2265],{"type":428,"value":2263},{"type":419,"tag":420,"props":2267,"children":2268},{},[2269],{"type":419,"tag":424,"props":2270,"children":2271},{},[2272,2274],{"type":428,"value":2273},"在威尔士神话中，有一口神奇的大锅，加入特定配方熬制上一年零一天后，便能萃取出三滴解决任何难题的灵药。\n",{"type":419,"tag":797,"props":2275,"children":2276},{},[2277],{"type":428,"value":2278},"《塔列辛传奇》",{"type":419,"tag":424,"props":2280,"children":2281},{},[2282,2284,2291,2293,2300,2302,2313,2315,2326],{"type":428,"value":2283},"JavaScript 的火热日益见长，前端社区",{"type":419,"tag":446,"props":2285,"children":2288},{"href":2286,"rel":2287},"https://githut.info/",[1373],[2289],{"type":428,"value":2290},"越加活跃",{"type":428,"value":2292},"，规范也",{"type":419,"tag":446,"props":2294,"children":2297},{"href":2295,"rel":2296},"https://tc39.es/ecma262/",[1373],[2298],{"type":428,"value":2299},"日益见新",{"type":428,"value":2301},"。ESNeeext 已经往魔法锅中加了许多新材料，这是好事（其实我满心期待它直接把锅塞满）。新的语言特征能带来了更多的可能性，就目前而言，新特征大概率能增加语义，增强表达力、降低思维负担",{"type":419,"tag":442,"props":2303,"children":2304},{},[2305],{"type":419,"tag":446,"props":2306,"children":2310},{"href":2307,"ariaDescribedBy":2308,"dataFootnoteRef":413,"id":2309},"#user-content-fn-if-one-word",[450],"user-content-fnref-if-one-word",[2311],{"type":428,"value":2312},"6",{"type":428,"value":2314},"。尽管把材料往大锅中塞吧",{"type":419,"tag":442,"props":2316,"children":2317},{},[2318],{"type":419,"tag":446,"props":2319,"children":2323},{"href":2320,"ariaDescribedBy":2321,"dataFootnoteRef":413,"id":2322},"#user-content-fn-how-js-works",[450],"user-content-fnref-how-js-works",[2324],{"type":428,"value":2325},"7",{"type":428,"value":2327},"！让我们一同祈祷萃取出灵药的一天早日到来！",{"type":419,"tag":424,"props":2329,"children":2330},{},[2331],{"type":428,"value":2332},"以下就用魔法锅的故事作为文章结尾，这是一个颇有意思的传奇故事。",{"type":419,"tag":424,"props":2334,"children":2335},{},[2336],{"type":419,"tag":502,"props":2337,"children":2340},{"alt":2338,"src":2339},"炼金术 | 维基百科","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200713074400.png",[],{"type":419,"tag":424,"props":2342,"children":2343},{},[2344],{"type":428,"value":2345},"在爱尔兰一个隐秘的角落，住着一个精通智慧与魔法的巫师，凯丽杜恩（Ceridwen）。她能力超凡，偏偏却生了一个丑陋的儿子。所以这位母亲竭尽所能想将智慧传授给他，以弥补其外表的丑陋。她辗转于各种巫术与秘仪，最后，总算在一本隐秘的魔书中找到了灵感。",{"type":419,"tag":424,"props":2347,"children":2348},{},[2349],{"type":428,"value":2350},"魔书将秘密告诉凯丽杜恩：她需要使用一口大的魔法锅，填满红山花、小麦、火盐、精灵耳、直立根和灵尘，用大火熬制上一年零一天。最终会生成一锅致命毒物，但溅出的前三滴汁液却是充满“预言之灵”的智慧灵药。",{"type":419,"tag":424,"props":2352,"children":2353},{},[2354],{"type":428,"value":2355},"很快，熬制魔法锅的工作在凯丽杜恩的安排下有条不紊地进行，一个名字未知的盲人被派来搅拌大锅，年轻人巴赫则负责烧它下面的火。",{"type":419,"tag":424,"props":2357,"children":2358},{},[2359],{"type":428,"value":2360},"星象在天空中咯咯响地平移着，太阳和月亮绕着地球转了一轮又一轮... 随着时间推移，锅中的草药效力变得越来越强。看着咕嘟嘟冒着气泡的大锅，凯丽杜恩觉得很是满意，她便躺在温暖的锅边睡着了。",{"type":419,"tag":424,"props":2362,"children":2363},{},[2364,2366],{"type":428,"value":2365},"就在此时，意外发生了。翻腾着热气的大锅，意外地溅出了几点液体在年轻人巴赫的手指上，而巴赫居然不假思索地将手指吮吸地干干净净。和魔书的预言一样，巴赫立马就获得了智慧。他瞬间通晓了火焰的舞蹈和水的诉说，山的尊严和风的呢喃... 他知晓了无数秘密，以及... ",{"type":419,"tag":466,"props":2367,"children":2368},{},[2369],{"type":428,"value":2370},"凯丽杜恩肯定会杀了他！",{"type":419,"tag":424,"props":2372,"children":2373},{},[2374],{"type":428,"value":2375},"慌乱中，巴赫变成一只野兔夺路而逃，而凯丽杜恩惊醒后赶忙变成猎犬一路追踪过去。巴赫变成天空中的鸽子，她就变成一只鹰；他变成一头奔跑的鹿，她就变成一只草原上的狼；他化身为谷仓中的一粒麦粒，她就变成一只啄个不停老母鸡...",{"type":419,"tag":424,"props":2377,"children":2378},{},[2379],{"type":428,"value":2380},"这两人也许一直较量着，直到今天。",{"type":419,"tag":431,"props":2382,"children":2384},{"id":2383},"阅读更多",[2385],{"type":428,"value":2383},{"type":419,"tag":2183,"props":2387,"children":2388},{},[2389,2399,2409],{"type":419,"tag":2187,"props":2390,"children":2391},{},[2392],{"type":419,"tag":446,"props":2393,"children":2396},{"href":2394,"rel":2395},"https://www.jdon.com/37356",[1373],[2397],{"type":428,"value":2398},"15 年后 GoF 设计模式作者再谈设计模式",{"type":419,"tag":2187,"props":2400,"children":2401},{},[2402],{"type":419,"tag":446,"props":2403,"children":2406},{"href":2404,"rel":2405},"https://www.zhihu.com/question/37009570",[1373],[2407],{"type":428,"value":2408},"为什么不能乱点技能树",{"type":419,"tag":2187,"props":2410,"children":2411},{},[2412],{"type":419,"tag":446,"props":2413,"children":2416},{"href":2414,"rel":2415},"https://mp.weixin.qq.com/s?src=11&timestamp=1651051411&ver=3764&signature=AiaMcpc*LLVNlmVWIHaOvu4sThNq8OFp8ckqlVllLSohG8dWn**P3unuBhRwZAEND0uJdnurJtHvE6IKlBYAUUwuvRYknXkKje6CzOZaQBxRPIlnN4kwtzYsfa8fxKSM&new=1",[1373],[2417],{"type":428,"value":2418},"超越库和框架的技术创新",{"type":419,"tag":424,"props":2420,"children":2421},{},[2422],{"type":428,"value":2423},"希望本文能对你有所帮助，也欢迎各位批评文中观点或指出错误。",{"type":419,"tag":424,"props":2425,"children":2426},{},[2427,2429,2436,2438,2445],{"type":428,"value":2428},"想看看这篇文章是如何被创造的？你能从我的",{"type":419,"tag":446,"props":2430,"children":2433},{"href":2431,"rel":2432},"https://github.com/Lionad-Morotar/blogs",[1373],[2434],{"type":428,"value":2435},"博客项目",{"type":428,"value":2437},"中找到答案~ 欢迎 Star & Follow~ 也请大家多来我的",{"type":419,"tag":446,"props":2439,"children":2442},{"href":2440,"rel":2441},"https://www.lionad.art",[1373],[2443],{"type":428,"value":2444},"线上博客逛逛",{"type":428,"value":2446},"，排版超 Nice 哦~",{"type":419,"tag":2448,"props":2449,"children":2452},"section",{"className":2450,"dataFootnotes":413},[2451],"footnotes",[2453,2460],{"type":419,"tag":431,"props":2454,"children":2457},{"className":2455,"id":450},[2456],"sr-only",[2458],{"type":428,"value":2459},"Footnotes",{"type":419,"tag":2461,"props":2462,"children":2463},"ol",{},[2464,2479,2501,2514,2535,2548,2561],{"type":419,"tag":2187,"props":2465,"children":2467},{"id":2466},"user-content-fn-%E6%96%87%E5%8C%96",[2468,2470],{"type":428,"value":2469},"非贬义。 ",{"type":419,"tag":446,"props":2471,"children":2476},{"href":2472,"ariaLabel":2473,"className":2474,"dataFootnoteBackref":413},"#user-content-fnref-%E6%96%87%E5%8C%96","Back to reference 1",[2475],"data-footnote-backref",[2477],{"type":428,"value":2478},"↩",{"type":419,"tag":2187,"props":2480,"children":2482},{"id":2481},"user-content-fn-fn-call",[2483,2485,2492,2494],{"type":428,"value":2484},"见：",{"type":419,"tag":446,"props":2486,"children":2489},{"href":2487,"rel":2488},"https://zhuanlan.zhihu.com/p/95741316",[1373],[2490],{"type":428,"value":2491},"子程序（函数）考古学",{"type":428,"value":2493}," ",{"type":419,"tag":446,"props":2495,"children":2499},{"href":2496,"ariaLabel":2497,"className":2498,"dataFootnoteBackref":413},"#user-content-fnref-fn-call","Back to reference 2",[2475],[2500],{"type":428,"value":2478},{"type":419,"tag":2187,"props":2502,"children":2504},{"id":2503},"user-content-fn-css",[2505,2507],{"type":428,"value":2506},"试试使用 CSS 去写游戏？即便可行，但过程也会让人无比沮丧。 ",{"type":419,"tag":446,"props":2508,"children":2512},{"href":2509,"ariaLabel":2510,"className":2511,"dataFootnoteBackref":413},"#user-content-fnref-css","Back to reference 3",[2475],[2513],{"type":428,"value":2478},{"type":419,"tag":2187,"props":2515,"children":2517},{"id":2516},"user-content-fn-module-pattern",[2518,2520,2526,2528],{"type":428,"value":2519},"此模块模式并非传统面向对象中的模块模式，后者的定义见：",{"type":419,"tag":446,"props":2521,"children":2524},{"href":2522,"rel":2523},"https://www.jdon.com/52843",[1373],[2525],{"type":428,"value":2522},{"type":428,"value":2527},"。 ",{"type":419,"tag":446,"props":2529,"children":2533},{"href":2530,"ariaLabel":2531,"className":2532,"dataFootnoteBackref":413},"#user-content-fnref-module-pattern","Back to reference 4",[2475],[2534],{"type":428,"value":2478},{"type":419,"tag":2187,"props":2536,"children":2538},{"id":2537},"user-content-fn-firstclass",[2539,2541],{"type":428,"value":2540},"且叫且珍惜，说不定以后就听不到“一等公民”这种叫法啦。 ",{"type":419,"tag":446,"props":2542,"children":2546},{"href":2543,"ariaLabel":2544,"className":2545,"dataFootnoteBackref":413},"#user-content-fnref-firstclass","Back to reference 5",[2475],[2547],{"type":428,"value":2478},{"type":419,"tag":2187,"props":2549,"children":2551},{"id":2550},"user-content-fn-if-one-word",[2552,2554],{"type":428,"value":2553},"用一个单词就能达意时就不需要用一个句子。 ",{"type":419,"tag":446,"props":2555,"children":2559},{"href":2556,"ariaLabel":2557,"className":2558,"dataFootnoteBackref":413},"#user-content-fnref-if-one-word","Back to reference 6",[2475],[2560],{"type":428,"value":2478},{"type":419,"tag":2187,"props":2562,"children":2564},{"id":2563},"user-content-fn-how-js-works",[2565,2567],{"type":428,"value":2566},"语言特征并不总是银弹，类似观点见道格拉斯的《How JS Works》 ",{"type":419,"tag":446,"props":2568,"children":2572},{"href":2569,"ariaLabel":2570,"className":2571,"dataFootnoteBackref":413},"#user-content-fnref-how-js-works","Back to reference 7",[2475],[2573],{"type":428,"value":2478},{"type":419,"tag":2575,"props":2576,"children":2577},"style",{},[2578],{"type":428,"value":2579},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":413,"searchDepth":763,"depth":763,"links":2581},[2582,2583,2584,2585,2586,2587,2588,2589],{"id":433,"depth":763,"text":433},{"id":485,"depth":763,"text":485},{"id":593,"depth":763,"text":593},{"id":695,"depth":763,"text":695},{"id":2164,"depth":763,"text":2164},{"id":2263,"depth":763,"text":2263},{"id":2383,"depth":763,"text":2383},{"id":450,"depth":763,"text":2459},"markdown","content:2.articles:1107.design-patterns-and-js-magic-pot.md","content","2.articles/1107.design-patterns-and-js-magic-pot.md","2.articles/1107.design-patterns-and-js-magic-pot","md",[2597,2599],{"_path":61,"title":60,"description":2598},"本文介绍了几种通过CSS实现的常见阴影效果如单侧投影、空心投影、投影动画、彩色阴影、长投影和倒影，以及尝试使用SVG模拟材质特性如粗糙度及光学效应如菲尼尔效应生成了几种特殊的纹理，最后通过一个CSS绘制真实书本案例介绍了实战中的一些细节。",{"_path":67,"title":66,"description":2600},"上一篇讲 anysort 的文章说到因网易云音乐的歌单排序功能较弱，我们自己实现的用来给歌单自定义排序的排序库的思路。这篇文章在排序库的基础上，介绍了其 TypeScript 类型实现。",1732808696205]