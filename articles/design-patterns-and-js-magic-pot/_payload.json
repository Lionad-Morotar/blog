[{"data":1,"prerenderedAt":2584},["ShallowReactive",2],{"navigation":3,"/articles/design-patterns-and-js-magic-pot":393,"/articles/design-patterns-and-js-magic-pot-surround":2579},[4,35,86,105,132,138,144,150,387],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"数字化转型","/gists/digital-transformation",{"title":205,"_path":206},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":208,"_path":209},"正则表达式","/gists/eegex",{"title":211,"_path":212},"Emoji","/gists/emoji",{"title":214,"_path":215},"工程","/gists/engineering",{"title":217,"_path":218},"熵","/gists/entropy",{"title":220,"_path":221},"Environment","/gists/environment",{"title":223,"_path":224},"Erlang","/gists/erlang",{"title":226,"_path":227},"逃离塔克夫","/gists/escape-from-tarkov",{"title":229,"_path":230},"ESNext (ES6-ES11)","/gists/esnext",{"title":232,"_path":233},"Eval！","/gists/eval",{"title":235,"_path":236},"Flutter","/gists/flutter",{"title":238,"_path":239},"字体","/gists/font",{"title":241,"_path":242},"JS 函数式编程","/gists/functional",{"title":244,"_path":245},"游戏化","/gists/gamification",{"title":247,"_path":248},"Google C++ Standard","/gists/google-cpp-standard",{"title":250,"_path":251},"双向链接完全体","/gists/graph",{"title":253,"_path":254},"Hardwares","/gists/hardwares",{"title":256,"_path":257},"哈希冲突","/gists/hash-collision",{"title":259,"_path":260},"信息设计","/gists/information-design",{"title":262,"_path":263},"InstantPage","/gists/instant.page",{"title":265,"_path":266},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":268,"_path":269},"KVStore","/gists/key-value-db",{"title":271,"_path":272},"Kubernetes","/gists/kubernetes",{"title":274,"_path":275},"Makefile","/gists/makefile",{"title":277,"_path":278},"Markdown Inline Style","/gists/markdown-nice",{"title":280,"_path":281},"小程序","/gists/miniapp",{"title":283,"_path":284},"减小页面快照体积","/gists/minify-html",{"title":286,"_path":287},"mklink","/gists/mklink",{"title":289,"_path":290},"Mock","/gists/mock",{"title":292,"_path":293},"多人协作系统","/gists/multiplayer",{"title":295,"_path":296},"多端应用","/gists/multy-end-app",{"title":298,"_path":299},"神经科学","/gists/neuroscience",{"title":301,"_path":302},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":304,"_path":305},"PInvoke","/gists/pinvoke",{"title":307,"_path":308},"像素","/gists/pixel",{"title":310,"_path":311},"PowerShell","/gists/powershell",{"title":313,"_path":314},"量子","/gists/quantum",{"title":316,"_path":317},"保持好奇心","/gists/questions",{"title":319,"_path":320},"React Native","/gists/react-native",{"title":322,"_path":323},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":325,"_path":326},"SEO","/gists/seo",{"title":328,"_path":329},"Shader","/gists/shader",{"title":331,"_path":332},"Shape Up","/gists/shape-up",{"title":334,"_path":335},"睡觉","/gists/sleep",{"title":337,"_path":338},"记录奇怪的问题","/gists/solved",{"title":340,"_path":341},"States","/gists/states",{"title":343,"_path":344},"Storage","/gists/storage",{"title":346,"_path":347},"音视频流处理","/gists/stream-cli",{"title":349,"_path":350},"Symbol","/gists/symbol",{"title":352,"_path":353},"系统论","/gists/systems-theory",{"title":355,"_path":356},"Taro","/gists/taro",{"title":358,"_path":359},"任务切片","/gists/task-slice",{"title":361,"_path":362},"技术偏好","/gists/tech-dudge",{"title":364,"_path":365},"Untitled","/gists/untitled",{"title":367,"_path":368},"可变字体","/gists/variable-font",{"title":370,"_path":371},"视觉错觉","/gists/visual-illusion",{"title":373,"_path":374},"SS(SSR)","/gists/vpn",{"title":376,"_path":377},"VS Code 插件开发","/gists/vscode-plugin",{"title":379,"_path":380},"Web Components","/gists/web-components",{"title":382,"_path":383},"Windows","/gists/windows",{"title":385,"_path":386},"查缺补漏","/gists/wrong",{"title":388,"_path":389,"children":390},"我 / About","/hire",[391],{"title":392,"_path":389},"📬 技术简历",{"_path":70,"_dir":394,"_draft":395,"_partial":395,"_locale":396,"title":69,"description":397,"body":398,"_type":2573,"_id":2574,"_source":2575,"_file":2576,"_stem":2577,"_extension":2578},"articles",false,"","排除人的因素，设计模式的本质只是相关代码复用。本文通过使用JS仿制并简化了几种OOL中经典设计模式，以探讨经典设计模式和代码模板的区别主要在于代码复用的层次不同，以及粗浅聊了聊设计模式与语言特征之间此强彼弱的关系。",{"type":399,"children":400,"toc":2563},"root",[401,413,419,440,445,454,466,471,476,481,490,515,520,574,579,606,616,621,626,631,636,641,649,654,659,671,676,681,704,712,717,969,987,1236,1241,1246,1251,1347,1362,1640,1645,1663,1677,1692,1723,1728,1733,2135,2140,2145,2150,2160,2165,2180,2185,2219,2224,2229,2234,2244,2249,2262,2311,2316,2324,2329,2334,2339,2344,2354,2359,2364,2369,2402,2407,2430,2557],{"type":402,"tag":403,"props":404,"children":405},"element","blockquote",{},[406],{"type":402,"tag":407,"props":408,"children":409},"p",{},[410],{"type":411,"value":412},"text","设计模式最终要融入任何语言。",{"type":402,"tag":414,"props":415,"children":417},"h2",{"id":416},"设计模式是什么",[418],{"type":411,"value":416},{"type":402,"tag":407,"props":420,"children":421},{},[422,424,438],{"type":411,"value":423},"从《人月神话》到《大教堂与集市》，许多闻名业界的作品都“低代码、高文化",{"type":402,"tag":425,"props":426,"children":427},"sup",{},[428],{"type":402,"tag":429,"props":430,"children":435},"a",{"href":431,"ariaDescribedBy":432,"dataFootnoteRef":396,"id":434},"#user-content-fn-%E6%96%87%E5%8C%96",[433],"footnote-label","user-content-fnref-%E6%96%87%E5%8C%96",[436],{"type":411,"value":437},"1",{"type":411,"value":439},"”；各种代码文化运动可以看作“造神运动”此类周日剧场。许多大佬在向人们传授代码经验之余，都喜欢尝试用文化手段（不论是哲学思想还是艺术内涵），来统一人与代码的关系。这种跨界思考的过程通常比较晦涩，诸如“面向对象”、“设计模式”这些放到现在来说我们耳熟能详的词，在过去几十年都是由行业顶尖大佬们牵头搞研究，再经过不断地实践，逐渐沉淀下来形成的标准。",{"type":402,"tag":407,"props":441,"children":442},{},[443],{"type":411,"value":444},"设计模式是什么？",{"type":402,"tag":407,"props":446,"children":447},{},[448],{"type":402,"tag":449,"props":450,"children":451},"strong",{},[452],{"type":411,"value":453},"设计模式是一种标准，它描述了使用面向对象编程语言解决问题的方式。",{"type":402,"tag":407,"props":455,"children":456},{},[457,459,464],{"type":411,"value":458},"设计模式一词发源于建筑学作品《建筑模式语言》，后被一个人们称为“四人帮”（GoF）的小组种出它在软件界开的新花。无论是建筑学还是软件学中的设计模式，相同的地方是，它们都想解决“人”和“物”的关系相关问题，并且形成了一套特定的方法论。",{"type":402,"tag":449,"props":460,"children":461},{},[462],{"type":411,"value":463},"好比人们有了灶就可以长久保存火种，用名词把晦涩难懂的抽象定义为标准，这样有利于思想传播",{"type":411,"value":465},"。只要人们普遍接纳并熟知设计模式，便能畅通无阻地沟通代码的实现。当然，现实很丰满，畅快沟通有个大前提：程序设计时，大家需要使用面向对象编程语言来合作。",{"type":402,"tag":414,"props":467,"children":469},{"id":468},"为什么非面向对象不可",[470],{"type":411,"value":468},{"type":402,"tag":407,"props":472,"children":473},{},[474],{"type":411,"value":475},"构建大型软件不止面向对象这一条路，与面向对象相对应的还有结构化、形式化等程序设计方法。任意一种有自有优劣。面对日益复杂的软件，人们关心的重心逐步转移到软件的可重用性方面。面向对象凭借着分类、封装等天然符合人们认知规律的优势，得到快速发展，终打通需求分析、程序设计到编程语言等开发上下游工作，赢得了业界青睐。",{"type":402,"tag":407,"props":477,"children":478},{},[479],{"type":411,"value":480},"面向对象把功能作为节点，组合为功能网格，节点间通过消息通讯以及做对应的响应。这样一来，开发在编程时不再需要直面输入输出这种数据流动的思考方式，只需要按照指令维护各个对象内部的状态即可，节点对应的代码片段也就能得到重用。",{"type":402,"tag":407,"props":482,"children":483},{},[484],{"type":402,"tag":485,"props":486,"children":489},"img",{"alt":487,"src":488},"Message Passing In OO","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210511174933.png?w=40",[],{"type":402,"tag":407,"props":491,"children":492},{},[493,495,506,508,513],{"type":411,"value":494},"相比子程序复用，函数复用已经是巨大的进步",{"type":402,"tag":425,"props":496,"children":497},{},[498],{"type":402,"tag":429,"props":499,"children":503},{"href":500,"ariaDescribedBy":501,"dataFootnoteRef":396,"id":502},"#user-content-fn-fn-call",[433],"user-content-fnref-fn-call",[504],{"type":411,"value":505},"2",{"type":411,"value":507},"。类复用相比函数复用要更加抽象，因为它保存了函数和状态的集合；而设计模式比类复用在抽象上更胜一筹：设计模式不单单直接复用某个类，而是复用整个“功能网格”，把特定问题的解决方案相关的所有节点和通讯机制全部拷贝，固化下来，命名并形成标准。",{"type":402,"tag":449,"props":509,"children":510},{},[511],{"type":411,"value":512},"设计模式其实是使用面向对象编程语言时代码复用的高级形式，是面向对象发展壮大之路的必然的产物",{"type":411,"value":514},"。只要写代码，就会碰到复用性问题，四人帮偏好面向对象，所以“设计模式”只是他们用来传授的面向对象编程中的代码复用性经验的概括。换句话说，大部分情况下我们讨论的“设计模式”和“面向对象设计模式”完全等同。这也就解释了为什么非面向对象不可了。",{"type":402,"tag":407,"props":516,"children":517},{},[518],{"type":411,"value":519},"我们讨论一个新的问题，如果过滤掉设计模式中的面向对象成分，剩下的是些啥呢？",{"type":402,"tag":521,"props":522,"children":526},"pre",{"className":523,"code":524,"language":525,"meta":396,"style":396},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","console.log(DesignPatterns.filter(removeOO))\n","js",[527],{"type":402,"tag":528,"props":529,"children":530},"code",{"__ignoreMap":396},[531],{"type":402,"tag":532,"props":533,"children":536},"span",{"class":534,"line":535},"line",1,[537,543,549,555,560,564,569],{"type":402,"tag":532,"props":538,"children":540},{"style":539},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[541],{"type":411,"value":542},"console",{"type":402,"tag":532,"props":544,"children":546},{"style":545},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[547],{"type":411,"value":548},".",{"type":402,"tag":532,"props":550,"children":552},{"style":551},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[553],{"type":411,"value":554},"log",{"type":402,"tag":532,"props":556,"children":557},{"style":539},[558],{"type":411,"value":559},"(DesignPatterns",{"type":402,"tag":532,"props":561,"children":562},{"style":545},[563],{"type":411,"value":548},{"type":402,"tag":532,"props":565,"children":566},{"style":551},[567],{"type":411,"value":568},"filter",{"type":402,"tag":532,"props":570,"children":571},{"style":539},[572],{"type":411,"value":573},"(removeOO))\n",{"type":402,"tag":414,"props":575,"children":577},{"id":576},"设计模式的本质",[578],{"type":411,"value":576},{"type":402,"tag":407,"props":580,"children":581},{},[582,584,590,592,597,599,604],{"type":411,"value":583},"我们先直接删除上文关于设计模式的定义中的“面向对象”几个字，看看剩下些什么：设计模式是一种标准，它描述了",{"type":402,"tag":585,"props":586,"children":587},"del",{},[588],{"type":411,"value":589},"使用面向对象编程语言",{"type":411,"value":591},"解决问题的方式，是",{"type":402,"tag":585,"props":593,"children":594},{},[595],{"type":411,"value":596},"使用面向对象编程语言时",{"type":411,"value":598},"代码复用性的高级形式，是",{"type":402,"tag":585,"props":600,"children":601},{},[602],{"type":411,"value":603},"面向对象",{"type":411,"value":605},"发展壮大之路的必然的产物。",{"type":402,"tag":407,"props":607,"children":608},{},[609,611],{"type":411,"value":610},"句子有些不通顺，修补之后变成了：",{"type":402,"tag":449,"props":612,"children":613},{},[614],{"type":411,"value":615},"设计模式是一种标准，它描述了编程时解决问题的特定方式，是代码复用的高级形式及发展代码复用必然的产物。",{"type":402,"tag":407,"props":617,"children":618},{},[619],{"type":411,"value":620},"设计模式本质是什么？不言自明，它只是相关代码复用的一种抽象概念。",{"type":402,"tag":407,"props":622,"children":623},{},[624],{"type":411,"value":625},"说到代码复用，主要关系到代码组织。从函数复用，到使用设计模式，再到使用库、框架，三种代码复用方式的主要区别在于代码组织的粒度不同。",{"type":402,"tag":407,"props":627,"children":628},{},[629],{"type":411,"value":630},"函数复用比较简单，你可以写一个叫做 Add 的函数给两数相加，然后 Copy&Paste 到其他地方复用，或是把函数存放到 Utils.js 文件中，通过模块机制复用。为了了解如何使用某个函数，需要在使用前阅读注释。",{"type":402,"tag":407,"props":632,"children":633},{},[634],{"type":411,"value":635},"库和框架最为复杂，它们是组织了大量函数及实体形成的巨型代码片段。开发新项目时很少会花精力自研框架，一般都引现成的轮子直接开造。使用某库或框架前，必须详细阅读文档。",{"type":402,"tag":407,"props":637,"children":638},{},[639],{"type":411,"value":640},"设计模式则是单个或多个函数的组合（在 Java 中不是函数而是类），既可以在新项目里现写一个模式供使用，也可以引入社区现有的模块来复用。为了了解如何使用某个设计模式，需要提前了解该模式定义的实体以及实体是通讯机制。",{"type":402,"tag":407,"props":642,"children":643},{},[644],{"type":402,"tag":485,"props":645,"children":648},{"alt":646,"src":647},"函数、设计模式、框架间的升级关系","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210513145630.png?w=70",[],{"type":402,"tag":407,"props":650,"children":651},{},[652],{"type":411,"value":653},"设计模式作为最简单的实体和函数的组合，可看作函数的升级版或是框架的缩水版；去掉设计模式中的面向对象相关内容，就只剩下了函数。",{"type":402,"tag":407,"props":655,"children":656},{},[657],{"type":411,"value":658},"等等，“实体和实体间通讯机制”凭空消失了？",{"type":402,"tag":407,"props":660,"children":661},{},[662,664,669],{"type":411,"value":663},"并没有。但我想让他消失。下文将从 JavaScript 入手，介绍如何把设计模式的概念映射到语言特征中。语言特征可是个好东西呀！如果你同意抽象也像复用一样有函数复用、库和框架等不同复杂度的层次的话，那我认为",{"type":402,"tag":449,"props":665,"children":666},{},[667],{"type":411,"value":668},"语言特征就是抽象的基础了。除了语言本身以外，所有抽象的建立都依赖于语言特征",{"type":411,"value":670},"。把设计模式映射成语言特征后，我们就能跳出面向对象的禁锢，从新的、更高层的角度重新思考代码复用问题。",{"type":402,"tag":407,"props":672,"children":673},{},[674],{"type":411,"value":675},"回到正题，我们从 JS 开始说起。",{"type":402,"tag":414,"props":677,"children":679},{"id":678},"仿制设计模式",[680],{"type":411,"value":678},{"type":402,"tag":407,"props":682,"children":683},{},[684,686,691,702],{"type":411,"value":685},"编程语言并不是万能的。",{"type":402,"tag":449,"props":687,"children":688},{},[689],{"type":411,"value":690},"特定语言适合用来解决特定问题",{"type":402,"tag":425,"props":692,"children":693},{},[694],{"type":402,"tag":429,"props":695,"children":699},{"href":696,"ariaDescribedBy":697,"dataFootnoteRef":396,"id":698},"#user-content-fn-css",[433],"user-content-fnref-css",[700],{"type":411,"value":701},"3",{"type":411,"value":703},"。提到 JavaScript 诸多语言特征，其优点可以用寥寥三个词概括：“原型”、“对象”、“函数”。熟练掌握了这些内容，就能在 JS 的世界中游刃有余。",{"type":402,"tag":407,"props":705,"children":706},{},[707],{"type":402,"tag":485,"props":708,"children":711},{"alt":709,"src":710},"《JavaScript 精粹》VS《JavaScript 权威指南》","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200709104930.png",[],{"type":402,"tag":407,"props":713,"children":714},{},[715],{"type":411,"value":716},"传统面向对象语言以类封装状态，并向外暴露改变状态的方法。以下代码中的书本类为例：Book Class 保持有 name 状态，可以使用 getPrintName 方法返回包装后的 name 或使用 rename 修改 name 。",{"type":402,"tag":521,"props":718,"children":720},{"className":523,"code":719,"language":525,"meta":396,"style":396},"class Book {\n  constructor () {\n    this.name = '设计模式与JS魔法锅'\n  }\n  getPrintName () {\n    return '《' + this.name + '》'\n  }\n  rename (newName) {\n    this.name = newName\n  }\n}\n",[721],{"type":402,"tag":528,"props":722,"children":723},{"__ignoreMap":396},[724,744,762,804,813,831,890,898,927,952,960],{"type":402,"tag":532,"props":725,"children":726},{"class":534,"line":535},[727,733,739],{"type":402,"tag":532,"props":728,"children":730},{"style":729},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[731],{"type":411,"value":732},"class",{"type":402,"tag":532,"props":734,"children":736},{"style":735},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[737],{"type":411,"value":738}," Book",{"type":402,"tag":532,"props":740,"children":741},{"style":545},[742],{"type":411,"value":743}," {\n",{"type":402,"tag":532,"props":745,"children":747},{"class":534,"line":746},2,[748,753,758],{"type":402,"tag":532,"props":749,"children":750},{"style":729},[751],{"type":411,"value":752},"  constructor",{"type":402,"tag":532,"props":754,"children":755},{"style":545},[756],{"type":411,"value":757}," ()",{"type":402,"tag":532,"props":759,"children":760},{"style":545},[761],{"type":411,"value":743},{"type":402,"tag":532,"props":763,"children":765},{"class":534,"line":764},3,[766,772,776,781,787,793,799],{"type":402,"tag":532,"props":767,"children":769},{"style":768},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[770],{"type":411,"value":771},"    this",{"type":402,"tag":532,"props":773,"children":774},{"style":545},[775],{"type":411,"value":548},{"type":402,"tag":532,"props":777,"children":778},{"style":539},[779],{"type":411,"value":780},"name",{"type":402,"tag":532,"props":782,"children":784},{"style":783},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[785],{"type":411,"value":786}," =",{"type":402,"tag":532,"props":788,"children":790},{"style":789},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[791],{"type":411,"value":792}," '",{"type":402,"tag":532,"props":794,"children":796},{"style":795},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[797],{"type":411,"value":798},"设计模式与JS魔法锅",{"type":402,"tag":532,"props":800,"children":801},{"style":789},[802],{"type":411,"value":803},"'\n",{"type":402,"tag":532,"props":805,"children":807},{"class":534,"line":806},4,[808],{"type":402,"tag":532,"props":809,"children":810},{"style":545},[811],{"type":411,"value":812},"  }\n",{"type":402,"tag":532,"props":814,"children":816},{"class":534,"line":815},5,[817,823,827],{"type":402,"tag":532,"props":818,"children":820},{"style":819},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[821],{"type":411,"value":822},"  getPrintName",{"type":402,"tag":532,"props":824,"children":825},{"style":545},[826],{"type":411,"value":757},{"type":402,"tag":532,"props":828,"children":829},{"style":545},[830],{"type":411,"value":743},{"type":402,"tag":532,"props":832,"children":834},{"class":534,"line":833},6,[835,841,845,850,855,860,865,869,873,877,881,886],{"type":402,"tag":532,"props":836,"children":838},{"style":837},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[839],{"type":411,"value":840},"    return",{"type":402,"tag":532,"props":842,"children":843},{"style":789},[844],{"type":411,"value":792},{"type":402,"tag":532,"props":846,"children":847},{"style":795},[848],{"type":411,"value":849},"《",{"type":402,"tag":532,"props":851,"children":852},{"style":789},[853],{"type":411,"value":854},"'",{"type":402,"tag":532,"props":856,"children":857},{"style":783},[858],{"type":411,"value":859}," +",{"type":402,"tag":532,"props":861,"children":862},{"style":768},[863],{"type":411,"value":864}," this",{"type":402,"tag":532,"props":866,"children":867},{"style":545},[868],{"type":411,"value":548},{"type":402,"tag":532,"props":870,"children":871},{"style":539},[872],{"type":411,"value":780},{"type":402,"tag":532,"props":874,"children":875},{"style":783},[876],{"type":411,"value":859},{"type":402,"tag":532,"props":878,"children":879},{"style":789},[880],{"type":411,"value":792},{"type":402,"tag":532,"props":882,"children":883},{"style":795},[884],{"type":411,"value":885},"》",{"type":402,"tag":532,"props":887,"children":888},{"style":789},[889],{"type":411,"value":803},{"type":402,"tag":532,"props":891,"children":893},{"class":534,"line":892},7,[894],{"type":402,"tag":532,"props":895,"children":896},{"style":545},[897],{"type":411,"value":812},{"type":402,"tag":532,"props":899,"children":901},{"class":534,"line":900},8,[902,907,912,918,923],{"type":402,"tag":532,"props":903,"children":904},{"style":819},[905],{"type":411,"value":906},"  rename",{"type":402,"tag":532,"props":908,"children":909},{"style":545},[910],{"type":411,"value":911}," (",{"type":402,"tag":532,"props":913,"children":915},{"style":914},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[916],{"type":411,"value":917},"newName",{"type":402,"tag":532,"props":919,"children":920},{"style":545},[921],{"type":411,"value":922},")",{"type":402,"tag":532,"props":924,"children":925},{"style":545},[926],{"type":411,"value":743},{"type":402,"tag":532,"props":928,"children":930},{"class":534,"line":929},9,[931,935,939,943,947],{"type":402,"tag":532,"props":932,"children":933},{"style":768},[934],{"type":411,"value":771},{"type":402,"tag":532,"props":936,"children":937},{"style":545},[938],{"type":411,"value":548},{"type":402,"tag":532,"props":940,"children":941},{"style":539},[942],{"type":411,"value":780},{"type":402,"tag":532,"props":944,"children":945},{"style":783},[946],{"type":411,"value":786},{"type":402,"tag":532,"props":948,"children":949},{"style":539},[950],{"type":411,"value":951}," newName\n",{"type":402,"tag":532,"props":953,"children":955},{"class":534,"line":954},10,[956],{"type":402,"tag":532,"props":957,"children":958},{"style":545},[959],{"type":411,"value":812},{"type":402,"tag":532,"props":961,"children":963},{"class":534,"line":962},11,[964],{"type":402,"tag":532,"props":965,"children":966},{"style":545},[967],{"type":411,"value":968},"}\n",{"type":402,"tag":407,"props":970,"children":971},{},[972,974,985],{"type":411,"value":973},"放到早期版本 JS 中，想要封装变量，这不好办。早期版本的 JS 没有块级作用域，所以声明的变量会在整个代码或函数作用域中生效。为了仿制类的状态封装能力，知名布道者道格拉斯发明了一种“模块模式”",{"type":402,"tag":425,"props":975,"children":976},{},[977],{"type":402,"tag":429,"props":978,"children":982},{"href":979,"ariaDescribedBy":980,"dataFootnoteRef":396,"id":981},"#user-content-fn-module-pattern",[433],"user-content-fnref-module-pattern",[983],{"type":411,"value":984},"4",{"type":411,"value":986},"，即通过闭包来控制变量的访问权，代码如下：",{"type":402,"tag":521,"props":988,"children":990},{"className":523,"code":989,"language":525,"meta":396,"style":396},"const aBook = (() => {\n  var name = '设计模式与JS魔法锅'\n  function getPrintName () {\n    return '《' + name + '》'\n  }\n  function rename (newName) {\n    name = newName\n  }\n  return {\n    getPrintName,\n    rename\n  }\n})()\n",[991],{"type":402,"tag":528,"props":992,"children":993},{"__ignoreMap":396},[994,1030,1059,1080,1123,1130,1158,1174,1181,1193,1206,1214,1222],{"type":402,"tag":532,"props":995,"children":996},{"class":534,"line":535},[997,1002,1008,1012,1016,1021,1026],{"type":402,"tag":532,"props":998,"children":999},{"style":729},[1000],{"type":411,"value":1001},"const",{"type":402,"tag":532,"props":1003,"children":1005},{"style":1004},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1006],{"type":411,"value":1007}," aBook",{"type":402,"tag":532,"props":1009,"children":1010},{"style":783},[1011],{"type":411,"value":786},{"type":402,"tag":532,"props":1013,"children":1014},{"style":539},[1015],{"type":411,"value":911},{"type":402,"tag":532,"props":1017,"children":1018},{"style":545},[1019],{"type":411,"value":1020},"()",{"type":402,"tag":532,"props":1022,"children":1023},{"style":729},[1024],{"type":411,"value":1025}," =>",{"type":402,"tag":532,"props":1027,"children":1028},{"style":545},[1029],{"type":411,"value":743},{"type":402,"tag":532,"props":1031,"children":1032},{"class":534,"line":746},[1033,1038,1043,1047,1051,1055],{"type":402,"tag":532,"props":1034,"children":1035},{"style":729},[1036],{"type":411,"value":1037},"  var",{"type":402,"tag":532,"props":1039,"children":1040},{"style":539},[1041],{"type":411,"value":1042}," name",{"type":402,"tag":532,"props":1044,"children":1045},{"style":783},[1046],{"type":411,"value":786},{"type":402,"tag":532,"props":1048,"children":1049},{"style":789},[1050],{"type":411,"value":792},{"type":402,"tag":532,"props":1052,"children":1053},{"style":795},[1054],{"type":411,"value":798},{"type":402,"tag":532,"props":1056,"children":1057},{"style":789},[1058],{"type":411,"value":803},{"type":402,"tag":532,"props":1060,"children":1061},{"class":534,"line":764},[1062,1067,1072,1076],{"type":402,"tag":532,"props":1063,"children":1064},{"style":729},[1065],{"type":411,"value":1066},"  function",{"type":402,"tag":532,"props":1068,"children":1069},{"style":551},[1070],{"type":411,"value":1071}," getPrintName",{"type":402,"tag":532,"props":1073,"children":1074},{"style":545},[1075],{"type":411,"value":757},{"type":402,"tag":532,"props":1077,"children":1078},{"style":545},[1079],{"type":411,"value":743},{"type":402,"tag":532,"props":1081,"children":1082},{"class":534,"line":806},[1083,1087,1091,1095,1099,1103,1107,1111,1115,1119],{"type":402,"tag":532,"props":1084,"children":1085},{"style":837},[1086],{"type":411,"value":840},{"type":402,"tag":532,"props":1088,"children":1089},{"style":789},[1090],{"type":411,"value":792},{"type":402,"tag":532,"props":1092,"children":1093},{"style":795},[1094],{"type":411,"value":849},{"type":402,"tag":532,"props":1096,"children":1097},{"style":789},[1098],{"type":411,"value":854},{"type":402,"tag":532,"props":1100,"children":1101},{"style":783},[1102],{"type":411,"value":859},{"type":402,"tag":532,"props":1104,"children":1105},{"style":539},[1106],{"type":411,"value":1042},{"type":402,"tag":532,"props":1108,"children":1109},{"style":783},[1110],{"type":411,"value":859},{"type":402,"tag":532,"props":1112,"children":1113},{"style":789},[1114],{"type":411,"value":792},{"type":402,"tag":532,"props":1116,"children":1117},{"style":795},[1118],{"type":411,"value":885},{"type":402,"tag":532,"props":1120,"children":1121},{"style":789},[1122],{"type":411,"value":803},{"type":402,"tag":532,"props":1124,"children":1125},{"class":534,"line":815},[1126],{"type":402,"tag":532,"props":1127,"children":1128},{"style":545},[1129],{"type":411,"value":812},{"type":402,"tag":532,"props":1131,"children":1132},{"class":534,"line":833},[1133,1137,1142,1146,1150,1154],{"type":402,"tag":532,"props":1134,"children":1135},{"style":729},[1136],{"type":411,"value":1066},{"type":402,"tag":532,"props":1138,"children":1139},{"style":551},[1140],{"type":411,"value":1141}," rename",{"type":402,"tag":532,"props":1143,"children":1144},{"style":545},[1145],{"type":411,"value":911},{"type":402,"tag":532,"props":1147,"children":1148},{"style":914},[1149],{"type":411,"value":917},{"type":402,"tag":532,"props":1151,"children":1152},{"style":545},[1153],{"type":411,"value":922},{"type":402,"tag":532,"props":1155,"children":1156},{"style":545},[1157],{"type":411,"value":743},{"type":402,"tag":532,"props":1159,"children":1160},{"class":534,"line":892},[1161,1166,1170],{"type":402,"tag":532,"props":1162,"children":1163},{"style":539},[1164],{"type":411,"value":1165},"    name",{"type":402,"tag":532,"props":1167,"children":1168},{"style":783},[1169],{"type":411,"value":786},{"type":402,"tag":532,"props":1171,"children":1172},{"style":539},[1173],{"type":411,"value":951},{"type":402,"tag":532,"props":1175,"children":1176},{"class":534,"line":900},[1177],{"type":402,"tag":532,"props":1178,"children":1179},{"style":545},[1180],{"type":411,"value":812},{"type":402,"tag":532,"props":1182,"children":1183},{"class":534,"line":929},[1184,1189],{"type":402,"tag":532,"props":1185,"children":1186},{"style":837},[1187],{"type":411,"value":1188},"  return",{"type":402,"tag":532,"props":1190,"children":1191},{"style":545},[1192],{"type":411,"value":743},{"type":402,"tag":532,"props":1194,"children":1195},{"class":534,"line":954},[1196,1201],{"type":402,"tag":532,"props":1197,"children":1198},{"style":539},[1199],{"type":411,"value":1200},"    getPrintName",{"type":402,"tag":532,"props":1202,"children":1203},{"style":545},[1204],{"type":411,"value":1205},",\n",{"type":402,"tag":532,"props":1207,"children":1208},{"class":534,"line":962},[1209],{"type":402,"tag":532,"props":1210,"children":1211},{"style":539},[1212],{"type":411,"value":1213},"    rename\n",{"type":402,"tag":532,"props":1215,"children":1217},{"class":534,"line":1216},12,[1218],{"type":402,"tag":532,"props":1219,"children":1220},{"style":545},[1221],{"type":411,"value":812},{"type":402,"tag":532,"props":1223,"children":1225},{"class":534,"line":1224},13,[1226,1231],{"type":402,"tag":532,"props":1227,"children":1228},{"style":545},[1229],{"type":411,"value":1230},"}",{"type":402,"tag":532,"props":1232,"children":1233},{"style":539},[1234],{"type":411,"value":1235},")()\n",{"type":402,"tag":407,"props":1237,"children":1238},{},[1239],{"type":411,"value":1240},"看起来，模块模式就像是语言能力不足的补充。把目光从遥远的模块模式收回到 2015 年 ES6 发布之后，JavaScript 语言特征得到增强，曾风靡一时的潮词模块模式几乎从网络中销声匿迹了。现在我们可以自由地使用类封装状态，不必再写因缺乏语义显得蹩脚的 IIFE 。",{"type":402,"tag":407,"props":1242,"children":1243},{},[1244],{"type":411,"value":1245},"我们再来看看面向对象中的常见的装饰器模式。",{"type":402,"tag":407,"props":1247,"children":1248},{},[1249],{"type":411,"value":1250},"假设你在维护一个开源项目，项目中有些过时的 API，你想在别人调用该 API 时提示一句“你好，此 API 将在下个版本移除”。这段代码可以这样写：",{"type":402,"tag":521,"props":1252,"children":1254},{"className":523,"code":1253,"language":525,"meta":396,"style":396},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\nconst myAPI = {\n  @deprecate('WARN: oldAPI is decrapted, please use oldAPI_v2')\n  oldAPI() {}\n}\n",[1255],{"type":402,"tag":528,"props":1256,"children":1257},{"__ignoreMap":396},[1258,1267,1287,1323,1340],{"type":402,"tag":532,"props":1259,"children":1260},{"class":534,"line":535},[1261],{"type":402,"tag":532,"props":1262,"children":1264},{"style":1263},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1265],{"type":411,"value":1266},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\n",{"type":402,"tag":532,"props":1268,"children":1269},{"class":534,"line":746},[1270,1274,1279,1283],{"type":402,"tag":532,"props":1271,"children":1272},{"style":729},[1273],{"type":411,"value":1001},{"type":402,"tag":532,"props":1275,"children":1276},{"style":1004},[1277],{"type":411,"value":1278}," myAPI",{"type":402,"tag":532,"props":1280,"children":1281},{"style":783},[1282],{"type":411,"value":786},{"type":402,"tag":532,"props":1284,"children":1285},{"style":545},[1286],{"type":411,"value":743},{"type":402,"tag":532,"props":1288,"children":1289},{"class":534,"line":764},[1290,1295,1300,1305,1309,1314,1318],{"type":402,"tag":532,"props":1291,"children":1292},{"style":539},[1293],{"type":411,"value":1294},"  @",{"type":402,"tag":532,"props":1296,"children":1297},{"style":819},[1298],{"type":411,"value":1299},"deprecate",{"type":402,"tag":532,"props":1301,"children":1302},{"style":545},[1303],{"type":411,"value":1304},"(",{"type":402,"tag":532,"props":1306,"children":1307},{"style":789},[1308],{"type":411,"value":854},{"type":402,"tag":532,"props":1310,"children":1311},{"style":795},[1312],{"type":411,"value":1313},"WARN: oldAPI is decrapted, please use oldAPI_v2",{"type":402,"tag":532,"props":1315,"children":1316},{"style":789},[1317],{"type":411,"value":854},{"type":402,"tag":532,"props":1319,"children":1320},{"style":545},[1321],{"type":411,"value":1322},")\n",{"type":402,"tag":532,"props":1324,"children":1325},{"class":534,"line":806},[1326,1331,1335],{"type":402,"tag":532,"props":1327,"children":1328},{"style":819},[1329],{"type":411,"value":1330},"  oldAPI",{"type":402,"tag":532,"props":1332,"children":1333},{"style":545},[1334],{"type":411,"value":1020},{"type":402,"tag":532,"props":1336,"children":1337},{"style":545},[1338],{"type":411,"value":1339}," {}\n",{"type":402,"tag":532,"props":1341,"children":1342},{"class":534,"line":815},[1343],{"type":402,"tag":532,"props":1344,"children":1345},{"style":545},[1346],{"type":411,"value":968},{"type":402,"tag":407,"props":1348,"children":1349},{},[1350,1352,1360],{"type":411,"value":1351},"若不是",{"type":402,"tag":429,"props":1353,"children":1357},{"href":1354,"rel":1355},"https://github.com/tc39/proposal-decorators",[1356],"nofollow",[1358],{"type":411,"value":1359},"装饰器提案",{"type":411,"value":1361},"的出现，我赌五毛，社区里不会有太多讨论装饰器模式的文章。不过大家若有留意过平常的代码，肯定会注意到其实高阶函数就是装饰器的具体实现。函数在 JS 中是一等公民，通过函数组合可以极其方便地仿制某些设计模式。比如，下代码中，使用“局部应用”函数仿制了一个工厂模式：",{"type":402,"tag":521,"props":1363,"children":1365},{"className":523,"code":1364,"language":525,"meta":396,"style":396},"const Partial = (fn, ...args) => (...rest) => fn(...args, ...rest)\n\nconst Adder = (a, b) => a + b\n\nconst add5 = Partial(Adder, 5)\n\nadd5(5) // >>> 10\nadd5(10) // >>> 15\n",[1366],{"type":402,"tag":528,"props":1367,"children":1368},{"__ignoreMap":396},[1369,1470,1479,1535,1542,1581,1588,1615],{"type":402,"tag":532,"props":1370,"children":1371},{"class":534,"line":535},[1372,1376,1382,1386,1390,1395,1400,1405,1410,1414,1418,1422,1427,1432,1436,1440,1445,1449,1453,1457,1461,1465],{"type":402,"tag":532,"props":1373,"children":1374},{"style":729},[1375],{"type":411,"value":1001},{"type":402,"tag":532,"props":1377,"children":1379},{"style":1378},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1380],{"type":411,"value":1381}," Partial",{"type":402,"tag":532,"props":1383,"children":1384},{"style":783},[1385],{"type":411,"value":786},{"type":402,"tag":532,"props":1387,"children":1388},{"style":545},[1389],{"type":411,"value":911},{"type":402,"tag":532,"props":1391,"children":1392},{"style":914},[1393],{"type":411,"value":1394},"fn",{"type":402,"tag":532,"props":1396,"children":1397},{"style":545},[1398],{"type":411,"value":1399},",",{"type":402,"tag":532,"props":1401,"children":1402},{"style":783},[1403],{"type":411,"value":1404}," ...",{"type":402,"tag":532,"props":1406,"children":1407},{"style":914},[1408],{"type":411,"value":1409},"args",{"type":402,"tag":532,"props":1411,"children":1412},{"style":545},[1413],{"type":411,"value":922},{"type":402,"tag":532,"props":1415,"children":1416},{"style":729},[1417],{"type":411,"value":1025},{"type":402,"tag":532,"props":1419,"children":1420},{"style":545},[1421],{"type":411,"value":911},{"type":402,"tag":532,"props":1423,"children":1424},{"style":783},[1425],{"type":411,"value":1426},"...",{"type":402,"tag":532,"props":1428,"children":1429},{"style":914},[1430],{"type":411,"value":1431},"rest",{"type":402,"tag":532,"props":1433,"children":1434},{"style":545},[1435],{"type":411,"value":922},{"type":402,"tag":532,"props":1437,"children":1438},{"style":729},[1439],{"type":411,"value":1025},{"type":402,"tag":532,"props":1441,"children":1442},{"style":551},[1443],{"type":411,"value":1444}," fn",{"type":402,"tag":532,"props":1446,"children":1447},{"style":539},[1448],{"type":411,"value":1304},{"type":402,"tag":532,"props":1450,"children":1451},{"style":783},[1452],{"type":411,"value":1426},{"type":402,"tag":532,"props":1454,"children":1455},{"style":539},[1456],{"type":411,"value":1409},{"type":402,"tag":532,"props":1458,"children":1459},{"style":545},[1460],{"type":411,"value":1399},{"type":402,"tag":532,"props":1462,"children":1463},{"style":783},[1464],{"type":411,"value":1404},{"type":402,"tag":532,"props":1466,"children":1467},{"style":539},[1468],{"type":411,"value":1469},"rest)\n",{"type":402,"tag":532,"props":1471,"children":1472},{"class":534,"line":746},[1473],{"type":402,"tag":532,"props":1474,"children":1476},{"emptyLinePlaceholder":1475},true,[1477],{"type":411,"value":1478},"\n",{"type":402,"tag":532,"props":1480,"children":1481},{"class":534,"line":764},[1482,1486,1491,1495,1499,1503,1507,1512,1516,1520,1525,1530],{"type":402,"tag":532,"props":1483,"children":1484},{"style":729},[1485],{"type":411,"value":1001},{"type":402,"tag":532,"props":1487,"children":1488},{"style":1378},[1489],{"type":411,"value":1490}," Adder",{"type":402,"tag":532,"props":1492,"children":1493},{"style":783},[1494],{"type":411,"value":786},{"type":402,"tag":532,"props":1496,"children":1497},{"style":545},[1498],{"type":411,"value":911},{"type":402,"tag":532,"props":1500,"children":1501},{"style":914},[1502],{"type":411,"value":429},{"type":402,"tag":532,"props":1504,"children":1505},{"style":545},[1506],{"type":411,"value":1399},{"type":402,"tag":532,"props":1508,"children":1509},{"style":914},[1510],{"type":411,"value":1511}," b",{"type":402,"tag":532,"props":1513,"children":1514},{"style":545},[1515],{"type":411,"value":922},{"type":402,"tag":532,"props":1517,"children":1518},{"style":729},[1519],{"type":411,"value":1025},{"type":402,"tag":532,"props":1521,"children":1522},{"style":539},[1523],{"type":411,"value":1524}," a ",{"type":402,"tag":532,"props":1526,"children":1527},{"style":783},[1528],{"type":411,"value":1529},"+",{"type":402,"tag":532,"props":1531,"children":1532},{"style":539},[1533],{"type":411,"value":1534}," b\n",{"type":402,"tag":532,"props":1536,"children":1537},{"class":534,"line":806},[1538],{"type":402,"tag":532,"props":1539,"children":1540},{"emptyLinePlaceholder":1475},[1541],{"type":411,"value":1478},{"type":402,"tag":532,"props":1543,"children":1544},{"class":534,"line":815},[1545,1549,1554,1558,1562,1567,1571,1577],{"type":402,"tag":532,"props":1546,"children":1547},{"style":729},[1548],{"type":411,"value":1001},{"type":402,"tag":532,"props":1550,"children":1551},{"style":1004},[1552],{"type":411,"value":1553}," add5",{"type":402,"tag":532,"props":1555,"children":1556},{"style":783},[1557],{"type":411,"value":786},{"type":402,"tag":532,"props":1559,"children":1560},{"style":551},[1561],{"type":411,"value":1381},{"type":402,"tag":532,"props":1563,"children":1564},{"style":539},[1565],{"type":411,"value":1566},"(Adder",{"type":402,"tag":532,"props":1568,"children":1569},{"style":545},[1570],{"type":411,"value":1399},{"type":402,"tag":532,"props":1572,"children":1574},{"style":1573},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1575],{"type":411,"value":1576}," 5",{"type":402,"tag":532,"props":1578,"children":1579},{"style":539},[1580],{"type":411,"value":1322},{"type":402,"tag":532,"props":1582,"children":1583},{"class":534,"line":833},[1584],{"type":402,"tag":532,"props":1585,"children":1586},{"emptyLinePlaceholder":1475},[1587],{"type":411,"value":1478},{"type":402,"tag":532,"props":1589,"children":1590},{"class":534,"line":892},[1591,1596,1600,1605,1610],{"type":402,"tag":532,"props":1592,"children":1593},{"style":551},[1594],{"type":411,"value":1595},"add5",{"type":402,"tag":532,"props":1597,"children":1598},{"style":539},[1599],{"type":411,"value":1304},{"type":402,"tag":532,"props":1601,"children":1602},{"style":1573},[1603],{"type":411,"value":1604},"5",{"type":402,"tag":532,"props":1606,"children":1607},{"style":539},[1608],{"type":411,"value":1609},") ",{"type":402,"tag":532,"props":1611,"children":1612},{"style":1263},[1613],{"type":411,"value":1614},"// >>> 10\n",{"type":402,"tag":532,"props":1616,"children":1617},{"class":534,"line":900},[1618,1622,1626,1631,1635],{"type":402,"tag":532,"props":1619,"children":1620},{"style":551},[1621],{"type":411,"value":1595},{"type":402,"tag":532,"props":1623,"children":1624},{"style":539},[1625],{"type":411,"value":1304},{"type":402,"tag":532,"props":1627,"children":1628},{"style":1573},[1629],{"type":411,"value":1630},"10",{"type":402,"tag":532,"props":1632,"children":1633},{"style":539},[1634],{"type":411,"value":1609},{"type":402,"tag":532,"props":1636,"children":1637},{"style":1263},[1638],{"type":411,"value":1639},"// >>> 15\n",{"type":402,"tag":407,"props":1641,"children":1642},{},[1643],{"type":411,"value":1644},"我猜你想咆哮：“工厂模式根本就不是这样写的！”。哈哈，别那么固执，变通一些嘛。我们现在讨论的设计模式是去除了面向对象之后的余留物，几乎只保留了设计模式的本质，复用。换句话说，Partial 是“函数工厂”，是“生成器”，“产出”了仍能接受一个参数的函数。",{"type":402,"tag":1646,"props":1647,"children":1648},"details",{},[1649,1651,1657,1658],{"type":411,"value":1650},"\n    ",{"type":402,"tag":1652,"props":1653,"children":1654},"summary",{},[1655],{"type":411,"value":1656},"我用到了类吗？",{"type":411,"value":1650},{"type":402,"tag":407,"props":1659,"children":1660},{},[1661],{"type":411,"value":1662},"没有。",{"type":402,"tag":1646,"props":1664,"children":1665},{},[1666,1667,1672,1673],{"type":411,"value":1650},{"type":402,"tag":1652,"props":1668,"children":1669},{},[1670],{"type":411,"value":1671},"用到了原型吗？",{"type":411,"value":1650},{"type":402,"tag":407,"props":1674,"children":1675},{},[1676],{"type":411,"value":1662},{"type":402,"tag":1646,"props":1678,"children":1679},{},[1680,1681,1686,1687],{"type":411,"value":1650},{"type":402,"tag":1652,"props":1682,"children":1683},{},[1684],{"type":411,"value":1685},"那我在写什么？",{"type":411,"value":1650},{"type":402,"tag":407,"props":1688,"children":1689},{},[1690],{"type":411,"value":1691},"函数。",{"type":402,"tag":407,"props":1693,"children":1694},{},[1695,1697,1714,1716,1721],{"type":411,"value":1696},"函数，函数而已！",{"type":402,"tag":449,"props":1698,"children":1699},{},[1700,1702,1712],{"type":411,"value":1701},"“函数是一等公民",{"type":402,"tag":425,"props":1703,"children":1704},{},[1705],{"type":402,"tag":429,"props":1706,"children":1710},{"href":1707,"ariaDescribedBy":1708,"dataFootnoteRef":396,"id":1709},"#user-content-fn-firstclass",[433],"user-content-fnref-firstclass",[1711],{"type":411,"value":1604},{"type":411,"value":1713},"”",{"type":411,"value":1715},"，这句话得背熟了，因为诸如“闭包”、“回调”等概念都和函数有关，",{"type":402,"tag":585,"props":1717,"children":1718},{},[1719],{"type":411,"value":1720},"面试经常会问道",{"type":411,"value":1722},"你迟早会用上的。若谈论设计模式脱离不开语言特征的话，那扯上函数绝对不会有任何问题。",{"type":402,"tag":407,"props":1724,"children":1725},{},[1726],{"type":411,"value":1727},"亲函数而远类的写法可以帮助我们消化许多种类的设计模式，我们再来看最后一种，代理模式。",{"type":402,"tag":407,"props":1729,"children":1730},{},[1731],{"type":411,"value":1732},"ES6 原生支持代理模式。对，就是 Vue3 里的那个“Proxy”，直译为“代理器”。社区有很多讲 Vue3 原理分析的文章，肯定绕不开 Proxy，这里不再赘述了。以下展示一个使用 Proxy 拦截对象操作的小例子。",{"type":402,"tag":521,"props":1734,"children":1736},{"className":523,"code":1735,"language":525,"meta":396,"style":396},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\nconst proxy = new Proxy({}, {\n  set(target, key, value) {\n    invariant(key, 'set')\n    target[key] = value\n    return true\n  }\n})\n\nfunction invariant(key, action) {\n  if (key.startsWith('_')) {\n    throw new Error(`Invalid Key`)\n  }\n}\n\nproxy._prop = 'somevalue'\n// Error: Invalid Key\n",[1737],{"type":402,"tag":528,"props":1738,"children":1739},{"__ignoreMap":396},[1740,1748,1787,1830,1869,1901,1914,1921,1932,1939,1977,2029,2068,2075,2083,2091,2126],{"type":402,"tag":532,"props":1741,"children":1742},{"class":534,"line":535},[1743],{"type":402,"tag":532,"props":1744,"children":1745},{"style":1263},[1746],{"type":411,"value":1747},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\n",{"type":402,"tag":532,"props":1749,"children":1750},{"class":534,"line":746},[1751,1755,1760,1764,1769,1774,1778,1783],{"type":402,"tag":532,"props":1752,"children":1753},{"style":729},[1754],{"type":411,"value":1001},{"type":402,"tag":532,"props":1756,"children":1757},{"style":1004},[1758],{"type":411,"value":1759}," proxy",{"type":402,"tag":532,"props":1761,"children":1762},{"style":783},[1763],{"type":411,"value":786},{"type":402,"tag":532,"props":1765,"children":1766},{"style":783},[1767],{"type":411,"value":1768}," new",{"type":402,"tag":532,"props":1770,"children":1771},{"style":551},[1772],{"type":411,"value":1773}," Proxy",{"type":402,"tag":532,"props":1775,"children":1776},{"style":539},[1777],{"type":411,"value":1304},{"type":402,"tag":532,"props":1779,"children":1780},{"style":545},[1781],{"type":411,"value":1782},"{},",{"type":402,"tag":532,"props":1784,"children":1785},{"style":545},[1786],{"type":411,"value":743},{"type":402,"tag":532,"props":1788,"children":1789},{"class":534,"line":764},[1790,1795,1799,1804,1808,1813,1817,1822,1826],{"type":402,"tag":532,"props":1791,"children":1792},{"style":819},[1793],{"type":411,"value":1794},"  set",{"type":402,"tag":532,"props":1796,"children":1797},{"style":545},[1798],{"type":411,"value":1304},{"type":402,"tag":532,"props":1800,"children":1801},{"style":914},[1802],{"type":411,"value":1803},"target",{"type":402,"tag":532,"props":1805,"children":1806},{"style":545},[1807],{"type":411,"value":1399},{"type":402,"tag":532,"props":1809,"children":1810},{"style":914},[1811],{"type":411,"value":1812}," key",{"type":402,"tag":532,"props":1814,"children":1815},{"style":545},[1816],{"type":411,"value":1399},{"type":402,"tag":532,"props":1818,"children":1819},{"style":914},[1820],{"type":411,"value":1821}," value",{"type":402,"tag":532,"props":1823,"children":1824},{"style":545},[1825],{"type":411,"value":922},{"type":402,"tag":532,"props":1827,"children":1828},{"style":545},[1829],{"type":411,"value":743},{"type":402,"tag":532,"props":1831,"children":1832},{"class":534,"line":806},[1833,1838,1843,1848,1852,1856,1861,1865],{"type":402,"tag":532,"props":1834,"children":1835},{"style":551},[1836],{"type":411,"value":1837},"    invariant",{"type":402,"tag":532,"props":1839,"children":1841},{"style":1840},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1842],{"type":411,"value":1304},{"type":402,"tag":532,"props":1844,"children":1845},{"style":539},[1846],{"type":411,"value":1847},"key",{"type":402,"tag":532,"props":1849,"children":1850},{"style":545},[1851],{"type":411,"value":1399},{"type":402,"tag":532,"props":1853,"children":1854},{"style":789},[1855],{"type":411,"value":792},{"type":402,"tag":532,"props":1857,"children":1858},{"style":795},[1859],{"type":411,"value":1860},"set",{"type":402,"tag":532,"props":1862,"children":1863},{"style":789},[1864],{"type":411,"value":854},{"type":402,"tag":532,"props":1866,"children":1867},{"style":1840},[1868],{"type":411,"value":1322},{"type":402,"tag":532,"props":1870,"children":1871},{"class":534,"line":815},[1872,1877,1882,1886,1891,1896],{"type":402,"tag":532,"props":1873,"children":1874},{"style":539},[1875],{"type":411,"value":1876},"    target",{"type":402,"tag":532,"props":1878,"children":1879},{"style":1840},[1880],{"type":411,"value":1881},"[",{"type":402,"tag":532,"props":1883,"children":1884},{"style":539},[1885],{"type":411,"value":1847},{"type":402,"tag":532,"props":1887,"children":1888},{"style":1840},[1889],{"type":411,"value":1890},"] ",{"type":402,"tag":532,"props":1892,"children":1893},{"style":783},[1894],{"type":411,"value":1895},"=",{"type":402,"tag":532,"props":1897,"children":1898},{"style":539},[1899],{"type":411,"value":1900}," value\n",{"type":402,"tag":532,"props":1902,"children":1903},{"class":534,"line":833},[1904,1908],{"type":402,"tag":532,"props":1905,"children":1906},{"style":837},[1907],{"type":411,"value":840},{"type":402,"tag":532,"props":1909,"children":1911},{"style":1910},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1912],{"type":411,"value":1913}," true\n",{"type":402,"tag":532,"props":1915,"children":1916},{"class":534,"line":892},[1917],{"type":402,"tag":532,"props":1918,"children":1919},{"style":545},[1920],{"type":411,"value":812},{"type":402,"tag":532,"props":1922,"children":1923},{"class":534,"line":900},[1924,1928],{"type":402,"tag":532,"props":1925,"children":1926},{"style":545},[1927],{"type":411,"value":1230},{"type":402,"tag":532,"props":1929,"children":1930},{"style":539},[1931],{"type":411,"value":1322},{"type":402,"tag":532,"props":1933,"children":1934},{"class":534,"line":929},[1935],{"type":402,"tag":532,"props":1936,"children":1937},{"emptyLinePlaceholder":1475},[1938],{"type":411,"value":1478},{"type":402,"tag":532,"props":1940,"children":1941},{"class":534,"line":954},[1942,1947,1952,1956,1960,1964,1969,1973],{"type":402,"tag":532,"props":1943,"children":1944},{"style":729},[1945],{"type":411,"value":1946},"function",{"type":402,"tag":532,"props":1948,"children":1949},{"style":551},[1950],{"type":411,"value":1951}," invariant",{"type":402,"tag":532,"props":1953,"children":1954},{"style":545},[1955],{"type":411,"value":1304},{"type":402,"tag":532,"props":1957,"children":1958},{"style":914},[1959],{"type":411,"value":1847},{"type":402,"tag":532,"props":1961,"children":1962},{"style":545},[1963],{"type":411,"value":1399},{"type":402,"tag":532,"props":1965,"children":1966},{"style":914},[1967],{"type":411,"value":1968}," action",{"type":402,"tag":532,"props":1970,"children":1971},{"style":545},[1972],{"type":411,"value":922},{"type":402,"tag":532,"props":1974,"children":1975},{"style":545},[1976],{"type":411,"value":743},{"type":402,"tag":532,"props":1978,"children":1979},{"class":534,"line":962},[1980,1985,1989,1993,1997,2002,2006,2010,2015,2019,2024],{"type":402,"tag":532,"props":1981,"children":1982},{"style":837},[1983],{"type":411,"value":1984},"  if",{"type":402,"tag":532,"props":1986,"children":1987},{"style":1840},[1988],{"type":411,"value":911},{"type":402,"tag":532,"props":1990,"children":1991},{"style":539},[1992],{"type":411,"value":1847},{"type":402,"tag":532,"props":1994,"children":1995},{"style":545},[1996],{"type":411,"value":548},{"type":402,"tag":532,"props":1998,"children":1999},{"style":551},[2000],{"type":411,"value":2001},"startsWith",{"type":402,"tag":532,"props":2003,"children":2004},{"style":1840},[2005],{"type":411,"value":1304},{"type":402,"tag":532,"props":2007,"children":2008},{"style":789},[2009],{"type":411,"value":854},{"type":402,"tag":532,"props":2011,"children":2012},{"style":795},[2013],{"type":411,"value":2014},"_",{"type":402,"tag":532,"props":2016,"children":2017},{"style":789},[2018],{"type":411,"value":854},{"type":402,"tag":532,"props":2020,"children":2021},{"style":1840},[2022],{"type":411,"value":2023},")) ",{"type":402,"tag":532,"props":2025,"children":2026},{"style":545},[2027],{"type":411,"value":2028},"{\n",{"type":402,"tag":532,"props":2030,"children":2031},{"class":534,"line":1216},[2032,2037,2041,2046,2050,2055,2060,2064],{"type":402,"tag":532,"props":2033,"children":2034},{"style":837},[2035],{"type":411,"value":2036},"    throw",{"type":402,"tag":532,"props":2038,"children":2039},{"style":783},[2040],{"type":411,"value":1768},{"type":402,"tag":532,"props":2042,"children":2043},{"style":551},[2044],{"type":411,"value":2045}," Error",{"type":402,"tag":532,"props":2047,"children":2048},{"style":1840},[2049],{"type":411,"value":1304},{"type":402,"tag":532,"props":2051,"children":2052},{"style":789},[2053],{"type":411,"value":2054},"`",{"type":402,"tag":532,"props":2056,"children":2057},{"style":795},[2058],{"type":411,"value":2059},"Invalid Key",{"type":402,"tag":532,"props":2061,"children":2062},{"style":789},[2063],{"type":411,"value":2054},{"type":402,"tag":532,"props":2065,"children":2066},{"style":1840},[2067],{"type":411,"value":1322},{"type":402,"tag":532,"props":2069,"children":2070},{"class":534,"line":1224},[2071],{"type":402,"tag":532,"props":2072,"children":2073},{"style":545},[2074],{"type":411,"value":812},{"type":402,"tag":532,"props":2076,"children":2078},{"class":534,"line":2077},14,[2079],{"type":402,"tag":532,"props":2080,"children":2081},{"style":545},[2082],{"type":411,"value":968},{"type":402,"tag":532,"props":2084,"children":2086},{"class":534,"line":2085},15,[2087],{"type":402,"tag":532,"props":2088,"children":2089},{"emptyLinePlaceholder":1475},[2090],{"type":411,"value":1478},{"type":402,"tag":532,"props":2092,"children":2094},{"class":534,"line":2093},16,[2095,2100,2104,2109,2113,2117,2122],{"type":402,"tag":532,"props":2096,"children":2097},{"style":539},[2098],{"type":411,"value":2099},"proxy",{"type":402,"tag":532,"props":2101,"children":2102},{"style":545},[2103],{"type":411,"value":548},{"type":402,"tag":532,"props":2105,"children":2106},{"style":539},[2107],{"type":411,"value":2108},"_prop ",{"type":402,"tag":532,"props":2110,"children":2111},{"style":783},[2112],{"type":411,"value":1895},{"type":402,"tag":532,"props":2114,"children":2115},{"style":789},[2116],{"type":411,"value":792},{"type":402,"tag":532,"props":2118,"children":2119},{"style":795},[2120],{"type":411,"value":2121},"somevalue",{"type":402,"tag":532,"props":2123,"children":2124},{"style":789},[2125],{"type":411,"value":803},{"type":402,"tag":532,"props":2127,"children":2129},{"class":534,"line":2128},17,[2130],{"type":402,"tag":532,"props":2131,"children":2132},{"style":1263},[2133],{"type":411,"value":2134},"// Error: Invalid Key\n",{"type":402,"tag":407,"props":2136,"children":2137},{},[2138],{"type":411,"value":2139},"若脱离 ES 6，代理模式会变成什么？",{"type":402,"tag":407,"props":2141,"children":2142},{},[2143],{"type":411,"value":2144},"会变成一团带有 Proxy Patterns 注释的函数，会被某个 GitHub 上的库吸收下放到 Readme 中亦或是变成社区中新增的几篇“JS 中的代理模式”的博客... 害，无所谓了。",{"type":402,"tag":414,"props":2146,"children":2148},{"id":2147},"设计模式的消融",[2149],{"type":411,"value":2147},{"type":402,"tag":407,"props":2151,"children":2152},{},[2153,2158],{"type":402,"tag":449,"props":2154,"children":2155},{},[2156],{"type":411,"value":2157},"总的来说，设计模式无非有三种作用：创建对象、组合对象以及处理对象的依赖",{"type":411,"value":2159},"。面向对象设计模式所代表的复用性，只能在面向对象的上下文中使用。跳出面向对象，你会发现代码复用的层次可以更加开放，下至语言特征，上至框架。",{"type":402,"tag":407,"props":2161,"children":2162},{},[2163],{"type":411,"value":2164},"作为抽象的最低层级，JS 语言特征，离不开日益见新的语言规范。上文总结的设计模式与语言特征的重叠之处，可以概括为以下两点：",{"type":402,"tag":2166,"props":2167,"children":2168},"ul",{},[2169,2175],{"type":402,"tag":2170,"props":2171,"children":2172},"li",{},[2173],{"type":411,"value":2174},"若语言本身孱弱时，可通过语言特征的再上层抽象，如函数，来提高复用的层次（即发明一种新的设计模式）；",{"type":402,"tag":2170,"props":2176,"children":2177},{},[2178],{"type":411,"value":2179},"当语言逐渐强大时，设计模式的概念也随之弱化；",{"type":402,"tag":407,"props":2181,"children":2182},{},[2183],{"type":411,"value":2184},"听起来颇有些“设计模式是对语言能力不足的补充”的味道，难道说我们要开始编程语言的圣战？这让我回想起 Paul Graham 在《黑客与画家》中描写到他对“强大语言”的赤裸裸的崇拜:",{"type":402,"tag":403,"props":2186,"children":2187},{},[2188],{"type":402,"tag":407,"props":2189,"children":2190},{},[2191,2193,2197,2199,2202,2204,2207,2209,2212,2214],{"type":411,"value":2192},"如果你想解决一个困难的问题，",{"type":402,"tag":2194,"props":2195,"children":2196},"br",{},[],{"type":411,"value":2198},"\n关键不是你使用的语言是否强大，而是好几个因素同时发挥作用：",{"type":402,"tag":2194,"props":2200,"children":2201},{},[],{"type":411,"value":2203},"\n（a）使用一种强大的语言；",{"type":402,"tag":2194,"props":2205,"children":2206},{},[],{"type":411,"value":2208},"\n（b）为这个难题写一个真实世界中的编译器；",{"type":402,"tag":2194,"props":2210,"children":2211},{},[],{"type":411,"value":2213},"\n（c）或者... 你把自己变成这个难题的人肉编译器。\n",{"type":402,"tag":780,"props":2215,"children":2216},{},[2217],{"type":411,"value":2218},"Paul Graham",{"type":402,"tag":407,"props":2220,"children":2221},{},[2222],{"type":411,"value":2223},"Paul Graham 就觉得设计模式就是一种对语言能力不足的妥协，“语言的编程能力越强大，写出来的程序就越短”。当然，就算有一种语言可以强大到和破除面向对象设计模式的神话，关于语言的表达能力强弱的争论也不会停止。不过好消息是，脱离场景谈语言一定是错误的，正如没有人会指望用汇编来编写 Web 程序。",{"type":402,"tag":407,"props":2225,"children":2226},{},[2227],{"type":411,"value":2228},"我们没必要去追求极致的编程语言表达力，表达力和复杂度往往是正相关的，就像世界上所有的语言的法阵都会伴随着词语的演进、读音的兴替以及对错误语法的包容，但很少有人说（或敢说）“你看，白话文比起文言文来说真是不够格啊”。",{"type":402,"tag":407,"props":2230,"children":2231},{},[2232],{"type":411,"value":2233},"脱离面向对象，我们也可以谈论设计模式，因为我们聊的就是代码复用。就算使用函数式、声明式的语言解决问题，也许有特定范式可遵循。请想象一下 CSS 中的设计模式。嗯？CSS 有设计模式么？私以为有。特异性、继承和层叠这三种语言特征就是 CSS 的设计模式；在这三种基础特性之上建立起来的各种代码组织方案/命名方案（如 OOCSS、Atomic CSS），也算。",{"type":402,"tag":407,"props":2235,"children":2236},{},[2237,2242],{"type":402,"tag":449,"props":2238,"children":2239},{},[2240],{"type":411,"value":2241},"唯一不变的，只有抽象的复用",{"type":411,"value":2243},"。我们做的一切工作，只是在抽象出不同层次的代码复用的同时，尽可能把代码组织成容易理解的形式。重要的不是记住某个设计模式中的实体以及实体是如何通讯的，而是要理解该设计模式所代表的抽象的体量适合的场景。",{"type":402,"tag":414,"props":2245,"children":2247},{"id":2246},"语言的魔法锅",[2248],{"type":411,"value":2246},{"type":402,"tag":403,"props":2250,"children":2251},{},[2252],{"type":402,"tag":407,"props":2253,"children":2254},{},[2255,2257],{"type":411,"value":2256},"在威尔士神话中，有一口神奇的大锅，加入特定配方熬制上一年零一天后，便能萃取出三滴解决任何难题的灵药。\n",{"type":402,"tag":780,"props":2258,"children":2259},{},[2260],{"type":411,"value":2261},"《塔列辛传奇》",{"type":402,"tag":407,"props":2263,"children":2264},{},[2265,2267,2274,2276,2283,2285,2296,2298,2309],{"type":411,"value":2266},"JavaScript 的火热日益见长，前端社区",{"type":402,"tag":429,"props":2268,"children":2271},{"href":2269,"rel":2270},"https://githut.info/",[1356],[2272],{"type":411,"value":2273},"越加活跃",{"type":411,"value":2275},"，规范也",{"type":402,"tag":429,"props":2277,"children":2280},{"href":2278,"rel":2279},"https://tc39.es/ecma262/",[1356],[2281],{"type":411,"value":2282},"日益见新",{"type":411,"value":2284},"。ESNeeext 已经往魔法锅中加了许多新材料，这是好事（其实我满心期待它直接把锅塞满）。新的语言特征能带来了更多的可能性，就目前而言，新特征大概率能增加语义，增强表达力、降低思维负担",{"type":402,"tag":425,"props":2286,"children":2287},{},[2288],{"type":402,"tag":429,"props":2289,"children":2293},{"href":2290,"ariaDescribedBy":2291,"dataFootnoteRef":396,"id":2292},"#user-content-fn-if-one-word",[433],"user-content-fnref-if-one-word",[2294],{"type":411,"value":2295},"6",{"type":411,"value":2297},"。尽管把材料往大锅中塞吧",{"type":402,"tag":425,"props":2299,"children":2300},{},[2301],{"type":402,"tag":429,"props":2302,"children":2306},{"href":2303,"ariaDescribedBy":2304,"dataFootnoteRef":396,"id":2305},"#user-content-fn-how-js-works",[433],"user-content-fnref-how-js-works",[2307],{"type":411,"value":2308},"7",{"type":411,"value":2310},"！让我们一同祈祷萃取出灵药的一天早日到来！",{"type":402,"tag":407,"props":2312,"children":2313},{},[2314],{"type":411,"value":2315},"以下就用魔法锅的故事作为文章结尾，这是一个颇有意思的传奇故事。",{"type":402,"tag":407,"props":2317,"children":2318},{},[2319],{"type":402,"tag":485,"props":2320,"children":2323},{"alt":2321,"src":2322},"炼金术 | 维基百科","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200713074400.png",[],{"type":402,"tag":407,"props":2325,"children":2326},{},[2327],{"type":411,"value":2328},"在爱尔兰一个隐秘的角落，住着一个精通智慧与魔法的巫师，凯丽杜恩（Ceridwen）。她能力超凡，偏偏却生了一个丑陋的儿子。所以这位母亲竭尽所能想将智慧传授给他，以弥补其外表的丑陋。她辗转于各种巫术与秘仪，最后，总算在一本隐秘的魔书中找到了灵感。",{"type":402,"tag":407,"props":2330,"children":2331},{},[2332],{"type":411,"value":2333},"魔书将秘密告诉凯丽杜恩：她需要使用一口大的魔法锅，填满红山花、小麦、火盐、精灵耳、直立根和灵尘，用大火熬制上一年零一天。最终会生成一锅致命毒物，但溅出的前三滴汁液却是充满“预言之灵”的智慧灵药。",{"type":402,"tag":407,"props":2335,"children":2336},{},[2337],{"type":411,"value":2338},"很快，熬制魔法锅的工作在凯丽杜恩的安排下有条不紊地进行，一个名字未知的盲人被派来搅拌大锅，年轻人巴赫则负责烧它下面的火。",{"type":402,"tag":407,"props":2340,"children":2341},{},[2342],{"type":411,"value":2343},"星象在天空中咯咯响地平移着，太阳和月亮绕着地球转了一轮又一轮... 随着时间推移，锅中的草药效力变得越来越强。看着咕嘟嘟冒着气泡的大锅，凯丽杜恩觉得很是满意，她便躺在温暖的锅边睡着了。",{"type":402,"tag":407,"props":2345,"children":2346},{},[2347,2349],{"type":411,"value":2348},"就在此时，意外发生了。翻腾着热气的大锅，意外地溅出了几点液体在年轻人巴赫的手指上，而巴赫居然不假思索地将手指吮吸地干干净净。和魔书的预言一样，巴赫立马就获得了智慧。他瞬间通晓了火焰的舞蹈和水的诉说，山的尊严和风的呢喃... 他知晓了无数秘密，以及... ",{"type":402,"tag":449,"props":2350,"children":2351},{},[2352],{"type":411,"value":2353},"凯丽杜恩肯定会杀了他！",{"type":402,"tag":407,"props":2355,"children":2356},{},[2357],{"type":411,"value":2358},"慌乱中，巴赫变成一只野兔夺路而逃，而凯丽杜恩惊醒后赶忙变成猎犬一路追踪过去。巴赫变成天空中的鸽子，她就变成一只鹰；他变成一头奔跑的鹿，她就变成一只草原上的狼；他化身为谷仓中的一粒麦粒，她就变成一只啄个不停老母鸡...",{"type":402,"tag":407,"props":2360,"children":2361},{},[2362],{"type":411,"value":2363},"这两人也许一直较量着，直到今天。",{"type":402,"tag":414,"props":2365,"children":2367},{"id":2366},"阅读更多",[2368],{"type":411,"value":2366},{"type":402,"tag":2166,"props":2370,"children":2371},{},[2372,2382,2392],{"type":402,"tag":2170,"props":2373,"children":2374},{},[2375],{"type":402,"tag":429,"props":2376,"children":2379},{"href":2377,"rel":2378},"https://www.jdon.com/37356",[1356],[2380],{"type":411,"value":2381},"15 年后 GoF 设计模式作者再谈设计模式",{"type":402,"tag":2170,"props":2383,"children":2384},{},[2385],{"type":402,"tag":429,"props":2386,"children":2389},{"href":2387,"rel":2388},"https://www.zhihu.com/question/37009570",[1356],[2390],{"type":411,"value":2391},"为什么不能乱点技能树",{"type":402,"tag":2170,"props":2393,"children":2394},{},[2395],{"type":402,"tag":429,"props":2396,"children":2399},{"href":2397,"rel":2398},"https://mp.weixin.qq.com/s?src=11&timestamp=1651051411&ver=3764&signature=AiaMcpc*LLVNlmVWIHaOvu4sThNq8OFp8ckqlVllLSohG8dWn**P3unuBhRwZAEND0uJdnurJtHvE6IKlBYAUUwuvRYknXkKje6CzOZaQBxRPIlnN4kwtzYsfa8fxKSM&new=1",[1356],[2400],{"type":411,"value":2401},"超越库和框架的技术创新",{"type":402,"tag":407,"props":2403,"children":2404},{},[2405],{"type":411,"value":2406},"希望本文能对你有所帮助，也欢迎各位批评文中观点或指出错误。",{"type":402,"tag":407,"props":2408,"children":2409},{},[2410,2412,2419,2421,2428],{"type":411,"value":2411},"想看看这篇文章是如何被创造的？你能从我的",{"type":402,"tag":429,"props":2413,"children":2416},{"href":2414,"rel":2415},"https://github.com/Lionad-Morotar/blogs",[1356],[2417],{"type":411,"value":2418},"博客项目",{"type":411,"value":2420},"中找到答案~ 欢迎 Star & Follow~ 也请大家多来我的",{"type":402,"tag":429,"props":2422,"children":2425},{"href":2423,"rel":2424},"https://www.lionad.art",[1356],[2426],{"type":411,"value":2427},"线上博客逛逛",{"type":411,"value":2429},"，排版超 Nice 哦~",{"type":402,"tag":2431,"props":2432,"children":2435},"section",{"className":2433,"dataFootnotes":396},[2434],"footnotes",[2436,2443],{"type":402,"tag":414,"props":2437,"children":2440},{"className":2438,"id":433},[2439],"sr-only",[2441],{"type":411,"value":2442},"Footnotes",{"type":402,"tag":2444,"props":2445,"children":2446},"ol",{},[2447,2462,2484,2497,2518,2531,2544],{"type":402,"tag":2170,"props":2448,"children":2450},{"id":2449},"user-content-fn-%E6%96%87%E5%8C%96",[2451,2453],{"type":411,"value":2452},"非贬义。 ",{"type":402,"tag":429,"props":2454,"children":2459},{"href":2455,"ariaLabel":2456,"className":2457,"dataFootnoteBackref":396},"#user-content-fnref-%E6%96%87%E5%8C%96","Back to reference 1",[2458],"data-footnote-backref",[2460],{"type":411,"value":2461},"↩",{"type":402,"tag":2170,"props":2463,"children":2465},{"id":2464},"user-content-fn-fn-call",[2466,2468,2475,2477],{"type":411,"value":2467},"见：",{"type":402,"tag":429,"props":2469,"children":2472},{"href":2470,"rel":2471},"https://zhuanlan.zhihu.com/p/95741316",[1356],[2473],{"type":411,"value":2474},"子程序（函数）考古学",{"type":411,"value":2476}," ",{"type":402,"tag":429,"props":2478,"children":2482},{"href":2479,"ariaLabel":2480,"className":2481,"dataFootnoteBackref":396},"#user-content-fnref-fn-call","Back to reference 2",[2458],[2483],{"type":411,"value":2461},{"type":402,"tag":2170,"props":2485,"children":2487},{"id":2486},"user-content-fn-css",[2488,2490],{"type":411,"value":2489},"试试使用 CSS 去写游戏？即便可行，但过程也会让人无比沮丧。 ",{"type":402,"tag":429,"props":2491,"children":2495},{"href":2492,"ariaLabel":2493,"className":2494,"dataFootnoteBackref":396},"#user-content-fnref-css","Back to reference 3",[2458],[2496],{"type":411,"value":2461},{"type":402,"tag":2170,"props":2498,"children":2500},{"id":2499},"user-content-fn-module-pattern",[2501,2503,2509,2511],{"type":411,"value":2502},"此模块模式并非传统面向对象中的模块模式，后者的定义见：",{"type":402,"tag":429,"props":2504,"children":2507},{"href":2505,"rel":2506},"https://www.jdon.com/52843",[1356],[2508],{"type":411,"value":2505},{"type":411,"value":2510},"。 ",{"type":402,"tag":429,"props":2512,"children":2516},{"href":2513,"ariaLabel":2514,"className":2515,"dataFootnoteBackref":396},"#user-content-fnref-module-pattern","Back to reference 4",[2458],[2517],{"type":411,"value":2461},{"type":402,"tag":2170,"props":2519,"children":2521},{"id":2520},"user-content-fn-firstclass",[2522,2524],{"type":411,"value":2523},"且叫且珍惜，说不定以后就听不到“一等公民”这种叫法啦。 ",{"type":402,"tag":429,"props":2525,"children":2529},{"href":2526,"ariaLabel":2527,"className":2528,"dataFootnoteBackref":396},"#user-content-fnref-firstclass","Back to reference 5",[2458],[2530],{"type":411,"value":2461},{"type":402,"tag":2170,"props":2532,"children":2534},{"id":2533},"user-content-fn-if-one-word",[2535,2537],{"type":411,"value":2536},"用一个单词就能达意时就不需要用一个句子。 ",{"type":402,"tag":429,"props":2538,"children":2542},{"href":2539,"ariaLabel":2540,"className":2541,"dataFootnoteBackref":396},"#user-content-fnref-if-one-word","Back to reference 6",[2458],[2543],{"type":411,"value":2461},{"type":402,"tag":2170,"props":2545,"children":2547},{"id":2546},"user-content-fn-how-js-works",[2548,2550],{"type":411,"value":2549},"语言特征并不总是银弹，类似观点见道格拉斯的《How JS Works》 ",{"type":402,"tag":429,"props":2551,"children":2555},{"href":2552,"ariaLabel":2553,"className":2554,"dataFootnoteBackref":396},"#user-content-fnref-how-js-works","Back to reference 7",[2458],[2556],{"type":411,"value":2461},{"type":402,"tag":2558,"props":2559,"children":2560},"style",{},[2561],{"type":411,"value":2562},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":396,"searchDepth":746,"depth":746,"links":2564},[2565,2566,2567,2568,2569,2570,2571,2572],{"id":416,"depth":746,"text":416},{"id":468,"depth":746,"text":468},{"id":576,"depth":746,"text":576},{"id":678,"depth":746,"text":678},{"id":2147,"depth":746,"text":2147},{"id":2246,"depth":746,"text":2246},{"id":2366,"depth":746,"text":2366},{"id":433,"depth":746,"text":2442},"markdown","content:2.articles:1107.design-patterns-and-js-magic-pot.md","content","2.articles/1107.design-patterns-and-js-magic-pot.md","2.articles/1107.design-patterns-and-js-magic-pot","md",[2580,2582],{"_path":67,"title":66,"description":2581},"本文介绍了几种通过CSS实现的常见阴影效果如单侧投影、空心投影、投影动画、彩色阴影、长投影和倒影，以及尝试使用SVG模拟材质特性如粗糙度及光学效应如菲尼尔效应生成了几种特殊的纹理，最后通过一个CSS绘制真实书本案例介绍了实战中的一些细节。",{"_path":73,"title":72,"description":2583},"上一篇讲 anysort 的文章说到因网易云音乐的歌单排序功能较弱，我们自己实现的用来给歌单自定义排序的排序库的思路。这篇文章在排序库的基础上，介绍了其 TypeScript 类型实现。",1741604941759]