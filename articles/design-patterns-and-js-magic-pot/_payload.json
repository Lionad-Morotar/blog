[{"data":1,"prerenderedAt":2579},["Reactive",2],{"navigation":3,"/articles/design-patterns-and-js-magic-pot":389,"/articles/design-patterns-and-js-magic-pot-surround":2574},[4,32,83,99,126,132,138,372,378,384],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96],{"title":88,"_path":89},"🌐 AnySort","/tools/anysort",{"title":91,"_path":92},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":94,"_path":95},"👓 Crapto","/tools/crypto-inline",{"title":97,"_path":98},"🖨️ any-to-base64","/tools/any-to-base64",{"title":100,"_path":101,"children":102},"吉他剧场 / Music","/music",[103,105,108,111,114,117,120,123],{"title":104,"_path":101},"🎸 FingerStyle！",{"title":106,"_path":107},"🌬️ 等待的风","/music/wind",{"title":109,"_path":110},"💕 约定的海洋","/music/ocean",{"title":112,"_path":113},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":115,"_path":116},"🌏 残酷天使的行动纲领","/music/eva",{"title":118,"_path":119},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":121,"_path":122},"🍷 Wu Wei","/music/wu-wei",{"title":124,"_path":125},"🌅 无题","/music/untitled",{"title":127,"_path":128,"children":129},"画点什么 / Paint","/paint",[130],{"title":131,"_path":128},"🚧 正在施工",{"title":133,"_path":134,"children":135},"知识地图 / Maps","/maps",[136],{"title":137,"_path":134},"🏁 知识地图",{"title":139,"_path":140,"children":141},"零散的笔记 / Gists","/gists",[142,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369],{"title":143,"_path":140},"🧊 Gists",{"title":145,"_path":146},"网站的可访问性","/gists/accessibility",{"title":148,"_path":149},"Bit","/gists/bit",{"title":151,"_path":152},"图片模糊","/gists/blur",{"title":154,"_path":155},"渲染相关笔记","/gists/c4d",{"title":157,"_path":158},"CDN 问题记录","/gists/cdn",{"title":160,"_path":161},"消毒剂","/gists/cleaner",{"title":163,"_path":164},"Windows Command","/gists/cmd",{"title":166,"_path":167},"Command","/gists/command",{"title":169,"_path":170},"复杂科学","/gists/complexity-science",{"title":172,"_path":173},"宇宙","/gists/cosmos",{"title":175,"_path":176},"C++","/gists/cpp",{"title":178,"_path":179},"Data Structure","/gists/data-structure",{"title":181,"_path":182},"DEPRESSION","/gists/depression",{"title":184,"_path":185},"设计模式","/gists/design-patterns",{"title":187,"_path":188},"Developer Experience","/gists/developer-experience",{"title":190,"_path":191},"Device Metrics","/gists/device-metrix",{"title":193,"_path":194},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":196,"_path":197},"正则表达式","/gists/eegex",{"title":199,"_path":200},"Emoji","/gists/emoji",{"title":202,"_path":203},"工程","/gists/engineering",{"title":205,"_path":206},"熵","/gists/entropy",{"title":208,"_path":209},"Environment","/gists/environment",{"title":211,"_path":212},"Erlang","/gists/erlang",{"title":214,"_path":215},"逃离塔克夫","/gists/escape-from-tarkov",{"title":217,"_path":218},"ESNext (ES6-ES11)","/gists/esnext",{"title":220,"_path":221},"Eval！","/gists/eval",{"title":223,"_path":224},"Flutter","/gists/flutter",{"title":226,"_path":227},"字体","/gists/font",{"title":229,"_path":230},"JS 函数式编程","/gists/functional",{"title":232,"_path":233},"Google C++ Standard","/gists/google-cpp-standard",{"title":235,"_path":236},"双向链接完全体","/gists/graph",{"title":238,"_path":239},"Hardwares","/gists/hardwares",{"title":241,"_path":242},"哈希冲突","/gists/hash-collision",{"title":244,"_path":245},"信息设计","/gists/information-design",{"title":247,"_path":248},"InstantPage","/gists/instant.page",{"title":250,"_path":251},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":253,"_path":254},"KVStore","/gists/key-value-db",{"title":256,"_path":257},"Kubernetes","/gists/kubernetes",{"title":259,"_path":260},"Makefile","/gists/makefile",{"title":262,"_path":263},"Markdown Inline Style","/gists/markdown-nice",{"title":265,"_path":266},"小程序","/gists/miniapp",{"title":268,"_path":269},"减小页面快照体积","/gists/minify-html",{"title":271,"_path":272},"mklink","/gists/mklink",{"title":274,"_path":275},"Mock","/gists/mock",{"title":277,"_path":278},"多端应用","/gists/multy-end-app",{"title":280,"_path":281},"神经科学","/gists/neuroscience",{"title":283,"_path":284},"OO","/gists/oo",{"title":286,"_path":287},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":289,"_path":290},"人物","/gists/person",{"title":292,"_path":293},"PInvoke","/gists/pinvoke",{"title":295,"_path":296},"像素","/gists/pixel",{"title":298,"_path":299},"PowerShell","/gists/powershell",{"title":301,"_path":302},"量子","/gists/quantum",{"title":304,"_path":305},"保持好奇心","/gists/questions",{"title":307,"_path":308},"React Native","/gists/react-native",{"title":310,"_path":311},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":313,"_path":314},"SEO","/gists/seo",{"title":316,"_path":317},"Shader","/gists/shader",{"title":319,"_path":320},"Shape Up","/gists/shape-up",{"title":322,"_path":323},"睡觉","/gists/sleep",{"title":325,"_path":326},"States","/gists/states",{"title":328,"_path":329},"Storage","/gists/storage",{"title":331,"_path":332},"音视频流处理","/gists/stream-cli",{"title":334,"_path":335},"Symbol","/gists/symbol",{"title":337,"_path":338},"系统论","/gists/systems-theory",{"title":340,"_path":341},"Taro","/gists/taro",{"title":343,"_path":344},"任务切片","/gists/task-slice",{"title":346,"_path":347},"技术偏好","/gists/tech-dudge",{"title":349,"_path":350},"Untitled","/gists/untitled",{"title":352,"_path":353},"可变字体","/gists/variable-font",{"title":355,"_path":356},"视觉错觉","/gists/visual-illusion",{"title":358,"_path":359},"SS(SSR)","/gists/vpn",{"title":361,"_path":362},"VS Code 插件开发","/gists/vscode-plugin",{"title":364,"_path":365},"Web Components","/gists/web-components",{"title":367,"_path":368},"Windows","/gists/windows",{"title":370,"_path":371},"查缺补漏","/gists/wrong",{"title":373,"_path":374,"children":375},"代码笔记 / Gists","/source-code",[376],{"title":377,"_path":374},"🚄 代码笔记",{"title":379,"_path":380,"children":381},"我 / Abount","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"title":385,"_path":386,"children":387},"todo","/todo",[388],{"title":385,"_path":386},{"_path":64,"_dir":390,"_draft":391,"_partial":391,"_locale":392,"title":63,"description":393,"body":394,"_type":2569,"_id":2570,"_source":2571,"_file":2572,"_extension":2573},"articles",false,"","排除人的因素，设计模式的本质只是相关代码复用。本文通过使用JS仿制并简化了几种OOL中经典设计模式，以探讨经典设计模式和代码模板的区别主要在于代码复用的层次不同，以及粗浅聊了聊设计模式与语言特征之间此强彼弱的关系。",{"type":395,"children":396,"toc":2559},"root",[397,409,415,436,441,450,462,467,472,477,486,511,516,570,575,602,612,617,622,627,632,637,645,650,655,667,672,677,700,708,713,965,983,1232,1237,1242,1247,1343,1358,1636,1641,1659,1673,1688,1719,1724,1729,2131,2136,2141,2146,2156,2161,2176,2181,2215,2220,2225,2230,2240,2245,2258,2307,2312,2320,2325,2330,2335,2340,2350,2355,2360,2365,2398,2403,2426,2553],{"type":398,"tag":399,"props":400,"children":401},"element","blockquote",{},[402],{"type":398,"tag":403,"props":404,"children":405},"p",{},[406],{"type":407,"value":408},"text","设计模式最终要融入任何语言。",{"type":398,"tag":410,"props":411,"children":413},"h2",{"id":412},"设计模式是什么",[414],{"type":407,"value":412},{"type":398,"tag":403,"props":416,"children":417},{},[418,420,434],{"type":407,"value":419},"从《人月神话》到《大教堂与集市》，许多闻名业界的作品都“低代码、高文化",{"type":398,"tag":421,"props":422,"children":423},"sup",{},[424],{"type":398,"tag":425,"props":426,"children":431},"a",{"href":427,"ariaDescribedBy":428,"dataFootnoteRef":392,"id":430},"#user-content-fn-%E6%96%87%E5%8C%96",[429],"footnote-label","user-content-fnref-%E6%96%87%E5%8C%96",[432],{"type":407,"value":433},"1",{"type":407,"value":435},"”；各种代码文化运动可以看作“造神运动”此类周日剧场。许多大佬在向人们传授代码经验之余，都喜欢尝试用文化手段（不论是哲学思想还是艺术内涵），来统一人与代码的关系。这种跨界思考的过程通常比较晦涩，诸如“面向对象”、“设计模式”这些放到现在来说我们耳熟能详的词，在过去几十年都是由行业顶尖大佬们牵头搞研究，再经过不断地实践，逐渐沉淀下来形成的标准。",{"type":398,"tag":403,"props":437,"children":438},{},[439],{"type":407,"value":440},"设计模式是什么？",{"type":398,"tag":403,"props":442,"children":443},{},[444],{"type":398,"tag":445,"props":446,"children":447},"strong",{},[448],{"type":407,"value":449},"设计模式是一种标准，它描述了使用面向对象编程语言解决问题的方式。",{"type":398,"tag":403,"props":451,"children":452},{},[453,455,460],{"type":407,"value":454},"设计模式一词发源于建筑学作品《建筑模式语言》，后被一个人们称为“四人帮”（GoF）的小组种出它在软件界开的新花。无论是建筑学还是软件学中的设计模式，相同的地方是，它们都想解决“人”和“物”的关系相关问题，并且形成了一套特定的方法论。",{"type":398,"tag":445,"props":456,"children":457},{},[458],{"type":407,"value":459},"好比人们有了灶就可以长久保存火种，用名词把晦涩难懂的抽象定义为标准，这样有利于思想传播",{"type":407,"value":461},"。只要人们普遍接纳并熟知设计模式，便能畅通无阻地沟通代码的实现。当然，现实很丰满，畅快沟通有个大前提：程序设计时，大家需要使用面向对象编程语言来合作。",{"type":398,"tag":410,"props":463,"children":465},{"id":464},"为什么非面向对象不可",[466],{"type":407,"value":464},{"type":398,"tag":403,"props":468,"children":469},{},[470],{"type":407,"value":471},"构建大型软件不止面向对象这一条路，与面向对象相对应的还有结构化、形式化等程序设计方法。任意一种有自有优劣。面对日益复杂的软件，人们关心的重心逐步转移到软件的可重用性方面。面向对象凭借着分类、封装等天然符合人们认知规律的优势，得到快速发展，终打通需求分析、程序设计到编程语言等开发上下游工作，赢得了业界青睐。",{"type":398,"tag":403,"props":473,"children":474},{},[475],{"type":407,"value":476},"面向对象把功能作为节点，组合为功能网格，节点间通过消息通讯以及做对应的响应。这样一来，开发在编程时不再需要直面输入输出这种数据流动的思考方式，只需要按照指令维护各个对象内部的状态即可，节点对应的代码片段也就能得到重用。",{"type":398,"tag":403,"props":478,"children":479},{},[480],{"type":398,"tag":481,"props":482,"children":485},"img",{"alt":483,"src":484},"Message Passing In OO","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210511174933.png?w=40",[],{"type":398,"tag":403,"props":487,"children":488},{},[489,491,502,504,509],{"type":407,"value":490},"相比子程序复用，函数复用已经是巨大的进步",{"type":398,"tag":421,"props":492,"children":493},{},[494],{"type":398,"tag":425,"props":495,"children":499},{"href":496,"ariaDescribedBy":497,"dataFootnoteRef":392,"id":498},"#user-content-fn-fn-call",[429],"user-content-fnref-fn-call",[500],{"type":407,"value":501},"2",{"type":407,"value":503},"。类复用相比函数复用要更加抽象，因为它保存了函数和状态的集合；而设计模式比类复用在抽象上更胜一筹：设计模式不单单直接复用某个类，而是复用整个“功能网格”，把特定问题的解决方案相关的所有节点和通讯机制全部拷贝，固化下来，命名并形成标准。",{"type":398,"tag":445,"props":505,"children":506},{},[507],{"type":407,"value":508},"设计模式其实是使用面向对象编程语言时代码复用的高级形式，是面向对象发展壮大之路的必然的产物",{"type":407,"value":510},"。只要写代码，就会碰到复用性问题，四人帮偏好面向对象，所以“设计模式”只是他们用来传授的面向对象编程中的代码复用性经验的概括。换句话说，大部分情况下我们讨论的“设计模式”和“面向对象设计模式”完全等同。这也就解释了为什么非面向对象不可了。",{"type":398,"tag":403,"props":512,"children":513},{},[514],{"type":407,"value":515},"我们讨论一个新的问题，如果过滤掉设计模式中的面向对象成分，剩下的是些啥呢？",{"type":398,"tag":517,"props":518,"children":522},"pre",{"className":519,"code":520,"language":521,"meta":392,"style":392},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","console.log(DesignPatterns.filter(removeOO))\n","js",[523],{"type":398,"tag":524,"props":525,"children":526},"code",{"__ignoreMap":392},[527],{"type":398,"tag":528,"props":529,"children":532},"span",{"class":530,"line":531},"line",1,[533,539,545,551,556,560,565],{"type":398,"tag":528,"props":534,"children":536},{"style":535},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[537],{"type":407,"value":538},"console",{"type":398,"tag":528,"props":540,"children":542},{"style":541},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[543],{"type":407,"value":544},".",{"type":398,"tag":528,"props":546,"children":548},{"style":547},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[549],{"type":407,"value":550},"log",{"type":398,"tag":528,"props":552,"children":553},{"style":535},[554],{"type":407,"value":555},"(DesignPatterns",{"type":398,"tag":528,"props":557,"children":558},{"style":541},[559],{"type":407,"value":544},{"type":398,"tag":528,"props":561,"children":562},{"style":547},[563],{"type":407,"value":564},"filter",{"type":398,"tag":528,"props":566,"children":567},{"style":535},[568],{"type":407,"value":569},"(removeOO))\n",{"type":398,"tag":410,"props":571,"children":573},{"id":572},"设计模式的本质",[574],{"type":407,"value":572},{"type":398,"tag":403,"props":576,"children":577},{},[578,580,586,588,593,595,600],{"type":407,"value":579},"我们先直接删除上文关于设计模式的定义中的“面向对象”几个字，看看剩下些什么：设计模式是一种标准，它描述了",{"type":398,"tag":581,"props":582,"children":583},"del",{},[584],{"type":407,"value":585},"使用面向对象编程语言",{"type":407,"value":587},"解决问题的方式，是",{"type":398,"tag":581,"props":589,"children":590},{},[591],{"type":407,"value":592},"使用面向对象编程语言时",{"type":407,"value":594},"代码复用性的高级形式，是",{"type":398,"tag":581,"props":596,"children":597},{},[598],{"type":407,"value":599},"面向对象",{"type":407,"value":601},"发展壮大之路的必然的产物。",{"type":398,"tag":403,"props":603,"children":604},{},[605,607],{"type":407,"value":606},"句子有些不通顺，修补之后变成了：",{"type":398,"tag":445,"props":608,"children":609},{},[610],{"type":407,"value":611},"设计模式是一种标准，它描述了编程时解决问题的特定方式，是代码复用的高级形式及发展代码复用必然的产物。",{"type":398,"tag":403,"props":613,"children":614},{},[615],{"type":407,"value":616},"设计模式本质是什么？不言自明，它只是相关代码复用的一种抽象概念。",{"type":398,"tag":403,"props":618,"children":619},{},[620],{"type":407,"value":621},"说到代码复用，主要关系到代码组织。从函数复用，到使用设计模式，再到使用库、框架，三种代码复用方式的主要区别在于代码组织的粒度不同。",{"type":398,"tag":403,"props":623,"children":624},{},[625],{"type":407,"value":626},"函数复用比较简单，你可以写一个叫做 Add 的函数给两数相加，然后 Copy&Paste 到其他地方复用，或是把函数存放到 Utils.js 文件中，通过模块机制复用。为了了解如何使用某个函数，需要在使用前阅读注释。",{"type":398,"tag":403,"props":628,"children":629},{},[630],{"type":407,"value":631},"库和框架最为复杂，它们是组织了大量函数及实体形成的巨型代码片段。开发新项目时很少会花精力自研框架，一般都引现成的轮子直接开造。使用某库或框架前，必须详细阅读文档。",{"type":398,"tag":403,"props":633,"children":634},{},[635],{"type":407,"value":636},"设计模式则是单个或多个函数的组合（在 Java 中不是函数而是类），既可以在新项目里现写一个模式供使用，也可以引入社区现有的模块来复用。为了了解如何使用某个设计模式，需要提前了解该模式定义的实体以及实体是通讯机制。",{"type":398,"tag":403,"props":638,"children":639},{},[640],{"type":398,"tag":481,"props":641,"children":644},{"alt":642,"src":643},"函数、设计模式、框架间的升级关系","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210513145630.png?w=70",[],{"type":398,"tag":403,"props":646,"children":647},{},[648],{"type":407,"value":649},"设计模式作为最简单的实体和函数的组合，可看作函数的升级版或是框架的缩水版；去掉设计模式中的面向对象相关内容，就只剩下了函数。",{"type":398,"tag":403,"props":651,"children":652},{},[653],{"type":407,"value":654},"等等，“实体和实体间通讯机制”凭空消失了？",{"type":398,"tag":403,"props":656,"children":657},{},[658,660,665],{"type":407,"value":659},"并没有。但我想让他消失。下文将从 JavaScript 入手，介绍如何把设计模式的概念映射到语言特征中。语言特征可是个好东西呀！如果你同意抽象也像复用一样有函数复用、库和框架等不同复杂度的层次的话，那我认为",{"type":398,"tag":445,"props":661,"children":662},{},[663],{"type":407,"value":664},"语言特征就是抽象的基础了。除了语言本身以外，所有抽象的建立都依赖于语言特征",{"type":407,"value":666},"。把设计模式映射成语言特征后，我们就能跳出面向对象的禁锢，从新的、更高层的角度重新思考代码复用问题。",{"type":398,"tag":403,"props":668,"children":669},{},[670],{"type":407,"value":671},"回到正题，我们从 JS 开始说起。",{"type":398,"tag":410,"props":673,"children":675},{"id":674},"仿制设计模式",[676],{"type":407,"value":674},{"type":398,"tag":403,"props":678,"children":679},{},[680,682,687,698],{"type":407,"value":681},"编程语言并不是万能的。",{"type":398,"tag":445,"props":683,"children":684},{},[685],{"type":407,"value":686},"特定语言适合用来解决特定问题",{"type":398,"tag":421,"props":688,"children":689},{},[690],{"type":398,"tag":425,"props":691,"children":695},{"href":692,"ariaDescribedBy":693,"dataFootnoteRef":392,"id":694},"#user-content-fn-css",[429],"user-content-fnref-css",[696],{"type":407,"value":697},"3",{"type":407,"value":699},"。提到 JavaScript 诸多语言特征，其优点可以用寥寥三个词概括：“原型”、“对象”、“函数”。熟练掌握了这些内容，就能在 JS 的世界中游刃有余。",{"type":398,"tag":403,"props":701,"children":702},{},[703],{"type":398,"tag":481,"props":704,"children":707},{"alt":705,"src":706},"《JavaScript 精粹》VS《JavaScript 权威指南》","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200709104930.png",[],{"type":398,"tag":403,"props":709,"children":710},{},[711],{"type":407,"value":712},"传统面向对象语言以类封装状态，并向外暴露改变状态的方法。以下代码中的书本类为例：Book Class 保持有 name 状态，可以使用 getPrintName 方法返回包装后的 name 或使用 rename 修改 name 。",{"type":398,"tag":517,"props":714,"children":716},{"className":519,"code":715,"language":521,"meta":392,"style":392},"class Book {\n  constructor () {\n    this.name = '设计模式与JS魔法锅'\n  }\n  getPrintName () {\n    return '《' + this.name + '》'\n  }\n  rename (newName) {\n    this.name = newName\n  }\n}\n",[717],{"type":398,"tag":524,"props":718,"children":719},{"__ignoreMap":392},[720,740,758,800,809,827,886,894,923,948,956],{"type":398,"tag":528,"props":721,"children":722},{"class":530,"line":531},[723,729,735],{"type":398,"tag":528,"props":724,"children":726},{"style":725},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[727],{"type":407,"value":728},"class",{"type":398,"tag":528,"props":730,"children":732},{"style":731},"--shiki-light:#E2931D;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E;--shiki-light-text-decoration:inherit;--shiki-default-text-decoration:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia-text-decoration:underline",[733],{"type":407,"value":734}," Book",{"type":398,"tag":528,"props":736,"children":737},{"style":541},[738],{"type":407,"value":739}," {\n",{"type":398,"tag":528,"props":741,"children":743},{"class":530,"line":742},2,[744,749,754],{"type":398,"tag":528,"props":745,"children":746},{"style":725},[747],{"type":407,"value":748},"  constructor",{"type":398,"tag":528,"props":750,"children":751},{"style":541},[752],{"type":407,"value":753}," ()",{"type":398,"tag":528,"props":755,"children":756},{"style":541},[757],{"type":407,"value":739},{"type":398,"tag":528,"props":759,"children":761},{"class":530,"line":760},3,[762,768,772,777,783,789,795],{"type":398,"tag":528,"props":763,"children":765},{"style":764},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[766],{"type":407,"value":767},"    this",{"type":398,"tag":528,"props":769,"children":770},{"style":541},[771],{"type":407,"value":544},{"type":398,"tag":528,"props":773,"children":774},{"style":535},[775],{"type":407,"value":776},"name",{"type":398,"tag":528,"props":778,"children":780},{"style":779},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[781],{"type":407,"value":782}," =",{"type":398,"tag":528,"props":784,"children":786},{"style":785},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[787],{"type":407,"value":788}," '",{"type":398,"tag":528,"props":790,"children":792},{"style":791},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[793],{"type":407,"value":794},"设计模式与JS魔法锅",{"type":398,"tag":528,"props":796,"children":797},{"style":785},[798],{"type":407,"value":799},"'\n",{"type":398,"tag":528,"props":801,"children":803},{"class":530,"line":802},4,[804],{"type":398,"tag":528,"props":805,"children":806},{"style":541},[807],{"type":407,"value":808},"  }\n",{"type":398,"tag":528,"props":810,"children":812},{"class":530,"line":811},5,[813,819,823],{"type":398,"tag":528,"props":814,"children":816},{"style":815},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[817],{"type":407,"value":818},"  getPrintName",{"type":398,"tag":528,"props":820,"children":821},{"style":541},[822],{"type":407,"value":753},{"type":398,"tag":528,"props":824,"children":825},{"style":541},[826],{"type":407,"value":739},{"type":398,"tag":528,"props":828,"children":830},{"class":530,"line":829},6,[831,837,841,846,851,856,861,865,869,873,877,882],{"type":398,"tag":528,"props":832,"children":834},{"style":833},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[835],{"type":407,"value":836},"    return",{"type":398,"tag":528,"props":838,"children":839},{"style":785},[840],{"type":407,"value":788},{"type":398,"tag":528,"props":842,"children":843},{"style":791},[844],{"type":407,"value":845},"《",{"type":398,"tag":528,"props":847,"children":848},{"style":785},[849],{"type":407,"value":850},"'",{"type":398,"tag":528,"props":852,"children":853},{"style":779},[854],{"type":407,"value":855}," +",{"type":398,"tag":528,"props":857,"children":858},{"style":764},[859],{"type":407,"value":860}," this",{"type":398,"tag":528,"props":862,"children":863},{"style":541},[864],{"type":407,"value":544},{"type":398,"tag":528,"props":866,"children":867},{"style":535},[868],{"type":407,"value":776},{"type":398,"tag":528,"props":870,"children":871},{"style":779},[872],{"type":407,"value":855},{"type":398,"tag":528,"props":874,"children":875},{"style":785},[876],{"type":407,"value":788},{"type":398,"tag":528,"props":878,"children":879},{"style":791},[880],{"type":407,"value":881},"》",{"type":398,"tag":528,"props":883,"children":884},{"style":785},[885],{"type":407,"value":799},{"type":398,"tag":528,"props":887,"children":889},{"class":530,"line":888},7,[890],{"type":398,"tag":528,"props":891,"children":892},{"style":541},[893],{"type":407,"value":808},{"type":398,"tag":528,"props":895,"children":897},{"class":530,"line":896},8,[898,903,908,914,919],{"type":398,"tag":528,"props":899,"children":900},{"style":815},[901],{"type":407,"value":902},"  rename",{"type":398,"tag":528,"props":904,"children":905},{"style":541},[906],{"type":407,"value":907}," (",{"type":398,"tag":528,"props":909,"children":911},{"style":910},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[912],{"type":407,"value":913},"newName",{"type":398,"tag":528,"props":915,"children":916},{"style":541},[917],{"type":407,"value":918},")",{"type":398,"tag":528,"props":920,"children":921},{"style":541},[922],{"type":407,"value":739},{"type":398,"tag":528,"props":924,"children":926},{"class":530,"line":925},9,[927,931,935,939,943],{"type":398,"tag":528,"props":928,"children":929},{"style":764},[930],{"type":407,"value":767},{"type":398,"tag":528,"props":932,"children":933},{"style":541},[934],{"type":407,"value":544},{"type":398,"tag":528,"props":936,"children":937},{"style":535},[938],{"type":407,"value":776},{"type":398,"tag":528,"props":940,"children":941},{"style":779},[942],{"type":407,"value":782},{"type":398,"tag":528,"props":944,"children":945},{"style":535},[946],{"type":407,"value":947}," newName\n",{"type":398,"tag":528,"props":949,"children":951},{"class":530,"line":950},10,[952],{"type":398,"tag":528,"props":953,"children":954},{"style":541},[955],{"type":407,"value":808},{"type":398,"tag":528,"props":957,"children":959},{"class":530,"line":958},11,[960],{"type":398,"tag":528,"props":961,"children":962},{"style":541},[963],{"type":407,"value":964},"}\n",{"type":398,"tag":403,"props":966,"children":967},{},[968,970,981],{"type":407,"value":969},"放到早期版本 JS 中，想要封装变量，这不好办。早期版本的 JS 没有块级作用域，所以声明的变量会在整个代码或函数作用域中生效。为了仿制类的状态封装能力，知名布道者道格拉斯发明了一种“模块模式”",{"type":398,"tag":421,"props":971,"children":972},{},[973],{"type":398,"tag":425,"props":974,"children":978},{"href":975,"ariaDescribedBy":976,"dataFootnoteRef":392,"id":977},"#user-content-fn-module-pattern",[429],"user-content-fnref-module-pattern",[979],{"type":407,"value":980},"4",{"type":407,"value":982},"，即通过闭包来控制变量的访问权，代码如下：",{"type":398,"tag":517,"props":984,"children":986},{"className":519,"code":985,"language":521,"meta":392,"style":392},"const aBook = (() => {\n  var name = '设计模式与JS魔法锅'\n  function getPrintName () {\n    return '《' + name + '》'\n  }\n  function rename (newName) {\n    name = newName\n  }\n  return {\n    getPrintName,\n    rename\n  }\n})()\n",[987],{"type":398,"tag":524,"props":988,"children":989},{"__ignoreMap":392},[990,1026,1055,1076,1119,1126,1154,1170,1177,1189,1202,1210,1218],{"type":398,"tag":528,"props":991,"children":992},{"class":530,"line":531},[993,998,1004,1008,1012,1017,1022],{"type":398,"tag":528,"props":994,"children":995},{"style":725},[996],{"type":407,"value":997},"const",{"type":398,"tag":528,"props":999,"children":1001},{"style":1000},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1002],{"type":407,"value":1003}," aBook",{"type":398,"tag":528,"props":1005,"children":1006},{"style":779},[1007],{"type":407,"value":782},{"type":398,"tag":528,"props":1009,"children":1010},{"style":535},[1011],{"type":407,"value":907},{"type":398,"tag":528,"props":1013,"children":1014},{"style":541},[1015],{"type":407,"value":1016},"()",{"type":398,"tag":528,"props":1018,"children":1019},{"style":725},[1020],{"type":407,"value":1021}," =>",{"type":398,"tag":528,"props":1023,"children":1024},{"style":541},[1025],{"type":407,"value":739},{"type":398,"tag":528,"props":1027,"children":1028},{"class":530,"line":742},[1029,1034,1039,1043,1047,1051],{"type":398,"tag":528,"props":1030,"children":1031},{"style":725},[1032],{"type":407,"value":1033},"  var",{"type":398,"tag":528,"props":1035,"children":1036},{"style":535},[1037],{"type":407,"value":1038}," name",{"type":398,"tag":528,"props":1040,"children":1041},{"style":779},[1042],{"type":407,"value":782},{"type":398,"tag":528,"props":1044,"children":1045},{"style":785},[1046],{"type":407,"value":788},{"type":398,"tag":528,"props":1048,"children":1049},{"style":791},[1050],{"type":407,"value":794},{"type":398,"tag":528,"props":1052,"children":1053},{"style":785},[1054],{"type":407,"value":799},{"type":398,"tag":528,"props":1056,"children":1057},{"class":530,"line":760},[1058,1063,1068,1072],{"type":398,"tag":528,"props":1059,"children":1060},{"style":725},[1061],{"type":407,"value":1062},"  function",{"type":398,"tag":528,"props":1064,"children":1065},{"style":547},[1066],{"type":407,"value":1067}," getPrintName",{"type":398,"tag":528,"props":1069,"children":1070},{"style":541},[1071],{"type":407,"value":753},{"type":398,"tag":528,"props":1073,"children":1074},{"style":541},[1075],{"type":407,"value":739},{"type":398,"tag":528,"props":1077,"children":1078},{"class":530,"line":802},[1079,1083,1087,1091,1095,1099,1103,1107,1111,1115],{"type":398,"tag":528,"props":1080,"children":1081},{"style":833},[1082],{"type":407,"value":836},{"type":398,"tag":528,"props":1084,"children":1085},{"style":785},[1086],{"type":407,"value":788},{"type":398,"tag":528,"props":1088,"children":1089},{"style":791},[1090],{"type":407,"value":845},{"type":398,"tag":528,"props":1092,"children":1093},{"style":785},[1094],{"type":407,"value":850},{"type":398,"tag":528,"props":1096,"children":1097},{"style":779},[1098],{"type":407,"value":855},{"type":398,"tag":528,"props":1100,"children":1101},{"style":535},[1102],{"type":407,"value":1038},{"type":398,"tag":528,"props":1104,"children":1105},{"style":779},[1106],{"type":407,"value":855},{"type":398,"tag":528,"props":1108,"children":1109},{"style":785},[1110],{"type":407,"value":788},{"type":398,"tag":528,"props":1112,"children":1113},{"style":791},[1114],{"type":407,"value":881},{"type":398,"tag":528,"props":1116,"children":1117},{"style":785},[1118],{"type":407,"value":799},{"type":398,"tag":528,"props":1120,"children":1121},{"class":530,"line":811},[1122],{"type":398,"tag":528,"props":1123,"children":1124},{"style":541},[1125],{"type":407,"value":808},{"type":398,"tag":528,"props":1127,"children":1128},{"class":530,"line":829},[1129,1133,1138,1142,1146,1150],{"type":398,"tag":528,"props":1130,"children":1131},{"style":725},[1132],{"type":407,"value":1062},{"type":398,"tag":528,"props":1134,"children":1135},{"style":547},[1136],{"type":407,"value":1137}," rename",{"type":398,"tag":528,"props":1139,"children":1140},{"style":541},[1141],{"type":407,"value":907},{"type":398,"tag":528,"props":1143,"children":1144},{"style":910},[1145],{"type":407,"value":913},{"type":398,"tag":528,"props":1147,"children":1148},{"style":541},[1149],{"type":407,"value":918},{"type":398,"tag":528,"props":1151,"children":1152},{"style":541},[1153],{"type":407,"value":739},{"type":398,"tag":528,"props":1155,"children":1156},{"class":530,"line":888},[1157,1162,1166],{"type":398,"tag":528,"props":1158,"children":1159},{"style":535},[1160],{"type":407,"value":1161},"    name",{"type":398,"tag":528,"props":1163,"children":1164},{"style":779},[1165],{"type":407,"value":782},{"type":398,"tag":528,"props":1167,"children":1168},{"style":535},[1169],{"type":407,"value":947},{"type":398,"tag":528,"props":1171,"children":1172},{"class":530,"line":896},[1173],{"type":398,"tag":528,"props":1174,"children":1175},{"style":541},[1176],{"type":407,"value":808},{"type":398,"tag":528,"props":1178,"children":1179},{"class":530,"line":925},[1180,1185],{"type":398,"tag":528,"props":1181,"children":1182},{"style":833},[1183],{"type":407,"value":1184},"  return",{"type":398,"tag":528,"props":1186,"children":1187},{"style":541},[1188],{"type":407,"value":739},{"type":398,"tag":528,"props":1190,"children":1191},{"class":530,"line":950},[1192,1197],{"type":398,"tag":528,"props":1193,"children":1194},{"style":535},[1195],{"type":407,"value":1196},"    getPrintName",{"type":398,"tag":528,"props":1198,"children":1199},{"style":541},[1200],{"type":407,"value":1201},",\n",{"type":398,"tag":528,"props":1203,"children":1204},{"class":530,"line":958},[1205],{"type":398,"tag":528,"props":1206,"children":1207},{"style":535},[1208],{"type":407,"value":1209},"    rename\n",{"type":398,"tag":528,"props":1211,"children":1213},{"class":530,"line":1212},12,[1214],{"type":398,"tag":528,"props":1215,"children":1216},{"style":541},[1217],{"type":407,"value":808},{"type":398,"tag":528,"props":1219,"children":1221},{"class":530,"line":1220},13,[1222,1227],{"type":398,"tag":528,"props":1223,"children":1224},{"style":541},[1225],{"type":407,"value":1226},"}",{"type":398,"tag":528,"props":1228,"children":1229},{"style":535},[1230],{"type":407,"value":1231},")()\n",{"type":398,"tag":403,"props":1233,"children":1234},{},[1235],{"type":407,"value":1236},"看起来，模块模式就像是语言能力不足的补充。把目光从遥远的模块模式收回到 2015 年 ES6 发布之后，JavaScript 语言特征得到增强，曾风靡一时的潮词模块模式几乎从网络中销声匿迹了。现在我们可以自由地使用类封装状态，不必再写因缺乏语义显得蹩脚的 IIFE 。",{"type":398,"tag":403,"props":1238,"children":1239},{},[1240],{"type":407,"value":1241},"我们再来看看面向对象中的常见的装饰器模式。",{"type":398,"tag":403,"props":1243,"children":1244},{},[1245],{"type":407,"value":1246},"假设你在维护一个开源项目，项目中有些过时的 API，你想在别人调用该 API 时提示一句“你好，此 API 将在下个版本移除”。这段代码可以这样写：",{"type":398,"tag":517,"props":1248,"children":1250},{"className":519,"code":1249,"language":521,"meta":392,"style":392},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\nconst myAPI = {\n  @deprecate('WARN: oldAPI is decrapted, please use oldAPI_v2')\n  oldAPI() {}\n}\n",[1251],{"type":398,"tag":524,"props":1252,"children":1253},{"__ignoreMap":392},[1254,1263,1283,1319,1336],{"type":398,"tag":528,"props":1255,"children":1256},{"class":530,"line":531},[1257],{"type":398,"tag":528,"props":1258,"children":1260},{"style":1259},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[1261],{"type":407,"value":1262},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\n",{"type":398,"tag":528,"props":1264,"children":1265},{"class":530,"line":742},[1266,1270,1275,1279],{"type":398,"tag":528,"props":1267,"children":1268},{"style":725},[1269],{"type":407,"value":997},{"type":398,"tag":528,"props":1271,"children":1272},{"style":1000},[1273],{"type":407,"value":1274}," myAPI",{"type":398,"tag":528,"props":1276,"children":1277},{"style":779},[1278],{"type":407,"value":782},{"type":398,"tag":528,"props":1280,"children":1281},{"style":541},[1282],{"type":407,"value":739},{"type":398,"tag":528,"props":1284,"children":1285},{"class":530,"line":760},[1286,1291,1296,1301,1305,1310,1314],{"type":398,"tag":528,"props":1287,"children":1288},{"style":535},[1289],{"type":407,"value":1290},"  @",{"type":398,"tag":528,"props":1292,"children":1293},{"style":815},[1294],{"type":407,"value":1295},"deprecate",{"type":398,"tag":528,"props":1297,"children":1298},{"style":541},[1299],{"type":407,"value":1300},"(",{"type":398,"tag":528,"props":1302,"children":1303},{"style":785},[1304],{"type":407,"value":850},{"type":398,"tag":528,"props":1306,"children":1307},{"style":791},[1308],{"type":407,"value":1309},"WARN: oldAPI is decrapted, please use oldAPI_v2",{"type":398,"tag":528,"props":1311,"children":1312},{"style":785},[1313],{"type":407,"value":850},{"type":398,"tag":528,"props":1315,"children":1316},{"style":541},[1317],{"type":407,"value":1318},")\n",{"type":398,"tag":528,"props":1320,"children":1321},{"class":530,"line":802},[1322,1327,1331],{"type":398,"tag":528,"props":1323,"children":1324},{"style":815},[1325],{"type":407,"value":1326},"  oldAPI",{"type":398,"tag":528,"props":1328,"children":1329},{"style":541},[1330],{"type":407,"value":1016},{"type":398,"tag":528,"props":1332,"children":1333},{"style":541},[1334],{"type":407,"value":1335}," {}\n",{"type":398,"tag":528,"props":1337,"children":1338},{"class":530,"line":811},[1339],{"type":398,"tag":528,"props":1340,"children":1341},{"style":541},[1342],{"type":407,"value":964},{"type":398,"tag":403,"props":1344,"children":1345},{},[1346,1348,1356],{"type":407,"value":1347},"若不是",{"type":398,"tag":425,"props":1349,"children":1353},{"href":1350,"rel":1351},"https://github.com/tc39/proposal-decorators",[1352],"nofollow",[1354],{"type":407,"value":1355},"装饰器提案",{"type":407,"value":1357},"的出现，我赌五毛，社区里不会有太多讨论装饰器模式的文章。不过大家若有留意过平常的代码，肯定会注意到其实高阶函数就是装饰器的具体实现。函数在 JS 中是一等公民，通过函数组合可以极其方便地仿制某些设计模式。比如，下代码中，使用“局部应用”函数仿制了一个工厂模式：",{"type":398,"tag":517,"props":1359,"children":1361},{"className":519,"code":1360,"language":521,"meta":392,"style":392},"const Partial = (fn, ...args) => (...rest) => fn(...args, ...rest)\n\nconst Adder = (a, b) => a + b\n\nconst add5 = Partial(Adder, 5)\n\nadd5(5) // >>> 10\nadd5(10) // >>> 15\n",[1362],{"type":398,"tag":524,"props":1363,"children":1364},{"__ignoreMap":392},[1365,1466,1475,1531,1538,1577,1584,1611],{"type":398,"tag":528,"props":1366,"children":1367},{"class":530,"line":531},[1368,1372,1378,1382,1386,1391,1396,1401,1406,1410,1414,1418,1423,1428,1432,1436,1441,1445,1449,1453,1457,1461],{"type":398,"tag":528,"props":1369,"children":1370},{"style":725},[1371],{"type":407,"value":997},{"type":398,"tag":528,"props":1373,"children":1375},{"style":1374},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1376],{"type":407,"value":1377}," Partial",{"type":398,"tag":528,"props":1379,"children":1380},{"style":779},[1381],{"type":407,"value":782},{"type":398,"tag":528,"props":1383,"children":1384},{"style":541},[1385],{"type":407,"value":907},{"type":398,"tag":528,"props":1387,"children":1388},{"style":910},[1389],{"type":407,"value":1390},"fn",{"type":398,"tag":528,"props":1392,"children":1393},{"style":541},[1394],{"type":407,"value":1395},",",{"type":398,"tag":528,"props":1397,"children":1398},{"style":779},[1399],{"type":407,"value":1400}," ...",{"type":398,"tag":528,"props":1402,"children":1403},{"style":910},[1404],{"type":407,"value":1405},"args",{"type":398,"tag":528,"props":1407,"children":1408},{"style":541},[1409],{"type":407,"value":918},{"type":398,"tag":528,"props":1411,"children":1412},{"style":725},[1413],{"type":407,"value":1021},{"type":398,"tag":528,"props":1415,"children":1416},{"style":541},[1417],{"type":407,"value":907},{"type":398,"tag":528,"props":1419,"children":1420},{"style":779},[1421],{"type":407,"value":1422},"...",{"type":398,"tag":528,"props":1424,"children":1425},{"style":910},[1426],{"type":407,"value":1427},"rest",{"type":398,"tag":528,"props":1429,"children":1430},{"style":541},[1431],{"type":407,"value":918},{"type":398,"tag":528,"props":1433,"children":1434},{"style":725},[1435],{"type":407,"value":1021},{"type":398,"tag":528,"props":1437,"children":1438},{"style":547},[1439],{"type":407,"value":1440}," fn",{"type":398,"tag":528,"props":1442,"children":1443},{"style":535},[1444],{"type":407,"value":1300},{"type":398,"tag":528,"props":1446,"children":1447},{"style":779},[1448],{"type":407,"value":1422},{"type":398,"tag":528,"props":1450,"children":1451},{"style":535},[1452],{"type":407,"value":1405},{"type":398,"tag":528,"props":1454,"children":1455},{"style":541},[1456],{"type":407,"value":1395},{"type":398,"tag":528,"props":1458,"children":1459},{"style":779},[1460],{"type":407,"value":1400},{"type":398,"tag":528,"props":1462,"children":1463},{"style":535},[1464],{"type":407,"value":1465},"rest)\n",{"type":398,"tag":528,"props":1467,"children":1468},{"class":530,"line":742},[1469],{"type":398,"tag":528,"props":1470,"children":1472},{"emptyLinePlaceholder":1471},true,[1473],{"type":407,"value":1474},"\n",{"type":398,"tag":528,"props":1476,"children":1477},{"class":530,"line":760},[1478,1482,1487,1491,1495,1499,1503,1508,1512,1516,1521,1526],{"type":398,"tag":528,"props":1479,"children":1480},{"style":725},[1481],{"type":407,"value":997},{"type":398,"tag":528,"props":1483,"children":1484},{"style":1374},[1485],{"type":407,"value":1486}," Adder",{"type":398,"tag":528,"props":1488,"children":1489},{"style":779},[1490],{"type":407,"value":782},{"type":398,"tag":528,"props":1492,"children":1493},{"style":541},[1494],{"type":407,"value":907},{"type":398,"tag":528,"props":1496,"children":1497},{"style":910},[1498],{"type":407,"value":425},{"type":398,"tag":528,"props":1500,"children":1501},{"style":541},[1502],{"type":407,"value":1395},{"type":398,"tag":528,"props":1504,"children":1505},{"style":910},[1506],{"type":407,"value":1507}," b",{"type":398,"tag":528,"props":1509,"children":1510},{"style":541},[1511],{"type":407,"value":918},{"type":398,"tag":528,"props":1513,"children":1514},{"style":725},[1515],{"type":407,"value":1021},{"type":398,"tag":528,"props":1517,"children":1518},{"style":535},[1519],{"type":407,"value":1520}," a ",{"type":398,"tag":528,"props":1522,"children":1523},{"style":779},[1524],{"type":407,"value":1525},"+",{"type":398,"tag":528,"props":1527,"children":1528},{"style":535},[1529],{"type":407,"value":1530}," b\n",{"type":398,"tag":528,"props":1532,"children":1533},{"class":530,"line":802},[1534],{"type":398,"tag":528,"props":1535,"children":1536},{"emptyLinePlaceholder":1471},[1537],{"type":407,"value":1474},{"type":398,"tag":528,"props":1539,"children":1540},{"class":530,"line":811},[1541,1545,1550,1554,1558,1563,1567,1573],{"type":398,"tag":528,"props":1542,"children":1543},{"style":725},[1544],{"type":407,"value":997},{"type":398,"tag":528,"props":1546,"children":1547},{"style":1000},[1548],{"type":407,"value":1549}," add5",{"type":398,"tag":528,"props":1551,"children":1552},{"style":779},[1553],{"type":407,"value":782},{"type":398,"tag":528,"props":1555,"children":1556},{"style":547},[1557],{"type":407,"value":1377},{"type":398,"tag":528,"props":1559,"children":1560},{"style":535},[1561],{"type":407,"value":1562},"(Adder",{"type":398,"tag":528,"props":1564,"children":1565},{"style":541},[1566],{"type":407,"value":1395},{"type":398,"tag":528,"props":1568,"children":1570},{"style":1569},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1571],{"type":407,"value":1572}," 5",{"type":398,"tag":528,"props":1574,"children":1575},{"style":535},[1576],{"type":407,"value":1318},{"type":398,"tag":528,"props":1578,"children":1579},{"class":530,"line":829},[1580],{"type":398,"tag":528,"props":1581,"children":1582},{"emptyLinePlaceholder":1471},[1583],{"type":407,"value":1474},{"type":398,"tag":528,"props":1585,"children":1586},{"class":530,"line":888},[1587,1592,1596,1601,1606],{"type":398,"tag":528,"props":1588,"children":1589},{"style":547},[1590],{"type":407,"value":1591},"add5",{"type":398,"tag":528,"props":1593,"children":1594},{"style":535},[1595],{"type":407,"value":1300},{"type":398,"tag":528,"props":1597,"children":1598},{"style":1569},[1599],{"type":407,"value":1600},"5",{"type":398,"tag":528,"props":1602,"children":1603},{"style":535},[1604],{"type":407,"value":1605},") ",{"type":398,"tag":528,"props":1607,"children":1608},{"style":1259},[1609],{"type":407,"value":1610},"// >>> 10\n",{"type":398,"tag":528,"props":1612,"children":1613},{"class":530,"line":896},[1614,1618,1622,1627,1631],{"type":398,"tag":528,"props":1615,"children":1616},{"style":547},[1617],{"type":407,"value":1591},{"type":398,"tag":528,"props":1619,"children":1620},{"style":535},[1621],{"type":407,"value":1300},{"type":398,"tag":528,"props":1623,"children":1624},{"style":1569},[1625],{"type":407,"value":1626},"10",{"type":398,"tag":528,"props":1628,"children":1629},{"style":535},[1630],{"type":407,"value":1605},{"type":398,"tag":528,"props":1632,"children":1633},{"style":1259},[1634],{"type":407,"value":1635},"// >>> 15\n",{"type":398,"tag":403,"props":1637,"children":1638},{},[1639],{"type":407,"value":1640},"我猜你想咆哮：“工厂模式根本就不是这样写的！”。哈哈，别那么固执，变通一些嘛。我们现在讨论的设计模式是去除了面向对象之后的余留物，几乎只保留了设计模式的本质，复用。换句话说，Partial 是“函数工厂”，是“生成器”，“产出”了仍能接受一个参数的函数。",{"type":398,"tag":1642,"props":1643,"children":1644},"details",{},[1645,1647,1653,1654],{"type":407,"value":1646},"\n    ",{"type":398,"tag":1648,"props":1649,"children":1650},"summary",{},[1651],{"type":407,"value":1652},"我用到了类吗？",{"type":407,"value":1646},{"type":398,"tag":403,"props":1655,"children":1656},{},[1657],{"type":407,"value":1658},"没有。",{"type":398,"tag":1642,"props":1660,"children":1661},{},[1662,1663,1668,1669],{"type":407,"value":1646},{"type":398,"tag":1648,"props":1664,"children":1665},{},[1666],{"type":407,"value":1667},"用到了原型吗？",{"type":407,"value":1646},{"type":398,"tag":403,"props":1670,"children":1671},{},[1672],{"type":407,"value":1658},{"type":398,"tag":1642,"props":1674,"children":1675},{},[1676,1677,1682,1683],{"type":407,"value":1646},{"type":398,"tag":1648,"props":1678,"children":1679},{},[1680],{"type":407,"value":1681},"那我在写什么？",{"type":407,"value":1646},{"type":398,"tag":403,"props":1684,"children":1685},{},[1686],{"type":407,"value":1687},"函数。",{"type":398,"tag":403,"props":1689,"children":1690},{},[1691,1693,1710,1712,1717],{"type":407,"value":1692},"函数，函数而已！",{"type":398,"tag":445,"props":1694,"children":1695},{},[1696,1698,1708],{"type":407,"value":1697},"“函数是一等公民",{"type":398,"tag":421,"props":1699,"children":1700},{},[1701],{"type":398,"tag":425,"props":1702,"children":1706},{"href":1703,"ariaDescribedBy":1704,"dataFootnoteRef":392,"id":1705},"#user-content-fn-firstclass",[429],"user-content-fnref-firstclass",[1707],{"type":407,"value":1600},{"type":407,"value":1709},"”",{"type":407,"value":1711},"，这句话得背熟了，因为诸如“闭包”、“回调”等概念都和函数有关，",{"type":398,"tag":581,"props":1713,"children":1714},{},[1715],{"type":407,"value":1716},"面试经常会问道",{"type":407,"value":1718},"你迟早会用上的。若谈论设计模式脱离不开语言特征的话，那扯上函数绝对不会有任何问题。",{"type":398,"tag":403,"props":1720,"children":1721},{},[1722],{"type":407,"value":1723},"亲函数而远类的写法可以帮助我们消化许多种类的设计模式，我们再来看最后一种，代理模式。",{"type":398,"tag":403,"props":1725,"children":1726},{},[1727],{"type":407,"value":1728},"ES6 原生支持代理模式。对，就是 Vue3 里的那个“Proxy”，直译为“代理器”。社区有很多讲 Vue3 原理分析的文章，肯定绕不开 Proxy，这里不再赘述了。以下展示一个使用 Proxy 拦截对象操作的小例子。",{"type":398,"tag":517,"props":1730,"children":1732},{"className":519,"code":1731,"language":521,"meta":392,"style":392},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\nconst proxy = new Proxy({}, {\n  set(target, key, value) {\n    invariant(key, 'set')\n    target[key] = value\n    return true\n  }\n})\n\nfunction invariant(key, action) {\n  if (key.startsWith('_')) {\n    throw new Error(`Invalid Key`)\n  }\n}\n\nproxy._prop = 'somevalue'\n// Error: Invalid Key\n",[1733],{"type":398,"tag":524,"props":1734,"children":1735},{"__ignoreMap":392},[1736,1744,1783,1826,1865,1897,1910,1917,1928,1935,1973,2025,2064,2071,2079,2087,2122],{"type":398,"tag":528,"props":1737,"children":1738},{"class":530,"line":531},[1739],{"type":398,"tag":528,"props":1740,"children":1741},{"style":1259},[1742],{"type":407,"value":1743},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\n",{"type":398,"tag":528,"props":1745,"children":1746},{"class":530,"line":742},[1747,1751,1756,1760,1765,1770,1774,1779],{"type":398,"tag":528,"props":1748,"children":1749},{"style":725},[1750],{"type":407,"value":997},{"type":398,"tag":528,"props":1752,"children":1753},{"style":1000},[1754],{"type":407,"value":1755}," proxy",{"type":398,"tag":528,"props":1757,"children":1758},{"style":779},[1759],{"type":407,"value":782},{"type":398,"tag":528,"props":1761,"children":1762},{"style":779},[1763],{"type":407,"value":1764}," new",{"type":398,"tag":528,"props":1766,"children":1767},{"style":547},[1768],{"type":407,"value":1769}," Proxy",{"type":398,"tag":528,"props":1771,"children":1772},{"style":535},[1773],{"type":407,"value":1300},{"type":398,"tag":528,"props":1775,"children":1776},{"style":541},[1777],{"type":407,"value":1778},"{},",{"type":398,"tag":528,"props":1780,"children":1781},{"style":541},[1782],{"type":407,"value":739},{"type":398,"tag":528,"props":1784,"children":1785},{"class":530,"line":760},[1786,1791,1795,1800,1804,1809,1813,1818,1822],{"type":398,"tag":528,"props":1787,"children":1788},{"style":815},[1789],{"type":407,"value":1790},"  set",{"type":398,"tag":528,"props":1792,"children":1793},{"style":541},[1794],{"type":407,"value":1300},{"type":398,"tag":528,"props":1796,"children":1797},{"style":910},[1798],{"type":407,"value":1799},"target",{"type":398,"tag":528,"props":1801,"children":1802},{"style":541},[1803],{"type":407,"value":1395},{"type":398,"tag":528,"props":1805,"children":1806},{"style":910},[1807],{"type":407,"value":1808}," key",{"type":398,"tag":528,"props":1810,"children":1811},{"style":541},[1812],{"type":407,"value":1395},{"type":398,"tag":528,"props":1814,"children":1815},{"style":910},[1816],{"type":407,"value":1817}," value",{"type":398,"tag":528,"props":1819,"children":1820},{"style":541},[1821],{"type":407,"value":918},{"type":398,"tag":528,"props":1823,"children":1824},{"style":541},[1825],{"type":407,"value":739},{"type":398,"tag":528,"props":1827,"children":1828},{"class":530,"line":802},[1829,1834,1839,1844,1848,1852,1857,1861],{"type":398,"tag":528,"props":1830,"children":1831},{"style":547},[1832],{"type":407,"value":1833},"    invariant",{"type":398,"tag":528,"props":1835,"children":1837},{"style":1836},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1838],{"type":407,"value":1300},{"type":398,"tag":528,"props":1840,"children":1841},{"style":535},[1842],{"type":407,"value":1843},"key",{"type":398,"tag":528,"props":1845,"children":1846},{"style":541},[1847],{"type":407,"value":1395},{"type":398,"tag":528,"props":1849,"children":1850},{"style":785},[1851],{"type":407,"value":788},{"type":398,"tag":528,"props":1853,"children":1854},{"style":791},[1855],{"type":407,"value":1856},"set",{"type":398,"tag":528,"props":1858,"children":1859},{"style":785},[1860],{"type":407,"value":850},{"type":398,"tag":528,"props":1862,"children":1863},{"style":1836},[1864],{"type":407,"value":1318},{"type":398,"tag":528,"props":1866,"children":1867},{"class":530,"line":811},[1868,1873,1878,1882,1887,1892],{"type":398,"tag":528,"props":1869,"children":1870},{"style":535},[1871],{"type":407,"value":1872},"    target",{"type":398,"tag":528,"props":1874,"children":1875},{"style":1836},[1876],{"type":407,"value":1877},"[",{"type":398,"tag":528,"props":1879,"children":1880},{"style":535},[1881],{"type":407,"value":1843},{"type":398,"tag":528,"props":1883,"children":1884},{"style":1836},[1885],{"type":407,"value":1886},"] ",{"type":398,"tag":528,"props":1888,"children":1889},{"style":779},[1890],{"type":407,"value":1891},"=",{"type":398,"tag":528,"props":1893,"children":1894},{"style":535},[1895],{"type":407,"value":1896}," value\n",{"type":398,"tag":528,"props":1898,"children":1899},{"class":530,"line":829},[1900,1904],{"type":398,"tag":528,"props":1901,"children":1902},{"style":833},[1903],{"type":407,"value":836},{"type":398,"tag":528,"props":1905,"children":1907},{"style":1906},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1908],{"type":407,"value":1909}," true\n",{"type":398,"tag":528,"props":1911,"children":1912},{"class":530,"line":888},[1913],{"type":398,"tag":528,"props":1914,"children":1915},{"style":541},[1916],{"type":407,"value":808},{"type":398,"tag":528,"props":1918,"children":1919},{"class":530,"line":896},[1920,1924],{"type":398,"tag":528,"props":1921,"children":1922},{"style":541},[1923],{"type":407,"value":1226},{"type":398,"tag":528,"props":1925,"children":1926},{"style":535},[1927],{"type":407,"value":1318},{"type":398,"tag":528,"props":1929,"children":1930},{"class":530,"line":925},[1931],{"type":398,"tag":528,"props":1932,"children":1933},{"emptyLinePlaceholder":1471},[1934],{"type":407,"value":1474},{"type":398,"tag":528,"props":1936,"children":1937},{"class":530,"line":950},[1938,1943,1948,1952,1956,1960,1965,1969],{"type":398,"tag":528,"props":1939,"children":1940},{"style":725},[1941],{"type":407,"value":1942},"function",{"type":398,"tag":528,"props":1944,"children":1945},{"style":547},[1946],{"type":407,"value":1947}," invariant",{"type":398,"tag":528,"props":1949,"children":1950},{"style":541},[1951],{"type":407,"value":1300},{"type":398,"tag":528,"props":1953,"children":1954},{"style":910},[1955],{"type":407,"value":1843},{"type":398,"tag":528,"props":1957,"children":1958},{"style":541},[1959],{"type":407,"value":1395},{"type":398,"tag":528,"props":1961,"children":1962},{"style":910},[1963],{"type":407,"value":1964}," action",{"type":398,"tag":528,"props":1966,"children":1967},{"style":541},[1968],{"type":407,"value":918},{"type":398,"tag":528,"props":1970,"children":1971},{"style":541},[1972],{"type":407,"value":739},{"type":398,"tag":528,"props":1974,"children":1975},{"class":530,"line":958},[1976,1981,1985,1989,1993,1998,2002,2006,2011,2015,2020],{"type":398,"tag":528,"props":1977,"children":1978},{"style":833},[1979],{"type":407,"value":1980},"  if",{"type":398,"tag":528,"props":1982,"children":1983},{"style":1836},[1984],{"type":407,"value":907},{"type":398,"tag":528,"props":1986,"children":1987},{"style":535},[1988],{"type":407,"value":1843},{"type":398,"tag":528,"props":1990,"children":1991},{"style":541},[1992],{"type":407,"value":544},{"type":398,"tag":528,"props":1994,"children":1995},{"style":547},[1996],{"type":407,"value":1997},"startsWith",{"type":398,"tag":528,"props":1999,"children":2000},{"style":1836},[2001],{"type":407,"value":1300},{"type":398,"tag":528,"props":2003,"children":2004},{"style":785},[2005],{"type":407,"value":850},{"type":398,"tag":528,"props":2007,"children":2008},{"style":791},[2009],{"type":407,"value":2010},"_",{"type":398,"tag":528,"props":2012,"children":2013},{"style":785},[2014],{"type":407,"value":850},{"type":398,"tag":528,"props":2016,"children":2017},{"style":1836},[2018],{"type":407,"value":2019},")) ",{"type":398,"tag":528,"props":2021,"children":2022},{"style":541},[2023],{"type":407,"value":2024},"{\n",{"type":398,"tag":528,"props":2026,"children":2027},{"class":530,"line":1212},[2028,2033,2037,2042,2046,2051,2056,2060],{"type":398,"tag":528,"props":2029,"children":2030},{"style":833},[2031],{"type":407,"value":2032},"    throw",{"type":398,"tag":528,"props":2034,"children":2035},{"style":779},[2036],{"type":407,"value":1764},{"type":398,"tag":528,"props":2038,"children":2039},{"style":547},[2040],{"type":407,"value":2041}," Error",{"type":398,"tag":528,"props":2043,"children":2044},{"style":1836},[2045],{"type":407,"value":1300},{"type":398,"tag":528,"props":2047,"children":2048},{"style":785},[2049],{"type":407,"value":2050},"`",{"type":398,"tag":528,"props":2052,"children":2053},{"style":791},[2054],{"type":407,"value":2055},"Invalid Key",{"type":398,"tag":528,"props":2057,"children":2058},{"style":785},[2059],{"type":407,"value":2050},{"type":398,"tag":528,"props":2061,"children":2062},{"style":1836},[2063],{"type":407,"value":1318},{"type":398,"tag":528,"props":2065,"children":2066},{"class":530,"line":1220},[2067],{"type":398,"tag":528,"props":2068,"children":2069},{"style":541},[2070],{"type":407,"value":808},{"type":398,"tag":528,"props":2072,"children":2074},{"class":530,"line":2073},14,[2075],{"type":398,"tag":528,"props":2076,"children":2077},{"style":541},[2078],{"type":407,"value":964},{"type":398,"tag":528,"props":2080,"children":2082},{"class":530,"line":2081},15,[2083],{"type":398,"tag":528,"props":2084,"children":2085},{"emptyLinePlaceholder":1471},[2086],{"type":407,"value":1474},{"type":398,"tag":528,"props":2088,"children":2090},{"class":530,"line":2089},16,[2091,2096,2100,2105,2109,2113,2118],{"type":398,"tag":528,"props":2092,"children":2093},{"style":535},[2094],{"type":407,"value":2095},"proxy",{"type":398,"tag":528,"props":2097,"children":2098},{"style":541},[2099],{"type":407,"value":544},{"type":398,"tag":528,"props":2101,"children":2102},{"style":535},[2103],{"type":407,"value":2104},"_prop ",{"type":398,"tag":528,"props":2106,"children":2107},{"style":779},[2108],{"type":407,"value":1891},{"type":398,"tag":528,"props":2110,"children":2111},{"style":785},[2112],{"type":407,"value":788},{"type":398,"tag":528,"props":2114,"children":2115},{"style":791},[2116],{"type":407,"value":2117},"somevalue",{"type":398,"tag":528,"props":2119,"children":2120},{"style":785},[2121],{"type":407,"value":799},{"type":398,"tag":528,"props":2123,"children":2125},{"class":530,"line":2124},17,[2126],{"type":398,"tag":528,"props":2127,"children":2128},{"style":1259},[2129],{"type":407,"value":2130},"// Error: Invalid Key\n",{"type":398,"tag":403,"props":2132,"children":2133},{},[2134],{"type":407,"value":2135},"若脱离 ES 6，代理模式会变成什么？",{"type":398,"tag":403,"props":2137,"children":2138},{},[2139],{"type":407,"value":2140},"会变成一团带有 Proxy Patterns 注释的函数，会被某个 GitHub 上的库吸收下放到 Readme 中亦或是变成社区中新增的几篇“JS 中的代理模式”的博客... 害，无所谓了。",{"type":398,"tag":410,"props":2142,"children":2144},{"id":2143},"设计模式的消融",[2145],{"type":407,"value":2143},{"type":398,"tag":403,"props":2147,"children":2148},{},[2149,2154],{"type":398,"tag":445,"props":2150,"children":2151},{},[2152],{"type":407,"value":2153},"总的来说，设计模式无非有三种作用：创建对象、组合对象以及处理对象的依赖",{"type":407,"value":2155},"。面向对象设计模式所代表的复用性，只能在面向对象的上下文中使用。跳出面向对象，你会发现代码复用的层次可以更加开放，下至语言特征，上至框架。",{"type":398,"tag":403,"props":2157,"children":2158},{},[2159],{"type":407,"value":2160},"作为抽象的最低层级，JS 语言特征，离不开日益见新的语言规范。上文总结的设计模式与语言特征的重叠之处，可以概括为以下两点：",{"type":398,"tag":2162,"props":2163,"children":2164},"ul",{},[2165,2171],{"type":398,"tag":2166,"props":2167,"children":2168},"li",{},[2169],{"type":407,"value":2170},"若语言本身孱弱时，可通过语言特征的再上层抽象，如函数，来提高复用的层次（即发明一种新的设计模式）；",{"type":398,"tag":2166,"props":2172,"children":2173},{},[2174],{"type":407,"value":2175},"当语言逐渐强大时，设计模式的概念也随之弱化；",{"type":398,"tag":403,"props":2177,"children":2178},{},[2179],{"type":407,"value":2180},"听起来颇有些“设计模式是对语言能力不足的补充”的味道，难道说我们要开始编程语言的圣战？这让我回想起 Paul Graham 在《黑客与画家》中描写到他对“强大语言”的赤裸裸的崇拜:",{"type":398,"tag":399,"props":2182,"children":2183},{},[2184],{"type":398,"tag":403,"props":2185,"children":2186},{},[2187,2189,2193,2195,2198,2200,2203,2205,2208,2210],{"type":407,"value":2188},"如果你想解决一个困难的问题，",{"type":398,"tag":2190,"props":2191,"children":2192},"br",{},[],{"type":407,"value":2194},"\n关键不是你使用的语言是否强大，而是好几个因素同时发挥作用：",{"type":398,"tag":2190,"props":2196,"children":2197},{},[],{"type":407,"value":2199},"\n（a）使用一种强大的语言；",{"type":398,"tag":2190,"props":2201,"children":2202},{},[],{"type":407,"value":2204},"\n（b）为这个难题写一个真实世界中的编译器；",{"type":398,"tag":2190,"props":2206,"children":2207},{},[],{"type":407,"value":2209},"\n（c）或者... 你把自己变成这个难题的人肉编译器。\n",{"type":398,"tag":776,"props":2211,"children":2212},{},[2213],{"type":407,"value":2214},"Paul Graham",{"type":398,"tag":403,"props":2216,"children":2217},{},[2218],{"type":407,"value":2219},"Paul Graham 就觉得设计模式就是一种对语言能力不足的妥协，“语言的编程能力越强大，写出来的程序就越短”。当然，就算有一种语言可以强大到和破除面向对象设计模式的神话，关于语言的表达能力强弱的争论也不会停止。不过好消息是，脱离场景谈语言一定是错误的，正如没有人会指望用汇编来编写 Web 程序。",{"type":398,"tag":403,"props":2221,"children":2222},{},[2223],{"type":407,"value":2224},"我们没必要去追求极致的编程语言表达力，表达力和复杂度往往是正相关的，就像世界上所有的语言的法阵都会伴随着词语的演进、读音的兴替以及对错误语法的包容，但很少有人说（或敢说）“你看，白话文比起文言文来说真是不够格啊”。",{"type":398,"tag":403,"props":2226,"children":2227},{},[2228],{"type":407,"value":2229},"脱离面向对象，我们也可以谈论设计模式，因为我们聊的就是代码复用。就算使用函数式、声明式的语言解决问题，也许有特定范式可遵循。请想象一下 CSS 中的设计模式。嗯？CSS 有设计模式么？私以为有。特异性、继承和层叠这三种语言特征就是 CSS 的设计模式；在这三种基础特性之上建立起来的各种代码组织方案/命名方案（如 OOCSS、Atomic CSS），也算。",{"type":398,"tag":403,"props":2231,"children":2232},{},[2233,2238],{"type":398,"tag":445,"props":2234,"children":2235},{},[2236],{"type":407,"value":2237},"唯一不变的，只有抽象的复用",{"type":407,"value":2239},"。我们做的一切工作，只是在抽象出不同层次的代码复用的同时，尽可能把代码组织成容易理解的形式。重要的不是记住某个设计模式中的实体以及实体是如何通讯的，而是要理解该设计模式所代表的抽象的体量适合的场景。",{"type":398,"tag":410,"props":2241,"children":2243},{"id":2242},"语言的魔法锅",[2244],{"type":407,"value":2242},{"type":398,"tag":399,"props":2246,"children":2247},{},[2248],{"type":398,"tag":403,"props":2249,"children":2250},{},[2251,2253],{"type":407,"value":2252},"在威尔士神话中，有一口神奇的大锅，加入特定配方熬制上一年零一天后，便能萃取出三滴解决任何难题的灵药。\n",{"type":398,"tag":776,"props":2254,"children":2255},{},[2256],{"type":407,"value":2257},"《塔列辛传奇》",{"type":398,"tag":403,"props":2259,"children":2260},{},[2261,2263,2270,2272,2279,2281,2292,2294,2305],{"type":407,"value":2262},"JavaScript 的火热日益见长，前端社区",{"type":398,"tag":425,"props":2264,"children":2267},{"href":2265,"rel":2266},"https://githut.info/",[1352],[2268],{"type":407,"value":2269},"越加活跃",{"type":407,"value":2271},"，规范也",{"type":398,"tag":425,"props":2273,"children":2276},{"href":2274,"rel":2275},"https://tc39.es/ecma262/",[1352],[2277],{"type":407,"value":2278},"日益见新",{"type":407,"value":2280},"。ESNeeext 已经往魔法锅中加了许多新材料，这是好事（其实我满心期待它直接把锅塞满）。新的语言特征能带来了更多的可能性，就目前而言，新特征大概率能增加语义，增强表达力、降低思维负担",{"type":398,"tag":421,"props":2282,"children":2283},{},[2284],{"type":398,"tag":425,"props":2285,"children":2289},{"href":2286,"ariaDescribedBy":2287,"dataFootnoteRef":392,"id":2288},"#user-content-fn-if-one-word",[429],"user-content-fnref-if-one-word",[2290],{"type":407,"value":2291},"6",{"type":407,"value":2293},"。尽管把材料往大锅中塞吧",{"type":398,"tag":421,"props":2295,"children":2296},{},[2297],{"type":398,"tag":425,"props":2298,"children":2302},{"href":2299,"ariaDescribedBy":2300,"dataFootnoteRef":392,"id":2301},"#user-content-fn-how-js-works",[429],"user-content-fnref-how-js-works",[2303],{"type":407,"value":2304},"7",{"type":407,"value":2306},"！让我们一同祈祷萃取出灵药的一天早日到来！",{"type":398,"tag":403,"props":2308,"children":2309},{},[2310],{"type":407,"value":2311},"以下就用魔法锅的故事作为文章结尾，这是一个颇有意思的传奇故事。",{"type":398,"tag":403,"props":2313,"children":2314},{},[2315],{"type":398,"tag":481,"props":2316,"children":2319},{"alt":2317,"src":2318},"炼金术 | 维基百科","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200713074400.png",[],{"type":398,"tag":403,"props":2321,"children":2322},{},[2323],{"type":407,"value":2324},"在爱尔兰一个隐秘的角落，住着一个精通智慧与魔法的巫师，凯丽杜恩（Ceridwen）。她能力超凡，偏偏却生了一个丑陋的儿子。所以这位母亲竭尽所能想将智慧传授给他，以弥补其外表的丑陋。她辗转于各种巫术与秘仪，最后，总算在一本隐秘的魔书中找到了灵感。",{"type":398,"tag":403,"props":2326,"children":2327},{},[2328],{"type":407,"value":2329},"魔书将秘密告诉凯丽杜恩：她需要使用一口大的魔法锅，填满红山花、小麦、火盐、精灵耳、直立根和灵尘，用大火熬制上一年零一天。最终会生成一锅致命毒物，但溅出的前三滴汁液却是充满“预言之灵”的智慧灵药。",{"type":398,"tag":403,"props":2331,"children":2332},{},[2333],{"type":407,"value":2334},"很快，熬制魔法锅的工作在凯丽杜恩的安排下有条不紊地进行，一个名字未知的盲人被派来搅拌大锅，年轻人巴赫则负责烧它下面的火。",{"type":398,"tag":403,"props":2336,"children":2337},{},[2338],{"type":407,"value":2339},"星象在天空中咯咯响地平移着，太阳和月亮绕着地球转了一轮又一轮... 随着时间推移，锅中的草药效力变得越来越强。看着咕嘟嘟冒着气泡的大锅，凯丽杜恩觉得很是满意，她便躺在温暖的锅边睡着了。",{"type":398,"tag":403,"props":2341,"children":2342},{},[2343,2345],{"type":407,"value":2344},"就在此时，意外发生了。翻腾着热气的大锅，意外地溅出了几点液体在年轻人巴赫的手指上，而巴赫居然不假思索地将手指吮吸地干干净净。和魔书的预言一样，巴赫立马就获得了智慧。他瞬间通晓了火焰的舞蹈和水的诉说，山的尊严和风的呢喃... 他知晓了无数秘密，以及... ",{"type":398,"tag":445,"props":2346,"children":2347},{},[2348],{"type":407,"value":2349},"凯丽杜恩肯定会杀了他！",{"type":398,"tag":403,"props":2351,"children":2352},{},[2353],{"type":407,"value":2354},"慌乱中，巴赫变成一只野兔夺路而逃，而凯丽杜恩惊醒后赶忙变成猎犬一路追踪过去。巴赫变成天空中的鸽子，她就变成一只鹰；他变成一头奔跑的鹿，她就变成一只草原上的狼；他化身为谷仓中的一粒麦粒，她就变成一只啄个不停老母鸡...",{"type":398,"tag":403,"props":2356,"children":2357},{},[2358],{"type":407,"value":2359},"这两人也许一直较量着，直到今天。",{"type":398,"tag":410,"props":2361,"children":2363},{"id":2362},"阅读更多",[2364],{"type":407,"value":2362},{"type":398,"tag":2162,"props":2366,"children":2367},{},[2368,2378,2388],{"type":398,"tag":2166,"props":2369,"children":2370},{},[2371],{"type":398,"tag":425,"props":2372,"children":2375},{"href":2373,"rel":2374},"https://www.jdon.com/37356",[1352],[2376],{"type":407,"value":2377},"15 年后 GoF 设计模式作者再谈设计模式",{"type":398,"tag":2166,"props":2379,"children":2380},{},[2381],{"type":398,"tag":425,"props":2382,"children":2385},{"href":2383,"rel":2384},"https://www.zhihu.com/question/37009570",[1352],[2386],{"type":407,"value":2387},"为什么不能乱点技能树",{"type":398,"tag":2166,"props":2389,"children":2390},{},[2391],{"type":398,"tag":425,"props":2392,"children":2395},{"href":2393,"rel":2394},"https://mp.weixin.qq.com/s?src=11&timestamp=1651051411&ver=3764&signature=AiaMcpc*LLVNlmVWIHaOvu4sThNq8OFp8ckqlVllLSohG8dWn**P3unuBhRwZAEND0uJdnurJtHvE6IKlBYAUUwuvRYknXkKje6CzOZaQBxRPIlnN4kwtzYsfa8fxKSM&new=1",[1352],[2396],{"type":407,"value":2397},"超越库和框架的技术创新",{"type":398,"tag":403,"props":2399,"children":2400},{},[2401],{"type":407,"value":2402},"希望本文能对你有所帮助，也欢迎各位批评文中观点或指出错误。",{"type":398,"tag":403,"props":2404,"children":2405},{},[2406,2408,2415,2417,2424],{"type":407,"value":2407},"想看看这篇文章是如何被创造的？你能从我的",{"type":398,"tag":425,"props":2409,"children":2412},{"href":2410,"rel":2411},"https://github.com/Lionad-Morotar/blogs",[1352],[2413],{"type":407,"value":2414},"博客项目",{"type":407,"value":2416},"中找到答案~ 欢迎 Star & Follow~ 也请大家多来我的",{"type":398,"tag":425,"props":2418,"children":2421},{"href":2419,"rel":2420},"https://www.lionad.art",[1352],[2422],{"type":407,"value":2423},"线上博客逛逛",{"type":407,"value":2425},"，排版超 Nice 哦~",{"type":398,"tag":2427,"props":2428,"children":2431},"section",{"className":2429,"dataFootnotes":392},[2430],"footnotes",[2432,2439],{"type":398,"tag":410,"props":2433,"children":2436},{"className":2434,"id":429},[2435],"sr-only",[2437],{"type":407,"value":2438},"Footnotes",{"type":398,"tag":2440,"props":2441,"children":2442},"ol",{},[2443,2458,2480,2493,2514,2527,2540],{"type":398,"tag":2166,"props":2444,"children":2446},{"id":2445},"user-content-fn-%E6%96%87%E5%8C%96",[2447,2449],{"type":407,"value":2448},"非贬义。 ",{"type":398,"tag":425,"props":2450,"children":2455},{"href":2451,"ariaLabel":2452,"className":2453,"dataFootnoteBackref":392},"#user-content-fnref-%E6%96%87%E5%8C%96","Back to reference 1",[2454],"data-footnote-backref",[2456],{"type":407,"value":2457},"↩",{"type":398,"tag":2166,"props":2459,"children":2461},{"id":2460},"user-content-fn-fn-call",[2462,2464,2471,2473],{"type":407,"value":2463},"见：",{"type":398,"tag":425,"props":2465,"children":2468},{"href":2466,"rel":2467},"https://zhuanlan.zhihu.com/p/95741316",[1352],[2469],{"type":407,"value":2470},"子程序（函数）考古学",{"type":407,"value":2472}," ",{"type":398,"tag":425,"props":2474,"children":2478},{"href":2475,"ariaLabel":2476,"className":2477,"dataFootnoteBackref":392},"#user-content-fnref-fn-call","Back to reference 2",[2454],[2479],{"type":407,"value":2457},{"type":398,"tag":2166,"props":2481,"children":2483},{"id":2482},"user-content-fn-css",[2484,2486],{"type":407,"value":2485},"试试使用 CSS 去写游戏？即便可行，但过程也会让人无比沮丧。 ",{"type":398,"tag":425,"props":2487,"children":2491},{"href":2488,"ariaLabel":2489,"className":2490,"dataFootnoteBackref":392},"#user-content-fnref-css","Back to reference 3",[2454],[2492],{"type":407,"value":2457},{"type":398,"tag":2166,"props":2494,"children":2496},{"id":2495},"user-content-fn-module-pattern",[2497,2499,2505,2507],{"type":407,"value":2498},"此模块模式并非传统面向对象中的模块模式，后者的定义见：",{"type":398,"tag":425,"props":2500,"children":2503},{"href":2501,"rel":2502},"https://www.jdon.com/52843",[1352],[2504],{"type":407,"value":2501},{"type":407,"value":2506},"。 ",{"type":398,"tag":425,"props":2508,"children":2512},{"href":2509,"ariaLabel":2510,"className":2511,"dataFootnoteBackref":392},"#user-content-fnref-module-pattern","Back to reference 4",[2454],[2513],{"type":407,"value":2457},{"type":398,"tag":2166,"props":2515,"children":2517},{"id":2516},"user-content-fn-firstclass",[2518,2520],{"type":407,"value":2519},"且叫且珍惜，说不定以后就听不到“一等公民”这种叫法啦。 ",{"type":398,"tag":425,"props":2521,"children":2525},{"href":2522,"ariaLabel":2523,"className":2524,"dataFootnoteBackref":392},"#user-content-fnref-firstclass","Back to reference 5",[2454],[2526],{"type":407,"value":2457},{"type":398,"tag":2166,"props":2528,"children":2530},{"id":2529},"user-content-fn-if-one-word",[2531,2533],{"type":407,"value":2532},"用一个单词就能达意时就不需要用一个句子。 ",{"type":398,"tag":425,"props":2534,"children":2538},{"href":2535,"ariaLabel":2536,"className":2537,"dataFootnoteBackref":392},"#user-content-fnref-if-one-word","Back to reference 6",[2454],[2539],{"type":407,"value":2457},{"type":398,"tag":2166,"props":2541,"children":2543},{"id":2542},"user-content-fn-how-js-works",[2544,2546],{"type":407,"value":2545},"语言特征并不总是银弹，类似观点见道格拉斯的《How JS Works》 ",{"type":398,"tag":425,"props":2547,"children":2551},{"href":2548,"ariaLabel":2549,"className":2550,"dataFootnoteBackref":392},"#user-content-fnref-how-js-works","Back to reference 7",[2454],[2552],{"type":407,"value":2457},{"type":398,"tag":2554,"props":2555,"children":2556},"style",{},[2557],{"type":407,"value":2558},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":392,"searchDepth":742,"depth":742,"links":2560},[2561,2562,2563,2564,2565,2566,2567,2568],{"id":412,"depth":742,"text":412},{"id":464,"depth":742,"text":464},{"id":572,"depth":742,"text":572},{"id":674,"depth":742,"text":674},{"id":2143,"depth":742,"text":2143},{"id":2242,"depth":742,"text":2242},{"id":2362,"depth":742,"text":2362},{"id":429,"depth":742,"text":2438},"markdown","content:2.articles:1107.design-patterns-and-js-magic-pot.md","content","2.articles/1107.design-patterns-and-js-magic-pot.md","md",[2575,2577],{"_path":61,"title":60,"description":2576},"本文介绍了几种通过CSS实现的常见阴影效果如单侧投影、空心投影、投影动画、彩色阴影、长投影和倒影，以及尝试使用SVG模拟材质特性如粗糙度及光学效应如菲尼尔效应生成了几种特殊的纹理，最后通过一个CSS绘制真实书本案例介绍了实战中的一些细节。",{"_path":67,"title":66,"description":2578},"上一篇讲 anysort 的文章说到因网易云音乐的歌单排序功能较弱，我们自己实现的用来给歌单自定义排序的排序库的思路。这篇文章在排序库的基础上，介绍了其 TypeScript 类型实现。",1718204531340]