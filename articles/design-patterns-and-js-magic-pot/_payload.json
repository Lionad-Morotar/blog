[{"data":1,"prerenderedAt":2607},["ShallowReactive",2],{"navigation":3,"/articles/design-patterns-and-js-magic-pot":416,"/articles/design-patterns-and-js-magic-pot-surround":2602},[4,32,86,108,135,141,147,153,399,405,411],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":42,"_path":43},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":45,"_path":46},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":48,"_path":49},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":51,"_path":52},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":54,"_path":55},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":57,"_path":58},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":60,"_path":61},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":63,"_path":64},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":66,"_path":67},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":69,"_path":70},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":72,"_path":73},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":75,"_path":76},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":78,"_path":79},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":81,"_path":82},"🚝 四十二篇系列","/articles/fourty-two",{"title":84,"_path":85},"📝 技术博客归档","/articles/fold",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102,105],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107},"🖨️ any-to-base64","/tools/any-to-base64",{"title":109,"_path":110,"children":111},"吉他剧场 / Music","/music",[112,114,117,120,123,126,129,132],{"title":113,"_path":110},"🎸 FingerStyle！",{"title":115,"_path":116},"🌬️ 等待的风","/music/wind",{"title":118,"_path":119},"💕 约定的海洋","/music/ocean",{"title":121,"_path":122},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":124,"_path":125},"🌏 残酷天使的行动纲领","/music/eva",{"title":127,"_path":128},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":130,"_path":131},"🍷 Wu Wei","/music/wu-wei",{"title":133,"_path":134},"🌅 无题","/music/untitled",{"title":136,"_path":137,"children":138},"画点什么 / Paint","/paint",[139],{"title":140,"_path":137},"🚧 正在施工",{"title":142,"_path":143,"children":144},"读书笔记 / Notes","/books",[145],{"title":146,"_path":143},"📕 读书笔记",{"title":148,"_path":149,"children":150},"知识地图 / Maps","/maps",[151],{"title":152,"_path":149},"🏁 知识地图",{"title":154,"_path":155,"children":156},"零散的笔记 / Gists","/gists",[157,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390,393,396],{"title":158,"_path":155},"🧊 Gists",{"title":160,"_path":161},"网站的可访问性","/gists/accessibility",{"title":163,"_path":164},"Bit","/gists/bit",{"title":166,"_path":167},"图片模糊","/gists/blur",{"title":169,"_path":170},"渲染相关笔记","/gists/c4d",{"title":172,"_path":173},"CDN 问题记录","/gists/cdn",{"title":175,"_path":176},"消毒剂","/gists/cleaner",{"title":178,"_path":179},"Windows Command","/gists/cmd",{"title":181,"_path":182},"Command","/gists/command",{"title":184,"_path":185},"复杂科学","/gists/complexity-science",{"title":187,"_path":188},"GitHub Copilot","/gists/copilot",{"title":190,"_path":191},"宇宙","/gists/cosmos",{"title":193,"_path":194},"C++","/gists/cpp",{"title":196,"_path":197},"Data Structure","/gists/data-structure",{"title":199,"_path":200},"DEPRESSION","/gists/depression",{"title":202,"_path":203},"设计模式","/gists/design-patterns",{"title":205,"_path":206},"Developer Experience","/gists/developer-experience",{"title":208,"_path":209},"Device Metrics","/gists/device-metrix",{"title":211,"_path":212},"数字化转型","/gists/digital-transformation",{"title":214,"_path":215},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":217,"_path":218},"正则表达式","/gists/eegex",{"title":220,"_path":221},"Emoji","/gists/emoji",{"title":223,"_path":224},"工程","/gists/engineering",{"title":226,"_path":227},"熵","/gists/entropy",{"title":229,"_path":230},"Environment","/gists/environment",{"title":232,"_path":233},"Erlang","/gists/erlang",{"title":235,"_path":236},"逃离塔克夫","/gists/escape-from-tarkov",{"title":238,"_path":239},"ESNext (ES6-ES11)","/gists/esnext",{"title":241,"_path":242},"Eval！","/gists/eval",{"title":244,"_path":245},"Flutter","/gists/flutter",{"title":247,"_path":248},"字体","/gists/font",{"title":250,"_path":251},"JS 函数式编程","/gists/functional",{"title":253,"_path":254},"游戏化","/gists/gamification",{"title":256,"_path":257},"Google C++ Standard","/gists/google-cpp-standard",{"title":259,"_path":260},"双向链接完全体","/gists/graph",{"title":262,"_path":263},"Hardwares","/gists/hardwares",{"title":265,"_path":266},"哈希冲突","/gists/hash-collision",{"title":268,"_path":269},"信息设计","/gists/information-design",{"title":271,"_path":272},"InstantPage","/gists/instant.page",{"title":274,"_path":275},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":277,"_path":278},"KVStore","/gists/key-value-db",{"title":280,"_path":281},"Kubernetes","/gists/kubernetes",{"title":283,"_path":284},"Makefile","/gists/makefile",{"title":286,"_path":287},"Markdown Inline Style","/gists/markdown-nice",{"title":289,"_path":290},"小程序","/gists/miniapp",{"title":292,"_path":293},"减小页面快照体积","/gists/minify-html",{"title":295,"_path":296},"mklink","/gists/mklink",{"title":298,"_path":299},"Mock","/gists/mock",{"title":301,"_path":302},"多人协作系统","/gists/multiplayer",{"title":304,"_path":305},"多端应用","/gists/multy-end-app",{"title":307,"_path":308},"神经科学","/gists/neuroscience",{"title":310,"_path":311},"OO","/gists/oo",{"title":313,"_path":314},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":316,"_path":317},"PInvoke","/gists/pinvoke",{"title":319,"_path":320},"像素","/gists/pixel",{"title":322,"_path":323},"PowerShell","/gists/powershell",{"title":325,"_path":326},"量子","/gists/quantum",{"title":328,"_path":329},"保持好奇心","/gists/questions",{"title":331,"_path":332},"React Native","/gists/react-native",{"title":334,"_path":335},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":337,"_path":338},"SEO","/gists/seo",{"title":340,"_path":341},"Shader","/gists/shader",{"title":343,"_path":344},"Shape Up","/gists/shape-up",{"title":346,"_path":347},"睡觉","/gists/sleep",{"title":349,"_path":350},"记录奇怪的问题","/gists/solved",{"title":352,"_path":353},"States","/gists/states",{"title":355,"_path":356},"Storage","/gists/storage",{"title":358,"_path":359},"音视频流处理","/gists/stream-cli",{"title":361,"_path":362},"Symbol","/gists/symbol",{"title":364,"_path":365},"系统论","/gists/systems-theory",{"title":367,"_path":368},"Taro","/gists/taro",{"title":370,"_path":371},"任务切片","/gists/task-slice",{"title":373,"_path":374},"技术偏好","/gists/tech-dudge",{"title":376,"_path":377},"Untitled","/gists/untitled",{"title":379,"_path":380},"可变字体","/gists/variable-font",{"title":382,"_path":383},"视觉错觉","/gists/visual-illusion",{"title":385,"_path":386},"SS(SSR)","/gists/vpn",{"title":388,"_path":389},"VS Code 插件开发","/gists/vscode-plugin",{"title":391,"_path":392},"Web Components","/gists/web-components",{"title":394,"_path":395},"Windows","/gists/windows",{"title":397,"_path":398},"查缺补漏","/gists/wrong",{"title":400,"_path":401,"children":402},"代码笔记 / Gists","/source-code",[403],{"title":404,"_path":401},"🚄 代码笔记",{"title":406,"_path":407,"children":408},"我 / Abount","/hire",[409],{"title":410,"_path":407},"📬 技术简历",{"title":412,"_path":413,"children":414},"todo","/todo",[415],{"title":412,"_path":413},{"_path":67,"_dir":417,"_draft":418,"_partial":418,"_locale":419,"title":66,"description":420,"body":421,"_type":2596,"_id":2597,"_source":2598,"_file":2599,"_stem":2600,"_extension":2601},"articles",false,"","排除人的因素，设计模式的本质只是相关代码复用。本文通过使用JS仿制并简化了几种OOL中经典设计模式，以探讨经典设计模式和代码模板的区别主要在于代码复用的层次不同，以及粗浅聊了聊设计模式与语言特征之间此强彼弱的关系。",{"type":422,"children":423,"toc":2586},"root",[424,436,442,463,468,477,489,494,499,504,513,538,543,597,602,629,639,644,649,654,659,664,672,677,682,694,699,704,727,735,740,992,1010,1259,1264,1269,1274,1370,1385,1663,1668,1686,1700,1715,1746,1751,1756,2158,2163,2168,2173,2183,2188,2203,2208,2242,2247,2252,2257,2267,2272,2285,2334,2339,2347,2352,2357,2362,2367,2377,2382,2387,2392,2425,2430,2453,2580],{"type":425,"tag":426,"props":427,"children":428},"element","blockquote",{},[429],{"type":425,"tag":430,"props":431,"children":432},"p",{},[433],{"type":434,"value":435},"text","设计模式最终要融入任何语言。",{"type":425,"tag":437,"props":438,"children":440},"h2",{"id":439},"设计模式是什么",[441],{"type":434,"value":439},{"type":425,"tag":430,"props":443,"children":444},{},[445,447,461],{"type":434,"value":446},"从《人月神话》到《大教堂与集市》，许多闻名业界的作品都“低代码、高文化",{"type":425,"tag":448,"props":449,"children":450},"sup",{},[451],{"type":425,"tag":452,"props":453,"children":458},"a",{"href":454,"ariaDescribedBy":455,"dataFootnoteRef":419,"id":457},"#user-content-fn-%E6%96%87%E5%8C%96",[456],"footnote-label","user-content-fnref-%E6%96%87%E5%8C%96",[459],{"type":434,"value":460},"1",{"type":434,"value":462},"”；各种代码文化运动可以看作“造神运动”此类周日剧场。许多大佬在向人们传授代码经验之余，都喜欢尝试用文化手段（不论是哲学思想还是艺术内涵），来统一人与代码的关系。这种跨界思考的过程通常比较晦涩，诸如“面向对象”、“设计模式”这些放到现在来说我们耳熟能详的词，在过去几十年都是由行业顶尖大佬们牵头搞研究，再经过不断地实践，逐渐沉淀下来形成的标准。",{"type":425,"tag":430,"props":464,"children":465},{},[466],{"type":434,"value":467},"设计模式是什么？",{"type":425,"tag":430,"props":469,"children":470},{},[471],{"type":425,"tag":472,"props":473,"children":474},"strong",{},[475],{"type":434,"value":476},"设计模式是一种标准，它描述了使用面向对象编程语言解决问题的方式。",{"type":425,"tag":430,"props":478,"children":479},{},[480,482,487],{"type":434,"value":481},"设计模式一词发源于建筑学作品《建筑模式语言》，后被一个人们称为“四人帮”（GoF）的小组种出它在软件界开的新花。无论是建筑学还是软件学中的设计模式，相同的地方是，它们都想解决“人”和“物”的关系相关问题，并且形成了一套特定的方法论。",{"type":425,"tag":472,"props":483,"children":484},{},[485],{"type":434,"value":486},"好比人们有了灶就可以长久保存火种，用名词把晦涩难懂的抽象定义为标准，这样有利于思想传播",{"type":434,"value":488},"。只要人们普遍接纳并熟知设计模式，便能畅通无阻地沟通代码的实现。当然，现实很丰满，畅快沟通有个大前提：程序设计时，大家需要使用面向对象编程语言来合作。",{"type":425,"tag":437,"props":490,"children":492},{"id":491},"为什么非面向对象不可",[493],{"type":434,"value":491},{"type":425,"tag":430,"props":495,"children":496},{},[497],{"type":434,"value":498},"构建大型软件不止面向对象这一条路，与面向对象相对应的还有结构化、形式化等程序设计方法。任意一种有自有优劣。面对日益复杂的软件，人们关心的重心逐步转移到软件的可重用性方面。面向对象凭借着分类、封装等天然符合人们认知规律的优势，得到快速发展，终打通需求分析、程序设计到编程语言等开发上下游工作，赢得了业界青睐。",{"type":425,"tag":430,"props":500,"children":501},{},[502],{"type":434,"value":503},"面向对象把功能作为节点，组合为功能网格，节点间通过消息通讯以及做对应的响应。这样一来，开发在编程时不再需要直面输入输出这种数据流动的思考方式，只需要按照指令维护各个对象内部的状态即可，节点对应的代码片段也就能得到重用。",{"type":425,"tag":430,"props":505,"children":506},{},[507],{"type":425,"tag":508,"props":509,"children":512},"img",{"alt":510,"src":511},"Message Passing In OO","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210511174933.png?w=40",[],{"type":425,"tag":430,"props":514,"children":515},{},[516,518,529,531,536],{"type":434,"value":517},"相比子程序复用，函数复用已经是巨大的进步",{"type":425,"tag":448,"props":519,"children":520},{},[521],{"type":425,"tag":452,"props":522,"children":526},{"href":523,"ariaDescribedBy":524,"dataFootnoteRef":419,"id":525},"#user-content-fn-fn-call",[456],"user-content-fnref-fn-call",[527],{"type":434,"value":528},"2",{"type":434,"value":530},"。类复用相比函数复用要更加抽象，因为它保存了函数和状态的集合；而设计模式比类复用在抽象上更胜一筹：设计模式不单单直接复用某个类，而是复用整个“功能网格”，把特定问题的解决方案相关的所有节点和通讯机制全部拷贝，固化下来，命名并形成标准。",{"type":425,"tag":472,"props":532,"children":533},{},[534],{"type":434,"value":535},"设计模式其实是使用面向对象编程语言时代码复用的高级形式，是面向对象发展壮大之路的必然的产物",{"type":434,"value":537},"。只要写代码，就会碰到复用性问题，四人帮偏好面向对象，所以“设计模式”只是他们用来传授的面向对象编程中的代码复用性经验的概括。换句话说，大部分情况下我们讨论的“设计模式”和“面向对象设计模式”完全等同。这也就解释了为什么非面向对象不可了。",{"type":425,"tag":430,"props":539,"children":540},{},[541],{"type":434,"value":542},"我们讨论一个新的问题，如果过滤掉设计模式中的面向对象成分，剩下的是些啥呢？",{"type":425,"tag":544,"props":545,"children":549},"pre",{"className":546,"code":547,"language":548,"meta":419,"style":419},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","console.log(DesignPatterns.filter(removeOO))\n","js",[550],{"type":425,"tag":551,"props":552,"children":553},"code",{"__ignoreMap":419},[554],{"type":425,"tag":555,"props":556,"children":559},"span",{"class":557,"line":558},"line",1,[560,566,572,578,583,587,592],{"type":425,"tag":555,"props":561,"children":563},{"style":562},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[564],{"type":434,"value":565},"console",{"type":425,"tag":555,"props":567,"children":569},{"style":568},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[570],{"type":434,"value":571},".",{"type":425,"tag":555,"props":573,"children":575},{"style":574},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[576],{"type":434,"value":577},"log",{"type":425,"tag":555,"props":579,"children":580},{"style":562},[581],{"type":434,"value":582},"(DesignPatterns",{"type":425,"tag":555,"props":584,"children":585},{"style":568},[586],{"type":434,"value":571},{"type":425,"tag":555,"props":588,"children":589},{"style":574},[590],{"type":434,"value":591},"filter",{"type":425,"tag":555,"props":593,"children":594},{"style":562},[595],{"type":434,"value":596},"(removeOO))\n",{"type":425,"tag":437,"props":598,"children":600},{"id":599},"设计模式的本质",[601],{"type":434,"value":599},{"type":425,"tag":430,"props":603,"children":604},{},[605,607,613,615,620,622,627],{"type":434,"value":606},"我们先直接删除上文关于设计模式的定义中的“面向对象”几个字，看看剩下些什么：设计模式是一种标准，它描述了",{"type":425,"tag":608,"props":609,"children":610},"del",{},[611],{"type":434,"value":612},"使用面向对象编程语言",{"type":434,"value":614},"解决问题的方式，是",{"type":425,"tag":608,"props":616,"children":617},{},[618],{"type":434,"value":619},"使用面向对象编程语言时",{"type":434,"value":621},"代码复用性的高级形式，是",{"type":425,"tag":608,"props":623,"children":624},{},[625],{"type":434,"value":626},"面向对象",{"type":434,"value":628},"发展壮大之路的必然的产物。",{"type":425,"tag":430,"props":630,"children":631},{},[632,634],{"type":434,"value":633},"句子有些不通顺，修补之后变成了：",{"type":425,"tag":472,"props":635,"children":636},{},[637],{"type":434,"value":638},"设计模式是一种标准，它描述了编程时解决问题的特定方式，是代码复用的高级形式及发展代码复用必然的产物。",{"type":425,"tag":430,"props":640,"children":641},{},[642],{"type":434,"value":643},"设计模式本质是什么？不言自明，它只是相关代码复用的一种抽象概念。",{"type":425,"tag":430,"props":645,"children":646},{},[647],{"type":434,"value":648},"说到代码复用，主要关系到代码组织。从函数复用，到使用设计模式，再到使用库、框架，三种代码复用方式的主要区别在于代码组织的粒度不同。",{"type":425,"tag":430,"props":650,"children":651},{},[652],{"type":434,"value":653},"函数复用比较简单，你可以写一个叫做 Add 的函数给两数相加，然后 Copy&Paste 到其他地方复用，或是把函数存放到 Utils.js 文件中，通过模块机制复用。为了了解如何使用某个函数，需要在使用前阅读注释。",{"type":425,"tag":430,"props":655,"children":656},{},[657],{"type":434,"value":658},"库和框架最为复杂，它们是组织了大量函数及实体形成的巨型代码片段。开发新项目时很少会花精力自研框架，一般都引现成的轮子直接开造。使用某库或框架前，必须详细阅读文档。",{"type":425,"tag":430,"props":660,"children":661},{},[662],{"type":434,"value":663},"设计模式则是单个或多个函数的组合（在 Java 中不是函数而是类），既可以在新项目里现写一个模式供使用，也可以引入社区现有的模块来复用。为了了解如何使用某个设计模式，需要提前了解该模式定义的实体以及实体是通讯机制。",{"type":425,"tag":430,"props":665,"children":666},{},[667],{"type":425,"tag":508,"props":668,"children":671},{"alt":669,"src":670},"函数、设计模式、框架间的升级关系","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20210513145630.png?w=70",[],{"type":425,"tag":430,"props":673,"children":674},{},[675],{"type":434,"value":676},"设计模式作为最简单的实体和函数的组合，可看作函数的升级版或是框架的缩水版；去掉设计模式中的面向对象相关内容，就只剩下了函数。",{"type":425,"tag":430,"props":678,"children":679},{},[680],{"type":434,"value":681},"等等，“实体和实体间通讯机制”凭空消失了？",{"type":425,"tag":430,"props":683,"children":684},{},[685,687,692],{"type":434,"value":686},"并没有。但我想让他消失。下文将从 JavaScript 入手，介绍如何把设计模式的概念映射到语言特征中。语言特征可是个好东西呀！如果你同意抽象也像复用一样有函数复用、库和框架等不同复杂度的层次的话，那我认为",{"type":425,"tag":472,"props":688,"children":689},{},[690],{"type":434,"value":691},"语言特征就是抽象的基础了。除了语言本身以外，所有抽象的建立都依赖于语言特征",{"type":434,"value":693},"。把设计模式映射成语言特征后，我们就能跳出面向对象的禁锢，从新的、更高层的角度重新思考代码复用问题。",{"type":425,"tag":430,"props":695,"children":696},{},[697],{"type":434,"value":698},"回到正题，我们从 JS 开始说起。",{"type":425,"tag":437,"props":700,"children":702},{"id":701},"仿制设计模式",[703],{"type":434,"value":701},{"type":425,"tag":430,"props":705,"children":706},{},[707,709,714,725],{"type":434,"value":708},"编程语言并不是万能的。",{"type":425,"tag":472,"props":710,"children":711},{},[712],{"type":434,"value":713},"特定语言适合用来解决特定问题",{"type":425,"tag":448,"props":715,"children":716},{},[717],{"type":425,"tag":452,"props":718,"children":722},{"href":719,"ariaDescribedBy":720,"dataFootnoteRef":419,"id":721},"#user-content-fn-css",[456],"user-content-fnref-css",[723],{"type":434,"value":724},"3",{"type":434,"value":726},"。提到 JavaScript 诸多语言特征，其优点可以用寥寥三个词概括：“原型”、“对象”、“函数”。熟练掌握了这些内容，就能在 JS 的世界中游刃有余。",{"type":425,"tag":430,"props":728,"children":729},{},[730],{"type":425,"tag":508,"props":731,"children":734},{"alt":732,"src":733},"《JavaScript 精粹》VS《JavaScript 权威指南》","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200709104930.png",[],{"type":425,"tag":430,"props":736,"children":737},{},[738],{"type":434,"value":739},"传统面向对象语言以类封装状态，并向外暴露改变状态的方法。以下代码中的书本类为例：Book Class 保持有 name 状态，可以使用 getPrintName 方法返回包装后的 name 或使用 rename 修改 name 。",{"type":425,"tag":544,"props":741,"children":743},{"className":546,"code":742,"language":548,"meta":419,"style":419},"class Book {\n  constructor () {\n    this.name = '设计模式与JS魔法锅'\n  }\n  getPrintName () {\n    return '《' + this.name + '》'\n  }\n  rename (newName) {\n    this.name = newName\n  }\n}\n",[744],{"type":425,"tag":551,"props":745,"children":746},{"__ignoreMap":419},[747,767,785,827,836,854,913,921,950,975,983],{"type":425,"tag":555,"props":748,"children":749},{"class":557,"line":558},[750,756,762],{"type":425,"tag":555,"props":751,"children":753},{"style":752},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[754],{"type":434,"value":755},"class",{"type":425,"tag":555,"props":757,"children":759},{"style":758},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[760],{"type":434,"value":761}," Book",{"type":425,"tag":555,"props":763,"children":764},{"style":568},[765],{"type":434,"value":766}," {\n",{"type":425,"tag":555,"props":768,"children":770},{"class":557,"line":769},2,[771,776,781],{"type":425,"tag":555,"props":772,"children":773},{"style":752},[774],{"type":434,"value":775},"  constructor",{"type":425,"tag":555,"props":777,"children":778},{"style":568},[779],{"type":434,"value":780}," ()",{"type":425,"tag":555,"props":782,"children":783},{"style":568},[784],{"type":434,"value":766},{"type":425,"tag":555,"props":786,"children":788},{"class":557,"line":787},3,[789,795,799,804,810,816,822],{"type":425,"tag":555,"props":790,"children":792},{"style":791},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[793],{"type":434,"value":794},"    this",{"type":425,"tag":555,"props":796,"children":797},{"style":568},[798],{"type":434,"value":571},{"type":425,"tag":555,"props":800,"children":801},{"style":562},[802],{"type":434,"value":803},"name",{"type":425,"tag":555,"props":805,"children":807},{"style":806},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[808],{"type":434,"value":809}," =",{"type":425,"tag":555,"props":811,"children":813},{"style":812},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[814],{"type":434,"value":815}," '",{"type":425,"tag":555,"props":817,"children":819},{"style":818},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[820],{"type":434,"value":821},"设计模式与JS魔法锅",{"type":425,"tag":555,"props":823,"children":824},{"style":812},[825],{"type":434,"value":826},"'\n",{"type":425,"tag":555,"props":828,"children":830},{"class":557,"line":829},4,[831],{"type":425,"tag":555,"props":832,"children":833},{"style":568},[834],{"type":434,"value":835},"  }\n",{"type":425,"tag":555,"props":837,"children":839},{"class":557,"line":838},5,[840,846,850],{"type":425,"tag":555,"props":841,"children":843},{"style":842},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[844],{"type":434,"value":845},"  getPrintName",{"type":425,"tag":555,"props":847,"children":848},{"style":568},[849],{"type":434,"value":780},{"type":425,"tag":555,"props":851,"children":852},{"style":568},[853],{"type":434,"value":766},{"type":425,"tag":555,"props":855,"children":857},{"class":557,"line":856},6,[858,864,868,873,878,883,888,892,896,900,904,909],{"type":425,"tag":555,"props":859,"children":861},{"style":860},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[862],{"type":434,"value":863},"    return",{"type":425,"tag":555,"props":865,"children":866},{"style":812},[867],{"type":434,"value":815},{"type":425,"tag":555,"props":869,"children":870},{"style":818},[871],{"type":434,"value":872},"《",{"type":425,"tag":555,"props":874,"children":875},{"style":812},[876],{"type":434,"value":877},"'",{"type":425,"tag":555,"props":879,"children":880},{"style":806},[881],{"type":434,"value":882}," +",{"type":425,"tag":555,"props":884,"children":885},{"style":791},[886],{"type":434,"value":887}," this",{"type":425,"tag":555,"props":889,"children":890},{"style":568},[891],{"type":434,"value":571},{"type":425,"tag":555,"props":893,"children":894},{"style":562},[895],{"type":434,"value":803},{"type":425,"tag":555,"props":897,"children":898},{"style":806},[899],{"type":434,"value":882},{"type":425,"tag":555,"props":901,"children":902},{"style":812},[903],{"type":434,"value":815},{"type":425,"tag":555,"props":905,"children":906},{"style":818},[907],{"type":434,"value":908},"》",{"type":425,"tag":555,"props":910,"children":911},{"style":812},[912],{"type":434,"value":826},{"type":425,"tag":555,"props":914,"children":916},{"class":557,"line":915},7,[917],{"type":425,"tag":555,"props":918,"children":919},{"style":568},[920],{"type":434,"value":835},{"type":425,"tag":555,"props":922,"children":924},{"class":557,"line":923},8,[925,930,935,941,946],{"type":425,"tag":555,"props":926,"children":927},{"style":842},[928],{"type":434,"value":929},"  rename",{"type":425,"tag":555,"props":931,"children":932},{"style":568},[933],{"type":434,"value":934}," (",{"type":425,"tag":555,"props":936,"children":938},{"style":937},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[939],{"type":434,"value":940},"newName",{"type":425,"tag":555,"props":942,"children":943},{"style":568},[944],{"type":434,"value":945},")",{"type":425,"tag":555,"props":947,"children":948},{"style":568},[949],{"type":434,"value":766},{"type":425,"tag":555,"props":951,"children":953},{"class":557,"line":952},9,[954,958,962,966,970],{"type":425,"tag":555,"props":955,"children":956},{"style":791},[957],{"type":434,"value":794},{"type":425,"tag":555,"props":959,"children":960},{"style":568},[961],{"type":434,"value":571},{"type":425,"tag":555,"props":963,"children":964},{"style":562},[965],{"type":434,"value":803},{"type":425,"tag":555,"props":967,"children":968},{"style":806},[969],{"type":434,"value":809},{"type":425,"tag":555,"props":971,"children":972},{"style":562},[973],{"type":434,"value":974}," newName\n",{"type":425,"tag":555,"props":976,"children":978},{"class":557,"line":977},10,[979],{"type":425,"tag":555,"props":980,"children":981},{"style":568},[982],{"type":434,"value":835},{"type":425,"tag":555,"props":984,"children":986},{"class":557,"line":985},11,[987],{"type":425,"tag":555,"props":988,"children":989},{"style":568},[990],{"type":434,"value":991},"}\n",{"type":425,"tag":430,"props":993,"children":994},{},[995,997,1008],{"type":434,"value":996},"放到早期版本 JS 中，想要封装变量，这不好办。早期版本的 JS 没有块级作用域，所以声明的变量会在整个代码或函数作用域中生效。为了仿制类的状态封装能力，知名布道者道格拉斯发明了一种“模块模式”",{"type":425,"tag":448,"props":998,"children":999},{},[1000],{"type":425,"tag":452,"props":1001,"children":1005},{"href":1002,"ariaDescribedBy":1003,"dataFootnoteRef":419,"id":1004},"#user-content-fn-module-pattern",[456],"user-content-fnref-module-pattern",[1006],{"type":434,"value":1007},"4",{"type":434,"value":1009},"，即通过闭包来控制变量的访问权，代码如下：",{"type":425,"tag":544,"props":1011,"children":1013},{"className":546,"code":1012,"language":548,"meta":419,"style":419},"const aBook = (() => {\n  var name = '设计模式与JS魔法锅'\n  function getPrintName () {\n    return '《' + name + '》'\n  }\n  function rename (newName) {\n    name = newName\n  }\n  return {\n    getPrintName,\n    rename\n  }\n})()\n",[1014],{"type":425,"tag":551,"props":1015,"children":1016},{"__ignoreMap":419},[1017,1053,1082,1103,1146,1153,1181,1197,1204,1216,1229,1237,1245],{"type":425,"tag":555,"props":1018,"children":1019},{"class":557,"line":558},[1020,1025,1031,1035,1039,1044,1049],{"type":425,"tag":555,"props":1021,"children":1022},{"style":752},[1023],{"type":434,"value":1024},"const",{"type":425,"tag":555,"props":1026,"children":1028},{"style":1027},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1029],{"type":434,"value":1030}," aBook",{"type":425,"tag":555,"props":1032,"children":1033},{"style":806},[1034],{"type":434,"value":809},{"type":425,"tag":555,"props":1036,"children":1037},{"style":562},[1038],{"type":434,"value":934},{"type":425,"tag":555,"props":1040,"children":1041},{"style":568},[1042],{"type":434,"value":1043},"()",{"type":425,"tag":555,"props":1045,"children":1046},{"style":752},[1047],{"type":434,"value":1048}," =>",{"type":425,"tag":555,"props":1050,"children":1051},{"style":568},[1052],{"type":434,"value":766},{"type":425,"tag":555,"props":1054,"children":1055},{"class":557,"line":769},[1056,1061,1066,1070,1074,1078],{"type":425,"tag":555,"props":1057,"children":1058},{"style":752},[1059],{"type":434,"value":1060},"  var",{"type":425,"tag":555,"props":1062,"children":1063},{"style":562},[1064],{"type":434,"value":1065}," name",{"type":425,"tag":555,"props":1067,"children":1068},{"style":806},[1069],{"type":434,"value":809},{"type":425,"tag":555,"props":1071,"children":1072},{"style":812},[1073],{"type":434,"value":815},{"type":425,"tag":555,"props":1075,"children":1076},{"style":818},[1077],{"type":434,"value":821},{"type":425,"tag":555,"props":1079,"children":1080},{"style":812},[1081],{"type":434,"value":826},{"type":425,"tag":555,"props":1083,"children":1084},{"class":557,"line":787},[1085,1090,1095,1099],{"type":425,"tag":555,"props":1086,"children":1087},{"style":752},[1088],{"type":434,"value":1089},"  function",{"type":425,"tag":555,"props":1091,"children":1092},{"style":574},[1093],{"type":434,"value":1094}," getPrintName",{"type":425,"tag":555,"props":1096,"children":1097},{"style":568},[1098],{"type":434,"value":780},{"type":425,"tag":555,"props":1100,"children":1101},{"style":568},[1102],{"type":434,"value":766},{"type":425,"tag":555,"props":1104,"children":1105},{"class":557,"line":829},[1106,1110,1114,1118,1122,1126,1130,1134,1138,1142],{"type":425,"tag":555,"props":1107,"children":1108},{"style":860},[1109],{"type":434,"value":863},{"type":425,"tag":555,"props":1111,"children":1112},{"style":812},[1113],{"type":434,"value":815},{"type":425,"tag":555,"props":1115,"children":1116},{"style":818},[1117],{"type":434,"value":872},{"type":425,"tag":555,"props":1119,"children":1120},{"style":812},[1121],{"type":434,"value":877},{"type":425,"tag":555,"props":1123,"children":1124},{"style":806},[1125],{"type":434,"value":882},{"type":425,"tag":555,"props":1127,"children":1128},{"style":562},[1129],{"type":434,"value":1065},{"type":425,"tag":555,"props":1131,"children":1132},{"style":806},[1133],{"type":434,"value":882},{"type":425,"tag":555,"props":1135,"children":1136},{"style":812},[1137],{"type":434,"value":815},{"type":425,"tag":555,"props":1139,"children":1140},{"style":818},[1141],{"type":434,"value":908},{"type":425,"tag":555,"props":1143,"children":1144},{"style":812},[1145],{"type":434,"value":826},{"type":425,"tag":555,"props":1147,"children":1148},{"class":557,"line":838},[1149],{"type":425,"tag":555,"props":1150,"children":1151},{"style":568},[1152],{"type":434,"value":835},{"type":425,"tag":555,"props":1154,"children":1155},{"class":557,"line":856},[1156,1160,1165,1169,1173,1177],{"type":425,"tag":555,"props":1157,"children":1158},{"style":752},[1159],{"type":434,"value":1089},{"type":425,"tag":555,"props":1161,"children":1162},{"style":574},[1163],{"type":434,"value":1164}," rename",{"type":425,"tag":555,"props":1166,"children":1167},{"style":568},[1168],{"type":434,"value":934},{"type":425,"tag":555,"props":1170,"children":1171},{"style":937},[1172],{"type":434,"value":940},{"type":425,"tag":555,"props":1174,"children":1175},{"style":568},[1176],{"type":434,"value":945},{"type":425,"tag":555,"props":1178,"children":1179},{"style":568},[1180],{"type":434,"value":766},{"type":425,"tag":555,"props":1182,"children":1183},{"class":557,"line":915},[1184,1189,1193],{"type":425,"tag":555,"props":1185,"children":1186},{"style":562},[1187],{"type":434,"value":1188},"    name",{"type":425,"tag":555,"props":1190,"children":1191},{"style":806},[1192],{"type":434,"value":809},{"type":425,"tag":555,"props":1194,"children":1195},{"style":562},[1196],{"type":434,"value":974},{"type":425,"tag":555,"props":1198,"children":1199},{"class":557,"line":923},[1200],{"type":425,"tag":555,"props":1201,"children":1202},{"style":568},[1203],{"type":434,"value":835},{"type":425,"tag":555,"props":1205,"children":1206},{"class":557,"line":952},[1207,1212],{"type":425,"tag":555,"props":1208,"children":1209},{"style":860},[1210],{"type":434,"value":1211},"  return",{"type":425,"tag":555,"props":1213,"children":1214},{"style":568},[1215],{"type":434,"value":766},{"type":425,"tag":555,"props":1217,"children":1218},{"class":557,"line":977},[1219,1224],{"type":425,"tag":555,"props":1220,"children":1221},{"style":562},[1222],{"type":434,"value":1223},"    getPrintName",{"type":425,"tag":555,"props":1225,"children":1226},{"style":568},[1227],{"type":434,"value":1228},",\n",{"type":425,"tag":555,"props":1230,"children":1231},{"class":557,"line":985},[1232],{"type":425,"tag":555,"props":1233,"children":1234},{"style":562},[1235],{"type":434,"value":1236},"    rename\n",{"type":425,"tag":555,"props":1238,"children":1240},{"class":557,"line":1239},12,[1241],{"type":425,"tag":555,"props":1242,"children":1243},{"style":568},[1244],{"type":434,"value":835},{"type":425,"tag":555,"props":1246,"children":1248},{"class":557,"line":1247},13,[1249,1254],{"type":425,"tag":555,"props":1250,"children":1251},{"style":568},[1252],{"type":434,"value":1253},"}",{"type":425,"tag":555,"props":1255,"children":1256},{"style":562},[1257],{"type":434,"value":1258},")()\n",{"type":425,"tag":430,"props":1260,"children":1261},{},[1262],{"type":434,"value":1263},"看起来，模块模式就像是语言能力不足的补充。把目光从遥远的模块模式收回到 2015 年 ES6 发布之后，JavaScript 语言特征得到增强，曾风靡一时的潮词模块模式几乎从网络中销声匿迹了。现在我们可以自由地使用类封装状态，不必再写因缺乏语义显得蹩脚的 IIFE 。",{"type":425,"tag":430,"props":1265,"children":1266},{},[1267],{"type":434,"value":1268},"我们再来看看面向对象中的常见的装饰器模式。",{"type":425,"tag":430,"props":1270,"children":1271},{},[1272],{"type":434,"value":1273},"假设你在维护一个开源项目，项目中有些过时的 API，你想在别人调用该 API 时提示一句“你好，此 API 将在下个版本移除”。这段代码可以这样写：",{"type":425,"tag":544,"props":1275,"children":1277},{"className":546,"code":1276,"language":548,"meta":419,"style":419},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\nconst myAPI = {\n  @deprecate('WARN: oldAPI is decrapted, please use oldAPI_v2')\n  oldAPI() {}\n}\n",[1278],{"type":425,"tag":551,"props":1279,"children":1280},{"__ignoreMap":419},[1281,1290,1310,1346,1363],{"type":425,"tag":555,"props":1282,"children":1283},{"class":557,"line":558},[1284],{"type":425,"tag":555,"props":1285,"children":1287},{"style":1286},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1288],{"type":434,"value":1289},"// 目前不支持给对象属性使用装饰器，所以这是一段伪代码\n",{"type":425,"tag":555,"props":1291,"children":1292},{"class":557,"line":769},[1293,1297,1302,1306],{"type":425,"tag":555,"props":1294,"children":1295},{"style":752},[1296],{"type":434,"value":1024},{"type":425,"tag":555,"props":1298,"children":1299},{"style":1027},[1300],{"type":434,"value":1301}," myAPI",{"type":425,"tag":555,"props":1303,"children":1304},{"style":806},[1305],{"type":434,"value":809},{"type":425,"tag":555,"props":1307,"children":1308},{"style":568},[1309],{"type":434,"value":766},{"type":425,"tag":555,"props":1311,"children":1312},{"class":557,"line":787},[1313,1318,1323,1328,1332,1337,1341],{"type":425,"tag":555,"props":1314,"children":1315},{"style":562},[1316],{"type":434,"value":1317},"  @",{"type":425,"tag":555,"props":1319,"children":1320},{"style":842},[1321],{"type":434,"value":1322},"deprecate",{"type":425,"tag":555,"props":1324,"children":1325},{"style":568},[1326],{"type":434,"value":1327},"(",{"type":425,"tag":555,"props":1329,"children":1330},{"style":812},[1331],{"type":434,"value":877},{"type":425,"tag":555,"props":1333,"children":1334},{"style":818},[1335],{"type":434,"value":1336},"WARN: oldAPI is decrapted, please use oldAPI_v2",{"type":425,"tag":555,"props":1338,"children":1339},{"style":812},[1340],{"type":434,"value":877},{"type":425,"tag":555,"props":1342,"children":1343},{"style":568},[1344],{"type":434,"value":1345},")\n",{"type":425,"tag":555,"props":1347,"children":1348},{"class":557,"line":829},[1349,1354,1358],{"type":425,"tag":555,"props":1350,"children":1351},{"style":842},[1352],{"type":434,"value":1353},"  oldAPI",{"type":425,"tag":555,"props":1355,"children":1356},{"style":568},[1357],{"type":434,"value":1043},{"type":425,"tag":555,"props":1359,"children":1360},{"style":568},[1361],{"type":434,"value":1362}," {}\n",{"type":425,"tag":555,"props":1364,"children":1365},{"class":557,"line":838},[1366],{"type":425,"tag":555,"props":1367,"children":1368},{"style":568},[1369],{"type":434,"value":991},{"type":425,"tag":430,"props":1371,"children":1372},{},[1373,1375,1383],{"type":434,"value":1374},"若不是",{"type":425,"tag":452,"props":1376,"children":1380},{"href":1377,"rel":1378},"https://github.com/tc39/proposal-decorators",[1379],"nofollow",[1381],{"type":434,"value":1382},"装饰器提案",{"type":434,"value":1384},"的出现，我赌五毛，社区里不会有太多讨论装饰器模式的文章。不过大家若有留意过平常的代码，肯定会注意到其实高阶函数就是装饰器的具体实现。函数在 JS 中是一等公民，通过函数组合可以极其方便地仿制某些设计模式。比如，下代码中，使用“局部应用”函数仿制了一个工厂模式：",{"type":425,"tag":544,"props":1386,"children":1388},{"className":546,"code":1387,"language":548,"meta":419,"style":419},"const Partial = (fn, ...args) => (...rest) => fn(...args, ...rest)\n\nconst Adder = (a, b) => a + b\n\nconst add5 = Partial(Adder, 5)\n\nadd5(5) // >>> 10\nadd5(10) // >>> 15\n",[1389],{"type":425,"tag":551,"props":1390,"children":1391},{"__ignoreMap":419},[1392,1493,1502,1558,1565,1604,1611,1638],{"type":425,"tag":555,"props":1393,"children":1394},{"class":557,"line":558},[1395,1399,1405,1409,1413,1418,1423,1428,1433,1437,1441,1445,1450,1455,1459,1463,1468,1472,1476,1480,1484,1488],{"type":425,"tag":555,"props":1396,"children":1397},{"style":752},[1398],{"type":434,"value":1024},{"type":425,"tag":555,"props":1400,"children":1402},{"style":1401},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1403],{"type":434,"value":1404}," Partial",{"type":425,"tag":555,"props":1406,"children":1407},{"style":806},[1408],{"type":434,"value":809},{"type":425,"tag":555,"props":1410,"children":1411},{"style":568},[1412],{"type":434,"value":934},{"type":425,"tag":555,"props":1414,"children":1415},{"style":937},[1416],{"type":434,"value":1417},"fn",{"type":425,"tag":555,"props":1419,"children":1420},{"style":568},[1421],{"type":434,"value":1422},",",{"type":425,"tag":555,"props":1424,"children":1425},{"style":806},[1426],{"type":434,"value":1427}," ...",{"type":425,"tag":555,"props":1429,"children":1430},{"style":937},[1431],{"type":434,"value":1432},"args",{"type":425,"tag":555,"props":1434,"children":1435},{"style":568},[1436],{"type":434,"value":945},{"type":425,"tag":555,"props":1438,"children":1439},{"style":752},[1440],{"type":434,"value":1048},{"type":425,"tag":555,"props":1442,"children":1443},{"style":568},[1444],{"type":434,"value":934},{"type":425,"tag":555,"props":1446,"children":1447},{"style":806},[1448],{"type":434,"value":1449},"...",{"type":425,"tag":555,"props":1451,"children":1452},{"style":937},[1453],{"type":434,"value":1454},"rest",{"type":425,"tag":555,"props":1456,"children":1457},{"style":568},[1458],{"type":434,"value":945},{"type":425,"tag":555,"props":1460,"children":1461},{"style":752},[1462],{"type":434,"value":1048},{"type":425,"tag":555,"props":1464,"children":1465},{"style":574},[1466],{"type":434,"value":1467}," fn",{"type":425,"tag":555,"props":1469,"children":1470},{"style":562},[1471],{"type":434,"value":1327},{"type":425,"tag":555,"props":1473,"children":1474},{"style":806},[1475],{"type":434,"value":1449},{"type":425,"tag":555,"props":1477,"children":1478},{"style":562},[1479],{"type":434,"value":1432},{"type":425,"tag":555,"props":1481,"children":1482},{"style":568},[1483],{"type":434,"value":1422},{"type":425,"tag":555,"props":1485,"children":1486},{"style":806},[1487],{"type":434,"value":1427},{"type":425,"tag":555,"props":1489,"children":1490},{"style":562},[1491],{"type":434,"value":1492},"rest)\n",{"type":425,"tag":555,"props":1494,"children":1495},{"class":557,"line":769},[1496],{"type":425,"tag":555,"props":1497,"children":1499},{"emptyLinePlaceholder":1498},true,[1500],{"type":434,"value":1501},"\n",{"type":425,"tag":555,"props":1503,"children":1504},{"class":557,"line":787},[1505,1509,1514,1518,1522,1526,1530,1535,1539,1543,1548,1553],{"type":425,"tag":555,"props":1506,"children":1507},{"style":752},[1508],{"type":434,"value":1024},{"type":425,"tag":555,"props":1510,"children":1511},{"style":1401},[1512],{"type":434,"value":1513}," Adder",{"type":425,"tag":555,"props":1515,"children":1516},{"style":806},[1517],{"type":434,"value":809},{"type":425,"tag":555,"props":1519,"children":1520},{"style":568},[1521],{"type":434,"value":934},{"type":425,"tag":555,"props":1523,"children":1524},{"style":937},[1525],{"type":434,"value":452},{"type":425,"tag":555,"props":1527,"children":1528},{"style":568},[1529],{"type":434,"value":1422},{"type":425,"tag":555,"props":1531,"children":1532},{"style":937},[1533],{"type":434,"value":1534}," b",{"type":425,"tag":555,"props":1536,"children":1537},{"style":568},[1538],{"type":434,"value":945},{"type":425,"tag":555,"props":1540,"children":1541},{"style":752},[1542],{"type":434,"value":1048},{"type":425,"tag":555,"props":1544,"children":1545},{"style":562},[1546],{"type":434,"value":1547}," a ",{"type":425,"tag":555,"props":1549,"children":1550},{"style":806},[1551],{"type":434,"value":1552},"+",{"type":425,"tag":555,"props":1554,"children":1555},{"style":562},[1556],{"type":434,"value":1557}," b\n",{"type":425,"tag":555,"props":1559,"children":1560},{"class":557,"line":829},[1561],{"type":425,"tag":555,"props":1562,"children":1563},{"emptyLinePlaceholder":1498},[1564],{"type":434,"value":1501},{"type":425,"tag":555,"props":1566,"children":1567},{"class":557,"line":838},[1568,1572,1577,1581,1585,1590,1594,1600],{"type":425,"tag":555,"props":1569,"children":1570},{"style":752},[1571],{"type":434,"value":1024},{"type":425,"tag":555,"props":1573,"children":1574},{"style":1027},[1575],{"type":434,"value":1576}," add5",{"type":425,"tag":555,"props":1578,"children":1579},{"style":806},[1580],{"type":434,"value":809},{"type":425,"tag":555,"props":1582,"children":1583},{"style":574},[1584],{"type":434,"value":1404},{"type":425,"tag":555,"props":1586,"children":1587},{"style":562},[1588],{"type":434,"value":1589},"(Adder",{"type":425,"tag":555,"props":1591,"children":1592},{"style":568},[1593],{"type":434,"value":1422},{"type":425,"tag":555,"props":1595,"children":1597},{"style":1596},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1598],{"type":434,"value":1599}," 5",{"type":425,"tag":555,"props":1601,"children":1602},{"style":562},[1603],{"type":434,"value":1345},{"type":425,"tag":555,"props":1605,"children":1606},{"class":557,"line":856},[1607],{"type":425,"tag":555,"props":1608,"children":1609},{"emptyLinePlaceholder":1498},[1610],{"type":434,"value":1501},{"type":425,"tag":555,"props":1612,"children":1613},{"class":557,"line":915},[1614,1619,1623,1628,1633],{"type":425,"tag":555,"props":1615,"children":1616},{"style":574},[1617],{"type":434,"value":1618},"add5",{"type":425,"tag":555,"props":1620,"children":1621},{"style":562},[1622],{"type":434,"value":1327},{"type":425,"tag":555,"props":1624,"children":1625},{"style":1596},[1626],{"type":434,"value":1627},"5",{"type":425,"tag":555,"props":1629,"children":1630},{"style":562},[1631],{"type":434,"value":1632},") ",{"type":425,"tag":555,"props":1634,"children":1635},{"style":1286},[1636],{"type":434,"value":1637},"// >>> 10\n",{"type":425,"tag":555,"props":1639,"children":1640},{"class":557,"line":923},[1641,1645,1649,1654,1658],{"type":425,"tag":555,"props":1642,"children":1643},{"style":574},[1644],{"type":434,"value":1618},{"type":425,"tag":555,"props":1646,"children":1647},{"style":562},[1648],{"type":434,"value":1327},{"type":425,"tag":555,"props":1650,"children":1651},{"style":1596},[1652],{"type":434,"value":1653},"10",{"type":425,"tag":555,"props":1655,"children":1656},{"style":562},[1657],{"type":434,"value":1632},{"type":425,"tag":555,"props":1659,"children":1660},{"style":1286},[1661],{"type":434,"value":1662},"// >>> 15\n",{"type":425,"tag":430,"props":1664,"children":1665},{},[1666],{"type":434,"value":1667},"我猜你想咆哮：“工厂模式根本就不是这样写的！”。哈哈，别那么固执，变通一些嘛。我们现在讨论的设计模式是去除了面向对象之后的余留物，几乎只保留了设计模式的本质，复用。换句话说，Partial 是“函数工厂”，是“生成器”，“产出”了仍能接受一个参数的函数。",{"type":425,"tag":1669,"props":1670,"children":1671},"details",{},[1672,1674,1680,1681],{"type":434,"value":1673},"\n    ",{"type":425,"tag":1675,"props":1676,"children":1677},"summary",{},[1678],{"type":434,"value":1679},"我用到了类吗？",{"type":434,"value":1673},{"type":425,"tag":430,"props":1682,"children":1683},{},[1684],{"type":434,"value":1685},"没有。",{"type":425,"tag":1669,"props":1687,"children":1688},{},[1689,1690,1695,1696],{"type":434,"value":1673},{"type":425,"tag":1675,"props":1691,"children":1692},{},[1693],{"type":434,"value":1694},"用到了原型吗？",{"type":434,"value":1673},{"type":425,"tag":430,"props":1697,"children":1698},{},[1699],{"type":434,"value":1685},{"type":425,"tag":1669,"props":1701,"children":1702},{},[1703,1704,1709,1710],{"type":434,"value":1673},{"type":425,"tag":1675,"props":1705,"children":1706},{},[1707],{"type":434,"value":1708},"那我在写什么？",{"type":434,"value":1673},{"type":425,"tag":430,"props":1711,"children":1712},{},[1713],{"type":434,"value":1714},"函数。",{"type":425,"tag":430,"props":1716,"children":1717},{},[1718,1720,1737,1739,1744],{"type":434,"value":1719},"函数，函数而已！",{"type":425,"tag":472,"props":1721,"children":1722},{},[1723,1725,1735],{"type":434,"value":1724},"“函数是一等公民",{"type":425,"tag":448,"props":1726,"children":1727},{},[1728],{"type":425,"tag":452,"props":1729,"children":1733},{"href":1730,"ariaDescribedBy":1731,"dataFootnoteRef":419,"id":1732},"#user-content-fn-firstclass",[456],"user-content-fnref-firstclass",[1734],{"type":434,"value":1627},{"type":434,"value":1736},"”",{"type":434,"value":1738},"，这句话得背熟了，因为诸如“闭包”、“回调”等概念都和函数有关，",{"type":425,"tag":608,"props":1740,"children":1741},{},[1742],{"type":434,"value":1743},"面试经常会问道",{"type":434,"value":1745},"你迟早会用上的。若谈论设计模式脱离不开语言特征的话，那扯上函数绝对不会有任何问题。",{"type":425,"tag":430,"props":1747,"children":1748},{},[1749],{"type":434,"value":1750},"亲函数而远类的写法可以帮助我们消化许多种类的设计模式，我们再来看最后一种，代理模式。",{"type":425,"tag":430,"props":1752,"children":1753},{},[1754],{"type":434,"value":1755},"ES6 原生支持代理模式。对，就是 Vue3 里的那个“Proxy”，直译为“代理器”。社区有很多讲 Vue3 原理分析的文章，肯定绕不开 Proxy，这里不再赘述了。以下展示一个使用 Proxy 拦截对象操作的小例子。",{"type":425,"tag":544,"props":1757,"children":1759},{"className":546,"code":1758,"language":548,"meta":419,"style":419},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\nconst proxy = new Proxy({}, {\n  set(target, key, value) {\n    invariant(key, 'set')\n    target[key] = value\n    return true\n  }\n})\n\nfunction invariant(key, action) {\n  if (key.startsWith('_')) {\n    throw new Error(`Invalid Key`)\n  }\n}\n\nproxy._prop = 'somevalue'\n// Error: Invalid Key\n",[1760],{"type":425,"tag":551,"props":1761,"children":1762},{"__ignoreMap":419},[1763,1771,1810,1853,1892,1924,1937,1944,1955,1962,2000,2052,2091,2098,2106,2114,2149],{"type":425,"tag":555,"props":1764,"children":1765},{"class":557,"line":558},[1766],{"type":425,"tag":555,"props":1767,"children":1768},{"style":1286},[1769],{"type":434,"value":1770},"/* 使用 Proxy 代理对象，禁用对象中下划线开头的属性的访问 */\n",{"type":425,"tag":555,"props":1772,"children":1773},{"class":557,"line":769},[1774,1778,1783,1787,1792,1797,1801,1806],{"type":425,"tag":555,"props":1775,"children":1776},{"style":752},[1777],{"type":434,"value":1024},{"type":425,"tag":555,"props":1779,"children":1780},{"style":1027},[1781],{"type":434,"value":1782}," proxy",{"type":425,"tag":555,"props":1784,"children":1785},{"style":806},[1786],{"type":434,"value":809},{"type":425,"tag":555,"props":1788,"children":1789},{"style":806},[1790],{"type":434,"value":1791}," new",{"type":425,"tag":555,"props":1793,"children":1794},{"style":574},[1795],{"type":434,"value":1796}," Proxy",{"type":425,"tag":555,"props":1798,"children":1799},{"style":562},[1800],{"type":434,"value":1327},{"type":425,"tag":555,"props":1802,"children":1803},{"style":568},[1804],{"type":434,"value":1805},"{},",{"type":425,"tag":555,"props":1807,"children":1808},{"style":568},[1809],{"type":434,"value":766},{"type":425,"tag":555,"props":1811,"children":1812},{"class":557,"line":787},[1813,1818,1822,1827,1831,1836,1840,1845,1849],{"type":425,"tag":555,"props":1814,"children":1815},{"style":842},[1816],{"type":434,"value":1817},"  set",{"type":425,"tag":555,"props":1819,"children":1820},{"style":568},[1821],{"type":434,"value":1327},{"type":425,"tag":555,"props":1823,"children":1824},{"style":937},[1825],{"type":434,"value":1826},"target",{"type":425,"tag":555,"props":1828,"children":1829},{"style":568},[1830],{"type":434,"value":1422},{"type":425,"tag":555,"props":1832,"children":1833},{"style":937},[1834],{"type":434,"value":1835}," key",{"type":425,"tag":555,"props":1837,"children":1838},{"style":568},[1839],{"type":434,"value":1422},{"type":425,"tag":555,"props":1841,"children":1842},{"style":937},[1843],{"type":434,"value":1844}," value",{"type":425,"tag":555,"props":1846,"children":1847},{"style":568},[1848],{"type":434,"value":945},{"type":425,"tag":555,"props":1850,"children":1851},{"style":568},[1852],{"type":434,"value":766},{"type":425,"tag":555,"props":1854,"children":1855},{"class":557,"line":829},[1856,1861,1866,1871,1875,1879,1884,1888],{"type":425,"tag":555,"props":1857,"children":1858},{"style":574},[1859],{"type":434,"value":1860},"    invariant",{"type":425,"tag":555,"props":1862,"children":1864},{"style":1863},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1865],{"type":434,"value":1327},{"type":425,"tag":555,"props":1867,"children":1868},{"style":562},[1869],{"type":434,"value":1870},"key",{"type":425,"tag":555,"props":1872,"children":1873},{"style":568},[1874],{"type":434,"value":1422},{"type":425,"tag":555,"props":1876,"children":1877},{"style":812},[1878],{"type":434,"value":815},{"type":425,"tag":555,"props":1880,"children":1881},{"style":818},[1882],{"type":434,"value":1883},"set",{"type":425,"tag":555,"props":1885,"children":1886},{"style":812},[1887],{"type":434,"value":877},{"type":425,"tag":555,"props":1889,"children":1890},{"style":1863},[1891],{"type":434,"value":1345},{"type":425,"tag":555,"props":1893,"children":1894},{"class":557,"line":838},[1895,1900,1905,1909,1914,1919],{"type":425,"tag":555,"props":1896,"children":1897},{"style":562},[1898],{"type":434,"value":1899},"    target",{"type":425,"tag":555,"props":1901,"children":1902},{"style":1863},[1903],{"type":434,"value":1904},"[",{"type":425,"tag":555,"props":1906,"children":1907},{"style":562},[1908],{"type":434,"value":1870},{"type":425,"tag":555,"props":1910,"children":1911},{"style":1863},[1912],{"type":434,"value":1913},"] ",{"type":425,"tag":555,"props":1915,"children":1916},{"style":806},[1917],{"type":434,"value":1918},"=",{"type":425,"tag":555,"props":1920,"children":1921},{"style":562},[1922],{"type":434,"value":1923}," value\n",{"type":425,"tag":555,"props":1925,"children":1926},{"class":557,"line":856},[1927,1931],{"type":425,"tag":555,"props":1928,"children":1929},{"style":860},[1930],{"type":434,"value":863},{"type":425,"tag":555,"props":1932,"children":1934},{"style":1933},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1935],{"type":434,"value":1936}," true\n",{"type":425,"tag":555,"props":1938,"children":1939},{"class":557,"line":915},[1940],{"type":425,"tag":555,"props":1941,"children":1942},{"style":568},[1943],{"type":434,"value":835},{"type":425,"tag":555,"props":1945,"children":1946},{"class":557,"line":923},[1947,1951],{"type":425,"tag":555,"props":1948,"children":1949},{"style":568},[1950],{"type":434,"value":1253},{"type":425,"tag":555,"props":1952,"children":1953},{"style":562},[1954],{"type":434,"value":1345},{"type":425,"tag":555,"props":1956,"children":1957},{"class":557,"line":952},[1958],{"type":425,"tag":555,"props":1959,"children":1960},{"emptyLinePlaceholder":1498},[1961],{"type":434,"value":1501},{"type":425,"tag":555,"props":1963,"children":1964},{"class":557,"line":977},[1965,1970,1975,1979,1983,1987,1992,1996],{"type":425,"tag":555,"props":1966,"children":1967},{"style":752},[1968],{"type":434,"value":1969},"function",{"type":425,"tag":555,"props":1971,"children":1972},{"style":574},[1973],{"type":434,"value":1974}," invariant",{"type":425,"tag":555,"props":1976,"children":1977},{"style":568},[1978],{"type":434,"value":1327},{"type":425,"tag":555,"props":1980,"children":1981},{"style":937},[1982],{"type":434,"value":1870},{"type":425,"tag":555,"props":1984,"children":1985},{"style":568},[1986],{"type":434,"value":1422},{"type":425,"tag":555,"props":1988,"children":1989},{"style":937},[1990],{"type":434,"value":1991}," action",{"type":425,"tag":555,"props":1993,"children":1994},{"style":568},[1995],{"type":434,"value":945},{"type":425,"tag":555,"props":1997,"children":1998},{"style":568},[1999],{"type":434,"value":766},{"type":425,"tag":555,"props":2001,"children":2002},{"class":557,"line":985},[2003,2008,2012,2016,2020,2025,2029,2033,2038,2042,2047],{"type":425,"tag":555,"props":2004,"children":2005},{"style":860},[2006],{"type":434,"value":2007},"  if",{"type":425,"tag":555,"props":2009,"children":2010},{"style":1863},[2011],{"type":434,"value":934},{"type":425,"tag":555,"props":2013,"children":2014},{"style":562},[2015],{"type":434,"value":1870},{"type":425,"tag":555,"props":2017,"children":2018},{"style":568},[2019],{"type":434,"value":571},{"type":425,"tag":555,"props":2021,"children":2022},{"style":574},[2023],{"type":434,"value":2024},"startsWith",{"type":425,"tag":555,"props":2026,"children":2027},{"style":1863},[2028],{"type":434,"value":1327},{"type":425,"tag":555,"props":2030,"children":2031},{"style":812},[2032],{"type":434,"value":877},{"type":425,"tag":555,"props":2034,"children":2035},{"style":818},[2036],{"type":434,"value":2037},"_",{"type":425,"tag":555,"props":2039,"children":2040},{"style":812},[2041],{"type":434,"value":877},{"type":425,"tag":555,"props":2043,"children":2044},{"style":1863},[2045],{"type":434,"value":2046},")) ",{"type":425,"tag":555,"props":2048,"children":2049},{"style":568},[2050],{"type":434,"value":2051},"{\n",{"type":425,"tag":555,"props":2053,"children":2054},{"class":557,"line":1239},[2055,2060,2064,2069,2073,2078,2083,2087],{"type":425,"tag":555,"props":2056,"children":2057},{"style":860},[2058],{"type":434,"value":2059},"    throw",{"type":425,"tag":555,"props":2061,"children":2062},{"style":806},[2063],{"type":434,"value":1791},{"type":425,"tag":555,"props":2065,"children":2066},{"style":574},[2067],{"type":434,"value":2068}," Error",{"type":425,"tag":555,"props":2070,"children":2071},{"style":1863},[2072],{"type":434,"value":1327},{"type":425,"tag":555,"props":2074,"children":2075},{"style":812},[2076],{"type":434,"value":2077},"`",{"type":425,"tag":555,"props":2079,"children":2080},{"style":818},[2081],{"type":434,"value":2082},"Invalid Key",{"type":425,"tag":555,"props":2084,"children":2085},{"style":812},[2086],{"type":434,"value":2077},{"type":425,"tag":555,"props":2088,"children":2089},{"style":1863},[2090],{"type":434,"value":1345},{"type":425,"tag":555,"props":2092,"children":2093},{"class":557,"line":1247},[2094],{"type":425,"tag":555,"props":2095,"children":2096},{"style":568},[2097],{"type":434,"value":835},{"type":425,"tag":555,"props":2099,"children":2101},{"class":557,"line":2100},14,[2102],{"type":425,"tag":555,"props":2103,"children":2104},{"style":568},[2105],{"type":434,"value":991},{"type":425,"tag":555,"props":2107,"children":2109},{"class":557,"line":2108},15,[2110],{"type":425,"tag":555,"props":2111,"children":2112},{"emptyLinePlaceholder":1498},[2113],{"type":434,"value":1501},{"type":425,"tag":555,"props":2115,"children":2117},{"class":557,"line":2116},16,[2118,2123,2127,2132,2136,2140,2145],{"type":425,"tag":555,"props":2119,"children":2120},{"style":562},[2121],{"type":434,"value":2122},"proxy",{"type":425,"tag":555,"props":2124,"children":2125},{"style":568},[2126],{"type":434,"value":571},{"type":425,"tag":555,"props":2128,"children":2129},{"style":562},[2130],{"type":434,"value":2131},"_prop ",{"type":425,"tag":555,"props":2133,"children":2134},{"style":806},[2135],{"type":434,"value":1918},{"type":425,"tag":555,"props":2137,"children":2138},{"style":812},[2139],{"type":434,"value":815},{"type":425,"tag":555,"props":2141,"children":2142},{"style":818},[2143],{"type":434,"value":2144},"somevalue",{"type":425,"tag":555,"props":2146,"children":2147},{"style":812},[2148],{"type":434,"value":826},{"type":425,"tag":555,"props":2150,"children":2152},{"class":557,"line":2151},17,[2153],{"type":425,"tag":555,"props":2154,"children":2155},{"style":1286},[2156],{"type":434,"value":2157},"// Error: Invalid Key\n",{"type":425,"tag":430,"props":2159,"children":2160},{},[2161],{"type":434,"value":2162},"若脱离 ES 6，代理模式会变成什么？",{"type":425,"tag":430,"props":2164,"children":2165},{},[2166],{"type":434,"value":2167},"会变成一团带有 Proxy Patterns 注释的函数，会被某个 GitHub 上的库吸收下放到 Readme 中亦或是变成社区中新增的几篇“JS 中的代理模式”的博客... 害，无所谓了。",{"type":425,"tag":437,"props":2169,"children":2171},{"id":2170},"设计模式的消融",[2172],{"type":434,"value":2170},{"type":425,"tag":430,"props":2174,"children":2175},{},[2176,2181],{"type":425,"tag":472,"props":2177,"children":2178},{},[2179],{"type":434,"value":2180},"总的来说，设计模式无非有三种作用：创建对象、组合对象以及处理对象的依赖",{"type":434,"value":2182},"。面向对象设计模式所代表的复用性，只能在面向对象的上下文中使用。跳出面向对象，你会发现代码复用的层次可以更加开放，下至语言特征，上至框架。",{"type":425,"tag":430,"props":2184,"children":2185},{},[2186],{"type":434,"value":2187},"作为抽象的最低层级，JS 语言特征，离不开日益见新的语言规范。上文总结的设计模式与语言特征的重叠之处，可以概括为以下两点：",{"type":425,"tag":2189,"props":2190,"children":2191},"ul",{},[2192,2198],{"type":425,"tag":2193,"props":2194,"children":2195},"li",{},[2196],{"type":434,"value":2197},"若语言本身孱弱时，可通过语言特征的再上层抽象，如函数，来提高复用的层次（即发明一种新的设计模式）；",{"type":425,"tag":2193,"props":2199,"children":2200},{},[2201],{"type":434,"value":2202},"当语言逐渐强大时，设计模式的概念也随之弱化；",{"type":425,"tag":430,"props":2204,"children":2205},{},[2206],{"type":434,"value":2207},"听起来颇有些“设计模式是对语言能力不足的补充”的味道，难道说我们要开始编程语言的圣战？这让我回想起 Paul Graham 在《黑客与画家》中描写到他对“强大语言”的赤裸裸的崇拜:",{"type":425,"tag":426,"props":2209,"children":2210},{},[2211],{"type":425,"tag":430,"props":2212,"children":2213},{},[2214,2216,2220,2222,2225,2227,2230,2232,2235,2237],{"type":434,"value":2215},"如果你想解决一个困难的问题，",{"type":425,"tag":2217,"props":2218,"children":2219},"br",{},[],{"type":434,"value":2221},"\n关键不是你使用的语言是否强大，而是好几个因素同时发挥作用：",{"type":425,"tag":2217,"props":2223,"children":2224},{},[],{"type":434,"value":2226},"\n（a）使用一种强大的语言；",{"type":425,"tag":2217,"props":2228,"children":2229},{},[],{"type":434,"value":2231},"\n（b）为这个难题写一个真实世界中的编译器；",{"type":425,"tag":2217,"props":2233,"children":2234},{},[],{"type":434,"value":2236},"\n（c）或者... 你把自己变成这个难题的人肉编译器。\n",{"type":425,"tag":803,"props":2238,"children":2239},{},[2240],{"type":434,"value":2241},"Paul Graham",{"type":425,"tag":430,"props":2243,"children":2244},{},[2245],{"type":434,"value":2246},"Paul Graham 就觉得设计模式就是一种对语言能力不足的妥协，“语言的编程能力越强大，写出来的程序就越短”。当然，就算有一种语言可以强大到和破除面向对象设计模式的神话，关于语言的表达能力强弱的争论也不会停止。不过好消息是，脱离场景谈语言一定是错误的，正如没有人会指望用汇编来编写 Web 程序。",{"type":425,"tag":430,"props":2248,"children":2249},{},[2250],{"type":434,"value":2251},"我们没必要去追求极致的编程语言表达力，表达力和复杂度往往是正相关的，就像世界上所有的语言的法阵都会伴随着词语的演进、读音的兴替以及对错误语法的包容，但很少有人说（或敢说）“你看，白话文比起文言文来说真是不够格啊”。",{"type":425,"tag":430,"props":2253,"children":2254},{},[2255],{"type":434,"value":2256},"脱离面向对象，我们也可以谈论设计模式，因为我们聊的就是代码复用。就算使用函数式、声明式的语言解决问题，也许有特定范式可遵循。请想象一下 CSS 中的设计模式。嗯？CSS 有设计模式么？私以为有。特异性、继承和层叠这三种语言特征就是 CSS 的设计模式；在这三种基础特性之上建立起来的各种代码组织方案/命名方案（如 OOCSS、Atomic CSS），也算。",{"type":425,"tag":430,"props":2258,"children":2259},{},[2260,2265],{"type":425,"tag":472,"props":2261,"children":2262},{},[2263],{"type":434,"value":2264},"唯一不变的，只有抽象的复用",{"type":434,"value":2266},"。我们做的一切工作，只是在抽象出不同层次的代码复用的同时，尽可能把代码组织成容易理解的形式。重要的不是记住某个设计模式中的实体以及实体是如何通讯的，而是要理解该设计模式所代表的抽象的体量适合的场景。",{"type":425,"tag":437,"props":2268,"children":2270},{"id":2269},"语言的魔法锅",[2271],{"type":434,"value":2269},{"type":425,"tag":426,"props":2273,"children":2274},{},[2275],{"type":425,"tag":430,"props":2276,"children":2277},{},[2278,2280],{"type":434,"value":2279},"在威尔士神话中，有一口神奇的大锅，加入特定配方熬制上一年零一天后，便能萃取出三滴解决任何难题的灵药。\n",{"type":425,"tag":803,"props":2281,"children":2282},{},[2283],{"type":434,"value":2284},"《塔列辛传奇》",{"type":425,"tag":430,"props":2286,"children":2287},{},[2288,2290,2297,2299,2306,2308,2319,2321,2332],{"type":434,"value":2289},"JavaScript 的火热日益见长，前端社区",{"type":425,"tag":452,"props":2291,"children":2294},{"href":2292,"rel":2293},"https://githut.info/",[1379],[2295],{"type":434,"value":2296},"越加活跃",{"type":434,"value":2298},"，规范也",{"type":425,"tag":452,"props":2300,"children":2303},{"href":2301,"rel":2302},"https://tc39.es/ecma262/",[1379],[2304],{"type":434,"value":2305},"日益见新",{"type":434,"value":2307},"。ESNeeext 已经往魔法锅中加了许多新材料，这是好事（其实我满心期待它直接把锅塞满）。新的语言特征能带来了更多的可能性，就目前而言，新特征大概率能增加语义，增强表达力、降低思维负担",{"type":425,"tag":448,"props":2309,"children":2310},{},[2311],{"type":425,"tag":452,"props":2312,"children":2316},{"href":2313,"ariaDescribedBy":2314,"dataFootnoteRef":419,"id":2315},"#user-content-fn-if-one-word",[456],"user-content-fnref-if-one-word",[2317],{"type":434,"value":2318},"6",{"type":434,"value":2320},"。尽管把材料往大锅中塞吧",{"type":425,"tag":448,"props":2322,"children":2323},{},[2324],{"type":425,"tag":452,"props":2325,"children":2329},{"href":2326,"ariaDescribedBy":2327,"dataFootnoteRef":419,"id":2328},"#user-content-fn-how-js-works",[456],"user-content-fnref-how-js-works",[2330],{"type":434,"value":2331},"7",{"type":434,"value":2333},"！让我们一同祈祷萃取出灵药的一天早日到来！",{"type":425,"tag":430,"props":2335,"children":2336},{},[2337],{"type":434,"value":2338},"以下就用魔法锅的故事作为文章结尾，这是一个颇有意思的传奇故事。",{"type":425,"tag":430,"props":2340,"children":2341},{},[2342],{"type":425,"tag":508,"props":2343,"children":2346},{"alt":2344,"src":2345},"炼金术 | 维基百科","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/200704/20200713074400.png",[],{"type":425,"tag":430,"props":2348,"children":2349},{},[2350],{"type":434,"value":2351},"在爱尔兰一个隐秘的角落，住着一个精通智慧与魔法的巫师，凯丽杜恩（Ceridwen）。她能力超凡，偏偏却生了一个丑陋的儿子。所以这位母亲竭尽所能想将智慧传授给他，以弥补其外表的丑陋。她辗转于各种巫术与秘仪，最后，总算在一本隐秘的魔书中找到了灵感。",{"type":425,"tag":430,"props":2353,"children":2354},{},[2355],{"type":434,"value":2356},"魔书将秘密告诉凯丽杜恩：她需要使用一口大的魔法锅，填满红山花、小麦、火盐、精灵耳、直立根和灵尘，用大火熬制上一年零一天。最终会生成一锅致命毒物，但溅出的前三滴汁液却是充满“预言之灵”的智慧灵药。",{"type":425,"tag":430,"props":2358,"children":2359},{},[2360],{"type":434,"value":2361},"很快，熬制魔法锅的工作在凯丽杜恩的安排下有条不紊地进行，一个名字未知的盲人被派来搅拌大锅，年轻人巴赫则负责烧它下面的火。",{"type":425,"tag":430,"props":2363,"children":2364},{},[2365],{"type":434,"value":2366},"星象在天空中咯咯响地平移着，太阳和月亮绕着地球转了一轮又一轮... 随着时间推移，锅中的草药效力变得越来越强。看着咕嘟嘟冒着气泡的大锅，凯丽杜恩觉得很是满意，她便躺在温暖的锅边睡着了。",{"type":425,"tag":430,"props":2368,"children":2369},{},[2370,2372],{"type":434,"value":2371},"就在此时，意外发生了。翻腾着热气的大锅，意外地溅出了几点液体在年轻人巴赫的手指上，而巴赫居然不假思索地将手指吮吸地干干净净。和魔书的预言一样，巴赫立马就获得了智慧。他瞬间通晓了火焰的舞蹈和水的诉说，山的尊严和风的呢喃... 他知晓了无数秘密，以及... ",{"type":425,"tag":472,"props":2373,"children":2374},{},[2375],{"type":434,"value":2376},"凯丽杜恩肯定会杀了他！",{"type":425,"tag":430,"props":2378,"children":2379},{},[2380],{"type":434,"value":2381},"慌乱中，巴赫变成一只野兔夺路而逃，而凯丽杜恩惊醒后赶忙变成猎犬一路追踪过去。巴赫变成天空中的鸽子，她就变成一只鹰；他变成一头奔跑的鹿，她就变成一只草原上的狼；他化身为谷仓中的一粒麦粒，她就变成一只啄个不停老母鸡...",{"type":425,"tag":430,"props":2383,"children":2384},{},[2385],{"type":434,"value":2386},"这两人也许一直较量着，直到今天。",{"type":425,"tag":437,"props":2388,"children":2390},{"id":2389},"阅读更多",[2391],{"type":434,"value":2389},{"type":425,"tag":2189,"props":2393,"children":2394},{},[2395,2405,2415],{"type":425,"tag":2193,"props":2396,"children":2397},{},[2398],{"type":425,"tag":452,"props":2399,"children":2402},{"href":2400,"rel":2401},"https://www.jdon.com/37356",[1379],[2403],{"type":434,"value":2404},"15 年后 GoF 设计模式作者再谈设计模式",{"type":425,"tag":2193,"props":2406,"children":2407},{},[2408],{"type":425,"tag":452,"props":2409,"children":2412},{"href":2410,"rel":2411},"https://www.zhihu.com/question/37009570",[1379],[2413],{"type":434,"value":2414},"为什么不能乱点技能树",{"type":425,"tag":2193,"props":2416,"children":2417},{},[2418],{"type":425,"tag":452,"props":2419,"children":2422},{"href":2420,"rel":2421},"https://mp.weixin.qq.com/s?src=11&timestamp=1651051411&ver=3764&signature=AiaMcpc*LLVNlmVWIHaOvu4sThNq8OFp8ckqlVllLSohG8dWn**P3unuBhRwZAEND0uJdnurJtHvE6IKlBYAUUwuvRYknXkKje6CzOZaQBxRPIlnN4kwtzYsfa8fxKSM&new=1",[1379],[2423],{"type":434,"value":2424},"超越库和框架的技术创新",{"type":425,"tag":430,"props":2426,"children":2427},{},[2428],{"type":434,"value":2429},"希望本文能对你有所帮助，也欢迎各位批评文中观点或指出错误。",{"type":425,"tag":430,"props":2431,"children":2432},{},[2433,2435,2442,2444,2451],{"type":434,"value":2434},"想看看这篇文章是如何被创造的？你能从我的",{"type":425,"tag":452,"props":2436,"children":2439},{"href":2437,"rel":2438},"https://github.com/Lionad-Morotar/blogs",[1379],[2440],{"type":434,"value":2441},"博客项目",{"type":434,"value":2443},"中找到答案~ 欢迎 Star & Follow~ 也请大家多来我的",{"type":425,"tag":452,"props":2445,"children":2448},{"href":2446,"rel":2447},"https://www.lionad.art",[1379],[2449],{"type":434,"value":2450},"线上博客逛逛",{"type":434,"value":2452},"，排版超 Nice 哦~",{"type":425,"tag":2454,"props":2455,"children":2458},"section",{"className":2456,"dataFootnotes":419},[2457],"footnotes",[2459,2466],{"type":425,"tag":437,"props":2460,"children":2463},{"className":2461,"id":456},[2462],"sr-only",[2464],{"type":434,"value":2465},"Footnotes",{"type":425,"tag":2467,"props":2468,"children":2469},"ol",{},[2470,2485,2507,2520,2541,2554,2567],{"type":425,"tag":2193,"props":2471,"children":2473},{"id":2472},"user-content-fn-%E6%96%87%E5%8C%96",[2474,2476],{"type":434,"value":2475},"非贬义。 ",{"type":425,"tag":452,"props":2477,"children":2482},{"href":2478,"ariaLabel":2479,"className":2480,"dataFootnoteBackref":419},"#user-content-fnref-%E6%96%87%E5%8C%96","Back to reference 1",[2481],"data-footnote-backref",[2483],{"type":434,"value":2484},"↩",{"type":425,"tag":2193,"props":2486,"children":2488},{"id":2487},"user-content-fn-fn-call",[2489,2491,2498,2500],{"type":434,"value":2490},"见：",{"type":425,"tag":452,"props":2492,"children":2495},{"href":2493,"rel":2494},"https://zhuanlan.zhihu.com/p/95741316",[1379],[2496],{"type":434,"value":2497},"子程序（函数）考古学",{"type":434,"value":2499}," ",{"type":425,"tag":452,"props":2501,"children":2505},{"href":2502,"ariaLabel":2503,"className":2504,"dataFootnoteBackref":419},"#user-content-fnref-fn-call","Back to reference 2",[2481],[2506],{"type":434,"value":2484},{"type":425,"tag":2193,"props":2508,"children":2510},{"id":2509},"user-content-fn-css",[2511,2513],{"type":434,"value":2512},"试试使用 CSS 去写游戏？即便可行，但过程也会让人无比沮丧。 ",{"type":425,"tag":452,"props":2514,"children":2518},{"href":2515,"ariaLabel":2516,"className":2517,"dataFootnoteBackref":419},"#user-content-fnref-css","Back to reference 3",[2481],[2519],{"type":434,"value":2484},{"type":425,"tag":2193,"props":2521,"children":2523},{"id":2522},"user-content-fn-module-pattern",[2524,2526,2532,2534],{"type":434,"value":2525},"此模块模式并非传统面向对象中的模块模式，后者的定义见：",{"type":425,"tag":452,"props":2527,"children":2530},{"href":2528,"rel":2529},"https://www.jdon.com/52843",[1379],[2531],{"type":434,"value":2528},{"type":434,"value":2533},"。 ",{"type":425,"tag":452,"props":2535,"children":2539},{"href":2536,"ariaLabel":2537,"className":2538,"dataFootnoteBackref":419},"#user-content-fnref-module-pattern","Back to reference 4",[2481],[2540],{"type":434,"value":2484},{"type":425,"tag":2193,"props":2542,"children":2544},{"id":2543},"user-content-fn-firstclass",[2545,2547],{"type":434,"value":2546},"且叫且珍惜，说不定以后就听不到“一等公民”这种叫法啦。 ",{"type":425,"tag":452,"props":2548,"children":2552},{"href":2549,"ariaLabel":2550,"className":2551,"dataFootnoteBackref":419},"#user-content-fnref-firstclass","Back to reference 5",[2481],[2553],{"type":434,"value":2484},{"type":425,"tag":2193,"props":2555,"children":2557},{"id":2556},"user-content-fn-if-one-word",[2558,2560],{"type":434,"value":2559},"用一个单词就能达意时就不需要用一个句子。 ",{"type":425,"tag":452,"props":2561,"children":2565},{"href":2562,"ariaLabel":2563,"className":2564,"dataFootnoteBackref":419},"#user-content-fnref-if-one-word","Back to reference 6",[2481],[2566],{"type":434,"value":2484},{"type":425,"tag":2193,"props":2568,"children":2570},{"id":2569},"user-content-fn-how-js-works",[2571,2573],{"type":434,"value":2572},"语言特征并不总是银弹，类似观点见道格拉斯的《How JS Works》 ",{"type":425,"tag":452,"props":2574,"children":2578},{"href":2575,"ariaLabel":2576,"className":2577,"dataFootnoteBackref":419},"#user-content-fnref-how-js-works","Back to reference 7",[2481],[2579],{"type":434,"value":2484},{"type":425,"tag":2581,"props":2582,"children":2583},"style",{},[2584],{"type":434,"value":2585},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":419,"searchDepth":769,"depth":769,"links":2587},[2588,2589,2590,2591,2592,2593,2594,2595],{"id":439,"depth":769,"text":439},{"id":491,"depth":769,"text":491},{"id":599,"depth":769,"text":599},{"id":701,"depth":769,"text":701},{"id":2170,"depth":769,"text":2170},{"id":2269,"depth":769,"text":2269},{"id":2389,"depth":769,"text":2389},{"id":456,"depth":769,"text":2465},"markdown","content:2.articles:1107.design-patterns-and-js-magic-pot.md","content","2.articles/1107.design-patterns-and-js-magic-pot.md","2.articles/1107.design-patterns-and-js-magic-pot","md",[2603,2605],{"_path":64,"title":63,"description":2604},"本文介绍了几种通过CSS实现的常见阴影效果如单侧投影、空心投影、投影动画、彩色阴影、长投影和倒影，以及尝试使用SVG模拟材质特性如粗糙度及光学效应如菲尼尔效应生成了几种特殊的纹理，最后通过一个CSS绘制真实书本案例介绍了实战中的一些细节。",{"_path":70,"title":69,"description":2606},"上一篇讲 anysort 的文章说到因网易云音乐的歌单排序功能较弱，我们自己实现的用来给歌单自定义排序的排序库的思路。这篇文章在排序库的基础上，介绍了其 TypeScript 类型实现。",1738321901717]