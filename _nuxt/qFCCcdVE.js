import{_ as C,d as v,c as r,o as l,b as u,w as f,r as h,t as m,a as y,F as S,u as $,e as L,f as z,g as A,h as D}from"./DhNRAu7J.js";const E=async e=>{const n=e.match(/[^\\/]*$/)[0];return await fetch(`http://faas.lionad.art/getmeta?name=${n}`).then(i=>i.text()).then(i=>+i)},q=async e=>{const n=s=>s.replace(/<!--[^-]*-->/gim,"").replace(/<script[^>]*>/gim," <!-- ").replace(/<\/script[\s]*>/gim," --> ").replace(/<!--[^-]*-->/gim,"").replace(/(<a\s+[^>]*)href=/gim,"$1");return await fetch(e).then(s=>s.text()).then(s=>n(s))},M="linkpage fullscreen",k=".linkpage",B=v({props:{type:{type:String,default:"h5"},to:{type:String,default:""},source:{type:String,default:""},label:{type:String,default:""}},setup(e){const n=$(),s=L({loading:!1,slotContent:""}),i=async t=>{if(t.preventDefault(),t.stopPropagation(),console.log(e),e.to){s.loading=!0;try{await E(e.to)<1e5?await this.display():e.source?window.open(e.source):alert("资源体积过大，暂不予展示，敬请谅解")}finally{s.loading=!1}}else window.open(e.source)},g=async()=>{const t=await q(e.to),o=document.createElement("iframe");o.setAttribute("frameborder","0"),o.setAttribute("class",M),o.setAttribute("srcdoc",t),o.setAttribute("style","width: 100vw; height: 100vh; z-index: 999"),document.body.append(o);const a=document.querySelector(k),d=a.shadowRoot||a.document||a,p=({keyCode:b})=>{b===27&&o&&o.remove()};document.addEventListener("keydown",p),d&&d.addEventListener("keydown",p);const w=()=>{o&&o.remove(),p&&(document.removeEventListener("keydown",p),d&&d.addEventListener("keydown",p))};await A(),c(),D(w)},c=()=>{const t=document.querySelector(k),o=t.shadowRoot||t.document||t;(o?[...o.querySelectorAll("a")]:[]).map(d=>d.removeAttribute("href"))};return z(()=>{const t=n.default,o=a=>a.toLowerCase().replace(/\s+/g,"-");t&&(s.slotContent=o(t.text||""))}),{props:e,showpage:i,display:g,disableInnerLink:c}}}),F=["id","href"],N=["textContent"],T={key:1},H=["id","href"],R=["textContent"],V={key:2,style:{display:"content"}},I=["id","href"],O=["textContent"];function P(e,n,s,i,g,c){return l(),r(S,null,[e.props.type?u("",!0):(l(),r("a",{key:0,id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank",onClick:n[0]||(n[0]=f((...t)=>e.showpage&&e.showpage(...t),["prevent","stop"]))},[e.props.label?(l(),r("span",{key:0,textContent:m(e.props.label)},null,8,N)):h(e.$slots,"default",{key:1})],8,F)),e.props.type==="blockquote"?(l(),r("blockquote",T,[y("p",null,[y("a",{id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank",onClick:n[1]||(n[1]=f((...t)=>e.showpage&&e.showpage(...t),["prevent","stop"]))},[e.props.label?(l(),r("span",{key:0,textContent:m(e.props.label)},null,8,R)):h(e.$slots,"default",{key:1})],8,H)])])):u("",!0),e.props.type==="h5"?(l(),r("h5",V,[y("a",{id:e.slotContent,href:e.to,rel:"noopener noreferrer",target:"_blank",onClick:n[2]||(n[2]=f((...t)=>e.showpage&&e.showpage(...t),["prevent","stop"]))},[e.props.label?(l(),r("span",{key:0,textContent:m(e.props.label)},null,8,O)):h(e.$slots,"default",{key:1})],8,I)])):u("",!0)],64)}const j=C(B,[["render",P]]);export{j as default};
