function jt(r,t,e){if(r&&r.length){const[n,s]=t,i=Math.PI/180*e,o=Math.cos(i),a=Math.sin(i);for(const u of r){const[l,h]=u;u[0]=(l-n)*o-(h-s)*a+n,u[1]=(l-n)*a+(h-s)*o+s}}}function Je(r,t,e){const n=[];r.forEach(s=>n.push(...s)),jt(n,t,e)}function tr(r,t){return r[0]===t[0]&&r[1]===t[1]}function er(r,t,e,n=1){const s=e,i=Math.max(t,.1),o=r[0]&&r[0][0]&&typeof r[0][0]=="number"?[r]:r,a=[0,0];if(s)for(const l of o)jt(l,a,s);const u=rr(o,i,n);if(s){for(const l of o)jt(l,a,-s);Je(u,a,-s)}return u}function rr(r,t,e){const n=[];for(const l of r){const h=[...l];tr(h[0],h[h.length-1])||h.push([h[0][0],h[0][1]]),h.length>2&&n.push(h)}const s=[];t=Math.max(t,.1);const i=[];for(const l of n)for(let h=0;h<l.length-1;h++){const c=l[h],f=l[h+1];if(c[1]!==f[1]){const p=Math.min(c[1],f[1]);i.push({ymin:p,ymax:Math.max(c[1],f[1]),x:p===c[1]?c[0]:f[0],islope:(f[0]-c[0])/(f[1]-c[1])})}}if(i.sort((l,h)=>l.ymin<h.ymin?-1:l.ymin>h.ymin?1:l.x<h.x?-1:l.x>h.x?1:l.ymax===h.ymax?0:(l.ymax-h.ymax)/Math.abs(l.ymax-h.ymax)),!i.length)return s;let o=[],a=i[0].ymin,u=0;for(;o.length||i.length;){if(i.length){let l=-1;for(let c=0;c<i.length&&!(i[c].ymin>a);c++)l=c;i.splice(0,l+1).forEach(c=>{o.push({s:a,edge:c})})}if(o=o.filter(l=>!(l.edge.ymax<=a)),o.sort((l,h)=>l.edge.x===h.edge.x?0:(l.edge.x-h.edge.x)/Math.abs(l.edge.x-h.edge.x)),(e!==1||u%t===0)&&o.length>1)for(let l=0;l<o.length;l=l+2){const h=l+1;if(h>=o.length)break;const c=o[l].edge,f=o[h].edge;s.push([[Math.round(c.x),a],[Math.round(f.x),a]])}a+=e,o.forEach(l=>{l.edge.x=l.edge.x+e*l.edge.islope}),u++}return s}function Mt(r,t){var e;const n=t.hachureAngle+90;let s=t.hachureGap;s<0&&(s=t.strokeWidth*4),s=Math.round(Math.max(s,.1));let i=1;return t.roughness>=1&&(((e=t.randomizer)===null||e===void 0?void 0:e.next())||Math.random())>.7&&(i=s),er(r,s,n,i||1)}class Jt{constructor(t){this.helper=t}fillPolygons(t,e){return this._fillPolygons(t,e)}_fillPolygons(t,e){const n=Mt(t,e);return{type:"fillSketch",ops:this.renderLines(n,e)}}renderLines(t,e){const n=[];for(const s of t)n.push(...this.helper.doubleLineOps(s[0][0],s[0][1],s[1][0],s[1][1],e));return n}}function Lt(r){const t=r[0],e=r[1];return Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2))}class nr extends Jt{fillPolygons(t,e){let n=e.hachureGap;n<0&&(n=e.strokeWidth*4),n=Math.max(n,.1);const s=Object.assign({},e,{hachureGap:n}),i=Mt(t,s),o=Math.PI/180*e.hachureAngle,a=[],u=n*.5*Math.cos(o),l=n*.5*Math.sin(o);for(const[c,f]of i)Lt([c,f])&&a.push([[c[0]-u,c[1]+l],[...f]],[[c[0]+u,c[1]-l],[...f]]);return{type:"fillSketch",ops:this.renderLines(a,e)}}}class sr extends Jt{fillPolygons(t,e){const n=this._fillPolygons(t,e),s=Object.assign({},e,{hachureAngle:e.hachureAngle+90}),i=this._fillPolygons(t,s);return n.ops=n.ops.concat(i.ops),n}}class ar{constructor(t){this.helper=t}fillPolygons(t,e){e=Object.assign({},e,{hachureAngle:0});const n=Mt(t,e);return this.dotsOnLines(n,e)}dotsOnLines(t,e){const n=[];let s=e.hachureGap;s<0&&(s=e.strokeWidth*4),s=Math.max(s,.1);let i=e.fillWeight;i<0&&(i=e.strokeWidth/2);const o=s/4;for(const a of t){const u=Lt(a),l=u/s,h=Math.ceil(l)-1,c=u-h*s,f=(a[0][0]+a[1][0])/2-s/4,p=Math.min(a[0][1],a[1][1]);for(let g=0;g<h;g++){const d=p+c+g*s,m=f-o+Math.random()*2*o,b=d-o+Math.random()*2*o,v=this.helper.ellipse(m,b,i,i,e);n.push(...v.ops)}}return{type:"fillSketch",ops:n}}}class ir{constructor(t){this.helper=t}fillPolygons(t,e){const n=Mt(t,e);return{type:"fillSketch",ops:this.dashedLine(n,e)}}dashedLine(t,e){const n=e.dashOffset<0?e.hachureGap<0?e.strokeWidth*4:e.hachureGap:e.dashOffset,s=e.dashGap<0?e.hachureGap<0?e.strokeWidth*4:e.hachureGap:e.dashGap,i=[];return t.forEach(o=>{const a=Lt(o),u=Math.floor(a/(n+s)),l=(a+s-u*(n+s))/2;let h=o[0],c=o[1];h[0]>c[0]&&(h=o[1],c=o[0]);const f=Math.atan((c[1]-h[1])/(c[0]-h[0]));for(let p=0;p<u;p++){const g=p*(n+s),d=g+n,m=[h[0]+g*Math.cos(f)+l*Math.cos(f),h[1]+g*Math.sin(f)+l*Math.sin(f)],b=[h[0]+d*Math.cos(f)+l*Math.cos(f),h[1]+d*Math.sin(f)+l*Math.sin(f)];i.push(...this.helper.doubleLineOps(m[0],m[1],b[0],b[1],e))}}),i}}class or{constructor(t){this.helper=t}fillPolygons(t,e){const n=e.hachureGap<0?e.strokeWidth*4:e.hachureGap,s=e.zigzagOffset<0?n:e.zigzagOffset;e=Object.assign({},e,{hachureGap:n+s});const i=Mt(t,e);return{type:"fillSketch",ops:this.zigzagLines(i,s,e)}}zigzagLines(t,e,n){const s=[];return t.forEach(i=>{const o=Lt(i),a=Math.round(o/(2*e));let u=i[0],l=i[1];u[0]>l[0]&&(u=i[1],l=i[0]);const h=Math.atan((l[1]-u[1])/(l[0]-u[0]));for(let c=0;c<a;c++){const f=c*2*e,p=(c+1)*2*e,g=Math.sqrt(2*Math.pow(e,2)),d=[u[0]+f*Math.cos(h),u[1]+f*Math.sin(h)],m=[u[0]+p*Math.cos(h),u[1]+p*Math.sin(h)],b=[d[0]+g*Math.cos(h+Math.PI/4),d[1]+g*Math.sin(h+Math.PI/4)];s.push(...this.helper.doubleLineOps(d[0],d[1],b[0],b[1],n),...this.helper.doubleLineOps(b[0],b[1],m[0],m[1],n))}}),s}}const U={};function lr(r,t){let e=r.fillStyle||"hachure";if(!U[e])switch(e){case"zigzag":U[e]||(U[e]=new nr(t));break;case"cross-hatch":U[e]||(U[e]=new sr(t));break;case"dots":U[e]||(U[e]=new ar(t));break;case"dashed":U[e]||(U[e]=new ir(t));break;case"zigzag-line":U[e]||(U[e]=new or(t));break;case"hachure":default:e="hachure",U[e]||(U[e]=new Jt(t));break}return U[e]}function ur(){return Math.floor(Math.random()*2**31)}class Pe{constructor(t){this.seed=t}next(){return this.seed?(2**31-1&(this.seed=Math.imul(48271,this.seed)))/2**31:Math.random()}}const hr=0,Wt=1,Le=2,wt={A:7,a:7,C:6,c:6,H:1,h:1,L:2,l:2,M:2,m:2,Q:4,q:4,S:4,s:4,T:2,t:2,V:1,v:1,Z:0,z:0};function cr(r){const t=new Array;for(;r!=="";)if(r.match(/^([ \t\r\n,]+)/))r=r.substr(RegExp.$1.length);else if(r.match(/^([aAcChHlLmMqQsStTvVzZ])/))t[t.length]={type:hr,text:RegExp.$1},r=r.substr(RegExp.$1.length);else if(r.match(/^(([-+]?[0-9]+(\.[0-9]*)?|[-+]?\.[0-9]+)([eE][-+]?[0-9]+)?)/))t[t.length]={type:Wt,text:`${parseFloat(RegExp.$1)}`},r=r.substr(RegExp.$1.length);else return[];return t[t.length]={type:Le,text:""},t}function Ft(r,t){return r.type===t}function te(r){const t=[],e=cr(r);let n="BOD",s=0,i=e[s];for(;!Ft(i,Le);){let o=0;const a=[];if(n==="BOD")if(i.text==="M"||i.text==="m")s++,o=wt[i.text],n=i.text;else return te("M0,0"+r);else Ft(i,Wt)?o=wt[n]:(s++,o=wt[i.text],n=i.text);if(s+o<e.length){for(let u=s;u<s+o;u++){const l=e[u];if(Ft(l,Wt))a[a.length]=+l.text;else throw new Error("Param not a number: "+n+","+l.text)}if(typeof wt[n]=="number"){const u={key:n,data:a};t.push(u),s+=o,i=e[s],n==="M"&&(n="L"),n==="m"&&(n="l")}else throw new Error("Bad segment: "+n)}else throw new Error("Path data ended short")}return t}function Ie(r){let t=0,e=0,n=0,s=0;const i=[];for(const{key:o,data:a}of r)switch(o){case"M":i.push({key:"M",data:[...a]}),[t,e]=a,[n,s]=a;break;case"m":t+=a[0],e+=a[1],i.push({key:"M",data:[t,e]}),n=t,s=e;break;case"L":i.push({key:"L",data:[...a]}),[t,e]=a;break;case"l":t+=a[0],e+=a[1],i.push({key:"L",data:[t,e]});break;case"C":i.push({key:"C",data:[...a]}),t=a[4],e=a[5];break;case"c":{const u=a.map((l,h)=>h%2?l+e:l+t);i.push({key:"C",data:u}),t=u[4],e=u[5];break}case"Q":i.push({key:"Q",data:[...a]}),t=a[2],e=a[3];break;case"q":{const u=a.map((l,h)=>h%2?l+e:l+t);i.push({key:"Q",data:u}),t=u[2],e=u[3];break}case"A":i.push({key:"A",data:[...a]}),t=a[5],e=a[6];break;case"a":t+=a[5],e+=a[6],i.push({key:"A",data:[a[0],a[1],a[2],a[3],a[4],t,e]});break;case"H":i.push({key:"H",data:[...a]}),t=a[0];break;case"h":t+=a[0],i.push({key:"H",data:[t]});break;case"V":i.push({key:"V",data:[...a]}),e=a[0];break;case"v":e+=a[0],i.push({key:"V",data:[e]});break;case"S":i.push({key:"S",data:[...a]}),t=a[2],e=a[3];break;case"s":{const u=a.map((l,h)=>h%2?l+e:l+t);i.push({key:"S",data:u}),t=u[2],e=u[3];break}case"T":i.push({key:"T",data:[...a]}),t=a[0],e=a[1];break;case"t":t+=a[0],e+=a[1],i.push({key:"T",data:[t,e]});break;case"Z":case"z":i.push({key:"Z",data:[]}),t=n,e=s;break}return i}function Fe(r){const t=[];let e="",n=0,s=0,i=0,o=0,a=0,u=0;for(const{key:l,data:h}of r){switch(l){case"M":t.push({key:"M",data:[...h]}),[n,s]=h,[i,o]=h;break;case"C":t.push({key:"C",data:[...h]}),n=h[4],s=h[5],a=h[2],u=h[3];break;case"L":t.push({key:"L",data:[...h]}),[n,s]=h;break;case"H":n=h[0],t.push({key:"L",data:[n,s]});break;case"V":s=h[0],t.push({key:"L",data:[n,s]});break;case"S":{let c=0,f=0;e==="C"||e==="S"?(c=n+(n-a),f=s+(s-u)):(c=n,f=s),t.push({key:"C",data:[c,f,...h]}),a=h[0],u=h[1],n=h[2],s=h[3];break}case"T":{const[c,f]=h;let p=0,g=0;e==="Q"||e==="T"?(p=n+(n-a),g=s+(s-u)):(p=n,g=s);const d=n+2*(p-n)/3,m=s+2*(g-s)/3,b=c+2*(p-c)/3,v=f+2*(g-f)/3;t.push({key:"C",data:[d,m,b,v,c,f]}),a=p,u=g,n=c,s=f;break}case"Q":{const[c,f,p,g]=h,d=n+2*(c-n)/3,m=s+2*(f-s)/3,b=p+2*(c-p)/3,v=g+2*(f-g)/3;t.push({key:"C",data:[d,m,b,v,p,g]}),a=c,u=f,n=p,s=g;break}case"A":{const c=Math.abs(h[0]),f=Math.abs(h[1]),p=h[2],g=h[3],d=h[4],m=h[5],b=h[6];c===0||f===0?(t.push({key:"C",data:[n,s,m,b,m,b]}),n=m,s=b):(n!==m||s!==b)&&(He(n,s,m,b,c,f,p,g,d).forEach(function(A){t.push({key:"C",data:A})}),n=m,s=b);break}case"Z":t.push({key:"Z",data:[]}),n=i,s=o;break}e=l}return t}function fr(r){return Math.PI*r/180}function gt(r,t,e){const n=r*Math.cos(e)-t*Math.sin(e),s=r*Math.sin(e)+t*Math.cos(e);return[n,s]}function He(r,t,e,n,s,i,o,a,u,l){const h=fr(o);let c=[],f=0,p=0,g=0,d=0;if(l)[f,p,g,d]=l;else{[r,t]=gt(r,t,-h),[e,n]=gt(e,n,-h);const V=(r-e)/2,C=(t-n)/2;let I=V*V/(s*s)+C*C/(i*i);I>1&&(I=Math.sqrt(I),s=I*s,i=I*i);const $=a===u?-1:1,H=s*s,z=i*i,Y=H*z-H*C*C-z*V*V,F=H*C*C+z*V*V,L=$*Math.sqrt(Math.abs(Y/F));g=L*s*C/i+(r+e)/2,d=L*-i*V/s+(t+n)/2,f=Math.asin(parseFloat(((t-d)/i).toFixed(9))),p=Math.asin(parseFloat(((n-d)/i).toFixed(9))),r<g&&(f=Math.PI-f),e<g&&(p=Math.PI-p),f<0&&(f=Math.PI*2+f),p<0&&(p=Math.PI*2+p),u&&f>p&&(f=f-Math.PI*2),!u&&p>f&&(p=p-Math.PI*2)}let m=p-f;if(Math.abs(m)>Math.PI*120/180){const V=p,C=e,I=n;u&&p>f?p=f+Math.PI*120/180*1:p=f+Math.PI*120/180*-1,e=g+s*Math.cos(p),n=d+i*Math.sin(p),c=He(e,n,C,I,s,i,o,0,u,[p,V,g,d])}m=p-f;const b=Math.cos(f),v=Math.sin(f),A=Math.cos(p),M=Math.sin(p),E=Math.tan(m/4),k=4/3*s*E,S=4/3*i*E,T=[r,t],N=[r+k*v,t-S*b],q=[e+k*M,n-S*A],G=[e,n];if(N[0]=2*T[0]-N[0],N[1]=2*T[1]-N[1],l)return[N,q,G].concat(c);{c=[N,q,G].concat(c);const V=[];for(let C=0;C<c.length;C+=3){const I=gt(c[C][0],c[C][1],h),$=gt(c[C+1][0],c[C+1][1],h),H=gt(c[C+2][0],c[C+2][1],h);V.push([I[0],I[1],$[0],$[1],H[0],H[1]])}return V}}const pr={randOffset:br,randOffsetWithRange:vr,ellipse:mr,doubleLineOps:xr};function De(r,t,e,n,s){return{type:"path",ops:ot(r,t,e,n,s)}}function kt(r,t,e){const n=(r||[]).length;if(n>2){const s=[];for(let i=0;i<n-1;i++)s.push(...ot(r[i][0],r[i][1],r[i+1][0],r[i+1][1],e));return t&&s.push(...ot(r[n-1][0],r[n-1][1],r[0][0],r[0][1],e)),{type:"path",ops:s}}else if(n===2)return De(r[0][0],r[0][1],r[1][0],r[1][1],e);return{type:"path",ops:[]}}function gr(r,t){return kt(r,!0,t)}function dr(r,t,e,n,s){const i=[[r,t],[r+e,t],[r+e,t+n],[r,t+n]];return gr(i,s)}function se(r,t){if(r.length){const n=typeof r[0][0]=="number"?[r]:r,s=_t(n[0],1*(1+t.roughness*.2),t),i=t.disableMultiStroke?[]:_t(n[0],1.5*(1+t.roughness*.22),oe(t));for(let o=1;o<n.length;o++){const a=n[o];if(a.length){const u=_t(a,1*(1+t.roughness*.2),t),l=t.disableMultiStroke?[]:_t(a,1.5*(1+t.roughness*.22),oe(t));for(const h of u)h.op!=="move"&&s.push(h);for(const h of l)h.op!=="move"&&i.push(h)}}return{type:"path",ops:s.concat(i)}}return{type:"path",ops:[]}}function mr(r,t,e,n,s){const i=$e(e,n,s);return Xt(r,t,s,i).opset}function $e(r,t,e){const n=Math.sqrt(Math.PI*2*Math.sqrt((Math.pow(r/2,2)+Math.pow(t/2,2))/2)),s=Math.ceil(Math.max(e.curveStepCount,e.curveStepCount/Math.sqrt(200)*n)),i=Math.PI*2/s;let o=Math.abs(r/2),a=Math.abs(t/2);const u=1-e.curveFitting;return o+=w(o*u,e),a+=w(a*u,e),{increment:i,rx:o,ry:a}}function Xt(r,t,e,n){const[s,i]=le(n.increment,r,t,n.rx,n.ry,1,n.increment*Ct(.1,Ct(.4,1,e),e),e);let o=Tt(s,null,e);if(!e.disableMultiStroke&&e.roughness!==0){const[a]=le(n.increment,r,t,n.rx,n.ry,1.5,0,e),u=Tt(a,null,e);o=o.concat(u)}return{estimatedPoints:i,opset:{type:"path",ops:o}}}function ae(r,t,e,n,s,i,o,a,u){const l=r,h=t;let c=Math.abs(e/2),f=Math.abs(n/2);c+=w(c*.01,u),f+=w(f*.01,u);let p=s,g=i;for(;p<0;)p+=Math.PI*2,g+=Math.PI*2;g-p>Math.PI*2&&(p=0,g=Math.PI*2);const d=Math.PI*2/u.curveStepCount,m=Math.min(d/2,(g-p)/2),b=ue(m,l,h,c,f,p,g,1,u);if(!u.disableMultiStroke){const v=ue(m,l,h,c,f,p,g,1.5,u);b.push(...v)}return o&&(a?b.push(...ot(l,h,l+c*Math.cos(p),h+f*Math.sin(p),u),...ot(l,h,l+c*Math.cos(g),h+f*Math.sin(g),u)):b.push({op:"lineTo",data:[l,h]},{op:"lineTo",data:[l+c*Math.cos(p),h+f*Math.sin(p)]})),{type:"path",ops:b}}function ie(r,t){const e=Fe(Ie(te(r))),n=[];let s=[0,0],i=[0,0];for(const{key:o,data:a}of e)switch(o){case"M":{i=[a[0],a[1]],s=[a[0],a[1]];break}case"L":n.push(...ot(i[0],i[1],a[0],a[1],t)),i=[a[0],a[1]];break;case"C":{const[u,l,h,c,f,p]=a;n.push(...Mr(u,l,h,c,f,p,i,t)),i=[f,p];break}case"Z":n.push(...ot(i[0],i[1],s[0],s[1],t)),i=[s[0],s[1]];break}return{type:"path",ops:n}}function Ht(r,t){const e=[];for(const n of r)if(n.length){const s=t.maxRandomnessOffset||0,i=n.length;if(i>2){e.push({op:"move",data:[n[0][0]+w(s,t),n[0][1]+w(s,t)]});for(let o=1;o<i;o++)e.push({op:"lineTo",data:[n[o][0]+w(s,t),n[o][1]+w(s,t)]})}}return{type:"fillPath",ops:e}}function ct(r,t){return lr(t,pr).fillPolygons(r,t)}function yr(r,t,e,n,s,i,o){const a=r,u=t;let l=Math.abs(e/2),h=Math.abs(n/2);l+=w(l*.01,o),h+=w(h*.01,o);let c=s,f=i;for(;c<0;)c+=Math.PI*2,f+=Math.PI*2;f-c>Math.PI*2&&(c=0,f=Math.PI*2);const p=(f-c)/o.curveStepCount,g=[];for(let d=c;d<=f;d=d+p)g.push([a+l*Math.cos(d),u+h*Math.sin(d)]);return g.push([a+l*Math.cos(f),u+h*Math.sin(f)]),g.push([a,u]),ct([g],o)}function br(r,t){return w(r,t)}function vr(r,t,e){return Ct(r,t,e)}function xr(r,t,e,n,s){return ot(r,t,e,n,s,!0)}function oe(r){const t=Object.assign({},r);return t.randomizer=void 0,r.seed&&(t.seed=r.seed+1),t}function Ge(r){return r.randomizer||(r.randomizer=new Pe(r.seed||0)),r.randomizer.next()}function Ct(r,t,e,n=1){return e.roughness*n*(Ge(e)*(t-r)+r)}function w(r,t,e=1){return Ct(-r,r,t,e)}function ot(r,t,e,n,s,i=!1){const o=i?s.disableMultiStrokeFill:s.disableMultiStroke,a=Yt(r,t,e,n,s,!0,!1);if(o)return a;const u=Yt(r,t,e,n,s,!0,!0);return a.concat(u)}function Yt(r,t,e,n,s,i,o){const a=Math.pow(r-e,2)+Math.pow(t-n,2),u=Math.sqrt(a);let l=1;u<200?l=1:u>500?l=.4:l=-.0016668*u+1.233334;let h=s.maxRandomnessOffset||0;h*h*100>a&&(h=u/10);const c=h/2,f=.2+Ge(s)*.2;let p=s.bowing*s.maxRandomnessOffset*(n-t)/200,g=s.bowing*s.maxRandomnessOffset*(r-e)/200;p=w(p,s,l),g=w(g,s,l);const d=[],m=()=>w(c,s,l),b=()=>w(h,s,l),v=s.preserveVertices;return o?d.push({op:"move",data:[r+(v?0:m()),t+(v?0:m())]}):d.push({op:"move",data:[r+(v?0:w(h,s,l)),t+(v?0:w(h,s,l))]}),o?d.push({op:"bcurveTo",data:[p+r+(e-r)*f+m(),g+t+(n-t)*f+m(),p+r+2*(e-r)*f+m(),g+t+2*(n-t)*f+m(),e+(v?0:m()),n+(v?0:m())]}):d.push({op:"bcurveTo",data:[p+r+(e-r)*f+b(),g+t+(n-t)*f+b(),p+r+2*(e-r)*f+b(),g+t+2*(n-t)*f+b(),e+(v?0:b()),n+(v?0:b())]}),d}function _t(r,t,e){if(!r.length)return[];const n=[];n.push([r[0][0]+w(t,e),r[0][1]+w(t,e)]),n.push([r[0][0]+w(t,e),r[0][1]+w(t,e)]);for(let s=1;s<r.length;s++)n.push([r[s][0]+w(t,e),r[s][1]+w(t,e)]),s===r.length-1&&n.push([r[s][0]+w(t,e),r[s][1]+w(t,e)]);return Tt(n,null,e)}function Tt(r,t,e){const n=r.length,s=[];if(n>3){const i=[],o=1-e.curveTightness;s.push({op:"move",data:[r[1][0],r[1][1]]});for(let a=1;a+2<n;a++){const u=r[a];i[0]=[u[0],u[1]],i[1]=[u[0]+(o*r[a+1][0]-o*r[a-1][0])/6,u[1]+(o*r[a+1][1]-o*r[a-1][1])/6],i[2]=[r[a+1][0]+(o*r[a][0]-o*r[a+2][0])/6,r[a+1][1]+(o*r[a][1]-o*r[a+2][1])/6],i[3]=[r[a+1][0],r[a+1][1]],s.push({op:"bcurveTo",data:[i[1][0],i[1][1],i[2][0],i[2][1],i[3][0],i[3][1]]})}}else n===3?(s.push({op:"move",data:[r[1][0],r[1][1]]}),s.push({op:"bcurveTo",data:[r[1][0],r[1][1],r[2][0],r[2][1],r[2][0],r[2][1]]})):n===2&&s.push(...Yt(r[0][0],r[0][1],r[1][0],r[1][1],e,!0,!0));return s}function le(r,t,e,n,s,i,o,a){const u=a.roughness===0,l=[],h=[];if(u){r=r/4,h.push([t+n*Math.cos(-r),e+s*Math.sin(-r)]);for(let c=0;c<=Math.PI*2;c=c+r){const f=[t+n*Math.cos(c),e+s*Math.sin(c)];l.push(f),h.push(f)}h.push([t+n*Math.cos(0),e+s*Math.sin(0)]),h.push([t+n*Math.cos(r),e+s*Math.sin(r)])}else{const c=w(.5,a)-Math.PI/2;h.push([w(i,a)+t+.9*n*Math.cos(c-r),w(i,a)+e+.9*s*Math.sin(c-r)]);const f=Math.PI*2+c-.01;for(let p=c;p<f;p=p+r){const g=[w(i,a)+t+n*Math.cos(p),w(i,a)+e+s*Math.sin(p)];l.push(g),h.push(g)}h.push([w(i,a)+t+n*Math.cos(c+Math.PI*2+o*.5),w(i,a)+e+s*Math.sin(c+Math.PI*2+o*.5)]),h.push([w(i,a)+t+.98*n*Math.cos(c+o),w(i,a)+e+.98*s*Math.sin(c+o)]),h.push([w(i,a)+t+.9*n*Math.cos(c+o*.5),w(i,a)+e+.9*s*Math.sin(c+o*.5)])}return[h,l]}function ue(r,t,e,n,s,i,o,a,u){const l=i+w(.1,u),h=[];h.push([w(a,u)+t+.9*n*Math.cos(l-r),w(a,u)+e+.9*s*Math.sin(l-r)]);for(let c=l;c<=o;c=c+r)h.push([w(a,u)+t+n*Math.cos(c),w(a,u)+e+s*Math.sin(c)]);return h.push([t+n*Math.cos(o),e+s*Math.sin(o)]),h.push([t+n*Math.cos(o),e+s*Math.sin(o)]),Tt(h,null,u)}function Mr(r,t,e,n,s,i,o,a){const u=[],l=[a.maxRandomnessOffset||1,(a.maxRandomnessOffset||1)+.3];let h=[0,0];const c=a.disableMultiStroke?1:2,f=a.preserveVertices;for(let p=0;p<c;p++)p===0?u.push({op:"move",data:[o[0],o[1]]}):u.push({op:"move",data:[o[0]+(f?0:w(l[0],a)),o[1]+(f?0:w(l[0],a))]}),h=f?[s,i]:[s+w(l[p],a),i+w(l[p],a)],u.push({op:"bcurveTo",data:[r+w(l[p],a),t+w(l[p],a),e+w(l[p],a),n+w(l[p],a),h[0],h[1]]});return u}function dt(r){return[...r]}function he(r,t=0){const e=r.length;if(e<3)throw new Error("A curve must have at least three points.");const n=[];if(e===3)n.push(dt(r[0]),dt(r[1]),dt(r[2]),dt(r[2]));else{const s=[];s.push(r[0],r[0]);for(let a=1;a<r.length;a++)s.push(r[a]),a===r.length-1&&s.push(r[a]);const i=[],o=1-t;n.push(dt(s[0]));for(let a=1;a+2<s.length;a++){const u=s[a];i[0]=[u[0],u[1]],i[1]=[u[0]+(o*s[a+1][0]-o*s[a-1][0])/6,u[1]+(o*s[a+1][1]-o*s[a-1][1])/6],i[2]=[s[a+1][0]+(o*s[a][0]-o*s[a+2][0])/6,s[a+1][1]+(o*s[a][1]-o*s[a+2][1])/6],i[3]=[s[a+1][0],s[a+1][1]],n.push(i[1],i[2],i[3])}}return n}function wr(r,t){return Math.sqrt(Et(r,t))}function Et(r,t){return Math.pow(r[0]-t[0],2)+Math.pow(r[1]-t[1],2)}function _r(r,t,e){const n=Et(t,e);if(n===0)return Et(r,t);let s=((r[0]-t[0])*(e[0]-t[0])+(r[1]-t[1])*(e[1]-t[1]))/n;return s=Math.max(0,Math.min(1,s)),Et(r,lt(t,e,s))}function lt(r,t,e){return[r[0]+(t[0]-r[0])*e,r[1]+(t[1]-r[1])*e]}function Ar(r,t){const e=r[t+0],n=r[t+1],s=r[t+2],i=r[t+3];let o=3*n[0]-2*e[0]-i[0];o*=o;let a=3*n[1]-2*e[1]-i[1];a*=a;let u=3*s[0]-2*i[0]-e[0];u*=u;let l=3*s[1]-2*i[1]-e[1];return l*=l,o<u&&(o=u),a<l&&(a=l),o+a}function Bt(r,t,e,n){const s=n||[];if(Ar(r,t)<e){const i=r[t+0];s.length?wr(s[s.length-1],i)>1&&s.push(i):s.push(i),s.push(r[t+3])}else{const o=r[t+0],a=r[t+1],u=r[t+2],l=r[t+3],h=lt(o,a,.5),c=lt(a,u,.5),f=lt(u,l,.5),p=lt(h,c,.5),g=lt(c,f,.5),d=lt(p,g,.5);Bt([o,h,p,d],0,e,s),Bt([d,g,f,l],0,e,s)}return s}function Sr(r,t){return Nt(r,0,r.length,t)}function Nt(r,t,e,n,s){const i=s||[],o=r[t],a=r[e-1];let u=0,l=1;for(let h=t+1;h<e-1;++h){const c=_r(r[h],o,a);c>u&&(u=c,l=h)}return Math.sqrt(u)>n?(Nt(r,t,l+1,n,i),Nt(r,l,e,n,i)):(i.length||i.push(o),i.push(a)),i}function Zt(r,t=.15,e){const n=[],s=(r.length-1)/3;for(let i=0;i<s;i++){const o=i*3;Bt(r,o,t,n)}return e&&e>0?Nt(n,0,n.length,e):n}function Or(r,t,e){const n=te(r),s=Fe(Ie(n)),i=[];let o=[],a=[0,0],u=[];const l=()=>{u.length>=4&&o.push(...Zt(u,t)),u=[]},h=()=>{l(),o.length&&(i.push(o),o=[])};for(const{key:f,data:p}of s)switch(f){case"M":h(),a=[p[0],p[1]],o.push(a);break;case"L":l(),o.push([p[0],p[1]]);break;case"C":if(!u.length){const g=o.length?o[o.length-1]:a;u.push([g[0],g[1]])}u.push([p[0],p[1]]),u.push([p[2],p[3]]),u.push([p[4],p[5]]);break;case"Z":l(),o.push([a[0],a[1]]);break}if(h(),!e)return i;const c=[];for(const f of i){const p=Sr(f,e);p.length&&c.push(p)}return c}const j="none";class Vt{constructor(t){this.defaultOptions={maxRandomnessOffset:2,roughness:1,bowing:1,stroke:"#000",strokeWidth:1,curveTightness:0,curveFitting:.95,curveStepCount:9,fillStyle:"hachure",fillWeight:-1,hachureAngle:-41,hachureGap:-1,dashOffset:-1,dashGap:-1,zigzagOffset:-1,seed:0,disableMultiStroke:!1,disableMultiStrokeFill:!1,preserveVertices:!1,fillShapeRoughnessGain:.8},this.config=t||{},this.config.options&&(this.defaultOptions=this._o(this.config.options))}static newSeed(){return ur()}_o(t){return t?Object.assign({},this.defaultOptions,t):this.defaultOptions}_d(t,e,n){return{shape:t,sets:e||[],options:n||this.defaultOptions}}line(t,e,n,s,i){const o=this._o(i);return this._d("line",[De(t,e,n,s,o)],o)}rectangle(t,e,n,s,i){const o=this._o(i),a=[],u=dr(t,e,n,s,o);if(o.fill){const l=[[t,e],[t+n,e],[t+n,e+s],[t,e+s]];o.fillStyle==="solid"?a.push(Ht([l],o)):a.push(ct([l],o))}return o.stroke!==j&&a.push(u),this._d("rectangle",a,o)}ellipse(t,e,n,s,i){const o=this._o(i),a=[],u=$e(n,s,o),l=Xt(t,e,o,u);if(o.fill)if(o.fillStyle==="solid"){const h=Xt(t,e,o,u).opset;h.type="fillPath",a.push(h)}else a.push(ct([l.estimatedPoints],o));return o.stroke!==j&&a.push(l.opset),this._d("ellipse",a,o)}circle(t,e,n,s){const i=this.ellipse(t,e,n,n,s);return i.shape="circle",i}linearPath(t,e){const n=this._o(e);return this._d("linearPath",[kt(t,!1,n)],n)}arc(t,e,n,s,i,o,a=!1,u){const l=this._o(u),h=[],c=ae(t,e,n,s,i,o,a,!0,l);if(a&&l.fill)if(l.fillStyle==="solid"){const f=Object.assign({},l);f.disableMultiStroke=!0;const p=ae(t,e,n,s,i,o,!0,!1,f);p.type="fillPath",h.push(p)}else h.push(yr(t,e,n,s,i,o,l));return l.stroke!==j&&h.push(c),this._d("arc",h,l)}curve(t,e){const n=this._o(e),s=[],i=se(t,n);if(n.fill&&n.fill!==j)if(n.fillStyle==="solid"){const o=se(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(o.ops)})}else{const o=[],a=t;if(a.length){const l=typeof a[0][0]=="number"?[a]:a;for(const h of l)h.length<3?o.push(...h):h.length===3?o.push(...Zt(he([h[0],h[0],h[1],h[2]]),10,(1+n.roughness)/2)):o.push(...Zt(he(h),10,(1+n.roughness)/2))}o.length&&s.push(ct([o],n))}return n.stroke!==j&&s.push(i),this._d("curve",s,n)}polygon(t,e){const n=this._o(e),s=[],i=kt(t,!0,n);return n.fill&&(n.fillStyle==="solid"?s.push(Ht([t],n)):s.push(ct([t],n))),n.stroke!==j&&s.push(i),this._d("polygon",s,n)}path(t,e){const n=this._o(e),s=[];if(!t)return this._d("path",s,n);t=(t||"").replace(/\n/g," ").replace(/(-\s)/g,"-").replace("/(ss)/g"," ");const i=n.fill&&n.fill!=="transparent"&&n.fill!==j,o=n.stroke!==j,a=!!(n.simplification&&n.simplification<1),u=a?4-4*(n.simplification||1):(1+n.roughness)/2,l=Or(t,1,u),h=ie(t,n);if(i)if(n.fillStyle==="solid")if(l.length===1){const c=ie(t,Object.assign(Object.assign({},n),{disableMultiStroke:!0,roughness:n.roughness?n.roughness+n.fillShapeRoughnessGain:0}));s.push({type:"fillPath",ops:this._mergedShape(c.ops)})}else s.push(Ht(l,n));else s.push(ct(l,n));return o&&(a?l.forEach(c=>{s.push(kt(c,!1,n))}):s.push(h)),this._d("path",s,n)}opsToPath(t,e){let n="";for(const s of t.ops){const i=typeof e=="number"&&e>=0?s.data.map(o=>+o.toFixed(e)):s.data;switch(s.op){case"move":n+=`M${i[0]} ${i[1]} `;break;case"bcurveTo":n+=`C${i[0]} ${i[1]}, ${i[2]} ${i[3]}, ${i[4]} ${i[5]} `;break;case"lineTo":n+=`L${i[0]} ${i[1]} `;break}}return n.trim()}toPaths(t){const e=t.sets||[],n=t.options||this.defaultOptions,s=[];for(const i of e){let o=null;switch(i.type){case"path":o={d:this.opsToPath(i),stroke:n.stroke,strokeWidth:n.strokeWidth,fill:j};break;case"fillPath":o={d:this.opsToPath(i),stroke:j,strokeWidth:0,fill:n.fill||j};break;case"fillSketch":o=this.fillSketch(i,n);break}o&&s.push(o)}return s}fillSketch(t,e){let n=e.fillWeight;return n<0&&(n=e.strokeWidth/2),{d:this.opsToPath(t),stroke:e.fill||j,strokeWidth:n,fill:j}}_mergedShape(t){return t.filter((e,n)=>n===0?!0:e.op!=="move")}}class kr{constructor(t,e){this.canvas=t,this.ctx=this.canvas.getContext("2d"),this.gen=new Vt(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.ctx,i=t.options.fixedDecimalPlaceDigits;for(const o of e)switch(o.type){case"path":s.save(),s.strokeStyle=n.stroke==="none"?"transparent":n.stroke,s.lineWidth=n.strokeWidth,n.strokeLineDash&&s.setLineDash(n.strokeLineDash),n.strokeLineDashOffset&&(s.lineDashOffset=n.strokeLineDashOffset),this._drawToContext(s,o,i),s.restore();break;case"fillPath":{s.save(),s.fillStyle=n.fill||"";const a=t.shape==="curve"||t.shape==="polygon"||t.shape==="path"?"evenodd":"nonzero";this._drawToContext(s,o,i,a),s.restore();break}case"fillSketch":this.fillSketch(s,o,n);break}}fillSketch(t,e,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2),t.save(),n.fillLineDash&&t.setLineDash(n.fillLineDash),n.fillLineDashOffset&&(t.lineDashOffset=n.fillLineDashOffset),t.strokeStyle=n.fill||"",t.lineWidth=s,this._drawToContext(t,e,n.fixedDecimalPlaceDigits),t.restore()}_drawToContext(t,e,n,s="nonzero"){t.beginPath();for(const i of e.ops){const o=typeof n=="number"&&n>=0?i.data.map(a=>+a.toFixed(n)):i.data;switch(i.op){case"move":t.moveTo(o[0],o[1]);break;case"bcurveTo":t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5]);break;case"lineTo":t.lineTo(o[0],o[1]);break}}e.type==="fillPath"?t.fill(s):t.stroke()}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}line(t,e,n,s,i){const o=this.gen.line(t,e,n,s,i);return this.draw(o),o}rectangle(t,e,n,s,i){const o=this.gen.rectangle(t,e,n,s,i);return this.draw(o),o}ellipse(t,e,n,s,i){const o=this.gen.ellipse(t,e,n,s,i);return this.draw(o),o}circle(t,e,n,s){const i=this.gen.circle(t,e,n,s);return this.draw(i),i}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n),n}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n),n}arc(t,e,n,s,i,o,a=!1,u){const l=this.gen.arc(t,e,n,s,i,o,a,u);return this.draw(l),l}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n),n}path(t,e){const n=this.gen.path(t,e);return this.draw(n),n}}const At="http://www.w3.org/2000/svg";class Er{constructor(t,e){this.svg=t,this.gen=new Vt(e)}draw(t){const e=t.sets||[],n=t.options||this.getDefaultOptions(),s=this.svg.ownerDocument||window.document,i=s.createElementNS(At,"g"),o=t.options.fixedDecimalPlaceDigits;for(const a of e){let u=null;switch(a.type){case"path":{u=s.createElementNS(At,"path"),u.setAttribute("d",this.opsToPath(a,o)),u.setAttribute("stroke",n.stroke),u.setAttribute("stroke-width",n.strokeWidth+""),u.setAttribute("fill","none"),n.strokeLineDash&&u.setAttribute("stroke-dasharray",n.strokeLineDash.join(" ").trim()),n.strokeLineDashOffset&&u.setAttribute("stroke-dashoffset",`${n.strokeLineDashOffset}`);break}case"fillPath":{u=s.createElementNS(At,"path"),u.setAttribute("d",this.opsToPath(a,o)),u.setAttribute("stroke","none"),u.setAttribute("stroke-width","0"),u.setAttribute("fill",n.fill||""),(t.shape==="curve"||t.shape==="polygon")&&u.setAttribute("fill-rule","evenodd");break}case"fillSketch":{u=this.fillSketch(s,a,n);break}}u&&i.appendChild(u)}return i}fillSketch(t,e,n){let s=n.fillWeight;s<0&&(s=n.strokeWidth/2);const i=t.createElementNS(At,"path");return i.setAttribute("d",this.opsToPath(e,n.fixedDecimalPlaceDigits)),i.setAttribute("stroke",n.fill||""),i.setAttribute("stroke-width",s+""),i.setAttribute("fill","none"),n.fillLineDash&&i.setAttribute("stroke-dasharray",n.fillLineDash.join(" ").trim()),n.fillLineDashOffset&&i.setAttribute("stroke-dashoffset",`${n.fillLineDashOffset}`),i}get generator(){return this.gen}getDefaultOptions(){return this.gen.defaultOptions}opsToPath(t,e){return this.gen.opsToPath(t,e)}line(t,e,n,s,i){const o=this.gen.line(t,e,n,s,i);return this.draw(o)}rectangle(t,e,n,s,i){const o=this.gen.rectangle(t,e,n,s,i);return this.draw(o)}ellipse(t,e,n,s,i){const o=this.gen.ellipse(t,e,n,s,i);return this.draw(o)}circle(t,e,n,s){const i=this.gen.circle(t,e,n,s);return this.draw(i)}linearPath(t,e){const n=this.gen.linearPath(t,e);return this.draw(n)}polygon(t,e){const n=this.gen.polygon(t,e);return this.draw(n)}arc(t,e,n,s,i,o,a=!1,u){const l=this.gen.arc(t,e,n,s,i,o,a,u);return this.draw(l)}curve(t,e){const n=this.gen.curve(t,e);return this.draw(n)}path(t,e){const n=this.gen.path(t,e);return this.draw(n)}}const Cr={canvas(r,t){return new kr(r,t)},svg(r,t){return new Er(r,t)},generator(r){return new Vt(r)},newSeed(){return Vt.newSeed()}};function Rt(r){"@babel/helpers - typeof";return Rt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rt(r)}var Tr=/^\s+/,Nr=/\s+$/;function x(r,t){if(r=r||"",t=t||{},r instanceof x)return r;if(!(this instanceof x))return new x(r,t);var e=Vr(r);this._originalInput=r,this._r=e.r,this._g=e.g,this._b=e.b,this._a=e.a,this._roundA=Math.round(100*this._a)/100,this._format=t.format||e.format,this._gradientType=t.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=e.ok}x.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(t.r*299+t.g*587+t.b*114)/1e3},getLuminance:function(){var t=this.toRgb(),e,n,s,i,o,a;return e=t.r/255,n=t.g/255,s=t.b/255,e<=.03928?i=e/12.92:i=Math.pow((e+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),s<=.03928?a=s/12.92:a=Math.pow((s+.055)/1.055,2.4),.2126*i+.7152*o+.0722*a},setAlpha:function(t){return this._a=ze(t),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var t=fe(this._r,this._g,this._b);return{h:t.h*360,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=fe(this._r,this._g,this._b),e=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.v*100);return this._a==1?"hsv("+e+", "+n+"%, "+s+"%)":"hsva("+e+", "+n+"%, "+s+"%, "+this._roundA+")"},toHsl:function(){var t=ce(this._r,this._g,this._b);return{h:t.h*360,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=ce(this._r,this._g,this._b),e=Math.round(t.h*360),n=Math.round(t.s*100),s=Math.round(t.l*100);return this._a==1?"hsl("+e+", "+n+"%, "+s+"%)":"hsla("+e+", "+n+"%, "+s+"%, "+this._roundA+")"},toHex:function(t){return pe(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(t){return Ir(this._r,this._g,this._b,this._a,t)},toHex8String:function(t){return"#"+this.toHex8(t)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(R(this._r,255)*100)+"%",g:Math.round(R(this._g,255)*100)+"%",b:Math.round(R(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(R(this._r,255)*100)+"%, "+Math.round(R(this._g,255)*100)+"%, "+Math.round(R(this._b,255)*100)+"%)":"rgba("+Math.round(R(this._r,255)*100)+"%, "+Math.round(R(this._g,255)*100)+"%, "+Math.round(R(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:Yr[pe(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+ge(this._r,this._g,this._b,this._a),n=e,s=this._gradientType?"GradientType = 1, ":"";if(t){var i=x(t);n="#"+ge(i._r,i._g,i._b,i._a)}return"progid:DXImageTransform.Microsoft.gradient("+s+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,s=this._a<1&&this._a>=0,i=!e&&s&&(t==="hex"||t==="hex6"||t==="hex3"||t==="hex4"||t==="hex8"||t==="name");return i?t==="name"&&this._a===0?this.toName():this.toRgbString():(t==="rgb"&&(n=this.toRgbString()),t==="prgb"&&(n=this.toPercentageRgbString()),(t==="hex"||t==="hex6")&&(n=this.toHexString()),t==="hex3"&&(n=this.toHexString(!0)),t==="hex4"&&(n=this.toHex8String(!0)),t==="hex8"&&(n=this.toHex8String()),t==="name"&&(n=this.toName()),t==="hsl"&&(n=this.toHslString()),t==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return x(this.toString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification($r,arguments)},brighten:function(){return this._applyModification(Gr,arguments)},darken:function(){return this._applyModification(zr,arguments)},desaturate:function(){return this._applyModification(Fr,arguments)},saturate:function(){return this._applyModification(Hr,arguments)},greyscale:function(){return this._applyModification(Dr,arguments)},spin:function(){return this._applyModification(Ur,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(Wr,arguments)},complement:function(){return this._applyCombination(qr,arguments)},monochromatic:function(){return this._applyCombination(Xr,arguments)},splitcomplement:function(){return this._applyCombination(jr,arguments)},triad:function(){return this._applyCombination(de,[3])},tetrad:function(){return this._applyCombination(de,[4])}};x.fromRatio=function(r,t){if(Rt(r)=="object"){var e={};for(var n in r)r.hasOwnProperty(n)&&(n==="a"?e[n]=r[n]:e[n]=mt(r[n]));r=e}return x(r,t)};function Vr(r){var t={r:0,g:0,b:0},e=1,n=null,s=null,i=null,o=!1,a=!1;return typeof r=="string"&&(r=Kr(r)),Rt(r)=="object"&&(et(r.r)&&et(r.g)&&et(r.b)?(t=Rr(r.r,r.g,r.b),o=!0,a=String(r.r).substr(-1)==="%"?"prgb":"rgb"):et(r.h)&&et(r.s)&&et(r.v)?(n=mt(r.s),s=mt(r.v),t=Lr(r.h,n,s),o=!0,a="hsv"):et(r.h)&&et(r.s)&&et(r.l)&&(n=mt(r.s),i=mt(r.l),t=Pr(r.h,n,i),o=!0,a="hsl"),r.hasOwnProperty("a")&&(e=r.a)),e=ze(e),{ok:o,format:r.format||a,r:Math.min(255,Math.max(t.r,0)),g:Math.min(255,Math.max(t.g,0)),b:Math.min(255,Math.max(t.b,0)),a:e}}function Rr(r,t,e){return{r:R(r,255)*255,g:R(t,255)*255,b:R(e,255)*255}}function ce(r,t,e){r=R(r,255),t=R(t,255),e=R(e,255);var n=Math.max(r,t,e),s=Math.min(r,t,e),i,o,a=(n+s)/2;if(n==s)i=o=0;else{var u=n-s;switch(o=a>.5?u/(2-n-s):u/(n+s),n){case r:i=(t-e)/u+(t<e?6:0);break;case t:i=(e-r)/u+2;break;case e:i=(r-t)/u+4;break}i/=6}return{h:i,s:o,l:a}}function Pr(r,t,e){var n,s,i;r=R(r,360),t=R(t,100),e=R(e,100);function o(l,h,c){return c<0&&(c+=1),c>1&&(c-=1),c<1/6?l+(h-l)*6*c:c<1/2?h:c<2/3?l+(h-l)*(2/3-c)*6:l}if(t===0)n=s=i=e;else{var a=e<.5?e*(1+t):e+t-e*t,u=2*e-a;n=o(u,a,r+1/3),s=o(u,a,r),i=o(u,a,r-1/3)}return{r:n*255,g:s*255,b:i*255}}function fe(r,t,e){r=R(r,255),t=R(t,255),e=R(e,255);var n=Math.max(r,t,e),s=Math.min(r,t,e),i,o,a=n,u=n-s;if(o=n===0?0:u/n,n==s)i=0;else{switch(n){case r:i=(t-e)/u+(t<e?6:0);break;case t:i=(e-r)/u+2;break;case e:i=(r-t)/u+4;break}i/=6}return{h:i,s:o,v:a}}function Lr(r,t,e){r=R(r,360)*6,t=R(t,100),e=R(e,100);var n=Math.floor(r),s=r-n,i=e*(1-t),o=e*(1-s*t),a=e*(1-(1-s)*t),u=n%6,l=[e,o,i,i,a,e][u],h=[a,e,e,o,i,i][u],c=[i,i,a,e,e,o][u];return{r:l*255,g:h*255,b:c*255}}function pe(r,t,e,n){var s=[K(Math.round(r).toString(16)),K(Math.round(t).toString(16)),K(Math.round(e).toString(16))];return n&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0):s.join("")}function Ir(r,t,e,n,s){var i=[K(Math.round(r).toString(16)),K(Math.round(t).toString(16)),K(Math.round(e).toString(16)),K(Ue(n))];return s&&i[0].charAt(0)==i[0].charAt(1)&&i[1].charAt(0)==i[1].charAt(1)&&i[2].charAt(0)==i[2].charAt(1)&&i[3].charAt(0)==i[3].charAt(1)?i[0].charAt(0)+i[1].charAt(0)+i[2].charAt(0)+i[3].charAt(0):i.join("")}function ge(r,t,e,n){var s=[K(Ue(n)),K(Math.round(r).toString(16)),K(Math.round(t).toString(16)),K(Math.round(e).toString(16))];return s.join("")}x.equals=function(r,t){return!r||!t?!1:x(r).toRgbString()==x(t).toRgbString()};x.random=function(){return x.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function Fr(r,t){t=t===0?0:t||10;var e=x(r).toHsl();return e.s-=t/100,e.s=It(e.s),x(e)}function Hr(r,t){t=t===0?0:t||10;var e=x(r).toHsl();return e.s+=t/100,e.s=It(e.s),x(e)}function Dr(r){return x(r).desaturate(100)}function $r(r,t){t=t===0?0:t||10;var e=x(r).toHsl();return e.l+=t/100,e.l=It(e.l),x(e)}function Gr(r,t){t=t===0?0:t||10;var e=x(r).toRgb();return e.r=Math.max(0,Math.min(255,e.r-Math.round(255*-(t/100)))),e.g=Math.max(0,Math.min(255,e.g-Math.round(255*-(t/100)))),e.b=Math.max(0,Math.min(255,e.b-Math.round(255*-(t/100)))),x(e)}function zr(r,t){t=t===0?0:t||10;var e=x(r).toHsl();return e.l-=t/100,e.l=It(e.l),x(e)}function Ur(r,t){var e=x(r).toHsl(),n=(e.h+t)%360;return e.h=n<0?360+n:n,x(e)}function qr(r){var t=x(r).toHsl();return t.h=(t.h+180)%360,x(t)}function de(r,t){if(isNaN(t)||t<=0)throw new Error("Argument to polyad must be a positive number");for(var e=x(r).toHsl(),n=[x(r)],s=360/t,i=1;i<t;i++)n.push(x({h:(e.h+i*s)%360,s:e.s,l:e.l}));return n}function jr(r){var t=x(r).toHsl(),e=t.h;return[x(r),x({h:(e+72)%360,s:t.s,l:t.l}),x({h:(e+216)%360,s:t.s,l:t.l})]}function Wr(r,t,e){t=t||6,e=e||30;var n=x(r).toHsl(),s=360/e,i=[x(r)];for(n.h=(n.h-(s*t>>1)+720)%360;--t;)n.h=(n.h+s)%360,i.push(x(n));return i}function Xr(r,t){t=t||6;for(var e=x(r).toHsv(),n=e.h,s=e.s,i=e.v,o=[],a=1/t;t--;)o.push(x({h:n,s,v:i})),i=(i+a)%1;return o}x.mix=function(r,t,e){e=e===0?0:e||50;var n=x(r).toRgb(),s=x(t).toRgb(),i=e/100,o={r:(s.r-n.r)*i+n.r,g:(s.g-n.g)*i+n.g,b:(s.b-n.b)*i+n.b,a:(s.a-n.a)*i+n.a};return x(o)};x.readability=function(r,t){var e=x(r),n=x(t);return(Math.max(e.getLuminance(),n.getLuminance())+.05)/(Math.min(e.getLuminance(),n.getLuminance())+.05)};x.isReadable=function(r,t,e){var n=x.readability(r,t),s,i;switch(i=!1,s=Jr(e),s.level+s.size){case"AAsmall":case"AAAlarge":i=n>=4.5;break;case"AAlarge":i=n>=3;break;case"AAAsmall":i=n>=7;break}return i};x.mostReadable=function(r,t,e){var n=null,s=0,i,o,a,u;e=e||{},o=e.includeFallbackColors,a=e.level,u=e.size;for(var l=0;l<t.length;l++)i=x.readability(r,t[l]),i>s&&(s=i,n=x(t[l]));return x.isReadable(r,n,{level:a,size:u})||!o?n:(e.includeFallbackColors=!1,x.mostReadable(r,["#fff","#000"],e))};var Qt=x.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},Yr=x.hexNames=Br(Qt);function Br(r){var t={};for(var e in r)r.hasOwnProperty(e)&&(t[r[e]]=e);return t}function ze(r){return r=parseFloat(r),(isNaN(r)||r<0||r>1)&&(r=1),r}function R(r,t){Zr(r)&&(r="100%");var e=Qr(r);return r=Math.min(t,Math.max(0,parseFloat(r))),e&&(r=parseInt(r*t,10)/100),Math.abs(r-t)<1e-6?1:r%t/parseFloat(t)}function It(r){return Math.min(1,Math.max(0,r))}function W(r){return parseInt(r,16)}function Zr(r){return typeof r=="string"&&r.indexOf(".")!=-1&&parseFloat(r)===1}function Qr(r){return typeof r=="string"&&r.indexOf("%")!=-1}function K(r){return r.length==1?"0"+r:""+r}function mt(r){return r<=1&&(r=r*100+"%"),r}function Ue(r){return Math.round(parseFloat(r)*255).toString(16)}function me(r){return W(r)/255}var Z=function(){var r="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",e="(?:"+t+")|(?:"+r+")",n="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?",s="[\\s|\\(]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")[,|\\s]+("+e+")\\s*\\)?";return{CSS_UNIT:new RegExp(e),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+s),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+s),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+s),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function et(r){return!!Z.CSS_UNIT.exec(r)}function Kr(r){r=r.replace(Tr,"").replace(Nr,"").toLowerCase();var t=!1;if(Qt[r])r=Qt[r],t=!0;else if(r=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var e;return(e=Z.rgb.exec(r))?{r:e[1],g:e[2],b:e[3]}:(e=Z.rgba.exec(r))?{r:e[1],g:e[2],b:e[3],a:e[4]}:(e=Z.hsl.exec(r))?{h:e[1],s:e[2],l:e[3]}:(e=Z.hsla.exec(r))?{h:e[1],s:e[2],l:e[3],a:e[4]}:(e=Z.hsv.exec(r))?{h:e[1],s:e[2],v:e[3]}:(e=Z.hsva.exec(r))?{h:e[1],s:e[2],v:e[3],a:e[4]}:(e=Z.hex8.exec(r))?{r:W(e[1]),g:W(e[2]),b:W(e[3]),a:me(e[4]),format:t?"name":"hex8"}:(e=Z.hex6.exec(r))?{r:W(e[1]),g:W(e[2]),b:W(e[3]),format:t?"name":"hex"}:(e=Z.hex4.exec(r))?{r:W(e[1]+""+e[1]),g:W(e[2]+""+e[2]),b:W(e[3]+""+e[3]),a:me(e[4]+""+e[4]),format:t?"name":"hex8"}:(e=Z.hex3.exec(r))?{r:W(e[1]+""+e[1]),g:W(e[2]+""+e[2]),b:W(e[3]+""+e[3]),format:t?"name":"hex"}:!1}function Jr(r){var t,e;return r=r||{level:"AA",size:"small"},t=(r.level||"AA").toUpperCase(),e=(r.size||"small").toLowerCase(),t!=="AA"&&t!=="AAA"&&(t="AA"),e!=="small"&&e!=="large"&&(e="small"),{level:t,size:e}}/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var qe=function(r,t){return(qe=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,n){e.__proto__=n}||function(e,n){for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])})(r,t)};function je(r,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function e(){this.constructor=r}qe(r,t),r.prototype=t===null?Object.create(t):(e.prototype=t.prototype,new e)}function We(r){var t="";Array.isArray(r)||(r=[r]);for(var e=0;e<r.length;e++){var n=r[e];if(n.type===y.CLOSE_PATH)t+="z";else if(n.type===y.HORIZ_LINE_TO)t+=(n.relative?"h":"H")+n.x;else if(n.type===y.VERT_LINE_TO)t+=(n.relative?"v":"V")+n.y;else if(n.type===y.MOVE_TO)t+=(n.relative?"m":"M")+n.x+" "+n.y;else if(n.type===y.LINE_TO)t+=(n.relative?"l":"L")+n.x+" "+n.y;else if(n.type===y.CURVE_TO)t+=(n.relative?"c":"C")+n.x1+" "+n.y1+" "+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===y.SMOOTH_CURVE_TO)t+=(n.relative?"s":"S")+n.x2+" "+n.y2+" "+n.x+" "+n.y;else if(n.type===y.QUAD_TO)t+=(n.relative?"q":"Q")+n.x1+" "+n.y1+" "+n.x+" "+n.y;else if(n.type===y.SMOOTH_QUAD_TO)t+=(n.relative?"t":"T")+n.x+" "+n.y;else{if(n.type!==y.ARC)throw new Error('Unexpected command type "'+n.type+'" at index '+e+".");t+=(n.relative?"a":"A")+n.rX+" "+n.rY+" "+n.xRot+" "+ +n.lArcFlag+" "+ +n.sweepFlag+" "+n.x+" "+n.y}}return t}function Kt(r,t){var e=r[0],n=r[1];return[e*Math.cos(t)-n*Math.sin(t),e*Math.sin(t)+n*Math.cos(t)]}function Q(){for(var r=[],t=0;t<arguments.length;t++)r[t]=arguments[t];for(var e=0;e<r.length;e++)if(typeof r[e]!="number")throw new Error("assertNumbers arguments["+e+"] is not a number. "+typeof r[e]+" == typeof "+r[e]);return!0}var nt=Math.PI;function Dt(r,t,e){r.lArcFlag=r.lArcFlag===0?0:1,r.sweepFlag=r.sweepFlag===0?0:1;var n=r.rX,s=r.rY,i=r.x,o=r.y;n=Math.abs(r.rX),s=Math.abs(r.rY);var a=Kt([(t-i)/2,(e-o)/2],-r.xRot/180*nt),u=a[0],l=a[1],h=Math.pow(u,2)/Math.pow(n,2)+Math.pow(l,2)/Math.pow(s,2);1<h&&(n*=Math.sqrt(h),s*=Math.sqrt(h)),r.rX=n,r.rY=s;var c=Math.pow(n,2)*Math.pow(l,2)+Math.pow(s,2)*Math.pow(u,2),f=(r.lArcFlag!==r.sweepFlag?1:-1)*Math.sqrt(Math.max(0,(Math.pow(n,2)*Math.pow(s,2)-c)/c)),p=n*l/s*f,g=-s*u/n*f,d=Kt([p,g],r.xRot/180*nt);r.cX=d[0]+(t+i)/2,r.cY=d[1]+(e+o)/2,r.phi1=Math.atan2((l-g)/s,(u-p)/n),r.phi2=Math.atan2((-l-g)/s,(-u-p)/n),r.sweepFlag===0&&r.phi2>r.phi1&&(r.phi2-=2*nt),r.sweepFlag===1&&r.phi2<r.phi1&&(r.phi2+=2*nt),r.phi1*=180/nt,r.phi2*=180/nt}function ye(r,t,e){Q(r,t,e);var n=r*r+t*t-e*e;if(0>n)return[];if(n===0)return[[r*e/(r*r+t*t),t*e/(r*r+t*t)]];var s=Math.sqrt(n);return[[(r*e+t*s)/(r*r+t*t),(t*e-r*s)/(r*r+t*t)],[(r*e-t*s)/(r*r+t*t),(t*e+r*s)/(r*r+t*t)]]}var P,rt=Math.PI/180;function be(r,t,e){return(1-e)*r+e*t}function ve(r,t,e,n){return r+Math.cos(n/180*nt)*t+Math.sin(n/180*nt)*e}function xe(r,t,e,n){var s=1e-6,i=t-r,o=e-t,a=3*i+3*(n-e)-6*o,u=6*(o-i),l=3*i;return Math.abs(a)<s?[-l/u]:function(h,c,f){var p=h*h/4-c;if(p<-f)return[];if(p<=f)return[-h/2];var g=Math.sqrt(p);return[-h/2-g,-h/2+g]}(u/a,l/a,s)}function Me(r,t,e,n,s){var i=1-s;return r*(i*i*i)+t*(3*i*i*s)+e*(3*i*s*s)+n*(s*s*s)}(function(r){function t(){return s(function(a,u,l){return a.relative&&(a.x1!==void 0&&(a.x1+=u),a.y1!==void 0&&(a.y1+=l),a.x2!==void 0&&(a.x2+=u),a.y2!==void 0&&(a.y2+=l),a.x!==void 0&&(a.x+=u),a.y!==void 0&&(a.y+=l),a.relative=!1),a})}function e(){var a=NaN,u=NaN,l=NaN,h=NaN;return s(function(c,f,p){return c.type&y.SMOOTH_CURVE_TO&&(c.type=y.CURVE_TO,a=isNaN(a)?f:a,u=isNaN(u)?p:u,c.x1=c.relative?f-a:2*f-a,c.y1=c.relative?p-u:2*p-u),c.type&y.CURVE_TO?(a=c.relative?f+c.x2:c.x2,u=c.relative?p+c.y2:c.y2):(a=NaN,u=NaN),c.type&y.SMOOTH_QUAD_TO&&(c.type=y.QUAD_TO,l=isNaN(l)?f:l,h=isNaN(h)?p:h,c.x1=c.relative?f-l:2*f-l,c.y1=c.relative?p-h:2*p-h),c.type&y.QUAD_TO?(l=c.relative?f+c.x1:c.x1,h=c.relative?p+c.y1:c.y1):(l=NaN,h=NaN),c})}function n(){var a=NaN,u=NaN;return s(function(l,h,c){if(l.type&y.SMOOTH_QUAD_TO&&(l.type=y.QUAD_TO,a=isNaN(a)?h:a,u=isNaN(u)?c:u,l.x1=l.relative?h-a:2*h-a,l.y1=l.relative?c-u:2*c-u),l.type&y.QUAD_TO){a=l.relative?h+l.x1:l.x1,u=l.relative?c+l.y1:l.y1;var f=l.x1,p=l.y1;l.type=y.CURVE_TO,l.x1=((l.relative?0:h)+2*f)/3,l.y1=((l.relative?0:c)+2*p)/3,l.x2=(l.x+2*f)/3,l.y2=(l.y+2*p)/3}else a=NaN,u=NaN;return l})}function s(a){var u=0,l=0,h=NaN,c=NaN;return function(f){if(isNaN(h)&&!(f.type&y.MOVE_TO))throw new Error("path must start with moveto");var p=a(f,u,l,h,c);return f.type&y.CLOSE_PATH&&(u=h,l=c),f.x!==void 0&&(u=f.relative?u+f.x:f.x),f.y!==void 0&&(l=f.relative?l+f.y:f.y),f.type&y.MOVE_TO&&(h=u,c=l),p}}function i(a,u,l,h,c,f){return Q(a,u,l,h,c,f),s(function(p,g,d,m){var b=p.x1,v=p.x2,A=p.relative&&!isNaN(m),M=p.x!==void 0?p.x:A?0:g,E=p.y!==void 0?p.y:A?0:d;function k(ht){return ht*ht}p.type&y.HORIZ_LINE_TO&&u!==0&&(p.type=y.LINE_TO,p.y=p.relative?0:d),p.type&y.VERT_LINE_TO&&l!==0&&(p.type=y.LINE_TO,p.x=p.relative?0:g),p.x!==void 0&&(p.x=p.x*a+E*l+(A?0:c)),p.y!==void 0&&(p.y=M*u+p.y*h+(A?0:f)),p.x1!==void 0&&(p.x1=p.x1*a+p.y1*l+(A?0:c)),p.y1!==void 0&&(p.y1=b*u+p.y1*h+(A?0:f)),p.x2!==void 0&&(p.x2=p.x2*a+p.y2*l+(A?0:c)),p.y2!==void 0&&(p.y2=v*u+p.y2*h+(A?0:f));var S=a*h-u*l;if(p.xRot!==void 0&&(a!==1||u!==0||l!==0||h!==1))if(S===0)delete p.rX,delete p.rY,delete p.xRot,delete p.lArcFlag,delete p.sweepFlag,p.type=y.LINE_TO;else{var T=p.xRot*Math.PI/180,N=Math.sin(T),q=Math.cos(T),G=1/k(p.rX),V=1/k(p.rY),C=k(q)*G+k(N)*V,I=2*N*q*(G-V),$=k(N)*G+k(q)*V,H=C*h*h-I*u*h+$*u*u,z=I*(a*h+u*l)-2*(C*l*h+$*a*u),Y=C*l*l-I*a*l+$*a*a,F=(Math.atan2(z,H-Y)+Math.PI)%Math.PI/2,L=Math.sin(F),J=Math.cos(F);p.rX=Math.abs(S)/Math.sqrt(H*k(J)+z*L*J+Y*k(L)),p.rY=Math.abs(S)/Math.sqrt(H*k(L)-z*L*J+Y*k(J)),p.xRot=180*F/Math.PI}return p.sweepFlag!==void 0&&0>S&&(p.sweepFlag=+!p.sweepFlag),p})}function o(){return function(a){var u={};for(var l in a)u[l]=a[l];return u}}r.ROUND=function(a){function u(l){return Math.round(l*a)/a}return a===void 0&&(a=1e13),Q(a),function(l){return l.x1!==void 0&&(l.x1=u(l.x1)),l.y1!==void 0&&(l.y1=u(l.y1)),l.x2!==void 0&&(l.x2=u(l.x2)),l.y2!==void 0&&(l.y2=u(l.y2)),l.x!==void 0&&(l.x=u(l.x)),l.y!==void 0&&(l.y=u(l.y)),l.rX!==void 0&&(l.rX=u(l.rX)),l.rY!==void 0&&(l.rY=u(l.rY)),l}},r.TO_ABS=t,r.TO_REL=function(){return s(function(a,u,l){return a.relative||(a.x1!==void 0&&(a.x1-=u),a.y1!==void 0&&(a.y1-=l),a.x2!==void 0&&(a.x2-=u),a.y2!==void 0&&(a.y2-=l),a.x!==void 0&&(a.x-=u),a.y!==void 0&&(a.y-=l),a.relative=!0),a})},r.NORMALIZE_HVZ=function(a,u,l){return a===void 0&&(a=!0),u===void 0&&(u=!0),l===void 0&&(l=!0),s(function(h,c,f,p,g){if(isNaN(p)&&!(h.type&y.MOVE_TO))throw new Error("path must start with moveto");return u&&h.type&y.HORIZ_LINE_TO&&(h.type=y.LINE_TO,h.y=h.relative?0:f),l&&h.type&y.VERT_LINE_TO&&(h.type=y.LINE_TO,h.x=h.relative?0:c),a&&h.type&y.CLOSE_PATH&&(h.type=y.LINE_TO,h.x=h.relative?p-c:p,h.y=h.relative?g-f:g),h.type&y.ARC&&(h.rX===0||h.rY===0)&&(h.type=y.LINE_TO,delete h.rX,delete h.rY,delete h.xRot,delete h.lArcFlag,delete h.sweepFlag),h})},r.NORMALIZE_ST=e,r.QT_TO_C=n,r.INFO=s,r.SANITIZE=function(a){a===void 0&&(a=0),Q(a);var u=NaN,l=NaN,h=NaN,c=NaN;return s(function(f,p,g,d,m){var b=Math.abs,v=!1,A=0,M=0;if(f.type&y.SMOOTH_CURVE_TO&&(A=isNaN(u)?0:p-u,M=isNaN(l)?0:g-l),f.type&(y.CURVE_TO|y.SMOOTH_CURVE_TO)?(u=f.relative?p+f.x2:f.x2,l=f.relative?g+f.y2:f.y2):(u=NaN,l=NaN),f.type&y.SMOOTH_QUAD_TO?(h=isNaN(h)?p:2*p-h,c=isNaN(c)?g:2*g-c):f.type&y.QUAD_TO?(h=f.relative?p+f.x1:f.x1,c=f.relative?g+f.y1:f.y2):(h=NaN,c=NaN),f.type&y.LINE_COMMANDS||f.type&y.ARC&&(f.rX===0||f.rY===0||!f.lArcFlag)||f.type&y.CURVE_TO||f.type&y.SMOOTH_CURVE_TO||f.type&y.QUAD_TO||f.type&y.SMOOTH_QUAD_TO){var E=f.x===void 0?0:f.relative?f.x:f.x-p,k=f.y===void 0?0:f.relative?f.y:f.y-g;A=isNaN(h)?f.x1===void 0?A:f.relative?f.x:f.x1-p:h-p,M=isNaN(c)?f.y1===void 0?M:f.relative?f.y:f.y1-g:c-g;var S=f.x2===void 0?0:f.relative?f.x:f.x2-p,T=f.y2===void 0?0:f.relative?f.y:f.y2-g;b(E)<=a&&b(k)<=a&&b(A)<=a&&b(M)<=a&&b(S)<=a&&b(T)<=a&&(v=!0)}return f.type&y.CLOSE_PATH&&b(p-d)<=a&&b(g-m)<=a&&(v=!0),v?[]:f})},r.MATRIX=i,r.ROTATE=function(a,u,l){u===void 0&&(u=0),l===void 0&&(l=0),Q(a,u,l);var h=Math.sin(a),c=Math.cos(a);return i(c,h,-h,c,u-u*c+l*h,l-u*h-l*c)},r.TRANSLATE=function(a,u){return u===void 0&&(u=0),Q(a,u),i(1,0,0,1,a,u)},r.SCALE=function(a,u){return u===void 0&&(u=a),Q(a,u),i(a,0,0,u,0,0)},r.SKEW_X=function(a){return Q(a),i(1,0,Math.atan(a),1,0,0)},r.SKEW_Y=function(a){return Q(a),i(1,Math.atan(a),0,1,0,0)},r.X_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),Q(a),i(-1,0,0,1,a,0)},r.Y_AXIS_SYMMETRY=function(a){return a===void 0&&(a=0),Q(a),i(1,0,0,-1,0,a)},r.A_TO_C=function(){return s(function(a,u,l){return y.ARC===a.type?function(h,c,f){var p,g,d,m;h.cX||Dt(h,c,f);for(var b=Math.min(h.phi1,h.phi2),v=Math.max(h.phi1,h.phi2)-b,A=Math.ceil(v/90),M=new Array(A),E=c,k=f,S=0;S<A;S++){var T=be(h.phi1,h.phi2,S/A),N=be(h.phi1,h.phi2,(S+1)/A),q=N-T,G=4/3*Math.tan(q*rt/4),V=[Math.cos(T*rt)-G*Math.sin(T*rt),Math.sin(T*rt)+G*Math.cos(T*rt)],C=V[0],I=V[1],$=[Math.cos(N*rt),Math.sin(N*rt)],H=$[0],z=$[1],Y=[H+G*Math.sin(N*rt),z-G*Math.cos(N*rt)],F=Y[0],L=Y[1];M[S]={relative:h.relative,type:y.CURVE_TO};var J=function(ht,pt){var ne=Kt([ht*h.rX,pt*h.rY],h.xRot),Qe=ne[0],Ke=ne[1];return[h.cX+Qe,h.cY+Ke]};p=J(C,I),M[S].x1=p[0],M[S].y1=p[1],g=J(F,L),M[S].x2=g[0],M[S].y2=g[1],d=J(H,z),M[S].x=d[0],M[S].y=d[1],h.relative&&(M[S].x1-=E,M[S].y1-=k,M[S].x2-=E,M[S].y2-=k,M[S].x-=E,M[S].y-=k),E=(m=[M[S].x,M[S].y])[0],k=m[1]}return M}(a,a.relative?0:u,a.relative?0:l):a})},r.ANNOTATE_ARCS=function(){return s(function(a,u,l){return a.relative&&(u=0,l=0),y.ARC===a.type&&Dt(a,u,l),a})},r.CLONE=o,r.CALCULATE_BOUNDS=function(){var a=function(f){var p={};for(var g in f)p[g]=f[g];return p},u=t(),l=n(),h=e(),c=s(function(f,p,g){var d=h(l(u(a(f))));function m(L){L>c.maxX&&(c.maxX=L),L<c.minX&&(c.minX=L)}function b(L){L>c.maxY&&(c.maxY=L),L<c.minY&&(c.minY=L)}if(d.type&y.DRAWING_COMMANDS&&(m(p),b(g)),d.type&y.HORIZ_LINE_TO&&m(d.x),d.type&y.VERT_LINE_TO&&b(d.y),d.type&y.LINE_TO&&(m(d.x),b(d.y)),d.type&y.CURVE_TO){m(d.x),b(d.y);for(var v=0,A=xe(p,d.x1,d.x2,d.x);v<A.length;v++)0<(F=A[v])&&1>F&&m(Me(p,d.x1,d.x2,d.x,F));for(var M=0,E=xe(g,d.y1,d.y2,d.y);M<E.length;M++)0<(F=E[M])&&1>F&&b(Me(g,d.y1,d.y2,d.y,F))}if(d.type&y.ARC){m(d.x),b(d.y),Dt(d,p,g);for(var k=d.xRot/180*Math.PI,S=Math.cos(k)*d.rX,T=Math.sin(k)*d.rX,N=-Math.sin(k)*d.rY,q=Math.cos(k)*d.rY,G=d.phi1<d.phi2?[d.phi1,d.phi2]:-180>d.phi2?[d.phi2+360,d.phi1+360]:[d.phi2,d.phi1],V=G[0],C=G[1],I=function(L){var J=L[0],ht=L[1],pt=180*Math.atan2(ht,J)/Math.PI;return pt<V?pt+360:pt},$=0,H=ye(N,-S,0).map(I);$<H.length;$++)(F=H[$])>V&&F<C&&m(ve(d.cX,S,N,F));for(var z=0,Y=ye(q,-T,0).map(I);z<Y.length;z++){var F;(F=Y[z])>V&&F<C&&b(ve(d.cY,T,q,F))}}return f});return c.minX=1/0,c.maxX=-1/0,c.minY=1/0,c.maxY=-1/0,c}})(P||(P={}));var B,Xe=function(){function r(){}return r.prototype.round=function(t){return this.transform(P.ROUND(t))},r.prototype.toAbs=function(){return this.transform(P.TO_ABS())},r.prototype.toRel=function(){return this.transform(P.TO_REL())},r.prototype.normalizeHVZ=function(t,e,n){return this.transform(P.NORMALIZE_HVZ(t,e,n))},r.prototype.normalizeST=function(){return this.transform(P.NORMALIZE_ST())},r.prototype.qtToC=function(){return this.transform(P.QT_TO_C())},r.prototype.aToC=function(){return this.transform(P.A_TO_C())},r.prototype.sanitize=function(t){return this.transform(P.SANITIZE(t))},r.prototype.translate=function(t,e){return this.transform(P.TRANSLATE(t,e))},r.prototype.scale=function(t,e){return this.transform(P.SCALE(t,e))},r.prototype.rotate=function(t,e,n){return this.transform(P.ROTATE(t,e,n))},r.prototype.matrix=function(t,e,n,s,i,o){return this.transform(P.MATRIX(t,e,n,s,i,o))},r.prototype.skewX=function(t){return this.transform(P.SKEW_X(t))},r.prototype.skewY=function(t){return this.transform(P.SKEW_Y(t))},r.prototype.xSymmetry=function(t){return this.transform(P.X_AXIS_SYMMETRY(t))},r.prototype.ySymmetry=function(t){return this.transform(P.Y_AXIS_SYMMETRY(t))},r.prototype.annotateArcs=function(){return this.transform(P.ANNOTATE_ARCS())},r}(),tn=function(r){return r===" "||r==="	"||r==="\r"||r===`
`},we=function(r){return 48<=r.charCodeAt(0)&&r.charCodeAt(0)<=57},en=function(r){function t(){var e=r.call(this)||this;return e.curNumber="",e.curCommandType=-1,e.curCommandRelative=!1,e.canParseCommandOrComma=!0,e.curNumberHasExp=!1,e.curNumberHasExpDigits=!1,e.curNumberHasDecimal=!1,e.curArgs=[],e}return je(t,r),t.prototype.finish=function(e){if(e===void 0&&(e=[]),this.parse(" ",e),this.curArgs.length!==0||!this.canParseCommandOrComma)throw new SyntaxError("Unterminated command at the path end.");return e},t.prototype.parse=function(e,n){var s=this;n===void 0&&(n=[]);for(var i=function(c){n.push(c),s.curArgs.length=0,s.canParseCommandOrComma=!0},o=0;o<e.length;o++){var a=e[o],u=!(this.curCommandType!==y.ARC||this.curArgs.length!==3&&this.curArgs.length!==4||this.curNumber.length!==1||this.curNumber!=="0"&&this.curNumber!=="1"),l=we(a)&&(this.curNumber==="0"&&a==="0"||u);if(!we(a)||l)if(a!=="e"&&a!=="E")if(a!=="-"&&a!=="+"||!this.curNumberHasExp||this.curNumberHasExpDigits)if(a!=="."||this.curNumberHasExp||this.curNumberHasDecimal||u){if(this.curNumber&&this.curCommandType!==-1){var h=Number(this.curNumber);if(isNaN(h))throw new SyntaxError("Invalid number ending at "+o);if(this.curCommandType===y.ARC){if(this.curArgs.length===0||this.curArgs.length===1){if(0>h)throw new SyntaxError('Expected positive number, got "'+h+'" at index "'+o+'"')}else if((this.curArgs.length===3||this.curArgs.length===4)&&this.curNumber!=="0"&&this.curNumber!=="1")throw new SyntaxError('Expected a flag, got "'+this.curNumber+'" at index "'+o+'"')}this.curArgs.push(h),this.curArgs.length===rn[this.curCommandType]&&(y.HORIZ_LINE_TO===this.curCommandType?i({type:y.HORIZ_LINE_TO,relative:this.curCommandRelative,x:h}):y.VERT_LINE_TO===this.curCommandType?i({type:y.VERT_LINE_TO,relative:this.curCommandRelative,y:h}):this.curCommandType===y.MOVE_TO||this.curCommandType===y.LINE_TO||this.curCommandType===y.SMOOTH_QUAD_TO?(i({type:this.curCommandType,relative:this.curCommandRelative,x:this.curArgs[0],y:this.curArgs[1]}),y.MOVE_TO===this.curCommandType&&(this.curCommandType=y.LINE_TO)):this.curCommandType===y.CURVE_TO?i({type:y.CURVE_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x2:this.curArgs[2],y2:this.curArgs[3],x:this.curArgs[4],y:this.curArgs[5]}):this.curCommandType===y.SMOOTH_CURVE_TO?i({type:y.SMOOTH_CURVE_TO,relative:this.curCommandRelative,x2:this.curArgs[0],y2:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.QUAD_TO?i({type:y.QUAD_TO,relative:this.curCommandRelative,x1:this.curArgs[0],y1:this.curArgs[1],x:this.curArgs[2],y:this.curArgs[3]}):this.curCommandType===y.ARC&&i({type:y.ARC,relative:this.curCommandRelative,rX:this.curArgs[0],rY:this.curArgs[1],xRot:this.curArgs[2],lArcFlag:this.curArgs[3],sweepFlag:this.curArgs[4],x:this.curArgs[5],y:this.curArgs[6]})),this.curNumber="",this.curNumberHasExpDigits=!1,this.curNumberHasExp=!1,this.curNumberHasDecimal=!1,this.canParseCommandOrComma=!0}if(!tn(a))if(a===","&&this.canParseCommandOrComma)this.canParseCommandOrComma=!1;else if(a!=="+"&&a!=="-"&&a!==".")if(l)this.curNumber=a,this.curNumberHasDecimal=!1;else{if(this.curArgs.length!==0)throw new SyntaxError("Unterminated command at index "+o+".");if(!this.canParseCommandOrComma)throw new SyntaxError('Unexpected character "'+a+'" at index '+o+". Command cannot follow comma");if(this.canParseCommandOrComma=!1,a!=="z"&&a!=="Z")if(a==="h"||a==="H")this.curCommandType=y.HORIZ_LINE_TO,this.curCommandRelative=a==="h";else if(a==="v"||a==="V")this.curCommandType=y.VERT_LINE_TO,this.curCommandRelative=a==="v";else if(a==="m"||a==="M")this.curCommandType=y.MOVE_TO,this.curCommandRelative=a==="m";else if(a==="l"||a==="L")this.curCommandType=y.LINE_TO,this.curCommandRelative=a==="l";else if(a==="c"||a==="C")this.curCommandType=y.CURVE_TO,this.curCommandRelative=a==="c";else if(a==="s"||a==="S")this.curCommandType=y.SMOOTH_CURVE_TO,this.curCommandRelative=a==="s";else if(a==="q"||a==="Q")this.curCommandType=y.QUAD_TO,this.curCommandRelative=a==="q";else if(a==="t"||a==="T")this.curCommandType=y.SMOOTH_QUAD_TO,this.curCommandRelative=a==="t";else{if(a!=="a"&&a!=="A")throw new SyntaxError('Unexpected character "'+a+'" at index '+o+".");this.curCommandType=y.ARC,this.curCommandRelative=a==="a"}else n.push({type:y.CLOSE_PATH}),this.canParseCommandOrComma=!0,this.curCommandType=-1}else this.curNumber=a,this.curNumberHasDecimal=a==="."}else this.curNumber+=a,this.curNumberHasDecimal=!0;else this.curNumber+=a;else this.curNumber+=a,this.curNumberHasExp=!0;else this.curNumber+=a,this.curNumberHasExpDigits=this.curNumberHasExp}return n},t.prototype.transform=function(e){return Object.create(this,{parse:{value:function(n,s){s===void 0&&(s=[]);for(var i=0,o=Object.getPrototypeOf(this).parse.call(this,n);i<o.length;i++){var a=o[i],u=e(a);Array.isArray(u)?s.push.apply(s,u):s.push(u)}return s}}})},t}(Xe),y=function(r){function t(e){var n=r.call(this)||this;return n.commands=typeof e=="string"?t.parse(e):e,n}return je(t,r),t.prototype.encode=function(){return t.encode(this.commands)},t.prototype.getBounds=function(){var e=P.CALCULATE_BOUNDS();return this.transform(e),e},t.prototype.transform=function(e){for(var n=[],s=0,i=this.commands;s<i.length;s++){var o=e(i[s]);Array.isArray(o)?n.push.apply(n,o):n.push(o)}return this.commands=n,this},t.encode=function(e){return We(e)},t.parse=function(e){var n=new en,s=[];return n.parse(e,s),n.finish(s),s},t.CLOSE_PATH=1,t.MOVE_TO=2,t.HORIZ_LINE_TO=4,t.VERT_LINE_TO=8,t.LINE_TO=16,t.CURVE_TO=32,t.SMOOTH_CURVE_TO=64,t.QUAD_TO=128,t.SMOOTH_QUAD_TO=256,t.ARC=512,t.LINE_COMMANDS=t.LINE_TO|t.HORIZ_LINE_TO|t.VERT_LINE_TO,t.DRAWING_COMMANDS=t.HORIZ_LINE_TO|t.VERT_LINE_TO|t.LINE_TO|t.CURVE_TO|t.SMOOTH_CURVE_TO|t.QUAD_TO|t.SMOOTH_QUAD_TO|t.ARC,t}(Xe),rn=((B={})[y.MOVE_TO]=2,B[y.LINE_TO]=2,B[y.HORIZ_LINE_TO]=1,B[y.VERT_LINE_TO]=1,B[y.CLOSE_PATH]=0,B[y.QUAD_TO]=4,B[y.SMOOTH_QUAD_TO]=2,B[y.CURVE_TO]=6,B[y.SMOOTH_CURVE_TO]=4,B[y.ARC]=7,B),st;function it(r){if(r.children!==void 0)return r.children;let t,e=0;const n=r.childNodes,s=[];for(;t=n[e++];)t.nodeType===1&&s.push(t);return s}function ee(r){const t=r.parentNode;return t&&t.nodeType===Node.ELEMENT_NODE?t:null}function $t(r,t){for(;t.firstChild;)r.append(t.firstChild);return r}function ft(r){if(r===null)return null;const t=/url\('#?(.*?)'\)/.exec(r)||/url\("#?(.*?)"\)/.exec(r)||/url\(#?(.*?)\)/.exec(r);return t&&t.length>1?t[1]:null}(function(r){r[r.SVG=0]="SVG",r[r.CANVAS=1]="CANVAS"})(st||(st={}));const vt="data-sketchy-clip-path",nn=/[acsqt]/i;function re(r){if(r.svgSketchDefs)return r.svgSketchDefs;const t=r.svgSketch,e=document.createElementNS("http://www.w3.org/2000/svg","defs");return t.childElementCount>0?t.insertBefore(e,t.firstElementChild):t.appendChild(e),r.svgSketchDefs=e,e}function _e(r){const t=r.getAttribute("points");if(!t)return[];let e;e=t.indexOf(" ")>0?/\s+/g:/,/g;const n=t.split(e),s=[];for(let i=0;i<n.length;i++){const o=n[i],a=o.split(",");if(a.length===2)s.push({x:parseFloat(a[0]),y:parseFloat(a[1])});else{const u=i+1;u<n.length&&(s.push({x:parseFloat(o),y:parseFloat(n[u])}),i=u)}}return s}function X(r,t,e){let n=e;const s=t.getAttribute(vt),i=r.pencilFilter&&t.tagName!=="text";if(!(n.tagName==="g"&&n.attributes.length===0)&&(s||i)){const o=document.createElementNS("http://www.w3.org/2000/svg","g");o.appendChild(n),n=o}s&&(n.setAttribute("clip-path",`url(#${s})`),t.removeAttribute(vt)),i&&n.setAttribute("filter","url(#pencilTextureFilter)"),r.svgSketch.appendChild(n)}function St(r,t,e){return nn.test(t)&&(e=e?Object.assign(Object.assign({},e),{preserveVertices:!0}):{preserveVertices:!0}),r.rc.path(t,e)}function D(r,t,e,n){let s;if(s=n?t.getAttribute(e):getComputedStyle(t)[e]||t.getAttribute(e),!s){let i=ee(t);const o=n;let a=o;return o&&o.referenced===t&&(i=o.root,a=o.parentContext),!i||i===r.sourceSvg?void 0:D(r,i,e,a)}return s}function Ye(r,t,e,n){let s;if(s=n?t.getAttribute("opacity"):getComputedStyle(t).opacity||t.getAttribute("opacity"),s){let u=1;u=s.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(s.substring(0,s.length-1))/100)):Math.min(1,Math.max(0,parseFloat(s))),e*=u}let i=ee(t);const o=n;let a=o;return o&&o.referenced===t&&(i=o.root,a=o.parentContext),i&&i!==r.sourceSvg?Ye(r,i,e,a):e}function ut(r,t,e){const{fillId:n,strokeId:s}=function(i,o){function a(u){const l=o.getAttribute(u);if(l&&l.indexOf("url")!==-1){const h=ft(l);if(h&&i.idElements[h]instanceof SVGPatternElement)return h}return null}return{fillId:a("fill"),strokeId:a("stroke")}}(r,t);if(n!==null||s!==null){const i=e();i.setAttribute("fill",n!==null?`url(#${n})`:"none"),i.setAttribute("stroke",s!==null?`url(#${s})`:"none");const o=D(r,t,"stroke-width",r.useElementContext);i.setAttribute("stroke-width",o??"0"),X(r,t,i),Ae(r,n),Ae(r,s)}}function Ae(r,t){if(t===null)return;const e=re(r),n=`#${t}`;if(!e.querySelector(n)){const s=r.sourceSvg.querySelector(n);if(s){if(!r.sketchPatterns)return void e.appendChild(s.cloneNode(!0));const i=function(a,u,l){const h=document.createElementNS("http://www.w3.org/2000/svg","svg");h.appendChild(u);const c=Object.assign(Object.assign({},a),{sourceSvg:h,svgSketch:document.createElementNS("http://www.w3.org/2000/svg","svg"),roughConfig:Object.assign(Object.assign({},a.roughConfig),l)});return c.processElement(c,u,null),$t(document.createElementNS("http://www.w3.org/2000/svg","g"),c.svgSketch)}(r,$t(document.createElementNS("http://www.w3.org/2000/svg","g"),s.cloneNode(!0)),{fillStyle:"solid",roughness:.5}),o=s.cloneNode();e.appendChild($t(o,i))}}}const sn=/^([+-]?(?:\d+|\d*\.\d+(?:[eE][+-]?\d+)?))([a-z]*|%)$/,Se={in:96,cm:96/2.54,mm:96/25.4,pt:96/72,pc:16,px:1},an=Math.sqrt(2);function yt(r,t,e,n){const{value:s,unit:i}=Gt(e);return function(o){return!!Se[o]}(i)?function(o,a){var u;const l=(u=Se[a])!==null&&u!==void 0?u:1;return o*l}(s,i):function(o,a,u,l,h){var c;const f=(c=o.viewBox)!==null&&c!==void 0?c:{w:0,h:0};if(h==="%")return function(p,g,{w:d,h:m}={w:0,h:0}){const b=g/100;return p==="x"?b*d:p==="y"?b*m:b*(Math.sqrt(d*d+m*m)/an)}(u,l,f);if(h==="vw"||h==="vh"||h==="vmin"||h==="vmax")return function(p,g,{w:d,h:m}={w:0,h:0}){var b,v;const A=p/100,M=(b=window.innerWidth)!==null&&b!==void 0?b:d,E=(v=window.innerHeight)!==null&&v!==void 0?v:m;if(g==="vw")return A*M;if(g==="vh")return A*E;if(g==="vmin")return A*Math.min(M,E);if(g==="vmax")return A*Math.max(M,E);throw new Error(`Not a viewport length unit: ${g}`)}(l,h,f);if(h==="em"||h==="ex"||h==="ch"||h==="rem")return function(p,g,d,m){var b;if(m==="rem"){const E=document.documentElement,k=Gt(getComputedStyle(E).fontSize);return d*(k.unit==="px"?k.value:16)}if(m==="ch"){const E=function(k){const S=ee(k);if(!S)return 1;const T=document.createElementNS("http://www.w3.org/2000/svg","text");T.style.visibility="hidden",T.appendChild(document.createTextNode("0")),S.appendChild(T);const N=T.getBBox();return S.removeChild(T),N.width}(g);return d*E}const v=(b=D(p,g,"font-size",p.useElementContext))!==null&&b!==void 0?b:"16px",A=Gt(v),M=A.unit==="px"?A.value:16;if(m==="em")return d*M;if(m==="ex")return d*M*.5;throw new Error(`Not a font relative unit: ${m}`)}(o,a,l,h);throw new Error(`Unsupported relative length unit: ${h}`)}(r,t,n,s,i)}function Gt(r){const t=r.match(sn);if(t===null||t.length!==3)throw new Error(`Cannot parse dimension: ${r}`);return{value:parseFloat(t[1]),unit:t[2].toLowerCase()||"px"}}function bt(r){if(!r)return!0;const t=r.matrix;return!t||t.a===1&&t.b===0&&t.c===0&&t.d===1&&t.e===0&&t.f===0}function zt(r){if(!r)return!0;const t=r.matrix;return!t||t.a===1&&t.b===0&&t.c===0&&t.d===1}function _(r,t){if(!t)return r;const e=t.matrix;return{x:e.a*r.x+e.c*r.y+e.e,y:e.b*r.x+e.d*r.y+e.f}}function Oe(r){return r.transform&&r.transform.baseVal.numberOfItems>0?r.transform.baseVal.consolidate():null}function xt(r,t,e){if(!e)return Oe(t);const n=Oe(t);if(n){const s=n.matrix,i=e.matrix.multiply(s);return r.sourceSvg.createSVGTransformFromMatrix(i)}return e}function at(r,t,e){if(t&&t.matrix&&!bt(t)){const n=t.matrix;e.transform.baseVal.numberOfItems>0?e.transform.baseVal.getItem(0).setMatrix(n):e.transform.baseVal.appendItem(t)}}function ke(r){var t;let e=r.getAttribute("stop-color");if(!e){const n=(t=r.getAttribute("style"))!==null&&t!==void 0?t:"",s=/stop-color:\s?(.*);?/.exec(n);s&&s.length>1&&(e=s[1])}return x(e||"white")}function Ee(r){const t=r.length;let e=0,n=0,s=0,i=0;return r.forEach(o=>{const a=o.toRgb();e+=a.r*a.r,n+=a.g*a.g,s+=a.b*a.b,i+=a.a}),x({r:Math.sqrt(e/t),g:Math.sqrt(n/t),b:Math.sqrt(s/t),a:i/t})}function on(r){const t=r.getAttribute("offset");return t?t.indexOf("%")?parseFloat(t.substring(0,t.length-1)):100*parseFloat(t):0}function ln(r,t){if(r.roughConfig.fillStyle==="solid")return{angle:0,gap:0,weight:0};const{width:e,height:n}=t.getBoundingClientRect(),s=e/n,i=Math.sqrt(e*n),{angle:o,gap:a,weight:u}=function(l){const h={angle:{normal:[-30,-50],horizontal:[-30,-50],vertical:[-30,-50]},weight:{normal:[.5,3],small:[.5,3]},gap:{normal:[3,5],small:[3,5]}},c={angle:{normal:[-30,-50],horizontal:[-50,-75],vertical:[-30,-15]},weight:{normal:[1,3],small:[.5,1.7]},gap:{normal:[2,5],small:[1,3]}};switch(l){default:return c;case"zigzag":case"zigzag-line":return Object.assign(Object.assign({},c),{weight:{normal:[.5,3],small:[.5,2]},gap:{normal:[2,6],small:[2,5]}});case"cross-hatch":return Object.assign(Object.assign({},c),{weight:{normal:[1,3],small:[.5,1.3]},gap:{normal:[4,8],small:[2,5]}});case"dots":return h}}(r.roughConfig.fillStyle);return{angle:un(r,o,s),gap:hn(r,a,i),weight:cn(r,u,i)}}function un({rng:r},{normal:t,horizontal:e,vertical:n},s){if(isFinite(s)){if(s<.25)return r.next(e);if(s>6)return r.next(n)}return r.next(t)}function hn({rng:r},{normal:t,small:e},n){return n<45?r.next(e):r.next(t)}function cn({rng:r},{normal:t,small:e},n){return n<45?r.next(e):r.next(t)}function tt(r,t,e){var n;const s=(n=r.roughConfig.fixedDecimalPlaceDigits)!==null&&n!==void 0?n:15,i=Object.assign({},r.roughConfig);let o=1;if(!bt(e)){const d=e.matrix,m=d.a*d.d-d.c*d.b;o=Math.sqrt(Math.abs(m))}const a=Ye(r,t,1,r.useElementContext),u=D(r,t,"fill",r.useElementContext)||"black",l=a*Ce(t,"fill-opacity");if(u)if(u.indexOf("url")!==-1){const d=Te(r,u,l);d!=="none"?i.fill=d:delete i.fill}else if(u==="none")delete i.fill;else{const d=x(u);d.setAlpha(l),i.fill=d.toString()}const h=D(r,t,"stroke",r.useElementContext),c=a*Ce(t,"stroke-opacity");if(h)if(h.indexOf("url")!==-1)i.stroke=Te(r,h,c);else if(h==="none")i.stroke="none";else{const d=x(h);d.setAlpha(c),i.stroke=d.toString()}else i.stroke="none";const f=D(r,t,"stroke-width",r.useElementContext);if(f){const d=yt(r,t,f,"stroke-width")*o;i.strokeWidth=parseFloat(d.toFixed(s))}else i.strokeWidth=1;const p=D(r,t,"stroke-dasharray",r.useElementContext);p&&p!=="none"&&(i.strokeLineDash=p.split(/[\s,]+/).filter(d=>d.length>0).map(d=>{const m=yt(r,t,d,"stroke-dasharray")*o;return Math.max(.5,parseFloat(m.toFixed(s)))}));const g=D(r,t,"stroke-dashoffset",r.useElementContext);if(g){const d=yt(r,t,g,"stroke-dashoffset")*o;i.strokeLineDashOffset=parseFloat(d.toFixed(s))}if(i.fill&&i.stroke==="none"&&(i.stroke=i.fill,i.strokeWidth=1),r.randomize){const{angle:d,gap:m,weight:b}=ln(r,t);i.hachureAngle=d,i.hachureGap=Math.round(m),i.fillWeight=parseFloat(b.toFixed(s)),i.disableMultiStroke===void 0&&(i.disableMultiStroke=r.rng.next()>.3)}return i}function Ce(r,t){const e=getComputedStyle(r)[t]||r.getAttribute(t);return e?e.indexOf("%")!==-1?Math.min(1,Math.max(0,parseFloat(e.substring(0,e.length-1))/100)):Math.min(1,Math.max(0,parseFloat(e))):1}function Te(r,t,e){const n=ft(t);if(!n)return"none";const s=r.idElements[n];if(!s)return"none";if(typeof s=="string")return s;if(s instanceof SVGLinearGradientElement||s instanceof SVGRadialGradientElement){const i=function(o,a){const u=Array.prototype.slice.apply(o.querySelectorAll("stop"));if(u.length===0)return"transparent";if(u.length===1){const l=ke(u[0]);return l.setAlpha(a),l.toString()}{const h=[];let c=null;for(let p=0;p<u.length;p++){const g=ke(u[p]),d=on(u[p]),m=c?Ee([c,g]):g;let b=Math.max(1,d/10|0);for(;b>0;)h.push(m),b--;c=g}const f=Ee(h);return f.setAlpha(a),f.toString()}}(s,e);return r.idElements[n]=i,i}return"none"}function O(r){return`${r.x},${r.y}`}function Ot(r,t,e,n){if(e.length===0)return;const s=e[0],i=e[e.length-1],o=ft(t.getAttribute("marker-start")),a=o?r.idElements[o]:null;if(a&&e.length>1){let f=a.orientAngle.baseVal.value;const p=e[1],g=a.getAttribute("orient");if(g==="auto"||g==="auto-start-reverse"){const v=g==="auto"?0:180,A=e[e.length-2];Ne(e)?f=qt(A,i,p)-v:f=Pt({x:1,y:0},{x:p.x-s.x,y:p.y-s.y})-v}const d=r.sourceSvg.createSVGMatrix().translate(s.x,s.y).rotate(f).scale(Ut(r,a,t)),m=n?n.matrix.multiply(d):d,b=r.sourceSvg.createSVGTransformFromMatrix(m);r.processElement(r,a,b)}const u=ft(t.getAttribute("marker-end")),l=u?r.idElements[u]:null;if(l){let f=l.orientAngle.baseVal.value;if(e.length>1){const m=l.getAttribute("orient");if(m==="auto"||m==="auto-start-reverse"){const b=e[e.length-2];Ne(e)?f=qt(b,i,e[1]):f=Pt({x:1,y:0},{x:i.x-b.x,y:i.y-b.y})}}const p=r.sourceSvg.createSVGMatrix().translate(i.x,i.y).rotate(f).scale(Ut(r,l,t)),g=n?n.matrix.multiply(p):p,d=r.sourceSvg.createSVGTransformFromMatrix(g);r.processElement(r,l,d)}const h=ft(t.getAttribute("marker-mid")),c=h?r.idElements[h]:null;if(c&&e.length>2)for(let f=0;f<e.length;f++){const p=e[f];if(f===0||f===e.length-1)continue;let g=c.orientAngle.baseVal.value;const d=c.getAttribute("orient");(d==="auto"||d==="auto-start-reverse")&&(g=qt(e[f-1],p,e[f+1]));const m=r.sourceSvg.createSVGMatrix().translate(p.x,p.y).rotate(g).scale(Ut(r,c,t)),b=n?n.matrix.multiply(m):m,v=r.sourceSvg.createSVGTransformFromMatrix(b);r.processElement(r,c,v)}}function Ut(r,t,e){const n=t.getAttribute("markerUnits");let s=1;if(!n||n==="strokeWidth"){const i=D(r,e,"stroke-width");i&&(s=yt(r,e,i,"stroke-width"))}return s}function Ne(r){return t=r[0],e=r[r.length-1],t.x===e.x&&t.y===e.y;var t,e}function qt(r,t,e){const n={x:e.x-t.x,y:e.y-t.y},s=Pt(n,{x:r.x-t.x,y:r.y-t.y}),i=t.x+1,o=t.y,a=Pt(n,{x:i-t.x,y:o-t.y});return((u=s)-180*Math.sign(u))/2-a;var u}function Pt(r,t){const e=Math.atan2(r.y,r.x),n=Math.atan2(t.y,t.x)-e,s=-Math.sign(n)*Math.PI*2,i=Math.abs(s+n)<Math.abs(n)?s+n:n;return Math.round(360*i/(2*Math.PI))}function Ve(r,t,{x:e,y:n,w:s,h:i}){ut(r,t,()=>{const o=document.createElementNS("http://www.w3.org/2000/svg","rect");return o.x.baseVal.value=e,o.y.baseVal.value=n,o.width.baseVal.value=s,o.height.baseVal.value=i,o})}function fn(r,t,e,n){const s=ft(e);if(!s)return;const i=r.idElements[s];if(!i)return;const o=re(r),a=`${s}_${o.childElementCount}`,u=document.createElementNS("http://www.w3.org/2000/svg","clipPath");u.id=a,function(c,f){if(c.tagName!=="g")return void c.setAttribute(vt,f);const p=[],g=it(c);for(let d=g.length-1;d>=0;d--)p.push(g[d]);for(;p.length>0;){const d=p.pop();d.setAttribute(vt,f);const m=it(d);for(let b=m.length-1;b>=0;b--)p.push(m[b])}}(t,a);const l=[],h=it(i);for(let c=h.length-1;c>=0;c--){const f=h[c],p=xt(r,f,n);l.push({element:f,transform:p})}for(;l.length>0;){const{element:c,transform:f}=l.pop();try{pn(r,c,u,f)}catch(g){console.error(g)}if(c.tagName==="defs"||c.tagName==="svg"||c.tagName==="clipPath"||c.tagName==="text")continue;const p=it(c);for(let g=p.length-1;g>=0;g--){const d=p[g],m=xt(r,d,f);l.push({element:d,transform:m})}}u.childNodes.length>0&&o.appendChild(u)}function pn(r,t,e,n){switch(t.tagName){case"rect":(function(s,i,o,a){const u=i.x.baseVal.value,l=i.y.baseVal.value,h=i.width.baseVal.value,c=i.height.baseVal.value;if(h===0||c===0)return;const f=i.hasAttribute("rx")?i.rx.baseVal.value:null,p=i.hasAttribute("ry")?i.ry.baseVal.value:null,g=document.createElementNS("http://www.w3.org/2000/svg","rect");g.x.baseVal.value=u,g.y.baseVal.value=l,g.width.baseVal.value=h,g.height.baseVal.value=c,f&&(g.rx.baseVal.value=f),p&&(g.ry.baseVal.value=p),at(0,a,g),o.appendChild(g)})(0,t,e,n);break;case"circle":(function(s,i,o,a){const u=i.cx.baseVal.value,l=i.cy.baseVal.value,h=i.r.baseVal.value;if(h===0)return;const c=document.createElementNS("http://www.w3.org/2000/svg","circle");c.cx.baseVal.value=u,c.cy.baseVal.value=l,c.r.baseVal.value=h,at(0,a,c),o.appendChild(c)})(0,t,e,n);break;case"ellipse":(function(s,i,o,a){const u=i.cx.baseVal.value,l=i.cy.baseVal.value,h=i.rx.baseVal.value,c=i.ry.baseVal.value;if(h===0||c===0)return;const f=document.createElementNS("http://www.w3.org/2000/svg","ellipse");f.cx.baseVal.value=u,f.cy.baseVal.value=l,f.rx.baseVal.value=h,f.ry.baseVal.value=c,at(0,a,f),o.appendChild(f)})(0,t,e,n);break;case"polygon":(function(s,i,o,a){const u=document.createElementNS("http://www.w3.org/2000/svg","polygon");u.setAttribute("points",i.getAttribute("points")),at(0,a,u),o.appendChild(u)})(0,t,e,n);break;case"path":(function(s,i,o,a){const u=document.createElementNS("http://www.w3.org/2000/svg","path");u.setAttribute("d",i.getAttribute("d")),at(0,a,u),o.appendChild(u)})(0,t,e,n)}}function gn(r,t,e){const n=document.createElementNS("http://www.w3.org/2000/svg","g");n.setAttribute("class","text-container"),at(0,e,n);const s=t.cloneNode(!0);s.transform.baseVal.numberOfItems>0&&s.transform.baseVal.clear(),s.removeAttribute("clip-path");const{cssFont:i,fontSize:o}=function(l,h,c=!1){const f={};let p="";const g=D(l,h,"font-style",l.useElementContext);g&&(p+=c?`font-style: ${g};`:g,f.fontStyle=g);const d=D(l,h,"font-weight",l.useElementContext);d&&(p+=c?`font-weight: ${d};`:` ${d}`,f.fontWeight=d);const m=D(l,h,"font-size",l.useElementContext);if(m&&(p+=c?`font-size: ${m};`:` ${m}`,f.fontSize=m),l.fontFamily)p+=c?`font-family: ${l.fontFamily};`:` ${l.fontFamily}`,f.fontFamiliy=l.fontFamily;else{const b=D(l,h,"font-family",l.useElementContext);b&&(p+=c?`font-family: ${b};`:` ${b}`,f.fontFamiliy=b)}return p=p.trim(),Object.assign(Object.assign({},f),{cssFont:p})}(r,t,!0);if(s.setAttribute("style",function(...l){let h="";l=l.filter(c=>c!==null);for(const c of l)h.length>0&&h[h.length-1]!==";"&&(h+=";"),h+=c;return h}(s.getAttribute("style"),i)),Re(r,t,s),s.childElementCount>0){const l=it(s),h=it(t);for(let c=0;c<l.length;c++){const f=l[c];f instanceof SVGTSpanElement&&Re(r,h[c],f)}}n.appendChild(s),X(r,t,n);const a=r.fontFamily!==null,u=s.hasAttribute(vt);a&&u&&o&&function(l,h,c,f){const{width:p,height:g}=h.getBBox();if(p<=0||g<=0)return;const d=yt(l,c,f,"font-size");Be(l,{w:p,h:g},c,d)}(r,t,s,o)}function Be(r,t,e,n){const{w:s}=function({svgSketch:o,svgSketchIsInDOM:a},u){const l="visibility:hidden;position:absolute;left:-100%;top-100%;",h=o.getAttribute("style");h?o.setAttribute("style",`${h};${l}`):o.setAttribute("style",l);const c=document.body,f=o.parentElement;a||c.appendChild(o);const{width:p,height:g}=u.getBBox();return a||(c.removeChild(o),f&&f.appendChild(o)),h?o.setAttribute("style",h):o.removeAttribute("style"),{w:p,h:g}}(r,e);if(s<t.w||n<=1)return;const i=n-1;e.style.fontSize=`${i}px`,Be(r,t,e,i)}function Re(r,t,e){const n=D(r,t,"stroke"),s=n?D(r,t,"stroke-width"):null,i=D(r,t,"fill"),o=D(r,t,"dominant-baseline"),a=D(r,t,"text-anchor",r.useElementContext);n&&e.setAttribute("stroke",n),s&&e.setAttribute("stroke-width",s),i&&e.setAttribute("fill",i),a&&e.setAttribute("text-anchor",a),o&&e.setAttribute("dominant-baseline",o)}function Ze(r,t,e,n,s){var i,o;const a=[],u={x:0,y:0,w:n??0,h:s??0};if(t instanceof SVGSVGElement||t instanceof SVGSymbolElement||t instanceof SVGMarkerElement){let l=0,h=0;if(t instanceof SVGSymbolElement)l=parseFloat((i=t.getAttribute("x"))!==null&&i!==void 0?i:"")||0,h=parseFloat((o=t.getAttribute("y"))!==null&&o!==void 0?o:"")||0,n=n??(parseFloat(t.getAttribute("width"))||void 0),s=s??(parseFloat(t.getAttribute("height"))||void 0);else if(t instanceof SVGMarkerElement){const g=t.getAttribute("markerWidth"),d=t.getAttribute("markerHeight");n=g!==null?parseFloat(g):3,s=d!==null?parseFloat(d):3}else t!==r.sourceSvg&&(l=t.x.baseVal.value,h=t.y.baseVal.value);let c=r.sourceSvg.createSVGMatrix();if(t.getAttribute("viewBox")){const{x:g,y:d,width:m,height:b}=t.viewBox.baseVal;if(u.x=g,u.y=d,u.w=m,u.h=b,n!==void 0&&s!==void 0){const v=n/m,A=s/b,M=l+.5*n,E=h+.5*s,k=g+.5*m,S=d+.5*b;c=c.translate(M,E),c=t.getAttribute("preserveAspectRatio")==="none"?c.scaleNonUniform(v,A):c.scale(Math.min(v,A)),c=c.translate(-k,-S)}}else c=c.translate(l,h);t instanceof SVGMarkerElement&&(c=c.translate(-t.refX.baseVal.value,-t.refY.baseVal.value));const f=e?e.matrix.multiply(c):c;e=r.sourceSvg.createSVGTransformFromMatrix(f);const p=it(t);for(let g=p.length-1;g>=0;g--){const d=p[g];if(d instanceof SVGSymbolElement||d instanceof SVGMarkerElement)continue;const m=xt(r,d,e);a.push({element:d,transform:m,viewBox:u})}}else a.push({element:t,transform:e,viewBox:u});for(;a.length>0;){const{element:l,transform:h,viewBox:c}=a.pop();try{r.viewBox=c,dn(r,l,h)}catch(p){console.error(p)}if(l.tagName==="defs"||l.tagName==="symbol"||l.tagName==="marker"||l.tagName==="svg"||l.tagName==="clipPath")continue;const f=it(l);for(let p=f.length-1;p>=0;p--){const g=f[p],d=xt(r,g,h);a.push({element:g,transform:d,viewBox:c})}}}function dn(r,t,e){if(function(s){const i=s.style;return!!i&&(i.display==="none"||i.visibility==="hidden")}(t))return;const n=t.getAttribute("clip-path");switch(n&&fn(r,t,n,e),t.tagName){case"svg":case"symbol":(function(s,i,o){let a=parseFloat(i.getAttribute("width")),u=parseFloat(i.getAttribute("height"));(isNaN(a)||isNaN(u))&&(a=u=void 0),Ze(s,i,o,a,u)})(r,t,e);break;case"rect":(function(s,i,o){const a=i.x.baseVal.value,u=i.y.baseVal.value,l=i.width.baseVal.value,h=i.height.baseVal.value;if(l===0||h===0)return;let c=i.hasAttribute("rx")?Math.min(Math.max(0,i.rx.baseVal.value),l/2):null,f=i.hasAttribute("ry")?Math.min(Math.max(0,i.ry.baseVal.value),h/2):null;c===null&&f===null||(c=c===null?f:c,f=f===null?c:f);const p=_({x:a,y:u},o),g=_({x:a+l,y:u+h},o),d=g.x-p.x,m=g.y-p.y,b={x:p.x,y:p.y,w:d,h:m};if(!bt(o)&&!zt(o)||c||f){let v="";if(c!==null&&f!==null){const M=1.3333333333333333*(Math.sqrt(2)-1),E=_({x:a+c,y:u},o);v+=`M ${O(E)}`,v+=`L ${O(_({x:a+l-c,y:u},o))}`;const k=_({x:a+l-c+M*c,y:u},o),S=_({x:a+l,y:u+M*f},o),T=_({x:a+l,y:u+f},o);v+=`C ${O(k)} ${O(S)} ${O(T)}`,v+=`L ${O(_({x:a+l,y:u+h-f},o))}`;const N=_({x:a+l,y:u+h-f+M*f},o),q=_({x:a+l-M*c,y:u+h},o),G=_({x:a+l-c,y:u+h},o);v+=`C ${O(N)} ${O(q)} ${O(G)}`,v+=`L ${O(_({x:a+c,y:u+h},o))}`;const V=_({x:a+c-M*c,y:u+h},o),C=_({x:a,y:u+h-M*f},o),I=_({x:a,y:u+h-f},o);v+=`C ${O(V)} ${O(C)} ${O(I)}`,v+=`L ${O(_({x:a,y:u+f},o))}`;const $=_({x:a,y:u+M*f},o),H=_({x:a+M*c,y:u},o);v+=`C ${O($)} ${O(H)} ${O(E)}`,v+="z"}else{const M=_({x:a,y:u},o),E=_({x:a+l,y:u},o),k=_({x:a+l,y:u+h},o),S=_({x:a,y:u+h},o);v+=`M ${O(M)}`,v+=`L ${O(E)}`,v+=`L ${O(k)}`,v+=`L ${O(S)}`,v+="z"}const A=St(s,v,tt(s,i,o));Ve(s,i,b),X(s,i,A)}else{const v=s.rc.rectangle(b.x,b.y,b.w,b.h,tt(s,i,o));Ve(s,i,b),X(s,i,v)}})(r,t,e);break;case"path":(function(s,i,o){const a=i.getAttribute("d"),u=new y(a).toAbs().transform(P.NORMALIZE_HVZ()).transform(P.NORMALIZE_ST()),l=new y(u.commands.map(g=>Object.assign({},g)));o&&l.transform(P.MATRIX(o.matrix.a,o.matrix.b,o.matrix.c,o.matrix.d,o.matrix.e,o.matrix.f));const h=We(l.commands);if(h.indexOf("undefined")!==-1)return void console.error("broken path data");const c=St(s,h,tt(s,i,o));ut(s,i,()=>{const g=document.createElementNS("http://www.w3.org/2000/svg","path");return g.setAttribute("d",h),g}),X(s,i,c);const f=[];let p;u.commands.forEach(g=>{switch(g.type){case y.MOVE_TO:{const d={x:g.x,y:g.y};f.push(d),p=d;break}case y.LINE_TO:case y.QUAD_TO:case y.SMOOTH_QUAD_TO:case y.CURVE_TO:case y.SMOOTH_CURVE_TO:case y.ARC:f.push({x:g.x,y:g.y});break;case y.HORIZ_LINE_TO:f.push({x:g.x,y:0});break;case y.VERT_LINE_TO:f.push({x:0,y:g.y});break;case y.CLOSE_PATH:p&&f.push(p)}}),Ot(s,i,f,o)})(r,t,e);break;case"use":(function(s,i,o){let a=i.href.baseVal;a.startsWith("#")&&(a=a.substring(1));const u=s.idElements[a];if(u){let l,h;i.getAttribute("width")&&i.getAttribute("height")&&(l=i.width.baseVal.value,h=i.height.baseVal.value);const c=i.x.baseVal.value,f=i.y.baseVal.value;let p=s.sourceSvg.createSVGMatrix().translate(c,f);p=o?o.matrix.multiply(p):p;const g=s.sourceSvg.createSVGTransformFromMatrix(p);if(s.useElementContext){const d={root:i,referenced:u,parentContext:Object.assign({},s.useElementContext)};s.useElementContext=d}else s.useElementContext={root:i,referenced:u,parentContext:null};s.processElement(s,u,xt(s,u,g),l,h),s.useElementContext.parentContext?s.useElementContext=s.useElementContext.parentContext:s.useElementContext=null}})(r,t,e);break;case"line":(function(s,i,o){const a={x:i.x1.baseVal.value,y:i.y1.baseVal.value},u={x:i.x2.baseVal.value,y:i.y2.baseVal.value},{x:l,y:h}=_(a,o),{x:c,y:f}=_(u,o);if(l===c&&h===f)return;const p=s.rc.line(l,h,c,f,tt(s,i,o));ut(s,i,()=>{const g=document.createElementNS("http://www.w3.org/2000/svg","line");return g.x1.baseVal.value=l,g.y1.baseVal.value=h,g.x2.baseVal.value=c,g.y2.baseVal.value=f,g}),X(s,i,p),Ot(s,i,[a,u],o)})(r,t,e);break;case"circle":(function(s,i,o){const a=i.cx.baseVal.value,u=i.cy.baseVal.value,l=i.r.baseVal.value;if(l===0)return;const h=_({x:a,y:u},o),c=_({x:a+l,y:u+l},o).x-h.x;let f;if(bt(o)||zt(o))f=s.rc.circle(h.x,h.y,2*c,Object.assign(Object.assign({},tt(s,i,o)),{preserveVertices:!0}));else{const p=1.3333333333333333*(Math.sqrt(2)-1),g=_({x:a+l,y:u},o),d=_({x:a,y:u+l},o),m=_({x:a-l,y:u},o),b=_({x:a,y:u-l},o),v=_({x:a+l,y:u+p*l},o),A=_({x:a+p*l,y:u+l},o),M=_({x:a-l,y:u+p*l},o),E=_({x:a-p*l,y:u-l},o),k=_({x:a+l,y:u-p*l},o);f=St(s,`M ${O(g)} C ${O(v)} ${O(A)} ${O(d)} S ${O(M)} ${O(m)} S ${O(E)} ${O(b)} S ${O(k)} ${O(g)}z`,tt(s,i,o))}ut(s,i,()=>{const p=document.createElementNS("http://www.w3.org/2000/svg","circle");return p.cx.baseVal.value=h.x,p.cy.baseVal.value=h.y,p.r.baseVal.value=c,p}),X(s,i,f)})(r,t,e);break;case"ellipse":(function(s,i,o){const a=i.cx.baseVal.value,u=i.cy.baseVal.value,l=i.rx.baseVal.value,h=i.ry.baseVal.value;if(l===0||h===0)return;const c=_({x:a,y:u},o),f=_({x:a+l,y:u+h},o),p=f.x-c.x,g=f.y-c.y;let d;if(bt(o)||zt(o))d=s.rc.ellipse(c.x,c.y,2*p,2*g,Object.assign(Object.assign({},tt(s,i,o)),{preserveVertices:!0}));else{const m=1.3333333333333333*(Math.sqrt(2)-1),b=_({x:a+l,y:u},o),v=_({x:a,y:u+h},o),A=_({x:a-l,y:u},o),M=_({x:a,y:u-h},o),E=_({x:a+l,y:u+m*h},o),k=_({x:a+m*l,y:u+h},o),S=_({x:a-l,y:u+m*h},o),T=_({x:a-m*l,y:u-h},o),N=_({x:a+l,y:u-m*h},o);d=St(s,`M ${O(b)} C ${O(E)} ${O(k)} ${O(v)} S ${O(S)} ${O(A)} S ${O(T)} ${O(M)} S ${O(N)} ${O(b)}z`,tt(s,i,o))}ut(s,i,()=>{const m=document.createElementNS("http://www.w3.org/2000/svg","ellipse");return m.cx.baseVal.value=c.x,m.cy.baseVal.value=c.y,m.rx.baseVal.value=p,m.ry.baseVal.value=g,m}),X(s,i,d)})(r,t,e);break;case"polyline":(function(s,i,o){const a=_e(i),u=a.map(h=>{const c=_(h,o);return[c.x,c.y]}),l=tt(s,i,o);if(ut(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polyline");return h.setAttribute("points",u.join(" ")),h}),l.fill&&l.fill!=="none"){const h=Object.assign(Object.assign({},l),{stroke:"none"});X(s,i,s.rc.polygon(u,h))}X(s,i,s.rc.linearPath(u,l)),Ot(s,i,a,o)})(r,t,e);break;case"polygon":(function(s,i,o){const a=_e(i),u=a.map(h=>{const c=_(h,o);return[c.x,c.y]}),l=s.rc.polygon(u,tt(s,i,o));ut(s,i,()=>{const h=document.createElementNS("http://www.w3.org/2000/svg","polygon");return h.setAttribute("points",u.join(" ")),h}),X(s,i,l),a.length>0&&(a.push(a[0]),Ot(s,i,a,o))})(r,t,e);break;case"text":gn(r,t,e);break;case"image":(function(s,i,o){const a=i.href.baseVal,u=i.x.baseVal.value,l=i.y.baseVal.value;let h,c;if(i.getAttribute("width")&&i.getAttribute("height")&&(h=i.width.baseVal.value,c=i.height.baseVal.value),a.startsWith("data:")&&a.indexOf("image/svg+xml")!==-1){const f=/^data:([^,]*),(.*)/.exec(a);if(f&&f.length>2){const p=f[1];let g=f[2];const d=p.indexOf("base64")!==-1,m=p.indexOf("utf8")!==-1;d&&(g=atob(g)),m||(g=decodeURIComponent(g));const b=new DOMParser().parseFromString(g,"image/svg+xml").firstChild;let v=s.sourceSvg.createSVGMatrix().translate(u,l);v=o?o.matrix.multiply(v):v,s.processElement(s,b,s.sourceSvg.createSVGTransformFromMatrix(v),h,c)}}else{const f=i.cloneNode(),p=document.createElementNS("http://www.w3.org/2000/svg","g");at(0,o,p),p.appendChild(f),X(s,i,p)}})(r,t,e);break;case"foreignObject":(function(s,i,o){const a=i.cloneNode(!0),u=document.createElementNS("http://www.w3.org/2000/svg","g"),l=["color","font-family","font-size","font-style","font-variant","font-weight"],h=getComputedStyle(i);for(const c of l)u.style.setProperty(c,h.getPropertyValue(c));a.transform.baseVal.clear(),at(0,o,u),u.appendChild(a),X(s,a,u)})(r,t,e)}}class mn{constructor(t){this.rng=t?new Pe(t):null}next(t){var e,n;const s=(n=(e=this.rng)===null||e===void 0?void 0:e.next())!==null&&n!==void 0?n:Math.random();if(t){const i=t[0];return s*(t[1]-i)+i}return s}}class yn{set svg(t){this.$svg!==t&&(this.$svg=t,this.sourceSvgChanged())}get svg(){return this.$svg}set outputType(t){if(this.$outputType!==t){if(t===st.CANVAS&&this.outputElement instanceof SVGSVGElement||t===st.SVG&&this.outputElement instanceof HTMLCanvasElement)throw new Error(`Output format ${t} incompatible with given output element ${this.outputElement.tagName}`);this.$outputType=t}}get outputType(){return this.$outputType}set roughConfig(t){t.fixedDecimalPlaceDigits===void 0&&(t.fixedDecimalPlaceDigits=3),this.$roughConfig=t}get roughConfig(){return this.$roughConfig}constructor(t,e=st.SVG,n={}){if(this.backgroundColor=null,this.fontFamily="Comic Sans MS, cursive",this.randomize=!0,this.seed=null,this.sketchPatterns=!0,this.pencilFilter=!1,this.width=0,this.height=0,this.$roughConfig={},this.idElements={},this.lastResult=null,!t)throw new Error("No target provided");const s=typeof t=="string"?document.querySelector(t):t;if(!s)throw new Error("Could not find target in document");this.roughConfig=n,this.outputElement=s,s instanceof HTMLCanvasElement?this.$outputType=st.CANVAS:s instanceof SVGSVGElement?this.$outputType=st.SVG:this.$outputType=e}sketch(t=!1){var e,n;if(!this.svg)return Promise.resolve(null);t&&this.sourceSvgChanged();const s=this.prepareRenderContainer(),i=this.createRenderContext(s);if(this.pencilFilter&&re(i).appendChild(function(){const o=document.createElementNS("http://www.w3.org/2000/svg","filter");o.setAttribute("id","pencilTextureFilter"),o.setAttribute("x","0%"),o.setAttribute("y","0%"),o.setAttribute("width","100%"),o.setAttribute("height","100%"),o.setAttribute("filterUnits","objectBoundingBox");const a=document.createElementNS("http://www.w3.org/2000/svg","feTurbulence");a.setAttribute("type","fractalNoise"),a.setAttribute("baseFrequency","2"),a.setAttribute("numOctaves","5"),a.setAttribute("stitchTiles","stitch"),a.setAttribute("result","f1"),o.appendChild(a);const u=document.createElementNS("http://www.w3.org/2000/svg","feColorMatrix");u.setAttribute("type","matrix"),u.setAttribute("values","0 0 0 0 0, 0 0 0 0 0, 0 0 0 0 0, 0 0 0 -1.5 1.5"),u.setAttribute("result","f2"),o.appendChild(u);const l=document.createElementNS("http://www.w3.org/2000/svg","feComposite");return l.setAttribute("operator","in"),l.setAttribute("in","SourceGraphic"),l.setAttribute("in2","f2"),l.setAttribute("result","f3"),o.appendChild(l),o}()),i.processElement(i,this.svg,null,this.width,this.height),this.outputElement instanceof SVGSVGElement)return Promise.resolve(this.outputElement);if(this.outputElement instanceof HTMLCanvasElement)return this.drawToCanvas(i,this.outputElement);if((n=(e=this.lastResult)===null||e===void 0?void 0:e.parentNode)===null||n===void 0||n.removeChild(this.lastResult),this.outputType===st.SVG){const o=i.svgSketch;return this.outputElement.appendChild(o),this.lastResult=o,Promise.resolve(o)}{const o=document.createElement("canvas");return this.outputElement.appendChild(o),this.lastResult=o,this.drawToCanvas(i,o)}}createRenderContext(t){if(!this.svg)throw new Error("No source SVG set yet.");let e=this.roughConfig;return this.seed!==null&&(e=Object.assign({seed:this.seed},e)),{rc:Cr.svg(t,{options:e}),roughConfig:this.roughConfig,fontFamily:this.fontFamily,pencilFilter:this.pencilFilter,randomize:this.randomize,rng:new mn(this.seed),sketchPatterns:this.sketchPatterns,idElements:this.idElements,sourceSvg:this.svg,svgSketch:t,svgSketchIsInDOM:document.body.contains(t),styleSheets:Array.from(this.svg.querySelectorAll("style")).map(n=>n.sheet).filter(n=>n!==null),processElement:Ze}}drawToCanvas(t,e){e.width=this.width,e.height=this.height;const n=e.getContext("2d");return n.clearRect(0,0,this.width,this.height),new Promise(s=>{const i=new XMLSerializer().serializeToString(t.svgSketch),o=new Image;o.onload=function(){n.drawImage(this,0,0),s(e)},o.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(i)}`})}prepareRenderContainer(){let t,e;for(t=this.outputElement instanceof SVGSVGElement?this.outputElement:document.createElementNS("http://www.w3.org/2000/svg","svg"),t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink");t.firstChild;)t.removeChild(t.firstChild);return t.setAttribute("width",this.width.toString()),t.setAttribute("height",this.height.toString()),this.backgroundColor&&(e=document.createElementNS("http://www.w3.org/2000/svg","rect"),e.width.baseVal.value=this.width,e.height.baseVal.value=this.height,e.setAttribute("fill",this.backgroundColor),t.appendChild(e)),t.setAttribute("stroke-linecap","round"),t}sourceSvgChanged(){const t=this.$svg;if(t){const e=this.roughConfig.fixedDecimalPlaceDigits;this.width=parseFloat(this.coerceSize(t,"width",300).toFixed(e)),this.height=parseFloat(this.coerceSize(t,"height",150).toFixed(e)),this.collectElementsWithID()}}collectElementsWithID(){this.idElements={};const t=Array.prototype.slice.apply(this.svg.querySelectorAll("*[id]"));for(const e of t){const n=e.getAttribute("id");n&&(this.idElements[n]=e)}}coerceSize(t,e,n){let s=n;const i=t.hasAttribute("viewBox");return t.hasAttribute(e)?s=t[e].baseVal.unitType===SVGLength.SVG_LENGTHTYPE_PERCENTAGE&&i?t.viewBox.baseVal[e]:t[e].baseVal.value:i&&(s=t.viewBox.baseVal[e]),s}}export{st as OutputType,yn as Svg2Roughjs};
