import{l as k,b as v,c as f,aj as L,d as S,aS as Y,aU as D,r as w,o as X,e as t,g as C,w as O,E as p,n as A,aV as N,t as _,F as U,ah as W,p as $,i as P,j,s as B}from"./C2E8NN05.js";const G=["Android","iPhone","Windows Phone","iPad","iPod"],I=G.some(e=>navigator!=null&&navigator.userAgent?navigator.userAgent.indexOf(e)!==-1:!1),g={touchstart:"onMouseDown",mousedown:"onMouseDown",touchend:"onMouseUp",mouseup:"onMouseUp",touchmove:"onMouseMove",mousemove:"onMouseMove",touchcancel:"onMouseUp",wheel:"onMouseWheel",mousewheel:"onMouseWheel",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},x=["hover","hoverOut","tap","swipeUp","swipeDown"],H={name:"GestureCmpt",props:{...x.reduce((e,s)=>(e[s]=Function,e),{}),hoverTime:{type:[Number,String],default:100},enableMouse:{type:Boolean,default:!0},enableMouseWheel:{type:Boolean,default:!0},judgeConfig:{type:Object,default:()=>({tapTimeInterval:300,tapOffsetThresholdSquared:25,swipeOffsetThreshold:80})},freezeTime:{type:[Number,String],default:1e3/30},eventInvoke:{type:Function,default:()=>{}}},data(){return{touchstartTime:0,touchendTime:0,touchstartCoord:{},touchendCoord:{},wheelOffset:0,mouseEnterTime:null,mouseLeaveTime:null,hoverTick:null,lastTouchendTime:0,lastTouchstartTime:0,lastTouchstartCoord:{},lastTouchendCoord:{},lastWheelOffset:0,shouldInit:null,ele:null,events:{listens:[]}}},computed:{timeInterval(){return this.touchendTime-this.touchstartTime},pageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},pageXOffsetAbs(){return Math.abs(this.pageXOffset)},pageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},pageYOffsetAbs(){return Math.abs(this.pageYOffset)},lastTimeInterval(){return this.lastTouchendTime-this.lastTouchstartTime},lastPageXOffset(){return this.touchendCoord.pageX-this.touchstartCoord.pageX},lastPageYOffset(){return this.touchendCoord.pageY-this.touchstartCoord.pageY},deltaTime(){return this.touchendTime-this.lastTouchstartTim},mouseHoverTime(){return this.mouseLeaveTime-this.mouseEnterTime}},mounted(){this.shouldInit=Object.keys(this.$props).find(e=>x.includes(e)&&this[e]),this.shouldInit&&(this.calcEventsName(),this.ele=this.$refs.gesture,this.events.listens.map(e=>{this.ele.addEventListener(e,this[g[e]])}))},beforeUnmount(){this.shouldInit&&this.events.listens.map(e=>{this.ele.removeEventListener(e,this[g[e]])})},methods:{onMouseEnter(e){!this.mouseEnterTime&&!this.mouseLeaveTime&&this.recordEnter(e),this.eventInvoke(e)},recordEnter(e){this.mouseEnterTime=e.timeStamp,this.hoverTick=setTimeout(()=>{this.recordLeave({timeStamp:+new Date+1/0})},this.hoverTime)},onMouseLeave(e){this.recordLeave(e)},recordLeave(e){this.mouseEnterTime&&!this.mouseLeaveTime&&(this.mouseLeaveTime=e.timeStamp),this.calcGestures(),this.hoverTick&&clearTimeout(this.hoverTick)},onMouseDown(e){this.onRecordMove(e),this.eventInvoke(e)},onRecordMove(e){this.recordDown(e),this.triggerMove()},recordDown(e){this.lastTouchstartTime=this.touchstartTime,this.touchstartTime=e.timeStamp;const s=e.touches?e.touches[0]:e;this.lastTouchstartCoord=this.touchstartCoord,this.touchstartCoord={pageX:s.pageX,pageY:s.pageY}},triggerMove(){this.events.moves.map(e=>{this.ele.addEventListener(e,this[g[e]])})},onMouseMove(e){this.eventInvoke(e)},onMouseWheel(e){this.lastWheelOffset=this.wheelOffset;const s=e.wheelDelta&&e.deltaY?e.wheelDelta*-1:event.deltaY;this.wheelOffset=s,this.calcGestures(),this.eventInvoke(e)},onMouseUp(e){this.recordUp(e),this.calcGestures(),this.unTriggerMove(),this.eventInvoke(e)},recordUp(e){this.lastTouchendTime=this.touchendTime,this.touchendTime=e.timeStamp;const s=e.changedTouches?e.changedTouches[0]:e;this.lastTouchendCoord=this.touchendCoord,this.touchendCoord={pageX:s.pageX,pageY:s.pageY}},unTriggerMove(){this.events.moves.map(e=>{this.ele.removeEventListener(e,this[g[e]])})},calcGestures:function(){let e=0;return function(){const s=+Date.now();if(s-e<+this.freezeTime)return;e=s;const{tapTimeInterval:r,tapOffsetThresholdSquared:l,swipeOffsetThreshold:n}=this.judgeConfig,d={hover:()=>this.mouseHoverTime>=+this.hoverTime,hoverOut:()=>!0,tap:()=>this.timeInterval<r&&this.pageXOffset**2<l,swipeUp:()=>{const o=this.timeInterval<r&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset>n,c=this.enableMouse&&this.wheelOffset<0;return o||c},swipeDown:()=>{const o=this.timeInterval<r&&this.pageYOffsetAbs>this.pageXOffsetAbs&&this.pageYOffset<n,c=this.enableMouse&&this.wheelOffset>0;return o||c}},m=x.find(o=>this[o]&&d[o]&&d[o]()&&(()=>this[o]()));m&&this[m](),this.reset()}}(),reset(){this.touchstartTime=null,this.touchendTime=null,this.touchstartCoord={},this.touchendCoord={},this.wheelOffset=0,this.mouseEnterTime=null,this.mouseLeaveTime=null,this.lastTouchendTime=null,this.lastTouchstartTime=null,this.lastTouchstartCoord={},this.lastTouchendCoord={},this.lastWheelOffset=0},calcEventsName(){const e=[...I?["touchstart","touchend","touchcancel"]:this.enableMouse?["mousedown","mouseup","mouseenter","mouseleave"]:[],...this.enableMouseWheel?["onwheel"in document?"wheel":"mousewheel"]:[]],s=[...I?["touchmove"]:[],...this.enableMouse?["mousemove"]:[]];this.events={listens:e,moves:s}}}},R={ref:"gesture"};function z(e,s,r,l,n,d){return v(),f("div",R,[L(e.$slots,"default")],512)}const q=k(H,[["render",z]]),u=e=>($("data-v-b8b4d30a"),e=e(),P(),e),F={class:"parallax__layer parallax__layer__0"},V=["src"],J={class:"parallax__layer parallax__layer__1"},K=["src"],Q={class:"parallax__layer parallax__layer__2"},Z=["src"],ee={class:"parallax__layer parallax__layer__3"},te=["src"],se={class:"parallax__layer parallax__layer__4"},ae=["src"],oe={class:"parallax__layer parallax__layer__5"},le=["src"],ie={class:"parallax__layer parallax__layer__6"},ne=["src"],re=u(()=>t("div",{class:"parallax__cover"},null,-1)),ce={class:"wrapper wrapper-detail"},he=u(()=>t("div",{class:"avatar"},[t("img",{src:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/avatar.gif",alt:"Lionad's Avatar",draggable:"false"})],-1)),ue={class:"card"},de={class:"bio"},pe={class:"head"},me={class:"info"},_e=u(()=>t("div",{class:"description"},[j(" 前端偏甜工程师 | 兴趣泛滥 | 逃离地球 | "),t("del",null,[t("a",{href:"/flows/long-night-dream.html",style:{color:"inherit"}},"午夜吉他恶魔")])],-1)),ge=u(()=>t("div",{class:"buttons"},[t("div",{class:"into-article"},[t("a",{id:"into-article",href:"/articles"},"进入博客")])],-1)),ve={class:"wrapper wrapper-brief"},fe={class:"page-title-con"},Te=u(()=>t("div",{class:"page-title"}," Lionad's Blog ",-1)),ye=u(()=>t("div",{class:"page-side-title"}," Newest Posts ",-1)),we={class:"page-side-content"},xe=["textContent"],be={class:"article-list-content"},Me=["href","textContent"],Ce=u(()=>t("div",{class:"page-tip"}," 向下滑动 ",-1)),Oe=S({__name:"index",async setup(e){let s,r;const{data:l}=([s,r]=Y(()=>N("index",()=>B("/").findOne())),s=await s,r(),s);D({title:l.value.title,ogTitle:l.value.title,description:l.value.description,ogDescription:l.value.description});const n=w(),d=["brief","detail"],m=w(d[0]),o=function(){return function(b){if(+Date.now()-0<500)return;const h=["up","down"].findIndex(E=>E===b);m.value=d[h];const M=[0,c.value][h];n.value.scrollTo?n.value.scrollTo(0,M):n.value.scrollTop=M}}(),c=w();X(()=>{setTimeout(()=>{const i=document.querySelector(".parallax");c.value=i.scrollHeight-i.clientHeight})});function T(i){(i.type==="touchmove"||i.type==="mousemove")&&(i.preventDefault(),i.stopPropagation())}const a={parallax_0:{sort:0,delay:100*6,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_0.png",done:!1,cb:()=>a.parallax_0.done=!0},parallax_1:{sort:1,delay:100*5,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_1.png",done:!1,cb:()=>a.parallax_1.done=!0},parallax_2:{sort:2,delay:100*4,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_2.png",done:!1,cb:()=>a.parallax_2.done=!0},parallax_3:{sort:3,delay:100*3,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_3.png",done:!1,cb:()=>a.parallax_3.done=!0},parallax_4:{sort:4,delay:100*2,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_4.png",done:!1,cb:()=>a.parallax_4.done=!0},parallax_5:{sort:5,delay:100*1,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_5.png",done:!1,cb:()=>a.parallax_5.done=!0},parallax_6:{sort:6,delay:100*0,value:"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/homepage/layer_6.png",done:!1,cb:()=>a.parallax_6.done=!0}};return(i,b)=>{const y=q;return v(),f("div",{class:A(["home-page",p(m)])},[t("div",{ref_key:"parallaxRef",ref:n,class:"parallax"},[t("div",F,[t("img",{src:a.parallax_0.value,alt:"云朵背景图片",class:"cloud animation",draggable:"false"},null,8,V)]),t("div",J,[t("img",{src:a.parallax_1.value,alt:"山岳背景图片",draggable:"false"},null,8,K)]),t("div",Q,[t("img",{src:a.parallax_2.value,alt:"山岳背景图片",draggable:"false"},null,8,Z)]),t("div",ee,[t("img",{src:a.parallax_3.value,alt:"山岳背景图片",draggable:"false"},null,8,te)]),t("div",se,[t("img",{src:a.parallax_4.value,alt:"山岳背景图片",draggable:"false"},null,8,ae)]),t("div",oe,[t("img",{src:a.parallax_5.value,alt:"山岳背景图片",draggable:"false"},null,8,le)]),t("div",ie,[t("img",{src:a.parallax_6.value,alt:"山岳背景图片",draggable:"false"},null,8,ne)]),re],512),C(y,{"swipe-up":()=>p(o)("up"),"freeze-time":"300","event-invoke":T},{default:O(()=>[t("div",ce,[he,t("div",ue,[t("div",de,[t("div",pe,[t("span",null,_(p(l).title),1)]),t("div",me,[t("span",null,_(p(l).info),1)]),_e]),ge])])]),_:1},8,["swipe-up"]),C(y,{"swipe-down":()=>p(o)("down"),"freeze-time":"300","event-invoke":T},{default:O(()=>[t("div",ve,[t("div",fe,[Te,ye,t("div",we,[(v(!0),f(U,null,W(p(l).recommends,h=>(v(),f("p",{key:h.to,class:"article-list"},[t("span",{class:"article-list-label",textContent:_(h.category+"：")},null,8,xe),t("span",be,[t("a",{href:h.to,textContent:_(h.label)},null,8,Me)])]))),128))]),Ce])])]),_:1},8,["swipe-down"])],2)}}}),ke=k(Oe,[["__scopeId","data-v-b8b4d30a"]]);export{ke as default};
