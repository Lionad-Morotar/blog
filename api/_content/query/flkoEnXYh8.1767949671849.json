{"_path":"/maps/_database/lakehouse/delta-sharing","_dir":"lakehouse","_draft":false,"_partial":true,"_locale":"","title":"Delta Sharing：跨平台安全数据共享的开放协议（Trial）","description":"以开放协议在多云与本地间共享“在线数据”，集中治理与审计，避免复制；但须管控跨云外网成本。","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"brief"},"children":[{"type":"text","value":"Brief"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"Delta Sharing 是一个用于安全、跨平台数据共享的开放标准与协议，由 Databricks 与 Linux 基金会共同推动。它与云平台无关，使组织能够在不同云供应商与本地环境之间共享“在线数据”，无需拷贝或复制，从而保持数据新鲜度并消除重复成本。我们曾看到某电商公司用 Delta Sharing 将割裂的伙伴数据共享系统替换为集中化、实时且安全的平台，显著提升了协作。该协议通过简单的 REST API 下发短期有效的预签名 URL，接收方可用 pandas、Spark 或 Power BI 等工具拉取大规模数据集。它支持共享数据表、视图、AI 模型与笔记本。尽管它提供强大的集中治理与审计能力，用户仍需注意云外网（egress）费用；若缺乏管理，这类成本可能成为显著的运营风险。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"来源：技术雷达"}]},{"type":"element","tag":"h2","props":{"id":"details"},"children":[{"type":"text","value":"Details"}]},{"type":"element","tag":"h3","props":{"id":"背景与现状"},"children":[{"type":"text","value":"背景与现状"}]},{"type":"element","tag":"h4","props":{"id":"为什么现在要谈"},"children":[{"type":"text","value":"为什么现在要谈"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多云与跨组织协作增多，复制式数据分发带来时效性下降、版本漂移与高存储/运维成本。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"合规与可审计要求上升，点对点管道难以统一治理与撤销访问。"}]}]},{"type":"element","tag":"h4","props":{"id":"典型适用场景"},"children":[{"type":"text","value":"典型适用场景"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"与外部伙伴、子公司、区域团队共享近实时数据。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"多云/跨账体系下的统一数据出口，避免专有平台锁定。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"BI/数据科学工具直接消费共享数据，无需额外落地副本。"}]}]},{"type":"element","tag":"h3","props":{"id":"模式与原理"},"children":[{"type":"text","value":"模式与原理"}]},{"type":"element","tag":"h4","props":{"id":"架构与角色"},"children":[{"type":"text","value":"架构与角色"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Provider 发布 Share（表/视图/模型/笔记本），Recipient 通过客户端读取。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"以简单 REST API 发放短期预签名 URL，按需直读对象存储数据文件。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"治理与审计集中在目录/权限层，实现可撤销、可追踪访问。"}]}]},{"type":"element","tag":"h4","props":{"id":"访问机制与生态"},"children":[{"type":"text","value":"访问机制与生态"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端：pandas、Spark、Power BI 等常见分析工具直接拉取。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"实质是“零复制共享”：计算在接收方，存储留在提供方，减少数据流转链路。"}]}]},{"type":"element","tag":"h4","props":{"id":"能力边界与注意"},"children":[{"type":"text","value":"能力边界与注意"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"读通路为主，写入通常不开放；细粒度控制常通过视图实现行/列裁剪。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"性能受网络与对象存储布局影响；跨区域/跨云引发 egress 成本。"}]}]},{"type":"element","tag":"h3","props":{"id":"对比与演进"},"children":[{"type":"text","value":"对比与演进"}]},{"type":"element","tag":"h4","props":{"id":"相对复制式共享etl文件投递"},"children":[{"type":"text","value":"相对复制式共享（ETL/文件投递）"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优势：单一事实源、近实时、集中治理、撤销敏捷。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"代价：网络带宽与 egress 成本外显；对目录治理与Schema稳定性要求更高。"}]}]},{"type":"element","tag":"h4","props":{"id":"相对专有数据共享产品"},"children":[{"type":"text","value":"相对专有数据共享产品"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优势：开放协议与多工具互通，降低平台绑定。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"局限：生态成熟度与高级特性可能不如深度集成的专有方案。"}]}]},{"type":"element","tag":"h4","props":{"id":"相对查询联邦虚拟化"},"children":[{"type":"text","value":"相对查询联邦/虚拟化"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"优势：简化跨源查询路径与权限整合，减少跨系统优化耦合。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"局限：主要面向数据分发消费，不替代复杂的跨源联邦优化。"}]}]},{"type":"element","tag":"h3","props":{"id":"系统影响"},"children":[{"type":"text","value":"系统影响"}]},{"type":"element","tag":"h4","props":{"id":"架构一致性"},"children":[{"type":"text","value":"架构一致性"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"将“数据出口”标准化，减少私建管道与影子副本，稳定数据血缘与SLA。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"数据契约化：通过视图与Schema版本约束管理外部可见接口。"}]}]},{"type":"element","tag":"h4","props":{"id":"工程与治理"},"children":[{"type":"text","value":"工程与治理"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"统一审计、密钥轮换与访问撤销，便于合规核查。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"需要数据分级、脱敏与最小权限策略；对外共享界面尽量以视图抽象。"}]}]},{"type":"element","tag":"h4","props":{"id":"成本与性能"},"children":[{"type":"text","value":"成本与性能"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"主要成本从存储转向网络；需按区域/伙伴制定限额与预算。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建议就近部署、缓存冷热分层、批量化读取以优化吞吐与费用。"}]}]},{"type":"element","tag":"h3","props":{"id":"问题与风险"},"children":[{"type":"text","value":"问题与风险"}]},{"type":"element","tag":"h4","props":{"id":"主要风险"},"children":[{"type":"text","value":"主要风险"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Egress 成本不可控、跨区域传输拉高费用。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"架构泄露与过度暴露：视图/元数据不当暴露造成侧信道风险。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Schema 演进破坏兼容性，导致接收方作业失败。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"客户端异构导致行为差异与支持边界不一致。"}]}]},{"type":"element","tag":"h4","props":{"id":"根因与结构性矛盾"},"children":[{"type":"text","value":"根因与结构性矛盾"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"“零复制共享”的便捷与“网络/合规成本”的增长存在张力。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"统一治理需要强约束，而业务协作追求灵活，需用视图与契约折中。"}]}]},{"type":"element","tag":"h3","props":{"id":"落地建议"},"children":[{"type":"text","value":"落地建议"}]},{"type":"element","tag":"h4","props":{"id":"适用边界"},"children":[{"type":"text","value":"适用边界"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"倾向采用：多云/多组织共享、对近实时有要求、复制成本高的场景。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"谨慎采用：跨洲跨区域高频大流量、Schema 变动频繁、无法落实目录治理。"}]}]},{"type":"element","tag":"h4","props":{"id":"试点路径小步快跑"},"children":[{"type":"text","value":"试点路径（小步快跑）"}]},{"type":"element","tag":"ol","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"选2–3张高价值、稳定Schema的表，以视图对外暴露。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"定义对外接口契约：列级/行级裁剪、数据新鲜度与可用性SLO。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"建立访问审计与成本监控（按消费方/区域/数据集维度）。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"设限与熔断：带宽/请求速率/总费用阈值与自动告警。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"演练撤销与轮换：密钥、共享撤销、回滚预案。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"扩面到模型/笔记本等资产，统一在目录层治理。"}]}]},{"type":"element","tag":"h4","props":{"id":"实施要点"},"children":[{"type":"text","value":"实施要点"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"用视图实现脱敏与行列级策略；敏感数据默认不出域。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"版本化Schema：兼容演进，提供弃用周期与变更公告。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"就近策略：优先同区域共享，必要时部署边缘缓存/落地中转。"}]}]},{"type":"element","tag":"h4","props":{"id":"观测与slo"},"children":[{"type":"text","value":"观测与SLO"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"关键指标：数据新鲜度、端到端读取延迟、成功率、单位消费成本（GB/消费方）、撤销生效时间。"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"周期性审计：共享清单、最小权限偏差、异常访问与成本尖峰。"}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"brief","depth":2,"text":"Brief"},{"id":"details","depth":2,"text":"Details","children":[{"id":"背景与现状","depth":3,"text":"背景与现状"},{"id":"模式与原理","depth":3,"text":"模式与原理"},{"id":"对比与演进","depth":3,"text":"对比与演进"},{"id":"系统影响","depth":3,"text":"系统影响"},{"id":"问题与风险","depth":3,"text":"问题与风险"},{"id":"落地建议","depth":3,"text":"落地建议"}]}]}},"_type":"markdown","_id":"content:6.maps:_database:lakehouse:delta-sharing.md","_source":"content","_file":"6.maps/_database/lakehouse/delta-sharing.md","_stem":"6.maps/_database/lakehouse/delta-sharing","_extension":"md"}