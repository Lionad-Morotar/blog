{"_path":"/maps/_web/browser","_dir":"_web","_draft":false,"_partial":true,"_locale":"","title":"浏览器","description":"","body":{"type":"root","children":[{"type":"element","tag":"h2","props":{"id":"statics"},"children":[{"type":"text","value":"Statics"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://wpt.fyi/interop-2023","rel":["nofollow"]},"children":[{"type":"text","value":"主流浏览器的新特性支持率"}]}]}]},{"type":"element","tag":"h2","props":{"id":"news"},"children":[{"type":"text","value":"News"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/maps/_web/browser/new"},"children":[{"type":"text","value":"Web.dev 月刊（新浏览器特性）"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.chrome.com/blog/css-wrapped-2023?hl=en","rel":["nofollow"]},"children":[{"type":"text","value":"CSS 2023"}]}]}]},{"type":"element","tag":"h2","props":{"id":"baseline"},"children":[{"type":"text","value":"BaseLine"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"从 2023-12 月开始，在 caniuse 网站上能看到 Baseline 标志了，见："},{"type":"element","tag":"a","props":{"href":"https://web.dev/blog/baseline2023","rel":["nofollow"]},"children":[{"type":"text","value":"Baseline 2023"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在开源项目 webstatus.dev 可以查看 BaseLine 在各浏览器的支持情况："},{"type":"element","tag":"a","props":{"href":"https://github.com/GoogleChrome/webstatus.dev","rel":["nofollow"]},"children":[{"type":"text","value":"WebStatus.dev"}]}]},{"type":"element","tag":"h4","props":{"id":"a-definition-update-for-baseline"},"children":[{"type":"element","tag":"a","props":{"href":"https://web.dev/blog/baseline-definition-update?hl=en","rel":["nofollow"]},"children":[{"type":"text","value":"A definition update for Baseline"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"新更新的 Baseline 包含两个关键时间点："}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Newly available：所有主流浏览器开始支持某个特性"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Widely available：Newly available 过后的 30 个月（通常已经覆盖到 95% 的用户）"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"q","props":{},"children":[{"type":"text","value":"We have also expanded the core browser set to explicitly include mobile versions of those browsers."}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"在这个列表里，Edge 的移动端不算主流浏览器，em..."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"core browser include mobile versions","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20231227012228.png"},"children":[]}]},{"type":"element","tag":"h2","props":{"id":"浏览器插件"},"children":[{"type":"text","value":"浏览器插件"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://developer.chrome.com/docs/extensions/reference/api?hl=zh-cn","rel":["nofollow"]},"children":[{"type":"text","value":"Chrome Extensions API"}]}]}]},{"type":"element","tag":"h2","props":{"id":"架构"},"children":[{"type":"text","value":"架构"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/maps/_web/browser/principle"},"children":[{"type":"text","value":"浏览器原理"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"/maps/_web/browser/router"},"children":[{"type":"text","value":"路由技术"}]}]}]},{"type":"element","tag":"h2","props":{"id":"开发"},"children":[{"type":"text","value":"开发"}]},{"type":"element","tag":"h4","props":{"id":"事件捕获机制"},"children":[{"type":"text","value":"事件捕获机制？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"浏览器的事件传播分为三个阶段：Capturing、Targeting、Bubbling，顺序上来说是先从根元素一直向目标元素传播，然后再由目标元素向根元素传播。事件捕获默认发生在冒泡阶段，但可以在事件监听时使用 useCapture 参数使回调在 Capture 阶段触发。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"event processing in browser","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/event-capture.svg?w=60"},"children":[]}]},{"type":"element","tag":"h4","props":{"id":"为什么-passive-true-能改善滚动性能"},"children":[{"type":"text","value":"为什么 passive true 能改善滚动性能？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"绑定了事件的 DOM 相关区域会在合成器线程中被标记为 Non-fast Scrollable Region，滚动时，需要等待可能的 JS 执行（比如说 e.preventDefault），将渲染树复合分割为磁贴后，交由栅格线程渲染，最后由 GPU 绘制到界面上。当一个事件标记了 passive: true 之后，合成器线程知悉 JS 执行不会改变滚动事件，所以可以直接走复合、栅格化、渲染的流程。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"passive 在 document 绑定 touchmove 或 touchstart 时默认是开启的，但是如果内部使用了 preventDefault，则会使优化失效，在控制台也会报警告。"}]},{"type":"element","tag":"h4","props":{"id":"bfcache-是如何运作的"},"children":[{"type":"text","value":"BFCache 是如何运作的？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://www.youtube.com/watch?v=cuPsdRckkF0","rel":["nofollow"]},"children":[{"type":"text","value":"BFCache（Back/Forward Cache）"}]},{"type":"text","value":" 是一种缓存策略。浏览器会把当前页面的快照（包括 JS Heap 快照）缓存到内存中，以便用户从当前页面导航到其它页面短暂浏览后又返回原先页面时，迅速地展现页面。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"为了使 BFCache 生效，不能使用 unload、beforeunload 事件，不能指明 window.open，此外，在离开前面前需要连接是关闭状态的（WS、fetch 等）。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"见："},{"type":"element","tag":"a","props":{"href":"https://web.dev/bfcache","rel":["nofollow"]},"children":[{"type":"text","value":"BFCache"}]}]},{"type":"element","tag":"h4","props":{"id":"浏览器怎么跨页面通信"},"children":[{"type":"text","value":"浏览器怎么跨页面通信？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"考虑兼容性的话需要使用服务器中转，否则使用 Broadcast Channel 非常合适。Broadcast Channel 可以在 Workers 中使用，它能实现同源 URL 下多窗口、多标签或 iFrames 中的通信。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"见："},{"type":"element","tag":"a","props":{"href":"https://developer.mozilla.org/en-US/docs/Web/API/Broadcast_Channel_API","rel":["nofollow"]},"children":[{"type":"text","value":"Broadcast Channel"}]}]},{"type":"element","tag":"h4","props":{"id":"compression-streams"},"children":[{"type":"text","value":"Compression Streams"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"Compression Streams："},{"type":"element","tag":"a","props":{"href":"https://web.dev/blog/compressionstreams?hl=en","rel":["nofollow"]},"children":[{"type":"text","value":"Compression Streams are now supported on all browsers"}]}]}]},{"type":"element","tag":"h4","props":{"id":"eventsource"},"children":[{"type":"text","value":"EventSource"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"EventSource 是一个基于 HTTP 协议，能在浏览器端自动重连的服务端推送协议。常用于股票、天气等服务端需要实时向客户端推送消息的场景。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"见："},{"type":"element","tag":"a","props":{"href":"https://github.com/Lionad-Morotar/read-source-code/blob/6e866c893fc1edb3fa2da1979af0c1b252f81da5/api/event-source/index.html","rel":["nofollow"]},"children":[{"type":"text","value":"Event Source API Test"}]}]},{"type":"element","tag":"h2","props":{"id":"调试"},"children":[{"type":"text","value":"调试"}]},{"type":"element","tag":"h4","props":{"id":"代码覆盖率怎么看"},"children":[{"type":"text","value":"代码覆盖率怎么看？"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"通过代码覆盖率选项查看某个页面或某流程中，执行到的 JS 和 CSS 代码的百分比。可以用来优化首屏等场景。"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"Code Coverage","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20220704211729.png"},"children":[]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"statics","depth":2,"text":"Statics"},{"id":"news","depth":2,"text":"News"},{"id":"baseline","depth":2,"text":"BaseLine"},{"id":"浏览器插件","depth":2,"text":"浏览器插件"},{"id":"架构","depth":2,"text":"架构"},{"id":"开发","depth":2,"text":"开发"},{"id":"调试","depth":2,"text":"调试"}]}},"_type":"markdown","_id":"content:6.maps:_web:browser:index.md","_source":"content","_file":"6.maps/_web/browser/index.md","_stem":"6.maps/_web/browser/index","_extension":"md"}