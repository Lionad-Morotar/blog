{"_path":"/_archieved/2019-07/chrome-image-lazyload","_dir":"2019-07","_draft":false,"_partial":true,"_locale":"","title":"听说你还在手写懒加载?","description":"过去, 我们对含有大量图片的网站进行优化无外乎要依靠 JS 逻辑或是相关插件来完成, 比如懒加载技术. 而现在(至少在不久的将来), Chrome 75 版本将增加原生懒加载功能.","body":{"type":"root","children":[{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"过去, 我们对含有大量图片的网站进行优化无外乎要依靠 JS 逻辑或是相关插件来完成, 比如"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"懒加载"}]},{"type":"text","value":"技术. 而现在(至少在不久的将来), Chrome 75 版本将增加"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"原生懒加载"}]},{"type":"text","value":"功能."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"原生懒加载","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/chrome-image-lazyload/2019-04-23-01-30-25.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"直接开始使用"},"children":[{"type":"text","value":"直接开始使用"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"当然, 你也可以现在就开始体验这一功能, 在浏览器的标签栏输入"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"browser://flags/#enable-lazy-image-loading"}]},{"type":"text","value":"并进入页面, 找到"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"enable-lazy-image-loading"}]},{"type":"text","value":"这一项打开它, 重启后即可使用."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"如何开启","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/chrome-image-lazyload/2019-04-23-00-45-26.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"标准之下"},"children":[{"type":"text","value":"标准之下"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有关"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":"的使用, 我相信你想知道更多, 你可以使用以下三个属性来定义浏览器加载行为:"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"lazy: 使用懒加载, 当屏幕滚动到图片附近时"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"eager: 立即加载图片"}]},{"type":"element","tag":"li","props":{},"children":[{"type":"text","value":"auto: 由浏览器自行决定"}]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"有关懒加载的讨论, 你可以通过这个"},{"type":"element","tag":"a","props":{"href":"https://github.com/whatwg/html/pull/3752","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"issue"}]}]},{"type":"text","value":"进一步探索."}]},{"type":"element","tag":"h3","props":{"id":"开始使用新代码"},"children":[{"type":"text","value":"开始使用新代码"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"也许你想把这一特征立即运用到你的项目中, 但是你别忘了至少目前为止他还是实验性的功能, 所以需要做功能检测, 对不支持的浏览器进行兼容:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"功能检测","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/chrome-image-lazyload/2019-04-23-01-37-31.png"},"children":[]}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"仅仅这样还不够, 为了不使你的 Image 标签被不支持"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"loading"}]},{"type":"text","value":"属性的浏览器立即加载出来, 你还需要把"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"src"}]},{"type":"text","value":"属性替换为其它属性, 同时还得考虑浏览器不支持 JS 的情况, 比如像这样做:"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"element","tag":"img","props":{"alt":"兼容","src":"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/chrome-image-lazyload/2019-04-23-01-31-00.png"},"children":[]}]},{"type":"element","tag":"h3","props":{"id":"抛弃非原生懒加载"},"children":[{"type":"text","value":"抛弃非原生懒加载?"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"抛弃非原生懒加载? 答案在任何情况下都是"},{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"否"}]},{"type":"text","value":"."}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"如果未来浏览器都支持懒加载, 并且标准较现在没有改变的话, 它只适用于一些简单的网页浏览场景, 比如像掘金这种文本和图片混排的页面.对于特殊场景下, 比如"},{"type":"element","tag":"a","props":{"href":"https://juejin.im/post/5cbd30e7e51d456e803516ba","rel":["nofollow"]},"children":[{"type":"text","value":"这位老哥"}]},{"type":"text","value":"的这篇文章里描绘的问题, 我们还是得需要根据需求, 书写大量原生 JS 逻辑.除非问题本质得到解决, 否者"},{"type":"element","tag":"strong","props":{},"children":[{"type":"text","value":"任何在体验上的优化, 都是优化一部分场景的性能, 而放弃另一部分场景的性能"}]},{"type":"text","value":"(甚至负优化)"}]},{"type":"element","tag":"h3","props":{"id":"最后"},"children":[{"type":"text","value":"最后"}]},{"type":"element","tag":"p","props":{},"children":[{"type":"text","value":"文中代码图片是使用"},{"type":"element","tag":"a","props":{"href":"https://carbon.now.sh","rel":["nofollow"]},"children":[{"type":"element","tag":"code","props":{"className":[]},"children":[{"type":"text","value":"Carbon"}]}]},{"type":"text","value":"合成的, 掘金的代码高亮实在是... 么得办法~~"}]},{"type":"element","tag":"h3","props":{"id":"阅读更多"},"children":[{"type":"text","value":"阅读更多"}]},{"type":"element","tag":"ul","props":{},"children":[{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://addyosmani.com/blog/lazy-loading/","rel":["nofollow"]},"children":[{"type":"text","value":"Native image lazy-loading for the web!"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/whatwg/html/pull/3752","rel":["nofollow"]},"children":[{"type":"text","value":"Lazyload images and iframes"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"https://github.com/dwqs/blog/issues/74","rel":["nofollow"]},"children":[{"type":"text","value":"图片和视频的懒加载"}]}]},{"type":"element","tag":"li","props":{},"children":[{"type":"element","tag":"a","props":{"href":"http://medium.yintage.com/?p=44","rel":["nofollow"]},"children":[{"type":"text","value":"极致性能 – 图片渐进显示和懒加载"}]}]}]}],"toc":{"title":"","searchDepth":2,"depth":2,"links":[{"id":"直接开始使用","depth":3,"text":"直接开始使用"},{"id":"标准之下","depth":3,"text":"标准之下"},{"id":"开始使用新代码","depth":3,"text":"开始使用新代码"},{"id":"抛弃非原生懒加载","depth":3,"text":"抛弃非原生懒加载?"},{"id":"最后","depth":3,"text":"最后"},{"id":"阅读更多","depth":3,"text":"阅读更多"}]}},"_type":"markdown","_id":"content:_archieved:2019-07:chrome-image-lazyload.md","_source":"content","_file":"_archieved/2019-07/chrome-image-lazyload.md","_extension":"md"}