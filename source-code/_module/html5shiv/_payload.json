[{"data":1,"prerenderedAt":5850},["Reactive",2],{"navigation":3,"/source-code/_module/html5shiv":386,"/source-code/_module/html5shiv-surround":5842},[4,32,80,96,123,129,135,369,375,381],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":42,"_path":43},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":45,"_path":46},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":48,"_path":49},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":51,"_path":52},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":54,"_path":55},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":57,"_path":58},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":60,"_path":61},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":63,"_path":64},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":66,"_path":67},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":69,"_path":70},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":72,"_path":73},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":75,"_path":76},"🚝 四十二篇系列","/articles/fourty-two",{"title":78,"_path":79},"📝 技术博客归档","/articles/fold",{"title":81,"_path":82,"children":83},"造物 / Make","/tools",[84,87,90,93],{"title":85,"_path":86},"🌐 AnySort","/tools/anysort",{"title":88,"_path":89},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":91,"_path":92},"👓 Crapto","/tools/crypto-inline",{"title":94,"_path":95},"🖨️ any-to-base64","/tools/any-to-base64",{"title":97,"_path":98,"children":99},"吉他剧场 / Music","/music",[100,102,105,108,111,114,117,120],{"title":101,"_path":98},"🎸 FingerStyle！",{"title":103,"_path":104},"🌬️ 等待的风","/music/wind",{"title":106,"_path":107},"💕 约定的海洋","/music/ocean",{"title":109,"_path":110},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":112,"_path":113},"🌏 残酷天使的行动纲领","/music/eva",{"title":115,"_path":116},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":118,"_path":119},"🍷 Wu Wei","/music/wu-wei",{"title":121,"_path":122},"🌅 无题","/music/untitled",{"title":124,"_path":125,"children":126},"画点什么 / Paint","/paint",[127],{"title":128,"_path":125},"🚧 正在施工",{"title":130,"_path":131,"children":132},"知识地图 / Maps","/maps",[133],{"title":134,"_path":131},"🏁 知识地图",{"title":136,"_path":137,"children":138},"零散的笔记 / Gists","/gists",[139,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366],{"title":140,"_path":137},"🧊 Gists",{"title":142,"_path":143},"网站的可访问性","/gists/accessibility",{"title":145,"_path":146},"Bit","/gists/bit",{"title":148,"_path":149},"图片模糊","/gists/blur",{"title":151,"_path":152},"渲染相关笔记","/gists/c4d",{"title":154,"_path":155},"CDN 问题记录","/gists/cdn",{"title":157,"_path":158},"消毒剂","/gists/cleaner",{"title":160,"_path":161},"Windows Command","/gists/cmd",{"title":163,"_path":164},"Command","/gists/command",{"title":166,"_path":167},"复杂科学","/gists/complexity-science",{"title":169,"_path":170},"宇宙","/gists/cosmos",{"title":172,"_path":173},"C++","/gists/cpp",{"title":175,"_path":176},"Data Structure","/gists/data-structure",{"title":178,"_path":179},"DEPRESSION","/gists/depression",{"title":181,"_path":182},"设计模式","/gists/design-patterns",{"title":184,"_path":185},"Developer Experience","/gists/developer-experience",{"title":187,"_path":188},"Device Metrics","/gists/device-metrix",{"title":190,"_path":191},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":193,"_path":194},"正则表达式","/gists/eegex",{"title":196,"_path":197},"Emoji","/gists/emoji",{"title":199,"_path":200},"工程","/gists/engineering",{"title":202,"_path":203},"熵","/gists/entropy",{"title":205,"_path":206},"Environment","/gists/environment",{"title":208,"_path":209},"Erlang","/gists/erlang",{"title":211,"_path":212},"逃离塔克夫","/gists/escape-from-tarkov",{"title":214,"_path":215},"ESNext (ES6-ES11)","/gists/esnext",{"title":217,"_path":218},"Eval！","/gists/eval",{"title":220,"_path":221},"Flutter","/gists/flutter",{"title":223,"_path":224},"字体","/gists/font",{"title":226,"_path":227},"JS 函数式编程","/gists/functional",{"title":229,"_path":230},"Google C++ Standard","/gists/google-cpp-standard",{"title":232,"_path":233},"双向链接完全体","/gists/graph",{"title":235,"_path":236},"Hardwares","/gists/hardwares",{"title":238,"_path":239},"哈希冲突","/gists/hash-collision",{"title":241,"_path":242},"信息设计","/gists/information-design",{"title":244,"_path":245},"InstantPage","/gists/instant.page",{"title":247,"_path":248},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":250,"_path":251},"KVStore","/gists/key-value-db",{"title":253,"_path":254},"Kubernetes","/gists/kubernetes",{"title":256,"_path":257},"Makefile","/gists/makefile",{"title":259,"_path":260},"Markdown Inline Style","/gists/markdown-nice",{"title":262,"_path":263},"小程序","/gists/miniapp",{"title":265,"_path":266},"减小页面快照体积","/gists/minify-html",{"title":268,"_path":269},"mklink","/gists/mklink",{"title":271,"_path":272},"Mock","/gists/mock",{"title":274,"_path":275},"多端应用","/gists/multy-end-app",{"title":277,"_path":278},"神经科学","/gists/neuroscience",{"title":280,"_path":281},"OO","/gists/oo",{"title":283,"_path":284},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":286,"_path":287},"人物","/gists/person",{"title":289,"_path":290},"PInvoke","/gists/pinvoke",{"title":292,"_path":293},"像素","/gists/pixel",{"title":295,"_path":296},"PowerShell","/gists/powershell",{"title":298,"_path":299},"量子","/gists/quantum",{"title":301,"_path":302},"保持好奇心","/gists/questions",{"title":304,"_path":305},"React Native","/gists/react-native",{"title":307,"_path":308},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":310,"_path":311},"SEO","/gists/seo",{"title":313,"_path":314},"Shader","/gists/shader",{"title":316,"_path":317},"Shape Up","/gists/shape-up",{"title":319,"_path":320},"睡觉","/gists/sleep",{"title":322,"_path":323},"States","/gists/states",{"title":325,"_path":326},"Storage","/gists/storage",{"title":328,"_path":329},"音视频流处理","/gists/stream-cli",{"title":331,"_path":332},"Symbol","/gists/symbol",{"title":334,"_path":335},"系统论","/gists/systems-theory",{"title":337,"_path":338},"Taro","/gists/taro",{"title":340,"_path":341},"任务切片","/gists/task-slice",{"title":343,"_path":344},"技术偏好","/gists/tech-dudge",{"title":346,"_path":347},"Untitled","/gists/untitled",{"title":349,"_path":350},"可变字体","/gists/variable-font",{"title":352,"_path":353},"视觉错觉","/gists/visual-illusion",{"title":355,"_path":356},"SS(SSR)","/gists/vpn",{"title":358,"_path":359},"VS Code 插件开发","/gists/vscode-plugin",{"title":361,"_path":362},"Web Components","/gists/web-components",{"title":364,"_path":365},"Windows","/gists/windows",{"title":367,"_path":368},"查缺补漏","/gists/wrong",{"title":370,"_path":371,"children":372},"代码笔记 / Gists","/source-code",[373],{"title":374,"_path":371},"🚄 代码笔记",{"title":376,"_path":377,"children":378},"我 / Abount","/hire",[379],{"title":380,"_path":377},"📬 技术简历",{"title":382,"_path":383,"children":384},"todo","/todo",[385],{"title":382,"_path":383},{"_path":387,"_dir":388,"_draft":389,"_partial":390,"_locale":391,"title":392,"description":391,"body":393,"_type":5837,"_id":5838,"_source":5839,"_file":5840,"_extension":5841},"/source-code/_module/html5shiv","_module",false,true,"","🛠 低版本浏览器兼容HTML5标签原理",{"type":394,"children":395,"toc":5826},"root",[396,404,410,432,437,452,457,463,468,623,628,633,638,643,740,758,763,1111,1116,1701,1706,1711,1716,2013,2018,2437,2442,3316,3321,3427,3432,3549,3554,4279,4284,4660,4665,4930,4935,4940,5273,5278,5751,5756,5761,5820],{"type":397,"tag":398,"props":399,"children":401},"element","h1",{"id":400},"低版本浏览器兼容html5标签原理",[402],{"type":403,"value":392},"text",{"type":397,"tag":405,"props":406,"children":408},"h2",{"id":407},"长话短说",[409],{"type":403,"value":407},{"type":397,"tag":411,"props":412,"children":413},"p",{},[414,416,430],{"type":403,"value":415},"最近在复习 HTML 相关内容呢，不知不觉想起以前在实习公司用过的 html5shiv 这个玩意儿。html5shiv 能使 IE6/7/8 等浏览器支持 HTML5 的新标签",{"type":397,"tag":417,"props":418,"children":419},"sup",{},[420],{"type":397,"tag":421,"props":422,"children":427},"a",{"href":423,"ariaDescribedBy":424,"dataFootnoteRef":391,"id":426},"#user-content-fn-html5shiv",[425],"footnote-label","user-content-fnref-html5shiv",[428],{"type":403,"value":429},"1",{"type":403,"value":431},"。这里我初略扫了一眼它的原理。",{"type":397,"tag":411,"props":433,"children":434},{},[435],{"type":403,"value":436},"它主要做了以下两件事情：",{"type":397,"tag":438,"props":439,"children":440},"ul",{},[441,447],{"type":397,"tag":442,"props":443,"children":444},"li",{},[445],{"type":403,"value":446},"用高阶函数增强浏览器原生的 createElement 等 API。需要创建新标签时，使用已缓存的元素克隆并返还一个新元素，或回退至调用原生 API 创建 H5 新元素。这个增强是基于 document.createElement 能创建非标准元素这个特性实现的。",{"type":397,"tag":442,"props":448,"children":449},{},[450],{"type":403,"value":451},"给新标签增加相应的默认样式。",{"type":397,"tag":405,"props":453,"children":455},{"id":454},"具体实现",[456],{"type":403,"value":454},{"type":397,"tag":458,"props":459,"children":461},"h3",{"id":460},"代码结构",[462],{"type":403,"value":460},{"type":397,"tag":411,"props":464,"children":465},{},[466],{"type":403,"value":467},"整个代码被包裹在 IIFE 中。像 jQuery 一样，把 window 对象传了进来。",{"type":397,"tag":469,"props":470,"children":474},"pre",{"className":471,"code":472,"language":473,"meta":391,"style":391},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",";(function(window, document) {\n    // rest of code\n}(typeof window !== \"undefined\" ? window : this, document));\n","js",[475],{"type":397,"tag":476,"props":477,"children":478},"code",{"__ignoreMap":391},[479,533,543],{"type":397,"tag":480,"props":481,"children":484},"span",{"class":482,"line":483},"line",1,[485,491,497,503,507,513,518,523,528],{"type":397,"tag":480,"props":486,"children":488},{"style":487},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[489],{"type":403,"value":490},";",{"type":397,"tag":480,"props":492,"children":494},{"style":493},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[495],{"type":403,"value":496},"(",{"type":397,"tag":480,"props":498,"children":500},{"style":499},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[501],{"type":403,"value":502},"function",{"type":397,"tag":480,"props":504,"children":505},{"style":487},[506],{"type":403,"value":496},{"type":397,"tag":480,"props":508,"children":510},{"style":509},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[511],{"type":403,"value":512},"window",{"type":397,"tag":480,"props":514,"children":515},{"style":487},[516],{"type":403,"value":517},",",{"type":397,"tag":480,"props":519,"children":520},{"style":509},[521],{"type":403,"value":522}," document",{"type":397,"tag":480,"props":524,"children":525},{"style":487},[526],{"type":403,"value":527},")",{"type":397,"tag":480,"props":529,"children":530},{"style":487},[531],{"type":403,"value":532}," {\n",{"type":397,"tag":480,"props":534,"children":536},{"class":482,"line":535},2,[537],{"type":397,"tag":480,"props":538,"children":540},{"style":539},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[541],{"type":403,"value":542},"    // rest of code\n",{"type":397,"tag":480,"props":544,"children":546},{"class":482,"line":545},3,[547,552,556,562,567,572,578,584,589,594,598,603,609,613,618],{"type":397,"tag":480,"props":548,"children":549},{"style":487},[550],{"type":403,"value":551},"}",{"type":397,"tag":480,"props":553,"children":554},{"style":493},[555],{"type":403,"value":496},{"type":397,"tag":480,"props":557,"children":559},{"style":558},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[560],{"type":403,"value":561},"typeof",{"type":397,"tag":480,"props":563,"children":564},{"style":493},[565],{"type":403,"value":566}," window ",{"type":397,"tag":480,"props":568,"children":569},{"style":558},[570],{"type":403,"value":571},"!==",{"type":397,"tag":480,"props":573,"children":575},{"style":574},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[576],{"type":403,"value":577}," \"",{"type":397,"tag":480,"props":579,"children":581},{"style":580},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[582],{"type":403,"value":583},"undefined",{"type":397,"tag":480,"props":585,"children":586},{"style":574},[587],{"type":403,"value":588},"\"",{"type":397,"tag":480,"props":590,"children":591},{"style":558},[592],{"type":403,"value":593}," ?",{"type":397,"tag":480,"props":595,"children":596},{"style":493},[597],{"type":403,"value":566},{"type":397,"tag":480,"props":599,"children":600},{"style":558},[601],{"type":403,"value":602},":",{"type":397,"tag":480,"props":604,"children":606},{"style":605},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[607],{"type":403,"value":608}," this",{"type":397,"tag":480,"props":610,"children":611},{"style":487},[612],{"type":403,"value":517},{"type":397,"tag":480,"props":614,"children":615},{"style":493},[616],{"type":403,"value":617}," document))",{"type":397,"tag":480,"props":619,"children":620},{"style":487},[621],{"type":403,"value":622},";\n",{"type":397,"tag":411,"props":624,"children":625},{},[626],{"type":403,"value":627},"一个很经典的模块模式，没什么好拓展的，我们继续...",{"type":397,"tag":458,"props":629,"children":631},{"id":630},"兼容性检测",[632],{"type":403,"value":630},{"type":397,"tag":411,"props":634,"children":635},{},[636],{"type":403,"value":637},"以下代码检测当前浏览器对 HTML5 的支持程度。",{"type":397,"tag":411,"props":639,"children":640},{},[641],{"type":403,"value":642},"通过检测元素对 hidden 属性的支持程度，检测浏览器对 HTML5 样式支持的水平。",{"type":397,"tag":469,"props":644,"children":646},{"className":471,"code":645,"language":473,"meta":391,"style":391},"a = document.createElement('a')\nsupportsHtml5Styles = ('hidden' in a)\n",[647],{"type":397,"tag":476,"props":648,"children":649},{"__ignoreMap":391},[650,700],{"type":397,"tag":480,"props":651,"children":652},{"class":482,"line":483},[653,658,663,667,672,678,682,687,691,695],{"type":397,"tag":480,"props":654,"children":655},{"style":493},[656],{"type":403,"value":657},"a ",{"type":397,"tag":480,"props":659,"children":660},{"style":558},[661],{"type":403,"value":662},"=",{"type":397,"tag":480,"props":664,"children":665},{"style":493},[666],{"type":403,"value":522},{"type":397,"tag":480,"props":668,"children":669},{"style":487},[670],{"type":403,"value":671},".",{"type":397,"tag":480,"props":673,"children":675},{"style":674},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[676],{"type":403,"value":677},"createElement",{"type":397,"tag":480,"props":679,"children":680},{"style":493},[681],{"type":403,"value":496},{"type":397,"tag":480,"props":683,"children":684},{"style":574},[685],{"type":403,"value":686},"'",{"type":397,"tag":480,"props":688,"children":689},{"style":580},[690],{"type":403,"value":421},{"type":397,"tag":480,"props":692,"children":693},{"style":574},[694],{"type":403,"value":686},{"type":397,"tag":480,"props":696,"children":697},{"style":493},[698],{"type":403,"value":699},")\n",{"type":397,"tag":480,"props":701,"children":702},{"class":482,"line":535},[703,708,712,717,721,726,730,735],{"type":397,"tag":480,"props":704,"children":705},{"style":493},[706],{"type":403,"value":707},"supportsHtml5Styles ",{"type":397,"tag":480,"props":709,"children":710},{"style":558},[711],{"type":403,"value":662},{"type":397,"tag":480,"props":713,"children":714},{"style":493},[715],{"type":403,"value":716}," (",{"type":397,"tag":480,"props":718,"children":719},{"style":574},[720],{"type":403,"value":686},{"type":397,"tag":480,"props":722,"children":723},{"style":580},[724],{"type":403,"value":725},"hidden",{"type":397,"tag":480,"props":727,"children":728},{"style":574},[729],{"type":403,"value":686},{"type":397,"tag":480,"props":731,"children":732},{"style":558},[733],{"type":403,"value":734}," in",{"type":397,"tag":480,"props":736,"children":737},{"style":493},[738],{"type":403,"value":739}," a)\n",{"type":397,"tag":411,"props":741,"children":742},{},[743,745,756],{"type":403,"value":744},"以前没听过 HTMLElement.hidden，项目里的隐藏元素都是直接上 CSS 做的。不过据 MDN 表示，除了隐藏元素之外，hidden 属性还能用于创造离屏 Canvas",{"type":397,"tag":417,"props":746,"children":747},{},[748],{"type":397,"tag":421,"props":749,"children":753},{"href":750,"ariaDescribedBy":751,"dataFootnoteRef":391,"id":752},"#user-content-fn-hidden",[425],"user-content-fnref-hidden",[754],{"type":403,"value":755},"2",{"type":403,"value":757},"。",{"type":397,"tag":411,"props":759,"children":760},{},[761],{"type":403,"value":762},"这段代码用于测试浏览器是否支持未知元素的创建。",{"type":397,"tag":469,"props":764,"children":766},{"className":471,"code":765,"language":473,"meta":391,"style":391},"a = document.createElement('a')\na.innerHTML = '\u003Cxyz>\u003C/xyz>'\nsupportsUnknownElements = a.childNodes.length == 1 || (function() {\n    var frag = document.createDocumentFragment()\n    return (\n    typeof frag.cloneNode == 'undefined' ||\n    typeof frag.createDocumentFragment == 'undefined' ||\n    typeof frag.createElement == 'undefined'\n    )\n}())\n",[767],{"type":397,"tag":476,"props":768,"children":769},{"__ignoreMap":391},[770,813,848,917,955,970,1013,1053,1089,1098],{"type":397,"tag":480,"props":771,"children":772},{"class":482,"line":483},[773,777,781,785,789,793,797,801,805,809],{"type":397,"tag":480,"props":774,"children":775},{"style":493},[776],{"type":403,"value":657},{"type":397,"tag":480,"props":778,"children":779},{"style":558},[780],{"type":403,"value":662},{"type":397,"tag":480,"props":782,"children":783},{"style":493},[784],{"type":403,"value":522},{"type":397,"tag":480,"props":786,"children":787},{"style":487},[788],{"type":403,"value":671},{"type":397,"tag":480,"props":790,"children":791},{"style":674},[792],{"type":403,"value":677},{"type":397,"tag":480,"props":794,"children":795},{"style":493},[796],{"type":403,"value":496},{"type":397,"tag":480,"props":798,"children":799},{"style":574},[800],{"type":403,"value":686},{"type":397,"tag":480,"props":802,"children":803},{"style":580},[804],{"type":403,"value":421},{"type":397,"tag":480,"props":806,"children":807},{"style":574},[808],{"type":403,"value":686},{"type":397,"tag":480,"props":810,"children":811},{"style":493},[812],{"type":403,"value":699},{"type":397,"tag":480,"props":814,"children":815},{"class":482,"line":535},[816,820,824,829,833,838,843],{"type":397,"tag":480,"props":817,"children":818},{"style":493},[819],{"type":403,"value":421},{"type":397,"tag":480,"props":821,"children":822},{"style":487},[823],{"type":403,"value":671},{"type":397,"tag":480,"props":825,"children":826},{"style":493},[827],{"type":403,"value":828},"innerHTML ",{"type":397,"tag":480,"props":830,"children":831},{"style":558},[832],{"type":403,"value":662},{"type":397,"tag":480,"props":834,"children":835},{"style":574},[836],{"type":403,"value":837}," '",{"type":397,"tag":480,"props":839,"children":840},{"style":580},[841],{"type":403,"value":842},"\u003Cxyz>\u003C/xyz>",{"type":397,"tag":480,"props":844,"children":845},{"style":574},[846],{"type":403,"value":847},"'\n",{"type":397,"tag":480,"props":849,"children":850},{"class":482,"line":545},[851,856,860,865,869,874,878,884,889,895,900,904,908,913],{"type":397,"tag":480,"props":852,"children":853},{"style":493},[854],{"type":403,"value":855},"supportsUnknownElements ",{"type":397,"tag":480,"props":857,"children":858},{"style":558},[859],{"type":403,"value":662},{"type":397,"tag":480,"props":861,"children":862},{"style":493},[863],{"type":403,"value":864}," a",{"type":397,"tag":480,"props":866,"children":867},{"style":487},[868],{"type":403,"value":671},{"type":397,"tag":480,"props":870,"children":871},{"style":493},[872],{"type":403,"value":873},"childNodes",{"type":397,"tag":480,"props":875,"children":876},{"style":487},[877],{"type":403,"value":671},{"type":397,"tag":480,"props":879,"children":881},{"style":880},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[882],{"type":403,"value":883},"length",{"type":397,"tag":480,"props":885,"children":886},{"style":558},[887],{"type":403,"value":888}," ==",{"type":397,"tag":480,"props":890,"children":892},{"style":891},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[893],{"type":403,"value":894}," 1",{"type":397,"tag":480,"props":896,"children":897},{"style":558},[898],{"type":403,"value":899}," ||",{"type":397,"tag":480,"props":901,"children":902},{"style":493},[903],{"type":403,"value":716},{"type":397,"tag":480,"props":905,"children":906},{"style":499},[907],{"type":403,"value":502},{"type":397,"tag":480,"props":909,"children":910},{"style":487},[911],{"type":403,"value":912},"()",{"type":397,"tag":480,"props":914,"children":915},{"style":487},[916],{"type":403,"value":532},{"type":397,"tag":480,"props":918,"children":920},{"class":482,"line":919},4,[921,926,931,936,940,944,949],{"type":397,"tag":480,"props":922,"children":923},{"style":499},[924],{"type":403,"value":925},"    var",{"type":397,"tag":480,"props":927,"children":928},{"style":493},[929],{"type":403,"value":930}," frag",{"type":397,"tag":480,"props":932,"children":933},{"style":558},[934],{"type":403,"value":935}," =",{"type":397,"tag":480,"props":937,"children":938},{"style":493},[939],{"type":403,"value":522},{"type":397,"tag":480,"props":941,"children":942},{"style":487},[943],{"type":403,"value":671},{"type":397,"tag":480,"props":945,"children":946},{"style":674},[947],{"type":403,"value":948},"createDocumentFragment",{"type":397,"tag":480,"props":950,"children":952},{"style":951},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[953],{"type":403,"value":954},"()\n",{"type":397,"tag":480,"props":956,"children":958},{"class":482,"line":957},5,[959,965],{"type":397,"tag":480,"props":960,"children":962},{"style":961},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[963],{"type":403,"value":964},"    return",{"type":397,"tag":480,"props":966,"children":967},{"style":951},[968],{"type":403,"value":969}," (\n",{"type":397,"tag":480,"props":971,"children":973},{"class":482,"line":972},6,[974,979,983,987,992,996,1000,1004,1008],{"type":397,"tag":480,"props":975,"children":976},{"style":558},[977],{"type":403,"value":978},"    typeof",{"type":397,"tag":480,"props":980,"children":981},{"style":493},[982],{"type":403,"value":930},{"type":397,"tag":480,"props":984,"children":985},{"style":487},[986],{"type":403,"value":671},{"type":397,"tag":480,"props":988,"children":989},{"style":493},[990],{"type":403,"value":991},"cloneNode",{"type":397,"tag":480,"props":993,"children":994},{"style":558},[995],{"type":403,"value":888},{"type":397,"tag":480,"props":997,"children":998},{"style":574},[999],{"type":403,"value":837},{"type":397,"tag":480,"props":1001,"children":1002},{"style":580},[1003],{"type":403,"value":583},{"type":397,"tag":480,"props":1005,"children":1006},{"style":574},[1007],{"type":403,"value":686},{"type":397,"tag":480,"props":1009,"children":1010},{"style":558},[1011],{"type":403,"value":1012}," ||\n",{"type":397,"tag":480,"props":1014,"children":1016},{"class":482,"line":1015},7,[1017,1021,1025,1029,1033,1037,1041,1045,1049],{"type":397,"tag":480,"props":1018,"children":1019},{"style":558},[1020],{"type":403,"value":978},{"type":397,"tag":480,"props":1022,"children":1023},{"style":493},[1024],{"type":403,"value":930},{"type":397,"tag":480,"props":1026,"children":1027},{"style":487},[1028],{"type":403,"value":671},{"type":397,"tag":480,"props":1030,"children":1031},{"style":493},[1032],{"type":403,"value":948},{"type":397,"tag":480,"props":1034,"children":1035},{"style":558},[1036],{"type":403,"value":888},{"type":397,"tag":480,"props":1038,"children":1039},{"style":574},[1040],{"type":403,"value":837},{"type":397,"tag":480,"props":1042,"children":1043},{"style":580},[1044],{"type":403,"value":583},{"type":397,"tag":480,"props":1046,"children":1047},{"style":574},[1048],{"type":403,"value":686},{"type":397,"tag":480,"props":1050,"children":1051},{"style":558},[1052],{"type":403,"value":1012},{"type":397,"tag":480,"props":1054,"children":1056},{"class":482,"line":1055},8,[1057,1061,1065,1069,1073,1077,1081,1085],{"type":397,"tag":480,"props":1058,"children":1059},{"style":558},[1060],{"type":403,"value":978},{"type":397,"tag":480,"props":1062,"children":1063},{"style":493},[1064],{"type":403,"value":930},{"type":397,"tag":480,"props":1066,"children":1067},{"style":487},[1068],{"type":403,"value":671},{"type":397,"tag":480,"props":1070,"children":1071},{"style":493},[1072],{"type":403,"value":677},{"type":397,"tag":480,"props":1074,"children":1075},{"style":558},[1076],{"type":403,"value":888},{"type":397,"tag":480,"props":1078,"children":1079},{"style":574},[1080],{"type":403,"value":837},{"type":397,"tag":480,"props":1082,"children":1083},{"style":580},[1084],{"type":403,"value":583},{"type":397,"tag":480,"props":1086,"children":1087},{"style":574},[1088],{"type":403,"value":847},{"type":397,"tag":480,"props":1090,"children":1092},{"class":482,"line":1091},9,[1093],{"type":397,"tag":480,"props":1094,"children":1095},{"style":951},[1096],{"type":403,"value":1097},"    )\n",{"type":397,"tag":480,"props":1099,"children":1101},{"class":482,"line":1100},10,[1102,1106],{"type":397,"tag":480,"props":1103,"children":1104},{"style":487},[1105],{"type":403,"value":551},{"type":397,"tag":480,"props":1107,"children":1108},{"style":493},[1109],{"type":403,"value":1110},"())\n",{"type":397,"tag":411,"props":1112,"children":1113},{},[1114],{"type":403,"value":1115},"如果连 document.createElement 都调用失败的话，那 html5shiv 代码就毫无作用了（html5shiv 的原理需要用到 document.createElement），所以用一个 try/catch 将上述两个功能包裹起来。遇到错误则假装浏览器正常支持 HTML5，相关检测变量被置为 true。",{"type":397,"tag":469,"props":1117,"children":1119},{"className":471,"code":1118,"language":473,"meta":391,"style":391},"(function() {\n    try {\n        var a = document.createElement('a')\n        a.innerHTML = '\u003Cxyz>\u003C/xyz>'\n        //if the hidden property is implemented we can assume, \n        // that the browser supports basic HTML5 Styles\n        supportsHtml5Styles = ('hidden' in a)\n\n        supportsUnknownElements = a.childNodes.length == 1 || (function() {\n            // assign a false positive if unable to shiv\n            // ? 猜测特定浏览器对这种括号调用方法会报错\n            (document.createElement)('a')\n            var frag = document.createDocumentFragment()\n            return (\n            typeof frag.cloneNode == 'undefined' ||\n            typeof frag.createDocumentFragment == 'undefined' ||\n            typeof frag.createElement == 'undefined'\n            )\n        }())\n    } catch(e) {\n        // assign a false positive if detection fails => unable to shiv\n        supportsHtml5Styles = true\n        supportsUnknownElements = true\n    }\n}())\n",[1120],{"type":397,"tag":476,"props":1121,"children":1122},{"__ignoreMap":391},[1123,1142,1154,1202,1235,1243,1251,1291,1299,1359,1367,1376,1419,1452,1465,1506,1546,1582,1591,1604,1637,1646,1664,1680,1689],{"type":397,"tag":480,"props":1124,"children":1125},{"class":482,"line":483},[1126,1130,1134,1138],{"type":397,"tag":480,"props":1127,"children":1128},{"style":493},[1129],{"type":403,"value":496},{"type":397,"tag":480,"props":1131,"children":1132},{"style":499},[1133],{"type":403,"value":502},{"type":397,"tag":480,"props":1135,"children":1136},{"style":487},[1137],{"type":403,"value":912},{"type":397,"tag":480,"props":1139,"children":1140},{"style":487},[1141],{"type":403,"value":532},{"type":397,"tag":480,"props":1143,"children":1144},{"class":482,"line":535},[1145,1150],{"type":397,"tag":480,"props":1146,"children":1147},{"style":961},[1148],{"type":403,"value":1149},"    try",{"type":397,"tag":480,"props":1151,"children":1152},{"style":487},[1153],{"type":403,"value":532},{"type":397,"tag":480,"props":1155,"children":1156},{"class":482,"line":545},[1157,1162,1166,1170,1174,1178,1182,1186,1190,1194,1198],{"type":397,"tag":480,"props":1158,"children":1159},{"style":499},[1160],{"type":403,"value":1161},"        var",{"type":397,"tag":480,"props":1163,"children":1164},{"style":493},[1165],{"type":403,"value":864},{"type":397,"tag":480,"props":1167,"children":1168},{"style":558},[1169],{"type":403,"value":935},{"type":397,"tag":480,"props":1171,"children":1172},{"style":493},[1173],{"type":403,"value":522},{"type":397,"tag":480,"props":1175,"children":1176},{"style":487},[1177],{"type":403,"value":671},{"type":397,"tag":480,"props":1179,"children":1180},{"style":674},[1181],{"type":403,"value":677},{"type":397,"tag":480,"props":1183,"children":1184},{"style":951},[1185],{"type":403,"value":496},{"type":397,"tag":480,"props":1187,"children":1188},{"style":574},[1189],{"type":403,"value":686},{"type":397,"tag":480,"props":1191,"children":1192},{"style":580},[1193],{"type":403,"value":421},{"type":397,"tag":480,"props":1195,"children":1196},{"style":574},[1197],{"type":403,"value":686},{"type":397,"tag":480,"props":1199,"children":1200},{"style":951},[1201],{"type":403,"value":699},{"type":397,"tag":480,"props":1203,"children":1204},{"class":482,"line":919},[1205,1210,1214,1219,1223,1227,1231],{"type":397,"tag":480,"props":1206,"children":1207},{"style":493},[1208],{"type":403,"value":1209},"        a",{"type":397,"tag":480,"props":1211,"children":1212},{"style":487},[1213],{"type":403,"value":671},{"type":397,"tag":480,"props":1215,"children":1216},{"style":493},[1217],{"type":403,"value":1218},"innerHTML",{"type":397,"tag":480,"props":1220,"children":1221},{"style":558},[1222],{"type":403,"value":935},{"type":397,"tag":480,"props":1224,"children":1225},{"style":574},[1226],{"type":403,"value":837},{"type":397,"tag":480,"props":1228,"children":1229},{"style":580},[1230],{"type":403,"value":842},{"type":397,"tag":480,"props":1232,"children":1233},{"style":574},[1234],{"type":403,"value":847},{"type":397,"tag":480,"props":1236,"children":1237},{"class":482,"line":957},[1238],{"type":397,"tag":480,"props":1239,"children":1240},{"style":539},[1241],{"type":403,"value":1242},"        //if the hidden property is implemented we can assume, \n",{"type":397,"tag":480,"props":1244,"children":1245},{"class":482,"line":972},[1246],{"type":397,"tag":480,"props":1247,"children":1248},{"style":539},[1249],{"type":403,"value":1250},"        // that the browser supports basic HTML5 Styles\n",{"type":397,"tag":480,"props":1252,"children":1253},{"class":482,"line":1015},[1254,1259,1263,1267,1271,1275,1279,1283,1287],{"type":397,"tag":480,"props":1255,"children":1256},{"style":493},[1257],{"type":403,"value":1258},"        supportsHtml5Styles",{"type":397,"tag":480,"props":1260,"children":1261},{"style":558},[1262],{"type":403,"value":935},{"type":397,"tag":480,"props":1264,"children":1265},{"style":951},[1266],{"type":403,"value":716},{"type":397,"tag":480,"props":1268,"children":1269},{"style":574},[1270],{"type":403,"value":686},{"type":397,"tag":480,"props":1272,"children":1273},{"style":580},[1274],{"type":403,"value":725},{"type":397,"tag":480,"props":1276,"children":1277},{"style":574},[1278],{"type":403,"value":686},{"type":397,"tag":480,"props":1280,"children":1281},{"style":558},[1282],{"type":403,"value":734},{"type":397,"tag":480,"props":1284,"children":1285},{"style":493},[1286],{"type":403,"value":864},{"type":397,"tag":480,"props":1288,"children":1289},{"style":951},[1290],{"type":403,"value":699},{"type":397,"tag":480,"props":1292,"children":1293},{"class":482,"line":1055},[1294],{"type":397,"tag":480,"props":1295,"children":1296},{"emptyLinePlaceholder":390},[1297],{"type":403,"value":1298},"\n",{"type":397,"tag":480,"props":1300,"children":1301},{"class":482,"line":1091},[1302,1307,1311,1315,1319,1323,1327,1331,1335,1339,1343,1347,1351,1355],{"type":397,"tag":480,"props":1303,"children":1304},{"style":493},[1305],{"type":403,"value":1306},"        supportsUnknownElements",{"type":397,"tag":480,"props":1308,"children":1309},{"style":558},[1310],{"type":403,"value":935},{"type":397,"tag":480,"props":1312,"children":1313},{"style":493},[1314],{"type":403,"value":864},{"type":397,"tag":480,"props":1316,"children":1317},{"style":487},[1318],{"type":403,"value":671},{"type":397,"tag":480,"props":1320,"children":1321},{"style":493},[1322],{"type":403,"value":873},{"type":397,"tag":480,"props":1324,"children":1325},{"style":487},[1326],{"type":403,"value":671},{"type":397,"tag":480,"props":1328,"children":1329},{"style":880},[1330],{"type":403,"value":883},{"type":397,"tag":480,"props":1332,"children":1333},{"style":558},[1334],{"type":403,"value":888},{"type":397,"tag":480,"props":1336,"children":1337},{"style":891},[1338],{"type":403,"value":894},{"type":397,"tag":480,"props":1340,"children":1341},{"style":558},[1342],{"type":403,"value":899},{"type":397,"tag":480,"props":1344,"children":1345},{"style":951},[1346],{"type":403,"value":716},{"type":397,"tag":480,"props":1348,"children":1349},{"style":499},[1350],{"type":403,"value":502},{"type":397,"tag":480,"props":1352,"children":1353},{"style":487},[1354],{"type":403,"value":912},{"type":397,"tag":480,"props":1356,"children":1357},{"style":487},[1358],{"type":403,"value":532},{"type":397,"tag":480,"props":1360,"children":1361},{"class":482,"line":1100},[1362],{"type":397,"tag":480,"props":1363,"children":1364},{"style":539},[1365],{"type":403,"value":1366},"            // assign a false positive if unable to shiv\n",{"type":397,"tag":480,"props":1368,"children":1370},{"class":482,"line":1369},11,[1371],{"type":397,"tag":480,"props":1372,"children":1373},{"style":539},[1374],{"type":403,"value":1375},"            // ? 猜测特定浏览器对这种括号调用方法会报错\n",{"type":397,"tag":480,"props":1377,"children":1379},{"class":482,"line":1378},12,[1380,1385,1390,1394,1398,1403,1407,1411,1415],{"type":397,"tag":480,"props":1381,"children":1382},{"style":951},[1383],{"type":403,"value":1384},"            (",{"type":397,"tag":480,"props":1386,"children":1387},{"style":493},[1388],{"type":403,"value":1389},"document",{"type":397,"tag":480,"props":1391,"children":1392},{"style":487},[1393],{"type":403,"value":671},{"type":397,"tag":480,"props":1395,"children":1396},{"style":493},[1397],{"type":403,"value":677},{"type":397,"tag":480,"props":1399,"children":1400},{"style":951},[1401],{"type":403,"value":1402},")(",{"type":397,"tag":480,"props":1404,"children":1405},{"style":574},[1406],{"type":403,"value":686},{"type":397,"tag":480,"props":1408,"children":1409},{"style":580},[1410],{"type":403,"value":421},{"type":397,"tag":480,"props":1412,"children":1413},{"style":574},[1414],{"type":403,"value":686},{"type":397,"tag":480,"props":1416,"children":1417},{"style":951},[1418],{"type":403,"value":699},{"type":397,"tag":480,"props":1420,"children":1422},{"class":482,"line":1421},13,[1423,1428,1432,1436,1440,1444,1448],{"type":397,"tag":480,"props":1424,"children":1425},{"style":499},[1426],{"type":403,"value":1427},"            var",{"type":397,"tag":480,"props":1429,"children":1430},{"style":493},[1431],{"type":403,"value":930},{"type":397,"tag":480,"props":1433,"children":1434},{"style":558},[1435],{"type":403,"value":935},{"type":397,"tag":480,"props":1437,"children":1438},{"style":493},[1439],{"type":403,"value":522},{"type":397,"tag":480,"props":1441,"children":1442},{"style":487},[1443],{"type":403,"value":671},{"type":397,"tag":480,"props":1445,"children":1446},{"style":674},[1447],{"type":403,"value":948},{"type":397,"tag":480,"props":1449,"children":1450},{"style":951},[1451],{"type":403,"value":954},{"type":397,"tag":480,"props":1453,"children":1455},{"class":482,"line":1454},14,[1456,1461],{"type":397,"tag":480,"props":1457,"children":1458},{"style":961},[1459],{"type":403,"value":1460},"            return",{"type":397,"tag":480,"props":1462,"children":1463},{"style":951},[1464],{"type":403,"value":969},{"type":397,"tag":480,"props":1466,"children":1468},{"class":482,"line":1467},15,[1469,1474,1478,1482,1486,1490,1494,1498,1502],{"type":397,"tag":480,"props":1470,"children":1471},{"style":558},[1472],{"type":403,"value":1473},"            typeof",{"type":397,"tag":480,"props":1475,"children":1476},{"style":493},[1477],{"type":403,"value":930},{"type":397,"tag":480,"props":1479,"children":1480},{"style":487},[1481],{"type":403,"value":671},{"type":397,"tag":480,"props":1483,"children":1484},{"style":493},[1485],{"type":403,"value":991},{"type":397,"tag":480,"props":1487,"children":1488},{"style":558},[1489],{"type":403,"value":888},{"type":397,"tag":480,"props":1491,"children":1492},{"style":574},[1493],{"type":403,"value":837},{"type":397,"tag":480,"props":1495,"children":1496},{"style":580},[1497],{"type":403,"value":583},{"type":397,"tag":480,"props":1499,"children":1500},{"style":574},[1501],{"type":403,"value":686},{"type":397,"tag":480,"props":1503,"children":1504},{"style":558},[1505],{"type":403,"value":1012},{"type":397,"tag":480,"props":1507,"children":1509},{"class":482,"line":1508},16,[1510,1514,1518,1522,1526,1530,1534,1538,1542],{"type":397,"tag":480,"props":1511,"children":1512},{"style":558},[1513],{"type":403,"value":1473},{"type":397,"tag":480,"props":1515,"children":1516},{"style":493},[1517],{"type":403,"value":930},{"type":397,"tag":480,"props":1519,"children":1520},{"style":487},[1521],{"type":403,"value":671},{"type":397,"tag":480,"props":1523,"children":1524},{"style":493},[1525],{"type":403,"value":948},{"type":397,"tag":480,"props":1527,"children":1528},{"style":558},[1529],{"type":403,"value":888},{"type":397,"tag":480,"props":1531,"children":1532},{"style":574},[1533],{"type":403,"value":837},{"type":397,"tag":480,"props":1535,"children":1536},{"style":580},[1537],{"type":403,"value":583},{"type":397,"tag":480,"props":1539,"children":1540},{"style":574},[1541],{"type":403,"value":686},{"type":397,"tag":480,"props":1543,"children":1544},{"style":558},[1545],{"type":403,"value":1012},{"type":397,"tag":480,"props":1547,"children":1549},{"class":482,"line":1548},17,[1550,1554,1558,1562,1566,1570,1574,1578],{"type":397,"tag":480,"props":1551,"children":1552},{"style":558},[1553],{"type":403,"value":1473},{"type":397,"tag":480,"props":1555,"children":1556},{"style":493},[1557],{"type":403,"value":930},{"type":397,"tag":480,"props":1559,"children":1560},{"style":487},[1561],{"type":403,"value":671},{"type":397,"tag":480,"props":1563,"children":1564},{"style":493},[1565],{"type":403,"value":677},{"type":397,"tag":480,"props":1567,"children":1568},{"style":558},[1569],{"type":403,"value":888},{"type":397,"tag":480,"props":1571,"children":1572},{"style":574},[1573],{"type":403,"value":837},{"type":397,"tag":480,"props":1575,"children":1576},{"style":580},[1577],{"type":403,"value":583},{"type":397,"tag":480,"props":1579,"children":1580},{"style":574},[1581],{"type":403,"value":847},{"type":397,"tag":480,"props":1583,"children":1585},{"class":482,"line":1584},18,[1586],{"type":397,"tag":480,"props":1587,"children":1588},{"style":951},[1589],{"type":403,"value":1590},"            )\n",{"type":397,"tag":480,"props":1592,"children":1594},{"class":482,"line":1593},19,[1595,1600],{"type":397,"tag":480,"props":1596,"children":1597},{"style":487},[1598],{"type":403,"value":1599},"        }",{"type":397,"tag":480,"props":1601,"children":1602},{"style":951},[1603],{"type":403,"value":1110},{"type":397,"tag":480,"props":1605,"children":1607},{"class":482,"line":1606},20,[1608,1613,1618,1622,1627,1632],{"type":397,"tag":480,"props":1609,"children":1610},{"style":487},[1611],{"type":403,"value":1612},"    }",{"type":397,"tag":480,"props":1614,"children":1615},{"style":961},[1616],{"type":403,"value":1617}," catch",{"type":397,"tag":480,"props":1619,"children":1620},{"style":951},[1621],{"type":403,"value":496},{"type":397,"tag":480,"props":1623,"children":1624},{"style":493},[1625],{"type":403,"value":1626},"e",{"type":397,"tag":480,"props":1628,"children":1629},{"style":951},[1630],{"type":403,"value":1631},") ",{"type":397,"tag":480,"props":1633,"children":1634},{"style":487},[1635],{"type":403,"value":1636},"{\n",{"type":397,"tag":480,"props":1638,"children":1640},{"class":482,"line":1639},21,[1641],{"type":397,"tag":480,"props":1642,"children":1643},{"style":539},[1644],{"type":403,"value":1645},"        // assign a false positive if detection fails => unable to shiv\n",{"type":397,"tag":480,"props":1647,"children":1649},{"class":482,"line":1648},22,[1650,1654,1658],{"type":397,"tag":480,"props":1651,"children":1652},{"style":493},[1653],{"type":403,"value":1258},{"type":397,"tag":480,"props":1655,"children":1656},{"style":558},[1657],{"type":403,"value":935},{"type":397,"tag":480,"props":1659,"children":1661},{"style":1660},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1662],{"type":403,"value":1663}," true\n",{"type":397,"tag":480,"props":1665,"children":1667},{"class":482,"line":1666},23,[1668,1672,1676],{"type":397,"tag":480,"props":1669,"children":1670},{"style":493},[1671],{"type":403,"value":1306},{"type":397,"tag":480,"props":1673,"children":1674},{"style":558},[1675],{"type":403,"value":935},{"type":397,"tag":480,"props":1677,"children":1678},{"style":1660},[1679],{"type":403,"value":1663},{"type":397,"tag":480,"props":1681,"children":1683},{"class":482,"line":1682},24,[1684],{"type":397,"tag":480,"props":1685,"children":1686},{"style":487},[1687],{"type":403,"value":1688},"    }\n",{"type":397,"tag":480,"props":1690,"children":1692},{"class":482,"line":1691},25,[1693,1697],{"type":397,"tag":480,"props":1694,"children":1695},{"style":487},[1696],{"type":403,"value":551},{"type":397,"tag":480,"props":1698,"children":1699},{"style":493},[1700],{"type":403,"value":1110},{"type":397,"tag":458,"props":1702,"children":1704},{"id":1703},"功能仿制",[1705],{"type":403,"value":1703},{"type":397,"tag":411,"props":1707,"children":1708},{},[1709],{"type":403,"value":1710},"每个页面可能有多个 iframe，所以可能有多个 document 对象。因为不同 document 对象可被 shiv 的元素可能不同，所以需要一个变量用作记录。",{"type":397,"tag":411,"props":1712,"children":1713},{},[1714],{"type":403,"value":1715},"getExpandoData 方法在传入的 document 对象下挂载了一个属性名为 '_html5shiv' 的空对象，用来便捷存放某些数据（比如说元素缓存），并返回对象单例。",{"type":397,"tag":469,"props":1717,"children":1719},{"className":471,"code":1718,"language":473,"meta":391,"style":391},"var expandoData = {}\nvar expanID = 0\nvar expando = '_html5shiv'\nfunction getExpandoData(ownerDocument) {\n    var data = expandoData[ownerDocument[expando]]\n    if (!data) {\n        data = {}\n        expanID++\n        ownerDocument[expando] = expanID\n        expandoData[expanID] = data\n    }\n    return data\n  }\n",[1720],{"type":397,"tag":476,"props":1721,"children":1722},{"__ignoreMap":391},[1723,1745,1766,1795,1824,1868,1898,1914,1927,1957,1987,1994,2005],{"type":397,"tag":480,"props":1724,"children":1725},{"class":482,"line":483},[1726,1731,1736,1740],{"type":397,"tag":480,"props":1727,"children":1728},{"style":499},[1729],{"type":403,"value":1730},"var",{"type":397,"tag":480,"props":1732,"children":1733},{"style":493},[1734],{"type":403,"value":1735}," expandoData ",{"type":397,"tag":480,"props":1737,"children":1738},{"style":558},[1739],{"type":403,"value":662},{"type":397,"tag":480,"props":1741,"children":1742},{"style":487},[1743],{"type":403,"value":1744}," {}\n",{"type":397,"tag":480,"props":1746,"children":1747},{"class":482,"line":535},[1748,1752,1757,1761],{"type":397,"tag":480,"props":1749,"children":1750},{"style":499},[1751],{"type":403,"value":1730},{"type":397,"tag":480,"props":1753,"children":1754},{"style":493},[1755],{"type":403,"value":1756}," expanID ",{"type":397,"tag":480,"props":1758,"children":1759},{"style":558},[1760],{"type":403,"value":662},{"type":397,"tag":480,"props":1762,"children":1763},{"style":891},[1764],{"type":403,"value":1765}," 0\n",{"type":397,"tag":480,"props":1767,"children":1768},{"class":482,"line":545},[1769,1773,1778,1782,1786,1791],{"type":397,"tag":480,"props":1770,"children":1771},{"style":499},[1772],{"type":403,"value":1730},{"type":397,"tag":480,"props":1774,"children":1775},{"style":493},[1776],{"type":403,"value":1777}," expando ",{"type":397,"tag":480,"props":1779,"children":1780},{"style":558},[1781],{"type":403,"value":662},{"type":397,"tag":480,"props":1783,"children":1784},{"style":574},[1785],{"type":403,"value":837},{"type":397,"tag":480,"props":1787,"children":1788},{"style":580},[1789],{"type":403,"value":1790},"_html5shiv",{"type":397,"tag":480,"props":1792,"children":1793},{"style":574},[1794],{"type":403,"value":847},{"type":397,"tag":480,"props":1796,"children":1797},{"class":482,"line":919},[1798,1802,1807,1811,1816,1820],{"type":397,"tag":480,"props":1799,"children":1800},{"style":499},[1801],{"type":403,"value":502},{"type":397,"tag":480,"props":1803,"children":1804},{"style":674},[1805],{"type":403,"value":1806}," getExpandoData",{"type":397,"tag":480,"props":1808,"children":1809},{"style":487},[1810],{"type":403,"value":496},{"type":397,"tag":480,"props":1812,"children":1813},{"style":509},[1814],{"type":403,"value":1815},"ownerDocument",{"type":397,"tag":480,"props":1817,"children":1818},{"style":487},[1819],{"type":403,"value":527},{"type":397,"tag":480,"props":1821,"children":1822},{"style":487},[1823],{"type":403,"value":532},{"type":397,"tag":480,"props":1825,"children":1826},{"class":482,"line":957},[1827,1831,1836,1840,1845,1850,1854,1858,1863],{"type":397,"tag":480,"props":1828,"children":1829},{"style":499},[1830],{"type":403,"value":925},{"type":397,"tag":480,"props":1832,"children":1833},{"style":493},[1834],{"type":403,"value":1835}," data",{"type":397,"tag":480,"props":1837,"children":1838},{"style":558},[1839],{"type":403,"value":935},{"type":397,"tag":480,"props":1841,"children":1842},{"style":493},[1843],{"type":403,"value":1844}," expandoData",{"type":397,"tag":480,"props":1846,"children":1847},{"style":951},[1848],{"type":403,"value":1849},"[",{"type":397,"tag":480,"props":1851,"children":1852},{"style":493},[1853],{"type":403,"value":1815},{"type":397,"tag":480,"props":1855,"children":1856},{"style":951},[1857],{"type":403,"value":1849},{"type":397,"tag":480,"props":1859,"children":1860},{"style":493},[1861],{"type":403,"value":1862},"expando",{"type":397,"tag":480,"props":1864,"children":1865},{"style":951},[1866],{"type":403,"value":1867},"]]\n",{"type":397,"tag":480,"props":1869,"children":1870},{"class":482,"line":972},[1871,1876,1880,1885,1890,1894],{"type":397,"tag":480,"props":1872,"children":1873},{"style":961},[1874],{"type":403,"value":1875},"    if",{"type":397,"tag":480,"props":1877,"children":1878},{"style":951},[1879],{"type":403,"value":716},{"type":397,"tag":480,"props":1881,"children":1882},{"style":558},[1883],{"type":403,"value":1884},"!",{"type":397,"tag":480,"props":1886,"children":1887},{"style":493},[1888],{"type":403,"value":1889},"data",{"type":397,"tag":480,"props":1891,"children":1892},{"style":951},[1893],{"type":403,"value":1631},{"type":397,"tag":480,"props":1895,"children":1896},{"style":487},[1897],{"type":403,"value":1636},{"type":397,"tag":480,"props":1899,"children":1900},{"class":482,"line":1015},[1901,1906,1910],{"type":397,"tag":480,"props":1902,"children":1903},{"style":493},[1904],{"type":403,"value":1905},"        data",{"type":397,"tag":480,"props":1907,"children":1908},{"style":558},[1909],{"type":403,"value":935},{"type":397,"tag":480,"props":1911,"children":1912},{"style":487},[1913],{"type":403,"value":1744},{"type":397,"tag":480,"props":1915,"children":1916},{"class":482,"line":1055},[1917,1922],{"type":397,"tag":480,"props":1918,"children":1919},{"style":493},[1920],{"type":403,"value":1921},"        expanID",{"type":397,"tag":480,"props":1923,"children":1924},{"style":558},[1925],{"type":403,"value":1926},"++\n",{"type":397,"tag":480,"props":1928,"children":1929},{"class":482,"line":1091},[1930,1935,1939,1943,1948,1952],{"type":397,"tag":480,"props":1931,"children":1932},{"style":493},[1933],{"type":403,"value":1934},"        ownerDocument",{"type":397,"tag":480,"props":1936,"children":1937},{"style":951},[1938],{"type":403,"value":1849},{"type":397,"tag":480,"props":1940,"children":1941},{"style":493},[1942],{"type":403,"value":1862},{"type":397,"tag":480,"props":1944,"children":1945},{"style":951},[1946],{"type":403,"value":1947},"] ",{"type":397,"tag":480,"props":1949,"children":1950},{"style":558},[1951],{"type":403,"value":662},{"type":397,"tag":480,"props":1953,"children":1954},{"style":493},[1955],{"type":403,"value":1956}," expanID\n",{"type":397,"tag":480,"props":1958,"children":1959},{"class":482,"line":1100},[1960,1965,1969,1974,1978,1982],{"type":397,"tag":480,"props":1961,"children":1962},{"style":493},[1963],{"type":403,"value":1964},"        expandoData",{"type":397,"tag":480,"props":1966,"children":1967},{"style":951},[1968],{"type":403,"value":1849},{"type":397,"tag":480,"props":1970,"children":1971},{"style":493},[1972],{"type":403,"value":1973},"expanID",{"type":397,"tag":480,"props":1975,"children":1976},{"style":951},[1977],{"type":403,"value":1947},{"type":397,"tag":480,"props":1979,"children":1980},{"style":558},[1981],{"type":403,"value":662},{"type":397,"tag":480,"props":1983,"children":1984},{"style":493},[1985],{"type":403,"value":1986}," data\n",{"type":397,"tag":480,"props":1988,"children":1989},{"class":482,"line":1369},[1990],{"type":397,"tag":480,"props":1991,"children":1992},{"style":487},[1993],{"type":403,"value":1688},{"type":397,"tag":480,"props":1995,"children":1996},{"class":482,"line":1378},[1997,2001],{"type":397,"tag":480,"props":1998,"children":1999},{"style":961},[2000],{"type":403,"value":964},{"type":397,"tag":480,"props":2002,"children":2003},{"style":493},[2004],{"type":403,"value":1986},{"type":397,"tag":480,"props":2006,"children":2007},{"class":482,"line":1421},[2008],{"type":397,"tag":480,"props":2009,"children":2010},{"style":487},[2011],{"type":403,"value":2012},"  }\n",{"type":397,"tag":411,"props":2014,"children":2015},{},[2016],{"type":403,"value":2017},"如何对 document 进行 html5 的增强呢？原理体现都在 shivDocument 这个函数了，只需要增强浏览器原生的 createElement 等 API 的功能，再添加对应的元素样式就好了。",{"type":397,"tag":469,"props":2019,"children":2021},{"className":471,"code":2020,"language":473,"meta":391,"style":391},"function shivDocument(ownerDocument) {\n    // 挂载 document._html5shiv\n    var data = getExpandoData(ownerDocument)\n\n    // 增强样式\n    if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n      data.hasCSS = !!addStyleSheet(ownerDocument,\n        // corrects block display not defined in IE6/7/8/9\n        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n        // adds styling not present in IE6/7/8/9\n        'mark{background:#FF0;color:#000}' +\n        // hides non-rendered elements\n        'template{display:none}'\n      )\n    }\n\n    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n    // 如果当前浏览器连 document.createElement 都会报错，\n    // 那就没办法 shiv 了，只好假装一切正常...\n    if (!supportsUnknownElements) {\n      // 增强 createElement 和 createDocumentFragment\n      shivMethods(ownerDocument, data)\n    }\n    return ownerDocument\n  }\n",[2022],{"type":397,"tag":476,"props":2023,"children":2024},{"__ignoreMap":391},[2025,2053,2061,2092,2099,2107,2176,2219,2227,2249,2257,2277,2285,2301,2309,2316,2323,2331,2339,2347,2375,2383,2411,2418,2430],{"type":397,"tag":480,"props":2026,"children":2027},{"class":482,"line":483},[2028,2032,2037,2041,2045,2049],{"type":397,"tag":480,"props":2029,"children":2030},{"style":499},[2031],{"type":403,"value":502},{"type":397,"tag":480,"props":2033,"children":2034},{"style":674},[2035],{"type":403,"value":2036}," shivDocument",{"type":397,"tag":480,"props":2038,"children":2039},{"style":487},[2040],{"type":403,"value":496},{"type":397,"tag":480,"props":2042,"children":2043},{"style":509},[2044],{"type":403,"value":1815},{"type":397,"tag":480,"props":2046,"children":2047},{"style":487},[2048],{"type":403,"value":527},{"type":397,"tag":480,"props":2050,"children":2051},{"style":487},[2052],{"type":403,"value":532},{"type":397,"tag":480,"props":2054,"children":2055},{"class":482,"line":535},[2056],{"type":397,"tag":480,"props":2057,"children":2058},{"style":539},[2059],{"type":403,"value":2060},"    // 挂载 document._html5shiv\n",{"type":397,"tag":480,"props":2062,"children":2063},{"class":482,"line":545},[2064,2068,2072,2076,2080,2084,2088],{"type":397,"tag":480,"props":2065,"children":2066},{"style":499},[2067],{"type":403,"value":925},{"type":397,"tag":480,"props":2069,"children":2070},{"style":493},[2071],{"type":403,"value":1835},{"type":397,"tag":480,"props":2073,"children":2074},{"style":558},[2075],{"type":403,"value":935},{"type":397,"tag":480,"props":2077,"children":2078},{"style":674},[2079],{"type":403,"value":1806},{"type":397,"tag":480,"props":2081,"children":2082},{"style":951},[2083],{"type":403,"value":496},{"type":397,"tag":480,"props":2085,"children":2086},{"style":493},[2087],{"type":403,"value":1815},{"type":397,"tag":480,"props":2089,"children":2090},{"style":951},[2091],{"type":403,"value":699},{"type":397,"tag":480,"props":2093,"children":2094},{"class":482,"line":919},[2095],{"type":397,"tag":480,"props":2096,"children":2097},{"emptyLinePlaceholder":390},[2098],{"type":403,"value":1298},{"type":397,"tag":480,"props":2100,"children":2101},{"class":482,"line":957},[2102],{"type":397,"tag":480,"props":2103,"children":2104},{"style":539},[2105],{"type":403,"value":2106},"    // 增强样式\n",{"type":397,"tag":480,"props":2108,"children":2109},{"class":482,"line":972},[2110,2114,2118,2123,2127,2132,2137,2142,2147,2151,2155,2159,2163,2168,2172],{"type":397,"tag":480,"props":2111,"children":2112},{"style":961},[2113],{"type":403,"value":1875},{"type":397,"tag":480,"props":2115,"children":2116},{"style":951},[2117],{"type":403,"value":716},{"type":397,"tag":480,"props":2119,"children":2120},{"style":493},[2121],{"type":403,"value":2122},"html5",{"type":397,"tag":480,"props":2124,"children":2125},{"style":487},[2126],{"type":403,"value":671},{"type":397,"tag":480,"props":2128,"children":2129},{"style":493},[2130],{"type":403,"value":2131},"shivCSS",{"type":397,"tag":480,"props":2133,"children":2134},{"style":558},[2135],{"type":403,"value":2136}," &&",{"type":397,"tag":480,"props":2138,"children":2139},{"style":558},[2140],{"type":403,"value":2141}," !",{"type":397,"tag":480,"props":2143,"children":2144},{"style":493},[2145],{"type":403,"value":2146},"supportsHtml5Styles",{"type":397,"tag":480,"props":2148,"children":2149},{"style":558},[2150],{"type":403,"value":2136},{"type":397,"tag":480,"props":2152,"children":2153},{"style":558},[2154],{"type":403,"value":2141},{"type":397,"tag":480,"props":2156,"children":2157},{"style":493},[2158],{"type":403,"value":1889},{"type":397,"tag":480,"props":2160,"children":2161},{"style":487},[2162],{"type":403,"value":671},{"type":397,"tag":480,"props":2164,"children":2165},{"style":493},[2166],{"type":403,"value":2167},"hasCSS",{"type":397,"tag":480,"props":2169,"children":2170},{"style":951},[2171],{"type":403,"value":1631},{"type":397,"tag":480,"props":2173,"children":2174},{"style":487},[2175],{"type":403,"value":1636},{"type":397,"tag":480,"props":2177,"children":2178},{"class":482,"line":1015},[2179,2184,2188,2192,2196,2201,2206,2210,2214],{"type":397,"tag":480,"props":2180,"children":2181},{"style":493},[2182],{"type":403,"value":2183},"      data",{"type":397,"tag":480,"props":2185,"children":2186},{"style":487},[2187],{"type":403,"value":671},{"type":397,"tag":480,"props":2189,"children":2190},{"style":493},[2191],{"type":403,"value":2167},{"type":397,"tag":480,"props":2193,"children":2194},{"style":558},[2195],{"type":403,"value":935},{"type":397,"tag":480,"props":2197,"children":2198},{"style":558},[2199],{"type":403,"value":2200}," !!",{"type":397,"tag":480,"props":2202,"children":2203},{"style":674},[2204],{"type":403,"value":2205},"addStyleSheet",{"type":397,"tag":480,"props":2207,"children":2208},{"style":951},[2209],{"type":403,"value":496},{"type":397,"tag":480,"props":2211,"children":2212},{"style":493},[2213],{"type":403,"value":1815},{"type":397,"tag":480,"props":2215,"children":2216},{"style":487},[2217],{"type":403,"value":2218},",\n",{"type":397,"tag":480,"props":2220,"children":2221},{"class":482,"line":1055},[2222],{"type":397,"tag":480,"props":2223,"children":2224},{"style":539},[2225],{"type":403,"value":2226},"        // corrects block display not defined in IE6/7/8/9\n",{"type":397,"tag":480,"props":2228,"children":2229},{"class":482,"line":1091},[2230,2235,2240,2244],{"type":397,"tag":480,"props":2231,"children":2232},{"style":574},[2233],{"type":403,"value":2234},"        '",{"type":397,"tag":480,"props":2236,"children":2237},{"style":580},[2238],{"type":403,"value":2239},"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}",{"type":397,"tag":480,"props":2241,"children":2242},{"style":574},[2243],{"type":403,"value":686},{"type":397,"tag":480,"props":2245,"children":2246},{"style":558},[2247],{"type":403,"value":2248}," +\n",{"type":397,"tag":480,"props":2250,"children":2251},{"class":482,"line":1100},[2252],{"type":397,"tag":480,"props":2253,"children":2254},{"style":539},[2255],{"type":403,"value":2256},"        // adds styling not present in IE6/7/8/9\n",{"type":397,"tag":480,"props":2258,"children":2259},{"class":482,"line":1369},[2260,2264,2269,2273],{"type":397,"tag":480,"props":2261,"children":2262},{"style":574},[2263],{"type":403,"value":2234},{"type":397,"tag":480,"props":2265,"children":2266},{"style":580},[2267],{"type":403,"value":2268},"mark{background:#FF0;color:#000}",{"type":397,"tag":480,"props":2270,"children":2271},{"style":574},[2272],{"type":403,"value":686},{"type":397,"tag":480,"props":2274,"children":2275},{"style":558},[2276],{"type":403,"value":2248},{"type":397,"tag":480,"props":2278,"children":2279},{"class":482,"line":1378},[2280],{"type":397,"tag":480,"props":2281,"children":2282},{"style":539},[2283],{"type":403,"value":2284},"        // hides non-rendered elements\n",{"type":397,"tag":480,"props":2286,"children":2287},{"class":482,"line":1421},[2288,2292,2297],{"type":397,"tag":480,"props":2289,"children":2290},{"style":574},[2291],{"type":403,"value":2234},{"type":397,"tag":480,"props":2293,"children":2294},{"style":580},[2295],{"type":403,"value":2296},"template{display:none}",{"type":397,"tag":480,"props":2298,"children":2299},{"style":574},[2300],{"type":403,"value":847},{"type":397,"tag":480,"props":2302,"children":2303},{"class":482,"line":1454},[2304],{"type":397,"tag":480,"props":2305,"children":2306},{"style":951},[2307],{"type":403,"value":2308},"      )\n",{"type":397,"tag":480,"props":2310,"children":2311},{"class":482,"line":1467},[2312],{"type":397,"tag":480,"props":2313,"children":2314},{"style":487},[2315],{"type":403,"value":1688},{"type":397,"tag":480,"props":2317,"children":2318},{"class":482,"line":1508},[2319],{"type":397,"tag":480,"props":2320,"children":2321},{"emptyLinePlaceholder":390},[2322],{"type":403,"value":1298},{"type":397,"tag":480,"props":2324,"children":2325},{"class":482,"line":1548},[2326],{"type":397,"tag":480,"props":2327,"children":2328},{"style":539},[2329],{"type":403,"value":2330},"    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n",{"type":397,"tag":480,"props":2332,"children":2333},{"class":482,"line":1584},[2334],{"type":397,"tag":480,"props":2335,"children":2336},{"style":539},[2337],{"type":403,"value":2338},"    // 如果当前浏览器连 document.createElement 都会报错，\n",{"type":397,"tag":480,"props":2340,"children":2341},{"class":482,"line":1593},[2342],{"type":397,"tag":480,"props":2343,"children":2344},{"style":539},[2345],{"type":403,"value":2346},"    // 那就没办法 shiv 了，只好假装一切正常...\n",{"type":397,"tag":480,"props":2348,"children":2349},{"class":482,"line":1606},[2350,2354,2358,2362,2367,2371],{"type":397,"tag":480,"props":2351,"children":2352},{"style":961},[2353],{"type":403,"value":1875},{"type":397,"tag":480,"props":2355,"children":2356},{"style":951},[2357],{"type":403,"value":716},{"type":397,"tag":480,"props":2359,"children":2360},{"style":558},[2361],{"type":403,"value":1884},{"type":397,"tag":480,"props":2363,"children":2364},{"style":493},[2365],{"type":403,"value":2366},"supportsUnknownElements",{"type":397,"tag":480,"props":2368,"children":2369},{"style":951},[2370],{"type":403,"value":1631},{"type":397,"tag":480,"props":2372,"children":2373},{"style":487},[2374],{"type":403,"value":1636},{"type":397,"tag":480,"props":2376,"children":2377},{"class":482,"line":1639},[2378],{"type":397,"tag":480,"props":2379,"children":2380},{"style":539},[2381],{"type":403,"value":2382},"      // 增强 createElement 和 createDocumentFragment\n",{"type":397,"tag":480,"props":2384,"children":2385},{"class":482,"line":1648},[2386,2391,2395,2399,2403,2407],{"type":397,"tag":480,"props":2387,"children":2388},{"style":674},[2389],{"type":403,"value":2390},"      shivMethods",{"type":397,"tag":480,"props":2392,"children":2393},{"style":951},[2394],{"type":403,"value":496},{"type":397,"tag":480,"props":2396,"children":2397},{"style":493},[2398],{"type":403,"value":1815},{"type":397,"tag":480,"props":2400,"children":2401},{"style":487},[2402],{"type":403,"value":517},{"type":397,"tag":480,"props":2404,"children":2405},{"style":493},[2406],{"type":403,"value":1835},{"type":397,"tag":480,"props":2408,"children":2409},{"style":951},[2410],{"type":403,"value":699},{"type":397,"tag":480,"props":2412,"children":2413},{"class":482,"line":1666},[2414],{"type":397,"tag":480,"props":2415,"children":2416},{"style":487},[2417],{"type":403,"value":1688},{"type":397,"tag":480,"props":2419,"children":2420},{"class":482,"line":1682},[2421,2425],{"type":397,"tag":480,"props":2422,"children":2423},{"style":961},[2424],{"type":403,"value":964},{"type":397,"tag":480,"props":2426,"children":2427},{"style":493},[2428],{"type":403,"value":2429}," ownerDocument\n",{"type":397,"tag":480,"props":2431,"children":2432},{"class":482,"line":1691},[2433],{"type":397,"tag":480,"props":2434,"children":2435},{"style":487},[2436],{"type":403,"value":2012},{"type":397,"tag":411,"props":2438,"children":2439},{},[2440],{"type":403,"value":2441},"接下来，仔细康康 shivMethods 方法。shivMethods 仿制了 createElement 和 createDocumentFragment 两个 API，将其挂载到 document._html5shiv。并通过装饰器模式增强了浏览器原生的 createElement 等 API 的功能。",{"type":397,"tag":469,"props":2443,"children":2445},{"className":471,"code":2444,"language":473,"meta":391,"style":391},"function shivMethods(ownerDocument, data) {\n    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n    if (!data.cache) {\n        data.cache = {}\n        data.createElem = ownerDocument.createElement\n        data.createFrag = ownerDocument.createDocumentFragment\n        data.frag = data.createFrag()\n    }\n\n    ownerDocument.createElement = function(nodeName) {\n      // shivMethods 可看作全局的 shiv 开关\n      if (!html5.shivMethods) {\n          return data.createElem(nodeName)\n      }\n      return createElement(nodeName, ownerDocument, data)\n    }\n\n    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n    // 最终返回 data.frag 的克隆函数\n    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n    // 猜测它只能在老版本 IE 上起作用\n    ownerDocument.createDocumentFragment = Function(\n      'html5,dataFrag', \n      'return function(){' +\n        'var clone=dataFrag.cloneNode(),create=clone.createElement' +\n        'html5.shivMethods&&(' +\n            // unroll the `createElement` calls\n            getElements().join().replace(/[\\w\\-:]+/g, function(nodeName) {\n            data.createElem(nodeName)\n            data.frag.createElement(nodeName)\n            return 'create(\"' + nodeName + '\")'\n            }) +\n        ')return clone' +\n      '}'\n    )(html5, data.frag)\n  }\n",[2446],{"type":397,"tag":476,"props":2447,"children":2448},{"__ignoreMap":391},[2449,2485,2493,2529,2552,2586,2619,2655,2662,2669,2711,2719,2756,2788,2796,2837,2844,2851,2859,2867,2875,2883,2912,2938,2958,2978,2999,3008,3107,3136,3172,3220,3238,3259,3275,3308],{"type":397,"tag":480,"props":2450,"children":2451},{"class":482,"line":483},[2452,2456,2461,2465,2469,2473,2477,2481],{"type":397,"tag":480,"props":2453,"children":2454},{"style":499},[2455],{"type":403,"value":502},{"type":397,"tag":480,"props":2457,"children":2458},{"style":674},[2459],{"type":403,"value":2460}," shivMethods",{"type":397,"tag":480,"props":2462,"children":2463},{"style":487},[2464],{"type":403,"value":496},{"type":397,"tag":480,"props":2466,"children":2467},{"style":509},[2468],{"type":403,"value":1815},{"type":397,"tag":480,"props":2470,"children":2471},{"style":487},[2472],{"type":403,"value":517},{"type":397,"tag":480,"props":2474,"children":2475},{"style":509},[2476],{"type":403,"value":1835},{"type":397,"tag":480,"props":2478,"children":2479},{"style":487},[2480],{"type":403,"value":527},{"type":397,"tag":480,"props":2482,"children":2483},{"style":487},[2484],{"type":403,"value":532},{"type":397,"tag":480,"props":2486,"children":2487},{"class":482,"line":535},[2488],{"type":397,"tag":480,"props":2489,"children":2490},{"style":539},[2491],{"type":403,"value":2492},"    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n",{"type":397,"tag":480,"props":2494,"children":2495},{"class":482,"line":545},[2496,2500,2504,2508,2512,2516,2521,2525],{"type":397,"tag":480,"props":2497,"children":2498},{"style":961},[2499],{"type":403,"value":1875},{"type":397,"tag":480,"props":2501,"children":2502},{"style":951},[2503],{"type":403,"value":716},{"type":397,"tag":480,"props":2505,"children":2506},{"style":558},[2507],{"type":403,"value":1884},{"type":397,"tag":480,"props":2509,"children":2510},{"style":493},[2511],{"type":403,"value":1889},{"type":397,"tag":480,"props":2513,"children":2514},{"style":487},[2515],{"type":403,"value":671},{"type":397,"tag":480,"props":2517,"children":2518},{"style":493},[2519],{"type":403,"value":2520},"cache",{"type":397,"tag":480,"props":2522,"children":2523},{"style":951},[2524],{"type":403,"value":1631},{"type":397,"tag":480,"props":2526,"children":2527},{"style":487},[2528],{"type":403,"value":1636},{"type":397,"tag":480,"props":2530,"children":2531},{"class":482,"line":919},[2532,2536,2540,2544,2548],{"type":397,"tag":480,"props":2533,"children":2534},{"style":493},[2535],{"type":403,"value":1905},{"type":397,"tag":480,"props":2537,"children":2538},{"style":487},[2539],{"type":403,"value":671},{"type":397,"tag":480,"props":2541,"children":2542},{"style":493},[2543],{"type":403,"value":2520},{"type":397,"tag":480,"props":2545,"children":2546},{"style":558},[2547],{"type":403,"value":935},{"type":397,"tag":480,"props":2549,"children":2550},{"style":487},[2551],{"type":403,"value":1744},{"type":397,"tag":480,"props":2553,"children":2554},{"class":482,"line":957},[2555,2559,2563,2568,2572,2577,2581],{"type":397,"tag":480,"props":2556,"children":2557},{"style":493},[2558],{"type":403,"value":1905},{"type":397,"tag":480,"props":2560,"children":2561},{"style":487},[2562],{"type":403,"value":671},{"type":397,"tag":480,"props":2564,"children":2565},{"style":493},[2566],{"type":403,"value":2567},"createElem",{"type":397,"tag":480,"props":2569,"children":2570},{"style":558},[2571],{"type":403,"value":935},{"type":397,"tag":480,"props":2573,"children":2574},{"style":493},[2575],{"type":403,"value":2576}," ownerDocument",{"type":397,"tag":480,"props":2578,"children":2579},{"style":487},[2580],{"type":403,"value":671},{"type":397,"tag":480,"props":2582,"children":2583},{"style":493},[2584],{"type":403,"value":2585},"createElement\n",{"type":397,"tag":480,"props":2587,"children":2588},{"class":482,"line":972},[2589,2593,2597,2602,2606,2610,2614],{"type":397,"tag":480,"props":2590,"children":2591},{"style":493},[2592],{"type":403,"value":1905},{"type":397,"tag":480,"props":2594,"children":2595},{"style":487},[2596],{"type":403,"value":671},{"type":397,"tag":480,"props":2598,"children":2599},{"style":493},[2600],{"type":403,"value":2601},"createFrag",{"type":397,"tag":480,"props":2603,"children":2604},{"style":558},[2605],{"type":403,"value":935},{"type":397,"tag":480,"props":2607,"children":2608},{"style":493},[2609],{"type":403,"value":2576},{"type":397,"tag":480,"props":2611,"children":2612},{"style":487},[2613],{"type":403,"value":671},{"type":397,"tag":480,"props":2615,"children":2616},{"style":493},[2617],{"type":403,"value":2618},"createDocumentFragment\n",{"type":397,"tag":480,"props":2620,"children":2621},{"class":482,"line":1015},[2622,2626,2630,2635,2639,2643,2647,2651],{"type":397,"tag":480,"props":2623,"children":2624},{"style":493},[2625],{"type":403,"value":1905},{"type":397,"tag":480,"props":2627,"children":2628},{"style":487},[2629],{"type":403,"value":671},{"type":397,"tag":480,"props":2631,"children":2632},{"style":493},[2633],{"type":403,"value":2634},"frag",{"type":397,"tag":480,"props":2636,"children":2637},{"style":558},[2638],{"type":403,"value":935},{"type":397,"tag":480,"props":2640,"children":2641},{"style":493},[2642],{"type":403,"value":1835},{"type":397,"tag":480,"props":2644,"children":2645},{"style":487},[2646],{"type":403,"value":671},{"type":397,"tag":480,"props":2648,"children":2649},{"style":674},[2650],{"type":403,"value":2601},{"type":397,"tag":480,"props":2652,"children":2653},{"style":951},[2654],{"type":403,"value":954},{"type":397,"tag":480,"props":2656,"children":2657},{"class":482,"line":1055},[2658],{"type":397,"tag":480,"props":2659,"children":2660},{"style":487},[2661],{"type":403,"value":1688},{"type":397,"tag":480,"props":2663,"children":2664},{"class":482,"line":1091},[2665],{"type":397,"tag":480,"props":2666,"children":2667},{"emptyLinePlaceholder":390},[2668],{"type":403,"value":1298},{"type":397,"tag":480,"props":2670,"children":2671},{"class":482,"line":1100},[2672,2677,2681,2685,2689,2694,2698,2703,2707],{"type":397,"tag":480,"props":2673,"children":2674},{"style":493},[2675],{"type":403,"value":2676},"    ownerDocument",{"type":397,"tag":480,"props":2678,"children":2679},{"style":487},[2680],{"type":403,"value":671},{"type":397,"tag":480,"props":2682,"children":2683},{"style":674},[2684],{"type":403,"value":677},{"type":397,"tag":480,"props":2686,"children":2687},{"style":558},[2688],{"type":403,"value":935},{"type":397,"tag":480,"props":2690,"children":2691},{"style":499},[2692],{"type":403,"value":2693}," function",{"type":397,"tag":480,"props":2695,"children":2696},{"style":487},[2697],{"type":403,"value":496},{"type":397,"tag":480,"props":2699,"children":2700},{"style":509},[2701],{"type":403,"value":2702},"nodeName",{"type":397,"tag":480,"props":2704,"children":2705},{"style":487},[2706],{"type":403,"value":527},{"type":397,"tag":480,"props":2708,"children":2709},{"style":487},[2710],{"type":403,"value":532},{"type":397,"tag":480,"props":2712,"children":2713},{"class":482,"line":1369},[2714],{"type":397,"tag":480,"props":2715,"children":2716},{"style":539},[2717],{"type":403,"value":2718},"      // shivMethods 可看作全局的 shiv 开关\n",{"type":397,"tag":480,"props":2720,"children":2721},{"class":482,"line":1378},[2722,2727,2731,2735,2739,2743,2748,2752],{"type":397,"tag":480,"props":2723,"children":2724},{"style":961},[2725],{"type":403,"value":2726},"      if",{"type":397,"tag":480,"props":2728,"children":2729},{"style":951},[2730],{"type":403,"value":716},{"type":397,"tag":480,"props":2732,"children":2733},{"style":558},[2734],{"type":403,"value":1884},{"type":397,"tag":480,"props":2736,"children":2737},{"style":493},[2738],{"type":403,"value":2122},{"type":397,"tag":480,"props":2740,"children":2741},{"style":487},[2742],{"type":403,"value":671},{"type":397,"tag":480,"props":2744,"children":2745},{"style":493},[2746],{"type":403,"value":2747},"shivMethods",{"type":397,"tag":480,"props":2749,"children":2750},{"style":951},[2751],{"type":403,"value":1631},{"type":397,"tag":480,"props":2753,"children":2754},{"style":487},[2755],{"type":403,"value":1636},{"type":397,"tag":480,"props":2757,"children":2758},{"class":482,"line":1421},[2759,2764,2768,2772,2776,2780,2784],{"type":397,"tag":480,"props":2760,"children":2761},{"style":961},[2762],{"type":403,"value":2763},"          return",{"type":397,"tag":480,"props":2765,"children":2766},{"style":493},[2767],{"type":403,"value":1835},{"type":397,"tag":480,"props":2769,"children":2770},{"style":487},[2771],{"type":403,"value":671},{"type":397,"tag":480,"props":2773,"children":2774},{"style":674},[2775],{"type":403,"value":2567},{"type":397,"tag":480,"props":2777,"children":2778},{"style":951},[2779],{"type":403,"value":496},{"type":397,"tag":480,"props":2781,"children":2782},{"style":493},[2783],{"type":403,"value":2702},{"type":397,"tag":480,"props":2785,"children":2786},{"style":951},[2787],{"type":403,"value":699},{"type":397,"tag":480,"props":2789,"children":2790},{"class":482,"line":1454},[2791],{"type":397,"tag":480,"props":2792,"children":2793},{"style":487},[2794],{"type":403,"value":2795},"      }\n",{"type":397,"tag":480,"props":2797,"children":2798},{"class":482,"line":1467},[2799,2804,2809,2813,2817,2821,2825,2829,2833],{"type":397,"tag":480,"props":2800,"children":2801},{"style":961},[2802],{"type":403,"value":2803},"      return",{"type":397,"tag":480,"props":2805,"children":2806},{"style":674},[2807],{"type":403,"value":2808}," createElement",{"type":397,"tag":480,"props":2810,"children":2811},{"style":951},[2812],{"type":403,"value":496},{"type":397,"tag":480,"props":2814,"children":2815},{"style":493},[2816],{"type":403,"value":2702},{"type":397,"tag":480,"props":2818,"children":2819},{"style":487},[2820],{"type":403,"value":517},{"type":397,"tag":480,"props":2822,"children":2823},{"style":493},[2824],{"type":403,"value":2576},{"type":397,"tag":480,"props":2826,"children":2827},{"style":487},[2828],{"type":403,"value":517},{"type":397,"tag":480,"props":2830,"children":2831},{"style":493},[2832],{"type":403,"value":1835},{"type":397,"tag":480,"props":2834,"children":2835},{"style":951},[2836],{"type":403,"value":699},{"type":397,"tag":480,"props":2838,"children":2839},{"class":482,"line":1508},[2840],{"type":397,"tag":480,"props":2841,"children":2842},{"style":487},[2843],{"type":403,"value":1688},{"type":397,"tag":480,"props":2845,"children":2846},{"class":482,"line":1548},[2847],{"type":397,"tag":480,"props":2848,"children":2849},{"emptyLinePlaceholder":390},[2850],{"type":403,"value":1298},{"type":397,"tag":480,"props":2852,"children":2853},{"class":482,"line":1584},[2854],{"type":397,"tag":480,"props":2855,"children":2856},{"style":539},[2857],{"type":403,"value":2858},"    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n",{"type":397,"tag":480,"props":2860,"children":2861},{"class":482,"line":1593},[2862],{"type":397,"tag":480,"props":2863,"children":2864},{"style":539},[2865],{"type":403,"value":2866},"    // 最终返回 data.frag 的克隆函数\n",{"type":397,"tag":480,"props":2868,"children":2869},{"class":482,"line":1606},[2870],{"type":397,"tag":480,"props":2871,"children":2872},{"style":539},[2873],{"type":403,"value":2874},"    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n",{"type":397,"tag":480,"props":2876,"children":2877},{"class":482,"line":1639},[2878],{"type":397,"tag":480,"props":2879,"children":2880},{"style":539},[2881],{"type":403,"value":2882},"    // 猜测它只能在老版本 IE 上起作用\n",{"type":397,"tag":480,"props":2884,"children":2885},{"class":482,"line":1648},[2886,2890,2894,2898,2902,2907],{"type":397,"tag":480,"props":2887,"children":2888},{"style":493},[2889],{"type":403,"value":2676},{"type":397,"tag":480,"props":2891,"children":2892},{"style":487},[2893],{"type":403,"value":671},{"type":397,"tag":480,"props":2895,"children":2896},{"style":493},[2897],{"type":403,"value":948},{"type":397,"tag":480,"props":2899,"children":2900},{"style":558},[2901],{"type":403,"value":935},{"type":397,"tag":480,"props":2903,"children":2904},{"style":674},[2905],{"type":403,"value":2906}," Function",{"type":397,"tag":480,"props":2908,"children":2909},{"style":951},[2910],{"type":403,"value":2911},"(\n",{"type":397,"tag":480,"props":2913,"children":2914},{"class":482,"line":1666},[2915,2920,2925,2929,2933],{"type":397,"tag":480,"props":2916,"children":2917},{"style":574},[2918],{"type":403,"value":2919},"      '",{"type":397,"tag":480,"props":2921,"children":2922},{"style":580},[2923],{"type":403,"value":2924},"html5,dataFrag",{"type":397,"tag":480,"props":2926,"children":2927},{"style":574},[2928],{"type":403,"value":686},{"type":397,"tag":480,"props":2930,"children":2931},{"style":487},[2932],{"type":403,"value":517},{"type":397,"tag":480,"props":2934,"children":2935},{"style":951},[2936],{"type":403,"value":2937}," \n",{"type":397,"tag":480,"props":2939,"children":2940},{"class":482,"line":1682},[2941,2945,2950,2954],{"type":397,"tag":480,"props":2942,"children":2943},{"style":574},[2944],{"type":403,"value":2919},{"type":397,"tag":480,"props":2946,"children":2947},{"style":580},[2948],{"type":403,"value":2949},"return function(){",{"type":397,"tag":480,"props":2951,"children":2952},{"style":574},[2953],{"type":403,"value":686},{"type":397,"tag":480,"props":2955,"children":2956},{"style":558},[2957],{"type":403,"value":2248},{"type":397,"tag":480,"props":2959,"children":2960},{"class":482,"line":1691},[2961,2965,2970,2974],{"type":397,"tag":480,"props":2962,"children":2963},{"style":574},[2964],{"type":403,"value":2234},{"type":397,"tag":480,"props":2966,"children":2967},{"style":580},[2968],{"type":403,"value":2969},"var clone=dataFrag.cloneNode(),create=clone.createElement",{"type":397,"tag":480,"props":2971,"children":2972},{"style":574},[2973],{"type":403,"value":686},{"type":397,"tag":480,"props":2975,"children":2976},{"style":558},[2977],{"type":403,"value":2248},{"type":397,"tag":480,"props":2979,"children":2981},{"class":482,"line":2980},26,[2982,2986,2991,2995],{"type":397,"tag":480,"props":2983,"children":2984},{"style":574},[2985],{"type":403,"value":2234},{"type":397,"tag":480,"props":2987,"children":2988},{"style":580},[2989],{"type":403,"value":2990},"html5.shivMethods&&(",{"type":397,"tag":480,"props":2992,"children":2993},{"style":574},[2994],{"type":403,"value":686},{"type":397,"tag":480,"props":2996,"children":2997},{"style":558},[2998],{"type":403,"value":2248},{"type":397,"tag":480,"props":3000,"children":3002},{"class":482,"line":3001},27,[3003],{"type":397,"tag":480,"props":3004,"children":3005},{"style":539},[3006],{"type":403,"value":3007},"            // unroll the `createElement` calls\n",{"type":397,"tag":480,"props":3009,"children":3011},{"class":482,"line":3010},28,[3012,3017,3021,3025,3030,3034,3038,3043,3047,3052,3057,3063,3068,3073,3077,3083,3087,3091,3095,3099,3103],{"type":397,"tag":480,"props":3013,"children":3014},{"style":674},[3015],{"type":403,"value":3016},"            getElements",{"type":397,"tag":480,"props":3018,"children":3019},{"style":951},[3020],{"type":403,"value":912},{"type":397,"tag":480,"props":3022,"children":3023},{"style":487},[3024],{"type":403,"value":671},{"type":397,"tag":480,"props":3026,"children":3027},{"style":674},[3028],{"type":403,"value":3029},"join",{"type":397,"tag":480,"props":3031,"children":3032},{"style":951},[3033],{"type":403,"value":912},{"type":397,"tag":480,"props":3035,"children":3036},{"style":487},[3037],{"type":403,"value":671},{"type":397,"tag":480,"props":3039,"children":3040},{"style":674},[3041],{"type":403,"value":3042},"replace",{"type":397,"tag":480,"props":3044,"children":3045},{"style":951},[3046],{"type":403,"value":496},{"type":397,"tag":480,"props":3048,"children":3049},{"style":574},[3050],{"type":403,"value":3051},"/",{"type":397,"tag":480,"props":3053,"children":3055},{"style":3054},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3056],{"type":403,"value":1849},{"type":397,"tag":480,"props":3058,"children":3060},{"style":3059},"--shiki-light:#91B859;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3061],{"type":403,"value":3062},"\\w\\-:",{"type":397,"tag":480,"props":3064,"children":3065},{"style":3054},[3066],{"type":403,"value":3067},"]",{"type":397,"tag":480,"props":3069,"children":3070},{"style":558},[3071],{"type":403,"value":3072},"+",{"type":397,"tag":480,"props":3074,"children":3075},{"style":574},[3076],{"type":403,"value":3051},{"type":397,"tag":480,"props":3078,"children":3080},{"style":3079},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3081],{"type":403,"value":3082},"g",{"type":397,"tag":480,"props":3084,"children":3085},{"style":487},[3086],{"type":403,"value":517},{"type":397,"tag":480,"props":3088,"children":3089},{"style":499},[3090],{"type":403,"value":2693},{"type":397,"tag":480,"props":3092,"children":3093},{"style":487},[3094],{"type":403,"value":496},{"type":397,"tag":480,"props":3096,"children":3097},{"style":509},[3098],{"type":403,"value":2702},{"type":397,"tag":480,"props":3100,"children":3101},{"style":487},[3102],{"type":403,"value":527},{"type":397,"tag":480,"props":3104,"children":3105},{"style":487},[3106],{"type":403,"value":532},{"type":397,"tag":480,"props":3108,"children":3110},{"class":482,"line":3109},29,[3111,3116,3120,3124,3128,3132],{"type":397,"tag":480,"props":3112,"children":3113},{"style":493},[3114],{"type":403,"value":3115},"            data",{"type":397,"tag":480,"props":3117,"children":3118},{"style":487},[3119],{"type":403,"value":671},{"type":397,"tag":480,"props":3121,"children":3122},{"style":674},[3123],{"type":403,"value":2567},{"type":397,"tag":480,"props":3125,"children":3126},{"style":951},[3127],{"type":403,"value":496},{"type":397,"tag":480,"props":3129,"children":3130},{"style":493},[3131],{"type":403,"value":2702},{"type":397,"tag":480,"props":3133,"children":3134},{"style":951},[3135],{"type":403,"value":699},{"type":397,"tag":480,"props":3137,"children":3139},{"class":482,"line":3138},30,[3140,3144,3148,3152,3156,3160,3164,3168],{"type":397,"tag":480,"props":3141,"children":3142},{"style":493},[3143],{"type":403,"value":3115},{"type":397,"tag":480,"props":3145,"children":3146},{"style":487},[3147],{"type":403,"value":671},{"type":397,"tag":480,"props":3149,"children":3150},{"style":493},[3151],{"type":403,"value":2634},{"type":397,"tag":480,"props":3153,"children":3154},{"style":487},[3155],{"type":403,"value":671},{"type":397,"tag":480,"props":3157,"children":3158},{"style":674},[3159],{"type":403,"value":677},{"type":397,"tag":480,"props":3161,"children":3162},{"style":951},[3163],{"type":403,"value":496},{"type":397,"tag":480,"props":3165,"children":3166},{"style":493},[3167],{"type":403,"value":2702},{"type":397,"tag":480,"props":3169,"children":3170},{"style":951},[3171],{"type":403,"value":699},{"type":397,"tag":480,"props":3173,"children":3175},{"class":482,"line":3174},31,[3176,3180,3184,3189,3193,3198,3203,3207,3211,3216],{"type":397,"tag":480,"props":3177,"children":3178},{"style":961},[3179],{"type":403,"value":1460},{"type":397,"tag":480,"props":3181,"children":3182},{"style":574},[3183],{"type":403,"value":837},{"type":397,"tag":480,"props":3185,"children":3186},{"style":580},[3187],{"type":403,"value":3188},"create(\"",{"type":397,"tag":480,"props":3190,"children":3191},{"style":574},[3192],{"type":403,"value":686},{"type":397,"tag":480,"props":3194,"children":3195},{"style":558},[3196],{"type":403,"value":3197}," +",{"type":397,"tag":480,"props":3199,"children":3200},{"style":493},[3201],{"type":403,"value":3202}," nodeName",{"type":397,"tag":480,"props":3204,"children":3205},{"style":558},[3206],{"type":403,"value":3197},{"type":397,"tag":480,"props":3208,"children":3209},{"style":574},[3210],{"type":403,"value":837},{"type":397,"tag":480,"props":3212,"children":3213},{"style":580},[3214],{"type":403,"value":3215},"\")",{"type":397,"tag":480,"props":3217,"children":3218},{"style":574},[3219],{"type":403,"value":847},{"type":397,"tag":480,"props":3221,"children":3223},{"class":482,"line":3222},32,[3224,3229,3233],{"type":397,"tag":480,"props":3225,"children":3226},{"style":487},[3227],{"type":403,"value":3228},"            }",{"type":397,"tag":480,"props":3230,"children":3231},{"style":951},[3232],{"type":403,"value":1631},{"type":397,"tag":480,"props":3234,"children":3235},{"style":558},[3236],{"type":403,"value":3237},"+\n",{"type":397,"tag":480,"props":3239,"children":3241},{"class":482,"line":3240},33,[3242,3246,3251,3255],{"type":397,"tag":480,"props":3243,"children":3244},{"style":574},[3245],{"type":403,"value":2234},{"type":397,"tag":480,"props":3247,"children":3248},{"style":580},[3249],{"type":403,"value":3250},")return clone",{"type":397,"tag":480,"props":3252,"children":3253},{"style":574},[3254],{"type":403,"value":686},{"type":397,"tag":480,"props":3256,"children":3257},{"style":558},[3258],{"type":403,"value":2248},{"type":397,"tag":480,"props":3260,"children":3262},{"class":482,"line":3261},34,[3263,3267,3271],{"type":397,"tag":480,"props":3264,"children":3265},{"style":574},[3266],{"type":403,"value":2919},{"type":397,"tag":480,"props":3268,"children":3269},{"style":580},[3270],{"type":403,"value":551},{"type":397,"tag":480,"props":3272,"children":3273},{"style":574},[3274],{"type":403,"value":847},{"type":397,"tag":480,"props":3276,"children":3278},{"class":482,"line":3277},35,[3279,3284,3288,3292,3296,3300,3304],{"type":397,"tag":480,"props":3280,"children":3281},{"style":951},[3282],{"type":403,"value":3283},"    )(",{"type":397,"tag":480,"props":3285,"children":3286},{"style":493},[3287],{"type":403,"value":2122},{"type":397,"tag":480,"props":3289,"children":3290},{"style":487},[3291],{"type":403,"value":517},{"type":397,"tag":480,"props":3293,"children":3294},{"style":493},[3295],{"type":403,"value":1835},{"type":397,"tag":480,"props":3297,"children":3298},{"style":487},[3299],{"type":403,"value":671},{"type":397,"tag":480,"props":3301,"children":3302},{"style":493},[3303],{"type":403,"value":2634},{"type":397,"tag":480,"props":3305,"children":3306},{"style":951},[3307],{"type":403,"value":699},{"type":397,"tag":480,"props":3309,"children":3311},{"class":482,"line":3310},36,[3312],{"type":397,"tag":480,"props":3313,"children":3314},{"style":487},[3315],{"type":403,"value":2012},{"type":397,"tag":411,"props":3317,"children":3318},{},[3319],{"type":403,"value":3320},"小插曲。我在浏览器测试时发现，若像上面这个函数一样，将 document.createDocumentFrament 先缓存，再调用，会发生报错：",{"type":397,"tag":469,"props":3322,"children":3324},{"className":471,"code":3323,"language":473,"meta":391,"style":391},"data = {}\ndata.createFrag = document.createDocumentFragment\ndata.frag = data.createFrag()\n\n// >>> Uncaught TypeError: Illegal invocation\n",[3325],{"type":397,"tag":476,"props":3326,"children":3327},{"__ignoreMap":391},[3328,3344,3376,3412,3419],{"type":397,"tag":480,"props":3329,"children":3330},{"class":482,"line":483},[3331,3336,3340],{"type":397,"tag":480,"props":3332,"children":3333},{"style":493},[3334],{"type":403,"value":3335},"data ",{"type":397,"tag":480,"props":3337,"children":3338},{"style":558},[3339],{"type":403,"value":662},{"type":397,"tag":480,"props":3341,"children":3342},{"style":487},[3343],{"type":403,"value":1744},{"type":397,"tag":480,"props":3345,"children":3346},{"class":482,"line":535},[3347,3351,3355,3360,3364,3368,3372],{"type":397,"tag":480,"props":3348,"children":3349},{"style":493},[3350],{"type":403,"value":1889},{"type":397,"tag":480,"props":3352,"children":3353},{"style":487},[3354],{"type":403,"value":671},{"type":397,"tag":480,"props":3356,"children":3357},{"style":493},[3358],{"type":403,"value":3359},"createFrag ",{"type":397,"tag":480,"props":3361,"children":3362},{"style":558},[3363],{"type":403,"value":662},{"type":397,"tag":480,"props":3365,"children":3366},{"style":493},[3367],{"type":403,"value":522},{"type":397,"tag":480,"props":3369,"children":3370},{"style":487},[3371],{"type":403,"value":671},{"type":397,"tag":480,"props":3373,"children":3374},{"style":493},[3375],{"type":403,"value":2618},{"type":397,"tag":480,"props":3377,"children":3378},{"class":482,"line":545},[3379,3383,3387,3392,3396,3400,3404,3408],{"type":397,"tag":480,"props":3380,"children":3381},{"style":493},[3382],{"type":403,"value":1889},{"type":397,"tag":480,"props":3384,"children":3385},{"style":487},[3386],{"type":403,"value":671},{"type":397,"tag":480,"props":3388,"children":3389},{"style":493},[3390],{"type":403,"value":3391},"frag ",{"type":397,"tag":480,"props":3393,"children":3394},{"style":558},[3395],{"type":403,"value":662},{"type":397,"tag":480,"props":3397,"children":3398},{"style":493},[3399],{"type":403,"value":1835},{"type":397,"tag":480,"props":3401,"children":3402},{"style":487},[3403],{"type":403,"value":671},{"type":397,"tag":480,"props":3405,"children":3406},{"style":674},[3407],{"type":403,"value":2601},{"type":397,"tag":480,"props":3409,"children":3410},{"style":493},[3411],{"type":403,"value":954},{"type":397,"tag":480,"props":3413,"children":3414},{"class":482,"line":919},[3415],{"type":397,"tag":480,"props":3416,"children":3417},{"emptyLinePlaceholder":390},[3418],{"type":403,"value":1298},{"type":397,"tag":480,"props":3420,"children":3421},{"class":482,"line":957},[3422],{"type":397,"tag":480,"props":3423,"children":3424},{"style":539},[3425],{"type":403,"value":3426},"// >>> Uncaught TypeError: Illegal invocation\n",{"type":397,"tag":411,"props":3428,"children":3429},{},[3430],{"type":403,"value":3431},"由于没有具体的报错原因，只能暂时猜测是 this 指向的锅。更改 this 指向后，再试了一次，这次没得问题。在 GitHub issues 中没有人提过这个问题，所以我只能猜测因为所有现代浏览器都支持使用原生 API 创建非标准元素，所以不会走 shivMethods 的逻辑。",{"type":397,"tag":469,"props":3433,"children":3435},{"className":471,"code":3434,"language":473,"meta":391,"style":391},"data = {}\ndata.createFrag = document.createDocumentFragment.bind(document)\ndata.frag = data.createFrag()\n\n// >>> #document-fragment\n",[3436],{"type":397,"tag":476,"props":3437,"children":3438},{"__ignoreMap":391},[3439,3454,3499,3534,3541],{"type":397,"tag":480,"props":3440,"children":3441},{"class":482,"line":483},[3442,3446,3450],{"type":397,"tag":480,"props":3443,"children":3444},{"style":493},[3445],{"type":403,"value":3335},{"type":397,"tag":480,"props":3447,"children":3448},{"style":558},[3449],{"type":403,"value":662},{"type":397,"tag":480,"props":3451,"children":3452},{"style":487},[3453],{"type":403,"value":1744},{"type":397,"tag":480,"props":3455,"children":3456},{"class":482,"line":535},[3457,3461,3465,3469,3473,3477,3481,3485,3489,3494],{"type":397,"tag":480,"props":3458,"children":3459},{"style":493},[3460],{"type":403,"value":1889},{"type":397,"tag":480,"props":3462,"children":3463},{"style":487},[3464],{"type":403,"value":671},{"type":397,"tag":480,"props":3466,"children":3467},{"style":493},[3468],{"type":403,"value":3359},{"type":397,"tag":480,"props":3470,"children":3471},{"style":558},[3472],{"type":403,"value":662},{"type":397,"tag":480,"props":3474,"children":3475},{"style":493},[3476],{"type":403,"value":522},{"type":397,"tag":480,"props":3478,"children":3479},{"style":487},[3480],{"type":403,"value":671},{"type":397,"tag":480,"props":3482,"children":3483},{"style":493},[3484],{"type":403,"value":948},{"type":397,"tag":480,"props":3486,"children":3487},{"style":487},[3488],{"type":403,"value":671},{"type":397,"tag":480,"props":3490,"children":3491},{"style":674},[3492],{"type":403,"value":3493},"bind",{"type":397,"tag":480,"props":3495,"children":3496},{"style":493},[3497],{"type":403,"value":3498},"(document)\n",{"type":397,"tag":480,"props":3500,"children":3501},{"class":482,"line":545},[3502,3506,3510,3514,3518,3522,3526,3530],{"type":397,"tag":480,"props":3503,"children":3504},{"style":493},[3505],{"type":403,"value":1889},{"type":397,"tag":480,"props":3507,"children":3508},{"style":487},[3509],{"type":403,"value":671},{"type":397,"tag":480,"props":3511,"children":3512},{"style":493},[3513],{"type":403,"value":3391},{"type":397,"tag":480,"props":3515,"children":3516},{"style":558},[3517],{"type":403,"value":662},{"type":397,"tag":480,"props":3519,"children":3520},{"style":493},[3521],{"type":403,"value":1835},{"type":397,"tag":480,"props":3523,"children":3524},{"style":487},[3525],{"type":403,"value":671},{"type":397,"tag":480,"props":3527,"children":3528},{"style":674},[3529],{"type":403,"value":2601},{"type":397,"tag":480,"props":3531,"children":3532},{"style":493},[3533],{"type":403,"value":954},{"type":397,"tag":480,"props":3535,"children":3536},{"class":482,"line":919},[3537],{"type":397,"tag":480,"props":3538,"children":3539},{"emptyLinePlaceholder":390},[3540],{"type":403,"value":1298},{"type":397,"tag":480,"props":3542,"children":3543},{"class":482,"line":957},[3544],{"type":397,"tag":480,"props":3545,"children":3546},{"style":539},[3547],{"type":403,"value":3548},"// >>> #document-fragment\n",{"type":397,"tag":411,"props":3550,"children":3551},{},[3552],{"type":403,"value":3553},"我们继续。以下代码是对 createElement 的仿制， 用于返回一个已经 shiv 过的元素。主要是用来兼容原生 document.createElement 不支持创建一个非规范的元素的情况。比方说，HTML5 标签中有 article 元素，document.createElement 不支持的话，就需要调用此仿制 API。",{"type":397,"tag":469,"props":3555,"children":3557},{"className":471,"code":3556,"language":473,"meta":391,"style":391},"function createElement(nodeName, ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createElement(nodeName)\n    }\n    if (!data) {\n        data = getExpandoData(ownerDocument)\n    }\n    var node\n\n    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n    if (data.cache[nodeName]) {\n        node = data.cache[nodeName].cloneNode()\n    } else \n    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n    // 则创建一个新元素并存到缓存中\n    if (saveClones.test(nodeName)) {\n        node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode()\n    } else \n    // 如果是不能被克隆的对象，那就直接创建吧...\n    {\n        node = data.createElem(nodeName)\n    }\n\n    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n    // Avoid adding some elements to fragments in IE \u003C 9 because\n    // * Attributes like `name` or `type` cannot be set/changed once an element\n    //   is inserted into a document/fragment\n    // * Link elements with `src` attributes that are inaccessible, as with\n    //   a 403 response, will cause the tab/window to crash\n    // * Script elements appended to fragments will execute when their `src`\n    //   or `text` property is set\n    return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn \n        ? data.frag.appendChild(node) \n        : node\n  }\n",[3558],{"type":397,"tag":476,"props":3559,"children":3560},{"__ignoreMap":391},[3561,3601,3624,3656,3663,3690,3717,3724,3736,3743,3751,3791,3839,3855,3863,3871,3913,3993,4008,4016,4024,4059,4066,4073,4081,4089,4097,4105,4113,4121,4129,4137,4218,4260,4272],{"type":397,"tag":480,"props":3562,"children":3563},{"class":482,"line":483},[3564,3568,3572,3576,3580,3584,3588,3592,3596],{"type":397,"tag":480,"props":3565,"children":3566},{"style":499},[3567],{"type":403,"value":502},{"type":397,"tag":480,"props":3569,"children":3570},{"style":674},[3571],{"type":403,"value":2808},{"type":397,"tag":480,"props":3573,"children":3574},{"style":487},[3575],{"type":403,"value":496},{"type":397,"tag":480,"props":3577,"children":3578},{"style":509},[3579],{"type":403,"value":2702},{"type":397,"tag":480,"props":3581,"children":3582},{"style":487},[3583],{"type":403,"value":517},{"type":397,"tag":480,"props":3585,"children":3586},{"style":509},[3587],{"type":403,"value":2576},{"type":397,"tag":480,"props":3589,"children":3590},{"style":487},[3591],{"type":403,"value":517},{"type":397,"tag":480,"props":3593,"children":3594},{"style":509},[3595],{"type":403,"value":1835},{"type":397,"tag":480,"props":3597,"children":3598},{"style":487},[3599],{"type":403,"value":3600},"){\n",{"type":397,"tag":480,"props":3602,"children":3603},{"class":482,"line":535},[3604,3608,3612,3616,3620],{"type":397,"tag":480,"props":3605,"children":3606},{"style":961},[3607],{"type":403,"value":1875},{"type":397,"tag":480,"props":3609,"children":3610},{"style":951},[3611],{"type":403,"value":496},{"type":397,"tag":480,"props":3613,"children":3614},{"style":493},[3615],{"type":403,"value":2366},{"type":397,"tag":480,"props":3617,"children":3618},{"style":951},[3619],{"type":403,"value":527},{"type":397,"tag":480,"props":3621,"children":3622},{"style":487},[3623],{"type":403,"value":1636},{"type":397,"tag":480,"props":3625,"children":3626},{"class":482,"line":545},[3627,3632,3636,3640,3644,3648,3652],{"type":397,"tag":480,"props":3628,"children":3629},{"style":961},[3630],{"type":403,"value":3631},"        return",{"type":397,"tag":480,"props":3633,"children":3634},{"style":493},[3635],{"type":403,"value":2576},{"type":397,"tag":480,"props":3637,"children":3638},{"style":487},[3639],{"type":403,"value":671},{"type":397,"tag":480,"props":3641,"children":3642},{"style":674},[3643],{"type":403,"value":677},{"type":397,"tag":480,"props":3645,"children":3646},{"style":951},[3647],{"type":403,"value":496},{"type":397,"tag":480,"props":3649,"children":3650},{"style":493},[3651],{"type":403,"value":2702},{"type":397,"tag":480,"props":3653,"children":3654},{"style":951},[3655],{"type":403,"value":699},{"type":397,"tag":480,"props":3657,"children":3658},{"class":482,"line":919},[3659],{"type":397,"tag":480,"props":3660,"children":3661},{"style":487},[3662],{"type":403,"value":1688},{"type":397,"tag":480,"props":3664,"children":3665},{"class":482,"line":957},[3666,3670,3674,3678,3682,3686],{"type":397,"tag":480,"props":3667,"children":3668},{"style":961},[3669],{"type":403,"value":1875},{"type":397,"tag":480,"props":3671,"children":3672},{"style":951},[3673],{"type":403,"value":716},{"type":397,"tag":480,"props":3675,"children":3676},{"style":558},[3677],{"type":403,"value":1884},{"type":397,"tag":480,"props":3679,"children":3680},{"style":493},[3681],{"type":403,"value":1889},{"type":397,"tag":480,"props":3683,"children":3684},{"style":951},[3685],{"type":403,"value":1631},{"type":397,"tag":480,"props":3687,"children":3688},{"style":487},[3689],{"type":403,"value":1636},{"type":397,"tag":480,"props":3691,"children":3692},{"class":482,"line":972},[3693,3697,3701,3705,3709,3713],{"type":397,"tag":480,"props":3694,"children":3695},{"style":493},[3696],{"type":403,"value":1905},{"type":397,"tag":480,"props":3698,"children":3699},{"style":558},[3700],{"type":403,"value":935},{"type":397,"tag":480,"props":3702,"children":3703},{"style":674},[3704],{"type":403,"value":1806},{"type":397,"tag":480,"props":3706,"children":3707},{"style":951},[3708],{"type":403,"value":496},{"type":397,"tag":480,"props":3710,"children":3711},{"style":493},[3712],{"type":403,"value":1815},{"type":397,"tag":480,"props":3714,"children":3715},{"style":951},[3716],{"type":403,"value":699},{"type":397,"tag":480,"props":3718,"children":3719},{"class":482,"line":1015},[3720],{"type":397,"tag":480,"props":3721,"children":3722},{"style":487},[3723],{"type":403,"value":1688},{"type":397,"tag":480,"props":3725,"children":3726},{"class":482,"line":1055},[3727,3731],{"type":397,"tag":480,"props":3728,"children":3729},{"style":499},[3730],{"type":403,"value":925},{"type":397,"tag":480,"props":3732,"children":3733},{"style":493},[3734],{"type":403,"value":3735}," node\n",{"type":397,"tag":480,"props":3737,"children":3738},{"class":482,"line":1091},[3739],{"type":397,"tag":480,"props":3740,"children":3741},{"emptyLinePlaceholder":390},[3742],{"type":403,"value":1298},{"type":397,"tag":480,"props":3744,"children":3745},{"class":482,"line":1100},[3746],{"type":397,"tag":480,"props":3747,"children":3748},{"style":539},[3749],{"type":403,"value":3750},"    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n",{"type":397,"tag":480,"props":3752,"children":3753},{"class":482,"line":1369},[3754,3758,3762,3766,3770,3774,3778,3782,3787],{"type":397,"tag":480,"props":3755,"children":3756},{"style":961},[3757],{"type":403,"value":1875},{"type":397,"tag":480,"props":3759,"children":3760},{"style":951},[3761],{"type":403,"value":716},{"type":397,"tag":480,"props":3763,"children":3764},{"style":493},[3765],{"type":403,"value":1889},{"type":397,"tag":480,"props":3767,"children":3768},{"style":487},[3769],{"type":403,"value":671},{"type":397,"tag":480,"props":3771,"children":3772},{"style":493},[3773],{"type":403,"value":2520},{"type":397,"tag":480,"props":3775,"children":3776},{"style":951},[3777],{"type":403,"value":1849},{"type":397,"tag":480,"props":3779,"children":3780},{"style":493},[3781],{"type":403,"value":2702},{"type":397,"tag":480,"props":3783,"children":3784},{"style":951},[3785],{"type":403,"value":3786},"]) ",{"type":397,"tag":480,"props":3788,"children":3789},{"style":487},[3790],{"type":403,"value":1636},{"type":397,"tag":480,"props":3792,"children":3793},{"class":482,"line":1378},[3794,3799,3803,3807,3811,3815,3819,3823,3827,3831,3835],{"type":397,"tag":480,"props":3795,"children":3796},{"style":493},[3797],{"type":403,"value":3798},"        node",{"type":397,"tag":480,"props":3800,"children":3801},{"style":558},[3802],{"type":403,"value":935},{"type":397,"tag":480,"props":3804,"children":3805},{"style":493},[3806],{"type":403,"value":1835},{"type":397,"tag":480,"props":3808,"children":3809},{"style":487},[3810],{"type":403,"value":671},{"type":397,"tag":480,"props":3812,"children":3813},{"style":493},[3814],{"type":403,"value":2520},{"type":397,"tag":480,"props":3816,"children":3817},{"style":951},[3818],{"type":403,"value":1849},{"type":397,"tag":480,"props":3820,"children":3821},{"style":493},[3822],{"type":403,"value":2702},{"type":397,"tag":480,"props":3824,"children":3825},{"style":951},[3826],{"type":403,"value":3067},{"type":397,"tag":480,"props":3828,"children":3829},{"style":487},[3830],{"type":403,"value":671},{"type":397,"tag":480,"props":3832,"children":3833},{"style":674},[3834],{"type":403,"value":991},{"type":397,"tag":480,"props":3836,"children":3837},{"style":951},[3838],{"type":403,"value":954},{"type":397,"tag":480,"props":3840,"children":3841},{"class":482,"line":1421},[3842,3846,3851],{"type":397,"tag":480,"props":3843,"children":3844},{"style":487},[3845],{"type":403,"value":1612},{"type":397,"tag":480,"props":3847,"children":3848},{"style":961},[3849],{"type":403,"value":3850}," else",{"type":397,"tag":480,"props":3852,"children":3853},{"style":951},[3854],{"type":403,"value":2937},{"type":397,"tag":480,"props":3856,"children":3857},{"class":482,"line":1454},[3858],{"type":397,"tag":480,"props":3859,"children":3860},{"style":539},[3861],{"type":403,"value":3862},"    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n",{"type":397,"tag":480,"props":3864,"children":3865},{"class":482,"line":1467},[3866],{"type":397,"tag":480,"props":3867,"children":3868},{"style":539},[3869],{"type":403,"value":3870},"    // 则创建一个新元素并存到缓存中\n",{"type":397,"tag":480,"props":3872,"children":3873},{"class":482,"line":1508},[3874,3878,3882,3887,3891,3896,3900,3904,3909],{"type":397,"tag":480,"props":3875,"children":3876},{"style":961},[3877],{"type":403,"value":1875},{"type":397,"tag":480,"props":3879,"children":3880},{"style":951},[3881],{"type":403,"value":716},{"type":397,"tag":480,"props":3883,"children":3884},{"style":493},[3885],{"type":403,"value":3886},"saveClones",{"type":397,"tag":480,"props":3888,"children":3889},{"style":487},[3890],{"type":403,"value":671},{"type":397,"tag":480,"props":3892,"children":3893},{"style":674},[3894],{"type":403,"value":3895},"test",{"type":397,"tag":480,"props":3897,"children":3898},{"style":951},[3899],{"type":403,"value":496},{"type":397,"tag":480,"props":3901,"children":3902},{"style":493},[3903],{"type":403,"value":2702},{"type":397,"tag":480,"props":3905,"children":3906},{"style":951},[3907],{"type":403,"value":3908},")) ",{"type":397,"tag":480,"props":3910,"children":3911},{"style":487},[3912],{"type":403,"value":1636},{"type":397,"tag":480,"props":3914,"children":3915},{"class":482,"line":1548},[3916,3920,3924,3928,3932,3936,3940,3944,3948,3952,3956,3960,3964,3968,3972,3976,3981,3985,3989],{"type":397,"tag":480,"props":3917,"children":3918},{"style":493},[3919],{"type":403,"value":3798},{"type":397,"tag":480,"props":3921,"children":3922},{"style":558},[3923],{"type":403,"value":935},{"type":397,"tag":480,"props":3925,"children":3926},{"style":951},[3927],{"type":403,"value":716},{"type":397,"tag":480,"props":3929,"children":3930},{"style":493},[3931],{"type":403,"value":1889},{"type":397,"tag":480,"props":3933,"children":3934},{"style":487},[3935],{"type":403,"value":671},{"type":397,"tag":480,"props":3937,"children":3938},{"style":493},[3939],{"type":403,"value":2520},{"type":397,"tag":480,"props":3941,"children":3942},{"style":951},[3943],{"type":403,"value":1849},{"type":397,"tag":480,"props":3945,"children":3946},{"style":493},[3947],{"type":403,"value":2702},{"type":397,"tag":480,"props":3949,"children":3950},{"style":951},[3951],{"type":403,"value":1947},{"type":397,"tag":480,"props":3953,"children":3954},{"style":558},[3955],{"type":403,"value":662},{"type":397,"tag":480,"props":3957,"children":3958},{"style":493},[3959],{"type":403,"value":1835},{"type":397,"tag":480,"props":3961,"children":3962},{"style":487},[3963],{"type":403,"value":671},{"type":397,"tag":480,"props":3965,"children":3966},{"style":674},[3967],{"type":403,"value":2567},{"type":397,"tag":480,"props":3969,"children":3970},{"style":951},[3971],{"type":403,"value":496},{"type":397,"tag":480,"props":3973,"children":3974},{"style":493},[3975],{"type":403,"value":2702},{"type":397,"tag":480,"props":3977,"children":3978},{"style":951},[3979],{"type":403,"value":3980},"))",{"type":397,"tag":480,"props":3982,"children":3983},{"style":487},[3984],{"type":403,"value":671},{"type":397,"tag":480,"props":3986,"children":3987},{"style":674},[3988],{"type":403,"value":991},{"type":397,"tag":480,"props":3990,"children":3991},{"style":951},[3992],{"type":403,"value":954},{"type":397,"tag":480,"props":3994,"children":3995},{"class":482,"line":1584},[3996,4000,4004],{"type":397,"tag":480,"props":3997,"children":3998},{"style":487},[3999],{"type":403,"value":1612},{"type":397,"tag":480,"props":4001,"children":4002},{"style":961},[4003],{"type":403,"value":3850},{"type":397,"tag":480,"props":4005,"children":4006},{"style":951},[4007],{"type":403,"value":2937},{"type":397,"tag":480,"props":4009,"children":4010},{"class":482,"line":1593},[4011],{"type":397,"tag":480,"props":4012,"children":4013},{"style":539},[4014],{"type":403,"value":4015},"    // 如果是不能被克隆的对象，那就直接创建吧...\n",{"type":397,"tag":480,"props":4017,"children":4018},{"class":482,"line":1606},[4019],{"type":397,"tag":480,"props":4020,"children":4021},{"style":487},[4022],{"type":403,"value":4023},"    {\n",{"type":397,"tag":480,"props":4025,"children":4026},{"class":482,"line":1639},[4027,4031,4035,4039,4043,4047,4051,4055],{"type":397,"tag":480,"props":4028,"children":4029},{"style":493},[4030],{"type":403,"value":3798},{"type":397,"tag":480,"props":4032,"children":4033},{"style":558},[4034],{"type":403,"value":935},{"type":397,"tag":480,"props":4036,"children":4037},{"style":493},[4038],{"type":403,"value":1835},{"type":397,"tag":480,"props":4040,"children":4041},{"style":487},[4042],{"type":403,"value":671},{"type":397,"tag":480,"props":4044,"children":4045},{"style":674},[4046],{"type":403,"value":2567},{"type":397,"tag":480,"props":4048,"children":4049},{"style":951},[4050],{"type":403,"value":496},{"type":397,"tag":480,"props":4052,"children":4053},{"style":493},[4054],{"type":403,"value":2702},{"type":397,"tag":480,"props":4056,"children":4057},{"style":951},[4058],{"type":403,"value":699},{"type":397,"tag":480,"props":4060,"children":4061},{"class":482,"line":1648},[4062],{"type":397,"tag":480,"props":4063,"children":4064},{"style":487},[4065],{"type":403,"value":1688},{"type":397,"tag":480,"props":4067,"children":4068},{"class":482,"line":1666},[4069],{"type":397,"tag":480,"props":4070,"children":4071},{"emptyLinePlaceholder":390},[4072],{"type":403,"value":1298},{"type":397,"tag":480,"props":4074,"children":4075},{"class":482,"line":1682},[4076],{"type":397,"tag":480,"props":4077,"children":4078},{"style":539},[4079],{"type":403,"value":4080},"    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n",{"type":397,"tag":480,"props":4082,"children":4083},{"class":482,"line":1691},[4084],{"type":397,"tag":480,"props":4085,"children":4086},{"style":539},[4087],{"type":403,"value":4088},"    // Avoid adding some elements to fragments in IE \u003C 9 because\n",{"type":397,"tag":480,"props":4090,"children":4091},{"class":482,"line":2980},[4092],{"type":397,"tag":480,"props":4093,"children":4094},{"style":539},[4095],{"type":403,"value":4096},"    // * Attributes like `name` or `type` cannot be set/changed once an element\n",{"type":397,"tag":480,"props":4098,"children":4099},{"class":482,"line":3001},[4100],{"type":397,"tag":480,"props":4101,"children":4102},{"style":539},[4103],{"type":403,"value":4104},"    //   is inserted into a document/fragment\n",{"type":397,"tag":480,"props":4106,"children":4107},{"class":482,"line":3010},[4108],{"type":397,"tag":480,"props":4109,"children":4110},{"style":539},[4111],{"type":403,"value":4112},"    // * Link elements with `src` attributes that are inaccessible, as with\n",{"type":397,"tag":480,"props":4114,"children":4115},{"class":482,"line":3109},[4116],{"type":397,"tag":480,"props":4117,"children":4118},{"style":539},[4119],{"type":403,"value":4120},"    //   a 403 response, will cause the tab/window to crash\n",{"type":397,"tag":480,"props":4122,"children":4123},{"class":482,"line":3138},[4124],{"type":397,"tag":480,"props":4125,"children":4126},{"style":539},[4127],{"type":403,"value":4128},"    // * Script elements appended to fragments will execute when their `src`\n",{"type":397,"tag":480,"props":4130,"children":4131},{"class":482,"line":3174},[4132],{"type":397,"tag":480,"props":4133,"children":4134},{"style":539},[4135],{"type":403,"value":4136},"    //   or `text` property is set\n",{"type":397,"tag":480,"props":4138,"children":4139},{"class":482,"line":3222},[4140,4144,4149,4153,4158,4162,4166,4171,4175,4179,4183,4187,4191,4196,4200,4205,4209,4214],{"type":397,"tag":480,"props":4141,"children":4142},{"style":961},[4143],{"type":403,"value":964},{"type":397,"tag":480,"props":4145,"children":4146},{"style":493},[4147],{"type":403,"value":4148}," node",{"type":397,"tag":480,"props":4150,"children":4151},{"style":487},[4152],{"type":403,"value":671},{"type":397,"tag":480,"props":4154,"children":4155},{"style":493},[4156],{"type":403,"value":4157},"canHaveChildren",{"type":397,"tag":480,"props":4159,"children":4160},{"style":558},[4161],{"type":403,"value":2136},{"type":397,"tag":480,"props":4163,"children":4164},{"style":558},[4165],{"type":403,"value":2141},{"type":397,"tag":480,"props":4167,"children":4168},{"style":493},[4169],{"type":403,"value":4170},"reSkip",{"type":397,"tag":480,"props":4172,"children":4173},{"style":487},[4174],{"type":403,"value":671},{"type":397,"tag":480,"props":4176,"children":4177},{"style":674},[4178],{"type":403,"value":3895},{"type":397,"tag":480,"props":4180,"children":4181},{"style":951},[4182],{"type":403,"value":496},{"type":397,"tag":480,"props":4184,"children":4185},{"style":493},[4186],{"type":403,"value":2702},{"type":397,"tag":480,"props":4188,"children":4189},{"style":951},[4190],{"type":403,"value":1631},{"type":397,"tag":480,"props":4192,"children":4193},{"style":558},[4194],{"type":403,"value":4195},"&&",{"type":397,"tag":480,"props":4197,"children":4198},{"style":558},[4199],{"type":403,"value":2141},{"type":397,"tag":480,"props":4201,"children":4202},{"style":493},[4203],{"type":403,"value":4204},"node",{"type":397,"tag":480,"props":4206,"children":4207},{"style":487},[4208],{"type":403,"value":671},{"type":397,"tag":480,"props":4210,"children":4211},{"style":493},[4212],{"type":403,"value":4213},"tagUrn",{"type":397,"tag":480,"props":4215,"children":4216},{"style":951},[4217],{"type":403,"value":2937},{"type":397,"tag":480,"props":4219,"children":4220},{"class":482,"line":3240},[4221,4226,4230,4234,4238,4242,4247,4251,4255],{"type":397,"tag":480,"props":4222,"children":4223},{"style":558},[4224],{"type":403,"value":4225},"        ?",{"type":397,"tag":480,"props":4227,"children":4228},{"style":493},[4229],{"type":403,"value":1835},{"type":397,"tag":480,"props":4231,"children":4232},{"style":487},[4233],{"type":403,"value":671},{"type":397,"tag":480,"props":4235,"children":4236},{"style":493},[4237],{"type":403,"value":2634},{"type":397,"tag":480,"props":4239,"children":4240},{"style":487},[4241],{"type":403,"value":671},{"type":397,"tag":480,"props":4243,"children":4244},{"style":674},[4245],{"type":403,"value":4246},"appendChild",{"type":397,"tag":480,"props":4248,"children":4249},{"style":951},[4250],{"type":403,"value":496},{"type":397,"tag":480,"props":4252,"children":4253},{"style":493},[4254],{"type":403,"value":4204},{"type":397,"tag":480,"props":4256,"children":4257},{"style":951},[4258],{"type":403,"value":4259},") \n",{"type":397,"tag":480,"props":4261,"children":4262},{"class":482,"line":3261},[4263,4268],{"type":397,"tag":480,"props":4264,"children":4265},{"style":558},[4266],{"type":403,"value":4267},"        :",{"type":397,"tag":480,"props":4269,"children":4270},{"style":493},[4271],{"type":403,"value":3735},{"type":397,"tag":480,"props":4273,"children":4274},{"class":482,"line":3277},[4275],{"type":397,"tag":480,"props":4276,"children":4277},{"style":487},[4278],{"type":403,"value":2012},{"type":397,"tag":411,"props":4280,"children":4281},{},[4282],{"type":403,"value":4283},"和 createElement 类似，createDocumentFragment 也需要仿制。",{"type":397,"tag":469,"props":4285,"children":4287},{"className":471,"code":4286,"language":473,"meta":391,"style":391},"function createDocumentFragment(ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createDocumentFragment()\n    }\n    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n    data = data || getExpandoData(ownerDocument)\n    var clone = data.frag.cloneNode(),\n        i = 0,\n        elems = getElements(),\n        l = elems.length\n    for(;i\u003Cl;i++){\n        // 返回的 documentFragment 包含了所有 shived 元素\n        clone.createElement(elems[i])\n    }\n    return clone\n  }\n",[4288],{"type":397,"tag":476,"props":4289,"children":4290},{"__ignoreMap":391},[4291,4323,4346,4369,4376,4384,4420,4464,4485,4510,4536,4588,4596,4634,4641,4653],{"type":397,"tag":480,"props":4292,"children":4293},{"class":482,"line":483},[4294,4298,4303,4307,4311,4315,4319],{"type":397,"tag":480,"props":4295,"children":4296},{"style":499},[4297],{"type":403,"value":502},{"type":397,"tag":480,"props":4299,"children":4300},{"style":674},[4301],{"type":403,"value":4302}," createDocumentFragment",{"type":397,"tag":480,"props":4304,"children":4305},{"style":487},[4306],{"type":403,"value":496},{"type":397,"tag":480,"props":4308,"children":4309},{"style":509},[4310],{"type":403,"value":1815},{"type":397,"tag":480,"props":4312,"children":4313},{"style":487},[4314],{"type":403,"value":517},{"type":397,"tag":480,"props":4316,"children":4317},{"style":509},[4318],{"type":403,"value":1835},{"type":397,"tag":480,"props":4320,"children":4321},{"style":487},[4322],{"type":403,"value":3600},{"type":397,"tag":480,"props":4324,"children":4325},{"class":482,"line":535},[4326,4330,4334,4338,4342],{"type":397,"tag":480,"props":4327,"children":4328},{"style":961},[4329],{"type":403,"value":1875},{"type":397,"tag":480,"props":4331,"children":4332},{"style":951},[4333],{"type":403,"value":496},{"type":397,"tag":480,"props":4335,"children":4336},{"style":493},[4337],{"type":403,"value":2366},{"type":397,"tag":480,"props":4339,"children":4340},{"style":951},[4341],{"type":403,"value":527},{"type":397,"tag":480,"props":4343,"children":4344},{"style":487},[4345],{"type":403,"value":1636},{"type":397,"tag":480,"props":4347,"children":4348},{"class":482,"line":545},[4349,4353,4357,4361,4365],{"type":397,"tag":480,"props":4350,"children":4351},{"style":961},[4352],{"type":403,"value":3631},{"type":397,"tag":480,"props":4354,"children":4355},{"style":493},[4356],{"type":403,"value":2576},{"type":397,"tag":480,"props":4358,"children":4359},{"style":487},[4360],{"type":403,"value":671},{"type":397,"tag":480,"props":4362,"children":4363},{"style":674},[4364],{"type":403,"value":948},{"type":397,"tag":480,"props":4366,"children":4367},{"style":951},[4368],{"type":403,"value":954},{"type":397,"tag":480,"props":4370,"children":4371},{"class":482,"line":919},[4372],{"type":397,"tag":480,"props":4373,"children":4374},{"style":487},[4375],{"type":403,"value":1688},{"type":397,"tag":480,"props":4377,"children":4378},{"class":482,"line":957},[4379],{"type":397,"tag":480,"props":4380,"children":4381},{"style":539},[4382],{"type":403,"value":4383},"    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n",{"type":397,"tag":480,"props":4385,"children":4386},{"class":482,"line":972},[4387,4392,4396,4400,4404,4408,4412,4416],{"type":397,"tag":480,"props":4388,"children":4389},{"style":493},[4390],{"type":403,"value":4391},"    data",{"type":397,"tag":480,"props":4393,"children":4394},{"style":558},[4395],{"type":403,"value":935},{"type":397,"tag":480,"props":4397,"children":4398},{"style":493},[4399],{"type":403,"value":1835},{"type":397,"tag":480,"props":4401,"children":4402},{"style":558},[4403],{"type":403,"value":899},{"type":397,"tag":480,"props":4405,"children":4406},{"style":674},[4407],{"type":403,"value":1806},{"type":397,"tag":480,"props":4409,"children":4410},{"style":951},[4411],{"type":403,"value":496},{"type":397,"tag":480,"props":4413,"children":4414},{"style":493},[4415],{"type":403,"value":1815},{"type":397,"tag":480,"props":4417,"children":4418},{"style":951},[4419],{"type":403,"value":699},{"type":397,"tag":480,"props":4421,"children":4422},{"class":482,"line":1015},[4423,4427,4432,4436,4440,4444,4448,4452,4456,4460],{"type":397,"tag":480,"props":4424,"children":4425},{"style":499},[4426],{"type":403,"value":925},{"type":397,"tag":480,"props":4428,"children":4429},{"style":493},[4430],{"type":403,"value":4431}," clone",{"type":397,"tag":480,"props":4433,"children":4434},{"style":558},[4435],{"type":403,"value":935},{"type":397,"tag":480,"props":4437,"children":4438},{"style":493},[4439],{"type":403,"value":1835},{"type":397,"tag":480,"props":4441,"children":4442},{"style":487},[4443],{"type":403,"value":671},{"type":397,"tag":480,"props":4445,"children":4446},{"style":493},[4447],{"type":403,"value":2634},{"type":397,"tag":480,"props":4449,"children":4450},{"style":487},[4451],{"type":403,"value":671},{"type":397,"tag":480,"props":4453,"children":4454},{"style":674},[4455],{"type":403,"value":991},{"type":397,"tag":480,"props":4457,"children":4458},{"style":951},[4459],{"type":403,"value":912},{"type":397,"tag":480,"props":4461,"children":4462},{"style":487},[4463],{"type":403,"value":2218},{"type":397,"tag":480,"props":4465,"children":4466},{"class":482,"line":1055},[4467,4472,4476,4481],{"type":397,"tag":480,"props":4468,"children":4469},{"style":493},[4470],{"type":403,"value":4471},"        i",{"type":397,"tag":480,"props":4473,"children":4474},{"style":558},[4475],{"type":403,"value":935},{"type":397,"tag":480,"props":4477,"children":4478},{"style":891},[4479],{"type":403,"value":4480}," 0",{"type":397,"tag":480,"props":4482,"children":4483},{"style":487},[4484],{"type":403,"value":2218},{"type":397,"tag":480,"props":4486,"children":4487},{"class":482,"line":1091},[4488,4493,4497,4502,4506],{"type":397,"tag":480,"props":4489,"children":4490},{"style":493},[4491],{"type":403,"value":4492},"        elems",{"type":397,"tag":480,"props":4494,"children":4495},{"style":558},[4496],{"type":403,"value":935},{"type":397,"tag":480,"props":4498,"children":4499},{"style":674},[4500],{"type":403,"value":4501}," getElements",{"type":397,"tag":480,"props":4503,"children":4504},{"style":951},[4505],{"type":403,"value":912},{"type":397,"tag":480,"props":4507,"children":4508},{"style":487},[4509],{"type":403,"value":2218},{"type":397,"tag":480,"props":4511,"children":4512},{"class":482,"line":1100},[4513,4518,4522,4527,4531],{"type":397,"tag":480,"props":4514,"children":4515},{"style":493},[4516],{"type":403,"value":4517},"        l",{"type":397,"tag":480,"props":4519,"children":4520},{"style":558},[4521],{"type":403,"value":935},{"type":397,"tag":480,"props":4523,"children":4524},{"style":493},[4525],{"type":403,"value":4526}," elems",{"type":397,"tag":480,"props":4528,"children":4529},{"style":487},[4530],{"type":403,"value":671},{"type":397,"tag":480,"props":4532,"children":4533},{"style":880},[4534],{"type":403,"value":4535},"length\n",{"type":397,"tag":480,"props":4537,"children":4538},{"class":482,"line":1369},[4539,4544,4548,4552,4557,4562,4567,4571,4575,4580,4584],{"type":397,"tag":480,"props":4540,"children":4541},{"style":961},[4542],{"type":403,"value":4543},"    for",{"type":397,"tag":480,"props":4545,"children":4546},{"style":951},[4547],{"type":403,"value":496},{"type":397,"tag":480,"props":4549,"children":4550},{"style":487},[4551],{"type":403,"value":490},{"type":397,"tag":480,"props":4553,"children":4554},{"style":493},[4555],{"type":403,"value":4556},"i",{"type":397,"tag":480,"props":4558,"children":4559},{"style":558},[4560],{"type":403,"value":4561},"\u003C",{"type":397,"tag":480,"props":4563,"children":4564},{"style":493},[4565],{"type":403,"value":4566},"l",{"type":397,"tag":480,"props":4568,"children":4569},{"style":487},[4570],{"type":403,"value":490},{"type":397,"tag":480,"props":4572,"children":4573},{"style":493},[4574],{"type":403,"value":4556},{"type":397,"tag":480,"props":4576,"children":4577},{"style":558},[4578],{"type":403,"value":4579},"++",{"type":397,"tag":480,"props":4581,"children":4582},{"style":951},[4583],{"type":403,"value":527},{"type":397,"tag":480,"props":4585,"children":4586},{"style":487},[4587],{"type":403,"value":1636},{"type":397,"tag":480,"props":4589,"children":4590},{"class":482,"line":1378},[4591],{"type":397,"tag":480,"props":4592,"children":4593},{"style":539},[4594],{"type":403,"value":4595},"        // 返回的 documentFragment 包含了所有 shived 元素\n",{"type":397,"tag":480,"props":4597,"children":4598},{"class":482,"line":1421},[4599,4604,4608,4612,4616,4621,4625,4629],{"type":397,"tag":480,"props":4600,"children":4601},{"style":493},[4602],{"type":403,"value":4603},"        clone",{"type":397,"tag":480,"props":4605,"children":4606},{"style":487},[4607],{"type":403,"value":671},{"type":397,"tag":480,"props":4609,"children":4610},{"style":674},[4611],{"type":403,"value":677},{"type":397,"tag":480,"props":4613,"children":4614},{"style":951},[4615],{"type":403,"value":496},{"type":397,"tag":480,"props":4617,"children":4618},{"style":493},[4619],{"type":403,"value":4620},"elems",{"type":397,"tag":480,"props":4622,"children":4623},{"style":951},[4624],{"type":403,"value":1849},{"type":397,"tag":480,"props":4626,"children":4627},{"style":493},[4628],{"type":403,"value":4556},{"type":397,"tag":480,"props":4630,"children":4631},{"style":951},[4632],{"type":403,"value":4633},"])\n",{"type":397,"tag":480,"props":4635,"children":4636},{"class":482,"line":1454},[4637],{"type":397,"tag":480,"props":4638,"children":4639},{"style":487},[4640],{"type":403,"value":1688},{"type":397,"tag":480,"props":4642,"children":4643},{"class":482,"line":1467},[4644,4648],{"type":397,"tag":480,"props":4645,"children":4646},{"style":961},[4647],{"type":403,"value":964},{"type":397,"tag":480,"props":4649,"children":4650},{"style":493},[4651],{"type":403,"value":4652}," clone\n",{"type":397,"tag":480,"props":4654,"children":4655},{"class":482,"line":1508},[4656],{"type":397,"tag":480,"props":4657,"children":4658},{"style":487},[4659],{"type":403,"value":2012},{"type":397,"tag":411,"props":4661,"children":4662},{},[4663],{"type":403,"value":4664},"可以发现，需要 shiv 的元素都存在了 getElements 这个方法中，我们来看看具体实现。",{"type":397,"tag":469,"props":4666,"children":4668},{"className":471,"code":4667,"language":473,"meta":391,"style":391},"// getElements 返回 html5.elments 的数组形式\n// 看来 getElements 也只是一个类似 getter 的存在\nfunction getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\n\n// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\nvar html5 = {\n    // options 是外部调用 html5shiv 的接口参数\n    'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video'\n}\n",[4669],{"type":397,"tag":476,"props":4670,"children":4671},{"__ignoreMap":391},[4672,4680,4688,4707,4741,4819,4827,4834,4842,4862,4870,4923],{"type":397,"tag":480,"props":4673,"children":4674},{"class":482,"line":483},[4675],{"type":397,"tag":480,"props":4676,"children":4677},{"style":539},[4678],{"type":403,"value":4679},"// getElements 返回 html5.elments 的数组形式\n",{"type":397,"tag":480,"props":4681,"children":4682},{"class":482,"line":535},[4683],{"type":397,"tag":480,"props":4684,"children":4685},{"style":539},[4686],{"type":403,"value":4687},"// 看来 getElements 也只是一个类似 getter 的存在\n",{"type":397,"tag":480,"props":4689,"children":4690},{"class":482,"line":545},[4691,4695,4699,4703],{"type":397,"tag":480,"props":4692,"children":4693},{"style":499},[4694],{"type":403,"value":502},{"type":397,"tag":480,"props":4696,"children":4697},{"style":674},[4698],{"type":403,"value":4501},{"type":397,"tag":480,"props":4700,"children":4701},{"style":487},[4702],{"type":403,"value":912},{"type":397,"tag":480,"props":4704,"children":4705},{"style":487},[4706],{"type":403,"value":532},{"type":397,"tag":480,"props":4708,"children":4709},{"class":482,"line":919},[4710,4714,4719,4723,4728,4732,4737],{"type":397,"tag":480,"props":4711,"children":4712},{"style":499},[4713],{"type":403,"value":925},{"type":397,"tag":480,"props":4715,"children":4716},{"style":493},[4717],{"type":403,"value":4718}," elements",{"type":397,"tag":480,"props":4720,"children":4721},{"style":558},[4722],{"type":403,"value":935},{"type":397,"tag":480,"props":4724,"children":4725},{"style":493},[4726],{"type":403,"value":4727}," html5",{"type":397,"tag":480,"props":4729,"children":4730},{"style":487},[4731],{"type":403,"value":671},{"type":397,"tag":480,"props":4733,"children":4734},{"style":493},[4735],{"type":403,"value":4736},"elements",{"type":397,"tag":480,"props":4738,"children":4739},{"style":487},[4740],{"type":403,"value":622},{"type":397,"tag":480,"props":4742,"children":4743},{"class":482,"line":957},[4744,4748,4753,4757,4761,4765,4770,4774,4778,4782,4786,4791,4795,4799,4803,4807,4811,4815],{"type":397,"tag":480,"props":4745,"children":4746},{"style":961},[4747],{"type":403,"value":964},{"type":397,"tag":480,"props":4749,"children":4750},{"style":558},[4751],{"type":403,"value":4752}," typeof",{"type":397,"tag":480,"props":4754,"children":4755},{"style":493},[4756],{"type":403,"value":4718},{"type":397,"tag":480,"props":4758,"children":4759},{"style":558},[4760],{"type":403,"value":888},{"type":397,"tag":480,"props":4762,"children":4763},{"style":574},[4764],{"type":403,"value":837},{"type":397,"tag":480,"props":4766,"children":4767},{"style":580},[4768],{"type":403,"value":4769},"string",{"type":397,"tag":480,"props":4771,"children":4772},{"style":574},[4773],{"type":403,"value":686},{"type":397,"tag":480,"props":4775,"children":4776},{"style":558},[4777],{"type":403,"value":593},{"type":397,"tag":480,"props":4779,"children":4780},{"style":493},[4781],{"type":403,"value":4718},{"type":397,"tag":480,"props":4783,"children":4784},{"style":487},[4785],{"type":403,"value":671},{"type":397,"tag":480,"props":4787,"children":4788},{"style":674},[4789],{"type":403,"value":4790},"split",{"type":397,"tag":480,"props":4792,"children":4793},{"style":951},[4794],{"type":403,"value":496},{"type":397,"tag":480,"props":4796,"children":4797},{"style":574},[4798],{"type":403,"value":686},{"type":397,"tag":480,"props":4800,"children":4801},{"style":574},[4802],{"type":403,"value":837},{"type":397,"tag":480,"props":4804,"children":4805},{"style":951},[4806],{"type":403,"value":1631},{"type":397,"tag":480,"props":4808,"children":4809},{"style":558},[4810],{"type":403,"value":602},{"type":397,"tag":480,"props":4812,"children":4813},{"style":493},[4814],{"type":403,"value":4718},{"type":397,"tag":480,"props":4816,"children":4817},{"style":487},[4818],{"type":403,"value":622},{"type":397,"tag":480,"props":4820,"children":4821},{"class":482,"line":972},[4822],{"type":397,"tag":480,"props":4823,"children":4824},{"style":487},[4825],{"type":403,"value":4826},"}\n",{"type":397,"tag":480,"props":4828,"children":4829},{"class":482,"line":1015},[4830],{"type":397,"tag":480,"props":4831,"children":4832},{"emptyLinePlaceholder":390},[4833],{"type":403,"value":1298},{"type":397,"tag":480,"props":4835,"children":4836},{"class":482,"line":1055},[4837],{"type":397,"tag":480,"props":4838,"children":4839},{"style":539},[4840],{"type":403,"value":4841},"// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\n",{"type":397,"tag":480,"props":4843,"children":4844},{"class":482,"line":1091},[4845,4849,4854,4858],{"type":397,"tag":480,"props":4846,"children":4847},{"style":499},[4848],{"type":403,"value":1730},{"type":397,"tag":480,"props":4850,"children":4851},{"style":493},[4852],{"type":403,"value":4853}," html5 ",{"type":397,"tag":480,"props":4855,"children":4856},{"style":558},[4857],{"type":403,"value":662},{"type":397,"tag":480,"props":4859,"children":4860},{"style":487},[4861],{"type":403,"value":532},{"type":397,"tag":480,"props":4863,"children":4864},{"class":482,"line":1100},[4865],{"type":397,"tag":480,"props":4866,"children":4867},{"style":539},[4868],{"type":403,"value":4869},"    // options 是外部调用 html5shiv 的接口参数\n",{"type":397,"tag":480,"props":4871,"children":4872},{"class":482,"line":1369},[4873,4878,4883,4887,4891,4896,4900,4905,4910,4914,4919],{"type":397,"tag":480,"props":4874,"children":4875},{"style":574},[4876],{"type":403,"value":4877},"    '",{"type":397,"tag":480,"props":4879,"children":4881},{"style":4880},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[4882],{"type":403,"value":4736},{"type":397,"tag":480,"props":4884,"children":4885},{"style":574},[4886],{"type":403,"value":686},{"type":397,"tag":480,"props":4888,"children":4889},{"style":487},[4890],{"type":403,"value":602},{"type":397,"tag":480,"props":4892,"children":4893},{"style":493},[4894],{"type":403,"value":4895}," options",{"type":397,"tag":480,"props":4897,"children":4898},{"style":487},[4899],{"type":403,"value":671},{"type":397,"tag":480,"props":4901,"children":4902},{"style":493},[4903],{"type":403,"value":4904},"elements ",{"type":397,"tag":480,"props":4906,"children":4907},{"style":558},[4908],{"type":403,"value":4909},"||",{"type":397,"tag":480,"props":4911,"children":4912},{"style":574},[4913],{"type":403,"value":837},{"type":397,"tag":480,"props":4915,"children":4916},{"style":580},[4917],{"type":403,"value":4918},"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",{"type":397,"tag":480,"props":4920,"children":4921},{"style":574},[4922],{"type":403,"value":847},{"type":397,"tag":480,"props":4924,"children":4925},{"class":482,"line":1378},[4926],{"type":397,"tag":480,"props":4927,"children":4928},{"style":487},[4929],{"type":403,"value":4826},{"type":397,"tag":458,"props":4931,"children":4933},{"id":4932},"私有方法",[4934],{"type":403,"value":4932},{"type":397,"tag":411,"props":4936,"children":4937},{},[4938],{"type":403,"value":4939},"接下来是几个私有方法。和 shiv 原理不相关，所以不重要。",{"type":397,"tag":469,"props":4941,"children":4943},{"className":471,"code":4942,"language":473,"meta":391,"style":391},"/**\n * Creates a style sheet with the given CSS text and adds it to the document.\n * 在文档头部添加样式标签\n */\nfunction addStyleSheet(ownerDocument, cssText) {\n    var p = ownerDocument.createElement('p'),\n        parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement\n    // ? 这个 'x' 应该是兼容性考虑\n    p.innerHTML = 'x\u003Cstyle>' + cssText + '\u003C/style>'\n    return parent.insertBefore(p.lastChild, parent.firstChild)\n}\n",[4944],{"type":397,"tag":476,"props":4945,"children":4946},{"__ignoreMap":391},[4947,4955,4963,4971,4979,5016,5068,5141,5149,5207,5266],{"type":397,"tag":480,"props":4948,"children":4949},{"class":482,"line":483},[4950],{"type":397,"tag":480,"props":4951,"children":4952},{"style":539},[4953],{"type":403,"value":4954},"/**\n",{"type":397,"tag":480,"props":4956,"children":4957},{"class":482,"line":535},[4958],{"type":397,"tag":480,"props":4959,"children":4960},{"style":539},[4961],{"type":403,"value":4962}," * Creates a style sheet with the given CSS text and adds it to the document.\n",{"type":397,"tag":480,"props":4964,"children":4965},{"class":482,"line":545},[4966],{"type":397,"tag":480,"props":4967,"children":4968},{"style":539},[4969],{"type":403,"value":4970}," * 在文档头部添加样式标签\n",{"type":397,"tag":480,"props":4972,"children":4973},{"class":482,"line":919},[4974],{"type":397,"tag":480,"props":4975,"children":4976},{"style":539},[4977],{"type":403,"value":4978}," */\n",{"type":397,"tag":480,"props":4980,"children":4981},{"class":482,"line":957},[4982,4986,4991,4995,4999,5003,5008,5012],{"type":397,"tag":480,"props":4983,"children":4984},{"style":499},[4985],{"type":403,"value":502},{"type":397,"tag":480,"props":4987,"children":4988},{"style":674},[4989],{"type":403,"value":4990}," addStyleSheet",{"type":397,"tag":480,"props":4992,"children":4993},{"style":487},[4994],{"type":403,"value":496},{"type":397,"tag":480,"props":4996,"children":4997},{"style":509},[4998],{"type":403,"value":1815},{"type":397,"tag":480,"props":5000,"children":5001},{"style":487},[5002],{"type":403,"value":517},{"type":397,"tag":480,"props":5004,"children":5005},{"style":509},[5006],{"type":403,"value":5007}," cssText",{"type":397,"tag":480,"props":5009,"children":5010},{"style":487},[5011],{"type":403,"value":527},{"type":397,"tag":480,"props":5013,"children":5014},{"style":487},[5015],{"type":403,"value":532},{"type":397,"tag":480,"props":5017,"children":5018},{"class":482,"line":972},[5019,5023,5028,5032,5036,5040,5044,5048,5052,5056,5060,5064],{"type":397,"tag":480,"props":5020,"children":5021},{"style":499},[5022],{"type":403,"value":925},{"type":397,"tag":480,"props":5024,"children":5025},{"style":493},[5026],{"type":403,"value":5027}," p",{"type":397,"tag":480,"props":5029,"children":5030},{"style":558},[5031],{"type":403,"value":935},{"type":397,"tag":480,"props":5033,"children":5034},{"style":493},[5035],{"type":403,"value":2576},{"type":397,"tag":480,"props":5037,"children":5038},{"style":487},[5039],{"type":403,"value":671},{"type":397,"tag":480,"props":5041,"children":5042},{"style":674},[5043],{"type":403,"value":677},{"type":397,"tag":480,"props":5045,"children":5046},{"style":951},[5047],{"type":403,"value":496},{"type":397,"tag":480,"props":5049,"children":5050},{"style":574},[5051],{"type":403,"value":686},{"type":397,"tag":480,"props":5053,"children":5054},{"style":580},[5055],{"type":403,"value":411},{"type":397,"tag":480,"props":5057,"children":5058},{"style":574},[5059],{"type":403,"value":686},{"type":397,"tag":480,"props":5061,"children":5062},{"style":951},[5063],{"type":403,"value":527},{"type":397,"tag":480,"props":5065,"children":5066},{"style":487},[5067],{"type":403,"value":2218},{"type":397,"tag":480,"props":5069,"children":5070},{"class":482,"line":1015},[5071,5076,5080,5084,5088,5093,5097,5101,5106,5110,5115,5120,5124,5128,5132,5136],{"type":397,"tag":480,"props":5072,"children":5073},{"style":493},[5074],{"type":403,"value":5075},"        parent",{"type":397,"tag":480,"props":5077,"children":5078},{"style":558},[5079],{"type":403,"value":935},{"type":397,"tag":480,"props":5081,"children":5082},{"style":493},[5083],{"type":403,"value":2576},{"type":397,"tag":480,"props":5085,"children":5086},{"style":487},[5087],{"type":403,"value":671},{"type":397,"tag":480,"props":5089,"children":5090},{"style":674},[5091],{"type":403,"value":5092},"getElementsByTagName",{"type":397,"tag":480,"props":5094,"children":5095},{"style":951},[5096],{"type":403,"value":496},{"type":397,"tag":480,"props":5098,"children":5099},{"style":574},[5100],{"type":403,"value":686},{"type":397,"tag":480,"props":5102,"children":5103},{"style":580},[5104],{"type":403,"value":5105},"head",{"type":397,"tag":480,"props":5107,"children":5108},{"style":574},[5109],{"type":403,"value":686},{"type":397,"tag":480,"props":5111,"children":5112},{"style":951},[5113],{"type":403,"value":5114},")[",{"type":397,"tag":480,"props":5116,"children":5117},{"style":891},[5118],{"type":403,"value":5119},"0",{"type":397,"tag":480,"props":5121,"children":5122},{"style":951},[5123],{"type":403,"value":1947},{"type":397,"tag":480,"props":5125,"children":5126},{"style":558},[5127],{"type":403,"value":4909},{"type":397,"tag":480,"props":5129,"children":5130},{"style":493},[5131],{"type":403,"value":2576},{"type":397,"tag":480,"props":5133,"children":5134},{"style":487},[5135],{"type":403,"value":671},{"type":397,"tag":480,"props":5137,"children":5138},{"style":493},[5139],{"type":403,"value":5140},"documentElement\n",{"type":397,"tag":480,"props":5142,"children":5143},{"class":482,"line":1055},[5144],{"type":397,"tag":480,"props":5145,"children":5146},{"style":539},[5147],{"type":403,"value":5148},"    // ? 这个 'x' 应该是兼容性考虑\n",{"type":397,"tag":480,"props":5150,"children":5151},{"class":482,"line":1091},[5152,5157,5161,5165,5169,5173,5178,5182,5186,5190,5194,5198,5203],{"type":397,"tag":480,"props":5153,"children":5154},{"style":493},[5155],{"type":403,"value":5156},"    p",{"type":397,"tag":480,"props":5158,"children":5159},{"style":487},[5160],{"type":403,"value":671},{"type":397,"tag":480,"props":5162,"children":5163},{"style":493},[5164],{"type":403,"value":1218},{"type":397,"tag":480,"props":5166,"children":5167},{"style":558},[5168],{"type":403,"value":935},{"type":397,"tag":480,"props":5170,"children":5171},{"style":574},[5172],{"type":403,"value":837},{"type":397,"tag":480,"props":5174,"children":5175},{"style":580},[5176],{"type":403,"value":5177},"x\u003Cstyle>",{"type":397,"tag":480,"props":5179,"children":5180},{"style":574},[5181],{"type":403,"value":686},{"type":397,"tag":480,"props":5183,"children":5184},{"style":558},[5185],{"type":403,"value":3197},{"type":397,"tag":480,"props":5187,"children":5188},{"style":493},[5189],{"type":403,"value":5007},{"type":397,"tag":480,"props":5191,"children":5192},{"style":558},[5193],{"type":403,"value":3197},{"type":397,"tag":480,"props":5195,"children":5196},{"style":574},[5197],{"type":403,"value":837},{"type":397,"tag":480,"props":5199,"children":5200},{"style":580},[5201],{"type":403,"value":5202},"\u003C/style>",{"type":397,"tag":480,"props":5204,"children":5205},{"style":574},[5206],{"type":403,"value":847},{"type":397,"tag":480,"props":5208,"children":5209},{"class":482,"line":1100},[5210,5214,5219,5223,5228,5232,5236,5240,5245,5249,5253,5257,5262],{"type":397,"tag":480,"props":5211,"children":5212},{"style":961},[5213],{"type":403,"value":964},{"type":397,"tag":480,"props":5215,"children":5216},{"style":493},[5217],{"type":403,"value":5218}," parent",{"type":397,"tag":480,"props":5220,"children":5221},{"style":487},[5222],{"type":403,"value":671},{"type":397,"tag":480,"props":5224,"children":5225},{"style":674},[5226],{"type":403,"value":5227},"insertBefore",{"type":397,"tag":480,"props":5229,"children":5230},{"style":951},[5231],{"type":403,"value":496},{"type":397,"tag":480,"props":5233,"children":5234},{"style":493},[5235],{"type":403,"value":411},{"type":397,"tag":480,"props":5237,"children":5238},{"style":487},[5239],{"type":403,"value":671},{"type":397,"tag":480,"props":5241,"children":5242},{"style":493},[5243],{"type":403,"value":5244},"lastChild",{"type":397,"tag":480,"props":5246,"children":5247},{"style":487},[5248],{"type":403,"value":517},{"type":397,"tag":480,"props":5250,"children":5251},{"style":493},[5252],{"type":403,"value":5218},{"type":397,"tag":480,"props":5254,"children":5255},{"style":487},[5256],{"type":403,"value":671},{"type":397,"tag":480,"props":5258,"children":5259},{"style":493},[5260],{"type":403,"value":5261},"firstChild",{"type":397,"tag":480,"props":5263,"children":5264},{"style":951},[5265],{"type":403,"value":699},{"type":397,"tag":480,"props":5267,"children":5268},{"class":482,"line":1369},[5269],{"type":397,"tag":480,"props":5270,"children":5271},{"style":487},[5272],{"type":403,"value":4826},{"type":397,"tag":411,"props":5274,"children":5275},{},[5276],{"type":403,"value":5277},"一对用来维护 html5.elements 的方法 getElements、addElements。相当于 getter/setter。因为 html5shiv 将 html5 这个对象挂载到了 window 对象上，向外暴露。所以可以轻易调用 addElements 维护 html.elements。",{"type":397,"tag":469,"props":5279,"children":5281},{"className":471,"code":5280,"language":473,"meta":391,"style":391},"function getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\nfunction addElements(newElements, ownerDocument) {\n    var elements = html5.elements\n    if(typeof elements != 'string'){\n        elements = elements.join(' ')\n    }\n    if(typeof newElements != 'string'){\n        newElements = newElements.join(' ')\n    }\n    html5.elements = elements +' '+ newElements\n\n    // 每次增加元素的最后，会进行一次 shiv\n    shivDocument(ownerDocument)\n}\n",[5282],{"type":397,"tag":476,"props":5283,"children":5284},{"__ignoreMap":391},[5285,5304,5335,5410,5417,5454,5482,5526,5566,5573,5617,5657,5664,5709,5716,5724,5744],{"type":397,"tag":480,"props":5286,"children":5287},{"class":482,"line":483},[5288,5292,5296,5300],{"type":397,"tag":480,"props":5289,"children":5290},{"style":499},[5291],{"type":403,"value":502},{"type":397,"tag":480,"props":5293,"children":5294},{"style":674},[5295],{"type":403,"value":4501},{"type":397,"tag":480,"props":5297,"children":5298},{"style":487},[5299],{"type":403,"value":912},{"type":397,"tag":480,"props":5301,"children":5302},{"style":487},[5303],{"type":403,"value":532},{"type":397,"tag":480,"props":5305,"children":5306},{"class":482,"line":535},[5307,5311,5315,5319,5323,5327,5331],{"type":397,"tag":480,"props":5308,"children":5309},{"style":499},[5310],{"type":403,"value":925},{"type":397,"tag":480,"props":5312,"children":5313},{"style":493},[5314],{"type":403,"value":4718},{"type":397,"tag":480,"props":5316,"children":5317},{"style":558},[5318],{"type":403,"value":935},{"type":397,"tag":480,"props":5320,"children":5321},{"style":493},[5322],{"type":403,"value":4727},{"type":397,"tag":480,"props":5324,"children":5325},{"style":487},[5326],{"type":403,"value":671},{"type":397,"tag":480,"props":5328,"children":5329},{"style":493},[5330],{"type":403,"value":4736},{"type":397,"tag":480,"props":5332,"children":5333},{"style":487},[5334],{"type":403,"value":622},{"type":397,"tag":480,"props":5336,"children":5337},{"class":482,"line":545},[5338,5342,5346,5350,5354,5358,5362,5366,5370,5374,5378,5382,5386,5390,5394,5398,5402,5406],{"type":397,"tag":480,"props":5339,"children":5340},{"style":961},[5341],{"type":403,"value":964},{"type":397,"tag":480,"props":5343,"children":5344},{"style":558},[5345],{"type":403,"value":4752},{"type":397,"tag":480,"props":5347,"children":5348},{"style":493},[5349],{"type":403,"value":4718},{"type":397,"tag":480,"props":5351,"children":5352},{"style":558},[5353],{"type":403,"value":888},{"type":397,"tag":480,"props":5355,"children":5356},{"style":574},[5357],{"type":403,"value":837},{"type":397,"tag":480,"props":5359,"children":5360},{"style":580},[5361],{"type":403,"value":4769},{"type":397,"tag":480,"props":5363,"children":5364},{"style":574},[5365],{"type":403,"value":686},{"type":397,"tag":480,"props":5367,"children":5368},{"style":558},[5369],{"type":403,"value":593},{"type":397,"tag":480,"props":5371,"children":5372},{"style":493},[5373],{"type":403,"value":4718},{"type":397,"tag":480,"props":5375,"children":5376},{"style":487},[5377],{"type":403,"value":671},{"type":397,"tag":480,"props":5379,"children":5380},{"style":674},[5381],{"type":403,"value":4790},{"type":397,"tag":480,"props":5383,"children":5384},{"style":951},[5385],{"type":403,"value":496},{"type":397,"tag":480,"props":5387,"children":5388},{"style":574},[5389],{"type":403,"value":686},{"type":397,"tag":480,"props":5391,"children":5392},{"style":574},[5393],{"type":403,"value":837},{"type":397,"tag":480,"props":5395,"children":5396},{"style":951},[5397],{"type":403,"value":1631},{"type":397,"tag":480,"props":5399,"children":5400},{"style":558},[5401],{"type":403,"value":602},{"type":397,"tag":480,"props":5403,"children":5404},{"style":493},[5405],{"type":403,"value":4718},{"type":397,"tag":480,"props":5407,"children":5408},{"style":487},[5409],{"type":403,"value":622},{"type":397,"tag":480,"props":5411,"children":5412},{"class":482,"line":919},[5413],{"type":397,"tag":480,"props":5414,"children":5415},{"style":487},[5416],{"type":403,"value":4826},{"type":397,"tag":480,"props":5418,"children":5419},{"class":482,"line":957},[5420,5424,5429,5433,5438,5442,5446,5450],{"type":397,"tag":480,"props":5421,"children":5422},{"style":499},[5423],{"type":403,"value":502},{"type":397,"tag":480,"props":5425,"children":5426},{"style":674},[5427],{"type":403,"value":5428}," addElements",{"type":397,"tag":480,"props":5430,"children":5431},{"style":487},[5432],{"type":403,"value":496},{"type":397,"tag":480,"props":5434,"children":5435},{"style":509},[5436],{"type":403,"value":5437},"newElements",{"type":397,"tag":480,"props":5439,"children":5440},{"style":487},[5441],{"type":403,"value":517},{"type":397,"tag":480,"props":5443,"children":5444},{"style":509},[5445],{"type":403,"value":2576},{"type":397,"tag":480,"props":5447,"children":5448},{"style":487},[5449],{"type":403,"value":527},{"type":397,"tag":480,"props":5451,"children":5452},{"style":487},[5453],{"type":403,"value":532},{"type":397,"tag":480,"props":5455,"children":5456},{"class":482,"line":972},[5457,5461,5465,5469,5473,5477],{"type":397,"tag":480,"props":5458,"children":5459},{"style":499},[5460],{"type":403,"value":925},{"type":397,"tag":480,"props":5462,"children":5463},{"style":493},[5464],{"type":403,"value":4718},{"type":397,"tag":480,"props":5466,"children":5467},{"style":558},[5468],{"type":403,"value":935},{"type":397,"tag":480,"props":5470,"children":5471},{"style":493},[5472],{"type":403,"value":4727},{"type":397,"tag":480,"props":5474,"children":5475},{"style":487},[5476],{"type":403,"value":671},{"type":397,"tag":480,"props":5478,"children":5479},{"style":493},[5480],{"type":403,"value":5481},"elements\n",{"type":397,"tag":480,"props":5483,"children":5484},{"class":482,"line":1015},[5485,5489,5493,5497,5501,5506,5510,5514,5518,5522],{"type":397,"tag":480,"props":5486,"children":5487},{"style":961},[5488],{"type":403,"value":1875},{"type":397,"tag":480,"props":5490,"children":5491},{"style":951},[5492],{"type":403,"value":496},{"type":397,"tag":480,"props":5494,"children":5495},{"style":558},[5496],{"type":403,"value":561},{"type":397,"tag":480,"props":5498,"children":5499},{"style":493},[5500],{"type":403,"value":4718},{"type":397,"tag":480,"props":5502,"children":5503},{"style":558},[5504],{"type":403,"value":5505}," !=",{"type":397,"tag":480,"props":5507,"children":5508},{"style":574},[5509],{"type":403,"value":837},{"type":397,"tag":480,"props":5511,"children":5512},{"style":580},[5513],{"type":403,"value":4769},{"type":397,"tag":480,"props":5515,"children":5516},{"style":574},[5517],{"type":403,"value":686},{"type":397,"tag":480,"props":5519,"children":5520},{"style":951},[5521],{"type":403,"value":527},{"type":397,"tag":480,"props":5523,"children":5524},{"style":487},[5525],{"type":403,"value":1636},{"type":397,"tag":480,"props":5527,"children":5528},{"class":482,"line":1055},[5529,5534,5538,5542,5546,5550,5554,5558,5562],{"type":397,"tag":480,"props":5530,"children":5531},{"style":493},[5532],{"type":403,"value":5533},"        elements",{"type":397,"tag":480,"props":5535,"children":5536},{"style":558},[5537],{"type":403,"value":935},{"type":397,"tag":480,"props":5539,"children":5540},{"style":493},[5541],{"type":403,"value":4718},{"type":397,"tag":480,"props":5543,"children":5544},{"style":487},[5545],{"type":403,"value":671},{"type":397,"tag":480,"props":5547,"children":5548},{"style":674},[5549],{"type":403,"value":3029},{"type":397,"tag":480,"props":5551,"children":5552},{"style":951},[5553],{"type":403,"value":496},{"type":397,"tag":480,"props":5555,"children":5556},{"style":574},[5557],{"type":403,"value":686},{"type":397,"tag":480,"props":5559,"children":5560},{"style":574},[5561],{"type":403,"value":837},{"type":397,"tag":480,"props":5563,"children":5564},{"style":951},[5565],{"type":403,"value":699},{"type":397,"tag":480,"props":5567,"children":5568},{"class":482,"line":1091},[5569],{"type":397,"tag":480,"props":5570,"children":5571},{"style":487},[5572],{"type":403,"value":1688},{"type":397,"tag":480,"props":5574,"children":5575},{"class":482,"line":1100},[5576,5580,5584,5588,5593,5597,5601,5605,5609,5613],{"type":397,"tag":480,"props":5577,"children":5578},{"style":961},[5579],{"type":403,"value":1875},{"type":397,"tag":480,"props":5581,"children":5582},{"style":951},[5583],{"type":403,"value":496},{"type":397,"tag":480,"props":5585,"children":5586},{"style":558},[5587],{"type":403,"value":561},{"type":397,"tag":480,"props":5589,"children":5590},{"style":493},[5591],{"type":403,"value":5592}," newElements",{"type":397,"tag":480,"props":5594,"children":5595},{"style":558},[5596],{"type":403,"value":5505},{"type":397,"tag":480,"props":5598,"children":5599},{"style":574},[5600],{"type":403,"value":837},{"type":397,"tag":480,"props":5602,"children":5603},{"style":580},[5604],{"type":403,"value":4769},{"type":397,"tag":480,"props":5606,"children":5607},{"style":574},[5608],{"type":403,"value":686},{"type":397,"tag":480,"props":5610,"children":5611},{"style":951},[5612],{"type":403,"value":527},{"type":397,"tag":480,"props":5614,"children":5615},{"style":487},[5616],{"type":403,"value":1636},{"type":397,"tag":480,"props":5618,"children":5619},{"class":482,"line":1369},[5620,5625,5629,5633,5637,5641,5645,5649,5653],{"type":397,"tag":480,"props":5621,"children":5622},{"style":493},[5623],{"type":403,"value":5624},"        newElements",{"type":397,"tag":480,"props":5626,"children":5627},{"style":558},[5628],{"type":403,"value":935},{"type":397,"tag":480,"props":5630,"children":5631},{"style":493},[5632],{"type":403,"value":5592},{"type":397,"tag":480,"props":5634,"children":5635},{"style":487},[5636],{"type":403,"value":671},{"type":397,"tag":480,"props":5638,"children":5639},{"style":674},[5640],{"type":403,"value":3029},{"type":397,"tag":480,"props":5642,"children":5643},{"style":951},[5644],{"type":403,"value":496},{"type":397,"tag":480,"props":5646,"children":5647},{"style":574},[5648],{"type":403,"value":686},{"type":397,"tag":480,"props":5650,"children":5651},{"style":574},[5652],{"type":403,"value":837},{"type":397,"tag":480,"props":5654,"children":5655},{"style":951},[5656],{"type":403,"value":699},{"type":397,"tag":480,"props":5658,"children":5659},{"class":482,"line":1378},[5660],{"type":397,"tag":480,"props":5661,"children":5662},{"style":487},[5663],{"type":403,"value":1688},{"type":397,"tag":480,"props":5665,"children":5666},{"class":482,"line":1421},[5667,5672,5676,5680,5684,5688,5692,5696,5700,5704],{"type":397,"tag":480,"props":5668,"children":5669},{"style":493},[5670],{"type":403,"value":5671},"    html5",{"type":397,"tag":480,"props":5673,"children":5674},{"style":487},[5675],{"type":403,"value":671},{"type":397,"tag":480,"props":5677,"children":5678},{"style":493},[5679],{"type":403,"value":4736},{"type":397,"tag":480,"props":5681,"children":5682},{"style":558},[5683],{"type":403,"value":935},{"type":397,"tag":480,"props":5685,"children":5686},{"style":493},[5687],{"type":403,"value":4718},{"type":397,"tag":480,"props":5689,"children":5690},{"style":558},[5691],{"type":403,"value":3197},{"type":397,"tag":480,"props":5693,"children":5694},{"style":574},[5695],{"type":403,"value":686},{"type":397,"tag":480,"props":5697,"children":5698},{"style":574},[5699],{"type":403,"value":837},{"type":397,"tag":480,"props":5701,"children":5702},{"style":558},[5703],{"type":403,"value":3072},{"type":397,"tag":480,"props":5705,"children":5706},{"style":493},[5707],{"type":403,"value":5708}," newElements\n",{"type":397,"tag":480,"props":5710,"children":5711},{"class":482,"line":1454},[5712],{"type":397,"tag":480,"props":5713,"children":5714},{"emptyLinePlaceholder":390},[5715],{"type":403,"value":1298},{"type":397,"tag":480,"props":5717,"children":5718},{"class":482,"line":1467},[5719],{"type":397,"tag":480,"props":5720,"children":5721},{"style":539},[5722],{"type":403,"value":5723},"    // 每次增加元素的最后，会进行一次 shiv\n",{"type":397,"tag":480,"props":5725,"children":5726},{"class":482,"line":1508},[5727,5732,5736,5740],{"type":397,"tag":480,"props":5728,"children":5729},{"style":674},[5730],{"type":403,"value":5731},"    shivDocument",{"type":397,"tag":480,"props":5733,"children":5734},{"style":951},[5735],{"type":403,"value":496},{"type":397,"tag":480,"props":5737,"children":5738},{"style":493},[5739],{"type":403,"value":1815},{"type":397,"tag":480,"props":5741,"children":5742},{"style":951},[5743],{"type":403,"value":699},{"type":397,"tag":480,"props":5745,"children":5746},{"class":482,"line":1548},[5747],{"type":397,"tag":480,"props":5748,"children":5749},{"style":487},[5750],{"type":403,"value":4826},{"type":397,"tag":405,"props":5752,"children":5754},{"id":5753},"阅读更多",[5755],{"type":403,"value":5753},{"type":397,"tag":411,"props":5757,"children":5758},{},[5759],{"type":403,"value":5760},"害，看 html5shiv 并不能带来什么具体的帮助。看完之后，只感觉上一代前端真是太辛苦了，为 IE 操碎了心。现代前端技术随着打包工具的发展开阔了不止一点，兼容性这个曾经的代码重心已经悄然落下帷幕。如果现在我去哪家公司面试，还会被大面积问到兼容性问题，那估计我会当场“quit”吧。",{"type":397,"tag":5762,"props":5763,"children":5766},"section",{"className":5764,"dataFootnotes":391},[5765],"footnotes",[5767,5774],{"type":397,"tag":405,"props":5768,"children":5771},{"className":5769,"id":425},[5770],"sr-only",[5772],{"type":403,"value":5773},"Footnotes",{"type":397,"tag":5775,"props":5776,"children":5777},"ol",{},[5778,5801],{"type":397,"tag":442,"props":5779,"children":5781},{"id":5780},"user-content-fn-html5shiv",[5782,5790,5792],{"type":397,"tag":421,"props":5783,"children":5787},{"href":5784,"rel":5785},"https://github.com/aFarkas/html5shiv",[5786],"nofollow",[5788],{"type":403,"value":5789},"html5shiv",{"type":403,"value":5791}," ",{"type":397,"tag":421,"props":5793,"children":5798},{"href":5794,"ariaLabel":5795,"className":5796,"dataFootnoteBackref":391},"#user-content-fnref-html5shiv","Back to reference 1",[5797],"data-footnote-backref",[5799],{"type":403,"value":5800},"↩",{"type":397,"tag":442,"props":5802,"children":5804},{"id":5803},"user-content-fn-hidden",[5805,5812,5813],{"type":397,"tag":421,"props":5806,"children":5809},{"href":5807,"rel":5808},"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/hidden",[5786],[5810],{"type":403,"value":5811},"HTMLElement.hidden@MDN",{"type":403,"value":5791},{"type":397,"tag":421,"props":5814,"children":5818},{"href":5815,"ariaLabel":5816,"className":5817,"dataFootnoteBackref":391},"#user-content-fnref-hidden","Back to reference 2",[5797],[5819],{"type":403,"value":5800},{"type":397,"tag":5821,"props":5822,"children":5823},"style",{},[5824],{"type":403,"value":5825},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":391,"searchDepth":535,"depth":535,"links":5827},[5828,5829,5835,5836],{"id":407,"depth":535,"text":407},{"id":454,"depth":535,"text":454,"children":5830},[5831,5832,5833,5834],{"id":460,"depth":545,"text":460},{"id":630,"depth":545,"text":630},{"id":1703,"depth":545,"text":1703},{"id":4932,"depth":545,"text":4932},{"id":5753,"depth":535,"text":5753},{"id":425,"depth":535,"text":5773},"markdown","content:8.source-code:_module:html5shiv.md","content","8.source-code/_module/html5shiv.md","md",[5843,5846],{"_path":5844,"title":5845,"description":391},"/source-code/_module/fast-deep-equal","判断两个变量相等",{"_path":5847,"title":5848,"description":5849},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",1710257741645]