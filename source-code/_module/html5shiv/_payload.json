[{"data":1,"prerenderedAt":5849},["ShallowReactive",2],{"navigation":3,"/source-code/_module/html5shiv":384,"/source-code/_module/html5shiv-surround":5841},[4,35,86,105,132,138,144,150,378],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":205,"_path":206},"正则表达式","/gists/eegex",{"title":208,"_path":209},"Emoji","/gists/emoji",{"title":211,"_path":212},"工程","/gists/engineering",{"title":214,"_path":215},"熵","/gists/entropy",{"title":217,"_path":218},"Environment","/gists/environment",{"title":220,"_path":221},"Erlang","/gists/erlang",{"title":223,"_path":224},"逃离塔克夫","/gists/escape-from-tarkov",{"title":226,"_path":227},"ESNext (ES6-ES11)","/gists/esnext",{"title":229,"_path":230},"Eval！","/gists/eval",{"title":232,"_path":233},"Flutter","/gists/flutter",{"title":235,"_path":236},"字体","/gists/font",{"title":238,"_path":239},"JS 函数式编程","/gists/functional",{"title":241,"_path":242},"游戏化","/gists/gamification",{"title":244,"_path":245},"Google C++ Standard","/gists/google-cpp-standard",{"title":247,"_path":248},"双向链接完全体","/gists/graph",{"title":250,"_path":251},"Hardwares","/gists/hardwares",{"title":253,"_path":254},"哈希冲突","/gists/hash-collision",{"title":256,"_path":257},"信息设计","/gists/information-design",{"title":259,"_path":260},"InstantPage","/gists/instant.page",{"title":262,"_path":263},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":265,"_path":266},"KVStore","/gists/key-value-db",{"title":268,"_path":269},"Kubernetes","/gists/kubernetes",{"title":271,"_path":272},"Makefile","/gists/makefile",{"title":274,"_path":275},"Markdown Inline Style","/gists/markdown-nice",{"title":277,"_path":278},"减小页面快照体积","/gists/minify-html",{"title":280,"_path":281},"mklink","/gists/mklink",{"title":283,"_path":284},"Mock","/gists/mock",{"title":286,"_path":287},"多人协作系统","/gists/multiplayer",{"title":289,"_path":290},"多端应用","/gists/multy-end-app",{"title":292,"_path":293},"神经科学","/gists/neuroscience",{"title":295,"_path":296},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":298,"_path":299},"PInvoke","/gists/pinvoke",{"title":301,"_path":302},"像素","/gists/pixel",{"title":304,"_path":305},"PowerShell","/gists/powershell",{"title":307,"_path":308},"量子","/gists/quantum",{"title":310,"_path":311},"保持好奇心","/gists/questions",{"title":313,"_path":314},"React Native","/gists/react-native",{"title":316,"_path":317},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":319,"_path":320},"SEO","/gists/seo",{"title":322,"_path":323},"Shader","/gists/shader",{"title":325,"_path":326},"Shape Up","/gists/shape-up",{"title":328,"_path":329},"睡觉","/gists/sleep",{"title":331,"_path":332},"记录奇怪的问题","/gists/solved",{"title":334,"_path":335},"States","/gists/states",{"title":337,"_path":338},"Storage","/gists/storage",{"title":340,"_path":341},"音视频流处理","/gists/stream-cli",{"title":343,"_path":344},"Symbol","/gists/symbol",{"title":346,"_path":347},"系统论","/gists/systems-theory",{"title":349,"_path":350},"任务切片","/gists/task-slice",{"title":352,"_path":353},"技术偏好","/gists/tech-dudge",{"title":355,"_path":356},"Untitled","/gists/untitled",{"title":358,"_path":359},"可变字体","/gists/variable-font",{"title":361,"_path":362},"视觉错觉","/gists/visual-illusion",{"title":364,"_path":365},"SS(SSR)","/gists/vpn",{"title":367,"_path":368},"VS Code 插件开发","/gists/vscode-plugin",{"title":370,"_path":371},"Web Components","/gists/web-components",{"title":373,"_path":374},"Windows","/gists/windows",{"title":376,"_path":377},"查缺补漏","/gists/wrong",{"title":379,"_path":380,"children":381},"我 / About","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"_path":385,"_dir":386,"_draft":387,"_partial":388,"_locale":389,"title":390,"description":389,"body":391,"_type":5835,"_id":5836,"_source":5837,"_file":5838,"_stem":5839,"_extension":5840},"/source-code/_module/html5shiv","_module",false,true,"","🛠 低版本浏览器兼容HTML5标签原理",{"type":392,"children":393,"toc":5824},"root",[394,402,408,430,435,450,455,461,466,621,626,631,636,641,738,756,761,1109,1114,1699,1704,1709,1714,2011,2016,2435,2440,3314,3319,3425,3430,3547,3552,4277,4282,4658,4663,4928,4933,4938,5271,5276,5749,5754,5759,5818],{"type":395,"tag":396,"props":397,"children":399},"element","h1",{"id":398},"低版本浏览器兼容html5标签原理",[400],{"type":401,"value":390},"text",{"type":395,"tag":403,"props":404,"children":406},"h2",{"id":405},"长话短说",[407],{"type":401,"value":405},{"type":395,"tag":409,"props":410,"children":411},"p",{},[412,414,428],{"type":401,"value":413},"最近在复习 HTML 相关内容呢，不知不觉想起以前在实习公司用过的 html5shiv 这个玩意儿。html5shiv 能使 IE6/7/8 等浏览器支持 HTML5 的新标签",{"type":395,"tag":415,"props":416,"children":417},"sup",{},[418],{"type":395,"tag":419,"props":420,"children":425},"a",{"href":421,"ariaDescribedBy":422,"dataFootnoteRef":389,"id":424},"#user-content-fn-html5shiv",[423],"footnote-label","user-content-fnref-html5shiv",[426],{"type":401,"value":427},"1",{"type":401,"value":429},"。这里我初略扫了一眼它的原理。",{"type":395,"tag":409,"props":431,"children":432},{},[433],{"type":401,"value":434},"它主要做了以下两件事情：",{"type":395,"tag":436,"props":437,"children":438},"ul",{},[439,445],{"type":395,"tag":440,"props":441,"children":442},"li",{},[443],{"type":401,"value":444},"用高阶函数增强浏览器原生的 createElement 等 API。需要创建新标签时，使用已缓存的元素克隆并返还一个新元素，或回退至调用原生 API 创建 H5 新元素。这个增强是基于 document.createElement 能创建非标准元素这个特性实现的。",{"type":395,"tag":440,"props":446,"children":447},{},[448],{"type":401,"value":449},"给新标签增加相应的默认样式。",{"type":395,"tag":403,"props":451,"children":453},{"id":452},"具体实现",[454],{"type":401,"value":452},{"type":395,"tag":456,"props":457,"children":459},"h3",{"id":458},"代码结构",[460],{"type":401,"value":458},{"type":395,"tag":409,"props":462,"children":463},{},[464],{"type":401,"value":465},"整个代码被包裹在 IIFE 中。像 jQuery 一样，把 window 对象传了进来。",{"type":395,"tag":467,"props":468,"children":472},"pre",{"className":469,"code":470,"language":471,"meta":389,"style":389},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",";(function(window, document) {\n    // rest of code\n}(typeof window !== \"undefined\" ? window : this, document));\n","js",[473],{"type":395,"tag":474,"props":475,"children":476},"code",{"__ignoreMap":389},[477,531,541],{"type":395,"tag":478,"props":479,"children":482},"span",{"class":480,"line":481},"line",1,[483,489,495,501,505,511,516,521,526],{"type":395,"tag":478,"props":484,"children":486},{"style":485},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[487],{"type":401,"value":488},";",{"type":395,"tag":478,"props":490,"children":492},{"style":491},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[493],{"type":401,"value":494},"(",{"type":395,"tag":478,"props":496,"children":498},{"style":497},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[499],{"type":401,"value":500},"function",{"type":395,"tag":478,"props":502,"children":503},{"style":485},[504],{"type":401,"value":494},{"type":395,"tag":478,"props":506,"children":508},{"style":507},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[509],{"type":401,"value":510},"window",{"type":395,"tag":478,"props":512,"children":513},{"style":485},[514],{"type":401,"value":515},",",{"type":395,"tag":478,"props":517,"children":518},{"style":507},[519],{"type":401,"value":520}," document",{"type":395,"tag":478,"props":522,"children":523},{"style":485},[524],{"type":401,"value":525},")",{"type":395,"tag":478,"props":527,"children":528},{"style":485},[529],{"type":401,"value":530}," {\n",{"type":395,"tag":478,"props":532,"children":534},{"class":480,"line":533},2,[535],{"type":395,"tag":478,"props":536,"children":538},{"style":537},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[539],{"type":401,"value":540},"    // rest of code\n",{"type":395,"tag":478,"props":542,"children":544},{"class":480,"line":543},3,[545,550,554,560,565,570,576,582,587,592,596,601,607,611,616],{"type":395,"tag":478,"props":546,"children":547},{"style":485},[548],{"type":401,"value":549},"}",{"type":395,"tag":478,"props":551,"children":552},{"style":491},[553],{"type":401,"value":494},{"type":395,"tag":478,"props":555,"children":557},{"style":556},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[558],{"type":401,"value":559},"typeof",{"type":395,"tag":478,"props":561,"children":562},{"style":491},[563],{"type":401,"value":564}," window ",{"type":395,"tag":478,"props":566,"children":567},{"style":556},[568],{"type":401,"value":569},"!==",{"type":395,"tag":478,"props":571,"children":573},{"style":572},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[574],{"type":401,"value":575}," \"",{"type":395,"tag":478,"props":577,"children":579},{"style":578},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[580],{"type":401,"value":581},"undefined",{"type":395,"tag":478,"props":583,"children":584},{"style":572},[585],{"type":401,"value":586},"\"",{"type":395,"tag":478,"props":588,"children":589},{"style":556},[590],{"type":401,"value":591}," ?",{"type":395,"tag":478,"props":593,"children":594},{"style":491},[595],{"type":401,"value":564},{"type":395,"tag":478,"props":597,"children":598},{"style":556},[599],{"type":401,"value":600},":",{"type":395,"tag":478,"props":602,"children":604},{"style":603},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[605],{"type":401,"value":606}," this",{"type":395,"tag":478,"props":608,"children":609},{"style":485},[610],{"type":401,"value":515},{"type":395,"tag":478,"props":612,"children":613},{"style":491},[614],{"type":401,"value":615}," document))",{"type":395,"tag":478,"props":617,"children":618},{"style":485},[619],{"type":401,"value":620},";\n",{"type":395,"tag":409,"props":622,"children":623},{},[624],{"type":401,"value":625},"一个很经典的模块模式，没什么好拓展的，我们继续...",{"type":395,"tag":456,"props":627,"children":629},{"id":628},"兼容性检测",[630],{"type":401,"value":628},{"type":395,"tag":409,"props":632,"children":633},{},[634],{"type":401,"value":635},"以下代码检测当前浏览器对 HTML5 的支持程度。",{"type":395,"tag":409,"props":637,"children":638},{},[639],{"type":401,"value":640},"通过检测元素对 hidden 属性的支持程度，检测浏览器对 HTML5 样式支持的水平。",{"type":395,"tag":467,"props":642,"children":644},{"className":469,"code":643,"language":471,"meta":389,"style":389},"a = document.createElement('a')\nsupportsHtml5Styles = ('hidden' in a)\n",[645],{"type":395,"tag":474,"props":646,"children":647},{"__ignoreMap":389},[648,698],{"type":395,"tag":478,"props":649,"children":650},{"class":480,"line":481},[651,656,661,665,670,676,680,685,689,693],{"type":395,"tag":478,"props":652,"children":653},{"style":491},[654],{"type":401,"value":655},"a ",{"type":395,"tag":478,"props":657,"children":658},{"style":556},[659],{"type":401,"value":660},"=",{"type":395,"tag":478,"props":662,"children":663},{"style":491},[664],{"type":401,"value":520},{"type":395,"tag":478,"props":666,"children":667},{"style":485},[668],{"type":401,"value":669},".",{"type":395,"tag":478,"props":671,"children":673},{"style":672},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[674],{"type":401,"value":675},"createElement",{"type":395,"tag":478,"props":677,"children":678},{"style":491},[679],{"type":401,"value":494},{"type":395,"tag":478,"props":681,"children":682},{"style":572},[683],{"type":401,"value":684},"'",{"type":395,"tag":478,"props":686,"children":687},{"style":578},[688],{"type":401,"value":419},{"type":395,"tag":478,"props":690,"children":691},{"style":572},[692],{"type":401,"value":684},{"type":395,"tag":478,"props":694,"children":695},{"style":491},[696],{"type":401,"value":697},")\n",{"type":395,"tag":478,"props":699,"children":700},{"class":480,"line":533},[701,706,710,715,719,724,728,733],{"type":395,"tag":478,"props":702,"children":703},{"style":491},[704],{"type":401,"value":705},"supportsHtml5Styles ",{"type":395,"tag":478,"props":707,"children":708},{"style":556},[709],{"type":401,"value":660},{"type":395,"tag":478,"props":711,"children":712},{"style":491},[713],{"type":401,"value":714}," (",{"type":395,"tag":478,"props":716,"children":717},{"style":572},[718],{"type":401,"value":684},{"type":395,"tag":478,"props":720,"children":721},{"style":578},[722],{"type":401,"value":723},"hidden",{"type":395,"tag":478,"props":725,"children":726},{"style":572},[727],{"type":401,"value":684},{"type":395,"tag":478,"props":729,"children":730},{"style":556},[731],{"type":401,"value":732}," in",{"type":395,"tag":478,"props":734,"children":735},{"style":491},[736],{"type":401,"value":737}," a)\n",{"type":395,"tag":409,"props":739,"children":740},{},[741,743,754],{"type":401,"value":742},"以前没听过 HTMLElement.hidden，项目里的隐藏元素都是直接上 CSS 做的。不过据 MDN 表示，除了隐藏元素之外，hidden 属性还能用于创造离屏 Canvas",{"type":395,"tag":415,"props":744,"children":745},{},[746],{"type":395,"tag":419,"props":747,"children":751},{"href":748,"ariaDescribedBy":749,"dataFootnoteRef":389,"id":750},"#user-content-fn-hidden",[423],"user-content-fnref-hidden",[752],{"type":401,"value":753},"2",{"type":401,"value":755},"。",{"type":395,"tag":409,"props":757,"children":758},{},[759],{"type":401,"value":760},"这段代码用于测试浏览器是否支持未知元素的创建。",{"type":395,"tag":467,"props":762,"children":764},{"className":469,"code":763,"language":471,"meta":389,"style":389},"a = document.createElement('a')\na.innerHTML = '\u003Cxyz>\u003C/xyz>'\nsupportsUnknownElements = a.childNodes.length == 1 || (function() {\n    var frag = document.createDocumentFragment()\n    return (\n    typeof frag.cloneNode == 'undefined' ||\n    typeof frag.createDocumentFragment == 'undefined' ||\n    typeof frag.createElement == 'undefined'\n    )\n}())\n",[765],{"type":395,"tag":474,"props":766,"children":767},{"__ignoreMap":389},[768,811,846,915,953,968,1011,1051,1087,1096],{"type":395,"tag":478,"props":769,"children":770},{"class":480,"line":481},[771,775,779,783,787,791,795,799,803,807],{"type":395,"tag":478,"props":772,"children":773},{"style":491},[774],{"type":401,"value":655},{"type":395,"tag":478,"props":776,"children":777},{"style":556},[778],{"type":401,"value":660},{"type":395,"tag":478,"props":780,"children":781},{"style":491},[782],{"type":401,"value":520},{"type":395,"tag":478,"props":784,"children":785},{"style":485},[786],{"type":401,"value":669},{"type":395,"tag":478,"props":788,"children":789},{"style":672},[790],{"type":401,"value":675},{"type":395,"tag":478,"props":792,"children":793},{"style":491},[794],{"type":401,"value":494},{"type":395,"tag":478,"props":796,"children":797},{"style":572},[798],{"type":401,"value":684},{"type":395,"tag":478,"props":800,"children":801},{"style":578},[802],{"type":401,"value":419},{"type":395,"tag":478,"props":804,"children":805},{"style":572},[806],{"type":401,"value":684},{"type":395,"tag":478,"props":808,"children":809},{"style":491},[810],{"type":401,"value":697},{"type":395,"tag":478,"props":812,"children":813},{"class":480,"line":533},[814,818,822,827,831,836,841],{"type":395,"tag":478,"props":815,"children":816},{"style":491},[817],{"type":401,"value":419},{"type":395,"tag":478,"props":819,"children":820},{"style":485},[821],{"type":401,"value":669},{"type":395,"tag":478,"props":823,"children":824},{"style":491},[825],{"type":401,"value":826},"innerHTML ",{"type":395,"tag":478,"props":828,"children":829},{"style":556},[830],{"type":401,"value":660},{"type":395,"tag":478,"props":832,"children":833},{"style":572},[834],{"type":401,"value":835}," '",{"type":395,"tag":478,"props":837,"children":838},{"style":578},[839],{"type":401,"value":840},"\u003Cxyz>\u003C/xyz>",{"type":395,"tag":478,"props":842,"children":843},{"style":572},[844],{"type":401,"value":845},"'\n",{"type":395,"tag":478,"props":847,"children":848},{"class":480,"line":543},[849,854,858,863,867,872,876,882,887,893,898,902,906,911],{"type":395,"tag":478,"props":850,"children":851},{"style":491},[852],{"type":401,"value":853},"supportsUnknownElements ",{"type":395,"tag":478,"props":855,"children":856},{"style":556},[857],{"type":401,"value":660},{"type":395,"tag":478,"props":859,"children":860},{"style":491},[861],{"type":401,"value":862}," a",{"type":395,"tag":478,"props":864,"children":865},{"style":485},[866],{"type":401,"value":669},{"type":395,"tag":478,"props":868,"children":869},{"style":491},[870],{"type":401,"value":871},"childNodes",{"type":395,"tag":478,"props":873,"children":874},{"style":485},[875],{"type":401,"value":669},{"type":395,"tag":478,"props":877,"children":879},{"style":878},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[880],{"type":401,"value":881},"length",{"type":395,"tag":478,"props":883,"children":884},{"style":556},[885],{"type":401,"value":886}," ==",{"type":395,"tag":478,"props":888,"children":890},{"style":889},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[891],{"type":401,"value":892}," 1",{"type":395,"tag":478,"props":894,"children":895},{"style":556},[896],{"type":401,"value":897}," ||",{"type":395,"tag":478,"props":899,"children":900},{"style":491},[901],{"type":401,"value":714},{"type":395,"tag":478,"props":903,"children":904},{"style":497},[905],{"type":401,"value":500},{"type":395,"tag":478,"props":907,"children":908},{"style":485},[909],{"type":401,"value":910},"()",{"type":395,"tag":478,"props":912,"children":913},{"style":485},[914],{"type":401,"value":530},{"type":395,"tag":478,"props":916,"children":918},{"class":480,"line":917},4,[919,924,929,934,938,942,947],{"type":395,"tag":478,"props":920,"children":921},{"style":497},[922],{"type":401,"value":923},"    var",{"type":395,"tag":478,"props":925,"children":926},{"style":491},[927],{"type":401,"value":928}," frag",{"type":395,"tag":478,"props":930,"children":931},{"style":556},[932],{"type":401,"value":933}," =",{"type":395,"tag":478,"props":935,"children":936},{"style":491},[937],{"type":401,"value":520},{"type":395,"tag":478,"props":939,"children":940},{"style":485},[941],{"type":401,"value":669},{"type":395,"tag":478,"props":943,"children":944},{"style":672},[945],{"type":401,"value":946},"createDocumentFragment",{"type":395,"tag":478,"props":948,"children":950},{"style":949},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[951],{"type":401,"value":952},"()\n",{"type":395,"tag":478,"props":954,"children":956},{"class":480,"line":955},5,[957,963],{"type":395,"tag":478,"props":958,"children":960},{"style":959},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[961],{"type":401,"value":962},"    return",{"type":395,"tag":478,"props":964,"children":965},{"style":949},[966],{"type":401,"value":967}," (\n",{"type":395,"tag":478,"props":969,"children":971},{"class":480,"line":970},6,[972,977,981,985,990,994,998,1002,1006],{"type":395,"tag":478,"props":973,"children":974},{"style":556},[975],{"type":401,"value":976},"    typeof",{"type":395,"tag":478,"props":978,"children":979},{"style":491},[980],{"type":401,"value":928},{"type":395,"tag":478,"props":982,"children":983},{"style":485},[984],{"type":401,"value":669},{"type":395,"tag":478,"props":986,"children":987},{"style":491},[988],{"type":401,"value":989},"cloneNode",{"type":395,"tag":478,"props":991,"children":992},{"style":556},[993],{"type":401,"value":886},{"type":395,"tag":478,"props":995,"children":996},{"style":572},[997],{"type":401,"value":835},{"type":395,"tag":478,"props":999,"children":1000},{"style":578},[1001],{"type":401,"value":581},{"type":395,"tag":478,"props":1003,"children":1004},{"style":572},[1005],{"type":401,"value":684},{"type":395,"tag":478,"props":1007,"children":1008},{"style":556},[1009],{"type":401,"value":1010}," ||\n",{"type":395,"tag":478,"props":1012,"children":1014},{"class":480,"line":1013},7,[1015,1019,1023,1027,1031,1035,1039,1043,1047],{"type":395,"tag":478,"props":1016,"children":1017},{"style":556},[1018],{"type":401,"value":976},{"type":395,"tag":478,"props":1020,"children":1021},{"style":491},[1022],{"type":401,"value":928},{"type":395,"tag":478,"props":1024,"children":1025},{"style":485},[1026],{"type":401,"value":669},{"type":395,"tag":478,"props":1028,"children":1029},{"style":491},[1030],{"type":401,"value":946},{"type":395,"tag":478,"props":1032,"children":1033},{"style":556},[1034],{"type":401,"value":886},{"type":395,"tag":478,"props":1036,"children":1037},{"style":572},[1038],{"type":401,"value":835},{"type":395,"tag":478,"props":1040,"children":1041},{"style":578},[1042],{"type":401,"value":581},{"type":395,"tag":478,"props":1044,"children":1045},{"style":572},[1046],{"type":401,"value":684},{"type":395,"tag":478,"props":1048,"children":1049},{"style":556},[1050],{"type":401,"value":1010},{"type":395,"tag":478,"props":1052,"children":1054},{"class":480,"line":1053},8,[1055,1059,1063,1067,1071,1075,1079,1083],{"type":395,"tag":478,"props":1056,"children":1057},{"style":556},[1058],{"type":401,"value":976},{"type":395,"tag":478,"props":1060,"children":1061},{"style":491},[1062],{"type":401,"value":928},{"type":395,"tag":478,"props":1064,"children":1065},{"style":485},[1066],{"type":401,"value":669},{"type":395,"tag":478,"props":1068,"children":1069},{"style":491},[1070],{"type":401,"value":675},{"type":395,"tag":478,"props":1072,"children":1073},{"style":556},[1074],{"type":401,"value":886},{"type":395,"tag":478,"props":1076,"children":1077},{"style":572},[1078],{"type":401,"value":835},{"type":395,"tag":478,"props":1080,"children":1081},{"style":578},[1082],{"type":401,"value":581},{"type":395,"tag":478,"props":1084,"children":1085},{"style":572},[1086],{"type":401,"value":845},{"type":395,"tag":478,"props":1088,"children":1090},{"class":480,"line":1089},9,[1091],{"type":395,"tag":478,"props":1092,"children":1093},{"style":949},[1094],{"type":401,"value":1095},"    )\n",{"type":395,"tag":478,"props":1097,"children":1099},{"class":480,"line":1098},10,[1100,1104],{"type":395,"tag":478,"props":1101,"children":1102},{"style":485},[1103],{"type":401,"value":549},{"type":395,"tag":478,"props":1105,"children":1106},{"style":491},[1107],{"type":401,"value":1108},"())\n",{"type":395,"tag":409,"props":1110,"children":1111},{},[1112],{"type":401,"value":1113},"如果连 document.createElement 都调用失败的话，那 html5shiv 代码就毫无作用了（html5shiv 的原理需要用到 document.createElement），所以用一个 try/catch 将上述两个功能包裹起来。遇到错误则假装浏览器正常支持 HTML5，相关检测变量被置为 true。",{"type":395,"tag":467,"props":1115,"children":1117},{"className":469,"code":1116,"language":471,"meta":389,"style":389},"(function() {\n    try {\n        var a = document.createElement('a')\n        a.innerHTML = '\u003Cxyz>\u003C/xyz>'\n        //if the hidden property is implemented we can assume, \n        // that the browser supports basic HTML5 Styles\n        supportsHtml5Styles = ('hidden' in a)\n\n        supportsUnknownElements = a.childNodes.length == 1 || (function() {\n            // assign a false positive if unable to shiv\n            // ? 猜测特定浏览器对这种括号调用方法会报错\n            (document.createElement)('a')\n            var frag = document.createDocumentFragment()\n            return (\n            typeof frag.cloneNode == 'undefined' ||\n            typeof frag.createDocumentFragment == 'undefined' ||\n            typeof frag.createElement == 'undefined'\n            )\n        }())\n    } catch(e) {\n        // assign a false positive if detection fails => unable to shiv\n        supportsHtml5Styles = true\n        supportsUnknownElements = true\n    }\n}())\n",[1118],{"type":395,"tag":474,"props":1119,"children":1120},{"__ignoreMap":389},[1121,1140,1152,1200,1233,1241,1249,1289,1297,1357,1365,1374,1417,1450,1463,1504,1544,1580,1589,1602,1635,1644,1662,1678,1687],{"type":395,"tag":478,"props":1122,"children":1123},{"class":480,"line":481},[1124,1128,1132,1136],{"type":395,"tag":478,"props":1125,"children":1126},{"style":491},[1127],{"type":401,"value":494},{"type":395,"tag":478,"props":1129,"children":1130},{"style":497},[1131],{"type":401,"value":500},{"type":395,"tag":478,"props":1133,"children":1134},{"style":485},[1135],{"type":401,"value":910},{"type":395,"tag":478,"props":1137,"children":1138},{"style":485},[1139],{"type":401,"value":530},{"type":395,"tag":478,"props":1141,"children":1142},{"class":480,"line":533},[1143,1148],{"type":395,"tag":478,"props":1144,"children":1145},{"style":959},[1146],{"type":401,"value":1147},"    try",{"type":395,"tag":478,"props":1149,"children":1150},{"style":485},[1151],{"type":401,"value":530},{"type":395,"tag":478,"props":1153,"children":1154},{"class":480,"line":543},[1155,1160,1164,1168,1172,1176,1180,1184,1188,1192,1196],{"type":395,"tag":478,"props":1156,"children":1157},{"style":497},[1158],{"type":401,"value":1159},"        var",{"type":395,"tag":478,"props":1161,"children":1162},{"style":491},[1163],{"type":401,"value":862},{"type":395,"tag":478,"props":1165,"children":1166},{"style":556},[1167],{"type":401,"value":933},{"type":395,"tag":478,"props":1169,"children":1170},{"style":491},[1171],{"type":401,"value":520},{"type":395,"tag":478,"props":1173,"children":1174},{"style":485},[1175],{"type":401,"value":669},{"type":395,"tag":478,"props":1177,"children":1178},{"style":672},[1179],{"type":401,"value":675},{"type":395,"tag":478,"props":1181,"children":1182},{"style":949},[1183],{"type":401,"value":494},{"type":395,"tag":478,"props":1185,"children":1186},{"style":572},[1187],{"type":401,"value":684},{"type":395,"tag":478,"props":1189,"children":1190},{"style":578},[1191],{"type":401,"value":419},{"type":395,"tag":478,"props":1193,"children":1194},{"style":572},[1195],{"type":401,"value":684},{"type":395,"tag":478,"props":1197,"children":1198},{"style":949},[1199],{"type":401,"value":697},{"type":395,"tag":478,"props":1201,"children":1202},{"class":480,"line":917},[1203,1208,1212,1217,1221,1225,1229],{"type":395,"tag":478,"props":1204,"children":1205},{"style":491},[1206],{"type":401,"value":1207},"        a",{"type":395,"tag":478,"props":1209,"children":1210},{"style":485},[1211],{"type":401,"value":669},{"type":395,"tag":478,"props":1213,"children":1214},{"style":491},[1215],{"type":401,"value":1216},"innerHTML",{"type":395,"tag":478,"props":1218,"children":1219},{"style":556},[1220],{"type":401,"value":933},{"type":395,"tag":478,"props":1222,"children":1223},{"style":572},[1224],{"type":401,"value":835},{"type":395,"tag":478,"props":1226,"children":1227},{"style":578},[1228],{"type":401,"value":840},{"type":395,"tag":478,"props":1230,"children":1231},{"style":572},[1232],{"type":401,"value":845},{"type":395,"tag":478,"props":1234,"children":1235},{"class":480,"line":955},[1236],{"type":395,"tag":478,"props":1237,"children":1238},{"style":537},[1239],{"type":401,"value":1240},"        //if the hidden property is implemented we can assume, \n",{"type":395,"tag":478,"props":1242,"children":1243},{"class":480,"line":970},[1244],{"type":395,"tag":478,"props":1245,"children":1246},{"style":537},[1247],{"type":401,"value":1248},"        // that the browser supports basic HTML5 Styles\n",{"type":395,"tag":478,"props":1250,"children":1251},{"class":480,"line":1013},[1252,1257,1261,1265,1269,1273,1277,1281,1285],{"type":395,"tag":478,"props":1253,"children":1254},{"style":491},[1255],{"type":401,"value":1256},"        supportsHtml5Styles",{"type":395,"tag":478,"props":1258,"children":1259},{"style":556},[1260],{"type":401,"value":933},{"type":395,"tag":478,"props":1262,"children":1263},{"style":949},[1264],{"type":401,"value":714},{"type":395,"tag":478,"props":1266,"children":1267},{"style":572},[1268],{"type":401,"value":684},{"type":395,"tag":478,"props":1270,"children":1271},{"style":578},[1272],{"type":401,"value":723},{"type":395,"tag":478,"props":1274,"children":1275},{"style":572},[1276],{"type":401,"value":684},{"type":395,"tag":478,"props":1278,"children":1279},{"style":556},[1280],{"type":401,"value":732},{"type":395,"tag":478,"props":1282,"children":1283},{"style":491},[1284],{"type":401,"value":862},{"type":395,"tag":478,"props":1286,"children":1287},{"style":949},[1288],{"type":401,"value":697},{"type":395,"tag":478,"props":1290,"children":1291},{"class":480,"line":1053},[1292],{"type":395,"tag":478,"props":1293,"children":1294},{"emptyLinePlaceholder":388},[1295],{"type":401,"value":1296},"\n",{"type":395,"tag":478,"props":1298,"children":1299},{"class":480,"line":1089},[1300,1305,1309,1313,1317,1321,1325,1329,1333,1337,1341,1345,1349,1353],{"type":395,"tag":478,"props":1301,"children":1302},{"style":491},[1303],{"type":401,"value":1304},"        supportsUnknownElements",{"type":395,"tag":478,"props":1306,"children":1307},{"style":556},[1308],{"type":401,"value":933},{"type":395,"tag":478,"props":1310,"children":1311},{"style":491},[1312],{"type":401,"value":862},{"type":395,"tag":478,"props":1314,"children":1315},{"style":485},[1316],{"type":401,"value":669},{"type":395,"tag":478,"props":1318,"children":1319},{"style":491},[1320],{"type":401,"value":871},{"type":395,"tag":478,"props":1322,"children":1323},{"style":485},[1324],{"type":401,"value":669},{"type":395,"tag":478,"props":1326,"children":1327},{"style":878},[1328],{"type":401,"value":881},{"type":395,"tag":478,"props":1330,"children":1331},{"style":556},[1332],{"type":401,"value":886},{"type":395,"tag":478,"props":1334,"children":1335},{"style":889},[1336],{"type":401,"value":892},{"type":395,"tag":478,"props":1338,"children":1339},{"style":556},[1340],{"type":401,"value":897},{"type":395,"tag":478,"props":1342,"children":1343},{"style":949},[1344],{"type":401,"value":714},{"type":395,"tag":478,"props":1346,"children":1347},{"style":497},[1348],{"type":401,"value":500},{"type":395,"tag":478,"props":1350,"children":1351},{"style":485},[1352],{"type":401,"value":910},{"type":395,"tag":478,"props":1354,"children":1355},{"style":485},[1356],{"type":401,"value":530},{"type":395,"tag":478,"props":1358,"children":1359},{"class":480,"line":1098},[1360],{"type":395,"tag":478,"props":1361,"children":1362},{"style":537},[1363],{"type":401,"value":1364},"            // assign a false positive if unable to shiv\n",{"type":395,"tag":478,"props":1366,"children":1368},{"class":480,"line":1367},11,[1369],{"type":395,"tag":478,"props":1370,"children":1371},{"style":537},[1372],{"type":401,"value":1373},"            // ? 猜测特定浏览器对这种括号调用方法会报错\n",{"type":395,"tag":478,"props":1375,"children":1377},{"class":480,"line":1376},12,[1378,1383,1388,1392,1396,1401,1405,1409,1413],{"type":395,"tag":478,"props":1379,"children":1380},{"style":949},[1381],{"type":401,"value":1382},"            (",{"type":395,"tag":478,"props":1384,"children":1385},{"style":491},[1386],{"type":401,"value":1387},"document",{"type":395,"tag":478,"props":1389,"children":1390},{"style":485},[1391],{"type":401,"value":669},{"type":395,"tag":478,"props":1393,"children":1394},{"style":491},[1395],{"type":401,"value":675},{"type":395,"tag":478,"props":1397,"children":1398},{"style":949},[1399],{"type":401,"value":1400},")(",{"type":395,"tag":478,"props":1402,"children":1403},{"style":572},[1404],{"type":401,"value":684},{"type":395,"tag":478,"props":1406,"children":1407},{"style":578},[1408],{"type":401,"value":419},{"type":395,"tag":478,"props":1410,"children":1411},{"style":572},[1412],{"type":401,"value":684},{"type":395,"tag":478,"props":1414,"children":1415},{"style":949},[1416],{"type":401,"value":697},{"type":395,"tag":478,"props":1418,"children":1420},{"class":480,"line":1419},13,[1421,1426,1430,1434,1438,1442,1446],{"type":395,"tag":478,"props":1422,"children":1423},{"style":497},[1424],{"type":401,"value":1425},"            var",{"type":395,"tag":478,"props":1427,"children":1428},{"style":491},[1429],{"type":401,"value":928},{"type":395,"tag":478,"props":1431,"children":1432},{"style":556},[1433],{"type":401,"value":933},{"type":395,"tag":478,"props":1435,"children":1436},{"style":491},[1437],{"type":401,"value":520},{"type":395,"tag":478,"props":1439,"children":1440},{"style":485},[1441],{"type":401,"value":669},{"type":395,"tag":478,"props":1443,"children":1444},{"style":672},[1445],{"type":401,"value":946},{"type":395,"tag":478,"props":1447,"children":1448},{"style":949},[1449],{"type":401,"value":952},{"type":395,"tag":478,"props":1451,"children":1453},{"class":480,"line":1452},14,[1454,1459],{"type":395,"tag":478,"props":1455,"children":1456},{"style":959},[1457],{"type":401,"value":1458},"            return",{"type":395,"tag":478,"props":1460,"children":1461},{"style":949},[1462],{"type":401,"value":967},{"type":395,"tag":478,"props":1464,"children":1466},{"class":480,"line":1465},15,[1467,1472,1476,1480,1484,1488,1492,1496,1500],{"type":395,"tag":478,"props":1468,"children":1469},{"style":556},[1470],{"type":401,"value":1471},"            typeof",{"type":395,"tag":478,"props":1473,"children":1474},{"style":491},[1475],{"type":401,"value":928},{"type":395,"tag":478,"props":1477,"children":1478},{"style":485},[1479],{"type":401,"value":669},{"type":395,"tag":478,"props":1481,"children":1482},{"style":491},[1483],{"type":401,"value":989},{"type":395,"tag":478,"props":1485,"children":1486},{"style":556},[1487],{"type":401,"value":886},{"type":395,"tag":478,"props":1489,"children":1490},{"style":572},[1491],{"type":401,"value":835},{"type":395,"tag":478,"props":1493,"children":1494},{"style":578},[1495],{"type":401,"value":581},{"type":395,"tag":478,"props":1497,"children":1498},{"style":572},[1499],{"type":401,"value":684},{"type":395,"tag":478,"props":1501,"children":1502},{"style":556},[1503],{"type":401,"value":1010},{"type":395,"tag":478,"props":1505,"children":1507},{"class":480,"line":1506},16,[1508,1512,1516,1520,1524,1528,1532,1536,1540],{"type":395,"tag":478,"props":1509,"children":1510},{"style":556},[1511],{"type":401,"value":1471},{"type":395,"tag":478,"props":1513,"children":1514},{"style":491},[1515],{"type":401,"value":928},{"type":395,"tag":478,"props":1517,"children":1518},{"style":485},[1519],{"type":401,"value":669},{"type":395,"tag":478,"props":1521,"children":1522},{"style":491},[1523],{"type":401,"value":946},{"type":395,"tag":478,"props":1525,"children":1526},{"style":556},[1527],{"type":401,"value":886},{"type":395,"tag":478,"props":1529,"children":1530},{"style":572},[1531],{"type":401,"value":835},{"type":395,"tag":478,"props":1533,"children":1534},{"style":578},[1535],{"type":401,"value":581},{"type":395,"tag":478,"props":1537,"children":1538},{"style":572},[1539],{"type":401,"value":684},{"type":395,"tag":478,"props":1541,"children":1542},{"style":556},[1543],{"type":401,"value":1010},{"type":395,"tag":478,"props":1545,"children":1547},{"class":480,"line":1546},17,[1548,1552,1556,1560,1564,1568,1572,1576],{"type":395,"tag":478,"props":1549,"children":1550},{"style":556},[1551],{"type":401,"value":1471},{"type":395,"tag":478,"props":1553,"children":1554},{"style":491},[1555],{"type":401,"value":928},{"type":395,"tag":478,"props":1557,"children":1558},{"style":485},[1559],{"type":401,"value":669},{"type":395,"tag":478,"props":1561,"children":1562},{"style":491},[1563],{"type":401,"value":675},{"type":395,"tag":478,"props":1565,"children":1566},{"style":556},[1567],{"type":401,"value":886},{"type":395,"tag":478,"props":1569,"children":1570},{"style":572},[1571],{"type":401,"value":835},{"type":395,"tag":478,"props":1573,"children":1574},{"style":578},[1575],{"type":401,"value":581},{"type":395,"tag":478,"props":1577,"children":1578},{"style":572},[1579],{"type":401,"value":845},{"type":395,"tag":478,"props":1581,"children":1583},{"class":480,"line":1582},18,[1584],{"type":395,"tag":478,"props":1585,"children":1586},{"style":949},[1587],{"type":401,"value":1588},"            )\n",{"type":395,"tag":478,"props":1590,"children":1592},{"class":480,"line":1591},19,[1593,1598],{"type":395,"tag":478,"props":1594,"children":1595},{"style":485},[1596],{"type":401,"value":1597},"        }",{"type":395,"tag":478,"props":1599,"children":1600},{"style":949},[1601],{"type":401,"value":1108},{"type":395,"tag":478,"props":1603,"children":1605},{"class":480,"line":1604},20,[1606,1611,1616,1620,1625,1630],{"type":395,"tag":478,"props":1607,"children":1608},{"style":485},[1609],{"type":401,"value":1610},"    }",{"type":395,"tag":478,"props":1612,"children":1613},{"style":959},[1614],{"type":401,"value":1615}," catch",{"type":395,"tag":478,"props":1617,"children":1618},{"style":949},[1619],{"type":401,"value":494},{"type":395,"tag":478,"props":1621,"children":1622},{"style":491},[1623],{"type":401,"value":1624},"e",{"type":395,"tag":478,"props":1626,"children":1627},{"style":949},[1628],{"type":401,"value":1629},") ",{"type":395,"tag":478,"props":1631,"children":1632},{"style":485},[1633],{"type":401,"value":1634},"{\n",{"type":395,"tag":478,"props":1636,"children":1638},{"class":480,"line":1637},21,[1639],{"type":395,"tag":478,"props":1640,"children":1641},{"style":537},[1642],{"type":401,"value":1643},"        // assign a false positive if detection fails => unable to shiv\n",{"type":395,"tag":478,"props":1645,"children":1647},{"class":480,"line":1646},22,[1648,1652,1656],{"type":395,"tag":478,"props":1649,"children":1650},{"style":491},[1651],{"type":401,"value":1256},{"type":395,"tag":478,"props":1653,"children":1654},{"style":556},[1655],{"type":401,"value":933},{"type":395,"tag":478,"props":1657,"children":1659},{"style":1658},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1660],{"type":401,"value":1661}," true\n",{"type":395,"tag":478,"props":1663,"children":1665},{"class":480,"line":1664},23,[1666,1670,1674],{"type":395,"tag":478,"props":1667,"children":1668},{"style":491},[1669],{"type":401,"value":1304},{"type":395,"tag":478,"props":1671,"children":1672},{"style":556},[1673],{"type":401,"value":933},{"type":395,"tag":478,"props":1675,"children":1676},{"style":1658},[1677],{"type":401,"value":1661},{"type":395,"tag":478,"props":1679,"children":1681},{"class":480,"line":1680},24,[1682],{"type":395,"tag":478,"props":1683,"children":1684},{"style":485},[1685],{"type":401,"value":1686},"    }\n",{"type":395,"tag":478,"props":1688,"children":1690},{"class":480,"line":1689},25,[1691,1695],{"type":395,"tag":478,"props":1692,"children":1693},{"style":485},[1694],{"type":401,"value":549},{"type":395,"tag":478,"props":1696,"children":1697},{"style":491},[1698],{"type":401,"value":1108},{"type":395,"tag":456,"props":1700,"children":1702},{"id":1701},"功能仿制",[1703],{"type":401,"value":1701},{"type":395,"tag":409,"props":1705,"children":1706},{},[1707],{"type":401,"value":1708},"每个页面可能有多个 iframe，所以可能有多个 document 对象。因为不同 document 对象可被 shiv 的元素可能不同，所以需要一个变量用作记录。",{"type":395,"tag":409,"props":1710,"children":1711},{},[1712],{"type":401,"value":1713},"getExpandoData 方法在传入的 document 对象下挂载了一个属性名为 '_html5shiv' 的空对象，用来便捷存放某些数据（比如说元素缓存），并返回对象单例。",{"type":395,"tag":467,"props":1715,"children":1717},{"className":469,"code":1716,"language":471,"meta":389,"style":389},"var expandoData = {}\nvar expanID = 0\nvar expando = '_html5shiv'\nfunction getExpandoData(ownerDocument) {\n    var data = expandoData[ownerDocument[expando]]\n    if (!data) {\n        data = {}\n        expanID++\n        ownerDocument[expando] = expanID\n        expandoData[expanID] = data\n    }\n    return data\n  }\n",[1718],{"type":395,"tag":474,"props":1719,"children":1720},{"__ignoreMap":389},[1721,1743,1764,1793,1822,1866,1896,1912,1925,1955,1985,1992,2003],{"type":395,"tag":478,"props":1722,"children":1723},{"class":480,"line":481},[1724,1729,1734,1738],{"type":395,"tag":478,"props":1725,"children":1726},{"style":497},[1727],{"type":401,"value":1728},"var",{"type":395,"tag":478,"props":1730,"children":1731},{"style":491},[1732],{"type":401,"value":1733}," expandoData ",{"type":395,"tag":478,"props":1735,"children":1736},{"style":556},[1737],{"type":401,"value":660},{"type":395,"tag":478,"props":1739,"children":1740},{"style":485},[1741],{"type":401,"value":1742}," {}\n",{"type":395,"tag":478,"props":1744,"children":1745},{"class":480,"line":533},[1746,1750,1755,1759],{"type":395,"tag":478,"props":1747,"children":1748},{"style":497},[1749],{"type":401,"value":1728},{"type":395,"tag":478,"props":1751,"children":1752},{"style":491},[1753],{"type":401,"value":1754}," expanID ",{"type":395,"tag":478,"props":1756,"children":1757},{"style":556},[1758],{"type":401,"value":660},{"type":395,"tag":478,"props":1760,"children":1761},{"style":889},[1762],{"type":401,"value":1763}," 0\n",{"type":395,"tag":478,"props":1765,"children":1766},{"class":480,"line":543},[1767,1771,1776,1780,1784,1789],{"type":395,"tag":478,"props":1768,"children":1769},{"style":497},[1770],{"type":401,"value":1728},{"type":395,"tag":478,"props":1772,"children":1773},{"style":491},[1774],{"type":401,"value":1775}," expando ",{"type":395,"tag":478,"props":1777,"children":1778},{"style":556},[1779],{"type":401,"value":660},{"type":395,"tag":478,"props":1781,"children":1782},{"style":572},[1783],{"type":401,"value":835},{"type":395,"tag":478,"props":1785,"children":1786},{"style":578},[1787],{"type":401,"value":1788},"_html5shiv",{"type":395,"tag":478,"props":1790,"children":1791},{"style":572},[1792],{"type":401,"value":845},{"type":395,"tag":478,"props":1794,"children":1795},{"class":480,"line":917},[1796,1800,1805,1809,1814,1818],{"type":395,"tag":478,"props":1797,"children":1798},{"style":497},[1799],{"type":401,"value":500},{"type":395,"tag":478,"props":1801,"children":1802},{"style":672},[1803],{"type":401,"value":1804}," getExpandoData",{"type":395,"tag":478,"props":1806,"children":1807},{"style":485},[1808],{"type":401,"value":494},{"type":395,"tag":478,"props":1810,"children":1811},{"style":507},[1812],{"type":401,"value":1813},"ownerDocument",{"type":395,"tag":478,"props":1815,"children":1816},{"style":485},[1817],{"type":401,"value":525},{"type":395,"tag":478,"props":1819,"children":1820},{"style":485},[1821],{"type":401,"value":530},{"type":395,"tag":478,"props":1823,"children":1824},{"class":480,"line":955},[1825,1829,1834,1838,1843,1848,1852,1856,1861],{"type":395,"tag":478,"props":1826,"children":1827},{"style":497},[1828],{"type":401,"value":923},{"type":395,"tag":478,"props":1830,"children":1831},{"style":491},[1832],{"type":401,"value":1833}," data",{"type":395,"tag":478,"props":1835,"children":1836},{"style":556},[1837],{"type":401,"value":933},{"type":395,"tag":478,"props":1839,"children":1840},{"style":491},[1841],{"type":401,"value":1842}," expandoData",{"type":395,"tag":478,"props":1844,"children":1845},{"style":949},[1846],{"type":401,"value":1847},"[",{"type":395,"tag":478,"props":1849,"children":1850},{"style":491},[1851],{"type":401,"value":1813},{"type":395,"tag":478,"props":1853,"children":1854},{"style":949},[1855],{"type":401,"value":1847},{"type":395,"tag":478,"props":1857,"children":1858},{"style":491},[1859],{"type":401,"value":1860},"expando",{"type":395,"tag":478,"props":1862,"children":1863},{"style":949},[1864],{"type":401,"value":1865},"]]\n",{"type":395,"tag":478,"props":1867,"children":1868},{"class":480,"line":970},[1869,1874,1878,1883,1888,1892],{"type":395,"tag":478,"props":1870,"children":1871},{"style":959},[1872],{"type":401,"value":1873},"    if",{"type":395,"tag":478,"props":1875,"children":1876},{"style":949},[1877],{"type":401,"value":714},{"type":395,"tag":478,"props":1879,"children":1880},{"style":556},[1881],{"type":401,"value":1882},"!",{"type":395,"tag":478,"props":1884,"children":1885},{"style":491},[1886],{"type":401,"value":1887},"data",{"type":395,"tag":478,"props":1889,"children":1890},{"style":949},[1891],{"type":401,"value":1629},{"type":395,"tag":478,"props":1893,"children":1894},{"style":485},[1895],{"type":401,"value":1634},{"type":395,"tag":478,"props":1897,"children":1898},{"class":480,"line":1013},[1899,1904,1908],{"type":395,"tag":478,"props":1900,"children":1901},{"style":491},[1902],{"type":401,"value":1903},"        data",{"type":395,"tag":478,"props":1905,"children":1906},{"style":556},[1907],{"type":401,"value":933},{"type":395,"tag":478,"props":1909,"children":1910},{"style":485},[1911],{"type":401,"value":1742},{"type":395,"tag":478,"props":1913,"children":1914},{"class":480,"line":1053},[1915,1920],{"type":395,"tag":478,"props":1916,"children":1917},{"style":491},[1918],{"type":401,"value":1919},"        expanID",{"type":395,"tag":478,"props":1921,"children":1922},{"style":556},[1923],{"type":401,"value":1924},"++\n",{"type":395,"tag":478,"props":1926,"children":1927},{"class":480,"line":1089},[1928,1933,1937,1941,1946,1950],{"type":395,"tag":478,"props":1929,"children":1930},{"style":491},[1931],{"type":401,"value":1932},"        ownerDocument",{"type":395,"tag":478,"props":1934,"children":1935},{"style":949},[1936],{"type":401,"value":1847},{"type":395,"tag":478,"props":1938,"children":1939},{"style":491},[1940],{"type":401,"value":1860},{"type":395,"tag":478,"props":1942,"children":1943},{"style":949},[1944],{"type":401,"value":1945},"] ",{"type":395,"tag":478,"props":1947,"children":1948},{"style":556},[1949],{"type":401,"value":660},{"type":395,"tag":478,"props":1951,"children":1952},{"style":491},[1953],{"type":401,"value":1954}," expanID\n",{"type":395,"tag":478,"props":1956,"children":1957},{"class":480,"line":1098},[1958,1963,1967,1972,1976,1980],{"type":395,"tag":478,"props":1959,"children":1960},{"style":491},[1961],{"type":401,"value":1962},"        expandoData",{"type":395,"tag":478,"props":1964,"children":1965},{"style":949},[1966],{"type":401,"value":1847},{"type":395,"tag":478,"props":1968,"children":1969},{"style":491},[1970],{"type":401,"value":1971},"expanID",{"type":395,"tag":478,"props":1973,"children":1974},{"style":949},[1975],{"type":401,"value":1945},{"type":395,"tag":478,"props":1977,"children":1978},{"style":556},[1979],{"type":401,"value":660},{"type":395,"tag":478,"props":1981,"children":1982},{"style":491},[1983],{"type":401,"value":1984}," data\n",{"type":395,"tag":478,"props":1986,"children":1987},{"class":480,"line":1367},[1988],{"type":395,"tag":478,"props":1989,"children":1990},{"style":485},[1991],{"type":401,"value":1686},{"type":395,"tag":478,"props":1993,"children":1994},{"class":480,"line":1376},[1995,1999],{"type":395,"tag":478,"props":1996,"children":1997},{"style":959},[1998],{"type":401,"value":962},{"type":395,"tag":478,"props":2000,"children":2001},{"style":491},[2002],{"type":401,"value":1984},{"type":395,"tag":478,"props":2004,"children":2005},{"class":480,"line":1419},[2006],{"type":395,"tag":478,"props":2007,"children":2008},{"style":485},[2009],{"type":401,"value":2010},"  }\n",{"type":395,"tag":409,"props":2012,"children":2013},{},[2014],{"type":401,"value":2015},"如何对 document 进行 html5 的增强呢？原理体现都在 shivDocument 这个函数了，只需要增强浏览器原生的 createElement 等 API 的功能，再添加对应的元素样式就好了。",{"type":395,"tag":467,"props":2017,"children":2019},{"className":469,"code":2018,"language":471,"meta":389,"style":389},"function shivDocument(ownerDocument) {\n    // 挂载 document._html5shiv\n    var data = getExpandoData(ownerDocument)\n\n    // 增强样式\n    if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n      data.hasCSS = !!addStyleSheet(ownerDocument,\n        // corrects block display not defined in IE6/7/8/9\n        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n        // adds styling not present in IE6/7/8/9\n        'mark{background:#FF0;color:#000}' +\n        // hides non-rendered elements\n        'template{display:none}'\n      )\n    }\n\n    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n    // 如果当前浏览器连 document.createElement 都会报错，\n    // 那就没办法 shiv 了，只好假装一切正常...\n    if (!supportsUnknownElements) {\n      // 增强 createElement 和 createDocumentFragment\n      shivMethods(ownerDocument, data)\n    }\n    return ownerDocument\n  }\n",[2020],{"type":395,"tag":474,"props":2021,"children":2022},{"__ignoreMap":389},[2023,2051,2059,2090,2097,2105,2174,2217,2225,2247,2255,2275,2283,2299,2307,2314,2321,2329,2337,2345,2373,2381,2409,2416,2428],{"type":395,"tag":478,"props":2024,"children":2025},{"class":480,"line":481},[2026,2030,2035,2039,2043,2047],{"type":395,"tag":478,"props":2027,"children":2028},{"style":497},[2029],{"type":401,"value":500},{"type":395,"tag":478,"props":2031,"children":2032},{"style":672},[2033],{"type":401,"value":2034}," shivDocument",{"type":395,"tag":478,"props":2036,"children":2037},{"style":485},[2038],{"type":401,"value":494},{"type":395,"tag":478,"props":2040,"children":2041},{"style":507},[2042],{"type":401,"value":1813},{"type":395,"tag":478,"props":2044,"children":2045},{"style":485},[2046],{"type":401,"value":525},{"type":395,"tag":478,"props":2048,"children":2049},{"style":485},[2050],{"type":401,"value":530},{"type":395,"tag":478,"props":2052,"children":2053},{"class":480,"line":533},[2054],{"type":395,"tag":478,"props":2055,"children":2056},{"style":537},[2057],{"type":401,"value":2058},"    // 挂载 document._html5shiv\n",{"type":395,"tag":478,"props":2060,"children":2061},{"class":480,"line":543},[2062,2066,2070,2074,2078,2082,2086],{"type":395,"tag":478,"props":2063,"children":2064},{"style":497},[2065],{"type":401,"value":923},{"type":395,"tag":478,"props":2067,"children":2068},{"style":491},[2069],{"type":401,"value":1833},{"type":395,"tag":478,"props":2071,"children":2072},{"style":556},[2073],{"type":401,"value":933},{"type":395,"tag":478,"props":2075,"children":2076},{"style":672},[2077],{"type":401,"value":1804},{"type":395,"tag":478,"props":2079,"children":2080},{"style":949},[2081],{"type":401,"value":494},{"type":395,"tag":478,"props":2083,"children":2084},{"style":491},[2085],{"type":401,"value":1813},{"type":395,"tag":478,"props":2087,"children":2088},{"style":949},[2089],{"type":401,"value":697},{"type":395,"tag":478,"props":2091,"children":2092},{"class":480,"line":917},[2093],{"type":395,"tag":478,"props":2094,"children":2095},{"emptyLinePlaceholder":388},[2096],{"type":401,"value":1296},{"type":395,"tag":478,"props":2098,"children":2099},{"class":480,"line":955},[2100],{"type":395,"tag":478,"props":2101,"children":2102},{"style":537},[2103],{"type":401,"value":2104},"    // 增强样式\n",{"type":395,"tag":478,"props":2106,"children":2107},{"class":480,"line":970},[2108,2112,2116,2121,2125,2130,2135,2140,2145,2149,2153,2157,2161,2166,2170],{"type":395,"tag":478,"props":2109,"children":2110},{"style":959},[2111],{"type":401,"value":1873},{"type":395,"tag":478,"props":2113,"children":2114},{"style":949},[2115],{"type":401,"value":714},{"type":395,"tag":478,"props":2117,"children":2118},{"style":491},[2119],{"type":401,"value":2120},"html5",{"type":395,"tag":478,"props":2122,"children":2123},{"style":485},[2124],{"type":401,"value":669},{"type":395,"tag":478,"props":2126,"children":2127},{"style":491},[2128],{"type":401,"value":2129},"shivCSS",{"type":395,"tag":478,"props":2131,"children":2132},{"style":556},[2133],{"type":401,"value":2134}," &&",{"type":395,"tag":478,"props":2136,"children":2137},{"style":556},[2138],{"type":401,"value":2139}," !",{"type":395,"tag":478,"props":2141,"children":2142},{"style":491},[2143],{"type":401,"value":2144},"supportsHtml5Styles",{"type":395,"tag":478,"props":2146,"children":2147},{"style":556},[2148],{"type":401,"value":2134},{"type":395,"tag":478,"props":2150,"children":2151},{"style":556},[2152],{"type":401,"value":2139},{"type":395,"tag":478,"props":2154,"children":2155},{"style":491},[2156],{"type":401,"value":1887},{"type":395,"tag":478,"props":2158,"children":2159},{"style":485},[2160],{"type":401,"value":669},{"type":395,"tag":478,"props":2162,"children":2163},{"style":491},[2164],{"type":401,"value":2165},"hasCSS",{"type":395,"tag":478,"props":2167,"children":2168},{"style":949},[2169],{"type":401,"value":1629},{"type":395,"tag":478,"props":2171,"children":2172},{"style":485},[2173],{"type":401,"value":1634},{"type":395,"tag":478,"props":2175,"children":2176},{"class":480,"line":1013},[2177,2182,2186,2190,2194,2199,2204,2208,2212],{"type":395,"tag":478,"props":2178,"children":2179},{"style":491},[2180],{"type":401,"value":2181},"      data",{"type":395,"tag":478,"props":2183,"children":2184},{"style":485},[2185],{"type":401,"value":669},{"type":395,"tag":478,"props":2187,"children":2188},{"style":491},[2189],{"type":401,"value":2165},{"type":395,"tag":478,"props":2191,"children":2192},{"style":556},[2193],{"type":401,"value":933},{"type":395,"tag":478,"props":2195,"children":2196},{"style":556},[2197],{"type":401,"value":2198}," !!",{"type":395,"tag":478,"props":2200,"children":2201},{"style":672},[2202],{"type":401,"value":2203},"addStyleSheet",{"type":395,"tag":478,"props":2205,"children":2206},{"style":949},[2207],{"type":401,"value":494},{"type":395,"tag":478,"props":2209,"children":2210},{"style":491},[2211],{"type":401,"value":1813},{"type":395,"tag":478,"props":2213,"children":2214},{"style":485},[2215],{"type":401,"value":2216},",\n",{"type":395,"tag":478,"props":2218,"children":2219},{"class":480,"line":1053},[2220],{"type":395,"tag":478,"props":2221,"children":2222},{"style":537},[2223],{"type":401,"value":2224},"        // corrects block display not defined in IE6/7/8/9\n",{"type":395,"tag":478,"props":2226,"children":2227},{"class":480,"line":1089},[2228,2233,2238,2242],{"type":395,"tag":478,"props":2229,"children":2230},{"style":572},[2231],{"type":401,"value":2232},"        '",{"type":395,"tag":478,"props":2234,"children":2235},{"style":578},[2236],{"type":401,"value":2237},"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}",{"type":395,"tag":478,"props":2239,"children":2240},{"style":572},[2241],{"type":401,"value":684},{"type":395,"tag":478,"props":2243,"children":2244},{"style":556},[2245],{"type":401,"value":2246}," +\n",{"type":395,"tag":478,"props":2248,"children":2249},{"class":480,"line":1098},[2250],{"type":395,"tag":478,"props":2251,"children":2252},{"style":537},[2253],{"type":401,"value":2254},"        // adds styling not present in IE6/7/8/9\n",{"type":395,"tag":478,"props":2256,"children":2257},{"class":480,"line":1367},[2258,2262,2267,2271],{"type":395,"tag":478,"props":2259,"children":2260},{"style":572},[2261],{"type":401,"value":2232},{"type":395,"tag":478,"props":2263,"children":2264},{"style":578},[2265],{"type":401,"value":2266},"mark{background:#FF0;color:#000}",{"type":395,"tag":478,"props":2268,"children":2269},{"style":572},[2270],{"type":401,"value":684},{"type":395,"tag":478,"props":2272,"children":2273},{"style":556},[2274],{"type":401,"value":2246},{"type":395,"tag":478,"props":2276,"children":2277},{"class":480,"line":1376},[2278],{"type":395,"tag":478,"props":2279,"children":2280},{"style":537},[2281],{"type":401,"value":2282},"        // hides non-rendered elements\n",{"type":395,"tag":478,"props":2284,"children":2285},{"class":480,"line":1419},[2286,2290,2295],{"type":395,"tag":478,"props":2287,"children":2288},{"style":572},[2289],{"type":401,"value":2232},{"type":395,"tag":478,"props":2291,"children":2292},{"style":578},[2293],{"type":401,"value":2294},"template{display:none}",{"type":395,"tag":478,"props":2296,"children":2297},{"style":572},[2298],{"type":401,"value":845},{"type":395,"tag":478,"props":2300,"children":2301},{"class":480,"line":1452},[2302],{"type":395,"tag":478,"props":2303,"children":2304},{"style":949},[2305],{"type":401,"value":2306},"      )\n",{"type":395,"tag":478,"props":2308,"children":2309},{"class":480,"line":1465},[2310],{"type":395,"tag":478,"props":2311,"children":2312},{"style":485},[2313],{"type":401,"value":1686},{"type":395,"tag":478,"props":2315,"children":2316},{"class":480,"line":1506},[2317],{"type":395,"tag":478,"props":2318,"children":2319},{"emptyLinePlaceholder":388},[2320],{"type":401,"value":1296},{"type":395,"tag":478,"props":2322,"children":2323},{"class":480,"line":1546},[2324],{"type":395,"tag":478,"props":2325,"children":2326},{"style":537},[2327],{"type":401,"value":2328},"    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n",{"type":395,"tag":478,"props":2330,"children":2331},{"class":480,"line":1582},[2332],{"type":395,"tag":478,"props":2333,"children":2334},{"style":537},[2335],{"type":401,"value":2336},"    // 如果当前浏览器连 document.createElement 都会报错，\n",{"type":395,"tag":478,"props":2338,"children":2339},{"class":480,"line":1591},[2340],{"type":395,"tag":478,"props":2341,"children":2342},{"style":537},[2343],{"type":401,"value":2344},"    // 那就没办法 shiv 了，只好假装一切正常...\n",{"type":395,"tag":478,"props":2346,"children":2347},{"class":480,"line":1604},[2348,2352,2356,2360,2365,2369],{"type":395,"tag":478,"props":2349,"children":2350},{"style":959},[2351],{"type":401,"value":1873},{"type":395,"tag":478,"props":2353,"children":2354},{"style":949},[2355],{"type":401,"value":714},{"type":395,"tag":478,"props":2357,"children":2358},{"style":556},[2359],{"type":401,"value":1882},{"type":395,"tag":478,"props":2361,"children":2362},{"style":491},[2363],{"type":401,"value":2364},"supportsUnknownElements",{"type":395,"tag":478,"props":2366,"children":2367},{"style":949},[2368],{"type":401,"value":1629},{"type":395,"tag":478,"props":2370,"children":2371},{"style":485},[2372],{"type":401,"value":1634},{"type":395,"tag":478,"props":2374,"children":2375},{"class":480,"line":1637},[2376],{"type":395,"tag":478,"props":2377,"children":2378},{"style":537},[2379],{"type":401,"value":2380},"      // 增强 createElement 和 createDocumentFragment\n",{"type":395,"tag":478,"props":2382,"children":2383},{"class":480,"line":1646},[2384,2389,2393,2397,2401,2405],{"type":395,"tag":478,"props":2385,"children":2386},{"style":672},[2387],{"type":401,"value":2388},"      shivMethods",{"type":395,"tag":478,"props":2390,"children":2391},{"style":949},[2392],{"type":401,"value":494},{"type":395,"tag":478,"props":2394,"children":2395},{"style":491},[2396],{"type":401,"value":1813},{"type":395,"tag":478,"props":2398,"children":2399},{"style":485},[2400],{"type":401,"value":515},{"type":395,"tag":478,"props":2402,"children":2403},{"style":491},[2404],{"type":401,"value":1833},{"type":395,"tag":478,"props":2406,"children":2407},{"style":949},[2408],{"type":401,"value":697},{"type":395,"tag":478,"props":2410,"children":2411},{"class":480,"line":1664},[2412],{"type":395,"tag":478,"props":2413,"children":2414},{"style":485},[2415],{"type":401,"value":1686},{"type":395,"tag":478,"props":2417,"children":2418},{"class":480,"line":1680},[2419,2423],{"type":395,"tag":478,"props":2420,"children":2421},{"style":959},[2422],{"type":401,"value":962},{"type":395,"tag":478,"props":2424,"children":2425},{"style":491},[2426],{"type":401,"value":2427}," ownerDocument\n",{"type":395,"tag":478,"props":2429,"children":2430},{"class":480,"line":1689},[2431],{"type":395,"tag":478,"props":2432,"children":2433},{"style":485},[2434],{"type":401,"value":2010},{"type":395,"tag":409,"props":2436,"children":2437},{},[2438],{"type":401,"value":2439},"接下来，仔细康康 shivMethods 方法。shivMethods 仿制了 createElement 和 createDocumentFragment 两个 API，将其挂载到 document._html5shiv。并通过装饰器模式增强了浏览器原生的 createElement 等 API 的功能。",{"type":395,"tag":467,"props":2441,"children":2443},{"className":469,"code":2442,"language":471,"meta":389,"style":389},"function shivMethods(ownerDocument, data) {\n    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n    if (!data.cache) {\n        data.cache = {}\n        data.createElem = ownerDocument.createElement\n        data.createFrag = ownerDocument.createDocumentFragment\n        data.frag = data.createFrag()\n    }\n\n    ownerDocument.createElement = function(nodeName) {\n      // shivMethods 可看作全局的 shiv 开关\n      if (!html5.shivMethods) {\n          return data.createElem(nodeName)\n      }\n      return createElement(nodeName, ownerDocument, data)\n    }\n\n    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n    // 最终返回 data.frag 的克隆函数\n    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n    // 猜测它只能在老版本 IE 上起作用\n    ownerDocument.createDocumentFragment = Function(\n      'html5,dataFrag', \n      'return function(){' +\n        'var clone=dataFrag.cloneNode(),create=clone.createElement' +\n        'html5.shivMethods&&(' +\n            // unroll the `createElement` calls\n            getElements().join().replace(/[\\w\\-:]+/g, function(nodeName) {\n            data.createElem(nodeName)\n            data.frag.createElement(nodeName)\n            return 'create(\"' + nodeName + '\")'\n            }) +\n        ')return clone' +\n      '}'\n    )(html5, data.frag)\n  }\n",[2444],{"type":395,"tag":474,"props":2445,"children":2446},{"__ignoreMap":389},[2447,2483,2491,2527,2550,2584,2617,2653,2660,2667,2709,2717,2754,2786,2794,2835,2842,2849,2857,2865,2873,2881,2910,2936,2956,2976,2997,3006,3105,3134,3170,3218,3236,3257,3273,3306],{"type":395,"tag":478,"props":2448,"children":2449},{"class":480,"line":481},[2450,2454,2459,2463,2467,2471,2475,2479],{"type":395,"tag":478,"props":2451,"children":2452},{"style":497},[2453],{"type":401,"value":500},{"type":395,"tag":478,"props":2455,"children":2456},{"style":672},[2457],{"type":401,"value":2458}," shivMethods",{"type":395,"tag":478,"props":2460,"children":2461},{"style":485},[2462],{"type":401,"value":494},{"type":395,"tag":478,"props":2464,"children":2465},{"style":507},[2466],{"type":401,"value":1813},{"type":395,"tag":478,"props":2468,"children":2469},{"style":485},[2470],{"type":401,"value":515},{"type":395,"tag":478,"props":2472,"children":2473},{"style":507},[2474],{"type":401,"value":1833},{"type":395,"tag":478,"props":2476,"children":2477},{"style":485},[2478],{"type":401,"value":525},{"type":395,"tag":478,"props":2480,"children":2481},{"style":485},[2482],{"type":401,"value":530},{"type":395,"tag":478,"props":2484,"children":2485},{"class":480,"line":533},[2486],{"type":395,"tag":478,"props":2487,"children":2488},{"style":537},[2489],{"type":401,"value":2490},"    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n",{"type":395,"tag":478,"props":2492,"children":2493},{"class":480,"line":543},[2494,2498,2502,2506,2510,2514,2519,2523],{"type":395,"tag":478,"props":2495,"children":2496},{"style":959},[2497],{"type":401,"value":1873},{"type":395,"tag":478,"props":2499,"children":2500},{"style":949},[2501],{"type":401,"value":714},{"type":395,"tag":478,"props":2503,"children":2504},{"style":556},[2505],{"type":401,"value":1882},{"type":395,"tag":478,"props":2507,"children":2508},{"style":491},[2509],{"type":401,"value":1887},{"type":395,"tag":478,"props":2511,"children":2512},{"style":485},[2513],{"type":401,"value":669},{"type":395,"tag":478,"props":2515,"children":2516},{"style":491},[2517],{"type":401,"value":2518},"cache",{"type":395,"tag":478,"props":2520,"children":2521},{"style":949},[2522],{"type":401,"value":1629},{"type":395,"tag":478,"props":2524,"children":2525},{"style":485},[2526],{"type":401,"value":1634},{"type":395,"tag":478,"props":2528,"children":2529},{"class":480,"line":917},[2530,2534,2538,2542,2546],{"type":395,"tag":478,"props":2531,"children":2532},{"style":491},[2533],{"type":401,"value":1903},{"type":395,"tag":478,"props":2535,"children":2536},{"style":485},[2537],{"type":401,"value":669},{"type":395,"tag":478,"props":2539,"children":2540},{"style":491},[2541],{"type":401,"value":2518},{"type":395,"tag":478,"props":2543,"children":2544},{"style":556},[2545],{"type":401,"value":933},{"type":395,"tag":478,"props":2547,"children":2548},{"style":485},[2549],{"type":401,"value":1742},{"type":395,"tag":478,"props":2551,"children":2552},{"class":480,"line":955},[2553,2557,2561,2566,2570,2575,2579],{"type":395,"tag":478,"props":2554,"children":2555},{"style":491},[2556],{"type":401,"value":1903},{"type":395,"tag":478,"props":2558,"children":2559},{"style":485},[2560],{"type":401,"value":669},{"type":395,"tag":478,"props":2562,"children":2563},{"style":491},[2564],{"type":401,"value":2565},"createElem",{"type":395,"tag":478,"props":2567,"children":2568},{"style":556},[2569],{"type":401,"value":933},{"type":395,"tag":478,"props":2571,"children":2572},{"style":491},[2573],{"type":401,"value":2574}," ownerDocument",{"type":395,"tag":478,"props":2576,"children":2577},{"style":485},[2578],{"type":401,"value":669},{"type":395,"tag":478,"props":2580,"children":2581},{"style":491},[2582],{"type":401,"value":2583},"createElement\n",{"type":395,"tag":478,"props":2585,"children":2586},{"class":480,"line":970},[2587,2591,2595,2600,2604,2608,2612],{"type":395,"tag":478,"props":2588,"children":2589},{"style":491},[2590],{"type":401,"value":1903},{"type":395,"tag":478,"props":2592,"children":2593},{"style":485},[2594],{"type":401,"value":669},{"type":395,"tag":478,"props":2596,"children":2597},{"style":491},[2598],{"type":401,"value":2599},"createFrag",{"type":395,"tag":478,"props":2601,"children":2602},{"style":556},[2603],{"type":401,"value":933},{"type":395,"tag":478,"props":2605,"children":2606},{"style":491},[2607],{"type":401,"value":2574},{"type":395,"tag":478,"props":2609,"children":2610},{"style":485},[2611],{"type":401,"value":669},{"type":395,"tag":478,"props":2613,"children":2614},{"style":491},[2615],{"type":401,"value":2616},"createDocumentFragment\n",{"type":395,"tag":478,"props":2618,"children":2619},{"class":480,"line":1013},[2620,2624,2628,2633,2637,2641,2645,2649],{"type":395,"tag":478,"props":2621,"children":2622},{"style":491},[2623],{"type":401,"value":1903},{"type":395,"tag":478,"props":2625,"children":2626},{"style":485},[2627],{"type":401,"value":669},{"type":395,"tag":478,"props":2629,"children":2630},{"style":491},[2631],{"type":401,"value":2632},"frag",{"type":395,"tag":478,"props":2634,"children":2635},{"style":556},[2636],{"type":401,"value":933},{"type":395,"tag":478,"props":2638,"children":2639},{"style":491},[2640],{"type":401,"value":1833},{"type":395,"tag":478,"props":2642,"children":2643},{"style":485},[2644],{"type":401,"value":669},{"type":395,"tag":478,"props":2646,"children":2647},{"style":672},[2648],{"type":401,"value":2599},{"type":395,"tag":478,"props":2650,"children":2651},{"style":949},[2652],{"type":401,"value":952},{"type":395,"tag":478,"props":2654,"children":2655},{"class":480,"line":1053},[2656],{"type":395,"tag":478,"props":2657,"children":2658},{"style":485},[2659],{"type":401,"value":1686},{"type":395,"tag":478,"props":2661,"children":2662},{"class":480,"line":1089},[2663],{"type":395,"tag":478,"props":2664,"children":2665},{"emptyLinePlaceholder":388},[2666],{"type":401,"value":1296},{"type":395,"tag":478,"props":2668,"children":2669},{"class":480,"line":1098},[2670,2675,2679,2683,2687,2692,2696,2701,2705],{"type":395,"tag":478,"props":2671,"children":2672},{"style":491},[2673],{"type":401,"value":2674},"    ownerDocument",{"type":395,"tag":478,"props":2676,"children":2677},{"style":485},[2678],{"type":401,"value":669},{"type":395,"tag":478,"props":2680,"children":2681},{"style":672},[2682],{"type":401,"value":675},{"type":395,"tag":478,"props":2684,"children":2685},{"style":556},[2686],{"type":401,"value":933},{"type":395,"tag":478,"props":2688,"children":2689},{"style":497},[2690],{"type":401,"value":2691}," function",{"type":395,"tag":478,"props":2693,"children":2694},{"style":485},[2695],{"type":401,"value":494},{"type":395,"tag":478,"props":2697,"children":2698},{"style":507},[2699],{"type":401,"value":2700},"nodeName",{"type":395,"tag":478,"props":2702,"children":2703},{"style":485},[2704],{"type":401,"value":525},{"type":395,"tag":478,"props":2706,"children":2707},{"style":485},[2708],{"type":401,"value":530},{"type":395,"tag":478,"props":2710,"children":2711},{"class":480,"line":1367},[2712],{"type":395,"tag":478,"props":2713,"children":2714},{"style":537},[2715],{"type":401,"value":2716},"      // shivMethods 可看作全局的 shiv 开关\n",{"type":395,"tag":478,"props":2718,"children":2719},{"class":480,"line":1376},[2720,2725,2729,2733,2737,2741,2746,2750],{"type":395,"tag":478,"props":2721,"children":2722},{"style":959},[2723],{"type":401,"value":2724},"      if",{"type":395,"tag":478,"props":2726,"children":2727},{"style":949},[2728],{"type":401,"value":714},{"type":395,"tag":478,"props":2730,"children":2731},{"style":556},[2732],{"type":401,"value":1882},{"type":395,"tag":478,"props":2734,"children":2735},{"style":491},[2736],{"type":401,"value":2120},{"type":395,"tag":478,"props":2738,"children":2739},{"style":485},[2740],{"type":401,"value":669},{"type":395,"tag":478,"props":2742,"children":2743},{"style":491},[2744],{"type":401,"value":2745},"shivMethods",{"type":395,"tag":478,"props":2747,"children":2748},{"style":949},[2749],{"type":401,"value":1629},{"type":395,"tag":478,"props":2751,"children":2752},{"style":485},[2753],{"type":401,"value":1634},{"type":395,"tag":478,"props":2755,"children":2756},{"class":480,"line":1419},[2757,2762,2766,2770,2774,2778,2782],{"type":395,"tag":478,"props":2758,"children":2759},{"style":959},[2760],{"type":401,"value":2761},"          return",{"type":395,"tag":478,"props":2763,"children":2764},{"style":491},[2765],{"type":401,"value":1833},{"type":395,"tag":478,"props":2767,"children":2768},{"style":485},[2769],{"type":401,"value":669},{"type":395,"tag":478,"props":2771,"children":2772},{"style":672},[2773],{"type":401,"value":2565},{"type":395,"tag":478,"props":2775,"children":2776},{"style":949},[2777],{"type":401,"value":494},{"type":395,"tag":478,"props":2779,"children":2780},{"style":491},[2781],{"type":401,"value":2700},{"type":395,"tag":478,"props":2783,"children":2784},{"style":949},[2785],{"type":401,"value":697},{"type":395,"tag":478,"props":2787,"children":2788},{"class":480,"line":1452},[2789],{"type":395,"tag":478,"props":2790,"children":2791},{"style":485},[2792],{"type":401,"value":2793},"      }\n",{"type":395,"tag":478,"props":2795,"children":2796},{"class":480,"line":1465},[2797,2802,2807,2811,2815,2819,2823,2827,2831],{"type":395,"tag":478,"props":2798,"children":2799},{"style":959},[2800],{"type":401,"value":2801},"      return",{"type":395,"tag":478,"props":2803,"children":2804},{"style":672},[2805],{"type":401,"value":2806}," createElement",{"type":395,"tag":478,"props":2808,"children":2809},{"style":949},[2810],{"type":401,"value":494},{"type":395,"tag":478,"props":2812,"children":2813},{"style":491},[2814],{"type":401,"value":2700},{"type":395,"tag":478,"props":2816,"children":2817},{"style":485},[2818],{"type":401,"value":515},{"type":395,"tag":478,"props":2820,"children":2821},{"style":491},[2822],{"type":401,"value":2574},{"type":395,"tag":478,"props":2824,"children":2825},{"style":485},[2826],{"type":401,"value":515},{"type":395,"tag":478,"props":2828,"children":2829},{"style":491},[2830],{"type":401,"value":1833},{"type":395,"tag":478,"props":2832,"children":2833},{"style":949},[2834],{"type":401,"value":697},{"type":395,"tag":478,"props":2836,"children":2837},{"class":480,"line":1506},[2838],{"type":395,"tag":478,"props":2839,"children":2840},{"style":485},[2841],{"type":401,"value":1686},{"type":395,"tag":478,"props":2843,"children":2844},{"class":480,"line":1546},[2845],{"type":395,"tag":478,"props":2846,"children":2847},{"emptyLinePlaceholder":388},[2848],{"type":401,"value":1296},{"type":395,"tag":478,"props":2850,"children":2851},{"class":480,"line":1582},[2852],{"type":395,"tag":478,"props":2853,"children":2854},{"style":537},[2855],{"type":401,"value":2856},"    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n",{"type":395,"tag":478,"props":2858,"children":2859},{"class":480,"line":1591},[2860],{"type":395,"tag":478,"props":2861,"children":2862},{"style":537},[2863],{"type":401,"value":2864},"    // 最终返回 data.frag 的克隆函数\n",{"type":395,"tag":478,"props":2866,"children":2867},{"class":480,"line":1604},[2868],{"type":395,"tag":478,"props":2869,"children":2870},{"style":537},[2871],{"type":401,"value":2872},"    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n",{"type":395,"tag":478,"props":2874,"children":2875},{"class":480,"line":1637},[2876],{"type":395,"tag":478,"props":2877,"children":2878},{"style":537},[2879],{"type":401,"value":2880},"    // 猜测它只能在老版本 IE 上起作用\n",{"type":395,"tag":478,"props":2882,"children":2883},{"class":480,"line":1646},[2884,2888,2892,2896,2900,2905],{"type":395,"tag":478,"props":2885,"children":2886},{"style":491},[2887],{"type":401,"value":2674},{"type":395,"tag":478,"props":2889,"children":2890},{"style":485},[2891],{"type":401,"value":669},{"type":395,"tag":478,"props":2893,"children":2894},{"style":491},[2895],{"type":401,"value":946},{"type":395,"tag":478,"props":2897,"children":2898},{"style":556},[2899],{"type":401,"value":933},{"type":395,"tag":478,"props":2901,"children":2902},{"style":672},[2903],{"type":401,"value":2904}," Function",{"type":395,"tag":478,"props":2906,"children":2907},{"style":949},[2908],{"type":401,"value":2909},"(\n",{"type":395,"tag":478,"props":2911,"children":2912},{"class":480,"line":1664},[2913,2918,2923,2927,2931],{"type":395,"tag":478,"props":2914,"children":2915},{"style":572},[2916],{"type":401,"value":2917},"      '",{"type":395,"tag":478,"props":2919,"children":2920},{"style":578},[2921],{"type":401,"value":2922},"html5,dataFrag",{"type":395,"tag":478,"props":2924,"children":2925},{"style":572},[2926],{"type":401,"value":684},{"type":395,"tag":478,"props":2928,"children":2929},{"style":485},[2930],{"type":401,"value":515},{"type":395,"tag":478,"props":2932,"children":2933},{"style":949},[2934],{"type":401,"value":2935}," \n",{"type":395,"tag":478,"props":2937,"children":2938},{"class":480,"line":1680},[2939,2943,2948,2952],{"type":395,"tag":478,"props":2940,"children":2941},{"style":572},[2942],{"type":401,"value":2917},{"type":395,"tag":478,"props":2944,"children":2945},{"style":578},[2946],{"type":401,"value":2947},"return function(){",{"type":395,"tag":478,"props":2949,"children":2950},{"style":572},[2951],{"type":401,"value":684},{"type":395,"tag":478,"props":2953,"children":2954},{"style":556},[2955],{"type":401,"value":2246},{"type":395,"tag":478,"props":2957,"children":2958},{"class":480,"line":1689},[2959,2963,2968,2972],{"type":395,"tag":478,"props":2960,"children":2961},{"style":572},[2962],{"type":401,"value":2232},{"type":395,"tag":478,"props":2964,"children":2965},{"style":578},[2966],{"type":401,"value":2967},"var clone=dataFrag.cloneNode(),create=clone.createElement",{"type":395,"tag":478,"props":2969,"children":2970},{"style":572},[2971],{"type":401,"value":684},{"type":395,"tag":478,"props":2973,"children":2974},{"style":556},[2975],{"type":401,"value":2246},{"type":395,"tag":478,"props":2977,"children":2979},{"class":480,"line":2978},26,[2980,2984,2989,2993],{"type":395,"tag":478,"props":2981,"children":2982},{"style":572},[2983],{"type":401,"value":2232},{"type":395,"tag":478,"props":2985,"children":2986},{"style":578},[2987],{"type":401,"value":2988},"html5.shivMethods&&(",{"type":395,"tag":478,"props":2990,"children":2991},{"style":572},[2992],{"type":401,"value":684},{"type":395,"tag":478,"props":2994,"children":2995},{"style":556},[2996],{"type":401,"value":2246},{"type":395,"tag":478,"props":2998,"children":3000},{"class":480,"line":2999},27,[3001],{"type":395,"tag":478,"props":3002,"children":3003},{"style":537},[3004],{"type":401,"value":3005},"            // unroll the `createElement` calls\n",{"type":395,"tag":478,"props":3007,"children":3009},{"class":480,"line":3008},28,[3010,3015,3019,3023,3028,3032,3036,3041,3045,3050,3055,3061,3066,3071,3075,3081,3085,3089,3093,3097,3101],{"type":395,"tag":478,"props":3011,"children":3012},{"style":672},[3013],{"type":401,"value":3014},"            getElements",{"type":395,"tag":478,"props":3016,"children":3017},{"style":949},[3018],{"type":401,"value":910},{"type":395,"tag":478,"props":3020,"children":3021},{"style":485},[3022],{"type":401,"value":669},{"type":395,"tag":478,"props":3024,"children":3025},{"style":672},[3026],{"type":401,"value":3027},"join",{"type":395,"tag":478,"props":3029,"children":3030},{"style":949},[3031],{"type":401,"value":910},{"type":395,"tag":478,"props":3033,"children":3034},{"style":485},[3035],{"type":401,"value":669},{"type":395,"tag":478,"props":3037,"children":3038},{"style":672},[3039],{"type":401,"value":3040},"replace",{"type":395,"tag":478,"props":3042,"children":3043},{"style":949},[3044],{"type":401,"value":494},{"type":395,"tag":478,"props":3046,"children":3047},{"style":572},[3048],{"type":401,"value":3049},"/",{"type":395,"tag":478,"props":3051,"children":3053},{"style":3052},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3054],{"type":401,"value":1847},{"type":395,"tag":478,"props":3056,"children":3058},{"style":3057},"--shiki-light:#91B859;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3059],{"type":401,"value":3060},"\\w\\-:",{"type":395,"tag":478,"props":3062,"children":3063},{"style":3052},[3064],{"type":401,"value":3065},"]",{"type":395,"tag":478,"props":3067,"children":3068},{"style":556},[3069],{"type":401,"value":3070},"+",{"type":395,"tag":478,"props":3072,"children":3073},{"style":572},[3074],{"type":401,"value":3049},{"type":395,"tag":478,"props":3076,"children":3078},{"style":3077},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3079],{"type":401,"value":3080},"g",{"type":395,"tag":478,"props":3082,"children":3083},{"style":485},[3084],{"type":401,"value":515},{"type":395,"tag":478,"props":3086,"children":3087},{"style":497},[3088],{"type":401,"value":2691},{"type":395,"tag":478,"props":3090,"children":3091},{"style":485},[3092],{"type":401,"value":494},{"type":395,"tag":478,"props":3094,"children":3095},{"style":507},[3096],{"type":401,"value":2700},{"type":395,"tag":478,"props":3098,"children":3099},{"style":485},[3100],{"type":401,"value":525},{"type":395,"tag":478,"props":3102,"children":3103},{"style":485},[3104],{"type":401,"value":530},{"type":395,"tag":478,"props":3106,"children":3108},{"class":480,"line":3107},29,[3109,3114,3118,3122,3126,3130],{"type":395,"tag":478,"props":3110,"children":3111},{"style":491},[3112],{"type":401,"value":3113},"            data",{"type":395,"tag":478,"props":3115,"children":3116},{"style":485},[3117],{"type":401,"value":669},{"type":395,"tag":478,"props":3119,"children":3120},{"style":672},[3121],{"type":401,"value":2565},{"type":395,"tag":478,"props":3123,"children":3124},{"style":949},[3125],{"type":401,"value":494},{"type":395,"tag":478,"props":3127,"children":3128},{"style":491},[3129],{"type":401,"value":2700},{"type":395,"tag":478,"props":3131,"children":3132},{"style":949},[3133],{"type":401,"value":697},{"type":395,"tag":478,"props":3135,"children":3137},{"class":480,"line":3136},30,[3138,3142,3146,3150,3154,3158,3162,3166],{"type":395,"tag":478,"props":3139,"children":3140},{"style":491},[3141],{"type":401,"value":3113},{"type":395,"tag":478,"props":3143,"children":3144},{"style":485},[3145],{"type":401,"value":669},{"type":395,"tag":478,"props":3147,"children":3148},{"style":491},[3149],{"type":401,"value":2632},{"type":395,"tag":478,"props":3151,"children":3152},{"style":485},[3153],{"type":401,"value":669},{"type":395,"tag":478,"props":3155,"children":3156},{"style":672},[3157],{"type":401,"value":675},{"type":395,"tag":478,"props":3159,"children":3160},{"style":949},[3161],{"type":401,"value":494},{"type":395,"tag":478,"props":3163,"children":3164},{"style":491},[3165],{"type":401,"value":2700},{"type":395,"tag":478,"props":3167,"children":3168},{"style":949},[3169],{"type":401,"value":697},{"type":395,"tag":478,"props":3171,"children":3173},{"class":480,"line":3172},31,[3174,3178,3182,3187,3191,3196,3201,3205,3209,3214],{"type":395,"tag":478,"props":3175,"children":3176},{"style":959},[3177],{"type":401,"value":1458},{"type":395,"tag":478,"props":3179,"children":3180},{"style":572},[3181],{"type":401,"value":835},{"type":395,"tag":478,"props":3183,"children":3184},{"style":578},[3185],{"type":401,"value":3186},"create(\"",{"type":395,"tag":478,"props":3188,"children":3189},{"style":572},[3190],{"type":401,"value":684},{"type":395,"tag":478,"props":3192,"children":3193},{"style":556},[3194],{"type":401,"value":3195}," +",{"type":395,"tag":478,"props":3197,"children":3198},{"style":491},[3199],{"type":401,"value":3200}," nodeName",{"type":395,"tag":478,"props":3202,"children":3203},{"style":556},[3204],{"type":401,"value":3195},{"type":395,"tag":478,"props":3206,"children":3207},{"style":572},[3208],{"type":401,"value":835},{"type":395,"tag":478,"props":3210,"children":3211},{"style":578},[3212],{"type":401,"value":3213},"\")",{"type":395,"tag":478,"props":3215,"children":3216},{"style":572},[3217],{"type":401,"value":845},{"type":395,"tag":478,"props":3219,"children":3221},{"class":480,"line":3220},32,[3222,3227,3231],{"type":395,"tag":478,"props":3223,"children":3224},{"style":485},[3225],{"type":401,"value":3226},"            }",{"type":395,"tag":478,"props":3228,"children":3229},{"style":949},[3230],{"type":401,"value":1629},{"type":395,"tag":478,"props":3232,"children":3233},{"style":556},[3234],{"type":401,"value":3235},"+\n",{"type":395,"tag":478,"props":3237,"children":3239},{"class":480,"line":3238},33,[3240,3244,3249,3253],{"type":395,"tag":478,"props":3241,"children":3242},{"style":572},[3243],{"type":401,"value":2232},{"type":395,"tag":478,"props":3245,"children":3246},{"style":578},[3247],{"type":401,"value":3248},")return clone",{"type":395,"tag":478,"props":3250,"children":3251},{"style":572},[3252],{"type":401,"value":684},{"type":395,"tag":478,"props":3254,"children":3255},{"style":556},[3256],{"type":401,"value":2246},{"type":395,"tag":478,"props":3258,"children":3260},{"class":480,"line":3259},34,[3261,3265,3269],{"type":395,"tag":478,"props":3262,"children":3263},{"style":572},[3264],{"type":401,"value":2917},{"type":395,"tag":478,"props":3266,"children":3267},{"style":578},[3268],{"type":401,"value":549},{"type":395,"tag":478,"props":3270,"children":3271},{"style":572},[3272],{"type":401,"value":845},{"type":395,"tag":478,"props":3274,"children":3276},{"class":480,"line":3275},35,[3277,3282,3286,3290,3294,3298,3302],{"type":395,"tag":478,"props":3278,"children":3279},{"style":949},[3280],{"type":401,"value":3281},"    )(",{"type":395,"tag":478,"props":3283,"children":3284},{"style":491},[3285],{"type":401,"value":2120},{"type":395,"tag":478,"props":3287,"children":3288},{"style":485},[3289],{"type":401,"value":515},{"type":395,"tag":478,"props":3291,"children":3292},{"style":491},[3293],{"type":401,"value":1833},{"type":395,"tag":478,"props":3295,"children":3296},{"style":485},[3297],{"type":401,"value":669},{"type":395,"tag":478,"props":3299,"children":3300},{"style":491},[3301],{"type":401,"value":2632},{"type":395,"tag":478,"props":3303,"children":3304},{"style":949},[3305],{"type":401,"value":697},{"type":395,"tag":478,"props":3307,"children":3309},{"class":480,"line":3308},36,[3310],{"type":395,"tag":478,"props":3311,"children":3312},{"style":485},[3313],{"type":401,"value":2010},{"type":395,"tag":409,"props":3315,"children":3316},{},[3317],{"type":401,"value":3318},"小插曲。我在浏览器测试时发现，若像上面这个函数一样，将 document.createDocumentFrament 先缓存，再调用，会发生报错：",{"type":395,"tag":467,"props":3320,"children":3322},{"className":469,"code":3321,"language":471,"meta":389,"style":389},"data = {}\ndata.createFrag = document.createDocumentFragment\ndata.frag = data.createFrag()\n\n// >>> Uncaught TypeError: Illegal invocation\n",[3323],{"type":395,"tag":474,"props":3324,"children":3325},{"__ignoreMap":389},[3326,3342,3374,3410,3417],{"type":395,"tag":478,"props":3327,"children":3328},{"class":480,"line":481},[3329,3334,3338],{"type":395,"tag":478,"props":3330,"children":3331},{"style":491},[3332],{"type":401,"value":3333},"data ",{"type":395,"tag":478,"props":3335,"children":3336},{"style":556},[3337],{"type":401,"value":660},{"type":395,"tag":478,"props":3339,"children":3340},{"style":485},[3341],{"type":401,"value":1742},{"type":395,"tag":478,"props":3343,"children":3344},{"class":480,"line":533},[3345,3349,3353,3358,3362,3366,3370],{"type":395,"tag":478,"props":3346,"children":3347},{"style":491},[3348],{"type":401,"value":1887},{"type":395,"tag":478,"props":3350,"children":3351},{"style":485},[3352],{"type":401,"value":669},{"type":395,"tag":478,"props":3354,"children":3355},{"style":491},[3356],{"type":401,"value":3357},"createFrag ",{"type":395,"tag":478,"props":3359,"children":3360},{"style":556},[3361],{"type":401,"value":660},{"type":395,"tag":478,"props":3363,"children":3364},{"style":491},[3365],{"type":401,"value":520},{"type":395,"tag":478,"props":3367,"children":3368},{"style":485},[3369],{"type":401,"value":669},{"type":395,"tag":478,"props":3371,"children":3372},{"style":491},[3373],{"type":401,"value":2616},{"type":395,"tag":478,"props":3375,"children":3376},{"class":480,"line":543},[3377,3381,3385,3390,3394,3398,3402,3406],{"type":395,"tag":478,"props":3378,"children":3379},{"style":491},[3380],{"type":401,"value":1887},{"type":395,"tag":478,"props":3382,"children":3383},{"style":485},[3384],{"type":401,"value":669},{"type":395,"tag":478,"props":3386,"children":3387},{"style":491},[3388],{"type":401,"value":3389},"frag ",{"type":395,"tag":478,"props":3391,"children":3392},{"style":556},[3393],{"type":401,"value":660},{"type":395,"tag":478,"props":3395,"children":3396},{"style":491},[3397],{"type":401,"value":1833},{"type":395,"tag":478,"props":3399,"children":3400},{"style":485},[3401],{"type":401,"value":669},{"type":395,"tag":478,"props":3403,"children":3404},{"style":672},[3405],{"type":401,"value":2599},{"type":395,"tag":478,"props":3407,"children":3408},{"style":491},[3409],{"type":401,"value":952},{"type":395,"tag":478,"props":3411,"children":3412},{"class":480,"line":917},[3413],{"type":395,"tag":478,"props":3414,"children":3415},{"emptyLinePlaceholder":388},[3416],{"type":401,"value":1296},{"type":395,"tag":478,"props":3418,"children":3419},{"class":480,"line":955},[3420],{"type":395,"tag":478,"props":3421,"children":3422},{"style":537},[3423],{"type":401,"value":3424},"// >>> Uncaught TypeError: Illegal invocation\n",{"type":395,"tag":409,"props":3426,"children":3427},{},[3428],{"type":401,"value":3429},"由于没有具体的报错原因，只能暂时猜测是 this 指向的锅。更改 this 指向后，再试了一次，这次没得问题。在 GitHub issues 中没有人提过这个问题，所以我只能猜测因为所有现代浏览器都支持使用原生 API 创建非标准元素，所以不会走 shivMethods 的逻辑。",{"type":395,"tag":467,"props":3431,"children":3433},{"className":469,"code":3432,"language":471,"meta":389,"style":389},"data = {}\ndata.createFrag = document.createDocumentFragment.bind(document)\ndata.frag = data.createFrag()\n\n// >>> #document-fragment\n",[3434],{"type":395,"tag":474,"props":3435,"children":3436},{"__ignoreMap":389},[3437,3452,3497,3532,3539],{"type":395,"tag":478,"props":3438,"children":3439},{"class":480,"line":481},[3440,3444,3448],{"type":395,"tag":478,"props":3441,"children":3442},{"style":491},[3443],{"type":401,"value":3333},{"type":395,"tag":478,"props":3445,"children":3446},{"style":556},[3447],{"type":401,"value":660},{"type":395,"tag":478,"props":3449,"children":3450},{"style":485},[3451],{"type":401,"value":1742},{"type":395,"tag":478,"props":3453,"children":3454},{"class":480,"line":533},[3455,3459,3463,3467,3471,3475,3479,3483,3487,3492],{"type":395,"tag":478,"props":3456,"children":3457},{"style":491},[3458],{"type":401,"value":1887},{"type":395,"tag":478,"props":3460,"children":3461},{"style":485},[3462],{"type":401,"value":669},{"type":395,"tag":478,"props":3464,"children":3465},{"style":491},[3466],{"type":401,"value":3357},{"type":395,"tag":478,"props":3468,"children":3469},{"style":556},[3470],{"type":401,"value":660},{"type":395,"tag":478,"props":3472,"children":3473},{"style":491},[3474],{"type":401,"value":520},{"type":395,"tag":478,"props":3476,"children":3477},{"style":485},[3478],{"type":401,"value":669},{"type":395,"tag":478,"props":3480,"children":3481},{"style":491},[3482],{"type":401,"value":946},{"type":395,"tag":478,"props":3484,"children":3485},{"style":485},[3486],{"type":401,"value":669},{"type":395,"tag":478,"props":3488,"children":3489},{"style":672},[3490],{"type":401,"value":3491},"bind",{"type":395,"tag":478,"props":3493,"children":3494},{"style":491},[3495],{"type":401,"value":3496},"(document)\n",{"type":395,"tag":478,"props":3498,"children":3499},{"class":480,"line":543},[3500,3504,3508,3512,3516,3520,3524,3528],{"type":395,"tag":478,"props":3501,"children":3502},{"style":491},[3503],{"type":401,"value":1887},{"type":395,"tag":478,"props":3505,"children":3506},{"style":485},[3507],{"type":401,"value":669},{"type":395,"tag":478,"props":3509,"children":3510},{"style":491},[3511],{"type":401,"value":3389},{"type":395,"tag":478,"props":3513,"children":3514},{"style":556},[3515],{"type":401,"value":660},{"type":395,"tag":478,"props":3517,"children":3518},{"style":491},[3519],{"type":401,"value":1833},{"type":395,"tag":478,"props":3521,"children":3522},{"style":485},[3523],{"type":401,"value":669},{"type":395,"tag":478,"props":3525,"children":3526},{"style":672},[3527],{"type":401,"value":2599},{"type":395,"tag":478,"props":3529,"children":3530},{"style":491},[3531],{"type":401,"value":952},{"type":395,"tag":478,"props":3533,"children":3534},{"class":480,"line":917},[3535],{"type":395,"tag":478,"props":3536,"children":3537},{"emptyLinePlaceholder":388},[3538],{"type":401,"value":1296},{"type":395,"tag":478,"props":3540,"children":3541},{"class":480,"line":955},[3542],{"type":395,"tag":478,"props":3543,"children":3544},{"style":537},[3545],{"type":401,"value":3546},"// >>> #document-fragment\n",{"type":395,"tag":409,"props":3548,"children":3549},{},[3550],{"type":401,"value":3551},"我们继续。以下代码是对 createElement 的仿制， 用于返回一个已经 shiv 过的元素。主要是用来兼容原生 document.createElement 不支持创建一个非规范的元素的情况。比方说，HTML5 标签中有 article 元素，document.createElement 不支持的话，就需要调用此仿制 API。",{"type":395,"tag":467,"props":3553,"children":3555},{"className":469,"code":3554,"language":471,"meta":389,"style":389},"function createElement(nodeName, ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createElement(nodeName)\n    }\n    if (!data) {\n        data = getExpandoData(ownerDocument)\n    }\n    var node\n\n    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n    if (data.cache[nodeName]) {\n        node = data.cache[nodeName].cloneNode()\n    } else \n    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n    // 则创建一个新元素并存到缓存中\n    if (saveClones.test(nodeName)) {\n        node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode()\n    } else \n    // 如果是不能被克隆的对象，那就直接创建吧...\n    {\n        node = data.createElem(nodeName)\n    }\n\n    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n    // Avoid adding some elements to fragments in IE \u003C 9 because\n    // * Attributes like `name` or `type` cannot be set/changed once an element\n    //   is inserted into a document/fragment\n    // * Link elements with `src` attributes that are inaccessible, as with\n    //   a 403 response, will cause the tab/window to crash\n    // * Script elements appended to fragments will execute when their `src`\n    //   or `text` property is set\n    return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn \n        ? data.frag.appendChild(node) \n        : node\n  }\n",[3556],{"type":395,"tag":474,"props":3557,"children":3558},{"__ignoreMap":389},[3559,3599,3622,3654,3661,3688,3715,3722,3734,3741,3749,3789,3837,3853,3861,3869,3911,3991,4006,4014,4022,4057,4064,4071,4079,4087,4095,4103,4111,4119,4127,4135,4216,4258,4270],{"type":395,"tag":478,"props":3560,"children":3561},{"class":480,"line":481},[3562,3566,3570,3574,3578,3582,3586,3590,3594],{"type":395,"tag":478,"props":3563,"children":3564},{"style":497},[3565],{"type":401,"value":500},{"type":395,"tag":478,"props":3567,"children":3568},{"style":672},[3569],{"type":401,"value":2806},{"type":395,"tag":478,"props":3571,"children":3572},{"style":485},[3573],{"type":401,"value":494},{"type":395,"tag":478,"props":3575,"children":3576},{"style":507},[3577],{"type":401,"value":2700},{"type":395,"tag":478,"props":3579,"children":3580},{"style":485},[3581],{"type":401,"value":515},{"type":395,"tag":478,"props":3583,"children":3584},{"style":507},[3585],{"type":401,"value":2574},{"type":395,"tag":478,"props":3587,"children":3588},{"style":485},[3589],{"type":401,"value":515},{"type":395,"tag":478,"props":3591,"children":3592},{"style":507},[3593],{"type":401,"value":1833},{"type":395,"tag":478,"props":3595,"children":3596},{"style":485},[3597],{"type":401,"value":3598},"){\n",{"type":395,"tag":478,"props":3600,"children":3601},{"class":480,"line":533},[3602,3606,3610,3614,3618],{"type":395,"tag":478,"props":3603,"children":3604},{"style":959},[3605],{"type":401,"value":1873},{"type":395,"tag":478,"props":3607,"children":3608},{"style":949},[3609],{"type":401,"value":494},{"type":395,"tag":478,"props":3611,"children":3612},{"style":491},[3613],{"type":401,"value":2364},{"type":395,"tag":478,"props":3615,"children":3616},{"style":949},[3617],{"type":401,"value":525},{"type":395,"tag":478,"props":3619,"children":3620},{"style":485},[3621],{"type":401,"value":1634},{"type":395,"tag":478,"props":3623,"children":3624},{"class":480,"line":543},[3625,3630,3634,3638,3642,3646,3650],{"type":395,"tag":478,"props":3626,"children":3627},{"style":959},[3628],{"type":401,"value":3629},"        return",{"type":395,"tag":478,"props":3631,"children":3632},{"style":491},[3633],{"type":401,"value":2574},{"type":395,"tag":478,"props":3635,"children":3636},{"style":485},[3637],{"type":401,"value":669},{"type":395,"tag":478,"props":3639,"children":3640},{"style":672},[3641],{"type":401,"value":675},{"type":395,"tag":478,"props":3643,"children":3644},{"style":949},[3645],{"type":401,"value":494},{"type":395,"tag":478,"props":3647,"children":3648},{"style":491},[3649],{"type":401,"value":2700},{"type":395,"tag":478,"props":3651,"children":3652},{"style":949},[3653],{"type":401,"value":697},{"type":395,"tag":478,"props":3655,"children":3656},{"class":480,"line":917},[3657],{"type":395,"tag":478,"props":3658,"children":3659},{"style":485},[3660],{"type":401,"value":1686},{"type":395,"tag":478,"props":3662,"children":3663},{"class":480,"line":955},[3664,3668,3672,3676,3680,3684],{"type":395,"tag":478,"props":3665,"children":3666},{"style":959},[3667],{"type":401,"value":1873},{"type":395,"tag":478,"props":3669,"children":3670},{"style":949},[3671],{"type":401,"value":714},{"type":395,"tag":478,"props":3673,"children":3674},{"style":556},[3675],{"type":401,"value":1882},{"type":395,"tag":478,"props":3677,"children":3678},{"style":491},[3679],{"type":401,"value":1887},{"type":395,"tag":478,"props":3681,"children":3682},{"style":949},[3683],{"type":401,"value":1629},{"type":395,"tag":478,"props":3685,"children":3686},{"style":485},[3687],{"type":401,"value":1634},{"type":395,"tag":478,"props":3689,"children":3690},{"class":480,"line":970},[3691,3695,3699,3703,3707,3711],{"type":395,"tag":478,"props":3692,"children":3693},{"style":491},[3694],{"type":401,"value":1903},{"type":395,"tag":478,"props":3696,"children":3697},{"style":556},[3698],{"type":401,"value":933},{"type":395,"tag":478,"props":3700,"children":3701},{"style":672},[3702],{"type":401,"value":1804},{"type":395,"tag":478,"props":3704,"children":3705},{"style":949},[3706],{"type":401,"value":494},{"type":395,"tag":478,"props":3708,"children":3709},{"style":491},[3710],{"type":401,"value":1813},{"type":395,"tag":478,"props":3712,"children":3713},{"style":949},[3714],{"type":401,"value":697},{"type":395,"tag":478,"props":3716,"children":3717},{"class":480,"line":1013},[3718],{"type":395,"tag":478,"props":3719,"children":3720},{"style":485},[3721],{"type":401,"value":1686},{"type":395,"tag":478,"props":3723,"children":3724},{"class":480,"line":1053},[3725,3729],{"type":395,"tag":478,"props":3726,"children":3727},{"style":497},[3728],{"type":401,"value":923},{"type":395,"tag":478,"props":3730,"children":3731},{"style":491},[3732],{"type":401,"value":3733}," node\n",{"type":395,"tag":478,"props":3735,"children":3736},{"class":480,"line":1089},[3737],{"type":395,"tag":478,"props":3738,"children":3739},{"emptyLinePlaceholder":388},[3740],{"type":401,"value":1296},{"type":395,"tag":478,"props":3742,"children":3743},{"class":480,"line":1098},[3744],{"type":395,"tag":478,"props":3745,"children":3746},{"style":537},[3747],{"type":401,"value":3748},"    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n",{"type":395,"tag":478,"props":3750,"children":3751},{"class":480,"line":1367},[3752,3756,3760,3764,3768,3772,3776,3780,3785],{"type":395,"tag":478,"props":3753,"children":3754},{"style":959},[3755],{"type":401,"value":1873},{"type":395,"tag":478,"props":3757,"children":3758},{"style":949},[3759],{"type":401,"value":714},{"type":395,"tag":478,"props":3761,"children":3762},{"style":491},[3763],{"type":401,"value":1887},{"type":395,"tag":478,"props":3765,"children":3766},{"style":485},[3767],{"type":401,"value":669},{"type":395,"tag":478,"props":3769,"children":3770},{"style":491},[3771],{"type":401,"value":2518},{"type":395,"tag":478,"props":3773,"children":3774},{"style":949},[3775],{"type":401,"value":1847},{"type":395,"tag":478,"props":3777,"children":3778},{"style":491},[3779],{"type":401,"value":2700},{"type":395,"tag":478,"props":3781,"children":3782},{"style":949},[3783],{"type":401,"value":3784},"]) ",{"type":395,"tag":478,"props":3786,"children":3787},{"style":485},[3788],{"type":401,"value":1634},{"type":395,"tag":478,"props":3790,"children":3791},{"class":480,"line":1376},[3792,3797,3801,3805,3809,3813,3817,3821,3825,3829,3833],{"type":395,"tag":478,"props":3793,"children":3794},{"style":491},[3795],{"type":401,"value":3796},"        node",{"type":395,"tag":478,"props":3798,"children":3799},{"style":556},[3800],{"type":401,"value":933},{"type":395,"tag":478,"props":3802,"children":3803},{"style":491},[3804],{"type":401,"value":1833},{"type":395,"tag":478,"props":3806,"children":3807},{"style":485},[3808],{"type":401,"value":669},{"type":395,"tag":478,"props":3810,"children":3811},{"style":491},[3812],{"type":401,"value":2518},{"type":395,"tag":478,"props":3814,"children":3815},{"style":949},[3816],{"type":401,"value":1847},{"type":395,"tag":478,"props":3818,"children":3819},{"style":491},[3820],{"type":401,"value":2700},{"type":395,"tag":478,"props":3822,"children":3823},{"style":949},[3824],{"type":401,"value":3065},{"type":395,"tag":478,"props":3826,"children":3827},{"style":485},[3828],{"type":401,"value":669},{"type":395,"tag":478,"props":3830,"children":3831},{"style":672},[3832],{"type":401,"value":989},{"type":395,"tag":478,"props":3834,"children":3835},{"style":949},[3836],{"type":401,"value":952},{"type":395,"tag":478,"props":3838,"children":3839},{"class":480,"line":1419},[3840,3844,3849],{"type":395,"tag":478,"props":3841,"children":3842},{"style":485},[3843],{"type":401,"value":1610},{"type":395,"tag":478,"props":3845,"children":3846},{"style":959},[3847],{"type":401,"value":3848}," else",{"type":395,"tag":478,"props":3850,"children":3851},{"style":949},[3852],{"type":401,"value":2935},{"type":395,"tag":478,"props":3854,"children":3855},{"class":480,"line":1452},[3856],{"type":395,"tag":478,"props":3857,"children":3858},{"style":537},[3859],{"type":401,"value":3860},"    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n",{"type":395,"tag":478,"props":3862,"children":3863},{"class":480,"line":1465},[3864],{"type":395,"tag":478,"props":3865,"children":3866},{"style":537},[3867],{"type":401,"value":3868},"    // 则创建一个新元素并存到缓存中\n",{"type":395,"tag":478,"props":3870,"children":3871},{"class":480,"line":1506},[3872,3876,3880,3885,3889,3894,3898,3902,3907],{"type":395,"tag":478,"props":3873,"children":3874},{"style":959},[3875],{"type":401,"value":1873},{"type":395,"tag":478,"props":3877,"children":3878},{"style":949},[3879],{"type":401,"value":714},{"type":395,"tag":478,"props":3881,"children":3882},{"style":491},[3883],{"type":401,"value":3884},"saveClones",{"type":395,"tag":478,"props":3886,"children":3887},{"style":485},[3888],{"type":401,"value":669},{"type":395,"tag":478,"props":3890,"children":3891},{"style":672},[3892],{"type":401,"value":3893},"test",{"type":395,"tag":478,"props":3895,"children":3896},{"style":949},[3897],{"type":401,"value":494},{"type":395,"tag":478,"props":3899,"children":3900},{"style":491},[3901],{"type":401,"value":2700},{"type":395,"tag":478,"props":3903,"children":3904},{"style":949},[3905],{"type":401,"value":3906},")) ",{"type":395,"tag":478,"props":3908,"children":3909},{"style":485},[3910],{"type":401,"value":1634},{"type":395,"tag":478,"props":3912,"children":3913},{"class":480,"line":1546},[3914,3918,3922,3926,3930,3934,3938,3942,3946,3950,3954,3958,3962,3966,3970,3974,3979,3983,3987],{"type":395,"tag":478,"props":3915,"children":3916},{"style":491},[3917],{"type":401,"value":3796},{"type":395,"tag":478,"props":3919,"children":3920},{"style":556},[3921],{"type":401,"value":933},{"type":395,"tag":478,"props":3923,"children":3924},{"style":949},[3925],{"type":401,"value":714},{"type":395,"tag":478,"props":3927,"children":3928},{"style":491},[3929],{"type":401,"value":1887},{"type":395,"tag":478,"props":3931,"children":3932},{"style":485},[3933],{"type":401,"value":669},{"type":395,"tag":478,"props":3935,"children":3936},{"style":491},[3937],{"type":401,"value":2518},{"type":395,"tag":478,"props":3939,"children":3940},{"style":949},[3941],{"type":401,"value":1847},{"type":395,"tag":478,"props":3943,"children":3944},{"style":491},[3945],{"type":401,"value":2700},{"type":395,"tag":478,"props":3947,"children":3948},{"style":949},[3949],{"type":401,"value":1945},{"type":395,"tag":478,"props":3951,"children":3952},{"style":556},[3953],{"type":401,"value":660},{"type":395,"tag":478,"props":3955,"children":3956},{"style":491},[3957],{"type":401,"value":1833},{"type":395,"tag":478,"props":3959,"children":3960},{"style":485},[3961],{"type":401,"value":669},{"type":395,"tag":478,"props":3963,"children":3964},{"style":672},[3965],{"type":401,"value":2565},{"type":395,"tag":478,"props":3967,"children":3968},{"style":949},[3969],{"type":401,"value":494},{"type":395,"tag":478,"props":3971,"children":3972},{"style":491},[3973],{"type":401,"value":2700},{"type":395,"tag":478,"props":3975,"children":3976},{"style":949},[3977],{"type":401,"value":3978},"))",{"type":395,"tag":478,"props":3980,"children":3981},{"style":485},[3982],{"type":401,"value":669},{"type":395,"tag":478,"props":3984,"children":3985},{"style":672},[3986],{"type":401,"value":989},{"type":395,"tag":478,"props":3988,"children":3989},{"style":949},[3990],{"type":401,"value":952},{"type":395,"tag":478,"props":3992,"children":3993},{"class":480,"line":1582},[3994,3998,4002],{"type":395,"tag":478,"props":3995,"children":3996},{"style":485},[3997],{"type":401,"value":1610},{"type":395,"tag":478,"props":3999,"children":4000},{"style":959},[4001],{"type":401,"value":3848},{"type":395,"tag":478,"props":4003,"children":4004},{"style":949},[4005],{"type":401,"value":2935},{"type":395,"tag":478,"props":4007,"children":4008},{"class":480,"line":1591},[4009],{"type":395,"tag":478,"props":4010,"children":4011},{"style":537},[4012],{"type":401,"value":4013},"    // 如果是不能被克隆的对象，那就直接创建吧...\n",{"type":395,"tag":478,"props":4015,"children":4016},{"class":480,"line":1604},[4017],{"type":395,"tag":478,"props":4018,"children":4019},{"style":485},[4020],{"type":401,"value":4021},"    {\n",{"type":395,"tag":478,"props":4023,"children":4024},{"class":480,"line":1637},[4025,4029,4033,4037,4041,4045,4049,4053],{"type":395,"tag":478,"props":4026,"children":4027},{"style":491},[4028],{"type":401,"value":3796},{"type":395,"tag":478,"props":4030,"children":4031},{"style":556},[4032],{"type":401,"value":933},{"type":395,"tag":478,"props":4034,"children":4035},{"style":491},[4036],{"type":401,"value":1833},{"type":395,"tag":478,"props":4038,"children":4039},{"style":485},[4040],{"type":401,"value":669},{"type":395,"tag":478,"props":4042,"children":4043},{"style":672},[4044],{"type":401,"value":2565},{"type":395,"tag":478,"props":4046,"children":4047},{"style":949},[4048],{"type":401,"value":494},{"type":395,"tag":478,"props":4050,"children":4051},{"style":491},[4052],{"type":401,"value":2700},{"type":395,"tag":478,"props":4054,"children":4055},{"style":949},[4056],{"type":401,"value":697},{"type":395,"tag":478,"props":4058,"children":4059},{"class":480,"line":1646},[4060],{"type":395,"tag":478,"props":4061,"children":4062},{"style":485},[4063],{"type":401,"value":1686},{"type":395,"tag":478,"props":4065,"children":4066},{"class":480,"line":1664},[4067],{"type":395,"tag":478,"props":4068,"children":4069},{"emptyLinePlaceholder":388},[4070],{"type":401,"value":1296},{"type":395,"tag":478,"props":4072,"children":4073},{"class":480,"line":1680},[4074],{"type":395,"tag":478,"props":4075,"children":4076},{"style":537},[4077],{"type":401,"value":4078},"    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n",{"type":395,"tag":478,"props":4080,"children":4081},{"class":480,"line":1689},[4082],{"type":395,"tag":478,"props":4083,"children":4084},{"style":537},[4085],{"type":401,"value":4086},"    // Avoid adding some elements to fragments in IE \u003C 9 because\n",{"type":395,"tag":478,"props":4088,"children":4089},{"class":480,"line":2978},[4090],{"type":395,"tag":478,"props":4091,"children":4092},{"style":537},[4093],{"type":401,"value":4094},"    // * Attributes like `name` or `type` cannot be set/changed once an element\n",{"type":395,"tag":478,"props":4096,"children":4097},{"class":480,"line":2999},[4098],{"type":395,"tag":478,"props":4099,"children":4100},{"style":537},[4101],{"type":401,"value":4102},"    //   is inserted into a document/fragment\n",{"type":395,"tag":478,"props":4104,"children":4105},{"class":480,"line":3008},[4106],{"type":395,"tag":478,"props":4107,"children":4108},{"style":537},[4109],{"type":401,"value":4110},"    // * Link elements with `src` attributes that are inaccessible, as with\n",{"type":395,"tag":478,"props":4112,"children":4113},{"class":480,"line":3107},[4114],{"type":395,"tag":478,"props":4115,"children":4116},{"style":537},[4117],{"type":401,"value":4118},"    //   a 403 response, will cause the tab/window to crash\n",{"type":395,"tag":478,"props":4120,"children":4121},{"class":480,"line":3136},[4122],{"type":395,"tag":478,"props":4123,"children":4124},{"style":537},[4125],{"type":401,"value":4126},"    // * Script elements appended to fragments will execute when their `src`\n",{"type":395,"tag":478,"props":4128,"children":4129},{"class":480,"line":3172},[4130],{"type":395,"tag":478,"props":4131,"children":4132},{"style":537},[4133],{"type":401,"value":4134},"    //   or `text` property is set\n",{"type":395,"tag":478,"props":4136,"children":4137},{"class":480,"line":3220},[4138,4142,4147,4151,4156,4160,4164,4169,4173,4177,4181,4185,4189,4194,4198,4203,4207,4212],{"type":395,"tag":478,"props":4139,"children":4140},{"style":959},[4141],{"type":401,"value":962},{"type":395,"tag":478,"props":4143,"children":4144},{"style":491},[4145],{"type":401,"value":4146}," node",{"type":395,"tag":478,"props":4148,"children":4149},{"style":485},[4150],{"type":401,"value":669},{"type":395,"tag":478,"props":4152,"children":4153},{"style":491},[4154],{"type":401,"value":4155},"canHaveChildren",{"type":395,"tag":478,"props":4157,"children":4158},{"style":556},[4159],{"type":401,"value":2134},{"type":395,"tag":478,"props":4161,"children":4162},{"style":556},[4163],{"type":401,"value":2139},{"type":395,"tag":478,"props":4165,"children":4166},{"style":491},[4167],{"type":401,"value":4168},"reSkip",{"type":395,"tag":478,"props":4170,"children":4171},{"style":485},[4172],{"type":401,"value":669},{"type":395,"tag":478,"props":4174,"children":4175},{"style":672},[4176],{"type":401,"value":3893},{"type":395,"tag":478,"props":4178,"children":4179},{"style":949},[4180],{"type":401,"value":494},{"type":395,"tag":478,"props":4182,"children":4183},{"style":491},[4184],{"type":401,"value":2700},{"type":395,"tag":478,"props":4186,"children":4187},{"style":949},[4188],{"type":401,"value":1629},{"type":395,"tag":478,"props":4190,"children":4191},{"style":556},[4192],{"type":401,"value":4193},"&&",{"type":395,"tag":478,"props":4195,"children":4196},{"style":556},[4197],{"type":401,"value":2139},{"type":395,"tag":478,"props":4199,"children":4200},{"style":491},[4201],{"type":401,"value":4202},"node",{"type":395,"tag":478,"props":4204,"children":4205},{"style":485},[4206],{"type":401,"value":669},{"type":395,"tag":478,"props":4208,"children":4209},{"style":491},[4210],{"type":401,"value":4211},"tagUrn",{"type":395,"tag":478,"props":4213,"children":4214},{"style":949},[4215],{"type":401,"value":2935},{"type":395,"tag":478,"props":4217,"children":4218},{"class":480,"line":3238},[4219,4224,4228,4232,4236,4240,4245,4249,4253],{"type":395,"tag":478,"props":4220,"children":4221},{"style":556},[4222],{"type":401,"value":4223},"        ?",{"type":395,"tag":478,"props":4225,"children":4226},{"style":491},[4227],{"type":401,"value":1833},{"type":395,"tag":478,"props":4229,"children":4230},{"style":485},[4231],{"type":401,"value":669},{"type":395,"tag":478,"props":4233,"children":4234},{"style":491},[4235],{"type":401,"value":2632},{"type":395,"tag":478,"props":4237,"children":4238},{"style":485},[4239],{"type":401,"value":669},{"type":395,"tag":478,"props":4241,"children":4242},{"style":672},[4243],{"type":401,"value":4244},"appendChild",{"type":395,"tag":478,"props":4246,"children":4247},{"style":949},[4248],{"type":401,"value":494},{"type":395,"tag":478,"props":4250,"children":4251},{"style":491},[4252],{"type":401,"value":4202},{"type":395,"tag":478,"props":4254,"children":4255},{"style":949},[4256],{"type":401,"value":4257},") \n",{"type":395,"tag":478,"props":4259,"children":4260},{"class":480,"line":3259},[4261,4266],{"type":395,"tag":478,"props":4262,"children":4263},{"style":556},[4264],{"type":401,"value":4265},"        :",{"type":395,"tag":478,"props":4267,"children":4268},{"style":491},[4269],{"type":401,"value":3733},{"type":395,"tag":478,"props":4271,"children":4272},{"class":480,"line":3275},[4273],{"type":395,"tag":478,"props":4274,"children":4275},{"style":485},[4276],{"type":401,"value":2010},{"type":395,"tag":409,"props":4278,"children":4279},{},[4280],{"type":401,"value":4281},"和 createElement 类似，createDocumentFragment 也需要仿制。",{"type":395,"tag":467,"props":4283,"children":4285},{"className":469,"code":4284,"language":471,"meta":389,"style":389},"function createDocumentFragment(ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createDocumentFragment()\n    }\n    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n    data = data || getExpandoData(ownerDocument)\n    var clone = data.frag.cloneNode(),\n        i = 0,\n        elems = getElements(),\n        l = elems.length\n    for(;i\u003Cl;i++){\n        // 返回的 documentFragment 包含了所有 shived 元素\n        clone.createElement(elems[i])\n    }\n    return clone\n  }\n",[4286],{"type":395,"tag":474,"props":4287,"children":4288},{"__ignoreMap":389},[4289,4321,4344,4367,4374,4382,4418,4462,4483,4508,4534,4586,4594,4632,4639,4651],{"type":395,"tag":478,"props":4290,"children":4291},{"class":480,"line":481},[4292,4296,4301,4305,4309,4313,4317],{"type":395,"tag":478,"props":4293,"children":4294},{"style":497},[4295],{"type":401,"value":500},{"type":395,"tag":478,"props":4297,"children":4298},{"style":672},[4299],{"type":401,"value":4300}," createDocumentFragment",{"type":395,"tag":478,"props":4302,"children":4303},{"style":485},[4304],{"type":401,"value":494},{"type":395,"tag":478,"props":4306,"children":4307},{"style":507},[4308],{"type":401,"value":1813},{"type":395,"tag":478,"props":4310,"children":4311},{"style":485},[4312],{"type":401,"value":515},{"type":395,"tag":478,"props":4314,"children":4315},{"style":507},[4316],{"type":401,"value":1833},{"type":395,"tag":478,"props":4318,"children":4319},{"style":485},[4320],{"type":401,"value":3598},{"type":395,"tag":478,"props":4322,"children":4323},{"class":480,"line":533},[4324,4328,4332,4336,4340],{"type":395,"tag":478,"props":4325,"children":4326},{"style":959},[4327],{"type":401,"value":1873},{"type":395,"tag":478,"props":4329,"children":4330},{"style":949},[4331],{"type":401,"value":494},{"type":395,"tag":478,"props":4333,"children":4334},{"style":491},[4335],{"type":401,"value":2364},{"type":395,"tag":478,"props":4337,"children":4338},{"style":949},[4339],{"type":401,"value":525},{"type":395,"tag":478,"props":4341,"children":4342},{"style":485},[4343],{"type":401,"value":1634},{"type":395,"tag":478,"props":4345,"children":4346},{"class":480,"line":543},[4347,4351,4355,4359,4363],{"type":395,"tag":478,"props":4348,"children":4349},{"style":959},[4350],{"type":401,"value":3629},{"type":395,"tag":478,"props":4352,"children":4353},{"style":491},[4354],{"type":401,"value":2574},{"type":395,"tag":478,"props":4356,"children":4357},{"style":485},[4358],{"type":401,"value":669},{"type":395,"tag":478,"props":4360,"children":4361},{"style":672},[4362],{"type":401,"value":946},{"type":395,"tag":478,"props":4364,"children":4365},{"style":949},[4366],{"type":401,"value":952},{"type":395,"tag":478,"props":4368,"children":4369},{"class":480,"line":917},[4370],{"type":395,"tag":478,"props":4371,"children":4372},{"style":485},[4373],{"type":401,"value":1686},{"type":395,"tag":478,"props":4375,"children":4376},{"class":480,"line":955},[4377],{"type":395,"tag":478,"props":4378,"children":4379},{"style":537},[4380],{"type":401,"value":4381},"    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n",{"type":395,"tag":478,"props":4383,"children":4384},{"class":480,"line":970},[4385,4390,4394,4398,4402,4406,4410,4414],{"type":395,"tag":478,"props":4386,"children":4387},{"style":491},[4388],{"type":401,"value":4389},"    data",{"type":395,"tag":478,"props":4391,"children":4392},{"style":556},[4393],{"type":401,"value":933},{"type":395,"tag":478,"props":4395,"children":4396},{"style":491},[4397],{"type":401,"value":1833},{"type":395,"tag":478,"props":4399,"children":4400},{"style":556},[4401],{"type":401,"value":897},{"type":395,"tag":478,"props":4403,"children":4404},{"style":672},[4405],{"type":401,"value":1804},{"type":395,"tag":478,"props":4407,"children":4408},{"style":949},[4409],{"type":401,"value":494},{"type":395,"tag":478,"props":4411,"children":4412},{"style":491},[4413],{"type":401,"value":1813},{"type":395,"tag":478,"props":4415,"children":4416},{"style":949},[4417],{"type":401,"value":697},{"type":395,"tag":478,"props":4419,"children":4420},{"class":480,"line":1013},[4421,4425,4430,4434,4438,4442,4446,4450,4454,4458],{"type":395,"tag":478,"props":4422,"children":4423},{"style":497},[4424],{"type":401,"value":923},{"type":395,"tag":478,"props":4426,"children":4427},{"style":491},[4428],{"type":401,"value":4429}," clone",{"type":395,"tag":478,"props":4431,"children":4432},{"style":556},[4433],{"type":401,"value":933},{"type":395,"tag":478,"props":4435,"children":4436},{"style":491},[4437],{"type":401,"value":1833},{"type":395,"tag":478,"props":4439,"children":4440},{"style":485},[4441],{"type":401,"value":669},{"type":395,"tag":478,"props":4443,"children":4444},{"style":491},[4445],{"type":401,"value":2632},{"type":395,"tag":478,"props":4447,"children":4448},{"style":485},[4449],{"type":401,"value":669},{"type":395,"tag":478,"props":4451,"children":4452},{"style":672},[4453],{"type":401,"value":989},{"type":395,"tag":478,"props":4455,"children":4456},{"style":949},[4457],{"type":401,"value":910},{"type":395,"tag":478,"props":4459,"children":4460},{"style":485},[4461],{"type":401,"value":2216},{"type":395,"tag":478,"props":4463,"children":4464},{"class":480,"line":1053},[4465,4470,4474,4479],{"type":395,"tag":478,"props":4466,"children":4467},{"style":491},[4468],{"type":401,"value":4469},"        i",{"type":395,"tag":478,"props":4471,"children":4472},{"style":556},[4473],{"type":401,"value":933},{"type":395,"tag":478,"props":4475,"children":4476},{"style":889},[4477],{"type":401,"value":4478}," 0",{"type":395,"tag":478,"props":4480,"children":4481},{"style":485},[4482],{"type":401,"value":2216},{"type":395,"tag":478,"props":4484,"children":4485},{"class":480,"line":1089},[4486,4491,4495,4500,4504],{"type":395,"tag":478,"props":4487,"children":4488},{"style":491},[4489],{"type":401,"value":4490},"        elems",{"type":395,"tag":478,"props":4492,"children":4493},{"style":556},[4494],{"type":401,"value":933},{"type":395,"tag":478,"props":4496,"children":4497},{"style":672},[4498],{"type":401,"value":4499}," getElements",{"type":395,"tag":478,"props":4501,"children":4502},{"style":949},[4503],{"type":401,"value":910},{"type":395,"tag":478,"props":4505,"children":4506},{"style":485},[4507],{"type":401,"value":2216},{"type":395,"tag":478,"props":4509,"children":4510},{"class":480,"line":1098},[4511,4516,4520,4525,4529],{"type":395,"tag":478,"props":4512,"children":4513},{"style":491},[4514],{"type":401,"value":4515},"        l",{"type":395,"tag":478,"props":4517,"children":4518},{"style":556},[4519],{"type":401,"value":933},{"type":395,"tag":478,"props":4521,"children":4522},{"style":491},[4523],{"type":401,"value":4524}," elems",{"type":395,"tag":478,"props":4526,"children":4527},{"style":485},[4528],{"type":401,"value":669},{"type":395,"tag":478,"props":4530,"children":4531},{"style":878},[4532],{"type":401,"value":4533},"length\n",{"type":395,"tag":478,"props":4535,"children":4536},{"class":480,"line":1367},[4537,4542,4546,4550,4555,4560,4565,4569,4573,4578,4582],{"type":395,"tag":478,"props":4538,"children":4539},{"style":959},[4540],{"type":401,"value":4541},"    for",{"type":395,"tag":478,"props":4543,"children":4544},{"style":949},[4545],{"type":401,"value":494},{"type":395,"tag":478,"props":4547,"children":4548},{"style":485},[4549],{"type":401,"value":488},{"type":395,"tag":478,"props":4551,"children":4552},{"style":491},[4553],{"type":401,"value":4554},"i",{"type":395,"tag":478,"props":4556,"children":4557},{"style":556},[4558],{"type":401,"value":4559},"\u003C",{"type":395,"tag":478,"props":4561,"children":4562},{"style":491},[4563],{"type":401,"value":4564},"l",{"type":395,"tag":478,"props":4566,"children":4567},{"style":485},[4568],{"type":401,"value":488},{"type":395,"tag":478,"props":4570,"children":4571},{"style":491},[4572],{"type":401,"value":4554},{"type":395,"tag":478,"props":4574,"children":4575},{"style":556},[4576],{"type":401,"value":4577},"++",{"type":395,"tag":478,"props":4579,"children":4580},{"style":949},[4581],{"type":401,"value":525},{"type":395,"tag":478,"props":4583,"children":4584},{"style":485},[4585],{"type":401,"value":1634},{"type":395,"tag":478,"props":4587,"children":4588},{"class":480,"line":1376},[4589],{"type":395,"tag":478,"props":4590,"children":4591},{"style":537},[4592],{"type":401,"value":4593},"        // 返回的 documentFragment 包含了所有 shived 元素\n",{"type":395,"tag":478,"props":4595,"children":4596},{"class":480,"line":1419},[4597,4602,4606,4610,4614,4619,4623,4627],{"type":395,"tag":478,"props":4598,"children":4599},{"style":491},[4600],{"type":401,"value":4601},"        clone",{"type":395,"tag":478,"props":4603,"children":4604},{"style":485},[4605],{"type":401,"value":669},{"type":395,"tag":478,"props":4607,"children":4608},{"style":672},[4609],{"type":401,"value":675},{"type":395,"tag":478,"props":4611,"children":4612},{"style":949},[4613],{"type":401,"value":494},{"type":395,"tag":478,"props":4615,"children":4616},{"style":491},[4617],{"type":401,"value":4618},"elems",{"type":395,"tag":478,"props":4620,"children":4621},{"style":949},[4622],{"type":401,"value":1847},{"type":395,"tag":478,"props":4624,"children":4625},{"style":491},[4626],{"type":401,"value":4554},{"type":395,"tag":478,"props":4628,"children":4629},{"style":949},[4630],{"type":401,"value":4631},"])\n",{"type":395,"tag":478,"props":4633,"children":4634},{"class":480,"line":1452},[4635],{"type":395,"tag":478,"props":4636,"children":4637},{"style":485},[4638],{"type":401,"value":1686},{"type":395,"tag":478,"props":4640,"children":4641},{"class":480,"line":1465},[4642,4646],{"type":395,"tag":478,"props":4643,"children":4644},{"style":959},[4645],{"type":401,"value":962},{"type":395,"tag":478,"props":4647,"children":4648},{"style":491},[4649],{"type":401,"value":4650}," clone\n",{"type":395,"tag":478,"props":4652,"children":4653},{"class":480,"line":1506},[4654],{"type":395,"tag":478,"props":4655,"children":4656},{"style":485},[4657],{"type":401,"value":2010},{"type":395,"tag":409,"props":4659,"children":4660},{},[4661],{"type":401,"value":4662},"可以发现，需要 shiv 的元素都存在了 getElements 这个方法中，我们来看看具体实现。",{"type":395,"tag":467,"props":4664,"children":4666},{"className":469,"code":4665,"language":471,"meta":389,"style":389},"// getElements 返回 html5.elments 的数组形式\n// 看来 getElements 也只是一个类似 getter 的存在\nfunction getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\n\n// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\nvar html5 = {\n    // options 是外部调用 html5shiv 的接口参数\n    'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video'\n}\n",[4667],{"type":395,"tag":474,"props":4668,"children":4669},{"__ignoreMap":389},[4670,4678,4686,4705,4739,4817,4825,4832,4840,4860,4868,4921],{"type":395,"tag":478,"props":4671,"children":4672},{"class":480,"line":481},[4673],{"type":395,"tag":478,"props":4674,"children":4675},{"style":537},[4676],{"type":401,"value":4677},"// getElements 返回 html5.elments 的数组形式\n",{"type":395,"tag":478,"props":4679,"children":4680},{"class":480,"line":533},[4681],{"type":395,"tag":478,"props":4682,"children":4683},{"style":537},[4684],{"type":401,"value":4685},"// 看来 getElements 也只是一个类似 getter 的存在\n",{"type":395,"tag":478,"props":4687,"children":4688},{"class":480,"line":543},[4689,4693,4697,4701],{"type":395,"tag":478,"props":4690,"children":4691},{"style":497},[4692],{"type":401,"value":500},{"type":395,"tag":478,"props":4694,"children":4695},{"style":672},[4696],{"type":401,"value":4499},{"type":395,"tag":478,"props":4698,"children":4699},{"style":485},[4700],{"type":401,"value":910},{"type":395,"tag":478,"props":4702,"children":4703},{"style":485},[4704],{"type":401,"value":530},{"type":395,"tag":478,"props":4706,"children":4707},{"class":480,"line":917},[4708,4712,4717,4721,4726,4730,4735],{"type":395,"tag":478,"props":4709,"children":4710},{"style":497},[4711],{"type":401,"value":923},{"type":395,"tag":478,"props":4713,"children":4714},{"style":491},[4715],{"type":401,"value":4716}," elements",{"type":395,"tag":478,"props":4718,"children":4719},{"style":556},[4720],{"type":401,"value":933},{"type":395,"tag":478,"props":4722,"children":4723},{"style":491},[4724],{"type":401,"value":4725}," html5",{"type":395,"tag":478,"props":4727,"children":4728},{"style":485},[4729],{"type":401,"value":669},{"type":395,"tag":478,"props":4731,"children":4732},{"style":491},[4733],{"type":401,"value":4734},"elements",{"type":395,"tag":478,"props":4736,"children":4737},{"style":485},[4738],{"type":401,"value":620},{"type":395,"tag":478,"props":4740,"children":4741},{"class":480,"line":955},[4742,4746,4751,4755,4759,4763,4768,4772,4776,4780,4784,4789,4793,4797,4801,4805,4809,4813],{"type":395,"tag":478,"props":4743,"children":4744},{"style":959},[4745],{"type":401,"value":962},{"type":395,"tag":478,"props":4747,"children":4748},{"style":556},[4749],{"type":401,"value":4750}," typeof",{"type":395,"tag":478,"props":4752,"children":4753},{"style":491},[4754],{"type":401,"value":4716},{"type":395,"tag":478,"props":4756,"children":4757},{"style":556},[4758],{"type":401,"value":886},{"type":395,"tag":478,"props":4760,"children":4761},{"style":572},[4762],{"type":401,"value":835},{"type":395,"tag":478,"props":4764,"children":4765},{"style":578},[4766],{"type":401,"value":4767},"string",{"type":395,"tag":478,"props":4769,"children":4770},{"style":572},[4771],{"type":401,"value":684},{"type":395,"tag":478,"props":4773,"children":4774},{"style":556},[4775],{"type":401,"value":591},{"type":395,"tag":478,"props":4777,"children":4778},{"style":491},[4779],{"type":401,"value":4716},{"type":395,"tag":478,"props":4781,"children":4782},{"style":485},[4783],{"type":401,"value":669},{"type":395,"tag":478,"props":4785,"children":4786},{"style":672},[4787],{"type":401,"value":4788},"split",{"type":395,"tag":478,"props":4790,"children":4791},{"style":949},[4792],{"type":401,"value":494},{"type":395,"tag":478,"props":4794,"children":4795},{"style":572},[4796],{"type":401,"value":684},{"type":395,"tag":478,"props":4798,"children":4799},{"style":572},[4800],{"type":401,"value":835},{"type":395,"tag":478,"props":4802,"children":4803},{"style":949},[4804],{"type":401,"value":1629},{"type":395,"tag":478,"props":4806,"children":4807},{"style":556},[4808],{"type":401,"value":600},{"type":395,"tag":478,"props":4810,"children":4811},{"style":491},[4812],{"type":401,"value":4716},{"type":395,"tag":478,"props":4814,"children":4815},{"style":485},[4816],{"type":401,"value":620},{"type":395,"tag":478,"props":4818,"children":4819},{"class":480,"line":970},[4820],{"type":395,"tag":478,"props":4821,"children":4822},{"style":485},[4823],{"type":401,"value":4824},"}\n",{"type":395,"tag":478,"props":4826,"children":4827},{"class":480,"line":1013},[4828],{"type":395,"tag":478,"props":4829,"children":4830},{"emptyLinePlaceholder":388},[4831],{"type":401,"value":1296},{"type":395,"tag":478,"props":4833,"children":4834},{"class":480,"line":1053},[4835],{"type":395,"tag":478,"props":4836,"children":4837},{"style":537},[4838],{"type":401,"value":4839},"// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\n",{"type":395,"tag":478,"props":4841,"children":4842},{"class":480,"line":1089},[4843,4847,4852,4856],{"type":395,"tag":478,"props":4844,"children":4845},{"style":497},[4846],{"type":401,"value":1728},{"type":395,"tag":478,"props":4848,"children":4849},{"style":491},[4850],{"type":401,"value":4851}," html5 ",{"type":395,"tag":478,"props":4853,"children":4854},{"style":556},[4855],{"type":401,"value":660},{"type":395,"tag":478,"props":4857,"children":4858},{"style":485},[4859],{"type":401,"value":530},{"type":395,"tag":478,"props":4861,"children":4862},{"class":480,"line":1098},[4863],{"type":395,"tag":478,"props":4864,"children":4865},{"style":537},[4866],{"type":401,"value":4867},"    // options 是外部调用 html5shiv 的接口参数\n",{"type":395,"tag":478,"props":4869,"children":4870},{"class":480,"line":1367},[4871,4876,4881,4885,4889,4894,4898,4903,4908,4912,4917],{"type":395,"tag":478,"props":4872,"children":4873},{"style":572},[4874],{"type":401,"value":4875},"    '",{"type":395,"tag":478,"props":4877,"children":4879},{"style":4878},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[4880],{"type":401,"value":4734},{"type":395,"tag":478,"props":4882,"children":4883},{"style":572},[4884],{"type":401,"value":684},{"type":395,"tag":478,"props":4886,"children":4887},{"style":485},[4888],{"type":401,"value":600},{"type":395,"tag":478,"props":4890,"children":4891},{"style":491},[4892],{"type":401,"value":4893}," options",{"type":395,"tag":478,"props":4895,"children":4896},{"style":485},[4897],{"type":401,"value":669},{"type":395,"tag":478,"props":4899,"children":4900},{"style":491},[4901],{"type":401,"value":4902},"elements ",{"type":395,"tag":478,"props":4904,"children":4905},{"style":556},[4906],{"type":401,"value":4907},"||",{"type":395,"tag":478,"props":4909,"children":4910},{"style":572},[4911],{"type":401,"value":835},{"type":395,"tag":478,"props":4913,"children":4914},{"style":578},[4915],{"type":401,"value":4916},"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",{"type":395,"tag":478,"props":4918,"children":4919},{"style":572},[4920],{"type":401,"value":845},{"type":395,"tag":478,"props":4922,"children":4923},{"class":480,"line":1376},[4924],{"type":395,"tag":478,"props":4925,"children":4926},{"style":485},[4927],{"type":401,"value":4824},{"type":395,"tag":456,"props":4929,"children":4931},{"id":4930},"私有方法",[4932],{"type":401,"value":4930},{"type":395,"tag":409,"props":4934,"children":4935},{},[4936],{"type":401,"value":4937},"接下来是几个私有方法。和 shiv 原理不相关，所以不重要。",{"type":395,"tag":467,"props":4939,"children":4941},{"className":469,"code":4940,"language":471,"meta":389,"style":389},"/**\n * Creates a style sheet with the given CSS text and adds it to the document.\n * 在文档头部添加样式标签\n */\nfunction addStyleSheet(ownerDocument, cssText) {\n    var p = ownerDocument.createElement('p'),\n        parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement\n    // ? 这个 'x' 应该是兼容性考虑\n    p.innerHTML = 'x\u003Cstyle>' + cssText + '\u003C/style>'\n    return parent.insertBefore(p.lastChild, parent.firstChild)\n}\n",[4942],{"type":395,"tag":474,"props":4943,"children":4944},{"__ignoreMap":389},[4945,4953,4961,4969,4977,5014,5066,5139,5147,5205,5264],{"type":395,"tag":478,"props":4946,"children":4947},{"class":480,"line":481},[4948],{"type":395,"tag":478,"props":4949,"children":4950},{"style":537},[4951],{"type":401,"value":4952},"/**\n",{"type":395,"tag":478,"props":4954,"children":4955},{"class":480,"line":533},[4956],{"type":395,"tag":478,"props":4957,"children":4958},{"style":537},[4959],{"type":401,"value":4960}," * Creates a style sheet with the given CSS text and adds it to the document.\n",{"type":395,"tag":478,"props":4962,"children":4963},{"class":480,"line":543},[4964],{"type":395,"tag":478,"props":4965,"children":4966},{"style":537},[4967],{"type":401,"value":4968}," * 在文档头部添加样式标签\n",{"type":395,"tag":478,"props":4970,"children":4971},{"class":480,"line":917},[4972],{"type":395,"tag":478,"props":4973,"children":4974},{"style":537},[4975],{"type":401,"value":4976}," */\n",{"type":395,"tag":478,"props":4978,"children":4979},{"class":480,"line":955},[4980,4984,4989,4993,4997,5001,5006,5010],{"type":395,"tag":478,"props":4981,"children":4982},{"style":497},[4983],{"type":401,"value":500},{"type":395,"tag":478,"props":4985,"children":4986},{"style":672},[4987],{"type":401,"value":4988}," addStyleSheet",{"type":395,"tag":478,"props":4990,"children":4991},{"style":485},[4992],{"type":401,"value":494},{"type":395,"tag":478,"props":4994,"children":4995},{"style":507},[4996],{"type":401,"value":1813},{"type":395,"tag":478,"props":4998,"children":4999},{"style":485},[5000],{"type":401,"value":515},{"type":395,"tag":478,"props":5002,"children":5003},{"style":507},[5004],{"type":401,"value":5005}," cssText",{"type":395,"tag":478,"props":5007,"children":5008},{"style":485},[5009],{"type":401,"value":525},{"type":395,"tag":478,"props":5011,"children":5012},{"style":485},[5013],{"type":401,"value":530},{"type":395,"tag":478,"props":5015,"children":5016},{"class":480,"line":970},[5017,5021,5026,5030,5034,5038,5042,5046,5050,5054,5058,5062],{"type":395,"tag":478,"props":5018,"children":5019},{"style":497},[5020],{"type":401,"value":923},{"type":395,"tag":478,"props":5022,"children":5023},{"style":491},[5024],{"type":401,"value":5025}," p",{"type":395,"tag":478,"props":5027,"children":5028},{"style":556},[5029],{"type":401,"value":933},{"type":395,"tag":478,"props":5031,"children":5032},{"style":491},[5033],{"type":401,"value":2574},{"type":395,"tag":478,"props":5035,"children":5036},{"style":485},[5037],{"type":401,"value":669},{"type":395,"tag":478,"props":5039,"children":5040},{"style":672},[5041],{"type":401,"value":675},{"type":395,"tag":478,"props":5043,"children":5044},{"style":949},[5045],{"type":401,"value":494},{"type":395,"tag":478,"props":5047,"children":5048},{"style":572},[5049],{"type":401,"value":684},{"type":395,"tag":478,"props":5051,"children":5052},{"style":578},[5053],{"type":401,"value":409},{"type":395,"tag":478,"props":5055,"children":5056},{"style":572},[5057],{"type":401,"value":684},{"type":395,"tag":478,"props":5059,"children":5060},{"style":949},[5061],{"type":401,"value":525},{"type":395,"tag":478,"props":5063,"children":5064},{"style":485},[5065],{"type":401,"value":2216},{"type":395,"tag":478,"props":5067,"children":5068},{"class":480,"line":1013},[5069,5074,5078,5082,5086,5091,5095,5099,5104,5108,5113,5118,5122,5126,5130,5134],{"type":395,"tag":478,"props":5070,"children":5071},{"style":491},[5072],{"type":401,"value":5073},"        parent",{"type":395,"tag":478,"props":5075,"children":5076},{"style":556},[5077],{"type":401,"value":933},{"type":395,"tag":478,"props":5079,"children":5080},{"style":491},[5081],{"type":401,"value":2574},{"type":395,"tag":478,"props":5083,"children":5084},{"style":485},[5085],{"type":401,"value":669},{"type":395,"tag":478,"props":5087,"children":5088},{"style":672},[5089],{"type":401,"value":5090},"getElementsByTagName",{"type":395,"tag":478,"props":5092,"children":5093},{"style":949},[5094],{"type":401,"value":494},{"type":395,"tag":478,"props":5096,"children":5097},{"style":572},[5098],{"type":401,"value":684},{"type":395,"tag":478,"props":5100,"children":5101},{"style":578},[5102],{"type":401,"value":5103},"head",{"type":395,"tag":478,"props":5105,"children":5106},{"style":572},[5107],{"type":401,"value":684},{"type":395,"tag":478,"props":5109,"children":5110},{"style":949},[5111],{"type":401,"value":5112},")[",{"type":395,"tag":478,"props":5114,"children":5115},{"style":889},[5116],{"type":401,"value":5117},"0",{"type":395,"tag":478,"props":5119,"children":5120},{"style":949},[5121],{"type":401,"value":1945},{"type":395,"tag":478,"props":5123,"children":5124},{"style":556},[5125],{"type":401,"value":4907},{"type":395,"tag":478,"props":5127,"children":5128},{"style":491},[5129],{"type":401,"value":2574},{"type":395,"tag":478,"props":5131,"children":5132},{"style":485},[5133],{"type":401,"value":669},{"type":395,"tag":478,"props":5135,"children":5136},{"style":491},[5137],{"type":401,"value":5138},"documentElement\n",{"type":395,"tag":478,"props":5140,"children":5141},{"class":480,"line":1053},[5142],{"type":395,"tag":478,"props":5143,"children":5144},{"style":537},[5145],{"type":401,"value":5146},"    // ? 这个 'x' 应该是兼容性考虑\n",{"type":395,"tag":478,"props":5148,"children":5149},{"class":480,"line":1089},[5150,5155,5159,5163,5167,5171,5176,5180,5184,5188,5192,5196,5201],{"type":395,"tag":478,"props":5151,"children":5152},{"style":491},[5153],{"type":401,"value":5154},"    p",{"type":395,"tag":478,"props":5156,"children":5157},{"style":485},[5158],{"type":401,"value":669},{"type":395,"tag":478,"props":5160,"children":5161},{"style":491},[5162],{"type":401,"value":1216},{"type":395,"tag":478,"props":5164,"children":5165},{"style":556},[5166],{"type":401,"value":933},{"type":395,"tag":478,"props":5168,"children":5169},{"style":572},[5170],{"type":401,"value":835},{"type":395,"tag":478,"props":5172,"children":5173},{"style":578},[5174],{"type":401,"value":5175},"x\u003Cstyle>",{"type":395,"tag":478,"props":5177,"children":5178},{"style":572},[5179],{"type":401,"value":684},{"type":395,"tag":478,"props":5181,"children":5182},{"style":556},[5183],{"type":401,"value":3195},{"type":395,"tag":478,"props":5185,"children":5186},{"style":491},[5187],{"type":401,"value":5005},{"type":395,"tag":478,"props":5189,"children":5190},{"style":556},[5191],{"type":401,"value":3195},{"type":395,"tag":478,"props":5193,"children":5194},{"style":572},[5195],{"type":401,"value":835},{"type":395,"tag":478,"props":5197,"children":5198},{"style":578},[5199],{"type":401,"value":5200},"\u003C/style>",{"type":395,"tag":478,"props":5202,"children":5203},{"style":572},[5204],{"type":401,"value":845},{"type":395,"tag":478,"props":5206,"children":5207},{"class":480,"line":1098},[5208,5212,5217,5221,5226,5230,5234,5238,5243,5247,5251,5255,5260],{"type":395,"tag":478,"props":5209,"children":5210},{"style":959},[5211],{"type":401,"value":962},{"type":395,"tag":478,"props":5213,"children":5214},{"style":491},[5215],{"type":401,"value":5216}," parent",{"type":395,"tag":478,"props":5218,"children":5219},{"style":485},[5220],{"type":401,"value":669},{"type":395,"tag":478,"props":5222,"children":5223},{"style":672},[5224],{"type":401,"value":5225},"insertBefore",{"type":395,"tag":478,"props":5227,"children":5228},{"style":949},[5229],{"type":401,"value":494},{"type":395,"tag":478,"props":5231,"children":5232},{"style":491},[5233],{"type":401,"value":409},{"type":395,"tag":478,"props":5235,"children":5236},{"style":485},[5237],{"type":401,"value":669},{"type":395,"tag":478,"props":5239,"children":5240},{"style":491},[5241],{"type":401,"value":5242},"lastChild",{"type":395,"tag":478,"props":5244,"children":5245},{"style":485},[5246],{"type":401,"value":515},{"type":395,"tag":478,"props":5248,"children":5249},{"style":491},[5250],{"type":401,"value":5216},{"type":395,"tag":478,"props":5252,"children":5253},{"style":485},[5254],{"type":401,"value":669},{"type":395,"tag":478,"props":5256,"children":5257},{"style":491},[5258],{"type":401,"value":5259},"firstChild",{"type":395,"tag":478,"props":5261,"children":5262},{"style":949},[5263],{"type":401,"value":697},{"type":395,"tag":478,"props":5265,"children":5266},{"class":480,"line":1367},[5267],{"type":395,"tag":478,"props":5268,"children":5269},{"style":485},[5270],{"type":401,"value":4824},{"type":395,"tag":409,"props":5272,"children":5273},{},[5274],{"type":401,"value":5275},"一对用来维护 html5.elements 的方法 getElements、addElements。相当于 getter/setter。因为 html5shiv 将 html5 这个对象挂载到了 window 对象上，向外暴露。所以可以轻易调用 addElements 维护 html.elements。",{"type":395,"tag":467,"props":5277,"children":5279},{"className":469,"code":5278,"language":471,"meta":389,"style":389},"function getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\nfunction addElements(newElements, ownerDocument) {\n    var elements = html5.elements\n    if(typeof elements != 'string'){\n        elements = elements.join(' ')\n    }\n    if(typeof newElements != 'string'){\n        newElements = newElements.join(' ')\n    }\n    html5.elements = elements +' '+ newElements\n\n    // 每次增加元素的最后，会进行一次 shiv\n    shivDocument(ownerDocument)\n}\n",[5280],{"type":395,"tag":474,"props":5281,"children":5282},{"__ignoreMap":389},[5283,5302,5333,5408,5415,5452,5480,5524,5564,5571,5615,5655,5662,5707,5714,5722,5742],{"type":395,"tag":478,"props":5284,"children":5285},{"class":480,"line":481},[5286,5290,5294,5298],{"type":395,"tag":478,"props":5287,"children":5288},{"style":497},[5289],{"type":401,"value":500},{"type":395,"tag":478,"props":5291,"children":5292},{"style":672},[5293],{"type":401,"value":4499},{"type":395,"tag":478,"props":5295,"children":5296},{"style":485},[5297],{"type":401,"value":910},{"type":395,"tag":478,"props":5299,"children":5300},{"style":485},[5301],{"type":401,"value":530},{"type":395,"tag":478,"props":5303,"children":5304},{"class":480,"line":533},[5305,5309,5313,5317,5321,5325,5329],{"type":395,"tag":478,"props":5306,"children":5307},{"style":497},[5308],{"type":401,"value":923},{"type":395,"tag":478,"props":5310,"children":5311},{"style":491},[5312],{"type":401,"value":4716},{"type":395,"tag":478,"props":5314,"children":5315},{"style":556},[5316],{"type":401,"value":933},{"type":395,"tag":478,"props":5318,"children":5319},{"style":491},[5320],{"type":401,"value":4725},{"type":395,"tag":478,"props":5322,"children":5323},{"style":485},[5324],{"type":401,"value":669},{"type":395,"tag":478,"props":5326,"children":5327},{"style":491},[5328],{"type":401,"value":4734},{"type":395,"tag":478,"props":5330,"children":5331},{"style":485},[5332],{"type":401,"value":620},{"type":395,"tag":478,"props":5334,"children":5335},{"class":480,"line":543},[5336,5340,5344,5348,5352,5356,5360,5364,5368,5372,5376,5380,5384,5388,5392,5396,5400,5404],{"type":395,"tag":478,"props":5337,"children":5338},{"style":959},[5339],{"type":401,"value":962},{"type":395,"tag":478,"props":5341,"children":5342},{"style":556},[5343],{"type":401,"value":4750},{"type":395,"tag":478,"props":5345,"children":5346},{"style":491},[5347],{"type":401,"value":4716},{"type":395,"tag":478,"props":5349,"children":5350},{"style":556},[5351],{"type":401,"value":886},{"type":395,"tag":478,"props":5353,"children":5354},{"style":572},[5355],{"type":401,"value":835},{"type":395,"tag":478,"props":5357,"children":5358},{"style":578},[5359],{"type":401,"value":4767},{"type":395,"tag":478,"props":5361,"children":5362},{"style":572},[5363],{"type":401,"value":684},{"type":395,"tag":478,"props":5365,"children":5366},{"style":556},[5367],{"type":401,"value":591},{"type":395,"tag":478,"props":5369,"children":5370},{"style":491},[5371],{"type":401,"value":4716},{"type":395,"tag":478,"props":5373,"children":5374},{"style":485},[5375],{"type":401,"value":669},{"type":395,"tag":478,"props":5377,"children":5378},{"style":672},[5379],{"type":401,"value":4788},{"type":395,"tag":478,"props":5381,"children":5382},{"style":949},[5383],{"type":401,"value":494},{"type":395,"tag":478,"props":5385,"children":5386},{"style":572},[5387],{"type":401,"value":684},{"type":395,"tag":478,"props":5389,"children":5390},{"style":572},[5391],{"type":401,"value":835},{"type":395,"tag":478,"props":5393,"children":5394},{"style":949},[5395],{"type":401,"value":1629},{"type":395,"tag":478,"props":5397,"children":5398},{"style":556},[5399],{"type":401,"value":600},{"type":395,"tag":478,"props":5401,"children":5402},{"style":491},[5403],{"type":401,"value":4716},{"type":395,"tag":478,"props":5405,"children":5406},{"style":485},[5407],{"type":401,"value":620},{"type":395,"tag":478,"props":5409,"children":5410},{"class":480,"line":917},[5411],{"type":395,"tag":478,"props":5412,"children":5413},{"style":485},[5414],{"type":401,"value":4824},{"type":395,"tag":478,"props":5416,"children":5417},{"class":480,"line":955},[5418,5422,5427,5431,5436,5440,5444,5448],{"type":395,"tag":478,"props":5419,"children":5420},{"style":497},[5421],{"type":401,"value":500},{"type":395,"tag":478,"props":5423,"children":5424},{"style":672},[5425],{"type":401,"value":5426}," addElements",{"type":395,"tag":478,"props":5428,"children":5429},{"style":485},[5430],{"type":401,"value":494},{"type":395,"tag":478,"props":5432,"children":5433},{"style":507},[5434],{"type":401,"value":5435},"newElements",{"type":395,"tag":478,"props":5437,"children":5438},{"style":485},[5439],{"type":401,"value":515},{"type":395,"tag":478,"props":5441,"children":5442},{"style":507},[5443],{"type":401,"value":2574},{"type":395,"tag":478,"props":5445,"children":5446},{"style":485},[5447],{"type":401,"value":525},{"type":395,"tag":478,"props":5449,"children":5450},{"style":485},[5451],{"type":401,"value":530},{"type":395,"tag":478,"props":5453,"children":5454},{"class":480,"line":970},[5455,5459,5463,5467,5471,5475],{"type":395,"tag":478,"props":5456,"children":5457},{"style":497},[5458],{"type":401,"value":923},{"type":395,"tag":478,"props":5460,"children":5461},{"style":491},[5462],{"type":401,"value":4716},{"type":395,"tag":478,"props":5464,"children":5465},{"style":556},[5466],{"type":401,"value":933},{"type":395,"tag":478,"props":5468,"children":5469},{"style":491},[5470],{"type":401,"value":4725},{"type":395,"tag":478,"props":5472,"children":5473},{"style":485},[5474],{"type":401,"value":669},{"type":395,"tag":478,"props":5476,"children":5477},{"style":491},[5478],{"type":401,"value":5479},"elements\n",{"type":395,"tag":478,"props":5481,"children":5482},{"class":480,"line":1013},[5483,5487,5491,5495,5499,5504,5508,5512,5516,5520],{"type":395,"tag":478,"props":5484,"children":5485},{"style":959},[5486],{"type":401,"value":1873},{"type":395,"tag":478,"props":5488,"children":5489},{"style":949},[5490],{"type":401,"value":494},{"type":395,"tag":478,"props":5492,"children":5493},{"style":556},[5494],{"type":401,"value":559},{"type":395,"tag":478,"props":5496,"children":5497},{"style":491},[5498],{"type":401,"value":4716},{"type":395,"tag":478,"props":5500,"children":5501},{"style":556},[5502],{"type":401,"value":5503}," !=",{"type":395,"tag":478,"props":5505,"children":5506},{"style":572},[5507],{"type":401,"value":835},{"type":395,"tag":478,"props":5509,"children":5510},{"style":578},[5511],{"type":401,"value":4767},{"type":395,"tag":478,"props":5513,"children":5514},{"style":572},[5515],{"type":401,"value":684},{"type":395,"tag":478,"props":5517,"children":5518},{"style":949},[5519],{"type":401,"value":525},{"type":395,"tag":478,"props":5521,"children":5522},{"style":485},[5523],{"type":401,"value":1634},{"type":395,"tag":478,"props":5525,"children":5526},{"class":480,"line":1053},[5527,5532,5536,5540,5544,5548,5552,5556,5560],{"type":395,"tag":478,"props":5528,"children":5529},{"style":491},[5530],{"type":401,"value":5531},"        elements",{"type":395,"tag":478,"props":5533,"children":5534},{"style":556},[5535],{"type":401,"value":933},{"type":395,"tag":478,"props":5537,"children":5538},{"style":491},[5539],{"type":401,"value":4716},{"type":395,"tag":478,"props":5541,"children":5542},{"style":485},[5543],{"type":401,"value":669},{"type":395,"tag":478,"props":5545,"children":5546},{"style":672},[5547],{"type":401,"value":3027},{"type":395,"tag":478,"props":5549,"children":5550},{"style":949},[5551],{"type":401,"value":494},{"type":395,"tag":478,"props":5553,"children":5554},{"style":572},[5555],{"type":401,"value":684},{"type":395,"tag":478,"props":5557,"children":5558},{"style":572},[5559],{"type":401,"value":835},{"type":395,"tag":478,"props":5561,"children":5562},{"style":949},[5563],{"type":401,"value":697},{"type":395,"tag":478,"props":5565,"children":5566},{"class":480,"line":1089},[5567],{"type":395,"tag":478,"props":5568,"children":5569},{"style":485},[5570],{"type":401,"value":1686},{"type":395,"tag":478,"props":5572,"children":5573},{"class":480,"line":1098},[5574,5578,5582,5586,5591,5595,5599,5603,5607,5611],{"type":395,"tag":478,"props":5575,"children":5576},{"style":959},[5577],{"type":401,"value":1873},{"type":395,"tag":478,"props":5579,"children":5580},{"style":949},[5581],{"type":401,"value":494},{"type":395,"tag":478,"props":5583,"children":5584},{"style":556},[5585],{"type":401,"value":559},{"type":395,"tag":478,"props":5587,"children":5588},{"style":491},[5589],{"type":401,"value":5590}," newElements",{"type":395,"tag":478,"props":5592,"children":5593},{"style":556},[5594],{"type":401,"value":5503},{"type":395,"tag":478,"props":5596,"children":5597},{"style":572},[5598],{"type":401,"value":835},{"type":395,"tag":478,"props":5600,"children":5601},{"style":578},[5602],{"type":401,"value":4767},{"type":395,"tag":478,"props":5604,"children":5605},{"style":572},[5606],{"type":401,"value":684},{"type":395,"tag":478,"props":5608,"children":5609},{"style":949},[5610],{"type":401,"value":525},{"type":395,"tag":478,"props":5612,"children":5613},{"style":485},[5614],{"type":401,"value":1634},{"type":395,"tag":478,"props":5616,"children":5617},{"class":480,"line":1367},[5618,5623,5627,5631,5635,5639,5643,5647,5651],{"type":395,"tag":478,"props":5619,"children":5620},{"style":491},[5621],{"type":401,"value":5622},"        newElements",{"type":395,"tag":478,"props":5624,"children":5625},{"style":556},[5626],{"type":401,"value":933},{"type":395,"tag":478,"props":5628,"children":5629},{"style":491},[5630],{"type":401,"value":5590},{"type":395,"tag":478,"props":5632,"children":5633},{"style":485},[5634],{"type":401,"value":669},{"type":395,"tag":478,"props":5636,"children":5637},{"style":672},[5638],{"type":401,"value":3027},{"type":395,"tag":478,"props":5640,"children":5641},{"style":949},[5642],{"type":401,"value":494},{"type":395,"tag":478,"props":5644,"children":5645},{"style":572},[5646],{"type":401,"value":684},{"type":395,"tag":478,"props":5648,"children":5649},{"style":572},[5650],{"type":401,"value":835},{"type":395,"tag":478,"props":5652,"children":5653},{"style":949},[5654],{"type":401,"value":697},{"type":395,"tag":478,"props":5656,"children":5657},{"class":480,"line":1376},[5658],{"type":395,"tag":478,"props":5659,"children":5660},{"style":485},[5661],{"type":401,"value":1686},{"type":395,"tag":478,"props":5663,"children":5664},{"class":480,"line":1419},[5665,5670,5674,5678,5682,5686,5690,5694,5698,5702],{"type":395,"tag":478,"props":5666,"children":5667},{"style":491},[5668],{"type":401,"value":5669},"    html5",{"type":395,"tag":478,"props":5671,"children":5672},{"style":485},[5673],{"type":401,"value":669},{"type":395,"tag":478,"props":5675,"children":5676},{"style":491},[5677],{"type":401,"value":4734},{"type":395,"tag":478,"props":5679,"children":5680},{"style":556},[5681],{"type":401,"value":933},{"type":395,"tag":478,"props":5683,"children":5684},{"style":491},[5685],{"type":401,"value":4716},{"type":395,"tag":478,"props":5687,"children":5688},{"style":556},[5689],{"type":401,"value":3195},{"type":395,"tag":478,"props":5691,"children":5692},{"style":572},[5693],{"type":401,"value":684},{"type":395,"tag":478,"props":5695,"children":5696},{"style":572},[5697],{"type":401,"value":835},{"type":395,"tag":478,"props":5699,"children":5700},{"style":556},[5701],{"type":401,"value":3070},{"type":395,"tag":478,"props":5703,"children":5704},{"style":491},[5705],{"type":401,"value":5706}," newElements\n",{"type":395,"tag":478,"props":5708,"children":5709},{"class":480,"line":1452},[5710],{"type":395,"tag":478,"props":5711,"children":5712},{"emptyLinePlaceholder":388},[5713],{"type":401,"value":1296},{"type":395,"tag":478,"props":5715,"children":5716},{"class":480,"line":1465},[5717],{"type":395,"tag":478,"props":5718,"children":5719},{"style":537},[5720],{"type":401,"value":5721},"    // 每次增加元素的最后，会进行一次 shiv\n",{"type":395,"tag":478,"props":5723,"children":5724},{"class":480,"line":1506},[5725,5730,5734,5738],{"type":395,"tag":478,"props":5726,"children":5727},{"style":672},[5728],{"type":401,"value":5729},"    shivDocument",{"type":395,"tag":478,"props":5731,"children":5732},{"style":949},[5733],{"type":401,"value":494},{"type":395,"tag":478,"props":5735,"children":5736},{"style":491},[5737],{"type":401,"value":1813},{"type":395,"tag":478,"props":5739,"children":5740},{"style":949},[5741],{"type":401,"value":697},{"type":395,"tag":478,"props":5743,"children":5744},{"class":480,"line":1546},[5745],{"type":395,"tag":478,"props":5746,"children":5747},{"style":485},[5748],{"type":401,"value":4824},{"type":395,"tag":403,"props":5750,"children":5752},{"id":5751},"阅读更多",[5753],{"type":401,"value":5751},{"type":395,"tag":409,"props":5755,"children":5756},{},[5757],{"type":401,"value":5758},"害，看 html5shiv 并不能带来什么具体的帮助。看完之后，只感觉上一代前端真是太辛苦了，为 IE 操碎了心。现代前端技术随着打包工具的发展开阔了不止一点，兼容性这个曾经的代码重心已经悄然落下帷幕。如果现在我去哪家公司面试，还会被大面积问到兼容性问题，那估计我会当场“quit”吧。",{"type":395,"tag":5760,"props":5761,"children":5764},"section",{"className":5762,"dataFootnotes":389},[5763],"footnotes",[5765,5772],{"type":395,"tag":403,"props":5766,"children":5769},{"className":5767,"id":423},[5768],"sr-only",[5770],{"type":401,"value":5771},"Footnotes",{"type":395,"tag":5773,"props":5774,"children":5775},"ol",{},[5776,5799],{"type":395,"tag":440,"props":5777,"children":5779},{"id":5778},"user-content-fn-html5shiv",[5780,5788,5790],{"type":395,"tag":419,"props":5781,"children":5785},{"href":5782,"rel":5783},"https://github.com/aFarkas/html5shiv",[5784],"nofollow",[5786],{"type":401,"value":5787},"html5shiv",{"type":401,"value":5789}," ",{"type":395,"tag":419,"props":5791,"children":5796},{"href":5792,"ariaLabel":5793,"className":5794,"dataFootnoteBackref":389},"#user-content-fnref-html5shiv","Back to reference 1",[5795],"data-footnote-backref",[5797],{"type":401,"value":5798},"↩",{"type":395,"tag":440,"props":5800,"children":5802},{"id":5801},"user-content-fn-hidden",[5803,5810,5811],{"type":395,"tag":419,"props":5804,"children":5807},{"href":5805,"rel":5806},"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/hidden",[5784],[5808],{"type":401,"value":5809},"HTMLElement.hidden@MDN",{"type":401,"value":5789},{"type":395,"tag":419,"props":5812,"children":5816},{"href":5813,"ariaLabel":5814,"className":5815,"dataFootnoteBackref":389},"#user-content-fnref-hidden","Back to reference 2",[5795],[5817],{"type":401,"value":5798},{"type":395,"tag":5819,"props":5820,"children":5821},"style",{},[5822],{"type":401,"value":5823},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":389,"searchDepth":533,"depth":533,"links":5825},[5826,5827,5833,5834],{"id":405,"depth":533,"text":405},{"id":452,"depth":533,"text":452,"children":5828},[5829,5830,5831,5832],{"id":458,"depth":543,"text":458},{"id":628,"depth":543,"text":628},{"id":1701,"depth":543,"text":1701},{"id":4930,"depth":543,"text":4930},{"id":5751,"depth":533,"text":5751},{"id":423,"depth":533,"text":5771},"markdown","content:8.source-code:_module:html5shiv.md","content","8.source-code/_module/html5shiv.md","8.source-code/_module/html5shiv","md",[5842,5845],{"_path":5843,"title":5844,"description":389},"/source-code/_module/fast-deep-equal","判断两个变量相等",{"_path":5846,"title":5847,"description":5848},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",1742040639945]