[{"data":1,"prerenderedAt":5853},["Reactive",2],{"navigation":3,"/source-code/_module/html5shiv":389,"/source-code/_module/html5shiv-surround":5845},[4,32,83,99,126,132,138,372,378,384],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96],{"title":88,"_path":89},"🌐 AnySort","/tools/anysort",{"title":91,"_path":92},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":94,"_path":95},"👓 Crapto","/tools/crypto-inline",{"title":97,"_path":98},"🖨️ any-to-base64","/tools/any-to-base64",{"title":100,"_path":101,"children":102},"吉他剧场 / Music","/music",[103,105,108,111,114,117,120,123],{"title":104,"_path":101},"🎸 FingerStyle！",{"title":106,"_path":107},"🌬️ 等待的风","/music/wind",{"title":109,"_path":110},"💕 约定的海洋","/music/ocean",{"title":112,"_path":113},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":115,"_path":116},"🌏 残酷天使的行动纲领","/music/eva",{"title":118,"_path":119},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":121,"_path":122},"🍷 Wu Wei","/music/wu-wei",{"title":124,"_path":125},"🌅 无题","/music/untitled",{"title":127,"_path":128,"children":129},"画点什么 / Paint","/paint",[130],{"title":131,"_path":128},"🚧 正在施工",{"title":133,"_path":134,"children":135},"知识地图 / Maps","/maps",[136],{"title":137,"_path":134},"🏁 知识地图",{"title":139,"_path":140,"children":141},"零散的笔记 / Gists","/gists",[142,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369],{"title":143,"_path":140},"🧊 Gists",{"title":145,"_path":146},"网站的可访问性","/gists/accessibility",{"title":148,"_path":149},"Bit","/gists/bit",{"title":151,"_path":152},"图片模糊","/gists/blur",{"title":154,"_path":155},"渲染相关笔记","/gists/c4d",{"title":157,"_path":158},"CDN 问题记录","/gists/cdn",{"title":160,"_path":161},"消毒剂","/gists/cleaner",{"title":163,"_path":164},"Windows Command","/gists/cmd",{"title":166,"_path":167},"Command","/gists/command",{"title":169,"_path":170},"复杂科学","/gists/complexity-science",{"title":172,"_path":173},"宇宙","/gists/cosmos",{"title":175,"_path":176},"C++","/gists/cpp",{"title":178,"_path":179},"Data Structure","/gists/data-structure",{"title":181,"_path":182},"DEPRESSION","/gists/depression",{"title":184,"_path":185},"设计模式","/gists/design-patterns",{"title":187,"_path":188},"Developer Experience","/gists/developer-experience",{"title":190,"_path":191},"Device Metrics","/gists/device-metrix",{"title":193,"_path":194},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":196,"_path":197},"正则表达式","/gists/eegex",{"title":199,"_path":200},"Emoji","/gists/emoji",{"title":202,"_path":203},"工程","/gists/engineering",{"title":205,"_path":206},"熵","/gists/entropy",{"title":208,"_path":209},"Environment","/gists/environment",{"title":211,"_path":212},"Erlang","/gists/erlang",{"title":214,"_path":215},"逃离塔克夫","/gists/escape-from-tarkov",{"title":217,"_path":218},"ESNext (ES6-ES11)","/gists/esnext",{"title":220,"_path":221},"Eval！","/gists/eval",{"title":223,"_path":224},"Flutter","/gists/flutter",{"title":226,"_path":227},"字体","/gists/font",{"title":229,"_path":230},"JS 函数式编程","/gists/functional",{"title":232,"_path":233},"Google C++ Standard","/gists/google-cpp-standard",{"title":235,"_path":236},"双向链接完全体","/gists/graph",{"title":238,"_path":239},"Hardwares","/gists/hardwares",{"title":241,"_path":242},"哈希冲突","/gists/hash-collision",{"title":244,"_path":245},"信息设计","/gists/information-design",{"title":247,"_path":248},"InstantPage","/gists/instant.page",{"title":250,"_path":251},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":253,"_path":254},"KVStore","/gists/key-value-db",{"title":256,"_path":257},"Kubernetes","/gists/kubernetes",{"title":259,"_path":260},"Makefile","/gists/makefile",{"title":262,"_path":263},"Markdown Inline Style","/gists/markdown-nice",{"title":265,"_path":266},"小程序","/gists/miniapp",{"title":268,"_path":269},"减小页面快照体积","/gists/minify-html",{"title":271,"_path":272},"mklink","/gists/mklink",{"title":274,"_path":275},"Mock","/gists/mock",{"title":277,"_path":278},"多端应用","/gists/multy-end-app",{"title":280,"_path":281},"神经科学","/gists/neuroscience",{"title":283,"_path":284},"OO","/gists/oo",{"title":286,"_path":287},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":289,"_path":290},"人物","/gists/person",{"title":292,"_path":293},"PInvoke","/gists/pinvoke",{"title":295,"_path":296},"像素","/gists/pixel",{"title":298,"_path":299},"PowerShell","/gists/powershell",{"title":301,"_path":302},"量子","/gists/quantum",{"title":304,"_path":305},"保持好奇心","/gists/questions",{"title":307,"_path":308},"React Native","/gists/react-native",{"title":310,"_path":311},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":313,"_path":314},"SEO","/gists/seo",{"title":316,"_path":317},"Shader","/gists/shader",{"title":319,"_path":320},"Shape Up","/gists/shape-up",{"title":322,"_path":323},"睡觉","/gists/sleep",{"title":325,"_path":326},"States","/gists/states",{"title":328,"_path":329},"Storage","/gists/storage",{"title":331,"_path":332},"音视频流处理","/gists/stream-cli",{"title":334,"_path":335},"Symbol","/gists/symbol",{"title":337,"_path":338},"系统论","/gists/systems-theory",{"title":340,"_path":341},"Taro","/gists/taro",{"title":343,"_path":344},"任务切片","/gists/task-slice",{"title":346,"_path":347},"技术偏好","/gists/tech-dudge",{"title":349,"_path":350},"Untitled","/gists/untitled",{"title":352,"_path":353},"可变字体","/gists/variable-font",{"title":355,"_path":356},"视觉错觉","/gists/visual-illusion",{"title":358,"_path":359},"SS(SSR)","/gists/vpn",{"title":361,"_path":362},"VS Code 插件开发","/gists/vscode-plugin",{"title":364,"_path":365},"Web Components","/gists/web-components",{"title":367,"_path":368},"Windows","/gists/windows",{"title":370,"_path":371},"查缺补漏","/gists/wrong",{"title":373,"_path":374,"children":375},"代码笔记 / Gists","/source-code",[376],{"title":377,"_path":374},"🚄 代码笔记",{"title":379,"_path":380,"children":381},"我 / Abount","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"title":385,"_path":386,"children":387},"todo","/todo",[388],{"title":385,"_path":386},{"_path":390,"_dir":391,"_draft":392,"_partial":393,"_locale":394,"title":395,"description":394,"body":396,"_type":5840,"_id":5841,"_source":5842,"_file":5843,"_extension":5844},"/source-code/_module/html5shiv","_module",false,true,"","🛠 低版本浏览器兼容HTML5标签原理",{"type":397,"children":398,"toc":5829},"root",[399,407,413,435,440,455,460,466,471,626,631,636,641,646,743,761,766,1114,1119,1704,1709,1714,1719,2016,2021,2440,2445,3319,3324,3430,3435,3552,3557,4282,4287,4663,4668,4933,4938,4943,5276,5281,5754,5759,5764,5823],{"type":400,"tag":401,"props":402,"children":404},"element","h1",{"id":403},"低版本浏览器兼容html5标签原理",[405],{"type":406,"value":395},"text",{"type":400,"tag":408,"props":409,"children":411},"h2",{"id":410},"长话短说",[412],{"type":406,"value":410},{"type":400,"tag":414,"props":415,"children":416},"p",{},[417,419,433],{"type":406,"value":418},"最近在复习 HTML 相关内容呢，不知不觉想起以前在实习公司用过的 html5shiv 这个玩意儿。html5shiv 能使 IE6/7/8 等浏览器支持 HTML5 的新标签",{"type":400,"tag":420,"props":421,"children":422},"sup",{},[423],{"type":400,"tag":424,"props":425,"children":430},"a",{"href":426,"ariaDescribedBy":427,"dataFootnoteRef":394,"id":429},"#user-content-fn-html5shiv",[428],"footnote-label","user-content-fnref-html5shiv",[431],{"type":406,"value":432},"1",{"type":406,"value":434},"。这里我初略扫了一眼它的原理。",{"type":400,"tag":414,"props":436,"children":437},{},[438],{"type":406,"value":439},"它主要做了以下两件事情：",{"type":400,"tag":441,"props":442,"children":443},"ul",{},[444,450],{"type":400,"tag":445,"props":446,"children":447},"li",{},[448],{"type":406,"value":449},"用高阶函数增强浏览器原生的 createElement 等 API。需要创建新标签时，使用已缓存的元素克隆并返还一个新元素，或回退至调用原生 API 创建 H5 新元素。这个增强是基于 document.createElement 能创建非标准元素这个特性实现的。",{"type":400,"tag":445,"props":451,"children":452},{},[453],{"type":406,"value":454},"给新标签增加相应的默认样式。",{"type":400,"tag":408,"props":456,"children":458},{"id":457},"具体实现",[459],{"type":406,"value":457},{"type":400,"tag":461,"props":462,"children":464},"h3",{"id":463},"代码结构",[465],{"type":406,"value":463},{"type":400,"tag":414,"props":467,"children":468},{},[469],{"type":406,"value":470},"整个代码被包裹在 IIFE 中。像 jQuery 一样，把 window 对象传了进来。",{"type":400,"tag":472,"props":473,"children":477},"pre",{"className":474,"code":475,"language":476,"meta":394,"style":394},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",";(function(window, document) {\n    // rest of code\n}(typeof window !== \"undefined\" ? window : this, document));\n","js",[478],{"type":400,"tag":479,"props":480,"children":481},"code",{"__ignoreMap":394},[482,536,546],{"type":400,"tag":483,"props":484,"children":487},"span",{"class":485,"line":486},"line",1,[488,494,500,506,510,516,521,526,531],{"type":400,"tag":483,"props":489,"children":491},{"style":490},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[492],{"type":406,"value":493},";",{"type":400,"tag":483,"props":495,"children":497},{"style":496},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[498],{"type":406,"value":499},"(",{"type":400,"tag":483,"props":501,"children":503},{"style":502},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[504],{"type":406,"value":505},"function",{"type":400,"tag":483,"props":507,"children":508},{"style":490},[509],{"type":406,"value":499},{"type":400,"tag":483,"props":511,"children":513},{"style":512},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[514],{"type":406,"value":515},"window",{"type":400,"tag":483,"props":517,"children":518},{"style":490},[519],{"type":406,"value":520},",",{"type":400,"tag":483,"props":522,"children":523},{"style":512},[524],{"type":406,"value":525}," document",{"type":400,"tag":483,"props":527,"children":528},{"style":490},[529],{"type":406,"value":530},")",{"type":400,"tag":483,"props":532,"children":533},{"style":490},[534],{"type":406,"value":535}," {\n",{"type":400,"tag":483,"props":537,"children":539},{"class":485,"line":538},2,[540],{"type":400,"tag":483,"props":541,"children":543},{"style":542},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[544],{"type":406,"value":545},"    // rest of code\n",{"type":400,"tag":483,"props":547,"children":549},{"class":485,"line":548},3,[550,555,559,565,570,575,581,587,592,597,601,606,612,616,621],{"type":400,"tag":483,"props":551,"children":552},{"style":490},[553],{"type":406,"value":554},"}",{"type":400,"tag":483,"props":556,"children":557},{"style":496},[558],{"type":406,"value":499},{"type":400,"tag":483,"props":560,"children":562},{"style":561},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[563],{"type":406,"value":564},"typeof",{"type":400,"tag":483,"props":566,"children":567},{"style":496},[568],{"type":406,"value":569}," window ",{"type":400,"tag":483,"props":571,"children":572},{"style":561},[573],{"type":406,"value":574},"!==",{"type":400,"tag":483,"props":576,"children":578},{"style":577},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[579],{"type":406,"value":580}," \"",{"type":400,"tag":483,"props":582,"children":584},{"style":583},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[585],{"type":406,"value":586},"undefined",{"type":400,"tag":483,"props":588,"children":589},{"style":577},[590],{"type":406,"value":591},"\"",{"type":400,"tag":483,"props":593,"children":594},{"style":561},[595],{"type":406,"value":596}," ?",{"type":400,"tag":483,"props":598,"children":599},{"style":496},[600],{"type":406,"value":569},{"type":400,"tag":483,"props":602,"children":603},{"style":561},[604],{"type":406,"value":605},":",{"type":400,"tag":483,"props":607,"children":609},{"style":608},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[610],{"type":406,"value":611}," this",{"type":400,"tag":483,"props":613,"children":614},{"style":490},[615],{"type":406,"value":520},{"type":400,"tag":483,"props":617,"children":618},{"style":496},[619],{"type":406,"value":620}," document))",{"type":400,"tag":483,"props":622,"children":623},{"style":490},[624],{"type":406,"value":625},";\n",{"type":400,"tag":414,"props":627,"children":628},{},[629],{"type":406,"value":630},"一个很经典的模块模式，没什么好拓展的，我们继续...",{"type":400,"tag":461,"props":632,"children":634},{"id":633},"兼容性检测",[635],{"type":406,"value":633},{"type":400,"tag":414,"props":637,"children":638},{},[639],{"type":406,"value":640},"以下代码检测当前浏览器对 HTML5 的支持程度。",{"type":400,"tag":414,"props":642,"children":643},{},[644],{"type":406,"value":645},"通过检测元素对 hidden 属性的支持程度，检测浏览器对 HTML5 样式支持的水平。",{"type":400,"tag":472,"props":647,"children":649},{"className":474,"code":648,"language":476,"meta":394,"style":394},"a = document.createElement('a')\nsupportsHtml5Styles = ('hidden' in a)\n",[650],{"type":400,"tag":479,"props":651,"children":652},{"__ignoreMap":394},[653,703],{"type":400,"tag":483,"props":654,"children":655},{"class":485,"line":486},[656,661,666,670,675,681,685,690,694,698],{"type":400,"tag":483,"props":657,"children":658},{"style":496},[659],{"type":406,"value":660},"a ",{"type":400,"tag":483,"props":662,"children":663},{"style":561},[664],{"type":406,"value":665},"=",{"type":400,"tag":483,"props":667,"children":668},{"style":496},[669],{"type":406,"value":525},{"type":400,"tag":483,"props":671,"children":672},{"style":490},[673],{"type":406,"value":674},".",{"type":400,"tag":483,"props":676,"children":678},{"style":677},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[679],{"type":406,"value":680},"createElement",{"type":400,"tag":483,"props":682,"children":683},{"style":496},[684],{"type":406,"value":499},{"type":400,"tag":483,"props":686,"children":687},{"style":577},[688],{"type":406,"value":689},"'",{"type":400,"tag":483,"props":691,"children":692},{"style":583},[693],{"type":406,"value":424},{"type":400,"tag":483,"props":695,"children":696},{"style":577},[697],{"type":406,"value":689},{"type":400,"tag":483,"props":699,"children":700},{"style":496},[701],{"type":406,"value":702},")\n",{"type":400,"tag":483,"props":704,"children":705},{"class":485,"line":538},[706,711,715,720,724,729,733,738],{"type":400,"tag":483,"props":707,"children":708},{"style":496},[709],{"type":406,"value":710},"supportsHtml5Styles ",{"type":400,"tag":483,"props":712,"children":713},{"style":561},[714],{"type":406,"value":665},{"type":400,"tag":483,"props":716,"children":717},{"style":496},[718],{"type":406,"value":719}," (",{"type":400,"tag":483,"props":721,"children":722},{"style":577},[723],{"type":406,"value":689},{"type":400,"tag":483,"props":725,"children":726},{"style":583},[727],{"type":406,"value":728},"hidden",{"type":400,"tag":483,"props":730,"children":731},{"style":577},[732],{"type":406,"value":689},{"type":400,"tag":483,"props":734,"children":735},{"style":561},[736],{"type":406,"value":737}," in",{"type":400,"tag":483,"props":739,"children":740},{"style":496},[741],{"type":406,"value":742}," a)\n",{"type":400,"tag":414,"props":744,"children":745},{},[746,748,759],{"type":406,"value":747},"以前没听过 HTMLElement.hidden，项目里的隐藏元素都是直接上 CSS 做的。不过据 MDN 表示，除了隐藏元素之外，hidden 属性还能用于创造离屏 Canvas",{"type":400,"tag":420,"props":749,"children":750},{},[751],{"type":400,"tag":424,"props":752,"children":756},{"href":753,"ariaDescribedBy":754,"dataFootnoteRef":394,"id":755},"#user-content-fn-hidden",[428],"user-content-fnref-hidden",[757],{"type":406,"value":758},"2",{"type":406,"value":760},"。",{"type":400,"tag":414,"props":762,"children":763},{},[764],{"type":406,"value":765},"这段代码用于测试浏览器是否支持未知元素的创建。",{"type":400,"tag":472,"props":767,"children":769},{"className":474,"code":768,"language":476,"meta":394,"style":394},"a = document.createElement('a')\na.innerHTML = '\u003Cxyz>\u003C/xyz>'\nsupportsUnknownElements = a.childNodes.length == 1 || (function() {\n    var frag = document.createDocumentFragment()\n    return (\n    typeof frag.cloneNode == 'undefined' ||\n    typeof frag.createDocumentFragment == 'undefined' ||\n    typeof frag.createElement == 'undefined'\n    )\n}())\n",[770],{"type":400,"tag":479,"props":771,"children":772},{"__ignoreMap":394},[773,816,851,920,958,973,1016,1056,1092,1101],{"type":400,"tag":483,"props":774,"children":775},{"class":485,"line":486},[776,780,784,788,792,796,800,804,808,812],{"type":400,"tag":483,"props":777,"children":778},{"style":496},[779],{"type":406,"value":660},{"type":400,"tag":483,"props":781,"children":782},{"style":561},[783],{"type":406,"value":665},{"type":400,"tag":483,"props":785,"children":786},{"style":496},[787],{"type":406,"value":525},{"type":400,"tag":483,"props":789,"children":790},{"style":490},[791],{"type":406,"value":674},{"type":400,"tag":483,"props":793,"children":794},{"style":677},[795],{"type":406,"value":680},{"type":400,"tag":483,"props":797,"children":798},{"style":496},[799],{"type":406,"value":499},{"type":400,"tag":483,"props":801,"children":802},{"style":577},[803],{"type":406,"value":689},{"type":400,"tag":483,"props":805,"children":806},{"style":583},[807],{"type":406,"value":424},{"type":400,"tag":483,"props":809,"children":810},{"style":577},[811],{"type":406,"value":689},{"type":400,"tag":483,"props":813,"children":814},{"style":496},[815],{"type":406,"value":702},{"type":400,"tag":483,"props":817,"children":818},{"class":485,"line":538},[819,823,827,832,836,841,846],{"type":400,"tag":483,"props":820,"children":821},{"style":496},[822],{"type":406,"value":424},{"type":400,"tag":483,"props":824,"children":825},{"style":490},[826],{"type":406,"value":674},{"type":400,"tag":483,"props":828,"children":829},{"style":496},[830],{"type":406,"value":831},"innerHTML ",{"type":400,"tag":483,"props":833,"children":834},{"style":561},[835],{"type":406,"value":665},{"type":400,"tag":483,"props":837,"children":838},{"style":577},[839],{"type":406,"value":840}," '",{"type":400,"tag":483,"props":842,"children":843},{"style":583},[844],{"type":406,"value":845},"\u003Cxyz>\u003C/xyz>",{"type":400,"tag":483,"props":847,"children":848},{"style":577},[849],{"type":406,"value":850},"'\n",{"type":400,"tag":483,"props":852,"children":853},{"class":485,"line":548},[854,859,863,868,872,877,881,887,892,898,903,907,911,916],{"type":400,"tag":483,"props":855,"children":856},{"style":496},[857],{"type":406,"value":858},"supportsUnknownElements ",{"type":400,"tag":483,"props":860,"children":861},{"style":561},[862],{"type":406,"value":665},{"type":400,"tag":483,"props":864,"children":865},{"style":496},[866],{"type":406,"value":867}," a",{"type":400,"tag":483,"props":869,"children":870},{"style":490},[871],{"type":406,"value":674},{"type":400,"tag":483,"props":873,"children":874},{"style":496},[875],{"type":406,"value":876},"childNodes",{"type":400,"tag":483,"props":878,"children":879},{"style":490},[880],{"type":406,"value":674},{"type":400,"tag":483,"props":882,"children":884},{"style":883},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[885],{"type":406,"value":886},"length",{"type":400,"tag":483,"props":888,"children":889},{"style":561},[890],{"type":406,"value":891}," ==",{"type":400,"tag":483,"props":893,"children":895},{"style":894},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[896],{"type":406,"value":897}," 1",{"type":400,"tag":483,"props":899,"children":900},{"style":561},[901],{"type":406,"value":902}," ||",{"type":400,"tag":483,"props":904,"children":905},{"style":496},[906],{"type":406,"value":719},{"type":400,"tag":483,"props":908,"children":909},{"style":502},[910],{"type":406,"value":505},{"type":400,"tag":483,"props":912,"children":913},{"style":490},[914],{"type":406,"value":915},"()",{"type":400,"tag":483,"props":917,"children":918},{"style":490},[919],{"type":406,"value":535},{"type":400,"tag":483,"props":921,"children":923},{"class":485,"line":922},4,[924,929,934,939,943,947,952],{"type":400,"tag":483,"props":925,"children":926},{"style":502},[927],{"type":406,"value":928},"    var",{"type":400,"tag":483,"props":930,"children":931},{"style":496},[932],{"type":406,"value":933}," frag",{"type":400,"tag":483,"props":935,"children":936},{"style":561},[937],{"type":406,"value":938}," =",{"type":400,"tag":483,"props":940,"children":941},{"style":496},[942],{"type":406,"value":525},{"type":400,"tag":483,"props":944,"children":945},{"style":490},[946],{"type":406,"value":674},{"type":400,"tag":483,"props":948,"children":949},{"style":677},[950],{"type":406,"value":951},"createDocumentFragment",{"type":400,"tag":483,"props":953,"children":955},{"style":954},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[956],{"type":406,"value":957},"()\n",{"type":400,"tag":483,"props":959,"children":961},{"class":485,"line":960},5,[962,968],{"type":400,"tag":483,"props":963,"children":965},{"style":964},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[966],{"type":406,"value":967},"    return",{"type":400,"tag":483,"props":969,"children":970},{"style":954},[971],{"type":406,"value":972}," (\n",{"type":400,"tag":483,"props":974,"children":976},{"class":485,"line":975},6,[977,982,986,990,995,999,1003,1007,1011],{"type":400,"tag":483,"props":978,"children":979},{"style":561},[980],{"type":406,"value":981},"    typeof",{"type":400,"tag":483,"props":983,"children":984},{"style":496},[985],{"type":406,"value":933},{"type":400,"tag":483,"props":987,"children":988},{"style":490},[989],{"type":406,"value":674},{"type":400,"tag":483,"props":991,"children":992},{"style":496},[993],{"type":406,"value":994},"cloneNode",{"type":400,"tag":483,"props":996,"children":997},{"style":561},[998],{"type":406,"value":891},{"type":400,"tag":483,"props":1000,"children":1001},{"style":577},[1002],{"type":406,"value":840},{"type":400,"tag":483,"props":1004,"children":1005},{"style":583},[1006],{"type":406,"value":586},{"type":400,"tag":483,"props":1008,"children":1009},{"style":577},[1010],{"type":406,"value":689},{"type":400,"tag":483,"props":1012,"children":1013},{"style":561},[1014],{"type":406,"value":1015}," ||\n",{"type":400,"tag":483,"props":1017,"children":1019},{"class":485,"line":1018},7,[1020,1024,1028,1032,1036,1040,1044,1048,1052],{"type":400,"tag":483,"props":1021,"children":1022},{"style":561},[1023],{"type":406,"value":981},{"type":400,"tag":483,"props":1025,"children":1026},{"style":496},[1027],{"type":406,"value":933},{"type":400,"tag":483,"props":1029,"children":1030},{"style":490},[1031],{"type":406,"value":674},{"type":400,"tag":483,"props":1033,"children":1034},{"style":496},[1035],{"type":406,"value":951},{"type":400,"tag":483,"props":1037,"children":1038},{"style":561},[1039],{"type":406,"value":891},{"type":400,"tag":483,"props":1041,"children":1042},{"style":577},[1043],{"type":406,"value":840},{"type":400,"tag":483,"props":1045,"children":1046},{"style":583},[1047],{"type":406,"value":586},{"type":400,"tag":483,"props":1049,"children":1050},{"style":577},[1051],{"type":406,"value":689},{"type":400,"tag":483,"props":1053,"children":1054},{"style":561},[1055],{"type":406,"value":1015},{"type":400,"tag":483,"props":1057,"children":1059},{"class":485,"line":1058},8,[1060,1064,1068,1072,1076,1080,1084,1088],{"type":400,"tag":483,"props":1061,"children":1062},{"style":561},[1063],{"type":406,"value":981},{"type":400,"tag":483,"props":1065,"children":1066},{"style":496},[1067],{"type":406,"value":933},{"type":400,"tag":483,"props":1069,"children":1070},{"style":490},[1071],{"type":406,"value":674},{"type":400,"tag":483,"props":1073,"children":1074},{"style":496},[1075],{"type":406,"value":680},{"type":400,"tag":483,"props":1077,"children":1078},{"style":561},[1079],{"type":406,"value":891},{"type":400,"tag":483,"props":1081,"children":1082},{"style":577},[1083],{"type":406,"value":840},{"type":400,"tag":483,"props":1085,"children":1086},{"style":583},[1087],{"type":406,"value":586},{"type":400,"tag":483,"props":1089,"children":1090},{"style":577},[1091],{"type":406,"value":850},{"type":400,"tag":483,"props":1093,"children":1095},{"class":485,"line":1094},9,[1096],{"type":400,"tag":483,"props":1097,"children":1098},{"style":954},[1099],{"type":406,"value":1100},"    )\n",{"type":400,"tag":483,"props":1102,"children":1104},{"class":485,"line":1103},10,[1105,1109],{"type":400,"tag":483,"props":1106,"children":1107},{"style":490},[1108],{"type":406,"value":554},{"type":400,"tag":483,"props":1110,"children":1111},{"style":496},[1112],{"type":406,"value":1113},"())\n",{"type":400,"tag":414,"props":1115,"children":1116},{},[1117],{"type":406,"value":1118},"如果连 document.createElement 都调用失败的话，那 html5shiv 代码就毫无作用了（html5shiv 的原理需要用到 document.createElement），所以用一个 try/catch 将上述两个功能包裹起来。遇到错误则假装浏览器正常支持 HTML5，相关检测变量被置为 true。",{"type":400,"tag":472,"props":1120,"children":1122},{"className":474,"code":1121,"language":476,"meta":394,"style":394},"(function() {\n    try {\n        var a = document.createElement('a')\n        a.innerHTML = '\u003Cxyz>\u003C/xyz>'\n        //if the hidden property is implemented we can assume, \n        // that the browser supports basic HTML5 Styles\n        supportsHtml5Styles = ('hidden' in a)\n\n        supportsUnknownElements = a.childNodes.length == 1 || (function() {\n            // assign a false positive if unable to shiv\n            // ? 猜测特定浏览器对这种括号调用方法会报错\n            (document.createElement)('a')\n            var frag = document.createDocumentFragment()\n            return (\n            typeof frag.cloneNode == 'undefined' ||\n            typeof frag.createDocumentFragment == 'undefined' ||\n            typeof frag.createElement == 'undefined'\n            )\n        }())\n    } catch(e) {\n        // assign a false positive if detection fails => unable to shiv\n        supportsHtml5Styles = true\n        supportsUnknownElements = true\n    }\n}())\n",[1123],{"type":400,"tag":479,"props":1124,"children":1125},{"__ignoreMap":394},[1126,1145,1157,1205,1238,1246,1254,1294,1302,1362,1370,1379,1422,1455,1468,1509,1549,1585,1594,1607,1640,1649,1667,1683,1692],{"type":400,"tag":483,"props":1127,"children":1128},{"class":485,"line":486},[1129,1133,1137,1141],{"type":400,"tag":483,"props":1130,"children":1131},{"style":496},[1132],{"type":406,"value":499},{"type":400,"tag":483,"props":1134,"children":1135},{"style":502},[1136],{"type":406,"value":505},{"type":400,"tag":483,"props":1138,"children":1139},{"style":490},[1140],{"type":406,"value":915},{"type":400,"tag":483,"props":1142,"children":1143},{"style":490},[1144],{"type":406,"value":535},{"type":400,"tag":483,"props":1146,"children":1147},{"class":485,"line":538},[1148,1153],{"type":400,"tag":483,"props":1149,"children":1150},{"style":964},[1151],{"type":406,"value":1152},"    try",{"type":400,"tag":483,"props":1154,"children":1155},{"style":490},[1156],{"type":406,"value":535},{"type":400,"tag":483,"props":1158,"children":1159},{"class":485,"line":548},[1160,1165,1169,1173,1177,1181,1185,1189,1193,1197,1201],{"type":400,"tag":483,"props":1161,"children":1162},{"style":502},[1163],{"type":406,"value":1164},"        var",{"type":400,"tag":483,"props":1166,"children":1167},{"style":496},[1168],{"type":406,"value":867},{"type":400,"tag":483,"props":1170,"children":1171},{"style":561},[1172],{"type":406,"value":938},{"type":400,"tag":483,"props":1174,"children":1175},{"style":496},[1176],{"type":406,"value":525},{"type":400,"tag":483,"props":1178,"children":1179},{"style":490},[1180],{"type":406,"value":674},{"type":400,"tag":483,"props":1182,"children":1183},{"style":677},[1184],{"type":406,"value":680},{"type":400,"tag":483,"props":1186,"children":1187},{"style":954},[1188],{"type":406,"value":499},{"type":400,"tag":483,"props":1190,"children":1191},{"style":577},[1192],{"type":406,"value":689},{"type":400,"tag":483,"props":1194,"children":1195},{"style":583},[1196],{"type":406,"value":424},{"type":400,"tag":483,"props":1198,"children":1199},{"style":577},[1200],{"type":406,"value":689},{"type":400,"tag":483,"props":1202,"children":1203},{"style":954},[1204],{"type":406,"value":702},{"type":400,"tag":483,"props":1206,"children":1207},{"class":485,"line":922},[1208,1213,1217,1222,1226,1230,1234],{"type":400,"tag":483,"props":1209,"children":1210},{"style":496},[1211],{"type":406,"value":1212},"        a",{"type":400,"tag":483,"props":1214,"children":1215},{"style":490},[1216],{"type":406,"value":674},{"type":400,"tag":483,"props":1218,"children":1219},{"style":496},[1220],{"type":406,"value":1221},"innerHTML",{"type":400,"tag":483,"props":1223,"children":1224},{"style":561},[1225],{"type":406,"value":938},{"type":400,"tag":483,"props":1227,"children":1228},{"style":577},[1229],{"type":406,"value":840},{"type":400,"tag":483,"props":1231,"children":1232},{"style":583},[1233],{"type":406,"value":845},{"type":400,"tag":483,"props":1235,"children":1236},{"style":577},[1237],{"type":406,"value":850},{"type":400,"tag":483,"props":1239,"children":1240},{"class":485,"line":960},[1241],{"type":400,"tag":483,"props":1242,"children":1243},{"style":542},[1244],{"type":406,"value":1245},"        //if the hidden property is implemented we can assume, \n",{"type":400,"tag":483,"props":1247,"children":1248},{"class":485,"line":975},[1249],{"type":400,"tag":483,"props":1250,"children":1251},{"style":542},[1252],{"type":406,"value":1253},"        // that the browser supports basic HTML5 Styles\n",{"type":400,"tag":483,"props":1255,"children":1256},{"class":485,"line":1018},[1257,1262,1266,1270,1274,1278,1282,1286,1290],{"type":400,"tag":483,"props":1258,"children":1259},{"style":496},[1260],{"type":406,"value":1261},"        supportsHtml5Styles",{"type":400,"tag":483,"props":1263,"children":1264},{"style":561},[1265],{"type":406,"value":938},{"type":400,"tag":483,"props":1267,"children":1268},{"style":954},[1269],{"type":406,"value":719},{"type":400,"tag":483,"props":1271,"children":1272},{"style":577},[1273],{"type":406,"value":689},{"type":400,"tag":483,"props":1275,"children":1276},{"style":583},[1277],{"type":406,"value":728},{"type":400,"tag":483,"props":1279,"children":1280},{"style":577},[1281],{"type":406,"value":689},{"type":400,"tag":483,"props":1283,"children":1284},{"style":561},[1285],{"type":406,"value":737},{"type":400,"tag":483,"props":1287,"children":1288},{"style":496},[1289],{"type":406,"value":867},{"type":400,"tag":483,"props":1291,"children":1292},{"style":954},[1293],{"type":406,"value":702},{"type":400,"tag":483,"props":1295,"children":1296},{"class":485,"line":1058},[1297],{"type":400,"tag":483,"props":1298,"children":1299},{"emptyLinePlaceholder":393},[1300],{"type":406,"value":1301},"\n",{"type":400,"tag":483,"props":1303,"children":1304},{"class":485,"line":1094},[1305,1310,1314,1318,1322,1326,1330,1334,1338,1342,1346,1350,1354,1358],{"type":400,"tag":483,"props":1306,"children":1307},{"style":496},[1308],{"type":406,"value":1309},"        supportsUnknownElements",{"type":400,"tag":483,"props":1311,"children":1312},{"style":561},[1313],{"type":406,"value":938},{"type":400,"tag":483,"props":1315,"children":1316},{"style":496},[1317],{"type":406,"value":867},{"type":400,"tag":483,"props":1319,"children":1320},{"style":490},[1321],{"type":406,"value":674},{"type":400,"tag":483,"props":1323,"children":1324},{"style":496},[1325],{"type":406,"value":876},{"type":400,"tag":483,"props":1327,"children":1328},{"style":490},[1329],{"type":406,"value":674},{"type":400,"tag":483,"props":1331,"children":1332},{"style":883},[1333],{"type":406,"value":886},{"type":400,"tag":483,"props":1335,"children":1336},{"style":561},[1337],{"type":406,"value":891},{"type":400,"tag":483,"props":1339,"children":1340},{"style":894},[1341],{"type":406,"value":897},{"type":400,"tag":483,"props":1343,"children":1344},{"style":561},[1345],{"type":406,"value":902},{"type":400,"tag":483,"props":1347,"children":1348},{"style":954},[1349],{"type":406,"value":719},{"type":400,"tag":483,"props":1351,"children":1352},{"style":502},[1353],{"type":406,"value":505},{"type":400,"tag":483,"props":1355,"children":1356},{"style":490},[1357],{"type":406,"value":915},{"type":400,"tag":483,"props":1359,"children":1360},{"style":490},[1361],{"type":406,"value":535},{"type":400,"tag":483,"props":1363,"children":1364},{"class":485,"line":1103},[1365],{"type":400,"tag":483,"props":1366,"children":1367},{"style":542},[1368],{"type":406,"value":1369},"            // assign a false positive if unable to shiv\n",{"type":400,"tag":483,"props":1371,"children":1373},{"class":485,"line":1372},11,[1374],{"type":400,"tag":483,"props":1375,"children":1376},{"style":542},[1377],{"type":406,"value":1378},"            // ? 猜测特定浏览器对这种括号调用方法会报错\n",{"type":400,"tag":483,"props":1380,"children":1382},{"class":485,"line":1381},12,[1383,1388,1393,1397,1401,1406,1410,1414,1418],{"type":400,"tag":483,"props":1384,"children":1385},{"style":954},[1386],{"type":406,"value":1387},"            (",{"type":400,"tag":483,"props":1389,"children":1390},{"style":496},[1391],{"type":406,"value":1392},"document",{"type":400,"tag":483,"props":1394,"children":1395},{"style":490},[1396],{"type":406,"value":674},{"type":400,"tag":483,"props":1398,"children":1399},{"style":496},[1400],{"type":406,"value":680},{"type":400,"tag":483,"props":1402,"children":1403},{"style":954},[1404],{"type":406,"value":1405},")(",{"type":400,"tag":483,"props":1407,"children":1408},{"style":577},[1409],{"type":406,"value":689},{"type":400,"tag":483,"props":1411,"children":1412},{"style":583},[1413],{"type":406,"value":424},{"type":400,"tag":483,"props":1415,"children":1416},{"style":577},[1417],{"type":406,"value":689},{"type":400,"tag":483,"props":1419,"children":1420},{"style":954},[1421],{"type":406,"value":702},{"type":400,"tag":483,"props":1423,"children":1425},{"class":485,"line":1424},13,[1426,1431,1435,1439,1443,1447,1451],{"type":400,"tag":483,"props":1427,"children":1428},{"style":502},[1429],{"type":406,"value":1430},"            var",{"type":400,"tag":483,"props":1432,"children":1433},{"style":496},[1434],{"type":406,"value":933},{"type":400,"tag":483,"props":1436,"children":1437},{"style":561},[1438],{"type":406,"value":938},{"type":400,"tag":483,"props":1440,"children":1441},{"style":496},[1442],{"type":406,"value":525},{"type":400,"tag":483,"props":1444,"children":1445},{"style":490},[1446],{"type":406,"value":674},{"type":400,"tag":483,"props":1448,"children":1449},{"style":677},[1450],{"type":406,"value":951},{"type":400,"tag":483,"props":1452,"children":1453},{"style":954},[1454],{"type":406,"value":957},{"type":400,"tag":483,"props":1456,"children":1458},{"class":485,"line":1457},14,[1459,1464],{"type":400,"tag":483,"props":1460,"children":1461},{"style":964},[1462],{"type":406,"value":1463},"            return",{"type":400,"tag":483,"props":1465,"children":1466},{"style":954},[1467],{"type":406,"value":972},{"type":400,"tag":483,"props":1469,"children":1471},{"class":485,"line":1470},15,[1472,1477,1481,1485,1489,1493,1497,1501,1505],{"type":400,"tag":483,"props":1473,"children":1474},{"style":561},[1475],{"type":406,"value":1476},"            typeof",{"type":400,"tag":483,"props":1478,"children":1479},{"style":496},[1480],{"type":406,"value":933},{"type":400,"tag":483,"props":1482,"children":1483},{"style":490},[1484],{"type":406,"value":674},{"type":400,"tag":483,"props":1486,"children":1487},{"style":496},[1488],{"type":406,"value":994},{"type":400,"tag":483,"props":1490,"children":1491},{"style":561},[1492],{"type":406,"value":891},{"type":400,"tag":483,"props":1494,"children":1495},{"style":577},[1496],{"type":406,"value":840},{"type":400,"tag":483,"props":1498,"children":1499},{"style":583},[1500],{"type":406,"value":586},{"type":400,"tag":483,"props":1502,"children":1503},{"style":577},[1504],{"type":406,"value":689},{"type":400,"tag":483,"props":1506,"children":1507},{"style":561},[1508],{"type":406,"value":1015},{"type":400,"tag":483,"props":1510,"children":1512},{"class":485,"line":1511},16,[1513,1517,1521,1525,1529,1533,1537,1541,1545],{"type":400,"tag":483,"props":1514,"children":1515},{"style":561},[1516],{"type":406,"value":1476},{"type":400,"tag":483,"props":1518,"children":1519},{"style":496},[1520],{"type":406,"value":933},{"type":400,"tag":483,"props":1522,"children":1523},{"style":490},[1524],{"type":406,"value":674},{"type":400,"tag":483,"props":1526,"children":1527},{"style":496},[1528],{"type":406,"value":951},{"type":400,"tag":483,"props":1530,"children":1531},{"style":561},[1532],{"type":406,"value":891},{"type":400,"tag":483,"props":1534,"children":1535},{"style":577},[1536],{"type":406,"value":840},{"type":400,"tag":483,"props":1538,"children":1539},{"style":583},[1540],{"type":406,"value":586},{"type":400,"tag":483,"props":1542,"children":1543},{"style":577},[1544],{"type":406,"value":689},{"type":400,"tag":483,"props":1546,"children":1547},{"style":561},[1548],{"type":406,"value":1015},{"type":400,"tag":483,"props":1550,"children":1552},{"class":485,"line":1551},17,[1553,1557,1561,1565,1569,1573,1577,1581],{"type":400,"tag":483,"props":1554,"children":1555},{"style":561},[1556],{"type":406,"value":1476},{"type":400,"tag":483,"props":1558,"children":1559},{"style":496},[1560],{"type":406,"value":933},{"type":400,"tag":483,"props":1562,"children":1563},{"style":490},[1564],{"type":406,"value":674},{"type":400,"tag":483,"props":1566,"children":1567},{"style":496},[1568],{"type":406,"value":680},{"type":400,"tag":483,"props":1570,"children":1571},{"style":561},[1572],{"type":406,"value":891},{"type":400,"tag":483,"props":1574,"children":1575},{"style":577},[1576],{"type":406,"value":840},{"type":400,"tag":483,"props":1578,"children":1579},{"style":583},[1580],{"type":406,"value":586},{"type":400,"tag":483,"props":1582,"children":1583},{"style":577},[1584],{"type":406,"value":850},{"type":400,"tag":483,"props":1586,"children":1588},{"class":485,"line":1587},18,[1589],{"type":400,"tag":483,"props":1590,"children":1591},{"style":954},[1592],{"type":406,"value":1593},"            )\n",{"type":400,"tag":483,"props":1595,"children":1597},{"class":485,"line":1596},19,[1598,1603],{"type":400,"tag":483,"props":1599,"children":1600},{"style":490},[1601],{"type":406,"value":1602},"        }",{"type":400,"tag":483,"props":1604,"children":1605},{"style":954},[1606],{"type":406,"value":1113},{"type":400,"tag":483,"props":1608,"children":1610},{"class":485,"line":1609},20,[1611,1616,1621,1625,1630,1635],{"type":400,"tag":483,"props":1612,"children":1613},{"style":490},[1614],{"type":406,"value":1615},"    }",{"type":400,"tag":483,"props":1617,"children":1618},{"style":964},[1619],{"type":406,"value":1620}," catch",{"type":400,"tag":483,"props":1622,"children":1623},{"style":954},[1624],{"type":406,"value":499},{"type":400,"tag":483,"props":1626,"children":1627},{"style":496},[1628],{"type":406,"value":1629},"e",{"type":400,"tag":483,"props":1631,"children":1632},{"style":954},[1633],{"type":406,"value":1634},") ",{"type":400,"tag":483,"props":1636,"children":1637},{"style":490},[1638],{"type":406,"value":1639},"{\n",{"type":400,"tag":483,"props":1641,"children":1643},{"class":485,"line":1642},21,[1644],{"type":400,"tag":483,"props":1645,"children":1646},{"style":542},[1647],{"type":406,"value":1648},"        // assign a false positive if detection fails => unable to shiv\n",{"type":400,"tag":483,"props":1650,"children":1652},{"class":485,"line":1651},22,[1653,1657,1661],{"type":400,"tag":483,"props":1654,"children":1655},{"style":496},[1656],{"type":406,"value":1261},{"type":400,"tag":483,"props":1658,"children":1659},{"style":561},[1660],{"type":406,"value":938},{"type":400,"tag":483,"props":1662,"children":1664},{"style":1663},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1665],{"type":406,"value":1666}," true\n",{"type":400,"tag":483,"props":1668,"children":1670},{"class":485,"line":1669},23,[1671,1675,1679],{"type":400,"tag":483,"props":1672,"children":1673},{"style":496},[1674],{"type":406,"value":1309},{"type":400,"tag":483,"props":1676,"children":1677},{"style":561},[1678],{"type":406,"value":938},{"type":400,"tag":483,"props":1680,"children":1681},{"style":1663},[1682],{"type":406,"value":1666},{"type":400,"tag":483,"props":1684,"children":1686},{"class":485,"line":1685},24,[1687],{"type":400,"tag":483,"props":1688,"children":1689},{"style":490},[1690],{"type":406,"value":1691},"    }\n",{"type":400,"tag":483,"props":1693,"children":1695},{"class":485,"line":1694},25,[1696,1700],{"type":400,"tag":483,"props":1697,"children":1698},{"style":490},[1699],{"type":406,"value":554},{"type":400,"tag":483,"props":1701,"children":1702},{"style":496},[1703],{"type":406,"value":1113},{"type":400,"tag":461,"props":1705,"children":1707},{"id":1706},"功能仿制",[1708],{"type":406,"value":1706},{"type":400,"tag":414,"props":1710,"children":1711},{},[1712],{"type":406,"value":1713},"每个页面可能有多个 iframe，所以可能有多个 document 对象。因为不同 document 对象可被 shiv 的元素可能不同，所以需要一个变量用作记录。",{"type":400,"tag":414,"props":1715,"children":1716},{},[1717],{"type":406,"value":1718},"getExpandoData 方法在传入的 document 对象下挂载了一个属性名为 '_html5shiv' 的空对象，用来便捷存放某些数据（比如说元素缓存），并返回对象单例。",{"type":400,"tag":472,"props":1720,"children":1722},{"className":474,"code":1721,"language":476,"meta":394,"style":394},"var expandoData = {}\nvar expanID = 0\nvar expando = '_html5shiv'\nfunction getExpandoData(ownerDocument) {\n    var data = expandoData[ownerDocument[expando]]\n    if (!data) {\n        data = {}\n        expanID++\n        ownerDocument[expando] = expanID\n        expandoData[expanID] = data\n    }\n    return data\n  }\n",[1723],{"type":400,"tag":479,"props":1724,"children":1725},{"__ignoreMap":394},[1726,1748,1769,1798,1827,1871,1901,1917,1930,1960,1990,1997,2008],{"type":400,"tag":483,"props":1727,"children":1728},{"class":485,"line":486},[1729,1734,1739,1743],{"type":400,"tag":483,"props":1730,"children":1731},{"style":502},[1732],{"type":406,"value":1733},"var",{"type":400,"tag":483,"props":1735,"children":1736},{"style":496},[1737],{"type":406,"value":1738}," expandoData ",{"type":400,"tag":483,"props":1740,"children":1741},{"style":561},[1742],{"type":406,"value":665},{"type":400,"tag":483,"props":1744,"children":1745},{"style":490},[1746],{"type":406,"value":1747}," {}\n",{"type":400,"tag":483,"props":1749,"children":1750},{"class":485,"line":538},[1751,1755,1760,1764],{"type":400,"tag":483,"props":1752,"children":1753},{"style":502},[1754],{"type":406,"value":1733},{"type":400,"tag":483,"props":1756,"children":1757},{"style":496},[1758],{"type":406,"value":1759}," expanID ",{"type":400,"tag":483,"props":1761,"children":1762},{"style":561},[1763],{"type":406,"value":665},{"type":400,"tag":483,"props":1765,"children":1766},{"style":894},[1767],{"type":406,"value":1768}," 0\n",{"type":400,"tag":483,"props":1770,"children":1771},{"class":485,"line":548},[1772,1776,1781,1785,1789,1794],{"type":400,"tag":483,"props":1773,"children":1774},{"style":502},[1775],{"type":406,"value":1733},{"type":400,"tag":483,"props":1777,"children":1778},{"style":496},[1779],{"type":406,"value":1780}," expando ",{"type":400,"tag":483,"props":1782,"children":1783},{"style":561},[1784],{"type":406,"value":665},{"type":400,"tag":483,"props":1786,"children":1787},{"style":577},[1788],{"type":406,"value":840},{"type":400,"tag":483,"props":1790,"children":1791},{"style":583},[1792],{"type":406,"value":1793},"_html5shiv",{"type":400,"tag":483,"props":1795,"children":1796},{"style":577},[1797],{"type":406,"value":850},{"type":400,"tag":483,"props":1799,"children":1800},{"class":485,"line":922},[1801,1805,1810,1814,1819,1823],{"type":400,"tag":483,"props":1802,"children":1803},{"style":502},[1804],{"type":406,"value":505},{"type":400,"tag":483,"props":1806,"children":1807},{"style":677},[1808],{"type":406,"value":1809}," getExpandoData",{"type":400,"tag":483,"props":1811,"children":1812},{"style":490},[1813],{"type":406,"value":499},{"type":400,"tag":483,"props":1815,"children":1816},{"style":512},[1817],{"type":406,"value":1818},"ownerDocument",{"type":400,"tag":483,"props":1820,"children":1821},{"style":490},[1822],{"type":406,"value":530},{"type":400,"tag":483,"props":1824,"children":1825},{"style":490},[1826],{"type":406,"value":535},{"type":400,"tag":483,"props":1828,"children":1829},{"class":485,"line":960},[1830,1834,1839,1843,1848,1853,1857,1861,1866],{"type":400,"tag":483,"props":1831,"children":1832},{"style":502},[1833],{"type":406,"value":928},{"type":400,"tag":483,"props":1835,"children":1836},{"style":496},[1837],{"type":406,"value":1838}," data",{"type":400,"tag":483,"props":1840,"children":1841},{"style":561},[1842],{"type":406,"value":938},{"type":400,"tag":483,"props":1844,"children":1845},{"style":496},[1846],{"type":406,"value":1847}," expandoData",{"type":400,"tag":483,"props":1849,"children":1850},{"style":954},[1851],{"type":406,"value":1852},"[",{"type":400,"tag":483,"props":1854,"children":1855},{"style":496},[1856],{"type":406,"value":1818},{"type":400,"tag":483,"props":1858,"children":1859},{"style":954},[1860],{"type":406,"value":1852},{"type":400,"tag":483,"props":1862,"children":1863},{"style":496},[1864],{"type":406,"value":1865},"expando",{"type":400,"tag":483,"props":1867,"children":1868},{"style":954},[1869],{"type":406,"value":1870},"]]\n",{"type":400,"tag":483,"props":1872,"children":1873},{"class":485,"line":975},[1874,1879,1883,1888,1893,1897],{"type":400,"tag":483,"props":1875,"children":1876},{"style":964},[1877],{"type":406,"value":1878},"    if",{"type":400,"tag":483,"props":1880,"children":1881},{"style":954},[1882],{"type":406,"value":719},{"type":400,"tag":483,"props":1884,"children":1885},{"style":561},[1886],{"type":406,"value":1887},"!",{"type":400,"tag":483,"props":1889,"children":1890},{"style":496},[1891],{"type":406,"value":1892},"data",{"type":400,"tag":483,"props":1894,"children":1895},{"style":954},[1896],{"type":406,"value":1634},{"type":400,"tag":483,"props":1898,"children":1899},{"style":490},[1900],{"type":406,"value":1639},{"type":400,"tag":483,"props":1902,"children":1903},{"class":485,"line":1018},[1904,1909,1913],{"type":400,"tag":483,"props":1905,"children":1906},{"style":496},[1907],{"type":406,"value":1908},"        data",{"type":400,"tag":483,"props":1910,"children":1911},{"style":561},[1912],{"type":406,"value":938},{"type":400,"tag":483,"props":1914,"children":1915},{"style":490},[1916],{"type":406,"value":1747},{"type":400,"tag":483,"props":1918,"children":1919},{"class":485,"line":1058},[1920,1925],{"type":400,"tag":483,"props":1921,"children":1922},{"style":496},[1923],{"type":406,"value":1924},"        expanID",{"type":400,"tag":483,"props":1926,"children":1927},{"style":561},[1928],{"type":406,"value":1929},"++\n",{"type":400,"tag":483,"props":1931,"children":1932},{"class":485,"line":1094},[1933,1938,1942,1946,1951,1955],{"type":400,"tag":483,"props":1934,"children":1935},{"style":496},[1936],{"type":406,"value":1937},"        ownerDocument",{"type":400,"tag":483,"props":1939,"children":1940},{"style":954},[1941],{"type":406,"value":1852},{"type":400,"tag":483,"props":1943,"children":1944},{"style":496},[1945],{"type":406,"value":1865},{"type":400,"tag":483,"props":1947,"children":1948},{"style":954},[1949],{"type":406,"value":1950},"] ",{"type":400,"tag":483,"props":1952,"children":1953},{"style":561},[1954],{"type":406,"value":665},{"type":400,"tag":483,"props":1956,"children":1957},{"style":496},[1958],{"type":406,"value":1959}," expanID\n",{"type":400,"tag":483,"props":1961,"children":1962},{"class":485,"line":1103},[1963,1968,1972,1977,1981,1985],{"type":400,"tag":483,"props":1964,"children":1965},{"style":496},[1966],{"type":406,"value":1967},"        expandoData",{"type":400,"tag":483,"props":1969,"children":1970},{"style":954},[1971],{"type":406,"value":1852},{"type":400,"tag":483,"props":1973,"children":1974},{"style":496},[1975],{"type":406,"value":1976},"expanID",{"type":400,"tag":483,"props":1978,"children":1979},{"style":954},[1980],{"type":406,"value":1950},{"type":400,"tag":483,"props":1982,"children":1983},{"style":561},[1984],{"type":406,"value":665},{"type":400,"tag":483,"props":1986,"children":1987},{"style":496},[1988],{"type":406,"value":1989}," data\n",{"type":400,"tag":483,"props":1991,"children":1992},{"class":485,"line":1372},[1993],{"type":400,"tag":483,"props":1994,"children":1995},{"style":490},[1996],{"type":406,"value":1691},{"type":400,"tag":483,"props":1998,"children":1999},{"class":485,"line":1381},[2000,2004],{"type":400,"tag":483,"props":2001,"children":2002},{"style":964},[2003],{"type":406,"value":967},{"type":400,"tag":483,"props":2005,"children":2006},{"style":496},[2007],{"type":406,"value":1989},{"type":400,"tag":483,"props":2009,"children":2010},{"class":485,"line":1424},[2011],{"type":400,"tag":483,"props":2012,"children":2013},{"style":490},[2014],{"type":406,"value":2015},"  }\n",{"type":400,"tag":414,"props":2017,"children":2018},{},[2019],{"type":406,"value":2020},"如何对 document 进行 html5 的增强呢？原理体现都在 shivDocument 这个函数了，只需要增强浏览器原生的 createElement 等 API 的功能，再添加对应的元素样式就好了。",{"type":400,"tag":472,"props":2022,"children":2024},{"className":474,"code":2023,"language":476,"meta":394,"style":394},"function shivDocument(ownerDocument) {\n    // 挂载 document._html5shiv\n    var data = getExpandoData(ownerDocument)\n\n    // 增强样式\n    if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n      data.hasCSS = !!addStyleSheet(ownerDocument,\n        // corrects block display not defined in IE6/7/8/9\n        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n        // adds styling not present in IE6/7/8/9\n        'mark{background:#FF0;color:#000}' +\n        // hides non-rendered elements\n        'template{display:none}'\n      )\n    }\n\n    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n    // 如果当前浏览器连 document.createElement 都会报错，\n    // 那就没办法 shiv 了，只好假装一切正常...\n    if (!supportsUnknownElements) {\n      // 增强 createElement 和 createDocumentFragment\n      shivMethods(ownerDocument, data)\n    }\n    return ownerDocument\n  }\n",[2025],{"type":400,"tag":479,"props":2026,"children":2027},{"__ignoreMap":394},[2028,2056,2064,2095,2102,2110,2179,2222,2230,2252,2260,2280,2288,2304,2312,2319,2326,2334,2342,2350,2378,2386,2414,2421,2433],{"type":400,"tag":483,"props":2029,"children":2030},{"class":485,"line":486},[2031,2035,2040,2044,2048,2052],{"type":400,"tag":483,"props":2032,"children":2033},{"style":502},[2034],{"type":406,"value":505},{"type":400,"tag":483,"props":2036,"children":2037},{"style":677},[2038],{"type":406,"value":2039}," shivDocument",{"type":400,"tag":483,"props":2041,"children":2042},{"style":490},[2043],{"type":406,"value":499},{"type":400,"tag":483,"props":2045,"children":2046},{"style":512},[2047],{"type":406,"value":1818},{"type":400,"tag":483,"props":2049,"children":2050},{"style":490},[2051],{"type":406,"value":530},{"type":400,"tag":483,"props":2053,"children":2054},{"style":490},[2055],{"type":406,"value":535},{"type":400,"tag":483,"props":2057,"children":2058},{"class":485,"line":538},[2059],{"type":400,"tag":483,"props":2060,"children":2061},{"style":542},[2062],{"type":406,"value":2063},"    // 挂载 document._html5shiv\n",{"type":400,"tag":483,"props":2065,"children":2066},{"class":485,"line":548},[2067,2071,2075,2079,2083,2087,2091],{"type":400,"tag":483,"props":2068,"children":2069},{"style":502},[2070],{"type":406,"value":928},{"type":400,"tag":483,"props":2072,"children":2073},{"style":496},[2074],{"type":406,"value":1838},{"type":400,"tag":483,"props":2076,"children":2077},{"style":561},[2078],{"type":406,"value":938},{"type":400,"tag":483,"props":2080,"children":2081},{"style":677},[2082],{"type":406,"value":1809},{"type":400,"tag":483,"props":2084,"children":2085},{"style":954},[2086],{"type":406,"value":499},{"type":400,"tag":483,"props":2088,"children":2089},{"style":496},[2090],{"type":406,"value":1818},{"type":400,"tag":483,"props":2092,"children":2093},{"style":954},[2094],{"type":406,"value":702},{"type":400,"tag":483,"props":2096,"children":2097},{"class":485,"line":922},[2098],{"type":400,"tag":483,"props":2099,"children":2100},{"emptyLinePlaceholder":393},[2101],{"type":406,"value":1301},{"type":400,"tag":483,"props":2103,"children":2104},{"class":485,"line":960},[2105],{"type":400,"tag":483,"props":2106,"children":2107},{"style":542},[2108],{"type":406,"value":2109},"    // 增强样式\n",{"type":400,"tag":483,"props":2111,"children":2112},{"class":485,"line":975},[2113,2117,2121,2126,2130,2135,2140,2145,2150,2154,2158,2162,2166,2171,2175],{"type":400,"tag":483,"props":2114,"children":2115},{"style":964},[2116],{"type":406,"value":1878},{"type":400,"tag":483,"props":2118,"children":2119},{"style":954},[2120],{"type":406,"value":719},{"type":400,"tag":483,"props":2122,"children":2123},{"style":496},[2124],{"type":406,"value":2125},"html5",{"type":400,"tag":483,"props":2127,"children":2128},{"style":490},[2129],{"type":406,"value":674},{"type":400,"tag":483,"props":2131,"children":2132},{"style":496},[2133],{"type":406,"value":2134},"shivCSS",{"type":400,"tag":483,"props":2136,"children":2137},{"style":561},[2138],{"type":406,"value":2139}," &&",{"type":400,"tag":483,"props":2141,"children":2142},{"style":561},[2143],{"type":406,"value":2144}," !",{"type":400,"tag":483,"props":2146,"children":2147},{"style":496},[2148],{"type":406,"value":2149},"supportsHtml5Styles",{"type":400,"tag":483,"props":2151,"children":2152},{"style":561},[2153],{"type":406,"value":2139},{"type":400,"tag":483,"props":2155,"children":2156},{"style":561},[2157],{"type":406,"value":2144},{"type":400,"tag":483,"props":2159,"children":2160},{"style":496},[2161],{"type":406,"value":1892},{"type":400,"tag":483,"props":2163,"children":2164},{"style":490},[2165],{"type":406,"value":674},{"type":400,"tag":483,"props":2167,"children":2168},{"style":496},[2169],{"type":406,"value":2170},"hasCSS",{"type":400,"tag":483,"props":2172,"children":2173},{"style":954},[2174],{"type":406,"value":1634},{"type":400,"tag":483,"props":2176,"children":2177},{"style":490},[2178],{"type":406,"value":1639},{"type":400,"tag":483,"props":2180,"children":2181},{"class":485,"line":1018},[2182,2187,2191,2195,2199,2204,2209,2213,2217],{"type":400,"tag":483,"props":2183,"children":2184},{"style":496},[2185],{"type":406,"value":2186},"      data",{"type":400,"tag":483,"props":2188,"children":2189},{"style":490},[2190],{"type":406,"value":674},{"type":400,"tag":483,"props":2192,"children":2193},{"style":496},[2194],{"type":406,"value":2170},{"type":400,"tag":483,"props":2196,"children":2197},{"style":561},[2198],{"type":406,"value":938},{"type":400,"tag":483,"props":2200,"children":2201},{"style":561},[2202],{"type":406,"value":2203}," !!",{"type":400,"tag":483,"props":2205,"children":2206},{"style":677},[2207],{"type":406,"value":2208},"addStyleSheet",{"type":400,"tag":483,"props":2210,"children":2211},{"style":954},[2212],{"type":406,"value":499},{"type":400,"tag":483,"props":2214,"children":2215},{"style":496},[2216],{"type":406,"value":1818},{"type":400,"tag":483,"props":2218,"children":2219},{"style":490},[2220],{"type":406,"value":2221},",\n",{"type":400,"tag":483,"props":2223,"children":2224},{"class":485,"line":1058},[2225],{"type":400,"tag":483,"props":2226,"children":2227},{"style":542},[2228],{"type":406,"value":2229},"        // corrects block display not defined in IE6/7/8/9\n",{"type":400,"tag":483,"props":2231,"children":2232},{"class":485,"line":1094},[2233,2238,2243,2247],{"type":400,"tag":483,"props":2234,"children":2235},{"style":577},[2236],{"type":406,"value":2237},"        '",{"type":400,"tag":483,"props":2239,"children":2240},{"style":583},[2241],{"type":406,"value":2242},"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}",{"type":400,"tag":483,"props":2244,"children":2245},{"style":577},[2246],{"type":406,"value":689},{"type":400,"tag":483,"props":2248,"children":2249},{"style":561},[2250],{"type":406,"value":2251}," +\n",{"type":400,"tag":483,"props":2253,"children":2254},{"class":485,"line":1103},[2255],{"type":400,"tag":483,"props":2256,"children":2257},{"style":542},[2258],{"type":406,"value":2259},"        // adds styling not present in IE6/7/8/9\n",{"type":400,"tag":483,"props":2261,"children":2262},{"class":485,"line":1372},[2263,2267,2272,2276],{"type":400,"tag":483,"props":2264,"children":2265},{"style":577},[2266],{"type":406,"value":2237},{"type":400,"tag":483,"props":2268,"children":2269},{"style":583},[2270],{"type":406,"value":2271},"mark{background:#FF0;color:#000}",{"type":400,"tag":483,"props":2273,"children":2274},{"style":577},[2275],{"type":406,"value":689},{"type":400,"tag":483,"props":2277,"children":2278},{"style":561},[2279],{"type":406,"value":2251},{"type":400,"tag":483,"props":2281,"children":2282},{"class":485,"line":1381},[2283],{"type":400,"tag":483,"props":2284,"children":2285},{"style":542},[2286],{"type":406,"value":2287},"        // hides non-rendered elements\n",{"type":400,"tag":483,"props":2289,"children":2290},{"class":485,"line":1424},[2291,2295,2300],{"type":400,"tag":483,"props":2292,"children":2293},{"style":577},[2294],{"type":406,"value":2237},{"type":400,"tag":483,"props":2296,"children":2297},{"style":583},[2298],{"type":406,"value":2299},"template{display:none}",{"type":400,"tag":483,"props":2301,"children":2302},{"style":577},[2303],{"type":406,"value":850},{"type":400,"tag":483,"props":2305,"children":2306},{"class":485,"line":1457},[2307],{"type":400,"tag":483,"props":2308,"children":2309},{"style":954},[2310],{"type":406,"value":2311},"      )\n",{"type":400,"tag":483,"props":2313,"children":2314},{"class":485,"line":1470},[2315],{"type":400,"tag":483,"props":2316,"children":2317},{"style":490},[2318],{"type":406,"value":1691},{"type":400,"tag":483,"props":2320,"children":2321},{"class":485,"line":1511},[2322],{"type":400,"tag":483,"props":2323,"children":2324},{"emptyLinePlaceholder":393},[2325],{"type":406,"value":1301},{"type":400,"tag":483,"props":2327,"children":2328},{"class":485,"line":1551},[2329],{"type":400,"tag":483,"props":2330,"children":2331},{"style":542},[2332],{"type":406,"value":2333},"    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n",{"type":400,"tag":483,"props":2335,"children":2336},{"class":485,"line":1587},[2337],{"type":400,"tag":483,"props":2338,"children":2339},{"style":542},[2340],{"type":406,"value":2341},"    // 如果当前浏览器连 document.createElement 都会报错，\n",{"type":400,"tag":483,"props":2343,"children":2344},{"class":485,"line":1596},[2345],{"type":400,"tag":483,"props":2346,"children":2347},{"style":542},[2348],{"type":406,"value":2349},"    // 那就没办法 shiv 了，只好假装一切正常...\n",{"type":400,"tag":483,"props":2351,"children":2352},{"class":485,"line":1609},[2353,2357,2361,2365,2370,2374],{"type":400,"tag":483,"props":2354,"children":2355},{"style":964},[2356],{"type":406,"value":1878},{"type":400,"tag":483,"props":2358,"children":2359},{"style":954},[2360],{"type":406,"value":719},{"type":400,"tag":483,"props":2362,"children":2363},{"style":561},[2364],{"type":406,"value":1887},{"type":400,"tag":483,"props":2366,"children":2367},{"style":496},[2368],{"type":406,"value":2369},"supportsUnknownElements",{"type":400,"tag":483,"props":2371,"children":2372},{"style":954},[2373],{"type":406,"value":1634},{"type":400,"tag":483,"props":2375,"children":2376},{"style":490},[2377],{"type":406,"value":1639},{"type":400,"tag":483,"props":2379,"children":2380},{"class":485,"line":1642},[2381],{"type":400,"tag":483,"props":2382,"children":2383},{"style":542},[2384],{"type":406,"value":2385},"      // 增强 createElement 和 createDocumentFragment\n",{"type":400,"tag":483,"props":2387,"children":2388},{"class":485,"line":1651},[2389,2394,2398,2402,2406,2410],{"type":400,"tag":483,"props":2390,"children":2391},{"style":677},[2392],{"type":406,"value":2393},"      shivMethods",{"type":400,"tag":483,"props":2395,"children":2396},{"style":954},[2397],{"type":406,"value":499},{"type":400,"tag":483,"props":2399,"children":2400},{"style":496},[2401],{"type":406,"value":1818},{"type":400,"tag":483,"props":2403,"children":2404},{"style":490},[2405],{"type":406,"value":520},{"type":400,"tag":483,"props":2407,"children":2408},{"style":496},[2409],{"type":406,"value":1838},{"type":400,"tag":483,"props":2411,"children":2412},{"style":954},[2413],{"type":406,"value":702},{"type":400,"tag":483,"props":2415,"children":2416},{"class":485,"line":1669},[2417],{"type":400,"tag":483,"props":2418,"children":2419},{"style":490},[2420],{"type":406,"value":1691},{"type":400,"tag":483,"props":2422,"children":2423},{"class":485,"line":1685},[2424,2428],{"type":400,"tag":483,"props":2425,"children":2426},{"style":964},[2427],{"type":406,"value":967},{"type":400,"tag":483,"props":2429,"children":2430},{"style":496},[2431],{"type":406,"value":2432}," ownerDocument\n",{"type":400,"tag":483,"props":2434,"children":2435},{"class":485,"line":1694},[2436],{"type":400,"tag":483,"props":2437,"children":2438},{"style":490},[2439],{"type":406,"value":2015},{"type":400,"tag":414,"props":2441,"children":2442},{},[2443],{"type":406,"value":2444},"接下来，仔细康康 shivMethods 方法。shivMethods 仿制了 createElement 和 createDocumentFragment 两个 API，将其挂载到 document._html5shiv。并通过装饰器模式增强了浏览器原生的 createElement 等 API 的功能。",{"type":400,"tag":472,"props":2446,"children":2448},{"className":474,"code":2447,"language":476,"meta":394,"style":394},"function shivMethods(ownerDocument, data) {\n    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n    if (!data.cache) {\n        data.cache = {}\n        data.createElem = ownerDocument.createElement\n        data.createFrag = ownerDocument.createDocumentFragment\n        data.frag = data.createFrag()\n    }\n\n    ownerDocument.createElement = function(nodeName) {\n      // shivMethods 可看作全局的 shiv 开关\n      if (!html5.shivMethods) {\n          return data.createElem(nodeName)\n      }\n      return createElement(nodeName, ownerDocument, data)\n    }\n\n    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n    // 最终返回 data.frag 的克隆函数\n    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n    // 猜测它只能在老版本 IE 上起作用\n    ownerDocument.createDocumentFragment = Function(\n      'html5,dataFrag', \n      'return function(){' +\n        'var clone=dataFrag.cloneNode(),create=clone.createElement' +\n        'html5.shivMethods&&(' +\n            // unroll the `createElement` calls\n            getElements().join().replace(/[\\w\\-:]+/g, function(nodeName) {\n            data.createElem(nodeName)\n            data.frag.createElement(nodeName)\n            return 'create(\"' + nodeName + '\")'\n            }) +\n        ')return clone' +\n      '}'\n    )(html5, data.frag)\n  }\n",[2449],{"type":400,"tag":479,"props":2450,"children":2451},{"__ignoreMap":394},[2452,2488,2496,2532,2555,2589,2622,2658,2665,2672,2714,2722,2759,2791,2799,2840,2847,2854,2862,2870,2878,2886,2915,2941,2961,2981,3002,3011,3110,3139,3175,3223,3241,3262,3278,3311],{"type":400,"tag":483,"props":2453,"children":2454},{"class":485,"line":486},[2455,2459,2464,2468,2472,2476,2480,2484],{"type":400,"tag":483,"props":2456,"children":2457},{"style":502},[2458],{"type":406,"value":505},{"type":400,"tag":483,"props":2460,"children":2461},{"style":677},[2462],{"type":406,"value":2463}," shivMethods",{"type":400,"tag":483,"props":2465,"children":2466},{"style":490},[2467],{"type":406,"value":499},{"type":400,"tag":483,"props":2469,"children":2470},{"style":512},[2471],{"type":406,"value":1818},{"type":400,"tag":483,"props":2473,"children":2474},{"style":490},[2475],{"type":406,"value":520},{"type":400,"tag":483,"props":2477,"children":2478},{"style":512},[2479],{"type":406,"value":1838},{"type":400,"tag":483,"props":2481,"children":2482},{"style":490},[2483],{"type":406,"value":530},{"type":400,"tag":483,"props":2485,"children":2486},{"style":490},[2487],{"type":406,"value":535},{"type":400,"tag":483,"props":2489,"children":2490},{"class":485,"line":538},[2491],{"type":400,"tag":483,"props":2492,"children":2493},{"style":542},[2494],{"type":406,"value":2495},"    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n",{"type":400,"tag":483,"props":2497,"children":2498},{"class":485,"line":548},[2499,2503,2507,2511,2515,2519,2524,2528],{"type":400,"tag":483,"props":2500,"children":2501},{"style":964},[2502],{"type":406,"value":1878},{"type":400,"tag":483,"props":2504,"children":2505},{"style":954},[2506],{"type":406,"value":719},{"type":400,"tag":483,"props":2508,"children":2509},{"style":561},[2510],{"type":406,"value":1887},{"type":400,"tag":483,"props":2512,"children":2513},{"style":496},[2514],{"type":406,"value":1892},{"type":400,"tag":483,"props":2516,"children":2517},{"style":490},[2518],{"type":406,"value":674},{"type":400,"tag":483,"props":2520,"children":2521},{"style":496},[2522],{"type":406,"value":2523},"cache",{"type":400,"tag":483,"props":2525,"children":2526},{"style":954},[2527],{"type":406,"value":1634},{"type":400,"tag":483,"props":2529,"children":2530},{"style":490},[2531],{"type":406,"value":1639},{"type":400,"tag":483,"props":2533,"children":2534},{"class":485,"line":922},[2535,2539,2543,2547,2551],{"type":400,"tag":483,"props":2536,"children":2537},{"style":496},[2538],{"type":406,"value":1908},{"type":400,"tag":483,"props":2540,"children":2541},{"style":490},[2542],{"type":406,"value":674},{"type":400,"tag":483,"props":2544,"children":2545},{"style":496},[2546],{"type":406,"value":2523},{"type":400,"tag":483,"props":2548,"children":2549},{"style":561},[2550],{"type":406,"value":938},{"type":400,"tag":483,"props":2552,"children":2553},{"style":490},[2554],{"type":406,"value":1747},{"type":400,"tag":483,"props":2556,"children":2557},{"class":485,"line":960},[2558,2562,2566,2571,2575,2580,2584],{"type":400,"tag":483,"props":2559,"children":2560},{"style":496},[2561],{"type":406,"value":1908},{"type":400,"tag":483,"props":2563,"children":2564},{"style":490},[2565],{"type":406,"value":674},{"type":400,"tag":483,"props":2567,"children":2568},{"style":496},[2569],{"type":406,"value":2570},"createElem",{"type":400,"tag":483,"props":2572,"children":2573},{"style":561},[2574],{"type":406,"value":938},{"type":400,"tag":483,"props":2576,"children":2577},{"style":496},[2578],{"type":406,"value":2579}," ownerDocument",{"type":400,"tag":483,"props":2581,"children":2582},{"style":490},[2583],{"type":406,"value":674},{"type":400,"tag":483,"props":2585,"children":2586},{"style":496},[2587],{"type":406,"value":2588},"createElement\n",{"type":400,"tag":483,"props":2590,"children":2591},{"class":485,"line":975},[2592,2596,2600,2605,2609,2613,2617],{"type":400,"tag":483,"props":2593,"children":2594},{"style":496},[2595],{"type":406,"value":1908},{"type":400,"tag":483,"props":2597,"children":2598},{"style":490},[2599],{"type":406,"value":674},{"type":400,"tag":483,"props":2601,"children":2602},{"style":496},[2603],{"type":406,"value":2604},"createFrag",{"type":400,"tag":483,"props":2606,"children":2607},{"style":561},[2608],{"type":406,"value":938},{"type":400,"tag":483,"props":2610,"children":2611},{"style":496},[2612],{"type":406,"value":2579},{"type":400,"tag":483,"props":2614,"children":2615},{"style":490},[2616],{"type":406,"value":674},{"type":400,"tag":483,"props":2618,"children":2619},{"style":496},[2620],{"type":406,"value":2621},"createDocumentFragment\n",{"type":400,"tag":483,"props":2623,"children":2624},{"class":485,"line":1018},[2625,2629,2633,2638,2642,2646,2650,2654],{"type":400,"tag":483,"props":2626,"children":2627},{"style":496},[2628],{"type":406,"value":1908},{"type":400,"tag":483,"props":2630,"children":2631},{"style":490},[2632],{"type":406,"value":674},{"type":400,"tag":483,"props":2634,"children":2635},{"style":496},[2636],{"type":406,"value":2637},"frag",{"type":400,"tag":483,"props":2639,"children":2640},{"style":561},[2641],{"type":406,"value":938},{"type":400,"tag":483,"props":2643,"children":2644},{"style":496},[2645],{"type":406,"value":1838},{"type":400,"tag":483,"props":2647,"children":2648},{"style":490},[2649],{"type":406,"value":674},{"type":400,"tag":483,"props":2651,"children":2652},{"style":677},[2653],{"type":406,"value":2604},{"type":400,"tag":483,"props":2655,"children":2656},{"style":954},[2657],{"type":406,"value":957},{"type":400,"tag":483,"props":2659,"children":2660},{"class":485,"line":1058},[2661],{"type":400,"tag":483,"props":2662,"children":2663},{"style":490},[2664],{"type":406,"value":1691},{"type":400,"tag":483,"props":2666,"children":2667},{"class":485,"line":1094},[2668],{"type":400,"tag":483,"props":2669,"children":2670},{"emptyLinePlaceholder":393},[2671],{"type":406,"value":1301},{"type":400,"tag":483,"props":2673,"children":2674},{"class":485,"line":1103},[2675,2680,2684,2688,2692,2697,2701,2706,2710],{"type":400,"tag":483,"props":2676,"children":2677},{"style":496},[2678],{"type":406,"value":2679},"    ownerDocument",{"type":400,"tag":483,"props":2681,"children":2682},{"style":490},[2683],{"type":406,"value":674},{"type":400,"tag":483,"props":2685,"children":2686},{"style":677},[2687],{"type":406,"value":680},{"type":400,"tag":483,"props":2689,"children":2690},{"style":561},[2691],{"type":406,"value":938},{"type":400,"tag":483,"props":2693,"children":2694},{"style":502},[2695],{"type":406,"value":2696}," function",{"type":400,"tag":483,"props":2698,"children":2699},{"style":490},[2700],{"type":406,"value":499},{"type":400,"tag":483,"props":2702,"children":2703},{"style":512},[2704],{"type":406,"value":2705},"nodeName",{"type":400,"tag":483,"props":2707,"children":2708},{"style":490},[2709],{"type":406,"value":530},{"type":400,"tag":483,"props":2711,"children":2712},{"style":490},[2713],{"type":406,"value":535},{"type":400,"tag":483,"props":2715,"children":2716},{"class":485,"line":1372},[2717],{"type":400,"tag":483,"props":2718,"children":2719},{"style":542},[2720],{"type":406,"value":2721},"      // shivMethods 可看作全局的 shiv 开关\n",{"type":400,"tag":483,"props":2723,"children":2724},{"class":485,"line":1381},[2725,2730,2734,2738,2742,2746,2751,2755],{"type":400,"tag":483,"props":2726,"children":2727},{"style":964},[2728],{"type":406,"value":2729},"      if",{"type":400,"tag":483,"props":2731,"children":2732},{"style":954},[2733],{"type":406,"value":719},{"type":400,"tag":483,"props":2735,"children":2736},{"style":561},[2737],{"type":406,"value":1887},{"type":400,"tag":483,"props":2739,"children":2740},{"style":496},[2741],{"type":406,"value":2125},{"type":400,"tag":483,"props":2743,"children":2744},{"style":490},[2745],{"type":406,"value":674},{"type":400,"tag":483,"props":2747,"children":2748},{"style":496},[2749],{"type":406,"value":2750},"shivMethods",{"type":400,"tag":483,"props":2752,"children":2753},{"style":954},[2754],{"type":406,"value":1634},{"type":400,"tag":483,"props":2756,"children":2757},{"style":490},[2758],{"type":406,"value":1639},{"type":400,"tag":483,"props":2760,"children":2761},{"class":485,"line":1424},[2762,2767,2771,2775,2779,2783,2787],{"type":400,"tag":483,"props":2763,"children":2764},{"style":964},[2765],{"type":406,"value":2766},"          return",{"type":400,"tag":483,"props":2768,"children":2769},{"style":496},[2770],{"type":406,"value":1838},{"type":400,"tag":483,"props":2772,"children":2773},{"style":490},[2774],{"type":406,"value":674},{"type":400,"tag":483,"props":2776,"children":2777},{"style":677},[2778],{"type":406,"value":2570},{"type":400,"tag":483,"props":2780,"children":2781},{"style":954},[2782],{"type":406,"value":499},{"type":400,"tag":483,"props":2784,"children":2785},{"style":496},[2786],{"type":406,"value":2705},{"type":400,"tag":483,"props":2788,"children":2789},{"style":954},[2790],{"type":406,"value":702},{"type":400,"tag":483,"props":2792,"children":2793},{"class":485,"line":1457},[2794],{"type":400,"tag":483,"props":2795,"children":2796},{"style":490},[2797],{"type":406,"value":2798},"      }\n",{"type":400,"tag":483,"props":2800,"children":2801},{"class":485,"line":1470},[2802,2807,2812,2816,2820,2824,2828,2832,2836],{"type":400,"tag":483,"props":2803,"children":2804},{"style":964},[2805],{"type":406,"value":2806},"      return",{"type":400,"tag":483,"props":2808,"children":2809},{"style":677},[2810],{"type":406,"value":2811}," createElement",{"type":400,"tag":483,"props":2813,"children":2814},{"style":954},[2815],{"type":406,"value":499},{"type":400,"tag":483,"props":2817,"children":2818},{"style":496},[2819],{"type":406,"value":2705},{"type":400,"tag":483,"props":2821,"children":2822},{"style":490},[2823],{"type":406,"value":520},{"type":400,"tag":483,"props":2825,"children":2826},{"style":496},[2827],{"type":406,"value":2579},{"type":400,"tag":483,"props":2829,"children":2830},{"style":490},[2831],{"type":406,"value":520},{"type":400,"tag":483,"props":2833,"children":2834},{"style":496},[2835],{"type":406,"value":1838},{"type":400,"tag":483,"props":2837,"children":2838},{"style":954},[2839],{"type":406,"value":702},{"type":400,"tag":483,"props":2841,"children":2842},{"class":485,"line":1511},[2843],{"type":400,"tag":483,"props":2844,"children":2845},{"style":490},[2846],{"type":406,"value":1691},{"type":400,"tag":483,"props":2848,"children":2849},{"class":485,"line":1551},[2850],{"type":400,"tag":483,"props":2851,"children":2852},{"emptyLinePlaceholder":393},[2853],{"type":406,"value":1301},{"type":400,"tag":483,"props":2855,"children":2856},{"class":485,"line":1587},[2857],{"type":400,"tag":483,"props":2858,"children":2859},{"style":542},[2860],{"type":406,"value":2861},"    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n",{"type":400,"tag":483,"props":2863,"children":2864},{"class":485,"line":1596},[2865],{"type":400,"tag":483,"props":2866,"children":2867},{"style":542},[2868],{"type":406,"value":2869},"    // 最终返回 data.frag 的克隆函数\n",{"type":400,"tag":483,"props":2871,"children":2872},{"class":485,"line":1609},[2873],{"type":400,"tag":483,"props":2874,"children":2875},{"style":542},[2876],{"type":406,"value":2877},"    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n",{"type":400,"tag":483,"props":2879,"children":2880},{"class":485,"line":1642},[2881],{"type":400,"tag":483,"props":2882,"children":2883},{"style":542},[2884],{"type":406,"value":2885},"    // 猜测它只能在老版本 IE 上起作用\n",{"type":400,"tag":483,"props":2887,"children":2888},{"class":485,"line":1651},[2889,2893,2897,2901,2905,2910],{"type":400,"tag":483,"props":2890,"children":2891},{"style":496},[2892],{"type":406,"value":2679},{"type":400,"tag":483,"props":2894,"children":2895},{"style":490},[2896],{"type":406,"value":674},{"type":400,"tag":483,"props":2898,"children":2899},{"style":496},[2900],{"type":406,"value":951},{"type":400,"tag":483,"props":2902,"children":2903},{"style":561},[2904],{"type":406,"value":938},{"type":400,"tag":483,"props":2906,"children":2907},{"style":677},[2908],{"type":406,"value":2909}," Function",{"type":400,"tag":483,"props":2911,"children":2912},{"style":954},[2913],{"type":406,"value":2914},"(\n",{"type":400,"tag":483,"props":2916,"children":2917},{"class":485,"line":1669},[2918,2923,2928,2932,2936],{"type":400,"tag":483,"props":2919,"children":2920},{"style":577},[2921],{"type":406,"value":2922},"      '",{"type":400,"tag":483,"props":2924,"children":2925},{"style":583},[2926],{"type":406,"value":2927},"html5,dataFrag",{"type":400,"tag":483,"props":2929,"children":2930},{"style":577},[2931],{"type":406,"value":689},{"type":400,"tag":483,"props":2933,"children":2934},{"style":490},[2935],{"type":406,"value":520},{"type":400,"tag":483,"props":2937,"children":2938},{"style":954},[2939],{"type":406,"value":2940}," \n",{"type":400,"tag":483,"props":2942,"children":2943},{"class":485,"line":1685},[2944,2948,2953,2957],{"type":400,"tag":483,"props":2945,"children":2946},{"style":577},[2947],{"type":406,"value":2922},{"type":400,"tag":483,"props":2949,"children":2950},{"style":583},[2951],{"type":406,"value":2952},"return function(){",{"type":400,"tag":483,"props":2954,"children":2955},{"style":577},[2956],{"type":406,"value":689},{"type":400,"tag":483,"props":2958,"children":2959},{"style":561},[2960],{"type":406,"value":2251},{"type":400,"tag":483,"props":2962,"children":2963},{"class":485,"line":1694},[2964,2968,2973,2977],{"type":400,"tag":483,"props":2965,"children":2966},{"style":577},[2967],{"type":406,"value":2237},{"type":400,"tag":483,"props":2969,"children":2970},{"style":583},[2971],{"type":406,"value":2972},"var clone=dataFrag.cloneNode(),create=clone.createElement",{"type":400,"tag":483,"props":2974,"children":2975},{"style":577},[2976],{"type":406,"value":689},{"type":400,"tag":483,"props":2978,"children":2979},{"style":561},[2980],{"type":406,"value":2251},{"type":400,"tag":483,"props":2982,"children":2984},{"class":485,"line":2983},26,[2985,2989,2994,2998],{"type":400,"tag":483,"props":2986,"children":2987},{"style":577},[2988],{"type":406,"value":2237},{"type":400,"tag":483,"props":2990,"children":2991},{"style":583},[2992],{"type":406,"value":2993},"html5.shivMethods&&(",{"type":400,"tag":483,"props":2995,"children":2996},{"style":577},[2997],{"type":406,"value":689},{"type":400,"tag":483,"props":2999,"children":3000},{"style":561},[3001],{"type":406,"value":2251},{"type":400,"tag":483,"props":3003,"children":3005},{"class":485,"line":3004},27,[3006],{"type":400,"tag":483,"props":3007,"children":3008},{"style":542},[3009],{"type":406,"value":3010},"            // unroll the `createElement` calls\n",{"type":400,"tag":483,"props":3012,"children":3014},{"class":485,"line":3013},28,[3015,3020,3024,3028,3033,3037,3041,3046,3050,3055,3060,3066,3071,3076,3080,3086,3090,3094,3098,3102,3106],{"type":400,"tag":483,"props":3016,"children":3017},{"style":677},[3018],{"type":406,"value":3019},"            getElements",{"type":400,"tag":483,"props":3021,"children":3022},{"style":954},[3023],{"type":406,"value":915},{"type":400,"tag":483,"props":3025,"children":3026},{"style":490},[3027],{"type":406,"value":674},{"type":400,"tag":483,"props":3029,"children":3030},{"style":677},[3031],{"type":406,"value":3032},"join",{"type":400,"tag":483,"props":3034,"children":3035},{"style":954},[3036],{"type":406,"value":915},{"type":400,"tag":483,"props":3038,"children":3039},{"style":490},[3040],{"type":406,"value":674},{"type":400,"tag":483,"props":3042,"children":3043},{"style":677},[3044],{"type":406,"value":3045},"replace",{"type":400,"tag":483,"props":3047,"children":3048},{"style":954},[3049],{"type":406,"value":499},{"type":400,"tag":483,"props":3051,"children":3052},{"style":577},[3053],{"type":406,"value":3054},"/",{"type":400,"tag":483,"props":3056,"children":3058},{"style":3057},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3059],{"type":406,"value":1852},{"type":400,"tag":483,"props":3061,"children":3063},{"style":3062},"--shiki-light:#91B859;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3064],{"type":406,"value":3065},"\\w\\-:",{"type":400,"tag":483,"props":3067,"children":3068},{"style":3057},[3069],{"type":406,"value":3070},"]",{"type":400,"tag":483,"props":3072,"children":3073},{"style":561},[3074],{"type":406,"value":3075},"+",{"type":400,"tag":483,"props":3077,"children":3078},{"style":577},[3079],{"type":406,"value":3054},{"type":400,"tag":483,"props":3081,"children":3083},{"style":3082},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3084],{"type":406,"value":3085},"g",{"type":400,"tag":483,"props":3087,"children":3088},{"style":490},[3089],{"type":406,"value":520},{"type":400,"tag":483,"props":3091,"children":3092},{"style":502},[3093],{"type":406,"value":2696},{"type":400,"tag":483,"props":3095,"children":3096},{"style":490},[3097],{"type":406,"value":499},{"type":400,"tag":483,"props":3099,"children":3100},{"style":512},[3101],{"type":406,"value":2705},{"type":400,"tag":483,"props":3103,"children":3104},{"style":490},[3105],{"type":406,"value":530},{"type":400,"tag":483,"props":3107,"children":3108},{"style":490},[3109],{"type":406,"value":535},{"type":400,"tag":483,"props":3111,"children":3113},{"class":485,"line":3112},29,[3114,3119,3123,3127,3131,3135],{"type":400,"tag":483,"props":3115,"children":3116},{"style":496},[3117],{"type":406,"value":3118},"            data",{"type":400,"tag":483,"props":3120,"children":3121},{"style":490},[3122],{"type":406,"value":674},{"type":400,"tag":483,"props":3124,"children":3125},{"style":677},[3126],{"type":406,"value":2570},{"type":400,"tag":483,"props":3128,"children":3129},{"style":954},[3130],{"type":406,"value":499},{"type":400,"tag":483,"props":3132,"children":3133},{"style":496},[3134],{"type":406,"value":2705},{"type":400,"tag":483,"props":3136,"children":3137},{"style":954},[3138],{"type":406,"value":702},{"type":400,"tag":483,"props":3140,"children":3142},{"class":485,"line":3141},30,[3143,3147,3151,3155,3159,3163,3167,3171],{"type":400,"tag":483,"props":3144,"children":3145},{"style":496},[3146],{"type":406,"value":3118},{"type":400,"tag":483,"props":3148,"children":3149},{"style":490},[3150],{"type":406,"value":674},{"type":400,"tag":483,"props":3152,"children":3153},{"style":496},[3154],{"type":406,"value":2637},{"type":400,"tag":483,"props":3156,"children":3157},{"style":490},[3158],{"type":406,"value":674},{"type":400,"tag":483,"props":3160,"children":3161},{"style":677},[3162],{"type":406,"value":680},{"type":400,"tag":483,"props":3164,"children":3165},{"style":954},[3166],{"type":406,"value":499},{"type":400,"tag":483,"props":3168,"children":3169},{"style":496},[3170],{"type":406,"value":2705},{"type":400,"tag":483,"props":3172,"children":3173},{"style":954},[3174],{"type":406,"value":702},{"type":400,"tag":483,"props":3176,"children":3178},{"class":485,"line":3177},31,[3179,3183,3187,3192,3196,3201,3206,3210,3214,3219],{"type":400,"tag":483,"props":3180,"children":3181},{"style":964},[3182],{"type":406,"value":1463},{"type":400,"tag":483,"props":3184,"children":3185},{"style":577},[3186],{"type":406,"value":840},{"type":400,"tag":483,"props":3188,"children":3189},{"style":583},[3190],{"type":406,"value":3191},"create(\"",{"type":400,"tag":483,"props":3193,"children":3194},{"style":577},[3195],{"type":406,"value":689},{"type":400,"tag":483,"props":3197,"children":3198},{"style":561},[3199],{"type":406,"value":3200}," +",{"type":400,"tag":483,"props":3202,"children":3203},{"style":496},[3204],{"type":406,"value":3205}," nodeName",{"type":400,"tag":483,"props":3207,"children":3208},{"style":561},[3209],{"type":406,"value":3200},{"type":400,"tag":483,"props":3211,"children":3212},{"style":577},[3213],{"type":406,"value":840},{"type":400,"tag":483,"props":3215,"children":3216},{"style":583},[3217],{"type":406,"value":3218},"\")",{"type":400,"tag":483,"props":3220,"children":3221},{"style":577},[3222],{"type":406,"value":850},{"type":400,"tag":483,"props":3224,"children":3226},{"class":485,"line":3225},32,[3227,3232,3236],{"type":400,"tag":483,"props":3228,"children":3229},{"style":490},[3230],{"type":406,"value":3231},"            }",{"type":400,"tag":483,"props":3233,"children":3234},{"style":954},[3235],{"type":406,"value":1634},{"type":400,"tag":483,"props":3237,"children":3238},{"style":561},[3239],{"type":406,"value":3240},"+\n",{"type":400,"tag":483,"props":3242,"children":3244},{"class":485,"line":3243},33,[3245,3249,3254,3258],{"type":400,"tag":483,"props":3246,"children":3247},{"style":577},[3248],{"type":406,"value":2237},{"type":400,"tag":483,"props":3250,"children":3251},{"style":583},[3252],{"type":406,"value":3253},")return clone",{"type":400,"tag":483,"props":3255,"children":3256},{"style":577},[3257],{"type":406,"value":689},{"type":400,"tag":483,"props":3259,"children":3260},{"style":561},[3261],{"type":406,"value":2251},{"type":400,"tag":483,"props":3263,"children":3265},{"class":485,"line":3264},34,[3266,3270,3274],{"type":400,"tag":483,"props":3267,"children":3268},{"style":577},[3269],{"type":406,"value":2922},{"type":400,"tag":483,"props":3271,"children":3272},{"style":583},[3273],{"type":406,"value":554},{"type":400,"tag":483,"props":3275,"children":3276},{"style":577},[3277],{"type":406,"value":850},{"type":400,"tag":483,"props":3279,"children":3281},{"class":485,"line":3280},35,[3282,3287,3291,3295,3299,3303,3307],{"type":400,"tag":483,"props":3283,"children":3284},{"style":954},[3285],{"type":406,"value":3286},"    )(",{"type":400,"tag":483,"props":3288,"children":3289},{"style":496},[3290],{"type":406,"value":2125},{"type":400,"tag":483,"props":3292,"children":3293},{"style":490},[3294],{"type":406,"value":520},{"type":400,"tag":483,"props":3296,"children":3297},{"style":496},[3298],{"type":406,"value":1838},{"type":400,"tag":483,"props":3300,"children":3301},{"style":490},[3302],{"type":406,"value":674},{"type":400,"tag":483,"props":3304,"children":3305},{"style":496},[3306],{"type":406,"value":2637},{"type":400,"tag":483,"props":3308,"children":3309},{"style":954},[3310],{"type":406,"value":702},{"type":400,"tag":483,"props":3312,"children":3314},{"class":485,"line":3313},36,[3315],{"type":400,"tag":483,"props":3316,"children":3317},{"style":490},[3318],{"type":406,"value":2015},{"type":400,"tag":414,"props":3320,"children":3321},{},[3322],{"type":406,"value":3323},"小插曲。我在浏览器测试时发现，若像上面这个函数一样，将 document.createDocumentFrament 先缓存，再调用，会发生报错：",{"type":400,"tag":472,"props":3325,"children":3327},{"className":474,"code":3326,"language":476,"meta":394,"style":394},"data = {}\ndata.createFrag = document.createDocumentFragment\ndata.frag = data.createFrag()\n\n// >>> Uncaught TypeError: Illegal invocation\n",[3328],{"type":400,"tag":479,"props":3329,"children":3330},{"__ignoreMap":394},[3331,3347,3379,3415,3422],{"type":400,"tag":483,"props":3332,"children":3333},{"class":485,"line":486},[3334,3339,3343],{"type":400,"tag":483,"props":3335,"children":3336},{"style":496},[3337],{"type":406,"value":3338},"data ",{"type":400,"tag":483,"props":3340,"children":3341},{"style":561},[3342],{"type":406,"value":665},{"type":400,"tag":483,"props":3344,"children":3345},{"style":490},[3346],{"type":406,"value":1747},{"type":400,"tag":483,"props":3348,"children":3349},{"class":485,"line":538},[3350,3354,3358,3363,3367,3371,3375],{"type":400,"tag":483,"props":3351,"children":3352},{"style":496},[3353],{"type":406,"value":1892},{"type":400,"tag":483,"props":3355,"children":3356},{"style":490},[3357],{"type":406,"value":674},{"type":400,"tag":483,"props":3359,"children":3360},{"style":496},[3361],{"type":406,"value":3362},"createFrag ",{"type":400,"tag":483,"props":3364,"children":3365},{"style":561},[3366],{"type":406,"value":665},{"type":400,"tag":483,"props":3368,"children":3369},{"style":496},[3370],{"type":406,"value":525},{"type":400,"tag":483,"props":3372,"children":3373},{"style":490},[3374],{"type":406,"value":674},{"type":400,"tag":483,"props":3376,"children":3377},{"style":496},[3378],{"type":406,"value":2621},{"type":400,"tag":483,"props":3380,"children":3381},{"class":485,"line":548},[3382,3386,3390,3395,3399,3403,3407,3411],{"type":400,"tag":483,"props":3383,"children":3384},{"style":496},[3385],{"type":406,"value":1892},{"type":400,"tag":483,"props":3387,"children":3388},{"style":490},[3389],{"type":406,"value":674},{"type":400,"tag":483,"props":3391,"children":3392},{"style":496},[3393],{"type":406,"value":3394},"frag ",{"type":400,"tag":483,"props":3396,"children":3397},{"style":561},[3398],{"type":406,"value":665},{"type":400,"tag":483,"props":3400,"children":3401},{"style":496},[3402],{"type":406,"value":1838},{"type":400,"tag":483,"props":3404,"children":3405},{"style":490},[3406],{"type":406,"value":674},{"type":400,"tag":483,"props":3408,"children":3409},{"style":677},[3410],{"type":406,"value":2604},{"type":400,"tag":483,"props":3412,"children":3413},{"style":496},[3414],{"type":406,"value":957},{"type":400,"tag":483,"props":3416,"children":3417},{"class":485,"line":922},[3418],{"type":400,"tag":483,"props":3419,"children":3420},{"emptyLinePlaceholder":393},[3421],{"type":406,"value":1301},{"type":400,"tag":483,"props":3423,"children":3424},{"class":485,"line":960},[3425],{"type":400,"tag":483,"props":3426,"children":3427},{"style":542},[3428],{"type":406,"value":3429},"// >>> Uncaught TypeError: Illegal invocation\n",{"type":400,"tag":414,"props":3431,"children":3432},{},[3433],{"type":406,"value":3434},"由于没有具体的报错原因，只能暂时猜测是 this 指向的锅。更改 this 指向后，再试了一次，这次没得问题。在 GitHub issues 中没有人提过这个问题，所以我只能猜测因为所有现代浏览器都支持使用原生 API 创建非标准元素，所以不会走 shivMethods 的逻辑。",{"type":400,"tag":472,"props":3436,"children":3438},{"className":474,"code":3437,"language":476,"meta":394,"style":394},"data = {}\ndata.createFrag = document.createDocumentFragment.bind(document)\ndata.frag = data.createFrag()\n\n// >>> #document-fragment\n",[3439],{"type":400,"tag":479,"props":3440,"children":3441},{"__ignoreMap":394},[3442,3457,3502,3537,3544],{"type":400,"tag":483,"props":3443,"children":3444},{"class":485,"line":486},[3445,3449,3453],{"type":400,"tag":483,"props":3446,"children":3447},{"style":496},[3448],{"type":406,"value":3338},{"type":400,"tag":483,"props":3450,"children":3451},{"style":561},[3452],{"type":406,"value":665},{"type":400,"tag":483,"props":3454,"children":3455},{"style":490},[3456],{"type":406,"value":1747},{"type":400,"tag":483,"props":3458,"children":3459},{"class":485,"line":538},[3460,3464,3468,3472,3476,3480,3484,3488,3492,3497],{"type":400,"tag":483,"props":3461,"children":3462},{"style":496},[3463],{"type":406,"value":1892},{"type":400,"tag":483,"props":3465,"children":3466},{"style":490},[3467],{"type":406,"value":674},{"type":400,"tag":483,"props":3469,"children":3470},{"style":496},[3471],{"type":406,"value":3362},{"type":400,"tag":483,"props":3473,"children":3474},{"style":561},[3475],{"type":406,"value":665},{"type":400,"tag":483,"props":3477,"children":3478},{"style":496},[3479],{"type":406,"value":525},{"type":400,"tag":483,"props":3481,"children":3482},{"style":490},[3483],{"type":406,"value":674},{"type":400,"tag":483,"props":3485,"children":3486},{"style":496},[3487],{"type":406,"value":951},{"type":400,"tag":483,"props":3489,"children":3490},{"style":490},[3491],{"type":406,"value":674},{"type":400,"tag":483,"props":3493,"children":3494},{"style":677},[3495],{"type":406,"value":3496},"bind",{"type":400,"tag":483,"props":3498,"children":3499},{"style":496},[3500],{"type":406,"value":3501},"(document)\n",{"type":400,"tag":483,"props":3503,"children":3504},{"class":485,"line":548},[3505,3509,3513,3517,3521,3525,3529,3533],{"type":400,"tag":483,"props":3506,"children":3507},{"style":496},[3508],{"type":406,"value":1892},{"type":400,"tag":483,"props":3510,"children":3511},{"style":490},[3512],{"type":406,"value":674},{"type":400,"tag":483,"props":3514,"children":3515},{"style":496},[3516],{"type":406,"value":3394},{"type":400,"tag":483,"props":3518,"children":3519},{"style":561},[3520],{"type":406,"value":665},{"type":400,"tag":483,"props":3522,"children":3523},{"style":496},[3524],{"type":406,"value":1838},{"type":400,"tag":483,"props":3526,"children":3527},{"style":490},[3528],{"type":406,"value":674},{"type":400,"tag":483,"props":3530,"children":3531},{"style":677},[3532],{"type":406,"value":2604},{"type":400,"tag":483,"props":3534,"children":3535},{"style":496},[3536],{"type":406,"value":957},{"type":400,"tag":483,"props":3538,"children":3539},{"class":485,"line":922},[3540],{"type":400,"tag":483,"props":3541,"children":3542},{"emptyLinePlaceholder":393},[3543],{"type":406,"value":1301},{"type":400,"tag":483,"props":3545,"children":3546},{"class":485,"line":960},[3547],{"type":400,"tag":483,"props":3548,"children":3549},{"style":542},[3550],{"type":406,"value":3551},"// >>> #document-fragment\n",{"type":400,"tag":414,"props":3553,"children":3554},{},[3555],{"type":406,"value":3556},"我们继续。以下代码是对 createElement 的仿制， 用于返回一个已经 shiv 过的元素。主要是用来兼容原生 document.createElement 不支持创建一个非规范的元素的情况。比方说，HTML5 标签中有 article 元素，document.createElement 不支持的话，就需要调用此仿制 API。",{"type":400,"tag":472,"props":3558,"children":3560},{"className":474,"code":3559,"language":476,"meta":394,"style":394},"function createElement(nodeName, ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createElement(nodeName)\n    }\n    if (!data) {\n        data = getExpandoData(ownerDocument)\n    }\n    var node\n\n    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n    if (data.cache[nodeName]) {\n        node = data.cache[nodeName].cloneNode()\n    } else \n    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n    // 则创建一个新元素并存到缓存中\n    if (saveClones.test(nodeName)) {\n        node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode()\n    } else \n    // 如果是不能被克隆的对象，那就直接创建吧...\n    {\n        node = data.createElem(nodeName)\n    }\n\n    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n    // Avoid adding some elements to fragments in IE \u003C 9 because\n    // * Attributes like `name` or `type` cannot be set/changed once an element\n    //   is inserted into a document/fragment\n    // * Link elements with `src` attributes that are inaccessible, as with\n    //   a 403 response, will cause the tab/window to crash\n    // * Script elements appended to fragments will execute when their `src`\n    //   or `text` property is set\n    return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn \n        ? data.frag.appendChild(node) \n        : node\n  }\n",[3561],{"type":400,"tag":479,"props":3562,"children":3563},{"__ignoreMap":394},[3564,3604,3627,3659,3666,3693,3720,3727,3739,3746,3754,3794,3842,3858,3866,3874,3916,3996,4011,4019,4027,4062,4069,4076,4084,4092,4100,4108,4116,4124,4132,4140,4221,4263,4275],{"type":400,"tag":483,"props":3565,"children":3566},{"class":485,"line":486},[3567,3571,3575,3579,3583,3587,3591,3595,3599],{"type":400,"tag":483,"props":3568,"children":3569},{"style":502},[3570],{"type":406,"value":505},{"type":400,"tag":483,"props":3572,"children":3573},{"style":677},[3574],{"type":406,"value":2811},{"type":400,"tag":483,"props":3576,"children":3577},{"style":490},[3578],{"type":406,"value":499},{"type":400,"tag":483,"props":3580,"children":3581},{"style":512},[3582],{"type":406,"value":2705},{"type":400,"tag":483,"props":3584,"children":3585},{"style":490},[3586],{"type":406,"value":520},{"type":400,"tag":483,"props":3588,"children":3589},{"style":512},[3590],{"type":406,"value":2579},{"type":400,"tag":483,"props":3592,"children":3593},{"style":490},[3594],{"type":406,"value":520},{"type":400,"tag":483,"props":3596,"children":3597},{"style":512},[3598],{"type":406,"value":1838},{"type":400,"tag":483,"props":3600,"children":3601},{"style":490},[3602],{"type":406,"value":3603},"){\n",{"type":400,"tag":483,"props":3605,"children":3606},{"class":485,"line":538},[3607,3611,3615,3619,3623],{"type":400,"tag":483,"props":3608,"children":3609},{"style":964},[3610],{"type":406,"value":1878},{"type":400,"tag":483,"props":3612,"children":3613},{"style":954},[3614],{"type":406,"value":499},{"type":400,"tag":483,"props":3616,"children":3617},{"style":496},[3618],{"type":406,"value":2369},{"type":400,"tag":483,"props":3620,"children":3621},{"style":954},[3622],{"type":406,"value":530},{"type":400,"tag":483,"props":3624,"children":3625},{"style":490},[3626],{"type":406,"value":1639},{"type":400,"tag":483,"props":3628,"children":3629},{"class":485,"line":548},[3630,3635,3639,3643,3647,3651,3655],{"type":400,"tag":483,"props":3631,"children":3632},{"style":964},[3633],{"type":406,"value":3634},"        return",{"type":400,"tag":483,"props":3636,"children":3637},{"style":496},[3638],{"type":406,"value":2579},{"type":400,"tag":483,"props":3640,"children":3641},{"style":490},[3642],{"type":406,"value":674},{"type":400,"tag":483,"props":3644,"children":3645},{"style":677},[3646],{"type":406,"value":680},{"type":400,"tag":483,"props":3648,"children":3649},{"style":954},[3650],{"type":406,"value":499},{"type":400,"tag":483,"props":3652,"children":3653},{"style":496},[3654],{"type":406,"value":2705},{"type":400,"tag":483,"props":3656,"children":3657},{"style":954},[3658],{"type":406,"value":702},{"type":400,"tag":483,"props":3660,"children":3661},{"class":485,"line":922},[3662],{"type":400,"tag":483,"props":3663,"children":3664},{"style":490},[3665],{"type":406,"value":1691},{"type":400,"tag":483,"props":3667,"children":3668},{"class":485,"line":960},[3669,3673,3677,3681,3685,3689],{"type":400,"tag":483,"props":3670,"children":3671},{"style":964},[3672],{"type":406,"value":1878},{"type":400,"tag":483,"props":3674,"children":3675},{"style":954},[3676],{"type":406,"value":719},{"type":400,"tag":483,"props":3678,"children":3679},{"style":561},[3680],{"type":406,"value":1887},{"type":400,"tag":483,"props":3682,"children":3683},{"style":496},[3684],{"type":406,"value":1892},{"type":400,"tag":483,"props":3686,"children":3687},{"style":954},[3688],{"type":406,"value":1634},{"type":400,"tag":483,"props":3690,"children":3691},{"style":490},[3692],{"type":406,"value":1639},{"type":400,"tag":483,"props":3694,"children":3695},{"class":485,"line":975},[3696,3700,3704,3708,3712,3716],{"type":400,"tag":483,"props":3697,"children":3698},{"style":496},[3699],{"type":406,"value":1908},{"type":400,"tag":483,"props":3701,"children":3702},{"style":561},[3703],{"type":406,"value":938},{"type":400,"tag":483,"props":3705,"children":3706},{"style":677},[3707],{"type":406,"value":1809},{"type":400,"tag":483,"props":3709,"children":3710},{"style":954},[3711],{"type":406,"value":499},{"type":400,"tag":483,"props":3713,"children":3714},{"style":496},[3715],{"type":406,"value":1818},{"type":400,"tag":483,"props":3717,"children":3718},{"style":954},[3719],{"type":406,"value":702},{"type":400,"tag":483,"props":3721,"children":3722},{"class":485,"line":1018},[3723],{"type":400,"tag":483,"props":3724,"children":3725},{"style":490},[3726],{"type":406,"value":1691},{"type":400,"tag":483,"props":3728,"children":3729},{"class":485,"line":1058},[3730,3734],{"type":400,"tag":483,"props":3731,"children":3732},{"style":502},[3733],{"type":406,"value":928},{"type":400,"tag":483,"props":3735,"children":3736},{"style":496},[3737],{"type":406,"value":3738}," node\n",{"type":400,"tag":483,"props":3740,"children":3741},{"class":485,"line":1094},[3742],{"type":400,"tag":483,"props":3743,"children":3744},{"emptyLinePlaceholder":393},[3745],{"type":406,"value":1301},{"type":400,"tag":483,"props":3747,"children":3748},{"class":485,"line":1103},[3749],{"type":400,"tag":483,"props":3750,"children":3751},{"style":542},[3752],{"type":406,"value":3753},"    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n",{"type":400,"tag":483,"props":3755,"children":3756},{"class":485,"line":1372},[3757,3761,3765,3769,3773,3777,3781,3785,3790],{"type":400,"tag":483,"props":3758,"children":3759},{"style":964},[3760],{"type":406,"value":1878},{"type":400,"tag":483,"props":3762,"children":3763},{"style":954},[3764],{"type":406,"value":719},{"type":400,"tag":483,"props":3766,"children":3767},{"style":496},[3768],{"type":406,"value":1892},{"type":400,"tag":483,"props":3770,"children":3771},{"style":490},[3772],{"type":406,"value":674},{"type":400,"tag":483,"props":3774,"children":3775},{"style":496},[3776],{"type":406,"value":2523},{"type":400,"tag":483,"props":3778,"children":3779},{"style":954},[3780],{"type":406,"value":1852},{"type":400,"tag":483,"props":3782,"children":3783},{"style":496},[3784],{"type":406,"value":2705},{"type":400,"tag":483,"props":3786,"children":3787},{"style":954},[3788],{"type":406,"value":3789},"]) ",{"type":400,"tag":483,"props":3791,"children":3792},{"style":490},[3793],{"type":406,"value":1639},{"type":400,"tag":483,"props":3795,"children":3796},{"class":485,"line":1381},[3797,3802,3806,3810,3814,3818,3822,3826,3830,3834,3838],{"type":400,"tag":483,"props":3798,"children":3799},{"style":496},[3800],{"type":406,"value":3801},"        node",{"type":400,"tag":483,"props":3803,"children":3804},{"style":561},[3805],{"type":406,"value":938},{"type":400,"tag":483,"props":3807,"children":3808},{"style":496},[3809],{"type":406,"value":1838},{"type":400,"tag":483,"props":3811,"children":3812},{"style":490},[3813],{"type":406,"value":674},{"type":400,"tag":483,"props":3815,"children":3816},{"style":496},[3817],{"type":406,"value":2523},{"type":400,"tag":483,"props":3819,"children":3820},{"style":954},[3821],{"type":406,"value":1852},{"type":400,"tag":483,"props":3823,"children":3824},{"style":496},[3825],{"type":406,"value":2705},{"type":400,"tag":483,"props":3827,"children":3828},{"style":954},[3829],{"type":406,"value":3070},{"type":400,"tag":483,"props":3831,"children":3832},{"style":490},[3833],{"type":406,"value":674},{"type":400,"tag":483,"props":3835,"children":3836},{"style":677},[3837],{"type":406,"value":994},{"type":400,"tag":483,"props":3839,"children":3840},{"style":954},[3841],{"type":406,"value":957},{"type":400,"tag":483,"props":3843,"children":3844},{"class":485,"line":1424},[3845,3849,3854],{"type":400,"tag":483,"props":3846,"children":3847},{"style":490},[3848],{"type":406,"value":1615},{"type":400,"tag":483,"props":3850,"children":3851},{"style":964},[3852],{"type":406,"value":3853}," else",{"type":400,"tag":483,"props":3855,"children":3856},{"style":954},[3857],{"type":406,"value":2940},{"type":400,"tag":483,"props":3859,"children":3860},{"class":485,"line":1457},[3861],{"type":400,"tag":483,"props":3862,"children":3863},{"style":542},[3864],{"type":406,"value":3865},"    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n",{"type":400,"tag":483,"props":3867,"children":3868},{"class":485,"line":1470},[3869],{"type":400,"tag":483,"props":3870,"children":3871},{"style":542},[3872],{"type":406,"value":3873},"    // 则创建一个新元素并存到缓存中\n",{"type":400,"tag":483,"props":3875,"children":3876},{"class":485,"line":1511},[3877,3881,3885,3890,3894,3899,3903,3907,3912],{"type":400,"tag":483,"props":3878,"children":3879},{"style":964},[3880],{"type":406,"value":1878},{"type":400,"tag":483,"props":3882,"children":3883},{"style":954},[3884],{"type":406,"value":719},{"type":400,"tag":483,"props":3886,"children":3887},{"style":496},[3888],{"type":406,"value":3889},"saveClones",{"type":400,"tag":483,"props":3891,"children":3892},{"style":490},[3893],{"type":406,"value":674},{"type":400,"tag":483,"props":3895,"children":3896},{"style":677},[3897],{"type":406,"value":3898},"test",{"type":400,"tag":483,"props":3900,"children":3901},{"style":954},[3902],{"type":406,"value":499},{"type":400,"tag":483,"props":3904,"children":3905},{"style":496},[3906],{"type":406,"value":2705},{"type":400,"tag":483,"props":3908,"children":3909},{"style":954},[3910],{"type":406,"value":3911},")) ",{"type":400,"tag":483,"props":3913,"children":3914},{"style":490},[3915],{"type":406,"value":1639},{"type":400,"tag":483,"props":3917,"children":3918},{"class":485,"line":1551},[3919,3923,3927,3931,3935,3939,3943,3947,3951,3955,3959,3963,3967,3971,3975,3979,3984,3988,3992],{"type":400,"tag":483,"props":3920,"children":3921},{"style":496},[3922],{"type":406,"value":3801},{"type":400,"tag":483,"props":3924,"children":3925},{"style":561},[3926],{"type":406,"value":938},{"type":400,"tag":483,"props":3928,"children":3929},{"style":954},[3930],{"type":406,"value":719},{"type":400,"tag":483,"props":3932,"children":3933},{"style":496},[3934],{"type":406,"value":1892},{"type":400,"tag":483,"props":3936,"children":3937},{"style":490},[3938],{"type":406,"value":674},{"type":400,"tag":483,"props":3940,"children":3941},{"style":496},[3942],{"type":406,"value":2523},{"type":400,"tag":483,"props":3944,"children":3945},{"style":954},[3946],{"type":406,"value":1852},{"type":400,"tag":483,"props":3948,"children":3949},{"style":496},[3950],{"type":406,"value":2705},{"type":400,"tag":483,"props":3952,"children":3953},{"style":954},[3954],{"type":406,"value":1950},{"type":400,"tag":483,"props":3956,"children":3957},{"style":561},[3958],{"type":406,"value":665},{"type":400,"tag":483,"props":3960,"children":3961},{"style":496},[3962],{"type":406,"value":1838},{"type":400,"tag":483,"props":3964,"children":3965},{"style":490},[3966],{"type":406,"value":674},{"type":400,"tag":483,"props":3968,"children":3969},{"style":677},[3970],{"type":406,"value":2570},{"type":400,"tag":483,"props":3972,"children":3973},{"style":954},[3974],{"type":406,"value":499},{"type":400,"tag":483,"props":3976,"children":3977},{"style":496},[3978],{"type":406,"value":2705},{"type":400,"tag":483,"props":3980,"children":3981},{"style":954},[3982],{"type":406,"value":3983},"))",{"type":400,"tag":483,"props":3985,"children":3986},{"style":490},[3987],{"type":406,"value":674},{"type":400,"tag":483,"props":3989,"children":3990},{"style":677},[3991],{"type":406,"value":994},{"type":400,"tag":483,"props":3993,"children":3994},{"style":954},[3995],{"type":406,"value":957},{"type":400,"tag":483,"props":3997,"children":3998},{"class":485,"line":1587},[3999,4003,4007],{"type":400,"tag":483,"props":4000,"children":4001},{"style":490},[4002],{"type":406,"value":1615},{"type":400,"tag":483,"props":4004,"children":4005},{"style":964},[4006],{"type":406,"value":3853},{"type":400,"tag":483,"props":4008,"children":4009},{"style":954},[4010],{"type":406,"value":2940},{"type":400,"tag":483,"props":4012,"children":4013},{"class":485,"line":1596},[4014],{"type":400,"tag":483,"props":4015,"children":4016},{"style":542},[4017],{"type":406,"value":4018},"    // 如果是不能被克隆的对象，那就直接创建吧...\n",{"type":400,"tag":483,"props":4020,"children":4021},{"class":485,"line":1609},[4022],{"type":400,"tag":483,"props":4023,"children":4024},{"style":490},[4025],{"type":406,"value":4026},"    {\n",{"type":400,"tag":483,"props":4028,"children":4029},{"class":485,"line":1642},[4030,4034,4038,4042,4046,4050,4054,4058],{"type":400,"tag":483,"props":4031,"children":4032},{"style":496},[4033],{"type":406,"value":3801},{"type":400,"tag":483,"props":4035,"children":4036},{"style":561},[4037],{"type":406,"value":938},{"type":400,"tag":483,"props":4039,"children":4040},{"style":496},[4041],{"type":406,"value":1838},{"type":400,"tag":483,"props":4043,"children":4044},{"style":490},[4045],{"type":406,"value":674},{"type":400,"tag":483,"props":4047,"children":4048},{"style":677},[4049],{"type":406,"value":2570},{"type":400,"tag":483,"props":4051,"children":4052},{"style":954},[4053],{"type":406,"value":499},{"type":400,"tag":483,"props":4055,"children":4056},{"style":496},[4057],{"type":406,"value":2705},{"type":400,"tag":483,"props":4059,"children":4060},{"style":954},[4061],{"type":406,"value":702},{"type":400,"tag":483,"props":4063,"children":4064},{"class":485,"line":1651},[4065],{"type":400,"tag":483,"props":4066,"children":4067},{"style":490},[4068],{"type":406,"value":1691},{"type":400,"tag":483,"props":4070,"children":4071},{"class":485,"line":1669},[4072],{"type":400,"tag":483,"props":4073,"children":4074},{"emptyLinePlaceholder":393},[4075],{"type":406,"value":1301},{"type":400,"tag":483,"props":4077,"children":4078},{"class":485,"line":1685},[4079],{"type":400,"tag":483,"props":4080,"children":4081},{"style":542},[4082],{"type":406,"value":4083},"    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n",{"type":400,"tag":483,"props":4085,"children":4086},{"class":485,"line":1694},[4087],{"type":400,"tag":483,"props":4088,"children":4089},{"style":542},[4090],{"type":406,"value":4091},"    // Avoid adding some elements to fragments in IE \u003C 9 because\n",{"type":400,"tag":483,"props":4093,"children":4094},{"class":485,"line":2983},[4095],{"type":400,"tag":483,"props":4096,"children":4097},{"style":542},[4098],{"type":406,"value":4099},"    // * Attributes like `name` or `type` cannot be set/changed once an element\n",{"type":400,"tag":483,"props":4101,"children":4102},{"class":485,"line":3004},[4103],{"type":400,"tag":483,"props":4104,"children":4105},{"style":542},[4106],{"type":406,"value":4107},"    //   is inserted into a document/fragment\n",{"type":400,"tag":483,"props":4109,"children":4110},{"class":485,"line":3013},[4111],{"type":400,"tag":483,"props":4112,"children":4113},{"style":542},[4114],{"type":406,"value":4115},"    // * Link elements with `src` attributes that are inaccessible, as with\n",{"type":400,"tag":483,"props":4117,"children":4118},{"class":485,"line":3112},[4119],{"type":400,"tag":483,"props":4120,"children":4121},{"style":542},[4122],{"type":406,"value":4123},"    //   a 403 response, will cause the tab/window to crash\n",{"type":400,"tag":483,"props":4125,"children":4126},{"class":485,"line":3141},[4127],{"type":400,"tag":483,"props":4128,"children":4129},{"style":542},[4130],{"type":406,"value":4131},"    // * Script elements appended to fragments will execute when their `src`\n",{"type":400,"tag":483,"props":4133,"children":4134},{"class":485,"line":3177},[4135],{"type":400,"tag":483,"props":4136,"children":4137},{"style":542},[4138],{"type":406,"value":4139},"    //   or `text` property is set\n",{"type":400,"tag":483,"props":4141,"children":4142},{"class":485,"line":3225},[4143,4147,4152,4156,4161,4165,4169,4174,4178,4182,4186,4190,4194,4199,4203,4208,4212,4217],{"type":400,"tag":483,"props":4144,"children":4145},{"style":964},[4146],{"type":406,"value":967},{"type":400,"tag":483,"props":4148,"children":4149},{"style":496},[4150],{"type":406,"value":4151}," node",{"type":400,"tag":483,"props":4153,"children":4154},{"style":490},[4155],{"type":406,"value":674},{"type":400,"tag":483,"props":4157,"children":4158},{"style":496},[4159],{"type":406,"value":4160},"canHaveChildren",{"type":400,"tag":483,"props":4162,"children":4163},{"style":561},[4164],{"type":406,"value":2139},{"type":400,"tag":483,"props":4166,"children":4167},{"style":561},[4168],{"type":406,"value":2144},{"type":400,"tag":483,"props":4170,"children":4171},{"style":496},[4172],{"type":406,"value":4173},"reSkip",{"type":400,"tag":483,"props":4175,"children":4176},{"style":490},[4177],{"type":406,"value":674},{"type":400,"tag":483,"props":4179,"children":4180},{"style":677},[4181],{"type":406,"value":3898},{"type":400,"tag":483,"props":4183,"children":4184},{"style":954},[4185],{"type":406,"value":499},{"type":400,"tag":483,"props":4187,"children":4188},{"style":496},[4189],{"type":406,"value":2705},{"type":400,"tag":483,"props":4191,"children":4192},{"style":954},[4193],{"type":406,"value":1634},{"type":400,"tag":483,"props":4195,"children":4196},{"style":561},[4197],{"type":406,"value":4198},"&&",{"type":400,"tag":483,"props":4200,"children":4201},{"style":561},[4202],{"type":406,"value":2144},{"type":400,"tag":483,"props":4204,"children":4205},{"style":496},[4206],{"type":406,"value":4207},"node",{"type":400,"tag":483,"props":4209,"children":4210},{"style":490},[4211],{"type":406,"value":674},{"type":400,"tag":483,"props":4213,"children":4214},{"style":496},[4215],{"type":406,"value":4216},"tagUrn",{"type":400,"tag":483,"props":4218,"children":4219},{"style":954},[4220],{"type":406,"value":2940},{"type":400,"tag":483,"props":4222,"children":4223},{"class":485,"line":3243},[4224,4229,4233,4237,4241,4245,4250,4254,4258],{"type":400,"tag":483,"props":4225,"children":4226},{"style":561},[4227],{"type":406,"value":4228},"        ?",{"type":400,"tag":483,"props":4230,"children":4231},{"style":496},[4232],{"type":406,"value":1838},{"type":400,"tag":483,"props":4234,"children":4235},{"style":490},[4236],{"type":406,"value":674},{"type":400,"tag":483,"props":4238,"children":4239},{"style":496},[4240],{"type":406,"value":2637},{"type":400,"tag":483,"props":4242,"children":4243},{"style":490},[4244],{"type":406,"value":674},{"type":400,"tag":483,"props":4246,"children":4247},{"style":677},[4248],{"type":406,"value":4249},"appendChild",{"type":400,"tag":483,"props":4251,"children":4252},{"style":954},[4253],{"type":406,"value":499},{"type":400,"tag":483,"props":4255,"children":4256},{"style":496},[4257],{"type":406,"value":4207},{"type":400,"tag":483,"props":4259,"children":4260},{"style":954},[4261],{"type":406,"value":4262},") \n",{"type":400,"tag":483,"props":4264,"children":4265},{"class":485,"line":3264},[4266,4271],{"type":400,"tag":483,"props":4267,"children":4268},{"style":561},[4269],{"type":406,"value":4270},"        :",{"type":400,"tag":483,"props":4272,"children":4273},{"style":496},[4274],{"type":406,"value":3738},{"type":400,"tag":483,"props":4276,"children":4277},{"class":485,"line":3280},[4278],{"type":400,"tag":483,"props":4279,"children":4280},{"style":490},[4281],{"type":406,"value":2015},{"type":400,"tag":414,"props":4283,"children":4284},{},[4285],{"type":406,"value":4286},"和 createElement 类似，createDocumentFragment 也需要仿制。",{"type":400,"tag":472,"props":4288,"children":4290},{"className":474,"code":4289,"language":476,"meta":394,"style":394},"function createDocumentFragment(ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createDocumentFragment()\n    }\n    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n    data = data || getExpandoData(ownerDocument)\n    var clone = data.frag.cloneNode(),\n        i = 0,\n        elems = getElements(),\n        l = elems.length\n    for(;i\u003Cl;i++){\n        // 返回的 documentFragment 包含了所有 shived 元素\n        clone.createElement(elems[i])\n    }\n    return clone\n  }\n",[4291],{"type":400,"tag":479,"props":4292,"children":4293},{"__ignoreMap":394},[4294,4326,4349,4372,4379,4387,4423,4467,4488,4513,4539,4591,4599,4637,4644,4656],{"type":400,"tag":483,"props":4295,"children":4296},{"class":485,"line":486},[4297,4301,4306,4310,4314,4318,4322],{"type":400,"tag":483,"props":4298,"children":4299},{"style":502},[4300],{"type":406,"value":505},{"type":400,"tag":483,"props":4302,"children":4303},{"style":677},[4304],{"type":406,"value":4305}," createDocumentFragment",{"type":400,"tag":483,"props":4307,"children":4308},{"style":490},[4309],{"type":406,"value":499},{"type":400,"tag":483,"props":4311,"children":4312},{"style":512},[4313],{"type":406,"value":1818},{"type":400,"tag":483,"props":4315,"children":4316},{"style":490},[4317],{"type":406,"value":520},{"type":400,"tag":483,"props":4319,"children":4320},{"style":512},[4321],{"type":406,"value":1838},{"type":400,"tag":483,"props":4323,"children":4324},{"style":490},[4325],{"type":406,"value":3603},{"type":400,"tag":483,"props":4327,"children":4328},{"class":485,"line":538},[4329,4333,4337,4341,4345],{"type":400,"tag":483,"props":4330,"children":4331},{"style":964},[4332],{"type":406,"value":1878},{"type":400,"tag":483,"props":4334,"children":4335},{"style":954},[4336],{"type":406,"value":499},{"type":400,"tag":483,"props":4338,"children":4339},{"style":496},[4340],{"type":406,"value":2369},{"type":400,"tag":483,"props":4342,"children":4343},{"style":954},[4344],{"type":406,"value":530},{"type":400,"tag":483,"props":4346,"children":4347},{"style":490},[4348],{"type":406,"value":1639},{"type":400,"tag":483,"props":4350,"children":4351},{"class":485,"line":548},[4352,4356,4360,4364,4368],{"type":400,"tag":483,"props":4353,"children":4354},{"style":964},[4355],{"type":406,"value":3634},{"type":400,"tag":483,"props":4357,"children":4358},{"style":496},[4359],{"type":406,"value":2579},{"type":400,"tag":483,"props":4361,"children":4362},{"style":490},[4363],{"type":406,"value":674},{"type":400,"tag":483,"props":4365,"children":4366},{"style":677},[4367],{"type":406,"value":951},{"type":400,"tag":483,"props":4369,"children":4370},{"style":954},[4371],{"type":406,"value":957},{"type":400,"tag":483,"props":4373,"children":4374},{"class":485,"line":922},[4375],{"type":400,"tag":483,"props":4376,"children":4377},{"style":490},[4378],{"type":406,"value":1691},{"type":400,"tag":483,"props":4380,"children":4381},{"class":485,"line":960},[4382],{"type":400,"tag":483,"props":4383,"children":4384},{"style":542},[4385],{"type":406,"value":4386},"    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n",{"type":400,"tag":483,"props":4388,"children":4389},{"class":485,"line":975},[4390,4395,4399,4403,4407,4411,4415,4419],{"type":400,"tag":483,"props":4391,"children":4392},{"style":496},[4393],{"type":406,"value":4394},"    data",{"type":400,"tag":483,"props":4396,"children":4397},{"style":561},[4398],{"type":406,"value":938},{"type":400,"tag":483,"props":4400,"children":4401},{"style":496},[4402],{"type":406,"value":1838},{"type":400,"tag":483,"props":4404,"children":4405},{"style":561},[4406],{"type":406,"value":902},{"type":400,"tag":483,"props":4408,"children":4409},{"style":677},[4410],{"type":406,"value":1809},{"type":400,"tag":483,"props":4412,"children":4413},{"style":954},[4414],{"type":406,"value":499},{"type":400,"tag":483,"props":4416,"children":4417},{"style":496},[4418],{"type":406,"value":1818},{"type":400,"tag":483,"props":4420,"children":4421},{"style":954},[4422],{"type":406,"value":702},{"type":400,"tag":483,"props":4424,"children":4425},{"class":485,"line":1018},[4426,4430,4435,4439,4443,4447,4451,4455,4459,4463],{"type":400,"tag":483,"props":4427,"children":4428},{"style":502},[4429],{"type":406,"value":928},{"type":400,"tag":483,"props":4431,"children":4432},{"style":496},[4433],{"type":406,"value":4434}," clone",{"type":400,"tag":483,"props":4436,"children":4437},{"style":561},[4438],{"type":406,"value":938},{"type":400,"tag":483,"props":4440,"children":4441},{"style":496},[4442],{"type":406,"value":1838},{"type":400,"tag":483,"props":4444,"children":4445},{"style":490},[4446],{"type":406,"value":674},{"type":400,"tag":483,"props":4448,"children":4449},{"style":496},[4450],{"type":406,"value":2637},{"type":400,"tag":483,"props":4452,"children":4453},{"style":490},[4454],{"type":406,"value":674},{"type":400,"tag":483,"props":4456,"children":4457},{"style":677},[4458],{"type":406,"value":994},{"type":400,"tag":483,"props":4460,"children":4461},{"style":954},[4462],{"type":406,"value":915},{"type":400,"tag":483,"props":4464,"children":4465},{"style":490},[4466],{"type":406,"value":2221},{"type":400,"tag":483,"props":4468,"children":4469},{"class":485,"line":1058},[4470,4475,4479,4484],{"type":400,"tag":483,"props":4471,"children":4472},{"style":496},[4473],{"type":406,"value":4474},"        i",{"type":400,"tag":483,"props":4476,"children":4477},{"style":561},[4478],{"type":406,"value":938},{"type":400,"tag":483,"props":4480,"children":4481},{"style":894},[4482],{"type":406,"value":4483}," 0",{"type":400,"tag":483,"props":4485,"children":4486},{"style":490},[4487],{"type":406,"value":2221},{"type":400,"tag":483,"props":4489,"children":4490},{"class":485,"line":1094},[4491,4496,4500,4505,4509],{"type":400,"tag":483,"props":4492,"children":4493},{"style":496},[4494],{"type":406,"value":4495},"        elems",{"type":400,"tag":483,"props":4497,"children":4498},{"style":561},[4499],{"type":406,"value":938},{"type":400,"tag":483,"props":4501,"children":4502},{"style":677},[4503],{"type":406,"value":4504}," getElements",{"type":400,"tag":483,"props":4506,"children":4507},{"style":954},[4508],{"type":406,"value":915},{"type":400,"tag":483,"props":4510,"children":4511},{"style":490},[4512],{"type":406,"value":2221},{"type":400,"tag":483,"props":4514,"children":4515},{"class":485,"line":1103},[4516,4521,4525,4530,4534],{"type":400,"tag":483,"props":4517,"children":4518},{"style":496},[4519],{"type":406,"value":4520},"        l",{"type":400,"tag":483,"props":4522,"children":4523},{"style":561},[4524],{"type":406,"value":938},{"type":400,"tag":483,"props":4526,"children":4527},{"style":496},[4528],{"type":406,"value":4529}," elems",{"type":400,"tag":483,"props":4531,"children":4532},{"style":490},[4533],{"type":406,"value":674},{"type":400,"tag":483,"props":4535,"children":4536},{"style":883},[4537],{"type":406,"value":4538},"length\n",{"type":400,"tag":483,"props":4540,"children":4541},{"class":485,"line":1372},[4542,4547,4551,4555,4560,4565,4570,4574,4578,4583,4587],{"type":400,"tag":483,"props":4543,"children":4544},{"style":964},[4545],{"type":406,"value":4546},"    for",{"type":400,"tag":483,"props":4548,"children":4549},{"style":954},[4550],{"type":406,"value":499},{"type":400,"tag":483,"props":4552,"children":4553},{"style":490},[4554],{"type":406,"value":493},{"type":400,"tag":483,"props":4556,"children":4557},{"style":496},[4558],{"type":406,"value":4559},"i",{"type":400,"tag":483,"props":4561,"children":4562},{"style":561},[4563],{"type":406,"value":4564},"\u003C",{"type":400,"tag":483,"props":4566,"children":4567},{"style":496},[4568],{"type":406,"value":4569},"l",{"type":400,"tag":483,"props":4571,"children":4572},{"style":490},[4573],{"type":406,"value":493},{"type":400,"tag":483,"props":4575,"children":4576},{"style":496},[4577],{"type":406,"value":4559},{"type":400,"tag":483,"props":4579,"children":4580},{"style":561},[4581],{"type":406,"value":4582},"++",{"type":400,"tag":483,"props":4584,"children":4585},{"style":954},[4586],{"type":406,"value":530},{"type":400,"tag":483,"props":4588,"children":4589},{"style":490},[4590],{"type":406,"value":1639},{"type":400,"tag":483,"props":4592,"children":4593},{"class":485,"line":1381},[4594],{"type":400,"tag":483,"props":4595,"children":4596},{"style":542},[4597],{"type":406,"value":4598},"        // 返回的 documentFragment 包含了所有 shived 元素\n",{"type":400,"tag":483,"props":4600,"children":4601},{"class":485,"line":1424},[4602,4607,4611,4615,4619,4624,4628,4632],{"type":400,"tag":483,"props":4603,"children":4604},{"style":496},[4605],{"type":406,"value":4606},"        clone",{"type":400,"tag":483,"props":4608,"children":4609},{"style":490},[4610],{"type":406,"value":674},{"type":400,"tag":483,"props":4612,"children":4613},{"style":677},[4614],{"type":406,"value":680},{"type":400,"tag":483,"props":4616,"children":4617},{"style":954},[4618],{"type":406,"value":499},{"type":400,"tag":483,"props":4620,"children":4621},{"style":496},[4622],{"type":406,"value":4623},"elems",{"type":400,"tag":483,"props":4625,"children":4626},{"style":954},[4627],{"type":406,"value":1852},{"type":400,"tag":483,"props":4629,"children":4630},{"style":496},[4631],{"type":406,"value":4559},{"type":400,"tag":483,"props":4633,"children":4634},{"style":954},[4635],{"type":406,"value":4636},"])\n",{"type":400,"tag":483,"props":4638,"children":4639},{"class":485,"line":1457},[4640],{"type":400,"tag":483,"props":4641,"children":4642},{"style":490},[4643],{"type":406,"value":1691},{"type":400,"tag":483,"props":4645,"children":4646},{"class":485,"line":1470},[4647,4651],{"type":400,"tag":483,"props":4648,"children":4649},{"style":964},[4650],{"type":406,"value":967},{"type":400,"tag":483,"props":4652,"children":4653},{"style":496},[4654],{"type":406,"value":4655}," clone\n",{"type":400,"tag":483,"props":4657,"children":4658},{"class":485,"line":1511},[4659],{"type":400,"tag":483,"props":4660,"children":4661},{"style":490},[4662],{"type":406,"value":2015},{"type":400,"tag":414,"props":4664,"children":4665},{},[4666],{"type":406,"value":4667},"可以发现，需要 shiv 的元素都存在了 getElements 这个方法中，我们来看看具体实现。",{"type":400,"tag":472,"props":4669,"children":4671},{"className":474,"code":4670,"language":476,"meta":394,"style":394},"// getElements 返回 html5.elments 的数组形式\n// 看来 getElements 也只是一个类似 getter 的存在\nfunction getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\n\n// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\nvar html5 = {\n    // options 是外部调用 html5shiv 的接口参数\n    'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video'\n}\n",[4672],{"type":400,"tag":479,"props":4673,"children":4674},{"__ignoreMap":394},[4675,4683,4691,4710,4744,4822,4830,4837,4845,4865,4873,4926],{"type":400,"tag":483,"props":4676,"children":4677},{"class":485,"line":486},[4678],{"type":400,"tag":483,"props":4679,"children":4680},{"style":542},[4681],{"type":406,"value":4682},"// getElements 返回 html5.elments 的数组形式\n",{"type":400,"tag":483,"props":4684,"children":4685},{"class":485,"line":538},[4686],{"type":400,"tag":483,"props":4687,"children":4688},{"style":542},[4689],{"type":406,"value":4690},"// 看来 getElements 也只是一个类似 getter 的存在\n",{"type":400,"tag":483,"props":4692,"children":4693},{"class":485,"line":548},[4694,4698,4702,4706],{"type":400,"tag":483,"props":4695,"children":4696},{"style":502},[4697],{"type":406,"value":505},{"type":400,"tag":483,"props":4699,"children":4700},{"style":677},[4701],{"type":406,"value":4504},{"type":400,"tag":483,"props":4703,"children":4704},{"style":490},[4705],{"type":406,"value":915},{"type":400,"tag":483,"props":4707,"children":4708},{"style":490},[4709],{"type":406,"value":535},{"type":400,"tag":483,"props":4711,"children":4712},{"class":485,"line":922},[4713,4717,4722,4726,4731,4735,4740],{"type":400,"tag":483,"props":4714,"children":4715},{"style":502},[4716],{"type":406,"value":928},{"type":400,"tag":483,"props":4718,"children":4719},{"style":496},[4720],{"type":406,"value":4721}," elements",{"type":400,"tag":483,"props":4723,"children":4724},{"style":561},[4725],{"type":406,"value":938},{"type":400,"tag":483,"props":4727,"children":4728},{"style":496},[4729],{"type":406,"value":4730}," html5",{"type":400,"tag":483,"props":4732,"children":4733},{"style":490},[4734],{"type":406,"value":674},{"type":400,"tag":483,"props":4736,"children":4737},{"style":496},[4738],{"type":406,"value":4739},"elements",{"type":400,"tag":483,"props":4741,"children":4742},{"style":490},[4743],{"type":406,"value":625},{"type":400,"tag":483,"props":4745,"children":4746},{"class":485,"line":960},[4747,4751,4756,4760,4764,4768,4773,4777,4781,4785,4789,4794,4798,4802,4806,4810,4814,4818],{"type":400,"tag":483,"props":4748,"children":4749},{"style":964},[4750],{"type":406,"value":967},{"type":400,"tag":483,"props":4752,"children":4753},{"style":561},[4754],{"type":406,"value":4755}," typeof",{"type":400,"tag":483,"props":4757,"children":4758},{"style":496},[4759],{"type":406,"value":4721},{"type":400,"tag":483,"props":4761,"children":4762},{"style":561},[4763],{"type":406,"value":891},{"type":400,"tag":483,"props":4765,"children":4766},{"style":577},[4767],{"type":406,"value":840},{"type":400,"tag":483,"props":4769,"children":4770},{"style":583},[4771],{"type":406,"value":4772},"string",{"type":400,"tag":483,"props":4774,"children":4775},{"style":577},[4776],{"type":406,"value":689},{"type":400,"tag":483,"props":4778,"children":4779},{"style":561},[4780],{"type":406,"value":596},{"type":400,"tag":483,"props":4782,"children":4783},{"style":496},[4784],{"type":406,"value":4721},{"type":400,"tag":483,"props":4786,"children":4787},{"style":490},[4788],{"type":406,"value":674},{"type":400,"tag":483,"props":4790,"children":4791},{"style":677},[4792],{"type":406,"value":4793},"split",{"type":400,"tag":483,"props":4795,"children":4796},{"style":954},[4797],{"type":406,"value":499},{"type":400,"tag":483,"props":4799,"children":4800},{"style":577},[4801],{"type":406,"value":689},{"type":400,"tag":483,"props":4803,"children":4804},{"style":577},[4805],{"type":406,"value":840},{"type":400,"tag":483,"props":4807,"children":4808},{"style":954},[4809],{"type":406,"value":1634},{"type":400,"tag":483,"props":4811,"children":4812},{"style":561},[4813],{"type":406,"value":605},{"type":400,"tag":483,"props":4815,"children":4816},{"style":496},[4817],{"type":406,"value":4721},{"type":400,"tag":483,"props":4819,"children":4820},{"style":490},[4821],{"type":406,"value":625},{"type":400,"tag":483,"props":4823,"children":4824},{"class":485,"line":975},[4825],{"type":400,"tag":483,"props":4826,"children":4827},{"style":490},[4828],{"type":406,"value":4829},"}\n",{"type":400,"tag":483,"props":4831,"children":4832},{"class":485,"line":1018},[4833],{"type":400,"tag":483,"props":4834,"children":4835},{"emptyLinePlaceholder":393},[4836],{"type":406,"value":1301},{"type":400,"tag":483,"props":4838,"children":4839},{"class":485,"line":1058},[4840],{"type":400,"tag":483,"props":4841,"children":4842},{"style":542},[4843],{"type":406,"value":4844},"// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\n",{"type":400,"tag":483,"props":4846,"children":4847},{"class":485,"line":1094},[4848,4852,4857,4861],{"type":400,"tag":483,"props":4849,"children":4850},{"style":502},[4851],{"type":406,"value":1733},{"type":400,"tag":483,"props":4853,"children":4854},{"style":496},[4855],{"type":406,"value":4856}," html5 ",{"type":400,"tag":483,"props":4858,"children":4859},{"style":561},[4860],{"type":406,"value":665},{"type":400,"tag":483,"props":4862,"children":4863},{"style":490},[4864],{"type":406,"value":535},{"type":400,"tag":483,"props":4866,"children":4867},{"class":485,"line":1103},[4868],{"type":400,"tag":483,"props":4869,"children":4870},{"style":542},[4871],{"type":406,"value":4872},"    // options 是外部调用 html5shiv 的接口参数\n",{"type":400,"tag":483,"props":4874,"children":4875},{"class":485,"line":1372},[4876,4881,4886,4890,4894,4899,4903,4908,4913,4917,4922],{"type":400,"tag":483,"props":4877,"children":4878},{"style":577},[4879],{"type":406,"value":4880},"    '",{"type":400,"tag":483,"props":4882,"children":4884},{"style":4883},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[4885],{"type":406,"value":4739},{"type":400,"tag":483,"props":4887,"children":4888},{"style":577},[4889],{"type":406,"value":689},{"type":400,"tag":483,"props":4891,"children":4892},{"style":490},[4893],{"type":406,"value":605},{"type":400,"tag":483,"props":4895,"children":4896},{"style":496},[4897],{"type":406,"value":4898}," options",{"type":400,"tag":483,"props":4900,"children":4901},{"style":490},[4902],{"type":406,"value":674},{"type":400,"tag":483,"props":4904,"children":4905},{"style":496},[4906],{"type":406,"value":4907},"elements ",{"type":400,"tag":483,"props":4909,"children":4910},{"style":561},[4911],{"type":406,"value":4912},"||",{"type":400,"tag":483,"props":4914,"children":4915},{"style":577},[4916],{"type":406,"value":840},{"type":400,"tag":483,"props":4918,"children":4919},{"style":583},[4920],{"type":406,"value":4921},"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",{"type":400,"tag":483,"props":4923,"children":4924},{"style":577},[4925],{"type":406,"value":850},{"type":400,"tag":483,"props":4927,"children":4928},{"class":485,"line":1381},[4929],{"type":400,"tag":483,"props":4930,"children":4931},{"style":490},[4932],{"type":406,"value":4829},{"type":400,"tag":461,"props":4934,"children":4936},{"id":4935},"私有方法",[4937],{"type":406,"value":4935},{"type":400,"tag":414,"props":4939,"children":4940},{},[4941],{"type":406,"value":4942},"接下来是几个私有方法。和 shiv 原理不相关，所以不重要。",{"type":400,"tag":472,"props":4944,"children":4946},{"className":474,"code":4945,"language":476,"meta":394,"style":394},"/**\n * Creates a style sheet with the given CSS text and adds it to the document.\n * 在文档头部添加样式标签\n */\nfunction addStyleSheet(ownerDocument, cssText) {\n    var p = ownerDocument.createElement('p'),\n        parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement\n    // ? 这个 'x' 应该是兼容性考虑\n    p.innerHTML = 'x\u003Cstyle>' + cssText + '\u003C/style>'\n    return parent.insertBefore(p.lastChild, parent.firstChild)\n}\n",[4947],{"type":400,"tag":479,"props":4948,"children":4949},{"__ignoreMap":394},[4950,4958,4966,4974,4982,5019,5071,5144,5152,5210,5269],{"type":400,"tag":483,"props":4951,"children":4952},{"class":485,"line":486},[4953],{"type":400,"tag":483,"props":4954,"children":4955},{"style":542},[4956],{"type":406,"value":4957},"/**\n",{"type":400,"tag":483,"props":4959,"children":4960},{"class":485,"line":538},[4961],{"type":400,"tag":483,"props":4962,"children":4963},{"style":542},[4964],{"type":406,"value":4965}," * Creates a style sheet with the given CSS text and adds it to the document.\n",{"type":400,"tag":483,"props":4967,"children":4968},{"class":485,"line":548},[4969],{"type":400,"tag":483,"props":4970,"children":4971},{"style":542},[4972],{"type":406,"value":4973}," * 在文档头部添加样式标签\n",{"type":400,"tag":483,"props":4975,"children":4976},{"class":485,"line":922},[4977],{"type":400,"tag":483,"props":4978,"children":4979},{"style":542},[4980],{"type":406,"value":4981}," */\n",{"type":400,"tag":483,"props":4983,"children":4984},{"class":485,"line":960},[4985,4989,4994,4998,5002,5006,5011,5015],{"type":400,"tag":483,"props":4986,"children":4987},{"style":502},[4988],{"type":406,"value":505},{"type":400,"tag":483,"props":4990,"children":4991},{"style":677},[4992],{"type":406,"value":4993}," addStyleSheet",{"type":400,"tag":483,"props":4995,"children":4996},{"style":490},[4997],{"type":406,"value":499},{"type":400,"tag":483,"props":4999,"children":5000},{"style":512},[5001],{"type":406,"value":1818},{"type":400,"tag":483,"props":5003,"children":5004},{"style":490},[5005],{"type":406,"value":520},{"type":400,"tag":483,"props":5007,"children":5008},{"style":512},[5009],{"type":406,"value":5010}," cssText",{"type":400,"tag":483,"props":5012,"children":5013},{"style":490},[5014],{"type":406,"value":530},{"type":400,"tag":483,"props":5016,"children":5017},{"style":490},[5018],{"type":406,"value":535},{"type":400,"tag":483,"props":5020,"children":5021},{"class":485,"line":975},[5022,5026,5031,5035,5039,5043,5047,5051,5055,5059,5063,5067],{"type":400,"tag":483,"props":5023,"children":5024},{"style":502},[5025],{"type":406,"value":928},{"type":400,"tag":483,"props":5027,"children":5028},{"style":496},[5029],{"type":406,"value":5030}," p",{"type":400,"tag":483,"props":5032,"children":5033},{"style":561},[5034],{"type":406,"value":938},{"type":400,"tag":483,"props":5036,"children":5037},{"style":496},[5038],{"type":406,"value":2579},{"type":400,"tag":483,"props":5040,"children":5041},{"style":490},[5042],{"type":406,"value":674},{"type":400,"tag":483,"props":5044,"children":5045},{"style":677},[5046],{"type":406,"value":680},{"type":400,"tag":483,"props":5048,"children":5049},{"style":954},[5050],{"type":406,"value":499},{"type":400,"tag":483,"props":5052,"children":5053},{"style":577},[5054],{"type":406,"value":689},{"type":400,"tag":483,"props":5056,"children":5057},{"style":583},[5058],{"type":406,"value":414},{"type":400,"tag":483,"props":5060,"children":5061},{"style":577},[5062],{"type":406,"value":689},{"type":400,"tag":483,"props":5064,"children":5065},{"style":954},[5066],{"type":406,"value":530},{"type":400,"tag":483,"props":5068,"children":5069},{"style":490},[5070],{"type":406,"value":2221},{"type":400,"tag":483,"props":5072,"children":5073},{"class":485,"line":1018},[5074,5079,5083,5087,5091,5096,5100,5104,5109,5113,5118,5123,5127,5131,5135,5139],{"type":400,"tag":483,"props":5075,"children":5076},{"style":496},[5077],{"type":406,"value":5078},"        parent",{"type":400,"tag":483,"props":5080,"children":5081},{"style":561},[5082],{"type":406,"value":938},{"type":400,"tag":483,"props":5084,"children":5085},{"style":496},[5086],{"type":406,"value":2579},{"type":400,"tag":483,"props":5088,"children":5089},{"style":490},[5090],{"type":406,"value":674},{"type":400,"tag":483,"props":5092,"children":5093},{"style":677},[5094],{"type":406,"value":5095},"getElementsByTagName",{"type":400,"tag":483,"props":5097,"children":5098},{"style":954},[5099],{"type":406,"value":499},{"type":400,"tag":483,"props":5101,"children":5102},{"style":577},[5103],{"type":406,"value":689},{"type":400,"tag":483,"props":5105,"children":5106},{"style":583},[5107],{"type":406,"value":5108},"head",{"type":400,"tag":483,"props":5110,"children":5111},{"style":577},[5112],{"type":406,"value":689},{"type":400,"tag":483,"props":5114,"children":5115},{"style":954},[5116],{"type":406,"value":5117},")[",{"type":400,"tag":483,"props":5119,"children":5120},{"style":894},[5121],{"type":406,"value":5122},"0",{"type":400,"tag":483,"props":5124,"children":5125},{"style":954},[5126],{"type":406,"value":1950},{"type":400,"tag":483,"props":5128,"children":5129},{"style":561},[5130],{"type":406,"value":4912},{"type":400,"tag":483,"props":5132,"children":5133},{"style":496},[5134],{"type":406,"value":2579},{"type":400,"tag":483,"props":5136,"children":5137},{"style":490},[5138],{"type":406,"value":674},{"type":400,"tag":483,"props":5140,"children":5141},{"style":496},[5142],{"type":406,"value":5143},"documentElement\n",{"type":400,"tag":483,"props":5145,"children":5146},{"class":485,"line":1058},[5147],{"type":400,"tag":483,"props":5148,"children":5149},{"style":542},[5150],{"type":406,"value":5151},"    // ? 这个 'x' 应该是兼容性考虑\n",{"type":400,"tag":483,"props":5153,"children":5154},{"class":485,"line":1094},[5155,5160,5164,5168,5172,5176,5181,5185,5189,5193,5197,5201,5206],{"type":400,"tag":483,"props":5156,"children":5157},{"style":496},[5158],{"type":406,"value":5159},"    p",{"type":400,"tag":483,"props":5161,"children":5162},{"style":490},[5163],{"type":406,"value":674},{"type":400,"tag":483,"props":5165,"children":5166},{"style":496},[5167],{"type":406,"value":1221},{"type":400,"tag":483,"props":5169,"children":5170},{"style":561},[5171],{"type":406,"value":938},{"type":400,"tag":483,"props":5173,"children":5174},{"style":577},[5175],{"type":406,"value":840},{"type":400,"tag":483,"props":5177,"children":5178},{"style":583},[5179],{"type":406,"value":5180},"x\u003Cstyle>",{"type":400,"tag":483,"props":5182,"children":5183},{"style":577},[5184],{"type":406,"value":689},{"type":400,"tag":483,"props":5186,"children":5187},{"style":561},[5188],{"type":406,"value":3200},{"type":400,"tag":483,"props":5190,"children":5191},{"style":496},[5192],{"type":406,"value":5010},{"type":400,"tag":483,"props":5194,"children":5195},{"style":561},[5196],{"type":406,"value":3200},{"type":400,"tag":483,"props":5198,"children":5199},{"style":577},[5200],{"type":406,"value":840},{"type":400,"tag":483,"props":5202,"children":5203},{"style":583},[5204],{"type":406,"value":5205},"\u003C/style>",{"type":400,"tag":483,"props":5207,"children":5208},{"style":577},[5209],{"type":406,"value":850},{"type":400,"tag":483,"props":5211,"children":5212},{"class":485,"line":1103},[5213,5217,5222,5226,5231,5235,5239,5243,5248,5252,5256,5260,5265],{"type":400,"tag":483,"props":5214,"children":5215},{"style":964},[5216],{"type":406,"value":967},{"type":400,"tag":483,"props":5218,"children":5219},{"style":496},[5220],{"type":406,"value":5221}," parent",{"type":400,"tag":483,"props":5223,"children":5224},{"style":490},[5225],{"type":406,"value":674},{"type":400,"tag":483,"props":5227,"children":5228},{"style":677},[5229],{"type":406,"value":5230},"insertBefore",{"type":400,"tag":483,"props":5232,"children":5233},{"style":954},[5234],{"type":406,"value":499},{"type":400,"tag":483,"props":5236,"children":5237},{"style":496},[5238],{"type":406,"value":414},{"type":400,"tag":483,"props":5240,"children":5241},{"style":490},[5242],{"type":406,"value":674},{"type":400,"tag":483,"props":5244,"children":5245},{"style":496},[5246],{"type":406,"value":5247},"lastChild",{"type":400,"tag":483,"props":5249,"children":5250},{"style":490},[5251],{"type":406,"value":520},{"type":400,"tag":483,"props":5253,"children":5254},{"style":496},[5255],{"type":406,"value":5221},{"type":400,"tag":483,"props":5257,"children":5258},{"style":490},[5259],{"type":406,"value":674},{"type":400,"tag":483,"props":5261,"children":5262},{"style":496},[5263],{"type":406,"value":5264},"firstChild",{"type":400,"tag":483,"props":5266,"children":5267},{"style":954},[5268],{"type":406,"value":702},{"type":400,"tag":483,"props":5270,"children":5271},{"class":485,"line":1372},[5272],{"type":400,"tag":483,"props":5273,"children":5274},{"style":490},[5275],{"type":406,"value":4829},{"type":400,"tag":414,"props":5277,"children":5278},{},[5279],{"type":406,"value":5280},"一对用来维护 html5.elements 的方法 getElements、addElements。相当于 getter/setter。因为 html5shiv 将 html5 这个对象挂载到了 window 对象上，向外暴露。所以可以轻易调用 addElements 维护 html.elements。",{"type":400,"tag":472,"props":5282,"children":5284},{"className":474,"code":5283,"language":476,"meta":394,"style":394},"function getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\nfunction addElements(newElements, ownerDocument) {\n    var elements = html5.elements\n    if(typeof elements != 'string'){\n        elements = elements.join(' ')\n    }\n    if(typeof newElements != 'string'){\n        newElements = newElements.join(' ')\n    }\n    html5.elements = elements +' '+ newElements\n\n    // 每次增加元素的最后，会进行一次 shiv\n    shivDocument(ownerDocument)\n}\n",[5285],{"type":400,"tag":479,"props":5286,"children":5287},{"__ignoreMap":394},[5288,5307,5338,5413,5420,5457,5485,5529,5569,5576,5620,5660,5667,5712,5719,5727,5747],{"type":400,"tag":483,"props":5289,"children":5290},{"class":485,"line":486},[5291,5295,5299,5303],{"type":400,"tag":483,"props":5292,"children":5293},{"style":502},[5294],{"type":406,"value":505},{"type":400,"tag":483,"props":5296,"children":5297},{"style":677},[5298],{"type":406,"value":4504},{"type":400,"tag":483,"props":5300,"children":5301},{"style":490},[5302],{"type":406,"value":915},{"type":400,"tag":483,"props":5304,"children":5305},{"style":490},[5306],{"type":406,"value":535},{"type":400,"tag":483,"props":5308,"children":5309},{"class":485,"line":538},[5310,5314,5318,5322,5326,5330,5334],{"type":400,"tag":483,"props":5311,"children":5312},{"style":502},[5313],{"type":406,"value":928},{"type":400,"tag":483,"props":5315,"children":5316},{"style":496},[5317],{"type":406,"value":4721},{"type":400,"tag":483,"props":5319,"children":5320},{"style":561},[5321],{"type":406,"value":938},{"type":400,"tag":483,"props":5323,"children":5324},{"style":496},[5325],{"type":406,"value":4730},{"type":400,"tag":483,"props":5327,"children":5328},{"style":490},[5329],{"type":406,"value":674},{"type":400,"tag":483,"props":5331,"children":5332},{"style":496},[5333],{"type":406,"value":4739},{"type":400,"tag":483,"props":5335,"children":5336},{"style":490},[5337],{"type":406,"value":625},{"type":400,"tag":483,"props":5339,"children":5340},{"class":485,"line":548},[5341,5345,5349,5353,5357,5361,5365,5369,5373,5377,5381,5385,5389,5393,5397,5401,5405,5409],{"type":400,"tag":483,"props":5342,"children":5343},{"style":964},[5344],{"type":406,"value":967},{"type":400,"tag":483,"props":5346,"children":5347},{"style":561},[5348],{"type":406,"value":4755},{"type":400,"tag":483,"props":5350,"children":5351},{"style":496},[5352],{"type":406,"value":4721},{"type":400,"tag":483,"props":5354,"children":5355},{"style":561},[5356],{"type":406,"value":891},{"type":400,"tag":483,"props":5358,"children":5359},{"style":577},[5360],{"type":406,"value":840},{"type":400,"tag":483,"props":5362,"children":5363},{"style":583},[5364],{"type":406,"value":4772},{"type":400,"tag":483,"props":5366,"children":5367},{"style":577},[5368],{"type":406,"value":689},{"type":400,"tag":483,"props":5370,"children":5371},{"style":561},[5372],{"type":406,"value":596},{"type":400,"tag":483,"props":5374,"children":5375},{"style":496},[5376],{"type":406,"value":4721},{"type":400,"tag":483,"props":5378,"children":5379},{"style":490},[5380],{"type":406,"value":674},{"type":400,"tag":483,"props":5382,"children":5383},{"style":677},[5384],{"type":406,"value":4793},{"type":400,"tag":483,"props":5386,"children":5387},{"style":954},[5388],{"type":406,"value":499},{"type":400,"tag":483,"props":5390,"children":5391},{"style":577},[5392],{"type":406,"value":689},{"type":400,"tag":483,"props":5394,"children":5395},{"style":577},[5396],{"type":406,"value":840},{"type":400,"tag":483,"props":5398,"children":5399},{"style":954},[5400],{"type":406,"value":1634},{"type":400,"tag":483,"props":5402,"children":5403},{"style":561},[5404],{"type":406,"value":605},{"type":400,"tag":483,"props":5406,"children":5407},{"style":496},[5408],{"type":406,"value":4721},{"type":400,"tag":483,"props":5410,"children":5411},{"style":490},[5412],{"type":406,"value":625},{"type":400,"tag":483,"props":5414,"children":5415},{"class":485,"line":922},[5416],{"type":400,"tag":483,"props":5417,"children":5418},{"style":490},[5419],{"type":406,"value":4829},{"type":400,"tag":483,"props":5421,"children":5422},{"class":485,"line":960},[5423,5427,5432,5436,5441,5445,5449,5453],{"type":400,"tag":483,"props":5424,"children":5425},{"style":502},[5426],{"type":406,"value":505},{"type":400,"tag":483,"props":5428,"children":5429},{"style":677},[5430],{"type":406,"value":5431}," addElements",{"type":400,"tag":483,"props":5433,"children":5434},{"style":490},[5435],{"type":406,"value":499},{"type":400,"tag":483,"props":5437,"children":5438},{"style":512},[5439],{"type":406,"value":5440},"newElements",{"type":400,"tag":483,"props":5442,"children":5443},{"style":490},[5444],{"type":406,"value":520},{"type":400,"tag":483,"props":5446,"children":5447},{"style":512},[5448],{"type":406,"value":2579},{"type":400,"tag":483,"props":5450,"children":5451},{"style":490},[5452],{"type":406,"value":530},{"type":400,"tag":483,"props":5454,"children":5455},{"style":490},[5456],{"type":406,"value":535},{"type":400,"tag":483,"props":5458,"children":5459},{"class":485,"line":975},[5460,5464,5468,5472,5476,5480],{"type":400,"tag":483,"props":5461,"children":5462},{"style":502},[5463],{"type":406,"value":928},{"type":400,"tag":483,"props":5465,"children":5466},{"style":496},[5467],{"type":406,"value":4721},{"type":400,"tag":483,"props":5469,"children":5470},{"style":561},[5471],{"type":406,"value":938},{"type":400,"tag":483,"props":5473,"children":5474},{"style":496},[5475],{"type":406,"value":4730},{"type":400,"tag":483,"props":5477,"children":5478},{"style":490},[5479],{"type":406,"value":674},{"type":400,"tag":483,"props":5481,"children":5482},{"style":496},[5483],{"type":406,"value":5484},"elements\n",{"type":400,"tag":483,"props":5486,"children":5487},{"class":485,"line":1018},[5488,5492,5496,5500,5504,5509,5513,5517,5521,5525],{"type":400,"tag":483,"props":5489,"children":5490},{"style":964},[5491],{"type":406,"value":1878},{"type":400,"tag":483,"props":5493,"children":5494},{"style":954},[5495],{"type":406,"value":499},{"type":400,"tag":483,"props":5497,"children":5498},{"style":561},[5499],{"type":406,"value":564},{"type":400,"tag":483,"props":5501,"children":5502},{"style":496},[5503],{"type":406,"value":4721},{"type":400,"tag":483,"props":5505,"children":5506},{"style":561},[5507],{"type":406,"value":5508}," !=",{"type":400,"tag":483,"props":5510,"children":5511},{"style":577},[5512],{"type":406,"value":840},{"type":400,"tag":483,"props":5514,"children":5515},{"style":583},[5516],{"type":406,"value":4772},{"type":400,"tag":483,"props":5518,"children":5519},{"style":577},[5520],{"type":406,"value":689},{"type":400,"tag":483,"props":5522,"children":5523},{"style":954},[5524],{"type":406,"value":530},{"type":400,"tag":483,"props":5526,"children":5527},{"style":490},[5528],{"type":406,"value":1639},{"type":400,"tag":483,"props":5530,"children":5531},{"class":485,"line":1058},[5532,5537,5541,5545,5549,5553,5557,5561,5565],{"type":400,"tag":483,"props":5533,"children":5534},{"style":496},[5535],{"type":406,"value":5536},"        elements",{"type":400,"tag":483,"props":5538,"children":5539},{"style":561},[5540],{"type":406,"value":938},{"type":400,"tag":483,"props":5542,"children":5543},{"style":496},[5544],{"type":406,"value":4721},{"type":400,"tag":483,"props":5546,"children":5547},{"style":490},[5548],{"type":406,"value":674},{"type":400,"tag":483,"props":5550,"children":5551},{"style":677},[5552],{"type":406,"value":3032},{"type":400,"tag":483,"props":5554,"children":5555},{"style":954},[5556],{"type":406,"value":499},{"type":400,"tag":483,"props":5558,"children":5559},{"style":577},[5560],{"type":406,"value":689},{"type":400,"tag":483,"props":5562,"children":5563},{"style":577},[5564],{"type":406,"value":840},{"type":400,"tag":483,"props":5566,"children":5567},{"style":954},[5568],{"type":406,"value":702},{"type":400,"tag":483,"props":5570,"children":5571},{"class":485,"line":1094},[5572],{"type":400,"tag":483,"props":5573,"children":5574},{"style":490},[5575],{"type":406,"value":1691},{"type":400,"tag":483,"props":5577,"children":5578},{"class":485,"line":1103},[5579,5583,5587,5591,5596,5600,5604,5608,5612,5616],{"type":400,"tag":483,"props":5580,"children":5581},{"style":964},[5582],{"type":406,"value":1878},{"type":400,"tag":483,"props":5584,"children":5585},{"style":954},[5586],{"type":406,"value":499},{"type":400,"tag":483,"props":5588,"children":5589},{"style":561},[5590],{"type":406,"value":564},{"type":400,"tag":483,"props":5592,"children":5593},{"style":496},[5594],{"type":406,"value":5595}," newElements",{"type":400,"tag":483,"props":5597,"children":5598},{"style":561},[5599],{"type":406,"value":5508},{"type":400,"tag":483,"props":5601,"children":5602},{"style":577},[5603],{"type":406,"value":840},{"type":400,"tag":483,"props":5605,"children":5606},{"style":583},[5607],{"type":406,"value":4772},{"type":400,"tag":483,"props":5609,"children":5610},{"style":577},[5611],{"type":406,"value":689},{"type":400,"tag":483,"props":5613,"children":5614},{"style":954},[5615],{"type":406,"value":530},{"type":400,"tag":483,"props":5617,"children":5618},{"style":490},[5619],{"type":406,"value":1639},{"type":400,"tag":483,"props":5621,"children":5622},{"class":485,"line":1372},[5623,5628,5632,5636,5640,5644,5648,5652,5656],{"type":400,"tag":483,"props":5624,"children":5625},{"style":496},[5626],{"type":406,"value":5627},"        newElements",{"type":400,"tag":483,"props":5629,"children":5630},{"style":561},[5631],{"type":406,"value":938},{"type":400,"tag":483,"props":5633,"children":5634},{"style":496},[5635],{"type":406,"value":5595},{"type":400,"tag":483,"props":5637,"children":5638},{"style":490},[5639],{"type":406,"value":674},{"type":400,"tag":483,"props":5641,"children":5642},{"style":677},[5643],{"type":406,"value":3032},{"type":400,"tag":483,"props":5645,"children":5646},{"style":954},[5647],{"type":406,"value":499},{"type":400,"tag":483,"props":5649,"children":5650},{"style":577},[5651],{"type":406,"value":689},{"type":400,"tag":483,"props":5653,"children":5654},{"style":577},[5655],{"type":406,"value":840},{"type":400,"tag":483,"props":5657,"children":5658},{"style":954},[5659],{"type":406,"value":702},{"type":400,"tag":483,"props":5661,"children":5662},{"class":485,"line":1381},[5663],{"type":400,"tag":483,"props":5664,"children":5665},{"style":490},[5666],{"type":406,"value":1691},{"type":400,"tag":483,"props":5668,"children":5669},{"class":485,"line":1424},[5670,5675,5679,5683,5687,5691,5695,5699,5703,5707],{"type":400,"tag":483,"props":5671,"children":5672},{"style":496},[5673],{"type":406,"value":5674},"    html5",{"type":400,"tag":483,"props":5676,"children":5677},{"style":490},[5678],{"type":406,"value":674},{"type":400,"tag":483,"props":5680,"children":5681},{"style":496},[5682],{"type":406,"value":4739},{"type":400,"tag":483,"props":5684,"children":5685},{"style":561},[5686],{"type":406,"value":938},{"type":400,"tag":483,"props":5688,"children":5689},{"style":496},[5690],{"type":406,"value":4721},{"type":400,"tag":483,"props":5692,"children":5693},{"style":561},[5694],{"type":406,"value":3200},{"type":400,"tag":483,"props":5696,"children":5697},{"style":577},[5698],{"type":406,"value":689},{"type":400,"tag":483,"props":5700,"children":5701},{"style":577},[5702],{"type":406,"value":840},{"type":400,"tag":483,"props":5704,"children":5705},{"style":561},[5706],{"type":406,"value":3075},{"type":400,"tag":483,"props":5708,"children":5709},{"style":496},[5710],{"type":406,"value":5711}," newElements\n",{"type":400,"tag":483,"props":5713,"children":5714},{"class":485,"line":1457},[5715],{"type":400,"tag":483,"props":5716,"children":5717},{"emptyLinePlaceholder":393},[5718],{"type":406,"value":1301},{"type":400,"tag":483,"props":5720,"children":5721},{"class":485,"line":1470},[5722],{"type":400,"tag":483,"props":5723,"children":5724},{"style":542},[5725],{"type":406,"value":5726},"    // 每次增加元素的最后，会进行一次 shiv\n",{"type":400,"tag":483,"props":5728,"children":5729},{"class":485,"line":1511},[5730,5735,5739,5743],{"type":400,"tag":483,"props":5731,"children":5732},{"style":677},[5733],{"type":406,"value":5734},"    shivDocument",{"type":400,"tag":483,"props":5736,"children":5737},{"style":954},[5738],{"type":406,"value":499},{"type":400,"tag":483,"props":5740,"children":5741},{"style":496},[5742],{"type":406,"value":1818},{"type":400,"tag":483,"props":5744,"children":5745},{"style":954},[5746],{"type":406,"value":702},{"type":400,"tag":483,"props":5748,"children":5749},{"class":485,"line":1551},[5750],{"type":400,"tag":483,"props":5751,"children":5752},{"style":490},[5753],{"type":406,"value":4829},{"type":400,"tag":408,"props":5755,"children":5757},{"id":5756},"阅读更多",[5758],{"type":406,"value":5756},{"type":400,"tag":414,"props":5760,"children":5761},{},[5762],{"type":406,"value":5763},"害，看 html5shiv 并不能带来什么具体的帮助。看完之后，只感觉上一代前端真是太辛苦了，为 IE 操碎了心。现代前端技术随着打包工具的发展开阔了不止一点，兼容性这个曾经的代码重心已经悄然落下帷幕。如果现在我去哪家公司面试，还会被大面积问到兼容性问题，那估计我会当场“quit”吧。",{"type":400,"tag":5765,"props":5766,"children":5769},"section",{"className":5767,"dataFootnotes":394},[5768],"footnotes",[5770,5777],{"type":400,"tag":408,"props":5771,"children":5774},{"className":5772,"id":428},[5773],"sr-only",[5775],{"type":406,"value":5776},"Footnotes",{"type":400,"tag":5778,"props":5779,"children":5780},"ol",{},[5781,5804],{"type":400,"tag":445,"props":5782,"children":5784},{"id":5783},"user-content-fn-html5shiv",[5785,5793,5795],{"type":400,"tag":424,"props":5786,"children":5790},{"href":5787,"rel":5788},"https://github.com/aFarkas/html5shiv",[5789],"nofollow",[5791],{"type":406,"value":5792},"html5shiv",{"type":406,"value":5794}," ",{"type":400,"tag":424,"props":5796,"children":5801},{"href":5797,"ariaLabel":5798,"className":5799,"dataFootnoteBackref":394},"#user-content-fnref-html5shiv","Back to reference 1",[5800],"data-footnote-backref",[5802],{"type":406,"value":5803},"↩",{"type":400,"tag":445,"props":5805,"children":5807},{"id":5806},"user-content-fn-hidden",[5808,5815,5816],{"type":400,"tag":424,"props":5809,"children":5812},{"href":5810,"rel":5811},"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/hidden",[5789],[5813],{"type":406,"value":5814},"HTMLElement.hidden@MDN",{"type":406,"value":5794},{"type":400,"tag":424,"props":5817,"children":5821},{"href":5818,"ariaLabel":5819,"className":5820,"dataFootnoteBackref":394},"#user-content-fnref-hidden","Back to reference 2",[5800],[5822],{"type":406,"value":5803},{"type":400,"tag":5824,"props":5825,"children":5826},"style",{},[5827],{"type":406,"value":5828},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":394,"searchDepth":538,"depth":538,"links":5830},[5831,5832,5838,5839],{"id":410,"depth":538,"text":410},{"id":457,"depth":538,"text":457,"children":5833},[5834,5835,5836,5837],{"id":463,"depth":548,"text":463},{"id":633,"depth":548,"text":633},{"id":1706,"depth":548,"text":1706},{"id":4935,"depth":548,"text":4935},{"id":5756,"depth":538,"text":5756},{"id":428,"depth":538,"text":5776},"markdown","content:8.source-code:_module:html5shiv.md","content","8.source-code/_module/html5shiv.md","md",[5846,5849],{"_path":5847,"title":5848,"description":394},"/source-code/_module/fast-deep-equal","判断两个变量相等",{"_path":5850,"title":5851,"description":5852},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",1711865914295]