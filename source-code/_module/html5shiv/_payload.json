[{"data":1,"prerenderedAt":5858},["ShallowReactive",2],{"navigation":3,"/source-code/_module/html5shiv":393,"/source-code/_module/html5shiv-surround":5850},[4,35,86,105,132,138,144,150,387],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"数字化转型","/gists/digital-transformation",{"title":205,"_path":206},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":208,"_path":209},"正则表达式","/gists/eegex",{"title":211,"_path":212},"Emoji","/gists/emoji",{"title":214,"_path":215},"工程","/gists/engineering",{"title":217,"_path":218},"熵","/gists/entropy",{"title":220,"_path":221},"Environment","/gists/environment",{"title":223,"_path":224},"Erlang","/gists/erlang",{"title":226,"_path":227},"逃离塔克夫","/gists/escape-from-tarkov",{"title":229,"_path":230},"ESNext (ES6-ES11)","/gists/esnext",{"title":232,"_path":233},"Eval！","/gists/eval",{"title":235,"_path":236},"Flutter","/gists/flutter",{"title":238,"_path":239},"字体","/gists/font",{"title":241,"_path":242},"JS 函数式编程","/gists/functional",{"title":244,"_path":245},"游戏化","/gists/gamification",{"title":247,"_path":248},"Google C++ Standard","/gists/google-cpp-standard",{"title":250,"_path":251},"双向链接完全体","/gists/graph",{"title":253,"_path":254},"Hardwares","/gists/hardwares",{"title":256,"_path":257},"哈希冲突","/gists/hash-collision",{"title":259,"_path":260},"信息设计","/gists/information-design",{"title":262,"_path":263},"InstantPage","/gists/instant.page",{"title":265,"_path":266},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":268,"_path":269},"KVStore","/gists/key-value-db",{"title":271,"_path":272},"Kubernetes","/gists/kubernetes",{"title":274,"_path":275},"Makefile","/gists/makefile",{"title":277,"_path":278},"Markdown Inline Style","/gists/markdown-nice",{"title":280,"_path":281},"小程序","/gists/miniapp",{"title":283,"_path":284},"减小页面快照体积","/gists/minify-html",{"title":286,"_path":287},"mklink","/gists/mklink",{"title":289,"_path":290},"Mock","/gists/mock",{"title":292,"_path":293},"多人协作系统","/gists/multiplayer",{"title":295,"_path":296},"多端应用","/gists/multy-end-app",{"title":298,"_path":299},"神经科学","/gists/neuroscience",{"title":301,"_path":302},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":304,"_path":305},"PInvoke","/gists/pinvoke",{"title":307,"_path":308},"像素","/gists/pixel",{"title":310,"_path":311},"PowerShell","/gists/powershell",{"title":313,"_path":314},"量子","/gists/quantum",{"title":316,"_path":317},"保持好奇心","/gists/questions",{"title":319,"_path":320},"React Native","/gists/react-native",{"title":322,"_path":323},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":325,"_path":326},"SEO","/gists/seo",{"title":328,"_path":329},"Shader","/gists/shader",{"title":331,"_path":332},"Shape Up","/gists/shape-up",{"title":334,"_path":335},"睡觉","/gists/sleep",{"title":337,"_path":338},"记录奇怪的问题","/gists/solved",{"title":340,"_path":341},"States","/gists/states",{"title":343,"_path":344},"Storage","/gists/storage",{"title":346,"_path":347},"音视频流处理","/gists/stream-cli",{"title":349,"_path":350},"Symbol","/gists/symbol",{"title":352,"_path":353},"系统论","/gists/systems-theory",{"title":355,"_path":356},"Taro","/gists/taro",{"title":358,"_path":359},"任务切片","/gists/task-slice",{"title":361,"_path":362},"技术偏好","/gists/tech-dudge",{"title":364,"_path":365},"Untitled","/gists/untitled",{"title":367,"_path":368},"可变字体","/gists/variable-font",{"title":370,"_path":371},"视觉错觉","/gists/visual-illusion",{"title":373,"_path":374},"SS(SSR)","/gists/vpn",{"title":376,"_path":377},"VS Code 插件开发","/gists/vscode-plugin",{"title":379,"_path":380},"Web Components","/gists/web-components",{"title":382,"_path":383},"Windows","/gists/windows",{"title":385,"_path":386},"查缺补漏","/gists/wrong",{"title":388,"_path":389,"children":390},"我 / About","/hire",[391],{"title":392,"_path":389},"📬 技术简历",{"_path":394,"_dir":395,"_draft":396,"_partial":397,"_locale":398,"title":399,"description":398,"body":400,"_type":5844,"_id":5845,"_source":5846,"_file":5847,"_stem":5848,"_extension":5849},"/source-code/_module/html5shiv","_module",false,true,"","🛠 低版本浏览器兼容HTML5标签原理",{"type":401,"children":402,"toc":5833},"root",[403,411,417,439,444,459,464,470,475,630,635,640,645,650,747,765,770,1118,1123,1708,1713,1718,1723,2020,2025,2444,2449,3323,3328,3434,3439,3556,3561,4286,4291,4667,4672,4937,4942,4947,5280,5285,5758,5763,5768,5827],{"type":404,"tag":405,"props":406,"children":408},"element","h1",{"id":407},"低版本浏览器兼容html5标签原理",[409],{"type":410,"value":399},"text",{"type":404,"tag":412,"props":413,"children":415},"h2",{"id":414},"长话短说",[416],{"type":410,"value":414},{"type":404,"tag":418,"props":419,"children":420},"p",{},[421,423,437],{"type":410,"value":422},"最近在复习 HTML 相关内容呢，不知不觉想起以前在实习公司用过的 html5shiv 这个玩意儿。html5shiv 能使 IE6/7/8 等浏览器支持 HTML5 的新标签",{"type":404,"tag":424,"props":425,"children":426},"sup",{},[427],{"type":404,"tag":428,"props":429,"children":434},"a",{"href":430,"ariaDescribedBy":431,"dataFootnoteRef":398,"id":433},"#user-content-fn-html5shiv",[432],"footnote-label","user-content-fnref-html5shiv",[435],{"type":410,"value":436},"1",{"type":410,"value":438},"。这里我初略扫了一眼它的原理。",{"type":404,"tag":418,"props":440,"children":441},{},[442],{"type":410,"value":443},"它主要做了以下两件事情：",{"type":404,"tag":445,"props":446,"children":447},"ul",{},[448,454],{"type":404,"tag":449,"props":450,"children":451},"li",{},[452],{"type":410,"value":453},"用高阶函数增强浏览器原生的 createElement 等 API。需要创建新标签时，使用已缓存的元素克隆并返还一个新元素，或回退至调用原生 API 创建 H5 新元素。这个增强是基于 document.createElement 能创建非标准元素这个特性实现的。",{"type":404,"tag":449,"props":455,"children":456},{},[457],{"type":410,"value":458},"给新标签增加相应的默认样式。",{"type":404,"tag":412,"props":460,"children":462},{"id":461},"具体实现",[463],{"type":410,"value":461},{"type":404,"tag":465,"props":466,"children":468},"h3",{"id":467},"代码结构",[469],{"type":410,"value":467},{"type":404,"tag":418,"props":471,"children":472},{},[473],{"type":410,"value":474},"整个代码被包裹在 IIFE 中。像 jQuery 一样，把 window 对象传了进来。",{"type":404,"tag":476,"props":477,"children":481},"pre",{"className":478,"code":479,"language":480,"meta":398,"style":398},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",";(function(window, document) {\n    // rest of code\n}(typeof window !== \"undefined\" ? window : this, document));\n","js",[482],{"type":404,"tag":483,"props":484,"children":485},"code",{"__ignoreMap":398},[486,540,550],{"type":404,"tag":487,"props":488,"children":491},"span",{"class":489,"line":490},"line",1,[492,498,504,510,514,520,525,530,535],{"type":404,"tag":487,"props":493,"children":495},{"style":494},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[496],{"type":410,"value":497},";",{"type":404,"tag":487,"props":499,"children":501},{"style":500},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[502],{"type":410,"value":503},"(",{"type":404,"tag":487,"props":505,"children":507},{"style":506},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[508],{"type":410,"value":509},"function",{"type":404,"tag":487,"props":511,"children":512},{"style":494},[513],{"type":410,"value":503},{"type":404,"tag":487,"props":515,"children":517},{"style":516},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[518],{"type":410,"value":519},"window",{"type":404,"tag":487,"props":521,"children":522},{"style":494},[523],{"type":410,"value":524},",",{"type":404,"tag":487,"props":526,"children":527},{"style":516},[528],{"type":410,"value":529}," document",{"type":404,"tag":487,"props":531,"children":532},{"style":494},[533],{"type":410,"value":534},")",{"type":404,"tag":487,"props":536,"children":537},{"style":494},[538],{"type":410,"value":539}," {\n",{"type":404,"tag":487,"props":541,"children":543},{"class":489,"line":542},2,[544],{"type":404,"tag":487,"props":545,"children":547},{"style":546},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[548],{"type":410,"value":549},"    // rest of code\n",{"type":404,"tag":487,"props":551,"children":553},{"class":489,"line":552},3,[554,559,563,569,574,579,585,591,596,601,605,610,616,620,625],{"type":404,"tag":487,"props":555,"children":556},{"style":494},[557],{"type":410,"value":558},"}",{"type":404,"tag":487,"props":560,"children":561},{"style":500},[562],{"type":410,"value":503},{"type":404,"tag":487,"props":564,"children":566},{"style":565},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[567],{"type":410,"value":568},"typeof",{"type":404,"tag":487,"props":570,"children":571},{"style":500},[572],{"type":410,"value":573}," window ",{"type":404,"tag":487,"props":575,"children":576},{"style":565},[577],{"type":410,"value":578},"!==",{"type":404,"tag":487,"props":580,"children":582},{"style":581},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[583],{"type":410,"value":584}," \"",{"type":404,"tag":487,"props":586,"children":588},{"style":587},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[589],{"type":410,"value":590},"undefined",{"type":404,"tag":487,"props":592,"children":593},{"style":581},[594],{"type":410,"value":595},"\"",{"type":404,"tag":487,"props":597,"children":598},{"style":565},[599],{"type":410,"value":600}," ?",{"type":404,"tag":487,"props":602,"children":603},{"style":500},[604],{"type":410,"value":573},{"type":404,"tag":487,"props":606,"children":607},{"style":565},[608],{"type":410,"value":609},":",{"type":404,"tag":487,"props":611,"children":613},{"style":612},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[614],{"type":410,"value":615}," this",{"type":404,"tag":487,"props":617,"children":618},{"style":494},[619],{"type":410,"value":524},{"type":404,"tag":487,"props":621,"children":622},{"style":500},[623],{"type":410,"value":624}," document))",{"type":404,"tag":487,"props":626,"children":627},{"style":494},[628],{"type":410,"value":629},";\n",{"type":404,"tag":418,"props":631,"children":632},{},[633],{"type":410,"value":634},"一个很经典的模块模式，没什么好拓展的，我们继续...",{"type":404,"tag":465,"props":636,"children":638},{"id":637},"兼容性检测",[639],{"type":410,"value":637},{"type":404,"tag":418,"props":641,"children":642},{},[643],{"type":410,"value":644},"以下代码检测当前浏览器对 HTML5 的支持程度。",{"type":404,"tag":418,"props":646,"children":647},{},[648],{"type":410,"value":649},"通过检测元素对 hidden 属性的支持程度，检测浏览器对 HTML5 样式支持的水平。",{"type":404,"tag":476,"props":651,"children":653},{"className":478,"code":652,"language":480,"meta":398,"style":398},"a = document.createElement('a')\nsupportsHtml5Styles = ('hidden' in a)\n",[654],{"type":404,"tag":483,"props":655,"children":656},{"__ignoreMap":398},[657,707],{"type":404,"tag":487,"props":658,"children":659},{"class":489,"line":490},[660,665,670,674,679,685,689,694,698,702],{"type":404,"tag":487,"props":661,"children":662},{"style":500},[663],{"type":410,"value":664},"a ",{"type":404,"tag":487,"props":666,"children":667},{"style":565},[668],{"type":410,"value":669},"=",{"type":404,"tag":487,"props":671,"children":672},{"style":500},[673],{"type":410,"value":529},{"type":404,"tag":487,"props":675,"children":676},{"style":494},[677],{"type":410,"value":678},".",{"type":404,"tag":487,"props":680,"children":682},{"style":681},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[683],{"type":410,"value":684},"createElement",{"type":404,"tag":487,"props":686,"children":687},{"style":500},[688],{"type":410,"value":503},{"type":404,"tag":487,"props":690,"children":691},{"style":581},[692],{"type":410,"value":693},"'",{"type":404,"tag":487,"props":695,"children":696},{"style":587},[697],{"type":410,"value":428},{"type":404,"tag":487,"props":699,"children":700},{"style":581},[701],{"type":410,"value":693},{"type":404,"tag":487,"props":703,"children":704},{"style":500},[705],{"type":410,"value":706},")\n",{"type":404,"tag":487,"props":708,"children":709},{"class":489,"line":542},[710,715,719,724,728,733,737,742],{"type":404,"tag":487,"props":711,"children":712},{"style":500},[713],{"type":410,"value":714},"supportsHtml5Styles ",{"type":404,"tag":487,"props":716,"children":717},{"style":565},[718],{"type":410,"value":669},{"type":404,"tag":487,"props":720,"children":721},{"style":500},[722],{"type":410,"value":723}," (",{"type":404,"tag":487,"props":725,"children":726},{"style":581},[727],{"type":410,"value":693},{"type":404,"tag":487,"props":729,"children":730},{"style":587},[731],{"type":410,"value":732},"hidden",{"type":404,"tag":487,"props":734,"children":735},{"style":581},[736],{"type":410,"value":693},{"type":404,"tag":487,"props":738,"children":739},{"style":565},[740],{"type":410,"value":741}," in",{"type":404,"tag":487,"props":743,"children":744},{"style":500},[745],{"type":410,"value":746}," a)\n",{"type":404,"tag":418,"props":748,"children":749},{},[750,752,763],{"type":410,"value":751},"以前没听过 HTMLElement.hidden，项目里的隐藏元素都是直接上 CSS 做的。不过据 MDN 表示，除了隐藏元素之外，hidden 属性还能用于创造离屏 Canvas",{"type":404,"tag":424,"props":753,"children":754},{},[755],{"type":404,"tag":428,"props":756,"children":760},{"href":757,"ariaDescribedBy":758,"dataFootnoteRef":398,"id":759},"#user-content-fn-hidden",[432],"user-content-fnref-hidden",[761],{"type":410,"value":762},"2",{"type":410,"value":764},"。",{"type":404,"tag":418,"props":766,"children":767},{},[768],{"type":410,"value":769},"这段代码用于测试浏览器是否支持未知元素的创建。",{"type":404,"tag":476,"props":771,"children":773},{"className":478,"code":772,"language":480,"meta":398,"style":398},"a = document.createElement('a')\na.innerHTML = '\u003Cxyz>\u003C/xyz>'\nsupportsUnknownElements = a.childNodes.length == 1 || (function() {\n    var frag = document.createDocumentFragment()\n    return (\n    typeof frag.cloneNode == 'undefined' ||\n    typeof frag.createDocumentFragment == 'undefined' ||\n    typeof frag.createElement == 'undefined'\n    )\n}())\n",[774],{"type":404,"tag":483,"props":775,"children":776},{"__ignoreMap":398},[777,820,855,924,962,977,1020,1060,1096,1105],{"type":404,"tag":487,"props":778,"children":779},{"class":489,"line":490},[780,784,788,792,796,800,804,808,812,816],{"type":404,"tag":487,"props":781,"children":782},{"style":500},[783],{"type":410,"value":664},{"type":404,"tag":487,"props":785,"children":786},{"style":565},[787],{"type":410,"value":669},{"type":404,"tag":487,"props":789,"children":790},{"style":500},[791],{"type":410,"value":529},{"type":404,"tag":487,"props":793,"children":794},{"style":494},[795],{"type":410,"value":678},{"type":404,"tag":487,"props":797,"children":798},{"style":681},[799],{"type":410,"value":684},{"type":404,"tag":487,"props":801,"children":802},{"style":500},[803],{"type":410,"value":503},{"type":404,"tag":487,"props":805,"children":806},{"style":581},[807],{"type":410,"value":693},{"type":404,"tag":487,"props":809,"children":810},{"style":587},[811],{"type":410,"value":428},{"type":404,"tag":487,"props":813,"children":814},{"style":581},[815],{"type":410,"value":693},{"type":404,"tag":487,"props":817,"children":818},{"style":500},[819],{"type":410,"value":706},{"type":404,"tag":487,"props":821,"children":822},{"class":489,"line":542},[823,827,831,836,840,845,850],{"type":404,"tag":487,"props":824,"children":825},{"style":500},[826],{"type":410,"value":428},{"type":404,"tag":487,"props":828,"children":829},{"style":494},[830],{"type":410,"value":678},{"type":404,"tag":487,"props":832,"children":833},{"style":500},[834],{"type":410,"value":835},"innerHTML ",{"type":404,"tag":487,"props":837,"children":838},{"style":565},[839],{"type":410,"value":669},{"type":404,"tag":487,"props":841,"children":842},{"style":581},[843],{"type":410,"value":844}," '",{"type":404,"tag":487,"props":846,"children":847},{"style":587},[848],{"type":410,"value":849},"\u003Cxyz>\u003C/xyz>",{"type":404,"tag":487,"props":851,"children":852},{"style":581},[853],{"type":410,"value":854},"'\n",{"type":404,"tag":487,"props":856,"children":857},{"class":489,"line":552},[858,863,867,872,876,881,885,891,896,902,907,911,915,920],{"type":404,"tag":487,"props":859,"children":860},{"style":500},[861],{"type":410,"value":862},"supportsUnknownElements ",{"type":404,"tag":487,"props":864,"children":865},{"style":565},[866],{"type":410,"value":669},{"type":404,"tag":487,"props":868,"children":869},{"style":500},[870],{"type":410,"value":871}," a",{"type":404,"tag":487,"props":873,"children":874},{"style":494},[875],{"type":410,"value":678},{"type":404,"tag":487,"props":877,"children":878},{"style":500},[879],{"type":410,"value":880},"childNodes",{"type":404,"tag":487,"props":882,"children":883},{"style":494},[884],{"type":410,"value":678},{"type":404,"tag":487,"props":886,"children":888},{"style":887},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[889],{"type":410,"value":890},"length",{"type":404,"tag":487,"props":892,"children":893},{"style":565},[894],{"type":410,"value":895}," ==",{"type":404,"tag":487,"props":897,"children":899},{"style":898},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[900],{"type":410,"value":901}," 1",{"type":404,"tag":487,"props":903,"children":904},{"style":565},[905],{"type":410,"value":906}," ||",{"type":404,"tag":487,"props":908,"children":909},{"style":500},[910],{"type":410,"value":723},{"type":404,"tag":487,"props":912,"children":913},{"style":506},[914],{"type":410,"value":509},{"type":404,"tag":487,"props":916,"children":917},{"style":494},[918],{"type":410,"value":919},"()",{"type":404,"tag":487,"props":921,"children":922},{"style":494},[923],{"type":410,"value":539},{"type":404,"tag":487,"props":925,"children":927},{"class":489,"line":926},4,[928,933,938,943,947,951,956],{"type":404,"tag":487,"props":929,"children":930},{"style":506},[931],{"type":410,"value":932},"    var",{"type":404,"tag":487,"props":934,"children":935},{"style":500},[936],{"type":410,"value":937}," frag",{"type":404,"tag":487,"props":939,"children":940},{"style":565},[941],{"type":410,"value":942}," =",{"type":404,"tag":487,"props":944,"children":945},{"style":500},[946],{"type":410,"value":529},{"type":404,"tag":487,"props":948,"children":949},{"style":494},[950],{"type":410,"value":678},{"type":404,"tag":487,"props":952,"children":953},{"style":681},[954],{"type":410,"value":955},"createDocumentFragment",{"type":404,"tag":487,"props":957,"children":959},{"style":958},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[960],{"type":410,"value":961},"()\n",{"type":404,"tag":487,"props":963,"children":965},{"class":489,"line":964},5,[966,972],{"type":404,"tag":487,"props":967,"children":969},{"style":968},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[970],{"type":410,"value":971},"    return",{"type":404,"tag":487,"props":973,"children":974},{"style":958},[975],{"type":410,"value":976}," (\n",{"type":404,"tag":487,"props":978,"children":980},{"class":489,"line":979},6,[981,986,990,994,999,1003,1007,1011,1015],{"type":404,"tag":487,"props":982,"children":983},{"style":565},[984],{"type":410,"value":985},"    typeof",{"type":404,"tag":487,"props":987,"children":988},{"style":500},[989],{"type":410,"value":937},{"type":404,"tag":487,"props":991,"children":992},{"style":494},[993],{"type":410,"value":678},{"type":404,"tag":487,"props":995,"children":996},{"style":500},[997],{"type":410,"value":998},"cloneNode",{"type":404,"tag":487,"props":1000,"children":1001},{"style":565},[1002],{"type":410,"value":895},{"type":404,"tag":487,"props":1004,"children":1005},{"style":581},[1006],{"type":410,"value":844},{"type":404,"tag":487,"props":1008,"children":1009},{"style":587},[1010],{"type":410,"value":590},{"type":404,"tag":487,"props":1012,"children":1013},{"style":581},[1014],{"type":410,"value":693},{"type":404,"tag":487,"props":1016,"children":1017},{"style":565},[1018],{"type":410,"value":1019}," ||\n",{"type":404,"tag":487,"props":1021,"children":1023},{"class":489,"line":1022},7,[1024,1028,1032,1036,1040,1044,1048,1052,1056],{"type":404,"tag":487,"props":1025,"children":1026},{"style":565},[1027],{"type":410,"value":985},{"type":404,"tag":487,"props":1029,"children":1030},{"style":500},[1031],{"type":410,"value":937},{"type":404,"tag":487,"props":1033,"children":1034},{"style":494},[1035],{"type":410,"value":678},{"type":404,"tag":487,"props":1037,"children":1038},{"style":500},[1039],{"type":410,"value":955},{"type":404,"tag":487,"props":1041,"children":1042},{"style":565},[1043],{"type":410,"value":895},{"type":404,"tag":487,"props":1045,"children":1046},{"style":581},[1047],{"type":410,"value":844},{"type":404,"tag":487,"props":1049,"children":1050},{"style":587},[1051],{"type":410,"value":590},{"type":404,"tag":487,"props":1053,"children":1054},{"style":581},[1055],{"type":410,"value":693},{"type":404,"tag":487,"props":1057,"children":1058},{"style":565},[1059],{"type":410,"value":1019},{"type":404,"tag":487,"props":1061,"children":1063},{"class":489,"line":1062},8,[1064,1068,1072,1076,1080,1084,1088,1092],{"type":404,"tag":487,"props":1065,"children":1066},{"style":565},[1067],{"type":410,"value":985},{"type":404,"tag":487,"props":1069,"children":1070},{"style":500},[1071],{"type":410,"value":937},{"type":404,"tag":487,"props":1073,"children":1074},{"style":494},[1075],{"type":410,"value":678},{"type":404,"tag":487,"props":1077,"children":1078},{"style":500},[1079],{"type":410,"value":684},{"type":404,"tag":487,"props":1081,"children":1082},{"style":565},[1083],{"type":410,"value":895},{"type":404,"tag":487,"props":1085,"children":1086},{"style":581},[1087],{"type":410,"value":844},{"type":404,"tag":487,"props":1089,"children":1090},{"style":587},[1091],{"type":410,"value":590},{"type":404,"tag":487,"props":1093,"children":1094},{"style":581},[1095],{"type":410,"value":854},{"type":404,"tag":487,"props":1097,"children":1099},{"class":489,"line":1098},9,[1100],{"type":404,"tag":487,"props":1101,"children":1102},{"style":958},[1103],{"type":410,"value":1104},"    )\n",{"type":404,"tag":487,"props":1106,"children":1108},{"class":489,"line":1107},10,[1109,1113],{"type":404,"tag":487,"props":1110,"children":1111},{"style":494},[1112],{"type":410,"value":558},{"type":404,"tag":487,"props":1114,"children":1115},{"style":500},[1116],{"type":410,"value":1117},"())\n",{"type":404,"tag":418,"props":1119,"children":1120},{},[1121],{"type":410,"value":1122},"如果连 document.createElement 都调用失败的话，那 html5shiv 代码就毫无作用了（html5shiv 的原理需要用到 document.createElement），所以用一个 try/catch 将上述两个功能包裹起来。遇到错误则假装浏览器正常支持 HTML5，相关检测变量被置为 true。",{"type":404,"tag":476,"props":1124,"children":1126},{"className":478,"code":1125,"language":480,"meta":398,"style":398},"(function() {\n    try {\n        var a = document.createElement('a')\n        a.innerHTML = '\u003Cxyz>\u003C/xyz>'\n        //if the hidden property is implemented we can assume, \n        // that the browser supports basic HTML5 Styles\n        supportsHtml5Styles = ('hidden' in a)\n\n        supportsUnknownElements = a.childNodes.length == 1 || (function() {\n            // assign a false positive if unable to shiv\n            // ? 猜测特定浏览器对这种括号调用方法会报错\n            (document.createElement)('a')\n            var frag = document.createDocumentFragment()\n            return (\n            typeof frag.cloneNode == 'undefined' ||\n            typeof frag.createDocumentFragment == 'undefined' ||\n            typeof frag.createElement == 'undefined'\n            )\n        }())\n    } catch(e) {\n        // assign a false positive if detection fails => unable to shiv\n        supportsHtml5Styles = true\n        supportsUnknownElements = true\n    }\n}())\n",[1127],{"type":404,"tag":483,"props":1128,"children":1129},{"__ignoreMap":398},[1130,1149,1161,1209,1242,1250,1258,1298,1306,1366,1374,1383,1426,1459,1472,1513,1553,1589,1598,1611,1644,1653,1671,1687,1696],{"type":404,"tag":487,"props":1131,"children":1132},{"class":489,"line":490},[1133,1137,1141,1145],{"type":404,"tag":487,"props":1134,"children":1135},{"style":500},[1136],{"type":410,"value":503},{"type":404,"tag":487,"props":1138,"children":1139},{"style":506},[1140],{"type":410,"value":509},{"type":404,"tag":487,"props":1142,"children":1143},{"style":494},[1144],{"type":410,"value":919},{"type":404,"tag":487,"props":1146,"children":1147},{"style":494},[1148],{"type":410,"value":539},{"type":404,"tag":487,"props":1150,"children":1151},{"class":489,"line":542},[1152,1157],{"type":404,"tag":487,"props":1153,"children":1154},{"style":968},[1155],{"type":410,"value":1156},"    try",{"type":404,"tag":487,"props":1158,"children":1159},{"style":494},[1160],{"type":410,"value":539},{"type":404,"tag":487,"props":1162,"children":1163},{"class":489,"line":552},[1164,1169,1173,1177,1181,1185,1189,1193,1197,1201,1205],{"type":404,"tag":487,"props":1165,"children":1166},{"style":506},[1167],{"type":410,"value":1168},"        var",{"type":404,"tag":487,"props":1170,"children":1171},{"style":500},[1172],{"type":410,"value":871},{"type":404,"tag":487,"props":1174,"children":1175},{"style":565},[1176],{"type":410,"value":942},{"type":404,"tag":487,"props":1178,"children":1179},{"style":500},[1180],{"type":410,"value":529},{"type":404,"tag":487,"props":1182,"children":1183},{"style":494},[1184],{"type":410,"value":678},{"type":404,"tag":487,"props":1186,"children":1187},{"style":681},[1188],{"type":410,"value":684},{"type":404,"tag":487,"props":1190,"children":1191},{"style":958},[1192],{"type":410,"value":503},{"type":404,"tag":487,"props":1194,"children":1195},{"style":581},[1196],{"type":410,"value":693},{"type":404,"tag":487,"props":1198,"children":1199},{"style":587},[1200],{"type":410,"value":428},{"type":404,"tag":487,"props":1202,"children":1203},{"style":581},[1204],{"type":410,"value":693},{"type":404,"tag":487,"props":1206,"children":1207},{"style":958},[1208],{"type":410,"value":706},{"type":404,"tag":487,"props":1210,"children":1211},{"class":489,"line":926},[1212,1217,1221,1226,1230,1234,1238],{"type":404,"tag":487,"props":1213,"children":1214},{"style":500},[1215],{"type":410,"value":1216},"        a",{"type":404,"tag":487,"props":1218,"children":1219},{"style":494},[1220],{"type":410,"value":678},{"type":404,"tag":487,"props":1222,"children":1223},{"style":500},[1224],{"type":410,"value":1225},"innerHTML",{"type":404,"tag":487,"props":1227,"children":1228},{"style":565},[1229],{"type":410,"value":942},{"type":404,"tag":487,"props":1231,"children":1232},{"style":581},[1233],{"type":410,"value":844},{"type":404,"tag":487,"props":1235,"children":1236},{"style":587},[1237],{"type":410,"value":849},{"type":404,"tag":487,"props":1239,"children":1240},{"style":581},[1241],{"type":410,"value":854},{"type":404,"tag":487,"props":1243,"children":1244},{"class":489,"line":964},[1245],{"type":404,"tag":487,"props":1246,"children":1247},{"style":546},[1248],{"type":410,"value":1249},"        //if the hidden property is implemented we can assume, \n",{"type":404,"tag":487,"props":1251,"children":1252},{"class":489,"line":979},[1253],{"type":404,"tag":487,"props":1254,"children":1255},{"style":546},[1256],{"type":410,"value":1257},"        // that the browser supports basic HTML5 Styles\n",{"type":404,"tag":487,"props":1259,"children":1260},{"class":489,"line":1022},[1261,1266,1270,1274,1278,1282,1286,1290,1294],{"type":404,"tag":487,"props":1262,"children":1263},{"style":500},[1264],{"type":410,"value":1265},"        supportsHtml5Styles",{"type":404,"tag":487,"props":1267,"children":1268},{"style":565},[1269],{"type":410,"value":942},{"type":404,"tag":487,"props":1271,"children":1272},{"style":958},[1273],{"type":410,"value":723},{"type":404,"tag":487,"props":1275,"children":1276},{"style":581},[1277],{"type":410,"value":693},{"type":404,"tag":487,"props":1279,"children":1280},{"style":587},[1281],{"type":410,"value":732},{"type":404,"tag":487,"props":1283,"children":1284},{"style":581},[1285],{"type":410,"value":693},{"type":404,"tag":487,"props":1287,"children":1288},{"style":565},[1289],{"type":410,"value":741},{"type":404,"tag":487,"props":1291,"children":1292},{"style":500},[1293],{"type":410,"value":871},{"type":404,"tag":487,"props":1295,"children":1296},{"style":958},[1297],{"type":410,"value":706},{"type":404,"tag":487,"props":1299,"children":1300},{"class":489,"line":1062},[1301],{"type":404,"tag":487,"props":1302,"children":1303},{"emptyLinePlaceholder":397},[1304],{"type":410,"value":1305},"\n",{"type":404,"tag":487,"props":1307,"children":1308},{"class":489,"line":1098},[1309,1314,1318,1322,1326,1330,1334,1338,1342,1346,1350,1354,1358,1362],{"type":404,"tag":487,"props":1310,"children":1311},{"style":500},[1312],{"type":410,"value":1313},"        supportsUnknownElements",{"type":404,"tag":487,"props":1315,"children":1316},{"style":565},[1317],{"type":410,"value":942},{"type":404,"tag":487,"props":1319,"children":1320},{"style":500},[1321],{"type":410,"value":871},{"type":404,"tag":487,"props":1323,"children":1324},{"style":494},[1325],{"type":410,"value":678},{"type":404,"tag":487,"props":1327,"children":1328},{"style":500},[1329],{"type":410,"value":880},{"type":404,"tag":487,"props":1331,"children":1332},{"style":494},[1333],{"type":410,"value":678},{"type":404,"tag":487,"props":1335,"children":1336},{"style":887},[1337],{"type":410,"value":890},{"type":404,"tag":487,"props":1339,"children":1340},{"style":565},[1341],{"type":410,"value":895},{"type":404,"tag":487,"props":1343,"children":1344},{"style":898},[1345],{"type":410,"value":901},{"type":404,"tag":487,"props":1347,"children":1348},{"style":565},[1349],{"type":410,"value":906},{"type":404,"tag":487,"props":1351,"children":1352},{"style":958},[1353],{"type":410,"value":723},{"type":404,"tag":487,"props":1355,"children":1356},{"style":506},[1357],{"type":410,"value":509},{"type":404,"tag":487,"props":1359,"children":1360},{"style":494},[1361],{"type":410,"value":919},{"type":404,"tag":487,"props":1363,"children":1364},{"style":494},[1365],{"type":410,"value":539},{"type":404,"tag":487,"props":1367,"children":1368},{"class":489,"line":1107},[1369],{"type":404,"tag":487,"props":1370,"children":1371},{"style":546},[1372],{"type":410,"value":1373},"            // assign a false positive if unable to shiv\n",{"type":404,"tag":487,"props":1375,"children":1377},{"class":489,"line":1376},11,[1378],{"type":404,"tag":487,"props":1379,"children":1380},{"style":546},[1381],{"type":410,"value":1382},"            // ? 猜测特定浏览器对这种括号调用方法会报错\n",{"type":404,"tag":487,"props":1384,"children":1386},{"class":489,"line":1385},12,[1387,1392,1397,1401,1405,1410,1414,1418,1422],{"type":404,"tag":487,"props":1388,"children":1389},{"style":958},[1390],{"type":410,"value":1391},"            (",{"type":404,"tag":487,"props":1393,"children":1394},{"style":500},[1395],{"type":410,"value":1396},"document",{"type":404,"tag":487,"props":1398,"children":1399},{"style":494},[1400],{"type":410,"value":678},{"type":404,"tag":487,"props":1402,"children":1403},{"style":500},[1404],{"type":410,"value":684},{"type":404,"tag":487,"props":1406,"children":1407},{"style":958},[1408],{"type":410,"value":1409},")(",{"type":404,"tag":487,"props":1411,"children":1412},{"style":581},[1413],{"type":410,"value":693},{"type":404,"tag":487,"props":1415,"children":1416},{"style":587},[1417],{"type":410,"value":428},{"type":404,"tag":487,"props":1419,"children":1420},{"style":581},[1421],{"type":410,"value":693},{"type":404,"tag":487,"props":1423,"children":1424},{"style":958},[1425],{"type":410,"value":706},{"type":404,"tag":487,"props":1427,"children":1429},{"class":489,"line":1428},13,[1430,1435,1439,1443,1447,1451,1455],{"type":404,"tag":487,"props":1431,"children":1432},{"style":506},[1433],{"type":410,"value":1434},"            var",{"type":404,"tag":487,"props":1436,"children":1437},{"style":500},[1438],{"type":410,"value":937},{"type":404,"tag":487,"props":1440,"children":1441},{"style":565},[1442],{"type":410,"value":942},{"type":404,"tag":487,"props":1444,"children":1445},{"style":500},[1446],{"type":410,"value":529},{"type":404,"tag":487,"props":1448,"children":1449},{"style":494},[1450],{"type":410,"value":678},{"type":404,"tag":487,"props":1452,"children":1453},{"style":681},[1454],{"type":410,"value":955},{"type":404,"tag":487,"props":1456,"children":1457},{"style":958},[1458],{"type":410,"value":961},{"type":404,"tag":487,"props":1460,"children":1462},{"class":489,"line":1461},14,[1463,1468],{"type":404,"tag":487,"props":1464,"children":1465},{"style":968},[1466],{"type":410,"value":1467},"            return",{"type":404,"tag":487,"props":1469,"children":1470},{"style":958},[1471],{"type":410,"value":976},{"type":404,"tag":487,"props":1473,"children":1475},{"class":489,"line":1474},15,[1476,1481,1485,1489,1493,1497,1501,1505,1509],{"type":404,"tag":487,"props":1477,"children":1478},{"style":565},[1479],{"type":410,"value":1480},"            typeof",{"type":404,"tag":487,"props":1482,"children":1483},{"style":500},[1484],{"type":410,"value":937},{"type":404,"tag":487,"props":1486,"children":1487},{"style":494},[1488],{"type":410,"value":678},{"type":404,"tag":487,"props":1490,"children":1491},{"style":500},[1492],{"type":410,"value":998},{"type":404,"tag":487,"props":1494,"children":1495},{"style":565},[1496],{"type":410,"value":895},{"type":404,"tag":487,"props":1498,"children":1499},{"style":581},[1500],{"type":410,"value":844},{"type":404,"tag":487,"props":1502,"children":1503},{"style":587},[1504],{"type":410,"value":590},{"type":404,"tag":487,"props":1506,"children":1507},{"style":581},[1508],{"type":410,"value":693},{"type":404,"tag":487,"props":1510,"children":1511},{"style":565},[1512],{"type":410,"value":1019},{"type":404,"tag":487,"props":1514,"children":1516},{"class":489,"line":1515},16,[1517,1521,1525,1529,1533,1537,1541,1545,1549],{"type":404,"tag":487,"props":1518,"children":1519},{"style":565},[1520],{"type":410,"value":1480},{"type":404,"tag":487,"props":1522,"children":1523},{"style":500},[1524],{"type":410,"value":937},{"type":404,"tag":487,"props":1526,"children":1527},{"style":494},[1528],{"type":410,"value":678},{"type":404,"tag":487,"props":1530,"children":1531},{"style":500},[1532],{"type":410,"value":955},{"type":404,"tag":487,"props":1534,"children":1535},{"style":565},[1536],{"type":410,"value":895},{"type":404,"tag":487,"props":1538,"children":1539},{"style":581},[1540],{"type":410,"value":844},{"type":404,"tag":487,"props":1542,"children":1543},{"style":587},[1544],{"type":410,"value":590},{"type":404,"tag":487,"props":1546,"children":1547},{"style":581},[1548],{"type":410,"value":693},{"type":404,"tag":487,"props":1550,"children":1551},{"style":565},[1552],{"type":410,"value":1019},{"type":404,"tag":487,"props":1554,"children":1556},{"class":489,"line":1555},17,[1557,1561,1565,1569,1573,1577,1581,1585],{"type":404,"tag":487,"props":1558,"children":1559},{"style":565},[1560],{"type":410,"value":1480},{"type":404,"tag":487,"props":1562,"children":1563},{"style":500},[1564],{"type":410,"value":937},{"type":404,"tag":487,"props":1566,"children":1567},{"style":494},[1568],{"type":410,"value":678},{"type":404,"tag":487,"props":1570,"children":1571},{"style":500},[1572],{"type":410,"value":684},{"type":404,"tag":487,"props":1574,"children":1575},{"style":565},[1576],{"type":410,"value":895},{"type":404,"tag":487,"props":1578,"children":1579},{"style":581},[1580],{"type":410,"value":844},{"type":404,"tag":487,"props":1582,"children":1583},{"style":587},[1584],{"type":410,"value":590},{"type":404,"tag":487,"props":1586,"children":1587},{"style":581},[1588],{"type":410,"value":854},{"type":404,"tag":487,"props":1590,"children":1592},{"class":489,"line":1591},18,[1593],{"type":404,"tag":487,"props":1594,"children":1595},{"style":958},[1596],{"type":410,"value":1597},"            )\n",{"type":404,"tag":487,"props":1599,"children":1601},{"class":489,"line":1600},19,[1602,1607],{"type":404,"tag":487,"props":1603,"children":1604},{"style":494},[1605],{"type":410,"value":1606},"        }",{"type":404,"tag":487,"props":1608,"children":1609},{"style":958},[1610],{"type":410,"value":1117},{"type":404,"tag":487,"props":1612,"children":1614},{"class":489,"line":1613},20,[1615,1620,1625,1629,1634,1639],{"type":404,"tag":487,"props":1616,"children":1617},{"style":494},[1618],{"type":410,"value":1619},"    }",{"type":404,"tag":487,"props":1621,"children":1622},{"style":968},[1623],{"type":410,"value":1624}," catch",{"type":404,"tag":487,"props":1626,"children":1627},{"style":958},[1628],{"type":410,"value":503},{"type":404,"tag":487,"props":1630,"children":1631},{"style":500},[1632],{"type":410,"value":1633},"e",{"type":404,"tag":487,"props":1635,"children":1636},{"style":958},[1637],{"type":410,"value":1638},") ",{"type":404,"tag":487,"props":1640,"children":1641},{"style":494},[1642],{"type":410,"value":1643},"{\n",{"type":404,"tag":487,"props":1645,"children":1647},{"class":489,"line":1646},21,[1648],{"type":404,"tag":487,"props":1649,"children":1650},{"style":546},[1651],{"type":410,"value":1652},"        // assign a false positive if detection fails => unable to shiv\n",{"type":404,"tag":487,"props":1654,"children":1656},{"class":489,"line":1655},22,[1657,1661,1665],{"type":404,"tag":487,"props":1658,"children":1659},{"style":500},[1660],{"type":410,"value":1265},{"type":404,"tag":487,"props":1662,"children":1663},{"style":565},[1664],{"type":410,"value":942},{"type":404,"tag":487,"props":1666,"children":1668},{"style":1667},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1669],{"type":410,"value":1670}," true\n",{"type":404,"tag":487,"props":1672,"children":1674},{"class":489,"line":1673},23,[1675,1679,1683],{"type":404,"tag":487,"props":1676,"children":1677},{"style":500},[1678],{"type":410,"value":1313},{"type":404,"tag":487,"props":1680,"children":1681},{"style":565},[1682],{"type":410,"value":942},{"type":404,"tag":487,"props":1684,"children":1685},{"style":1667},[1686],{"type":410,"value":1670},{"type":404,"tag":487,"props":1688,"children":1690},{"class":489,"line":1689},24,[1691],{"type":404,"tag":487,"props":1692,"children":1693},{"style":494},[1694],{"type":410,"value":1695},"    }\n",{"type":404,"tag":487,"props":1697,"children":1699},{"class":489,"line":1698},25,[1700,1704],{"type":404,"tag":487,"props":1701,"children":1702},{"style":494},[1703],{"type":410,"value":558},{"type":404,"tag":487,"props":1705,"children":1706},{"style":500},[1707],{"type":410,"value":1117},{"type":404,"tag":465,"props":1709,"children":1711},{"id":1710},"功能仿制",[1712],{"type":410,"value":1710},{"type":404,"tag":418,"props":1714,"children":1715},{},[1716],{"type":410,"value":1717},"每个页面可能有多个 iframe，所以可能有多个 document 对象。因为不同 document 对象可被 shiv 的元素可能不同，所以需要一个变量用作记录。",{"type":404,"tag":418,"props":1719,"children":1720},{},[1721],{"type":410,"value":1722},"getExpandoData 方法在传入的 document 对象下挂载了一个属性名为 '_html5shiv' 的空对象，用来便捷存放某些数据（比如说元素缓存），并返回对象单例。",{"type":404,"tag":476,"props":1724,"children":1726},{"className":478,"code":1725,"language":480,"meta":398,"style":398},"var expandoData = {}\nvar expanID = 0\nvar expando = '_html5shiv'\nfunction getExpandoData(ownerDocument) {\n    var data = expandoData[ownerDocument[expando]]\n    if (!data) {\n        data = {}\n        expanID++\n        ownerDocument[expando] = expanID\n        expandoData[expanID] = data\n    }\n    return data\n  }\n",[1727],{"type":404,"tag":483,"props":1728,"children":1729},{"__ignoreMap":398},[1730,1752,1773,1802,1831,1875,1905,1921,1934,1964,1994,2001,2012],{"type":404,"tag":487,"props":1731,"children":1732},{"class":489,"line":490},[1733,1738,1743,1747],{"type":404,"tag":487,"props":1734,"children":1735},{"style":506},[1736],{"type":410,"value":1737},"var",{"type":404,"tag":487,"props":1739,"children":1740},{"style":500},[1741],{"type":410,"value":1742}," expandoData ",{"type":404,"tag":487,"props":1744,"children":1745},{"style":565},[1746],{"type":410,"value":669},{"type":404,"tag":487,"props":1748,"children":1749},{"style":494},[1750],{"type":410,"value":1751}," {}\n",{"type":404,"tag":487,"props":1753,"children":1754},{"class":489,"line":542},[1755,1759,1764,1768],{"type":404,"tag":487,"props":1756,"children":1757},{"style":506},[1758],{"type":410,"value":1737},{"type":404,"tag":487,"props":1760,"children":1761},{"style":500},[1762],{"type":410,"value":1763}," expanID ",{"type":404,"tag":487,"props":1765,"children":1766},{"style":565},[1767],{"type":410,"value":669},{"type":404,"tag":487,"props":1769,"children":1770},{"style":898},[1771],{"type":410,"value":1772}," 0\n",{"type":404,"tag":487,"props":1774,"children":1775},{"class":489,"line":552},[1776,1780,1785,1789,1793,1798],{"type":404,"tag":487,"props":1777,"children":1778},{"style":506},[1779],{"type":410,"value":1737},{"type":404,"tag":487,"props":1781,"children":1782},{"style":500},[1783],{"type":410,"value":1784}," expando ",{"type":404,"tag":487,"props":1786,"children":1787},{"style":565},[1788],{"type":410,"value":669},{"type":404,"tag":487,"props":1790,"children":1791},{"style":581},[1792],{"type":410,"value":844},{"type":404,"tag":487,"props":1794,"children":1795},{"style":587},[1796],{"type":410,"value":1797},"_html5shiv",{"type":404,"tag":487,"props":1799,"children":1800},{"style":581},[1801],{"type":410,"value":854},{"type":404,"tag":487,"props":1803,"children":1804},{"class":489,"line":926},[1805,1809,1814,1818,1823,1827],{"type":404,"tag":487,"props":1806,"children":1807},{"style":506},[1808],{"type":410,"value":509},{"type":404,"tag":487,"props":1810,"children":1811},{"style":681},[1812],{"type":410,"value":1813}," getExpandoData",{"type":404,"tag":487,"props":1815,"children":1816},{"style":494},[1817],{"type":410,"value":503},{"type":404,"tag":487,"props":1819,"children":1820},{"style":516},[1821],{"type":410,"value":1822},"ownerDocument",{"type":404,"tag":487,"props":1824,"children":1825},{"style":494},[1826],{"type":410,"value":534},{"type":404,"tag":487,"props":1828,"children":1829},{"style":494},[1830],{"type":410,"value":539},{"type":404,"tag":487,"props":1832,"children":1833},{"class":489,"line":964},[1834,1838,1843,1847,1852,1857,1861,1865,1870],{"type":404,"tag":487,"props":1835,"children":1836},{"style":506},[1837],{"type":410,"value":932},{"type":404,"tag":487,"props":1839,"children":1840},{"style":500},[1841],{"type":410,"value":1842}," data",{"type":404,"tag":487,"props":1844,"children":1845},{"style":565},[1846],{"type":410,"value":942},{"type":404,"tag":487,"props":1848,"children":1849},{"style":500},[1850],{"type":410,"value":1851}," expandoData",{"type":404,"tag":487,"props":1853,"children":1854},{"style":958},[1855],{"type":410,"value":1856},"[",{"type":404,"tag":487,"props":1858,"children":1859},{"style":500},[1860],{"type":410,"value":1822},{"type":404,"tag":487,"props":1862,"children":1863},{"style":958},[1864],{"type":410,"value":1856},{"type":404,"tag":487,"props":1866,"children":1867},{"style":500},[1868],{"type":410,"value":1869},"expando",{"type":404,"tag":487,"props":1871,"children":1872},{"style":958},[1873],{"type":410,"value":1874},"]]\n",{"type":404,"tag":487,"props":1876,"children":1877},{"class":489,"line":979},[1878,1883,1887,1892,1897,1901],{"type":404,"tag":487,"props":1879,"children":1880},{"style":968},[1881],{"type":410,"value":1882},"    if",{"type":404,"tag":487,"props":1884,"children":1885},{"style":958},[1886],{"type":410,"value":723},{"type":404,"tag":487,"props":1888,"children":1889},{"style":565},[1890],{"type":410,"value":1891},"!",{"type":404,"tag":487,"props":1893,"children":1894},{"style":500},[1895],{"type":410,"value":1896},"data",{"type":404,"tag":487,"props":1898,"children":1899},{"style":958},[1900],{"type":410,"value":1638},{"type":404,"tag":487,"props":1902,"children":1903},{"style":494},[1904],{"type":410,"value":1643},{"type":404,"tag":487,"props":1906,"children":1907},{"class":489,"line":1022},[1908,1913,1917],{"type":404,"tag":487,"props":1909,"children":1910},{"style":500},[1911],{"type":410,"value":1912},"        data",{"type":404,"tag":487,"props":1914,"children":1915},{"style":565},[1916],{"type":410,"value":942},{"type":404,"tag":487,"props":1918,"children":1919},{"style":494},[1920],{"type":410,"value":1751},{"type":404,"tag":487,"props":1922,"children":1923},{"class":489,"line":1062},[1924,1929],{"type":404,"tag":487,"props":1925,"children":1926},{"style":500},[1927],{"type":410,"value":1928},"        expanID",{"type":404,"tag":487,"props":1930,"children":1931},{"style":565},[1932],{"type":410,"value":1933},"++\n",{"type":404,"tag":487,"props":1935,"children":1936},{"class":489,"line":1098},[1937,1942,1946,1950,1955,1959],{"type":404,"tag":487,"props":1938,"children":1939},{"style":500},[1940],{"type":410,"value":1941},"        ownerDocument",{"type":404,"tag":487,"props":1943,"children":1944},{"style":958},[1945],{"type":410,"value":1856},{"type":404,"tag":487,"props":1947,"children":1948},{"style":500},[1949],{"type":410,"value":1869},{"type":404,"tag":487,"props":1951,"children":1952},{"style":958},[1953],{"type":410,"value":1954},"] ",{"type":404,"tag":487,"props":1956,"children":1957},{"style":565},[1958],{"type":410,"value":669},{"type":404,"tag":487,"props":1960,"children":1961},{"style":500},[1962],{"type":410,"value":1963}," expanID\n",{"type":404,"tag":487,"props":1965,"children":1966},{"class":489,"line":1107},[1967,1972,1976,1981,1985,1989],{"type":404,"tag":487,"props":1968,"children":1969},{"style":500},[1970],{"type":410,"value":1971},"        expandoData",{"type":404,"tag":487,"props":1973,"children":1974},{"style":958},[1975],{"type":410,"value":1856},{"type":404,"tag":487,"props":1977,"children":1978},{"style":500},[1979],{"type":410,"value":1980},"expanID",{"type":404,"tag":487,"props":1982,"children":1983},{"style":958},[1984],{"type":410,"value":1954},{"type":404,"tag":487,"props":1986,"children":1987},{"style":565},[1988],{"type":410,"value":669},{"type":404,"tag":487,"props":1990,"children":1991},{"style":500},[1992],{"type":410,"value":1993}," data\n",{"type":404,"tag":487,"props":1995,"children":1996},{"class":489,"line":1376},[1997],{"type":404,"tag":487,"props":1998,"children":1999},{"style":494},[2000],{"type":410,"value":1695},{"type":404,"tag":487,"props":2002,"children":2003},{"class":489,"line":1385},[2004,2008],{"type":404,"tag":487,"props":2005,"children":2006},{"style":968},[2007],{"type":410,"value":971},{"type":404,"tag":487,"props":2009,"children":2010},{"style":500},[2011],{"type":410,"value":1993},{"type":404,"tag":487,"props":2013,"children":2014},{"class":489,"line":1428},[2015],{"type":404,"tag":487,"props":2016,"children":2017},{"style":494},[2018],{"type":410,"value":2019},"  }\n",{"type":404,"tag":418,"props":2021,"children":2022},{},[2023],{"type":410,"value":2024},"如何对 document 进行 html5 的增强呢？原理体现都在 shivDocument 这个函数了，只需要增强浏览器原生的 createElement 等 API 的功能，再添加对应的元素样式就好了。",{"type":404,"tag":476,"props":2026,"children":2028},{"className":478,"code":2027,"language":480,"meta":398,"style":398},"function shivDocument(ownerDocument) {\n    // 挂载 document._html5shiv\n    var data = getExpandoData(ownerDocument)\n\n    // 增强样式\n    if (html5.shivCSS && !supportsHtml5Styles && !data.hasCSS) {\n      data.hasCSS = !!addStyleSheet(ownerDocument,\n        // corrects block display not defined in IE6/7/8/9\n        'article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}' +\n        // adds styling not present in IE6/7/8/9\n        'mark{background:#FF0;color:#000}' +\n        // hides non-rendered elements\n        'template{display:none}'\n      )\n    }\n\n    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n    // 如果当前浏览器连 document.createElement 都会报错，\n    // 那就没办法 shiv 了，只好假装一切正常...\n    if (!supportsUnknownElements) {\n      // 增强 createElement 和 createDocumentFragment\n      shivMethods(ownerDocument, data)\n    }\n    return ownerDocument\n  }\n",[2029],{"type":404,"tag":483,"props":2030,"children":2031},{"__ignoreMap":398},[2032,2060,2068,2099,2106,2114,2183,2226,2234,2256,2264,2284,2292,2308,2316,2323,2330,2338,2346,2354,2382,2390,2418,2425,2437],{"type":404,"tag":487,"props":2033,"children":2034},{"class":489,"line":490},[2035,2039,2044,2048,2052,2056],{"type":404,"tag":487,"props":2036,"children":2037},{"style":506},[2038],{"type":410,"value":509},{"type":404,"tag":487,"props":2040,"children":2041},{"style":681},[2042],{"type":410,"value":2043}," shivDocument",{"type":404,"tag":487,"props":2045,"children":2046},{"style":494},[2047],{"type":410,"value":503},{"type":404,"tag":487,"props":2049,"children":2050},{"style":516},[2051],{"type":410,"value":1822},{"type":404,"tag":487,"props":2053,"children":2054},{"style":494},[2055],{"type":410,"value":534},{"type":404,"tag":487,"props":2057,"children":2058},{"style":494},[2059],{"type":410,"value":539},{"type":404,"tag":487,"props":2061,"children":2062},{"class":489,"line":542},[2063],{"type":404,"tag":487,"props":2064,"children":2065},{"style":546},[2066],{"type":410,"value":2067},"    // 挂载 document._html5shiv\n",{"type":404,"tag":487,"props":2069,"children":2070},{"class":489,"line":552},[2071,2075,2079,2083,2087,2091,2095],{"type":404,"tag":487,"props":2072,"children":2073},{"style":506},[2074],{"type":410,"value":932},{"type":404,"tag":487,"props":2076,"children":2077},{"style":500},[2078],{"type":410,"value":1842},{"type":404,"tag":487,"props":2080,"children":2081},{"style":565},[2082],{"type":410,"value":942},{"type":404,"tag":487,"props":2084,"children":2085},{"style":681},[2086],{"type":410,"value":1813},{"type":404,"tag":487,"props":2088,"children":2089},{"style":958},[2090],{"type":410,"value":503},{"type":404,"tag":487,"props":2092,"children":2093},{"style":500},[2094],{"type":410,"value":1822},{"type":404,"tag":487,"props":2096,"children":2097},{"style":958},[2098],{"type":410,"value":706},{"type":404,"tag":487,"props":2100,"children":2101},{"class":489,"line":926},[2102],{"type":404,"tag":487,"props":2103,"children":2104},{"emptyLinePlaceholder":397},[2105],{"type":410,"value":1305},{"type":404,"tag":487,"props":2107,"children":2108},{"class":489,"line":964},[2109],{"type":404,"tag":487,"props":2110,"children":2111},{"style":546},[2112],{"type":410,"value":2113},"    // 增强样式\n",{"type":404,"tag":487,"props":2115,"children":2116},{"class":489,"line":979},[2117,2121,2125,2130,2134,2139,2144,2149,2154,2158,2162,2166,2170,2175,2179],{"type":404,"tag":487,"props":2118,"children":2119},{"style":968},[2120],{"type":410,"value":1882},{"type":404,"tag":487,"props":2122,"children":2123},{"style":958},[2124],{"type":410,"value":723},{"type":404,"tag":487,"props":2126,"children":2127},{"style":500},[2128],{"type":410,"value":2129},"html5",{"type":404,"tag":487,"props":2131,"children":2132},{"style":494},[2133],{"type":410,"value":678},{"type":404,"tag":487,"props":2135,"children":2136},{"style":500},[2137],{"type":410,"value":2138},"shivCSS",{"type":404,"tag":487,"props":2140,"children":2141},{"style":565},[2142],{"type":410,"value":2143}," &&",{"type":404,"tag":487,"props":2145,"children":2146},{"style":565},[2147],{"type":410,"value":2148}," !",{"type":404,"tag":487,"props":2150,"children":2151},{"style":500},[2152],{"type":410,"value":2153},"supportsHtml5Styles",{"type":404,"tag":487,"props":2155,"children":2156},{"style":565},[2157],{"type":410,"value":2143},{"type":404,"tag":487,"props":2159,"children":2160},{"style":565},[2161],{"type":410,"value":2148},{"type":404,"tag":487,"props":2163,"children":2164},{"style":500},[2165],{"type":410,"value":1896},{"type":404,"tag":487,"props":2167,"children":2168},{"style":494},[2169],{"type":410,"value":678},{"type":404,"tag":487,"props":2171,"children":2172},{"style":500},[2173],{"type":410,"value":2174},"hasCSS",{"type":404,"tag":487,"props":2176,"children":2177},{"style":958},[2178],{"type":410,"value":1638},{"type":404,"tag":487,"props":2180,"children":2181},{"style":494},[2182],{"type":410,"value":1643},{"type":404,"tag":487,"props":2184,"children":2185},{"class":489,"line":1022},[2186,2191,2195,2199,2203,2208,2213,2217,2221],{"type":404,"tag":487,"props":2187,"children":2188},{"style":500},[2189],{"type":410,"value":2190},"      data",{"type":404,"tag":487,"props":2192,"children":2193},{"style":494},[2194],{"type":410,"value":678},{"type":404,"tag":487,"props":2196,"children":2197},{"style":500},[2198],{"type":410,"value":2174},{"type":404,"tag":487,"props":2200,"children":2201},{"style":565},[2202],{"type":410,"value":942},{"type":404,"tag":487,"props":2204,"children":2205},{"style":565},[2206],{"type":410,"value":2207}," !!",{"type":404,"tag":487,"props":2209,"children":2210},{"style":681},[2211],{"type":410,"value":2212},"addStyleSheet",{"type":404,"tag":487,"props":2214,"children":2215},{"style":958},[2216],{"type":410,"value":503},{"type":404,"tag":487,"props":2218,"children":2219},{"style":500},[2220],{"type":410,"value":1822},{"type":404,"tag":487,"props":2222,"children":2223},{"style":494},[2224],{"type":410,"value":2225},",\n",{"type":404,"tag":487,"props":2227,"children":2228},{"class":489,"line":1062},[2229],{"type":404,"tag":487,"props":2230,"children":2231},{"style":546},[2232],{"type":410,"value":2233},"        // corrects block display not defined in IE6/7/8/9\n",{"type":404,"tag":487,"props":2235,"children":2236},{"class":489,"line":1098},[2237,2242,2247,2251],{"type":404,"tag":487,"props":2238,"children":2239},{"style":581},[2240],{"type":410,"value":2241},"        '",{"type":404,"tag":487,"props":2243,"children":2244},{"style":587},[2245],{"type":410,"value":2246},"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}",{"type":404,"tag":487,"props":2248,"children":2249},{"style":581},[2250],{"type":410,"value":693},{"type":404,"tag":487,"props":2252,"children":2253},{"style":565},[2254],{"type":410,"value":2255}," +\n",{"type":404,"tag":487,"props":2257,"children":2258},{"class":489,"line":1107},[2259],{"type":404,"tag":487,"props":2260,"children":2261},{"style":546},[2262],{"type":410,"value":2263},"        // adds styling not present in IE6/7/8/9\n",{"type":404,"tag":487,"props":2265,"children":2266},{"class":489,"line":1376},[2267,2271,2276,2280],{"type":404,"tag":487,"props":2268,"children":2269},{"style":581},[2270],{"type":410,"value":2241},{"type":404,"tag":487,"props":2272,"children":2273},{"style":587},[2274],{"type":410,"value":2275},"mark{background:#FF0;color:#000}",{"type":404,"tag":487,"props":2277,"children":2278},{"style":581},[2279],{"type":410,"value":693},{"type":404,"tag":487,"props":2281,"children":2282},{"style":565},[2283],{"type":410,"value":2255},{"type":404,"tag":487,"props":2285,"children":2286},{"class":489,"line":1385},[2287],{"type":404,"tag":487,"props":2288,"children":2289},{"style":546},[2290],{"type":410,"value":2291},"        // hides non-rendered elements\n",{"type":404,"tag":487,"props":2293,"children":2294},{"class":489,"line":1428},[2295,2299,2304],{"type":404,"tag":487,"props":2296,"children":2297},{"style":581},[2298],{"type":410,"value":2241},{"type":404,"tag":487,"props":2300,"children":2301},{"style":587},[2302],{"type":410,"value":2303},"template{display:none}",{"type":404,"tag":487,"props":2305,"children":2306},{"style":581},[2307],{"type":410,"value":854},{"type":404,"tag":487,"props":2309,"children":2310},{"class":489,"line":1461},[2311],{"type":404,"tag":487,"props":2312,"children":2313},{"style":958},[2314],{"type":410,"value":2315},"      )\n",{"type":404,"tag":487,"props":2317,"children":2318},{"class":489,"line":1474},[2319],{"type":404,"tag":487,"props":2320,"children":2321},{"style":494},[2322],{"type":410,"value":1695},{"type":404,"tag":487,"props":2324,"children":2325},{"class":489,"line":1515},[2326],{"type":404,"tag":487,"props":2327,"children":2328},{"emptyLinePlaceholder":397},[2329],{"type":410,"value":1305},{"type":404,"tag":487,"props":2331,"children":2332},{"class":489,"line":1555},[2333],{"type":404,"tag":487,"props":2334,"children":2335},{"style":546},[2336],{"type":410,"value":2337},"    // 这个 if 印证了 ##兼容性检测 那个小节提到的：\n",{"type":404,"tag":487,"props":2339,"children":2340},{"class":489,"line":1591},[2341],{"type":404,"tag":487,"props":2342,"children":2343},{"style":546},[2344],{"type":410,"value":2345},"    // 如果当前浏览器连 document.createElement 都会报错，\n",{"type":404,"tag":487,"props":2347,"children":2348},{"class":489,"line":1600},[2349],{"type":404,"tag":487,"props":2350,"children":2351},{"style":546},[2352],{"type":410,"value":2353},"    // 那就没办法 shiv 了，只好假装一切正常...\n",{"type":404,"tag":487,"props":2355,"children":2356},{"class":489,"line":1613},[2357,2361,2365,2369,2374,2378],{"type":404,"tag":487,"props":2358,"children":2359},{"style":968},[2360],{"type":410,"value":1882},{"type":404,"tag":487,"props":2362,"children":2363},{"style":958},[2364],{"type":410,"value":723},{"type":404,"tag":487,"props":2366,"children":2367},{"style":565},[2368],{"type":410,"value":1891},{"type":404,"tag":487,"props":2370,"children":2371},{"style":500},[2372],{"type":410,"value":2373},"supportsUnknownElements",{"type":404,"tag":487,"props":2375,"children":2376},{"style":958},[2377],{"type":410,"value":1638},{"type":404,"tag":487,"props":2379,"children":2380},{"style":494},[2381],{"type":410,"value":1643},{"type":404,"tag":487,"props":2383,"children":2384},{"class":489,"line":1646},[2385],{"type":404,"tag":487,"props":2386,"children":2387},{"style":546},[2388],{"type":410,"value":2389},"      // 增强 createElement 和 createDocumentFragment\n",{"type":404,"tag":487,"props":2391,"children":2392},{"class":489,"line":1655},[2393,2398,2402,2406,2410,2414],{"type":404,"tag":487,"props":2394,"children":2395},{"style":681},[2396],{"type":410,"value":2397},"      shivMethods",{"type":404,"tag":487,"props":2399,"children":2400},{"style":958},[2401],{"type":410,"value":503},{"type":404,"tag":487,"props":2403,"children":2404},{"style":500},[2405],{"type":410,"value":1822},{"type":404,"tag":487,"props":2407,"children":2408},{"style":494},[2409],{"type":410,"value":524},{"type":404,"tag":487,"props":2411,"children":2412},{"style":500},[2413],{"type":410,"value":1842},{"type":404,"tag":487,"props":2415,"children":2416},{"style":958},[2417],{"type":410,"value":706},{"type":404,"tag":487,"props":2419,"children":2420},{"class":489,"line":1673},[2421],{"type":404,"tag":487,"props":2422,"children":2423},{"style":494},[2424],{"type":410,"value":1695},{"type":404,"tag":487,"props":2426,"children":2427},{"class":489,"line":1689},[2428,2432],{"type":404,"tag":487,"props":2429,"children":2430},{"style":968},[2431],{"type":410,"value":971},{"type":404,"tag":487,"props":2433,"children":2434},{"style":500},[2435],{"type":410,"value":2436}," ownerDocument\n",{"type":404,"tag":487,"props":2438,"children":2439},{"class":489,"line":1698},[2440],{"type":404,"tag":487,"props":2441,"children":2442},{"style":494},[2443],{"type":410,"value":2019},{"type":404,"tag":418,"props":2445,"children":2446},{},[2447],{"type":410,"value":2448},"接下来，仔细康康 shivMethods 方法。shivMethods 仿制了 createElement 和 createDocumentFragment 两个 API，将其挂载到 document._html5shiv。并通过装饰器模式增强了浏览器原生的 createElement 等 API 的功能。",{"type":404,"tag":476,"props":2450,"children":2452},{"className":478,"code":2451,"language":480,"meta":398,"style":398},"function shivMethods(ownerDocument, data) {\n    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n    if (!data.cache) {\n        data.cache = {}\n        data.createElem = ownerDocument.createElement\n        data.createFrag = ownerDocument.createDocumentFragment\n        data.frag = data.createFrag()\n    }\n\n    ownerDocument.createElement = function(nodeName) {\n      // shivMethods 可看作全局的 shiv 开关\n      if (!html5.shivMethods) {\n          return data.createElem(nodeName)\n      }\n      return createElement(nodeName, ownerDocument, data)\n    }\n\n    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n    // 最终返回 data.frag 的克隆函数\n    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n    // 猜测它只能在老版本 IE 上起作用\n    ownerDocument.createDocumentFragment = Function(\n      'html5,dataFrag', \n      'return function(){' +\n        'var clone=dataFrag.cloneNode(),create=clone.createElement' +\n        'html5.shivMethods&&(' +\n            // unroll the `createElement` calls\n            getElements().join().replace(/[\\w\\-:]+/g, function(nodeName) {\n            data.createElem(nodeName)\n            data.frag.createElement(nodeName)\n            return 'create(\"' + nodeName + '\")'\n            }) +\n        ')return clone' +\n      '}'\n    )(html5, data.frag)\n  }\n",[2453],{"type":404,"tag":483,"props":2454,"children":2455},{"__ignoreMap":398},[2456,2492,2500,2536,2559,2593,2626,2662,2669,2676,2718,2726,2763,2795,2803,2844,2851,2858,2866,2874,2882,2890,2919,2945,2965,2985,3006,3015,3114,3143,3179,3227,3245,3266,3282,3315],{"type":404,"tag":487,"props":2457,"children":2458},{"class":489,"line":490},[2459,2463,2468,2472,2476,2480,2484,2488],{"type":404,"tag":487,"props":2460,"children":2461},{"style":506},[2462],{"type":410,"value":509},{"type":404,"tag":487,"props":2464,"children":2465},{"style":681},[2466],{"type":410,"value":2467}," shivMethods",{"type":404,"tag":487,"props":2469,"children":2470},{"style":494},[2471],{"type":410,"value":503},{"type":404,"tag":487,"props":2473,"children":2474},{"style":516},[2475],{"type":410,"value":1822},{"type":404,"tag":487,"props":2477,"children":2478},{"style":494},[2479],{"type":410,"value":524},{"type":404,"tag":487,"props":2481,"children":2482},{"style":516},[2483],{"type":410,"value":1842},{"type":404,"tag":487,"props":2485,"children":2486},{"style":494},[2487],{"type":410,"value":534},{"type":404,"tag":487,"props":2489,"children":2490},{"style":494},[2491],{"type":410,"value":539},{"type":404,"tag":487,"props":2493,"children":2494},{"class":489,"line":542},[2495],{"type":404,"tag":487,"props":2496,"children":2497},{"style":546},[2498],{"type":410,"value":2499},"    // 创建缓存并在 data 中挂载一些原生方法以方便操作\n",{"type":404,"tag":487,"props":2501,"children":2502},{"class":489,"line":552},[2503,2507,2511,2515,2519,2523,2528,2532],{"type":404,"tag":487,"props":2504,"children":2505},{"style":968},[2506],{"type":410,"value":1882},{"type":404,"tag":487,"props":2508,"children":2509},{"style":958},[2510],{"type":410,"value":723},{"type":404,"tag":487,"props":2512,"children":2513},{"style":565},[2514],{"type":410,"value":1891},{"type":404,"tag":487,"props":2516,"children":2517},{"style":500},[2518],{"type":410,"value":1896},{"type":404,"tag":487,"props":2520,"children":2521},{"style":494},[2522],{"type":410,"value":678},{"type":404,"tag":487,"props":2524,"children":2525},{"style":500},[2526],{"type":410,"value":2527},"cache",{"type":404,"tag":487,"props":2529,"children":2530},{"style":958},[2531],{"type":410,"value":1638},{"type":404,"tag":487,"props":2533,"children":2534},{"style":494},[2535],{"type":410,"value":1643},{"type":404,"tag":487,"props":2537,"children":2538},{"class":489,"line":926},[2539,2543,2547,2551,2555],{"type":404,"tag":487,"props":2540,"children":2541},{"style":500},[2542],{"type":410,"value":1912},{"type":404,"tag":487,"props":2544,"children":2545},{"style":494},[2546],{"type":410,"value":678},{"type":404,"tag":487,"props":2548,"children":2549},{"style":500},[2550],{"type":410,"value":2527},{"type":404,"tag":487,"props":2552,"children":2553},{"style":565},[2554],{"type":410,"value":942},{"type":404,"tag":487,"props":2556,"children":2557},{"style":494},[2558],{"type":410,"value":1751},{"type":404,"tag":487,"props":2560,"children":2561},{"class":489,"line":964},[2562,2566,2570,2575,2579,2584,2588],{"type":404,"tag":487,"props":2563,"children":2564},{"style":500},[2565],{"type":410,"value":1912},{"type":404,"tag":487,"props":2567,"children":2568},{"style":494},[2569],{"type":410,"value":678},{"type":404,"tag":487,"props":2571,"children":2572},{"style":500},[2573],{"type":410,"value":2574},"createElem",{"type":404,"tag":487,"props":2576,"children":2577},{"style":565},[2578],{"type":410,"value":942},{"type":404,"tag":487,"props":2580,"children":2581},{"style":500},[2582],{"type":410,"value":2583}," ownerDocument",{"type":404,"tag":487,"props":2585,"children":2586},{"style":494},[2587],{"type":410,"value":678},{"type":404,"tag":487,"props":2589,"children":2590},{"style":500},[2591],{"type":410,"value":2592},"createElement\n",{"type":404,"tag":487,"props":2594,"children":2595},{"class":489,"line":979},[2596,2600,2604,2609,2613,2617,2621],{"type":404,"tag":487,"props":2597,"children":2598},{"style":500},[2599],{"type":410,"value":1912},{"type":404,"tag":487,"props":2601,"children":2602},{"style":494},[2603],{"type":410,"value":678},{"type":404,"tag":487,"props":2605,"children":2606},{"style":500},[2607],{"type":410,"value":2608},"createFrag",{"type":404,"tag":487,"props":2610,"children":2611},{"style":565},[2612],{"type":410,"value":942},{"type":404,"tag":487,"props":2614,"children":2615},{"style":500},[2616],{"type":410,"value":2583},{"type":404,"tag":487,"props":2618,"children":2619},{"style":494},[2620],{"type":410,"value":678},{"type":404,"tag":487,"props":2622,"children":2623},{"style":500},[2624],{"type":410,"value":2625},"createDocumentFragment\n",{"type":404,"tag":487,"props":2627,"children":2628},{"class":489,"line":1022},[2629,2633,2637,2642,2646,2650,2654,2658],{"type":404,"tag":487,"props":2630,"children":2631},{"style":500},[2632],{"type":410,"value":1912},{"type":404,"tag":487,"props":2634,"children":2635},{"style":494},[2636],{"type":410,"value":678},{"type":404,"tag":487,"props":2638,"children":2639},{"style":500},[2640],{"type":410,"value":2641},"frag",{"type":404,"tag":487,"props":2643,"children":2644},{"style":565},[2645],{"type":410,"value":942},{"type":404,"tag":487,"props":2647,"children":2648},{"style":500},[2649],{"type":410,"value":1842},{"type":404,"tag":487,"props":2651,"children":2652},{"style":494},[2653],{"type":410,"value":678},{"type":404,"tag":487,"props":2655,"children":2656},{"style":681},[2657],{"type":410,"value":2608},{"type":404,"tag":487,"props":2659,"children":2660},{"style":958},[2661],{"type":410,"value":961},{"type":404,"tag":487,"props":2663,"children":2664},{"class":489,"line":1062},[2665],{"type":404,"tag":487,"props":2666,"children":2667},{"style":494},[2668],{"type":410,"value":1695},{"type":404,"tag":487,"props":2670,"children":2671},{"class":489,"line":1098},[2672],{"type":404,"tag":487,"props":2673,"children":2674},{"emptyLinePlaceholder":397},[2675],{"type":410,"value":1305},{"type":404,"tag":487,"props":2677,"children":2678},{"class":489,"line":1107},[2679,2684,2688,2692,2696,2701,2705,2710,2714],{"type":404,"tag":487,"props":2680,"children":2681},{"style":500},[2682],{"type":410,"value":2683},"    ownerDocument",{"type":404,"tag":487,"props":2685,"children":2686},{"style":494},[2687],{"type":410,"value":678},{"type":404,"tag":487,"props":2689,"children":2690},{"style":681},[2691],{"type":410,"value":684},{"type":404,"tag":487,"props":2693,"children":2694},{"style":565},[2695],{"type":410,"value":942},{"type":404,"tag":487,"props":2697,"children":2698},{"style":506},[2699],{"type":410,"value":2700}," function",{"type":404,"tag":487,"props":2702,"children":2703},{"style":494},[2704],{"type":410,"value":503},{"type":404,"tag":487,"props":2706,"children":2707},{"style":516},[2708],{"type":410,"value":2709},"nodeName",{"type":404,"tag":487,"props":2711,"children":2712},{"style":494},[2713],{"type":410,"value":534},{"type":404,"tag":487,"props":2715,"children":2716},{"style":494},[2717],{"type":410,"value":539},{"type":404,"tag":487,"props":2719,"children":2720},{"class":489,"line":1376},[2721],{"type":404,"tag":487,"props":2722,"children":2723},{"style":546},[2724],{"type":410,"value":2725},"      // shivMethods 可看作全局的 shiv 开关\n",{"type":404,"tag":487,"props":2727,"children":2728},{"class":489,"line":1385},[2729,2734,2738,2742,2746,2750,2755,2759],{"type":404,"tag":487,"props":2730,"children":2731},{"style":968},[2732],{"type":410,"value":2733},"      if",{"type":404,"tag":487,"props":2735,"children":2736},{"style":958},[2737],{"type":410,"value":723},{"type":404,"tag":487,"props":2739,"children":2740},{"style":565},[2741],{"type":410,"value":1891},{"type":404,"tag":487,"props":2743,"children":2744},{"style":500},[2745],{"type":410,"value":2129},{"type":404,"tag":487,"props":2747,"children":2748},{"style":494},[2749],{"type":410,"value":678},{"type":404,"tag":487,"props":2751,"children":2752},{"style":500},[2753],{"type":410,"value":2754},"shivMethods",{"type":404,"tag":487,"props":2756,"children":2757},{"style":958},[2758],{"type":410,"value":1638},{"type":404,"tag":487,"props":2760,"children":2761},{"style":494},[2762],{"type":410,"value":1643},{"type":404,"tag":487,"props":2764,"children":2765},{"class":489,"line":1428},[2766,2771,2775,2779,2783,2787,2791],{"type":404,"tag":487,"props":2767,"children":2768},{"style":968},[2769],{"type":410,"value":2770},"          return",{"type":404,"tag":487,"props":2772,"children":2773},{"style":500},[2774],{"type":410,"value":1842},{"type":404,"tag":487,"props":2776,"children":2777},{"style":494},[2778],{"type":410,"value":678},{"type":404,"tag":487,"props":2780,"children":2781},{"style":681},[2782],{"type":410,"value":2574},{"type":404,"tag":487,"props":2784,"children":2785},{"style":958},[2786],{"type":410,"value":503},{"type":404,"tag":487,"props":2788,"children":2789},{"style":500},[2790],{"type":410,"value":2709},{"type":404,"tag":487,"props":2792,"children":2793},{"style":958},[2794],{"type":410,"value":706},{"type":404,"tag":487,"props":2796,"children":2797},{"class":489,"line":1461},[2798],{"type":404,"tag":487,"props":2799,"children":2800},{"style":494},[2801],{"type":410,"value":2802},"      }\n",{"type":404,"tag":487,"props":2804,"children":2805},{"class":489,"line":1474},[2806,2811,2816,2820,2824,2828,2832,2836,2840],{"type":404,"tag":487,"props":2807,"children":2808},{"style":968},[2809],{"type":410,"value":2810},"      return",{"type":404,"tag":487,"props":2812,"children":2813},{"style":681},[2814],{"type":410,"value":2815}," createElement",{"type":404,"tag":487,"props":2817,"children":2818},{"style":958},[2819],{"type":410,"value":503},{"type":404,"tag":487,"props":2821,"children":2822},{"style":500},[2823],{"type":410,"value":2709},{"type":404,"tag":487,"props":2825,"children":2826},{"style":494},[2827],{"type":410,"value":524},{"type":404,"tag":487,"props":2829,"children":2830},{"style":500},[2831],{"type":410,"value":2583},{"type":404,"tag":487,"props":2833,"children":2834},{"style":494},[2835],{"type":410,"value":524},{"type":404,"tag":487,"props":2837,"children":2838},{"style":500},[2839],{"type":410,"value":1842},{"type":404,"tag":487,"props":2841,"children":2842},{"style":958},[2843],{"type":410,"value":706},{"type":404,"tag":487,"props":2845,"children":2846},{"class":489,"line":1515},[2847],{"type":404,"tag":487,"props":2848,"children":2849},{"style":494},[2850],{"type":410,"value":1695},{"type":404,"tag":487,"props":2852,"children":2853},{"class":489,"line":1555},[2854],{"type":404,"tag":487,"props":2855,"children":2856},{"emptyLinePlaceholder":397},[2857],{"type":410,"value":1305},{"type":404,"tag":487,"props":2859,"children":2860},{"class":489,"line":1591},[2861],{"type":404,"tag":487,"props":2862,"children":2863},{"style":546},[2864],{"type":410,"value":2865},"    // 调用该函数时，会立马创建一堆需要 shiv 的元素的实例到 data.frag 中，\n",{"type":404,"tag":487,"props":2867,"children":2868},{"class":489,"line":1600},[2869],{"type":404,"tag":487,"props":2870,"children":2871},{"style":546},[2872],{"type":410,"value":2873},"    // 最终返回 data.frag 的克隆函数\n",{"type":404,"tag":487,"props":2875,"children":2876},{"class":489,"line":1613},[2877],{"type":404,"tag":487,"props":2878,"children":2879},{"style":546},[2880],{"type":410,"value":2881},"    // PS：在我的浏览器中 documentFragment.createElement 并不是一个可调用的方法，\n",{"type":404,"tag":487,"props":2883,"children":2884},{"class":489,"line":1646},[2885],{"type":404,"tag":487,"props":2886,"children":2887},{"style":546},[2888],{"type":410,"value":2889},"    // 猜测它只能在老版本 IE 上起作用\n",{"type":404,"tag":487,"props":2891,"children":2892},{"class":489,"line":1655},[2893,2897,2901,2905,2909,2914],{"type":404,"tag":487,"props":2894,"children":2895},{"style":500},[2896],{"type":410,"value":2683},{"type":404,"tag":487,"props":2898,"children":2899},{"style":494},[2900],{"type":410,"value":678},{"type":404,"tag":487,"props":2902,"children":2903},{"style":500},[2904],{"type":410,"value":955},{"type":404,"tag":487,"props":2906,"children":2907},{"style":565},[2908],{"type":410,"value":942},{"type":404,"tag":487,"props":2910,"children":2911},{"style":681},[2912],{"type":410,"value":2913}," Function",{"type":404,"tag":487,"props":2915,"children":2916},{"style":958},[2917],{"type":410,"value":2918},"(\n",{"type":404,"tag":487,"props":2920,"children":2921},{"class":489,"line":1673},[2922,2927,2932,2936,2940],{"type":404,"tag":487,"props":2923,"children":2924},{"style":581},[2925],{"type":410,"value":2926},"      '",{"type":404,"tag":487,"props":2928,"children":2929},{"style":587},[2930],{"type":410,"value":2931},"html5,dataFrag",{"type":404,"tag":487,"props":2933,"children":2934},{"style":581},[2935],{"type":410,"value":693},{"type":404,"tag":487,"props":2937,"children":2938},{"style":494},[2939],{"type":410,"value":524},{"type":404,"tag":487,"props":2941,"children":2942},{"style":958},[2943],{"type":410,"value":2944}," \n",{"type":404,"tag":487,"props":2946,"children":2947},{"class":489,"line":1689},[2948,2952,2957,2961],{"type":404,"tag":487,"props":2949,"children":2950},{"style":581},[2951],{"type":410,"value":2926},{"type":404,"tag":487,"props":2953,"children":2954},{"style":587},[2955],{"type":410,"value":2956},"return function(){",{"type":404,"tag":487,"props":2958,"children":2959},{"style":581},[2960],{"type":410,"value":693},{"type":404,"tag":487,"props":2962,"children":2963},{"style":565},[2964],{"type":410,"value":2255},{"type":404,"tag":487,"props":2966,"children":2967},{"class":489,"line":1698},[2968,2972,2977,2981],{"type":404,"tag":487,"props":2969,"children":2970},{"style":581},[2971],{"type":410,"value":2241},{"type":404,"tag":487,"props":2973,"children":2974},{"style":587},[2975],{"type":410,"value":2976},"var clone=dataFrag.cloneNode(),create=clone.createElement",{"type":404,"tag":487,"props":2978,"children":2979},{"style":581},[2980],{"type":410,"value":693},{"type":404,"tag":487,"props":2982,"children":2983},{"style":565},[2984],{"type":410,"value":2255},{"type":404,"tag":487,"props":2986,"children":2988},{"class":489,"line":2987},26,[2989,2993,2998,3002],{"type":404,"tag":487,"props":2990,"children":2991},{"style":581},[2992],{"type":410,"value":2241},{"type":404,"tag":487,"props":2994,"children":2995},{"style":587},[2996],{"type":410,"value":2997},"html5.shivMethods&&(",{"type":404,"tag":487,"props":2999,"children":3000},{"style":581},[3001],{"type":410,"value":693},{"type":404,"tag":487,"props":3003,"children":3004},{"style":565},[3005],{"type":410,"value":2255},{"type":404,"tag":487,"props":3007,"children":3009},{"class":489,"line":3008},27,[3010],{"type":404,"tag":487,"props":3011,"children":3012},{"style":546},[3013],{"type":410,"value":3014},"            // unroll the `createElement` calls\n",{"type":404,"tag":487,"props":3016,"children":3018},{"class":489,"line":3017},28,[3019,3024,3028,3032,3037,3041,3045,3050,3054,3059,3064,3070,3075,3080,3084,3090,3094,3098,3102,3106,3110],{"type":404,"tag":487,"props":3020,"children":3021},{"style":681},[3022],{"type":410,"value":3023},"            getElements",{"type":404,"tag":487,"props":3025,"children":3026},{"style":958},[3027],{"type":410,"value":919},{"type":404,"tag":487,"props":3029,"children":3030},{"style":494},[3031],{"type":410,"value":678},{"type":404,"tag":487,"props":3033,"children":3034},{"style":681},[3035],{"type":410,"value":3036},"join",{"type":404,"tag":487,"props":3038,"children":3039},{"style":958},[3040],{"type":410,"value":919},{"type":404,"tag":487,"props":3042,"children":3043},{"style":494},[3044],{"type":410,"value":678},{"type":404,"tag":487,"props":3046,"children":3047},{"style":681},[3048],{"type":410,"value":3049},"replace",{"type":404,"tag":487,"props":3051,"children":3052},{"style":958},[3053],{"type":410,"value":503},{"type":404,"tag":487,"props":3055,"children":3056},{"style":581},[3057],{"type":410,"value":3058},"/",{"type":404,"tag":487,"props":3060,"children":3062},{"style":3061},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3063],{"type":410,"value":1856},{"type":404,"tag":487,"props":3065,"children":3067},{"style":3066},"--shiki-light:#91B859;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3068],{"type":410,"value":3069},"\\w\\-:",{"type":404,"tag":487,"props":3071,"children":3072},{"style":3061},[3073],{"type":410,"value":3074},"]",{"type":404,"tag":487,"props":3076,"children":3077},{"style":565},[3078],{"type":410,"value":3079},"+",{"type":404,"tag":487,"props":3081,"children":3082},{"style":581},[3083],{"type":410,"value":3058},{"type":404,"tag":487,"props":3085,"children":3087},{"style":3086},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3088],{"type":410,"value":3089},"g",{"type":404,"tag":487,"props":3091,"children":3092},{"style":494},[3093],{"type":410,"value":524},{"type":404,"tag":487,"props":3095,"children":3096},{"style":506},[3097],{"type":410,"value":2700},{"type":404,"tag":487,"props":3099,"children":3100},{"style":494},[3101],{"type":410,"value":503},{"type":404,"tag":487,"props":3103,"children":3104},{"style":516},[3105],{"type":410,"value":2709},{"type":404,"tag":487,"props":3107,"children":3108},{"style":494},[3109],{"type":410,"value":534},{"type":404,"tag":487,"props":3111,"children":3112},{"style":494},[3113],{"type":410,"value":539},{"type":404,"tag":487,"props":3115,"children":3117},{"class":489,"line":3116},29,[3118,3123,3127,3131,3135,3139],{"type":404,"tag":487,"props":3119,"children":3120},{"style":500},[3121],{"type":410,"value":3122},"            data",{"type":404,"tag":487,"props":3124,"children":3125},{"style":494},[3126],{"type":410,"value":678},{"type":404,"tag":487,"props":3128,"children":3129},{"style":681},[3130],{"type":410,"value":2574},{"type":404,"tag":487,"props":3132,"children":3133},{"style":958},[3134],{"type":410,"value":503},{"type":404,"tag":487,"props":3136,"children":3137},{"style":500},[3138],{"type":410,"value":2709},{"type":404,"tag":487,"props":3140,"children":3141},{"style":958},[3142],{"type":410,"value":706},{"type":404,"tag":487,"props":3144,"children":3146},{"class":489,"line":3145},30,[3147,3151,3155,3159,3163,3167,3171,3175],{"type":404,"tag":487,"props":3148,"children":3149},{"style":500},[3150],{"type":410,"value":3122},{"type":404,"tag":487,"props":3152,"children":3153},{"style":494},[3154],{"type":410,"value":678},{"type":404,"tag":487,"props":3156,"children":3157},{"style":500},[3158],{"type":410,"value":2641},{"type":404,"tag":487,"props":3160,"children":3161},{"style":494},[3162],{"type":410,"value":678},{"type":404,"tag":487,"props":3164,"children":3165},{"style":681},[3166],{"type":410,"value":684},{"type":404,"tag":487,"props":3168,"children":3169},{"style":958},[3170],{"type":410,"value":503},{"type":404,"tag":487,"props":3172,"children":3173},{"style":500},[3174],{"type":410,"value":2709},{"type":404,"tag":487,"props":3176,"children":3177},{"style":958},[3178],{"type":410,"value":706},{"type":404,"tag":487,"props":3180,"children":3182},{"class":489,"line":3181},31,[3183,3187,3191,3196,3200,3205,3210,3214,3218,3223],{"type":404,"tag":487,"props":3184,"children":3185},{"style":968},[3186],{"type":410,"value":1467},{"type":404,"tag":487,"props":3188,"children":3189},{"style":581},[3190],{"type":410,"value":844},{"type":404,"tag":487,"props":3192,"children":3193},{"style":587},[3194],{"type":410,"value":3195},"create(\"",{"type":404,"tag":487,"props":3197,"children":3198},{"style":581},[3199],{"type":410,"value":693},{"type":404,"tag":487,"props":3201,"children":3202},{"style":565},[3203],{"type":410,"value":3204}," +",{"type":404,"tag":487,"props":3206,"children":3207},{"style":500},[3208],{"type":410,"value":3209}," nodeName",{"type":404,"tag":487,"props":3211,"children":3212},{"style":565},[3213],{"type":410,"value":3204},{"type":404,"tag":487,"props":3215,"children":3216},{"style":581},[3217],{"type":410,"value":844},{"type":404,"tag":487,"props":3219,"children":3220},{"style":587},[3221],{"type":410,"value":3222},"\")",{"type":404,"tag":487,"props":3224,"children":3225},{"style":581},[3226],{"type":410,"value":854},{"type":404,"tag":487,"props":3228,"children":3230},{"class":489,"line":3229},32,[3231,3236,3240],{"type":404,"tag":487,"props":3232,"children":3233},{"style":494},[3234],{"type":410,"value":3235},"            }",{"type":404,"tag":487,"props":3237,"children":3238},{"style":958},[3239],{"type":410,"value":1638},{"type":404,"tag":487,"props":3241,"children":3242},{"style":565},[3243],{"type":410,"value":3244},"+\n",{"type":404,"tag":487,"props":3246,"children":3248},{"class":489,"line":3247},33,[3249,3253,3258,3262],{"type":404,"tag":487,"props":3250,"children":3251},{"style":581},[3252],{"type":410,"value":2241},{"type":404,"tag":487,"props":3254,"children":3255},{"style":587},[3256],{"type":410,"value":3257},")return clone",{"type":404,"tag":487,"props":3259,"children":3260},{"style":581},[3261],{"type":410,"value":693},{"type":404,"tag":487,"props":3263,"children":3264},{"style":565},[3265],{"type":410,"value":2255},{"type":404,"tag":487,"props":3267,"children":3269},{"class":489,"line":3268},34,[3270,3274,3278],{"type":404,"tag":487,"props":3271,"children":3272},{"style":581},[3273],{"type":410,"value":2926},{"type":404,"tag":487,"props":3275,"children":3276},{"style":587},[3277],{"type":410,"value":558},{"type":404,"tag":487,"props":3279,"children":3280},{"style":581},[3281],{"type":410,"value":854},{"type":404,"tag":487,"props":3283,"children":3285},{"class":489,"line":3284},35,[3286,3291,3295,3299,3303,3307,3311],{"type":404,"tag":487,"props":3287,"children":3288},{"style":958},[3289],{"type":410,"value":3290},"    )(",{"type":404,"tag":487,"props":3292,"children":3293},{"style":500},[3294],{"type":410,"value":2129},{"type":404,"tag":487,"props":3296,"children":3297},{"style":494},[3298],{"type":410,"value":524},{"type":404,"tag":487,"props":3300,"children":3301},{"style":500},[3302],{"type":410,"value":1842},{"type":404,"tag":487,"props":3304,"children":3305},{"style":494},[3306],{"type":410,"value":678},{"type":404,"tag":487,"props":3308,"children":3309},{"style":500},[3310],{"type":410,"value":2641},{"type":404,"tag":487,"props":3312,"children":3313},{"style":958},[3314],{"type":410,"value":706},{"type":404,"tag":487,"props":3316,"children":3318},{"class":489,"line":3317},36,[3319],{"type":404,"tag":487,"props":3320,"children":3321},{"style":494},[3322],{"type":410,"value":2019},{"type":404,"tag":418,"props":3324,"children":3325},{},[3326],{"type":410,"value":3327},"小插曲。我在浏览器测试时发现，若像上面这个函数一样，将 document.createDocumentFrament 先缓存，再调用，会发生报错：",{"type":404,"tag":476,"props":3329,"children":3331},{"className":478,"code":3330,"language":480,"meta":398,"style":398},"data = {}\ndata.createFrag = document.createDocumentFragment\ndata.frag = data.createFrag()\n\n// >>> Uncaught TypeError: Illegal invocation\n",[3332],{"type":404,"tag":483,"props":3333,"children":3334},{"__ignoreMap":398},[3335,3351,3383,3419,3426],{"type":404,"tag":487,"props":3336,"children":3337},{"class":489,"line":490},[3338,3343,3347],{"type":404,"tag":487,"props":3339,"children":3340},{"style":500},[3341],{"type":410,"value":3342},"data ",{"type":404,"tag":487,"props":3344,"children":3345},{"style":565},[3346],{"type":410,"value":669},{"type":404,"tag":487,"props":3348,"children":3349},{"style":494},[3350],{"type":410,"value":1751},{"type":404,"tag":487,"props":3352,"children":3353},{"class":489,"line":542},[3354,3358,3362,3367,3371,3375,3379],{"type":404,"tag":487,"props":3355,"children":3356},{"style":500},[3357],{"type":410,"value":1896},{"type":404,"tag":487,"props":3359,"children":3360},{"style":494},[3361],{"type":410,"value":678},{"type":404,"tag":487,"props":3363,"children":3364},{"style":500},[3365],{"type":410,"value":3366},"createFrag ",{"type":404,"tag":487,"props":3368,"children":3369},{"style":565},[3370],{"type":410,"value":669},{"type":404,"tag":487,"props":3372,"children":3373},{"style":500},[3374],{"type":410,"value":529},{"type":404,"tag":487,"props":3376,"children":3377},{"style":494},[3378],{"type":410,"value":678},{"type":404,"tag":487,"props":3380,"children":3381},{"style":500},[3382],{"type":410,"value":2625},{"type":404,"tag":487,"props":3384,"children":3385},{"class":489,"line":552},[3386,3390,3394,3399,3403,3407,3411,3415],{"type":404,"tag":487,"props":3387,"children":3388},{"style":500},[3389],{"type":410,"value":1896},{"type":404,"tag":487,"props":3391,"children":3392},{"style":494},[3393],{"type":410,"value":678},{"type":404,"tag":487,"props":3395,"children":3396},{"style":500},[3397],{"type":410,"value":3398},"frag ",{"type":404,"tag":487,"props":3400,"children":3401},{"style":565},[3402],{"type":410,"value":669},{"type":404,"tag":487,"props":3404,"children":3405},{"style":500},[3406],{"type":410,"value":1842},{"type":404,"tag":487,"props":3408,"children":3409},{"style":494},[3410],{"type":410,"value":678},{"type":404,"tag":487,"props":3412,"children":3413},{"style":681},[3414],{"type":410,"value":2608},{"type":404,"tag":487,"props":3416,"children":3417},{"style":500},[3418],{"type":410,"value":961},{"type":404,"tag":487,"props":3420,"children":3421},{"class":489,"line":926},[3422],{"type":404,"tag":487,"props":3423,"children":3424},{"emptyLinePlaceholder":397},[3425],{"type":410,"value":1305},{"type":404,"tag":487,"props":3427,"children":3428},{"class":489,"line":964},[3429],{"type":404,"tag":487,"props":3430,"children":3431},{"style":546},[3432],{"type":410,"value":3433},"// >>> Uncaught TypeError: Illegal invocation\n",{"type":404,"tag":418,"props":3435,"children":3436},{},[3437],{"type":410,"value":3438},"由于没有具体的报错原因，只能暂时猜测是 this 指向的锅。更改 this 指向后，再试了一次，这次没得问题。在 GitHub issues 中没有人提过这个问题，所以我只能猜测因为所有现代浏览器都支持使用原生 API 创建非标准元素，所以不会走 shivMethods 的逻辑。",{"type":404,"tag":476,"props":3440,"children":3442},{"className":478,"code":3441,"language":480,"meta":398,"style":398},"data = {}\ndata.createFrag = document.createDocumentFragment.bind(document)\ndata.frag = data.createFrag()\n\n// >>> #document-fragment\n",[3443],{"type":404,"tag":483,"props":3444,"children":3445},{"__ignoreMap":398},[3446,3461,3506,3541,3548],{"type":404,"tag":487,"props":3447,"children":3448},{"class":489,"line":490},[3449,3453,3457],{"type":404,"tag":487,"props":3450,"children":3451},{"style":500},[3452],{"type":410,"value":3342},{"type":404,"tag":487,"props":3454,"children":3455},{"style":565},[3456],{"type":410,"value":669},{"type":404,"tag":487,"props":3458,"children":3459},{"style":494},[3460],{"type":410,"value":1751},{"type":404,"tag":487,"props":3462,"children":3463},{"class":489,"line":542},[3464,3468,3472,3476,3480,3484,3488,3492,3496,3501],{"type":404,"tag":487,"props":3465,"children":3466},{"style":500},[3467],{"type":410,"value":1896},{"type":404,"tag":487,"props":3469,"children":3470},{"style":494},[3471],{"type":410,"value":678},{"type":404,"tag":487,"props":3473,"children":3474},{"style":500},[3475],{"type":410,"value":3366},{"type":404,"tag":487,"props":3477,"children":3478},{"style":565},[3479],{"type":410,"value":669},{"type":404,"tag":487,"props":3481,"children":3482},{"style":500},[3483],{"type":410,"value":529},{"type":404,"tag":487,"props":3485,"children":3486},{"style":494},[3487],{"type":410,"value":678},{"type":404,"tag":487,"props":3489,"children":3490},{"style":500},[3491],{"type":410,"value":955},{"type":404,"tag":487,"props":3493,"children":3494},{"style":494},[3495],{"type":410,"value":678},{"type":404,"tag":487,"props":3497,"children":3498},{"style":681},[3499],{"type":410,"value":3500},"bind",{"type":404,"tag":487,"props":3502,"children":3503},{"style":500},[3504],{"type":410,"value":3505},"(document)\n",{"type":404,"tag":487,"props":3507,"children":3508},{"class":489,"line":552},[3509,3513,3517,3521,3525,3529,3533,3537],{"type":404,"tag":487,"props":3510,"children":3511},{"style":500},[3512],{"type":410,"value":1896},{"type":404,"tag":487,"props":3514,"children":3515},{"style":494},[3516],{"type":410,"value":678},{"type":404,"tag":487,"props":3518,"children":3519},{"style":500},[3520],{"type":410,"value":3398},{"type":404,"tag":487,"props":3522,"children":3523},{"style":565},[3524],{"type":410,"value":669},{"type":404,"tag":487,"props":3526,"children":3527},{"style":500},[3528],{"type":410,"value":1842},{"type":404,"tag":487,"props":3530,"children":3531},{"style":494},[3532],{"type":410,"value":678},{"type":404,"tag":487,"props":3534,"children":3535},{"style":681},[3536],{"type":410,"value":2608},{"type":404,"tag":487,"props":3538,"children":3539},{"style":500},[3540],{"type":410,"value":961},{"type":404,"tag":487,"props":3542,"children":3543},{"class":489,"line":926},[3544],{"type":404,"tag":487,"props":3545,"children":3546},{"emptyLinePlaceholder":397},[3547],{"type":410,"value":1305},{"type":404,"tag":487,"props":3549,"children":3550},{"class":489,"line":964},[3551],{"type":404,"tag":487,"props":3552,"children":3553},{"style":546},[3554],{"type":410,"value":3555},"// >>> #document-fragment\n",{"type":404,"tag":418,"props":3557,"children":3558},{},[3559],{"type":410,"value":3560},"我们继续。以下代码是对 createElement 的仿制， 用于返回一个已经 shiv 过的元素。主要是用来兼容原生 document.createElement 不支持创建一个非规范的元素的情况。比方说，HTML5 标签中有 article 元素，document.createElement 不支持的话，就需要调用此仿制 API。",{"type":404,"tag":476,"props":3562,"children":3564},{"className":478,"code":3563,"language":480,"meta":398,"style":398},"function createElement(nodeName, ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createElement(nodeName)\n    }\n    if (!data) {\n        data = getExpandoData(ownerDocument)\n    }\n    var node\n\n    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n    if (data.cache[nodeName]) {\n        node = data.cache[nodeName].cloneNode()\n    } else \n    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n    // 则创建一个新元素并存到缓存中\n    if (saveClones.test(nodeName)) {\n        node = (data.cache[nodeName] = data.createElem(nodeName)).cloneNode()\n    } else \n    // 如果是不能被克隆的对象，那就直接创建吧...\n    {\n        node = data.createElem(nodeName)\n    }\n\n    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n    // Avoid adding some elements to fragments in IE \u003C 9 because\n    // * Attributes like `name` or `type` cannot be set/changed once an element\n    //   is inserted into a document/fragment\n    // * Link elements with `src` attributes that are inaccessible, as with\n    //   a 403 response, will cause the tab/window to crash\n    // * Script elements appended to fragments will execute when their `src`\n    //   or `text` property is set\n    return node.canHaveChildren && !reSkip.test(nodeName) && !node.tagUrn \n        ? data.frag.appendChild(node) \n        : node\n  }\n",[3565],{"type":404,"tag":483,"props":3566,"children":3567},{"__ignoreMap":398},[3568,3608,3631,3663,3670,3697,3724,3731,3743,3750,3758,3798,3846,3862,3870,3878,3920,4000,4015,4023,4031,4066,4073,4080,4088,4096,4104,4112,4120,4128,4136,4144,4225,4267,4279],{"type":404,"tag":487,"props":3569,"children":3570},{"class":489,"line":490},[3571,3575,3579,3583,3587,3591,3595,3599,3603],{"type":404,"tag":487,"props":3572,"children":3573},{"style":506},[3574],{"type":410,"value":509},{"type":404,"tag":487,"props":3576,"children":3577},{"style":681},[3578],{"type":410,"value":2815},{"type":404,"tag":487,"props":3580,"children":3581},{"style":494},[3582],{"type":410,"value":503},{"type":404,"tag":487,"props":3584,"children":3585},{"style":516},[3586],{"type":410,"value":2709},{"type":404,"tag":487,"props":3588,"children":3589},{"style":494},[3590],{"type":410,"value":524},{"type":404,"tag":487,"props":3592,"children":3593},{"style":516},[3594],{"type":410,"value":2583},{"type":404,"tag":487,"props":3596,"children":3597},{"style":494},[3598],{"type":410,"value":524},{"type":404,"tag":487,"props":3600,"children":3601},{"style":516},[3602],{"type":410,"value":1842},{"type":404,"tag":487,"props":3604,"children":3605},{"style":494},[3606],{"type":410,"value":3607},"){\n",{"type":404,"tag":487,"props":3609,"children":3610},{"class":489,"line":542},[3611,3615,3619,3623,3627],{"type":404,"tag":487,"props":3612,"children":3613},{"style":968},[3614],{"type":410,"value":1882},{"type":404,"tag":487,"props":3616,"children":3617},{"style":958},[3618],{"type":410,"value":503},{"type":404,"tag":487,"props":3620,"children":3621},{"style":500},[3622],{"type":410,"value":2373},{"type":404,"tag":487,"props":3624,"children":3625},{"style":958},[3626],{"type":410,"value":534},{"type":404,"tag":487,"props":3628,"children":3629},{"style":494},[3630],{"type":410,"value":1643},{"type":404,"tag":487,"props":3632,"children":3633},{"class":489,"line":552},[3634,3639,3643,3647,3651,3655,3659],{"type":404,"tag":487,"props":3635,"children":3636},{"style":968},[3637],{"type":410,"value":3638},"        return",{"type":404,"tag":487,"props":3640,"children":3641},{"style":500},[3642],{"type":410,"value":2583},{"type":404,"tag":487,"props":3644,"children":3645},{"style":494},[3646],{"type":410,"value":678},{"type":404,"tag":487,"props":3648,"children":3649},{"style":681},[3650],{"type":410,"value":684},{"type":404,"tag":487,"props":3652,"children":3653},{"style":958},[3654],{"type":410,"value":503},{"type":404,"tag":487,"props":3656,"children":3657},{"style":500},[3658],{"type":410,"value":2709},{"type":404,"tag":487,"props":3660,"children":3661},{"style":958},[3662],{"type":410,"value":706},{"type":404,"tag":487,"props":3664,"children":3665},{"class":489,"line":926},[3666],{"type":404,"tag":487,"props":3667,"children":3668},{"style":494},[3669],{"type":410,"value":1695},{"type":404,"tag":487,"props":3671,"children":3672},{"class":489,"line":964},[3673,3677,3681,3685,3689,3693],{"type":404,"tag":487,"props":3674,"children":3675},{"style":968},[3676],{"type":410,"value":1882},{"type":404,"tag":487,"props":3678,"children":3679},{"style":958},[3680],{"type":410,"value":723},{"type":404,"tag":487,"props":3682,"children":3683},{"style":565},[3684],{"type":410,"value":1891},{"type":404,"tag":487,"props":3686,"children":3687},{"style":500},[3688],{"type":410,"value":1896},{"type":404,"tag":487,"props":3690,"children":3691},{"style":958},[3692],{"type":410,"value":1638},{"type":404,"tag":487,"props":3694,"children":3695},{"style":494},[3696],{"type":410,"value":1643},{"type":404,"tag":487,"props":3698,"children":3699},{"class":489,"line":979},[3700,3704,3708,3712,3716,3720],{"type":404,"tag":487,"props":3701,"children":3702},{"style":500},[3703],{"type":410,"value":1912},{"type":404,"tag":487,"props":3705,"children":3706},{"style":565},[3707],{"type":410,"value":942},{"type":404,"tag":487,"props":3709,"children":3710},{"style":681},[3711],{"type":410,"value":1813},{"type":404,"tag":487,"props":3713,"children":3714},{"style":958},[3715],{"type":410,"value":503},{"type":404,"tag":487,"props":3717,"children":3718},{"style":500},[3719],{"type":410,"value":1822},{"type":404,"tag":487,"props":3721,"children":3722},{"style":958},[3723],{"type":410,"value":706},{"type":404,"tag":487,"props":3725,"children":3726},{"class":489,"line":1022},[3727],{"type":404,"tag":487,"props":3728,"children":3729},{"style":494},[3730],{"type":410,"value":1695},{"type":404,"tag":487,"props":3732,"children":3733},{"class":489,"line":1062},[3734,3738],{"type":404,"tag":487,"props":3735,"children":3736},{"style":506},[3737],{"type":410,"value":932},{"type":404,"tag":487,"props":3739,"children":3740},{"style":500},[3741],{"type":410,"value":3742}," node\n",{"type":404,"tag":487,"props":3744,"children":3745},{"class":489,"line":1098},[3746],{"type":404,"tag":487,"props":3747,"children":3748},{"emptyLinePlaceholder":397},[3749],{"type":410,"value":1305},{"type":404,"tag":487,"props":3751,"children":3752},{"class":489,"line":1107},[3753],{"type":404,"tag":487,"props":3754,"children":3755},{"style":546},[3756],{"type":410,"value":3757},"    // 如果缓存中有，则从缓存中的这个元素克隆出一个新元素\n",{"type":404,"tag":487,"props":3759,"children":3760},{"class":489,"line":1376},[3761,3765,3769,3773,3777,3781,3785,3789,3794],{"type":404,"tag":487,"props":3762,"children":3763},{"style":968},[3764],{"type":410,"value":1882},{"type":404,"tag":487,"props":3766,"children":3767},{"style":958},[3768],{"type":410,"value":723},{"type":404,"tag":487,"props":3770,"children":3771},{"style":500},[3772],{"type":410,"value":1896},{"type":404,"tag":487,"props":3774,"children":3775},{"style":494},[3776],{"type":410,"value":678},{"type":404,"tag":487,"props":3778,"children":3779},{"style":500},[3780],{"type":410,"value":2527},{"type":404,"tag":487,"props":3782,"children":3783},{"style":958},[3784],{"type":410,"value":1856},{"type":404,"tag":487,"props":3786,"children":3787},{"style":500},[3788],{"type":410,"value":2709},{"type":404,"tag":487,"props":3790,"children":3791},{"style":958},[3792],{"type":410,"value":3793},"]) ",{"type":404,"tag":487,"props":3795,"children":3796},{"style":494},[3797],{"type":410,"value":1643},{"type":404,"tag":487,"props":3799,"children":3800},{"class":489,"line":1385},[3801,3806,3810,3814,3818,3822,3826,3830,3834,3838,3842],{"type":404,"tag":487,"props":3802,"children":3803},{"style":500},[3804],{"type":410,"value":3805},"        node",{"type":404,"tag":487,"props":3807,"children":3808},{"style":565},[3809],{"type":410,"value":942},{"type":404,"tag":487,"props":3811,"children":3812},{"style":500},[3813],{"type":410,"value":1842},{"type":404,"tag":487,"props":3815,"children":3816},{"style":494},[3817],{"type":410,"value":678},{"type":404,"tag":487,"props":3819,"children":3820},{"style":500},[3821],{"type":410,"value":2527},{"type":404,"tag":487,"props":3823,"children":3824},{"style":958},[3825],{"type":410,"value":1856},{"type":404,"tag":487,"props":3827,"children":3828},{"style":500},[3829],{"type":410,"value":2709},{"type":404,"tag":487,"props":3831,"children":3832},{"style":958},[3833],{"type":410,"value":3074},{"type":404,"tag":487,"props":3835,"children":3836},{"style":494},[3837],{"type":410,"value":678},{"type":404,"tag":487,"props":3839,"children":3840},{"style":681},[3841],{"type":410,"value":998},{"type":404,"tag":487,"props":3843,"children":3844},{"style":958},[3845],{"type":410,"value":961},{"type":404,"tag":487,"props":3847,"children":3848},{"class":489,"line":1428},[3849,3853,3858],{"type":404,"tag":487,"props":3850,"children":3851},{"style":494},[3852],{"type":410,"value":1619},{"type":404,"tag":487,"props":3854,"children":3855},{"style":968},[3856],{"type":410,"value":3857}," else",{"type":404,"tag":487,"props":3859,"children":3860},{"style":958},[3861],{"type":410,"value":2944},{"type":404,"tag":487,"props":3863,"children":3864},{"class":489,"line":1461},[3865],{"type":404,"tag":487,"props":3866,"children":3867},{"style":546},[3868],{"type":410,"value":3869},"    // 如果缓存中没有，同时此元素可以被克隆（IE：不是所有元素都能被拷贝），\n",{"type":404,"tag":487,"props":3871,"children":3872},{"class":489,"line":1474},[3873],{"type":404,"tag":487,"props":3874,"children":3875},{"style":546},[3876],{"type":410,"value":3877},"    // 则创建一个新元素并存到缓存中\n",{"type":404,"tag":487,"props":3879,"children":3880},{"class":489,"line":1515},[3881,3885,3889,3894,3898,3903,3907,3911,3916],{"type":404,"tag":487,"props":3882,"children":3883},{"style":968},[3884],{"type":410,"value":1882},{"type":404,"tag":487,"props":3886,"children":3887},{"style":958},[3888],{"type":410,"value":723},{"type":404,"tag":487,"props":3890,"children":3891},{"style":500},[3892],{"type":410,"value":3893},"saveClones",{"type":404,"tag":487,"props":3895,"children":3896},{"style":494},[3897],{"type":410,"value":678},{"type":404,"tag":487,"props":3899,"children":3900},{"style":681},[3901],{"type":410,"value":3902},"test",{"type":404,"tag":487,"props":3904,"children":3905},{"style":958},[3906],{"type":410,"value":503},{"type":404,"tag":487,"props":3908,"children":3909},{"style":500},[3910],{"type":410,"value":2709},{"type":404,"tag":487,"props":3912,"children":3913},{"style":958},[3914],{"type":410,"value":3915},")) ",{"type":404,"tag":487,"props":3917,"children":3918},{"style":494},[3919],{"type":410,"value":1643},{"type":404,"tag":487,"props":3921,"children":3922},{"class":489,"line":1555},[3923,3927,3931,3935,3939,3943,3947,3951,3955,3959,3963,3967,3971,3975,3979,3983,3988,3992,3996],{"type":404,"tag":487,"props":3924,"children":3925},{"style":500},[3926],{"type":410,"value":3805},{"type":404,"tag":487,"props":3928,"children":3929},{"style":565},[3930],{"type":410,"value":942},{"type":404,"tag":487,"props":3932,"children":3933},{"style":958},[3934],{"type":410,"value":723},{"type":404,"tag":487,"props":3936,"children":3937},{"style":500},[3938],{"type":410,"value":1896},{"type":404,"tag":487,"props":3940,"children":3941},{"style":494},[3942],{"type":410,"value":678},{"type":404,"tag":487,"props":3944,"children":3945},{"style":500},[3946],{"type":410,"value":2527},{"type":404,"tag":487,"props":3948,"children":3949},{"style":958},[3950],{"type":410,"value":1856},{"type":404,"tag":487,"props":3952,"children":3953},{"style":500},[3954],{"type":410,"value":2709},{"type":404,"tag":487,"props":3956,"children":3957},{"style":958},[3958],{"type":410,"value":1954},{"type":404,"tag":487,"props":3960,"children":3961},{"style":565},[3962],{"type":410,"value":669},{"type":404,"tag":487,"props":3964,"children":3965},{"style":500},[3966],{"type":410,"value":1842},{"type":404,"tag":487,"props":3968,"children":3969},{"style":494},[3970],{"type":410,"value":678},{"type":404,"tag":487,"props":3972,"children":3973},{"style":681},[3974],{"type":410,"value":2574},{"type":404,"tag":487,"props":3976,"children":3977},{"style":958},[3978],{"type":410,"value":503},{"type":404,"tag":487,"props":3980,"children":3981},{"style":500},[3982],{"type":410,"value":2709},{"type":404,"tag":487,"props":3984,"children":3985},{"style":958},[3986],{"type":410,"value":3987},"))",{"type":404,"tag":487,"props":3989,"children":3990},{"style":494},[3991],{"type":410,"value":678},{"type":404,"tag":487,"props":3993,"children":3994},{"style":681},[3995],{"type":410,"value":998},{"type":404,"tag":487,"props":3997,"children":3998},{"style":958},[3999],{"type":410,"value":961},{"type":404,"tag":487,"props":4001,"children":4002},{"class":489,"line":1591},[4003,4007,4011],{"type":404,"tag":487,"props":4004,"children":4005},{"style":494},[4006],{"type":410,"value":1619},{"type":404,"tag":487,"props":4008,"children":4009},{"style":968},[4010],{"type":410,"value":3857},{"type":404,"tag":487,"props":4012,"children":4013},{"style":958},[4014],{"type":410,"value":2944},{"type":404,"tag":487,"props":4016,"children":4017},{"class":489,"line":1600},[4018],{"type":404,"tag":487,"props":4019,"children":4020},{"style":546},[4021],{"type":410,"value":4022},"    // 如果是不能被克隆的对象，那就直接创建吧...\n",{"type":404,"tag":487,"props":4024,"children":4025},{"class":489,"line":1613},[4026],{"type":404,"tag":487,"props":4027,"children":4028},{"style":494},[4029],{"type":410,"value":4030},"    {\n",{"type":404,"tag":487,"props":4032,"children":4033},{"class":489,"line":1646},[4034,4038,4042,4046,4050,4054,4058,4062],{"type":404,"tag":487,"props":4035,"children":4036},{"style":500},[4037],{"type":410,"value":3805},{"type":404,"tag":487,"props":4039,"children":4040},{"style":565},[4041],{"type":410,"value":942},{"type":404,"tag":487,"props":4043,"children":4044},{"style":500},[4045],{"type":410,"value":1842},{"type":404,"tag":487,"props":4047,"children":4048},{"style":494},[4049],{"type":410,"value":678},{"type":404,"tag":487,"props":4051,"children":4052},{"style":681},[4053],{"type":410,"value":2574},{"type":404,"tag":487,"props":4055,"children":4056},{"style":958},[4057],{"type":410,"value":503},{"type":404,"tag":487,"props":4059,"children":4060},{"style":500},[4061],{"type":410,"value":2709},{"type":404,"tag":487,"props":4063,"children":4064},{"style":958},[4065],{"type":410,"value":706},{"type":404,"tag":487,"props":4067,"children":4068},{"class":489,"line":1655},[4069],{"type":404,"tag":487,"props":4070,"children":4071},{"style":494},[4072],{"type":410,"value":1695},{"type":404,"tag":487,"props":4074,"children":4075},{"class":489,"line":1673},[4076],{"type":404,"tag":487,"props":4077,"children":4078},{"emptyLinePlaceholder":397},[4079],{"type":410,"value":1305},{"type":404,"tag":487,"props":4081,"children":4082},{"class":489,"line":1689},[4083],{"type":404,"tag":487,"props":4084,"children":4085},{"style":546},[4086],{"type":410,"value":4087},"    // data.frag 对象缓存了新元素。同时这里做了一些兼容性处理。\n",{"type":404,"tag":487,"props":4089,"children":4090},{"class":489,"line":1698},[4091],{"type":404,"tag":487,"props":4092,"children":4093},{"style":546},[4094],{"type":410,"value":4095},"    // Avoid adding some elements to fragments in IE \u003C 9 because\n",{"type":404,"tag":487,"props":4097,"children":4098},{"class":489,"line":2987},[4099],{"type":404,"tag":487,"props":4100,"children":4101},{"style":546},[4102],{"type":410,"value":4103},"    // * Attributes like `name` or `type` cannot be set/changed once an element\n",{"type":404,"tag":487,"props":4105,"children":4106},{"class":489,"line":3008},[4107],{"type":404,"tag":487,"props":4108,"children":4109},{"style":546},[4110],{"type":410,"value":4111},"    //   is inserted into a document/fragment\n",{"type":404,"tag":487,"props":4113,"children":4114},{"class":489,"line":3017},[4115],{"type":404,"tag":487,"props":4116,"children":4117},{"style":546},[4118],{"type":410,"value":4119},"    // * Link elements with `src` attributes that are inaccessible, as with\n",{"type":404,"tag":487,"props":4121,"children":4122},{"class":489,"line":3116},[4123],{"type":404,"tag":487,"props":4124,"children":4125},{"style":546},[4126],{"type":410,"value":4127},"    //   a 403 response, will cause the tab/window to crash\n",{"type":404,"tag":487,"props":4129,"children":4130},{"class":489,"line":3145},[4131],{"type":404,"tag":487,"props":4132,"children":4133},{"style":546},[4134],{"type":410,"value":4135},"    // * Script elements appended to fragments will execute when their `src`\n",{"type":404,"tag":487,"props":4137,"children":4138},{"class":489,"line":3181},[4139],{"type":404,"tag":487,"props":4140,"children":4141},{"style":546},[4142],{"type":410,"value":4143},"    //   or `text` property is set\n",{"type":404,"tag":487,"props":4145,"children":4146},{"class":489,"line":3229},[4147,4151,4156,4160,4165,4169,4173,4178,4182,4186,4190,4194,4198,4203,4207,4212,4216,4221],{"type":404,"tag":487,"props":4148,"children":4149},{"style":968},[4150],{"type":410,"value":971},{"type":404,"tag":487,"props":4152,"children":4153},{"style":500},[4154],{"type":410,"value":4155}," node",{"type":404,"tag":487,"props":4157,"children":4158},{"style":494},[4159],{"type":410,"value":678},{"type":404,"tag":487,"props":4161,"children":4162},{"style":500},[4163],{"type":410,"value":4164},"canHaveChildren",{"type":404,"tag":487,"props":4166,"children":4167},{"style":565},[4168],{"type":410,"value":2143},{"type":404,"tag":487,"props":4170,"children":4171},{"style":565},[4172],{"type":410,"value":2148},{"type":404,"tag":487,"props":4174,"children":4175},{"style":500},[4176],{"type":410,"value":4177},"reSkip",{"type":404,"tag":487,"props":4179,"children":4180},{"style":494},[4181],{"type":410,"value":678},{"type":404,"tag":487,"props":4183,"children":4184},{"style":681},[4185],{"type":410,"value":3902},{"type":404,"tag":487,"props":4187,"children":4188},{"style":958},[4189],{"type":410,"value":503},{"type":404,"tag":487,"props":4191,"children":4192},{"style":500},[4193],{"type":410,"value":2709},{"type":404,"tag":487,"props":4195,"children":4196},{"style":958},[4197],{"type":410,"value":1638},{"type":404,"tag":487,"props":4199,"children":4200},{"style":565},[4201],{"type":410,"value":4202},"&&",{"type":404,"tag":487,"props":4204,"children":4205},{"style":565},[4206],{"type":410,"value":2148},{"type":404,"tag":487,"props":4208,"children":4209},{"style":500},[4210],{"type":410,"value":4211},"node",{"type":404,"tag":487,"props":4213,"children":4214},{"style":494},[4215],{"type":410,"value":678},{"type":404,"tag":487,"props":4217,"children":4218},{"style":500},[4219],{"type":410,"value":4220},"tagUrn",{"type":404,"tag":487,"props":4222,"children":4223},{"style":958},[4224],{"type":410,"value":2944},{"type":404,"tag":487,"props":4226,"children":4227},{"class":489,"line":3247},[4228,4233,4237,4241,4245,4249,4254,4258,4262],{"type":404,"tag":487,"props":4229,"children":4230},{"style":565},[4231],{"type":410,"value":4232},"        ?",{"type":404,"tag":487,"props":4234,"children":4235},{"style":500},[4236],{"type":410,"value":1842},{"type":404,"tag":487,"props":4238,"children":4239},{"style":494},[4240],{"type":410,"value":678},{"type":404,"tag":487,"props":4242,"children":4243},{"style":500},[4244],{"type":410,"value":2641},{"type":404,"tag":487,"props":4246,"children":4247},{"style":494},[4248],{"type":410,"value":678},{"type":404,"tag":487,"props":4250,"children":4251},{"style":681},[4252],{"type":410,"value":4253},"appendChild",{"type":404,"tag":487,"props":4255,"children":4256},{"style":958},[4257],{"type":410,"value":503},{"type":404,"tag":487,"props":4259,"children":4260},{"style":500},[4261],{"type":410,"value":4211},{"type":404,"tag":487,"props":4263,"children":4264},{"style":958},[4265],{"type":410,"value":4266},") \n",{"type":404,"tag":487,"props":4268,"children":4269},{"class":489,"line":3268},[4270,4275],{"type":404,"tag":487,"props":4271,"children":4272},{"style":565},[4273],{"type":410,"value":4274},"        :",{"type":404,"tag":487,"props":4276,"children":4277},{"style":500},[4278],{"type":410,"value":3742},{"type":404,"tag":487,"props":4280,"children":4281},{"class":489,"line":3284},[4282],{"type":404,"tag":487,"props":4283,"children":4284},{"style":494},[4285],{"type":410,"value":2019},{"type":404,"tag":418,"props":4287,"children":4288},{},[4289],{"type":410,"value":4290},"和 createElement 类似，createDocumentFragment 也需要仿制。",{"type":404,"tag":476,"props":4292,"children":4294},{"className":478,"code":4293,"language":480,"meta":398,"style":398},"function createDocumentFragment(ownerDocument, data){\n    if(supportsUnknownElements){\n        return ownerDocument.createDocumentFragment()\n    }\n    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n    data = data || getExpandoData(ownerDocument)\n    var clone = data.frag.cloneNode(),\n        i = 0,\n        elems = getElements(),\n        l = elems.length\n    for(;i\u003Cl;i++){\n        // 返回的 documentFragment 包含了所有 shived 元素\n        clone.createElement(elems[i])\n    }\n    return clone\n  }\n",[4295],{"type":404,"tag":483,"props":4296,"children":4297},{"__ignoreMap":398},[4298,4330,4353,4376,4383,4391,4427,4471,4492,4517,4543,4595,4603,4641,4648,4660],{"type":404,"tag":487,"props":4299,"children":4300},{"class":489,"line":490},[4301,4305,4310,4314,4318,4322,4326],{"type":404,"tag":487,"props":4302,"children":4303},{"style":506},[4304],{"type":410,"value":509},{"type":404,"tag":487,"props":4306,"children":4307},{"style":681},[4308],{"type":410,"value":4309}," createDocumentFragment",{"type":404,"tag":487,"props":4311,"children":4312},{"style":494},[4313],{"type":410,"value":503},{"type":404,"tag":487,"props":4315,"children":4316},{"style":516},[4317],{"type":410,"value":1822},{"type":404,"tag":487,"props":4319,"children":4320},{"style":494},[4321],{"type":410,"value":524},{"type":404,"tag":487,"props":4323,"children":4324},{"style":516},[4325],{"type":410,"value":1842},{"type":404,"tag":487,"props":4327,"children":4328},{"style":494},[4329],{"type":410,"value":3607},{"type":404,"tag":487,"props":4331,"children":4332},{"class":489,"line":542},[4333,4337,4341,4345,4349],{"type":404,"tag":487,"props":4334,"children":4335},{"style":968},[4336],{"type":410,"value":1882},{"type":404,"tag":487,"props":4338,"children":4339},{"style":958},[4340],{"type":410,"value":503},{"type":404,"tag":487,"props":4342,"children":4343},{"style":500},[4344],{"type":410,"value":2373},{"type":404,"tag":487,"props":4346,"children":4347},{"style":958},[4348],{"type":410,"value":534},{"type":404,"tag":487,"props":4350,"children":4351},{"style":494},[4352],{"type":410,"value":1643},{"type":404,"tag":487,"props":4354,"children":4355},{"class":489,"line":552},[4356,4360,4364,4368,4372],{"type":404,"tag":487,"props":4357,"children":4358},{"style":968},[4359],{"type":410,"value":3638},{"type":404,"tag":487,"props":4361,"children":4362},{"style":500},[4363],{"type":410,"value":2583},{"type":404,"tag":487,"props":4365,"children":4366},{"style":494},[4367],{"type":410,"value":678},{"type":404,"tag":487,"props":4369,"children":4370},{"style":681},[4371],{"type":410,"value":955},{"type":404,"tag":487,"props":4373,"children":4374},{"style":958},[4375],{"type":410,"value":961},{"type":404,"tag":487,"props":4377,"children":4378},{"class":489,"line":926},[4379],{"type":404,"tag":487,"props":4380,"children":4381},{"style":494},[4382],{"type":410,"value":1695},{"type":404,"tag":487,"props":4384,"children":4385},{"class":489,"line":964},[4386],{"type":404,"tag":487,"props":4387,"children":4388},{"style":546},[4389],{"type":410,"value":4390},"    // 吐槽下，这个赋值语句风格和 createElement 函数里的不一致...\n",{"type":404,"tag":487,"props":4392,"children":4393},{"class":489,"line":979},[4394,4399,4403,4407,4411,4415,4419,4423],{"type":404,"tag":487,"props":4395,"children":4396},{"style":500},[4397],{"type":410,"value":4398},"    data",{"type":404,"tag":487,"props":4400,"children":4401},{"style":565},[4402],{"type":410,"value":942},{"type":404,"tag":487,"props":4404,"children":4405},{"style":500},[4406],{"type":410,"value":1842},{"type":404,"tag":487,"props":4408,"children":4409},{"style":565},[4410],{"type":410,"value":906},{"type":404,"tag":487,"props":4412,"children":4413},{"style":681},[4414],{"type":410,"value":1813},{"type":404,"tag":487,"props":4416,"children":4417},{"style":958},[4418],{"type":410,"value":503},{"type":404,"tag":487,"props":4420,"children":4421},{"style":500},[4422],{"type":410,"value":1822},{"type":404,"tag":487,"props":4424,"children":4425},{"style":958},[4426],{"type":410,"value":706},{"type":404,"tag":487,"props":4428,"children":4429},{"class":489,"line":1022},[4430,4434,4439,4443,4447,4451,4455,4459,4463,4467],{"type":404,"tag":487,"props":4431,"children":4432},{"style":506},[4433],{"type":410,"value":932},{"type":404,"tag":487,"props":4435,"children":4436},{"style":500},[4437],{"type":410,"value":4438}," clone",{"type":404,"tag":487,"props":4440,"children":4441},{"style":565},[4442],{"type":410,"value":942},{"type":404,"tag":487,"props":4444,"children":4445},{"style":500},[4446],{"type":410,"value":1842},{"type":404,"tag":487,"props":4448,"children":4449},{"style":494},[4450],{"type":410,"value":678},{"type":404,"tag":487,"props":4452,"children":4453},{"style":500},[4454],{"type":410,"value":2641},{"type":404,"tag":487,"props":4456,"children":4457},{"style":494},[4458],{"type":410,"value":678},{"type":404,"tag":487,"props":4460,"children":4461},{"style":681},[4462],{"type":410,"value":998},{"type":404,"tag":487,"props":4464,"children":4465},{"style":958},[4466],{"type":410,"value":919},{"type":404,"tag":487,"props":4468,"children":4469},{"style":494},[4470],{"type":410,"value":2225},{"type":404,"tag":487,"props":4472,"children":4473},{"class":489,"line":1062},[4474,4479,4483,4488],{"type":404,"tag":487,"props":4475,"children":4476},{"style":500},[4477],{"type":410,"value":4478},"        i",{"type":404,"tag":487,"props":4480,"children":4481},{"style":565},[4482],{"type":410,"value":942},{"type":404,"tag":487,"props":4484,"children":4485},{"style":898},[4486],{"type":410,"value":4487}," 0",{"type":404,"tag":487,"props":4489,"children":4490},{"style":494},[4491],{"type":410,"value":2225},{"type":404,"tag":487,"props":4493,"children":4494},{"class":489,"line":1098},[4495,4500,4504,4509,4513],{"type":404,"tag":487,"props":4496,"children":4497},{"style":500},[4498],{"type":410,"value":4499},"        elems",{"type":404,"tag":487,"props":4501,"children":4502},{"style":565},[4503],{"type":410,"value":942},{"type":404,"tag":487,"props":4505,"children":4506},{"style":681},[4507],{"type":410,"value":4508}," getElements",{"type":404,"tag":487,"props":4510,"children":4511},{"style":958},[4512],{"type":410,"value":919},{"type":404,"tag":487,"props":4514,"children":4515},{"style":494},[4516],{"type":410,"value":2225},{"type":404,"tag":487,"props":4518,"children":4519},{"class":489,"line":1107},[4520,4525,4529,4534,4538],{"type":404,"tag":487,"props":4521,"children":4522},{"style":500},[4523],{"type":410,"value":4524},"        l",{"type":404,"tag":487,"props":4526,"children":4527},{"style":565},[4528],{"type":410,"value":942},{"type":404,"tag":487,"props":4530,"children":4531},{"style":500},[4532],{"type":410,"value":4533}," elems",{"type":404,"tag":487,"props":4535,"children":4536},{"style":494},[4537],{"type":410,"value":678},{"type":404,"tag":487,"props":4539,"children":4540},{"style":887},[4541],{"type":410,"value":4542},"length\n",{"type":404,"tag":487,"props":4544,"children":4545},{"class":489,"line":1376},[4546,4551,4555,4559,4564,4569,4574,4578,4582,4587,4591],{"type":404,"tag":487,"props":4547,"children":4548},{"style":968},[4549],{"type":410,"value":4550},"    for",{"type":404,"tag":487,"props":4552,"children":4553},{"style":958},[4554],{"type":410,"value":503},{"type":404,"tag":487,"props":4556,"children":4557},{"style":494},[4558],{"type":410,"value":497},{"type":404,"tag":487,"props":4560,"children":4561},{"style":500},[4562],{"type":410,"value":4563},"i",{"type":404,"tag":487,"props":4565,"children":4566},{"style":565},[4567],{"type":410,"value":4568},"\u003C",{"type":404,"tag":487,"props":4570,"children":4571},{"style":500},[4572],{"type":410,"value":4573},"l",{"type":404,"tag":487,"props":4575,"children":4576},{"style":494},[4577],{"type":410,"value":497},{"type":404,"tag":487,"props":4579,"children":4580},{"style":500},[4581],{"type":410,"value":4563},{"type":404,"tag":487,"props":4583,"children":4584},{"style":565},[4585],{"type":410,"value":4586},"++",{"type":404,"tag":487,"props":4588,"children":4589},{"style":958},[4590],{"type":410,"value":534},{"type":404,"tag":487,"props":4592,"children":4593},{"style":494},[4594],{"type":410,"value":1643},{"type":404,"tag":487,"props":4596,"children":4597},{"class":489,"line":1385},[4598],{"type":404,"tag":487,"props":4599,"children":4600},{"style":546},[4601],{"type":410,"value":4602},"        // 返回的 documentFragment 包含了所有 shived 元素\n",{"type":404,"tag":487,"props":4604,"children":4605},{"class":489,"line":1428},[4606,4611,4615,4619,4623,4628,4632,4636],{"type":404,"tag":487,"props":4607,"children":4608},{"style":500},[4609],{"type":410,"value":4610},"        clone",{"type":404,"tag":487,"props":4612,"children":4613},{"style":494},[4614],{"type":410,"value":678},{"type":404,"tag":487,"props":4616,"children":4617},{"style":681},[4618],{"type":410,"value":684},{"type":404,"tag":487,"props":4620,"children":4621},{"style":958},[4622],{"type":410,"value":503},{"type":404,"tag":487,"props":4624,"children":4625},{"style":500},[4626],{"type":410,"value":4627},"elems",{"type":404,"tag":487,"props":4629,"children":4630},{"style":958},[4631],{"type":410,"value":1856},{"type":404,"tag":487,"props":4633,"children":4634},{"style":500},[4635],{"type":410,"value":4563},{"type":404,"tag":487,"props":4637,"children":4638},{"style":958},[4639],{"type":410,"value":4640},"])\n",{"type":404,"tag":487,"props":4642,"children":4643},{"class":489,"line":1461},[4644],{"type":404,"tag":487,"props":4645,"children":4646},{"style":494},[4647],{"type":410,"value":1695},{"type":404,"tag":487,"props":4649,"children":4650},{"class":489,"line":1474},[4651,4655],{"type":404,"tag":487,"props":4652,"children":4653},{"style":968},[4654],{"type":410,"value":971},{"type":404,"tag":487,"props":4656,"children":4657},{"style":500},[4658],{"type":410,"value":4659}," clone\n",{"type":404,"tag":487,"props":4661,"children":4662},{"class":489,"line":1515},[4663],{"type":404,"tag":487,"props":4664,"children":4665},{"style":494},[4666],{"type":410,"value":2019},{"type":404,"tag":418,"props":4668,"children":4669},{},[4670],{"type":410,"value":4671},"可以发现，需要 shiv 的元素都存在了 getElements 这个方法中，我们来看看具体实现。",{"type":404,"tag":476,"props":4673,"children":4675},{"className":478,"code":4674,"language":480,"meta":398,"style":398},"// getElements 返回 html5.elments 的数组形式\n// 看来 getElements 也只是一个类似 getter 的存在\nfunction getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\n\n// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\nvar html5 = {\n    // options 是外部调用 html5shiv 的接口参数\n    'elements': options.elements || 'abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video'\n}\n",[4676],{"type":404,"tag":483,"props":4677,"children":4678},{"__ignoreMap":398},[4679,4687,4695,4714,4748,4826,4834,4841,4849,4869,4877,4930],{"type":404,"tag":487,"props":4680,"children":4681},{"class":489,"line":490},[4682],{"type":404,"tag":487,"props":4683,"children":4684},{"style":546},[4685],{"type":410,"value":4686},"// getElements 返回 html5.elments 的数组形式\n",{"type":404,"tag":487,"props":4688,"children":4689},{"class":489,"line":542},[4690],{"type":404,"tag":487,"props":4691,"children":4692},{"style":546},[4693],{"type":410,"value":4694},"// 看来 getElements 也只是一个类似 getter 的存在\n",{"type":404,"tag":487,"props":4696,"children":4697},{"class":489,"line":552},[4698,4702,4706,4710],{"type":404,"tag":487,"props":4699,"children":4700},{"style":506},[4701],{"type":410,"value":509},{"type":404,"tag":487,"props":4703,"children":4704},{"style":681},[4705],{"type":410,"value":4508},{"type":404,"tag":487,"props":4707,"children":4708},{"style":494},[4709],{"type":410,"value":919},{"type":404,"tag":487,"props":4711,"children":4712},{"style":494},[4713],{"type":410,"value":539},{"type":404,"tag":487,"props":4715,"children":4716},{"class":489,"line":926},[4717,4721,4726,4730,4735,4739,4744],{"type":404,"tag":487,"props":4718,"children":4719},{"style":506},[4720],{"type":410,"value":932},{"type":404,"tag":487,"props":4722,"children":4723},{"style":500},[4724],{"type":410,"value":4725}," elements",{"type":404,"tag":487,"props":4727,"children":4728},{"style":565},[4729],{"type":410,"value":942},{"type":404,"tag":487,"props":4731,"children":4732},{"style":500},[4733],{"type":410,"value":4734}," html5",{"type":404,"tag":487,"props":4736,"children":4737},{"style":494},[4738],{"type":410,"value":678},{"type":404,"tag":487,"props":4740,"children":4741},{"style":500},[4742],{"type":410,"value":4743},"elements",{"type":404,"tag":487,"props":4745,"children":4746},{"style":494},[4747],{"type":410,"value":629},{"type":404,"tag":487,"props":4749,"children":4750},{"class":489,"line":964},[4751,4755,4760,4764,4768,4772,4777,4781,4785,4789,4793,4798,4802,4806,4810,4814,4818,4822],{"type":404,"tag":487,"props":4752,"children":4753},{"style":968},[4754],{"type":410,"value":971},{"type":404,"tag":487,"props":4756,"children":4757},{"style":565},[4758],{"type":410,"value":4759}," typeof",{"type":404,"tag":487,"props":4761,"children":4762},{"style":500},[4763],{"type":410,"value":4725},{"type":404,"tag":487,"props":4765,"children":4766},{"style":565},[4767],{"type":410,"value":895},{"type":404,"tag":487,"props":4769,"children":4770},{"style":581},[4771],{"type":410,"value":844},{"type":404,"tag":487,"props":4773,"children":4774},{"style":587},[4775],{"type":410,"value":4776},"string",{"type":404,"tag":487,"props":4778,"children":4779},{"style":581},[4780],{"type":410,"value":693},{"type":404,"tag":487,"props":4782,"children":4783},{"style":565},[4784],{"type":410,"value":600},{"type":404,"tag":487,"props":4786,"children":4787},{"style":500},[4788],{"type":410,"value":4725},{"type":404,"tag":487,"props":4790,"children":4791},{"style":494},[4792],{"type":410,"value":678},{"type":404,"tag":487,"props":4794,"children":4795},{"style":681},[4796],{"type":410,"value":4797},"split",{"type":404,"tag":487,"props":4799,"children":4800},{"style":958},[4801],{"type":410,"value":503},{"type":404,"tag":487,"props":4803,"children":4804},{"style":581},[4805],{"type":410,"value":693},{"type":404,"tag":487,"props":4807,"children":4808},{"style":581},[4809],{"type":410,"value":844},{"type":404,"tag":487,"props":4811,"children":4812},{"style":958},[4813],{"type":410,"value":1638},{"type":404,"tag":487,"props":4815,"children":4816},{"style":565},[4817],{"type":410,"value":609},{"type":404,"tag":487,"props":4819,"children":4820},{"style":500},[4821],{"type":410,"value":4725},{"type":404,"tag":487,"props":4823,"children":4824},{"style":494},[4825],{"type":410,"value":629},{"type":404,"tag":487,"props":4827,"children":4828},{"class":489,"line":979},[4829],{"type":404,"tag":487,"props":4830,"children":4831},{"style":494},[4832],{"type":410,"value":4833},"}\n",{"type":404,"tag":487,"props":4835,"children":4836},{"class":489,"line":1022},[4837],{"type":404,"tag":487,"props":4838,"children":4839},{"emptyLinePlaceholder":397},[4840],{"type":410,"value":1305},{"type":404,"tag":487,"props":4842,"children":4843},{"class":489,"line":1062},[4844],{"type":404,"tag":487,"props":4845,"children":4846},{"style":546},[4847],{"type":410,"value":4848},"// 继续追溯可以找到挂载在全局 config html5 对象中的 elements 的值：\n",{"type":404,"tag":487,"props":4850,"children":4851},{"class":489,"line":1098},[4852,4856,4861,4865],{"type":404,"tag":487,"props":4853,"children":4854},{"style":506},[4855],{"type":410,"value":1737},{"type":404,"tag":487,"props":4857,"children":4858},{"style":500},[4859],{"type":410,"value":4860}," html5 ",{"type":404,"tag":487,"props":4862,"children":4863},{"style":565},[4864],{"type":410,"value":669},{"type":404,"tag":487,"props":4866,"children":4867},{"style":494},[4868],{"type":410,"value":539},{"type":404,"tag":487,"props":4870,"children":4871},{"class":489,"line":1107},[4872],{"type":404,"tag":487,"props":4873,"children":4874},{"style":546},[4875],{"type":410,"value":4876},"    // options 是外部调用 html5shiv 的接口参数\n",{"type":404,"tag":487,"props":4878,"children":4879},{"class":489,"line":1376},[4880,4885,4890,4894,4898,4903,4907,4912,4917,4921,4926],{"type":404,"tag":487,"props":4881,"children":4882},{"style":581},[4883],{"type":410,"value":4884},"    '",{"type":404,"tag":487,"props":4886,"children":4888},{"style":4887},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[4889],{"type":410,"value":4743},{"type":404,"tag":487,"props":4891,"children":4892},{"style":581},[4893],{"type":410,"value":693},{"type":404,"tag":487,"props":4895,"children":4896},{"style":494},[4897],{"type":410,"value":609},{"type":404,"tag":487,"props":4899,"children":4900},{"style":500},[4901],{"type":410,"value":4902}," options",{"type":404,"tag":487,"props":4904,"children":4905},{"style":494},[4906],{"type":410,"value":678},{"type":404,"tag":487,"props":4908,"children":4909},{"style":500},[4910],{"type":410,"value":4911},"elements ",{"type":404,"tag":487,"props":4913,"children":4914},{"style":565},[4915],{"type":410,"value":4916},"||",{"type":404,"tag":487,"props":4918,"children":4919},{"style":581},[4920],{"type":410,"value":844},{"type":404,"tag":487,"props":4922,"children":4923},{"style":587},[4924],{"type":410,"value":4925},"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output picture progress section summary template time video",{"type":404,"tag":487,"props":4927,"children":4928},{"style":581},[4929],{"type":410,"value":854},{"type":404,"tag":487,"props":4931,"children":4932},{"class":489,"line":1385},[4933],{"type":404,"tag":487,"props":4934,"children":4935},{"style":494},[4936],{"type":410,"value":4833},{"type":404,"tag":465,"props":4938,"children":4940},{"id":4939},"私有方法",[4941],{"type":410,"value":4939},{"type":404,"tag":418,"props":4943,"children":4944},{},[4945],{"type":410,"value":4946},"接下来是几个私有方法。和 shiv 原理不相关，所以不重要。",{"type":404,"tag":476,"props":4948,"children":4950},{"className":478,"code":4949,"language":480,"meta":398,"style":398},"/**\n * Creates a style sheet with the given CSS text and adds it to the document.\n * 在文档头部添加样式标签\n */\nfunction addStyleSheet(ownerDocument, cssText) {\n    var p = ownerDocument.createElement('p'),\n        parent = ownerDocument.getElementsByTagName('head')[0] || ownerDocument.documentElement\n    // ? 这个 'x' 应该是兼容性考虑\n    p.innerHTML = 'x\u003Cstyle>' + cssText + '\u003C/style>'\n    return parent.insertBefore(p.lastChild, parent.firstChild)\n}\n",[4951],{"type":404,"tag":483,"props":4952,"children":4953},{"__ignoreMap":398},[4954,4962,4970,4978,4986,5023,5075,5148,5156,5214,5273],{"type":404,"tag":487,"props":4955,"children":4956},{"class":489,"line":490},[4957],{"type":404,"tag":487,"props":4958,"children":4959},{"style":546},[4960],{"type":410,"value":4961},"/**\n",{"type":404,"tag":487,"props":4963,"children":4964},{"class":489,"line":542},[4965],{"type":404,"tag":487,"props":4966,"children":4967},{"style":546},[4968],{"type":410,"value":4969}," * Creates a style sheet with the given CSS text and adds it to the document.\n",{"type":404,"tag":487,"props":4971,"children":4972},{"class":489,"line":552},[4973],{"type":404,"tag":487,"props":4974,"children":4975},{"style":546},[4976],{"type":410,"value":4977}," * 在文档头部添加样式标签\n",{"type":404,"tag":487,"props":4979,"children":4980},{"class":489,"line":926},[4981],{"type":404,"tag":487,"props":4982,"children":4983},{"style":546},[4984],{"type":410,"value":4985}," */\n",{"type":404,"tag":487,"props":4987,"children":4988},{"class":489,"line":964},[4989,4993,4998,5002,5006,5010,5015,5019],{"type":404,"tag":487,"props":4990,"children":4991},{"style":506},[4992],{"type":410,"value":509},{"type":404,"tag":487,"props":4994,"children":4995},{"style":681},[4996],{"type":410,"value":4997}," addStyleSheet",{"type":404,"tag":487,"props":4999,"children":5000},{"style":494},[5001],{"type":410,"value":503},{"type":404,"tag":487,"props":5003,"children":5004},{"style":516},[5005],{"type":410,"value":1822},{"type":404,"tag":487,"props":5007,"children":5008},{"style":494},[5009],{"type":410,"value":524},{"type":404,"tag":487,"props":5011,"children":5012},{"style":516},[5013],{"type":410,"value":5014}," cssText",{"type":404,"tag":487,"props":5016,"children":5017},{"style":494},[5018],{"type":410,"value":534},{"type":404,"tag":487,"props":5020,"children":5021},{"style":494},[5022],{"type":410,"value":539},{"type":404,"tag":487,"props":5024,"children":5025},{"class":489,"line":979},[5026,5030,5035,5039,5043,5047,5051,5055,5059,5063,5067,5071],{"type":404,"tag":487,"props":5027,"children":5028},{"style":506},[5029],{"type":410,"value":932},{"type":404,"tag":487,"props":5031,"children":5032},{"style":500},[5033],{"type":410,"value":5034}," p",{"type":404,"tag":487,"props":5036,"children":5037},{"style":565},[5038],{"type":410,"value":942},{"type":404,"tag":487,"props":5040,"children":5041},{"style":500},[5042],{"type":410,"value":2583},{"type":404,"tag":487,"props":5044,"children":5045},{"style":494},[5046],{"type":410,"value":678},{"type":404,"tag":487,"props":5048,"children":5049},{"style":681},[5050],{"type":410,"value":684},{"type":404,"tag":487,"props":5052,"children":5053},{"style":958},[5054],{"type":410,"value":503},{"type":404,"tag":487,"props":5056,"children":5057},{"style":581},[5058],{"type":410,"value":693},{"type":404,"tag":487,"props":5060,"children":5061},{"style":587},[5062],{"type":410,"value":418},{"type":404,"tag":487,"props":5064,"children":5065},{"style":581},[5066],{"type":410,"value":693},{"type":404,"tag":487,"props":5068,"children":5069},{"style":958},[5070],{"type":410,"value":534},{"type":404,"tag":487,"props":5072,"children":5073},{"style":494},[5074],{"type":410,"value":2225},{"type":404,"tag":487,"props":5076,"children":5077},{"class":489,"line":1022},[5078,5083,5087,5091,5095,5100,5104,5108,5113,5117,5122,5127,5131,5135,5139,5143],{"type":404,"tag":487,"props":5079,"children":5080},{"style":500},[5081],{"type":410,"value":5082},"        parent",{"type":404,"tag":487,"props":5084,"children":5085},{"style":565},[5086],{"type":410,"value":942},{"type":404,"tag":487,"props":5088,"children":5089},{"style":500},[5090],{"type":410,"value":2583},{"type":404,"tag":487,"props":5092,"children":5093},{"style":494},[5094],{"type":410,"value":678},{"type":404,"tag":487,"props":5096,"children":5097},{"style":681},[5098],{"type":410,"value":5099},"getElementsByTagName",{"type":404,"tag":487,"props":5101,"children":5102},{"style":958},[5103],{"type":410,"value":503},{"type":404,"tag":487,"props":5105,"children":5106},{"style":581},[5107],{"type":410,"value":693},{"type":404,"tag":487,"props":5109,"children":5110},{"style":587},[5111],{"type":410,"value":5112},"head",{"type":404,"tag":487,"props":5114,"children":5115},{"style":581},[5116],{"type":410,"value":693},{"type":404,"tag":487,"props":5118,"children":5119},{"style":958},[5120],{"type":410,"value":5121},")[",{"type":404,"tag":487,"props":5123,"children":5124},{"style":898},[5125],{"type":410,"value":5126},"0",{"type":404,"tag":487,"props":5128,"children":5129},{"style":958},[5130],{"type":410,"value":1954},{"type":404,"tag":487,"props":5132,"children":5133},{"style":565},[5134],{"type":410,"value":4916},{"type":404,"tag":487,"props":5136,"children":5137},{"style":500},[5138],{"type":410,"value":2583},{"type":404,"tag":487,"props":5140,"children":5141},{"style":494},[5142],{"type":410,"value":678},{"type":404,"tag":487,"props":5144,"children":5145},{"style":500},[5146],{"type":410,"value":5147},"documentElement\n",{"type":404,"tag":487,"props":5149,"children":5150},{"class":489,"line":1062},[5151],{"type":404,"tag":487,"props":5152,"children":5153},{"style":546},[5154],{"type":410,"value":5155},"    // ? 这个 'x' 应该是兼容性考虑\n",{"type":404,"tag":487,"props":5157,"children":5158},{"class":489,"line":1098},[5159,5164,5168,5172,5176,5180,5185,5189,5193,5197,5201,5205,5210],{"type":404,"tag":487,"props":5160,"children":5161},{"style":500},[5162],{"type":410,"value":5163},"    p",{"type":404,"tag":487,"props":5165,"children":5166},{"style":494},[5167],{"type":410,"value":678},{"type":404,"tag":487,"props":5169,"children":5170},{"style":500},[5171],{"type":410,"value":1225},{"type":404,"tag":487,"props":5173,"children":5174},{"style":565},[5175],{"type":410,"value":942},{"type":404,"tag":487,"props":5177,"children":5178},{"style":581},[5179],{"type":410,"value":844},{"type":404,"tag":487,"props":5181,"children":5182},{"style":587},[5183],{"type":410,"value":5184},"x\u003Cstyle>",{"type":404,"tag":487,"props":5186,"children":5187},{"style":581},[5188],{"type":410,"value":693},{"type":404,"tag":487,"props":5190,"children":5191},{"style":565},[5192],{"type":410,"value":3204},{"type":404,"tag":487,"props":5194,"children":5195},{"style":500},[5196],{"type":410,"value":5014},{"type":404,"tag":487,"props":5198,"children":5199},{"style":565},[5200],{"type":410,"value":3204},{"type":404,"tag":487,"props":5202,"children":5203},{"style":581},[5204],{"type":410,"value":844},{"type":404,"tag":487,"props":5206,"children":5207},{"style":587},[5208],{"type":410,"value":5209},"\u003C/style>",{"type":404,"tag":487,"props":5211,"children":5212},{"style":581},[5213],{"type":410,"value":854},{"type":404,"tag":487,"props":5215,"children":5216},{"class":489,"line":1107},[5217,5221,5226,5230,5235,5239,5243,5247,5252,5256,5260,5264,5269],{"type":404,"tag":487,"props":5218,"children":5219},{"style":968},[5220],{"type":410,"value":971},{"type":404,"tag":487,"props":5222,"children":5223},{"style":500},[5224],{"type":410,"value":5225}," parent",{"type":404,"tag":487,"props":5227,"children":5228},{"style":494},[5229],{"type":410,"value":678},{"type":404,"tag":487,"props":5231,"children":5232},{"style":681},[5233],{"type":410,"value":5234},"insertBefore",{"type":404,"tag":487,"props":5236,"children":5237},{"style":958},[5238],{"type":410,"value":503},{"type":404,"tag":487,"props":5240,"children":5241},{"style":500},[5242],{"type":410,"value":418},{"type":404,"tag":487,"props":5244,"children":5245},{"style":494},[5246],{"type":410,"value":678},{"type":404,"tag":487,"props":5248,"children":5249},{"style":500},[5250],{"type":410,"value":5251},"lastChild",{"type":404,"tag":487,"props":5253,"children":5254},{"style":494},[5255],{"type":410,"value":524},{"type":404,"tag":487,"props":5257,"children":5258},{"style":500},[5259],{"type":410,"value":5225},{"type":404,"tag":487,"props":5261,"children":5262},{"style":494},[5263],{"type":410,"value":678},{"type":404,"tag":487,"props":5265,"children":5266},{"style":500},[5267],{"type":410,"value":5268},"firstChild",{"type":404,"tag":487,"props":5270,"children":5271},{"style":958},[5272],{"type":410,"value":706},{"type":404,"tag":487,"props":5274,"children":5275},{"class":489,"line":1376},[5276],{"type":404,"tag":487,"props":5277,"children":5278},{"style":494},[5279],{"type":410,"value":4833},{"type":404,"tag":418,"props":5281,"children":5282},{},[5283],{"type":410,"value":5284},"一对用来维护 html5.elements 的方法 getElements、addElements。相当于 getter/setter。因为 html5shiv 将 html5 这个对象挂载到了 window 对象上，向外暴露。所以可以轻易调用 addElements 维护 html.elements。",{"type":404,"tag":476,"props":5286,"children":5288},{"className":478,"code":5287,"language":480,"meta":398,"style":398},"function getElements() {\n    var elements = html5.elements;\n    return typeof elements == 'string' ? elements.split(' ') : elements;\n}\nfunction addElements(newElements, ownerDocument) {\n    var elements = html5.elements\n    if(typeof elements != 'string'){\n        elements = elements.join(' ')\n    }\n    if(typeof newElements != 'string'){\n        newElements = newElements.join(' ')\n    }\n    html5.elements = elements +' '+ newElements\n\n    // 每次增加元素的最后，会进行一次 shiv\n    shivDocument(ownerDocument)\n}\n",[5289],{"type":404,"tag":483,"props":5290,"children":5291},{"__ignoreMap":398},[5292,5311,5342,5417,5424,5461,5489,5533,5573,5580,5624,5664,5671,5716,5723,5731,5751],{"type":404,"tag":487,"props":5293,"children":5294},{"class":489,"line":490},[5295,5299,5303,5307],{"type":404,"tag":487,"props":5296,"children":5297},{"style":506},[5298],{"type":410,"value":509},{"type":404,"tag":487,"props":5300,"children":5301},{"style":681},[5302],{"type":410,"value":4508},{"type":404,"tag":487,"props":5304,"children":5305},{"style":494},[5306],{"type":410,"value":919},{"type":404,"tag":487,"props":5308,"children":5309},{"style":494},[5310],{"type":410,"value":539},{"type":404,"tag":487,"props":5312,"children":5313},{"class":489,"line":542},[5314,5318,5322,5326,5330,5334,5338],{"type":404,"tag":487,"props":5315,"children":5316},{"style":506},[5317],{"type":410,"value":932},{"type":404,"tag":487,"props":5319,"children":5320},{"style":500},[5321],{"type":410,"value":4725},{"type":404,"tag":487,"props":5323,"children":5324},{"style":565},[5325],{"type":410,"value":942},{"type":404,"tag":487,"props":5327,"children":5328},{"style":500},[5329],{"type":410,"value":4734},{"type":404,"tag":487,"props":5331,"children":5332},{"style":494},[5333],{"type":410,"value":678},{"type":404,"tag":487,"props":5335,"children":5336},{"style":500},[5337],{"type":410,"value":4743},{"type":404,"tag":487,"props":5339,"children":5340},{"style":494},[5341],{"type":410,"value":629},{"type":404,"tag":487,"props":5343,"children":5344},{"class":489,"line":552},[5345,5349,5353,5357,5361,5365,5369,5373,5377,5381,5385,5389,5393,5397,5401,5405,5409,5413],{"type":404,"tag":487,"props":5346,"children":5347},{"style":968},[5348],{"type":410,"value":971},{"type":404,"tag":487,"props":5350,"children":5351},{"style":565},[5352],{"type":410,"value":4759},{"type":404,"tag":487,"props":5354,"children":5355},{"style":500},[5356],{"type":410,"value":4725},{"type":404,"tag":487,"props":5358,"children":5359},{"style":565},[5360],{"type":410,"value":895},{"type":404,"tag":487,"props":5362,"children":5363},{"style":581},[5364],{"type":410,"value":844},{"type":404,"tag":487,"props":5366,"children":5367},{"style":587},[5368],{"type":410,"value":4776},{"type":404,"tag":487,"props":5370,"children":5371},{"style":581},[5372],{"type":410,"value":693},{"type":404,"tag":487,"props":5374,"children":5375},{"style":565},[5376],{"type":410,"value":600},{"type":404,"tag":487,"props":5378,"children":5379},{"style":500},[5380],{"type":410,"value":4725},{"type":404,"tag":487,"props":5382,"children":5383},{"style":494},[5384],{"type":410,"value":678},{"type":404,"tag":487,"props":5386,"children":5387},{"style":681},[5388],{"type":410,"value":4797},{"type":404,"tag":487,"props":5390,"children":5391},{"style":958},[5392],{"type":410,"value":503},{"type":404,"tag":487,"props":5394,"children":5395},{"style":581},[5396],{"type":410,"value":693},{"type":404,"tag":487,"props":5398,"children":5399},{"style":581},[5400],{"type":410,"value":844},{"type":404,"tag":487,"props":5402,"children":5403},{"style":958},[5404],{"type":410,"value":1638},{"type":404,"tag":487,"props":5406,"children":5407},{"style":565},[5408],{"type":410,"value":609},{"type":404,"tag":487,"props":5410,"children":5411},{"style":500},[5412],{"type":410,"value":4725},{"type":404,"tag":487,"props":5414,"children":5415},{"style":494},[5416],{"type":410,"value":629},{"type":404,"tag":487,"props":5418,"children":5419},{"class":489,"line":926},[5420],{"type":404,"tag":487,"props":5421,"children":5422},{"style":494},[5423],{"type":410,"value":4833},{"type":404,"tag":487,"props":5425,"children":5426},{"class":489,"line":964},[5427,5431,5436,5440,5445,5449,5453,5457],{"type":404,"tag":487,"props":5428,"children":5429},{"style":506},[5430],{"type":410,"value":509},{"type":404,"tag":487,"props":5432,"children":5433},{"style":681},[5434],{"type":410,"value":5435}," addElements",{"type":404,"tag":487,"props":5437,"children":5438},{"style":494},[5439],{"type":410,"value":503},{"type":404,"tag":487,"props":5441,"children":5442},{"style":516},[5443],{"type":410,"value":5444},"newElements",{"type":404,"tag":487,"props":5446,"children":5447},{"style":494},[5448],{"type":410,"value":524},{"type":404,"tag":487,"props":5450,"children":5451},{"style":516},[5452],{"type":410,"value":2583},{"type":404,"tag":487,"props":5454,"children":5455},{"style":494},[5456],{"type":410,"value":534},{"type":404,"tag":487,"props":5458,"children":5459},{"style":494},[5460],{"type":410,"value":539},{"type":404,"tag":487,"props":5462,"children":5463},{"class":489,"line":979},[5464,5468,5472,5476,5480,5484],{"type":404,"tag":487,"props":5465,"children":5466},{"style":506},[5467],{"type":410,"value":932},{"type":404,"tag":487,"props":5469,"children":5470},{"style":500},[5471],{"type":410,"value":4725},{"type":404,"tag":487,"props":5473,"children":5474},{"style":565},[5475],{"type":410,"value":942},{"type":404,"tag":487,"props":5477,"children":5478},{"style":500},[5479],{"type":410,"value":4734},{"type":404,"tag":487,"props":5481,"children":5482},{"style":494},[5483],{"type":410,"value":678},{"type":404,"tag":487,"props":5485,"children":5486},{"style":500},[5487],{"type":410,"value":5488},"elements\n",{"type":404,"tag":487,"props":5490,"children":5491},{"class":489,"line":1022},[5492,5496,5500,5504,5508,5513,5517,5521,5525,5529],{"type":404,"tag":487,"props":5493,"children":5494},{"style":968},[5495],{"type":410,"value":1882},{"type":404,"tag":487,"props":5497,"children":5498},{"style":958},[5499],{"type":410,"value":503},{"type":404,"tag":487,"props":5501,"children":5502},{"style":565},[5503],{"type":410,"value":568},{"type":404,"tag":487,"props":5505,"children":5506},{"style":500},[5507],{"type":410,"value":4725},{"type":404,"tag":487,"props":5509,"children":5510},{"style":565},[5511],{"type":410,"value":5512}," !=",{"type":404,"tag":487,"props":5514,"children":5515},{"style":581},[5516],{"type":410,"value":844},{"type":404,"tag":487,"props":5518,"children":5519},{"style":587},[5520],{"type":410,"value":4776},{"type":404,"tag":487,"props":5522,"children":5523},{"style":581},[5524],{"type":410,"value":693},{"type":404,"tag":487,"props":5526,"children":5527},{"style":958},[5528],{"type":410,"value":534},{"type":404,"tag":487,"props":5530,"children":5531},{"style":494},[5532],{"type":410,"value":1643},{"type":404,"tag":487,"props":5534,"children":5535},{"class":489,"line":1062},[5536,5541,5545,5549,5553,5557,5561,5565,5569],{"type":404,"tag":487,"props":5537,"children":5538},{"style":500},[5539],{"type":410,"value":5540},"        elements",{"type":404,"tag":487,"props":5542,"children":5543},{"style":565},[5544],{"type":410,"value":942},{"type":404,"tag":487,"props":5546,"children":5547},{"style":500},[5548],{"type":410,"value":4725},{"type":404,"tag":487,"props":5550,"children":5551},{"style":494},[5552],{"type":410,"value":678},{"type":404,"tag":487,"props":5554,"children":5555},{"style":681},[5556],{"type":410,"value":3036},{"type":404,"tag":487,"props":5558,"children":5559},{"style":958},[5560],{"type":410,"value":503},{"type":404,"tag":487,"props":5562,"children":5563},{"style":581},[5564],{"type":410,"value":693},{"type":404,"tag":487,"props":5566,"children":5567},{"style":581},[5568],{"type":410,"value":844},{"type":404,"tag":487,"props":5570,"children":5571},{"style":958},[5572],{"type":410,"value":706},{"type":404,"tag":487,"props":5574,"children":5575},{"class":489,"line":1098},[5576],{"type":404,"tag":487,"props":5577,"children":5578},{"style":494},[5579],{"type":410,"value":1695},{"type":404,"tag":487,"props":5581,"children":5582},{"class":489,"line":1107},[5583,5587,5591,5595,5600,5604,5608,5612,5616,5620],{"type":404,"tag":487,"props":5584,"children":5585},{"style":968},[5586],{"type":410,"value":1882},{"type":404,"tag":487,"props":5588,"children":5589},{"style":958},[5590],{"type":410,"value":503},{"type":404,"tag":487,"props":5592,"children":5593},{"style":565},[5594],{"type":410,"value":568},{"type":404,"tag":487,"props":5596,"children":5597},{"style":500},[5598],{"type":410,"value":5599}," newElements",{"type":404,"tag":487,"props":5601,"children":5602},{"style":565},[5603],{"type":410,"value":5512},{"type":404,"tag":487,"props":5605,"children":5606},{"style":581},[5607],{"type":410,"value":844},{"type":404,"tag":487,"props":5609,"children":5610},{"style":587},[5611],{"type":410,"value":4776},{"type":404,"tag":487,"props":5613,"children":5614},{"style":581},[5615],{"type":410,"value":693},{"type":404,"tag":487,"props":5617,"children":5618},{"style":958},[5619],{"type":410,"value":534},{"type":404,"tag":487,"props":5621,"children":5622},{"style":494},[5623],{"type":410,"value":1643},{"type":404,"tag":487,"props":5625,"children":5626},{"class":489,"line":1376},[5627,5632,5636,5640,5644,5648,5652,5656,5660],{"type":404,"tag":487,"props":5628,"children":5629},{"style":500},[5630],{"type":410,"value":5631},"        newElements",{"type":404,"tag":487,"props":5633,"children":5634},{"style":565},[5635],{"type":410,"value":942},{"type":404,"tag":487,"props":5637,"children":5638},{"style":500},[5639],{"type":410,"value":5599},{"type":404,"tag":487,"props":5641,"children":5642},{"style":494},[5643],{"type":410,"value":678},{"type":404,"tag":487,"props":5645,"children":5646},{"style":681},[5647],{"type":410,"value":3036},{"type":404,"tag":487,"props":5649,"children":5650},{"style":958},[5651],{"type":410,"value":503},{"type":404,"tag":487,"props":5653,"children":5654},{"style":581},[5655],{"type":410,"value":693},{"type":404,"tag":487,"props":5657,"children":5658},{"style":581},[5659],{"type":410,"value":844},{"type":404,"tag":487,"props":5661,"children":5662},{"style":958},[5663],{"type":410,"value":706},{"type":404,"tag":487,"props":5665,"children":5666},{"class":489,"line":1385},[5667],{"type":404,"tag":487,"props":5668,"children":5669},{"style":494},[5670],{"type":410,"value":1695},{"type":404,"tag":487,"props":5672,"children":5673},{"class":489,"line":1428},[5674,5679,5683,5687,5691,5695,5699,5703,5707,5711],{"type":404,"tag":487,"props":5675,"children":5676},{"style":500},[5677],{"type":410,"value":5678},"    html5",{"type":404,"tag":487,"props":5680,"children":5681},{"style":494},[5682],{"type":410,"value":678},{"type":404,"tag":487,"props":5684,"children":5685},{"style":500},[5686],{"type":410,"value":4743},{"type":404,"tag":487,"props":5688,"children":5689},{"style":565},[5690],{"type":410,"value":942},{"type":404,"tag":487,"props":5692,"children":5693},{"style":500},[5694],{"type":410,"value":4725},{"type":404,"tag":487,"props":5696,"children":5697},{"style":565},[5698],{"type":410,"value":3204},{"type":404,"tag":487,"props":5700,"children":5701},{"style":581},[5702],{"type":410,"value":693},{"type":404,"tag":487,"props":5704,"children":5705},{"style":581},[5706],{"type":410,"value":844},{"type":404,"tag":487,"props":5708,"children":5709},{"style":565},[5710],{"type":410,"value":3079},{"type":404,"tag":487,"props":5712,"children":5713},{"style":500},[5714],{"type":410,"value":5715}," newElements\n",{"type":404,"tag":487,"props":5717,"children":5718},{"class":489,"line":1461},[5719],{"type":404,"tag":487,"props":5720,"children":5721},{"emptyLinePlaceholder":397},[5722],{"type":410,"value":1305},{"type":404,"tag":487,"props":5724,"children":5725},{"class":489,"line":1474},[5726],{"type":404,"tag":487,"props":5727,"children":5728},{"style":546},[5729],{"type":410,"value":5730},"    // 每次增加元素的最后，会进行一次 shiv\n",{"type":404,"tag":487,"props":5732,"children":5733},{"class":489,"line":1515},[5734,5739,5743,5747],{"type":404,"tag":487,"props":5735,"children":5736},{"style":681},[5737],{"type":410,"value":5738},"    shivDocument",{"type":404,"tag":487,"props":5740,"children":5741},{"style":958},[5742],{"type":410,"value":503},{"type":404,"tag":487,"props":5744,"children":5745},{"style":500},[5746],{"type":410,"value":1822},{"type":404,"tag":487,"props":5748,"children":5749},{"style":958},[5750],{"type":410,"value":706},{"type":404,"tag":487,"props":5752,"children":5753},{"class":489,"line":1555},[5754],{"type":404,"tag":487,"props":5755,"children":5756},{"style":494},[5757],{"type":410,"value":4833},{"type":404,"tag":412,"props":5759,"children":5761},{"id":5760},"阅读更多",[5762],{"type":410,"value":5760},{"type":404,"tag":418,"props":5764,"children":5765},{},[5766],{"type":410,"value":5767},"害，看 html5shiv 并不能带来什么具体的帮助。看完之后，只感觉上一代前端真是太辛苦了，为 IE 操碎了心。现代前端技术随着打包工具的发展开阔了不止一点，兼容性这个曾经的代码重心已经悄然落下帷幕。如果现在我去哪家公司面试，还会被大面积问到兼容性问题，那估计我会当场“quit”吧。",{"type":404,"tag":5769,"props":5770,"children":5773},"section",{"className":5771,"dataFootnotes":398},[5772],"footnotes",[5774,5781],{"type":404,"tag":412,"props":5775,"children":5778},{"className":5776,"id":432},[5777],"sr-only",[5779],{"type":410,"value":5780},"Footnotes",{"type":404,"tag":5782,"props":5783,"children":5784},"ol",{},[5785,5808],{"type":404,"tag":449,"props":5786,"children":5788},{"id":5787},"user-content-fn-html5shiv",[5789,5797,5799],{"type":404,"tag":428,"props":5790,"children":5794},{"href":5791,"rel":5792},"https://github.com/aFarkas/html5shiv",[5793],"nofollow",[5795],{"type":410,"value":5796},"html5shiv",{"type":410,"value":5798}," ",{"type":404,"tag":428,"props":5800,"children":5805},{"href":5801,"ariaLabel":5802,"className":5803,"dataFootnoteBackref":398},"#user-content-fnref-html5shiv","Back to reference 1",[5804],"data-footnote-backref",[5806],{"type":410,"value":5807},"↩",{"type":404,"tag":449,"props":5809,"children":5811},{"id":5810},"user-content-fn-hidden",[5812,5819,5820],{"type":404,"tag":428,"props":5813,"children":5816},{"href":5814,"rel":5815},"https://developer.mozilla.org/zh-CN/docs/Web/API/HTMLElement/hidden",[5793],[5817],{"type":410,"value":5818},"HTMLElement.hidden@MDN",{"type":410,"value":5798},{"type":404,"tag":428,"props":5821,"children":5825},{"href":5822,"ariaLabel":5823,"className":5824,"dataFootnoteBackref":398},"#user-content-fnref-hidden","Back to reference 2",[5804],[5826],{"type":410,"value":5807},{"type":404,"tag":5828,"props":5829,"children":5830},"style",{},[5831],{"type":410,"value":5832},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":398,"searchDepth":542,"depth":542,"links":5834},[5835,5836,5842,5843],{"id":414,"depth":542,"text":414},{"id":461,"depth":542,"text":461,"children":5837},[5838,5839,5840,5841],{"id":467,"depth":552,"text":467},{"id":637,"depth":552,"text":637},{"id":1710,"depth":552,"text":1710},{"id":4939,"depth":552,"text":4939},{"id":5760,"depth":542,"text":5760},{"id":432,"depth":542,"text":5780},"markdown","content:8.source-code:_module:html5shiv.md","content","8.source-code/_module/html5shiv.md","8.source-code/_module/html5shiv","md",[5851,5854],{"_path":5852,"title":5853,"description":398},"/source-code/_module/fast-deep-equal","判断两个变量相等",{"_path":5855,"title":5856,"description":5857},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",1741604972034]