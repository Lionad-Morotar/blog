[{"data":1,"prerenderedAt":1246},["ShallowReactive",2],{"navigation":3,"/source-code/_module/is-online":155,"/source-code/_module/is-online-surround":1238},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":156,"_dir":157,"_draft":158,"_partial":159,"_locale":160,"title":161,"description":162,"body":163,"_type":1232,"_id":1233,"_source":1234,"_file":1235,"_stem":1236,"_extension":1237},"/source-code/_module/is-online","_module",false,true,"","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"type":164,"children":165,"toc":1225},"root",[166,174,179,185,191,204,209,214,1172,1185,1199,1204,1219],{"type":167,"tag":168,"props":169,"children":171},"element","h1",{"id":170},"判断-nodejs-是否在线",[172],{"type":173,"value":161},"text",{"type":167,"tag":175,"props":176,"children":177},"p",{},[178],{"type":173,"value":162},{"type":167,"tag":180,"props":181,"children":183},"h2",{"id":182},"internet-available",[184],{"type":173,"value":182},{"type":167,"tag":186,"props":187,"children":189},"h3",{"id":188},"长话短说",[190],{"type":173,"value":188},{"type":167,"tag":175,"props":192,"children":193},{},[194,202],{"type":167,"tag":195,"props":196,"children":200},"a",{"href":197,"rel":198},"https://github.com/ourcodeworld/internet-available/blob/master/internet-available.js",[199],"nofollow",[201],{"type":173,"value":182},{"type":173,"value":203}," 使用 dns-socket 库去发起一个 google.com 的 DNS 请求。请求成功则确认服务器在线，超时则确认服务器离线。",{"type":167,"tag":186,"props":205,"children":207},{"id":206},"实现",[208],{"type":173,"value":206},{"type":167,"tag":175,"props":210,"children":211},{},[212],{"type":173,"value":213},"代码实现非常简单，不过 20 行。",{"type":167,"tag":215,"props":216,"children":220},"pre",{"className":217,"code":218,"language":219,"meta":160,"style":160},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function internetAvailable(settings) {\n    var dns = require('dns-socket');\n    settings = settings || {};\n\n    return new Promise(function(resolve, reject){\n        // Create instance of the DNS resolver\n        // 默认超时五秒；重试次数五次\n        var socket = dns({\n            timeout: (settings.timeout || 5000),\n            retries: (settings.retries || 5)\n        });\n\n        // Run the dns lowlevel lookup\n        // 默认 DNS 服务器地址是 8.8.8.8，请求 google.com\n        // 国内需要换成 114.114.114.114 & baidu.com，原因你懂\n        socket.query({\n            questions: [{\n                type: 'A',\n                name: (settings.domainName || \"google.com\")\n            }]\n        }, (settings.port || 53), (settings.host || '8.8.8.8'));\n\n        // DNS Address solved, internet available\n        socket.on('response', () => { \n            socket.destroy(() => {\n                resolve();\n            });\n        });\n\n        // Verify for timeout of the request (cannot reach server)\n        socket.on('timeout', () => {\n            socket.destroy(() => {\n                reject();\n            });\n        });\n    });\n}\n","js",[221],{"type":167,"tag":222,"props":223,"children":224},"code",{"__ignoreMap":160},[225,265,321,349,358,411,421,430,461,513,557,574,582,591,600,609,635,657,688,741,755,841,849,858,916,951,968,984,1000,1008,1017,1065,1097,1114,1130,1146,1163],{"type":167,"tag":226,"props":227,"children":230},"span",{"class":228,"line":229},"line",1,[231,237,243,249,255,260],{"type":167,"tag":226,"props":232,"children":234},{"style":233},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[235],{"type":173,"value":236},"function",{"type":167,"tag":226,"props":238,"children":240},{"style":239},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[241],{"type":173,"value":242}," internetAvailable",{"type":167,"tag":226,"props":244,"children":246},{"style":245},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[247],{"type":173,"value":248},"(",{"type":167,"tag":226,"props":250,"children":252},{"style":251},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[253],{"type":173,"value":254},"settings",{"type":167,"tag":226,"props":256,"children":257},{"style":245},[258],{"type":173,"value":259},")",{"type":167,"tag":226,"props":261,"children":262},{"style":245},[263],{"type":173,"value":264}," {\n",{"type":167,"tag":226,"props":266,"children":268},{"class":228,"line":267},2,[269,274,280,286,291,296,302,308,312,316],{"type":167,"tag":226,"props":270,"children":271},{"style":233},[272],{"type":173,"value":273},"    var",{"type":167,"tag":226,"props":275,"children":277},{"style":276},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[278],{"type":173,"value":279}," dns",{"type":167,"tag":226,"props":281,"children":283},{"style":282},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[284],{"type":173,"value":285}," =",{"type":167,"tag":226,"props":287,"children":288},{"style":239},[289],{"type":173,"value":290}," require",{"type":167,"tag":226,"props":292,"children":294},{"style":293},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[295],{"type":173,"value":248},{"type":167,"tag":226,"props":297,"children":299},{"style":298},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[300],{"type":173,"value":301},"'",{"type":167,"tag":226,"props":303,"children":305},{"style":304},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[306],{"type":173,"value":307},"dns-socket",{"type":167,"tag":226,"props":309,"children":310},{"style":298},[311],{"type":173,"value":301},{"type":167,"tag":226,"props":313,"children":314},{"style":293},[315],{"type":173,"value":259},{"type":167,"tag":226,"props":317,"children":318},{"style":245},[319],{"type":173,"value":320},";\n",{"type":167,"tag":226,"props":322,"children":324},{"class":228,"line":323},3,[325,330,334,339,344],{"type":167,"tag":226,"props":326,"children":327},{"style":276},[328],{"type":173,"value":329},"    settings",{"type":167,"tag":226,"props":331,"children":332},{"style":282},[333],{"type":173,"value":285},{"type":167,"tag":226,"props":335,"children":336},{"style":276},[337],{"type":173,"value":338}," settings",{"type":167,"tag":226,"props":340,"children":341},{"style":282},[342],{"type":173,"value":343}," ||",{"type":167,"tag":226,"props":345,"children":346},{"style":245},[347],{"type":173,"value":348}," {};\n",{"type":167,"tag":226,"props":350,"children":352},{"class":228,"line":351},4,[353],{"type":167,"tag":226,"props":354,"children":355},{"emptyLinePlaceholder":159},[356],{"type":173,"value":357},"\n",{"type":167,"tag":226,"props":359,"children":361},{"class":228,"line":360},5,[362,368,373,379,383,387,391,396,401,406],{"type":167,"tag":226,"props":363,"children":365},{"style":364},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[366],{"type":173,"value":367},"    return",{"type":167,"tag":226,"props":369,"children":370},{"style":282},[371],{"type":173,"value":372}," new",{"type":167,"tag":226,"props":374,"children":376},{"style":375},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[377],{"type":173,"value":378}," Promise",{"type":167,"tag":226,"props":380,"children":381},{"style":293},[382],{"type":173,"value":248},{"type":167,"tag":226,"props":384,"children":385},{"style":233},[386],{"type":173,"value":236},{"type":167,"tag":226,"props":388,"children":389},{"style":245},[390],{"type":173,"value":248},{"type":167,"tag":226,"props":392,"children":393},{"style":251},[394],{"type":173,"value":395},"resolve",{"type":167,"tag":226,"props":397,"children":398},{"style":245},[399],{"type":173,"value":400},",",{"type":167,"tag":226,"props":402,"children":403},{"style":251},[404],{"type":173,"value":405}," reject",{"type":167,"tag":226,"props":407,"children":408},{"style":245},[409],{"type":173,"value":410},"){\n",{"type":167,"tag":226,"props":412,"children":414},{"class":228,"line":413},6,[415],{"type":167,"tag":226,"props":416,"children":418},{"style":417},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[419],{"type":173,"value":420},"        // Create instance of the DNS resolver\n",{"type":167,"tag":226,"props":422,"children":424},{"class":228,"line":423},7,[425],{"type":167,"tag":226,"props":426,"children":427},{"style":417},[428],{"type":173,"value":429},"        // 默认超时五秒；重试次数五次\n",{"type":167,"tag":226,"props":431,"children":433},{"class":228,"line":432},8,[434,439,444,448,452,456],{"type":167,"tag":226,"props":435,"children":436},{"style":233},[437],{"type":173,"value":438},"        var",{"type":167,"tag":226,"props":440,"children":441},{"style":276},[442],{"type":173,"value":443}," socket",{"type":167,"tag":226,"props":445,"children":446},{"style":282},[447],{"type":173,"value":285},{"type":167,"tag":226,"props":449,"children":450},{"style":239},[451],{"type":173,"value":279},{"type":167,"tag":226,"props":453,"children":454},{"style":293},[455],{"type":173,"value":248},{"type":167,"tag":226,"props":457,"children":458},{"style":245},[459],{"type":173,"value":460},"{\n",{"type":167,"tag":226,"props":462,"children":464},{"class":228,"line":463},9,[465,470,475,480,484,489,494,498,504,508],{"type":167,"tag":226,"props":466,"children":467},{"style":293},[468],{"type":173,"value":469},"            timeout",{"type":167,"tag":226,"props":471,"children":472},{"style":245},[473],{"type":173,"value":474},":",{"type":167,"tag":226,"props":476,"children":477},{"style":293},[478],{"type":173,"value":479}," (",{"type":167,"tag":226,"props":481,"children":482},{"style":276},[483],{"type":173,"value":254},{"type":167,"tag":226,"props":485,"children":486},{"style":245},[487],{"type":173,"value":488},".",{"type":167,"tag":226,"props":490,"children":491},{"style":276},[492],{"type":173,"value":493},"timeout",{"type":167,"tag":226,"props":495,"children":496},{"style":282},[497],{"type":173,"value":343},{"type":167,"tag":226,"props":499,"children":501},{"style":500},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[502],{"type":173,"value":503}," 5000",{"type":167,"tag":226,"props":505,"children":506},{"style":293},[507],{"type":173,"value":259},{"type":167,"tag":226,"props":509,"children":510},{"style":245},[511],{"type":173,"value":512},",\n",{"type":167,"tag":226,"props":514,"children":516},{"class":228,"line":515},10,[517,522,526,530,534,538,543,547,552],{"type":167,"tag":226,"props":518,"children":519},{"style":293},[520],{"type":173,"value":521},"            retries",{"type":167,"tag":226,"props":523,"children":524},{"style":245},[525],{"type":173,"value":474},{"type":167,"tag":226,"props":527,"children":528},{"style":293},[529],{"type":173,"value":479},{"type":167,"tag":226,"props":531,"children":532},{"style":276},[533],{"type":173,"value":254},{"type":167,"tag":226,"props":535,"children":536},{"style":245},[537],{"type":173,"value":488},{"type":167,"tag":226,"props":539,"children":540},{"style":276},[541],{"type":173,"value":542},"retries",{"type":167,"tag":226,"props":544,"children":545},{"style":282},[546],{"type":173,"value":343},{"type":167,"tag":226,"props":548,"children":549},{"style":500},[550],{"type":173,"value":551}," 5",{"type":167,"tag":226,"props":553,"children":554},{"style":293},[555],{"type":173,"value":556},")\n",{"type":167,"tag":226,"props":558,"children":560},{"class":228,"line":559},11,[561,566,570],{"type":167,"tag":226,"props":562,"children":563},{"style":245},[564],{"type":173,"value":565},"        }",{"type":167,"tag":226,"props":567,"children":568},{"style":293},[569],{"type":173,"value":259},{"type":167,"tag":226,"props":571,"children":572},{"style":245},[573],{"type":173,"value":320},{"type":167,"tag":226,"props":575,"children":577},{"class":228,"line":576},12,[578],{"type":167,"tag":226,"props":579,"children":580},{"emptyLinePlaceholder":159},[581],{"type":173,"value":357},{"type":167,"tag":226,"props":583,"children":585},{"class":228,"line":584},13,[586],{"type":167,"tag":226,"props":587,"children":588},{"style":417},[589],{"type":173,"value":590},"        // Run the dns lowlevel lookup\n",{"type":167,"tag":226,"props":592,"children":594},{"class":228,"line":593},14,[595],{"type":167,"tag":226,"props":596,"children":597},{"style":417},[598],{"type":173,"value":599},"        // 默认 DNS 服务器地址是 8.8.8.8，请求 google.com\n",{"type":167,"tag":226,"props":601,"children":603},{"class":228,"line":602},15,[604],{"type":167,"tag":226,"props":605,"children":606},{"style":417},[607],{"type":173,"value":608},"        // 国内需要换成 114.114.114.114 & baidu.com，原因你懂\n",{"type":167,"tag":226,"props":610,"children":612},{"class":228,"line":611},16,[613,618,622,627,631],{"type":167,"tag":226,"props":614,"children":615},{"style":276},[616],{"type":173,"value":617},"        socket",{"type":167,"tag":226,"props":619,"children":620},{"style":245},[621],{"type":173,"value":488},{"type":167,"tag":226,"props":623,"children":624},{"style":239},[625],{"type":173,"value":626},"query",{"type":167,"tag":226,"props":628,"children":629},{"style":293},[630],{"type":173,"value":248},{"type":167,"tag":226,"props":632,"children":633},{"style":245},[634],{"type":173,"value":460},{"type":167,"tag":226,"props":636,"children":638},{"class":228,"line":637},17,[639,644,648,653],{"type":167,"tag":226,"props":640,"children":641},{"style":293},[642],{"type":173,"value":643},"            questions",{"type":167,"tag":226,"props":645,"children":646},{"style":245},[647],{"type":173,"value":474},{"type":167,"tag":226,"props":649,"children":650},{"style":293},[651],{"type":173,"value":652}," [",{"type":167,"tag":226,"props":654,"children":655},{"style":245},[656],{"type":173,"value":460},{"type":167,"tag":226,"props":658,"children":660},{"class":228,"line":659},18,[661,666,670,675,680,684],{"type":167,"tag":226,"props":662,"children":663},{"style":293},[664],{"type":173,"value":665},"                type",{"type":167,"tag":226,"props":667,"children":668},{"style":245},[669],{"type":173,"value":474},{"type":167,"tag":226,"props":671,"children":672},{"style":298},[673],{"type":173,"value":674}," '",{"type":167,"tag":226,"props":676,"children":677},{"style":304},[678],{"type":173,"value":679},"A",{"type":167,"tag":226,"props":681,"children":682},{"style":298},[683],{"type":173,"value":301},{"type":167,"tag":226,"props":685,"children":686},{"style":245},[687],{"type":173,"value":512},{"type":167,"tag":226,"props":689,"children":691},{"class":228,"line":690},19,[692,697,701,705,709,713,718,722,727,732,737],{"type":167,"tag":226,"props":693,"children":694},{"style":293},[695],{"type":173,"value":696},"                name",{"type":167,"tag":226,"props":698,"children":699},{"style":245},[700],{"type":173,"value":474},{"type":167,"tag":226,"props":702,"children":703},{"style":293},[704],{"type":173,"value":479},{"type":167,"tag":226,"props":706,"children":707},{"style":276},[708],{"type":173,"value":254},{"type":167,"tag":226,"props":710,"children":711},{"style":245},[712],{"type":173,"value":488},{"type":167,"tag":226,"props":714,"children":715},{"style":276},[716],{"type":173,"value":717},"domainName",{"type":167,"tag":226,"props":719,"children":720},{"style":282},[721],{"type":173,"value":343},{"type":167,"tag":226,"props":723,"children":724},{"style":298},[725],{"type":173,"value":726}," \"",{"type":167,"tag":226,"props":728,"children":729},{"style":304},[730],{"type":173,"value":731},"google.com",{"type":167,"tag":226,"props":733,"children":734},{"style":298},[735],{"type":173,"value":736},"\"",{"type":167,"tag":226,"props":738,"children":739},{"style":293},[740],{"type":173,"value":556},{"type":167,"tag":226,"props":742,"children":744},{"class":228,"line":743},20,[745,750],{"type":167,"tag":226,"props":746,"children":747},{"style":245},[748],{"type":173,"value":749},"            }",{"type":167,"tag":226,"props":751,"children":752},{"style":293},[753],{"type":173,"value":754},"]\n",{"type":167,"tag":226,"props":756,"children":758},{"class":228,"line":757},21,[759,764,768,772,776,781,785,790,794,798,802,806,810,815,819,823,828,832,837],{"type":167,"tag":226,"props":760,"children":761},{"style":245},[762],{"type":173,"value":763},"        },",{"type":167,"tag":226,"props":765,"children":766},{"style":293},[767],{"type":173,"value":479},{"type":167,"tag":226,"props":769,"children":770},{"style":276},[771],{"type":173,"value":254},{"type":167,"tag":226,"props":773,"children":774},{"style":245},[775],{"type":173,"value":488},{"type":167,"tag":226,"props":777,"children":778},{"style":276},[779],{"type":173,"value":780},"port",{"type":167,"tag":226,"props":782,"children":783},{"style":282},[784],{"type":173,"value":343},{"type":167,"tag":226,"props":786,"children":787},{"style":500},[788],{"type":173,"value":789}," 53",{"type":167,"tag":226,"props":791,"children":792},{"style":293},[793],{"type":173,"value":259},{"type":167,"tag":226,"props":795,"children":796},{"style":245},[797],{"type":173,"value":400},{"type":167,"tag":226,"props":799,"children":800},{"style":293},[801],{"type":173,"value":479},{"type":167,"tag":226,"props":803,"children":804},{"style":276},[805],{"type":173,"value":254},{"type":167,"tag":226,"props":807,"children":808},{"style":245},[809],{"type":173,"value":488},{"type":167,"tag":226,"props":811,"children":812},{"style":276},[813],{"type":173,"value":814},"host",{"type":167,"tag":226,"props":816,"children":817},{"style":282},[818],{"type":173,"value":343},{"type":167,"tag":226,"props":820,"children":821},{"style":298},[822],{"type":173,"value":674},{"type":167,"tag":226,"props":824,"children":825},{"style":304},[826],{"type":173,"value":827},"8.8.8.8",{"type":167,"tag":226,"props":829,"children":830},{"style":298},[831],{"type":173,"value":301},{"type":167,"tag":226,"props":833,"children":834},{"style":293},[835],{"type":173,"value":836},"))",{"type":167,"tag":226,"props":838,"children":839},{"style":245},[840],{"type":173,"value":320},{"type":167,"tag":226,"props":842,"children":844},{"class":228,"line":843},22,[845],{"type":167,"tag":226,"props":846,"children":847},{"emptyLinePlaceholder":159},[848],{"type":173,"value":357},{"type":167,"tag":226,"props":850,"children":852},{"class":228,"line":851},23,[853],{"type":167,"tag":226,"props":854,"children":855},{"style":417},[856],{"type":173,"value":857},"        // DNS Address solved, internet available\n",{"type":167,"tag":226,"props":859,"children":861},{"class":228,"line":860},24,[862,866,870,875,879,883,888,892,896,901,906,911],{"type":167,"tag":226,"props":863,"children":864},{"style":276},[865],{"type":173,"value":617},{"type":167,"tag":226,"props":867,"children":868},{"style":245},[869],{"type":173,"value":488},{"type":167,"tag":226,"props":871,"children":872},{"style":239},[873],{"type":173,"value":874},"on",{"type":167,"tag":226,"props":876,"children":877},{"style":293},[878],{"type":173,"value":248},{"type":167,"tag":226,"props":880,"children":881},{"style":298},[882],{"type":173,"value":301},{"type":167,"tag":226,"props":884,"children":885},{"style":304},[886],{"type":173,"value":887},"response",{"type":167,"tag":226,"props":889,"children":890},{"style":298},[891],{"type":173,"value":301},{"type":167,"tag":226,"props":893,"children":894},{"style":245},[895],{"type":173,"value":400},{"type":167,"tag":226,"props":897,"children":898},{"style":245},[899],{"type":173,"value":900}," ()",{"type":167,"tag":226,"props":902,"children":903},{"style":233},[904],{"type":173,"value":905}," =>",{"type":167,"tag":226,"props":907,"children":908},{"style":245},[909],{"type":173,"value":910}," {",{"type":167,"tag":226,"props":912,"children":913},{"style":293},[914],{"type":173,"value":915}," \n",{"type":167,"tag":226,"props":917,"children":919},{"class":228,"line":918},25,[920,925,929,934,938,943,947],{"type":167,"tag":226,"props":921,"children":922},{"style":276},[923],{"type":173,"value":924},"            socket",{"type":167,"tag":226,"props":926,"children":927},{"style":245},[928],{"type":173,"value":488},{"type":167,"tag":226,"props":930,"children":931},{"style":239},[932],{"type":173,"value":933},"destroy",{"type":167,"tag":226,"props":935,"children":936},{"style":293},[937],{"type":173,"value":248},{"type":167,"tag":226,"props":939,"children":940},{"style":245},[941],{"type":173,"value":942},"()",{"type":167,"tag":226,"props":944,"children":945},{"style":233},[946],{"type":173,"value":905},{"type":167,"tag":226,"props":948,"children":949},{"style":245},[950],{"type":173,"value":264},{"type":167,"tag":226,"props":952,"children":954},{"class":228,"line":953},26,[955,960,964],{"type":167,"tag":226,"props":956,"children":957},{"style":239},[958],{"type":173,"value":959},"                resolve",{"type":167,"tag":226,"props":961,"children":962},{"style":293},[963],{"type":173,"value":942},{"type":167,"tag":226,"props":965,"children":966},{"style":245},[967],{"type":173,"value":320},{"type":167,"tag":226,"props":969,"children":971},{"class":228,"line":970},27,[972,976,980],{"type":167,"tag":226,"props":973,"children":974},{"style":245},[975],{"type":173,"value":749},{"type":167,"tag":226,"props":977,"children":978},{"style":293},[979],{"type":173,"value":259},{"type":167,"tag":226,"props":981,"children":982},{"style":245},[983],{"type":173,"value":320},{"type":167,"tag":226,"props":985,"children":987},{"class":228,"line":986},28,[988,992,996],{"type":167,"tag":226,"props":989,"children":990},{"style":245},[991],{"type":173,"value":565},{"type":167,"tag":226,"props":993,"children":994},{"style":293},[995],{"type":173,"value":259},{"type":167,"tag":226,"props":997,"children":998},{"style":245},[999],{"type":173,"value":320},{"type":167,"tag":226,"props":1001,"children":1003},{"class":228,"line":1002},29,[1004],{"type":167,"tag":226,"props":1005,"children":1006},{"emptyLinePlaceholder":159},[1007],{"type":173,"value":357},{"type":167,"tag":226,"props":1009,"children":1011},{"class":228,"line":1010},30,[1012],{"type":167,"tag":226,"props":1013,"children":1014},{"style":417},[1015],{"type":173,"value":1016},"        // Verify for timeout of the request (cannot reach server)\n",{"type":167,"tag":226,"props":1018,"children":1020},{"class":228,"line":1019},31,[1021,1025,1029,1033,1037,1041,1045,1049,1053,1057,1061],{"type":167,"tag":226,"props":1022,"children":1023},{"style":276},[1024],{"type":173,"value":617},{"type":167,"tag":226,"props":1026,"children":1027},{"style":245},[1028],{"type":173,"value":488},{"type":167,"tag":226,"props":1030,"children":1031},{"style":239},[1032],{"type":173,"value":874},{"type":167,"tag":226,"props":1034,"children":1035},{"style":293},[1036],{"type":173,"value":248},{"type":167,"tag":226,"props":1038,"children":1039},{"style":298},[1040],{"type":173,"value":301},{"type":167,"tag":226,"props":1042,"children":1043},{"style":304},[1044],{"type":173,"value":493},{"type":167,"tag":226,"props":1046,"children":1047},{"style":298},[1048],{"type":173,"value":301},{"type":167,"tag":226,"props":1050,"children":1051},{"style":245},[1052],{"type":173,"value":400},{"type":167,"tag":226,"props":1054,"children":1055},{"style":245},[1056],{"type":173,"value":900},{"type":167,"tag":226,"props":1058,"children":1059},{"style":233},[1060],{"type":173,"value":905},{"type":167,"tag":226,"props":1062,"children":1063},{"style":245},[1064],{"type":173,"value":264},{"type":167,"tag":226,"props":1066,"children":1068},{"class":228,"line":1067},32,[1069,1073,1077,1081,1085,1089,1093],{"type":167,"tag":226,"props":1070,"children":1071},{"style":276},[1072],{"type":173,"value":924},{"type":167,"tag":226,"props":1074,"children":1075},{"style":245},[1076],{"type":173,"value":488},{"type":167,"tag":226,"props":1078,"children":1079},{"style":239},[1080],{"type":173,"value":933},{"type":167,"tag":226,"props":1082,"children":1083},{"style":293},[1084],{"type":173,"value":248},{"type":167,"tag":226,"props":1086,"children":1087},{"style":245},[1088],{"type":173,"value":942},{"type":167,"tag":226,"props":1090,"children":1091},{"style":233},[1092],{"type":173,"value":905},{"type":167,"tag":226,"props":1094,"children":1095},{"style":245},[1096],{"type":173,"value":264},{"type":167,"tag":226,"props":1098,"children":1100},{"class":228,"line":1099},33,[1101,1106,1110],{"type":167,"tag":226,"props":1102,"children":1103},{"style":239},[1104],{"type":173,"value":1105},"                reject",{"type":167,"tag":226,"props":1107,"children":1108},{"style":293},[1109],{"type":173,"value":942},{"type":167,"tag":226,"props":1111,"children":1112},{"style":245},[1113],{"type":173,"value":320},{"type":167,"tag":226,"props":1115,"children":1117},{"class":228,"line":1116},34,[1118,1122,1126],{"type":167,"tag":226,"props":1119,"children":1120},{"style":245},[1121],{"type":173,"value":749},{"type":167,"tag":226,"props":1123,"children":1124},{"style":293},[1125],{"type":173,"value":259},{"type":167,"tag":226,"props":1127,"children":1128},{"style":245},[1129],{"type":173,"value":320},{"type":167,"tag":226,"props":1131,"children":1133},{"class":228,"line":1132},35,[1134,1138,1142],{"type":167,"tag":226,"props":1135,"children":1136},{"style":245},[1137],{"type":173,"value":565},{"type":167,"tag":226,"props":1139,"children":1140},{"style":293},[1141],{"type":173,"value":259},{"type":167,"tag":226,"props":1143,"children":1144},{"style":245},[1145],{"type":173,"value":320},{"type":167,"tag":226,"props":1147,"children":1149},{"class":228,"line":1148},36,[1150,1155,1159],{"type":167,"tag":226,"props":1151,"children":1152},{"style":245},[1153],{"type":173,"value":1154},"    }",{"type":167,"tag":226,"props":1156,"children":1157},{"style":293},[1158],{"type":173,"value":259},{"type":167,"tag":226,"props":1160,"children":1161},{"style":245},[1162],{"type":173,"value":320},{"type":167,"tag":226,"props":1164,"children":1166},{"class":228,"line":1165},37,[1167],{"type":167,"tag":226,"props":1168,"children":1169},{"style":245},[1170],{"type":173,"value":1171},"}\n",{"type":167,"tag":175,"props":1173,"children":1174},{},[1175,1177,1183],{"type":173,"value":1176},"唯一的问题是，internet-available 引用的 ",{"type":167,"tag":195,"props":1178,"children":1181},{"href":1179,"rel":1180},"https://github.com/mafintosh/dns-socket/blob/master/index.js",[199],[1182],{"type":173,"value":307},{"type":173,"value":1184}," 这个库解决了什么问题。dns-socket 主页上说，它是一个带有超时和重试功能的接近底层的 DNS 请求库，那可以想象 NodeJS 的 DNS 模块应该就缺失了超时功能。关于 DNS 超时这个问题，AlienZHOU 大的博客有提到。可以从文末引用中查看更多详细信息。",{"type":167,"tag":175,"props":1186,"children":1187},{},[1188,1190,1197],{"type":173,"value":1189},"从源码来看，dns-socket 是一个使用 UDP 封装的 DNS 请求库，其中，DNS 报文的解析使用了同作者的 ",{"type":167,"tag":195,"props":1191,"children":1194},{"href":1192,"rel":1193},"https://github.com/mafintosh/dns-packet",[199],[1195],{"type":173,"value":1196},"dns-packet",{"type":173,"value":1198}," 这个库（这个作者还真是为了改善 NodeJS 的 DNS 尽心尽力哈...）。",{"type":167,"tag":180,"props":1200,"children":1202},{"id":1201},"阅读更多",[1203],{"type":173,"value":1201},{"type":167,"tag":1205,"props":1206,"children":1207},"ul",{},[1208],{"type":167,"tag":1209,"props":1210,"children":1211},"li",{},[1212],{"type":167,"tag":195,"props":1213,"children":1216},{"href":1214,"rel":1215},"https://www.jianshu.com/p/693a5d378a2c",[199],[1217],{"type":173,"value":1218},"AlienZHOU：NodeJS 中 DNS 查询的坑 & DNS cache 分析",{"type":167,"tag":1220,"props":1221,"children":1222},"style",{},[1223],{"type":173,"value":1224},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":160,"searchDepth":267,"depth":267,"links":1226},[1227,1231],{"id":182,"depth":267,"text":182,"children":1228},[1229,1230],{"id":188,"depth":323,"text":188},{"id":206,"depth":323,"text":206},{"id":1201,"depth":267,"text":1201},"markdown","content:8.source-code:_module:is-online.md","content","8.source-code/_module/is-online.md","8.source-code/_module/is-online","md",[1239,1242],{"_path":1240,"title":1241,"description":160},"/source-code/_module/html5shiv","🛠 低版本浏览器兼容HTML5标签原理",{"_path":1243,"title":1244,"description":1245},"/source-code/_node/node-watch","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",1742348701480]