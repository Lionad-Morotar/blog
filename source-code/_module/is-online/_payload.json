[{"data":1,"prerenderedAt":1249},["ShallowReactive",2],{"navigation":3,"/source-code/_module/is-online":158,"/source-code/_module/is-online-surround":1241},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":1235,"_id":1236,"_source":1237,"_file":1238,"_stem":1239,"_extension":1240},"/source-code/_module/is-online","_module",false,true,"","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"type":167,"children":168,"toc":1228},"root",[169,177,182,188,194,207,212,217,1175,1188,1202,1207,1222],{"type":170,"tag":171,"props":172,"children":174},"element","h1",{"id":173},"判断-nodejs-是否在线",[175],{"type":176,"value":164},"text",{"type":170,"tag":178,"props":179,"children":180},"p",{},[181],{"type":176,"value":165},{"type":170,"tag":183,"props":184,"children":186},"h2",{"id":185},"internet-available",[187],{"type":176,"value":185},{"type":170,"tag":189,"props":190,"children":192},"h3",{"id":191},"长话短说",[193],{"type":176,"value":191},{"type":170,"tag":178,"props":195,"children":196},{},[197,205],{"type":170,"tag":198,"props":199,"children":203},"a",{"href":200,"rel":201},"https://github.com/ourcodeworld/internet-available/blob/master/internet-available.js",[202],"nofollow",[204],{"type":176,"value":185},{"type":176,"value":206}," 使用 dns-socket 库去发起一个 google.com 的 DNS 请求。请求成功则确认服务器在线，超时则确认服务器离线。",{"type":170,"tag":189,"props":208,"children":210},{"id":209},"实现",[211],{"type":176,"value":209},{"type":170,"tag":178,"props":213,"children":214},{},[215],{"type":176,"value":216},"代码实现非常简单，不过 20 行。",{"type":170,"tag":218,"props":219,"children":223},"pre",{"className":220,"code":221,"language":222,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function internetAvailable(settings) {\n    var dns = require('dns-socket');\n    settings = settings || {};\n\n    return new Promise(function(resolve, reject){\n        // Create instance of the DNS resolver\n        // 默认超时五秒；重试次数五次\n        var socket = dns({\n            timeout: (settings.timeout || 5000),\n            retries: (settings.retries || 5)\n        });\n\n        // Run the dns lowlevel lookup\n        // 默认 DNS 服务器地址是 8.8.8.8，请求 google.com\n        // 国内需要换成 114.114.114.114 & baidu.com，原因你懂\n        socket.query({\n            questions: [{\n                type: 'A',\n                name: (settings.domainName || \"google.com\")\n            }]\n        }, (settings.port || 53), (settings.host || '8.8.8.8'));\n\n        // DNS Address solved, internet available\n        socket.on('response', () => { \n            socket.destroy(() => {\n                resolve();\n            });\n        });\n\n        // Verify for timeout of the request (cannot reach server)\n        socket.on('timeout', () => {\n            socket.destroy(() => {\n                reject();\n            });\n        });\n    });\n}\n","js",[224],{"type":170,"tag":225,"props":226,"children":227},"code",{"__ignoreMap":163},[228,268,324,352,361,414,424,433,464,516,560,577,585,594,603,612,638,660,691,744,758,844,852,861,919,954,971,987,1003,1011,1020,1068,1100,1117,1133,1149,1166],{"type":170,"tag":229,"props":230,"children":233},"span",{"class":231,"line":232},"line",1,[234,240,246,252,258,263],{"type":170,"tag":229,"props":235,"children":237},{"style":236},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[238],{"type":176,"value":239},"function",{"type":170,"tag":229,"props":241,"children":243},{"style":242},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[244],{"type":176,"value":245}," internetAvailable",{"type":170,"tag":229,"props":247,"children":249},{"style":248},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[250],{"type":176,"value":251},"(",{"type":170,"tag":229,"props":253,"children":255},{"style":254},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[256],{"type":176,"value":257},"settings",{"type":170,"tag":229,"props":259,"children":260},{"style":248},[261],{"type":176,"value":262},")",{"type":170,"tag":229,"props":264,"children":265},{"style":248},[266],{"type":176,"value":267}," {\n",{"type":170,"tag":229,"props":269,"children":271},{"class":231,"line":270},2,[272,277,283,289,294,299,305,311,315,319],{"type":170,"tag":229,"props":273,"children":274},{"style":236},[275],{"type":176,"value":276},"    var",{"type":170,"tag":229,"props":278,"children":280},{"style":279},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[281],{"type":176,"value":282}," dns",{"type":170,"tag":229,"props":284,"children":286},{"style":285},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[287],{"type":176,"value":288}," =",{"type":170,"tag":229,"props":290,"children":291},{"style":242},[292],{"type":176,"value":293}," require",{"type":170,"tag":229,"props":295,"children":297},{"style":296},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[298],{"type":176,"value":251},{"type":170,"tag":229,"props":300,"children":302},{"style":301},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[303],{"type":176,"value":304},"'",{"type":170,"tag":229,"props":306,"children":308},{"style":307},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[309],{"type":176,"value":310},"dns-socket",{"type":170,"tag":229,"props":312,"children":313},{"style":301},[314],{"type":176,"value":304},{"type":170,"tag":229,"props":316,"children":317},{"style":296},[318],{"type":176,"value":262},{"type":170,"tag":229,"props":320,"children":321},{"style":248},[322],{"type":176,"value":323},";\n",{"type":170,"tag":229,"props":325,"children":327},{"class":231,"line":326},3,[328,333,337,342,347],{"type":170,"tag":229,"props":329,"children":330},{"style":279},[331],{"type":176,"value":332},"    settings",{"type":170,"tag":229,"props":334,"children":335},{"style":285},[336],{"type":176,"value":288},{"type":170,"tag":229,"props":338,"children":339},{"style":279},[340],{"type":176,"value":341}," settings",{"type":170,"tag":229,"props":343,"children":344},{"style":285},[345],{"type":176,"value":346}," ||",{"type":170,"tag":229,"props":348,"children":349},{"style":248},[350],{"type":176,"value":351}," {};\n",{"type":170,"tag":229,"props":353,"children":355},{"class":231,"line":354},4,[356],{"type":170,"tag":229,"props":357,"children":358},{"emptyLinePlaceholder":162},[359],{"type":176,"value":360},"\n",{"type":170,"tag":229,"props":362,"children":364},{"class":231,"line":363},5,[365,371,376,382,386,390,394,399,404,409],{"type":170,"tag":229,"props":366,"children":368},{"style":367},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[369],{"type":176,"value":370},"    return",{"type":170,"tag":229,"props":372,"children":373},{"style":285},[374],{"type":176,"value":375}," new",{"type":170,"tag":229,"props":377,"children":379},{"style":378},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[380],{"type":176,"value":381}," Promise",{"type":170,"tag":229,"props":383,"children":384},{"style":296},[385],{"type":176,"value":251},{"type":170,"tag":229,"props":387,"children":388},{"style":236},[389],{"type":176,"value":239},{"type":170,"tag":229,"props":391,"children":392},{"style":248},[393],{"type":176,"value":251},{"type":170,"tag":229,"props":395,"children":396},{"style":254},[397],{"type":176,"value":398},"resolve",{"type":170,"tag":229,"props":400,"children":401},{"style":248},[402],{"type":176,"value":403},",",{"type":170,"tag":229,"props":405,"children":406},{"style":254},[407],{"type":176,"value":408}," reject",{"type":170,"tag":229,"props":410,"children":411},{"style":248},[412],{"type":176,"value":413},"){\n",{"type":170,"tag":229,"props":415,"children":417},{"class":231,"line":416},6,[418],{"type":170,"tag":229,"props":419,"children":421},{"style":420},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[422],{"type":176,"value":423},"        // Create instance of the DNS resolver\n",{"type":170,"tag":229,"props":425,"children":427},{"class":231,"line":426},7,[428],{"type":170,"tag":229,"props":429,"children":430},{"style":420},[431],{"type":176,"value":432},"        // 默认超时五秒；重试次数五次\n",{"type":170,"tag":229,"props":434,"children":436},{"class":231,"line":435},8,[437,442,447,451,455,459],{"type":170,"tag":229,"props":438,"children":439},{"style":236},[440],{"type":176,"value":441},"        var",{"type":170,"tag":229,"props":443,"children":444},{"style":279},[445],{"type":176,"value":446}," socket",{"type":170,"tag":229,"props":448,"children":449},{"style":285},[450],{"type":176,"value":288},{"type":170,"tag":229,"props":452,"children":453},{"style":242},[454],{"type":176,"value":282},{"type":170,"tag":229,"props":456,"children":457},{"style":296},[458],{"type":176,"value":251},{"type":170,"tag":229,"props":460,"children":461},{"style":248},[462],{"type":176,"value":463},"{\n",{"type":170,"tag":229,"props":465,"children":467},{"class":231,"line":466},9,[468,473,478,483,487,492,497,501,507,511],{"type":170,"tag":229,"props":469,"children":470},{"style":296},[471],{"type":176,"value":472},"            timeout",{"type":170,"tag":229,"props":474,"children":475},{"style":248},[476],{"type":176,"value":477},":",{"type":170,"tag":229,"props":479,"children":480},{"style":296},[481],{"type":176,"value":482}," (",{"type":170,"tag":229,"props":484,"children":485},{"style":279},[486],{"type":176,"value":257},{"type":170,"tag":229,"props":488,"children":489},{"style":248},[490],{"type":176,"value":491},".",{"type":170,"tag":229,"props":493,"children":494},{"style":279},[495],{"type":176,"value":496},"timeout",{"type":170,"tag":229,"props":498,"children":499},{"style":285},[500],{"type":176,"value":346},{"type":170,"tag":229,"props":502,"children":504},{"style":503},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[505],{"type":176,"value":506}," 5000",{"type":170,"tag":229,"props":508,"children":509},{"style":296},[510],{"type":176,"value":262},{"type":170,"tag":229,"props":512,"children":513},{"style":248},[514],{"type":176,"value":515},",\n",{"type":170,"tag":229,"props":517,"children":519},{"class":231,"line":518},10,[520,525,529,533,537,541,546,550,555],{"type":170,"tag":229,"props":521,"children":522},{"style":296},[523],{"type":176,"value":524},"            retries",{"type":170,"tag":229,"props":526,"children":527},{"style":248},[528],{"type":176,"value":477},{"type":170,"tag":229,"props":530,"children":531},{"style":296},[532],{"type":176,"value":482},{"type":170,"tag":229,"props":534,"children":535},{"style":279},[536],{"type":176,"value":257},{"type":170,"tag":229,"props":538,"children":539},{"style":248},[540],{"type":176,"value":491},{"type":170,"tag":229,"props":542,"children":543},{"style":279},[544],{"type":176,"value":545},"retries",{"type":170,"tag":229,"props":547,"children":548},{"style":285},[549],{"type":176,"value":346},{"type":170,"tag":229,"props":551,"children":552},{"style":503},[553],{"type":176,"value":554}," 5",{"type":170,"tag":229,"props":556,"children":557},{"style":296},[558],{"type":176,"value":559},")\n",{"type":170,"tag":229,"props":561,"children":563},{"class":231,"line":562},11,[564,569,573],{"type":170,"tag":229,"props":565,"children":566},{"style":248},[567],{"type":176,"value":568},"        }",{"type":170,"tag":229,"props":570,"children":571},{"style":296},[572],{"type":176,"value":262},{"type":170,"tag":229,"props":574,"children":575},{"style":248},[576],{"type":176,"value":323},{"type":170,"tag":229,"props":578,"children":580},{"class":231,"line":579},12,[581],{"type":170,"tag":229,"props":582,"children":583},{"emptyLinePlaceholder":162},[584],{"type":176,"value":360},{"type":170,"tag":229,"props":586,"children":588},{"class":231,"line":587},13,[589],{"type":170,"tag":229,"props":590,"children":591},{"style":420},[592],{"type":176,"value":593},"        // Run the dns lowlevel lookup\n",{"type":170,"tag":229,"props":595,"children":597},{"class":231,"line":596},14,[598],{"type":170,"tag":229,"props":599,"children":600},{"style":420},[601],{"type":176,"value":602},"        // 默认 DNS 服务器地址是 8.8.8.8，请求 google.com\n",{"type":170,"tag":229,"props":604,"children":606},{"class":231,"line":605},15,[607],{"type":170,"tag":229,"props":608,"children":609},{"style":420},[610],{"type":176,"value":611},"        // 国内需要换成 114.114.114.114 & baidu.com，原因你懂\n",{"type":170,"tag":229,"props":613,"children":615},{"class":231,"line":614},16,[616,621,625,630,634],{"type":170,"tag":229,"props":617,"children":618},{"style":279},[619],{"type":176,"value":620},"        socket",{"type":170,"tag":229,"props":622,"children":623},{"style":248},[624],{"type":176,"value":491},{"type":170,"tag":229,"props":626,"children":627},{"style":242},[628],{"type":176,"value":629},"query",{"type":170,"tag":229,"props":631,"children":632},{"style":296},[633],{"type":176,"value":251},{"type":170,"tag":229,"props":635,"children":636},{"style":248},[637],{"type":176,"value":463},{"type":170,"tag":229,"props":639,"children":641},{"class":231,"line":640},17,[642,647,651,656],{"type":170,"tag":229,"props":643,"children":644},{"style":296},[645],{"type":176,"value":646},"            questions",{"type":170,"tag":229,"props":648,"children":649},{"style":248},[650],{"type":176,"value":477},{"type":170,"tag":229,"props":652,"children":653},{"style":296},[654],{"type":176,"value":655}," [",{"type":170,"tag":229,"props":657,"children":658},{"style":248},[659],{"type":176,"value":463},{"type":170,"tag":229,"props":661,"children":663},{"class":231,"line":662},18,[664,669,673,678,683,687],{"type":170,"tag":229,"props":665,"children":666},{"style":296},[667],{"type":176,"value":668},"                type",{"type":170,"tag":229,"props":670,"children":671},{"style":248},[672],{"type":176,"value":477},{"type":170,"tag":229,"props":674,"children":675},{"style":301},[676],{"type":176,"value":677}," '",{"type":170,"tag":229,"props":679,"children":680},{"style":307},[681],{"type":176,"value":682},"A",{"type":170,"tag":229,"props":684,"children":685},{"style":301},[686],{"type":176,"value":304},{"type":170,"tag":229,"props":688,"children":689},{"style":248},[690],{"type":176,"value":515},{"type":170,"tag":229,"props":692,"children":694},{"class":231,"line":693},19,[695,700,704,708,712,716,721,725,730,735,740],{"type":170,"tag":229,"props":696,"children":697},{"style":296},[698],{"type":176,"value":699},"                name",{"type":170,"tag":229,"props":701,"children":702},{"style":248},[703],{"type":176,"value":477},{"type":170,"tag":229,"props":705,"children":706},{"style":296},[707],{"type":176,"value":482},{"type":170,"tag":229,"props":709,"children":710},{"style":279},[711],{"type":176,"value":257},{"type":170,"tag":229,"props":713,"children":714},{"style":248},[715],{"type":176,"value":491},{"type":170,"tag":229,"props":717,"children":718},{"style":279},[719],{"type":176,"value":720},"domainName",{"type":170,"tag":229,"props":722,"children":723},{"style":285},[724],{"type":176,"value":346},{"type":170,"tag":229,"props":726,"children":727},{"style":301},[728],{"type":176,"value":729}," \"",{"type":170,"tag":229,"props":731,"children":732},{"style":307},[733],{"type":176,"value":734},"google.com",{"type":170,"tag":229,"props":736,"children":737},{"style":301},[738],{"type":176,"value":739},"\"",{"type":170,"tag":229,"props":741,"children":742},{"style":296},[743],{"type":176,"value":559},{"type":170,"tag":229,"props":745,"children":747},{"class":231,"line":746},20,[748,753],{"type":170,"tag":229,"props":749,"children":750},{"style":248},[751],{"type":176,"value":752},"            }",{"type":170,"tag":229,"props":754,"children":755},{"style":296},[756],{"type":176,"value":757},"]\n",{"type":170,"tag":229,"props":759,"children":761},{"class":231,"line":760},21,[762,767,771,775,779,784,788,793,797,801,805,809,813,818,822,826,831,835,840],{"type":170,"tag":229,"props":763,"children":764},{"style":248},[765],{"type":176,"value":766},"        },",{"type":170,"tag":229,"props":768,"children":769},{"style":296},[770],{"type":176,"value":482},{"type":170,"tag":229,"props":772,"children":773},{"style":279},[774],{"type":176,"value":257},{"type":170,"tag":229,"props":776,"children":777},{"style":248},[778],{"type":176,"value":491},{"type":170,"tag":229,"props":780,"children":781},{"style":279},[782],{"type":176,"value":783},"port",{"type":170,"tag":229,"props":785,"children":786},{"style":285},[787],{"type":176,"value":346},{"type":170,"tag":229,"props":789,"children":790},{"style":503},[791],{"type":176,"value":792}," 53",{"type":170,"tag":229,"props":794,"children":795},{"style":296},[796],{"type":176,"value":262},{"type":170,"tag":229,"props":798,"children":799},{"style":248},[800],{"type":176,"value":403},{"type":170,"tag":229,"props":802,"children":803},{"style":296},[804],{"type":176,"value":482},{"type":170,"tag":229,"props":806,"children":807},{"style":279},[808],{"type":176,"value":257},{"type":170,"tag":229,"props":810,"children":811},{"style":248},[812],{"type":176,"value":491},{"type":170,"tag":229,"props":814,"children":815},{"style":279},[816],{"type":176,"value":817},"host",{"type":170,"tag":229,"props":819,"children":820},{"style":285},[821],{"type":176,"value":346},{"type":170,"tag":229,"props":823,"children":824},{"style":301},[825],{"type":176,"value":677},{"type":170,"tag":229,"props":827,"children":828},{"style":307},[829],{"type":176,"value":830},"8.8.8.8",{"type":170,"tag":229,"props":832,"children":833},{"style":301},[834],{"type":176,"value":304},{"type":170,"tag":229,"props":836,"children":837},{"style":296},[838],{"type":176,"value":839},"))",{"type":170,"tag":229,"props":841,"children":842},{"style":248},[843],{"type":176,"value":323},{"type":170,"tag":229,"props":845,"children":847},{"class":231,"line":846},22,[848],{"type":170,"tag":229,"props":849,"children":850},{"emptyLinePlaceholder":162},[851],{"type":176,"value":360},{"type":170,"tag":229,"props":853,"children":855},{"class":231,"line":854},23,[856],{"type":170,"tag":229,"props":857,"children":858},{"style":420},[859],{"type":176,"value":860},"        // DNS Address solved, internet available\n",{"type":170,"tag":229,"props":862,"children":864},{"class":231,"line":863},24,[865,869,873,878,882,886,891,895,899,904,909,914],{"type":170,"tag":229,"props":866,"children":867},{"style":279},[868],{"type":176,"value":620},{"type":170,"tag":229,"props":870,"children":871},{"style":248},[872],{"type":176,"value":491},{"type":170,"tag":229,"props":874,"children":875},{"style":242},[876],{"type":176,"value":877},"on",{"type":170,"tag":229,"props":879,"children":880},{"style":296},[881],{"type":176,"value":251},{"type":170,"tag":229,"props":883,"children":884},{"style":301},[885],{"type":176,"value":304},{"type":170,"tag":229,"props":887,"children":888},{"style":307},[889],{"type":176,"value":890},"response",{"type":170,"tag":229,"props":892,"children":893},{"style":301},[894],{"type":176,"value":304},{"type":170,"tag":229,"props":896,"children":897},{"style":248},[898],{"type":176,"value":403},{"type":170,"tag":229,"props":900,"children":901},{"style":248},[902],{"type":176,"value":903}," ()",{"type":170,"tag":229,"props":905,"children":906},{"style":236},[907],{"type":176,"value":908}," =>",{"type":170,"tag":229,"props":910,"children":911},{"style":248},[912],{"type":176,"value":913}," {",{"type":170,"tag":229,"props":915,"children":916},{"style":296},[917],{"type":176,"value":918}," \n",{"type":170,"tag":229,"props":920,"children":922},{"class":231,"line":921},25,[923,928,932,937,941,946,950],{"type":170,"tag":229,"props":924,"children":925},{"style":279},[926],{"type":176,"value":927},"            socket",{"type":170,"tag":229,"props":929,"children":930},{"style":248},[931],{"type":176,"value":491},{"type":170,"tag":229,"props":933,"children":934},{"style":242},[935],{"type":176,"value":936},"destroy",{"type":170,"tag":229,"props":938,"children":939},{"style":296},[940],{"type":176,"value":251},{"type":170,"tag":229,"props":942,"children":943},{"style":248},[944],{"type":176,"value":945},"()",{"type":170,"tag":229,"props":947,"children":948},{"style":236},[949],{"type":176,"value":908},{"type":170,"tag":229,"props":951,"children":952},{"style":248},[953],{"type":176,"value":267},{"type":170,"tag":229,"props":955,"children":957},{"class":231,"line":956},26,[958,963,967],{"type":170,"tag":229,"props":959,"children":960},{"style":242},[961],{"type":176,"value":962},"                resolve",{"type":170,"tag":229,"props":964,"children":965},{"style":296},[966],{"type":176,"value":945},{"type":170,"tag":229,"props":968,"children":969},{"style":248},[970],{"type":176,"value":323},{"type":170,"tag":229,"props":972,"children":974},{"class":231,"line":973},27,[975,979,983],{"type":170,"tag":229,"props":976,"children":977},{"style":248},[978],{"type":176,"value":752},{"type":170,"tag":229,"props":980,"children":981},{"style":296},[982],{"type":176,"value":262},{"type":170,"tag":229,"props":984,"children":985},{"style":248},[986],{"type":176,"value":323},{"type":170,"tag":229,"props":988,"children":990},{"class":231,"line":989},28,[991,995,999],{"type":170,"tag":229,"props":992,"children":993},{"style":248},[994],{"type":176,"value":568},{"type":170,"tag":229,"props":996,"children":997},{"style":296},[998],{"type":176,"value":262},{"type":170,"tag":229,"props":1000,"children":1001},{"style":248},[1002],{"type":176,"value":323},{"type":170,"tag":229,"props":1004,"children":1006},{"class":231,"line":1005},29,[1007],{"type":170,"tag":229,"props":1008,"children":1009},{"emptyLinePlaceholder":162},[1010],{"type":176,"value":360},{"type":170,"tag":229,"props":1012,"children":1014},{"class":231,"line":1013},30,[1015],{"type":170,"tag":229,"props":1016,"children":1017},{"style":420},[1018],{"type":176,"value":1019},"        // Verify for timeout of the request (cannot reach server)\n",{"type":170,"tag":229,"props":1021,"children":1023},{"class":231,"line":1022},31,[1024,1028,1032,1036,1040,1044,1048,1052,1056,1060,1064],{"type":170,"tag":229,"props":1025,"children":1026},{"style":279},[1027],{"type":176,"value":620},{"type":170,"tag":229,"props":1029,"children":1030},{"style":248},[1031],{"type":176,"value":491},{"type":170,"tag":229,"props":1033,"children":1034},{"style":242},[1035],{"type":176,"value":877},{"type":170,"tag":229,"props":1037,"children":1038},{"style":296},[1039],{"type":176,"value":251},{"type":170,"tag":229,"props":1041,"children":1042},{"style":301},[1043],{"type":176,"value":304},{"type":170,"tag":229,"props":1045,"children":1046},{"style":307},[1047],{"type":176,"value":496},{"type":170,"tag":229,"props":1049,"children":1050},{"style":301},[1051],{"type":176,"value":304},{"type":170,"tag":229,"props":1053,"children":1054},{"style":248},[1055],{"type":176,"value":403},{"type":170,"tag":229,"props":1057,"children":1058},{"style":248},[1059],{"type":176,"value":903},{"type":170,"tag":229,"props":1061,"children":1062},{"style":236},[1063],{"type":176,"value":908},{"type":170,"tag":229,"props":1065,"children":1066},{"style":248},[1067],{"type":176,"value":267},{"type":170,"tag":229,"props":1069,"children":1071},{"class":231,"line":1070},32,[1072,1076,1080,1084,1088,1092,1096],{"type":170,"tag":229,"props":1073,"children":1074},{"style":279},[1075],{"type":176,"value":927},{"type":170,"tag":229,"props":1077,"children":1078},{"style":248},[1079],{"type":176,"value":491},{"type":170,"tag":229,"props":1081,"children":1082},{"style":242},[1083],{"type":176,"value":936},{"type":170,"tag":229,"props":1085,"children":1086},{"style":296},[1087],{"type":176,"value":251},{"type":170,"tag":229,"props":1089,"children":1090},{"style":248},[1091],{"type":176,"value":945},{"type":170,"tag":229,"props":1093,"children":1094},{"style":236},[1095],{"type":176,"value":908},{"type":170,"tag":229,"props":1097,"children":1098},{"style":248},[1099],{"type":176,"value":267},{"type":170,"tag":229,"props":1101,"children":1103},{"class":231,"line":1102},33,[1104,1109,1113],{"type":170,"tag":229,"props":1105,"children":1106},{"style":242},[1107],{"type":176,"value":1108},"                reject",{"type":170,"tag":229,"props":1110,"children":1111},{"style":296},[1112],{"type":176,"value":945},{"type":170,"tag":229,"props":1114,"children":1115},{"style":248},[1116],{"type":176,"value":323},{"type":170,"tag":229,"props":1118,"children":1120},{"class":231,"line":1119},34,[1121,1125,1129],{"type":170,"tag":229,"props":1122,"children":1123},{"style":248},[1124],{"type":176,"value":752},{"type":170,"tag":229,"props":1126,"children":1127},{"style":296},[1128],{"type":176,"value":262},{"type":170,"tag":229,"props":1130,"children":1131},{"style":248},[1132],{"type":176,"value":323},{"type":170,"tag":229,"props":1134,"children":1136},{"class":231,"line":1135},35,[1137,1141,1145],{"type":170,"tag":229,"props":1138,"children":1139},{"style":248},[1140],{"type":176,"value":568},{"type":170,"tag":229,"props":1142,"children":1143},{"style":296},[1144],{"type":176,"value":262},{"type":170,"tag":229,"props":1146,"children":1147},{"style":248},[1148],{"type":176,"value":323},{"type":170,"tag":229,"props":1150,"children":1152},{"class":231,"line":1151},36,[1153,1158,1162],{"type":170,"tag":229,"props":1154,"children":1155},{"style":248},[1156],{"type":176,"value":1157},"    }",{"type":170,"tag":229,"props":1159,"children":1160},{"style":296},[1161],{"type":176,"value":262},{"type":170,"tag":229,"props":1163,"children":1164},{"style":248},[1165],{"type":176,"value":323},{"type":170,"tag":229,"props":1167,"children":1169},{"class":231,"line":1168},37,[1170],{"type":170,"tag":229,"props":1171,"children":1172},{"style":248},[1173],{"type":176,"value":1174},"}\n",{"type":170,"tag":178,"props":1176,"children":1177},{},[1178,1180,1186],{"type":176,"value":1179},"唯一的问题是，internet-available 引用的 ",{"type":170,"tag":198,"props":1181,"children":1184},{"href":1182,"rel":1183},"https://github.com/mafintosh/dns-socket/blob/master/index.js",[202],[1185],{"type":176,"value":310},{"type":176,"value":1187}," 这个库解决了什么问题。dns-socket 主页上说，它是一个带有超时和重试功能的接近底层的 DNS 请求库，那可以想象 NodeJS 的 DNS 模块应该就缺失了超时功能。关于 DNS 超时这个问题，AlienZHOU 大的博客有提到。可以从文末引用中查看更多详细信息。",{"type":170,"tag":178,"props":1189,"children":1190},{},[1191,1193,1200],{"type":176,"value":1192},"从源码来看，dns-socket 是一个使用 UDP 封装的 DNS 请求库，其中，DNS 报文的解析使用了同作者的 ",{"type":170,"tag":198,"props":1194,"children":1197},{"href":1195,"rel":1196},"https://github.com/mafintosh/dns-packet",[202],[1198],{"type":176,"value":1199},"dns-packet",{"type":176,"value":1201}," 这个库（这个作者还真是为了改善 NodeJS 的 DNS 尽心尽力哈...）。",{"type":170,"tag":183,"props":1203,"children":1205},{"id":1204},"阅读更多",[1206],{"type":176,"value":1204},{"type":170,"tag":1208,"props":1209,"children":1210},"ul",{},[1211],{"type":170,"tag":1212,"props":1213,"children":1214},"li",{},[1215],{"type":170,"tag":198,"props":1216,"children":1219},{"href":1217,"rel":1218},"https://www.jianshu.com/p/693a5d378a2c",[202],[1220],{"type":176,"value":1221},"AlienZHOU：NodeJS 中 DNS 查询的坑 & DNS cache 分析",{"type":170,"tag":1223,"props":1224,"children":1225},"style",{},[1226],{"type":176,"value":1227},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":270,"depth":270,"links":1229},[1230,1234],{"id":185,"depth":270,"text":185,"children":1231},[1232,1233],{"id":191,"depth":326,"text":191},{"id":209,"depth":326,"text":209},{"id":1204,"depth":270,"text":1204},"markdown","content:8.source-code:_module:is-online.md","content","8.source-code/_module/is-online.md","8.source-code/_module/is-online","md",[1242,1245],{"_path":1243,"title":1244,"description":163},"/source-code/_module/html5shiv","🛠 低版本浏览器兼容HTML5标签原理",{"_path":1246,"title":1247,"description":1248},"/source-code/_node/node-watch","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",1742808208190]