[{"data":1,"prerenderedAt":4630},["ShallowReactive",2],{"navigation":3,"/source-code/_js/reka-ui":155,"/source-code/_js/reka-ui-surround":4622},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":156,"_dir":157,"_draft":158,"_partial":159,"_locale":160,"title":161,"description":162,"body":163,"_type":4617,"_id":4618,"_source":4619,"_file":4620,"_stem":4621,"_extension":3036},"/source-code/_js/reka-ui","_js",false,true,"","Reka UI","一个用于使用 Vue.js 构建高质量、可访问的设计系统和 Web 应用的开源组件库。",{"type":164,"children":165,"toc":4611},"root",[166,174,180,194,199,204,209,214,228,541,546,551,693,698,703,869,874,879,1105,1110,1115,1122,1127,1321,1326,1557,1562,1668,1673,2031,2036,2041,2057,2062,2067,2072,2115,2120,2125,2130,2142,2169,2174,2182,2187,2194,2199,2333,2338,2644,2649,2852,2858,2863,2868,3028,3033,3040,3045,3052,3057,3065,3070,3076,3081,3187,3192,3515,3520,3525,3530,3647,3652,3675,4139,4144,4149,4395,4400,4596,4601,4606],{"type":167,"tag":168,"props":169,"children":171},"element","h2",{"id":170},"设计理念",[172],{"type":173,"value":170},"text",{"type":167,"tag":175,"props":176,"children":177},"p",{},[178],{"type":173,"value":179},"以下两张图分别是 Radix UI 和 Reka UI 的官网。第一印象。Reka 官网的设计感差 Radix 太多了，完全没有 Radix 的一眼震撼。更别提 Reka 的前身 Radix Vue 的网站。",{"type":167,"tag":175,"props":181,"children":182},{},[183,189],{"type":167,"tag":184,"props":185,"children":188},"img",{"alt":186,"src":187},"RadixUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719585.png?type=mac",[],{"type":167,"tag":184,"props":190,"children":193},{"alt":191,"src":192},"RekaUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719249.png?type=mac",[],{"type":167,"tag":175,"props":195,"children":196},{},[197],{"type":173,"value":198},"Reka 主打可访问性和开发者友好。",{"type":167,"tag":175,"props":200,"children":201},{},[202],{"type":173,"value":203},"由于之前没怎么关注过 UI 组件库的可访问性，对其可访问性优先的设计不是很理解，但开发体验这块却是戳到我了。",{"type":167,"tag":175,"props":205,"children":206},{},[207],{"type":173,"value":208},"Nuxt UI v2 升级到 Nuxt UI v3，底层原子组件库就是从 headless-vue 替换成了 Reka，在开发者体验这块可以说用过 headless-ui 的用户都被其封闭性给坑过。尤其记得 headless-ui 的 Dialog 组件，锁定页面 focus 不可更改就算了，还不能自定义插入节点；另一些组件则不能变成受控组件，也就意味着不能在外部直接操作内部状态，如控制弹窗开关。",{"type":167,"tag":175,"props":210,"children":211},{},[212],{"type":173,"value":213},"那开发者友好到底是个啥。总的来说，就是支持不同写法，不限制具体的使用方法。下面展开讨论一下。",{"type":167,"tag":175,"props":215,"children":216},{},[217,219,226],{"type":173,"value":218},"样式方面。相比于常见的使用 ",{"type":167,"tag":220,"props":221,"children":223},"code",{"className":222},[],[224],{"type":173,"value":225},"is-",{"type":173,"value":227}," 前缀加状态名来动态绑定状态的方式，Reka 选择在部分组件上把状态绑定到 html dataset 中。再加上对于任意有 DOM 结构的 Reka 组件，本身就支持 class 或 style 自定样式。可以说 Reka 保留对样式的完全控制，开发体验足够了。",{"type":167,"tag":229,"props":230,"children":234},"pre",{"className":231,"code":232,"language":233,"meta":160,"style":160},"language-vue shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n    \u003CAccordionItem\n      class=\"data-[state=open]:border-b-2 data-[state=open]:border-gray-800\"\n      value=\"item-1\"\n    />\n  \u003C/AccordionRoot>\n\u003C/template>\n\u003Cstyle>\n  /* 或者使用 CSS 定义样式 */\n  .AccordionItem[data-state=\"open\"] {\n    border-bottom-width: 2px;\n  }\n\u003C/style>\n","vue",[235],{"type":167,"tag":220,"props":236,"children":237},{"__ignoreMap":160},[238,261,279,289,303,335,361,370,387,404,421,430,484,516,525],{"type":167,"tag":239,"props":240,"children":243},"span",{"class":241,"line":242},"line",1,[244,250,256],{"type":167,"tag":239,"props":245,"children":247},{"style":246},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[248],{"type":173,"value":249},"\u003C",{"type":167,"tag":239,"props":251,"children":253},{"style":252},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[254],{"type":173,"value":255},"template",{"type":167,"tag":239,"props":257,"children":258},{"style":246},[259],{"type":173,"value":260},">\n",{"type":167,"tag":239,"props":262,"children":264},{"class":241,"line":263},2,[265,270,275],{"type":167,"tag":239,"props":266,"children":267},{"style":246},[268],{"type":173,"value":269},"  \u003C",{"type":167,"tag":239,"props":271,"children":272},{"style":252},[273],{"type":173,"value":274},"AccordionRoot",{"type":167,"tag":239,"props":276,"children":277},{"style":246},[278],{"type":173,"value":260},{"type":167,"tag":239,"props":280,"children":282},{"class":241,"line":281},3,[283],{"type":167,"tag":239,"props":284,"children":286},{"style":285},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[287],{"type":173,"value":288},"    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n",{"type":167,"tag":239,"props":290,"children":292},{"class":241,"line":291},4,[293,298],{"type":167,"tag":239,"props":294,"children":295},{"style":246},[296],{"type":173,"value":297},"    \u003C",{"type":167,"tag":239,"props":299,"children":300},{"style":252},[301],{"type":173,"value":302},"AccordionItem\n",{"type":167,"tag":239,"props":304,"children":306},{"class":241,"line":305},5,[307,313,318,324,330],{"type":167,"tag":239,"props":308,"children":310},{"style":309},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[311],{"type":173,"value":312},"      class",{"type":167,"tag":239,"props":314,"children":315},{"style":246},[316],{"type":173,"value":317},"=",{"type":167,"tag":239,"props":319,"children":321},{"style":320},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[322],{"type":173,"value":323},"\"",{"type":167,"tag":239,"props":325,"children":327},{"style":326},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[328],{"type":173,"value":329},"data-[state=open]:border-b-2 data-[state=open]:border-gray-800",{"type":167,"tag":239,"props":331,"children":332},{"style":320},[333],{"type":173,"value":334},"\"\n",{"type":167,"tag":239,"props":336,"children":338},{"class":241,"line":337},6,[339,344,348,352,357],{"type":167,"tag":239,"props":340,"children":341},{"style":309},[342],{"type":173,"value":343},"      value",{"type":167,"tag":239,"props":345,"children":346},{"style":246},[347],{"type":173,"value":317},{"type":167,"tag":239,"props":349,"children":350},{"style":320},[351],{"type":173,"value":323},{"type":167,"tag":239,"props":353,"children":354},{"style":326},[355],{"type":173,"value":356},"item-1",{"type":167,"tag":239,"props":358,"children":359},{"style":320},[360],{"type":173,"value":334},{"type":167,"tag":239,"props":362,"children":364},{"class":241,"line":363},7,[365],{"type":167,"tag":239,"props":366,"children":367},{"style":246},[368],{"type":173,"value":369},"    />\n",{"type":167,"tag":239,"props":371,"children":373},{"class":241,"line":372},8,[374,379,383],{"type":167,"tag":239,"props":375,"children":376},{"style":246},[377],{"type":173,"value":378},"  \u003C/",{"type":167,"tag":239,"props":380,"children":381},{"style":252},[382],{"type":173,"value":274},{"type":167,"tag":239,"props":384,"children":385},{"style":246},[386],{"type":173,"value":260},{"type":167,"tag":239,"props":388,"children":390},{"class":241,"line":389},9,[391,396,400],{"type":167,"tag":239,"props":392,"children":393},{"style":246},[394],{"type":173,"value":395},"\u003C/",{"type":167,"tag":239,"props":397,"children":398},{"style":252},[399],{"type":173,"value":255},{"type":167,"tag":239,"props":401,"children":402},{"style":246},[403],{"type":173,"value":260},{"type":167,"tag":239,"props":405,"children":407},{"class":241,"line":406},10,[408,412,417],{"type":167,"tag":239,"props":409,"children":410},{"style":246},[411],{"type":173,"value":249},{"type":167,"tag":239,"props":413,"children":414},{"style":252},[415],{"type":173,"value":416},"style",{"type":167,"tag":239,"props":418,"children":419},{"style":246},[420],{"type":173,"value":260},{"type":167,"tag":239,"props":422,"children":424},{"class":241,"line":423},11,[425],{"type":167,"tag":239,"props":426,"children":427},{"style":285},[428],{"type":173,"value":429},"  /* 或者使用 CSS 定义样式 */\n",{"type":167,"tag":239,"props":431,"children":433},{"class":241,"line":432},12,[434,440,446,451,456,461,465,470,474,479],{"type":167,"tag":239,"props":435,"children":437},{"style":436},"--shiki-light:#39ADB5;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[438],{"type":173,"value":439},"  .",{"type":167,"tag":239,"props":441,"children":443},{"style":442},"--shiki-light:#E2931D;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[444],{"type":173,"value":445},"AccordionItem",{"type":167,"tag":239,"props":447,"children":448},{"style":246},[449],{"type":173,"value":450},"[",{"type":167,"tag":239,"props":452,"children":453},{"style":309},[454],{"type":173,"value":455},"data-state",{"type":167,"tag":239,"props":457,"children":459},{"style":458},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[460],{"type":173,"value":317},{"type":167,"tag":239,"props":462,"children":463},{"style":320},[464],{"type":173,"value":323},{"type":167,"tag":239,"props":466,"children":467},{"style":326},[468],{"type":173,"value":469},"open",{"type":167,"tag":239,"props":471,"children":472},{"style":320},[473],{"type":173,"value":323},{"type":167,"tag":239,"props":475,"children":476},{"style":246},[477],{"type":173,"value":478},"]",{"type":167,"tag":239,"props":480,"children":481},{"style":246},[482],{"type":173,"value":483}," {\n",{"type":167,"tag":239,"props":485,"children":487},{"class":241,"line":486},13,[488,494,499,505,511],{"type":167,"tag":239,"props":489,"children":491},{"style":490},"--shiki-light:#8796B0;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[492],{"type":173,"value":493},"    border-bottom-width",{"type":167,"tag":239,"props":495,"children":496},{"style":246},[497],{"type":173,"value":498},":",{"type":167,"tag":239,"props":500,"children":502},{"style":501},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[503],{"type":173,"value":504}," 2",{"type":167,"tag":239,"props":506,"children":508},{"style":507},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[509],{"type":173,"value":510},"px",{"type":167,"tag":239,"props":512,"children":513},{"style":246},[514],{"type":173,"value":515},";\n",{"type":167,"tag":239,"props":517,"children":519},{"class":241,"line":518},14,[520],{"type":167,"tag":239,"props":521,"children":522},{"style":246},[523],{"type":173,"value":524},"  }\n",{"type":167,"tag":239,"props":526,"children":528},{"class":241,"line":527},15,[529,533,537],{"type":167,"tag":239,"props":530,"children":531},{"style":246},[532],{"type":173,"value":395},{"type":167,"tag":239,"props":534,"children":535},{"style":252},[536],{"type":173,"value":416},{"type":167,"tag":239,"props":538,"children":539},{"style":246},[540],{"type":173,"value":260},{"type":167,"tag":175,"props":542,"children":543},{},[544],{"type":173,"value":545},"一般企业自己封装 UI 库会基于带设计规范的组件库，比如 Ant Design、Element UI 等。二次封装经常会碰到样式冲突问题。所以 Reka 适合作为某种基础库去使用，就像 Nuxt UI v3 是基于其二次封装。按照 Reka 文档自己的说法：“These components are low-level enough to give you control over how you want to wrap them.”",{"type":167,"tag":175,"props":547,"children":548},{},[549],{"type":173,"value":550},"另一点样式方面有关开发体验的是动画，它特殊优化了这种 CSS 写法：",{"type":167,"tag":229,"props":552,"children":556},{"className":553,"code":554,"language":555,"meta":160,"style":160},"language-css shiki shiki-themes material-theme-lighter github-light github-dark monokai",".DialogOverlay[data-state=\"closed\"],\n.DialogContent[data-state=\"closed\"] {\n  animation: fadeOut 300ms ease-in;\n}\n","css",[557],{"type":167,"tag":220,"props":558,"children":559},{"__ignoreMap":160},[560,603,647,685],{"type":167,"tag":239,"props":561,"children":562},{"class":241,"line":242},[563,568,573,577,581,585,589,594,598],{"type":167,"tag":239,"props":564,"children":565},{"style":436},[566],{"type":173,"value":567},".",{"type":167,"tag":239,"props":569,"children":570},{"style":442},[571],{"type":173,"value":572},"DialogOverlay",{"type":167,"tag":239,"props":574,"children":575},{"style":246},[576],{"type":173,"value":450},{"type":167,"tag":239,"props":578,"children":579},{"style":309},[580],{"type":173,"value":455},{"type":167,"tag":239,"props":582,"children":583},{"style":458},[584],{"type":173,"value":317},{"type":167,"tag":239,"props":586,"children":587},{"style":320},[588],{"type":173,"value":323},{"type":167,"tag":239,"props":590,"children":591},{"style":326},[592],{"type":173,"value":593},"closed",{"type":167,"tag":239,"props":595,"children":596},{"style":320},[597],{"type":173,"value":323},{"type":167,"tag":239,"props":599,"children":600},{"style":246},[601],{"type":173,"value":602},"],\n",{"type":167,"tag":239,"props":604,"children":605},{"class":241,"line":263},[606,610,615,619,623,627,631,635,639,643],{"type":167,"tag":239,"props":607,"children":608},{"style":436},[609],{"type":173,"value":567},{"type":167,"tag":239,"props":611,"children":612},{"style":442},[613],{"type":173,"value":614},"DialogContent",{"type":167,"tag":239,"props":616,"children":617},{"style":246},[618],{"type":173,"value":450},{"type":167,"tag":239,"props":620,"children":621},{"style":309},[622],{"type":173,"value":455},{"type":167,"tag":239,"props":624,"children":625},{"style":458},[626],{"type":173,"value":317},{"type":167,"tag":239,"props":628,"children":629},{"style":320},[630],{"type":173,"value":323},{"type":167,"tag":239,"props":632,"children":633},{"style":326},[634],{"type":173,"value":593},{"type":167,"tag":239,"props":636,"children":637},{"style":320},[638],{"type":173,"value":323},{"type":167,"tag":239,"props":640,"children":641},{"style":246},[642],{"type":173,"value":478},{"type":167,"tag":239,"props":644,"children":645},{"style":246},[646],{"type":173,"value":483},{"type":167,"tag":239,"props":648,"children":649},{"class":241,"line":281},[650,655,659,665,670,675,681],{"type":167,"tag":239,"props":651,"children":652},{"style":490},[653],{"type":173,"value":654},"  animation",{"type":167,"tag":239,"props":656,"children":657},{"style":246},[658],{"type":173,"value":498},{"type":167,"tag":239,"props":660,"children":662},{"style":661},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[663],{"type":173,"value":664}," fadeOut ",{"type":167,"tag":239,"props":666,"children":667},{"style":501},[668],{"type":173,"value":669},"300",{"type":167,"tag":239,"props":671,"children":672},{"style":507},[673],{"type":173,"value":674},"ms",{"type":167,"tag":239,"props":676,"children":678},{"style":677},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF",[679],{"type":173,"value":680}," ease-in",{"type":167,"tag":239,"props":682,"children":683},{"style":246},[684],{"type":173,"value":515},{"type":167,"tag":239,"props":686,"children":687},{"class":241,"line":291},[688],{"type":167,"tag":239,"props":689,"children":690},{"style":246},[691],{"type":173,"value":692},"}\n",{"type":167,"tag":175,"props":694,"children":695},{},[696],{"type":173,"value":697},"刚才说某些组件的内部状态会绑定到 dataset 上，那么弹窗组件如果关闭就意味着取消 DOM 挂载，为何还能通过 dataset 控制动画呢？这是因为 Reka 不直接通过 v-if 来控制组件挂载，而是用一个高阶组件，内部使用了一个状态机，结合节点的创建销毁、动画开始结束等事件来控制实际的组件挂载。这样就可以做到等相关节点动画或缓动效果结束后再销毁节点。",{"type":167,"tag":175,"props":699,"children":700},{},[701],{"type":173,"value":702},"文档还推荐使用 Vue Transition 或 Motion Vue 库来做动画。我在一些项目习惯使用 @vueuse/motion，但 Reka 和这些库相性不合，因为使用这些动画库要先把 Reka 组件转换成强制受控的组件，这样写起来非常麻烦。",{"type":167,"tag":229,"props":704,"children":706},{"className":231,"code":705,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CDialogPortal v-if=\"styles.opacity !== 0\">\n    \u003CDialogOverlay\n      force-mount\n      :style=\"{\n        opacity: styles.opacity,\n        transform: `scale(${styles.scale})`,\n      }\"\n    />\n  \u003C/DialogPortal>\n\u003C/template>\n",[707],{"type":167,"tag":220,"props":708,"children":709},{"__ignoreMap":160},[710,725,763,775,783,804,812,820,832,839,854],{"type":167,"tag":239,"props":711,"children":712},{"class":241,"line":242},[713,717,721],{"type":167,"tag":239,"props":714,"children":715},{"style":246},[716],{"type":173,"value":249},{"type":167,"tag":239,"props":718,"children":719},{"style":252},[720],{"type":173,"value":255},{"type":167,"tag":239,"props":722,"children":723},{"style":246},[724],{"type":173,"value":260},{"type":167,"tag":239,"props":726,"children":727},{"class":241,"line":263},[728,732,737,742,746,750,755,759],{"type":167,"tag":239,"props":729,"children":730},{"style":246},[731],{"type":173,"value":269},{"type":167,"tag":239,"props":733,"children":734},{"style":252},[735],{"type":173,"value":736},"DialogPortal",{"type":167,"tag":239,"props":738,"children":739},{"style":309},[740],{"type":173,"value":741}," v-if",{"type":167,"tag":239,"props":743,"children":744},{"style":246},[745],{"type":173,"value":317},{"type":167,"tag":239,"props":747,"children":748},{"style":320},[749],{"type":173,"value":323},{"type":167,"tag":239,"props":751,"children":752},{"style":326},[753],{"type":173,"value":754},"styles.opacity !== 0",{"type":167,"tag":239,"props":756,"children":757},{"style":320},[758],{"type":173,"value":323},{"type":167,"tag":239,"props":760,"children":761},{"style":246},[762],{"type":173,"value":260},{"type":167,"tag":239,"props":764,"children":765},{"class":241,"line":281},[766,770],{"type":167,"tag":239,"props":767,"children":768},{"style":246},[769],{"type":173,"value":297},{"type":167,"tag":239,"props":771,"children":772},{"style":252},[773],{"type":173,"value":774},"DialogOverlay\n",{"type":167,"tag":239,"props":776,"children":777},{"class":241,"line":291},[778],{"type":167,"tag":239,"props":779,"children":780},{"style":309},[781],{"type":173,"value":782},"      force-mount\n",{"type":167,"tag":239,"props":784,"children":785},{"class":241,"line":305},[786,791,795,799],{"type":167,"tag":239,"props":787,"children":788},{"style":309},[789],{"type":173,"value":790},"      :style",{"type":167,"tag":239,"props":792,"children":793},{"style":246},[794],{"type":173,"value":317},{"type":167,"tag":239,"props":796,"children":797},{"style":320},[798],{"type":173,"value":323},{"type":167,"tag":239,"props":800,"children":801},{"style":326},[802],{"type":173,"value":803},"{\n",{"type":167,"tag":239,"props":805,"children":806},{"class":241,"line":337},[807],{"type":167,"tag":239,"props":808,"children":809},{"style":326},[810],{"type":173,"value":811},"        opacity: styles.opacity,\n",{"type":167,"tag":239,"props":813,"children":814},{"class":241,"line":363},[815],{"type":167,"tag":239,"props":816,"children":817},{"style":326},[818],{"type":173,"value":819},"        transform: `scale(${styles.scale})`,\n",{"type":167,"tag":239,"props":821,"children":822},{"class":241,"line":372},[823,828],{"type":167,"tag":239,"props":824,"children":825},{"style":326},[826],{"type":173,"value":827},"      }",{"type":167,"tag":239,"props":829,"children":830},{"style":320},[831],{"type":173,"value":334},{"type":167,"tag":239,"props":833,"children":834},{"class":241,"line":389},[835],{"type":167,"tag":239,"props":836,"children":837},{"style":246},[838],{"type":173,"value":369},{"type":167,"tag":239,"props":840,"children":841},{"class":241,"line":406},[842,846,850],{"type":167,"tag":239,"props":843,"children":844},{"style":246},[845],{"type":173,"value":378},{"type":167,"tag":239,"props":847,"children":848},{"style":252},[849],{"type":173,"value":736},{"type":167,"tag":239,"props":851,"children":852},{"style":246},[853],{"type":173,"value":260},{"type":167,"tag":239,"props":855,"children":856},{"class":241,"line":423},[857,861,865],{"type":167,"tag":239,"props":858,"children":859},{"style":246},[860],{"type":173,"value":395},{"type":167,"tag":239,"props":862,"children":863},{"style":252},[864],{"type":173,"value":255},{"type":167,"tag":239,"props":866,"children":867},{"style":246},[868],{"type":173,"value":260},{"type":167,"tag":175,"props":870,"children":871},{},[872],{"type":173,"value":873},"Reka 的组件叫做 Primitive，也许可以翻译成原子组件。这类组件封装模式可能是伴随 Headless 潮流而来的，他们希望通过组件组合的方式来构建上层 UI。不过在 View 层因为组件和 DOM 不是一一对应的关系，所以会碰到一个 DOM 节点用作两个原子组件的情况，比如一个 ElButton，即作为弹窗的触发，又作为 Tooltip 的触发。这样嵌套下来，会出现三层 div：tooltip-trigger-item > dialog-trigger-item > el-button。",{"type":167,"tag":175,"props":875,"children":876},{},[877],{"type":173,"value":878},"Reka 继承了来自 Radix 的 asChild 模式以解决此类问题。给组件传递一个 asChild 属性，就能将其“隐形化”，去 DOM 结构的同时保留了样式、事件等。见下代码，可以把 TooltipTrigger 和 DialogTrigger 看做 Vue 中的 Template，而 ElButton 同时作为 Dialog 和 Tooltip 的直接子组件。在特定场景的开发体验确实不错。",{"type":167,"tag":229,"props":880,"children":882},{"className":231,"code":881,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CDialogRoot>\n    \u003CTooltipRoot>\n      \u003CTooltipTrigger asChild>\n        \u003CDialogTrigger asChild>\n          \u003CElButton>Open\u003C/ElButton>\n        \u003C/DialogTrigger>\n      \u003C/TooltipTrigger>\n      Tip：Click the button to open dialog.\n    \u003C/TooltipRoot>\n    Your Dialog Content\n  \u003C/DialogRoot>\n\u003C/template>\n",[883],{"type":167,"tag":220,"props":884,"children":885},{"__ignoreMap":160},[886,901,917,933,955,976,1011,1027,1043,1051,1067,1075,1090],{"type":167,"tag":239,"props":887,"children":888},{"class":241,"line":242},[889,893,897],{"type":167,"tag":239,"props":890,"children":891},{"style":246},[892],{"type":173,"value":249},{"type":167,"tag":239,"props":894,"children":895},{"style":252},[896],{"type":173,"value":255},{"type":167,"tag":239,"props":898,"children":899},{"style":246},[900],{"type":173,"value":260},{"type":167,"tag":239,"props":902,"children":903},{"class":241,"line":263},[904,908,913],{"type":167,"tag":239,"props":905,"children":906},{"style":246},[907],{"type":173,"value":269},{"type":167,"tag":239,"props":909,"children":910},{"style":252},[911],{"type":173,"value":912},"DialogRoot",{"type":167,"tag":239,"props":914,"children":915},{"style":246},[916],{"type":173,"value":260},{"type":167,"tag":239,"props":918,"children":919},{"class":241,"line":281},[920,924,929],{"type":167,"tag":239,"props":921,"children":922},{"style":246},[923],{"type":173,"value":297},{"type":167,"tag":239,"props":925,"children":926},{"style":252},[927],{"type":173,"value":928},"TooltipRoot",{"type":167,"tag":239,"props":930,"children":931},{"style":246},[932],{"type":173,"value":260},{"type":167,"tag":239,"props":934,"children":935},{"class":241,"line":291},[936,941,946,951],{"type":167,"tag":239,"props":937,"children":938},{"style":246},[939],{"type":173,"value":940},"      \u003C",{"type":167,"tag":239,"props":942,"children":943},{"style":252},[944],{"type":173,"value":945},"TooltipTrigger",{"type":167,"tag":239,"props":947,"children":948},{"style":309},[949],{"type":173,"value":950}," asChild",{"type":167,"tag":239,"props":952,"children":953},{"style":246},[954],{"type":173,"value":260},{"type":167,"tag":239,"props":956,"children":957},{"class":241,"line":305},[958,963,968,972],{"type":167,"tag":239,"props":959,"children":960},{"style":246},[961],{"type":173,"value":962},"        \u003C",{"type":167,"tag":239,"props":964,"children":965},{"style":252},[966],{"type":173,"value":967},"DialogTrigger",{"type":167,"tag":239,"props":969,"children":970},{"style":309},[971],{"type":173,"value":950},{"type":167,"tag":239,"props":973,"children":974},{"style":246},[975],{"type":173,"value":260},{"type":167,"tag":239,"props":977,"children":978},{"class":241,"line":337},[979,984,989,994,999,1003,1007],{"type":167,"tag":239,"props":980,"children":981},{"style":246},[982],{"type":173,"value":983},"          \u003C",{"type":167,"tag":239,"props":985,"children":986},{"style":252},[987],{"type":173,"value":988},"ElButton",{"type":167,"tag":239,"props":990,"children":991},{"style":246},[992],{"type":173,"value":993},">",{"type":167,"tag":239,"props":995,"children":996},{"style":661},[997],{"type":173,"value":998},"Open",{"type":167,"tag":239,"props":1000,"children":1001},{"style":246},[1002],{"type":173,"value":395},{"type":167,"tag":239,"props":1004,"children":1005},{"style":252},[1006],{"type":173,"value":988},{"type":167,"tag":239,"props":1008,"children":1009},{"style":246},[1010],{"type":173,"value":260},{"type":167,"tag":239,"props":1012,"children":1013},{"class":241,"line":363},[1014,1019,1023],{"type":167,"tag":239,"props":1015,"children":1016},{"style":246},[1017],{"type":173,"value":1018},"        \u003C/",{"type":167,"tag":239,"props":1020,"children":1021},{"style":252},[1022],{"type":173,"value":967},{"type":167,"tag":239,"props":1024,"children":1025},{"style":246},[1026],{"type":173,"value":260},{"type":167,"tag":239,"props":1028,"children":1029},{"class":241,"line":372},[1030,1035,1039],{"type":167,"tag":239,"props":1031,"children":1032},{"style":246},[1033],{"type":173,"value":1034},"      \u003C/",{"type":167,"tag":239,"props":1036,"children":1037},{"style":252},[1038],{"type":173,"value":945},{"type":167,"tag":239,"props":1040,"children":1041},{"style":246},[1042],{"type":173,"value":260},{"type":167,"tag":239,"props":1044,"children":1045},{"class":241,"line":389},[1046],{"type":167,"tag":239,"props":1047,"children":1048},{"style":661},[1049],{"type":173,"value":1050},"      Tip：Click the button to open dialog.\n",{"type":167,"tag":239,"props":1052,"children":1053},{"class":241,"line":406},[1054,1059,1063],{"type":167,"tag":239,"props":1055,"children":1056},{"style":246},[1057],{"type":173,"value":1058},"    \u003C/",{"type":167,"tag":239,"props":1060,"children":1061},{"style":252},[1062],{"type":173,"value":928},{"type":167,"tag":239,"props":1064,"children":1065},{"style":246},[1066],{"type":173,"value":260},{"type":167,"tag":239,"props":1068,"children":1069},{"class":241,"line":423},[1070],{"type":167,"tag":239,"props":1071,"children":1072},{"style":661},[1073],{"type":173,"value":1074},"    Your Dialog Content\n",{"type":167,"tag":239,"props":1076,"children":1077},{"class":241,"line":432},[1078,1082,1086],{"type":167,"tag":239,"props":1079,"children":1080},{"style":246},[1081],{"type":173,"value":378},{"type":167,"tag":239,"props":1083,"children":1084},{"style":252},[1085],{"type":173,"value":912},{"type":167,"tag":239,"props":1087,"children":1088},{"style":246},[1089],{"type":173,"value":260},{"type":167,"tag":239,"props":1091,"children":1092},{"class":241,"line":486},[1093,1097,1101],{"type":167,"tag":239,"props":1094,"children":1095},{"style":246},[1096],{"type":173,"value":395},{"type":167,"tag":239,"props":1098,"children":1099},{"style":252},[1100],{"type":173,"value":255},{"type":167,"tag":239,"props":1102,"children":1103},{"style":246},[1104],{"type":173,"value":260},{"type":167,"tag":175,"props":1106,"children":1107},{},[1108],{"type":173,"value":1109},"也许是因为受控非受控组件辩论来源于 React 的缘故，以至于 Radix UI 或其他基于 React 实现的组件库会碰到受控非受控问题困扰。而我在写 Vue 时没碰到过此类问题的骚扰。在基于 Vue 的组件库中，只要组件支持判断传入了 model-value 就可以按照受控的方式运行，而使用者在外部从 v-model、model-value 的区分使用，来控制组件是否受控很天然的：v-model 受控，model-value 非受控。",{"type":167,"tag":175,"props":1111,"children":1112},{},[1113],{"type":173,"value":1114},"进一步作说明，从语义上来说，非受控组件应该使用 default-value 而不是 model-value，因为外部传入 model-value 并不能作为其传或不传 update:model-value 的依据。Reka 的文档对这点有说明，只是文档写错了。实际写代码应当使用 default-value 来指示组件是非受控的。",{"type":167,"tag":175,"props":1116,"children":1117},{},[1118],{"type":167,"tag":184,"props":1119,"children":1121},{"alt":160,"src":1120},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503202109352.png",[],{"type":167,"tag":175,"props":1123,"children":1124},{},[1125],{"type":173,"value":1126},"另一个从 React 组件库继承过来的优化开发者体验特性是支持命名空间式组件调用。一看代码便知：",{"type":167,"tag":229,"props":1128,"children":1130},{"className":231,"code":1129,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CDialog.Root>\n    \u003CDialog.Trigger>\n      Button Content\n    \u003C/Dialog.Trigger>\n  \u003C/Dialog.Root>\n  \u003CDialog.Portal>\n    \u003CDialog.Overlay />\n    \u003CDialog.Content>\n      Your Dialog Content\n    \u003C/Dialog.Content>\n  \u003C/Dialog.Portal>\n\u003C/template>\n",[1131],{"type":167,"tag":220,"props":1132,"children":1133},{"__ignoreMap":160},[1134,1149,1165,1181,1189,1204,1219,1235,1252,1268,1276,1291,1306],{"type":167,"tag":239,"props":1135,"children":1136},{"class":241,"line":242},[1137,1141,1145],{"type":167,"tag":239,"props":1138,"children":1139},{"style":246},[1140],{"type":173,"value":249},{"type":167,"tag":239,"props":1142,"children":1143},{"style":252},[1144],{"type":173,"value":255},{"type":167,"tag":239,"props":1146,"children":1147},{"style":246},[1148],{"type":173,"value":260},{"type":167,"tag":239,"props":1150,"children":1151},{"class":241,"line":263},[1152,1156,1161],{"type":167,"tag":239,"props":1153,"children":1154},{"style":246},[1155],{"type":173,"value":269},{"type":167,"tag":239,"props":1157,"children":1158},{"style":252},[1159],{"type":173,"value":1160},"Dialog.Root",{"type":167,"tag":239,"props":1162,"children":1163},{"style":246},[1164],{"type":173,"value":260},{"type":167,"tag":239,"props":1166,"children":1167},{"class":241,"line":281},[1168,1172,1177],{"type":167,"tag":239,"props":1169,"children":1170},{"style":246},[1171],{"type":173,"value":297},{"type":167,"tag":239,"props":1173,"children":1174},{"style":252},[1175],{"type":173,"value":1176},"Dialog.Trigger",{"type":167,"tag":239,"props":1178,"children":1179},{"style":246},[1180],{"type":173,"value":260},{"type":167,"tag":239,"props":1182,"children":1183},{"class":241,"line":291},[1184],{"type":167,"tag":239,"props":1185,"children":1186},{"style":661},[1187],{"type":173,"value":1188},"      Button Content\n",{"type":167,"tag":239,"props":1190,"children":1191},{"class":241,"line":305},[1192,1196,1200],{"type":167,"tag":239,"props":1193,"children":1194},{"style":246},[1195],{"type":173,"value":1058},{"type":167,"tag":239,"props":1197,"children":1198},{"style":252},[1199],{"type":173,"value":1176},{"type":167,"tag":239,"props":1201,"children":1202},{"style":246},[1203],{"type":173,"value":260},{"type":167,"tag":239,"props":1205,"children":1206},{"class":241,"line":337},[1207,1211,1215],{"type":167,"tag":239,"props":1208,"children":1209},{"style":246},[1210],{"type":173,"value":378},{"type":167,"tag":239,"props":1212,"children":1213},{"style":252},[1214],{"type":173,"value":1160},{"type":167,"tag":239,"props":1216,"children":1217},{"style":246},[1218],{"type":173,"value":260},{"type":167,"tag":239,"props":1220,"children":1221},{"class":241,"line":363},[1222,1226,1231],{"type":167,"tag":239,"props":1223,"children":1224},{"style":246},[1225],{"type":173,"value":269},{"type":167,"tag":239,"props":1227,"children":1228},{"style":252},[1229],{"type":173,"value":1230},"Dialog.Portal",{"type":167,"tag":239,"props":1232,"children":1233},{"style":246},[1234],{"type":173,"value":260},{"type":167,"tag":239,"props":1236,"children":1237},{"class":241,"line":372},[1238,1242,1247],{"type":167,"tag":239,"props":1239,"children":1240},{"style":246},[1241],{"type":173,"value":297},{"type":167,"tag":239,"props":1243,"children":1244},{"style":252},[1245],{"type":173,"value":1246},"Dialog.Overlay",{"type":167,"tag":239,"props":1248,"children":1249},{"style":246},[1250],{"type":173,"value":1251}," />\n",{"type":167,"tag":239,"props":1253,"children":1254},{"class":241,"line":389},[1255,1259,1264],{"type":167,"tag":239,"props":1256,"children":1257},{"style":246},[1258],{"type":173,"value":297},{"type":167,"tag":239,"props":1260,"children":1261},{"style":252},[1262],{"type":173,"value":1263},"Dialog.Content",{"type":167,"tag":239,"props":1265,"children":1266},{"style":246},[1267],{"type":173,"value":260},{"type":167,"tag":239,"props":1269,"children":1270},{"class":241,"line":406},[1271],{"type":167,"tag":239,"props":1272,"children":1273},{"style":661},[1274],{"type":173,"value":1275},"      Your Dialog Content\n",{"type":167,"tag":239,"props":1277,"children":1278},{"class":241,"line":423},[1279,1283,1287],{"type":167,"tag":239,"props":1280,"children":1281},{"style":246},[1282],{"type":173,"value":1058},{"type":167,"tag":239,"props":1284,"children":1285},{"style":252},[1286],{"type":173,"value":1263},{"type":167,"tag":239,"props":1288,"children":1289},{"style":246},[1290],{"type":173,"value":260},{"type":167,"tag":239,"props":1292,"children":1293},{"class":241,"line":432},[1294,1298,1302],{"type":167,"tag":239,"props":1295,"children":1296},{"style":246},[1297],{"type":173,"value":378},{"type":167,"tag":239,"props":1299,"children":1300},{"style":252},[1301],{"type":173,"value":1230},{"type":167,"tag":239,"props":1303,"children":1304},{"style":246},[1305],{"type":173,"value":260},{"type":167,"tag":239,"props":1307,"children":1308},{"class":241,"line":486},[1309,1313,1317],{"type":167,"tag":239,"props":1310,"children":1311},{"style":246},[1312],{"type":173,"value":395},{"type":167,"tag":239,"props":1314,"children":1315},{"style":252},[1316],{"type":173,"value":255},{"type":167,"tag":239,"props":1318,"children":1319},{"style":246},[1320],{"type":173,"value":260},{"type":167,"tag":175,"props":1322,"children":1323},{},[1324],{"type":173,"value":1325},"其实现也很简单，就是新增了一个 namespaced 入口文件，导出关联的所有组件。导出是按相关性组织的，比如 Dialog 组件包含了 Root、Trigger、Content 等，Select 包含 Root、Group、Item 等，分组件导出有利于摇树优化。",{"type":167,"tag":229,"props":1327,"children":1331},{"className":1328,"code":1329,"language":1330,"meta":160,"style":160},"language-ts shiki shiki-themes material-theme-lighter github-light github-dark monokai","export const Dialog = {\n  Root: DialogRoot,\n  Trigger: DialogTrigger,\n  Portal: DialogPortal,\n  Content: DialogContent,\n} as {\n  Root: typeof DialogRoot\n  Trigger: typeof DialogTrigger\n  Portal: typeof DialogPortal\n  Content: typeof DialogContent\n}\n","ts",[1332],{"type":167,"tag":220,"props":1333,"children":1334},{"__ignoreMap":160},[1335,1365,1388,1409,1430,1451,1468,1490,1510,1530,1550],{"type":167,"tag":239,"props":1336,"children":1337},{"class":241,"line":242},[1338,1344,1350,1356,1361],{"type":167,"tag":239,"props":1339,"children":1341},{"style":1340},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1342],{"type":173,"value":1343},"export",{"type":167,"tag":239,"props":1345,"children":1347},{"style":1346},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1348],{"type":173,"value":1349}," const",{"type":167,"tag":239,"props":1351,"children":1353},{"style":1352},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1354],{"type":173,"value":1355}," Dialog",{"type":167,"tag":239,"props":1357,"children":1358},{"style":458},[1359],{"type":173,"value":1360}," =",{"type":167,"tag":239,"props":1362,"children":1363},{"style":246},[1364],{"type":173,"value":483},{"type":167,"tag":239,"props":1366,"children":1367},{"class":241,"line":263},[1368,1374,1378,1383],{"type":167,"tag":239,"props":1369,"children":1371},{"style":1370},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1372],{"type":173,"value":1373},"  Root",{"type":167,"tag":239,"props":1375,"children":1376},{"style":246},[1377],{"type":173,"value":498},{"type":167,"tag":239,"props":1379,"children":1380},{"style":661},[1381],{"type":173,"value":1382}," DialogRoot",{"type":167,"tag":239,"props":1384,"children":1385},{"style":246},[1386],{"type":173,"value":1387},",\n",{"type":167,"tag":239,"props":1389,"children":1390},{"class":241,"line":281},[1391,1396,1400,1405],{"type":167,"tag":239,"props":1392,"children":1393},{"style":1370},[1394],{"type":173,"value":1395},"  Trigger",{"type":167,"tag":239,"props":1397,"children":1398},{"style":246},[1399],{"type":173,"value":498},{"type":167,"tag":239,"props":1401,"children":1402},{"style":661},[1403],{"type":173,"value":1404}," DialogTrigger",{"type":167,"tag":239,"props":1406,"children":1407},{"style":246},[1408],{"type":173,"value":1387},{"type":167,"tag":239,"props":1410,"children":1411},{"class":241,"line":291},[1412,1417,1421,1426],{"type":167,"tag":239,"props":1413,"children":1414},{"style":1370},[1415],{"type":173,"value":1416},"  Portal",{"type":167,"tag":239,"props":1418,"children":1419},{"style":246},[1420],{"type":173,"value":498},{"type":167,"tag":239,"props":1422,"children":1423},{"style":661},[1424],{"type":173,"value":1425}," DialogPortal",{"type":167,"tag":239,"props":1427,"children":1428},{"style":246},[1429],{"type":173,"value":1387},{"type":167,"tag":239,"props":1431,"children":1432},{"class":241,"line":305},[1433,1438,1442,1447],{"type":167,"tag":239,"props":1434,"children":1435},{"style":1370},[1436],{"type":173,"value":1437},"  Content",{"type":167,"tag":239,"props":1439,"children":1440},{"style":246},[1441],{"type":173,"value":498},{"type":167,"tag":239,"props":1443,"children":1444},{"style":661},[1445],{"type":173,"value":1446}," DialogContent",{"type":167,"tag":239,"props":1448,"children":1449},{"style":246},[1450],{"type":173,"value":1387},{"type":167,"tag":239,"props":1452,"children":1453},{"class":241,"line":337},[1454,1459,1464],{"type":167,"tag":239,"props":1455,"children":1456},{"style":246},[1457],{"type":173,"value":1458},"}",{"type":167,"tag":239,"props":1460,"children":1461},{"style":1340},[1462],{"type":173,"value":1463}," as",{"type":167,"tag":239,"props":1465,"children":1466},{"style":246},[1467],{"type":173,"value":483},{"type":167,"tag":239,"props":1469,"children":1470},{"class":241,"line":363},[1471,1476,1480,1485],{"type":167,"tag":239,"props":1472,"children":1474},{"style":1473},"--shiki-light:#E53935;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2",[1475],{"type":173,"value":1373},{"type":167,"tag":239,"props":1477,"children":1478},{"style":458},[1479],{"type":173,"value":498},{"type":167,"tag":239,"props":1481,"children":1482},{"style":458},[1483],{"type":173,"value":1484}," typeof",{"type":167,"tag":239,"props":1486,"children":1487},{"style":661},[1488],{"type":173,"value":1489}," DialogRoot\n",{"type":167,"tag":239,"props":1491,"children":1492},{"class":241,"line":372},[1493,1497,1501,1505],{"type":167,"tag":239,"props":1494,"children":1495},{"style":1473},[1496],{"type":173,"value":1395},{"type":167,"tag":239,"props":1498,"children":1499},{"style":458},[1500],{"type":173,"value":498},{"type":167,"tag":239,"props":1502,"children":1503},{"style":458},[1504],{"type":173,"value":1484},{"type":167,"tag":239,"props":1506,"children":1507},{"style":661},[1508],{"type":173,"value":1509}," DialogTrigger\n",{"type":167,"tag":239,"props":1511,"children":1512},{"class":241,"line":389},[1513,1517,1521,1525],{"type":167,"tag":239,"props":1514,"children":1515},{"style":1473},[1516],{"type":173,"value":1416},{"type":167,"tag":239,"props":1518,"children":1519},{"style":458},[1520],{"type":173,"value":498},{"type":167,"tag":239,"props":1522,"children":1523},{"style":458},[1524],{"type":173,"value":1484},{"type":167,"tag":239,"props":1526,"children":1527},{"style":661},[1528],{"type":173,"value":1529}," DialogPortal\n",{"type":167,"tag":239,"props":1531,"children":1532},{"class":241,"line":406},[1533,1537,1541,1545],{"type":167,"tag":239,"props":1534,"children":1535},{"style":1473},[1536],{"type":173,"value":1437},{"type":167,"tag":239,"props":1538,"children":1539},{"style":458},[1540],{"type":173,"value":498},{"type":167,"tag":239,"props":1542,"children":1543},{"style":458},[1544],{"type":173,"value":1484},{"type":167,"tag":239,"props":1546,"children":1547},{"style":661},[1548],{"type":173,"value":1549}," DialogContent\n",{"type":167,"tag":239,"props":1551,"children":1552},{"class":241,"line":423},[1553],{"type":167,"tag":239,"props":1554,"children":1555},{"style":246},[1556],{"type":173,"value":692},{"type":167,"tag":175,"props":1558,"children":1559},{},[1560],{"type":173,"value":1561},"使用时，你也需要从这个 namespace 入口导入组件。",{"type":167,"tag":229,"props":1563,"children":1565},{"className":231,"code":1564,"language":233,"meta":160,"style":160},"\u003Cscript setup lang=\"ts\">\nimport { Dialog } from 'reka-ui/namespaced'\n\u003C/script>\n",[1566],{"type":167,"tag":220,"props":1567,"children":1568},{"__ignoreMap":160},[1569,1611,1653],{"type":167,"tag":239,"props":1570,"children":1571},{"class":241,"line":242},[1572,1576,1581,1586,1591,1595,1599,1603,1607],{"type":167,"tag":239,"props":1573,"children":1574},{"style":246},[1575],{"type":173,"value":249},{"type":167,"tag":239,"props":1577,"children":1578},{"style":252},[1579],{"type":173,"value":1580},"script",{"type":167,"tag":239,"props":1582,"children":1583},{"style":309},[1584],{"type":173,"value":1585}," setup",{"type":167,"tag":239,"props":1587,"children":1588},{"style":309},[1589],{"type":173,"value":1590}," lang",{"type":167,"tag":239,"props":1592,"children":1593},{"style":246},[1594],{"type":173,"value":317},{"type":167,"tag":239,"props":1596,"children":1597},{"style":320},[1598],{"type":173,"value":323},{"type":167,"tag":239,"props":1600,"children":1601},{"style":326},[1602],{"type":173,"value":1330},{"type":167,"tag":239,"props":1604,"children":1605},{"style":320},[1606],{"type":173,"value":323},{"type":167,"tag":239,"props":1608,"children":1609},{"style":246},[1610],{"type":173,"value":260},{"type":167,"tag":239,"props":1612,"children":1613},{"class":241,"line":263},[1614,1619,1624,1628,1633,1638,1643,1648],{"type":167,"tag":239,"props":1615,"children":1616},{"style":1340},[1617],{"type":173,"value":1618},"import",{"type":167,"tag":239,"props":1620,"children":1621},{"style":246},[1622],{"type":173,"value":1623}," {",{"type":167,"tag":239,"props":1625,"children":1626},{"style":661},[1627],{"type":173,"value":1355},{"type":167,"tag":239,"props":1629,"children":1630},{"style":246},[1631],{"type":173,"value":1632}," }",{"type":167,"tag":239,"props":1634,"children":1635},{"style":1340},[1636],{"type":173,"value":1637}," from",{"type":167,"tag":239,"props":1639,"children":1640},{"style":320},[1641],{"type":173,"value":1642}," '",{"type":167,"tag":239,"props":1644,"children":1645},{"style":326},[1646],{"type":173,"value":1647},"reka-ui/namespaced",{"type":167,"tag":239,"props":1649,"children":1650},{"style":320},[1651],{"type":173,"value":1652},"'\n",{"type":167,"tag":239,"props":1654,"children":1655},{"class":241,"line":281},[1656,1660,1664],{"type":167,"tag":239,"props":1657,"children":1658},{"style":246},[1659],{"type":173,"value":395},{"type":167,"tag":239,"props":1661,"children":1662},{"style":252},[1663],{"type":173,"value":1580},{"type":167,"tag":239,"props":1665,"children":1666},{"style":246},[1667],{"type":173,"value":260},{"type":167,"tag":175,"props":1669,"children":1670},{},[1671],{"type":173,"value":1672},"那 Reka 从 Vue 中借鉴了哪些模式呢？一个显著的特性就是借助 Vue Inject 实现的 injectContext 功能，允许把组件的状态和方法作为一个整体，注入到子组件，达到共享的目的。举个例子，当你想替换 Dialog 中 DialogOverlay 的实现，就可以通过 injectDialogContext 来获取 DialogRoot 的状态和方法，这样可以自由的在子组件控制 Dialog 开关、拦截回调、获取组件元数据等。",{"type":167,"tag":229,"props":1674,"children":1676},{"className":1328,"code":1675,"language":1330,"meta":160,"style":160},"const DialogRootContext = provideDialogRootContext({\n  open,\n  modal,\n  openModal: () => {\n    open.value = true\n  },\n  onOpenChange: (value) => {\n    open.value = value\n  },\n  onOpenToggle: () => {\n    open.value = !open.value\n  },\n  contentId: '',\n  titleId: '',\n  descriptionId: '',\n  triggerElement,\n  contentElement,\n})\n",[1677],{"type":167,"tag":220,"props":1678,"children":1679},{"__ignoreMap":160},[1680,1712,1724,1736,1762,1789,1797,1832,1856,1863,1887,1924,1931,1952,1972,1992,2005,2018],{"type":167,"tag":239,"props":1681,"children":1682},{"class":241,"line":242},[1683,1688,1693,1697,1703,1708],{"type":167,"tag":239,"props":1684,"children":1685},{"style":1346},[1686],{"type":173,"value":1687},"const",{"type":167,"tag":239,"props":1689,"children":1690},{"style":1352},[1691],{"type":173,"value":1692}," DialogRootContext",{"type":167,"tag":239,"props":1694,"children":1695},{"style":458},[1696],{"type":173,"value":1360},{"type":167,"tag":239,"props":1698,"children":1700},{"style":1699},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1701],{"type":173,"value":1702}," provideDialogRootContext",{"type":167,"tag":239,"props":1704,"children":1705},{"style":661},[1706],{"type":173,"value":1707},"(",{"type":167,"tag":239,"props":1709,"children":1710},{"style":246},[1711],{"type":173,"value":803},{"type":167,"tag":239,"props":1713,"children":1714},{"class":241,"line":263},[1715,1720],{"type":167,"tag":239,"props":1716,"children":1717},{"style":661},[1718],{"type":173,"value":1719},"  open",{"type":167,"tag":239,"props":1721,"children":1722},{"style":246},[1723],{"type":173,"value":1387},{"type":167,"tag":239,"props":1725,"children":1726},{"class":241,"line":281},[1727,1732],{"type":167,"tag":239,"props":1728,"children":1729},{"style":661},[1730],{"type":173,"value":1731},"  modal",{"type":167,"tag":239,"props":1733,"children":1734},{"style":246},[1735],{"type":173,"value":1387},{"type":167,"tag":239,"props":1737,"children":1738},{"class":241,"line":291},[1739,1744,1748,1753,1758],{"type":167,"tag":239,"props":1740,"children":1741},{"style":1699},[1742],{"type":173,"value":1743},"  openModal",{"type":167,"tag":239,"props":1745,"children":1746},{"style":246},[1747],{"type":173,"value":498},{"type":167,"tag":239,"props":1749,"children":1750},{"style":246},[1751],{"type":173,"value":1752}," ()",{"type":167,"tag":239,"props":1754,"children":1755},{"style":1346},[1756],{"type":173,"value":1757}," =>",{"type":167,"tag":239,"props":1759,"children":1760},{"style":246},[1761],{"type":173,"value":483},{"type":167,"tag":239,"props":1763,"children":1764},{"class":241,"line":305},[1765,1770,1774,1779,1783],{"type":167,"tag":239,"props":1766,"children":1767},{"style":661},[1768],{"type":173,"value":1769},"    open",{"type":167,"tag":239,"props":1771,"children":1772},{"style":246},[1773],{"type":173,"value":567},{"type":167,"tag":239,"props":1775,"children":1776},{"style":661},[1777],{"type":173,"value":1778},"value",{"type":167,"tag":239,"props":1780,"children":1781},{"style":458},[1782],{"type":173,"value":1360},{"type":167,"tag":239,"props":1784,"children":1786},{"style":1785},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1787],{"type":173,"value":1788}," true\n",{"type":167,"tag":239,"props":1790,"children":1791},{"class":241,"line":337},[1792],{"type":167,"tag":239,"props":1793,"children":1794},{"style":246},[1795],{"type":173,"value":1796},"  },\n",{"type":167,"tag":239,"props":1798,"children":1799},{"class":241,"line":363},[1800,1805,1809,1814,1819,1824,1828],{"type":167,"tag":239,"props":1801,"children":1802},{"style":1699},[1803],{"type":173,"value":1804},"  onOpenChange",{"type":167,"tag":239,"props":1806,"children":1807},{"style":246},[1808],{"type":173,"value":498},{"type":167,"tag":239,"props":1810,"children":1811},{"style":246},[1812],{"type":173,"value":1813}," (",{"type":167,"tag":239,"props":1815,"children":1817},{"style":1816},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1818],{"type":173,"value":1778},{"type":167,"tag":239,"props":1820,"children":1821},{"style":246},[1822],{"type":173,"value":1823},")",{"type":167,"tag":239,"props":1825,"children":1826},{"style":1346},[1827],{"type":173,"value":1757},{"type":167,"tag":239,"props":1829,"children":1830},{"style":246},[1831],{"type":173,"value":483},{"type":167,"tag":239,"props":1833,"children":1834},{"class":241,"line":372},[1835,1839,1843,1847,1851],{"type":167,"tag":239,"props":1836,"children":1837},{"style":661},[1838],{"type":173,"value":1769},{"type":167,"tag":239,"props":1840,"children":1841},{"style":246},[1842],{"type":173,"value":567},{"type":167,"tag":239,"props":1844,"children":1845},{"style":661},[1846],{"type":173,"value":1778},{"type":167,"tag":239,"props":1848,"children":1849},{"style":458},[1850],{"type":173,"value":1360},{"type":167,"tag":239,"props":1852,"children":1853},{"style":661},[1854],{"type":173,"value":1855}," value\n",{"type":167,"tag":239,"props":1857,"children":1858},{"class":241,"line":389},[1859],{"type":167,"tag":239,"props":1860,"children":1861},{"style":246},[1862],{"type":173,"value":1796},{"type":167,"tag":239,"props":1864,"children":1865},{"class":241,"line":406},[1866,1871,1875,1879,1883],{"type":167,"tag":239,"props":1867,"children":1868},{"style":1699},[1869],{"type":173,"value":1870},"  onOpenToggle",{"type":167,"tag":239,"props":1872,"children":1873},{"style":246},[1874],{"type":173,"value":498},{"type":167,"tag":239,"props":1876,"children":1877},{"style":246},[1878],{"type":173,"value":1752},{"type":167,"tag":239,"props":1880,"children":1881},{"style":1346},[1882],{"type":173,"value":1757},{"type":167,"tag":239,"props":1884,"children":1885},{"style":246},[1886],{"type":173,"value":483},{"type":167,"tag":239,"props":1888,"children":1889},{"class":241,"line":423},[1890,1894,1898,1902,1906,1911,1915,1919],{"type":167,"tag":239,"props":1891,"children":1892},{"style":661},[1893],{"type":173,"value":1769},{"type":167,"tag":239,"props":1895,"children":1896},{"style":246},[1897],{"type":173,"value":567},{"type":167,"tag":239,"props":1899,"children":1900},{"style":661},[1901],{"type":173,"value":1778},{"type":167,"tag":239,"props":1903,"children":1904},{"style":458},[1905],{"type":173,"value":1360},{"type":167,"tag":239,"props":1907,"children":1908},{"style":458},[1909],{"type":173,"value":1910}," !",{"type":167,"tag":239,"props":1912,"children":1913},{"style":661},[1914],{"type":173,"value":469},{"type":167,"tag":239,"props":1916,"children":1917},{"style":246},[1918],{"type":173,"value":567},{"type":167,"tag":239,"props":1920,"children":1921},{"style":661},[1922],{"type":173,"value":1923},"value\n",{"type":167,"tag":239,"props":1925,"children":1926},{"class":241,"line":432},[1927],{"type":167,"tag":239,"props":1928,"children":1929},{"style":246},[1930],{"type":173,"value":1796},{"type":167,"tag":239,"props":1932,"children":1933},{"class":241,"line":486},[1934,1939,1943,1948],{"type":167,"tag":239,"props":1935,"children":1936},{"style":1370},[1937],{"type":173,"value":1938},"  contentId",{"type":167,"tag":239,"props":1940,"children":1941},{"style":246},[1942],{"type":173,"value":498},{"type":167,"tag":239,"props":1944,"children":1945},{"style":320},[1946],{"type":173,"value":1947}," ''",{"type":167,"tag":239,"props":1949,"children":1950},{"style":246},[1951],{"type":173,"value":1387},{"type":167,"tag":239,"props":1953,"children":1954},{"class":241,"line":518},[1955,1960,1964,1968],{"type":167,"tag":239,"props":1956,"children":1957},{"style":1370},[1958],{"type":173,"value":1959},"  titleId",{"type":167,"tag":239,"props":1961,"children":1962},{"style":246},[1963],{"type":173,"value":498},{"type":167,"tag":239,"props":1965,"children":1966},{"style":320},[1967],{"type":173,"value":1947},{"type":167,"tag":239,"props":1969,"children":1970},{"style":246},[1971],{"type":173,"value":1387},{"type":167,"tag":239,"props":1973,"children":1974},{"class":241,"line":527},[1975,1980,1984,1988],{"type":167,"tag":239,"props":1976,"children":1977},{"style":1370},[1978],{"type":173,"value":1979},"  descriptionId",{"type":167,"tag":239,"props":1981,"children":1982},{"style":246},[1983],{"type":173,"value":498},{"type":167,"tag":239,"props":1985,"children":1986},{"style":320},[1987],{"type":173,"value":1947},{"type":167,"tag":239,"props":1989,"children":1990},{"style":246},[1991],{"type":173,"value":1387},{"type":167,"tag":239,"props":1993,"children":1995},{"class":241,"line":1994},16,[1996,2001],{"type":167,"tag":239,"props":1997,"children":1998},{"style":661},[1999],{"type":173,"value":2000},"  triggerElement",{"type":167,"tag":239,"props":2002,"children":2003},{"style":246},[2004],{"type":173,"value":1387},{"type":167,"tag":239,"props":2006,"children":2008},{"class":241,"line":2007},17,[2009,2014],{"type":167,"tag":239,"props":2010,"children":2011},{"style":661},[2012],{"type":173,"value":2013},"  contentElement",{"type":167,"tag":239,"props":2015,"children":2016},{"style":246},[2017],{"type":173,"value":1387},{"type":167,"tag":239,"props":2019,"children":2021},{"class":241,"line":2020},18,[2022,2026],{"type":167,"tag":239,"props":2023,"children":2024},{"style":246},[2025],{"type":173,"value":1458},{"type":167,"tag":239,"props":2027,"children":2028},{"style":661},[2029],{"type":173,"value":2030},")\n",{"type":167,"tag":175,"props":2032,"children":2033},{},[2034],{"type":173,"value":2035},"另一个对开发者友好的特性是，Reka 把虚拟化的思想融入到各个组件。以往开发业务组件，往往会在表格、列表等需要特定性能优化的场景使用虚拟化技术。而 Reka 的 Combobox、ListBox、Tree 组件内置了虚拟化功能，并支持常见的设置，如：动态设置子项目高度、预渲染数量（也称为 offset）、设置项目文本内容（以支持搜索功能）等。Nuxt UI 的 InputMenu 和 SelectMenu 组件就是基于此类虚拟化组件实现的。",{"type":167,"tag":175,"props":2037,"children":2038},{},[2039],{"type":173,"value":2040},"总结一下，Reka 的设计原则是：无头、可访问性优先、开放可定制、开发者友好、高性能。此外，文档还提及 Reka 具有支持 SSR、国际化（多方向、日期、语言）等高级特性。最后，Reka 致谢有：Radix UI、React Aria、Floating UI、VueUse、Headless UI、Ariakit。两个没见过的都是“Aria”，即 React Aria 和 Ariakit。本以为是可访问性相关库，但是都只是 UI 组件库。也许 Reka 是从里面借鉴了一些组件？后续看到的话再确认。",{"type":167,"tag":175,"props":2042,"children":2043},{},[2044,2046,2055],{"type":173,"value":2045},"Reka 的设计团队是 ",{"type":167,"tag":2047,"props":2048,"children":2052},"a",{"href":2049,"rel":2050},"https://unovue.com/",[2051],"nofollow",[2053],{"type":173,"value":2054},"unovue",{"type":173,"value":2056},"，其下还有一款叫 Inspira UI 的组件库，兼具酷炫和实用，有兴趣的话也可以去看看。",{"type":167,"tag":175,"props":2058,"children":2059},{},[2060],{"type":173,"value":2061},"接下来主要从代码层看看。",{"type":167,"tag":168,"props":2063,"children":2065},{"id":2064},"工程保证",[2066],{"type":173,"value":2064},{"type":167,"tag":175,"props":2068,"children":2069},{},[2070],{"type":173,"value":2071},"项目是一个包含 Docs 官方文档、Core 组件库、和 Histoire 开发文档三个项目组成的 pnpm monorepo。用来做工程保证的包大概都见过，这里列举一下：",{"type":167,"tag":2073,"props":2074,"children":2075},"ul",{},[2076,2091,2105,2110],{"type":167,"tag":2077,"props":2078,"children":2079},"li",{},[2080,2082,2089],{"type":173,"value":2081},"交互式组件文档：",{"type":167,"tag":2047,"props":2083,"children":2086},{"href":2084,"rel":2085},"https://histoire.dev/guide/",[2051],[2087],{"type":173,"value":2088},"Histoire",{"type":173,"value":2090},"。StoryBook 的竞品，前年某个 Vue 项目接触过 StoryBook，简单尝试后发现对于小项目而言过于复杂了，他用的这个还不错。",{"type":167,"tag":2077,"props":2092,"children":2093},{},[2094,2096,2103],{"type":173,"value":2095},"代码规范：",{"type":167,"tag":2047,"props":2097,"children":2100},{"href":2098,"rel":2099},"https://github.com/antfu/eslint-config",[2051],[2101],{"type":173,"value":2102},"@antfu/eslint-config",{"type":173,"value":2104},"。",{"type":167,"tag":2077,"props":2106,"children":2107},{},[2108],{"type":173,"value":2109},"提交质量：simple-git-hooks 插入提交前检查和提交消息检查，分别由 lint-staged eslint 和 commitlint 代执行。",{"type":167,"tag":2077,"props":2111,"children":2112},{},[2113],{"type":173,"value":2114},"版本控制：bumpp 手动管理版本号。",{"type":167,"tag":175,"props":2116,"children":2117},{},[2118],{"type":173,"value":2119},"其他工程工具包括：核心包的 vue-tsc 类型检查、Vitest 单元测试、Vite 编译、pnpm 发包。",{"type":167,"tag":175,"props":2121,"children":2122},{},[2123],{"type":173,"value":2124},"因为没有历史包袱，代码量少的缘故，项目构建速度太快了，本体+插件（Nuxt module、Namespaced Entry、Unplugin-vue-component Resolver）能在 18 秒内完成。",{"type":167,"tag":175,"props":2126,"children":2127},{},[2128],{"type":173,"value":2129},"CI 方面。包括基本的 build、publish、release 流程，结构比较简单，可以现学现用。此外还为每一个 Pull Request 增加了 Spell Check，以及使用 pkg.pr.new 为其发布新包。",{"type":167,"tag":175,"props":2131,"children":2132},{},[2133,2140],{"type":167,"tag":2047,"props":2134,"children":2137},{"href":2135,"rel":2136},"https://github.com/stackblitz-labs/pkg.pr.new",[2051],[2138],{"type":173,"value":2139},"pkg.pr.new",{"type":173,"value":2141}," 是一个发包工具，允许终端用户通过包管理器兼容的 URL 协议格式安装某个 PR 修改过代码后发布的最新的包，比如：",{"type":167,"tag":229,"props":2143,"children":2147},{"className":2144,"code":2145,"language":2146,"meta":160,"style":160},"language-bash shiki shiki-themes material-theme-lighter github-light github-dark monokai","npm i https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n","bash",[2148],{"type":167,"tag":220,"props":2149,"children":2150},{"__ignoreMap":160},[2151],{"type":167,"tag":239,"props":2152,"children":2153},{"class":241,"line":242},[2154,2159,2164],{"type":167,"tag":239,"props":2155,"children":2156},{"style":442},[2157],{"type":173,"value":2158},"npm",{"type":167,"tag":239,"props":2160,"children":2161},{"style":326},[2162],{"type":173,"value":2163}," i",{"type":167,"tag":239,"props":2165,"children":2166},{"style":326},[2167],{"type":173,"value":2168}," https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n",{"type":167,"tag":175,"props":2170,"children":2171},{},[2172],{"type":173,"value":2173},"项目的 TypeScript 配置分为四个部分：开发时配置、构建配置、类型检查配置、测试环境配置。构建和开发配置主要的区别就是构建时不包括测试文件提高性能。测试环境配置使用 tsconfig/node 的基础配置。这部分和大部分项目差不多。",{"type":167,"tag":175,"props":2175,"children":2176},{},[2177],{"type":167,"tag":184,"props":2178,"children":2181},{"alt":2179,"src":2180},"tsconfig","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210235509.png",[],{"type":167,"tag":168,"props":2183,"children":2185},{"id":2184},"具体实现",[2186],{"type":173,"value":2184},{"type":167,"tag":2188,"props":2189,"children":2191},"h4",{"id":2190},"aschild-模式的具体实现",[2192],{"type":173,"value":2193},"asChild 模式的具体实现？",{"type":167,"tag":175,"props":2195,"children":2196},{},[2197],{"type":173,"value":2198},"组件的 asChild 属性允许用自定义元素替换组件默认的 HTML 元素，同时保留其功能和行为，如事件和无障碍相关属性。为了实现组件的 asChild，Reka 在每一个支持替换 DOM 结构的地方都使用 Primitive 组件作替代。其形如：",{"type":167,"tag":229,"props":2200,"children":2202},{"className":231,"code":2201,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CPrimitive :as-child=\"asChild\" :as=\"as\">\n    \u003Cslot />\n  \u003C/Primitive>\n\u003C/template>\n",[2203],{"type":167,"tag":220,"props":2204,"children":2205},{"__ignoreMap":160},[2206,2221,2281,2303,2318],{"type":167,"tag":239,"props":2207,"children":2208},{"class":241,"line":242},[2209,2213,2217],{"type":167,"tag":239,"props":2210,"children":2211},{"style":246},[2212],{"type":173,"value":249},{"type":167,"tag":239,"props":2214,"children":2215},{"style":252},[2216],{"type":173,"value":255},{"type":167,"tag":239,"props":2218,"children":2219},{"style":246},[2220],{"type":173,"value":260},{"type":167,"tag":239,"props":2222,"children":2223},{"class":241,"line":263},[2224,2228,2233,2238,2242,2246,2251,2255,2260,2264,2268,2273,2277],{"type":167,"tag":239,"props":2225,"children":2226},{"style":246},[2227],{"type":173,"value":269},{"type":167,"tag":239,"props":2229,"children":2230},{"style":252},[2231],{"type":173,"value":2232},"Primitive",{"type":167,"tag":239,"props":2234,"children":2235},{"style":309},[2236],{"type":173,"value":2237}," :as-child",{"type":167,"tag":239,"props":2239,"children":2240},{"style":246},[2241],{"type":173,"value":317},{"type":167,"tag":239,"props":2243,"children":2244},{"style":320},[2245],{"type":173,"value":323},{"type":167,"tag":239,"props":2247,"children":2248},{"style":326},[2249],{"type":173,"value":2250},"asChild",{"type":167,"tag":239,"props":2252,"children":2253},{"style":320},[2254],{"type":173,"value":323},{"type":167,"tag":239,"props":2256,"children":2257},{"style":309},[2258],{"type":173,"value":2259}," :as",{"type":167,"tag":239,"props":2261,"children":2262},{"style":246},[2263],{"type":173,"value":317},{"type":167,"tag":239,"props":2265,"children":2266},{"style":320},[2267],{"type":173,"value":323},{"type":167,"tag":239,"props":2269,"children":2270},{"style":326},[2271],{"type":173,"value":2272},"as",{"type":167,"tag":239,"props":2274,"children":2275},{"style":320},[2276],{"type":173,"value":323},{"type":167,"tag":239,"props":2278,"children":2279},{"style":246},[2280],{"type":173,"value":260},{"type":167,"tag":239,"props":2282,"children":2283},{"class":241,"line":281},[2284,2288,2293,2299],{"type":167,"tag":239,"props":2285,"children":2286},{"style":246},[2287],{"type":173,"value":297},{"type":167,"tag":239,"props":2289,"children":2290},{"style":252},[2291],{"type":173,"value":2292},"slot",{"type":167,"tag":239,"props":2294,"children":2296},{"style":2295},"--shiki-light:#39ADB5;--shiki-light-font-style:inherit;--shiki-default:#B31D28;--shiki-default-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;--shiki-sepia:#F44747;--shiki-sepia-font-style:inherit",[2297],{"type":173,"value":2298}," /",{"type":167,"tag":239,"props":2300,"children":2301},{"style":246},[2302],{"type":173,"value":260},{"type":167,"tag":239,"props":2304,"children":2305},{"class":241,"line":291},[2306,2310,2314],{"type":167,"tag":239,"props":2307,"children":2308},{"style":246},[2309],{"type":173,"value":378},{"type":167,"tag":239,"props":2311,"children":2312},{"style":252},[2313],{"type":173,"value":2232},{"type":167,"tag":239,"props":2315,"children":2316},{"style":246},[2317],{"type":173,"value":260},{"type":167,"tag":239,"props":2319,"children":2320},{"class":241,"line":305},[2321,2325,2329],{"type":167,"tag":239,"props":2322,"children":2323},{"style":246},[2324],{"type":173,"value":395},{"type":167,"tag":239,"props":2326,"children":2327},{"style":252},[2328],{"type":173,"value":255},{"type":167,"tag":239,"props":2330,"children":2331},{"style":246},[2332],{"type":173,"value":260},{"type":167,"tag":175,"props":2334,"children":2335},{},[2336],{"type":173,"value":2337},"Primitive 是一个专用于渲染的高阶组件，使用 as 指示 h 函数渲染具体的组件。而 asChild 属性其实是 as === 'template' 的一个语法糖。见下代码，如果 as 属性是 template，那么直接渲染子组件（Slot），否则渲染 as，默认值是 div。这样一来所有有 DOM 结构的 div 都可以在终端用户处处理成任意节点。代码简化如下：",{"type":167,"tag":229,"props":2339,"children":2341},{"className":1328,"code":2340,"language":1330,"meta":160,"style":160},"const Primitive = defineComponent({\n  setup(props, { attrs, slots }) {\n    if (asTag !== 'template')\n      return () => h(props.as, attrs, { default: slots.default })\n    else\n      return () => h(Slot, attrs, { default: slots.default })\n  },\n})\n",[2342],{"type":167,"tag":220,"props":2343,"children":2344},{"__ignoreMap":160},[2345,2374,2424,2463,2546,2554,2626,2633],{"type":167,"tag":239,"props":2346,"children":2347},{"class":241,"line":242},[2348,2352,2357,2361,2366,2370],{"type":167,"tag":239,"props":2349,"children":2350},{"style":1346},[2351],{"type":173,"value":1687},{"type":167,"tag":239,"props":2353,"children":2354},{"style":1352},[2355],{"type":173,"value":2356}," Primitive",{"type":167,"tag":239,"props":2358,"children":2359},{"style":458},[2360],{"type":173,"value":1360},{"type":167,"tag":239,"props":2362,"children":2363},{"style":1699},[2364],{"type":173,"value":2365}," defineComponent",{"type":167,"tag":239,"props":2367,"children":2368},{"style":661},[2369],{"type":173,"value":1707},{"type":167,"tag":239,"props":2371,"children":2372},{"style":246},[2373],{"type":173,"value":803},{"type":167,"tag":239,"props":2375,"children":2376},{"class":241,"line":263},[2377,2383,2387,2392,2397,2401,2406,2410,2415,2420],{"type":167,"tag":239,"props":2378,"children":2380},{"style":2379},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[2381],{"type":173,"value":2382},"  setup",{"type":167,"tag":239,"props":2384,"children":2385},{"style":246},[2386],{"type":173,"value":1707},{"type":167,"tag":239,"props":2388,"children":2389},{"style":1816},[2390],{"type":173,"value":2391},"props",{"type":167,"tag":239,"props":2393,"children":2394},{"style":246},[2395],{"type":173,"value":2396},",",{"type":167,"tag":239,"props":2398,"children":2399},{"style":246},[2400],{"type":173,"value":1623},{"type":167,"tag":239,"props":2402,"children":2403},{"style":1816},[2404],{"type":173,"value":2405}," attrs",{"type":167,"tag":239,"props":2407,"children":2408},{"style":246},[2409],{"type":173,"value":2396},{"type":167,"tag":239,"props":2411,"children":2412},{"style":1816},[2413],{"type":173,"value":2414}," slots",{"type":167,"tag":239,"props":2416,"children":2417},{"style":246},[2418],{"type":173,"value":2419}," })",{"type":167,"tag":239,"props":2421,"children":2422},{"style":246},[2423],{"type":173,"value":483},{"type":167,"tag":239,"props":2425,"children":2426},{"class":241,"line":281},[2427,2432,2436,2441,2446,2450,2454,2459],{"type":167,"tag":239,"props":2428,"children":2429},{"style":1340},[2430],{"type":173,"value":2431},"    if",{"type":167,"tag":239,"props":2433,"children":2434},{"style":1370},[2435],{"type":173,"value":1813},{"type":167,"tag":239,"props":2437,"children":2438},{"style":661},[2439],{"type":173,"value":2440},"asTag",{"type":167,"tag":239,"props":2442,"children":2443},{"style":458},[2444],{"type":173,"value":2445}," !==",{"type":167,"tag":239,"props":2447,"children":2448},{"style":320},[2449],{"type":173,"value":1642},{"type":167,"tag":239,"props":2451,"children":2452},{"style":326},[2453],{"type":173,"value":255},{"type":167,"tag":239,"props":2455,"children":2456},{"style":320},[2457],{"type":173,"value":2458},"'",{"type":167,"tag":239,"props":2460,"children":2461},{"style":1370},[2462],{"type":173,"value":2030},{"type":167,"tag":239,"props":2464,"children":2465},{"class":241,"line":291},[2466,2471,2475,2479,2484,2488,2492,2496,2500,2504,2508,2512,2516,2521,2525,2529,2533,2538,2542],{"type":167,"tag":239,"props":2467,"children":2468},{"style":1340},[2469],{"type":173,"value":2470},"      return",{"type":167,"tag":239,"props":2472,"children":2473},{"style":246},[2474],{"type":173,"value":1752},{"type":167,"tag":239,"props":2476,"children":2477},{"style":1346},[2478],{"type":173,"value":1757},{"type":167,"tag":239,"props":2480,"children":2481},{"style":1699},[2482],{"type":173,"value":2483}," h",{"type":167,"tag":239,"props":2485,"children":2486},{"style":1370},[2487],{"type":173,"value":1707},{"type":167,"tag":239,"props":2489,"children":2490},{"style":661},[2491],{"type":173,"value":2391},{"type":167,"tag":239,"props":2493,"children":2494},{"style":246},[2495],{"type":173,"value":567},{"type":167,"tag":239,"props":2497,"children":2498},{"style":661},[2499],{"type":173,"value":2272},{"type":167,"tag":239,"props":2501,"children":2502},{"style":246},[2503],{"type":173,"value":2396},{"type":167,"tag":239,"props":2505,"children":2506},{"style":661},[2507],{"type":173,"value":2405},{"type":167,"tag":239,"props":2509,"children":2510},{"style":246},[2511],{"type":173,"value":2396},{"type":167,"tag":239,"props":2513,"children":2514},{"style":246},[2515],{"type":173,"value":1623},{"type":167,"tag":239,"props":2517,"children":2518},{"style":1370},[2519],{"type":173,"value":2520}," default",{"type":167,"tag":239,"props":2522,"children":2523},{"style":246},[2524],{"type":173,"value":498},{"type":167,"tag":239,"props":2526,"children":2527},{"style":661},[2528],{"type":173,"value":2414},{"type":167,"tag":239,"props":2530,"children":2531},{"style":246},[2532],{"type":173,"value":567},{"type":167,"tag":239,"props":2534,"children":2535},{"style":661},[2536],{"type":173,"value":2537},"default",{"type":167,"tag":239,"props":2539,"children":2540},{"style":246},[2541],{"type":173,"value":1632},{"type":167,"tag":239,"props":2543,"children":2544},{"style":1370},[2545],{"type":173,"value":2030},{"type":167,"tag":239,"props":2547,"children":2548},{"class":241,"line":305},[2549],{"type":167,"tag":239,"props":2550,"children":2551},{"style":1340},[2552],{"type":173,"value":2553},"    else\n",{"type":167,"tag":239,"props":2555,"children":2556},{"class":241,"line":337},[2557,2561,2565,2569,2573,2577,2582,2586,2590,2594,2598,2602,2606,2610,2614,2618,2622],{"type":167,"tag":239,"props":2558,"children":2559},{"style":1340},[2560],{"type":173,"value":2470},{"type":167,"tag":239,"props":2562,"children":2563},{"style":246},[2564],{"type":173,"value":1752},{"type":167,"tag":239,"props":2566,"children":2567},{"style":1346},[2568],{"type":173,"value":1757},{"type":167,"tag":239,"props":2570,"children":2571},{"style":1699},[2572],{"type":173,"value":2483},{"type":167,"tag":239,"props":2574,"children":2575},{"style":1370},[2576],{"type":173,"value":1707},{"type":167,"tag":239,"props":2578,"children":2579},{"style":661},[2580],{"type":173,"value":2581},"Slot",{"type":167,"tag":239,"props":2583,"children":2584},{"style":246},[2585],{"type":173,"value":2396},{"type":167,"tag":239,"props":2587,"children":2588},{"style":661},[2589],{"type":173,"value":2405},{"type":167,"tag":239,"props":2591,"children":2592},{"style":246},[2593],{"type":173,"value":2396},{"type":167,"tag":239,"props":2595,"children":2596},{"style":246},[2597],{"type":173,"value":1623},{"type":167,"tag":239,"props":2599,"children":2600},{"style":1370},[2601],{"type":173,"value":2520},{"type":167,"tag":239,"props":2603,"children":2604},{"style":246},[2605],{"type":173,"value":498},{"type":167,"tag":239,"props":2607,"children":2608},{"style":661},[2609],{"type":173,"value":2414},{"type":167,"tag":239,"props":2611,"children":2612},{"style":246},[2613],{"type":173,"value":567},{"type":167,"tag":239,"props":2615,"children":2616},{"style":661},[2617],{"type":173,"value":2537},{"type":167,"tag":239,"props":2619,"children":2620},{"style":246},[2621],{"type":173,"value":1632},{"type":167,"tag":239,"props":2623,"children":2624},{"style":1370},[2625],{"type":173,"value":2030},{"type":167,"tag":239,"props":2627,"children":2628},{"class":241,"line":363},[2629],{"type":167,"tag":239,"props":2630,"children":2631},{"style":246},[2632],{"type":173,"value":1796},{"type":167,"tag":239,"props":2634,"children":2635},{"class":241,"line":372},[2636,2640],{"type":167,"tag":239,"props":2637,"children":2638},{"style":246},[2639],{"type":173,"value":1458},{"type":167,"tag":239,"props":2641,"children":2642},{"style":661},[2643],{"type":173,"value":2030},{"type":167,"tag":175,"props":2645,"children":2646},{},[2647],{"type":173,"value":2648},"Primitive 中没有直接渲染 slots.default 而使用 Slot 中转的原因主要是要在 Slot 组件处理 css class、props 和事件合并相关事项。实际最后渲染的实际内容是处理后的克隆的 slots.default。Slot 的代码简化如下：",{"type":167,"tag":229,"props":2650,"children":2652},{"className":1328,"code":2651,"language":1330,"meta":160,"style":160},"setup() {\n  const mergedProps = child.props\n    ? mergeProps(attrs, child.props)\n    : attrs\n  const cloned = cloneVNode(child, mergedProps)\n  child[0] = cloned\n  return child\n}\n",[2653],{"type":167,"tag":220,"props":2654,"children":2655},{"__ignoreMap":160},[2656,2673,2704,2746,2759,2801,2832,2845],{"type":167,"tag":239,"props":2657,"children":2658},{"class":241,"line":242},[2659,2664,2669],{"type":167,"tag":239,"props":2660,"children":2661},{"style":1699},[2662],{"type":173,"value":2663},"setup",{"type":167,"tag":239,"props":2665,"children":2666},{"style":661},[2667],{"type":173,"value":2668},"() ",{"type":167,"tag":239,"props":2670,"children":2671},{"style":246},[2672],{"type":173,"value":803},{"type":167,"tag":239,"props":2674,"children":2675},{"class":241,"line":263},[2676,2681,2686,2690,2695,2699],{"type":167,"tag":239,"props":2677,"children":2678},{"style":1346},[2679],{"type":173,"value":2680},"  const",{"type":167,"tag":239,"props":2682,"children":2683},{"style":1352},[2684],{"type":173,"value":2685}," mergedProps",{"type":167,"tag":239,"props":2687,"children":2688},{"style":458},[2689],{"type":173,"value":1360},{"type":167,"tag":239,"props":2691,"children":2692},{"style":661},[2693],{"type":173,"value":2694}," child",{"type":167,"tag":239,"props":2696,"children":2697},{"style":246},[2698],{"type":173,"value":567},{"type":167,"tag":239,"props":2700,"children":2701},{"style":661},[2702],{"type":173,"value":2703},"props\n",{"type":167,"tag":239,"props":2705,"children":2706},{"class":241,"line":281},[2707,2712,2717,2721,2726,2730,2734,2738,2742],{"type":167,"tag":239,"props":2708,"children":2709},{"style":458},[2710],{"type":173,"value":2711},"    ?",{"type":167,"tag":239,"props":2713,"children":2714},{"style":1699},[2715],{"type":173,"value":2716}," mergeProps",{"type":167,"tag":239,"props":2718,"children":2719},{"style":1370},[2720],{"type":173,"value":1707},{"type":167,"tag":239,"props":2722,"children":2723},{"style":661},[2724],{"type":173,"value":2725},"attrs",{"type":167,"tag":239,"props":2727,"children":2728},{"style":246},[2729],{"type":173,"value":2396},{"type":167,"tag":239,"props":2731,"children":2732},{"style":661},[2733],{"type":173,"value":2694},{"type":167,"tag":239,"props":2735,"children":2736},{"style":246},[2737],{"type":173,"value":567},{"type":167,"tag":239,"props":2739,"children":2740},{"style":661},[2741],{"type":173,"value":2391},{"type":167,"tag":239,"props":2743,"children":2744},{"style":1370},[2745],{"type":173,"value":2030},{"type":167,"tag":239,"props":2747,"children":2748},{"class":241,"line":291},[2749,2754],{"type":167,"tag":239,"props":2750,"children":2751},{"style":458},[2752],{"type":173,"value":2753},"    :",{"type":167,"tag":239,"props":2755,"children":2756},{"style":661},[2757],{"type":173,"value":2758}," attrs\n",{"type":167,"tag":239,"props":2760,"children":2761},{"class":241,"line":305},[2762,2766,2771,2775,2780,2784,2789,2793,2797],{"type":167,"tag":239,"props":2763,"children":2764},{"style":1346},[2765],{"type":173,"value":2680},{"type":167,"tag":239,"props":2767,"children":2768},{"style":1352},[2769],{"type":173,"value":2770}," cloned",{"type":167,"tag":239,"props":2772,"children":2773},{"style":458},[2774],{"type":173,"value":1360},{"type":167,"tag":239,"props":2776,"children":2777},{"style":1699},[2778],{"type":173,"value":2779}," cloneVNode",{"type":167,"tag":239,"props":2781,"children":2782},{"style":1370},[2783],{"type":173,"value":1707},{"type":167,"tag":239,"props":2785,"children":2786},{"style":661},[2787],{"type":173,"value":2788},"child",{"type":167,"tag":239,"props":2790,"children":2791},{"style":246},[2792],{"type":173,"value":2396},{"type":167,"tag":239,"props":2794,"children":2795},{"style":661},[2796],{"type":173,"value":2685},{"type":167,"tag":239,"props":2798,"children":2799},{"style":1370},[2800],{"type":173,"value":2030},{"type":167,"tag":239,"props":2802,"children":2803},{"class":241,"line":337},[2804,2809,2813,2818,2823,2827],{"type":167,"tag":239,"props":2805,"children":2806},{"style":661},[2807],{"type":173,"value":2808},"  child",{"type":167,"tag":239,"props":2810,"children":2811},{"style":1370},[2812],{"type":173,"value":450},{"type":167,"tag":239,"props":2814,"children":2815},{"style":501},[2816],{"type":173,"value":2817},"0",{"type":167,"tag":239,"props":2819,"children":2820},{"style":1370},[2821],{"type":173,"value":2822},"] ",{"type":167,"tag":239,"props":2824,"children":2825},{"style":458},[2826],{"type":173,"value":317},{"type":167,"tag":239,"props":2828,"children":2829},{"style":661},[2830],{"type":173,"value":2831}," cloned\n",{"type":167,"tag":239,"props":2833,"children":2834},{"class":241,"line":363},[2835,2840],{"type":167,"tag":239,"props":2836,"children":2837},{"style":1340},[2838],{"type":173,"value":2839},"  return",{"type":167,"tag":239,"props":2841,"children":2842},{"style":661},[2843],{"type":173,"value":2844}," child\n",{"type":167,"tag":239,"props":2846,"children":2847},{"class":241,"line":372},[2848],{"type":167,"tag":239,"props":2849,"children":2850},{"style":246},[2851],{"type":173,"value":692},{"type":167,"tag":2188,"props":2853,"children":2855},{"id":2854},"injectcontext-模式的具体实现",[2856],{"type":173,"value":2857},"InjectContext 模式的具体实现？",{"type":167,"tag":175,"props":2859,"children":2860},{},[2861],{"type":173,"value":2862},"Reka 使用 injectContext 模式实现组件内的状态共享，具体而言，就是在组件分层定义不同的状态和方法，然后在子组件使用 inject 获得并使用。",{"type":167,"tag":175,"props":2864,"children":2865},{},[2866],{"type":173,"value":2867},"以 Accordion 组件（折叠面板）为例，使用方式如下。Root 是 Accordion 的根节点，Item 是每一个可折叠的子项，Header 是子项标题，Trigger 是箭头按钮，Content 是子项展开后的内容区域。",{"type":167,"tag":229,"props":2869,"children":2871},{"className":231,"code":2870,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003CAccordionItem>\n      \u003CAccordionHeader>\n        \u003CAccordionTrigger />\n      \u003C/AccordionHeader>\n      \u003CAccordionContent />\n    \u003C/AccordionItem>\n  \u003C/AccordionRoot>\n\u003C/template>\n",[2872],{"type":167,"tag":220,"props":2873,"children":2874},{"__ignoreMap":160},[2875,2890,2905,2920,2936,2952,2967,2983,2998,3013],{"type":167,"tag":239,"props":2876,"children":2877},{"class":241,"line":242},[2878,2882,2886],{"type":167,"tag":239,"props":2879,"children":2880},{"style":246},[2881],{"type":173,"value":249},{"type":167,"tag":239,"props":2883,"children":2884},{"style":252},[2885],{"type":173,"value":255},{"type":167,"tag":239,"props":2887,"children":2888},{"style":246},[2889],{"type":173,"value":260},{"type":167,"tag":239,"props":2891,"children":2892},{"class":241,"line":263},[2893,2897,2901],{"type":167,"tag":239,"props":2894,"children":2895},{"style":246},[2896],{"type":173,"value":269},{"type":167,"tag":239,"props":2898,"children":2899},{"style":252},[2900],{"type":173,"value":274},{"type":167,"tag":239,"props":2902,"children":2903},{"style":246},[2904],{"type":173,"value":260},{"type":167,"tag":239,"props":2906,"children":2907},{"class":241,"line":281},[2908,2912,2916],{"type":167,"tag":239,"props":2909,"children":2910},{"style":246},[2911],{"type":173,"value":297},{"type":167,"tag":239,"props":2913,"children":2914},{"style":252},[2915],{"type":173,"value":445},{"type":167,"tag":239,"props":2917,"children":2918},{"style":246},[2919],{"type":173,"value":260},{"type":167,"tag":239,"props":2921,"children":2922},{"class":241,"line":291},[2923,2927,2932],{"type":167,"tag":239,"props":2924,"children":2925},{"style":246},[2926],{"type":173,"value":940},{"type":167,"tag":239,"props":2928,"children":2929},{"style":252},[2930],{"type":173,"value":2931},"AccordionHeader",{"type":167,"tag":239,"props":2933,"children":2934},{"style":246},[2935],{"type":173,"value":260},{"type":167,"tag":239,"props":2937,"children":2938},{"class":241,"line":305},[2939,2943,2948],{"type":167,"tag":239,"props":2940,"children":2941},{"style":246},[2942],{"type":173,"value":962},{"type":167,"tag":239,"props":2944,"children":2945},{"style":252},[2946],{"type":173,"value":2947},"AccordionTrigger",{"type":167,"tag":239,"props":2949,"children":2950},{"style":246},[2951],{"type":173,"value":1251},{"type":167,"tag":239,"props":2953,"children":2954},{"class":241,"line":337},[2955,2959,2963],{"type":167,"tag":239,"props":2956,"children":2957},{"style":246},[2958],{"type":173,"value":1034},{"type":167,"tag":239,"props":2960,"children":2961},{"style":252},[2962],{"type":173,"value":2931},{"type":167,"tag":239,"props":2964,"children":2965},{"style":246},[2966],{"type":173,"value":260},{"type":167,"tag":239,"props":2968,"children":2969},{"class":241,"line":363},[2970,2974,2979],{"type":167,"tag":239,"props":2971,"children":2972},{"style":246},[2973],{"type":173,"value":940},{"type":167,"tag":239,"props":2975,"children":2976},{"style":252},[2977],{"type":173,"value":2978},"AccordionContent",{"type":167,"tag":239,"props":2980,"children":2981},{"style":246},[2982],{"type":173,"value":1251},{"type":167,"tag":239,"props":2984,"children":2985},{"class":241,"line":372},[2986,2990,2994],{"type":167,"tag":239,"props":2987,"children":2988},{"style":246},[2989],{"type":173,"value":1058},{"type":167,"tag":239,"props":2991,"children":2992},{"style":252},[2993],{"type":173,"value":445},{"type":167,"tag":239,"props":2995,"children":2996},{"style":246},[2997],{"type":173,"value":260},{"type":167,"tag":239,"props":2999,"children":3000},{"class":241,"line":389},[3001,3005,3009],{"type":167,"tag":239,"props":3002,"children":3003},{"style":246},[3004],{"type":173,"value":378},{"type":167,"tag":239,"props":3006,"children":3007},{"style":252},[3008],{"type":173,"value":274},{"type":167,"tag":239,"props":3010,"children":3011},{"style":246},[3012],{"type":173,"value":260},{"type":167,"tag":239,"props":3014,"children":3015},{"class":241,"line":406},[3016,3020,3024],{"type":167,"tag":239,"props":3017,"children":3018},{"style":246},[3019],{"type":173,"value":395},{"type":167,"tag":239,"props":3021,"children":3022},{"style":252},[3023],{"type":173,"value":255},{"type":167,"tag":239,"props":3025,"children":3026},{"style":246},[3027],{"type":173,"value":260},{"type":167,"tag":175,"props":3029,"children":3030},{},[3031],{"type":173,"value":3032},"由使用方式可以知道，在 Accordion 内部，context 的继承结构是这样的：",{"type":167,"tag":3034,"props":3035,"children":3037},"mermaid",{"size":3036},"md",[3038],{"type":173,"value":3039},"\nflowchart TD\n    subgraph AccordionRootContext[AccordionRootContext]\n        ARCDisabled[disabled]\n        ARCDirection[direction]\n        ARCRest[...]\n    end\n    subgraph AccordionItemContext[AccordionItemContext]\n        AICValue[value]\n        AICRest[...]\n    end\n    A(AccordionRoot) -.-> |provide| AccordionRootContext\n    B(AccordionItem) -.-> |provide| AccordionItemContext\n    B --> A\n    C(AccordionHeader) --> B\n    AccordionRootContext -.-> |inject| C\n    AccordionItemContext -.-> |inject| C\n    D(AccordionContent) --> B\n    AccordionRootContext -.-> |inject| D\n    AccordionItemContext -.-> |inject| D\n",{"type":167,"tag":175,"props":3041,"children":3042},{},[3043],{"type":173,"value":3044},"一个组件可能有多个 Context，但是必须放在组件的 Vue SFC 文件中定义，才能从模版泛型中取到正确的类型。所以 Reka 组件实现有一种固定的写法，见下图，将需要导出的内容放在 script setup 外部，script setup 内部是一般的组件实现。",{"type":167,"tag":175,"props":3046,"children":3047},{},[3048],{"type":167,"tag":184,"props":3049,"children":3051},{"alt":160,"src":3050},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210529128.png",[],{"type":167,"tag":175,"props":3053,"children":3054},{},[3055],{"type":173,"value":3056},"所有 Vue SFC 导出的内容都通过组件文件夹内的桶文件（index.ts）再次导出，这样其他 Reka 组件或终端用户就能正常获取 Context 的 inject 方法。",{"type":167,"tag":175,"props":3058,"children":3059},{},[3060],{"type":167,"tag":184,"props":3061,"children":3064},{"alt":3062,"src":3063},"组件桶文件","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210534788.png",[],{"type":167,"tag":175,"props":3066,"children":3067},{},[3068],{"type":173,"value":3069},"至于 createContext 的实现，其实就是做了防错处理的 vue inject 和 vue provide，没什么特别之处，就不展开说了。",{"type":167,"tag":2188,"props":3071,"children":3073},{"id":3072},"组件延迟卸载的实现",[3074],{"type":173,"value":3075},"组件延迟卸载的实现？",{"type":167,"tag":175,"props":3077,"children":3078},{},[3079],{"type":173,"value":3080},"上面提到 Reka 使用 Presence 高阶组件来实现组件的延迟卸载，下面以 Dialog 举例。见下 DialogOverlay 的实现，根节点是 Presence 组件，其 present 属性用于节点存续状态。实际渲染的内容是 DialogOverlayImpl 组件。不过这种写法不支持 Vue Fragment。",{"type":167,"tag":229,"props":3082,"children":3084},{"className":231,"code":3083,"language":233,"meta":160,"style":160},"\u003Ctemplate>\n  \u003CPresence :present=\"forceMount || rootContext.open.value\">\n    \u003CDialogOverlayImpl />\n  \u003C/Presence>\n\u003C/template>\n",[3085],{"type":167,"tag":220,"props":3086,"children":3087},{"__ignoreMap":160},[3088,3103,3141,3157,3172],{"type":167,"tag":239,"props":3089,"children":3090},{"class":241,"line":242},[3091,3095,3099],{"type":167,"tag":239,"props":3092,"children":3093},{"style":246},[3094],{"type":173,"value":249},{"type":167,"tag":239,"props":3096,"children":3097},{"style":252},[3098],{"type":173,"value":255},{"type":167,"tag":239,"props":3100,"children":3101},{"style":246},[3102],{"type":173,"value":260},{"type":167,"tag":239,"props":3104,"children":3105},{"class":241,"line":263},[3106,3110,3115,3120,3124,3128,3133,3137],{"type":167,"tag":239,"props":3107,"children":3108},{"style":246},[3109],{"type":173,"value":269},{"type":167,"tag":239,"props":3111,"children":3112},{"style":252},[3113],{"type":173,"value":3114},"Presence",{"type":167,"tag":239,"props":3116,"children":3117},{"style":309},[3118],{"type":173,"value":3119}," :present",{"type":167,"tag":239,"props":3121,"children":3122},{"style":246},[3123],{"type":173,"value":317},{"type":167,"tag":239,"props":3125,"children":3126},{"style":320},[3127],{"type":173,"value":323},{"type":167,"tag":239,"props":3129,"children":3130},{"style":326},[3131],{"type":173,"value":3132},"forceMount || rootContext.open.value",{"type":167,"tag":239,"props":3134,"children":3135},{"style":320},[3136],{"type":173,"value":323},{"type":167,"tag":239,"props":3138,"children":3139},{"style":246},[3140],{"type":173,"value":260},{"type":167,"tag":239,"props":3142,"children":3143},{"class":241,"line":281},[3144,3148,3153],{"type":167,"tag":239,"props":3145,"children":3146},{"style":246},[3147],{"type":173,"value":297},{"type":167,"tag":239,"props":3149,"children":3150},{"style":252},[3151],{"type":173,"value":3152},"DialogOverlayImpl",{"type":167,"tag":239,"props":3154,"children":3155},{"style":246},[3156],{"type":173,"value":1251},{"type":167,"tag":239,"props":3158,"children":3159},{"class":241,"line":291},[3160,3164,3168],{"type":167,"tag":239,"props":3161,"children":3162},{"style":246},[3163],{"type":173,"value":378},{"type":167,"tag":239,"props":3165,"children":3166},{"style":252},[3167],{"type":173,"value":3114},{"type":167,"tag":239,"props":3169,"children":3170},{"style":246},[3171],{"type":173,"value":260},{"type":167,"tag":239,"props":3173,"children":3174},{"class":241,"line":305},[3175,3179,3183],{"type":167,"tag":239,"props":3176,"children":3177},{"style":246},[3178],{"type":173,"value":395},{"type":167,"tag":239,"props":3180,"children":3181},{"style":252},[3182],{"type":173,"value":255},{"type":167,"tag":239,"props":3184,"children":3185},{"style":246},[3186],{"type":173,"value":260},{"type":167,"tag":175,"props":3188,"children":3189},{},[3190],{"type":173,"value":3191},"在 Presence 内部，只要动画还没结束，或组件受控（强制挂载），就仍然会渲染内容。其中，usePresence 就是判断 DOM 节点动画运行状态的相关逻辑，动画没有结束，那么 isPresent 就是 true。forceMount 用于需要强制渲染组件的场景，就类似上文提到 Reka 结合 @vueuse/motion 使用调控组件动画。",{"type":167,"tag":229,"props":3193,"children":3195},{"className":1328,"code":3194,"language":1330,"meta":160,"style":160},"setup(props, { slots, expose }) {\n  const { present, forceMount } = toRefs(props)\n  const { isPresent } = usePresence(present, node)\n  return () => {\n    if (forceMount.value || present.value || isPresent.value) {\n      return h(slots.default())\n    } else {\n      return null\n    }\n  }\n}\n",[3196],{"type":167,"tag":220,"props":3197,"children":3198},{"__ignoreMap":160},[3199,3245,3295,3346,3365,3430,3463,3480,3493,3501,3508],{"type":167,"tag":239,"props":3200,"children":3201},{"class":241,"line":242},[3202,3206,3211,3215,3219,3223,3227,3232,3236,3241],{"type":167,"tag":239,"props":3203,"children":3204},{"style":1699},[3205],{"type":173,"value":2663},{"type":167,"tag":239,"props":3207,"children":3208},{"style":661},[3209],{"type":173,"value":3210},"(props",{"type":167,"tag":239,"props":3212,"children":3213},{"style":246},[3214],{"type":173,"value":2396},{"type":167,"tag":239,"props":3216,"children":3217},{"style":246},[3218],{"type":173,"value":1623},{"type":167,"tag":239,"props":3220,"children":3221},{"style":661},[3222],{"type":173,"value":2414},{"type":167,"tag":239,"props":3224,"children":3225},{"style":246},[3226],{"type":173,"value":2396},{"type":167,"tag":239,"props":3228,"children":3229},{"style":661},[3230],{"type":173,"value":3231}," expose ",{"type":167,"tag":239,"props":3233,"children":3234},{"style":246},[3235],{"type":173,"value":1458},{"type":167,"tag":239,"props":3237,"children":3238},{"style":661},[3239],{"type":173,"value":3240},") ",{"type":167,"tag":239,"props":3242,"children":3243},{"style":246},[3244],{"type":173,"value":803},{"type":167,"tag":239,"props":3246,"children":3247},{"class":241,"line":263},[3248,3252,3256,3261,3265,3270,3274,3278,3283,3287,3291],{"type":167,"tag":239,"props":3249,"children":3250},{"style":1346},[3251],{"type":173,"value":2680},{"type":167,"tag":239,"props":3253,"children":3254},{"style":246},[3255],{"type":173,"value":1623},{"type":167,"tag":239,"props":3257,"children":3258},{"style":1352},[3259],{"type":173,"value":3260}," present",{"type":167,"tag":239,"props":3262,"children":3263},{"style":246},[3264],{"type":173,"value":2396},{"type":167,"tag":239,"props":3266,"children":3267},{"style":1352},[3268],{"type":173,"value":3269}," forceMount",{"type":167,"tag":239,"props":3271,"children":3272},{"style":246},[3273],{"type":173,"value":1632},{"type":167,"tag":239,"props":3275,"children":3276},{"style":458},[3277],{"type":173,"value":1360},{"type":167,"tag":239,"props":3279,"children":3280},{"style":1699},[3281],{"type":173,"value":3282}," toRefs",{"type":167,"tag":239,"props":3284,"children":3285},{"style":1370},[3286],{"type":173,"value":1707},{"type":167,"tag":239,"props":3288,"children":3289},{"style":661},[3290],{"type":173,"value":2391},{"type":167,"tag":239,"props":3292,"children":3293},{"style":1370},[3294],{"type":173,"value":2030},{"type":167,"tag":239,"props":3296,"children":3297},{"class":241,"line":281},[3298,3302,3306,3311,3315,3319,3324,3328,3333,3337,3342],{"type":167,"tag":239,"props":3299,"children":3300},{"style":1346},[3301],{"type":173,"value":2680},{"type":167,"tag":239,"props":3303,"children":3304},{"style":246},[3305],{"type":173,"value":1623},{"type":167,"tag":239,"props":3307,"children":3308},{"style":1352},[3309],{"type":173,"value":3310}," isPresent",{"type":167,"tag":239,"props":3312,"children":3313},{"style":246},[3314],{"type":173,"value":1632},{"type":167,"tag":239,"props":3316,"children":3317},{"style":458},[3318],{"type":173,"value":1360},{"type":167,"tag":239,"props":3320,"children":3321},{"style":1699},[3322],{"type":173,"value":3323}," usePresence",{"type":167,"tag":239,"props":3325,"children":3326},{"style":1370},[3327],{"type":173,"value":1707},{"type":167,"tag":239,"props":3329,"children":3330},{"style":661},[3331],{"type":173,"value":3332},"present",{"type":167,"tag":239,"props":3334,"children":3335},{"style":246},[3336],{"type":173,"value":2396},{"type":167,"tag":239,"props":3338,"children":3339},{"style":661},[3340],{"type":173,"value":3341}," node",{"type":167,"tag":239,"props":3343,"children":3344},{"style":1370},[3345],{"type":173,"value":2030},{"type":167,"tag":239,"props":3347,"children":3348},{"class":241,"line":291},[3349,3353,3357,3361],{"type":167,"tag":239,"props":3350,"children":3351},{"style":1340},[3352],{"type":173,"value":2839},{"type":167,"tag":239,"props":3354,"children":3355},{"style":246},[3356],{"type":173,"value":1752},{"type":167,"tag":239,"props":3358,"children":3359},{"style":1346},[3360],{"type":173,"value":1757},{"type":167,"tag":239,"props":3362,"children":3363},{"style":246},[3364],{"type":173,"value":483},{"type":167,"tag":239,"props":3366,"children":3367},{"class":241,"line":305},[3368,3372,3376,3381,3385,3389,3394,3398,3402,3406,3410,3414,3418,3422,3426],{"type":167,"tag":239,"props":3369,"children":3370},{"style":1340},[3371],{"type":173,"value":2431},{"type":167,"tag":239,"props":3373,"children":3374},{"style":1370},[3375],{"type":173,"value":1813},{"type":167,"tag":239,"props":3377,"children":3378},{"style":661},[3379],{"type":173,"value":3380},"forceMount",{"type":167,"tag":239,"props":3382,"children":3383},{"style":246},[3384],{"type":173,"value":567},{"type":167,"tag":239,"props":3386,"children":3387},{"style":661},[3388],{"type":173,"value":1778},{"type":167,"tag":239,"props":3390,"children":3391},{"style":458},[3392],{"type":173,"value":3393}," ||",{"type":167,"tag":239,"props":3395,"children":3396},{"style":661},[3397],{"type":173,"value":3260},{"type":167,"tag":239,"props":3399,"children":3400},{"style":246},[3401],{"type":173,"value":567},{"type":167,"tag":239,"props":3403,"children":3404},{"style":661},[3405],{"type":173,"value":1778},{"type":167,"tag":239,"props":3407,"children":3408},{"style":458},[3409],{"type":173,"value":3393},{"type":167,"tag":239,"props":3411,"children":3412},{"style":661},[3413],{"type":173,"value":3310},{"type":167,"tag":239,"props":3415,"children":3416},{"style":246},[3417],{"type":173,"value":567},{"type":167,"tag":239,"props":3419,"children":3420},{"style":661},[3421],{"type":173,"value":1778},{"type":167,"tag":239,"props":3423,"children":3424},{"style":1370},[3425],{"type":173,"value":3240},{"type":167,"tag":239,"props":3427,"children":3428},{"style":246},[3429],{"type":173,"value":803},{"type":167,"tag":239,"props":3431,"children":3432},{"class":241,"line":337},[3433,3437,3441,3445,3450,3454,3458],{"type":167,"tag":239,"props":3434,"children":3435},{"style":1340},[3436],{"type":173,"value":2470},{"type":167,"tag":239,"props":3438,"children":3439},{"style":1699},[3440],{"type":173,"value":2483},{"type":167,"tag":239,"props":3442,"children":3443},{"style":1370},[3444],{"type":173,"value":1707},{"type":167,"tag":239,"props":3446,"children":3447},{"style":661},[3448],{"type":173,"value":3449},"slots",{"type":167,"tag":239,"props":3451,"children":3452},{"style":246},[3453],{"type":173,"value":567},{"type":167,"tag":239,"props":3455,"children":3456},{"style":1699},[3457],{"type":173,"value":2537},{"type":167,"tag":239,"props":3459,"children":3460},{"style":1370},[3461],{"type":173,"value":3462},"())\n",{"type":167,"tag":239,"props":3464,"children":3465},{"class":241,"line":363},[3466,3471,3476],{"type":167,"tag":239,"props":3467,"children":3468},{"style":246},[3469],{"type":173,"value":3470},"    }",{"type":167,"tag":239,"props":3472,"children":3473},{"style":1340},[3474],{"type":173,"value":3475}," else",{"type":167,"tag":239,"props":3477,"children":3478},{"style":246},[3479],{"type":173,"value":483},{"type":167,"tag":239,"props":3481,"children":3482},{"class":241,"line":372},[3483,3487],{"type":167,"tag":239,"props":3484,"children":3485},{"style":1340},[3486],{"type":173,"value":2470},{"type":167,"tag":239,"props":3488,"children":3490},{"style":3489},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3491],{"type":173,"value":3492}," null\n",{"type":167,"tag":239,"props":3494,"children":3495},{"class":241,"line":389},[3496],{"type":167,"tag":239,"props":3497,"children":3498},{"style":246},[3499],{"type":173,"value":3500},"    }\n",{"type":167,"tag":239,"props":3502,"children":3503},{"class":241,"line":406},[3504],{"type":167,"tag":239,"props":3505,"children":3506},{"style":246},[3507],{"type":173,"value":524},{"type":167,"tag":239,"props":3509,"children":3510},{"class":241,"line":423},[3511],{"type":167,"tag":239,"props":3512,"children":3513},{"style":246},[3514],{"type":173,"value":692},{"type":167,"tag":175,"props":3516,"children":3517},{},[3518],{"type":173,"value":3519},"usePresence 内部有个状态机，用来表示组件所处的挂载状态。Vue 组件有 mounted 和 unmounted 两种，再加一种 unmountSuspended 用来表示动画还在运行。三种状态的流转方式如下：",{"type":167,"tag":3034,"props":3521,"children":3522},{"size":3036},[3523],{"type":173,"value":3524},"\nstateDiagram-v2\n    [*] --> mounted\n    mounted --> unmounted: UNMOUNT\n    mounted --> unmountSuspended: ANIMATION_OUT\n    unmountSuspended --> mounted: MOUNT\n    unmountSuspended --> unmounted: ANIMATION_END\n    unmounted --> mounted: MOUNT\n",{"type":167,"tag":175,"props":3526,"children":3527},{},[3528],{"type":173,"value":3529},"三种状态组合成计算属性 isPresent，只要动画还在运行，isPresent 就是 true，这和上面提到的是一致的。",{"type":167,"tag":229,"props":3531,"children":3533},{"className":1328,"code":3532,"language":1330,"meta":160,"style":160},"const isPresent = computed(() =>\n  ['mounted', 'unmountSuspended'].includes(state.value),\n)\n",[3534],{"type":167,"tag":220,"props":3535,"children":3536},{"__ignoreMap":160},[3537,3571,3640],{"type":167,"tag":239,"props":3538,"children":3539},{"class":241,"line":242},[3540,3544,3548,3552,3557,3561,3566],{"type":167,"tag":239,"props":3541,"children":3542},{"style":1346},[3543],{"type":173,"value":1687},{"type":167,"tag":239,"props":3545,"children":3546},{"style":1352},[3547],{"type":173,"value":3310},{"type":167,"tag":239,"props":3549,"children":3550},{"style":458},[3551],{"type":173,"value":1360},{"type":167,"tag":239,"props":3553,"children":3554},{"style":1699},[3555],{"type":173,"value":3556}," computed",{"type":167,"tag":239,"props":3558,"children":3559},{"style":661},[3560],{"type":173,"value":1707},{"type":167,"tag":239,"props":3562,"children":3563},{"style":246},[3564],{"type":173,"value":3565},"()",{"type":167,"tag":239,"props":3567,"children":3568},{"style":1346},[3569],{"type":173,"value":3570}," =>\n",{"type":167,"tag":239,"props":3572,"children":3573},{"class":241,"line":263},[3574,3579,3583,3588,3592,3596,3600,3605,3609,3613,3617,3622,3627,3631,3636],{"type":167,"tag":239,"props":3575,"children":3576},{"style":661},[3577],{"type":173,"value":3578},"  [",{"type":167,"tag":239,"props":3580,"children":3581},{"style":320},[3582],{"type":173,"value":2458},{"type":167,"tag":239,"props":3584,"children":3585},{"style":326},[3586],{"type":173,"value":3587},"mounted",{"type":167,"tag":239,"props":3589,"children":3590},{"style":320},[3591],{"type":173,"value":2458},{"type":167,"tag":239,"props":3593,"children":3594},{"style":246},[3595],{"type":173,"value":2396},{"type":167,"tag":239,"props":3597,"children":3598},{"style":320},[3599],{"type":173,"value":1642},{"type":167,"tag":239,"props":3601,"children":3602},{"style":326},[3603],{"type":173,"value":3604},"unmountSuspended",{"type":167,"tag":239,"props":3606,"children":3607},{"style":320},[3608],{"type":173,"value":2458},{"type":167,"tag":239,"props":3610,"children":3611},{"style":661},[3612],{"type":173,"value":478},{"type":167,"tag":239,"props":3614,"children":3615},{"style":246},[3616],{"type":173,"value":567},{"type":167,"tag":239,"props":3618,"children":3619},{"style":1699},[3620],{"type":173,"value":3621},"includes",{"type":167,"tag":239,"props":3623,"children":3624},{"style":661},[3625],{"type":173,"value":3626},"(state",{"type":167,"tag":239,"props":3628,"children":3629},{"style":246},[3630],{"type":173,"value":567},{"type":167,"tag":239,"props":3632,"children":3633},{"style":661},[3634],{"type":173,"value":3635},"value)",{"type":167,"tag":239,"props":3637,"children":3638},{"style":246},[3639],{"type":173,"value":1387},{"type":167,"tag":239,"props":3641,"children":3642},{"class":241,"line":281},[3643],{"type":167,"tag":239,"props":3644,"children":3645},{"style":661},[3646],{"type":173,"value":2030},{"type":167,"tag":175,"props":3648,"children":3649},{},[3650],{"type":173,"value":3651},"怎么处理状态的流转呢？代码中根据当前组件是否挂载，以及动画的名称，来决定触发何种状态流转。",{"type":167,"tag":2073,"props":3653,"children":3654},{},[3655,3660,3665,3670],{"type":167,"tag":2077,"props":3656,"children":3657},{},[3658],{"type":173,"value":3659},"组件挂载时，状态切换到 mounted",{"type":167,"tag":2077,"props":3661,"children":3662},{},[3663],{"type":173,"value":3664},"当前没有动画，或节点不可见，状态切换到 unmounted",{"type":167,"tag":2077,"props":3666,"children":3667},{},[3668],{"type":173,"value":3669},"组件已挂载且当前动画正在运行，状态切换到 unmountSuspended",{"type":167,"tag":2077,"props":3671,"children":3672},{},[3673],{"type":173,"value":3674},"动画结束后，状态切换到 unmounted",{"type":167,"tag":229,"props":3676,"children":3678},{"className":1328,"code":3677,"language":1330,"meta":160,"style":160},"watch(\n  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n  present,\n  async (currentPresent, prevPresent) => {\n    const hasPresentChanged = prevPresent !== currentPresent\n    if (hasPresentChanged) {\n      if (currentPresent)\n        dispatch('MOUNT')\n      else if (currentAnimationName === 'none' || styles.value?.display === 'none')\n        dispatch('UNMOUNT')\n      else {\n        const isAnimating = prevAnimationName !== currentAnimationName\n        if (prevPresent && isAnimating)\n          dispatch('ANIMATION_OUT')\n        else\n          dispatch('UNMOUNT')\n      }\n    }\n  }\n)\n",[3679],{"type":167,"tag":220,"props":3680,"children":3681},{"__ignoreMap":160},[3682,3695,3703,3715,3754,3784,3808,3828,3857,3944,3972,3983,4014,4044,4073,4081,4108,4116,4123,4131],{"type":167,"tag":239,"props":3683,"children":3684},{"class":241,"line":242},[3685,3690],{"type":167,"tag":239,"props":3686,"children":3687},{"style":1699},[3688],{"type":173,"value":3689},"watch",{"type":167,"tag":239,"props":3691,"children":3692},{"style":661},[3693],{"type":173,"value":3694},"(\n",{"type":167,"tag":239,"props":3696,"children":3697},{"class":241,"line":263},[3698],{"type":167,"tag":239,"props":3699,"children":3700},{"style":285},[3701],{"type":173,"value":3702},"  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n",{"type":167,"tag":239,"props":3704,"children":3705},{"class":241,"line":281},[3706,3711],{"type":167,"tag":239,"props":3707,"children":3708},{"style":661},[3709],{"type":173,"value":3710},"  present",{"type":167,"tag":239,"props":3712,"children":3713},{"style":246},[3714],{"type":173,"value":1387},{"type":167,"tag":239,"props":3716,"children":3717},{"class":241,"line":291},[3718,3724,3728,3733,3737,3742,3746,3750],{"type":167,"tag":239,"props":3719,"children":3721},{"style":3720},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3722],{"type":173,"value":3723},"  async",{"type":167,"tag":239,"props":3725,"children":3726},{"style":246},[3727],{"type":173,"value":1813},{"type":167,"tag":239,"props":3729,"children":3730},{"style":1816},[3731],{"type":173,"value":3732},"currentPresent",{"type":167,"tag":239,"props":3734,"children":3735},{"style":246},[3736],{"type":173,"value":2396},{"type":167,"tag":239,"props":3738,"children":3739},{"style":1816},[3740],{"type":173,"value":3741}," prevPresent",{"type":167,"tag":239,"props":3743,"children":3744},{"style":246},[3745],{"type":173,"value":1823},{"type":167,"tag":239,"props":3747,"children":3748},{"style":1346},[3749],{"type":173,"value":1757},{"type":167,"tag":239,"props":3751,"children":3752},{"style":246},[3753],{"type":173,"value":483},{"type":167,"tag":239,"props":3755,"children":3756},{"class":241,"line":305},[3757,3762,3767,3771,3775,3779],{"type":167,"tag":239,"props":3758,"children":3759},{"style":1346},[3760],{"type":173,"value":3761},"    const",{"type":167,"tag":239,"props":3763,"children":3764},{"style":1352},[3765],{"type":173,"value":3766}," hasPresentChanged",{"type":167,"tag":239,"props":3768,"children":3769},{"style":458},[3770],{"type":173,"value":1360},{"type":167,"tag":239,"props":3772,"children":3773},{"style":661},[3774],{"type":173,"value":3741},{"type":167,"tag":239,"props":3776,"children":3777},{"style":458},[3778],{"type":173,"value":2445},{"type":167,"tag":239,"props":3780,"children":3781},{"style":661},[3782],{"type":173,"value":3783}," currentPresent\n",{"type":167,"tag":239,"props":3785,"children":3786},{"class":241,"line":337},[3787,3791,3795,3800,3804],{"type":167,"tag":239,"props":3788,"children":3789},{"style":1340},[3790],{"type":173,"value":2431},{"type":167,"tag":239,"props":3792,"children":3793},{"style":1370},[3794],{"type":173,"value":1813},{"type":167,"tag":239,"props":3796,"children":3797},{"style":661},[3798],{"type":173,"value":3799},"hasPresentChanged",{"type":167,"tag":239,"props":3801,"children":3802},{"style":1370},[3803],{"type":173,"value":3240},{"type":167,"tag":239,"props":3805,"children":3806},{"style":246},[3807],{"type":173,"value":803},{"type":167,"tag":239,"props":3809,"children":3810},{"class":241,"line":363},[3811,3816,3820,3824],{"type":167,"tag":239,"props":3812,"children":3813},{"style":1340},[3814],{"type":173,"value":3815},"      if",{"type":167,"tag":239,"props":3817,"children":3818},{"style":1370},[3819],{"type":173,"value":1813},{"type":167,"tag":239,"props":3821,"children":3822},{"style":661},[3823],{"type":173,"value":3732},{"type":167,"tag":239,"props":3825,"children":3826},{"style":1370},[3827],{"type":173,"value":2030},{"type":167,"tag":239,"props":3829,"children":3830},{"class":241,"line":372},[3831,3836,3840,3844,3849,3853],{"type":167,"tag":239,"props":3832,"children":3833},{"style":1699},[3834],{"type":173,"value":3835},"        dispatch",{"type":167,"tag":239,"props":3837,"children":3838},{"style":1370},[3839],{"type":173,"value":1707},{"type":167,"tag":239,"props":3841,"children":3842},{"style":320},[3843],{"type":173,"value":2458},{"type":167,"tag":239,"props":3845,"children":3846},{"style":326},[3847],{"type":173,"value":3848},"MOUNT",{"type":167,"tag":239,"props":3850,"children":3851},{"style":320},[3852],{"type":173,"value":2458},{"type":167,"tag":239,"props":3854,"children":3855},{"style":1370},[3856],{"type":173,"value":2030},{"type":167,"tag":239,"props":3858,"children":3859},{"class":241,"line":389},[3860,3865,3870,3874,3879,3884,3888,3893,3897,3901,3906,3910,3914,3919,3924,3928,3932,3936,3940],{"type":167,"tag":239,"props":3861,"children":3862},{"style":1340},[3863],{"type":173,"value":3864},"      else",{"type":167,"tag":239,"props":3866,"children":3867},{"style":1340},[3868],{"type":173,"value":3869}," if",{"type":167,"tag":239,"props":3871,"children":3872},{"style":1370},[3873],{"type":173,"value":1813},{"type":167,"tag":239,"props":3875,"children":3876},{"style":661},[3877],{"type":173,"value":3878},"currentAnimationName",{"type":167,"tag":239,"props":3880,"children":3881},{"style":458},[3882],{"type":173,"value":3883}," ===",{"type":167,"tag":239,"props":3885,"children":3886},{"style":320},[3887],{"type":173,"value":1642},{"type":167,"tag":239,"props":3889,"children":3890},{"style":326},[3891],{"type":173,"value":3892},"none",{"type":167,"tag":239,"props":3894,"children":3895},{"style":320},[3896],{"type":173,"value":2458},{"type":167,"tag":239,"props":3898,"children":3899},{"style":458},[3900],{"type":173,"value":3393},{"type":167,"tag":239,"props":3902,"children":3903},{"style":661},[3904],{"type":173,"value":3905}," styles",{"type":167,"tag":239,"props":3907,"children":3908},{"style":246},[3909],{"type":173,"value":567},{"type":167,"tag":239,"props":3911,"children":3912},{"style":661},[3913],{"type":173,"value":1778},{"type":167,"tag":239,"props":3915,"children":3916},{"style":246},[3917],{"type":173,"value":3918},"?.",{"type":167,"tag":239,"props":3920,"children":3921},{"style":661},[3922],{"type":173,"value":3923},"display",{"type":167,"tag":239,"props":3925,"children":3926},{"style":458},[3927],{"type":173,"value":3883},{"type":167,"tag":239,"props":3929,"children":3930},{"style":320},[3931],{"type":173,"value":1642},{"type":167,"tag":239,"props":3933,"children":3934},{"style":326},[3935],{"type":173,"value":3892},{"type":167,"tag":239,"props":3937,"children":3938},{"style":320},[3939],{"type":173,"value":2458},{"type":167,"tag":239,"props":3941,"children":3942},{"style":1370},[3943],{"type":173,"value":2030},{"type":167,"tag":239,"props":3945,"children":3946},{"class":241,"line":406},[3947,3951,3955,3959,3964,3968],{"type":167,"tag":239,"props":3948,"children":3949},{"style":1699},[3950],{"type":173,"value":3835},{"type":167,"tag":239,"props":3952,"children":3953},{"style":1370},[3954],{"type":173,"value":1707},{"type":167,"tag":239,"props":3956,"children":3957},{"style":320},[3958],{"type":173,"value":2458},{"type":167,"tag":239,"props":3960,"children":3961},{"style":326},[3962],{"type":173,"value":3963},"UNMOUNT",{"type":167,"tag":239,"props":3965,"children":3966},{"style":320},[3967],{"type":173,"value":2458},{"type":167,"tag":239,"props":3969,"children":3970},{"style":1370},[3971],{"type":173,"value":2030},{"type":167,"tag":239,"props":3973,"children":3974},{"class":241,"line":423},[3975,3979],{"type":167,"tag":239,"props":3976,"children":3977},{"style":1340},[3978],{"type":173,"value":3864},{"type":167,"tag":239,"props":3980,"children":3981},{"style":246},[3982],{"type":173,"value":483},{"type":167,"tag":239,"props":3984,"children":3985},{"class":241,"line":432},[3986,3991,3996,4000,4005,4009],{"type":167,"tag":239,"props":3987,"children":3988},{"style":1346},[3989],{"type":173,"value":3990},"        const",{"type":167,"tag":239,"props":3992,"children":3993},{"style":1352},[3994],{"type":173,"value":3995}," isAnimating",{"type":167,"tag":239,"props":3997,"children":3998},{"style":458},[3999],{"type":173,"value":1360},{"type":167,"tag":239,"props":4001,"children":4002},{"style":661},[4003],{"type":173,"value":4004}," prevAnimationName",{"type":167,"tag":239,"props":4006,"children":4007},{"style":458},[4008],{"type":173,"value":2445},{"type":167,"tag":239,"props":4010,"children":4011},{"style":661},[4012],{"type":173,"value":4013}," currentAnimationName\n",{"type":167,"tag":239,"props":4015,"children":4016},{"class":241,"line":486},[4017,4022,4026,4031,4036,4040],{"type":167,"tag":239,"props":4018,"children":4019},{"style":1340},[4020],{"type":173,"value":4021},"        if",{"type":167,"tag":239,"props":4023,"children":4024},{"style":1370},[4025],{"type":173,"value":1813},{"type":167,"tag":239,"props":4027,"children":4028},{"style":661},[4029],{"type":173,"value":4030},"prevPresent",{"type":167,"tag":239,"props":4032,"children":4033},{"style":458},[4034],{"type":173,"value":4035}," &&",{"type":167,"tag":239,"props":4037,"children":4038},{"style":661},[4039],{"type":173,"value":3995},{"type":167,"tag":239,"props":4041,"children":4042},{"style":1370},[4043],{"type":173,"value":2030},{"type":167,"tag":239,"props":4045,"children":4046},{"class":241,"line":518},[4047,4052,4056,4060,4065,4069],{"type":167,"tag":239,"props":4048,"children":4049},{"style":1699},[4050],{"type":173,"value":4051},"          dispatch",{"type":167,"tag":239,"props":4053,"children":4054},{"style":1370},[4055],{"type":173,"value":1707},{"type":167,"tag":239,"props":4057,"children":4058},{"style":320},[4059],{"type":173,"value":2458},{"type":167,"tag":239,"props":4061,"children":4062},{"style":326},[4063],{"type":173,"value":4064},"ANIMATION_OUT",{"type":167,"tag":239,"props":4066,"children":4067},{"style":320},[4068],{"type":173,"value":2458},{"type":167,"tag":239,"props":4070,"children":4071},{"style":1370},[4072],{"type":173,"value":2030},{"type":167,"tag":239,"props":4074,"children":4075},{"class":241,"line":527},[4076],{"type":167,"tag":239,"props":4077,"children":4078},{"style":1340},[4079],{"type":173,"value":4080},"        else\n",{"type":167,"tag":239,"props":4082,"children":4083},{"class":241,"line":1994},[4084,4088,4092,4096,4100,4104],{"type":167,"tag":239,"props":4085,"children":4086},{"style":1699},[4087],{"type":173,"value":4051},{"type":167,"tag":239,"props":4089,"children":4090},{"style":1370},[4091],{"type":173,"value":1707},{"type":167,"tag":239,"props":4093,"children":4094},{"style":320},[4095],{"type":173,"value":2458},{"type":167,"tag":239,"props":4097,"children":4098},{"style":326},[4099],{"type":173,"value":3963},{"type":167,"tag":239,"props":4101,"children":4102},{"style":320},[4103],{"type":173,"value":2458},{"type":167,"tag":239,"props":4105,"children":4106},{"style":1370},[4107],{"type":173,"value":2030},{"type":167,"tag":239,"props":4109,"children":4110},{"class":241,"line":2007},[4111],{"type":167,"tag":239,"props":4112,"children":4113},{"style":246},[4114],{"type":173,"value":4115},"      }\n",{"type":167,"tag":239,"props":4117,"children":4118},{"class":241,"line":2020},[4119],{"type":167,"tag":239,"props":4120,"children":4121},{"style":246},[4122],{"type":173,"value":3500},{"type":167,"tag":239,"props":4124,"children":4126},{"class":241,"line":4125},19,[4127],{"type":167,"tag":239,"props":4128,"children":4129},{"style":246},[4130],{"type":173,"value":524},{"type":167,"tag":239,"props":4132,"children":4134},{"class":241,"line":4133},20,[4135],{"type":167,"tag":239,"props":4136,"children":4137},{"style":661},[4138],{"type":173,"value":2030},{"type":167,"tag":175,"props":4140,"children":4141},{},[4142],{"type":173,"value":4143},"上面这个 watch 中使用到的 styles 样式，即 getComputedStyle 获得的样式；动画名称，则是 getComputedStyle().animationName 获得的动画名称，如果没有动画名称，则回退为默认值 'none'。至于何时才算 !isAnimating 还没有说清楚，因为要提到 currentAnimationName 和 prevAnimationName 的变化。",{"type":167,"tag":175,"props":4145,"children":4146},{},[4147],{"type":173,"value":4148},"每次动画开始时（addEventListener(animationstart)），会重新计算动画名称，存放到 prevAnimationName 中。watch 监听时，currentAnimationName 会实时计算，这样就能对比得到当前动画是否在运行。比如上一个动画是 fadeIn，当前动画是 none，就意味着允许卸载了（状态流转到 unmounted）。此外，动画结束时，会主动触发 ANIMATION_END 事件，转换状态到 unmounted。",{"type":167,"tag":229,"props":4150,"children":4152},{"className":1328,"code":4151,"language":1330,"meta":160,"style":160},"const handleAnimationEnd = (event: AnimationEvent) => {\n  const currentAnimationName = getAnimationName(node.value)\n  const isCurrentAnimation = currentAnimationName.includes(event.animationName)\n  if (event.target === node.value && isCurrentAnimation) {\n    dispatch('ANIMATION_END')\n  }\n}\n",[4153],{"type":167,"tag":220,"props":4154,"children":4155},{"__ignoreMap":160},[4156,4204,4246,4295,4352,4381,4388],{"type":167,"tag":239,"props":4157,"children":4158},{"class":241,"line":242},[4159,4163,4169,4173,4177,4182,4186,4192,4196,4200],{"type":167,"tag":239,"props":4160,"children":4161},{"style":1346},[4162],{"type":173,"value":1687},{"type":167,"tag":239,"props":4164,"children":4166},{"style":4165},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4167],{"type":173,"value":4168}," handleAnimationEnd",{"type":167,"tag":239,"props":4170,"children":4171},{"style":458},[4172],{"type":173,"value":1360},{"type":167,"tag":239,"props":4174,"children":4175},{"style":246},[4176],{"type":173,"value":1813},{"type":167,"tag":239,"props":4178,"children":4179},{"style":1816},[4180],{"type":173,"value":4181},"event",{"type":167,"tag":239,"props":4183,"children":4184},{"style":458},[4185],{"type":173,"value":498},{"type":167,"tag":239,"props":4187,"children":4189},{"style":4188},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[4190],{"type":173,"value":4191}," AnimationEvent",{"type":167,"tag":239,"props":4193,"children":4194},{"style":246},[4195],{"type":173,"value":1823},{"type":167,"tag":239,"props":4197,"children":4198},{"style":1346},[4199],{"type":173,"value":1757},{"type":167,"tag":239,"props":4201,"children":4202},{"style":246},[4203],{"type":173,"value":483},{"type":167,"tag":239,"props":4205,"children":4206},{"class":241,"line":263},[4207,4211,4216,4220,4225,4229,4234,4238,4242],{"type":167,"tag":239,"props":4208,"children":4209},{"style":1346},[4210],{"type":173,"value":2680},{"type":167,"tag":239,"props":4212,"children":4213},{"style":1352},[4214],{"type":173,"value":4215}," currentAnimationName",{"type":167,"tag":239,"props":4217,"children":4218},{"style":458},[4219],{"type":173,"value":1360},{"type":167,"tag":239,"props":4221,"children":4222},{"style":1699},[4223],{"type":173,"value":4224}," getAnimationName",{"type":167,"tag":239,"props":4226,"children":4227},{"style":1370},[4228],{"type":173,"value":1707},{"type":167,"tag":239,"props":4230,"children":4231},{"style":661},[4232],{"type":173,"value":4233},"node",{"type":167,"tag":239,"props":4235,"children":4236},{"style":246},[4237],{"type":173,"value":567},{"type":167,"tag":239,"props":4239,"children":4240},{"style":661},[4241],{"type":173,"value":1778},{"type":167,"tag":239,"props":4243,"children":4244},{"style":1370},[4245],{"type":173,"value":2030},{"type":167,"tag":239,"props":4247,"children":4248},{"class":241,"line":281},[4249,4253,4258,4262,4266,4270,4274,4278,4282,4286,4291],{"type":167,"tag":239,"props":4250,"children":4251},{"style":1346},[4252],{"type":173,"value":2680},{"type":167,"tag":239,"props":4254,"children":4255},{"style":1352},[4256],{"type":173,"value":4257}," isCurrentAnimation",{"type":167,"tag":239,"props":4259,"children":4260},{"style":458},[4261],{"type":173,"value":1360},{"type":167,"tag":239,"props":4263,"children":4264},{"style":661},[4265],{"type":173,"value":4215},{"type":167,"tag":239,"props":4267,"children":4268},{"style":246},[4269],{"type":173,"value":567},{"type":167,"tag":239,"props":4271,"children":4272},{"style":1699},[4273],{"type":173,"value":3621},{"type":167,"tag":239,"props":4275,"children":4276},{"style":1370},[4277],{"type":173,"value":1707},{"type":167,"tag":239,"props":4279,"children":4280},{"style":661},[4281],{"type":173,"value":4181},{"type":167,"tag":239,"props":4283,"children":4284},{"style":246},[4285],{"type":173,"value":567},{"type":167,"tag":239,"props":4287,"children":4288},{"style":661},[4289],{"type":173,"value":4290},"animationName",{"type":167,"tag":239,"props":4292,"children":4293},{"style":1370},[4294],{"type":173,"value":2030},{"type":167,"tag":239,"props":4296,"children":4297},{"class":241,"line":291},[4298,4303,4307,4311,4315,4320,4324,4328,4332,4336,4340,4344,4348],{"type":167,"tag":239,"props":4299,"children":4300},{"style":1340},[4301],{"type":173,"value":4302},"  if",{"type":167,"tag":239,"props":4304,"children":4305},{"style":1370},[4306],{"type":173,"value":1813},{"type":167,"tag":239,"props":4308,"children":4309},{"style":661},[4310],{"type":173,"value":4181},{"type":167,"tag":239,"props":4312,"children":4313},{"style":246},[4314],{"type":173,"value":567},{"type":167,"tag":239,"props":4316,"children":4317},{"style":661},[4318],{"type":173,"value":4319},"target",{"type":167,"tag":239,"props":4321,"children":4322},{"style":458},[4323],{"type":173,"value":3883},{"type":167,"tag":239,"props":4325,"children":4326},{"style":661},[4327],{"type":173,"value":3341},{"type":167,"tag":239,"props":4329,"children":4330},{"style":246},[4331],{"type":173,"value":567},{"type":167,"tag":239,"props":4333,"children":4334},{"style":661},[4335],{"type":173,"value":1778},{"type":167,"tag":239,"props":4337,"children":4338},{"style":458},[4339],{"type":173,"value":4035},{"type":167,"tag":239,"props":4341,"children":4342},{"style":661},[4343],{"type":173,"value":4257},{"type":167,"tag":239,"props":4345,"children":4346},{"style":1370},[4347],{"type":173,"value":3240},{"type":167,"tag":239,"props":4349,"children":4350},{"style":246},[4351],{"type":173,"value":803},{"type":167,"tag":239,"props":4353,"children":4354},{"class":241,"line":305},[4355,4360,4364,4368,4373,4377],{"type":167,"tag":239,"props":4356,"children":4357},{"style":1699},[4358],{"type":173,"value":4359},"    dispatch",{"type":167,"tag":239,"props":4361,"children":4362},{"style":1370},[4363],{"type":173,"value":1707},{"type":167,"tag":239,"props":4365,"children":4366},{"style":320},[4367],{"type":173,"value":2458},{"type":167,"tag":239,"props":4369,"children":4370},{"style":326},[4371],{"type":173,"value":4372},"ANIMATION_END",{"type":167,"tag":239,"props":4374,"children":4375},{"style":320},[4376],{"type":173,"value":2458},{"type":167,"tag":239,"props":4378,"children":4379},{"style":1370},[4380],{"type":173,"value":2030},{"type":167,"tag":239,"props":4382,"children":4383},{"class":241,"line":337},[4384],{"type":167,"tag":239,"props":4385,"children":4386},{"style":246},[4387],{"type":173,"value":524},{"type":167,"tag":239,"props":4389,"children":4390},{"class":241,"line":363},[4391],{"type":167,"tag":239,"props":4392,"children":4393},{"style":246},[4394],{"type":173,"value":692},{"type":167,"tag":175,"props":4396,"children":4397},{},[4398],{"type":173,"value":4399},"最后，为什么 Presence 组件的支持 Vue Transition 呢？这是因为 usePresence 中每次转换状态时，都会抛出一个自定义事件。回到上面那个 watch 的例子中，以组件 mounted 为例，其他事件同理。",{"type":167,"tag":229,"props":4401,"children":4403},{"className":1328,"code":4402,"language":1330,"meta":160,"style":160},"watch(presence, () => {\n  if (currentPresent) {\n    dispatch('MOUNT')\n    dispatchCustomEvent('enter')\n    if (currentAnimationName === 'none')\n      dispatchCustomEvent('after-enter')\n  }\n})\n",[4404],{"type":167,"tag":220,"props":4405,"children":4406},{"__ignoreMap":160},[4407,4435,4458,4485,4514,4549,4578,4585],{"type":167,"tag":239,"props":4408,"children":4409},{"class":241,"line":242},[4410,4414,4419,4423,4427,4431],{"type":167,"tag":239,"props":4411,"children":4412},{"style":1699},[4413],{"type":173,"value":3689},{"type":167,"tag":239,"props":4415,"children":4416},{"style":661},[4417],{"type":173,"value":4418},"(presence",{"type":167,"tag":239,"props":4420,"children":4421},{"style":246},[4422],{"type":173,"value":2396},{"type":167,"tag":239,"props":4424,"children":4425},{"style":246},[4426],{"type":173,"value":1752},{"type":167,"tag":239,"props":4428,"children":4429},{"style":1346},[4430],{"type":173,"value":1757},{"type":167,"tag":239,"props":4432,"children":4433},{"style":246},[4434],{"type":173,"value":483},{"type":167,"tag":239,"props":4436,"children":4437},{"class":241,"line":263},[4438,4442,4446,4450,4454],{"type":167,"tag":239,"props":4439,"children":4440},{"style":1340},[4441],{"type":173,"value":4302},{"type":167,"tag":239,"props":4443,"children":4444},{"style":1370},[4445],{"type":173,"value":1813},{"type":167,"tag":239,"props":4447,"children":4448},{"style":661},[4449],{"type":173,"value":3732},{"type":167,"tag":239,"props":4451,"children":4452},{"style":1370},[4453],{"type":173,"value":3240},{"type":167,"tag":239,"props":4455,"children":4456},{"style":246},[4457],{"type":173,"value":803},{"type":167,"tag":239,"props":4459,"children":4460},{"class":241,"line":281},[4461,4465,4469,4473,4477,4481],{"type":167,"tag":239,"props":4462,"children":4463},{"style":1699},[4464],{"type":173,"value":4359},{"type":167,"tag":239,"props":4466,"children":4467},{"style":1370},[4468],{"type":173,"value":1707},{"type":167,"tag":239,"props":4470,"children":4471},{"style":320},[4472],{"type":173,"value":2458},{"type":167,"tag":239,"props":4474,"children":4475},{"style":326},[4476],{"type":173,"value":3848},{"type":167,"tag":239,"props":4478,"children":4479},{"style":320},[4480],{"type":173,"value":2458},{"type":167,"tag":239,"props":4482,"children":4483},{"style":1370},[4484],{"type":173,"value":2030},{"type":167,"tag":239,"props":4486,"children":4487},{"class":241,"line":291},[4488,4493,4497,4501,4506,4510],{"type":167,"tag":239,"props":4489,"children":4490},{"style":1699},[4491],{"type":173,"value":4492},"    dispatchCustomEvent",{"type":167,"tag":239,"props":4494,"children":4495},{"style":1370},[4496],{"type":173,"value":1707},{"type":167,"tag":239,"props":4498,"children":4499},{"style":320},[4500],{"type":173,"value":2458},{"type":167,"tag":239,"props":4502,"children":4503},{"style":326},[4504],{"type":173,"value":4505},"enter",{"type":167,"tag":239,"props":4507,"children":4508},{"style":320},[4509],{"type":173,"value":2458},{"type":167,"tag":239,"props":4511,"children":4512},{"style":1370},[4513],{"type":173,"value":2030},{"type":167,"tag":239,"props":4515,"children":4516},{"class":241,"line":305},[4517,4521,4525,4529,4533,4537,4541,4545],{"type":167,"tag":239,"props":4518,"children":4519},{"style":1340},[4520],{"type":173,"value":2431},{"type":167,"tag":239,"props":4522,"children":4523},{"style":1370},[4524],{"type":173,"value":1813},{"type":167,"tag":239,"props":4526,"children":4527},{"style":661},[4528],{"type":173,"value":3878},{"type":167,"tag":239,"props":4530,"children":4531},{"style":458},[4532],{"type":173,"value":3883},{"type":167,"tag":239,"props":4534,"children":4535},{"style":320},[4536],{"type":173,"value":1642},{"type":167,"tag":239,"props":4538,"children":4539},{"style":326},[4540],{"type":173,"value":3892},{"type":167,"tag":239,"props":4542,"children":4543},{"style":320},[4544],{"type":173,"value":2458},{"type":167,"tag":239,"props":4546,"children":4547},{"style":1370},[4548],{"type":173,"value":2030},{"type":167,"tag":239,"props":4550,"children":4551},{"class":241,"line":337},[4552,4557,4561,4565,4570,4574],{"type":167,"tag":239,"props":4553,"children":4554},{"style":1699},[4555],{"type":173,"value":4556},"      dispatchCustomEvent",{"type":167,"tag":239,"props":4558,"children":4559},{"style":1370},[4560],{"type":173,"value":1707},{"type":167,"tag":239,"props":4562,"children":4563},{"style":320},[4564],{"type":173,"value":2458},{"type":167,"tag":239,"props":4566,"children":4567},{"style":326},[4568],{"type":173,"value":4569},"after-enter",{"type":167,"tag":239,"props":4571,"children":4572},{"style":320},[4573],{"type":173,"value":2458},{"type":167,"tag":239,"props":4575,"children":4576},{"style":1370},[4577],{"type":173,"value":2030},{"type":167,"tag":239,"props":4579,"children":4580},{"class":241,"line":363},[4581],{"type":167,"tag":239,"props":4582,"children":4583},{"style":246},[4584],{"type":173,"value":524},{"type":167,"tag":239,"props":4586,"children":4587},{"class":241,"line":372},[4588,4592],{"type":167,"tag":239,"props":4589,"children":4590},{"style":246},[4591],{"type":173,"value":1458},{"type":167,"tag":239,"props":4593,"children":4594},{"style":661},[4595],{"type":173,"value":2030},{"type":167,"tag":168,"props":4597,"children":4599},{"id":4598},"组件代码",[4600],{"type":173,"value":4598},{"type":167,"tag":175,"props":4602,"children":4603},{},[4604],{"type":173,"value":4605},"如果有有意思的组件代码，会放到在这一小节介绍。",{"type":167,"tag":416,"props":4607,"children":4608},{},[4609],{"type":173,"value":4610},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":160,"searchDepth":263,"depth":263,"links":4612},[4613,4614,4615,4616],{"id":170,"depth":263,"text":170},{"id":2064,"depth":263,"text":2064},{"id":2184,"depth":263,"text":2184},{"id":4598,"depth":263,"text":4598},"markdown","content:8.source-code:_js:reka-ui.md","content","8.source-code/_js/reka-ui.md","8.source-code/_js/reka-ui",[4623,4626],{"_path":4624,"title":4625,"description":160},"/source-code/_js/nuxt-ui-v2","nuxt-ui v2",{"_path":4627,"title":4628,"description":4629},"/source-code/_js/vue-error-boundary","vue-error-boundary","错误边界最早是由 React 提出的概念，但偶然发现 vue 有对应实现，那就来看看吧",1742745254625]