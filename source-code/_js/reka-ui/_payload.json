[{"data":1,"prerenderedAt":4633},["ShallowReactive",2],{"navigation":3,"/source-code/_js/reka-ui":158,"/source-code/_js/reka-ui-surround":4625},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":4620,"_id":4621,"_source":4622,"_file":4623,"_stem":4624,"_extension":3039},"/source-code/_js/reka-ui","_js",false,true,"","Reka UI","一个用于使用 Vue.js 构建高质量、可访问的设计系统和 Web 应用的开源组件库。",{"type":167,"children":168,"toc":4614},"root",[169,177,183,197,202,207,212,217,231,544,549,554,696,701,706,872,877,882,1108,1113,1118,1125,1130,1324,1329,1560,1565,1671,1676,2034,2039,2044,2060,2065,2070,2075,2118,2123,2128,2133,2145,2172,2177,2185,2190,2197,2202,2336,2341,2647,2652,2855,2861,2866,2871,3031,3036,3043,3048,3055,3060,3068,3073,3079,3084,3190,3195,3518,3523,3528,3533,3650,3655,3678,4142,4147,4152,4398,4403,4599,4604,4609],{"type":170,"tag":171,"props":172,"children":174},"element","h2",{"id":173},"设计理念",[175],{"type":176,"value":173},"text",{"type":170,"tag":178,"props":179,"children":180},"p",{},[181],{"type":176,"value":182},"以下两张图分别是 Radix UI 和 Reka UI 的官网。第一印象。Reka 官网的设计感差 Radix 太多了，完全没有 Radix 的一眼震撼。更别提 Reka 的前身 Radix Vue 的网站。",{"type":170,"tag":178,"props":184,"children":185},{},[186,192],{"type":170,"tag":187,"props":188,"children":191},"img",{"alt":189,"src":190},"RadixUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719585.png?type=mac",[],{"type":170,"tag":187,"props":193,"children":196},{"alt":194,"src":195},"RekaUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719249.png?type=mac",[],{"type":170,"tag":178,"props":198,"children":199},{},[200],{"type":176,"value":201},"Reka 主打可访问性和开发者友好。",{"type":170,"tag":178,"props":203,"children":204},{},[205],{"type":176,"value":206},"由于之前没怎么关注过 UI 组件库的可访问性，对其可访问性优先的设计不是很理解，但开发体验这块却是戳到我了。",{"type":170,"tag":178,"props":208,"children":209},{},[210],{"type":176,"value":211},"Nuxt UI v2 升级到 Nuxt UI v3，底层原子组件库就是从 headless-vue 替换成了 Reka，在开发者体验这块可以说用过 headless-ui 的用户都被其封闭性给坑过。尤其记得 headless-ui 的 Dialog 组件，锁定页面 focus 不可更改就算了，还不能自定义插入节点；另一些组件则不能变成受控组件，也就意味着不能在外部直接操作内部状态，如控制弹窗开关。",{"type":170,"tag":178,"props":213,"children":214},{},[215],{"type":176,"value":216},"那开发者友好到底是个啥。总的来说，就是支持不同写法，不限制具体的使用方法。下面展开讨论一下。",{"type":170,"tag":178,"props":218,"children":219},{},[220,222,229],{"type":176,"value":221},"样式方面。相比于常见的使用 ",{"type":170,"tag":223,"props":224,"children":226},"code",{"className":225},[],[227],{"type":176,"value":228},"is-",{"type":176,"value":230}," 前缀加状态名来动态绑定状态的方式，Reka 选择在部分组件上把状态绑定到 html dataset 中。再加上对于任意有 DOM 结构的 Reka 组件，本身就支持 class 或 style 自定样式。可以说 Reka 保留对样式的完全控制，开发体验足够了。",{"type":170,"tag":232,"props":233,"children":237},"pre",{"className":234,"code":235,"language":236,"meta":163,"style":163},"language-vue shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n    \u003CAccordionItem\n      class=\"data-[state=open]:border-b-2 data-[state=open]:border-gray-800\"\n      value=\"item-1\"\n    />\n  \u003C/AccordionRoot>\n\u003C/template>\n\u003Cstyle>\n  /* 或者使用 CSS 定义样式 */\n  .AccordionItem[data-state=\"open\"] {\n    border-bottom-width: 2px;\n  }\n\u003C/style>\n","vue",[238],{"type":170,"tag":223,"props":239,"children":240},{"__ignoreMap":163},[241,264,282,292,306,338,364,373,390,407,424,433,487,519,528],{"type":170,"tag":242,"props":243,"children":246},"span",{"class":244,"line":245},"line",1,[247,253,259],{"type":170,"tag":242,"props":248,"children":250},{"style":249},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[251],{"type":176,"value":252},"\u003C",{"type":170,"tag":242,"props":254,"children":256},{"style":255},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[257],{"type":176,"value":258},"template",{"type":170,"tag":242,"props":260,"children":261},{"style":249},[262],{"type":176,"value":263},">\n",{"type":170,"tag":242,"props":265,"children":267},{"class":244,"line":266},2,[268,273,278],{"type":170,"tag":242,"props":269,"children":270},{"style":249},[271],{"type":176,"value":272},"  \u003C",{"type":170,"tag":242,"props":274,"children":275},{"style":255},[276],{"type":176,"value":277},"AccordionRoot",{"type":170,"tag":242,"props":279,"children":280},{"style":249},[281],{"type":176,"value":263},{"type":170,"tag":242,"props":283,"children":285},{"class":244,"line":284},3,[286],{"type":170,"tag":242,"props":287,"children":289},{"style":288},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[290],{"type":176,"value":291},"    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n",{"type":170,"tag":242,"props":293,"children":295},{"class":244,"line":294},4,[296,301],{"type":170,"tag":242,"props":297,"children":298},{"style":249},[299],{"type":176,"value":300},"    \u003C",{"type":170,"tag":242,"props":302,"children":303},{"style":255},[304],{"type":176,"value":305},"AccordionItem\n",{"type":170,"tag":242,"props":307,"children":309},{"class":244,"line":308},5,[310,316,321,327,333],{"type":170,"tag":242,"props":311,"children":313},{"style":312},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[314],{"type":176,"value":315},"      class",{"type":170,"tag":242,"props":317,"children":318},{"style":249},[319],{"type":176,"value":320},"=",{"type":170,"tag":242,"props":322,"children":324},{"style":323},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[325],{"type":176,"value":326},"\"",{"type":170,"tag":242,"props":328,"children":330},{"style":329},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[331],{"type":176,"value":332},"data-[state=open]:border-b-2 data-[state=open]:border-gray-800",{"type":170,"tag":242,"props":334,"children":335},{"style":323},[336],{"type":176,"value":337},"\"\n",{"type":170,"tag":242,"props":339,"children":341},{"class":244,"line":340},6,[342,347,351,355,360],{"type":170,"tag":242,"props":343,"children":344},{"style":312},[345],{"type":176,"value":346},"      value",{"type":170,"tag":242,"props":348,"children":349},{"style":249},[350],{"type":176,"value":320},{"type":170,"tag":242,"props":352,"children":353},{"style":323},[354],{"type":176,"value":326},{"type":170,"tag":242,"props":356,"children":357},{"style":329},[358],{"type":176,"value":359},"item-1",{"type":170,"tag":242,"props":361,"children":362},{"style":323},[363],{"type":176,"value":337},{"type":170,"tag":242,"props":365,"children":367},{"class":244,"line":366},7,[368],{"type":170,"tag":242,"props":369,"children":370},{"style":249},[371],{"type":176,"value":372},"    />\n",{"type":170,"tag":242,"props":374,"children":376},{"class":244,"line":375},8,[377,382,386],{"type":170,"tag":242,"props":378,"children":379},{"style":249},[380],{"type":176,"value":381},"  \u003C/",{"type":170,"tag":242,"props":383,"children":384},{"style":255},[385],{"type":176,"value":277},{"type":170,"tag":242,"props":387,"children":388},{"style":249},[389],{"type":176,"value":263},{"type":170,"tag":242,"props":391,"children":393},{"class":244,"line":392},9,[394,399,403],{"type":170,"tag":242,"props":395,"children":396},{"style":249},[397],{"type":176,"value":398},"\u003C/",{"type":170,"tag":242,"props":400,"children":401},{"style":255},[402],{"type":176,"value":258},{"type":170,"tag":242,"props":404,"children":405},{"style":249},[406],{"type":176,"value":263},{"type":170,"tag":242,"props":408,"children":410},{"class":244,"line":409},10,[411,415,420],{"type":170,"tag":242,"props":412,"children":413},{"style":249},[414],{"type":176,"value":252},{"type":170,"tag":242,"props":416,"children":417},{"style":255},[418],{"type":176,"value":419},"style",{"type":170,"tag":242,"props":421,"children":422},{"style":249},[423],{"type":176,"value":263},{"type":170,"tag":242,"props":425,"children":427},{"class":244,"line":426},11,[428],{"type":170,"tag":242,"props":429,"children":430},{"style":288},[431],{"type":176,"value":432},"  /* 或者使用 CSS 定义样式 */\n",{"type":170,"tag":242,"props":434,"children":436},{"class":244,"line":435},12,[437,443,449,454,459,464,468,473,477,482],{"type":170,"tag":242,"props":438,"children":440},{"style":439},"--shiki-light:#39ADB5;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[441],{"type":176,"value":442},"  .",{"type":170,"tag":242,"props":444,"children":446},{"style":445},"--shiki-light:#E2931D;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[447],{"type":176,"value":448},"AccordionItem",{"type":170,"tag":242,"props":450,"children":451},{"style":249},[452],{"type":176,"value":453},"[",{"type":170,"tag":242,"props":455,"children":456},{"style":312},[457],{"type":176,"value":458},"data-state",{"type":170,"tag":242,"props":460,"children":462},{"style":461},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[463],{"type":176,"value":320},{"type":170,"tag":242,"props":465,"children":466},{"style":323},[467],{"type":176,"value":326},{"type":170,"tag":242,"props":469,"children":470},{"style":329},[471],{"type":176,"value":472},"open",{"type":170,"tag":242,"props":474,"children":475},{"style":323},[476],{"type":176,"value":326},{"type":170,"tag":242,"props":478,"children":479},{"style":249},[480],{"type":176,"value":481},"]",{"type":170,"tag":242,"props":483,"children":484},{"style":249},[485],{"type":176,"value":486}," {\n",{"type":170,"tag":242,"props":488,"children":490},{"class":244,"line":489},13,[491,497,502,508,514],{"type":170,"tag":242,"props":492,"children":494},{"style":493},"--shiki-light:#8796B0;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[495],{"type":176,"value":496},"    border-bottom-width",{"type":170,"tag":242,"props":498,"children":499},{"style":249},[500],{"type":176,"value":501},":",{"type":170,"tag":242,"props":503,"children":505},{"style":504},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[506],{"type":176,"value":507}," 2",{"type":170,"tag":242,"props":509,"children":511},{"style":510},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[512],{"type":176,"value":513},"px",{"type":170,"tag":242,"props":515,"children":516},{"style":249},[517],{"type":176,"value":518},";\n",{"type":170,"tag":242,"props":520,"children":522},{"class":244,"line":521},14,[523],{"type":170,"tag":242,"props":524,"children":525},{"style":249},[526],{"type":176,"value":527},"  }\n",{"type":170,"tag":242,"props":529,"children":531},{"class":244,"line":530},15,[532,536,540],{"type":170,"tag":242,"props":533,"children":534},{"style":249},[535],{"type":176,"value":398},{"type":170,"tag":242,"props":537,"children":538},{"style":255},[539],{"type":176,"value":419},{"type":170,"tag":242,"props":541,"children":542},{"style":249},[543],{"type":176,"value":263},{"type":170,"tag":178,"props":545,"children":546},{},[547],{"type":176,"value":548},"一般企业自己封装 UI 库会基于带设计规范的组件库，比如 Ant Design、Element UI 等。二次封装经常会碰到样式冲突问题。所以 Reka 适合作为某种基础库去使用，就像 Nuxt UI v3 是基于其二次封装。按照 Reka 文档自己的说法：“These components are low-level enough to give you control over how you want to wrap them.”",{"type":170,"tag":178,"props":550,"children":551},{},[552],{"type":176,"value":553},"另一点样式方面有关开发体验的是动画，它特殊优化了这种 CSS 写法：",{"type":170,"tag":232,"props":555,"children":559},{"className":556,"code":557,"language":558,"meta":163,"style":163},"language-css shiki shiki-themes material-theme-lighter github-light github-dark monokai",".DialogOverlay[data-state=\"closed\"],\n.DialogContent[data-state=\"closed\"] {\n  animation: fadeOut 300ms ease-in;\n}\n","css",[560],{"type":170,"tag":223,"props":561,"children":562},{"__ignoreMap":163},[563,606,650,688],{"type":170,"tag":242,"props":564,"children":565},{"class":244,"line":245},[566,571,576,580,584,588,592,597,601],{"type":170,"tag":242,"props":567,"children":568},{"style":439},[569],{"type":176,"value":570},".",{"type":170,"tag":242,"props":572,"children":573},{"style":445},[574],{"type":176,"value":575},"DialogOverlay",{"type":170,"tag":242,"props":577,"children":578},{"style":249},[579],{"type":176,"value":453},{"type":170,"tag":242,"props":581,"children":582},{"style":312},[583],{"type":176,"value":458},{"type":170,"tag":242,"props":585,"children":586},{"style":461},[587],{"type":176,"value":320},{"type":170,"tag":242,"props":589,"children":590},{"style":323},[591],{"type":176,"value":326},{"type":170,"tag":242,"props":593,"children":594},{"style":329},[595],{"type":176,"value":596},"closed",{"type":170,"tag":242,"props":598,"children":599},{"style":323},[600],{"type":176,"value":326},{"type":170,"tag":242,"props":602,"children":603},{"style":249},[604],{"type":176,"value":605},"],\n",{"type":170,"tag":242,"props":607,"children":608},{"class":244,"line":266},[609,613,618,622,626,630,634,638,642,646],{"type":170,"tag":242,"props":610,"children":611},{"style":439},[612],{"type":176,"value":570},{"type":170,"tag":242,"props":614,"children":615},{"style":445},[616],{"type":176,"value":617},"DialogContent",{"type":170,"tag":242,"props":619,"children":620},{"style":249},[621],{"type":176,"value":453},{"type":170,"tag":242,"props":623,"children":624},{"style":312},[625],{"type":176,"value":458},{"type":170,"tag":242,"props":627,"children":628},{"style":461},[629],{"type":176,"value":320},{"type":170,"tag":242,"props":631,"children":632},{"style":323},[633],{"type":176,"value":326},{"type":170,"tag":242,"props":635,"children":636},{"style":329},[637],{"type":176,"value":596},{"type":170,"tag":242,"props":639,"children":640},{"style":323},[641],{"type":176,"value":326},{"type":170,"tag":242,"props":643,"children":644},{"style":249},[645],{"type":176,"value":481},{"type":170,"tag":242,"props":647,"children":648},{"style":249},[649],{"type":176,"value":486},{"type":170,"tag":242,"props":651,"children":652},{"class":244,"line":284},[653,658,662,668,673,678,684],{"type":170,"tag":242,"props":654,"children":655},{"style":493},[656],{"type":176,"value":657},"  animation",{"type":170,"tag":242,"props":659,"children":660},{"style":249},[661],{"type":176,"value":501},{"type":170,"tag":242,"props":663,"children":665},{"style":664},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[666],{"type":176,"value":667}," fadeOut ",{"type":170,"tag":242,"props":669,"children":670},{"style":504},[671],{"type":176,"value":672},"300",{"type":170,"tag":242,"props":674,"children":675},{"style":510},[676],{"type":176,"value":677},"ms",{"type":170,"tag":242,"props":679,"children":681},{"style":680},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF",[682],{"type":176,"value":683}," ease-in",{"type":170,"tag":242,"props":685,"children":686},{"style":249},[687],{"type":176,"value":518},{"type":170,"tag":242,"props":689,"children":690},{"class":244,"line":294},[691],{"type":170,"tag":242,"props":692,"children":693},{"style":249},[694],{"type":176,"value":695},"}\n",{"type":170,"tag":178,"props":697,"children":698},{},[699],{"type":176,"value":700},"刚才说某些组件的内部状态会绑定到 dataset 上，那么弹窗组件如果关闭就意味着取消 DOM 挂载，为何还能通过 dataset 控制动画呢？这是因为 Reka 不直接通过 v-if 来控制组件挂载，而是用一个高阶组件，内部使用了一个状态机，结合节点的创建销毁、动画开始结束等事件来控制实际的组件挂载。这样就可以做到等相关节点动画或缓动效果结束后再销毁节点。",{"type":170,"tag":178,"props":702,"children":703},{},[704],{"type":176,"value":705},"文档还推荐使用 Vue Transition 或 Motion Vue 库来做动画。我在一些项目习惯使用 @vueuse/motion，但 Reka 和这些库相性不合，因为使用这些动画库要先把 Reka 组件转换成强制受控的组件，这样写起来非常麻烦。",{"type":170,"tag":232,"props":707,"children":709},{"className":234,"code":708,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CDialogPortal v-if=\"styles.opacity !== 0\">\n    \u003CDialogOverlay\n      force-mount\n      :style=\"{\n        opacity: styles.opacity,\n        transform: `scale(${styles.scale})`,\n      }\"\n    />\n  \u003C/DialogPortal>\n\u003C/template>\n",[710],{"type":170,"tag":223,"props":711,"children":712},{"__ignoreMap":163},[713,728,766,778,786,807,815,823,835,842,857],{"type":170,"tag":242,"props":714,"children":715},{"class":244,"line":245},[716,720,724],{"type":170,"tag":242,"props":717,"children":718},{"style":249},[719],{"type":176,"value":252},{"type":170,"tag":242,"props":721,"children":722},{"style":255},[723],{"type":176,"value":258},{"type":170,"tag":242,"props":725,"children":726},{"style":249},[727],{"type":176,"value":263},{"type":170,"tag":242,"props":729,"children":730},{"class":244,"line":266},[731,735,740,745,749,753,758,762],{"type":170,"tag":242,"props":732,"children":733},{"style":249},[734],{"type":176,"value":272},{"type":170,"tag":242,"props":736,"children":737},{"style":255},[738],{"type":176,"value":739},"DialogPortal",{"type":170,"tag":242,"props":741,"children":742},{"style":312},[743],{"type":176,"value":744}," v-if",{"type":170,"tag":242,"props":746,"children":747},{"style":249},[748],{"type":176,"value":320},{"type":170,"tag":242,"props":750,"children":751},{"style":323},[752],{"type":176,"value":326},{"type":170,"tag":242,"props":754,"children":755},{"style":329},[756],{"type":176,"value":757},"styles.opacity !== 0",{"type":170,"tag":242,"props":759,"children":760},{"style":323},[761],{"type":176,"value":326},{"type":170,"tag":242,"props":763,"children":764},{"style":249},[765],{"type":176,"value":263},{"type":170,"tag":242,"props":767,"children":768},{"class":244,"line":284},[769,773],{"type":170,"tag":242,"props":770,"children":771},{"style":249},[772],{"type":176,"value":300},{"type":170,"tag":242,"props":774,"children":775},{"style":255},[776],{"type":176,"value":777},"DialogOverlay\n",{"type":170,"tag":242,"props":779,"children":780},{"class":244,"line":294},[781],{"type":170,"tag":242,"props":782,"children":783},{"style":312},[784],{"type":176,"value":785},"      force-mount\n",{"type":170,"tag":242,"props":787,"children":788},{"class":244,"line":308},[789,794,798,802],{"type":170,"tag":242,"props":790,"children":791},{"style":312},[792],{"type":176,"value":793},"      :style",{"type":170,"tag":242,"props":795,"children":796},{"style":249},[797],{"type":176,"value":320},{"type":170,"tag":242,"props":799,"children":800},{"style":323},[801],{"type":176,"value":326},{"type":170,"tag":242,"props":803,"children":804},{"style":329},[805],{"type":176,"value":806},"{\n",{"type":170,"tag":242,"props":808,"children":809},{"class":244,"line":340},[810],{"type":170,"tag":242,"props":811,"children":812},{"style":329},[813],{"type":176,"value":814},"        opacity: styles.opacity,\n",{"type":170,"tag":242,"props":816,"children":817},{"class":244,"line":366},[818],{"type":170,"tag":242,"props":819,"children":820},{"style":329},[821],{"type":176,"value":822},"        transform: `scale(${styles.scale})`,\n",{"type":170,"tag":242,"props":824,"children":825},{"class":244,"line":375},[826,831],{"type":170,"tag":242,"props":827,"children":828},{"style":329},[829],{"type":176,"value":830},"      }",{"type":170,"tag":242,"props":832,"children":833},{"style":323},[834],{"type":176,"value":337},{"type":170,"tag":242,"props":836,"children":837},{"class":244,"line":392},[838],{"type":170,"tag":242,"props":839,"children":840},{"style":249},[841],{"type":176,"value":372},{"type":170,"tag":242,"props":843,"children":844},{"class":244,"line":409},[845,849,853],{"type":170,"tag":242,"props":846,"children":847},{"style":249},[848],{"type":176,"value":381},{"type":170,"tag":242,"props":850,"children":851},{"style":255},[852],{"type":176,"value":739},{"type":170,"tag":242,"props":854,"children":855},{"style":249},[856],{"type":176,"value":263},{"type":170,"tag":242,"props":858,"children":859},{"class":244,"line":426},[860,864,868],{"type":170,"tag":242,"props":861,"children":862},{"style":249},[863],{"type":176,"value":398},{"type":170,"tag":242,"props":865,"children":866},{"style":255},[867],{"type":176,"value":258},{"type":170,"tag":242,"props":869,"children":870},{"style":249},[871],{"type":176,"value":263},{"type":170,"tag":178,"props":873,"children":874},{},[875],{"type":176,"value":876},"Reka 的组件叫做 Primitive，也许可以翻译成原子组件。这类组件封装模式可能是伴随 Headless 潮流而来的，他们希望通过组件组合的方式来构建上层 UI。不过在 View 层因为组件和 DOM 不是一一对应的关系，所以会碰到一个 DOM 节点用作两个原子组件的情况，比如一个 ElButton，即作为弹窗的触发，又作为 Tooltip 的触发。这样嵌套下来，会出现三层 div：tooltip-trigger-item > dialog-trigger-item > el-button。",{"type":170,"tag":178,"props":878,"children":879},{},[880],{"type":176,"value":881},"Reka 继承了来自 Radix 的 asChild 模式以解决此类问题。给组件传递一个 asChild 属性，就能将其“隐形化”，去 DOM 结构的同时保留了样式、事件等。见下代码，可以把 TooltipTrigger 和 DialogTrigger 看做 Vue 中的 Template，而 ElButton 同时作为 Dialog 和 Tooltip 的直接子组件。在特定场景的开发体验确实不错。",{"type":170,"tag":232,"props":883,"children":885},{"className":234,"code":884,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CDialogRoot>\n    \u003CTooltipRoot>\n      \u003CTooltipTrigger asChild>\n        \u003CDialogTrigger asChild>\n          \u003CElButton>Open\u003C/ElButton>\n        \u003C/DialogTrigger>\n      \u003C/TooltipTrigger>\n      Tip：Click the button to open dialog.\n    \u003C/TooltipRoot>\n    Your Dialog Content\n  \u003C/DialogRoot>\n\u003C/template>\n",[886],{"type":170,"tag":223,"props":887,"children":888},{"__ignoreMap":163},[889,904,920,936,958,979,1014,1030,1046,1054,1070,1078,1093],{"type":170,"tag":242,"props":890,"children":891},{"class":244,"line":245},[892,896,900],{"type":170,"tag":242,"props":893,"children":894},{"style":249},[895],{"type":176,"value":252},{"type":170,"tag":242,"props":897,"children":898},{"style":255},[899],{"type":176,"value":258},{"type":170,"tag":242,"props":901,"children":902},{"style":249},[903],{"type":176,"value":263},{"type":170,"tag":242,"props":905,"children":906},{"class":244,"line":266},[907,911,916],{"type":170,"tag":242,"props":908,"children":909},{"style":249},[910],{"type":176,"value":272},{"type":170,"tag":242,"props":912,"children":913},{"style":255},[914],{"type":176,"value":915},"DialogRoot",{"type":170,"tag":242,"props":917,"children":918},{"style":249},[919],{"type":176,"value":263},{"type":170,"tag":242,"props":921,"children":922},{"class":244,"line":284},[923,927,932],{"type":170,"tag":242,"props":924,"children":925},{"style":249},[926],{"type":176,"value":300},{"type":170,"tag":242,"props":928,"children":929},{"style":255},[930],{"type":176,"value":931},"TooltipRoot",{"type":170,"tag":242,"props":933,"children":934},{"style":249},[935],{"type":176,"value":263},{"type":170,"tag":242,"props":937,"children":938},{"class":244,"line":294},[939,944,949,954],{"type":170,"tag":242,"props":940,"children":941},{"style":249},[942],{"type":176,"value":943},"      \u003C",{"type":170,"tag":242,"props":945,"children":946},{"style":255},[947],{"type":176,"value":948},"TooltipTrigger",{"type":170,"tag":242,"props":950,"children":951},{"style":312},[952],{"type":176,"value":953}," asChild",{"type":170,"tag":242,"props":955,"children":956},{"style":249},[957],{"type":176,"value":263},{"type":170,"tag":242,"props":959,"children":960},{"class":244,"line":308},[961,966,971,975],{"type":170,"tag":242,"props":962,"children":963},{"style":249},[964],{"type":176,"value":965},"        \u003C",{"type":170,"tag":242,"props":967,"children":968},{"style":255},[969],{"type":176,"value":970},"DialogTrigger",{"type":170,"tag":242,"props":972,"children":973},{"style":312},[974],{"type":176,"value":953},{"type":170,"tag":242,"props":976,"children":977},{"style":249},[978],{"type":176,"value":263},{"type":170,"tag":242,"props":980,"children":981},{"class":244,"line":340},[982,987,992,997,1002,1006,1010],{"type":170,"tag":242,"props":983,"children":984},{"style":249},[985],{"type":176,"value":986},"          \u003C",{"type":170,"tag":242,"props":988,"children":989},{"style":255},[990],{"type":176,"value":991},"ElButton",{"type":170,"tag":242,"props":993,"children":994},{"style":249},[995],{"type":176,"value":996},">",{"type":170,"tag":242,"props":998,"children":999},{"style":664},[1000],{"type":176,"value":1001},"Open",{"type":170,"tag":242,"props":1003,"children":1004},{"style":249},[1005],{"type":176,"value":398},{"type":170,"tag":242,"props":1007,"children":1008},{"style":255},[1009],{"type":176,"value":991},{"type":170,"tag":242,"props":1011,"children":1012},{"style":249},[1013],{"type":176,"value":263},{"type":170,"tag":242,"props":1015,"children":1016},{"class":244,"line":366},[1017,1022,1026],{"type":170,"tag":242,"props":1018,"children":1019},{"style":249},[1020],{"type":176,"value":1021},"        \u003C/",{"type":170,"tag":242,"props":1023,"children":1024},{"style":255},[1025],{"type":176,"value":970},{"type":170,"tag":242,"props":1027,"children":1028},{"style":249},[1029],{"type":176,"value":263},{"type":170,"tag":242,"props":1031,"children":1032},{"class":244,"line":375},[1033,1038,1042],{"type":170,"tag":242,"props":1034,"children":1035},{"style":249},[1036],{"type":176,"value":1037},"      \u003C/",{"type":170,"tag":242,"props":1039,"children":1040},{"style":255},[1041],{"type":176,"value":948},{"type":170,"tag":242,"props":1043,"children":1044},{"style":249},[1045],{"type":176,"value":263},{"type":170,"tag":242,"props":1047,"children":1048},{"class":244,"line":392},[1049],{"type":170,"tag":242,"props":1050,"children":1051},{"style":664},[1052],{"type":176,"value":1053},"      Tip：Click the button to open dialog.\n",{"type":170,"tag":242,"props":1055,"children":1056},{"class":244,"line":409},[1057,1062,1066],{"type":170,"tag":242,"props":1058,"children":1059},{"style":249},[1060],{"type":176,"value":1061},"    \u003C/",{"type":170,"tag":242,"props":1063,"children":1064},{"style":255},[1065],{"type":176,"value":931},{"type":170,"tag":242,"props":1067,"children":1068},{"style":249},[1069],{"type":176,"value":263},{"type":170,"tag":242,"props":1071,"children":1072},{"class":244,"line":426},[1073],{"type":170,"tag":242,"props":1074,"children":1075},{"style":664},[1076],{"type":176,"value":1077},"    Your Dialog Content\n",{"type":170,"tag":242,"props":1079,"children":1080},{"class":244,"line":435},[1081,1085,1089],{"type":170,"tag":242,"props":1082,"children":1083},{"style":249},[1084],{"type":176,"value":381},{"type":170,"tag":242,"props":1086,"children":1087},{"style":255},[1088],{"type":176,"value":915},{"type":170,"tag":242,"props":1090,"children":1091},{"style":249},[1092],{"type":176,"value":263},{"type":170,"tag":242,"props":1094,"children":1095},{"class":244,"line":489},[1096,1100,1104],{"type":170,"tag":242,"props":1097,"children":1098},{"style":249},[1099],{"type":176,"value":398},{"type":170,"tag":242,"props":1101,"children":1102},{"style":255},[1103],{"type":176,"value":258},{"type":170,"tag":242,"props":1105,"children":1106},{"style":249},[1107],{"type":176,"value":263},{"type":170,"tag":178,"props":1109,"children":1110},{},[1111],{"type":176,"value":1112},"也许是因为受控非受控组件辩论来源于 React 的缘故，以至于 Radix UI 或其他基于 React 实现的组件库会碰到受控非受控问题困扰。而我在写 Vue 时没碰到过此类问题的骚扰。在基于 Vue 的组件库中，只要组件支持判断传入了 model-value 就可以按照受控的方式运行，而使用者在外部从 v-model、model-value 的区分使用，来控制组件是否受控很天然的：v-model 受控，model-value 非受控。",{"type":170,"tag":178,"props":1114,"children":1115},{},[1116],{"type":176,"value":1117},"进一步作说明，从语义上来说，非受控组件应该使用 default-value 而不是 model-value，因为外部传入 model-value 并不能作为其传或不传 update:model-value 的依据。Reka 的文档对这点有说明，只是文档写错了。实际写代码应当使用 default-value 来指示组件是非受控的。",{"type":170,"tag":178,"props":1119,"children":1120},{},[1121],{"type":170,"tag":187,"props":1122,"children":1124},{"alt":163,"src":1123},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503202109352.png",[],{"type":170,"tag":178,"props":1126,"children":1127},{},[1128],{"type":176,"value":1129},"另一个从 React 组件库继承过来的优化开发者体验特性是支持命名空间式组件调用。一看代码便知：",{"type":170,"tag":232,"props":1131,"children":1133},{"className":234,"code":1132,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CDialog.Root>\n    \u003CDialog.Trigger>\n      Button Content\n    \u003C/Dialog.Trigger>\n  \u003C/Dialog.Root>\n  \u003CDialog.Portal>\n    \u003CDialog.Overlay />\n    \u003CDialog.Content>\n      Your Dialog Content\n    \u003C/Dialog.Content>\n  \u003C/Dialog.Portal>\n\u003C/template>\n",[1134],{"type":170,"tag":223,"props":1135,"children":1136},{"__ignoreMap":163},[1137,1152,1168,1184,1192,1207,1222,1238,1255,1271,1279,1294,1309],{"type":170,"tag":242,"props":1138,"children":1139},{"class":244,"line":245},[1140,1144,1148],{"type":170,"tag":242,"props":1141,"children":1142},{"style":249},[1143],{"type":176,"value":252},{"type":170,"tag":242,"props":1145,"children":1146},{"style":255},[1147],{"type":176,"value":258},{"type":170,"tag":242,"props":1149,"children":1150},{"style":249},[1151],{"type":176,"value":263},{"type":170,"tag":242,"props":1153,"children":1154},{"class":244,"line":266},[1155,1159,1164],{"type":170,"tag":242,"props":1156,"children":1157},{"style":249},[1158],{"type":176,"value":272},{"type":170,"tag":242,"props":1160,"children":1161},{"style":255},[1162],{"type":176,"value":1163},"Dialog.Root",{"type":170,"tag":242,"props":1165,"children":1166},{"style":249},[1167],{"type":176,"value":263},{"type":170,"tag":242,"props":1169,"children":1170},{"class":244,"line":284},[1171,1175,1180],{"type":170,"tag":242,"props":1172,"children":1173},{"style":249},[1174],{"type":176,"value":300},{"type":170,"tag":242,"props":1176,"children":1177},{"style":255},[1178],{"type":176,"value":1179},"Dialog.Trigger",{"type":170,"tag":242,"props":1181,"children":1182},{"style":249},[1183],{"type":176,"value":263},{"type":170,"tag":242,"props":1185,"children":1186},{"class":244,"line":294},[1187],{"type":170,"tag":242,"props":1188,"children":1189},{"style":664},[1190],{"type":176,"value":1191},"      Button Content\n",{"type":170,"tag":242,"props":1193,"children":1194},{"class":244,"line":308},[1195,1199,1203],{"type":170,"tag":242,"props":1196,"children":1197},{"style":249},[1198],{"type":176,"value":1061},{"type":170,"tag":242,"props":1200,"children":1201},{"style":255},[1202],{"type":176,"value":1179},{"type":170,"tag":242,"props":1204,"children":1205},{"style":249},[1206],{"type":176,"value":263},{"type":170,"tag":242,"props":1208,"children":1209},{"class":244,"line":340},[1210,1214,1218],{"type":170,"tag":242,"props":1211,"children":1212},{"style":249},[1213],{"type":176,"value":381},{"type":170,"tag":242,"props":1215,"children":1216},{"style":255},[1217],{"type":176,"value":1163},{"type":170,"tag":242,"props":1219,"children":1220},{"style":249},[1221],{"type":176,"value":263},{"type":170,"tag":242,"props":1223,"children":1224},{"class":244,"line":366},[1225,1229,1234],{"type":170,"tag":242,"props":1226,"children":1227},{"style":249},[1228],{"type":176,"value":272},{"type":170,"tag":242,"props":1230,"children":1231},{"style":255},[1232],{"type":176,"value":1233},"Dialog.Portal",{"type":170,"tag":242,"props":1235,"children":1236},{"style":249},[1237],{"type":176,"value":263},{"type":170,"tag":242,"props":1239,"children":1240},{"class":244,"line":375},[1241,1245,1250],{"type":170,"tag":242,"props":1242,"children":1243},{"style":249},[1244],{"type":176,"value":300},{"type":170,"tag":242,"props":1246,"children":1247},{"style":255},[1248],{"type":176,"value":1249},"Dialog.Overlay",{"type":170,"tag":242,"props":1251,"children":1252},{"style":249},[1253],{"type":176,"value":1254}," />\n",{"type":170,"tag":242,"props":1256,"children":1257},{"class":244,"line":392},[1258,1262,1267],{"type":170,"tag":242,"props":1259,"children":1260},{"style":249},[1261],{"type":176,"value":300},{"type":170,"tag":242,"props":1263,"children":1264},{"style":255},[1265],{"type":176,"value":1266},"Dialog.Content",{"type":170,"tag":242,"props":1268,"children":1269},{"style":249},[1270],{"type":176,"value":263},{"type":170,"tag":242,"props":1272,"children":1273},{"class":244,"line":409},[1274],{"type":170,"tag":242,"props":1275,"children":1276},{"style":664},[1277],{"type":176,"value":1278},"      Your Dialog Content\n",{"type":170,"tag":242,"props":1280,"children":1281},{"class":244,"line":426},[1282,1286,1290],{"type":170,"tag":242,"props":1283,"children":1284},{"style":249},[1285],{"type":176,"value":1061},{"type":170,"tag":242,"props":1287,"children":1288},{"style":255},[1289],{"type":176,"value":1266},{"type":170,"tag":242,"props":1291,"children":1292},{"style":249},[1293],{"type":176,"value":263},{"type":170,"tag":242,"props":1295,"children":1296},{"class":244,"line":435},[1297,1301,1305],{"type":170,"tag":242,"props":1298,"children":1299},{"style":249},[1300],{"type":176,"value":381},{"type":170,"tag":242,"props":1302,"children":1303},{"style":255},[1304],{"type":176,"value":1233},{"type":170,"tag":242,"props":1306,"children":1307},{"style":249},[1308],{"type":176,"value":263},{"type":170,"tag":242,"props":1310,"children":1311},{"class":244,"line":489},[1312,1316,1320],{"type":170,"tag":242,"props":1313,"children":1314},{"style":249},[1315],{"type":176,"value":398},{"type":170,"tag":242,"props":1317,"children":1318},{"style":255},[1319],{"type":176,"value":258},{"type":170,"tag":242,"props":1321,"children":1322},{"style":249},[1323],{"type":176,"value":263},{"type":170,"tag":178,"props":1325,"children":1326},{},[1327],{"type":176,"value":1328},"其实现也很简单，就是新增了一个 namespaced 入口文件，导出关联的所有组件。导出是按相关性组织的，比如 Dialog 组件包含了 Root、Trigger、Content 等，Select 包含 Root、Group、Item 等，分组件导出有利于摇树优化。",{"type":170,"tag":232,"props":1330,"children":1334},{"className":1331,"code":1332,"language":1333,"meta":163,"style":163},"language-ts shiki shiki-themes material-theme-lighter github-light github-dark monokai","export const Dialog = {\n  Root: DialogRoot,\n  Trigger: DialogTrigger,\n  Portal: DialogPortal,\n  Content: DialogContent,\n} as {\n  Root: typeof DialogRoot\n  Trigger: typeof DialogTrigger\n  Portal: typeof DialogPortal\n  Content: typeof DialogContent\n}\n","ts",[1335],{"type":170,"tag":223,"props":1336,"children":1337},{"__ignoreMap":163},[1338,1368,1391,1412,1433,1454,1471,1493,1513,1533,1553],{"type":170,"tag":242,"props":1339,"children":1340},{"class":244,"line":245},[1341,1347,1353,1359,1364],{"type":170,"tag":242,"props":1342,"children":1344},{"style":1343},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1345],{"type":176,"value":1346},"export",{"type":170,"tag":242,"props":1348,"children":1350},{"style":1349},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1351],{"type":176,"value":1352}," const",{"type":170,"tag":242,"props":1354,"children":1356},{"style":1355},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1357],{"type":176,"value":1358}," Dialog",{"type":170,"tag":242,"props":1360,"children":1361},{"style":461},[1362],{"type":176,"value":1363}," =",{"type":170,"tag":242,"props":1365,"children":1366},{"style":249},[1367],{"type":176,"value":486},{"type":170,"tag":242,"props":1369,"children":1370},{"class":244,"line":266},[1371,1377,1381,1386],{"type":170,"tag":242,"props":1372,"children":1374},{"style":1373},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1375],{"type":176,"value":1376},"  Root",{"type":170,"tag":242,"props":1378,"children":1379},{"style":249},[1380],{"type":176,"value":501},{"type":170,"tag":242,"props":1382,"children":1383},{"style":664},[1384],{"type":176,"value":1385}," DialogRoot",{"type":170,"tag":242,"props":1387,"children":1388},{"style":249},[1389],{"type":176,"value":1390},",\n",{"type":170,"tag":242,"props":1392,"children":1393},{"class":244,"line":284},[1394,1399,1403,1408],{"type":170,"tag":242,"props":1395,"children":1396},{"style":1373},[1397],{"type":176,"value":1398},"  Trigger",{"type":170,"tag":242,"props":1400,"children":1401},{"style":249},[1402],{"type":176,"value":501},{"type":170,"tag":242,"props":1404,"children":1405},{"style":664},[1406],{"type":176,"value":1407}," DialogTrigger",{"type":170,"tag":242,"props":1409,"children":1410},{"style":249},[1411],{"type":176,"value":1390},{"type":170,"tag":242,"props":1413,"children":1414},{"class":244,"line":294},[1415,1420,1424,1429],{"type":170,"tag":242,"props":1416,"children":1417},{"style":1373},[1418],{"type":176,"value":1419},"  Portal",{"type":170,"tag":242,"props":1421,"children":1422},{"style":249},[1423],{"type":176,"value":501},{"type":170,"tag":242,"props":1425,"children":1426},{"style":664},[1427],{"type":176,"value":1428}," DialogPortal",{"type":170,"tag":242,"props":1430,"children":1431},{"style":249},[1432],{"type":176,"value":1390},{"type":170,"tag":242,"props":1434,"children":1435},{"class":244,"line":308},[1436,1441,1445,1450],{"type":170,"tag":242,"props":1437,"children":1438},{"style":1373},[1439],{"type":176,"value":1440},"  Content",{"type":170,"tag":242,"props":1442,"children":1443},{"style":249},[1444],{"type":176,"value":501},{"type":170,"tag":242,"props":1446,"children":1447},{"style":664},[1448],{"type":176,"value":1449}," DialogContent",{"type":170,"tag":242,"props":1451,"children":1452},{"style":249},[1453],{"type":176,"value":1390},{"type":170,"tag":242,"props":1455,"children":1456},{"class":244,"line":340},[1457,1462,1467],{"type":170,"tag":242,"props":1458,"children":1459},{"style":249},[1460],{"type":176,"value":1461},"}",{"type":170,"tag":242,"props":1463,"children":1464},{"style":1343},[1465],{"type":176,"value":1466}," as",{"type":170,"tag":242,"props":1468,"children":1469},{"style":249},[1470],{"type":176,"value":486},{"type":170,"tag":242,"props":1472,"children":1473},{"class":244,"line":366},[1474,1479,1483,1488],{"type":170,"tag":242,"props":1475,"children":1477},{"style":1476},"--shiki-light:#E53935;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2",[1478],{"type":176,"value":1376},{"type":170,"tag":242,"props":1480,"children":1481},{"style":461},[1482],{"type":176,"value":501},{"type":170,"tag":242,"props":1484,"children":1485},{"style":461},[1486],{"type":176,"value":1487}," typeof",{"type":170,"tag":242,"props":1489,"children":1490},{"style":664},[1491],{"type":176,"value":1492}," DialogRoot\n",{"type":170,"tag":242,"props":1494,"children":1495},{"class":244,"line":375},[1496,1500,1504,1508],{"type":170,"tag":242,"props":1497,"children":1498},{"style":1476},[1499],{"type":176,"value":1398},{"type":170,"tag":242,"props":1501,"children":1502},{"style":461},[1503],{"type":176,"value":501},{"type":170,"tag":242,"props":1505,"children":1506},{"style":461},[1507],{"type":176,"value":1487},{"type":170,"tag":242,"props":1509,"children":1510},{"style":664},[1511],{"type":176,"value":1512}," DialogTrigger\n",{"type":170,"tag":242,"props":1514,"children":1515},{"class":244,"line":392},[1516,1520,1524,1528],{"type":170,"tag":242,"props":1517,"children":1518},{"style":1476},[1519],{"type":176,"value":1419},{"type":170,"tag":242,"props":1521,"children":1522},{"style":461},[1523],{"type":176,"value":501},{"type":170,"tag":242,"props":1525,"children":1526},{"style":461},[1527],{"type":176,"value":1487},{"type":170,"tag":242,"props":1529,"children":1530},{"style":664},[1531],{"type":176,"value":1532}," DialogPortal\n",{"type":170,"tag":242,"props":1534,"children":1535},{"class":244,"line":409},[1536,1540,1544,1548],{"type":170,"tag":242,"props":1537,"children":1538},{"style":1476},[1539],{"type":176,"value":1440},{"type":170,"tag":242,"props":1541,"children":1542},{"style":461},[1543],{"type":176,"value":501},{"type":170,"tag":242,"props":1545,"children":1546},{"style":461},[1547],{"type":176,"value":1487},{"type":170,"tag":242,"props":1549,"children":1550},{"style":664},[1551],{"type":176,"value":1552}," DialogContent\n",{"type":170,"tag":242,"props":1554,"children":1555},{"class":244,"line":426},[1556],{"type":170,"tag":242,"props":1557,"children":1558},{"style":249},[1559],{"type":176,"value":695},{"type":170,"tag":178,"props":1561,"children":1562},{},[1563],{"type":176,"value":1564},"使用时，你也需要从这个 namespace 入口导入组件。",{"type":170,"tag":232,"props":1566,"children":1568},{"className":234,"code":1567,"language":236,"meta":163,"style":163},"\u003Cscript setup lang=\"ts\">\nimport { Dialog } from 'reka-ui/namespaced'\n\u003C/script>\n",[1569],{"type":170,"tag":223,"props":1570,"children":1571},{"__ignoreMap":163},[1572,1614,1656],{"type":170,"tag":242,"props":1573,"children":1574},{"class":244,"line":245},[1575,1579,1584,1589,1594,1598,1602,1606,1610],{"type":170,"tag":242,"props":1576,"children":1577},{"style":249},[1578],{"type":176,"value":252},{"type":170,"tag":242,"props":1580,"children":1581},{"style":255},[1582],{"type":176,"value":1583},"script",{"type":170,"tag":242,"props":1585,"children":1586},{"style":312},[1587],{"type":176,"value":1588}," setup",{"type":170,"tag":242,"props":1590,"children":1591},{"style":312},[1592],{"type":176,"value":1593}," lang",{"type":170,"tag":242,"props":1595,"children":1596},{"style":249},[1597],{"type":176,"value":320},{"type":170,"tag":242,"props":1599,"children":1600},{"style":323},[1601],{"type":176,"value":326},{"type":170,"tag":242,"props":1603,"children":1604},{"style":329},[1605],{"type":176,"value":1333},{"type":170,"tag":242,"props":1607,"children":1608},{"style":323},[1609],{"type":176,"value":326},{"type":170,"tag":242,"props":1611,"children":1612},{"style":249},[1613],{"type":176,"value":263},{"type":170,"tag":242,"props":1615,"children":1616},{"class":244,"line":266},[1617,1622,1627,1631,1636,1641,1646,1651],{"type":170,"tag":242,"props":1618,"children":1619},{"style":1343},[1620],{"type":176,"value":1621},"import",{"type":170,"tag":242,"props":1623,"children":1624},{"style":249},[1625],{"type":176,"value":1626}," {",{"type":170,"tag":242,"props":1628,"children":1629},{"style":664},[1630],{"type":176,"value":1358},{"type":170,"tag":242,"props":1632,"children":1633},{"style":249},[1634],{"type":176,"value":1635}," }",{"type":170,"tag":242,"props":1637,"children":1638},{"style":1343},[1639],{"type":176,"value":1640}," from",{"type":170,"tag":242,"props":1642,"children":1643},{"style":323},[1644],{"type":176,"value":1645}," '",{"type":170,"tag":242,"props":1647,"children":1648},{"style":329},[1649],{"type":176,"value":1650},"reka-ui/namespaced",{"type":170,"tag":242,"props":1652,"children":1653},{"style":323},[1654],{"type":176,"value":1655},"'\n",{"type":170,"tag":242,"props":1657,"children":1658},{"class":244,"line":284},[1659,1663,1667],{"type":170,"tag":242,"props":1660,"children":1661},{"style":249},[1662],{"type":176,"value":398},{"type":170,"tag":242,"props":1664,"children":1665},{"style":255},[1666],{"type":176,"value":1583},{"type":170,"tag":242,"props":1668,"children":1669},{"style":249},[1670],{"type":176,"value":263},{"type":170,"tag":178,"props":1672,"children":1673},{},[1674],{"type":176,"value":1675},"那 Reka 从 Vue 中借鉴了哪些模式呢？一个显著的特性就是借助 Vue Inject 实现的 injectContext 功能，允许把组件的状态和方法作为一个整体，注入到子组件，达到共享的目的。举个例子，当你想替换 Dialog 中 DialogOverlay 的实现，就可以通过 injectDialogContext 来获取 DialogRoot 的状态和方法，这样可以自由的在子组件控制 Dialog 开关、拦截回调、获取组件元数据等。",{"type":170,"tag":232,"props":1677,"children":1679},{"className":1331,"code":1678,"language":1333,"meta":163,"style":163},"const DialogRootContext = provideDialogRootContext({\n  open,\n  modal,\n  openModal: () => {\n    open.value = true\n  },\n  onOpenChange: (value) => {\n    open.value = value\n  },\n  onOpenToggle: () => {\n    open.value = !open.value\n  },\n  contentId: '',\n  titleId: '',\n  descriptionId: '',\n  triggerElement,\n  contentElement,\n})\n",[1680],{"type":170,"tag":223,"props":1681,"children":1682},{"__ignoreMap":163},[1683,1715,1727,1739,1765,1792,1800,1835,1859,1866,1890,1927,1934,1955,1975,1995,2008,2021],{"type":170,"tag":242,"props":1684,"children":1685},{"class":244,"line":245},[1686,1691,1696,1700,1706,1711],{"type":170,"tag":242,"props":1687,"children":1688},{"style":1349},[1689],{"type":176,"value":1690},"const",{"type":170,"tag":242,"props":1692,"children":1693},{"style":1355},[1694],{"type":176,"value":1695}," DialogRootContext",{"type":170,"tag":242,"props":1697,"children":1698},{"style":461},[1699],{"type":176,"value":1363},{"type":170,"tag":242,"props":1701,"children":1703},{"style":1702},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1704],{"type":176,"value":1705}," provideDialogRootContext",{"type":170,"tag":242,"props":1707,"children":1708},{"style":664},[1709],{"type":176,"value":1710},"(",{"type":170,"tag":242,"props":1712,"children":1713},{"style":249},[1714],{"type":176,"value":806},{"type":170,"tag":242,"props":1716,"children":1717},{"class":244,"line":266},[1718,1723],{"type":170,"tag":242,"props":1719,"children":1720},{"style":664},[1721],{"type":176,"value":1722},"  open",{"type":170,"tag":242,"props":1724,"children":1725},{"style":249},[1726],{"type":176,"value":1390},{"type":170,"tag":242,"props":1728,"children":1729},{"class":244,"line":284},[1730,1735],{"type":170,"tag":242,"props":1731,"children":1732},{"style":664},[1733],{"type":176,"value":1734},"  modal",{"type":170,"tag":242,"props":1736,"children":1737},{"style":249},[1738],{"type":176,"value":1390},{"type":170,"tag":242,"props":1740,"children":1741},{"class":244,"line":294},[1742,1747,1751,1756,1761],{"type":170,"tag":242,"props":1743,"children":1744},{"style":1702},[1745],{"type":176,"value":1746},"  openModal",{"type":170,"tag":242,"props":1748,"children":1749},{"style":249},[1750],{"type":176,"value":501},{"type":170,"tag":242,"props":1752,"children":1753},{"style":249},[1754],{"type":176,"value":1755}," ()",{"type":170,"tag":242,"props":1757,"children":1758},{"style":1349},[1759],{"type":176,"value":1760}," =>",{"type":170,"tag":242,"props":1762,"children":1763},{"style":249},[1764],{"type":176,"value":486},{"type":170,"tag":242,"props":1766,"children":1767},{"class":244,"line":308},[1768,1773,1777,1782,1786],{"type":170,"tag":242,"props":1769,"children":1770},{"style":664},[1771],{"type":176,"value":1772},"    open",{"type":170,"tag":242,"props":1774,"children":1775},{"style":249},[1776],{"type":176,"value":570},{"type":170,"tag":242,"props":1778,"children":1779},{"style":664},[1780],{"type":176,"value":1781},"value",{"type":170,"tag":242,"props":1783,"children":1784},{"style":461},[1785],{"type":176,"value":1363},{"type":170,"tag":242,"props":1787,"children":1789},{"style":1788},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1790],{"type":176,"value":1791}," true\n",{"type":170,"tag":242,"props":1793,"children":1794},{"class":244,"line":340},[1795],{"type":170,"tag":242,"props":1796,"children":1797},{"style":249},[1798],{"type":176,"value":1799},"  },\n",{"type":170,"tag":242,"props":1801,"children":1802},{"class":244,"line":366},[1803,1808,1812,1817,1822,1827,1831],{"type":170,"tag":242,"props":1804,"children":1805},{"style":1702},[1806],{"type":176,"value":1807},"  onOpenChange",{"type":170,"tag":242,"props":1809,"children":1810},{"style":249},[1811],{"type":176,"value":501},{"type":170,"tag":242,"props":1813,"children":1814},{"style":249},[1815],{"type":176,"value":1816}," (",{"type":170,"tag":242,"props":1818,"children":1820},{"style":1819},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1821],{"type":176,"value":1781},{"type":170,"tag":242,"props":1823,"children":1824},{"style":249},[1825],{"type":176,"value":1826},")",{"type":170,"tag":242,"props":1828,"children":1829},{"style":1349},[1830],{"type":176,"value":1760},{"type":170,"tag":242,"props":1832,"children":1833},{"style":249},[1834],{"type":176,"value":486},{"type":170,"tag":242,"props":1836,"children":1837},{"class":244,"line":375},[1838,1842,1846,1850,1854],{"type":170,"tag":242,"props":1839,"children":1840},{"style":664},[1841],{"type":176,"value":1772},{"type":170,"tag":242,"props":1843,"children":1844},{"style":249},[1845],{"type":176,"value":570},{"type":170,"tag":242,"props":1847,"children":1848},{"style":664},[1849],{"type":176,"value":1781},{"type":170,"tag":242,"props":1851,"children":1852},{"style":461},[1853],{"type":176,"value":1363},{"type":170,"tag":242,"props":1855,"children":1856},{"style":664},[1857],{"type":176,"value":1858}," value\n",{"type":170,"tag":242,"props":1860,"children":1861},{"class":244,"line":392},[1862],{"type":170,"tag":242,"props":1863,"children":1864},{"style":249},[1865],{"type":176,"value":1799},{"type":170,"tag":242,"props":1867,"children":1868},{"class":244,"line":409},[1869,1874,1878,1882,1886],{"type":170,"tag":242,"props":1870,"children":1871},{"style":1702},[1872],{"type":176,"value":1873},"  onOpenToggle",{"type":170,"tag":242,"props":1875,"children":1876},{"style":249},[1877],{"type":176,"value":501},{"type":170,"tag":242,"props":1879,"children":1880},{"style":249},[1881],{"type":176,"value":1755},{"type":170,"tag":242,"props":1883,"children":1884},{"style":1349},[1885],{"type":176,"value":1760},{"type":170,"tag":242,"props":1887,"children":1888},{"style":249},[1889],{"type":176,"value":486},{"type":170,"tag":242,"props":1891,"children":1892},{"class":244,"line":426},[1893,1897,1901,1905,1909,1914,1918,1922],{"type":170,"tag":242,"props":1894,"children":1895},{"style":664},[1896],{"type":176,"value":1772},{"type":170,"tag":242,"props":1898,"children":1899},{"style":249},[1900],{"type":176,"value":570},{"type":170,"tag":242,"props":1902,"children":1903},{"style":664},[1904],{"type":176,"value":1781},{"type":170,"tag":242,"props":1906,"children":1907},{"style":461},[1908],{"type":176,"value":1363},{"type":170,"tag":242,"props":1910,"children":1911},{"style":461},[1912],{"type":176,"value":1913}," !",{"type":170,"tag":242,"props":1915,"children":1916},{"style":664},[1917],{"type":176,"value":472},{"type":170,"tag":242,"props":1919,"children":1920},{"style":249},[1921],{"type":176,"value":570},{"type":170,"tag":242,"props":1923,"children":1924},{"style":664},[1925],{"type":176,"value":1926},"value\n",{"type":170,"tag":242,"props":1928,"children":1929},{"class":244,"line":435},[1930],{"type":170,"tag":242,"props":1931,"children":1932},{"style":249},[1933],{"type":176,"value":1799},{"type":170,"tag":242,"props":1935,"children":1936},{"class":244,"line":489},[1937,1942,1946,1951],{"type":170,"tag":242,"props":1938,"children":1939},{"style":1373},[1940],{"type":176,"value":1941},"  contentId",{"type":170,"tag":242,"props":1943,"children":1944},{"style":249},[1945],{"type":176,"value":501},{"type":170,"tag":242,"props":1947,"children":1948},{"style":323},[1949],{"type":176,"value":1950}," ''",{"type":170,"tag":242,"props":1952,"children":1953},{"style":249},[1954],{"type":176,"value":1390},{"type":170,"tag":242,"props":1956,"children":1957},{"class":244,"line":521},[1958,1963,1967,1971],{"type":170,"tag":242,"props":1959,"children":1960},{"style":1373},[1961],{"type":176,"value":1962},"  titleId",{"type":170,"tag":242,"props":1964,"children":1965},{"style":249},[1966],{"type":176,"value":501},{"type":170,"tag":242,"props":1968,"children":1969},{"style":323},[1970],{"type":176,"value":1950},{"type":170,"tag":242,"props":1972,"children":1973},{"style":249},[1974],{"type":176,"value":1390},{"type":170,"tag":242,"props":1976,"children":1977},{"class":244,"line":530},[1978,1983,1987,1991],{"type":170,"tag":242,"props":1979,"children":1980},{"style":1373},[1981],{"type":176,"value":1982},"  descriptionId",{"type":170,"tag":242,"props":1984,"children":1985},{"style":249},[1986],{"type":176,"value":501},{"type":170,"tag":242,"props":1988,"children":1989},{"style":323},[1990],{"type":176,"value":1950},{"type":170,"tag":242,"props":1992,"children":1993},{"style":249},[1994],{"type":176,"value":1390},{"type":170,"tag":242,"props":1996,"children":1998},{"class":244,"line":1997},16,[1999,2004],{"type":170,"tag":242,"props":2000,"children":2001},{"style":664},[2002],{"type":176,"value":2003},"  triggerElement",{"type":170,"tag":242,"props":2005,"children":2006},{"style":249},[2007],{"type":176,"value":1390},{"type":170,"tag":242,"props":2009,"children":2011},{"class":244,"line":2010},17,[2012,2017],{"type":170,"tag":242,"props":2013,"children":2014},{"style":664},[2015],{"type":176,"value":2016},"  contentElement",{"type":170,"tag":242,"props":2018,"children":2019},{"style":249},[2020],{"type":176,"value":1390},{"type":170,"tag":242,"props":2022,"children":2024},{"class":244,"line":2023},18,[2025,2029],{"type":170,"tag":242,"props":2026,"children":2027},{"style":249},[2028],{"type":176,"value":1461},{"type":170,"tag":242,"props":2030,"children":2031},{"style":664},[2032],{"type":176,"value":2033},")\n",{"type":170,"tag":178,"props":2035,"children":2036},{},[2037],{"type":176,"value":2038},"另一个对开发者友好的特性是，Reka 把虚拟化的思想融入到各个组件。以往开发业务组件，往往会在表格、列表等需要特定性能优化的场景使用虚拟化技术。而 Reka 的 Combobox、ListBox、Tree 组件内置了虚拟化功能，并支持常见的设置，如：动态设置子项目高度、预渲染数量（也称为 offset）、设置项目文本内容（以支持搜索功能）等。Nuxt UI 的 InputMenu 和 SelectMenu 组件就是基于此类虚拟化组件实现的。",{"type":170,"tag":178,"props":2040,"children":2041},{},[2042],{"type":176,"value":2043},"总结一下，Reka 的设计原则是：无头、可访问性优先、开放可定制、开发者友好、高性能。此外，文档还提及 Reka 具有支持 SSR、国际化（多方向、日期、语言）等高级特性。最后，Reka 致谢有：Radix UI、React Aria、Floating UI、VueUse、Headless UI、Ariakit。两个没见过的都是“Aria”，即 React Aria 和 Ariakit。本以为是可访问性相关库，但是都只是 UI 组件库。也许 Reka 是从里面借鉴了一些组件？后续看到的话再确认。",{"type":170,"tag":178,"props":2045,"children":2046},{},[2047,2049,2058],{"type":176,"value":2048},"Reka 的设计团队是 ",{"type":170,"tag":2050,"props":2051,"children":2055},"a",{"href":2052,"rel":2053},"https://unovue.com/",[2054],"nofollow",[2056],{"type":176,"value":2057},"unovue",{"type":176,"value":2059},"，其下还有一款叫 Inspira UI 的组件库，兼具酷炫和实用，有兴趣的话也可以去看看。",{"type":170,"tag":178,"props":2061,"children":2062},{},[2063],{"type":176,"value":2064},"接下来主要从代码层看看。",{"type":170,"tag":171,"props":2066,"children":2068},{"id":2067},"工程保证",[2069],{"type":176,"value":2067},{"type":170,"tag":178,"props":2071,"children":2072},{},[2073],{"type":176,"value":2074},"项目是一个包含 Docs 官方文档、Core 组件库、和 Histoire 开发文档三个项目组成的 pnpm monorepo。用来做工程保证的包大概都见过，这里列举一下：",{"type":170,"tag":2076,"props":2077,"children":2078},"ul",{},[2079,2094,2108,2113],{"type":170,"tag":2080,"props":2081,"children":2082},"li",{},[2083,2085,2092],{"type":176,"value":2084},"交互式组件文档：",{"type":170,"tag":2050,"props":2086,"children":2089},{"href":2087,"rel":2088},"https://histoire.dev/guide/",[2054],[2090],{"type":176,"value":2091},"Histoire",{"type":176,"value":2093},"。StoryBook 的竞品，前年某个 Vue 项目接触过 StoryBook，简单尝试后发现对于小项目而言过于复杂了，他用的这个还不错。",{"type":170,"tag":2080,"props":2095,"children":2096},{},[2097,2099,2106],{"type":176,"value":2098},"代码规范：",{"type":170,"tag":2050,"props":2100,"children":2103},{"href":2101,"rel":2102},"https://github.com/antfu/eslint-config",[2054],[2104],{"type":176,"value":2105},"@antfu/eslint-config",{"type":176,"value":2107},"。",{"type":170,"tag":2080,"props":2109,"children":2110},{},[2111],{"type":176,"value":2112},"提交质量：simple-git-hooks 插入提交前检查和提交消息检查，分别由 lint-staged eslint 和 commitlint 代执行。",{"type":170,"tag":2080,"props":2114,"children":2115},{},[2116],{"type":176,"value":2117},"版本控制：bumpp 手动管理版本号。",{"type":170,"tag":178,"props":2119,"children":2120},{},[2121],{"type":176,"value":2122},"其他工程工具包括：核心包的 vue-tsc 类型检查、Vitest 单元测试、Vite 编译、pnpm 发包。",{"type":170,"tag":178,"props":2124,"children":2125},{},[2126],{"type":176,"value":2127},"因为没有历史包袱，代码量少的缘故，项目构建速度太快了，本体+插件（Nuxt module、Namespaced Entry、Unplugin-vue-component Resolver）能在 18 秒内完成。",{"type":170,"tag":178,"props":2129,"children":2130},{},[2131],{"type":176,"value":2132},"CI 方面。包括基本的 build、publish、release 流程，结构比较简单，可以现学现用。此外还为每一个 Pull Request 增加了 Spell Check，以及使用 pkg.pr.new 为其发布新包。",{"type":170,"tag":178,"props":2134,"children":2135},{},[2136,2143],{"type":170,"tag":2050,"props":2137,"children":2140},{"href":2138,"rel":2139},"https://github.com/stackblitz-labs/pkg.pr.new",[2054],[2141],{"type":176,"value":2142},"pkg.pr.new",{"type":176,"value":2144}," 是一个发包工具，允许终端用户通过包管理器兼容的 URL 协议格式安装某个 PR 修改过代码后发布的最新的包，比如：",{"type":170,"tag":232,"props":2146,"children":2150},{"className":2147,"code":2148,"language":2149,"meta":163,"style":163},"language-bash shiki shiki-themes material-theme-lighter github-light github-dark monokai","npm i https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n","bash",[2151],{"type":170,"tag":223,"props":2152,"children":2153},{"__ignoreMap":163},[2154],{"type":170,"tag":242,"props":2155,"children":2156},{"class":244,"line":245},[2157,2162,2167],{"type":170,"tag":242,"props":2158,"children":2159},{"style":445},[2160],{"type":176,"value":2161},"npm",{"type":170,"tag":242,"props":2163,"children":2164},{"style":329},[2165],{"type":176,"value":2166}," i",{"type":170,"tag":242,"props":2168,"children":2169},{"style":329},[2170],{"type":176,"value":2171}," https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n",{"type":170,"tag":178,"props":2173,"children":2174},{},[2175],{"type":176,"value":2176},"项目的 TypeScript 配置分为四个部分：开发时配置、构建配置、类型检查配置、测试环境配置。构建和开发配置主要的区别就是构建时不包括测试文件提高性能。测试环境配置使用 tsconfig/node 的基础配置。这部分和大部分项目差不多。",{"type":170,"tag":178,"props":2178,"children":2179},{},[2180],{"type":170,"tag":187,"props":2181,"children":2184},{"alt":2182,"src":2183},"tsconfig","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210235509.png",[],{"type":170,"tag":171,"props":2186,"children":2188},{"id":2187},"具体实现",[2189],{"type":176,"value":2187},{"type":170,"tag":2191,"props":2192,"children":2194},"h4",{"id":2193},"aschild-模式的具体实现",[2195],{"type":176,"value":2196},"asChild 模式的具体实现？",{"type":170,"tag":178,"props":2198,"children":2199},{},[2200],{"type":176,"value":2201},"组件的 asChild 属性允许用自定义元素替换组件默认的 HTML 元素，同时保留其功能和行为，如事件和无障碍相关属性。为了实现组件的 asChild，Reka 在每一个支持替换 DOM 结构的地方都使用 Primitive 组件作替代。其形如：",{"type":170,"tag":232,"props":2203,"children":2205},{"className":234,"code":2204,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CPrimitive :as-child=\"asChild\" :as=\"as\">\n    \u003Cslot />\n  \u003C/Primitive>\n\u003C/template>\n",[2206],{"type":170,"tag":223,"props":2207,"children":2208},{"__ignoreMap":163},[2209,2224,2284,2306,2321],{"type":170,"tag":242,"props":2210,"children":2211},{"class":244,"line":245},[2212,2216,2220],{"type":170,"tag":242,"props":2213,"children":2214},{"style":249},[2215],{"type":176,"value":252},{"type":170,"tag":242,"props":2217,"children":2218},{"style":255},[2219],{"type":176,"value":258},{"type":170,"tag":242,"props":2221,"children":2222},{"style":249},[2223],{"type":176,"value":263},{"type":170,"tag":242,"props":2225,"children":2226},{"class":244,"line":266},[2227,2231,2236,2241,2245,2249,2254,2258,2263,2267,2271,2276,2280],{"type":170,"tag":242,"props":2228,"children":2229},{"style":249},[2230],{"type":176,"value":272},{"type":170,"tag":242,"props":2232,"children":2233},{"style":255},[2234],{"type":176,"value":2235},"Primitive",{"type":170,"tag":242,"props":2237,"children":2238},{"style":312},[2239],{"type":176,"value":2240}," :as-child",{"type":170,"tag":242,"props":2242,"children":2243},{"style":249},[2244],{"type":176,"value":320},{"type":170,"tag":242,"props":2246,"children":2247},{"style":323},[2248],{"type":176,"value":326},{"type":170,"tag":242,"props":2250,"children":2251},{"style":329},[2252],{"type":176,"value":2253},"asChild",{"type":170,"tag":242,"props":2255,"children":2256},{"style":323},[2257],{"type":176,"value":326},{"type":170,"tag":242,"props":2259,"children":2260},{"style":312},[2261],{"type":176,"value":2262}," :as",{"type":170,"tag":242,"props":2264,"children":2265},{"style":249},[2266],{"type":176,"value":320},{"type":170,"tag":242,"props":2268,"children":2269},{"style":323},[2270],{"type":176,"value":326},{"type":170,"tag":242,"props":2272,"children":2273},{"style":329},[2274],{"type":176,"value":2275},"as",{"type":170,"tag":242,"props":2277,"children":2278},{"style":323},[2279],{"type":176,"value":326},{"type":170,"tag":242,"props":2281,"children":2282},{"style":249},[2283],{"type":176,"value":263},{"type":170,"tag":242,"props":2285,"children":2286},{"class":244,"line":284},[2287,2291,2296,2302],{"type":170,"tag":242,"props":2288,"children":2289},{"style":249},[2290],{"type":176,"value":300},{"type":170,"tag":242,"props":2292,"children":2293},{"style":255},[2294],{"type":176,"value":2295},"slot",{"type":170,"tag":242,"props":2297,"children":2299},{"style":2298},"--shiki-light:#39ADB5;--shiki-light-font-style:inherit;--shiki-default:#B31D28;--shiki-default-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;--shiki-sepia:#F44747;--shiki-sepia-font-style:inherit",[2300],{"type":176,"value":2301}," /",{"type":170,"tag":242,"props":2303,"children":2304},{"style":249},[2305],{"type":176,"value":263},{"type":170,"tag":242,"props":2307,"children":2308},{"class":244,"line":294},[2309,2313,2317],{"type":170,"tag":242,"props":2310,"children":2311},{"style":249},[2312],{"type":176,"value":381},{"type":170,"tag":242,"props":2314,"children":2315},{"style":255},[2316],{"type":176,"value":2235},{"type":170,"tag":242,"props":2318,"children":2319},{"style":249},[2320],{"type":176,"value":263},{"type":170,"tag":242,"props":2322,"children":2323},{"class":244,"line":308},[2324,2328,2332],{"type":170,"tag":242,"props":2325,"children":2326},{"style":249},[2327],{"type":176,"value":398},{"type":170,"tag":242,"props":2329,"children":2330},{"style":255},[2331],{"type":176,"value":258},{"type":170,"tag":242,"props":2333,"children":2334},{"style":249},[2335],{"type":176,"value":263},{"type":170,"tag":178,"props":2337,"children":2338},{},[2339],{"type":176,"value":2340},"Primitive 是一个专用于渲染的高阶组件，使用 as 指示 h 函数渲染具体的组件。而 asChild 属性其实是 as === 'template' 的一个语法糖。见下代码，如果 as 属性是 template，那么直接渲染子组件（Slot），否则渲染 as，默认值是 div。这样一来所有有 DOM 结构的 div 都可以在终端用户处处理成任意节点。代码简化如下：",{"type":170,"tag":232,"props":2342,"children":2344},{"className":1331,"code":2343,"language":1333,"meta":163,"style":163},"const Primitive = defineComponent({\n  setup(props, { attrs, slots }) {\n    if (asTag !== 'template')\n      return () => h(props.as, attrs, { default: slots.default })\n    else\n      return () => h(Slot, attrs, { default: slots.default })\n  },\n})\n",[2345],{"type":170,"tag":223,"props":2346,"children":2347},{"__ignoreMap":163},[2348,2377,2427,2466,2549,2557,2629,2636],{"type":170,"tag":242,"props":2349,"children":2350},{"class":244,"line":245},[2351,2355,2360,2364,2369,2373],{"type":170,"tag":242,"props":2352,"children":2353},{"style":1349},[2354],{"type":176,"value":1690},{"type":170,"tag":242,"props":2356,"children":2357},{"style":1355},[2358],{"type":176,"value":2359}," Primitive",{"type":170,"tag":242,"props":2361,"children":2362},{"style":461},[2363],{"type":176,"value":1363},{"type":170,"tag":242,"props":2365,"children":2366},{"style":1702},[2367],{"type":176,"value":2368}," defineComponent",{"type":170,"tag":242,"props":2370,"children":2371},{"style":664},[2372],{"type":176,"value":1710},{"type":170,"tag":242,"props":2374,"children":2375},{"style":249},[2376],{"type":176,"value":806},{"type":170,"tag":242,"props":2378,"children":2379},{"class":244,"line":266},[2380,2386,2390,2395,2400,2404,2409,2413,2418,2423],{"type":170,"tag":242,"props":2381,"children":2383},{"style":2382},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[2384],{"type":176,"value":2385},"  setup",{"type":170,"tag":242,"props":2387,"children":2388},{"style":249},[2389],{"type":176,"value":1710},{"type":170,"tag":242,"props":2391,"children":2392},{"style":1819},[2393],{"type":176,"value":2394},"props",{"type":170,"tag":242,"props":2396,"children":2397},{"style":249},[2398],{"type":176,"value":2399},",",{"type":170,"tag":242,"props":2401,"children":2402},{"style":249},[2403],{"type":176,"value":1626},{"type":170,"tag":242,"props":2405,"children":2406},{"style":1819},[2407],{"type":176,"value":2408}," attrs",{"type":170,"tag":242,"props":2410,"children":2411},{"style":249},[2412],{"type":176,"value":2399},{"type":170,"tag":242,"props":2414,"children":2415},{"style":1819},[2416],{"type":176,"value":2417}," slots",{"type":170,"tag":242,"props":2419,"children":2420},{"style":249},[2421],{"type":176,"value":2422}," })",{"type":170,"tag":242,"props":2424,"children":2425},{"style":249},[2426],{"type":176,"value":486},{"type":170,"tag":242,"props":2428,"children":2429},{"class":244,"line":284},[2430,2435,2439,2444,2449,2453,2457,2462],{"type":170,"tag":242,"props":2431,"children":2432},{"style":1343},[2433],{"type":176,"value":2434},"    if",{"type":170,"tag":242,"props":2436,"children":2437},{"style":1373},[2438],{"type":176,"value":1816},{"type":170,"tag":242,"props":2440,"children":2441},{"style":664},[2442],{"type":176,"value":2443},"asTag",{"type":170,"tag":242,"props":2445,"children":2446},{"style":461},[2447],{"type":176,"value":2448}," !==",{"type":170,"tag":242,"props":2450,"children":2451},{"style":323},[2452],{"type":176,"value":1645},{"type":170,"tag":242,"props":2454,"children":2455},{"style":329},[2456],{"type":176,"value":258},{"type":170,"tag":242,"props":2458,"children":2459},{"style":323},[2460],{"type":176,"value":2461},"'",{"type":170,"tag":242,"props":2463,"children":2464},{"style":1373},[2465],{"type":176,"value":2033},{"type":170,"tag":242,"props":2467,"children":2468},{"class":244,"line":294},[2469,2474,2478,2482,2487,2491,2495,2499,2503,2507,2511,2515,2519,2524,2528,2532,2536,2541,2545],{"type":170,"tag":242,"props":2470,"children":2471},{"style":1343},[2472],{"type":176,"value":2473},"      return",{"type":170,"tag":242,"props":2475,"children":2476},{"style":249},[2477],{"type":176,"value":1755},{"type":170,"tag":242,"props":2479,"children":2480},{"style":1349},[2481],{"type":176,"value":1760},{"type":170,"tag":242,"props":2483,"children":2484},{"style":1702},[2485],{"type":176,"value":2486}," h",{"type":170,"tag":242,"props":2488,"children":2489},{"style":1373},[2490],{"type":176,"value":1710},{"type":170,"tag":242,"props":2492,"children":2493},{"style":664},[2494],{"type":176,"value":2394},{"type":170,"tag":242,"props":2496,"children":2497},{"style":249},[2498],{"type":176,"value":570},{"type":170,"tag":242,"props":2500,"children":2501},{"style":664},[2502],{"type":176,"value":2275},{"type":170,"tag":242,"props":2504,"children":2505},{"style":249},[2506],{"type":176,"value":2399},{"type":170,"tag":242,"props":2508,"children":2509},{"style":664},[2510],{"type":176,"value":2408},{"type":170,"tag":242,"props":2512,"children":2513},{"style":249},[2514],{"type":176,"value":2399},{"type":170,"tag":242,"props":2516,"children":2517},{"style":249},[2518],{"type":176,"value":1626},{"type":170,"tag":242,"props":2520,"children":2521},{"style":1373},[2522],{"type":176,"value":2523}," default",{"type":170,"tag":242,"props":2525,"children":2526},{"style":249},[2527],{"type":176,"value":501},{"type":170,"tag":242,"props":2529,"children":2530},{"style":664},[2531],{"type":176,"value":2417},{"type":170,"tag":242,"props":2533,"children":2534},{"style":249},[2535],{"type":176,"value":570},{"type":170,"tag":242,"props":2537,"children":2538},{"style":664},[2539],{"type":176,"value":2540},"default",{"type":170,"tag":242,"props":2542,"children":2543},{"style":249},[2544],{"type":176,"value":1635},{"type":170,"tag":242,"props":2546,"children":2547},{"style":1373},[2548],{"type":176,"value":2033},{"type":170,"tag":242,"props":2550,"children":2551},{"class":244,"line":308},[2552],{"type":170,"tag":242,"props":2553,"children":2554},{"style":1343},[2555],{"type":176,"value":2556},"    else\n",{"type":170,"tag":242,"props":2558,"children":2559},{"class":244,"line":340},[2560,2564,2568,2572,2576,2580,2585,2589,2593,2597,2601,2605,2609,2613,2617,2621,2625],{"type":170,"tag":242,"props":2561,"children":2562},{"style":1343},[2563],{"type":176,"value":2473},{"type":170,"tag":242,"props":2565,"children":2566},{"style":249},[2567],{"type":176,"value":1755},{"type":170,"tag":242,"props":2569,"children":2570},{"style":1349},[2571],{"type":176,"value":1760},{"type":170,"tag":242,"props":2573,"children":2574},{"style":1702},[2575],{"type":176,"value":2486},{"type":170,"tag":242,"props":2577,"children":2578},{"style":1373},[2579],{"type":176,"value":1710},{"type":170,"tag":242,"props":2581,"children":2582},{"style":664},[2583],{"type":176,"value":2584},"Slot",{"type":170,"tag":242,"props":2586,"children":2587},{"style":249},[2588],{"type":176,"value":2399},{"type":170,"tag":242,"props":2590,"children":2591},{"style":664},[2592],{"type":176,"value":2408},{"type":170,"tag":242,"props":2594,"children":2595},{"style":249},[2596],{"type":176,"value":2399},{"type":170,"tag":242,"props":2598,"children":2599},{"style":249},[2600],{"type":176,"value":1626},{"type":170,"tag":242,"props":2602,"children":2603},{"style":1373},[2604],{"type":176,"value":2523},{"type":170,"tag":242,"props":2606,"children":2607},{"style":249},[2608],{"type":176,"value":501},{"type":170,"tag":242,"props":2610,"children":2611},{"style":664},[2612],{"type":176,"value":2417},{"type":170,"tag":242,"props":2614,"children":2615},{"style":249},[2616],{"type":176,"value":570},{"type":170,"tag":242,"props":2618,"children":2619},{"style":664},[2620],{"type":176,"value":2540},{"type":170,"tag":242,"props":2622,"children":2623},{"style":249},[2624],{"type":176,"value":1635},{"type":170,"tag":242,"props":2626,"children":2627},{"style":1373},[2628],{"type":176,"value":2033},{"type":170,"tag":242,"props":2630,"children":2631},{"class":244,"line":366},[2632],{"type":170,"tag":242,"props":2633,"children":2634},{"style":249},[2635],{"type":176,"value":1799},{"type":170,"tag":242,"props":2637,"children":2638},{"class":244,"line":375},[2639,2643],{"type":170,"tag":242,"props":2640,"children":2641},{"style":249},[2642],{"type":176,"value":1461},{"type":170,"tag":242,"props":2644,"children":2645},{"style":664},[2646],{"type":176,"value":2033},{"type":170,"tag":178,"props":2648,"children":2649},{},[2650],{"type":176,"value":2651},"Primitive 中没有直接渲染 slots.default 而使用 Slot 中转的原因主要是要在 Slot 组件处理 css class、props 和事件合并相关事项。实际最后渲染的实际内容是处理后的克隆的 slots.default。Slot 的代码简化如下：",{"type":170,"tag":232,"props":2653,"children":2655},{"className":1331,"code":2654,"language":1333,"meta":163,"style":163},"setup() {\n  const mergedProps = child.props\n    ? mergeProps(attrs, child.props)\n    : attrs\n  const cloned = cloneVNode(child, mergedProps)\n  child[0] = cloned\n  return child\n}\n",[2656],{"type":170,"tag":223,"props":2657,"children":2658},{"__ignoreMap":163},[2659,2676,2707,2749,2762,2804,2835,2848],{"type":170,"tag":242,"props":2660,"children":2661},{"class":244,"line":245},[2662,2667,2672],{"type":170,"tag":242,"props":2663,"children":2664},{"style":1702},[2665],{"type":176,"value":2666},"setup",{"type":170,"tag":242,"props":2668,"children":2669},{"style":664},[2670],{"type":176,"value":2671},"() ",{"type":170,"tag":242,"props":2673,"children":2674},{"style":249},[2675],{"type":176,"value":806},{"type":170,"tag":242,"props":2677,"children":2678},{"class":244,"line":266},[2679,2684,2689,2693,2698,2702],{"type":170,"tag":242,"props":2680,"children":2681},{"style":1349},[2682],{"type":176,"value":2683},"  const",{"type":170,"tag":242,"props":2685,"children":2686},{"style":1355},[2687],{"type":176,"value":2688}," mergedProps",{"type":170,"tag":242,"props":2690,"children":2691},{"style":461},[2692],{"type":176,"value":1363},{"type":170,"tag":242,"props":2694,"children":2695},{"style":664},[2696],{"type":176,"value":2697}," child",{"type":170,"tag":242,"props":2699,"children":2700},{"style":249},[2701],{"type":176,"value":570},{"type":170,"tag":242,"props":2703,"children":2704},{"style":664},[2705],{"type":176,"value":2706},"props\n",{"type":170,"tag":242,"props":2708,"children":2709},{"class":244,"line":284},[2710,2715,2720,2724,2729,2733,2737,2741,2745],{"type":170,"tag":242,"props":2711,"children":2712},{"style":461},[2713],{"type":176,"value":2714},"    ?",{"type":170,"tag":242,"props":2716,"children":2717},{"style":1702},[2718],{"type":176,"value":2719}," mergeProps",{"type":170,"tag":242,"props":2721,"children":2722},{"style":1373},[2723],{"type":176,"value":1710},{"type":170,"tag":242,"props":2725,"children":2726},{"style":664},[2727],{"type":176,"value":2728},"attrs",{"type":170,"tag":242,"props":2730,"children":2731},{"style":249},[2732],{"type":176,"value":2399},{"type":170,"tag":242,"props":2734,"children":2735},{"style":664},[2736],{"type":176,"value":2697},{"type":170,"tag":242,"props":2738,"children":2739},{"style":249},[2740],{"type":176,"value":570},{"type":170,"tag":242,"props":2742,"children":2743},{"style":664},[2744],{"type":176,"value":2394},{"type":170,"tag":242,"props":2746,"children":2747},{"style":1373},[2748],{"type":176,"value":2033},{"type":170,"tag":242,"props":2750,"children":2751},{"class":244,"line":294},[2752,2757],{"type":170,"tag":242,"props":2753,"children":2754},{"style":461},[2755],{"type":176,"value":2756},"    :",{"type":170,"tag":242,"props":2758,"children":2759},{"style":664},[2760],{"type":176,"value":2761}," attrs\n",{"type":170,"tag":242,"props":2763,"children":2764},{"class":244,"line":308},[2765,2769,2774,2778,2783,2787,2792,2796,2800],{"type":170,"tag":242,"props":2766,"children":2767},{"style":1349},[2768],{"type":176,"value":2683},{"type":170,"tag":242,"props":2770,"children":2771},{"style":1355},[2772],{"type":176,"value":2773}," cloned",{"type":170,"tag":242,"props":2775,"children":2776},{"style":461},[2777],{"type":176,"value":1363},{"type":170,"tag":242,"props":2779,"children":2780},{"style":1702},[2781],{"type":176,"value":2782}," cloneVNode",{"type":170,"tag":242,"props":2784,"children":2785},{"style":1373},[2786],{"type":176,"value":1710},{"type":170,"tag":242,"props":2788,"children":2789},{"style":664},[2790],{"type":176,"value":2791},"child",{"type":170,"tag":242,"props":2793,"children":2794},{"style":249},[2795],{"type":176,"value":2399},{"type":170,"tag":242,"props":2797,"children":2798},{"style":664},[2799],{"type":176,"value":2688},{"type":170,"tag":242,"props":2801,"children":2802},{"style":1373},[2803],{"type":176,"value":2033},{"type":170,"tag":242,"props":2805,"children":2806},{"class":244,"line":340},[2807,2812,2816,2821,2826,2830],{"type":170,"tag":242,"props":2808,"children":2809},{"style":664},[2810],{"type":176,"value":2811},"  child",{"type":170,"tag":242,"props":2813,"children":2814},{"style":1373},[2815],{"type":176,"value":453},{"type":170,"tag":242,"props":2817,"children":2818},{"style":504},[2819],{"type":176,"value":2820},"0",{"type":170,"tag":242,"props":2822,"children":2823},{"style":1373},[2824],{"type":176,"value":2825},"] ",{"type":170,"tag":242,"props":2827,"children":2828},{"style":461},[2829],{"type":176,"value":320},{"type":170,"tag":242,"props":2831,"children":2832},{"style":664},[2833],{"type":176,"value":2834}," cloned\n",{"type":170,"tag":242,"props":2836,"children":2837},{"class":244,"line":366},[2838,2843],{"type":170,"tag":242,"props":2839,"children":2840},{"style":1343},[2841],{"type":176,"value":2842},"  return",{"type":170,"tag":242,"props":2844,"children":2845},{"style":664},[2846],{"type":176,"value":2847}," child\n",{"type":170,"tag":242,"props":2849,"children":2850},{"class":244,"line":375},[2851],{"type":170,"tag":242,"props":2852,"children":2853},{"style":249},[2854],{"type":176,"value":695},{"type":170,"tag":2191,"props":2856,"children":2858},{"id":2857},"injectcontext-模式的具体实现",[2859],{"type":176,"value":2860},"InjectContext 模式的具体实现？",{"type":170,"tag":178,"props":2862,"children":2863},{},[2864],{"type":176,"value":2865},"Reka 使用 injectContext 模式实现组件内的状态共享，具体而言，就是在组件分层定义不同的状态和方法，然后在子组件使用 inject 获得并使用。",{"type":170,"tag":178,"props":2867,"children":2868},{},[2869],{"type":176,"value":2870},"以 Accordion 组件（折叠面板）为例，使用方式如下。Root 是 Accordion 的根节点，Item 是每一个可折叠的子项，Header 是子项标题，Trigger 是箭头按钮，Content 是子项展开后的内容区域。",{"type":170,"tag":232,"props":2872,"children":2874},{"className":234,"code":2873,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003CAccordionItem>\n      \u003CAccordionHeader>\n        \u003CAccordionTrigger />\n      \u003C/AccordionHeader>\n      \u003CAccordionContent />\n    \u003C/AccordionItem>\n  \u003C/AccordionRoot>\n\u003C/template>\n",[2875],{"type":170,"tag":223,"props":2876,"children":2877},{"__ignoreMap":163},[2878,2893,2908,2923,2939,2955,2970,2986,3001,3016],{"type":170,"tag":242,"props":2879,"children":2880},{"class":244,"line":245},[2881,2885,2889],{"type":170,"tag":242,"props":2882,"children":2883},{"style":249},[2884],{"type":176,"value":252},{"type":170,"tag":242,"props":2886,"children":2887},{"style":255},[2888],{"type":176,"value":258},{"type":170,"tag":242,"props":2890,"children":2891},{"style":249},[2892],{"type":176,"value":263},{"type":170,"tag":242,"props":2894,"children":2895},{"class":244,"line":266},[2896,2900,2904],{"type":170,"tag":242,"props":2897,"children":2898},{"style":249},[2899],{"type":176,"value":272},{"type":170,"tag":242,"props":2901,"children":2902},{"style":255},[2903],{"type":176,"value":277},{"type":170,"tag":242,"props":2905,"children":2906},{"style":249},[2907],{"type":176,"value":263},{"type":170,"tag":242,"props":2909,"children":2910},{"class":244,"line":284},[2911,2915,2919],{"type":170,"tag":242,"props":2912,"children":2913},{"style":249},[2914],{"type":176,"value":300},{"type":170,"tag":242,"props":2916,"children":2917},{"style":255},[2918],{"type":176,"value":448},{"type":170,"tag":242,"props":2920,"children":2921},{"style":249},[2922],{"type":176,"value":263},{"type":170,"tag":242,"props":2924,"children":2925},{"class":244,"line":294},[2926,2930,2935],{"type":170,"tag":242,"props":2927,"children":2928},{"style":249},[2929],{"type":176,"value":943},{"type":170,"tag":242,"props":2931,"children":2932},{"style":255},[2933],{"type":176,"value":2934},"AccordionHeader",{"type":170,"tag":242,"props":2936,"children":2937},{"style":249},[2938],{"type":176,"value":263},{"type":170,"tag":242,"props":2940,"children":2941},{"class":244,"line":308},[2942,2946,2951],{"type":170,"tag":242,"props":2943,"children":2944},{"style":249},[2945],{"type":176,"value":965},{"type":170,"tag":242,"props":2947,"children":2948},{"style":255},[2949],{"type":176,"value":2950},"AccordionTrigger",{"type":170,"tag":242,"props":2952,"children":2953},{"style":249},[2954],{"type":176,"value":1254},{"type":170,"tag":242,"props":2956,"children":2957},{"class":244,"line":340},[2958,2962,2966],{"type":170,"tag":242,"props":2959,"children":2960},{"style":249},[2961],{"type":176,"value":1037},{"type":170,"tag":242,"props":2963,"children":2964},{"style":255},[2965],{"type":176,"value":2934},{"type":170,"tag":242,"props":2967,"children":2968},{"style":249},[2969],{"type":176,"value":263},{"type":170,"tag":242,"props":2971,"children":2972},{"class":244,"line":366},[2973,2977,2982],{"type":170,"tag":242,"props":2974,"children":2975},{"style":249},[2976],{"type":176,"value":943},{"type":170,"tag":242,"props":2978,"children":2979},{"style":255},[2980],{"type":176,"value":2981},"AccordionContent",{"type":170,"tag":242,"props":2983,"children":2984},{"style":249},[2985],{"type":176,"value":1254},{"type":170,"tag":242,"props":2987,"children":2988},{"class":244,"line":375},[2989,2993,2997],{"type":170,"tag":242,"props":2990,"children":2991},{"style":249},[2992],{"type":176,"value":1061},{"type":170,"tag":242,"props":2994,"children":2995},{"style":255},[2996],{"type":176,"value":448},{"type":170,"tag":242,"props":2998,"children":2999},{"style":249},[3000],{"type":176,"value":263},{"type":170,"tag":242,"props":3002,"children":3003},{"class":244,"line":392},[3004,3008,3012],{"type":170,"tag":242,"props":3005,"children":3006},{"style":249},[3007],{"type":176,"value":381},{"type":170,"tag":242,"props":3009,"children":3010},{"style":255},[3011],{"type":176,"value":277},{"type":170,"tag":242,"props":3013,"children":3014},{"style":249},[3015],{"type":176,"value":263},{"type":170,"tag":242,"props":3017,"children":3018},{"class":244,"line":409},[3019,3023,3027],{"type":170,"tag":242,"props":3020,"children":3021},{"style":249},[3022],{"type":176,"value":398},{"type":170,"tag":242,"props":3024,"children":3025},{"style":255},[3026],{"type":176,"value":258},{"type":170,"tag":242,"props":3028,"children":3029},{"style":249},[3030],{"type":176,"value":263},{"type":170,"tag":178,"props":3032,"children":3033},{},[3034],{"type":176,"value":3035},"由使用方式可以知道，在 Accordion 内部，context 的继承结构是这样的：",{"type":170,"tag":3037,"props":3038,"children":3040},"mermaid",{"size":3039},"md",[3041],{"type":176,"value":3042},"\nflowchart TD\n    subgraph AccordionRootContext[AccordionRootContext]\n        ARCDisabled[disabled]\n        ARCDirection[direction]\n        ARCRest[...]\n    end\n    subgraph AccordionItemContext[AccordionItemContext]\n        AICValue[value]\n        AICRest[...]\n    end\n    A(AccordionRoot) -.-> |provide| AccordionRootContext\n    B(AccordionItem) -.-> |provide| AccordionItemContext\n    B --> A\n    C(AccordionHeader) --> B\n    AccordionRootContext -.-> |inject| C\n    AccordionItemContext -.-> |inject| C\n    D(AccordionContent) --> B\n    AccordionRootContext -.-> |inject| D\n    AccordionItemContext -.-> |inject| D\n",{"type":170,"tag":178,"props":3044,"children":3045},{},[3046],{"type":176,"value":3047},"一个组件可能有多个 Context，但是必须放在组件的 Vue SFC 文件中定义，才能从模版泛型中取到正确的类型。所以 Reka 组件实现有一种固定的写法，见下图，将需要导出的内容放在 script setup 外部，script setup 内部是一般的组件实现。",{"type":170,"tag":178,"props":3049,"children":3050},{},[3051],{"type":170,"tag":187,"props":3052,"children":3054},{"alt":163,"src":3053},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210529128.png",[],{"type":170,"tag":178,"props":3056,"children":3057},{},[3058],{"type":176,"value":3059},"所有 Vue SFC 导出的内容都通过组件文件夹内的桶文件（index.ts）再次导出，这样其他 Reka 组件或终端用户就能正常获取 Context 的 inject 方法。",{"type":170,"tag":178,"props":3061,"children":3062},{},[3063],{"type":170,"tag":187,"props":3064,"children":3067},{"alt":3065,"src":3066},"组件桶文件","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210534788.png",[],{"type":170,"tag":178,"props":3069,"children":3070},{},[3071],{"type":176,"value":3072},"至于 createContext 的实现，其实就是做了防错处理的 vue inject 和 vue provide，没什么特别之处，就不展开说了。",{"type":170,"tag":2191,"props":3074,"children":3076},{"id":3075},"组件延迟卸载的实现",[3077],{"type":176,"value":3078},"组件延迟卸载的实现？",{"type":170,"tag":178,"props":3080,"children":3081},{},[3082],{"type":176,"value":3083},"上面提到 Reka 使用 Presence 高阶组件来实现组件的延迟卸载，下面以 Dialog 举例。见下 DialogOverlay 的实现，根节点是 Presence 组件，其 present 属性用于节点存续状态。实际渲染的内容是 DialogOverlayImpl 组件。不过这种写法不支持 Vue Fragment。",{"type":170,"tag":232,"props":3085,"children":3087},{"className":234,"code":3086,"language":236,"meta":163,"style":163},"\u003Ctemplate>\n  \u003CPresence :present=\"forceMount || rootContext.open.value\">\n    \u003CDialogOverlayImpl />\n  \u003C/Presence>\n\u003C/template>\n",[3088],{"type":170,"tag":223,"props":3089,"children":3090},{"__ignoreMap":163},[3091,3106,3144,3160,3175],{"type":170,"tag":242,"props":3092,"children":3093},{"class":244,"line":245},[3094,3098,3102],{"type":170,"tag":242,"props":3095,"children":3096},{"style":249},[3097],{"type":176,"value":252},{"type":170,"tag":242,"props":3099,"children":3100},{"style":255},[3101],{"type":176,"value":258},{"type":170,"tag":242,"props":3103,"children":3104},{"style":249},[3105],{"type":176,"value":263},{"type":170,"tag":242,"props":3107,"children":3108},{"class":244,"line":266},[3109,3113,3118,3123,3127,3131,3136,3140],{"type":170,"tag":242,"props":3110,"children":3111},{"style":249},[3112],{"type":176,"value":272},{"type":170,"tag":242,"props":3114,"children":3115},{"style":255},[3116],{"type":176,"value":3117},"Presence",{"type":170,"tag":242,"props":3119,"children":3120},{"style":312},[3121],{"type":176,"value":3122}," :present",{"type":170,"tag":242,"props":3124,"children":3125},{"style":249},[3126],{"type":176,"value":320},{"type":170,"tag":242,"props":3128,"children":3129},{"style":323},[3130],{"type":176,"value":326},{"type":170,"tag":242,"props":3132,"children":3133},{"style":329},[3134],{"type":176,"value":3135},"forceMount || rootContext.open.value",{"type":170,"tag":242,"props":3137,"children":3138},{"style":323},[3139],{"type":176,"value":326},{"type":170,"tag":242,"props":3141,"children":3142},{"style":249},[3143],{"type":176,"value":263},{"type":170,"tag":242,"props":3145,"children":3146},{"class":244,"line":284},[3147,3151,3156],{"type":170,"tag":242,"props":3148,"children":3149},{"style":249},[3150],{"type":176,"value":300},{"type":170,"tag":242,"props":3152,"children":3153},{"style":255},[3154],{"type":176,"value":3155},"DialogOverlayImpl",{"type":170,"tag":242,"props":3157,"children":3158},{"style":249},[3159],{"type":176,"value":1254},{"type":170,"tag":242,"props":3161,"children":3162},{"class":244,"line":294},[3163,3167,3171],{"type":170,"tag":242,"props":3164,"children":3165},{"style":249},[3166],{"type":176,"value":381},{"type":170,"tag":242,"props":3168,"children":3169},{"style":255},[3170],{"type":176,"value":3117},{"type":170,"tag":242,"props":3172,"children":3173},{"style":249},[3174],{"type":176,"value":263},{"type":170,"tag":242,"props":3176,"children":3177},{"class":244,"line":308},[3178,3182,3186],{"type":170,"tag":242,"props":3179,"children":3180},{"style":249},[3181],{"type":176,"value":398},{"type":170,"tag":242,"props":3183,"children":3184},{"style":255},[3185],{"type":176,"value":258},{"type":170,"tag":242,"props":3187,"children":3188},{"style":249},[3189],{"type":176,"value":263},{"type":170,"tag":178,"props":3191,"children":3192},{},[3193],{"type":176,"value":3194},"在 Presence 内部，只要动画还没结束，或组件受控（强制挂载），就仍然会渲染内容。其中，usePresence 就是判断 DOM 节点动画运行状态的相关逻辑，动画没有结束，那么 isPresent 就是 true。forceMount 用于需要强制渲染组件的场景，就类似上文提到 Reka 结合 @vueuse/motion 使用调控组件动画。",{"type":170,"tag":232,"props":3196,"children":3198},{"className":1331,"code":3197,"language":1333,"meta":163,"style":163},"setup(props, { slots, expose }) {\n  const { present, forceMount } = toRefs(props)\n  const { isPresent } = usePresence(present, node)\n  return () => {\n    if (forceMount.value || present.value || isPresent.value) {\n      return h(slots.default())\n    } else {\n      return null\n    }\n  }\n}\n",[3199],{"type":170,"tag":223,"props":3200,"children":3201},{"__ignoreMap":163},[3202,3248,3298,3349,3368,3433,3466,3483,3496,3504,3511],{"type":170,"tag":242,"props":3203,"children":3204},{"class":244,"line":245},[3205,3209,3214,3218,3222,3226,3230,3235,3239,3244],{"type":170,"tag":242,"props":3206,"children":3207},{"style":1702},[3208],{"type":176,"value":2666},{"type":170,"tag":242,"props":3210,"children":3211},{"style":664},[3212],{"type":176,"value":3213},"(props",{"type":170,"tag":242,"props":3215,"children":3216},{"style":249},[3217],{"type":176,"value":2399},{"type":170,"tag":242,"props":3219,"children":3220},{"style":249},[3221],{"type":176,"value":1626},{"type":170,"tag":242,"props":3223,"children":3224},{"style":664},[3225],{"type":176,"value":2417},{"type":170,"tag":242,"props":3227,"children":3228},{"style":249},[3229],{"type":176,"value":2399},{"type":170,"tag":242,"props":3231,"children":3232},{"style":664},[3233],{"type":176,"value":3234}," expose ",{"type":170,"tag":242,"props":3236,"children":3237},{"style":249},[3238],{"type":176,"value":1461},{"type":170,"tag":242,"props":3240,"children":3241},{"style":664},[3242],{"type":176,"value":3243},") ",{"type":170,"tag":242,"props":3245,"children":3246},{"style":249},[3247],{"type":176,"value":806},{"type":170,"tag":242,"props":3249,"children":3250},{"class":244,"line":266},[3251,3255,3259,3264,3268,3273,3277,3281,3286,3290,3294],{"type":170,"tag":242,"props":3252,"children":3253},{"style":1349},[3254],{"type":176,"value":2683},{"type":170,"tag":242,"props":3256,"children":3257},{"style":249},[3258],{"type":176,"value":1626},{"type":170,"tag":242,"props":3260,"children":3261},{"style":1355},[3262],{"type":176,"value":3263}," present",{"type":170,"tag":242,"props":3265,"children":3266},{"style":249},[3267],{"type":176,"value":2399},{"type":170,"tag":242,"props":3269,"children":3270},{"style":1355},[3271],{"type":176,"value":3272}," forceMount",{"type":170,"tag":242,"props":3274,"children":3275},{"style":249},[3276],{"type":176,"value":1635},{"type":170,"tag":242,"props":3278,"children":3279},{"style":461},[3280],{"type":176,"value":1363},{"type":170,"tag":242,"props":3282,"children":3283},{"style":1702},[3284],{"type":176,"value":3285}," toRefs",{"type":170,"tag":242,"props":3287,"children":3288},{"style":1373},[3289],{"type":176,"value":1710},{"type":170,"tag":242,"props":3291,"children":3292},{"style":664},[3293],{"type":176,"value":2394},{"type":170,"tag":242,"props":3295,"children":3296},{"style":1373},[3297],{"type":176,"value":2033},{"type":170,"tag":242,"props":3299,"children":3300},{"class":244,"line":284},[3301,3305,3309,3314,3318,3322,3327,3331,3336,3340,3345],{"type":170,"tag":242,"props":3302,"children":3303},{"style":1349},[3304],{"type":176,"value":2683},{"type":170,"tag":242,"props":3306,"children":3307},{"style":249},[3308],{"type":176,"value":1626},{"type":170,"tag":242,"props":3310,"children":3311},{"style":1355},[3312],{"type":176,"value":3313}," isPresent",{"type":170,"tag":242,"props":3315,"children":3316},{"style":249},[3317],{"type":176,"value":1635},{"type":170,"tag":242,"props":3319,"children":3320},{"style":461},[3321],{"type":176,"value":1363},{"type":170,"tag":242,"props":3323,"children":3324},{"style":1702},[3325],{"type":176,"value":3326}," usePresence",{"type":170,"tag":242,"props":3328,"children":3329},{"style":1373},[3330],{"type":176,"value":1710},{"type":170,"tag":242,"props":3332,"children":3333},{"style":664},[3334],{"type":176,"value":3335},"present",{"type":170,"tag":242,"props":3337,"children":3338},{"style":249},[3339],{"type":176,"value":2399},{"type":170,"tag":242,"props":3341,"children":3342},{"style":664},[3343],{"type":176,"value":3344}," node",{"type":170,"tag":242,"props":3346,"children":3347},{"style":1373},[3348],{"type":176,"value":2033},{"type":170,"tag":242,"props":3350,"children":3351},{"class":244,"line":294},[3352,3356,3360,3364],{"type":170,"tag":242,"props":3353,"children":3354},{"style":1343},[3355],{"type":176,"value":2842},{"type":170,"tag":242,"props":3357,"children":3358},{"style":249},[3359],{"type":176,"value":1755},{"type":170,"tag":242,"props":3361,"children":3362},{"style":1349},[3363],{"type":176,"value":1760},{"type":170,"tag":242,"props":3365,"children":3366},{"style":249},[3367],{"type":176,"value":486},{"type":170,"tag":242,"props":3369,"children":3370},{"class":244,"line":308},[3371,3375,3379,3384,3388,3392,3397,3401,3405,3409,3413,3417,3421,3425,3429],{"type":170,"tag":242,"props":3372,"children":3373},{"style":1343},[3374],{"type":176,"value":2434},{"type":170,"tag":242,"props":3376,"children":3377},{"style":1373},[3378],{"type":176,"value":1816},{"type":170,"tag":242,"props":3380,"children":3381},{"style":664},[3382],{"type":176,"value":3383},"forceMount",{"type":170,"tag":242,"props":3385,"children":3386},{"style":249},[3387],{"type":176,"value":570},{"type":170,"tag":242,"props":3389,"children":3390},{"style":664},[3391],{"type":176,"value":1781},{"type":170,"tag":242,"props":3393,"children":3394},{"style":461},[3395],{"type":176,"value":3396}," ||",{"type":170,"tag":242,"props":3398,"children":3399},{"style":664},[3400],{"type":176,"value":3263},{"type":170,"tag":242,"props":3402,"children":3403},{"style":249},[3404],{"type":176,"value":570},{"type":170,"tag":242,"props":3406,"children":3407},{"style":664},[3408],{"type":176,"value":1781},{"type":170,"tag":242,"props":3410,"children":3411},{"style":461},[3412],{"type":176,"value":3396},{"type":170,"tag":242,"props":3414,"children":3415},{"style":664},[3416],{"type":176,"value":3313},{"type":170,"tag":242,"props":3418,"children":3419},{"style":249},[3420],{"type":176,"value":570},{"type":170,"tag":242,"props":3422,"children":3423},{"style":664},[3424],{"type":176,"value":1781},{"type":170,"tag":242,"props":3426,"children":3427},{"style":1373},[3428],{"type":176,"value":3243},{"type":170,"tag":242,"props":3430,"children":3431},{"style":249},[3432],{"type":176,"value":806},{"type":170,"tag":242,"props":3434,"children":3435},{"class":244,"line":340},[3436,3440,3444,3448,3453,3457,3461],{"type":170,"tag":242,"props":3437,"children":3438},{"style":1343},[3439],{"type":176,"value":2473},{"type":170,"tag":242,"props":3441,"children":3442},{"style":1702},[3443],{"type":176,"value":2486},{"type":170,"tag":242,"props":3445,"children":3446},{"style":1373},[3447],{"type":176,"value":1710},{"type":170,"tag":242,"props":3449,"children":3450},{"style":664},[3451],{"type":176,"value":3452},"slots",{"type":170,"tag":242,"props":3454,"children":3455},{"style":249},[3456],{"type":176,"value":570},{"type":170,"tag":242,"props":3458,"children":3459},{"style":1702},[3460],{"type":176,"value":2540},{"type":170,"tag":242,"props":3462,"children":3463},{"style":1373},[3464],{"type":176,"value":3465},"())\n",{"type":170,"tag":242,"props":3467,"children":3468},{"class":244,"line":366},[3469,3474,3479],{"type":170,"tag":242,"props":3470,"children":3471},{"style":249},[3472],{"type":176,"value":3473},"    }",{"type":170,"tag":242,"props":3475,"children":3476},{"style":1343},[3477],{"type":176,"value":3478}," else",{"type":170,"tag":242,"props":3480,"children":3481},{"style":249},[3482],{"type":176,"value":486},{"type":170,"tag":242,"props":3484,"children":3485},{"class":244,"line":375},[3486,3490],{"type":170,"tag":242,"props":3487,"children":3488},{"style":1343},[3489],{"type":176,"value":2473},{"type":170,"tag":242,"props":3491,"children":3493},{"style":3492},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3494],{"type":176,"value":3495}," null\n",{"type":170,"tag":242,"props":3497,"children":3498},{"class":244,"line":392},[3499],{"type":170,"tag":242,"props":3500,"children":3501},{"style":249},[3502],{"type":176,"value":3503},"    }\n",{"type":170,"tag":242,"props":3505,"children":3506},{"class":244,"line":409},[3507],{"type":170,"tag":242,"props":3508,"children":3509},{"style":249},[3510],{"type":176,"value":527},{"type":170,"tag":242,"props":3512,"children":3513},{"class":244,"line":426},[3514],{"type":170,"tag":242,"props":3515,"children":3516},{"style":249},[3517],{"type":176,"value":695},{"type":170,"tag":178,"props":3519,"children":3520},{},[3521],{"type":176,"value":3522},"usePresence 内部有个状态机，用来表示组件所处的挂载状态。Vue 组件有 mounted 和 unmounted 两种，再加一种 unmountSuspended 用来表示动画还在运行。三种状态的流转方式如下：",{"type":170,"tag":3037,"props":3524,"children":3525},{"size":3039},[3526],{"type":176,"value":3527},"\nstateDiagram-v2\n    [*] --> mounted\n    mounted --> unmounted: UNMOUNT\n    mounted --> unmountSuspended: ANIMATION_OUT\n    unmountSuspended --> mounted: MOUNT\n    unmountSuspended --> unmounted: ANIMATION_END\n    unmounted --> mounted: MOUNT\n",{"type":170,"tag":178,"props":3529,"children":3530},{},[3531],{"type":176,"value":3532},"三种状态组合成计算属性 isPresent，只要动画还在运行，isPresent 就是 true，这和上面提到的是一致的。",{"type":170,"tag":232,"props":3534,"children":3536},{"className":1331,"code":3535,"language":1333,"meta":163,"style":163},"const isPresent = computed(() =>\n  ['mounted', 'unmountSuspended'].includes(state.value),\n)\n",[3537],{"type":170,"tag":223,"props":3538,"children":3539},{"__ignoreMap":163},[3540,3574,3643],{"type":170,"tag":242,"props":3541,"children":3542},{"class":244,"line":245},[3543,3547,3551,3555,3560,3564,3569],{"type":170,"tag":242,"props":3544,"children":3545},{"style":1349},[3546],{"type":176,"value":1690},{"type":170,"tag":242,"props":3548,"children":3549},{"style":1355},[3550],{"type":176,"value":3313},{"type":170,"tag":242,"props":3552,"children":3553},{"style":461},[3554],{"type":176,"value":1363},{"type":170,"tag":242,"props":3556,"children":3557},{"style":1702},[3558],{"type":176,"value":3559}," computed",{"type":170,"tag":242,"props":3561,"children":3562},{"style":664},[3563],{"type":176,"value":1710},{"type":170,"tag":242,"props":3565,"children":3566},{"style":249},[3567],{"type":176,"value":3568},"()",{"type":170,"tag":242,"props":3570,"children":3571},{"style":1349},[3572],{"type":176,"value":3573}," =>\n",{"type":170,"tag":242,"props":3575,"children":3576},{"class":244,"line":266},[3577,3582,3586,3591,3595,3599,3603,3608,3612,3616,3620,3625,3630,3634,3639],{"type":170,"tag":242,"props":3578,"children":3579},{"style":664},[3580],{"type":176,"value":3581},"  [",{"type":170,"tag":242,"props":3583,"children":3584},{"style":323},[3585],{"type":176,"value":2461},{"type":170,"tag":242,"props":3587,"children":3588},{"style":329},[3589],{"type":176,"value":3590},"mounted",{"type":170,"tag":242,"props":3592,"children":3593},{"style":323},[3594],{"type":176,"value":2461},{"type":170,"tag":242,"props":3596,"children":3597},{"style":249},[3598],{"type":176,"value":2399},{"type":170,"tag":242,"props":3600,"children":3601},{"style":323},[3602],{"type":176,"value":1645},{"type":170,"tag":242,"props":3604,"children":3605},{"style":329},[3606],{"type":176,"value":3607},"unmountSuspended",{"type":170,"tag":242,"props":3609,"children":3610},{"style":323},[3611],{"type":176,"value":2461},{"type":170,"tag":242,"props":3613,"children":3614},{"style":664},[3615],{"type":176,"value":481},{"type":170,"tag":242,"props":3617,"children":3618},{"style":249},[3619],{"type":176,"value":570},{"type":170,"tag":242,"props":3621,"children":3622},{"style":1702},[3623],{"type":176,"value":3624},"includes",{"type":170,"tag":242,"props":3626,"children":3627},{"style":664},[3628],{"type":176,"value":3629},"(state",{"type":170,"tag":242,"props":3631,"children":3632},{"style":249},[3633],{"type":176,"value":570},{"type":170,"tag":242,"props":3635,"children":3636},{"style":664},[3637],{"type":176,"value":3638},"value)",{"type":170,"tag":242,"props":3640,"children":3641},{"style":249},[3642],{"type":176,"value":1390},{"type":170,"tag":242,"props":3644,"children":3645},{"class":244,"line":284},[3646],{"type":170,"tag":242,"props":3647,"children":3648},{"style":664},[3649],{"type":176,"value":2033},{"type":170,"tag":178,"props":3651,"children":3652},{},[3653],{"type":176,"value":3654},"怎么处理状态的流转呢？代码中根据当前组件是否挂载，以及动画的名称，来决定触发何种状态流转。",{"type":170,"tag":2076,"props":3656,"children":3657},{},[3658,3663,3668,3673],{"type":170,"tag":2080,"props":3659,"children":3660},{},[3661],{"type":176,"value":3662},"组件挂载时，状态切换到 mounted",{"type":170,"tag":2080,"props":3664,"children":3665},{},[3666],{"type":176,"value":3667},"当前没有动画，或节点不可见，状态切换到 unmounted",{"type":170,"tag":2080,"props":3669,"children":3670},{},[3671],{"type":176,"value":3672},"组件已挂载且当前动画正在运行，状态切换到 unmountSuspended",{"type":170,"tag":2080,"props":3674,"children":3675},{},[3676],{"type":176,"value":3677},"动画结束后，状态切换到 unmounted",{"type":170,"tag":232,"props":3679,"children":3681},{"className":1331,"code":3680,"language":1333,"meta":163,"style":163},"watch(\n  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n  present,\n  async (currentPresent, prevPresent) => {\n    const hasPresentChanged = prevPresent !== currentPresent\n    if (hasPresentChanged) {\n      if (currentPresent)\n        dispatch('MOUNT')\n      else if (currentAnimationName === 'none' || styles.value?.display === 'none')\n        dispatch('UNMOUNT')\n      else {\n        const isAnimating = prevAnimationName !== currentAnimationName\n        if (prevPresent && isAnimating)\n          dispatch('ANIMATION_OUT')\n        else\n          dispatch('UNMOUNT')\n      }\n    }\n  }\n)\n",[3682],{"type":170,"tag":223,"props":3683,"children":3684},{"__ignoreMap":163},[3685,3698,3706,3718,3757,3787,3811,3831,3860,3947,3975,3986,4017,4047,4076,4084,4111,4119,4126,4134],{"type":170,"tag":242,"props":3686,"children":3687},{"class":244,"line":245},[3688,3693],{"type":170,"tag":242,"props":3689,"children":3690},{"style":1702},[3691],{"type":176,"value":3692},"watch",{"type":170,"tag":242,"props":3694,"children":3695},{"style":664},[3696],{"type":176,"value":3697},"(\n",{"type":170,"tag":242,"props":3699,"children":3700},{"class":244,"line":266},[3701],{"type":170,"tag":242,"props":3702,"children":3703},{"style":288},[3704],{"type":176,"value":3705},"  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n",{"type":170,"tag":242,"props":3707,"children":3708},{"class":244,"line":284},[3709,3714],{"type":170,"tag":242,"props":3710,"children":3711},{"style":664},[3712],{"type":176,"value":3713},"  present",{"type":170,"tag":242,"props":3715,"children":3716},{"style":249},[3717],{"type":176,"value":1390},{"type":170,"tag":242,"props":3719,"children":3720},{"class":244,"line":294},[3721,3727,3731,3736,3740,3745,3749,3753],{"type":170,"tag":242,"props":3722,"children":3724},{"style":3723},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3725],{"type":176,"value":3726},"  async",{"type":170,"tag":242,"props":3728,"children":3729},{"style":249},[3730],{"type":176,"value":1816},{"type":170,"tag":242,"props":3732,"children":3733},{"style":1819},[3734],{"type":176,"value":3735},"currentPresent",{"type":170,"tag":242,"props":3737,"children":3738},{"style":249},[3739],{"type":176,"value":2399},{"type":170,"tag":242,"props":3741,"children":3742},{"style":1819},[3743],{"type":176,"value":3744}," prevPresent",{"type":170,"tag":242,"props":3746,"children":3747},{"style":249},[3748],{"type":176,"value":1826},{"type":170,"tag":242,"props":3750,"children":3751},{"style":1349},[3752],{"type":176,"value":1760},{"type":170,"tag":242,"props":3754,"children":3755},{"style":249},[3756],{"type":176,"value":486},{"type":170,"tag":242,"props":3758,"children":3759},{"class":244,"line":308},[3760,3765,3770,3774,3778,3782],{"type":170,"tag":242,"props":3761,"children":3762},{"style":1349},[3763],{"type":176,"value":3764},"    const",{"type":170,"tag":242,"props":3766,"children":3767},{"style":1355},[3768],{"type":176,"value":3769}," hasPresentChanged",{"type":170,"tag":242,"props":3771,"children":3772},{"style":461},[3773],{"type":176,"value":1363},{"type":170,"tag":242,"props":3775,"children":3776},{"style":664},[3777],{"type":176,"value":3744},{"type":170,"tag":242,"props":3779,"children":3780},{"style":461},[3781],{"type":176,"value":2448},{"type":170,"tag":242,"props":3783,"children":3784},{"style":664},[3785],{"type":176,"value":3786}," currentPresent\n",{"type":170,"tag":242,"props":3788,"children":3789},{"class":244,"line":340},[3790,3794,3798,3803,3807],{"type":170,"tag":242,"props":3791,"children":3792},{"style":1343},[3793],{"type":176,"value":2434},{"type":170,"tag":242,"props":3795,"children":3796},{"style":1373},[3797],{"type":176,"value":1816},{"type":170,"tag":242,"props":3799,"children":3800},{"style":664},[3801],{"type":176,"value":3802},"hasPresentChanged",{"type":170,"tag":242,"props":3804,"children":3805},{"style":1373},[3806],{"type":176,"value":3243},{"type":170,"tag":242,"props":3808,"children":3809},{"style":249},[3810],{"type":176,"value":806},{"type":170,"tag":242,"props":3812,"children":3813},{"class":244,"line":366},[3814,3819,3823,3827],{"type":170,"tag":242,"props":3815,"children":3816},{"style":1343},[3817],{"type":176,"value":3818},"      if",{"type":170,"tag":242,"props":3820,"children":3821},{"style":1373},[3822],{"type":176,"value":1816},{"type":170,"tag":242,"props":3824,"children":3825},{"style":664},[3826],{"type":176,"value":3735},{"type":170,"tag":242,"props":3828,"children":3829},{"style":1373},[3830],{"type":176,"value":2033},{"type":170,"tag":242,"props":3832,"children":3833},{"class":244,"line":375},[3834,3839,3843,3847,3852,3856],{"type":170,"tag":242,"props":3835,"children":3836},{"style":1702},[3837],{"type":176,"value":3838},"        dispatch",{"type":170,"tag":242,"props":3840,"children":3841},{"style":1373},[3842],{"type":176,"value":1710},{"type":170,"tag":242,"props":3844,"children":3845},{"style":323},[3846],{"type":176,"value":2461},{"type":170,"tag":242,"props":3848,"children":3849},{"style":329},[3850],{"type":176,"value":3851},"MOUNT",{"type":170,"tag":242,"props":3853,"children":3854},{"style":323},[3855],{"type":176,"value":2461},{"type":170,"tag":242,"props":3857,"children":3858},{"style":1373},[3859],{"type":176,"value":2033},{"type":170,"tag":242,"props":3861,"children":3862},{"class":244,"line":392},[3863,3868,3873,3877,3882,3887,3891,3896,3900,3904,3909,3913,3917,3922,3927,3931,3935,3939,3943],{"type":170,"tag":242,"props":3864,"children":3865},{"style":1343},[3866],{"type":176,"value":3867},"      else",{"type":170,"tag":242,"props":3869,"children":3870},{"style":1343},[3871],{"type":176,"value":3872}," if",{"type":170,"tag":242,"props":3874,"children":3875},{"style":1373},[3876],{"type":176,"value":1816},{"type":170,"tag":242,"props":3878,"children":3879},{"style":664},[3880],{"type":176,"value":3881},"currentAnimationName",{"type":170,"tag":242,"props":3883,"children":3884},{"style":461},[3885],{"type":176,"value":3886}," ===",{"type":170,"tag":242,"props":3888,"children":3889},{"style":323},[3890],{"type":176,"value":1645},{"type":170,"tag":242,"props":3892,"children":3893},{"style":329},[3894],{"type":176,"value":3895},"none",{"type":170,"tag":242,"props":3897,"children":3898},{"style":323},[3899],{"type":176,"value":2461},{"type":170,"tag":242,"props":3901,"children":3902},{"style":461},[3903],{"type":176,"value":3396},{"type":170,"tag":242,"props":3905,"children":3906},{"style":664},[3907],{"type":176,"value":3908}," styles",{"type":170,"tag":242,"props":3910,"children":3911},{"style":249},[3912],{"type":176,"value":570},{"type":170,"tag":242,"props":3914,"children":3915},{"style":664},[3916],{"type":176,"value":1781},{"type":170,"tag":242,"props":3918,"children":3919},{"style":249},[3920],{"type":176,"value":3921},"?.",{"type":170,"tag":242,"props":3923,"children":3924},{"style":664},[3925],{"type":176,"value":3926},"display",{"type":170,"tag":242,"props":3928,"children":3929},{"style":461},[3930],{"type":176,"value":3886},{"type":170,"tag":242,"props":3932,"children":3933},{"style":323},[3934],{"type":176,"value":1645},{"type":170,"tag":242,"props":3936,"children":3937},{"style":329},[3938],{"type":176,"value":3895},{"type":170,"tag":242,"props":3940,"children":3941},{"style":323},[3942],{"type":176,"value":2461},{"type":170,"tag":242,"props":3944,"children":3945},{"style":1373},[3946],{"type":176,"value":2033},{"type":170,"tag":242,"props":3948,"children":3949},{"class":244,"line":409},[3950,3954,3958,3962,3967,3971],{"type":170,"tag":242,"props":3951,"children":3952},{"style":1702},[3953],{"type":176,"value":3838},{"type":170,"tag":242,"props":3955,"children":3956},{"style":1373},[3957],{"type":176,"value":1710},{"type":170,"tag":242,"props":3959,"children":3960},{"style":323},[3961],{"type":176,"value":2461},{"type":170,"tag":242,"props":3963,"children":3964},{"style":329},[3965],{"type":176,"value":3966},"UNMOUNT",{"type":170,"tag":242,"props":3968,"children":3969},{"style":323},[3970],{"type":176,"value":2461},{"type":170,"tag":242,"props":3972,"children":3973},{"style":1373},[3974],{"type":176,"value":2033},{"type":170,"tag":242,"props":3976,"children":3977},{"class":244,"line":426},[3978,3982],{"type":170,"tag":242,"props":3979,"children":3980},{"style":1343},[3981],{"type":176,"value":3867},{"type":170,"tag":242,"props":3983,"children":3984},{"style":249},[3985],{"type":176,"value":486},{"type":170,"tag":242,"props":3987,"children":3988},{"class":244,"line":435},[3989,3994,3999,4003,4008,4012],{"type":170,"tag":242,"props":3990,"children":3991},{"style":1349},[3992],{"type":176,"value":3993},"        const",{"type":170,"tag":242,"props":3995,"children":3996},{"style":1355},[3997],{"type":176,"value":3998}," isAnimating",{"type":170,"tag":242,"props":4000,"children":4001},{"style":461},[4002],{"type":176,"value":1363},{"type":170,"tag":242,"props":4004,"children":4005},{"style":664},[4006],{"type":176,"value":4007}," prevAnimationName",{"type":170,"tag":242,"props":4009,"children":4010},{"style":461},[4011],{"type":176,"value":2448},{"type":170,"tag":242,"props":4013,"children":4014},{"style":664},[4015],{"type":176,"value":4016}," currentAnimationName\n",{"type":170,"tag":242,"props":4018,"children":4019},{"class":244,"line":489},[4020,4025,4029,4034,4039,4043],{"type":170,"tag":242,"props":4021,"children":4022},{"style":1343},[4023],{"type":176,"value":4024},"        if",{"type":170,"tag":242,"props":4026,"children":4027},{"style":1373},[4028],{"type":176,"value":1816},{"type":170,"tag":242,"props":4030,"children":4031},{"style":664},[4032],{"type":176,"value":4033},"prevPresent",{"type":170,"tag":242,"props":4035,"children":4036},{"style":461},[4037],{"type":176,"value":4038}," &&",{"type":170,"tag":242,"props":4040,"children":4041},{"style":664},[4042],{"type":176,"value":3998},{"type":170,"tag":242,"props":4044,"children":4045},{"style":1373},[4046],{"type":176,"value":2033},{"type":170,"tag":242,"props":4048,"children":4049},{"class":244,"line":521},[4050,4055,4059,4063,4068,4072],{"type":170,"tag":242,"props":4051,"children":4052},{"style":1702},[4053],{"type":176,"value":4054},"          dispatch",{"type":170,"tag":242,"props":4056,"children":4057},{"style":1373},[4058],{"type":176,"value":1710},{"type":170,"tag":242,"props":4060,"children":4061},{"style":323},[4062],{"type":176,"value":2461},{"type":170,"tag":242,"props":4064,"children":4065},{"style":329},[4066],{"type":176,"value":4067},"ANIMATION_OUT",{"type":170,"tag":242,"props":4069,"children":4070},{"style":323},[4071],{"type":176,"value":2461},{"type":170,"tag":242,"props":4073,"children":4074},{"style":1373},[4075],{"type":176,"value":2033},{"type":170,"tag":242,"props":4077,"children":4078},{"class":244,"line":530},[4079],{"type":170,"tag":242,"props":4080,"children":4081},{"style":1343},[4082],{"type":176,"value":4083},"        else\n",{"type":170,"tag":242,"props":4085,"children":4086},{"class":244,"line":1997},[4087,4091,4095,4099,4103,4107],{"type":170,"tag":242,"props":4088,"children":4089},{"style":1702},[4090],{"type":176,"value":4054},{"type":170,"tag":242,"props":4092,"children":4093},{"style":1373},[4094],{"type":176,"value":1710},{"type":170,"tag":242,"props":4096,"children":4097},{"style":323},[4098],{"type":176,"value":2461},{"type":170,"tag":242,"props":4100,"children":4101},{"style":329},[4102],{"type":176,"value":3966},{"type":170,"tag":242,"props":4104,"children":4105},{"style":323},[4106],{"type":176,"value":2461},{"type":170,"tag":242,"props":4108,"children":4109},{"style":1373},[4110],{"type":176,"value":2033},{"type":170,"tag":242,"props":4112,"children":4113},{"class":244,"line":2010},[4114],{"type":170,"tag":242,"props":4115,"children":4116},{"style":249},[4117],{"type":176,"value":4118},"      }\n",{"type":170,"tag":242,"props":4120,"children":4121},{"class":244,"line":2023},[4122],{"type":170,"tag":242,"props":4123,"children":4124},{"style":249},[4125],{"type":176,"value":3503},{"type":170,"tag":242,"props":4127,"children":4129},{"class":244,"line":4128},19,[4130],{"type":170,"tag":242,"props":4131,"children":4132},{"style":249},[4133],{"type":176,"value":527},{"type":170,"tag":242,"props":4135,"children":4137},{"class":244,"line":4136},20,[4138],{"type":170,"tag":242,"props":4139,"children":4140},{"style":664},[4141],{"type":176,"value":2033},{"type":170,"tag":178,"props":4143,"children":4144},{},[4145],{"type":176,"value":4146},"上面这个 watch 中使用到的 styles 样式，即 getComputedStyle 获得的样式；动画名称，则是 getComputedStyle().animationName 获得的动画名称，如果没有动画名称，则回退为默认值 'none'。至于何时才算 !isAnimating 还没有说清楚，因为要提到 currentAnimationName 和 prevAnimationName 的变化。",{"type":170,"tag":178,"props":4148,"children":4149},{},[4150],{"type":176,"value":4151},"每次动画开始时（addEventListener(animationstart)），会重新计算动画名称，存放到 prevAnimationName 中。watch 监听时，currentAnimationName 会实时计算，这样就能对比得到当前动画是否在运行。比如上一个动画是 fadeIn，当前动画是 none，就意味着允许卸载了（状态流转到 unmounted）。此外，动画结束时，会主动触发 ANIMATION_END 事件，转换状态到 unmounted。",{"type":170,"tag":232,"props":4153,"children":4155},{"className":1331,"code":4154,"language":1333,"meta":163,"style":163},"const handleAnimationEnd = (event: AnimationEvent) => {\n  const currentAnimationName = getAnimationName(node.value)\n  const isCurrentAnimation = currentAnimationName.includes(event.animationName)\n  if (event.target === node.value && isCurrentAnimation) {\n    dispatch('ANIMATION_END')\n  }\n}\n",[4156],{"type":170,"tag":223,"props":4157,"children":4158},{"__ignoreMap":163},[4159,4207,4249,4298,4355,4384,4391],{"type":170,"tag":242,"props":4160,"children":4161},{"class":244,"line":245},[4162,4166,4172,4176,4180,4185,4189,4195,4199,4203],{"type":170,"tag":242,"props":4163,"children":4164},{"style":1349},[4165],{"type":176,"value":1690},{"type":170,"tag":242,"props":4167,"children":4169},{"style":4168},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4170],{"type":176,"value":4171}," handleAnimationEnd",{"type":170,"tag":242,"props":4173,"children":4174},{"style":461},[4175],{"type":176,"value":1363},{"type":170,"tag":242,"props":4177,"children":4178},{"style":249},[4179],{"type":176,"value":1816},{"type":170,"tag":242,"props":4181,"children":4182},{"style":1819},[4183],{"type":176,"value":4184},"event",{"type":170,"tag":242,"props":4186,"children":4187},{"style":461},[4188],{"type":176,"value":501},{"type":170,"tag":242,"props":4190,"children":4192},{"style":4191},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[4193],{"type":176,"value":4194}," AnimationEvent",{"type":170,"tag":242,"props":4196,"children":4197},{"style":249},[4198],{"type":176,"value":1826},{"type":170,"tag":242,"props":4200,"children":4201},{"style":1349},[4202],{"type":176,"value":1760},{"type":170,"tag":242,"props":4204,"children":4205},{"style":249},[4206],{"type":176,"value":486},{"type":170,"tag":242,"props":4208,"children":4209},{"class":244,"line":266},[4210,4214,4219,4223,4228,4232,4237,4241,4245],{"type":170,"tag":242,"props":4211,"children":4212},{"style":1349},[4213],{"type":176,"value":2683},{"type":170,"tag":242,"props":4215,"children":4216},{"style":1355},[4217],{"type":176,"value":4218}," currentAnimationName",{"type":170,"tag":242,"props":4220,"children":4221},{"style":461},[4222],{"type":176,"value":1363},{"type":170,"tag":242,"props":4224,"children":4225},{"style":1702},[4226],{"type":176,"value":4227}," getAnimationName",{"type":170,"tag":242,"props":4229,"children":4230},{"style":1373},[4231],{"type":176,"value":1710},{"type":170,"tag":242,"props":4233,"children":4234},{"style":664},[4235],{"type":176,"value":4236},"node",{"type":170,"tag":242,"props":4238,"children":4239},{"style":249},[4240],{"type":176,"value":570},{"type":170,"tag":242,"props":4242,"children":4243},{"style":664},[4244],{"type":176,"value":1781},{"type":170,"tag":242,"props":4246,"children":4247},{"style":1373},[4248],{"type":176,"value":2033},{"type":170,"tag":242,"props":4250,"children":4251},{"class":244,"line":284},[4252,4256,4261,4265,4269,4273,4277,4281,4285,4289,4294],{"type":170,"tag":242,"props":4253,"children":4254},{"style":1349},[4255],{"type":176,"value":2683},{"type":170,"tag":242,"props":4257,"children":4258},{"style":1355},[4259],{"type":176,"value":4260}," isCurrentAnimation",{"type":170,"tag":242,"props":4262,"children":4263},{"style":461},[4264],{"type":176,"value":1363},{"type":170,"tag":242,"props":4266,"children":4267},{"style":664},[4268],{"type":176,"value":4218},{"type":170,"tag":242,"props":4270,"children":4271},{"style":249},[4272],{"type":176,"value":570},{"type":170,"tag":242,"props":4274,"children":4275},{"style":1702},[4276],{"type":176,"value":3624},{"type":170,"tag":242,"props":4278,"children":4279},{"style":1373},[4280],{"type":176,"value":1710},{"type":170,"tag":242,"props":4282,"children":4283},{"style":664},[4284],{"type":176,"value":4184},{"type":170,"tag":242,"props":4286,"children":4287},{"style":249},[4288],{"type":176,"value":570},{"type":170,"tag":242,"props":4290,"children":4291},{"style":664},[4292],{"type":176,"value":4293},"animationName",{"type":170,"tag":242,"props":4295,"children":4296},{"style":1373},[4297],{"type":176,"value":2033},{"type":170,"tag":242,"props":4299,"children":4300},{"class":244,"line":294},[4301,4306,4310,4314,4318,4323,4327,4331,4335,4339,4343,4347,4351],{"type":170,"tag":242,"props":4302,"children":4303},{"style":1343},[4304],{"type":176,"value":4305},"  if",{"type":170,"tag":242,"props":4307,"children":4308},{"style":1373},[4309],{"type":176,"value":1816},{"type":170,"tag":242,"props":4311,"children":4312},{"style":664},[4313],{"type":176,"value":4184},{"type":170,"tag":242,"props":4315,"children":4316},{"style":249},[4317],{"type":176,"value":570},{"type":170,"tag":242,"props":4319,"children":4320},{"style":664},[4321],{"type":176,"value":4322},"target",{"type":170,"tag":242,"props":4324,"children":4325},{"style":461},[4326],{"type":176,"value":3886},{"type":170,"tag":242,"props":4328,"children":4329},{"style":664},[4330],{"type":176,"value":3344},{"type":170,"tag":242,"props":4332,"children":4333},{"style":249},[4334],{"type":176,"value":570},{"type":170,"tag":242,"props":4336,"children":4337},{"style":664},[4338],{"type":176,"value":1781},{"type":170,"tag":242,"props":4340,"children":4341},{"style":461},[4342],{"type":176,"value":4038},{"type":170,"tag":242,"props":4344,"children":4345},{"style":664},[4346],{"type":176,"value":4260},{"type":170,"tag":242,"props":4348,"children":4349},{"style":1373},[4350],{"type":176,"value":3243},{"type":170,"tag":242,"props":4352,"children":4353},{"style":249},[4354],{"type":176,"value":806},{"type":170,"tag":242,"props":4356,"children":4357},{"class":244,"line":308},[4358,4363,4367,4371,4376,4380],{"type":170,"tag":242,"props":4359,"children":4360},{"style":1702},[4361],{"type":176,"value":4362},"    dispatch",{"type":170,"tag":242,"props":4364,"children":4365},{"style":1373},[4366],{"type":176,"value":1710},{"type":170,"tag":242,"props":4368,"children":4369},{"style":323},[4370],{"type":176,"value":2461},{"type":170,"tag":242,"props":4372,"children":4373},{"style":329},[4374],{"type":176,"value":4375},"ANIMATION_END",{"type":170,"tag":242,"props":4377,"children":4378},{"style":323},[4379],{"type":176,"value":2461},{"type":170,"tag":242,"props":4381,"children":4382},{"style":1373},[4383],{"type":176,"value":2033},{"type":170,"tag":242,"props":4385,"children":4386},{"class":244,"line":340},[4387],{"type":170,"tag":242,"props":4388,"children":4389},{"style":249},[4390],{"type":176,"value":527},{"type":170,"tag":242,"props":4392,"children":4393},{"class":244,"line":366},[4394],{"type":170,"tag":242,"props":4395,"children":4396},{"style":249},[4397],{"type":176,"value":695},{"type":170,"tag":178,"props":4399,"children":4400},{},[4401],{"type":176,"value":4402},"最后，为什么 Presence 组件的支持 Vue Transition 呢？这是因为 usePresence 中每次转换状态时，都会抛出一个自定义事件。回到上面那个 watch 的例子中，以组件 mounted 为例，其他事件同理。",{"type":170,"tag":232,"props":4404,"children":4406},{"className":1331,"code":4405,"language":1333,"meta":163,"style":163},"watch(presence, () => {\n  if (currentPresent) {\n    dispatch('MOUNT')\n    dispatchCustomEvent('enter')\n    if (currentAnimationName === 'none')\n      dispatchCustomEvent('after-enter')\n  }\n})\n",[4407],{"type":170,"tag":223,"props":4408,"children":4409},{"__ignoreMap":163},[4410,4438,4461,4488,4517,4552,4581,4588],{"type":170,"tag":242,"props":4411,"children":4412},{"class":244,"line":245},[4413,4417,4422,4426,4430,4434],{"type":170,"tag":242,"props":4414,"children":4415},{"style":1702},[4416],{"type":176,"value":3692},{"type":170,"tag":242,"props":4418,"children":4419},{"style":664},[4420],{"type":176,"value":4421},"(presence",{"type":170,"tag":242,"props":4423,"children":4424},{"style":249},[4425],{"type":176,"value":2399},{"type":170,"tag":242,"props":4427,"children":4428},{"style":249},[4429],{"type":176,"value":1755},{"type":170,"tag":242,"props":4431,"children":4432},{"style":1349},[4433],{"type":176,"value":1760},{"type":170,"tag":242,"props":4435,"children":4436},{"style":249},[4437],{"type":176,"value":486},{"type":170,"tag":242,"props":4439,"children":4440},{"class":244,"line":266},[4441,4445,4449,4453,4457],{"type":170,"tag":242,"props":4442,"children":4443},{"style":1343},[4444],{"type":176,"value":4305},{"type":170,"tag":242,"props":4446,"children":4447},{"style":1373},[4448],{"type":176,"value":1816},{"type":170,"tag":242,"props":4450,"children":4451},{"style":664},[4452],{"type":176,"value":3735},{"type":170,"tag":242,"props":4454,"children":4455},{"style":1373},[4456],{"type":176,"value":3243},{"type":170,"tag":242,"props":4458,"children":4459},{"style":249},[4460],{"type":176,"value":806},{"type":170,"tag":242,"props":4462,"children":4463},{"class":244,"line":284},[4464,4468,4472,4476,4480,4484],{"type":170,"tag":242,"props":4465,"children":4466},{"style":1702},[4467],{"type":176,"value":4362},{"type":170,"tag":242,"props":4469,"children":4470},{"style":1373},[4471],{"type":176,"value":1710},{"type":170,"tag":242,"props":4473,"children":4474},{"style":323},[4475],{"type":176,"value":2461},{"type":170,"tag":242,"props":4477,"children":4478},{"style":329},[4479],{"type":176,"value":3851},{"type":170,"tag":242,"props":4481,"children":4482},{"style":323},[4483],{"type":176,"value":2461},{"type":170,"tag":242,"props":4485,"children":4486},{"style":1373},[4487],{"type":176,"value":2033},{"type":170,"tag":242,"props":4489,"children":4490},{"class":244,"line":294},[4491,4496,4500,4504,4509,4513],{"type":170,"tag":242,"props":4492,"children":4493},{"style":1702},[4494],{"type":176,"value":4495},"    dispatchCustomEvent",{"type":170,"tag":242,"props":4497,"children":4498},{"style":1373},[4499],{"type":176,"value":1710},{"type":170,"tag":242,"props":4501,"children":4502},{"style":323},[4503],{"type":176,"value":2461},{"type":170,"tag":242,"props":4505,"children":4506},{"style":329},[4507],{"type":176,"value":4508},"enter",{"type":170,"tag":242,"props":4510,"children":4511},{"style":323},[4512],{"type":176,"value":2461},{"type":170,"tag":242,"props":4514,"children":4515},{"style":1373},[4516],{"type":176,"value":2033},{"type":170,"tag":242,"props":4518,"children":4519},{"class":244,"line":308},[4520,4524,4528,4532,4536,4540,4544,4548],{"type":170,"tag":242,"props":4521,"children":4522},{"style":1343},[4523],{"type":176,"value":2434},{"type":170,"tag":242,"props":4525,"children":4526},{"style":1373},[4527],{"type":176,"value":1816},{"type":170,"tag":242,"props":4529,"children":4530},{"style":664},[4531],{"type":176,"value":3881},{"type":170,"tag":242,"props":4533,"children":4534},{"style":461},[4535],{"type":176,"value":3886},{"type":170,"tag":242,"props":4537,"children":4538},{"style":323},[4539],{"type":176,"value":1645},{"type":170,"tag":242,"props":4541,"children":4542},{"style":329},[4543],{"type":176,"value":3895},{"type":170,"tag":242,"props":4545,"children":4546},{"style":323},[4547],{"type":176,"value":2461},{"type":170,"tag":242,"props":4549,"children":4550},{"style":1373},[4551],{"type":176,"value":2033},{"type":170,"tag":242,"props":4553,"children":4554},{"class":244,"line":340},[4555,4560,4564,4568,4573,4577],{"type":170,"tag":242,"props":4556,"children":4557},{"style":1702},[4558],{"type":176,"value":4559},"      dispatchCustomEvent",{"type":170,"tag":242,"props":4561,"children":4562},{"style":1373},[4563],{"type":176,"value":1710},{"type":170,"tag":242,"props":4565,"children":4566},{"style":323},[4567],{"type":176,"value":2461},{"type":170,"tag":242,"props":4569,"children":4570},{"style":329},[4571],{"type":176,"value":4572},"after-enter",{"type":170,"tag":242,"props":4574,"children":4575},{"style":323},[4576],{"type":176,"value":2461},{"type":170,"tag":242,"props":4578,"children":4579},{"style":1373},[4580],{"type":176,"value":2033},{"type":170,"tag":242,"props":4582,"children":4583},{"class":244,"line":366},[4584],{"type":170,"tag":242,"props":4585,"children":4586},{"style":249},[4587],{"type":176,"value":527},{"type":170,"tag":242,"props":4589,"children":4590},{"class":244,"line":375},[4591,4595],{"type":170,"tag":242,"props":4592,"children":4593},{"style":249},[4594],{"type":176,"value":1461},{"type":170,"tag":242,"props":4596,"children":4597},{"style":664},[4598],{"type":176,"value":2033},{"type":170,"tag":171,"props":4600,"children":4602},{"id":4601},"组件代码",[4603],{"type":176,"value":4601},{"type":170,"tag":178,"props":4605,"children":4606},{},[4607],{"type":176,"value":4608},"如果有有意思的组件代码，会放到在这一小节介绍。",{"type":170,"tag":419,"props":4610,"children":4611},{},[4612],{"type":176,"value":4613},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":266,"depth":266,"links":4615},[4616,4617,4618,4619],{"id":173,"depth":266,"text":173},{"id":2067,"depth":266,"text":2067},{"id":2187,"depth":266,"text":2187},{"id":4601,"depth":266,"text":4601},"markdown","content:8.source-code:_js:reka-ui.md","content","8.source-code/_js/reka-ui.md","8.source-code/_js/reka-ui",[4626,4629],{"_path":4627,"title":4628,"description":4628},"/source-code/_js/nuxt-ui-v3","Nuxt UI v3",{"_path":4630,"title":4631,"description":4632},"/source-code/_js/vue-error-boundary","vue-error-boundary","错误边界最早是由 React 提出的概念，但偶然发现 vue 有对应实现，那就来看看吧",1748756325929]