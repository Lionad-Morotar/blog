[{"data":1,"prerenderedAt":4636},["ShallowReactive",2],{"navigation":3,"/source-code/_js/reka-ui":161,"/source-code/_js/reka-ui-surround":4628},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":4623,"_id":4624,"_source":4625,"_file":4626,"_stem":4627,"_extension":3042},"/source-code/_js/reka-ui","_js",false,true,"","Reka UI","一个用于使用 Vue.js 构建高质量、可访问的设计系统和 Web 应用的开源组件库。",{"type":170,"children":171,"toc":4617},"root",[172,180,186,200,205,210,215,220,234,547,552,557,699,704,709,875,880,885,1111,1116,1121,1128,1133,1327,1332,1563,1568,1674,1679,2037,2042,2047,2063,2068,2073,2078,2121,2126,2131,2136,2148,2175,2180,2188,2193,2200,2205,2339,2344,2650,2655,2858,2864,2869,2874,3034,3039,3046,3051,3058,3063,3071,3076,3082,3087,3193,3198,3521,3526,3531,3536,3653,3658,3681,4145,4150,4155,4401,4406,4602,4607,4612],{"type":173,"tag":174,"props":175,"children":177},"element","h2",{"id":176},"设计理念",[178],{"type":179,"value":176},"text",{"type":173,"tag":181,"props":182,"children":183},"p",{},[184],{"type":179,"value":185},"以下两张图分别是 Radix UI 和 Reka UI 的官网。第一印象。Reka 官网的设计感差 Radix 太多了，完全没有 Radix 的一眼震撼。更别提 Reka 的前身 Radix Vue 的网站。",{"type":173,"tag":181,"props":187,"children":188},{},[189,195],{"type":173,"tag":190,"props":191,"children":194},"img",{"alt":192,"src":193},"RadixUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719585.png?type=mac",[],{"type":173,"tag":190,"props":196,"children":199},{"alt":197,"src":198},"RekaUI","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503200719249.png?type=mac",[],{"type":173,"tag":181,"props":201,"children":202},{},[203],{"type":179,"value":204},"Reka 主打可访问性和开发者友好。",{"type":173,"tag":181,"props":206,"children":207},{},[208],{"type":179,"value":209},"由于之前没怎么关注过 UI 组件库的可访问性，对其可访问性优先的设计不是很理解，但开发体验这块却是戳到我了。",{"type":173,"tag":181,"props":211,"children":212},{},[213],{"type":179,"value":214},"Nuxt UI v2 升级到 Nuxt UI v3，底层原子组件库就是从 headless-vue 替换成了 Reka，在开发者体验这块可以说用过 headless-ui 的用户都被其封闭性给坑过。尤其记得 headless-ui 的 Dialog 组件，锁定页面 focus 不可更改就算了，还不能自定义插入节点；另一些组件则不能变成受控组件，也就意味着不能在外部直接操作内部状态，如控制弹窗开关。",{"type":173,"tag":181,"props":216,"children":217},{},[218],{"type":179,"value":219},"那开发者友好到底是个啥。总的来说，就是支持不同写法，不限制具体的使用方法。下面展开讨论一下。",{"type":173,"tag":181,"props":221,"children":222},{},[223,225,232],{"type":179,"value":224},"样式方面。相比于常见的使用 ",{"type":173,"tag":226,"props":227,"children":229},"code",{"className":228},[],[230],{"type":179,"value":231},"is-",{"type":179,"value":233}," 前缀加状态名来动态绑定状态的方式，Reka 选择在部分组件上把状态绑定到 html dataset 中。再加上对于任意有 DOM 结构的 Reka 组件，本身就支持 class 或 style 自定样式。可以说 Reka 保留对样式的完全控制，开发体验足够了。",{"type":173,"tag":235,"props":236,"children":240},"pre",{"className":237,"code":238,"language":239,"meta":166,"style":166},"language-vue shiki shiki-themes material-theme-lighter github-light github-dark monokai","\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n    \u003CAccordionItem\n      class=\"data-[state=open]:border-b-2 data-[state=open]:border-gray-800\"\n      value=\"item-1\"\n    />\n  \u003C/AccordionRoot>\n\u003C/template>\n\u003Cstyle>\n  /* 或者使用 CSS 定义样式 */\n  .AccordionItem[data-state=\"open\"] {\n    border-bottom-width: 2px;\n  }\n\u003C/style>\n","vue",[241],{"type":173,"tag":226,"props":242,"children":243},{"__ignoreMap":166},[244,267,285,295,309,341,367,376,393,410,427,436,490,522,531],{"type":173,"tag":245,"props":246,"children":249},"span",{"class":247,"line":248},"line",1,[250,256,262],{"type":173,"tag":245,"props":251,"children":253},{"style":252},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[254],{"type":179,"value":255},"\u003C",{"type":173,"tag":245,"props":257,"children":259},{"style":258},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[260],{"type":179,"value":261},"template",{"type":173,"tag":245,"props":263,"children":264},{"style":252},[265],{"type":179,"value":266},">\n",{"type":173,"tag":245,"props":268,"children":270},{"class":247,"line":269},2,[271,276,281],{"type":173,"tag":245,"props":272,"children":273},{"style":252},[274],{"type":179,"value":275},"  \u003C",{"type":173,"tag":245,"props":277,"children":278},{"style":258},[279],{"type":179,"value":280},"AccordionRoot",{"type":173,"tag":245,"props":282,"children":283},{"style":252},[284],{"type":179,"value":266},{"type":173,"tag":245,"props":286,"children":288},{"class":247,"line":287},3,[289],{"type":173,"tag":245,"props":290,"children":292},{"style":291},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[293],{"type":179,"value":294},"    \u003C!-- 这是 tailwind 的变体选择器写法 -->\n",{"type":173,"tag":245,"props":296,"children":298},{"class":247,"line":297},4,[299,304],{"type":173,"tag":245,"props":300,"children":301},{"style":252},[302],{"type":179,"value":303},"    \u003C",{"type":173,"tag":245,"props":305,"children":306},{"style":258},[307],{"type":179,"value":308},"AccordionItem\n",{"type":173,"tag":245,"props":310,"children":312},{"class":247,"line":311},5,[313,319,324,330,336],{"type":173,"tag":245,"props":314,"children":316},{"style":315},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[317],{"type":179,"value":318},"      class",{"type":173,"tag":245,"props":320,"children":321},{"style":252},[322],{"type":179,"value":323},"=",{"type":173,"tag":245,"props":325,"children":327},{"style":326},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[328],{"type":179,"value":329},"\"",{"type":173,"tag":245,"props":331,"children":333},{"style":332},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[334],{"type":179,"value":335},"data-[state=open]:border-b-2 data-[state=open]:border-gray-800",{"type":173,"tag":245,"props":337,"children":338},{"style":326},[339],{"type":179,"value":340},"\"\n",{"type":173,"tag":245,"props":342,"children":344},{"class":247,"line":343},6,[345,350,354,358,363],{"type":173,"tag":245,"props":346,"children":347},{"style":315},[348],{"type":179,"value":349},"      value",{"type":173,"tag":245,"props":351,"children":352},{"style":252},[353],{"type":179,"value":323},{"type":173,"tag":245,"props":355,"children":356},{"style":326},[357],{"type":179,"value":329},{"type":173,"tag":245,"props":359,"children":360},{"style":332},[361],{"type":179,"value":362},"item-1",{"type":173,"tag":245,"props":364,"children":365},{"style":326},[366],{"type":179,"value":340},{"type":173,"tag":245,"props":368,"children":370},{"class":247,"line":369},7,[371],{"type":173,"tag":245,"props":372,"children":373},{"style":252},[374],{"type":179,"value":375},"    />\n",{"type":173,"tag":245,"props":377,"children":379},{"class":247,"line":378},8,[380,385,389],{"type":173,"tag":245,"props":381,"children":382},{"style":252},[383],{"type":179,"value":384},"  \u003C/",{"type":173,"tag":245,"props":386,"children":387},{"style":258},[388],{"type":179,"value":280},{"type":173,"tag":245,"props":390,"children":391},{"style":252},[392],{"type":179,"value":266},{"type":173,"tag":245,"props":394,"children":396},{"class":247,"line":395},9,[397,402,406],{"type":173,"tag":245,"props":398,"children":399},{"style":252},[400],{"type":179,"value":401},"\u003C/",{"type":173,"tag":245,"props":403,"children":404},{"style":258},[405],{"type":179,"value":261},{"type":173,"tag":245,"props":407,"children":408},{"style":252},[409],{"type":179,"value":266},{"type":173,"tag":245,"props":411,"children":413},{"class":247,"line":412},10,[414,418,423],{"type":173,"tag":245,"props":415,"children":416},{"style":252},[417],{"type":179,"value":255},{"type":173,"tag":245,"props":419,"children":420},{"style":258},[421],{"type":179,"value":422},"style",{"type":173,"tag":245,"props":424,"children":425},{"style":252},[426],{"type":179,"value":266},{"type":173,"tag":245,"props":428,"children":430},{"class":247,"line":429},11,[431],{"type":173,"tag":245,"props":432,"children":433},{"style":291},[434],{"type":179,"value":435},"  /* 或者使用 CSS 定义样式 */\n",{"type":173,"tag":245,"props":437,"children":439},{"class":247,"line":438},12,[440,446,452,457,462,467,471,476,480,485],{"type":173,"tag":245,"props":441,"children":443},{"style":442},"--shiki-light:#39ADB5;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[444],{"type":179,"value":445},"  .",{"type":173,"tag":245,"props":447,"children":449},{"style":448},"--shiki-light:#E2931D;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[450],{"type":179,"value":451},"AccordionItem",{"type":173,"tag":245,"props":453,"children":454},{"style":252},[455],{"type":179,"value":456},"[",{"type":173,"tag":245,"props":458,"children":459},{"style":315},[460],{"type":179,"value":461},"data-state",{"type":173,"tag":245,"props":463,"children":465},{"style":464},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[466],{"type":179,"value":323},{"type":173,"tag":245,"props":468,"children":469},{"style":326},[470],{"type":179,"value":329},{"type":173,"tag":245,"props":472,"children":473},{"style":332},[474],{"type":179,"value":475},"open",{"type":173,"tag":245,"props":477,"children":478},{"style":326},[479],{"type":179,"value":329},{"type":173,"tag":245,"props":481,"children":482},{"style":252},[483],{"type":179,"value":484},"]",{"type":173,"tag":245,"props":486,"children":487},{"style":252},[488],{"type":179,"value":489}," {\n",{"type":173,"tag":245,"props":491,"children":493},{"class":247,"line":492},13,[494,500,505,511,517],{"type":173,"tag":245,"props":495,"children":497},{"style":496},"--shiki-light:#8796B0;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[498],{"type":179,"value":499},"    border-bottom-width",{"type":173,"tag":245,"props":501,"children":502},{"style":252},[503],{"type":179,"value":504},":",{"type":173,"tag":245,"props":506,"children":508},{"style":507},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[509],{"type":179,"value":510}," 2",{"type":173,"tag":245,"props":512,"children":514},{"style":513},"--shiki-light:#F76D47;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[515],{"type":179,"value":516},"px",{"type":173,"tag":245,"props":518,"children":519},{"style":252},[520],{"type":179,"value":521},";\n",{"type":173,"tag":245,"props":523,"children":525},{"class":247,"line":524},14,[526],{"type":173,"tag":245,"props":527,"children":528},{"style":252},[529],{"type":179,"value":530},"  }\n",{"type":173,"tag":245,"props":532,"children":534},{"class":247,"line":533},15,[535,539,543],{"type":173,"tag":245,"props":536,"children":537},{"style":252},[538],{"type":179,"value":401},{"type":173,"tag":245,"props":540,"children":541},{"style":258},[542],{"type":179,"value":422},{"type":173,"tag":245,"props":544,"children":545},{"style":252},[546],{"type":179,"value":266},{"type":173,"tag":181,"props":548,"children":549},{},[550],{"type":179,"value":551},"一般企业自己封装 UI 库会基于带设计规范的组件库，比如 Ant Design、Element UI 等。二次封装经常会碰到样式冲突问题。所以 Reka 适合作为某种基础库去使用，就像 Nuxt UI v3 是基于其二次封装。按照 Reka 文档自己的说法：“These components are low-level enough to give you control over how you want to wrap them.”",{"type":173,"tag":181,"props":553,"children":554},{},[555],{"type":179,"value":556},"另一点样式方面有关开发体验的是动画，它特殊优化了这种 CSS 写法：",{"type":173,"tag":235,"props":558,"children":562},{"className":559,"code":560,"language":561,"meta":166,"style":166},"language-css shiki shiki-themes material-theme-lighter github-light github-dark monokai",".DialogOverlay[data-state=\"closed\"],\n.DialogContent[data-state=\"closed\"] {\n  animation: fadeOut 300ms ease-in;\n}\n","css",[563],{"type":173,"tag":226,"props":564,"children":565},{"__ignoreMap":166},[566,609,653,691],{"type":173,"tag":245,"props":567,"children":568},{"class":247,"line":248},[569,574,579,583,587,591,595,600,604],{"type":173,"tag":245,"props":570,"children":571},{"style":442},[572],{"type":179,"value":573},".",{"type":173,"tag":245,"props":575,"children":576},{"style":448},[577],{"type":179,"value":578},"DialogOverlay",{"type":173,"tag":245,"props":580,"children":581},{"style":252},[582],{"type":179,"value":456},{"type":173,"tag":245,"props":584,"children":585},{"style":315},[586],{"type":179,"value":461},{"type":173,"tag":245,"props":588,"children":589},{"style":464},[590],{"type":179,"value":323},{"type":173,"tag":245,"props":592,"children":593},{"style":326},[594],{"type":179,"value":329},{"type":173,"tag":245,"props":596,"children":597},{"style":332},[598],{"type":179,"value":599},"closed",{"type":173,"tag":245,"props":601,"children":602},{"style":326},[603],{"type":179,"value":329},{"type":173,"tag":245,"props":605,"children":606},{"style":252},[607],{"type":179,"value":608},"],\n",{"type":173,"tag":245,"props":610,"children":611},{"class":247,"line":269},[612,616,621,625,629,633,637,641,645,649],{"type":173,"tag":245,"props":613,"children":614},{"style":442},[615],{"type":179,"value":573},{"type":173,"tag":245,"props":617,"children":618},{"style":448},[619],{"type":179,"value":620},"DialogContent",{"type":173,"tag":245,"props":622,"children":623},{"style":252},[624],{"type":179,"value":456},{"type":173,"tag":245,"props":626,"children":627},{"style":315},[628],{"type":179,"value":461},{"type":173,"tag":245,"props":630,"children":631},{"style":464},[632],{"type":179,"value":323},{"type":173,"tag":245,"props":634,"children":635},{"style":326},[636],{"type":179,"value":329},{"type":173,"tag":245,"props":638,"children":639},{"style":332},[640],{"type":179,"value":599},{"type":173,"tag":245,"props":642,"children":643},{"style":326},[644],{"type":179,"value":329},{"type":173,"tag":245,"props":646,"children":647},{"style":252},[648],{"type":179,"value":484},{"type":173,"tag":245,"props":650,"children":651},{"style":252},[652],{"type":179,"value":489},{"type":173,"tag":245,"props":654,"children":655},{"class":247,"line":287},[656,661,665,671,676,681,687],{"type":173,"tag":245,"props":657,"children":658},{"style":496},[659],{"type":179,"value":660},"  animation",{"type":173,"tag":245,"props":662,"children":663},{"style":252},[664],{"type":179,"value":504},{"type":173,"tag":245,"props":666,"children":668},{"style":667},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[669],{"type":179,"value":670}," fadeOut ",{"type":173,"tag":245,"props":672,"children":673},{"style":507},[674],{"type":179,"value":675},"300",{"type":173,"tag":245,"props":677,"children":678},{"style":513},[679],{"type":179,"value":680},"ms",{"type":173,"tag":245,"props":682,"children":684},{"style":683},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF",[685],{"type":179,"value":686}," ease-in",{"type":173,"tag":245,"props":688,"children":689},{"style":252},[690],{"type":179,"value":521},{"type":173,"tag":245,"props":692,"children":693},{"class":247,"line":297},[694],{"type":173,"tag":245,"props":695,"children":696},{"style":252},[697],{"type":179,"value":698},"}\n",{"type":173,"tag":181,"props":700,"children":701},{},[702],{"type":179,"value":703},"刚才说某些组件的内部状态会绑定到 dataset 上，那么弹窗组件如果关闭就意味着取消 DOM 挂载，为何还能通过 dataset 控制动画呢？这是因为 Reka 不直接通过 v-if 来控制组件挂载，而是用一个高阶组件，内部使用了一个状态机，结合节点的创建销毁、动画开始结束等事件来控制实际的组件挂载。这样就可以做到等相关节点动画或缓动效果结束后再销毁节点。",{"type":173,"tag":181,"props":705,"children":706},{},[707],{"type":179,"value":708},"文档还推荐使用 Vue Transition 或 Motion Vue 库来做动画。我在一些项目习惯使用 @vueuse/motion，但 Reka 和这些库相性不合，因为使用这些动画库要先把 Reka 组件转换成强制受控的组件，这样写起来非常麻烦。",{"type":173,"tag":235,"props":710,"children":712},{"className":237,"code":711,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CDialogPortal v-if=\"styles.opacity !== 0\">\n    \u003CDialogOverlay\n      force-mount\n      :style=\"{\n        opacity: styles.opacity,\n        transform: `scale(${styles.scale})`,\n      }\"\n    />\n  \u003C/DialogPortal>\n\u003C/template>\n",[713],{"type":173,"tag":226,"props":714,"children":715},{"__ignoreMap":166},[716,731,769,781,789,810,818,826,838,845,860],{"type":173,"tag":245,"props":717,"children":718},{"class":247,"line":248},[719,723,727],{"type":173,"tag":245,"props":720,"children":721},{"style":252},[722],{"type":179,"value":255},{"type":173,"tag":245,"props":724,"children":725},{"style":258},[726],{"type":179,"value":261},{"type":173,"tag":245,"props":728,"children":729},{"style":252},[730],{"type":179,"value":266},{"type":173,"tag":245,"props":732,"children":733},{"class":247,"line":269},[734,738,743,748,752,756,761,765],{"type":173,"tag":245,"props":735,"children":736},{"style":252},[737],{"type":179,"value":275},{"type":173,"tag":245,"props":739,"children":740},{"style":258},[741],{"type":179,"value":742},"DialogPortal",{"type":173,"tag":245,"props":744,"children":745},{"style":315},[746],{"type":179,"value":747}," v-if",{"type":173,"tag":245,"props":749,"children":750},{"style":252},[751],{"type":179,"value":323},{"type":173,"tag":245,"props":753,"children":754},{"style":326},[755],{"type":179,"value":329},{"type":173,"tag":245,"props":757,"children":758},{"style":332},[759],{"type":179,"value":760},"styles.opacity !== 0",{"type":173,"tag":245,"props":762,"children":763},{"style":326},[764],{"type":179,"value":329},{"type":173,"tag":245,"props":766,"children":767},{"style":252},[768],{"type":179,"value":266},{"type":173,"tag":245,"props":770,"children":771},{"class":247,"line":287},[772,776],{"type":173,"tag":245,"props":773,"children":774},{"style":252},[775],{"type":179,"value":303},{"type":173,"tag":245,"props":777,"children":778},{"style":258},[779],{"type":179,"value":780},"DialogOverlay\n",{"type":173,"tag":245,"props":782,"children":783},{"class":247,"line":297},[784],{"type":173,"tag":245,"props":785,"children":786},{"style":315},[787],{"type":179,"value":788},"      force-mount\n",{"type":173,"tag":245,"props":790,"children":791},{"class":247,"line":311},[792,797,801,805],{"type":173,"tag":245,"props":793,"children":794},{"style":315},[795],{"type":179,"value":796},"      :style",{"type":173,"tag":245,"props":798,"children":799},{"style":252},[800],{"type":179,"value":323},{"type":173,"tag":245,"props":802,"children":803},{"style":326},[804],{"type":179,"value":329},{"type":173,"tag":245,"props":806,"children":807},{"style":332},[808],{"type":179,"value":809},"{\n",{"type":173,"tag":245,"props":811,"children":812},{"class":247,"line":343},[813],{"type":173,"tag":245,"props":814,"children":815},{"style":332},[816],{"type":179,"value":817},"        opacity: styles.opacity,\n",{"type":173,"tag":245,"props":819,"children":820},{"class":247,"line":369},[821],{"type":173,"tag":245,"props":822,"children":823},{"style":332},[824],{"type":179,"value":825},"        transform: `scale(${styles.scale})`,\n",{"type":173,"tag":245,"props":827,"children":828},{"class":247,"line":378},[829,834],{"type":173,"tag":245,"props":830,"children":831},{"style":332},[832],{"type":179,"value":833},"      }",{"type":173,"tag":245,"props":835,"children":836},{"style":326},[837],{"type":179,"value":340},{"type":173,"tag":245,"props":839,"children":840},{"class":247,"line":395},[841],{"type":173,"tag":245,"props":842,"children":843},{"style":252},[844],{"type":179,"value":375},{"type":173,"tag":245,"props":846,"children":847},{"class":247,"line":412},[848,852,856],{"type":173,"tag":245,"props":849,"children":850},{"style":252},[851],{"type":179,"value":384},{"type":173,"tag":245,"props":853,"children":854},{"style":258},[855],{"type":179,"value":742},{"type":173,"tag":245,"props":857,"children":858},{"style":252},[859],{"type":179,"value":266},{"type":173,"tag":245,"props":861,"children":862},{"class":247,"line":429},[863,867,871],{"type":173,"tag":245,"props":864,"children":865},{"style":252},[866],{"type":179,"value":401},{"type":173,"tag":245,"props":868,"children":869},{"style":258},[870],{"type":179,"value":261},{"type":173,"tag":245,"props":872,"children":873},{"style":252},[874],{"type":179,"value":266},{"type":173,"tag":181,"props":876,"children":877},{},[878],{"type":179,"value":879},"Reka 的组件叫做 Primitive，也许可以翻译成原子组件。这类组件封装模式可能是伴随 Headless 潮流而来的，他们希望通过组件组合的方式来构建上层 UI。不过在 View 层因为组件和 DOM 不是一一对应的关系，所以会碰到一个 DOM 节点用作两个原子组件的情况，比如一个 ElButton，即作为弹窗的触发，又作为 Tooltip 的触发。这样嵌套下来，会出现三层 div：tooltip-trigger-item > dialog-trigger-item > el-button。",{"type":173,"tag":181,"props":881,"children":882},{},[883],{"type":179,"value":884},"Reka 继承了来自 Radix 的 asChild 模式以解决此类问题。给组件传递一个 asChild 属性，就能将其“隐形化”，去 DOM 结构的同时保留了样式、事件等。见下代码，可以把 TooltipTrigger 和 DialogTrigger 看做 Vue 中的 Template，而 ElButton 同时作为 Dialog 和 Tooltip 的直接子组件。在特定场景的开发体验确实不错。",{"type":173,"tag":235,"props":886,"children":888},{"className":237,"code":887,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CDialogRoot>\n    \u003CTooltipRoot>\n      \u003CTooltipTrigger asChild>\n        \u003CDialogTrigger asChild>\n          \u003CElButton>Open\u003C/ElButton>\n        \u003C/DialogTrigger>\n      \u003C/TooltipTrigger>\n      Tip：Click the button to open dialog.\n    \u003C/TooltipRoot>\n    Your Dialog Content\n  \u003C/DialogRoot>\n\u003C/template>\n",[889],{"type":173,"tag":226,"props":890,"children":891},{"__ignoreMap":166},[892,907,923,939,961,982,1017,1033,1049,1057,1073,1081,1096],{"type":173,"tag":245,"props":893,"children":894},{"class":247,"line":248},[895,899,903],{"type":173,"tag":245,"props":896,"children":897},{"style":252},[898],{"type":179,"value":255},{"type":173,"tag":245,"props":900,"children":901},{"style":258},[902],{"type":179,"value":261},{"type":173,"tag":245,"props":904,"children":905},{"style":252},[906],{"type":179,"value":266},{"type":173,"tag":245,"props":908,"children":909},{"class":247,"line":269},[910,914,919],{"type":173,"tag":245,"props":911,"children":912},{"style":252},[913],{"type":179,"value":275},{"type":173,"tag":245,"props":915,"children":916},{"style":258},[917],{"type":179,"value":918},"DialogRoot",{"type":173,"tag":245,"props":920,"children":921},{"style":252},[922],{"type":179,"value":266},{"type":173,"tag":245,"props":924,"children":925},{"class":247,"line":287},[926,930,935],{"type":173,"tag":245,"props":927,"children":928},{"style":252},[929],{"type":179,"value":303},{"type":173,"tag":245,"props":931,"children":932},{"style":258},[933],{"type":179,"value":934},"TooltipRoot",{"type":173,"tag":245,"props":936,"children":937},{"style":252},[938],{"type":179,"value":266},{"type":173,"tag":245,"props":940,"children":941},{"class":247,"line":297},[942,947,952,957],{"type":173,"tag":245,"props":943,"children":944},{"style":252},[945],{"type":179,"value":946},"      \u003C",{"type":173,"tag":245,"props":948,"children":949},{"style":258},[950],{"type":179,"value":951},"TooltipTrigger",{"type":173,"tag":245,"props":953,"children":954},{"style":315},[955],{"type":179,"value":956}," asChild",{"type":173,"tag":245,"props":958,"children":959},{"style":252},[960],{"type":179,"value":266},{"type":173,"tag":245,"props":962,"children":963},{"class":247,"line":311},[964,969,974,978],{"type":173,"tag":245,"props":965,"children":966},{"style":252},[967],{"type":179,"value":968},"        \u003C",{"type":173,"tag":245,"props":970,"children":971},{"style":258},[972],{"type":179,"value":973},"DialogTrigger",{"type":173,"tag":245,"props":975,"children":976},{"style":315},[977],{"type":179,"value":956},{"type":173,"tag":245,"props":979,"children":980},{"style":252},[981],{"type":179,"value":266},{"type":173,"tag":245,"props":983,"children":984},{"class":247,"line":343},[985,990,995,1000,1005,1009,1013],{"type":173,"tag":245,"props":986,"children":987},{"style":252},[988],{"type":179,"value":989},"          \u003C",{"type":173,"tag":245,"props":991,"children":992},{"style":258},[993],{"type":179,"value":994},"ElButton",{"type":173,"tag":245,"props":996,"children":997},{"style":252},[998],{"type":179,"value":999},">",{"type":173,"tag":245,"props":1001,"children":1002},{"style":667},[1003],{"type":179,"value":1004},"Open",{"type":173,"tag":245,"props":1006,"children":1007},{"style":252},[1008],{"type":179,"value":401},{"type":173,"tag":245,"props":1010,"children":1011},{"style":258},[1012],{"type":179,"value":994},{"type":173,"tag":245,"props":1014,"children":1015},{"style":252},[1016],{"type":179,"value":266},{"type":173,"tag":245,"props":1018,"children":1019},{"class":247,"line":369},[1020,1025,1029],{"type":173,"tag":245,"props":1021,"children":1022},{"style":252},[1023],{"type":179,"value":1024},"        \u003C/",{"type":173,"tag":245,"props":1026,"children":1027},{"style":258},[1028],{"type":179,"value":973},{"type":173,"tag":245,"props":1030,"children":1031},{"style":252},[1032],{"type":179,"value":266},{"type":173,"tag":245,"props":1034,"children":1035},{"class":247,"line":378},[1036,1041,1045],{"type":173,"tag":245,"props":1037,"children":1038},{"style":252},[1039],{"type":179,"value":1040},"      \u003C/",{"type":173,"tag":245,"props":1042,"children":1043},{"style":258},[1044],{"type":179,"value":951},{"type":173,"tag":245,"props":1046,"children":1047},{"style":252},[1048],{"type":179,"value":266},{"type":173,"tag":245,"props":1050,"children":1051},{"class":247,"line":395},[1052],{"type":173,"tag":245,"props":1053,"children":1054},{"style":667},[1055],{"type":179,"value":1056},"      Tip：Click the button to open dialog.\n",{"type":173,"tag":245,"props":1058,"children":1059},{"class":247,"line":412},[1060,1065,1069],{"type":173,"tag":245,"props":1061,"children":1062},{"style":252},[1063],{"type":179,"value":1064},"    \u003C/",{"type":173,"tag":245,"props":1066,"children":1067},{"style":258},[1068],{"type":179,"value":934},{"type":173,"tag":245,"props":1070,"children":1071},{"style":252},[1072],{"type":179,"value":266},{"type":173,"tag":245,"props":1074,"children":1075},{"class":247,"line":429},[1076],{"type":173,"tag":245,"props":1077,"children":1078},{"style":667},[1079],{"type":179,"value":1080},"    Your Dialog Content\n",{"type":173,"tag":245,"props":1082,"children":1083},{"class":247,"line":438},[1084,1088,1092],{"type":173,"tag":245,"props":1085,"children":1086},{"style":252},[1087],{"type":179,"value":384},{"type":173,"tag":245,"props":1089,"children":1090},{"style":258},[1091],{"type":179,"value":918},{"type":173,"tag":245,"props":1093,"children":1094},{"style":252},[1095],{"type":179,"value":266},{"type":173,"tag":245,"props":1097,"children":1098},{"class":247,"line":492},[1099,1103,1107],{"type":173,"tag":245,"props":1100,"children":1101},{"style":252},[1102],{"type":179,"value":401},{"type":173,"tag":245,"props":1104,"children":1105},{"style":258},[1106],{"type":179,"value":261},{"type":173,"tag":245,"props":1108,"children":1109},{"style":252},[1110],{"type":179,"value":266},{"type":173,"tag":181,"props":1112,"children":1113},{},[1114],{"type":179,"value":1115},"也许是因为受控非受控组件辩论来源于 React 的缘故，以至于 Radix UI 或其他基于 React 实现的组件库会碰到受控非受控问题困扰。而我在写 Vue 时没碰到过此类问题的骚扰。在基于 Vue 的组件库中，只要组件支持判断传入了 model-value 就可以按照受控的方式运行，而使用者在外部从 v-model、model-value 的区分使用，来控制组件是否受控很天然的：v-model 受控，model-value 非受控。",{"type":173,"tag":181,"props":1117,"children":1118},{},[1119],{"type":179,"value":1120},"进一步作说明，从语义上来说，非受控组件应该使用 default-value 而不是 model-value，因为外部传入 model-value 并不能作为其传或不传 update:model-value 的依据。Reka 的文档对这点有说明，只是文档写错了。实际写代码应当使用 default-value 来指示组件是非受控的。",{"type":173,"tag":181,"props":1122,"children":1123},{},[1124],{"type":173,"tag":190,"props":1125,"children":1127},{"alt":166,"src":1126},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503202109352.png",[],{"type":173,"tag":181,"props":1129,"children":1130},{},[1131],{"type":179,"value":1132},"另一个从 React 组件库继承过来的优化开发者体验特性是支持命名空间式组件调用。一看代码便知：",{"type":173,"tag":235,"props":1134,"children":1136},{"className":237,"code":1135,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CDialog.Root>\n    \u003CDialog.Trigger>\n      Button Content\n    \u003C/Dialog.Trigger>\n  \u003C/Dialog.Root>\n  \u003CDialog.Portal>\n    \u003CDialog.Overlay />\n    \u003CDialog.Content>\n      Your Dialog Content\n    \u003C/Dialog.Content>\n  \u003C/Dialog.Portal>\n\u003C/template>\n",[1137],{"type":173,"tag":226,"props":1138,"children":1139},{"__ignoreMap":166},[1140,1155,1171,1187,1195,1210,1225,1241,1258,1274,1282,1297,1312],{"type":173,"tag":245,"props":1141,"children":1142},{"class":247,"line":248},[1143,1147,1151],{"type":173,"tag":245,"props":1144,"children":1145},{"style":252},[1146],{"type":179,"value":255},{"type":173,"tag":245,"props":1148,"children":1149},{"style":258},[1150],{"type":179,"value":261},{"type":173,"tag":245,"props":1152,"children":1153},{"style":252},[1154],{"type":179,"value":266},{"type":173,"tag":245,"props":1156,"children":1157},{"class":247,"line":269},[1158,1162,1167],{"type":173,"tag":245,"props":1159,"children":1160},{"style":252},[1161],{"type":179,"value":275},{"type":173,"tag":245,"props":1163,"children":1164},{"style":258},[1165],{"type":179,"value":1166},"Dialog.Root",{"type":173,"tag":245,"props":1168,"children":1169},{"style":252},[1170],{"type":179,"value":266},{"type":173,"tag":245,"props":1172,"children":1173},{"class":247,"line":287},[1174,1178,1183],{"type":173,"tag":245,"props":1175,"children":1176},{"style":252},[1177],{"type":179,"value":303},{"type":173,"tag":245,"props":1179,"children":1180},{"style":258},[1181],{"type":179,"value":1182},"Dialog.Trigger",{"type":173,"tag":245,"props":1184,"children":1185},{"style":252},[1186],{"type":179,"value":266},{"type":173,"tag":245,"props":1188,"children":1189},{"class":247,"line":297},[1190],{"type":173,"tag":245,"props":1191,"children":1192},{"style":667},[1193],{"type":179,"value":1194},"      Button Content\n",{"type":173,"tag":245,"props":1196,"children":1197},{"class":247,"line":311},[1198,1202,1206],{"type":173,"tag":245,"props":1199,"children":1200},{"style":252},[1201],{"type":179,"value":1064},{"type":173,"tag":245,"props":1203,"children":1204},{"style":258},[1205],{"type":179,"value":1182},{"type":173,"tag":245,"props":1207,"children":1208},{"style":252},[1209],{"type":179,"value":266},{"type":173,"tag":245,"props":1211,"children":1212},{"class":247,"line":343},[1213,1217,1221],{"type":173,"tag":245,"props":1214,"children":1215},{"style":252},[1216],{"type":179,"value":384},{"type":173,"tag":245,"props":1218,"children":1219},{"style":258},[1220],{"type":179,"value":1166},{"type":173,"tag":245,"props":1222,"children":1223},{"style":252},[1224],{"type":179,"value":266},{"type":173,"tag":245,"props":1226,"children":1227},{"class":247,"line":369},[1228,1232,1237],{"type":173,"tag":245,"props":1229,"children":1230},{"style":252},[1231],{"type":179,"value":275},{"type":173,"tag":245,"props":1233,"children":1234},{"style":258},[1235],{"type":179,"value":1236},"Dialog.Portal",{"type":173,"tag":245,"props":1238,"children":1239},{"style":252},[1240],{"type":179,"value":266},{"type":173,"tag":245,"props":1242,"children":1243},{"class":247,"line":378},[1244,1248,1253],{"type":173,"tag":245,"props":1245,"children":1246},{"style":252},[1247],{"type":179,"value":303},{"type":173,"tag":245,"props":1249,"children":1250},{"style":258},[1251],{"type":179,"value":1252},"Dialog.Overlay",{"type":173,"tag":245,"props":1254,"children":1255},{"style":252},[1256],{"type":179,"value":1257}," />\n",{"type":173,"tag":245,"props":1259,"children":1260},{"class":247,"line":395},[1261,1265,1270],{"type":173,"tag":245,"props":1262,"children":1263},{"style":252},[1264],{"type":179,"value":303},{"type":173,"tag":245,"props":1266,"children":1267},{"style":258},[1268],{"type":179,"value":1269},"Dialog.Content",{"type":173,"tag":245,"props":1271,"children":1272},{"style":252},[1273],{"type":179,"value":266},{"type":173,"tag":245,"props":1275,"children":1276},{"class":247,"line":412},[1277],{"type":173,"tag":245,"props":1278,"children":1279},{"style":667},[1280],{"type":179,"value":1281},"      Your Dialog Content\n",{"type":173,"tag":245,"props":1283,"children":1284},{"class":247,"line":429},[1285,1289,1293],{"type":173,"tag":245,"props":1286,"children":1287},{"style":252},[1288],{"type":179,"value":1064},{"type":173,"tag":245,"props":1290,"children":1291},{"style":258},[1292],{"type":179,"value":1269},{"type":173,"tag":245,"props":1294,"children":1295},{"style":252},[1296],{"type":179,"value":266},{"type":173,"tag":245,"props":1298,"children":1299},{"class":247,"line":438},[1300,1304,1308],{"type":173,"tag":245,"props":1301,"children":1302},{"style":252},[1303],{"type":179,"value":384},{"type":173,"tag":245,"props":1305,"children":1306},{"style":258},[1307],{"type":179,"value":1236},{"type":173,"tag":245,"props":1309,"children":1310},{"style":252},[1311],{"type":179,"value":266},{"type":173,"tag":245,"props":1313,"children":1314},{"class":247,"line":492},[1315,1319,1323],{"type":173,"tag":245,"props":1316,"children":1317},{"style":252},[1318],{"type":179,"value":401},{"type":173,"tag":245,"props":1320,"children":1321},{"style":258},[1322],{"type":179,"value":261},{"type":173,"tag":245,"props":1324,"children":1325},{"style":252},[1326],{"type":179,"value":266},{"type":173,"tag":181,"props":1328,"children":1329},{},[1330],{"type":179,"value":1331},"其实现也很简单，就是新增了一个 namespaced 入口文件，导出关联的所有组件。导出是按相关性组织的，比如 Dialog 组件包含了 Root、Trigger、Content 等，Select 包含 Root、Group、Item 等，分组件导出有利于摇树优化。",{"type":173,"tag":235,"props":1333,"children":1337},{"className":1334,"code":1335,"language":1336,"meta":166,"style":166},"language-ts shiki shiki-themes material-theme-lighter github-light github-dark monokai","export const Dialog = {\n  Root: DialogRoot,\n  Trigger: DialogTrigger,\n  Portal: DialogPortal,\n  Content: DialogContent,\n} as {\n  Root: typeof DialogRoot\n  Trigger: typeof DialogTrigger\n  Portal: typeof DialogPortal\n  Content: typeof DialogContent\n}\n","ts",[1338],{"type":173,"tag":226,"props":1339,"children":1340},{"__ignoreMap":166},[1341,1371,1394,1415,1436,1457,1474,1496,1516,1536,1556],{"type":173,"tag":245,"props":1342,"children":1343},{"class":247,"line":248},[1344,1350,1356,1362,1367],{"type":173,"tag":245,"props":1345,"children":1347},{"style":1346},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1348],{"type":179,"value":1349},"export",{"type":173,"tag":245,"props":1351,"children":1353},{"style":1352},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1354],{"type":179,"value":1355}," const",{"type":173,"tag":245,"props":1357,"children":1359},{"style":1358},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1360],{"type":179,"value":1361}," Dialog",{"type":173,"tag":245,"props":1363,"children":1364},{"style":464},[1365],{"type":179,"value":1366}," =",{"type":173,"tag":245,"props":1368,"children":1369},{"style":252},[1370],{"type":179,"value":489},{"type":173,"tag":245,"props":1372,"children":1373},{"class":247,"line":269},[1374,1380,1384,1389],{"type":173,"tag":245,"props":1375,"children":1377},{"style":1376},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1378],{"type":179,"value":1379},"  Root",{"type":173,"tag":245,"props":1381,"children":1382},{"style":252},[1383],{"type":179,"value":504},{"type":173,"tag":245,"props":1385,"children":1386},{"style":667},[1387],{"type":179,"value":1388}," DialogRoot",{"type":173,"tag":245,"props":1390,"children":1391},{"style":252},[1392],{"type":179,"value":1393},",\n",{"type":173,"tag":245,"props":1395,"children":1396},{"class":247,"line":287},[1397,1402,1406,1411],{"type":173,"tag":245,"props":1398,"children":1399},{"style":1376},[1400],{"type":179,"value":1401},"  Trigger",{"type":173,"tag":245,"props":1403,"children":1404},{"style":252},[1405],{"type":179,"value":504},{"type":173,"tag":245,"props":1407,"children":1408},{"style":667},[1409],{"type":179,"value":1410}," DialogTrigger",{"type":173,"tag":245,"props":1412,"children":1413},{"style":252},[1414],{"type":179,"value":1393},{"type":173,"tag":245,"props":1416,"children":1417},{"class":247,"line":297},[1418,1423,1427,1432],{"type":173,"tag":245,"props":1419,"children":1420},{"style":1376},[1421],{"type":179,"value":1422},"  Portal",{"type":173,"tag":245,"props":1424,"children":1425},{"style":252},[1426],{"type":179,"value":504},{"type":173,"tag":245,"props":1428,"children":1429},{"style":667},[1430],{"type":179,"value":1431}," DialogPortal",{"type":173,"tag":245,"props":1433,"children":1434},{"style":252},[1435],{"type":179,"value":1393},{"type":173,"tag":245,"props":1437,"children":1438},{"class":247,"line":311},[1439,1444,1448,1453],{"type":173,"tag":245,"props":1440,"children":1441},{"style":1376},[1442],{"type":179,"value":1443},"  Content",{"type":173,"tag":245,"props":1445,"children":1446},{"style":252},[1447],{"type":179,"value":504},{"type":173,"tag":245,"props":1449,"children":1450},{"style":667},[1451],{"type":179,"value":1452}," DialogContent",{"type":173,"tag":245,"props":1454,"children":1455},{"style":252},[1456],{"type":179,"value":1393},{"type":173,"tag":245,"props":1458,"children":1459},{"class":247,"line":343},[1460,1465,1470],{"type":173,"tag":245,"props":1461,"children":1462},{"style":252},[1463],{"type":179,"value":1464},"}",{"type":173,"tag":245,"props":1466,"children":1467},{"style":1346},[1468],{"type":179,"value":1469}," as",{"type":173,"tag":245,"props":1471,"children":1472},{"style":252},[1473],{"type":179,"value":489},{"type":173,"tag":245,"props":1475,"children":1476},{"class":247,"line":369},[1477,1482,1486,1491],{"type":173,"tag":245,"props":1478,"children":1480},{"style":1479},"--shiki-light:#E53935;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2",[1481],{"type":179,"value":1379},{"type":173,"tag":245,"props":1483,"children":1484},{"style":464},[1485],{"type":179,"value":504},{"type":173,"tag":245,"props":1487,"children":1488},{"style":464},[1489],{"type":179,"value":1490}," typeof",{"type":173,"tag":245,"props":1492,"children":1493},{"style":667},[1494],{"type":179,"value":1495}," DialogRoot\n",{"type":173,"tag":245,"props":1497,"children":1498},{"class":247,"line":378},[1499,1503,1507,1511],{"type":173,"tag":245,"props":1500,"children":1501},{"style":1479},[1502],{"type":179,"value":1401},{"type":173,"tag":245,"props":1504,"children":1505},{"style":464},[1506],{"type":179,"value":504},{"type":173,"tag":245,"props":1508,"children":1509},{"style":464},[1510],{"type":179,"value":1490},{"type":173,"tag":245,"props":1512,"children":1513},{"style":667},[1514],{"type":179,"value":1515}," DialogTrigger\n",{"type":173,"tag":245,"props":1517,"children":1518},{"class":247,"line":395},[1519,1523,1527,1531],{"type":173,"tag":245,"props":1520,"children":1521},{"style":1479},[1522],{"type":179,"value":1422},{"type":173,"tag":245,"props":1524,"children":1525},{"style":464},[1526],{"type":179,"value":504},{"type":173,"tag":245,"props":1528,"children":1529},{"style":464},[1530],{"type":179,"value":1490},{"type":173,"tag":245,"props":1532,"children":1533},{"style":667},[1534],{"type":179,"value":1535}," DialogPortal\n",{"type":173,"tag":245,"props":1537,"children":1538},{"class":247,"line":412},[1539,1543,1547,1551],{"type":173,"tag":245,"props":1540,"children":1541},{"style":1479},[1542],{"type":179,"value":1443},{"type":173,"tag":245,"props":1544,"children":1545},{"style":464},[1546],{"type":179,"value":504},{"type":173,"tag":245,"props":1548,"children":1549},{"style":464},[1550],{"type":179,"value":1490},{"type":173,"tag":245,"props":1552,"children":1553},{"style":667},[1554],{"type":179,"value":1555}," DialogContent\n",{"type":173,"tag":245,"props":1557,"children":1558},{"class":247,"line":429},[1559],{"type":173,"tag":245,"props":1560,"children":1561},{"style":252},[1562],{"type":179,"value":698},{"type":173,"tag":181,"props":1564,"children":1565},{},[1566],{"type":179,"value":1567},"使用时，你也需要从这个 namespace 入口导入组件。",{"type":173,"tag":235,"props":1569,"children":1571},{"className":237,"code":1570,"language":239,"meta":166,"style":166},"\u003Cscript setup lang=\"ts\">\nimport { Dialog } from 'reka-ui/namespaced'\n\u003C/script>\n",[1572],{"type":173,"tag":226,"props":1573,"children":1574},{"__ignoreMap":166},[1575,1617,1659],{"type":173,"tag":245,"props":1576,"children":1577},{"class":247,"line":248},[1578,1582,1587,1592,1597,1601,1605,1609,1613],{"type":173,"tag":245,"props":1579,"children":1580},{"style":252},[1581],{"type":179,"value":255},{"type":173,"tag":245,"props":1583,"children":1584},{"style":258},[1585],{"type":179,"value":1586},"script",{"type":173,"tag":245,"props":1588,"children":1589},{"style":315},[1590],{"type":179,"value":1591}," setup",{"type":173,"tag":245,"props":1593,"children":1594},{"style":315},[1595],{"type":179,"value":1596}," lang",{"type":173,"tag":245,"props":1598,"children":1599},{"style":252},[1600],{"type":179,"value":323},{"type":173,"tag":245,"props":1602,"children":1603},{"style":326},[1604],{"type":179,"value":329},{"type":173,"tag":245,"props":1606,"children":1607},{"style":332},[1608],{"type":179,"value":1336},{"type":173,"tag":245,"props":1610,"children":1611},{"style":326},[1612],{"type":179,"value":329},{"type":173,"tag":245,"props":1614,"children":1615},{"style":252},[1616],{"type":179,"value":266},{"type":173,"tag":245,"props":1618,"children":1619},{"class":247,"line":269},[1620,1625,1630,1634,1639,1644,1649,1654],{"type":173,"tag":245,"props":1621,"children":1622},{"style":1346},[1623],{"type":179,"value":1624},"import",{"type":173,"tag":245,"props":1626,"children":1627},{"style":252},[1628],{"type":179,"value":1629}," {",{"type":173,"tag":245,"props":1631,"children":1632},{"style":667},[1633],{"type":179,"value":1361},{"type":173,"tag":245,"props":1635,"children":1636},{"style":252},[1637],{"type":179,"value":1638}," }",{"type":173,"tag":245,"props":1640,"children":1641},{"style":1346},[1642],{"type":179,"value":1643}," from",{"type":173,"tag":245,"props":1645,"children":1646},{"style":326},[1647],{"type":179,"value":1648}," '",{"type":173,"tag":245,"props":1650,"children":1651},{"style":332},[1652],{"type":179,"value":1653},"reka-ui/namespaced",{"type":173,"tag":245,"props":1655,"children":1656},{"style":326},[1657],{"type":179,"value":1658},"'\n",{"type":173,"tag":245,"props":1660,"children":1661},{"class":247,"line":287},[1662,1666,1670],{"type":173,"tag":245,"props":1663,"children":1664},{"style":252},[1665],{"type":179,"value":401},{"type":173,"tag":245,"props":1667,"children":1668},{"style":258},[1669],{"type":179,"value":1586},{"type":173,"tag":245,"props":1671,"children":1672},{"style":252},[1673],{"type":179,"value":266},{"type":173,"tag":181,"props":1675,"children":1676},{},[1677],{"type":179,"value":1678},"那 Reka 从 Vue 中借鉴了哪些模式呢？一个显著的特性就是借助 Vue Inject 实现的 injectContext 功能，允许把组件的状态和方法作为一个整体，注入到子组件，达到共享的目的。举个例子，当你想替换 Dialog 中 DialogOverlay 的实现，就可以通过 injectDialogContext 来获取 DialogRoot 的状态和方法，这样可以自由的在子组件控制 Dialog 开关、拦截回调、获取组件元数据等。",{"type":173,"tag":235,"props":1680,"children":1682},{"className":1334,"code":1681,"language":1336,"meta":166,"style":166},"const DialogRootContext = provideDialogRootContext({\n  open,\n  modal,\n  openModal: () => {\n    open.value = true\n  },\n  onOpenChange: (value) => {\n    open.value = value\n  },\n  onOpenToggle: () => {\n    open.value = !open.value\n  },\n  contentId: '',\n  titleId: '',\n  descriptionId: '',\n  triggerElement,\n  contentElement,\n})\n",[1683],{"type":173,"tag":226,"props":1684,"children":1685},{"__ignoreMap":166},[1686,1718,1730,1742,1768,1795,1803,1838,1862,1869,1893,1930,1937,1958,1978,1998,2011,2024],{"type":173,"tag":245,"props":1687,"children":1688},{"class":247,"line":248},[1689,1694,1699,1703,1709,1714],{"type":173,"tag":245,"props":1690,"children":1691},{"style":1352},[1692],{"type":179,"value":1693},"const",{"type":173,"tag":245,"props":1695,"children":1696},{"style":1358},[1697],{"type":179,"value":1698}," DialogRootContext",{"type":173,"tag":245,"props":1700,"children":1701},{"style":464},[1702],{"type":179,"value":1366},{"type":173,"tag":245,"props":1704,"children":1706},{"style":1705},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1707],{"type":179,"value":1708}," provideDialogRootContext",{"type":173,"tag":245,"props":1710,"children":1711},{"style":667},[1712],{"type":179,"value":1713},"(",{"type":173,"tag":245,"props":1715,"children":1716},{"style":252},[1717],{"type":179,"value":809},{"type":173,"tag":245,"props":1719,"children":1720},{"class":247,"line":269},[1721,1726],{"type":173,"tag":245,"props":1722,"children":1723},{"style":667},[1724],{"type":179,"value":1725},"  open",{"type":173,"tag":245,"props":1727,"children":1728},{"style":252},[1729],{"type":179,"value":1393},{"type":173,"tag":245,"props":1731,"children":1732},{"class":247,"line":287},[1733,1738],{"type":173,"tag":245,"props":1734,"children":1735},{"style":667},[1736],{"type":179,"value":1737},"  modal",{"type":173,"tag":245,"props":1739,"children":1740},{"style":252},[1741],{"type":179,"value":1393},{"type":173,"tag":245,"props":1743,"children":1744},{"class":247,"line":297},[1745,1750,1754,1759,1764],{"type":173,"tag":245,"props":1746,"children":1747},{"style":1705},[1748],{"type":179,"value":1749},"  openModal",{"type":173,"tag":245,"props":1751,"children":1752},{"style":252},[1753],{"type":179,"value":504},{"type":173,"tag":245,"props":1755,"children":1756},{"style":252},[1757],{"type":179,"value":1758}," ()",{"type":173,"tag":245,"props":1760,"children":1761},{"style":1352},[1762],{"type":179,"value":1763}," =>",{"type":173,"tag":245,"props":1765,"children":1766},{"style":252},[1767],{"type":179,"value":489},{"type":173,"tag":245,"props":1769,"children":1770},{"class":247,"line":311},[1771,1776,1780,1785,1789],{"type":173,"tag":245,"props":1772,"children":1773},{"style":667},[1774],{"type":179,"value":1775},"    open",{"type":173,"tag":245,"props":1777,"children":1778},{"style":252},[1779],{"type":179,"value":573},{"type":173,"tag":245,"props":1781,"children":1782},{"style":667},[1783],{"type":179,"value":1784},"value",{"type":173,"tag":245,"props":1786,"children":1787},{"style":464},[1788],{"type":179,"value":1366},{"type":173,"tag":245,"props":1790,"children":1792},{"style":1791},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1793],{"type":179,"value":1794}," true\n",{"type":173,"tag":245,"props":1796,"children":1797},{"class":247,"line":343},[1798],{"type":173,"tag":245,"props":1799,"children":1800},{"style":252},[1801],{"type":179,"value":1802},"  },\n",{"type":173,"tag":245,"props":1804,"children":1805},{"class":247,"line":369},[1806,1811,1815,1820,1825,1830,1834],{"type":173,"tag":245,"props":1807,"children":1808},{"style":1705},[1809],{"type":179,"value":1810},"  onOpenChange",{"type":173,"tag":245,"props":1812,"children":1813},{"style":252},[1814],{"type":179,"value":504},{"type":173,"tag":245,"props":1816,"children":1817},{"style":252},[1818],{"type":179,"value":1819}," (",{"type":173,"tag":245,"props":1821,"children":1823},{"style":1822},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1824],{"type":179,"value":1784},{"type":173,"tag":245,"props":1826,"children":1827},{"style":252},[1828],{"type":179,"value":1829},")",{"type":173,"tag":245,"props":1831,"children":1832},{"style":1352},[1833],{"type":179,"value":1763},{"type":173,"tag":245,"props":1835,"children":1836},{"style":252},[1837],{"type":179,"value":489},{"type":173,"tag":245,"props":1839,"children":1840},{"class":247,"line":378},[1841,1845,1849,1853,1857],{"type":173,"tag":245,"props":1842,"children":1843},{"style":667},[1844],{"type":179,"value":1775},{"type":173,"tag":245,"props":1846,"children":1847},{"style":252},[1848],{"type":179,"value":573},{"type":173,"tag":245,"props":1850,"children":1851},{"style":667},[1852],{"type":179,"value":1784},{"type":173,"tag":245,"props":1854,"children":1855},{"style":464},[1856],{"type":179,"value":1366},{"type":173,"tag":245,"props":1858,"children":1859},{"style":667},[1860],{"type":179,"value":1861}," value\n",{"type":173,"tag":245,"props":1863,"children":1864},{"class":247,"line":395},[1865],{"type":173,"tag":245,"props":1866,"children":1867},{"style":252},[1868],{"type":179,"value":1802},{"type":173,"tag":245,"props":1870,"children":1871},{"class":247,"line":412},[1872,1877,1881,1885,1889],{"type":173,"tag":245,"props":1873,"children":1874},{"style":1705},[1875],{"type":179,"value":1876},"  onOpenToggle",{"type":173,"tag":245,"props":1878,"children":1879},{"style":252},[1880],{"type":179,"value":504},{"type":173,"tag":245,"props":1882,"children":1883},{"style":252},[1884],{"type":179,"value":1758},{"type":173,"tag":245,"props":1886,"children":1887},{"style":1352},[1888],{"type":179,"value":1763},{"type":173,"tag":245,"props":1890,"children":1891},{"style":252},[1892],{"type":179,"value":489},{"type":173,"tag":245,"props":1894,"children":1895},{"class":247,"line":429},[1896,1900,1904,1908,1912,1917,1921,1925],{"type":173,"tag":245,"props":1897,"children":1898},{"style":667},[1899],{"type":179,"value":1775},{"type":173,"tag":245,"props":1901,"children":1902},{"style":252},[1903],{"type":179,"value":573},{"type":173,"tag":245,"props":1905,"children":1906},{"style":667},[1907],{"type":179,"value":1784},{"type":173,"tag":245,"props":1909,"children":1910},{"style":464},[1911],{"type":179,"value":1366},{"type":173,"tag":245,"props":1913,"children":1914},{"style":464},[1915],{"type":179,"value":1916}," !",{"type":173,"tag":245,"props":1918,"children":1919},{"style":667},[1920],{"type":179,"value":475},{"type":173,"tag":245,"props":1922,"children":1923},{"style":252},[1924],{"type":179,"value":573},{"type":173,"tag":245,"props":1926,"children":1927},{"style":667},[1928],{"type":179,"value":1929},"value\n",{"type":173,"tag":245,"props":1931,"children":1932},{"class":247,"line":438},[1933],{"type":173,"tag":245,"props":1934,"children":1935},{"style":252},[1936],{"type":179,"value":1802},{"type":173,"tag":245,"props":1938,"children":1939},{"class":247,"line":492},[1940,1945,1949,1954],{"type":173,"tag":245,"props":1941,"children":1942},{"style":1376},[1943],{"type":179,"value":1944},"  contentId",{"type":173,"tag":245,"props":1946,"children":1947},{"style":252},[1948],{"type":179,"value":504},{"type":173,"tag":245,"props":1950,"children":1951},{"style":326},[1952],{"type":179,"value":1953}," ''",{"type":173,"tag":245,"props":1955,"children":1956},{"style":252},[1957],{"type":179,"value":1393},{"type":173,"tag":245,"props":1959,"children":1960},{"class":247,"line":524},[1961,1966,1970,1974],{"type":173,"tag":245,"props":1962,"children":1963},{"style":1376},[1964],{"type":179,"value":1965},"  titleId",{"type":173,"tag":245,"props":1967,"children":1968},{"style":252},[1969],{"type":179,"value":504},{"type":173,"tag":245,"props":1971,"children":1972},{"style":326},[1973],{"type":179,"value":1953},{"type":173,"tag":245,"props":1975,"children":1976},{"style":252},[1977],{"type":179,"value":1393},{"type":173,"tag":245,"props":1979,"children":1980},{"class":247,"line":533},[1981,1986,1990,1994],{"type":173,"tag":245,"props":1982,"children":1983},{"style":1376},[1984],{"type":179,"value":1985},"  descriptionId",{"type":173,"tag":245,"props":1987,"children":1988},{"style":252},[1989],{"type":179,"value":504},{"type":173,"tag":245,"props":1991,"children":1992},{"style":326},[1993],{"type":179,"value":1953},{"type":173,"tag":245,"props":1995,"children":1996},{"style":252},[1997],{"type":179,"value":1393},{"type":173,"tag":245,"props":1999,"children":2001},{"class":247,"line":2000},16,[2002,2007],{"type":173,"tag":245,"props":2003,"children":2004},{"style":667},[2005],{"type":179,"value":2006},"  triggerElement",{"type":173,"tag":245,"props":2008,"children":2009},{"style":252},[2010],{"type":179,"value":1393},{"type":173,"tag":245,"props":2012,"children":2014},{"class":247,"line":2013},17,[2015,2020],{"type":173,"tag":245,"props":2016,"children":2017},{"style":667},[2018],{"type":179,"value":2019},"  contentElement",{"type":173,"tag":245,"props":2021,"children":2022},{"style":252},[2023],{"type":179,"value":1393},{"type":173,"tag":245,"props":2025,"children":2027},{"class":247,"line":2026},18,[2028,2032],{"type":173,"tag":245,"props":2029,"children":2030},{"style":252},[2031],{"type":179,"value":1464},{"type":173,"tag":245,"props":2033,"children":2034},{"style":667},[2035],{"type":179,"value":2036},")\n",{"type":173,"tag":181,"props":2038,"children":2039},{},[2040],{"type":179,"value":2041},"另一个对开发者友好的特性是，Reka 把虚拟化的思想融入到各个组件。以往开发业务组件，往往会在表格、列表等需要特定性能优化的场景使用虚拟化技术。而 Reka 的 Combobox、ListBox、Tree 组件内置了虚拟化功能，并支持常见的设置，如：动态设置子项目高度、预渲染数量（也称为 offset）、设置项目文本内容（以支持搜索功能）等。Nuxt UI 的 InputMenu 和 SelectMenu 组件就是基于此类虚拟化组件实现的。",{"type":173,"tag":181,"props":2043,"children":2044},{},[2045],{"type":179,"value":2046},"总结一下，Reka 的设计原则是：无头、可访问性优先、开放可定制、开发者友好、高性能。此外，文档还提及 Reka 具有支持 SSR、国际化（多方向、日期、语言）等高级特性。最后，Reka 致谢有：Radix UI、React Aria、Floating UI、VueUse、Headless UI、Ariakit。两个没见过的都是“Aria”，即 React Aria 和 Ariakit。本以为是可访问性相关库，但是都只是 UI 组件库。也许 Reka 是从里面借鉴了一些组件？后续看到的话再确认。",{"type":173,"tag":181,"props":2048,"children":2049},{},[2050,2052,2061],{"type":179,"value":2051},"Reka 的设计团队是 ",{"type":173,"tag":2053,"props":2054,"children":2058},"a",{"href":2055,"rel":2056},"https://unovue.com/",[2057],"nofollow",[2059],{"type":179,"value":2060},"unovue",{"type":179,"value":2062},"，其下还有一款叫 Inspira UI 的组件库，兼具酷炫和实用，有兴趣的话也可以去看看。",{"type":173,"tag":181,"props":2064,"children":2065},{},[2066],{"type":179,"value":2067},"接下来主要从代码层看看。",{"type":173,"tag":174,"props":2069,"children":2071},{"id":2070},"工程保证",[2072],{"type":179,"value":2070},{"type":173,"tag":181,"props":2074,"children":2075},{},[2076],{"type":179,"value":2077},"项目是一个包含 Docs 官方文档、Core 组件库、和 Histoire 开发文档三个项目组成的 pnpm monorepo。用来做工程保证的包大概都见过，这里列举一下：",{"type":173,"tag":2079,"props":2080,"children":2081},"ul",{},[2082,2097,2111,2116],{"type":173,"tag":2083,"props":2084,"children":2085},"li",{},[2086,2088,2095],{"type":179,"value":2087},"交互式组件文档：",{"type":173,"tag":2053,"props":2089,"children":2092},{"href":2090,"rel":2091},"https://histoire.dev/guide/",[2057],[2093],{"type":179,"value":2094},"Histoire",{"type":179,"value":2096},"。StoryBook 的竞品，前年某个 Vue 项目接触过 StoryBook，简单尝试后发现对于小项目而言过于复杂了，他用的这个还不错。",{"type":173,"tag":2083,"props":2098,"children":2099},{},[2100,2102,2109],{"type":179,"value":2101},"代码规范：",{"type":173,"tag":2053,"props":2103,"children":2106},{"href":2104,"rel":2105},"https://github.com/antfu/eslint-config",[2057],[2107],{"type":179,"value":2108},"@antfu/eslint-config",{"type":179,"value":2110},"。",{"type":173,"tag":2083,"props":2112,"children":2113},{},[2114],{"type":179,"value":2115},"提交质量：simple-git-hooks 插入提交前检查和提交消息检查，分别由 lint-staged eslint 和 commitlint 代执行。",{"type":173,"tag":2083,"props":2117,"children":2118},{},[2119],{"type":179,"value":2120},"版本控制：bumpp 手动管理版本号。",{"type":173,"tag":181,"props":2122,"children":2123},{},[2124],{"type":179,"value":2125},"其他工程工具包括：核心包的 vue-tsc 类型检查、Vitest 单元测试、Vite 编译、pnpm 发包。",{"type":173,"tag":181,"props":2127,"children":2128},{},[2129],{"type":179,"value":2130},"因为没有历史包袱，代码量少的缘故，项目构建速度太快了，本体+插件（Nuxt module、Namespaced Entry、Unplugin-vue-component Resolver）能在 18 秒内完成。",{"type":173,"tag":181,"props":2132,"children":2133},{},[2134],{"type":179,"value":2135},"CI 方面。包括基本的 build、publish、release 流程，结构比较简单，可以现学现用。此外还为每一个 Pull Request 增加了 Spell Check，以及使用 pkg.pr.new 为其发布新包。",{"type":173,"tag":181,"props":2137,"children":2138},{},[2139,2146],{"type":173,"tag":2053,"props":2140,"children":2143},{"href":2141,"rel":2142},"https://github.com/stackblitz-labs/pkg.pr.new",[2057],[2144],{"type":179,"value":2145},"pkg.pr.new",{"type":179,"value":2147}," 是一个发包工具，允许终端用户通过包管理器兼容的 URL 协议格式安装某个 PR 修改过代码后发布的最新的包，比如：",{"type":173,"tag":235,"props":2149,"children":2153},{"className":2150,"code":2151,"language":2152,"meta":166,"style":166},"language-bash shiki shiki-themes material-theme-lighter github-light github-dark monokai","npm i https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n","bash",[2154],{"type":173,"tag":226,"props":2155,"children":2156},{"__ignoreMap":166},[2157],{"type":173,"tag":245,"props":2158,"children":2159},{"class":247,"line":248},[2160,2165,2170],{"type":173,"tag":245,"props":2161,"children":2162},{"style":448},[2163],{"type":179,"value":2164},"npm",{"type":173,"tag":245,"props":2166,"children":2167},{"style":332},[2168],{"type":179,"value":2169}," i",{"type":173,"tag":245,"props":2171,"children":2172},{"style":332},[2173],{"type":179,"value":2174}," https://pkg.pr.new/tinylibs/tinybench/tinybench@a832a55\n",{"type":173,"tag":181,"props":2176,"children":2177},{},[2178],{"type":179,"value":2179},"项目的 TypeScript 配置分为四个部分：开发时配置、构建配置、类型检查配置、测试环境配置。构建和开发配置主要的区别就是构建时不包括测试文件提高性能。测试环境配置使用 tsconfig/node 的基础配置。这部分和大部分项目差不多。",{"type":173,"tag":181,"props":2181,"children":2182},{},[2183],{"type":173,"tag":190,"props":2184,"children":2187},{"alt":2185,"src":2186},"tsconfig","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210235509.png",[],{"type":173,"tag":174,"props":2189,"children":2191},{"id":2190},"具体实现",[2192],{"type":179,"value":2190},{"type":173,"tag":2194,"props":2195,"children":2197},"h4",{"id":2196},"aschild-模式的具体实现",[2198],{"type":179,"value":2199},"asChild 模式的具体实现？",{"type":173,"tag":181,"props":2201,"children":2202},{},[2203],{"type":179,"value":2204},"组件的 asChild 属性允许用自定义元素替换组件默认的 HTML 元素，同时保留其功能和行为，如事件和无障碍相关属性。为了实现组件的 asChild，Reka 在每一个支持替换 DOM 结构的地方都使用 Primitive 组件作替代。其形如：",{"type":173,"tag":235,"props":2206,"children":2208},{"className":237,"code":2207,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CPrimitive :as-child=\"asChild\" :as=\"as\">\n    \u003Cslot />\n  \u003C/Primitive>\n\u003C/template>\n",[2209],{"type":173,"tag":226,"props":2210,"children":2211},{"__ignoreMap":166},[2212,2227,2287,2309,2324],{"type":173,"tag":245,"props":2213,"children":2214},{"class":247,"line":248},[2215,2219,2223],{"type":173,"tag":245,"props":2216,"children":2217},{"style":252},[2218],{"type":179,"value":255},{"type":173,"tag":245,"props":2220,"children":2221},{"style":258},[2222],{"type":179,"value":261},{"type":173,"tag":245,"props":2224,"children":2225},{"style":252},[2226],{"type":179,"value":266},{"type":173,"tag":245,"props":2228,"children":2229},{"class":247,"line":269},[2230,2234,2239,2244,2248,2252,2257,2261,2266,2270,2274,2279,2283],{"type":173,"tag":245,"props":2231,"children":2232},{"style":252},[2233],{"type":179,"value":275},{"type":173,"tag":245,"props":2235,"children":2236},{"style":258},[2237],{"type":179,"value":2238},"Primitive",{"type":173,"tag":245,"props":2240,"children":2241},{"style":315},[2242],{"type":179,"value":2243}," :as-child",{"type":173,"tag":245,"props":2245,"children":2246},{"style":252},[2247],{"type":179,"value":323},{"type":173,"tag":245,"props":2249,"children":2250},{"style":326},[2251],{"type":179,"value":329},{"type":173,"tag":245,"props":2253,"children":2254},{"style":332},[2255],{"type":179,"value":2256},"asChild",{"type":173,"tag":245,"props":2258,"children":2259},{"style":326},[2260],{"type":179,"value":329},{"type":173,"tag":245,"props":2262,"children":2263},{"style":315},[2264],{"type":179,"value":2265}," :as",{"type":173,"tag":245,"props":2267,"children":2268},{"style":252},[2269],{"type":179,"value":323},{"type":173,"tag":245,"props":2271,"children":2272},{"style":326},[2273],{"type":179,"value":329},{"type":173,"tag":245,"props":2275,"children":2276},{"style":332},[2277],{"type":179,"value":2278},"as",{"type":173,"tag":245,"props":2280,"children":2281},{"style":326},[2282],{"type":179,"value":329},{"type":173,"tag":245,"props":2284,"children":2285},{"style":252},[2286],{"type":179,"value":266},{"type":173,"tag":245,"props":2288,"children":2289},{"class":247,"line":287},[2290,2294,2299,2305],{"type":173,"tag":245,"props":2291,"children":2292},{"style":252},[2293],{"type":179,"value":303},{"type":173,"tag":245,"props":2295,"children":2296},{"style":258},[2297],{"type":179,"value":2298},"slot",{"type":173,"tag":245,"props":2300,"children":2302},{"style":2301},"--shiki-light:#39ADB5;--shiki-light-font-style:inherit;--shiki-default:#B31D28;--shiki-default-font-style:italic;--shiki-dark:#FDAEB7;--shiki-dark-font-style:italic;--shiki-sepia:#F44747;--shiki-sepia-font-style:inherit",[2303],{"type":179,"value":2304}," /",{"type":173,"tag":245,"props":2306,"children":2307},{"style":252},[2308],{"type":179,"value":266},{"type":173,"tag":245,"props":2310,"children":2311},{"class":247,"line":297},[2312,2316,2320],{"type":173,"tag":245,"props":2313,"children":2314},{"style":252},[2315],{"type":179,"value":384},{"type":173,"tag":245,"props":2317,"children":2318},{"style":258},[2319],{"type":179,"value":2238},{"type":173,"tag":245,"props":2321,"children":2322},{"style":252},[2323],{"type":179,"value":266},{"type":173,"tag":245,"props":2325,"children":2326},{"class":247,"line":311},[2327,2331,2335],{"type":173,"tag":245,"props":2328,"children":2329},{"style":252},[2330],{"type":179,"value":401},{"type":173,"tag":245,"props":2332,"children":2333},{"style":258},[2334],{"type":179,"value":261},{"type":173,"tag":245,"props":2336,"children":2337},{"style":252},[2338],{"type":179,"value":266},{"type":173,"tag":181,"props":2340,"children":2341},{},[2342],{"type":179,"value":2343},"Primitive 是一个专用于渲染的高阶组件，使用 as 指示 h 函数渲染具体的组件。而 asChild 属性其实是 as === 'template' 的一个语法糖。见下代码，如果 as 属性是 template，那么直接渲染子组件（Slot），否则渲染 as，默认值是 div。这样一来所有有 DOM 结构的 div 都可以在终端用户处处理成任意节点。代码简化如下：",{"type":173,"tag":235,"props":2345,"children":2347},{"className":1334,"code":2346,"language":1336,"meta":166,"style":166},"const Primitive = defineComponent({\n  setup(props, { attrs, slots }) {\n    if (asTag !== 'template')\n      return () => h(props.as, attrs, { default: slots.default })\n    else\n      return () => h(Slot, attrs, { default: slots.default })\n  },\n})\n",[2348],{"type":173,"tag":226,"props":2349,"children":2350},{"__ignoreMap":166},[2351,2380,2430,2469,2552,2560,2632,2639],{"type":173,"tag":245,"props":2352,"children":2353},{"class":247,"line":248},[2354,2358,2363,2367,2372,2376],{"type":173,"tag":245,"props":2355,"children":2356},{"style":1352},[2357],{"type":179,"value":1693},{"type":173,"tag":245,"props":2359,"children":2360},{"style":1358},[2361],{"type":179,"value":2362}," Primitive",{"type":173,"tag":245,"props":2364,"children":2365},{"style":464},[2366],{"type":179,"value":1366},{"type":173,"tag":245,"props":2368,"children":2369},{"style":1705},[2370],{"type":179,"value":2371}," defineComponent",{"type":173,"tag":245,"props":2373,"children":2374},{"style":667},[2375],{"type":179,"value":1713},{"type":173,"tag":245,"props":2377,"children":2378},{"style":252},[2379],{"type":179,"value":809},{"type":173,"tag":245,"props":2381,"children":2382},{"class":247,"line":269},[2383,2389,2393,2398,2403,2407,2412,2416,2421,2426],{"type":173,"tag":245,"props":2384,"children":2386},{"style":2385},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[2387],{"type":179,"value":2388},"  setup",{"type":173,"tag":245,"props":2390,"children":2391},{"style":252},[2392],{"type":179,"value":1713},{"type":173,"tag":245,"props":2394,"children":2395},{"style":1822},[2396],{"type":179,"value":2397},"props",{"type":173,"tag":245,"props":2399,"children":2400},{"style":252},[2401],{"type":179,"value":2402},",",{"type":173,"tag":245,"props":2404,"children":2405},{"style":252},[2406],{"type":179,"value":1629},{"type":173,"tag":245,"props":2408,"children":2409},{"style":1822},[2410],{"type":179,"value":2411}," attrs",{"type":173,"tag":245,"props":2413,"children":2414},{"style":252},[2415],{"type":179,"value":2402},{"type":173,"tag":245,"props":2417,"children":2418},{"style":1822},[2419],{"type":179,"value":2420}," slots",{"type":173,"tag":245,"props":2422,"children":2423},{"style":252},[2424],{"type":179,"value":2425}," })",{"type":173,"tag":245,"props":2427,"children":2428},{"style":252},[2429],{"type":179,"value":489},{"type":173,"tag":245,"props":2431,"children":2432},{"class":247,"line":287},[2433,2438,2442,2447,2452,2456,2460,2465],{"type":173,"tag":245,"props":2434,"children":2435},{"style":1346},[2436],{"type":179,"value":2437},"    if",{"type":173,"tag":245,"props":2439,"children":2440},{"style":1376},[2441],{"type":179,"value":1819},{"type":173,"tag":245,"props":2443,"children":2444},{"style":667},[2445],{"type":179,"value":2446},"asTag",{"type":173,"tag":245,"props":2448,"children":2449},{"style":464},[2450],{"type":179,"value":2451}," !==",{"type":173,"tag":245,"props":2453,"children":2454},{"style":326},[2455],{"type":179,"value":1648},{"type":173,"tag":245,"props":2457,"children":2458},{"style":332},[2459],{"type":179,"value":261},{"type":173,"tag":245,"props":2461,"children":2462},{"style":326},[2463],{"type":179,"value":2464},"'",{"type":173,"tag":245,"props":2466,"children":2467},{"style":1376},[2468],{"type":179,"value":2036},{"type":173,"tag":245,"props":2470,"children":2471},{"class":247,"line":297},[2472,2477,2481,2485,2490,2494,2498,2502,2506,2510,2514,2518,2522,2527,2531,2535,2539,2544,2548],{"type":173,"tag":245,"props":2473,"children":2474},{"style":1346},[2475],{"type":179,"value":2476},"      return",{"type":173,"tag":245,"props":2478,"children":2479},{"style":252},[2480],{"type":179,"value":1758},{"type":173,"tag":245,"props":2482,"children":2483},{"style":1352},[2484],{"type":179,"value":1763},{"type":173,"tag":245,"props":2486,"children":2487},{"style":1705},[2488],{"type":179,"value":2489}," h",{"type":173,"tag":245,"props":2491,"children":2492},{"style":1376},[2493],{"type":179,"value":1713},{"type":173,"tag":245,"props":2495,"children":2496},{"style":667},[2497],{"type":179,"value":2397},{"type":173,"tag":245,"props":2499,"children":2500},{"style":252},[2501],{"type":179,"value":573},{"type":173,"tag":245,"props":2503,"children":2504},{"style":667},[2505],{"type":179,"value":2278},{"type":173,"tag":245,"props":2507,"children":2508},{"style":252},[2509],{"type":179,"value":2402},{"type":173,"tag":245,"props":2511,"children":2512},{"style":667},[2513],{"type":179,"value":2411},{"type":173,"tag":245,"props":2515,"children":2516},{"style":252},[2517],{"type":179,"value":2402},{"type":173,"tag":245,"props":2519,"children":2520},{"style":252},[2521],{"type":179,"value":1629},{"type":173,"tag":245,"props":2523,"children":2524},{"style":1376},[2525],{"type":179,"value":2526}," default",{"type":173,"tag":245,"props":2528,"children":2529},{"style":252},[2530],{"type":179,"value":504},{"type":173,"tag":245,"props":2532,"children":2533},{"style":667},[2534],{"type":179,"value":2420},{"type":173,"tag":245,"props":2536,"children":2537},{"style":252},[2538],{"type":179,"value":573},{"type":173,"tag":245,"props":2540,"children":2541},{"style":667},[2542],{"type":179,"value":2543},"default",{"type":173,"tag":245,"props":2545,"children":2546},{"style":252},[2547],{"type":179,"value":1638},{"type":173,"tag":245,"props":2549,"children":2550},{"style":1376},[2551],{"type":179,"value":2036},{"type":173,"tag":245,"props":2553,"children":2554},{"class":247,"line":311},[2555],{"type":173,"tag":245,"props":2556,"children":2557},{"style":1346},[2558],{"type":179,"value":2559},"    else\n",{"type":173,"tag":245,"props":2561,"children":2562},{"class":247,"line":343},[2563,2567,2571,2575,2579,2583,2588,2592,2596,2600,2604,2608,2612,2616,2620,2624,2628],{"type":173,"tag":245,"props":2564,"children":2565},{"style":1346},[2566],{"type":179,"value":2476},{"type":173,"tag":245,"props":2568,"children":2569},{"style":252},[2570],{"type":179,"value":1758},{"type":173,"tag":245,"props":2572,"children":2573},{"style":1352},[2574],{"type":179,"value":1763},{"type":173,"tag":245,"props":2576,"children":2577},{"style":1705},[2578],{"type":179,"value":2489},{"type":173,"tag":245,"props":2580,"children":2581},{"style":1376},[2582],{"type":179,"value":1713},{"type":173,"tag":245,"props":2584,"children":2585},{"style":667},[2586],{"type":179,"value":2587},"Slot",{"type":173,"tag":245,"props":2589,"children":2590},{"style":252},[2591],{"type":179,"value":2402},{"type":173,"tag":245,"props":2593,"children":2594},{"style":667},[2595],{"type":179,"value":2411},{"type":173,"tag":245,"props":2597,"children":2598},{"style":252},[2599],{"type":179,"value":2402},{"type":173,"tag":245,"props":2601,"children":2602},{"style":252},[2603],{"type":179,"value":1629},{"type":173,"tag":245,"props":2605,"children":2606},{"style":1376},[2607],{"type":179,"value":2526},{"type":173,"tag":245,"props":2609,"children":2610},{"style":252},[2611],{"type":179,"value":504},{"type":173,"tag":245,"props":2613,"children":2614},{"style":667},[2615],{"type":179,"value":2420},{"type":173,"tag":245,"props":2617,"children":2618},{"style":252},[2619],{"type":179,"value":573},{"type":173,"tag":245,"props":2621,"children":2622},{"style":667},[2623],{"type":179,"value":2543},{"type":173,"tag":245,"props":2625,"children":2626},{"style":252},[2627],{"type":179,"value":1638},{"type":173,"tag":245,"props":2629,"children":2630},{"style":1376},[2631],{"type":179,"value":2036},{"type":173,"tag":245,"props":2633,"children":2634},{"class":247,"line":369},[2635],{"type":173,"tag":245,"props":2636,"children":2637},{"style":252},[2638],{"type":179,"value":1802},{"type":173,"tag":245,"props":2640,"children":2641},{"class":247,"line":378},[2642,2646],{"type":173,"tag":245,"props":2643,"children":2644},{"style":252},[2645],{"type":179,"value":1464},{"type":173,"tag":245,"props":2647,"children":2648},{"style":667},[2649],{"type":179,"value":2036},{"type":173,"tag":181,"props":2651,"children":2652},{},[2653],{"type":179,"value":2654},"Primitive 中没有直接渲染 slots.default 而使用 Slot 中转的原因主要是要在 Slot 组件处理 css class、props 和事件合并相关事项。实际最后渲染的实际内容是处理后的克隆的 slots.default。Slot 的代码简化如下：",{"type":173,"tag":235,"props":2656,"children":2658},{"className":1334,"code":2657,"language":1336,"meta":166,"style":166},"setup() {\n  const mergedProps = child.props\n    ? mergeProps(attrs, child.props)\n    : attrs\n  const cloned = cloneVNode(child, mergedProps)\n  child[0] = cloned\n  return child\n}\n",[2659],{"type":173,"tag":226,"props":2660,"children":2661},{"__ignoreMap":166},[2662,2679,2710,2752,2765,2807,2838,2851],{"type":173,"tag":245,"props":2663,"children":2664},{"class":247,"line":248},[2665,2670,2675],{"type":173,"tag":245,"props":2666,"children":2667},{"style":1705},[2668],{"type":179,"value":2669},"setup",{"type":173,"tag":245,"props":2671,"children":2672},{"style":667},[2673],{"type":179,"value":2674},"() ",{"type":173,"tag":245,"props":2676,"children":2677},{"style":252},[2678],{"type":179,"value":809},{"type":173,"tag":245,"props":2680,"children":2681},{"class":247,"line":269},[2682,2687,2692,2696,2701,2705],{"type":173,"tag":245,"props":2683,"children":2684},{"style":1352},[2685],{"type":179,"value":2686},"  const",{"type":173,"tag":245,"props":2688,"children":2689},{"style":1358},[2690],{"type":179,"value":2691}," mergedProps",{"type":173,"tag":245,"props":2693,"children":2694},{"style":464},[2695],{"type":179,"value":1366},{"type":173,"tag":245,"props":2697,"children":2698},{"style":667},[2699],{"type":179,"value":2700}," child",{"type":173,"tag":245,"props":2702,"children":2703},{"style":252},[2704],{"type":179,"value":573},{"type":173,"tag":245,"props":2706,"children":2707},{"style":667},[2708],{"type":179,"value":2709},"props\n",{"type":173,"tag":245,"props":2711,"children":2712},{"class":247,"line":287},[2713,2718,2723,2727,2732,2736,2740,2744,2748],{"type":173,"tag":245,"props":2714,"children":2715},{"style":464},[2716],{"type":179,"value":2717},"    ?",{"type":173,"tag":245,"props":2719,"children":2720},{"style":1705},[2721],{"type":179,"value":2722}," mergeProps",{"type":173,"tag":245,"props":2724,"children":2725},{"style":1376},[2726],{"type":179,"value":1713},{"type":173,"tag":245,"props":2728,"children":2729},{"style":667},[2730],{"type":179,"value":2731},"attrs",{"type":173,"tag":245,"props":2733,"children":2734},{"style":252},[2735],{"type":179,"value":2402},{"type":173,"tag":245,"props":2737,"children":2738},{"style":667},[2739],{"type":179,"value":2700},{"type":173,"tag":245,"props":2741,"children":2742},{"style":252},[2743],{"type":179,"value":573},{"type":173,"tag":245,"props":2745,"children":2746},{"style":667},[2747],{"type":179,"value":2397},{"type":173,"tag":245,"props":2749,"children":2750},{"style":1376},[2751],{"type":179,"value":2036},{"type":173,"tag":245,"props":2753,"children":2754},{"class":247,"line":297},[2755,2760],{"type":173,"tag":245,"props":2756,"children":2757},{"style":464},[2758],{"type":179,"value":2759},"    :",{"type":173,"tag":245,"props":2761,"children":2762},{"style":667},[2763],{"type":179,"value":2764}," attrs\n",{"type":173,"tag":245,"props":2766,"children":2767},{"class":247,"line":311},[2768,2772,2777,2781,2786,2790,2795,2799,2803],{"type":173,"tag":245,"props":2769,"children":2770},{"style":1352},[2771],{"type":179,"value":2686},{"type":173,"tag":245,"props":2773,"children":2774},{"style":1358},[2775],{"type":179,"value":2776}," cloned",{"type":173,"tag":245,"props":2778,"children":2779},{"style":464},[2780],{"type":179,"value":1366},{"type":173,"tag":245,"props":2782,"children":2783},{"style":1705},[2784],{"type":179,"value":2785}," cloneVNode",{"type":173,"tag":245,"props":2787,"children":2788},{"style":1376},[2789],{"type":179,"value":1713},{"type":173,"tag":245,"props":2791,"children":2792},{"style":667},[2793],{"type":179,"value":2794},"child",{"type":173,"tag":245,"props":2796,"children":2797},{"style":252},[2798],{"type":179,"value":2402},{"type":173,"tag":245,"props":2800,"children":2801},{"style":667},[2802],{"type":179,"value":2691},{"type":173,"tag":245,"props":2804,"children":2805},{"style":1376},[2806],{"type":179,"value":2036},{"type":173,"tag":245,"props":2808,"children":2809},{"class":247,"line":343},[2810,2815,2819,2824,2829,2833],{"type":173,"tag":245,"props":2811,"children":2812},{"style":667},[2813],{"type":179,"value":2814},"  child",{"type":173,"tag":245,"props":2816,"children":2817},{"style":1376},[2818],{"type":179,"value":456},{"type":173,"tag":245,"props":2820,"children":2821},{"style":507},[2822],{"type":179,"value":2823},"0",{"type":173,"tag":245,"props":2825,"children":2826},{"style":1376},[2827],{"type":179,"value":2828},"] ",{"type":173,"tag":245,"props":2830,"children":2831},{"style":464},[2832],{"type":179,"value":323},{"type":173,"tag":245,"props":2834,"children":2835},{"style":667},[2836],{"type":179,"value":2837}," cloned\n",{"type":173,"tag":245,"props":2839,"children":2840},{"class":247,"line":369},[2841,2846],{"type":173,"tag":245,"props":2842,"children":2843},{"style":1346},[2844],{"type":179,"value":2845},"  return",{"type":173,"tag":245,"props":2847,"children":2848},{"style":667},[2849],{"type":179,"value":2850}," child\n",{"type":173,"tag":245,"props":2852,"children":2853},{"class":247,"line":378},[2854],{"type":173,"tag":245,"props":2855,"children":2856},{"style":252},[2857],{"type":179,"value":698},{"type":173,"tag":2194,"props":2859,"children":2861},{"id":2860},"injectcontext-模式的具体实现",[2862],{"type":179,"value":2863},"InjectContext 模式的具体实现？",{"type":173,"tag":181,"props":2865,"children":2866},{},[2867],{"type":179,"value":2868},"Reka 使用 injectContext 模式实现组件内的状态共享，具体而言，就是在组件分层定义不同的状态和方法，然后在子组件使用 inject 获得并使用。",{"type":173,"tag":181,"props":2870,"children":2871},{},[2872],{"type":179,"value":2873},"以 Accordion 组件（折叠面板）为例，使用方式如下。Root 是 Accordion 的根节点，Item 是每一个可折叠的子项，Header 是子项标题，Trigger 是箭头按钮，Content 是子项展开后的内容区域。",{"type":173,"tag":235,"props":2875,"children":2877},{"className":237,"code":2876,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CAccordionRoot>\n    \u003CAccordionItem>\n      \u003CAccordionHeader>\n        \u003CAccordionTrigger />\n      \u003C/AccordionHeader>\n      \u003CAccordionContent />\n    \u003C/AccordionItem>\n  \u003C/AccordionRoot>\n\u003C/template>\n",[2878],{"type":173,"tag":226,"props":2879,"children":2880},{"__ignoreMap":166},[2881,2896,2911,2926,2942,2958,2973,2989,3004,3019],{"type":173,"tag":245,"props":2882,"children":2883},{"class":247,"line":248},[2884,2888,2892],{"type":173,"tag":245,"props":2885,"children":2886},{"style":252},[2887],{"type":179,"value":255},{"type":173,"tag":245,"props":2889,"children":2890},{"style":258},[2891],{"type":179,"value":261},{"type":173,"tag":245,"props":2893,"children":2894},{"style":252},[2895],{"type":179,"value":266},{"type":173,"tag":245,"props":2897,"children":2898},{"class":247,"line":269},[2899,2903,2907],{"type":173,"tag":245,"props":2900,"children":2901},{"style":252},[2902],{"type":179,"value":275},{"type":173,"tag":245,"props":2904,"children":2905},{"style":258},[2906],{"type":179,"value":280},{"type":173,"tag":245,"props":2908,"children":2909},{"style":252},[2910],{"type":179,"value":266},{"type":173,"tag":245,"props":2912,"children":2913},{"class":247,"line":287},[2914,2918,2922],{"type":173,"tag":245,"props":2915,"children":2916},{"style":252},[2917],{"type":179,"value":303},{"type":173,"tag":245,"props":2919,"children":2920},{"style":258},[2921],{"type":179,"value":451},{"type":173,"tag":245,"props":2923,"children":2924},{"style":252},[2925],{"type":179,"value":266},{"type":173,"tag":245,"props":2927,"children":2928},{"class":247,"line":297},[2929,2933,2938],{"type":173,"tag":245,"props":2930,"children":2931},{"style":252},[2932],{"type":179,"value":946},{"type":173,"tag":245,"props":2934,"children":2935},{"style":258},[2936],{"type":179,"value":2937},"AccordionHeader",{"type":173,"tag":245,"props":2939,"children":2940},{"style":252},[2941],{"type":179,"value":266},{"type":173,"tag":245,"props":2943,"children":2944},{"class":247,"line":311},[2945,2949,2954],{"type":173,"tag":245,"props":2946,"children":2947},{"style":252},[2948],{"type":179,"value":968},{"type":173,"tag":245,"props":2950,"children":2951},{"style":258},[2952],{"type":179,"value":2953},"AccordionTrigger",{"type":173,"tag":245,"props":2955,"children":2956},{"style":252},[2957],{"type":179,"value":1257},{"type":173,"tag":245,"props":2959,"children":2960},{"class":247,"line":343},[2961,2965,2969],{"type":173,"tag":245,"props":2962,"children":2963},{"style":252},[2964],{"type":179,"value":1040},{"type":173,"tag":245,"props":2966,"children":2967},{"style":258},[2968],{"type":179,"value":2937},{"type":173,"tag":245,"props":2970,"children":2971},{"style":252},[2972],{"type":179,"value":266},{"type":173,"tag":245,"props":2974,"children":2975},{"class":247,"line":369},[2976,2980,2985],{"type":173,"tag":245,"props":2977,"children":2978},{"style":252},[2979],{"type":179,"value":946},{"type":173,"tag":245,"props":2981,"children":2982},{"style":258},[2983],{"type":179,"value":2984},"AccordionContent",{"type":173,"tag":245,"props":2986,"children":2987},{"style":252},[2988],{"type":179,"value":1257},{"type":173,"tag":245,"props":2990,"children":2991},{"class":247,"line":378},[2992,2996,3000],{"type":173,"tag":245,"props":2993,"children":2994},{"style":252},[2995],{"type":179,"value":1064},{"type":173,"tag":245,"props":2997,"children":2998},{"style":258},[2999],{"type":179,"value":451},{"type":173,"tag":245,"props":3001,"children":3002},{"style":252},[3003],{"type":179,"value":266},{"type":173,"tag":245,"props":3005,"children":3006},{"class":247,"line":395},[3007,3011,3015],{"type":173,"tag":245,"props":3008,"children":3009},{"style":252},[3010],{"type":179,"value":384},{"type":173,"tag":245,"props":3012,"children":3013},{"style":258},[3014],{"type":179,"value":280},{"type":173,"tag":245,"props":3016,"children":3017},{"style":252},[3018],{"type":179,"value":266},{"type":173,"tag":245,"props":3020,"children":3021},{"class":247,"line":412},[3022,3026,3030],{"type":173,"tag":245,"props":3023,"children":3024},{"style":252},[3025],{"type":179,"value":401},{"type":173,"tag":245,"props":3027,"children":3028},{"style":258},[3029],{"type":179,"value":261},{"type":173,"tag":245,"props":3031,"children":3032},{"style":252},[3033],{"type":179,"value":266},{"type":173,"tag":181,"props":3035,"children":3036},{},[3037],{"type":179,"value":3038},"由使用方式可以知道，在 Accordion 内部，context 的继承结构是这样的：",{"type":173,"tag":3040,"props":3041,"children":3043},"mermaid",{"size":3042},"md",[3044],{"type":179,"value":3045},"\nflowchart TD\n    subgraph AccordionRootContext[AccordionRootContext]\n        ARCDisabled[disabled]\n        ARCDirection[direction]\n        ARCRest[...]\n    end\n    subgraph AccordionItemContext[AccordionItemContext]\n        AICValue[value]\n        AICRest[...]\n    end\n    A(AccordionRoot) -.-> |provide| AccordionRootContext\n    B(AccordionItem) -.-> |provide| AccordionItemContext\n    B --> A\n    C(AccordionHeader) --> B\n    AccordionRootContext -.-> |inject| C\n    AccordionItemContext -.-> |inject| C\n    D(AccordionContent) --> B\n    AccordionRootContext -.-> |inject| D\n    AccordionItemContext -.-> |inject| D\n",{"type":173,"tag":181,"props":3047,"children":3048},{},[3049],{"type":179,"value":3050},"一个组件可能有多个 Context，但是必须放在组件的 Vue SFC 文件中定义，才能从模版泛型中取到正确的类型。所以 Reka 组件实现有一种固定的写法，见下图，将需要导出的内容放在 script setup 外部，script setup 内部是一般的组件实现。",{"type":173,"tag":181,"props":3052,"children":3053},{},[3054],{"type":173,"tag":190,"props":3055,"children":3057},{"alt":166,"src":3056},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210529128.png",[],{"type":173,"tag":181,"props":3059,"children":3060},{},[3061],{"type":179,"value":3062},"所有 Vue SFC 导出的内容都通过组件文件夹内的桶文件（index.ts）再次导出，这样其他 Reka 组件或终端用户就能正常获取 Context 的 inject 方法。",{"type":173,"tag":181,"props":3064,"children":3065},{},[3066],{"type":173,"tag":190,"props":3067,"children":3070},{"alt":3068,"src":3069},"组件桶文件","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202503210534788.png",[],{"type":173,"tag":181,"props":3072,"children":3073},{},[3074],{"type":179,"value":3075},"至于 createContext 的实现，其实就是做了防错处理的 vue inject 和 vue provide，没什么特别之处，就不展开说了。",{"type":173,"tag":2194,"props":3077,"children":3079},{"id":3078},"组件延迟卸载的实现",[3080],{"type":179,"value":3081},"组件延迟卸载的实现？",{"type":173,"tag":181,"props":3083,"children":3084},{},[3085],{"type":179,"value":3086},"上面提到 Reka 使用 Presence 高阶组件来实现组件的延迟卸载，下面以 Dialog 举例。见下 DialogOverlay 的实现，根节点是 Presence 组件，其 present 属性用于节点存续状态。实际渲染的内容是 DialogOverlayImpl 组件。不过这种写法不支持 Vue Fragment。",{"type":173,"tag":235,"props":3088,"children":3090},{"className":237,"code":3089,"language":239,"meta":166,"style":166},"\u003Ctemplate>\n  \u003CPresence :present=\"forceMount || rootContext.open.value\">\n    \u003CDialogOverlayImpl />\n  \u003C/Presence>\n\u003C/template>\n",[3091],{"type":173,"tag":226,"props":3092,"children":3093},{"__ignoreMap":166},[3094,3109,3147,3163,3178],{"type":173,"tag":245,"props":3095,"children":3096},{"class":247,"line":248},[3097,3101,3105],{"type":173,"tag":245,"props":3098,"children":3099},{"style":252},[3100],{"type":179,"value":255},{"type":173,"tag":245,"props":3102,"children":3103},{"style":258},[3104],{"type":179,"value":261},{"type":173,"tag":245,"props":3106,"children":3107},{"style":252},[3108],{"type":179,"value":266},{"type":173,"tag":245,"props":3110,"children":3111},{"class":247,"line":269},[3112,3116,3121,3126,3130,3134,3139,3143],{"type":173,"tag":245,"props":3113,"children":3114},{"style":252},[3115],{"type":179,"value":275},{"type":173,"tag":245,"props":3117,"children":3118},{"style":258},[3119],{"type":179,"value":3120},"Presence",{"type":173,"tag":245,"props":3122,"children":3123},{"style":315},[3124],{"type":179,"value":3125}," :present",{"type":173,"tag":245,"props":3127,"children":3128},{"style":252},[3129],{"type":179,"value":323},{"type":173,"tag":245,"props":3131,"children":3132},{"style":326},[3133],{"type":179,"value":329},{"type":173,"tag":245,"props":3135,"children":3136},{"style":332},[3137],{"type":179,"value":3138},"forceMount || rootContext.open.value",{"type":173,"tag":245,"props":3140,"children":3141},{"style":326},[3142],{"type":179,"value":329},{"type":173,"tag":245,"props":3144,"children":3145},{"style":252},[3146],{"type":179,"value":266},{"type":173,"tag":245,"props":3148,"children":3149},{"class":247,"line":287},[3150,3154,3159],{"type":173,"tag":245,"props":3151,"children":3152},{"style":252},[3153],{"type":179,"value":303},{"type":173,"tag":245,"props":3155,"children":3156},{"style":258},[3157],{"type":179,"value":3158},"DialogOverlayImpl",{"type":173,"tag":245,"props":3160,"children":3161},{"style":252},[3162],{"type":179,"value":1257},{"type":173,"tag":245,"props":3164,"children":3165},{"class":247,"line":297},[3166,3170,3174],{"type":173,"tag":245,"props":3167,"children":3168},{"style":252},[3169],{"type":179,"value":384},{"type":173,"tag":245,"props":3171,"children":3172},{"style":258},[3173],{"type":179,"value":3120},{"type":173,"tag":245,"props":3175,"children":3176},{"style":252},[3177],{"type":179,"value":266},{"type":173,"tag":245,"props":3179,"children":3180},{"class":247,"line":311},[3181,3185,3189],{"type":173,"tag":245,"props":3182,"children":3183},{"style":252},[3184],{"type":179,"value":401},{"type":173,"tag":245,"props":3186,"children":3187},{"style":258},[3188],{"type":179,"value":261},{"type":173,"tag":245,"props":3190,"children":3191},{"style":252},[3192],{"type":179,"value":266},{"type":173,"tag":181,"props":3194,"children":3195},{},[3196],{"type":179,"value":3197},"在 Presence 内部，只要动画还没结束，或组件受控（强制挂载），就仍然会渲染内容。其中，usePresence 就是判断 DOM 节点动画运行状态的相关逻辑，动画没有结束，那么 isPresent 就是 true。forceMount 用于需要强制渲染组件的场景，就类似上文提到 Reka 结合 @vueuse/motion 使用调控组件动画。",{"type":173,"tag":235,"props":3199,"children":3201},{"className":1334,"code":3200,"language":1336,"meta":166,"style":166},"setup(props, { slots, expose }) {\n  const { present, forceMount } = toRefs(props)\n  const { isPresent } = usePresence(present, node)\n  return () => {\n    if (forceMount.value || present.value || isPresent.value) {\n      return h(slots.default())\n    } else {\n      return null\n    }\n  }\n}\n",[3202],{"type":173,"tag":226,"props":3203,"children":3204},{"__ignoreMap":166},[3205,3251,3301,3352,3371,3436,3469,3486,3499,3507,3514],{"type":173,"tag":245,"props":3206,"children":3207},{"class":247,"line":248},[3208,3212,3217,3221,3225,3229,3233,3238,3242,3247],{"type":173,"tag":245,"props":3209,"children":3210},{"style":1705},[3211],{"type":179,"value":2669},{"type":173,"tag":245,"props":3213,"children":3214},{"style":667},[3215],{"type":179,"value":3216},"(props",{"type":173,"tag":245,"props":3218,"children":3219},{"style":252},[3220],{"type":179,"value":2402},{"type":173,"tag":245,"props":3222,"children":3223},{"style":252},[3224],{"type":179,"value":1629},{"type":173,"tag":245,"props":3226,"children":3227},{"style":667},[3228],{"type":179,"value":2420},{"type":173,"tag":245,"props":3230,"children":3231},{"style":252},[3232],{"type":179,"value":2402},{"type":173,"tag":245,"props":3234,"children":3235},{"style":667},[3236],{"type":179,"value":3237}," expose ",{"type":173,"tag":245,"props":3239,"children":3240},{"style":252},[3241],{"type":179,"value":1464},{"type":173,"tag":245,"props":3243,"children":3244},{"style":667},[3245],{"type":179,"value":3246},") ",{"type":173,"tag":245,"props":3248,"children":3249},{"style":252},[3250],{"type":179,"value":809},{"type":173,"tag":245,"props":3252,"children":3253},{"class":247,"line":269},[3254,3258,3262,3267,3271,3276,3280,3284,3289,3293,3297],{"type":173,"tag":245,"props":3255,"children":3256},{"style":1352},[3257],{"type":179,"value":2686},{"type":173,"tag":245,"props":3259,"children":3260},{"style":252},[3261],{"type":179,"value":1629},{"type":173,"tag":245,"props":3263,"children":3264},{"style":1358},[3265],{"type":179,"value":3266}," present",{"type":173,"tag":245,"props":3268,"children":3269},{"style":252},[3270],{"type":179,"value":2402},{"type":173,"tag":245,"props":3272,"children":3273},{"style":1358},[3274],{"type":179,"value":3275}," forceMount",{"type":173,"tag":245,"props":3277,"children":3278},{"style":252},[3279],{"type":179,"value":1638},{"type":173,"tag":245,"props":3281,"children":3282},{"style":464},[3283],{"type":179,"value":1366},{"type":173,"tag":245,"props":3285,"children":3286},{"style":1705},[3287],{"type":179,"value":3288}," toRefs",{"type":173,"tag":245,"props":3290,"children":3291},{"style":1376},[3292],{"type":179,"value":1713},{"type":173,"tag":245,"props":3294,"children":3295},{"style":667},[3296],{"type":179,"value":2397},{"type":173,"tag":245,"props":3298,"children":3299},{"style":1376},[3300],{"type":179,"value":2036},{"type":173,"tag":245,"props":3302,"children":3303},{"class":247,"line":287},[3304,3308,3312,3317,3321,3325,3330,3334,3339,3343,3348],{"type":173,"tag":245,"props":3305,"children":3306},{"style":1352},[3307],{"type":179,"value":2686},{"type":173,"tag":245,"props":3309,"children":3310},{"style":252},[3311],{"type":179,"value":1629},{"type":173,"tag":245,"props":3313,"children":3314},{"style":1358},[3315],{"type":179,"value":3316}," isPresent",{"type":173,"tag":245,"props":3318,"children":3319},{"style":252},[3320],{"type":179,"value":1638},{"type":173,"tag":245,"props":3322,"children":3323},{"style":464},[3324],{"type":179,"value":1366},{"type":173,"tag":245,"props":3326,"children":3327},{"style":1705},[3328],{"type":179,"value":3329}," usePresence",{"type":173,"tag":245,"props":3331,"children":3332},{"style":1376},[3333],{"type":179,"value":1713},{"type":173,"tag":245,"props":3335,"children":3336},{"style":667},[3337],{"type":179,"value":3338},"present",{"type":173,"tag":245,"props":3340,"children":3341},{"style":252},[3342],{"type":179,"value":2402},{"type":173,"tag":245,"props":3344,"children":3345},{"style":667},[3346],{"type":179,"value":3347}," node",{"type":173,"tag":245,"props":3349,"children":3350},{"style":1376},[3351],{"type":179,"value":2036},{"type":173,"tag":245,"props":3353,"children":3354},{"class":247,"line":297},[3355,3359,3363,3367],{"type":173,"tag":245,"props":3356,"children":3357},{"style":1346},[3358],{"type":179,"value":2845},{"type":173,"tag":245,"props":3360,"children":3361},{"style":252},[3362],{"type":179,"value":1758},{"type":173,"tag":245,"props":3364,"children":3365},{"style":1352},[3366],{"type":179,"value":1763},{"type":173,"tag":245,"props":3368,"children":3369},{"style":252},[3370],{"type":179,"value":489},{"type":173,"tag":245,"props":3372,"children":3373},{"class":247,"line":311},[3374,3378,3382,3387,3391,3395,3400,3404,3408,3412,3416,3420,3424,3428,3432],{"type":173,"tag":245,"props":3375,"children":3376},{"style":1346},[3377],{"type":179,"value":2437},{"type":173,"tag":245,"props":3379,"children":3380},{"style":1376},[3381],{"type":179,"value":1819},{"type":173,"tag":245,"props":3383,"children":3384},{"style":667},[3385],{"type":179,"value":3386},"forceMount",{"type":173,"tag":245,"props":3388,"children":3389},{"style":252},[3390],{"type":179,"value":573},{"type":173,"tag":245,"props":3392,"children":3393},{"style":667},[3394],{"type":179,"value":1784},{"type":173,"tag":245,"props":3396,"children":3397},{"style":464},[3398],{"type":179,"value":3399}," ||",{"type":173,"tag":245,"props":3401,"children":3402},{"style":667},[3403],{"type":179,"value":3266},{"type":173,"tag":245,"props":3405,"children":3406},{"style":252},[3407],{"type":179,"value":573},{"type":173,"tag":245,"props":3409,"children":3410},{"style":667},[3411],{"type":179,"value":1784},{"type":173,"tag":245,"props":3413,"children":3414},{"style":464},[3415],{"type":179,"value":3399},{"type":173,"tag":245,"props":3417,"children":3418},{"style":667},[3419],{"type":179,"value":3316},{"type":173,"tag":245,"props":3421,"children":3422},{"style":252},[3423],{"type":179,"value":573},{"type":173,"tag":245,"props":3425,"children":3426},{"style":667},[3427],{"type":179,"value":1784},{"type":173,"tag":245,"props":3429,"children":3430},{"style":1376},[3431],{"type":179,"value":3246},{"type":173,"tag":245,"props":3433,"children":3434},{"style":252},[3435],{"type":179,"value":809},{"type":173,"tag":245,"props":3437,"children":3438},{"class":247,"line":343},[3439,3443,3447,3451,3456,3460,3464],{"type":173,"tag":245,"props":3440,"children":3441},{"style":1346},[3442],{"type":179,"value":2476},{"type":173,"tag":245,"props":3444,"children":3445},{"style":1705},[3446],{"type":179,"value":2489},{"type":173,"tag":245,"props":3448,"children":3449},{"style":1376},[3450],{"type":179,"value":1713},{"type":173,"tag":245,"props":3452,"children":3453},{"style":667},[3454],{"type":179,"value":3455},"slots",{"type":173,"tag":245,"props":3457,"children":3458},{"style":252},[3459],{"type":179,"value":573},{"type":173,"tag":245,"props":3461,"children":3462},{"style":1705},[3463],{"type":179,"value":2543},{"type":173,"tag":245,"props":3465,"children":3466},{"style":1376},[3467],{"type":179,"value":3468},"())\n",{"type":173,"tag":245,"props":3470,"children":3471},{"class":247,"line":369},[3472,3477,3482],{"type":173,"tag":245,"props":3473,"children":3474},{"style":252},[3475],{"type":179,"value":3476},"    }",{"type":173,"tag":245,"props":3478,"children":3479},{"style":1346},[3480],{"type":179,"value":3481}," else",{"type":173,"tag":245,"props":3483,"children":3484},{"style":252},[3485],{"type":179,"value":489},{"type":173,"tag":245,"props":3487,"children":3488},{"class":247,"line":378},[3489,3493],{"type":173,"tag":245,"props":3490,"children":3491},{"style":1346},[3492],{"type":179,"value":2476},{"type":173,"tag":245,"props":3494,"children":3496},{"style":3495},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3497],{"type":179,"value":3498}," null\n",{"type":173,"tag":245,"props":3500,"children":3501},{"class":247,"line":395},[3502],{"type":173,"tag":245,"props":3503,"children":3504},{"style":252},[3505],{"type":179,"value":3506},"    }\n",{"type":173,"tag":245,"props":3508,"children":3509},{"class":247,"line":412},[3510],{"type":173,"tag":245,"props":3511,"children":3512},{"style":252},[3513],{"type":179,"value":530},{"type":173,"tag":245,"props":3515,"children":3516},{"class":247,"line":429},[3517],{"type":173,"tag":245,"props":3518,"children":3519},{"style":252},[3520],{"type":179,"value":698},{"type":173,"tag":181,"props":3522,"children":3523},{},[3524],{"type":179,"value":3525},"usePresence 内部有个状态机，用来表示组件所处的挂载状态。Vue 组件有 mounted 和 unmounted 两种，再加一种 unmountSuspended 用来表示动画还在运行。三种状态的流转方式如下：",{"type":173,"tag":3040,"props":3527,"children":3528},{"size":3042},[3529],{"type":179,"value":3530},"\nstateDiagram-v2\n    [*] --> mounted\n    mounted --> unmounted: UNMOUNT\n    mounted --> unmountSuspended: ANIMATION_OUT\n    unmountSuspended --> mounted: MOUNT\n    unmountSuspended --> unmounted: ANIMATION_END\n    unmounted --> mounted: MOUNT\n",{"type":173,"tag":181,"props":3532,"children":3533},{},[3534],{"type":179,"value":3535},"三种状态组合成计算属性 isPresent，只要动画还在运行，isPresent 就是 true，这和上面提到的是一致的。",{"type":173,"tag":235,"props":3537,"children":3539},{"className":1334,"code":3538,"language":1336,"meta":166,"style":166},"const isPresent = computed(() =>\n  ['mounted', 'unmountSuspended'].includes(state.value),\n)\n",[3540],{"type":173,"tag":226,"props":3541,"children":3542},{"__ignoreMap":166},[3543,3577,3646],{"type":173,"tag":245,"props":3544,"children":3545},{"class":247,"line":248},[3546,3550,3554,3558,3563,3567,3572],{"type":173,"tag":245,"props":3547,"children":3548},{"style":1352},[3549],{"type":179,"value":1693},{"type":173,"tag":245,"props":3551,"children":3552},{"style":1358},[3553],{"type":179,"value":3316},{"type":173,"tag":245,"props":3555,"children":3556},{"style":464},[3557],{"type":179,"value":1366},{"type":173,"tag":245,"props":3559,"children":3560},{"style":1705},[3561],{"type":179,"value":3562}," computed",{"type":173,"tag":245,"props":3564,"children":3565},{"style":667},[3566],{"type":179,"value":1713},{"type":173,"tag":245,"props":3568,"children":3569},{"style":252},[3570],{"type":179,"value":3571},"()",{"type":173,"tag":245,"props":3573,"children":3574},{"style":1352},[3575],{"type":179,"value":3576}," =>\n",{"type":173,"tag":245,"props":3578,"children":3579},{"class":247,"line":269},[3580,3585,3589,3594,3598,3602,3606,3611,3615,3619,3623,3628,3633,3637,3642],{"type":173,"tag":245,"props":3581,"children":3582},{"style":667},[3583],{"type":179,"value":3584},"  [",{"type":173,"tag":245,"props":3586,"children":3587},{"style":326},[3588],{"type":179,"value":2464},{"type":173,"tag":245,"props":3590,"children":3591},{"style":332},[3592],{"type":179,"value":3593},"mounted",{"type":173,"tag":245,"props":3595,"children":3596},{"style":326},[3597],{"type":179,"value":2464},{"type":173,"tag":245,"props":3599,"children":3600},{"style":252},[3601],{"type":179,"value":2402},{"type":173,"tag":245,"props":3603,"children":3604},{"style":326},[3605],{"type":179,"value":1648},{"type":173,"tag":245,"props":3607,"children":3608},{"style":332},[3609],{"type":179,"value":3610},"unmountSuspended",{"type":173,"tag":245,"props":3612,"children":3613},{"style":326},[3614],{"type":179,"value":2464},{"type":173,"tag":245,"props":3616,"children":3617},{"style":667},[3618],{"type":179,"value":484},{"type":173,"tag":245,"props":3620,"children":3621},{"style":252},[3622],{"type":179,"value":573},{"type":173,"tag":245,"props":3624,"children":3625},{"style":1705},[3626],{"type":179,"value":3627},"includes",{"type":173,"tag":245,"props":3629,"children":3630},{"style":667},[3631],{"type":179,"value":3632},"(state",{"type":173,"tag":245,"props":3634,"children":3635},{"style":252},[3636],{"type":179,"value":573},{"type":173,"tag":245,"props":3638,"children":3639},{"style":667},[3640],{"type":179,"value":3641},"value)",{"type":173,"tag":245,"props":3643,"children":3644},{"style":252},[3645],{"type":179,"value":1393},{"type":173,"tag":245,"props":3647,"children":3648},{"class":247,"line":287},[3649],{"type":173,"tag":245,"props":3650,"children":3651},{"style":667},[3652],{"type":179,"value":2036},{"type":173,"tag":181,"props":3654,"children":3655},{},[3656],{"type":179,"value":3657},"怎么处理状态的流转呢？代码中根据当前组件是否挂载，以及动画的名称，来决定触发何种状态流转。",{"type":173,"tag":2079,"props":3659,"children":3660},{},[3661,3666,3671,3676],{"type":173,"tag":2083,"props":3662,"children":3663},{},[3664],{"type":179,"value":3665},"组件挂载时，状态切换到 mounted",{"type":173,"tag":2083,"props":3667,"children":3668},{},[3669],{"type":179,"value":3670},"当前没有动画，或节点不可见，状态切换到 unmounted",{"type":173,"tag":2083,"props":3672,"children":3673},{},[3674],{"type":179,"value":3675},"组件已挂载且当前动画正在运行，状态切换到 unmountSuspended",{"type":173,"tag":2083,"props":3677,"children":3678},{},[3679],{"type":179,"value":3680},"动画结束后，状态切换到 unmounted",{"type":173,"tag":235,"props":3682,"children":3684},{"className":1334,"code":3683,"language":1336,"meta":166,"style":166},"watch(\n  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n  present,\n  async (currentPresent, prevPresent) => {\n    const hasPresentChanged = prevPresent !== currentPresent\n    if (hasPresentChanged) {\n      if (currentPresent)\n        dispatch('MOUNT')\n      else if (currentAnimationName === 'none' || styles.value?.display === 'none')\n        dispatch('UNMOUNT')\n      else {\n        const isAnimating = prevAnimationName !== currentAnimationName\n        if (prevPresent && isAnimating)\n          dispatch('ANIMATION_OUT')\n        else\n          dispatch('UNMOUNT')\n      }\n    }\n  }\n)\n",[3685],{"type":173,"tag":226,"props":3686,"children":3687},{"__ignoreMap":166},[3688,3701,3709,3721,3760,3790,3814,3834,3863,3950,3978,3989,4020,4050,4079,4087,4114,4122,4129,4137],{"type":173,"tag":245,"props":3689,"children":3690},{"class":247,"line":248},[3691,3696],{"type":173,"tag":245,"props":3692,"children":3693},{"style":1705},[3694],{"type":179,"value":3695},"watch",{"type":173,"tag":245,"props":3697,"children":3698},{"style":667},[3699],{"type":179,"value":3700},"(\n",{"type":173,"tag":245,"props":3702,"children":3703},{"class":247,"line":269},[3704],{"type":173,"tag":245,"props":3705,"children":3706},{"style":291},[3707],{"type":179,"value":3708},"  // * 这行监听的是外部调用 usePresence(present, node) 中的参数 present\n",{"type":173,"tag":245,"props":3710,"children":3711},{"class":247,"line":287},[3712,3717],{"type":173,"tag":245,"props":3713,"children":3714},{"style":667},[3715],{"type":179,"value":3716},"  present",{"type":173,"tag":245,"props":3718,"children":3719},{"style":252},[3720],{"type":179,"value":1393},{"type":173,"tag":245,"props":3722,"children":3723},{"class":247,"line":297},[3724,3730,3734,3739,3743,3748,3752,3756],{"type":173,"tag":245,"props":3725,"children":3727},{"style":3726},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[3728],{"type":179,"value":3729},"  async",{"type":173,"tag":245,"props":3731,"children":3732},{"style":252},[3733],{"type":179,"value":1819},{"type":173,"tag":245,"props":3735,"children":3736},{"style":1822},[3737],{"type":179,"value":3738},"currentPresent",{"type":173,"tag":245,"props":3740,"children":3741},{"style":252},[3742],{"type":179,"value":2402},{"type":173,"tag":245,"props":3744,"children":3745},{"style":1822},[3746],{"type":179,"value":3747}," prevPresent",{"type":173,"tag":245,"props":3749,"children":3750},{"style":252},[3751],{"type":179,"value":1829},{"type":173,"tag":245,"props":3753,"children":3754},{"style":1352},[3755],{"type":179,"value":1763},{"type":173,"tag":245,"props":3757,"children":3758},{"style":252},[3759],{"type":179,"value":489},{"type":173,"tag":245,"props":3761,"children":3762},{"class":247,"line":311},[3763,3768,3773,3777,3781,3785],{"type":173,"tag":245,"props":3764,"children":3765},{"style":1352},[3766],{"type":179,"value":3767},"    const",{"type":173,"tag":245,"props":3769,"children":3770},{"style":1358},[3771],{"type":179,"value":3772}," hasPresentChanged",{"type":173,"tag":245,"props":3774,"children":3775},{"style":464},[3776],{"type":179,"value":1366},{"type":173,"tag":245,"props":3778,"children":3779},{"style":667},[3780],{"type":179,"value":3747},{"type":173,"tag":245,"props":3782,"children":3783},{"style":464},[3784],{"type":179,"value":2451},{"type":173,"tag":245,"props":3786,"children":3787},{"style":667},[3788],{"type":179,"value":3789}," currentPresent\n",{"type":173,"tag":245,"props":3791,"children":3792},{"class":247,"line":343},[3793,3797,3801,3806,3810],{"type":173,"tag":245,"props":3794,"children":3795},{"style":1346},[3796],{"type":179,"value":2437},{"type":173,"tag":245,"props":3798,"children":3799},{"style":1376},[3800],{"type":179,"value":1819},{"type":173,"tag":245,"props":3802,"children":3803},{"style":667},[3804],{"type":179,"value":3805},"hasPresentChanged",{"type":173,"tag":245,"props":3807,"children":3808},{"style":1376},[3809],{"type":179,"value":3246},{"type":173,"tag":245,"props":3811,"children":3812},{"style":252},[3813],{"type":179,"value":809},{"type":173,"tag":245,"props":3815,"children":3816},{"class":247,"line":369},[3817,3822,3826,3830],{"type":173,"tag":245,"props":3818,"children":3819},{"style":1346},[3820],{"type":179,"value":3821},"      if",{"type":173,"tag":245,"props":3823,"children":3824},{"style":1376},[3825],{"type":179,"value":1819},{"type":173,"tag":245,"props":3827,"children":3828},{"style":667},[3829],{"type":179,"value":3738},{"type":173,"tag":245,"props":3831,"children":3832},{"style":1376},[3833],{"type":179,"value":2036},{"type":173,"tag":245,"props":3835,"children":3836},{"class":247,"line":378},[3837,3842,3846,3850,3855,3859],{"type":173,"tag":245,"props":3838,"children":3839},{"style":1705},[3840],{"type":179,"value":3841},"        dispatch",{"type":173,"tag":245,"props":3843,"children":3844},{"style":1376},[3845],{"type":179,"value":1713},{"type":173,"tag":245,"props":3847,"children":3848},{"style":326},[3849],{"type":179,"value":2464},{"type":173,"tag":245,"props":3851,"children":3852},{"style":332},[3853],{"type":179,"value":3854},"MOUNT",{"type":173,"tag":245,"props":3856,"children":3857},{"style":326},[3858],{"type":179,"value":2464},{"type":173,"tag":245,"props":3860,"children":3861},{"style":1376},[3862],{"type":179,"value":2036},{"type":173,"tag":245,"props":3864,"children":3865},{"class":247,"line":395},[3866,3871,3876,3880,3885,3890,3894,3899,3903,3907,3912,3916,3920,3925,3930,3934,3938,3942,3946],{"type":173,"tag":245,"props":3867,"children":3868},{"style":1346},[3869],{"type":179,"value":3870},"      else",{"type":173,"tag":245,"props":3872,"children":3873},{"style":1346},[3874],{"type":179,"value":3875}," if",{"type":173,"tag":245,"props":3877,"children":3878},{"style":1376},[3879],{"type":179,"value":1819},{"type":173,"tag":245,"props":3881,"children":3882},{"style":667},[3883],{"type":179,"value":3884},"currentAnimationName",{"type":173,"tag":245,"props":3886,"children":3887},{"style":464},[3888],{"type":179,"value":3889}," ===",{"type":173,"tag":245,"props":3891,"children":3892},{"style":326},[3893],{"type":179,"value":1648},{"type":173,"tag":245,"props":3895,"children":3896},{"style":332},[3897],{"type":179,"value":3898},"none",{"type":173,"tag":245,"props":3900,"children":3901},{"style":326},[3902],{"type":179,"value":2464},{"type":173,"tag":245,"props":3904,"children":3905},{"style":464},[3906],{"type":179,"value":3399},{"type":173,"tag":245,"props":3908,"children":3909},{"style":667},[3910],{"type":179,"value":3911}," styles",{"type":173,"tag":245,"props":3913,"children":3914},{"style":252},[3915],{"type":179,"value":573},{"type":173,"tag":245,"props":3917,"children":3918},{"style":667},[3919],{"type":179,"value":1784},{"type":173,"tag":245,"props":3921,"children":3922},{"style":252},[3923],{"type":179,"value":3924},"?.",{"type":173,"tag":245,"props":3926,"children":3927},{"style":667},[3928],{"type":179,"value":3929},"display",{"type":173,"tag":245,"props":3931,"children":3932},{"style":464},[3933],{"type":179,"value":3889},{"type":173,"tag":245,"props":3935,"children":3936},{"style":326},[3937],{"type":179,"value":1648},{"type":173,"tag":245,"props":3939,"children":3940},{"style":332},[3941],{"type":179,"value":3898},{"type":173,"tag":245,"props":3943,"children":3944},{"style":326},[3945],{"type":179,"value":2464},{"type":173,"tag":245,"props":3947,"children":3948},{"style":1376},[3949],{"type":179,"value":2036},{"type":173,"tag":245,"props":3951,"children":3952},{"class":247,"line":412},[3953,3957,3961,3965,3970,3974],{"type":173,"tag":245,"props":3954,"children":3955},{"style":1705},[3956],{"type":179,"value":3841},{"type":173,"tag":245,"props":3958,"children":3959},{"style":1376},[3960],{"type":179,"value":1713},{"type":173,"tag":245,"props":3962,"children":3963},{"style":326},[3964],{"type":179,"value":2464},{"type":173,"tag":245,"props":3966,"children":3967},{"style":332},[3968],{"type":179,"value":3969},"UNMOUNT",{"type":173,"tag":245,"props":3971,"children":3972},{"style":326},[3973],{"type":179,"value":2464},{"type":173,"tag":245,"props":3975,"children":3976},{"style":1376},[3977],{"type":179,"value":2036},{"type":173,"tag":245,"props":3979,"children":3980},{"class":247,"line":429},[3981,3985],{"type":173,"tag":245,"props":3982,"children":3983},{"style":1346},[3984],{"type":179,"value":3870},{"type":173,"tag":245,"props":3986,"children":3987},{"style":252},[3988],{"type":179,"value":489},{"type":173,"tag":245,"props":3990,"children":3991},{"class":247,"line":438},[3992,3997,4002,4006,4011,4015],{"type":173,"tag":245,"props":3993,"children":3994},{"style":1352},[3995],{"type":179,"value":3996},"        const",{"type":173,"tag":245,"props":3998,"children":3999},{"style":1358},[4000],{"type":179,"value":4001}," isAnimating",{"type":173,"tag":245,"props":4003,"children":4004},{"style":464},[4005],{"type":179,"value":1366},{"type":173,"tag":245,"props":4007,"children":4008},{"style":667},[4009],{"type":179,"value":4010}," prevAnimationName",{"type":173,"tag":245,"props":4012,"children":4013},{"style":464},[4014],{"type":179,"value":2451},{"type":173,"tag":245,"props":4016,"children":4017},{"style":667},[4018],{"type":179,"value":4019}," currentAnimationName\n",{"type":173,"tag":245,"props":4021,"children":4022},{"class":247,"line":492},[4023,4028,4032,4037,4042,4046],{"type":173,"tag":245,"props":4024,"children":4025},{"style":1346},[4026],{"type":179,"value":4027},"        if",{"type":173,"tag":245,"props":4029,"children":4030},{"style":1376},[4031],{"type":179,"value":1819},{"type":173,"tag":245,"props":4033,"children":4034},{"style":667},[4035],{"type":179,"value":4036},"prevPresent",{"type":173,"tag":245,"props":4038,"children":4039},{"style":464},[4040],{"type":179,"value":4041}," &&",{"type":173,"tag":245,"props":4043,"children":4044},{"style":667},[4045],{"type":179,"value":4001},{"type":173,"tag":245,"props":4047,"children":4048},{"style":1376},[4049],{"type":179,"value":2036},{"type":173,"tag":245,"props":4051,"children":4052},{"class":247,"line":524},[4053,4058,4062,4066,4071,4075],{"type":173,"tag":245,"props":4054,"children":4055},{"style":1705},[4056],{"type":179,"value":4057},"          dispatch",{"type":173,"tag":245,"props":4059,"children":4060},{"style":1376},[4061],{"type":179,"value":1713},{"type":173,"tag":245,"props":4063,"children":4064},{"style":326},[4065],{"type":179,"value":2464},{"type":173,"tag":245,"props":4067,"children":4068},{"style":332},[4069],{"type":179,"value":4070},"ANIMATION_OUT",{"type":173,"tag":245,"props":4072,"children":4073},{"style":326},[4074],{"type":179,"value":2464},{"type":173,"tag":245,"props":4076,"children":4077},{"style":1376},[4078],{"type":179,"value":2036},{"type":173,"tag":245,"props":4080,"children":4081},{"class":247,"line":533},[4082],{"type":173,"tag":245,"props":4083,"children":4084},{"style":1346},[4085],{"type":179,"value":4086},"        else\n",{"type":173,"tag":245,"props":4088,"children":4089},{"class":247,"line":2000},[4090,4094,4098,4102,4106,4110],{"type":173,"tag":245,"props":4091,"children":4092},{"style":1705},[4093],{"type":179,"value":4057},{"type":173,"tag":245,"props":4095,"children":4096},{"style":1376},[4097],{"type":179,"value":1713},{"type":173,"tag":245,"props":4099,"children":4100},{"style":326},[4101],{"type":179,"value":2464},{"type":173,"tag":245,"props":4103,"children":4104},{"style":332},[4105],{"type":179,"value":3969},{"type":173,"tag":245,"props":4107,"children":4108},{"style":326},[4109],{"type":179,"value":2464},{"type":173,"tag":245,"props":4111,"children":4112},{"style":1376},[4113],{"type":179,"value":2036},{"type":173,"tag":245,"props":4115,"children":4116},{"class":247,"line":2013},[4117],{"type":173,"tag":245,"props":4118,"children":4119},{"style":252},[4120],{"type":179,"value":4121},"      }\n",{"type":173,"tag":245,"props":4123,"children":4124},{"class":247,"line":2026},[4125],{"type":173,"tag":245,"props":4126,"children":4127},{"style":252},[4128],{"type":179,"value":3506},{"type":173,"tag":245,"props":4130,"children":4132},{"class":247,"line":4131},19,[4133],{"type":173,"tag":245,"props":4134,"children":4135},{"style":252},[4136],{"type":179,"value":530},{"type":173,"tag":245,"props":4138,"children":4140},{"class":247,"line":4139},20,[4141],{"type":173,"tag":245,"props":4142,"children":4143},{"style":667},[4144],{"type":179,"value":2036},{"type":173,"tag":181,"props":4146,"children":4147},{},[4148],{"type":179,"value":4149},"上面这个 watch 中使用到的 styles 样式，即 getComputedStyle 获得的样式；动画名称，则是 getComputedStyle().animationName 获得的动画名称，如果没有动画名称，则回退为默认值 'none'。至于何时才算 !isAnimating 还没有说清楚，因为要提到 currentAnimationName 和 prevAnimationName 的变化。",{"type":173,"tag":181,"props":4151,"children":4152},{},[4153],{"type":179,"value":4154},"每次动画开始时（addEventListener(animationstart)），会重新计算动画名称，存放到 prevAnimationName 中。watch 监听时，currentAnimationName 会实时计算，这样就能对比得到当前动画是否在运行。比如上一个动画是 fadeIn，当前动画是 none，就意味着允许卸载了（状态流转到 unmounted）。此外，动画结束时，会主动触发 ANIMATION_END 事件，转换状态到 unmounted。",{"type":173,"tag":235,"props":4156,"children":4158},{"className":1334,"code":4157,"language":1336,"meta":166,"style":166},"const handleAnimationEnd = (event: AnimationEvent) => {\n  const currentAnimationName = getAnimationName(node.value)\n  const isCurrentAnimation = currentAnimationName.includes(event.animationName)\n  if (event.target === node.value && isCurrentAnimation) {\n    dispatch('ANIMATION_END')\n  }\n}\n",[4159],{"type":173,"tag":226,"props":4160,"children":4161},{"__ignoreMap":166},[4162,4210,4252,4301,4358,4387,4394],{"type":173,"tag":245,"props":4163,"children":4164},{"class":247,"line":248},[4165,4169,4175,4179,4183,4188,4192,4198,4202,4206],{"type":173,"tag":245,"props":4166,"children":4167},{"style":1352},[4168],{"type":179,"value":1693},{"type":173,"tag":245,"props":4170,"children":4172},{"style":4171},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4173],{"type":179,"value":4174}," handleAnimationEnd",{"type":173,"tag":245,"props":4176,"children":4177},{"style":464},[4178],{"type":179,"value":1366},{"type":173,"tag":245,"props":4180,"children":4181},{"style":252},[4182],{"type":179,"value":1819},{"type":173,"tag":245,"props":4184,"children":4185},{"style":1822},[4186],{"type":179,"value":4187},"event",{"type":173,"tag":245,"props":4189,"children":4190},{"style":464},[4191],{"type":179,"value":504},{"type":173,"tag":245,"props":4193,"children":4195},{"style":4194},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[4196],{"type":179,"value":4197}," AnimationEvent",{"type":173,"tag":245,"props":4199,"children":4200},{"style":252},[4201],{"type":179,"value":1829},{"type":173,"tag":245,"props":4203,"children":4204},{"style":1352},[4205],{"type":179,"value":1763},{"type":173,"tag":245,"props":4207,"children":4208},{"style":252},[4209],{"type":179,"value":489},{"type":173,"tag":245,"props":4211,"children":4212},{"class":247,"line":269},[4213,4217,4222,4226,4231,4235,4240,4244,4248],{"type":173,"tag":245,"props":4214,"children":4215},{"style":1352},[4216],{"type":179,"value":2686},{"type":173,"tag":245,"props":4218,"children":4219},{"style":1358},[4220],{"type":179,"value":4221}," currentAnimationName",{"type":173,"tag":245,"props":4223,"children":4224},{"style":464},[4225],{"type":179,"value":1366},{"type":173,"tag":245,"props":4227,"children":4228},{"style":1705},[4229],{"type":179,"value":4230}," getAnimationName",{"type":173,"tag":245,"props":4232,"children":4233},{"style":1376},[4234],{"type":179,"value":1713},{"type":173,"tag":245,"props":4236,"children":4237},{"style":667},[4238],{"type":179,"value":4239},"node",{"type":173,"tag":245,"props":4241,"children":4242},{"style":252},[4243],{"type":179,"value":573},{"type":173,"tag":245,"props":4245,"children":4246},{"style":667},[4247],{"type":179,"value":1784},{"type":173,"tag":245,"props":4249,"children":4250},{"style":1376},[4251],{"type":179,"value":2036},{"type":173,"tag":245,"props":4253,"children":4254},{"class":247,"line":287},[4255,4259,4264,4268,4272,4276,4280,4284,4288,4292,4297],{"type":173,"tag":245,"props":4256,"children":4257},{"style":1352},[4258],{"type":179,"value":2686},{"type":173,"tag":245,"props":4260,"children":4261},{"style":1358},[4262],{"type":179,"value":4263}," isCurrentAnimation",{"type":173,"tag":245,"props":4265,"children":4266},{"style":464},[4267],{"type":179,"value":1366},{"type":173,"tag":245,"props":4269,"children":4270},{"style":667},[4271],{"type":179,"value":4221},{"type":173,"tag":245,"props":4273,"children":4274},{"style":252},[4275],{"type":179,"value":573},{"type":173,"tag":245,"props":4277,"children":4278},{"style":1705},[4279],{"type":179,"value":3627},{"type":173,"tag":245,"props":4281,"children":4282},{"style":1376},[4283],{"type":179,"value":1713},{"type":173,"tag":245,"props":4285,"children":4286},{"style":667},[4287],{"type":179,"value":4187},{"type":173,"tag":245,"props":4289,"children":4290},{"style":252},[4291],{"type":179,"value":573},{"type":173,"tag":245,"props":4293,"children":4294},{"style":667},[4295],{"type":179,"value":4296},"animationName",{"type":173,"tag":245,"props":4298,"children":4299},{"style":1376},[4300],{"type":179,"value":2036},{"type":173,"tag":245,"props":4302,"children":4303},{"class":247,"line":297},[4304,4309,4313,4317,4321,4326,4330,4334,4338,4342,4346,4350,4354],{"type":173,"tag":245,"props":4305,"children":4306},{"style":1346},[4307],{"type":179,"value":4308},"  if",{"type":173,"tag":245,"props":4310,"children":4311},{"style":1376},[4312],{"type":179,"value":1819},{"type":173,"tag":245,"props":4314,"children":4315},{"style":667},[4316],{"type":179,"value":4187},{"type":173,"tag":245,"props":4318,"children":4319},{"style":252},[4320],{"type":179,"value":573},{"type":173,"tag":245,"props":4322,"children":4323},{"style":667},[4324],{"type":179,"value":4325},"target",{"type":173,"tag":245,"props":4327,"children":4328},{"style":464},[4329],{"type":179,"value":3889},{"type":173,"tag":245,"props":4331,"children":4332},{"style":667},[4333],{"type":179,"value":3347},{"type":173,"tag":245,"props":4335,"children":4336},{"style":252},[4337],{"type":179,"value":573},{"type":173,"tag":245,"props":4339,"children":4340},{"style":667},[4341],{"type":179,"value":1784},{"type":173,"tag":245,"props":4343,"children":4344},{"style":464},[4345],{"type":179,"value":4041},{"type":173,"tag":245,"props":4347,"children":4348},{"style":667},[4349],{"type":179,"value":4263},{"type":173,"tag":245,"props":4351,"children":4352},{"style":1376},[4353],{"type":179,"value":3246},{"type":173,"tag":245,"props":4355,"children":4356},{"style":252},[4357],{"type":179,"value":809},{"type":173,"tag":245,"props":4359,"children":4360},{"class":247,"line":311},[4361,4366,4370,4374,4379,4383],{"type":173,"tag":245,"props":4362,"children":4363},{"style":1705},[4364],{"type":179,"value":4365},"    dispatch",{"type":173,"tag":245,"props":4367,"children":4368},{"style":1376},[4369],{"type":179,"value":1713},{"type":173,"tag":245,"props":4371,"children":4372},{"style":326},[4373],{"type":179,"value":2464},{"type":173,"tag":245,"props":4375,"children":4376},{"style":332},[4377],{"type":179,"value":4378},"ANIMATION_END",{"type":173,"tag":245,"props":4380,"children":4381},{"style":326},[4382],{"type":179,"value":2464},{"type":173,"tag":245,"props":4384,"children":4385},{"style":1376},[4386],{"type":179,"value":2036},{"type":173,"tag":245,"props":4388,"children":4389},{"class":247,"line":343},[4390],{"type":173,"tag":245,"props":4391,"children":4392},{"style":252},[4393],{"type":179,"value":530},{"type":173,"tag":245,"props":4395,"children":4396},{"class":247,"line":369},[4397],{"type":173,"tag":245,"props":4398,"children":4399},{"style":252},[4400],{"type":179,"value":698},{"type":173,"tag":181,"props":4402,"children":4403},{},[4404],{"type":179,"value":4405},"最后，为什么 Presence 组件的支持 Vue Transition 呢？这是因为 usePresence 中每次转换状态时，都会抛出一个自定义事件。回到上面那个 watch 的例子中，以组件 mounted 为例，其他事件同理。",{"type":173,"tag":235,"props":4407,"children":4409},{"className":1334,"code":4408,"language":1336,"meta":166,"style":166},"watch(presence, () => {\n  if (currentPresent) {\n    dispatch('MOUNT')\n    dispatchCustomEvent('enter')\n    if (currentAnimationName === 'none')\n      dispatchCustomEvent('after-enter')\n  }\n})\n",[4410],{"type":173,"tag":226,"props":4411,"children":4412},{"__ignoreMap":166},[4413,4441,4464,4491,4520,4555,4584,4591],{"type":173,"tag":245,"props":4414,"children":4415},{"class":247,"line":248},[4416,4420,4425,4429,4433,4437],{"type":173,"tag":245,"props":4417,"children":4418},{"style":1705},[4419],{"type":179,"value":3695},{"type":173,"tag":245,"props":4421,"children":4422},{"style":667},[4423],{"type":179,"value":4424},"(presence",{"type":173,"tag":245,"props":4426,"children":4427},{"style":252},[4428],{"type":179,"value":2402},{"type":173,"tag":245,"props":4430,"children":4431},{"style":252},[4432],{"type":179,"value":1758},{"type":173,"tag":245,"props":4434,"children":4435},{"style":1352},[4436],{"type":179,"value":1763},{"type":173,"tag":245,"props":4438,"children":4439},{"style":252},[4440],{"type":179,"value":489},{"type":173,"tag":245,"props":4442,"children":4443},{"class":247,"line":269},[4444,4448,4452,4456,4460],{"type":173,"tag":245,"props":4445,"children":4446},{"style":1346},[4447],{"type":179,"value":4308},{"type":173,"tag":245,"props":4449,"children":4450},{"style":1376},[4451],{"type":179,"value":1819},{"type":173,"tag":245,"props":4453,"children":4454},{"style":667},[4455],{"type":179,"value":3738},{"type":173,"tag":245,"props":4457,"children":4458},{"style":1376},[4459],{"type":179,"value":3246},{"type":173,"tag":245,"props":4461,"children":4462},{"style":252},[4463],{"type":179,"value":809},{"type":173,"tag":245,"props":4465,"children":4466},{"class":247,"line":287},[4467,4471,4475,4479,4483,4487],{"type":173,"tag":245,"props":4468,"children":4469},{"style":1705},[4470],{"type":179,"value":4365},{"type":173,"tag":245,"props":4472,"children":4473},{"style":1376},[4474],{"type":179,"value":1713},{"type":173,"tag":245,"props":4476,"children":4477},{"style":326},[4478],{"type":179,"value":2464},{"type":173,"tag":245,"props":4480,"children":4481},{"style":332},[4482],{"type":179,"value":3854},{"type":173,"tag":245,"props":4484,"children":4485},{"style":326},[4486],{"type":179,"value":2464},{"type":173,"tag":245,"props":4488,"children":4489},{"style":1376},[4490],{"type":179,"value":2036},{"type":173,"tag":245,"props":4492,"children":4493},{"class":247,"line":297},[4494,4499,4503,4507,4512,4516],{"type":173,"tag":245,"props":4495,"children":4496},{"style":1705},[4497],{"type":179,"value":4498},"    dispatchCustomEvent",{"type":173,"tag":245,"props":4500,"children":4501},{"style":1376},[4502],{"type":179,"value":1713},{"type":173,"tag":245,"props":4504,"children":4505},{"style":326},[4506],{"type":179,"value":2464},{"type":173,"tag":245,"props":4508,"children":4509},{"style":332},[4510],{"type":179,"value":4511},"enter",{"type":173,"tag":245,"props":4513,"children":4514},{"style":326},[4515],{"type":179,"value":2464},{"type":173,"tag":245,"props":4517,"children":4518},{"style":1376},[4519],{"type":179,"value":2036},{"type":173,"tag":245,"props":4521,"children":4522},{"class":247,"line":311},[4523,4527,4531,4535,4539,4543,4547,4551],{"type":173,"tag":245,"props":4524,"children":4525},{"style":1346},[4526],{"type":179,"value":2437},{"type":173,"tag":245,"props":4528,"children":4529},{"style":1376},[4530],{"type":179,"value":1819},{"type":173,"tag":245,"props":4532,"children":4533},{"style":667},[4534],{"type":179,"value":3884},{"type":173,"tag":245,"props":4536,"children":4537},{"style":464},[4538],{"type":179,"value":3889},{"type":173,"tag":245,"props":4540,"children":4541},{"style":326},[4542],{"type":179,"value":1648},{"type":173,"tag":245,"props":4544,"children":4545},{"style":332},[4546],{"type":179,"value":3898},{"type":173,"tag":245,"props":4548,"children":4549},{"style":326},[4550],{"type":179,"value":2464},{"type":173,"tag":245,"props":4552,"children":4553},{"style":1376},[4554],{"type":179,"value":2036},{"type":173,"tag":245,"props":4556,"children":4557},{"class":247,"line":343},[4558,4563,4567,4571,4576,4580],{"type":173,"tag":245,"props":4559,"children":4560},{"style":1705},[4561],{"type":179,"value":4562},"      dispatchCustomEvent",{"type":173,"tag":245,"props":4564,"children":4565},{"style":1376},[4566],{"type":179,"value":1713},{"type":173,"tag":245,"props":4568,"children":4569},{"style":326},[4570],{"type":179,"value":2464},{"type":173,"tag":245,"props":4572,"children":4573},{"style":332},[4574],{"type":179,"value":4575},"after-enter",{"type":173,"tag":245,"props":4577,"children":4578},{"style":326},[4579],{"type":179,"value":2464},{"type":173,"tag":245,"props":4581,"children":4582},{"style":1376},[4583],{"type":179,"value":2036},{"type":173,"tag":245,"props":4585,"children":4586},{"class":247,"line":369},[4587],{"type":173,"tag":245,"props":4588,"children":4589},{"style":252},[4590],{"type":179,"value":530},{"type":173,"tag":245,"props":4592,"children":4593},{"class":247,"line":378},[4594,4598],{"type":173,"tag":245,"props":4595,"children":4596},{"style":252},[4597],{"type":179,"value":1464},{"type":173,"tag":245,"props":4599,"children":4600},{"style":667},[4601],{"type":179,"value":2036},{"type":173,"tag":174,"props":4603,"children":4605},{"id":4604},"组件代码",[4606],{"type":179,"value":4604},{"type":173,"tag":181,"props":4608,"children":4609},{},[4610],{"type":179,"value":4611},"如果有有意思的组件代码，会放到在这一小节介绍。",{"type":173,"tag":422,"props":4613,"children":4614},{},[4615],{"type":179,"value":4616},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":269,"depth":269,"links":4618},[4619,4620,4621,4622],{"id":176,"depth":269,"text":176},{"id":2070,"depth":269,"text":2070},{"id":2190,"depth":269,"text":2190},{"id":4604,"depth":269,"text":4604},"markdown","content:8.source-code:_js:reka-ui.md","content","8.source-code/_js/reka-ui.md","8.source-code/_js/reka-ui",[4629,4632],{"_path":4630,"title":4631,"description":4631},"/source-code/_js/nuxt-ui-v3","Nuxt UI v3",{"_path":4633,"title":4634,"description":4635},"/source-code/_js/vue-error-boundary","vue-error-boundary","错误边界最早是由 React 提出的概念，但偶然发现 vue 有对应实现，那就来看看吧",1750854383774]