[{"data":1,"prerenderedAt":1907},["Reactive",2],{"navigation":3,"/source-code/_js/vue2-source/global-api":383,"/source-code/_js/vue2-source/global-api-surround":1900},[4,32,80,96,123,129,135,366,372,378],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":42,"_path":43},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":45,"_path":46},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":48,"_path":49},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":51,"_path":52},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":54,"_path":55},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":57,"_path":58},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":60,"_path":61},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":63,"_path":64},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":66,"_path":67},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":69,"_path":70},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":72,"_path":73},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":75,"_path":76},"🚝 四十二篇系列","/articles/fourty-two",{"title":78,"_path":79},"📝 技术博客归档","/articles/fold",{"title":81,"_path":82,"children":83},"造物 / Make","/tools",[84,87,90,93],{"title":85,"_path":86},"🌐 AnySort","/tools/anysort",{"title":88,"_path":89},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":91,"_path":92},"👓 Crapto","/tools/crypto-inline",{"title":94,"_path":95},"🖨️ any-to-base64","/tools/any-to-base64",{"title":97,"_path":98,"children":99},"吉他剧场 / Music","/music",[100,102,105,108,111,114,117,120],{"title":101,"_path":98},"🎸 FingerStyle！",{"title":103,"_path":104},"🌬️ 等待的风","/music/wind",{"title":106,"_path":107},"💕 约定的海洋","/music/ocean",{"title":109,"_path":110},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":112,"_path":113},"🌏 残酷天使的行动纲领","/music/eva",{"title":115,"_path":116},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":118,"_path":119},"🍷 Wu Wei","/music/wu-wei",{"title":121,"_path":122},"🌅 无题","/music/untitled",{"title":124,"_path":125,"children":126},"画点什么 / Paint","/paint",[127],{"title":128,"_path":125},"🚧 正在施工",{"title":130,"_path":131,"children":132},"知识地图 / Maps","/maps",[133],{"title":134,"_path":131},"🏁 知识地图",{"title":136,"_path":137,"children":138},"零散的笔记 / Gists","/gists",[139,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363],{"title":140,"_path":137},"🧊 Gists",{"title":142,"_path":143},"网站的可访问性","/gists/accessibility",{"title":145,"_path":146},"图片模糊","/gists/blur",{"title":148,"_path":149},"渲染相关笔记","/gists/c4d",{"title":151,"_path":152},"CDN 问题记录","/gists/cdn",{"title":154,"_path":155},"消毒剂","/gists/cleaner",{"title":157,"_path":158},"Windows Command","/gists/cmd",{"title":160,"_path":161},"Command","/gists/command",{"title":163,"_path":164},"复杂科学","/gists/complexity-science",{"title":166,"_path":167},"宇宙","/gists/cosmos",{"title":169,"_path":170},"C++","/gists/cpp",{"title":172,"_path":173},"Data Structure","/gists/data-structure",{"title":175,"_path":176},"DEPRESSION","/gists/depression",{"title":178,"_path":179},"设计模式","/gists/design-patterns",{"title":181,"_path":182},"Developer Experience","/gists/developer-experience",{"title":184,"_path":185},"Device Metrics","/gists/device-metrix",{"title":187,"_path":188},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":190,"_path":191},"正则表达式","/gists/eegex",{"title":193,"_path":194},"Emoji","/gists/emoji",{"title":196,"_path":197},"工程","/gists/engineering",{"title":199,"_path":200},"熵","/gists/entropy",{"title":202,"_path":203},"Environment","/gists/environment",{"title":205,"_path":206},"Erlang","/gists/erlang",{"title":208,"_path":209},"逃离塔克夫","/gists/escape-from-tarkov",{"title":211,"_path":212},"ESNext (ES6-ES11)","/gists/esnext",{"title":214,"_path":215},"Eval！","/gists/eval",{"title":217,"_path":218},"Flutter","/gists/flutter",{"title":220,"_path":221},"字体","/gists/font",{"title":223,"_path":224},"JS 函数式编程","/gists/functional",{"title":226,"_path":227},"Google C++ Standard","/gists/google-cpp-standard",{"title":229,"_path":230},"双向链接完全体","/gists/graph",{"title":232,"_path":233},"Hardwares","/gists/hardwares",{"title":235,"_path":236},"哈希冲突","/gists/hash-collision",{"title":238,"_path":239},"信息设计","/gists/information-design",{"title":241,"_path":242},"InstantPage","/gists/instant.page",{"title":244,"_path":245},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":247,"_path":248},"KVStore","/gists/key-value-db",{"title":250,"_path":251},"Kubernetes","/gists/kubernetes",{"title":253,"_path":254},"Makefile","/gists/makefile",{"title":256,"_path":257},"Markdown Inline Style","/gists/markdown-nice",{"title":259,"_path":260},"小程序","/gists/miniapp",{"title":262,"_path":263},"减小页面快照体积","/gists/minify-html",{"title":265,"_path":266},"mklink","/gists/mklink",{"title":268,"_path":269},"Mock","/gists/mock",{"title":271,"_path":272},"多端应用","/gists/multy-end-app",{"title":274,"_path":275},"神经科学","/gists/neuroscience",{"title":277,"_path":278},"OO","/gists/oo",{"title":280,"_path":281},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":283,"_path":284},"人物","/gists/person",{"title":286,"_path":287},"PInvoke","/gists/pinvoke",{"title":289,"_path":290},"像素","/gists/pixel",{"title":292,"_path":293},"PowerShell","/gists/powershell",{"title":295,"_path":296},"量子","/gists/quantum",{"title":298,"_path":299},"保持好奇心","/gists/questions",{"title":301,"_path":302},"React Native","/gists/react-native",{"title":304,"_path":305},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":307,"_path":308},"SEO","/gists/seo",{"title":310,"_path":311},"Shader","/gists/shader",{"title":313,"_path":314},"Shape Up","/gists/shape-up",{"title":316,"_path":317},"睡觉","/gists/sleep",{"title":319,"_path":320},"States","/gists/states",{"title":322,"_path":323},"Storage","/gists/storage",{"title":325,"_path":326},"音视频流处理","/gists/stream-cli",{"title":328,"_path":329},"Symbol","/gists/symbol",{"title":331,"_path":332},"系统论","/gists/systems-theory",{"title":334,"_path":335},"Taro","/gists/taro",{"title":337,"_path":338},"任务切片","/gists/task-slice",{"title":340,"_path":341},"技术偏好","/gists/tech-dudge",{"title":343,"_path":344},"Untitled","/gists/untitled",{"title":346,"_path":347},"可变字体","/gists/variable-font",{"title":349,"_path":350},"视觉错觉","/gists/visual-illusion",{"title":352,"_path":353},"SS(SSR)","/gists/vpn",{"title":355,"_path":356},"VS Code 插件开发","/gists/vscode-plugin",{"title":358,"_path":359},"Web Components","/gists/web-components",{"title":361,"_path":362},"Windows","/gists/windows",{"title":364,"_path":365},"查缺补漏","/gists/wrong",{"title":367,"_path":368,"children":369},"代码笔记 / Gists","/source-code",[370],{"title":371,"_path":368},"🚄 代码笔记",{"title":373,"_path":374,"children":375},"我 / Abount","/hire",[376],{"title":377,"_path":374},"📬 技术简历",{"title":379,"_path":380,"children":381},"todo","/todo",[382],{"title":379,"_path":380},{"_path":384,"_dir":385,"_draft":386,"_partial":387,"_locale":388,"title":389,"description":390,"body":391,"_type":1895,"_id":1896,"_source":1897,"_file":1898,"_extension":1899},"/source-code/_js/vue2-source/global-api","vue2-source",false,true,"","Vue2 Global API","deprecated warning",{"type":392,"children":393,"toc":1891},"root",[394,403,409,414,792,797,1806,1811,1816,1863,1868,1885],{"type":395,"tag":396,"props":397,"children":399},"element","h2",{"id":398},"nexttick",[400],{"type":401,"value":402},"text","$nextTick",{"type":395,"tag":404,"props":405,"children":406},"p",{},[407],{"type":401,"value":408},"阅读这个 API 首先要先熟悉浏览器的任务循环机制。",{"type":395,"tag":404,"props":410,"children":411},{},[412],{"type":401,"value":413},"Vue.$nextTick 是在实例渲染时被挂载的辅助函数。",{"type":395,"tag":415,"props":416,"children":420},"pre",{"className":417,"code":418,"language":419,"meta":388,"style":388},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","// /src/core/instance/render\nexport function renderMixin(Vue) {\n  Vue.prototype.$nextTick = function (fn) {\n    // 绑定上下文为 Vue 实例\n    return nextTick(fn, this);\n  };\n}\n\n// 使用的时候，只需要传入回调即可\nnew Vue({\n  mounted() {\n    this.$nextTick(() => {\n      console.log(\"callback executed\");\n    });\n  },\n});\n","js",[421],{"type":395,"tag":422,"props":423,"children":424},"code",{"__ignoreMap":388},[425,437,481,538,547,591,600,609,618,627,650,669,703,749,766,775],{"type":395,"tag":426,"props":427,"children":430},"span",{"class":428,"line":429},"line",1,[431],{"type":395,"tag":426,"props":432,"children":434},{"style":433},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[435],{"type":401,"value":436},"// /src/core/instance/render\n",{"type":395,"tag":426,"props":438,"children":440},{"class":428,"line":439},2,[441,447,453,459,465,471,476],{"type":395,"tag":426,"props":442,"children":444},{"style":443},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[445],{"type":401,"value":446},"export",{"type":395,"tag":426,"props":448,"children":450},{"style":449},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[451],{"type":401,"value":452}," function",{"type":395,"tag":426,"props":454,"children":456},{"style":455},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[457],{"type":401,"value":458}," renderMixin",{"type":395,"tag":426,"props":460,"children":462},{"style":461},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[463],{"type":401,"value":464},"(",{"type":395,"tag":426,"props":466,"children":468},{"style":467},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[469],{"type":401,"value":470},"Vue",{"type":395,"tag":426,"props":472,"children":473},{"style":461},[474],{"type":401,"value":475},")",{"type":395,"tag":426,"props":477,"children":478},{"style":461},[479],{"type":401,"value":480}," {\n",{"type":395,"tag":426,"props":482,"children":484},{"class":428,"line":483},3,[485,491,496,502,506,510,516,520,525,530,534],{"type":395,"tag":426,"props":486,"children":488},{"style":487},"--shiki-light:#E2931D;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[489],{"type":401,"value":490},"  Vue",{"type":395,"tag":426,"props":492,"children":493},{"style":461},[494],{"type":401,"value":495},".",{"type":395,"tag":426,"props":497,"children":499},{"style":498},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[500],{"type":401,"value":501},"prototype",{"type":395,"tag":426,"props":503,"children":504},{"style":461},[505],{"type":401,"value":495},{"type":395,"tag":426,"props":507,"children":508},{"style":455},[509],{"type":401,"value":402},{"type":395,"tag":426,"props":511,"children":513},{"style":512},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[514],{"type":401,"value":515}," =",{"type":395,"tag":426,"props":517,"children":518},{"style":449},[519],{"type":401,"value":452},{"type":395,"tag":426,"props":521,"children":522},{"style":461},[523],{"type":401,"value":524}," (",{"type":395,"tag":426,"props":526,"children":527},{"style":467},[528],{"type":401,"value":529},"fn",{"type":395,"tag":426,"props":531,"children":532},{"style":461},[533],{"type":401,"value":475},{"type":395,"tag":426,"props":535,"children":536},{"style":461},[537],{"type":401,"value":480},{"type":395,"tag":426,"props":539,"children":541},{"class":428,"line":540},4,[542],{"type":395,"tag":426,"props":543,"children":544},{"style":433},[545],{"type":401,"value":546},"    // 绑定上下文为 Vue 实例\n",{"type":395,"tag":426,"props":548,"children":550},{"class":428,"line":549},5,[551,556,561,566,571,576,582,586],{"type":395,"tag":426,"props":552,"children":553},{"style":443},[554],{"type":401,"value":555},"    return",{"type":395,"tag":426,"props":557,"children":558},{"style":455},[559],{"type":401,"value":560}," nextTick",{"type":395,"tag":426,"props":562,"children":564},{"style":563},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[565],{"type":401,"value":464},{"type":395,"tag":426,"props":567,"children":569},{"style":568},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[570],{"type":401,"value":529},{"type":395,"tag":426,"props":572,"children":573},{"style":461},[574],{"type":401,"value":575},",",{"type":395,"tag":426,"props":577,"children":579},{"style":578},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[580],{"type":401,"value":581}," this",{"type":395,"tag":426,"props":583,"children":584},{"style":563},[585],{"type":401,"value":475},{"type":395,"tag":426,"props":587,"children":588},{"style":461},[589],{"type":401,"value":590},";\n",{"type":395,"tag":426,"props":592,"children":594},{"class":428,"line":593},6,[595],{"type":395,"tag":426,"props":596,"children":597},{"style":461},[598],{"type":401,"value":599},"  };\n",{"type":395,"tag":426,"props":601,"children":603},{"class":428,"line":602},7,[604],{"type":395,"tag":426,"props":605,"children":606},{"style":461},[607],{"type":401,"value":608},"}\n",{"type":395,"tag":426,"props":610,"children":612},{"class":428,"line":611},8,[613],{"type":395,"tag":426,"props":614,"children":615},{"emptyLinePlaceholder":387},[616],{"type":401,"value":617},"\n",{"type":395,"tag":426,"props":619,"children":621},{"class":428,"line":620},9,[622],{"type":395,"tag":426,"props":623,"children":624},{"style":433},[625],{"type":401,"value":626},"// 使用的时候，只需要传入回调即可\n",{"type":395,"tag":426,"props":628,"children":630},{"class":428,"line":629},10,[631,636,641,645],{"type":395,"tag":426,"props":632,"children":633},{"style":512},[634],{"type":401,"value":635},"new",{"type":395,"tag":426,"props":637,"children":638},{"style":455},[639],{"type":401,"value":640}," Vue",{"type":395,"tag":426,"props":642,"children":643},{"style":568},[644],{"type":401,"value":464},{"type":395,"tag":426,"props":646,"children":647},{"style":461},[648],{"type":401,"value":649},"{\n",{"type":395,"tag":426,"props":651,"children":653},{"class":428,"line":652},11,[654,660,665],{"type":395,"tag":426,"props":655,"children":657},{"style":656},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[658],{"type":401,"value":659},"  mounted",{"type":395,"tag":426,"props":661,"children":662},{"style":461},[663],{"type":401,"value":664},"()",{"type":395,"tag":426,"props":666,"children":667},{"style":461},[668],{"type":401,"value":480},{"type":395,"tag":426,"props":670,"children":672},{"class":428,"line":671},12,[673,678,682,686,690,694,699],{"type":395,"tag":426,"props":674,"children":675},{"style":578},[676],{"type":401,"value":677},"    this",{"type":395,"tag":426,"props":679,"children":680},{"style":461},[681],{"type":401,"value":495},{"type":395,"tag":426,"props":683,"children":684},{"style":455},[685],{"type":401,"value":402},{"type":395,"tag":426,"props":687,"children":688},{"style":563},[689],{"type":401,"value":464},{"type":395,"tag":426,"props":691,"children":692},{"style":461},[693],{"type":401,"value":664},{"type":395,"tag":426,"props":695,"children":696},{"style":449},[697],{"type":401,"value":698}," =>",{"type":395,"tag":426,"props":700,"children":701},{"style":461},[702],{"type":401,"value":480},{"type":395,"tag":426,"props":704,"children":706},{"class":428,"line":705},13,[707,712,716,721,725,731,737,741,745],{"type":395,"tag":426,"props":708,"children":709},{"style":568},[710],{"type":401,"value":711},"      console",{"type":395,"tag":426,"props":713,"children":714},{"style":461},[715],{"type":401,"value":495},{"type":395,"tag":426,"props":717,"children":718},{"style":455},[719],{"type":401,"value":720},"log",{"type":395,"tag":426,"props":722,"children":723},{"style":563},[724],{"type":401,"value":464},{"type":395,"tag":426,"props":726,"children":728},{"style":727},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[729],{"type":401,"value":730},"\"",{"type":395,"tag":426,"props":732,"children":734},{"style":733},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[735],{"type":401,"value":736},"callback executed",{"type":395,"tag":426,"props":738,"children":739},{"style":727},[740],{"type":401,"value":730},{"type":395,"tag":426,"props":742,"children":743},{"style":563},[744],{"type":401,"value":475},{"type":395,"tag":426,"props":746,"children":747},{"style":461},[748],{"type":401,"value":590},{"type":395,"tag":426,"props":750,"children":752},{"class":428,"line":751},14,[753,758,762],{"type":395,"tag":426,"props":754,"children":755},{"style":461},[756],{"type":401,"value":757},"    }",{"type":395,"tag":426,"props":759,"children":760},{"style":563},[761],{"type":401,"value":475},{"type":395,"tag":426,"props":763,"children":764},{"style":461},[765],{"type":401,"value":590},{"type":395,"tag":426,"props":767,"children":769},{"class":428,"line":768},15,[770],{"type":395,"tag":426,"props":771,"children":772},{"style":461},[773],{"type":401,"value":774},"  },\n",{"type":395,"tag":426,"props":776,"children":778},{"class":428,"line":777},16,[779,784,788],{"type":395,"tag":426,"props":780,"children":781},{"style":461},[782],{"type":401,"value":783},"}",{"type":395,"tag":426,"props":785,"children":786},{"style":568},[787],{"type":401,"value":475},{"type":395,"tag":426,"props":789,"children":790},{"style":461},[791],{"type":401,"value":590},{"type":395,"tag":404,"props":793,"children":794},{},[795],{"type":401,"value":796},"$nextTick 的本质是，把传入的回调推到当前微任务队列中（queueMicroTask），使其在当前任务队列 DOM 渲染（宏任务）完毕之后执行。它使用一些 HACK 技巧来模拟 queueMicroTask API。",{"type":395,"tag":415,"props":798,"children":800},{"className":417,"code":799,"language":419,"meta":388,"style":388},"// 执行所有回调\nfunction flushCallbacks() {\n  /* ... */\n}\n// timerFunc 用来存储 hackedQueueMicroTask API\nlet timerFunc;\n// 如果运行环境支持 Promise，则使用 Promise.then\nif (typeof Promise !== \"undefined\" && isNative(Promise)) {\n  const p = Promise.resolve();\n  timerFunc = () => {\n    p.then(flushCallbacks);\n  };\n}\n// 否则回退到 MutationObserver API（它的回调也会添加到当前微任务队列）\nelse if (\n  !isIE &&\n  typeof MutationObserver !== \"undefined\" &&\n  (isNative(MutationObserver) ||\n    MutationObserver.toString() === \"[object MutationObserverConstructor]\")\n) {\n  let counter = 1;\n  const observer = new MutationObserver(flushCallbacks);\n  const textNode = document.createTextNode(String(counter));\n  observer.observe(textNode, {\n    characterData: true,\n  });\n  timerFunc = () => {\n    counter = (counter + 1) % 2;\n    textNode.data = String(counter);\n  };\n}\n// 否则回退到 setImmediate（其回调被添加到当前宏任务队列）\nelse if (typeof setImmediate !== \"undefined\" && isNative(setImmediate)) {\n  // Technically it leverages the (macro) task queue,\n  // but it is still a better choice than setTimeout.\n  timerFunc = () => {\n    setImmediate(flushCallbacks);\n  };\n}\n// 最次的情况则选择 setTimeout\nelse {\n  timerFunc = () => {\n    setTimeout(flushCallbacks, 0);\n  };\n}\n",[801],{"type":395,"tag":422,"props":802,"children":803},{"__ignoreMap":388},[804,812,833,841,848,856,873,881,950,988,1013,1047,1054,1061,1069,1087,1105,1141,1165,1211,1224,1252,1295,1353,1388,1413,1430,1454,1502,1545,1553,1561,1570,1628,1637,1646,1670,1695,1703,1711,1720,1732,1756,1790,1798],{"type":395,"tag":426,"props":805,"children":806},{"class":428,"line":429},[807],{"type":395,"tag":426,"props":808,"children":809},{"style":433},[810],{"type":401,"value":811},"// 执行所有回调\n",{"type":395,"tag":426,"props":813,"children":814},{"class":428,"line":439},[815,820,825,829],{"type":395,"tag":426,"props":816,"children":817},{"style":449},[818],{"type":401,"value":819},"function",{"type":395,"tag":426,"props":821,"children":822},{"style":455},[823],{"type":401,"value":824}," flushCallbacks",{"type":395,"tag":426,"props":826,"children":827},{"style":461},[828],{"type":401,"value":664},{"type":395,"tag":426,"props":830,"children":831},{"style":461},[832],{"type":401,"value":480},{"type":395,"tag":426,"props":834,"children":835},{"class":428,"line":483},[836],{"type":395,"tag":426,"props":837,"children":838},{"style":433},[839],{"type":401,"value":840},"  /* ... */\n",{"type":395,"tag":426,"props":842,"children":843},{"class":428,"line":540},[844],{"type":395,"tag":426,"props":845,"children":846},{"style":461},[847],{"type":401,"value":608},{"type":395,"tag":426,"props":849,"children":850},{"class":428,"line":549},[851],{"type":395,"tag":426,"props":852,"children":853},{"style":433},[854],{"type":401,"value":855},"// timerFunc 用来存储 hackedQueueMicroTask API\n",{"type":395,"tag":426,"props":857,"children":858},{"class":428,"line":593},[859,864,869],{"type":395,"tag":426,"props":860,"children":861},{"style":449},[862],{"type":401,"value":863},"let",{"type":395,"tag":426,"props":865,"children":866},{"style":568},[867],{"type":401,"value":868}," timerFunc",{"type":395,"tag":426,"props":870,"children":871},{"style":461},[872],{"type":401,"value":590},{"type":395,"tag":426,"props":874,"children":875},{"class":428,"line":602},[876],{"type":395,"tag":426,"props":877,"children":878},{"style":433},[879],{"type":401,"value":880},"// 如果运行环境支持 Promise，则使用 Promise.then\n",{"type":395,"tag":426,"props":882,"children":883},{"class":428,"line":611},[884,889,893,898,903,908,913,918,922,927,932,936,941,946],{"type":395,"tag":426,"props":885,"children":886},{"style":443},[887],{"type":401,"value":888},"if",{"type":395,"tag":426,"props":890,"children":891},{"style":568},[892],{"type":401,"value":524},{"type":395,"tag":426,"props":894,"children":895},{"style":512},[896],{"type":401,"value":897},"typeof",{"type":395,"tag":426,"props":899,"children":900},{"style":487},[901],{"type":401,"value":902}," Promise",{"type":395,"tag":426,"props":904,"children":905},{"style":512},[906],{"type":401,"value":907}," !==",{"type":395,"tag":426,"props":909,"children":910},{"style":727},[911],{"type":401,"value":912}," \"",{"type":395,"tag":426,"props":914,"children":915},{"style":733},[916],{"type":401,"value":917},"undefined",{"type":395,"tag":426,"props":919,"children":920},{"style":727},[921],{"type":401,"value":730},{"type":395,"tag":426,"props":923,"children":924},{"style":512},[925],{"type":401,"value":926}," &&",{"type":395,"tag":426,"props":928,"children":929},{"style":455},[930],{"type":401,"value":931}," isNative",{"type":395,"tag":426,"props":933,"children":934},{"style":568},[935],{"type":401,"value":464},{"type":395,"tag":426,"props":937,"children":938},{"style":487},[939],{"type":401,"value":940},"Promise",{"type":395,"tag":426,"props":942,"children":943},{"style":568},[944],{"type":401,"value":945},")) ",{"type":395,"tag":426,"props":947,"children":948},{"style":461},[949],{"type":401,"value":649},{"type":395,"tag":426,"props":951,"children":952},{"class":428,"line":620},[953,958,963,967,971,975,980,984],{"type":395,"tag":426,"props":954,"children":955},{"style":449},[956],{"type":401,"value":957},"  const",{"type":395,"tag":426,"props":959,"children":960},{"style":498},[961],{"type":401,"value":962}," p",{"type":395,"tag":426,"props":964,"children":965},{"style":512},[966],{"type":401,"value":515},{"type":395,"tag":426,"props":968,"children":969},{"style":487},[970],{"type":401,"value":902},{"type":395,"tag":426,"props":972,"children":973},{"style":461},[974],{"type":401,"value":495},{"type":395,"tag":426,"props":976,"children":977},{"style":455},[978],{"type":401,"value":979},"resolve",{"type":395,"tag":426,"props":981,"children":982},{"style":563},[983],{"type":401,"value":664},{"type":395,"tag":426,"props":985,"children":986},{"style":461},[987],{"type":401,"value":590},{"type":395,"tag":426,"props":989,"children":990},{"class":428,"line":629},[991,996,1000,1005,1009],{"type":395,"tag":426,"props":992,"children":993},{"style":455},[994],{"type":401,"value":995},"  timerFunc",{"type":395,"tag":426,"props":997,"children":998},{"style":512},[999],{"type":401,"value":515},{"type":395,"tag":426,"props":1001,"children":1002},{"style":461},[1003],{"type":401,"value":1004}," ()",{"type":395,"tag":426,"props":1006,"children":1007},{"style":449},[1008],{"type":401,"value":698},{"type":395,"tag":426,"props":1010,"children":1011},{"style":461},[1012],{"type":401,"value":480},{"type":395,"tag":426,"props":1014,"children":1015},{"class":428,"line":652},[1016,1021,1025,1030,1034,1039,1043],{"type":395,"tag":426,"props":1017,"children":1018},{"style":568},[1019],{"type":401,"value":1020},"    p",{"type":395,"tag":426,"props":1022,"children":1023},{"style":461},[1024],{"type":401,"value":495},{"type":395,"tag":426,"props":1026,"children":1027},{"style":455},[1028],{"type":401,"value":1029},"then",{"type":395,"tag":426,"props":1031,"children":1032},{"style":563},[1033],{"type":401,"value":464},{"type":395,"tag":426,"props":1035,"children":1036},{"style":568},[1037],{"type":401,"value":1038},"flushCallbacks",{"type":395,"tag":426,"props":1040,"children":1041},{"style":563},[1042],{"type":401,"value":475},{"type":395,"tag":426,"props":1044,"children":1045},{"style":461},[1046],{"type":401,"value":590},{"type":395,"tag":426,"props":1048,"children":1049},{"class":428,"line":671},[1050],{"type":395,"tag":426,"props":1051,"children":1052},{"style":461},[1053],{"type":401,"value":599},{"type":395,"tag":426,"props":1055,"children":1056},{"class":428,"line":705},[1057],{"type":395,"tag":426,"props":1058,"children":1059},{"style":461},[1060],{"type":401,"value":608},{"type":395,"tag":426,"props":1062,"children":1063},{"class":428,"line":751},[1064],{"type":395,"tag":426,"props":1065,"children":1066},{"style":433},[1067],{"type":401,"value":1068},"// 否则回退到 MutationObserver API（它的回调也会添加到当前微任务队列）\n",{"type":395,"tag":426,"props":1070,"children":1071},{"class":428,"line":768},[1072,1077,1082],{"type":395,"tag":426,"props":1073,"children":1074},{"style":443},[1075],{"type":401,"value":1076},"else",{"type":395,"tag":426,"props":1078,"children":1079},{"style":443},[1080],{"type":401,"value":1081}," if",{"type":395,"tag":426,"props":1083,"children":1084},{"style":568},[1085],{"type":401,"value":1086}," (\n",{"type":395,"tag":426,"props":1088,"children":1089},{"class":428,"line":777},[1090,1095,1100],{"type":395,"tag":426,"props":1091,"children":1092},{"style":512},[1093],{"type":401,"value":1094},"  !",{"type":395,"tag":426,"props":1096,"children":1097},{"style":568},[1098],{"type":401,"value":1099},"isIE ",{"type":395,"tag":426,"props":1101,"children":1102},{"style":512},[1103],{"type":401,"value":1104},"&&\n",{"type":395,"tag":426,"props":1106,"children":1108},{"class":428,"line":1107},17,[1109,1114,1119,1124,1128,1132,1136],{"type":395,"tag":426,"props":1110,"children":1111},{"style":512},[1112],{"type":401,"value":1113},"  typeof",{"type":395,"tag":426,"props":1115,"children":1116},{"style":568},[1117],{"type":401,"value":1118}," MutationObserver ",{"type":395,"tag":426,"props":1120,"children":1121},{"style":512},[1122],{"type":401,"value":1123},"!==",{"type":395,"tag":426,"props":1125,"children":1126},{"style":727},[1127],{"type":401,"value":912},{"type":395,"tag":426,"props":1129,"children":1130},{"style":733},[1131],{"type":401,"value":917},{"type":395,"tag":426,"props":1133,"children":1134},{"style":727},[1135],{"type":401,"value":730},{"type":395,"tag":426,"props":1137,"children":1138},{"style":512},[1139],{"type":401,"value":1140}," &&\n",{"type":395,"tag":426,"props":1142,"children":1144},{"class":428,"line":1143},18,[1145,1150,1155,1160],{"type":395,"tag":426,"props":1146,"children":1147},{"style":568},[1148],{"type":401,"value":1149},"  (",{"type":395,"tag":426,"props":1151,"children":1152},{"style":455},[1153],{"type":401,"value":1154},"isNative",{"type":395,"tag":426,"props":1156,"children":1157},{"style":568},[1158],{"type":401,"value":1159},"(MutationObserver) ",{"type":395,"tag":426,"props":1161,"children":1162},{"style":512},[1163],{"type":401,"value":1164},"||\n",{"type":395,"tag":426,"props":1166,"children":1168},{"class":428,"line":1167},19,[1169,1174,1178,1183,1188,1193,1197,1202,1206],{"type":395,"tag":426,"props":1170,"children":1171},{"style":568},[1172],{"type":401,"value":1173},"    MutationObserver",{"type":395,"tag":426,"props":1175,"children":1176},{"style":461},[1177],{"type":401,"value":495},{"type":395,"tag":426,"props":1179,"children":1180},{"style":455},[1181],{"type":401,"value":1182},"toString",{"type":395,"tag":426,"props":1184,"children":1185},{"style":568},[1186],{"type":401,"value":1187},"() ",{"type":395,"tag":426,"props":1189,"children":1190},{"style":512},[1191],{"type":401,"value":1192},"===",{"type":395,"tag":426,"props":1194,"children":1195},{"style":727},[1196],{"type":401,"value":912},{"type":395,"tag":426,"props":1198,"children":1199},{"style":733},[1200],{"type":401,"value":1201},"[object MutationObserverConstructor]",{"type":395,"tag":426,"props":1203,"children":1204},{"style":727},[1205],{"type":401,"value":730},{"type":395,"tag":426,"props":1207,"children":1208},{"style":568},[1209],{"type":401,"value":1210},")\n",{"type":395,"tag":426,"props":1212,"children":1214},{"class":428,"line":1213},20,[1215,1220],{"type":395,"tag":426,"props":1216,"children":1217},{"style":568},[1218],{"type":401,"value":1219},") ",{"type":395,"tag":426,"props":1221,"children":1222},{"style":461},[1223],{"type":401,"value":649},{"type":395,"tag":426,"props":1225,"children":1227},{"class":428,"line":1226},21,[1228,1233,1238,1242,1248],{"type":395,"tag":426,"props":1229,"children":1230},{"style":449},[1231],{"type":401,"value":1232},"  let",{"type":395,"tag":426,"props":1234,"children":1235},{"style":568},[1236],{"type":401,"value":1237}," counter",{"type":395,"tag":426,"props":1239,"children":1240},{"style":512},[1241],{"type":401,"value":515},{"type":395,"tag":426,"props":1243,"children":1245},{"style":1244},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1246],{"type":401,"value":1247}," 1",{"type":395,"tag":426,"props":1249,"children":1250},{"style":461},[1251],{"type":401,"value":590},{"type":395,"tag":426,"props":1253,"children":1255},{"class":428,"line":1254},22,[1256,1260,1265,1269,1274,1279,1283,1287,1291],{"type":395,"tag":426,"props":1257,"children":1258},{"style":449},[1259],{"type":401,"value":957},{"type":395,"tag":426,"props":1261,"children":1262},{"style":498},[1263],{"type":401,"value":1264}," observer",{"type":395,"tag":426,"props":1266,"children":1267},{"style":512},[1268],{"type":401,"value":515},{"type":395,"tag":426,"props":1270,"children":1271},{"style":512},[1272],{"type":401,"value":1273}," new",{"type":395,"tag":426,"props":1275,"children":1276},{"style":455},[1277],{"type":401,"value":1278}," MutationObserver",{"type":395,"tag":426,"props":1280,"children":1281},{"style":563},[1282],{"type":401,"value":464},{"type":395,"tag":426,"props":1284,"children":1285},{"style":568},[1286],{"type":401,"value":1038},{"type":395,"tag":426,"props":1288,"children":1289},{"style":563},[1290],{"type":401,"value":475},{"type":395,"tag":426,"props":1292,"children":1293},{"style":461},[1294],{"type":401,"value":590},{"type":395,"tag":426,"props":1296,"children":1298},{"class":428,"line":1297},23,[1299,1303,1308,1312,1317,1321,1326,1330,1335,1339,1344,1349],{"type":395,"tag":426,"props":1300,"children":1301},{"style":449},[1302],{"type":401,"value":957},{"type":395,"tag":426,"props":1304,"children":1305},{"style":498},[1306],{"type":401,"value":1307}," textNode",{"type":395,"tag":426,"props":1309,"children":1310},{"style":512},[1311],{"type":401,"value":515},{"type":395,"tag":426,"props":1313,"children":1314},{"style":568},[1315],{"type":401,"value":1316}," document",{"type":395,"tag":426,"props":1318,"children":1319},{"style":461},[1320],{"type":401,"value":495},{"type":395,"tag":426,"props":1322,"children":1323},{"style":455},[1324],{"type":401,"value":1325},"createTextNode",{"type":395,"tag":426,"props":1327,"children":1328},{"style":563},[1329],{"type":401,"value":464},{"type":395,"tag":426,"props":1331,"children":1332},{"style":455},[1333],{"type":401,"value":1334},"String",{"type":395,"tag":426,"props":1336,"children":1337},{"style":563},[1338],{"type":401,"value":464},{"type":395,"tag":426,"props":1340,"children":1341},{"style":568},[1342],{"type":401,"value":1343},"counter",{"type":395,"tag":426,"props":1345,"children":1346},{"style":563},[1347],{"type":401,"value":1348},"))",{"type":395,"tag":426,"props":1350,"children":1351},{"style":461},[1352],{"type":401,"value":590},{"type":395,"tag":426,"props":1354,"children":1356},{"class":428,"line":1355},24,[1357,1362,1366,1371,1375,1380,1384],{"type":395,"tag":426,"props":1358,"children":1359},{"style":568},[1360],{"type":401,"value":1361},"  observer",{"type":395,"tag":426,"props":1363,"children":1364},{"style":461},[1365],{"type":401,"value":495},{"type":395,"tag":426,"props":1367,"children":1368},{"style":455},[1369],{"type":401,"value":1370},"observe",{"type":395,"tag":426,"props":1372,"children":1373},{"style":563},[1374],{"type":401,"value":464},{"type":395,"tag":426,"props":1376,"children":1377},{"style":568},[1378],{"type":401,"value":1379},"textNode",{"type":395,"tag":426,"props":1381,"children":1382},{"style":461},[1383],{"type":401,"value":575},{"type":395,"tag":426,"props":1385,"children":1386},{"style":461},[1387],{"type":401,"value":480},{"type":395,"tag":426,"props":1389,"children":1391},{"class":428,"line":1390},25,[1392,1397,1402,1408],{"type":395,"tag":426,"props":1393,"children":1394},{"style":563},[1395],{"type":401,"value":1396},"    characterData",{"type":395,"tag":426,"props":1398,"children":1399},{"style":461},[1400],{"type":401,"value":1401},":",{"type":395,"tag":426,"props":1403,"children":1405},{"style":1404},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1406],{"type":401,"value":1407}," true",{"type":395,"tag":426,"props":1409,"children":1410},{"style":461},[1411],{"type":401,"value":1412},",\n",{"type":395,"tag":426,"props":1414,"children":1416},{"class":428,"line":1415},26,[1417,1422,1426],{"type":395,"tag":426,"props":1418,"children":1419},{"style":461},[1420],{"type":401,"value":1421},"  }",{"type":395,"tag":426,"props":1423,"children":1424},{"style":563},[1425],{"type":401,"value":475},{"type":395,"tag":426,"props":1427,"children":1428},{"style":461},[1429],{"type":401,"value":590},{"type":395,"tag":426,"props":1431,"children":1433},{"class":428,"line":1432},27,[1434,1438,1442,1446,1450],{"type":395,"tag":426,"props":1435,"children":1436},{"style":455},[1437],{"type":401,"value":995},{"type":395,"tag":426,"props":1439,"children":1440},{"style":512},[1441],{"type":401,"value":515},{"type":395,"tag":426,"props":1443,"children":1444},{"style":461},[1445],{"type":401,"value":1004},{"type":395,"tag":426,"props":1447,"children":1448},{"style":449},[1449],{"type":401,"value":698},{"type":395,"tag":426,"props":1451,"children":1452},{"style":461},[1453],{"type":401,"value":480},{"type":395,"tag":426,"props":1455,"children":1457},{"class":428,"line":1456},28,[1458,1463,1467,1471,1475,1480,1484,1488,1493,1498],{"type":395,"tag":426,"props":1459,"children":1460},{"style":568},[1461],{"type":401,"value":1462},"    counter",{"type":395,"tag":426,"props":1464,"children":1465},{"style":512},[1466],{"type":401,"value":515},{"type":395,"tag":426,"props":1468,"children":1469},{"style":563},[1470],{"type":401,"value":524},{"type":395,"tag":426,"props":1472,"children":1473},{"style":568},[1474],{"type":401,"value":1343},{"type":395,"tag":426,"props":1476,"children":1477},{"style":512},[1478],{"type":401,"value":1479}," +",{"type":395,"tag":426,"props":1481,"children":1482},{"style":1244},[1483],{"type":401,"value":1247},{"type":395,"tag":426,"props":1485,"children":1486},{"style":563},[1487],{"type":401,"value":1219},{"type":395,"tag":426,"props":1489,"children":1490},{"style":512},[1491],{"type":401,"value":1492},"%",{"type":395,"tag":426,"props":1494,"children":1495},{"style":1244},[1496],{"type":401,"value":1497}," 2",{"type":395,"tag":426,"props":1499,"children":1500},{"style":461},[1501],{"type":401,"value":590},{"type":395,"tag":426,"props":1503,"children":1505},{"class":428,"line":1504},29,[1506,1511,1515,1520,1524,1529,1533,1537,1541],{"type":395,"tag":426,"props":1507,"children":1508},{"style":568},[1509],{"type":401,"value":1510},"    textNode",{"type":395,"tag":426,"props":1512,"children":1513},{"style":461},[1514],{"type":401,"value":495},{"type":395,"tag":426,"props":1516,"children":1517},{"style":568},[1518],{"type":401,"value":1519},"data",{"type":395,"tag":426,"props":1521,"children":1522},{"style":512},[1523],{"type":401,"value":515},{"type":395,"tag":426,"props":1525,"children":1526},{"style":455},[1527],{"type":401,"value":1528}," String",{"type":395,"tag":426,"props":1530,"children":1531},{"style":563},[1532],{"type":401,"value":464},{"type":395,"tag":426,"props":1534,"children":1535},{"style":568},[1536],{"type":401,"value":1343},{"type":395,"tag":426,"props":1538,"children":1539},{"style":563},[1540],{"type":401,"value":475},{"type":395,"tag":426,"props":1542,"children":1543},{"style":461},[1544],{"type":401,"value":590},{"type":395,"tag":426,"props":1546,"children":1548},{"class":428,"line":1547},30,[1549],{"type":395,"tag":426,"props":1550,"children":1551},{"style":461},[1552],{"type":401,"value":599},{"type":395,"tag":426,"props":1554,"children":1556},{"class":428,"line":1555},31,[1557],{"type":395,"tag":426,"props":1558,"children":1559},{"style":461},[1560],{"type":401,"value":608},{"type":395,"tag":426,"props":1562,"children":1564},{"class":428,"line":1563},32,[1565],{"type":395,"tag":426,"props":1566,"children":1567},{"style":433},[1568],{"type":401,"value":1569},"// 否则回退到 setImmediate（其回调被添加到当前宏任务队列）\n",{"type":395,"tag":426,"props":1571,"children":1573},{"class":428,"line":1572},33,[1574,1578,1582,1586,1590,1595,1599,1603,1607,1611,1615,1619,1624],{"type":395,"tag":426,"props":1575,"children":1576},{"style":443},[1577],{"type":401,"value":1076},{"type":395,"tag":426,"props":1579,"children":1580},{"style":443},[1581],{"type":401,"value":1081},{"type":395,"tag":426,"props":1583,"children":1584},{"style":568},[1585],{"type":401,"value":524},{"type":395,"tag":426,"props":1587,"children":1588},{"style":512},[1589],{"type":401,"value":897},{"type":395,"tag":426,"props":1591,"children":1592},{"style":568},[1593],{"type":401,"value":1594}," setImmediate ",{"type":395,"tag":426,"props":1596,"children":1597},{"style":512},[1598],{"type":401,"value":1123},{"type":395,"tag":426,"props":1600,"children":1601},{"style":727},[1602],{"type":401,"value":912},{"type":395,"tag":426,"props":1604,"children":1605},{"style":733},[1606],{"type":401,"value":917},{"type":395,"tag":426,"props":1608,"children":1609},{"style":727},[1610],{"type":401,"value":730},{"type":395,"tag":426,"props":1612,"children":1613},{"style":512},[1614],{"type":401,"value":926},{"type":395,"tag":426,"props":1616,"children":1617},{"style":455},[1618],{"type":401,"value":931},{"type":395,"tag":426,"props":1620,"children":1621},{"style":568},[1622],{"type":401,"value":1623},"(setImmediate)) ",{"type":395,"tag":426,"props":1625,"children":1626},{"style":461},[1627],{"type":401,"value":649},{"type":395,"tag":426,"props":1629,"children":1631},{"class":428,"line":1630},34,[1632],{"type":395,"tag":426,"props":1633,"children":1634},{"style":433},[1635],{"type":401,"value":1636},"  // Technically it leverages the (macro) task queue,\n",{"type":395,"tag":426,"props":1638,"children":1640},{"class":428,"line":1639},35,[1641],{"type":395,"tag":426,"props":1642,"children":1643},{"style":433},[1644],{"type":401,"value":1645},"  // but it is still a better choice than setTimeout.\n",{"type":395,"tag":426,"props":1647,"children":1649},{"class":428,"line":1648},36,[1650,1654,1658,1662,1666],{"type":395,"tag":426,"props":1651,"children":1652},{"style":455},[1653],{"type":401,"value":995},{"type":395,"tag":426,"props":1655,"children":1656},{"style":512},[1657],{"type":401,"value":515},{"type":395,"tag":426,"props":1659,"children":1660},{"style":461},[1661],{"type":401,"value":1004},{"type":395,"tag":426,"props":1663,"children":1664},{"style":449},[1665],{"type":401,"value":698},{"type":395,"tag":426,"props":1667,"children":1668},{"style":461},[1669],{"type":401,"value":480},{"type":395,"tag":426,"props":1671,"children":1673},{"class":428,"line":1672},37,[1674,1679,1683,1687,1691],{"type":395,"tag":426,"props":1675,"children":1676},{"style":455},[1677],{"type":401,"value":1678},"    setImmediate",{"type":395,"tag":426,"props":1680,"children":1681},{"style":563},[1682],{"type":401,"value":464},{"type":395,"tag":426,"props":1684,"children":1685},{"style":568},[1686],{"type":401,"value":1038},{"type":395,"tag":426,"props":1688,"children":1689},{"style":563},[1690],{"type":401,"value":475},{"type":395,"tag":426,"props":1692,"children":1693},{"style":461},[1694],{"type":401,"value":590},{"type":395,"tag":426,"props":1696,"children":1698},{"class":428,"line":1697},38,[1699],{"type":395,"tag":426,"props":1700,"children":1701},{"style":461},[1702],{"type":401,"value":599},{"type":395,"tag":426,"props":1704,"children":1706},{"class":428,"line":1705},39,[1707],{"type":395,"tag":426,"props":1708,"children":1709},{"style":461},[1710],{"type":401,"value":608},{"type":395,"tag":426,"props":1712,"children":1714},{"class":428,"line":1713},40,[1715],{"type":395,"tag":426,"props":1716,"children":1717},{"style":433},[1718],{"type":401,"value":1719},"// 最次的情况则选择 setTimeout\n",{"type":395,"tag":426,"props":1721,"children":1723},{"class":428,"line":1722},41,[1724,1728],{"type":395,"tag":426,"props":1725,"children":1726},{"style":443},[1727],{"type":401,"value":1076},{"type":395,"tag":426,"props":1729,"children":1730},{"style":461},[1731],{"type":401,"value":480},{"type":395,"tag":426,"props":1733,"children":1735},{"class":428,"line":1734},42,[1736,1740,1744,1748,1752],{"type":395,"tag":426,"props":1737,"children":1738},{"style":455},[1739],{"type":401,"value":995},{"type":395,"tag":426,"props":1741,"children":1742},{"style":512},[1743],{"type":401,"value":515},{"type":395,"tag":426,"props":1745,"children":1746},{"style":461},[1747],{"type":401,"value":1004},{"type":395,"tag":426,"props":1749,"children":1750},{"style":449},[1751],{"type":401,"value":698},{"type":395,"tag":426,"props":1753,"children":1754},{"style":461},[1755],{"type":401,"value":480},{"type":395,"tag":426,"props":1757,"children":1759},{"class":428,"line":1758},43,[1760,1765,1769,1773,1777,1782,1786],{"type":395,"tag":426,"props":1761,"children":1762},{"style":455},[1763],{"type":401,"value":1764},"    setTimeout",{"type":395,"tag":426,"props":1766,"children":1767},{"style":563},[1768],{"type":401,"value":464},{"type":395,"tag":426,"props":1770,"children":1771},{"style":568},[1772],{"type":401,"value":1038},{"type":395,"tag":426,"props":1774,"children":1775},{"style":461},[1776],{"type":401,"value":575},{"type":395,"tag":426,"props":1778,"children":1779},{"style":1244},[1780],{"type":401,"value":1781}," 0",{"type":395,"tag":426,"props":1783,"children":1784},{"style":563},[1785],{"type":401,"value":475},{"type":395,"tag":426,"props":1787,"children":1788},{"style":461},[1789],{"type":401,"value":590},{"type":395,"tag":426,"props":1791,"children":1793},{"class":428,"line":1792},44,[1794],{"type":395,"tag":426,"props":1795,"children":1796},{"style":461},[1797],{"type":401,"value":599},{"type":395,"tag":426,"props":1799,"children":1801},{"class":428,"line":1800},45,[1802],{"type":395,"tag":426,"props":1803,"children":1804},{"style":461},[1805],{"type":401,"value":608},{"type":395,"tag":404,"props":1807,"children":1808},{},[1809],{"type":401,"value":1810},"为什么会优先选择 setImmediate 而不是 setTimeout 呢？因为根据 HTML 规范，setTimeout 嵌套层数超过 5 级时，其回调的延迟会被限制为至少 4ms，而 setImmediate 则不受约束。",{"type":395,"tag":404,"props":1812,"children":1813},{},[1814],{"type":401,"value":1815},"有一段时期的 Vue，暴露了 withMacroTask，可将一些回调强制存放至当前宏任务队列。但是由于宏任务有各种无法规避的问题，此方案被废弃了。源注释是这么说的：",{"type":395,"tag":415,"props":1817,"children":1819},{"className":417,"code":1818,"language":419,"meta":388,"style":388},"// In 2.5 we used (macro) tasks (in combination with microtasks).\n// However, it has subtle problems when state is changed right before repaint\n// Also, using (macro) tasks in event handler would cause some weird behaviors,\n// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n// So we now use microtasks everywhere, again.\n",[1820],{"type":395,"tag":422,"props":1821,"children":1822},{"__ignoreMap":388},[1823,1831,1839,1847,1855],{"type":395,"tag":426,"props":1824,"children":1825},{"class":428,"line":429},[1826],{"type":395,"tag":426,"props":1827,"children":1828},{"style":433},[1829],{"type":401,"value":1830},"// In 2.5 we used (macro) tasks (in combination with microtasks).\n",{"type":395,"tag":426,"props":1832,"children":1833},{"class":428,"line":439},[1834],{"type":395,"tag":426,"props":1835,"children":1836},{"style":433},[1837],{"type":401,"value":1838},"// However, it has subtle problems when state is changed right before repaint\n",{"type":395,"tag":426,"props":1840,"children":1841},{"class":428,"line":483},[1842],{"type":395,"tag":426,"props":1843,"children":1844},{"style":433},[1845],{"type":401,"value":1846},"// Also, using (macro) tasks in event handler would cause some weird behaviors,\n",{"type":395,"tag":426,"props":1848,"children":1849},{"class":428,"line":540},[1850],{"type":395,"tag":426,"props":1851,"children":1852},{"style":433},[1853],{"type":401,"value":1854},"// that cannot be circumvented (e.g. #7109, #7153, #7546, #7834, #8109).\n",{"type":395,"tag":426,"props":1856,"children":1857},{"class":428,"line":549},[1858],{"type":395,"tag":426,"props":1859,"children":1860},{"style":433},[1861],{"type":401,"value":1862},"// So we now use microtasks everywhere, again.\n",{"type":395,"tag":396,"props":1864,"children":1866},{"id":1865},"阅读更多",[1867],{"type":401,"value":1865},{"type":395,"tag":1869,"props":1870,"children":1871},"ul",{},[1872],{"type":395,"tag":1873,"props":1874,"children":1875},"li",{},[1876],{"type":395,"tag":1877,"props":1878,"children":1882},"a",{"href":1879,"rel":1880},"https://mp.weixin.qq.com/s/71039rWm9W15IsrMOaGwZQ",[1881],"nofollow",[1883],{"type":401,"value":1884},"为什么 setTimeout 有最小时延 4ms",{"type":395,"tag":1886,"props":1887,"children":1888},"style",{},[1889],{"type":401,"value":1890},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":388,"searchDepth":439,"depth":439,"links":1892},[1893,1894],{"id":398,"depth":439,"text":402},{"id":1865,"depth":439,"text":1865},"markdown","content:8.source-code:_js:vue2-source:3.global-api.md","content","8.source-code/_js/vue2-source/3.global-api.md","md",[1901,1904],{"_path":1902,"title":1903,"description":390},"/source-code/_js/vue2-source/parser","Vue2 Parser",{"_path":1905,"title":1906,"description":390},"/source-code/_js/vue2-source/scoped-css","Vue2 Scoped CSS",1708107586254]