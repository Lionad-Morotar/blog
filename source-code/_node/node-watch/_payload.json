[{"data":1,"prerenderedAt":4376},["ShallowReactive",2],{"navigation":3,"/source-code/_node/node-watch":384,"/source-code/_node/node-watch-surround":4367},[4,35,86,105,132,138,144,150,378],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":205,"_path":206},"正则表达式","/gists/eegex",{"title":208,"_path":209},"Emoji","/gists/emoji",{"title":211,"_path":212},"工程","/gists/engineering",{"title":214,"_path":215},"熵","/gists/entropy",{"title":217,"_path":218},"Environment","/gists/environment",{"title":220,"_path":221},"Erlang","/gists/erlang",{"title":223,"_path":224},"逃离塔克夫","/gists/escape-from-tarkov",{"title":226,"_path":227},"ESNext (ES6-ES11)","/gists/esnext",{"title":229,"_path":230},"Eval！","/gists/eval",{"title":232,"_path":233},"Flutter","/gists/flutter",{"title":235,"_path":236},"字体","/gists/font",{"title":238,"_path":239},"JS 函数式编程","/gists/functional",{"title":241,"_path":242},"游戏化","/gists/gamification",{"title":244,"_path":245},"Google C++ Standard","/gists/google-cpp-standard",{"title":247,"_path":248},"双向链接完全体","/gists/graph",{"title":250,"_path":251},"Hardwares","/gists/hardwares",{"title":253,"_path":254},"哈希冲突","/gists/hash-collision",{"title":256,"_path":257},"信息设计","/gists/information-design",{"title":259,"_path":260},"InstantPage","/gists/instant.page",{"title":262,"_path":263},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":265,"_path":266},"KVStore","/gists/key-value-db",{"title":268,"_path":269},"Kubernetes","/gists/kubernetes",{"title":271,"_path":272},"Makefile","/gists/makefile",{"title":274,"_path":275},"Markdown Inline Style","/gists/markdown-nice",{"title":277,"_path":278},"减小页面快照体积","/gists/minify-html",{"title":280,"_path":281},"mklink","/gists/mklink",{"title":283,"_path":284},"Mock","/gists/mock",{"title":286,"_path":287},"多人协作系统","/gists/multiplayer",{"title":289,"_path":290},"多端应用","/gists/multy-end-app",{"title":292,"_path":293},"神经科学","/gists/neuroscience",{"title":295,"_path":296},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":298,"_path":299},"PInvoke","/gists/pinvoke",{"title":301,"_path":302},"像素","/gists/pixel",{"title":304,"_path":305},"PowerShell","/gists/powershell",{"title":307,"_path":308},"量子","/gists/quantum",{"title":310,"_path":311},"保持好奇心","/gists/questions",{"title":313,"_path":314},"React Native","/gists/react-native",{"title":316,"_path":317},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":319,"_path":320},"SEO","/gists/seo",{"title":322,"_path":323},"Shader","/gists/shader",{"title":325,"_path":326},"Shape Up","/gists/shape-up",{"title":328,"_path":329},"睡觉","/gists/sleep",{"title":331,"_path":332},"记录奇怪的问题","/gists/solved",{"title":334,"_path":335},"States","/gists/states",{"title":337,"_path":338},"Storage","/gists/storage",{"title":340,"_path":341},"音视频流处理","/gists/stream-cli",{"title":343,"_path":344},"Symbol","/gists/symbol",{"title":346,"_path":347},"系统论","/gists/systems-theory",{"title":349,"_path":350},"任务切片","/gists/task-slice",{"title":352,"_path":353},"技术偏好","/gists/tech-dudge",{"title":355,"_path":356},"Untitled","/gists/untitled",{"title":358,"_path":359},"可变字体","/gists/variable-font",{"title":361,"_path":362},"视觉错觉","/gists/visual-illusion",{"title":364,"_path":365},"SS(SSR)","/gists/vpn",{"title":367,"_path":368},"VS Code 插件开发","/gists/vscode-plugin",{"title":370,"_path":371},"Web Components","/gists/web-components",{"title":373,"_path":374},"Windows","/gists/windows",{"title":376,"_path":377},"查缺补漏","/gists/wrong",{"title":379,"_path":380,"children":381},"我 / About","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"_path":385,"_dir":386,"_draft":387,"_partial":388,"_locale":389,"title":390,"description":391,"body":392,"_type":4361,"_id":4362,"_source":4363,"_file":4364,"_stem":4365,"_extension":4366},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":393,"children":394,"toc":4354},"root",[395,403,409,1146,1162,1439,1444,1621,1626,2296,2301,2758,2763,3914,3919,3924,4081,4086,4183,4188,4193,4218,4223,4262,4267,4273,4278,4283,4288,4320,4325,4348],{"type":396,"tag":397,"props":398,"children":400},"element","h2",{"id":399},"实现",[401],{"type":402,"value":399},"text",{"type":396,"tag":404,"props":405,"children":406},"p",{},[407],{"type":402,"value":408},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":396,"tag":410,"props":411,"children":415},"pre",{"className":412,"code":413,"language":414,"meta":389,"style":389},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[416],{"type":396,"tag":417,"props":418,"children":419},"code",{"__ignoreMap":389},[420,432,480,530,582,614,627,636,645,686,744,769,807,816,828,886,918,967,1021,1065,1094,1103,1116,1129,1137],{"type":396,"tag":421,"props":422,"children":425},"span",{"class":423,"line":424},"line",1,[426],{"type":396,"tag":421,"props":427,"children":429},{"style":428},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[430],{"type":402,"value":431},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":396,"tag":421,"props":433,"children":435},{"class":423,"line":434},2,[436,442,448,454,460,465,470,475],{"type":396,"tag":421,"props":437,"children":439},{"style":438},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[440],{"type":402,"value":441},"function",{"type":396,"tag":421,"props":443,"children":445},{"style":444},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[446],{"type":402,"value":447}," watch",{"type":396,"tag":421,"props":449,"children":451},{"style":450},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[452],{"type":402,"value":453},"(",{"type":396,"tag":421,"props":455,"children":457},{"style":456},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[458],{"type":402,"value":459},"dir",{"type":396,"tag":421,"props":461,"children":462},{"style":450},[463],{"type":402,"value":464},",",{"type":396,"tag":421,"props":466,"children":467},{"style":456},[468],{"type":402,"value":469}," cb",{"type":396,"tag":421,"props":471,"children":472},{"style":450},[473],{"type":402,"value":474},")",{"type":396,"tag":421,"props":476,"children":477},{"style":450},[478],{"type":402,"value":479}," {\n",{"type":396,"tag":421,"props":481,"children":483},{"class":423,"line":482},3,[484,490,496,502,507,512,516,520,525],{"type":396,"tag":421,"props":485,"children":487},{"style":486},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[488],{"type":402,"value":489},"  if",{"type":396,"tag":421,"props":491,"children":493},{"style":492},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[494],{"type":402,"value":495}," (",{"type":396,"tag":421,"props":497,"children":499},{"style":498},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[500],{"type":402,"value":501},"is",{"type":396,"tag":421,"props":503,"children":504},{"style":450},[505],{"type":402,"value":506},".",{"type":396,"tag":421,"props":508,"children":509},{"style":444},[510],{"type":402,"value":511},"File",{"type":396,"tag":421,"props":513,"children":514},{"style":492},[515],{"type":402,"value":453},{"type":396,"tag":421,"props":517,"children":518},{"style":498},[519],{"type":402,"value":459},{"type":396,"tag":421,"props":521,"children":522},{"style":492},[523],{"type":402,"value":524},")) ",{"type":396,"tag":421,"props":526,"children":527},{"style":450},[528],{"type":402,"value":529},"{\n",{"type":396,"tag":421,"props":531,"children":533},{"class":423,"line":532},4,[534,539,543,548,552,556,560,565,569,574,578],{"type":396,"tag":421,"props":535,"children":536},{"style":498},[537],{"type":402,"value":538},"    fs",{"type":396,"tag":421,"props":540,"children":541},{"style":450},[542],{"type":402,"value":506},{"type":396,"tag":421,"props":544,"children":545},{"style":444},[546],{"type":402,"value":547},"watchFile",{"type":396,"tag":421,"props":549,"children":550},{"style":492},[551],{"type":402,"value":453},{"type":396,"tag":421,"props":553,"children":554},{"style":498},[555],{"type":402,"value":459},{"type":396,"tag":421,"props":557,"children":558},{"style":450},[559],{"type":402,"value":464},{"type":396,"tag":421,"props":561,"children":562},{"style":438},[563],{"type":402,"value":564}," function",{"type":396,"tag":421,"props":566,"children":567},{"style":450},[568],{"type":402,"value":453},{"type":396,"tag":421,"props":570,"children":571},{"style":456},[572],{"type":402,"value":573},"err",{"type":396,"tag":421,"props":575,"children":576},{"style":450},[577],{"type":402,"value":474},{"type":396,"tag":421,"props":579,"children":580},{"style":450},[581],{"type":402,"value":479},{"type":396,"tag":421,"props":583,"children":585},{"class":423,"line":584},5,[586,591,595,600,604,609],{"type":396,"tag":421,"props":587,"children":588},{"style":444},[589],{"type":402,"value":590},"      normalizeCall",{"type":396,"tag":421,"props":592,"children":593},{"style":492},[594],{"type":402,"value":453},{"type":396,"tag":421,"props":596,"children":597},{"style":498},[598],{"type":402,"value":599},"cb",{"type":396,"tag":421,"props":601,"children":602},{"style":450},[603],{"type":402,"value":464},{"type":396,"tag":421,"props":605,"children":606},{"style":498},[607],{"type":402,"value":608}," dir",{"type":396,"tag":421,"props":610,"children":611},{"style":492},[612],{"type":402,"value":613},")\n",{"type":396,"tag":421,"props":615,"children":617},{"class":423,"line":616},6,[618,623],{"type":396,"tag":421,"props":619,"children":620},{"style":450},[621],{"type":402,"value":622},"    }",{"type":396,"tag":421,"props":624,"children":625},{"style":492},[626],{"type":402,"value":613},{"type":396,"tag":421,"props":628,"children":630},{"class":423,"line":629},7,[631],{"type":396,"tag":421,"props":632,"children":633},{"style":486},[634],{"type":402,"value":635},"    return\n",{"type":396,"tag":421,"props":637,"children":639},{"class":423,"line":638},8,[640],{"type":396,"tag":421,"props":641,"children":642},{"style":450},[643],{"type":402,"value":644},"  }\n",{"type":396,"tag":421,"props":646,"children":648},{"class":423,"line":647},9,[649,653,657,661,665,670,674,678,682],{"type":396,"tag":421,"props":650,"children":651},{"style":486},[652],{"type":402,"value":489},{"type":396,"tag":421,"props":654,"children":655},{"style":492},[656],{"type":402,"value":495},{"type":396,"tag":421,"props":658,"children":659},{"style":498},[660],{"type":402,"value":501},{"type":396,"tag":421,"props":662,"children":663},{"style":450},[664],{"type":402,"value":506},{"type":396,"tag":421,"props":666,"children":667},{"style":444},[668],{"type":402,"value":669},"Directory",{"type":396,"tag":421,"props":671,"children":672},{"style":492},[673],{"type":402,"value":453},{"type":396,"tag":421,"props":675,"children":676},{"style":498},[677],{"type":402,"value":459},{"type":396,"tag":421,"props":679,"children":680},{"style":492},[681],{"type":402,"value":524},{"type":396,"tag":421,"props":683,"children":684},{"style":450},[685],{"type":402,"value":529},{"type":396,"tag":421,"props":687,"children":689},{"class":423,"line":688},10,[690,694,698,703,707,711,715,719,723,727,731,736,740],{"type":396,"tag":421,"props":691,"children":692},{"style":498},[693],{"type":402,"value":538},{"type":396,"tag":421,"props":695,"children":696},{"style":450},[697],{"type":402,"value":506},{"type":396,"tag":421,"props":699,"children":700},{"style":444},[701],{"type":402,"value":702},"watch",{"type":396,"tag":421,"props":704,"children":705},{"style":492},[706],{"type":402,"value":453},{"type":396,"tag":421,"props":708,"children":709},{"style":498},[710],{"type":402,"value":459},{"type":396,"tag":421,"props":712,"children":713},{"style":450},[714],{"type":402,"value":464},{"type":396,"tag":421,"props":716,"children":717},{"style":438},[718],{"type":402,"value":564},{"type":396,"tag":421,"props":720,"children":721},{"style":450},[722],{"type":402,"value":453},{"type":396,"tag":421,"props":724,"children":725},{"style":456},[726],{"type":402,"value":573},{"type":396,"tag":421,"props":728,"children":729},{"style":450},[730],{"type":402,"value":464},{"type":396,"tag":421,"props":732,"children":733},{"style":456},[734],{"type":402,"value":735}," fname",{"type":396,"tag":421,"props":737,"children":738},{"style":450},[739],{"type":402,"value":474},{"type":396,"tag":421,"props":741,"children":742},{"style":450},[743],{"type":402,"value":479},{"type":396,"tag":421,"props":745,"children":747},{"class":423,"line":746},11,[748,752,756,760,764],{"type":396,"tag":421,"props":749,"children":750},{"style":444},[751],{"type":402,"value":590},{"type":396,"tag":421,"props":753,"children":754},{"style":492},[755],{"type":402,"value":453},{"type":396,"tag":421,"props":757,"children":758},{"style":498},[759],{"type":402,"value":599},{"type":396,"tag":421,"props":761,"children":762},{"style":450},[763],{"type":402,"value":464},{"type":396,"tag":421,"props":765,"children":766},{"style":492},[767],{"type":402,"value":768},"  \n",{"type":396,"tag":421,"props":770,"children":772},{"class":423,"line":771},12,[773,778,782,787,791,795,799,803],{"type":396,"tag":421,"props":774,"children":775},{"style":498},[776],{"type":402,"value":777},"        path",{"type":396,"tag":421,"props":779,"children":780},{"style":450},[781],{"type":402,"value":506},{"type":396,"tag":421,"props":783,"children":784},{"style":444},[785],{"type":402,"value":786},"join",{"type":396,"tag":421,"props":788,"children":789},{"style":492},[790],{"type":402,"value":453},{"type":396,"tag":421,"props":792,"children":793},{"style":498},[794],{"type":402,"value":459},{"type":396,"tag":421,"props":796,"children":797},{"style":450},[798],{"type":402,"value":464},{"type":396,"tag":421,"props":800,"children":801},{"style":498},[802],{"type":402,"value":735},{"type":396,"tag":421,"props":804,"children":805},{"style":492},[806],{"type":402,"value":613},{"type":396,"tag":421,"props":808,"children":810},{"class":423,"line":809},13,[811],{"type":396,"tag":421,"props":812,"children":813},{"style":492},[814],{"type":402,"value":815},"      )\n",{"type":396,"tag":421,"props":817,"children":819},{"class":423,"line":818},14,[820,824],{"type":396,"tag":421,"props":821,"children":822},{"style":450},[823],{"type":402,"value":622},{"type":396,"tag":421,"props":825,"children":826},{"style":492},[827],{"type":402,"value":613},{"type":396,"tag":421,"props":829,"children":831},{"class":423,"line":830},15,[832,836,840,845,849,853,857,861,865,869,873,878,882],{"type":396,"tag":421,"props":833,"children":834},{"style":498},[835],{"type":402,"value":538},{"type":396,"tag":421,"props":837,"children":838},{"style":450},[839],{"type":402,"value":506},{"type":396,"tag":421,"props":841,"children":842},{"style":444},[843],{"type":402,"value":844},"readdir",{"type":396,"tag":421,"props":846,"children":847},{"style":492},[848],{"type":402,"value":453},{"type":396,"tag":421,"props":850,"children":851},{"style":498},[852],{"type":402,"value":459},{"type":396,"tag":421,"props":854,"children":855},{"style":450},[856],{"type":402,"value":464},{"type":396,"tag":421,"props":858,"children":859},{"style":438},[860],{"type":402,"value":564},{"type":396,"tag":421,"props":862,"children":863},{"style":450},[864],{"type":402,"value":453},{"type":396,"tag":421,"props":866,"children":867},{"style":456},[868],{"type":402,"value":573},{"type":396,"tag":421,"props":870,"children":871},{"style":450},[872],{"type":402,"value":464},{"type":396,"tag":421,"props":874,"children":875},{"style":456},[876],{"type":402,"value":877}," files",{"type":396,"tag":421,"props":879,"children":880},{"style":450},[881],{"type":402,"value":474},{"type":396,"tag":421,"props":883,"children":884},{"style":450},[885],{"type":402,"value":479},{"type":396,"tag":421,"props":887,"children":889},{"class":423,"line":888},16,[890,895,899,903,908,913],{"type":396,"tag":421,"props":891,"children":892},{"style":486},[893],{"type":402,"value":894},"      if",{"type":396,"tag":421,"props":896,"children":897},{"style":492},[898],{"type":402,"value":495},{"type":396,"tag":421,"props":900,"children":901},{"style":498},[902],{"type":402,"value":573},{"type":396,"tag":421,"props":904,"children":905},{"style":492},[906],{"type":402,"value":907},") ",{"type":396,"tag":421,"props":909,"children":910},{"style":486},[911],{"type":402,"value":912},"throw",{"type":396,"tag":421,"props":914,"children":915},{"style":498},[916],{"type":402,"value":917}," err\n",{"type":396,"tag":421,"props":919,"children":921},{"class":423,"line":920},17,[922,927,931,936,940,944,948,953,957,962],{"type":396,"tag":421,"props":923,"children":924},{"style":498},[925],{"type":402,"value":926},"      files",{"type":396,"tag":421,"props":928,"children":929},{"style":450},[930],{"type":402,"value":506},{"type":396,"tag":421,"props":932,"children":933},{"style":444},[934],{"type":402,"value":935},"forEach",{"type":396,"tag":421,"props":937,"children":938},{"style":492},[939],{"type":402,"value":453},{"type":396,"tag":421,"props":941,"children":942},{"style":438},[943],{"type":402,"value":441},{"type":396,"tag":421,"props":945,"children":946},{"style":450},[947],{"type":402,"value":453},{"type":396,"tag":421,"props":949,"children":950},{"style":456},[951],{"type":402,"value":952},"n",{"type":396,"tag":421,"props":954,"children":955},{"style":450},[956],{"type":402,"value":474},{"type":396,"tag":421,"props":958,"children":959},{"style":450},[960],{"type":402,"value":961}," {",{"type":396,"tag":421,"props":963,"children":964},{"style":492},[965],{"type":402,"value":966}," \n",{"type":396,"tag":421,"props":968,"children":970},{"class":423,"line":969},18,[971,976,981,987,992,996,1000,1004,1008,1012,1017],{"type":396,"tag":421,"props":972,"children":973},{"style":438},[974],{"type":402,"value":975},"        var",{"type":396,"tag":421,"props":977,"children":978},{"style":498},[979],{"type":402,"value":980}," file",{"type":396,"tag":421,"props":982,"children":984},{"style":983},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[985],{"type":402,"value":986}," =",{"type":396,"tag":421,"props":988,"children":989},{"style":498},[990],{"type":402,"value":991}," path",{"type":396,"tag":421,"props":993,"children":994},{"style":450},[995],{"type":402,"value":506},{"type":396,"tag":421,"props":997,"children":998},{"style":444},[999],{"type":402,"value":786},{"type":396,"tag":421,"props":1001,"children":1002},{"style":492},[1003],{"type":402,"value":453},{"type":396,"tag":421,"props":1005,"children":1006},{"style":498},[1007],{"type":402,"value":459},{"type":396,"tag":421,"props":1009,"children":1010},{"style":450},[1011],{"type":402,"value":464},{"type":396,"tag":421,"props":1013,"children":1014},{"style":498},[1015],{"type":402,"value":1016}," n",{"type":396,"tag":421,"props":1018,"children":1019},{"style":492},[1020],{"type":402,"value":613},{"type":396,"tag":421,"props":1022,"children":1024},{"class":423,"line":1023},19,[1025,1030,1035,1039,1043,1047,1051,1056,1061],{"type":396,"tag":421,"props":1026,"children":1027},{"style":486},[1028],{"type":402,"value":1029},"        if",{"type":396,"tag":421,"props":1031,"children":1032},{"style":492},[1033],{"type":402,"value":1034}," ( ",{"type":396,"tag":421,"props":1036,"children":1037},{"style":498},[1038],{"type":402,"value":501},{"type":396,"tag":421,"props":1040,"children":1041},{"style":450},[1042],{"type":402,"value":506},{"type":396,"tag":421,"props":1044,"children":1045},{"style":444},[1046],{"type":402,"value":669},{"type":396,"tag":421,"props":1048,"children":1049},{"style":492},[1050],{"type":402,"value":453},{"type":396,"tag":421,"props":1052,"children":1053},{"style":498},[1054],{"type":402,"value":1055},"file",{"type":396,"tag":421,"props":1057,"children":1058},{"style":492},[1059],{"type":402,"value":1060},") ) ",{"type":396,"tag":421,"props":1062,"children":1063},{"style":450},[1064],{"type":402,"value":529},{"type":396,"tag":421,"props":1066,"children":1068},{"class":423,"line":1067},20,[1069,1074,1078,1082,1086,1090],{"type":396,"tag":421,"props":1070,"children":1071},{"style":444},[1072],{"type":402,"value":1073},"          watch",{"type":396,"tag":421,"props":1075,"children":1076},{"style":492},[1077],{"type":402,"value":453},{"type":396,"tag":421,"props":1079,"children":1080},{"style":498},[1081],{"type":402,"value":1055},{"type":396,"tag":421,"props":1083,"children":1084},{"style":450},[1085],{"type":402,"value":464},{"type":396,"tag":421,"props":1087,"children":1088},{"style":498},[1089],{"type":402,"value":469},{"type":396,"tag":421,"props":1091,"children":1092},{"style":492},[1093],{"type":402,"value":613},{"type":396,"tag":421,"props":1095,"children":1097},{"class":423,"line":1096},21,[1098],{"type":396,"tag":421,"props":1099,"children":1100},{"style":450},[1101],{"type":402,"value":1102},"        }\n",{"type":396,"tag":421,"props":1104,"children":1106},{"class":423,"line":1105},22,[1107,1112],{"type":396,"tag":421,"props":1108,"children":1109},{"style":450},[1110],{"type":402,"value":1111},"      }",{"type":396,"tag":421,"props":1113,"children":1114},{"style":492},[1115],{"type":402,"value":613},{"type":396,"tag":421,"props":1117,"children":1119},{"class":423,"line":1118},23,[1120,1124],{"type":396,"tag":421,"props":1121,"children":1122},{"style":450},[1123],{"type":402,"value":622},{"type":396,"tag":421,"props":1125,"children":1126},{"style":492},[1127],{"type":402,"value":1128},")     \n",{"type":396,"tag":421,"props":1130,"children":1132},{"class":423,"line":1131},24,[1133],{"type":396,"tag":421,"props":1134,"children":1135},{"style":450},[1136],{"type":402,"value":644},{"type":396,"tag":421,"props":1138,"children":1140},{"class":423,"line":1139},25,[1141],{"type":396,"tag":421,"props":1142,"children":1143},{"style":450},[1144],{"type":402,"value":1145},"}\n",{"type":396,"tag":404,"props":1147,"children":1148},{},[1149,1151,1160],{"type":402,"value":1150},"由于 fs.watchFile 可能导致",{"type":396,"tag":1152,"props":1153,"children":1157},"a",{"href":1154,"rel":1155},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[1156],"nofollow",[1158],{"type":402,"value":1159},"高 CPU 负载等问题",{"type":402,"value":1161},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":396,"tag":410,"props":1163,"children":1165},{"className":412,"code":1164,"language":414,"meta":389,"style":389},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[1166],{"type":396,"tag":417,"props":1167,"children":1168},{"__ignoreMap":389},[1169,1199,1263,1321,1376,1412,1420,1432],{"type":396,"tag":421,"props":1170,"children":1171},{"class":423,"line":424},[1172,1177,1182,1186,1190,1195],{"type":396,"tag":421,"props":1173,"children":1174},{"style":486},[1175],{"type":402,"value":1176},"if",{"type":396,"tag":421,"props":1178,"children":1179},{"style":498},[1180],{"type":402,"value":1181}," (is",{"type":396,"tag":421,"props":1183,"children":1184},{"style":450},[1185],{"type":402,"value":506},{"type":396,"tag":421,"props":1187,"children":1188},{"style":444},[1189],{"type":402,"value":1055},{"type":396,"tag":421,"props":1191,"children":1192},{"style":498},[1193],{"type":402,"value":1194},"(fpath)) ",{"type":396,"tag":421,"props":1196,"children":1197},{"style":450},[1198],{"type":402,"value":529},{"type":396,"tag":421,"props":1200,"children":1201},{"class":423,"line":434},[1202,1207,1212,1216,1220,1224,1229,1233,1238,1242,1248,1254,1259],{"type":396,"tag":421,"props":1203,"children":1204},{"style":438},[1205],{"type":402,"value":1206},"  var",{"type":396,"tag":421,"props":1208,"children":1209},{"style":498},[1210],{"type":402,"value":1211}," parent",{"type":396,"tag":421,"props":1213,"children":1214},{"style":983},[1215],{"type":402,"value":986},{"type":396,"tag":421,"props":1217,"children":1218},{"style":498},[1219],{"type":402,"value":991},{"type":396,"tag":421,"props":1221,"children":1222},{"style":450},[1223],{"type":402,"value":506},{"type":396,"tag":421,"props":1225,"children":1226},{"style":444},[1227],{"type":402,"value":1228},"resolve",{"type":396,"tag":421,"props":1230,"children":1231},{"style":492},[1232],{"type":402,"value":453},{"type":396,"tag":421,"props":1234,"children":1235},{"style":498},[1236],{"type":402,"value":1237},"fpath",{"type":396,"tag":421,"props":1239,"children":1240},{"style":450},[1241],{"type":402,"value":464},{"type":396,"tag":421,"props":1243,"children":1245},{"style":1244},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1246],{"type":402,"value":1247}," '",{"type":396,"tag":421,"props":1249,"children":1251},{"style":1250},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1252],{"type":402,"value":1253},"..",{"type":396,"tag":421,"props":1255,"children":1256},{"style":1244},[1257],{"type":402,"value":1258},"'",{"type":396,"tag":421,"props":1260,"children":1261},{"style":492},[1262],{"type":402,"value":613},{"type":396,"tag":421,"props":1264,"children":1265},{"class":423,"line":482},[1266,1271,1275,1279,1283,1288,1292,1296,1300,1305,1309,1313,1317],{"type":396,"tag":421,"props":1267,"children":1268},{"style":498},[1269],{"type":402,"value":1270},"  fs",{"type":396,"tag":421,"props":1272,"children":1273},{"style":450},[1274],{"type":402,"value":506},{"type":396,"tag":421,"props":1276,"children":1277},{"style":444},[1278],{"type":402,"value":702},{"type":396,"tag":421,"props":1280,"children":1281},{"style":492},[1282],{"type":402,"value":453},{"type":396,"tag":421,"props":1284,"children":1285},{"style":498},[1286],{"type":402,"value":1287},"parent",{"type":396,"tag":421,"props":1289,"children":1290},{"style":450},[1291],{"type":402,"value":464},{"type":396,"tag":421,"props":1293,"children":1294},{"style":438},[1295],{"type":402,"value":564},{"type":396,"tag":421,"props":1297,"children":1298},{"style":450},[1299],{"type":402,"value":453},{"type":396,"tag":421,"props":1301,"children":1302},{"style":456},[1303],{"type":402,"value":1304},"evt",{"type":396,"tag":421,"props":1306,"children":1307},{"style":450},[1308],{"type":402,"value":464},{"type":396,"tag":421,"props":1310,"children":1311},{"style":456},[1312],{"type":402,"value":735},{"type":396,"tag":421,"props":1314,"children":1315},{"style":450},[1316],{"type":402,"value":474},{"type":396,"tag":421,"props":1318,"children":1319},{"style":450},[1320],{"type":402,"value":479},{"type":396,"tag":421,"props":1322,"children":1323},{"class":423,"line":532},[1324,1329,1333,1338,1342,1347,1351,1355,1359,1364,1368,1372],{"type":396,"tag":421,"props":1325,"children":1326},{"style":486},[1327],{"type":402,"value":1328},"    if",{"type":396,"tag":421,"props":1330,"children":1331},{"style":492},[1332],{"type":402,"value":495},{"type":396,"tag":421,"props":1334,"children":1335},{"style":498},[1336],{"type":402,"value":1337},"path",{"type":396,"tag":421,"props":1339,"children":1340},{"style":450},[1341],{"type":402,"value":506},{"type":396,"tag":421,"props":1343,"children":1344},{"style":444},[1345],{"type":402,"value":1346},"basename",{"type":396,"tag":421,"props":1348,"children":1349},{"style":492},[1350],{"type":402,"value":453},{"type":396,"tag":421,"props":1352,"children":1353},{"style":498},[1354],{"type":402,"value":1237},{"type":396,"tag":421,"props":1356,"children":1357},{"style":492},[1358],{"type":402,"value":907},{"type":396,"tag":421,"props":1360,"children":1361},{"style":983},[1362],{"type":402,"value":1363},"===",{"type":396,"tag":421,"props":1365,"children":1366},{"style":498},[1367],{"type":402,"value":735},{"type":396,"tag":421,"props":1369,"children":1370},{"style":492},[1371],{"type":402,"value":907},{"type":396,"tag":421,"props":1373,"children":1374},{"style":450},[1375],{"type":402,"value":529},{"type":396,"tag":421,"props":1377,"children":1378},{"class":423,"line":584},[1379,1383,1387,1391,1395,1400,1404,1408],{"type":396,"tag":421,"props":1380,"children":1381},{"style":444},[1382],{"type":402,"value":590},{"type":396,"tag":421,"props":1384,"children":1385},{"style":492},[1386],{"type":402,"value":453},{"type":396,"tag":421,"props":1388,"children":1389},{"style":498},[1390],{"type":402,"value":1237},{"type":396,"tag":421,"props":1392,"children":1393},{"style":450},[1394],{"type":402,"value":464},{"type":396,"tag":421,"props":1396,"children":1397},{"style":498},[1398],{"type":402,"value":1399}," options",{"type":396,"tag":421,"props":1401,"children":1402},{"style":450},[1403],{"type":402,"value":464},{"type":396,"tag":421,"props":1405,"children":1406},{"style":498},[1407],{"type":402,"value":469},{"type":396,"tag":421,"props":1409,"children":1410},{"style":492},[1411],{"type":402,"value":613},{"type":396,"tag":421,"props":1413,"children":1414},{"class":423,"line":616},[1415],{"type":396,"tag":421,"props":1416,"children":1417},{"style":450},[1418],{"type":402,"value":1419},"    }\n",{"type":396,"tag":421,"props":1421,"children":1422},{"class":423,"line":629},[1423,1428],{"type":396,"tag":421,"props":1424,"children":1425},{"style":450},[1426],{"type":402,"value":1427},"  }",{"type":396,"tag":421,"props":1429,"children":1430},{"style":492},[1431],{"type":402,"value":613},{"type":396,"tag":421,"props":1433,"children":1434},{"class":423,"line":638},[1435],{"type":396,"tag":421,"props":1436,"children":1437},{"style":450},[1438],{"type":402,"value":1145},{"type":396,"tag":404,"props":1440,"children":1441},{},[1442],{"type":402,"value":1443},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":396,"tag":410,"props":1445,"children":1447},{"className":412,"code":1446,"language":414,"meta":389,"style":389},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1448],{"type":396,"tag":417,"props":1449,"children":1450},{"__ignoreMap":389},[1451,1494,1531,1566,1600,1607,1614],{"type":396,"tag":421,"props":1452,"children":1453},{"class":423,"line":424},[1454,1458,1462,1466,1470,1474,1478,1482,1486,1490],{"type":396,"tag":421,"props":1455,"children":1456},{"style":438},[1457],{"type":402,"value":441},{"type":396,"tag":421,"props":1459,"children":1460},{"style":444},[1461],{"type":402,"value":447},{"type":396,"tag":421,"props":1463,"children":1464},{"style":450},[1465],{"type":402,"value":453},{"type":396,"tag":421,"props":1467,"children":1468},{"style":456},[1469],{"type":402,"value":1237},{"type":396,"tag":421,"props":1471,"children":1472},{"style":450},[1473],{"type":402,"value":464},{"type":396,"tag":421,"props":1475,"children":1476},{"style":456},[1477],{"type":402,"value":1399},{"type":396,"tag":421,"props":1479,"children":1480},{"style":450},[1481],{"type":402,"value":464},{"type":396,"tag":421,"props":1483,"children":1484},{"style":456},[1485],{"type":402,"value":469},{"type":396,"tag":421,"props":1487,"children":1488},{"style":450},[1489],{"type":402,"value":474},{"type":396,"tag":421,"props":1491,"children":1492},{"style":450},[1493],{"type":402,"value":479},{"type":396,"tag":421,"props":1495,"children":1496},{"class":423,"line":434},[1497,1501,1505,1509,1513,1518,1522,1526],{"type":396,"tag":421,"props":1498,"children":1499},{"style":486},[1500],{"type":402,"value":489},{"type":396,"tag":421,"props":1502,"children":1503},{"style":492},[1504],{"type":402,"value":495},{"type":396,"tag":421,"props":1506,"children":1507},{"style":498},[1508],{"type":402,"value":501},{"type":396,"tag":421,"props":1510,"children":1511},{"style":450},[1512],{"type":402,"value":506},{"type":396,"tag":421,"props":1514,"children":1515},{"style":444},[1516],{"type":402,"value":1517},"symbolic",{"type":396,"tag":421,"props":1519,"children":1520},{"style":492},[1521],{"type":402,"value":453},{"type":396,"tag":421,"props":1523,"children":1524},{"style":498},[1525],{"type":402,"value":1237},{"type":396,"tag":421,"props":1527,"children":1528},{"style":492},[1529],{"type":402,"value":1530},") \n",{"type":396,"tag":421,"props":1532,"children":1533},{"class":423,"line":482},[1534,1539,1544,1548,1553,1557,1562],{"type":396,"tag":421,"props":1535,"children":1536},{"style":983},[1537],{"type":402,"value":1538},"    &&",{"type":396,"tag":421,"props":1540,"children":1541},{"style":983},[1542],{"type":402,"value":1543}," !",{"type":396,"tag":421,"props":1545,"children":1546},{"style":492},[1547],{"type":402,"value":453},{"type":396,"tag":421,"props":1549,"children":1550},{"style":498},[1551],{"type":402,"value":1552},"options",{"type":396,"tag":421,"props":1554,"children":1555},{"style":450},[1556],{"type":402,"value":506},{"type":396,"tag":421,"props":1558,"children":1559},{"style":498},[1560],{"type":402,"value":1561},"followSymLinks",{"type":396,"tag":421,"props":1563,"children":1564},{"style":492},[1565],{"type":402,"value":966},{"type":396,"tag":421,"props":1567,"children":1568},{"class":423,"line":532},[1569,1574,1578,1582,1587,1592,1596],{"type":396,"tag":421,"props":1570,"children":1571},{"style":983},[1572],{"type":402,"value":1573},"      &&",{"type":396,"tag":421,"props":1575,"children":1576},{"style":498},[1577],{"type":402,"value":1399},{"type":396,"tag":421,"props":1579,"children":1580},{"style":450},[1581],{"type":402,"value":506},{"type":396,"tag":421,"props":1583,"children":1584},{"style":498},[1585],{"type":402,"value":1586},"maxSymLevel",{"type":396,"tag":421,"props":1588,"children":1589},{"style":983},[1590],{"type":402,"value":1591},"--",{"type":396,"tag":421,"props":1593,"children":1594},{"style":492},[1595],{"type":402,"value":524},{"type":396,"tag":421,"props":1597,"children":1598},{"style":450},[1599],{"type":402,"value":529},{"type":396,"tag":421,"props":1601,"children":1602},{"class":423,"line":584},[1603],{"type":396,"tag":421,"props":1604,"children":1605},{"style":486},[1606],{"type":402,"value":635},{"type":396,"tag":421,"props":1608,"children":1609},{"class":423,"line":616},[1610],{"type":396,"tag":421,"props":1611,"children":1612},{"style":450},[1613],{"type":402,"value":644},{"type":396,"tag":421,"props":1615,"children":1616},{"class":423,"line":629},[1617],{"type":396,"tag":421,"props":1618,"children":1619},{"style":450},[1620],{"type":402,"value":1145},{"type":396,"tag":404,"props":1622,"children":1623},{},[1624],{"type":402,"value":1625},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":396,"tag":410,"props":1627,"children":1629},{"className":412,"code":1628,"language":414,"meta":389,"style":389},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1630],{"type":396,"tag":417,"props":1631,"children":1632},{"__ignoreMap":389},[1633,1647,1655,1667,1712,1734,1784,1820,1836,1849,1856,1863,1870,1909,1930,1963,1991,2002,2020,2027,2094,2162,2182,2203,2235,2264,2276,2284],{"type":396,"tag":421,"props":1634,"children":1635},{"class":423,"line":424},[1636,1641],{"type":396,"tag":421,"props":1637,"children":1638},{"style":438},[1639],{"type":402,"value":1640},"var",{"type":396,"tag":421,"props":1642,"children":1644},{"style":1643},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1645],{"type":402,"value":1646}," IS_SUPPORT\n",{"type":396,"tag":421,"props":1648,"children":1649},{"class":423,"line":434},[1650],{"type":396,"tag":421,"props":1651,"children":1652},{"emptyLinePlaceholder":388},[1653],{"type":402,"value":1654},"\n",{"type":396,"tag":421,"props":1656,"children":1657},{"class":423,"line":482},[1658,1663],{"type":396,"tag":421,"props":1659,"children":1660},{"style":486},[1661],{"type":402,"value":1662},"try",{"type":396,"tag":421,"props":1664,"children":1665},{"style":450},[1666],{"type":402,"value":479},{"type":396,"tag":421,"props":1668,"children":1669},{"class":423,"line":532},[1670,1675,1679,1684,1688,1692,1696,1700,1704,1708],{"type":396,"tag":421,"props":1671,"children":1672},{"style":498},[1673],{"type":402,"value":1674},"  watcher",{"type":396,"tag":421,"props":1676,"children":1677},{"style":983},[1678],{"type":402,"value":986},{"type":396,"tag":421,"props":1680,"children":1681},{"style":498},[1682],{"type":402,"value":1683}," fs",{"type":396,"tag":421,"props":1685,"children":1686},{"style":450},[1687],{"type":402,"value":506},{"type":396,"tag":421,"props":1689,"children":1690},{"style":444},[1691],{"type":402,"value":702},{"type":396,"tag":421,"props":1693,"children":1694},{"style":492},[1695],{"type":402,"value":453},{"type":396,"tag":421,"props":1697,"children":1698},{"style":498},[1699],{"type":402,"value":1287},{"type":396,"tag":421,"props":1701,"children":1702},{"style":450},[1703],{"type":402,"value":464},{"type":396,"tag":421,"props":1705,"children":1706},{"style":498},[1707],{"type":402,"value":1399},{"type":396,"tag":421,"props":1709,"children":1710},{"style":492},[1711],{"type":402,"value":613},{"type":396,"tag":421,"props":1713,"children":1714},{"class":423,"line":584},[1715,1720,1725,1730],{"type":396,"tag":421,"props":1716,"children":1717},{"style":450},[1718],{"type":402,"value":1719},"}",{"type":396,"tag":421,"props":1721,"children":1722},{"style":486},[1723],{"type":402,"value":1724}," catch",{"type":396,"tag":421,"props":1726,"children":1727},{"style":498},[1728],{"type":402,"value":1729}," (e) ",{"type":396,"tag":421,"props":1731,"children":1732},{"style":450},[1733],{"type":402,"value":529},{"type":396,"tag":421,"props":1735,"children":1736},{"class":423,"line":616},[1737,1741,1745,1750,1754,1758,1763,1767,1772,1776,1780],{"type":396,"tag":421,"props":1738,"children":1739},{"style":486},[1740],{"type":402,"value":489},{"type":396,"tag":421,"props":1742,"children":1743},{"style":492},[1744],{"type":402,"value":495},{"type":396,"tag":421,"props":1746,"children":1747},{"style":498},[1748],{"type":402,"value":1749},"e",{"type":396,"tag":421,"props":1751,"children":1752},{"style":450},[1753],{"type":402,"value":506},{"type":396,"tag":421,"props":1755,"children":1756},{"style":498},[1757],{"type":402,"value":417},{"type":396,"tag":421,"props":1759,"children":1760},{"style":983},[1761],{"type":402,"value":1762}," ==",{"type":396,"tag":421,"props":1764,"children":1765},{"style":1244},[1766],{"type":402,"value":1247},{"type":396,"tag":421,"props":1768,"children":1769},{"style":1250},[1770],{"type":402,"value":1771},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":396,"tag":421,"props":1773,"children":1774},{"style":1244},[1775],{"type":402,"value":1258},{"type":396,"tag":421,"props":1777,"children":1778},{"style":492},[1779],{"type":402,"value":907},{"type":396,"tag":421,"props":1781,"children":1782},{"style":450},[1783],{"type":402,"value":529},{"type":396,"tag":421,"props":1785,"children":1786},{"class":423,"line":629},[1787,1792,1797,1801,1806,1810,1816],{"type":396,"tag":421,"props":1788,"children":1789},{"style":486},[1790],{"type":402,"value":1791},"    return",{"type":396,"tag":421,"props":1793,"children":1794},{"style":444},[1795],{"type":402,"value":1796}," fn",{"type":396,"tag":421,"props":1798,"children":1799},{"style":492},[1800],{"type":402,"value":453},{"type":396,"tag":421,"props":1802,"children":1803},{"style":1643},[1804],{"type":402,"value":1805},"IS_SUPPORT",{"type":396,"tag":421,"props":1807,"children":1808},{"style":983},[1809],{"type":402,"value":986},{"type":396,"tag":421,"props":1811,"children":1813},{"style":1812},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1814],{"type":402,"value":1815}," false",{"type":396,"tag":421,"props":1817,"children":1818},{"style":492},[1819],{"type":402,"value":613},{"type":396,"tag":421,"props":1821,"children":1822},{"class":423,"line":638},[1823,1827,1832],{"type":396,"tag":421,"props":1824,"children":1825},{"style":450},[1826],{"type":402,"value":1427},{"type":396,"tag":421,"props":1828,"children":1829},{"style":486},[1830],{"type":402,"value":1831}," else",{"type":396,"tag":421,"props":1833,"children":1834},{"style":450},[1835],{"type":402,"value":479},{"type":396,"tag":421,"props":1837,"children":1838},{"class":423,"line":647},[1839,1844],{"type":396,"tag":421,"props":1840,"children":1841},{"style":486},[1842],{"type":402,"value":1843},"    throw",{"type":396,"tag":421,"props":1845,"children":1846},{"style":498},[1847],{"type":402,"value":1848}," e\n",{"type":396,"tag":421,"props":1850,"children":1851},{"class":423,"line":688},[1852],{"type":396,"tag":421,"props":1853,"children":1854},{"style":450},[1855],{"type":402,"value":644},{"type":396,"tag":421,"props":1857,"children":1858},{"class":423,"line":746},[1859],{"type":396,"tag":421,"props":1860,"children":1861},{"style":450},[1862],{"type":402,"value":1145},{"type":396,"tag":421,"props":1864,"children":1865},{"class":423,"line":771},[1866],{"type":396,"tag":421,"props":1867,"children":1868},{"emptyLinePlaceholder":388},[1869],{"type":402,"value":1654},{"type":396,"tag":421,"props":1871,"children":1872},{"class":423,"line":809},[1873,1877,1882,1887,1892,1896,1900,1905],{"type":396,"tag":421,"props":1874,"children":1875},{"style":438},[1876],{"type":402,"value":1640},{"type":396,"tag":421,"props":1878,"children":1879},{"style":498},[1880],{"type":402,"value":1881}," timer ",{"type":396,"tag":421,"props":1883,"children":1884},{"style":983},[1885],{"type":402,"value":1886},"=",{"type":396,"tag":421,"props":1888,"children":1889},{"style":444},[1890],{"type":402,"value":1891}," setTimeout",{"type":396,"tag":421,"props":1893,"children":1894},{"style":498},[1895],{"type":402,"value":453},{"type":396,"tag":421,"props":1897,"children":1898},{"style":438},[1899],{"type":402,"value":441},{"type":396,"tag":421,"props":1901,"children":1902},{"style":450},[1903],{"type":402,"value":1904},"()",{"type":396,"tag":421,"props":1906,"children":1907},{"style":450},[1908],{"type":402,"value":479},{"type":396,"tag":421,"props":1910,"children":1911},{"class":423,"line":818},[1912,1916,1920,1925],{"type":396,"tag":421,"props":1913,"children":1914},{"style":498},[1915],{"type":402,"value":1674},{"type":396,"tag":421,"props":1917,"children":1918},{"style":450},[1919],{"type":402,"value":506},{"type":396,"tag":421,"props":1921,"children":1922},{"style":444},[1923],{"type":402,"value":1924},"close",{"type":396,"tag":421,"props":1926,"children":1927},{"style":492},[1928],{"type":402,"value":1929},"()\n",{"type":396,"tag":421,"props":1931,"children":1932},{"class":423,"line":830},[1933,1938,1942,1947,1951,1955,1959],{"type":396,"tag":421,"props":1934,"children":1935},{"style":498},[1936],{"type":402,"value":1937},"  stack",{"type":396,"tag":421,"props":1939,"children":1940},{"style":450},[1941],{"type":402,"value":506},{"type":396,"tag":421,"props":1943,"children":1944},{"style":444},[1945],{"type":402,"value":1946},"cleanup",{"type":396,"tag":421,"props":1948,"children":1949},{"style":492},[1950],{"type":402,"value":453},{"type":396,"tag":421,"props":1952,"children":1953},{"style":438},[1954],{"type":402,"value":441},{"type":396,"tag":421,"props":1956,"children":1957},{"style":450},[1958],{"type":402,"value":1904},{"type":396,"tag":421,"props":1960,"children":1961},{"style":450},[1962],{"type":402,"value":479},{"type":396,"tag":421,"props":1964,"children":1965},{"class":423,"line":888},[1966,1971,1975,1979,1983,1987],{"type":396,"tag":421,"props":1967,"children":1968},{"style":444},[1969],{"type":402,"value":1970},"    fn",{"type":396,"tag":421,"props":1972,"children":1973},{"style":492},[1974],{"type":402,"value":453},{"type":396,"tag":421,"props":1976,"children":1977},{"style":1643},[1978],{"type":402,"value":1805},{"type":396,"tag":421,"props":1980,"children":1981},{"style":983},[1982],{"type":402,"value":986},{"type":396,"tag":421,"props":1984,"children":1985},{"style":1812},[1986],{"type":402,"value":1815},{"type":396,"tag":421,"props":1988,"children":1989},{"style":492},[1990],{"type":402,"value":613},{"type":396,"tag":421,"props":1992,"children":1993},{"class":423,"line":920},[1994,1998],{"type":396,"tag":421,"props":1995,"children":1996},{"style":450},[1997],{"type":402,"value":1427},{"type":396,"tag":421,"props":1999,"children":2000},{"style":492},[2001],{"type":402,"value":613},{"type":396,"tag":421,"props":2003,"children":2004},{"class":423,"line":969},[2005,2010,2016],{"type":396,"tag":421,"props":2006,"children":2007},{"style":450},[2008],{"type":402,"value":2009},"},",{"type":396,"tag":421,"props":2011,"children":2013},{"style":2012},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2014],{"type":402,"value":2015}," 200",{"type":396,"tag":421,"props":2017,"children":2018},{"style":498},[2019],{"type":402,"value":613},{"type":396,"tag":421,"props":2021,"children":2022},{"class":423,"line":1023},[2023],{"type":396,"tag":421,"props":2024,"children":2025},{"emptyLinePlaceholder":388},[2026],{"type":402,"value":1654},{"type":396,"tag":421,"props":2028,"children":2029},{"class":423,"line":1067},[2030,2035,2039,2044,2048,2052,2057,2061,2065,2069,2073,2077,2081,2086,2090],{"type":396,"tag":421,"props":2031,"children":2032},{"style":498},[2033],{"type":402,"value":2034},"watcher",{"type":396,"tag":421,"props":2036,"children":2037},{"style":450},[2038],{"type":402,"value":506},{"type":396,"tag":421,"props":2040,"children":2041},{"style":444},[2042],{"type":402,"value":2043},"on",{"type":396,"tag":421,"props":2045,"children":2046},{"style":498},[2047],{"type":402,"value":453},{"type":396,"tag":421,"props":2049,"children":2050},{"style":1244},[2051],{"type":402,"value":1258},{"type":396,"tag":421,"props":2053,"children":2054},{"style":1250},[2055],{"type":402,"value":2056},"change",{"type":396,"tag":421,"props":2058,"children":2059},{"style":1244},[2060],{"type":402,"value":1258},{"type":396,"tag":421,"props":2062,"children":2063},{"style":450},[2064],{"type":402,"value":464},{"type":396,"tag":421,"props":2066,"children":2067},{"style":438},[2068],{"type":402,"value":564},{"type":396,"tag":421,"props":2070,"children":2071},{"style":450},[2072],{"type":402,"value":453},{"type":396,"tag":421,"props":2074,"children":2075},{"style":456},[2076],{"type":402,"value":1304},{"type":396,"tag":421,"props":2078,"children":2079},{"style":450},[2080],{"type":402,"value":464},{"type":396,"tag":421,"props":2082,"children":2083},{"style":456},[2084],{"type":402,"value":2085}," name",{"type":396,"tag":421,"props":2087,"children":2088},{"style":450},[2089],{"type":402,"value":474},{"type":396,"tag":421,"props":2091,"children":2092},{"style":450},[2093],{"type":402,"value":479},{"type":396,"tag":421,"props":2095,"children":2096},{"class":423,"line":1096},[2097,2101,2105,2109,2113,2117,2121,2125,2129,2133,2137,2141,2145,2149,2154,2158],{"type":396,"tag":421,"props":2098,"children":2099},{"style":486},[2100],{"type":402,"value":489},{"type":396,"tag":421,"props":2102,"children":2103},{"style":492},[2104],{"type":402,"value":495},{"type":396,"tag":421,"props":2106,"children":2107},{"style":498},[2108],{"type":402,"value":1337},{"type":396,"tag":421,"props":2110,"children":2111},{"style":450},[2112],{"type":402,"value":506},{"type":396,"tag":421,"props":2114,"children":2115},{"style":444},[2116],{"type":402,"value":1346},{"type":396,"tag":421,"props":2118,"children":2119},{"style":492},[2120],{"type":402,"value":453},{"type":396,"tag":421,"props":2122,"children":2123},{"style":498},[2124],{"type":402,"value":1055},{"type":396,"tag":421,"props":2126,"children":2127},{"style":492},[2128],{"type":402,"value":907},{"type":396,"tag":421,"props":2130,"children":2131},{"style":983},[2132],{"type":402,"value":1363},{"type":396,"tag":421,"props":2134,"children":2135},{"style":498},[2136],{"type":402,"value":991},{"type":396,"tag":421,"props":2138,"children":2139},{"style":450},[2140],{"type":402,"value":506},{"type":396,"tag":421,"props":2142,"children":2143},{"style":444},[2144],{"type":402,"value":1346},{"type":396,"tag":421,"props":2146,"children":2147},{"style":492},[2148],{"type":402,"value":453},{"type":396,"tag":421,"props":2150,"children":2151},{"style":498},[2152],{"type":402,"value":2153},"name",{"type":396,"tag":421,"props":2155,"children":2156},{"style":492},[2157],{"type":402,"value":524},{"type":396,"tag":421,"props":2159,"children":2160},{"style":450},[2161],{"type":402,"value":529},{"type":396,"tag":421,"props":2163,"children":2164},{"class":423,"line":1105},[2165,2170,2174,2178],{"type":396,"tag":421,"props":2166,"children":2167},{"style":498},[2168],{"type":402,"value":2169},"    watcher",{"type":396,"tag":421,"props":2171,"children":2172},{"style":450},[2173],{"type":402,"value":506},{"type":396,"tag":421,"props":2175,"children":2176},{"style":444},[2177],{"type":402,"value":1924},{"type":396,"tag":421,"props":2179,"children":2180},{"style":492},[2181],{"type":402,"value":1929},{"type":396,"tag":421,"props":2183,"children":2184},{"class":423,"line":1118},[2185,2190,2194,2199],{"type":396,"tag":421,"props":2186,"children":2187},{"style":444},[2188],{"type":402,"value":2189},"    clearTimeout",{"type":396,"tag":421,"props":2191,"children":2192},{"style":492},[2193],{"type":402,"value":453},{"type":396,"tag":421,"props":2195,"children":2196},{"style":498},[2197],{"type":402,"value":2198},"timer",{"type":396,"tag":421,"props":2200,"children":2201},{"style":492},[2202],{"type":402,"value":613},{"type":396,"tag":421,"props":2204,"children":2205},{"class":423,"line":1131},[2206,2211,2215,2219,2223,2227,2231],{"type":396,"tag":421,"props":2207,"children":2208},{"style":498},[2209],{"type":402,"value":2210},"    stack",{"type":396,"tag":421,"props":2212,"children":2213},{"style":450},[2214],{"type":402,"value":506},{"type":396,"tag":421,"props":2216,"children":2217},{"style":444},[2218],{"type":402,"value":1946},{"type":396,"tag":421,"props":2220,"children":2221},{"style":492},[2222],{"type":402,"value":453},{"type":396,"tag":421,"props":2224,"children":2225},{"style":438},[2226],{"type":402,"value":441},{"type":396,"tag":421,"props":2228,"children":2229},{"style":450},[2230],{"type":402,"value":1904},{"type":396,"tag":421,"props":2232,"children":2233},{"style":450},[2234],{"type":402,"value":479},{"type":396,"tag":421,"props":2236,"children":2237},{"class":423,"line":1139},[2238,2243,2247,2251,2255,2260],{"type":396,"tag":421,"props":2239,"children":2240},{"style":444},[2241],{"type":402,"value":2242},"      fn",{"type":396,"tag":421,"props":2244,"children":2245},{"style":492},[2246],{"type":402,"value":453},{"type":396,"tag":421,"props":2248,"children":2249},{"style":1643},[2250],{"type":402,"value":1805},{"type":396,"tag":421,"props":2252,"children":2253},{"style":983},[2254],{"type":402,"value":986},{"type":396,"tag":421,"props":2256,"children":2257},{"style":1812},[2258],{"type":402,"value":2259}," true",{"type":396,"tag":421,"props":2261,"children":2262},{"style":492},[2263],{"type":402,"value":613},{"type":396,"tag":421,"props":2265,"children":2267},{"class":423,"line":2266},26,[2268,2272],{"type":396,"tag":421,"props":2269,"children":2270},{"style":450},[2271],{"type":402,"value":622},{"type":396,"tag":421,"props":2273,"children":2274},{"style":492},[2275],{"type":402,"value":613},{"type":396,"tag":421,"props":2277,"children":2279},{"class":423,"line":2278},27,[2280],{"type":396,"tag":421,"props":2281,"children":2282},{"style":450},[2283],{"type":402,"value":644},{"type":396,"tag":421,"props":2285,"children":2287},{"class":423,"line":2286},28,[2288,2292],{"type":396,"tag":421,"props":2289,"children":2290},{"style":450},[2291],{"type":402,"value":1719},{"type":396,"tag":421,"props":2293,"children":2294},{"style":498},[2295],{"type":402,"value":613},{"type":396,"tag":404,"props":2297,"children":2298},{},[2299],{"type":402,"value":2300},"Watcher 仅向外暴露指定方法。",{"type":396,"tag":410,"props":2302,"children":2304},{"className":412,"code":2303,"language":414,"meta":389,"style":389},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2305],{"type":396,"tag":417,"props":2306,"children":2307},{"__ignoreMap":389},[2308,2351,2372,2394,2415,2470,2506,2560,2577,2585,2625,2663,2720,2727,2738,2751],{"type":396,"tag":421,"props":2309,"children":2310},{"class":423,"line":424},[2311,2317,2321,2326,2330,2335,2339,2343,2347],{"type":396,"tag":421,"props":2312,"children":2314},{"style":2313},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[2315],{"type":402,"value":2316},"Watcher",{"type":396,"tag":421,"props":2318,"children":2319},{"style":450},[2320],{"type":402,"value":506},{"type":396,"tag":421,"props":2322,"children":2323},{"style":1643},[2324],{"type":402,"value":2325},"prototype",{"type":396,"tag":421,"props":2327,"children":2328},{"style":450},[2329],{"type":402,"value":506},{"type":396,"tag":421,"props":2331,"children":2332},{"style":444},[2333],{"type":402,"value":2334},"expose",{"type":396,"tag":421,"props":2336,"children":2337},{"style":983},[2338],{"type":402,"value":986},{"type":396,"tag":421,"props":2340,"children":2341},{"style":438},[2342],{"type":402,"value":564},{"type":396,"tag":421,"props":2344,"children":2345},{"style":450},[2346],{"type":402,"value":1904},{"type":396,"tag":421,"props":2348,"children":2349},{"style":450},[2350],{"type":402,"value":479},{"type":396,"tag":421,"props":2352,"children":2353},{"class":423,"line":434},[2354,2358,2363,2367],{"type":396,"tag":421,"props":2355,"children":2356},{"style":438},[2357],{"type":402,"value":1206},{"type":396,"tag":421,"props":2359,"children":2360},{"style":498},[2361],{"type":402,"value":2362}," expose",{"type":396,"tag":421,"props":2364,"children":2365},{"style":983},[2366],{"type":402,"value":986},{"type":396,"tag":421,"props":2368,"children":2369},{"style":450},[2370],{"type":402,"value":2371}," {}\n",{"type":396,"tag":421,"props":2373,"children":2374},{"class":423,"line":482},[2375,2379,2384,2388],{"type":396,"tag":421,"props":2376,"children":2377},{"style":438},[2378],{"type":402,"value":1206},{"type":396,"tag":421,"props":2380,"children":2381},{"style":498},[2382],{"type":402,"value":2383}," self",{"type":396,"tag":421,"props":2385,"children":2386},{"style":983},[2387],{"type":402,"value":986},{"type":396,"tag":421,"props":2389,"children":2391},{"style":2390},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2392],{"type":402,"value":2393}," this\n",{"type":396,"tag":421,"props":2395,"children":2396},{"class":423,"line":532},[2397,2401,2406,2410],{"type":396,"tag":421,"props":2398,"children":2399},{"style":438},[2400],{"type":402,"value":1206},{"type":396,"tag":421,"props":2402,"children":2403},{"style":498},[2404],{"type":402,"value":2405}," methods",{"type":396,"tag":421,"props":2407,"children":2408},{"style":983},[2409],{"type":402,"value":986},{"type":396,"tag":421,"props":2411,"children":2412},{"style":492},[2413],{"type":402,"value":2414}," [\n",{"type":396,"tag":421,"props":2416,"children":2417},{"class":423,"line":584},[2418,2423,2427,2431,2435,2439,2444,2448,2452,2456,2461,2465],{"type":396,"tag":421,"props":2419,"children":2420},{"style":1244},[2421],{"type":402,"value":2422},"    '",{"type":396,"tag":421,"props":2424,"children":2425},{"style":1250},[2426],{"type":402,"value":2043},{"type":396,"tag":421,"props":2428,"children":2429},{"style":1244},[2430],{"type":402,"value":1258},{"type":396,"tag":421,"props":2432,"children":2433},{"style":450},[2434],{"type":402,"value":464},{"type":396,"tag":421,"props":2436,"children":2437},{"style":1244},[2438],{"type":402,"value":1247},{"type":396,"tag":421,"props":2440,"children":2441},{"style":1250},[2442],{"type":402,"value":2443},"emit",{"type":396,"tag":421,"props":2445,"children":2446},{"style":1244},[2447],{"type":402,"value":1258},{"type":396,"tag":421,"props":2449,"children":2450},{"style":450},[2451],{"type":402,"value":464},{"type":396,"tag":421,"props":2453,"children":2454},{"style":1244},[2455],{"type":402,"value":1247},{"type":396,"tag":421,"props":2457,"children":2458},{"style":1250},[2459],{"type":402,"value":2460},"once",{"type":396,"tag":421,"props":2462,"children":2463},{"style":1244},[2464],{"type":402,"value":1258},{"type":396,"tag":421,"props":2466,"children":2467},{"style":450},[2468],{"type":402,"value":2469},",\n",{"type":396,"tag":421,"props":2471,"children":2472},{"class":423,"line":616},[2473,2477,2481,2485,2489,2493,2498,2502],{"type":396,"tag":421,"props":2474,"children":2475},{"style":1244},[2476],{"type":402,"value":2422},{"type":396,"tag":421,"props":2478,"children":2479},{"style":1250},[2480],{"type":402,"value":1924},{"type":396,"tag":421,"props":2482,"children":2483},{"style":1244},[2484],{"type":402,"value":1258},{"type":396,"tag":421,"props":2486,"children":2487},{"style":450},[2488],{"type":402,"value":464},{"type":396,"tag":421,"props":2490,"children":2491},{"style":1244},[2492],{"type":402,"value":1247},{"type":396,"tag":421,"props":2494,"children":2495},{"style":1250},[2496],{"type":402,"value":2497},"isClosed",{"type":396,"tag":421,"props":2499,"children":2500},{"style":1244},[2501],{"type":402,"value":1258},{"type":396,"tag":421,"props":2503,"children":2504},{"style":450},[2505],{"type":402,"value":2469},{"type":396,"tag":421,"props":2507,"children":2508},{"class":423,"line":629},[2509,2513,2518,2522,2526,2530,2535,2539,2543,2547,2552,2556],{"type":396,"tag":421,"props":2510,"children":2511},{"style":1244},[2512],{"type":402,"value":2422},{"type":396,"tag":421,"props":2514,"children":2515},{"style":1250},[2516],{"type":402,"value":2517},"listeners",{"type":396,"tag":421,"props":2519,"children":2520},{"style":1244},[2521],{"type":402,"value":1258},{"type":396,"tag":421,"props":2523,"children":2524},{"style":450},[2525],{"type":402,"value":464},{"type":396,"tag":421,"props":2527,"children":2528},{"style":1244},[2529],{"type":402,"value":1247},{"type":396,"tag":421,"props":2531,"children":2532},{"style":1250},[2533],{"type":402,"value":2534},"setMaxListeners",{"type":396,"tag":421,"props":2536,"children":2537},{"style":1244},[2538],{"type":402,"value":1258},{"type":396,"tag":421,"props":2540,"children":2541},{"style":450},[2542],{"type":402,"value":464},{"type":396,"tag":421,"props":2544,"children":2545},{"style":1244},[2546],{"type":402,"value":1247},{"type":396,"tag":421,"props":2548,"children":2549},{"style":1250},[2550],{"type":402,"value":2551},"getMaxListeners",{"type":396,"tag":421,"props":2553,"children":2554},{"style":1244},[2555],{"type":402,"value":1258},{"type":396,"tag":421,"props":2557,"children":2558},{"style":450},[2559],{"type":402,"value":2469},{"type":396,"tag":421,"props":2561,"children":2562},{"class":423,"line":638},[2563,2567,2572],{"type":396,"tag":421,"props":2564,"children":2565},{"style":1244},[2566],{"type":402,"value":2422},{"type":396,"tag":421,"props":2568,"children":2569},{"style":1250},[2570],{"type":402,"value":2571},"getWatchedPaths",{"type":396,"tag":421,"props":2573,"children":2574},{"style":1244},[2575],{"type":402,"value":2576},"'\n",{"type":396,"tag":421,"props":2578,"children":2579},{"class":423,"line":647},[2580],{"type":396,"tag":421,"props":2581,"children":2582},{"style":492},[2583],{"type":402,"value":2584},"  ]\n",{"type":396,"tag":421,"props":2586,"children":2587},{"class":423,"line":688},[2588,2593,2597,2601,2605,2609,2613,2617,2621],{"type":396,"tag":421,"props":2589,"children":2590},{"style":498},[2591],{"type":402,"value":2592},"  methods",{"type":396,"tag":421,"props":2594,"children":2595},{"style":450},[2596],{"type":402,"value":506},{"type":396,"tag":421,"props":2598,"children":2599},{"style":444},[2600],{"type":402,"value":935},{"type":396,"tag":421,"props":2602,"children":2603},{"style":492},[2604],{"type":402,"value":453},{"type":396,"tag":421,"props":2606,"children":2607},{"style":438},[2608],{"type":402,"value":441},{"type":396,"tag":421,"props":2610,"children":2611},{"style":450},[2612],{"type":402,"value":453},{"type":396,"tag":421,"props":2614,"children":2615},{"style":456},[2616],{"type":402,"value":2153},{"type":396,"tag":421,"props":2618,"children":2619},{"style":450},[2620],{"type":402,"value":474},{"type":396,"tag":421,"props":2622,"children":2623},{"style":450},[2624],{"type":402,"value":479},{"type":396,"tag":421,"props":2626,"children":2627},{"class":423,"line":746},[2628,2633,2638,2642,2647,2651,2655,2659],{"type":396,"tag":421,"props":2629,"children":2630},{"style":498},[2631],{"type":402,"value":2632},"    expose",{"type":396,"tag":421,"props":2634,"children":2635},{"style":492},[2636],{"type":402,"value":2637},"[",{"type":396,"tag":421,"props":2639,"children":2640},{"style":498},[2641],{"type":402,"value":2153},{"type":396,"tag":421,"props":2643,"children":2644},{"style":492},[2645],{"type":402,"value":2646},"] ",{"type":396,"tag":421,"props":2648,"children":2649},{"style":983},[2650],{"type":402,"value":1886},{"type":396,"tag":421,"props":2652,"children":2653},{"style":438},[2654],{"type":402,"value":564},{"type":396,"tag":421,"props":2656,"children":2657},{"style":450},[2658],{"type":402,"value":1904},{"type":396,"tag":421,"props":2660,"children":2661},{"style":450},[2662],{"type":402,"value":479},{"type":396,"tag":421,"props":2664,"children":2665},{"class":423,"line":771},[2666,2671,2675,2679,2683,2688,2692,2697,2701,2706,2710,2716],{"type":396,"tag":421,"props":2667,"children":2668},{"style":486},[2669],{"type":402,"value":2670},"      return",{"type":396,"tag":421,"props":2672,"children":2673},{"style":498},[2674],{"type":402,"value":2383},{"type":396,"tag":421,"props":2676,"children":2677},{"style":492},[2678],{"type":402,"value":2637},{"type":396,"tag":421,"props":2680,"children":2681},{"style":498},[2682],{"type":402,"value":2153},{"type":396,"tag":421,"props":2684,"children":2685},{"style":492},[2686],{"type":402,"value":2687},"]",{"type":396,"tag":421,"props":2689,"children":2690},{"style":450},[2691],{"type":402,"value":506},{"type":396,"tag":421,"props":2693,"children":2694},{"style":444},[2695],{"type":402,"value":2696},"apply",{"type":396,"tag":421,"props":2698,"children":2699},{"style":492},[2700],{"type":402,"value":453},{"type":396,"tag":421,"props":2702,"children":2703},{"style":498},[2704],{"type":402,"value":2705},"self",{"type":396,"tag":421,"props":2707,"children":2708},{"style":450},[2709],{"type":402,"value":464},{"type":396,"tag":421,"props":2711,"children":2713},{"style":2712},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2714],{"type":402,"value":2715}," arguments",{"type":396,"tag":421,"props":2717,"children":2718},{"style":492},[2719],{"type":402,"value":613},{"type":396,"tag":421,"props":2721,"children":2722},{"class":423,"line":809},[2723],{"type":396,"tag":421,"props":2724,"children":2725},{"style":450},[2726],{"type":402,"value":1419},{"type":396,"tag":421,"props":2728,"children":2729},{"class":423,"line":818},[2730,2734],{"type":396,"tag":421,"props":2731,"children":2732},{"style":450},[2733],{"type":402,"value":1427},{"type":396,"tag":421,"props":2735,"children":2736},{"style":492},[2737],{"type":402,"value":613},{"type":396,"tag":421,"props":2739,"children":2740},{"class":423,"line":830},[2741,2746],{"type":396,"tag":421,"props":2742,"children":2743},{"style":486},[2744],{"type":402,"value":2745},"  return",{"type":396,"tag":421,"props":2747,"children":2748},{"style":498},[2749],{"type":402,"value":2750}," expose\n",{"type":396,"tag":421,"props":2752,"children":2753},{"class":423,"line":888},[2754],{"type":396,"tag":421,"props":2755,"children":2756},{"style":450},[2757],{"type":402,"value":1145},{"type":396,"tag":404,"props":2759,"children":2760},{},[2761],{"type":402,"value":2762},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":396,"tag":410,"props":2764,"children":2766},{"className":412,"code":2765,"language":414,"meta":389,"style":389},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2767],{"type":396,"tag":417,"props":2768,"children":2769},{"__ignoreMap":389},[2770,2799,2807,2837,2862,2892,2899,2940,3012,3065,3077,3133,3177,3188,3236,3273,3293,3301,3312,3323,3330,3361,3401,3421,3432,3470,3477,3484,3524,3565,3620,3662,3691,3704,3716,3781,3824,3846,3858,3866,3874,3882,3906],{"type":396,"tag":421,"props":2771,"children":2772},{"class":423,"line":424},[2773,2777,2782,2786,2791,2795],{"type":396,"tag":421,"props":2774,"children":2775},{"style":438},[2776],{"type":402,"value":441},{"type":396,"tag":421,"props":2778,"children":2779},{"style":444},[2780],{"type":402,"value":2781}," composeWatcher",{"type":396,"tag":421,"props":2783,"children":2784},{"style":450},[2785],{"type":402,"value":453},{"type":396,"tag":421,"props":2787,"children":2788},{"style":456},[2789],{"type":402,"value":2790},"watchers",{"type":396,"tag":421,"props":2792,"children":2793},{"style":450},[2794],{"type":402,"value":474},{"type":396,"tag":421,"props":2796,"children":2797},{"style":450},[2798],{"type":402,"value":479},{"type":396,"tag":421,"props":2800,"children":2801},{"class":423,"line":434},[2802],{"type":396,"tag":421,"props":2803,"children":2804},{"style":428},[2805],{"type":402,"value":2806},"  // 使用一个新的 watcher 整合事件列表\n",{"type":396,"tag":421,"props":2808,"children":2809},{"class":423,"line":482},[2810,2814,2819,2823,2828,2833],{"type":396,"tag":421,"props":2811,"children":2812},{"style":438},[2813],{"type":402,"value":1206},{"type":396,"tag":421,"props":2815,"children":2816},{"style":498},[2817],{"type":402,"value":2818}," watcher",{"type":396,"tag":421,"props":2820,"children":2821},{"style":983},[2822],{"type":402,"value":986},{"type":396,"tag":421,"props":2824,"children":2825},{"style":983},[2826],{"type":402,"value":2827}," new",{"type":396,"tag":421,"props":2829,"children":2830},{"style":444},[2831],{"type":402,"value":2832}," Watcher",{"type":396,"tag":421,"props":2834,"children":2835},{"style":492},[2836],{"type":402,"value":1929},{"type":396,"tag":421,"props":2838,"children":2839},{"class":423,"line":532},[2840,2844,2849,2853,2858],{"type":396,"tag":421,"props":2841,"children":2842},{"style":438},[2843],{"type":402,"value":1206},{"type":396,"tag":421,"props":2845,"children":2846},{"style":498},[2847],{"type":402,"value":2848}," filterDups",{"type":396,"tag":421,"props":2850,"children":2851},{"style":983},[2852],{"type":402,"value":986},{"type":396,"tag":421,"props":2854,"children":2855},{"style":444},[2856],{"type":402,"value":2857}," createDupsFilter",{"type":396,"tag":421,"props":2859,"children":2860},{"style":492},[2861],{"type":402,"value":1929},{"type":396,"tag":421,"props":2863,"children":2864},{"class":423,"line":584},[2865,2869,2874,2878,2883,2887],{"type":396,"tag":421,"props":2866,"children":2867},{"style":438},[2868],{"type":402,"value":1206},{"type":396,"tag":421,"props":2870,"children":2871},{"style":498},[2872],{"type":402,"value":2873}," counter",{"type":396,"tag":421,"props":2875,"children":2876},{"style":983},[2877],{"type":402,"value":986},{"type":396,"tag":421,"props":2879,"children":2880},{"style":498},[2881],{"type":402,"value":2882}," watchers",{"type":396,"tag":421,"props":2884,"children":2885},{"style":450},[2886],{"type":402,"value":506},{"type":396,"tag":421,"props":2888,"children":2889},{"style":1643},[2890],{"type":402,"value":2891},"length\n",{"type":396,"tag":421,"props":2893,"children":2894},{"class":423,"line":616},[2895],{"type":396,"tag":421,"props":2896,"children":2897},{"emptyLinePlaceholder":388},[2898],{"type":402,"value":1654},{"type":396,"tag":421,"props":2900,"children":2901},{"class":423,"line":629},[2902,2907,2911,2915,2919,2923,2927,2932,2936],{"type":396,"tag":421,"props":2903,"children":2904},{"style":498},[2905],{"type":402,"value":2906},"  watchers",{"type":396,"tag":421,"props":2908,"children":2909},{"style":450},[2910],{"type":402,"value":506},{"type":396,"tag":421,"props":2912,"children":2913},{"style":444},[2914],{"type":402,"value":935},{"type":396,"tag":421,"props":2916,"children":2917},{"style":492},[2918],{"type":402,"value":453},{"type":396,"tag":421,"props":2920,"children":2921},{"style":438},[2922],{"type":402,"value":441},{"type":396,"tag":421,"props":2924,"children":2925},{"style":450},[2926],{"type":402,"value":453},{"type":396,"tag":421,"props":2928,"children":2929},{"style":456},[2930],{"type":402,"value":2931},"w",{"type":396,"tag":421,"props":2933,"children":2934},{"style":450},[2935],{"type":402,"value":474},{"type":396,"tag":421,"props":2937,"children":2938},{"style":450},[2939],{"type":402,"value":479},{"type":396,"tag":421,"props":2941,"children":2942},{"class":423,"line":638},[2943,2948,2952,2956,2960,2964,2968,2972,2976,2980,2984,2988,2992,2996,3000,3004,3008],{"type":396,"tag":421,"props":2944,"children":2945},{"style":498},[2946],{"type":402,"value":2947},"    w",{"type":396,"tag":421,"props":2949,"children":2950},{"style":450},[2951],{"type":402,"value":506},{"type":396,"tag":421,"props":2953,"children":2954},{"style":444},[2955],{"type":402,"value":2043},{"type":396,"tag":421,"props":2957,"children":2958},{"style":492},[2959],{"type":402,"value":453},{"type":396,"tag":421,"props":2961,"children":2962},{"style":1244},[2963],{"type":402,"value":1258},{"type":396,"tag":421,"props":2965,"children":2966},{"style":1250},[2967],{"type":402,"value":2056},{"type":396,"tag":421,"props":2969,"children":2970},{"style":1244},[2971],{"type":402,"value":1258},{"type":396,"tag":421,"props":2973,"children":2974},{"style":450},[2975],{"type":402,"value":464},{"type":396,"tag":421,"props":2977,"children":2978},{"style":444},[2979],{"type":402,"value":2848},{"type":396,"tag":421,"props":2981,"children":2982},{"style":492},[2983],{"type":402,"value":453},{"type":396,"tag":421,"props":2985,"children":2986},{"style":438},[2987],{"type":402,"value":441},{"type":396,"tag":421,"props":2989,"children":2990},{"style":450},[2991],{"type":402,"value":453},{"type":396,"tag":421,"props":2993,"children":2994},{"style":456},[2995],{"type":402,"value":1304},{"type":396,"tag":421,"props":2997,"children":2998},{"style":450},[2999],{"type":402,"value":464},{"type":396,"tag":421,"props":3001,"children":3002},{"style":456},[3003],{"type":402,"value":2085},{"type":396,"tag":421,"props":3005,"children":3006},{"style":450},[3007],{"type":402,"value":474},{"type":396,"tag":421,"props":3009,"children":3010},{"style":450},[3011],{"type":402,"value":479},{"type":396,"tag":421,"props":3013,"children":3014},{"class":423,"line":647},[3015,3020,3024,3028,3032,3036,3040,3044,3048,3053,3057,3061],{"type":396,"tag":421,"props":3016,"children":3017},{"style":498},[3018],{"type":402,"value":3019},"      watcher",{"type":396,"tag":421,"props":3021,"children":3022},{"style":450},[3023],{"type":402,"value":506},{"type":396,"tag":421,"props":3025,"children":3026},{"style":444},[3027],{"type":402,"value":2443},{"type":396,"tag":421,"props":3029,"children":3030},{"style":492},[3031],{"type":402,"value":453},{"type":396,"tag":421,"props":3033,"children":3034},{"style":1244},[3035],{"type":402,"value":1258},{"type":396,"tag":421,"props":3037,"children":3038},{"style":1250},[3039],{"type":402,"value":2056},{"type":396,"tag":421,"props":3041,"children":3042},{"style":1244},[3043],{"type":402,"value":1258},{"type":396,"tag":421,"props":3045,"children":3046},{"style":450},[3047],{"type":402,"value":464},{"type":396,"tag":421,"props":3049,"children":3050},{"style":498},[3051],{"type":402,"value":3052}," evt",{"type":396,"tag":421,"props":3054,"children":3055},{"style":450},[3056],{"type":402,"value":464},{"type":396,"tag":421,"props":3058,"children":3059},{"style":498},[3060],{"type":402,"value":2085},{"type":396,"tag":421,"props":3062,"children":3063},{"style":492},[3064],{"type":402,"value":613},{"type":396,"tag":421,"props":3066,"children":3067},{"class":423,"line":688},[3068,3072],{"type":396,"tag":421,"props":3069,"children":3070},{"style":450},[3071],{"type":402,"value":622},{"type":396,"tag":421,"props":3073,"children":3074},{"style":492},[3075],{"type":402,"value":3076},"))\n",{"type":396,"tag":421,"props":3078,"children":3079},{"class":423,"line":746},[3080,3084,3088,3092,3096,3100,3105,3109,3113,3117,3121,3125,3129],{"type":396,"tag":421,"props":3081,"children":3082},{"style":498},[3083],{"type":402,"value":2947},{"type":396,"tag":421,"props":3085,"children":3086},{"style":450},[3087],{"type":402,"value":506},{"type":396,"tag":421,"props":3089,"children":3090},{"style":444},[3091],{"type":402,"value":2043},{"type":396,"tag":421,"props":3093,"children":3094},{"style":492},[3095],{"type":402,"value":453},{"type":396,"tag":421,"props":3097,"children":3098},{"style":1244},[3099],{"type":402,"value":1258},{"type":396,"tag":421,"props":3101,"children":3102},{"style":1250},[3103],{"type":402,"value":3104},"error",{"type":396,"tag":421,"props":3106,"children":3107},{"style":1244},[3108],{"type":402,"value":1258},{"type":396,"tag":421,"props":3110,"children":3111},{"style":450},[3112],{"type":402,"value":464},{"type":396,"tag":421,"props":3114,"children":3115},{"style":438},[3116],{"type":402,"value":564},{"type":396,"tag":421,"props":3118,"children":3119},{"style":450},[3120],{"type":402,"value":453},{"type":396,"tag":421,"props":3122,"children":3123},{"style":456},[3124],{"type":402,"value":573},{"type":396,"tag":421,"props":3126,"children":3127},{"style":450},[3128],{"type":402,"value":474},{"type":396,"tag":421,"props":3130,"children":3131},{"style":450},[3132],{"type":402,"value":479},{"type":396,"tag":421,"props":3134,"children":3135},{"class":423,"line":771},[3136,3140,3144,3148,3152,3156,3160,3164,3168,3173],{"type":396,"tag":421,"props":3137,"children":3138},{"style":498},[3139],{"type":402,"value":3019},{"type":396,"tag":421,"props":3141,"children":3142},{"style":450},[3143],{"type":402,"value":506},{"type":396,"tag":421,"props":3145,"children":3146},{"style":444},[3147],{"type":402,"value":2443},{"type":396,"tag":421,"props":3149,"children":3150},{"style":492},[3151],{"type":402,"value":453},{"type":396,"tag":421,"props":3153,"children":3154},{"style":1244},[3155],{"type":402,"value":1258},{"type":396,"tag":421,"props":3157,"children":3158},{"style":1250},[3159],{"type":402,"value":3104},{"type":396,"tag":421,"props":3161,"children":3162},{"style":1244},[3163],{"type":402,"value":1258},{"type":396,"tag":421,"props":3165,"children":3166},{"style":450},[3167],{"type":402,"value":464},{"type":396,"tag":421,"props":3169,"children":3170},{"style":498},[3171],{"type":402,"value":3172}," err",{"type":396,"tag":421,"props":3174,"children":3175},{"style":492},[3176],{"type":402,"value":613},{"type":396,"tag":421,"props":3178,"children":3179},{"class":423,"line":809},[3180,3184],{"type":396,"tag":421,"props":3181,"children":3182},{"style":450},[3183],{"type":402,"value":622},{"type":396,"tag":421,"props":3185,"children":3186},{"style":492},[3187],{"type":402,"value":613},{"type":396,"tag":421,"props":3189,"children":3190},{"class":423,"line":818},[3191,3195,3199,3203,3207,3211,3216,3220,3224,3228,3232],{"type":396,"tag":421,"props":3192,"children":3193},{"style":498},[3194],{"type":402,"value":2947},{"type":396,"tag":421,"props":3196,"children":3197},{"style":450},[3198],{"type":402,"value":506},{"type":396,"tag":421,"props":3200,"children":3201},{"style":444},[3202],{"type":402,"value":2043},{"type":396,"tag":421,"props":3204,"children":3205},{"style":492},[3206],{"type":402,"value":453},{"type":396,"tag":421,"props":3208,"children":3209},{"style":1244},[3210],{"type":402,"value":1258},{"type":396,"tag":421,"props":3212,"children":3213},{"style":1250},[3214],{"type":402,"value":3215},"ready",{"type":396,"tag":421,"props":3217,"children":3218},{"style":1244},[3219],{"type":402,"value":1258},{"type":396,"tag":421,"props":3221,"children":3222},{"style":450},[3223],{"type":402,"value":464},{"type":396,"tag":421,"props":3225,"children":3226},{"style":438},[3227],{"type":402,"value":564},{"type":396,"tag":421,"props":3229,"children":3230},{"style":450},[3231],{"type":402,"value":1904},{"type":396,"tag":421,"props":3233,"children":3234},{"style":450},[3235],{"type":402,"value":479},{"type":396,"tag":421,"props":3237,"children":3238},{"class":423,"line":830},[3239,3243,3247,3252,3256,3260,3265,3269],{"type":396,"tag":421,"props":3240,"children":3241},{"style":486},[3242],{"type":402,"value":894},{"type":396,"tag":421,"props":3244,"children":3245},{"style":492},[3246],{"type":402,"value":495},{"type":396,"tag":421,"props":3248,"children":3249},{"style":983},[3250],{"type":402,"value":3251},"!",{"type":396,"tag":421,"props":3253,"children":3254},{"style":492},[3255],{"type":402,"value":453},{"type":396,"tag":421,"props":3257,"children":3258},{"style":983},[3259],{"type":402,"value":1591},{"type":396,"tag":421,"props":3261,"children":3262},{"style":498},[3263],{"type":402,"value":3264},"counter",{"type":396,"tag":421,"props":3266,"children":3267},{"style":492},[3268],{"type":402,"value":524},{"type":396,"tag":421,"props":3270,"children":3271},{"style":450},[3272],{"type":402,"value":529},{"type":396,"tag":421,"props":3274,"children":3275},{"class":423,"line":888},[3276,3281,3285,3289],{"type":396,"tag":421,"props":3277,"children":3278},{"style":444},[3279],{"type":402,"value":3280},"        emitReady",{"type":396,"tag":421,"props":3282,"children":3283},{"style":492},[3284],{"type":402,"value":453},{"type":396,"tag":421,"props":3286,"children":3287},{"style":498},[3288],{"type":402,"value":2034},{"type":396,"tag":421,"props":3290,"children":3291},{"style":492},[3292],{"type":402,"value":613},{"type":396,"tag":421,"props":3294,"children":3295},{"class":423,"line":920},[3296],{"type":396,"tag":421,"props":3297,"children":3298},{"style":450},[3299],{"type":402,"value":3300},"      }\n",{"type":396,"tag":421,"props":3302,"children":3303},{"class":423,"line":969},[3304,3308],{"type":396,"tag":421,"props":3305,"children":3306},{"style":450},[3307],{"type":402,"value":622},{"type":396,"tag":421,"props":3309,"children":3310},{"style":492},[3311],{"type":402,"value":613},{"type":396,"tag":421,"props":3313,"children":3314},{"class":423,"line":1023},[3315,3319],{"type":396,"tag":421,"props":3316,"children":3317},{"style":450},[3318],{"type":402,"value":1427},{"type":396,"tag":421,"props":3320,"children":3321},{"style":492},[3322],{"type":402,"value":613},{"type":396,"tag":421,"props":3324,"children":3325},{"class":423,"line":1067},[3326],{"type":396,"tag":421,"props":3327,"children":3328},{"emptyLinePlaceholder":388},[3329],{"type":402,"value":1654},{"type":396,"tag":421,"props":3331,"children":3332},{"class":423,"line":1096},[3333,3337,3341,3345,3349,3353,3357],{"type":396,"tag":421,"props":3334,"children":3335},{"style":498},[3336],{"type":402,"value":1674},{"type":396,"tag":421,"props":3338,"children":3339},{"style":450},[3340],{"type":402,"value":506},{"type":396,"tag":421,"props":3342,"children":3343},{"style":444},[3344],{"type":402,"value":1924},{"type":396,"tag":421,"props":3346,"children":3347},{"style":983},[3348],{"type":402,"value":986},{"type":396,"tag":421,"props":3350,"children":3351},{"style":438},[3352],{"type":402,"value":564},{"type":396,"tag":421,"props":3354,"children":3355},{"style":450},[3356],{"type":402,"value":1904},{"type":396,"tag":421,"props":3358,"children":3359},{"style":450},[3360],{"type":402,"value":479},{"type":396,"tag":421,"props":3362,"children":3363},{"class":423,"line":1105},[3364,3369,3373,3377,3381,3385,3389,3393,3397],{"type":396,"tag":421,"props":3365,"children":3366},{"style":498},[3367],{"type":402,"value":3368},"    watchers",{"type":396,"tag":421,"props":3370,"children":3371},{"style":450},[3372],{"type":402,"value":506},{"type":396,"tag":421,"props":3374,"children":3375},{"style":444},[3376],{"type":402,"value":935},{"type":396,"tag":421,"props":3378,"children":3379},{"style":492},[3380],{"type":402,"value":453},{"type":396,"tag":421,"props":3382,"children":3383},{"style":438},[3384],{"type":402,"value":441},{"type":396,"tag":421,"props":3386,"children":3387},{"style":450},[3388],{"type":402,"value":453},{"type":396,"tag":421,"props":3390,"children":3391},{"style":456},[3392],{"type":402,"value":2931},{"type":396,"tag":421,"props":3394,"children":3395},{"style":450},[3396],{"type":402,"value":474},{"type":396,"tag":421,"props":3398,"children":3399},{"style":450},[3400],{"type":402,"value":479},{"type":396,"tag":421,"props":3402,"children":3403},{"class":423,"line":1118},[3404,3409,3413,3417],{"type":396,"tag":421,"props":3405,"children":3406},{"style":498},[3407],{"type":402,"value":3408},"      w",{"type":396,"tag":421,"props":3410,"children":3411},{"style":450},[3412],{"type":402,"value":506},{"type":396,"tag":421,"props":3414,"children":3415},{"style":444},[3416],{"type":402,"value":1924},{"type":396,"tag":421,"props":3418,"children":3419},{"style":492},[3420],{"type":402,"value":1929},{"type":396,"tag":421,"props":3422,"children":3423},{"class":423,"line":1131},[3424,3428],{"type":396,"tag":421,"props":3425,"children":3426},{"style":450},[3427],{"type":402,"value":622},{"type":396,"tag":421,"props":3429,"children":3430},{"style":492},[3431],{"type":402,"value":613},{"type":396,"tag":421,"props":3433,"children":3434},{"class":423,"line":1139},[3435,3440,3444,3449,3453,3458,3462,3466],{"type":396,"tag":421,"props":3436,"children":3437},{"style":498},[3438],{"type":402,"value":3439},"    process",{"type":396,"tag":421,"props":3441,"children":3442},{"style":450},[3443],{"type":402,"value":506},{"type":396,"tag":421,"props":3445,"children":3446},{"style":444},[3447],{"type":402,"value":3448},"nextTick",{"type":396,"tag":421,"props":3450,"children":3451},{"style":492},[3452],{"type":402,"value":453},{"type":396,"tag":421,"props":3454,"children":3455},{"style":498},[3456],{"type":402,"value":3457},"emitClose",{"type":396,"tag":421,"props":3459,"children":3460},{"style":450},[3461],{"type":402,"value":464},{"type":396,"tag":421,"props":3463,"children":3464},{"style":498},[3465],{"type":402,"value":2818},{"type":396,"tag":421,"props":3467,"children":3468},{"style":492},[3469],{"type":402,"value":613},{"type":396,"tag":421,"props":3471,"children":3472},{"class":423,"line":2266},[3473],{"type":396,"tag":421,"props":3474,"children":3475},{"style":450},[3476],{"type":402,"value":644},{"type":396,"tag":421,"props":3478,"children":3479},{"class":423,"line":2278},[3480],{"type":396,"tag":421,"props":3481,"children":3482},{"emptyLinePlaceholder":388},[3483],{"type":402,"value":1654},{"type":396,"tag":421,"props":3485,"children":3486},{"class":423,"line":2286},[3487,3491,3495,3499,3503,3507,3511,3516,3520],{"type":396,"tag":421,"props":3488,"children":3489},{"style":498},[3490],{"type":402,"value":1674},{"type":396,"tag":421,"props":3492,"children":3493},{"style":450},[3494],{"type":402,"value":506},{"type":396,"tag":421,"props":3496,"children":3497},{"style":444},[3498],{"type":402,"value":2571},{"type":396,"tag":421,"props":3500,"children":3501},{"style":983},[3502],{"type":402,"value":986},{"type":396,"tag":421,"props":3504,"children":3505},{"style":438},[3506],{"type":402,"value":564},{"type":396,"tag":421,"props":3508,"children":3509},{"style":450},[3510],{"type":402,"value":453},{"type":396,"tag":421,"props":3512,"children":3513},{"style":456},[3514],{"type":402,"value":3515},"fn",{"type":396,"tag":421,"props":3517,"children":3518},{"style":450},[3519],{"type":402,"value":474},{"type":396,"tag":421,"props":3521,"children":3522},{"style":450},[3523],{"type":402,"value":479},{"type":396,"tag":421,"props":3525,"children":3527},{"class":423,"line":3526},29,[3528,3532,3536,3540,3544,3549,3553,3557,3561],{"type":396,"tag":421,"props":3529,"children":3530},{"style":486},[3531],{"type":402,"value":1328},{"type":396,"tag":421,"props":3533,"children":3534},{"style":492},[3535],{"type":402,"value":495},{"type":396,"tag":421,"props":3537,"children":3538},{"style":498},[3539],{"type":402,"value":501},{"type":396,"tag":421,"props":3541,"children":3542},{"style":450},[3543],{"type":402,"value":506},{"type":396,"tag":421,"props":3545,"children":3546},{"style":444},[3547],{"type":402,"value":3548},"func",{"type":396,"tag":421,"props":3550,"children":3551},{"style":492},[3552],{"type":402,"value":453},{"type":396,"tag":421,"props":3554,"children":3555},{"style":498},[3556],{"type":402,"value":3515},{"type":396,"tag":421,"props":3558,"children":3559},{"style":492},[3560],{"type":402,"value":524},{"type":396,"tag":421,"props":3562,"children":3563},{"style":450},[3564],{"type":402,"value":529},{"type":396,"tag":421,"props":3566,"children":3568},{"class":423,"line":3567},30,[3569,3574,3579,3583,3587,3591,3596,3600,3604,3608,3612,3616],{"type":396,"tag":421,"props":3570,"children":3571},{"style":438},[3572],{"type":402,"value":3573},"      var",{"type":396,"tag":421,"props":3575,"children":3576},{"style":498},[3577],{"type":402,"value":3578}," promises",{"type":396,"tag":421,"props":3580,"children":3581},{"style":983},[3582],{"type":402,"value":986},{"type":396,"tag":421,"props":3584,"children":3585},{"style":498},[3586],{"type":402,"value":2882},{"type":396,"tag":421,"props":3588,"children":3589},{"style":450},[3590],{"type":402,"value":506},{"type":396,"tag":421,"props":3592,"children":3593},{"style":444},[3594],{"type":402,"value":3595},"map",{"type":396,"tag":421,"props":3597,"children":3598},{"style":492},[3599],{"type":402,"value":453},{"type":396,"tag":421,"props":3601,"children":3602},{"style":438},[3603],{"type":402,"value":441},{"type":396,"tag":421,"props":3605,"children":3606},{"style":450},[3607],{"type":402,"value":453},{"type":396,"tag":421,"props":3609,"children":3610},{"style":456},[3611],{"type":402,"value":2931},{"type":396,"tag":421,"props":3613,"children":3614},{"style":450},[3615],{"type":402,"value":474},{"type":396,"tag":421,"props":3617,"children":3618},{"style":450},[3619],{"type":402,"value":479},{"type":396,"tag":421,"props":3621,"children":3623},{"class":423,"line":3622},31,[3624,3629,3633,3638,3642,3646,3650,3654,3658],{"type":396,"tag":421,"props":3625,"children":3626},{"style":486},[3627],{"type":402,"value":3628},"        return",{"type":396,"tag":421,"props":3630,"children":3631},{"style":983},[3632],{"type":402,"value":2827},{"type":396,"tag":421,"props":3634,"children":3635},{"style":2313},[3636],{"type":402,"value":3637}," Promise",{"type":396,"tag":421,"props":3639,"children":3640},{"style":492},[3641],{"type":402,"value":453},{"type":396,"tag":421,"props":3643,"children":3644},{"style":438},[3645],{"type":402,"value":441},{"type":396,"tag":421,"props":3647,"children":3648},{"style":450},[3649],{"type":402,"value":453},{"type":396,"tag":421,"props":3651,"children":3652},{"style":456},[3653],{"type":402,"value":1228},{"type":396,"tag":421,"props":3655,"children":3656},{"style":450},[3657],{"type":402,"value":474},{"type":396,"tag":421,"props":3659,"children":3660},{"style":450},[3661],{"type":402,"value":479},{"type":396,"tag":421,"props":3663,"children":3665},{"class":423,"line":3664},32,[3666,3671,3675,3679,3683,3687],{"type":396,"tag":421,"props":3667,"children":3668},{"style":498},[3669],{"type":402,"value":3670},"          w",{"type":396,"tag":421,"props":3672,"children":3673},{"style":450},[3674],{"type":402,"value":506},{"type":396,"tag":421,"props":3676,"children":3677},{"style":444},[3678],{"type":402,"value":2571},{"type":396,"tag":421,"props":3680,"children":3681},{"style":492},[3682],{"type":402,"value":453},{"type":396,"tag":421,"props":3684,"children":3685},{"style":498},[3686],{"type":402,"value":1228},{"type":396,"tag":421,"props":3688,"children":3689},{"style":492},[3690],{"type":402,"value":613},{"type":396,"tag":421,"props":3692,"children":3694},{"class":423,"line":3693},33,[3695,3700],{"type":396,"tag":421,"props":3696,"children":3697},{"style":450},[3698],{"type":402,"value":3699},"        }",{"type":396,"tag":421,"props":3701,"children":3702},{"style":492},[3703],{"type":402,"value":613},{"type":396,"tag":421,"props":3705,"children":3707},{"class":423,"line":3706},34,[3708,3712],{"type":396,"tag":421,"props":3709,"children":3710},{"style":450},[3711],{"type":402,"value":1111},{"type":396,"tag":421,"props":3713,"children":3714},{"style":492},[3715],{"type":402,"value":613},{"type":396,"tag":421,"props":3717,"children":3719},{"class":423,"line":3718},35,[3720,3725,3729,3734,3738,3743,3747,3751,3756,3760,3764,3768,3773,3777],{"type":396,"tag":421,"props":3721,"children":3722},{"style":2313},[3723],{"type":402,"value":3724},"      Promise",{"type":396,"tag":421,"props":3726,"children":3727},{"style":450},[3728],{"type":402,"value":506},{"type":396,"tag":421,"props":3730,"children":3731},{"style":444},[3732],{"type":402,"value":3733},"all",{"type":396,"tag":421,"props":3735,"children":3736},{"style":492},[3737],{"type":402,"value":453},{"type":396,"tag":421,"props":3739,"children":3740},{"style":498},[3741],{"type":402,"value":3742},"promises",{"type":396,"tag":421,"props":3744,"children":3745},{"style":492},[3746],{"type":402,"value":474},{"type":396,"tag":421,"props":3748,"children":3749},{"style":450},[3750],{"type":402,"value":506},{"type":396,"tag":421,"props":3752,"children":3753},{"style":444},[3754],{"type":402,"value":3755},"then",{"type":396,"tag":421,"props":3757,"children":3758},{"style":492},[3759],{"type":402,"value":453},{"type":396,"tag":421,"props":3761,"children":3762},{"style":438},[3763],{"type":402,"value":441},{"type":396,"tag":421,"props":3765,"children":3766},{"style":450},[3767],{"type":402,"value":453},{"type":396,"tag":421,"props":3769,"children":3770},{"style":456},[3771],{"type":402,"value":3772},"result",{"type":396,"tag":421,"props":3774,"children":3775},{"style":450},[3776],{"type":402,"value":474},{"type":396,"tag":421,"props":3778,"children":3779},{"style":450},[3780],{"type":402,"value":479},{"type":396,"tag":421,"props":3782,"children":3784},{"class":423,"line":3783},36,[3785,3789,3794,3798,3803,3807,3812,3816,3820],{"type":396,"tag":421,"props":3786,"children":3787},{"style":438},[3788],{"type":402,"value":975},{"type":396,"tag":421,"props":3790,"children":3791},{"style":498},[3792],{"type":402,"value":3793}," ret",{"type":396,"tag":421,"props":3795,"children":3796},{"style":983},[3797],{"type":402,"value":986},{"type":396,"tag":421,"props":3799,"children":3800},{"style":444},[3801],{"type":402,"value":3802}," unique",{"type":396,"tag":421,"props":3804,"children":3805},{"style":492},[3806],{"type":402,"value":453},{"type":396,"tag":421,"props":3808,"children":3809},{"style":444},[3810],{"type":402,"value":3811},"flat1",{"type":396,"tag":421,"props":3813,"children":3814},{"style":492},[3815],{"type":402,"value":453},{"type":396,"tag":421,"props":3817,"children":3818},{"style":498},[3819],{"type":402,"value":3772},{"type":396,"tag":421,"props":3821,"children":3822},{"style":492},[3823],{"type":402,"value":3076},{"type":396,"tag":421,"props":3825,"children":3827},{"class":423,"line":3826},37,[3828,3833,3837,3842],{"type":396,"tag":421,"props":3829,"children":3830},{"style":444},[3831],{"type":402,"value":3832},"        fn",{"type":396,"tag":421,"props":3834,"children":3835},{"style":492},[3836],{"type":402,"value":453},{"type":396,"tag":421,"props":3838,"children":3839},{"style":498},[3840],{"type":402,"value":3841},"ret",{"type":396,"tag":421,"props":3843,"children":3844},{"style":492},[3845],{"type":402,"value":613},{"type":396,"tag":421,"props":3847,"children":3849},{"class":423,"line":3848},38,[3850,3854],{"type":396,"tag":421,"props":3851,"children":3852},{"style":450},[3853],{"type":402,"value":1111},{"type":396,"tag":421,"props":3855,"children":3856},{"style":492},[3857],{"type":402,"value":613},{"type":396,"tag":421,"props":3859,"children":3861},{"class":423,"line":3860},39,[3862],{"type":396,"tag":421,"props":3863,"children":3864},{"style":450},[3865],{"type":402,"value":1419},{"type":396,"tag":421,"props":3867,"children":3869},{"class":423,"line":3868},40,[3870],{"type":396,"tag":421,"props":3871,"children":3872},{"style":450},[3873],{"type":402,"value":644},{"type":396,"tag":421,"props":3875,"children":3877},{"class":423,"line":3876},41,[3878],{"type":396,"tag":421,"props":3879,"children":3880},{"emptyLinePlaceholder":388},[3881],{"type":402,"value":1654},{"type":396,"tag":421,"props":3883,"children":3885},{"class":423,"line":3884},42,[3886,3890,3894,3898,3902],{"type":396,"tag":421,"props":3887,"children":3888},{"style":486},[3889],{"type":402,"value":2745},{"type":396,"tag":421,"props":3891,"children":3892},{"style":498},[3893],{"type":402,"value":2818},{"type":396,"tag":421,"props":3895,"children":3896},{"style":450},[3897],{"type":402,"value":506},{"type":396,"tag":421,"props":3899,"children":3900},{"style":444},[3901],{"type":402,"value":2334},{"type":396,"tag":421,"props":3903,"children":3904},{"style":492},[3905],{"type":402,"value":1929},{"type":396,"tag":421,"props":3907,"children":3909},{"class":423,"line":3908},43,[3910],{"type":396,"tag":421,"props":3911,"children":3912},{"style":450},[3913],{"type":402,"value":1145},{"type":396,"tag":397,"props":3915,"children":3917},{"id":3916},"工具函数",[3918],{"type":402,"value":3916},{"type":396,"tag":404,"props":3920,"children":3921},{},[3922],{"type":402,"value":3923},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":396,"tag":410,"props":3925,"children":3927},{"className":412,"code":3926,"language":414,"meta":389,"style":389},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3928],{"type":396,"tag":417,"props":3929,"children":3930},{"__ignoreMap":389},[3931,3959,4022,4063,4074],{"type":396,"tag":421,"props":3932,"children":3933},{"class":423,"line":424},[3934,3938,3942,3946,3951,3955],{"type":396,"tag":421,"props":3935,"children":3936},{"style":438},[3937],{"type":402,"value":441},{"type":396,"tag":421,"props":3939,"children":3940},{"style":444},[3941],{"type":402,"value":3802},{"type":396,"tag":421,"props":3943,"children":3944},{"style":450},[3945],{"type":402,"value":453},{"type":396,"tag":421,"props":3947,"children":3948},{"style":456},[3949],{"type":402,"value":3950},"arr",{"type":396,"tag":421,"props":3952,"children":3953},{"style":450},[3954],{"type":402,"value":474},{"type":396,"tag":421,"props":3956,"children":3957},{"style":450},[3958],{"type":402,"value":479},{"type":396,"tag":421,"props":3960,"children":3961},{"class":423,"line":434},[3962,3966,3971,3975,3980,3984,3988,3992,3997,4001,4006,4010,4014,4018],{"type":396,"tag":421,"props":3963,"children":3964},{"style":486},[3965],{"type":402,"value":2745},{"type":396,"tag":421,"props":3967,"children":3968},{"style":498},[3969],{"type":402,"value":3970}," arr",{"type":396,"tag":421,"props":3972,"children":3973},{"style":450},[3974],{"type":402,"value":506},{"type":396,"tag":421,"props":3976,"children":3977},{"style":444},[3978],{"type":402,"value":3979},"filter",{"type":396,"tag":421,"props":3981,"children":3982},{"style":492},[3983],{"type":402,"value":453},{"type":396,"tag":421,"props":3985,"children":3986},{"style":438},[3987],{"type":402,"value":441},{"type":396,"tag":421,"props":3989,"children":3990},{"style":450},[3991],{"type":402,"value":453},{"type":396,"tag":421,"props":3993,"children":3994},{"style":456},[3995],{"type":402,"value":3996},"v",{"type":396,"tag":421,"props":3998,"children":3999},{"style":450},[4000],{"type":402,"value":464},{"type":396,"tag":421,"props":4002,"children":4003},{"style":456},[4004],{"type":402,"value":4005}," i",{"type":396,"tag":421,"props":4007,"children":4008},{"style":450},[4009],{"type":402,"value":464},{"type":396,"tag":421,"props":4011,"children":4012},{"style":456},[4013],{"type":402,"value":2383},{"type":396,"tag":421,"props":4015,"children":4016},{"style":450},[4017],{"type":402,"value":474},{"type":396,"tag":421,"props":4019,"children":4020},{"style":450},[4021],{"type":402,"value":479},{"type":396,"tag":421,"props":4023,"children":4024},{"class":423,"line":482},[4025,4029,4033,4037,4042,4046,4050,4054,4058],{"type":396,"tag":421,"props":4026,"children":4027},{"style":486},[4028],{"type":402,"value":1791},{"type":396,"tag":421,"props":4030,"children":4031},{"style":498},[4032],{"type":402,"value":2383},{"type":396,"tag":421,"props":4034,"children":4035},{"style":450},[4036],{"type":402,"value":506},{"type":396,"tag":421,"props":4038,"children":4039},{"style":444},[4040],{"type":402,"value":4041},"indexOf",{"type":396,"tag":421,"props":4043,"children":4044},{"style":492},[4045],{"type":402,"value":453},{"type":396,"tag":421,"props":4047,"children":4048},{"style":498},[4049],{"type":402,"value":3996},{"type":396,"tag":421,"props":4051,"children":4052},{"style":492},[4053],{"type":402,"value":907},{"type":396,"tag":421,"props":4055,"children":4056},{"style":983},[4057],{"type":402,"value":1363},{"type":396,"tag":421,"props":4059,"children":4060},{"style":498},[4061],{"type":402,"value":4062}," i\n",{"type":396,"tag":421,"props":4064,"children":4065},{"class":423,"line":532},[4066,4070],{"type":396,"tag":421,"props":4067,"children":4068},{"style":450},[4069],{"type":402,"value":1427},{"type":396,"tag":421,"props":4071,"children":4072},{"style":492},[4073],{"type":402,"value":613},{"type":396,"tag":421,"props":4075,"children":4076},{"class":423,"line":584},[4077],{"type":396,"tag":421,"props":4078,"children":4079},{"style":450},[4080],{"type":402,"value":1145},{"type":396,"tag":404,"props":4082,"children":4083},{},[4084],{"type":402,"value":4085},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":396,"tag":410,"props":4087,"children":4089},{"className":412,"code":4088,"language":414,"meta":389,"style":389},"const getUUID = () => Math.random().toString(16).substr(2)\n",[4090],{"type":396,"tag":417,"props":4091,"children":4092},{"__ignoreMap":389},[4093],{"type":396,"tag":421,"props":4094,"children":4095},{"class":423,"line":424},[4096,4101,4107,4111,4116,4121,4126,4130,4135,4139,4143,4148,4152,4157,4161,4165,4170,4174,4179],{"type":396,"tag":421,"props":4097,"children":4098},{"style":438},[4099],{"type":402,"value":4100},"const",{"type":396,"tag":421,"props":4102,"children":4104},{"style":4103},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4105],{"type":402,"value":4106}," getUUID",{"type":396,"tag":421,"props":4108,"children":4109},{"style":983},[4110],{"type":402,"value":986},{"type":396,"tag":421,"props":4112,"children":4113},{"style":450},[4114],{"type":402,"value":4115}," ()",{"type":396,"tag":421,"props":4117,"children":4118},{"style":438},[4119],{"type":402,"value":4120}," =>",{"type":396,"tag":421,"props":4122,"children":4123},{"style":498},[4124],{"type":402,"value":4125}," Math",{"type":396,"tag":421,"props":4127,"children":4128},{"style":450},[4129],{"type":402,"value":506},{"type":396,"tag":421,"props":4131,"children":4132},{"style":444},[4133],{"type":402,"value":4134},"random",{"type":396,"tag":421,"props":4136,"children":4137},{"style":498},[4138],{"type":402,"value":1904},{"type":396,"tag":421,"props":4140,"children":4141},{"style":450},[4142],{"type":402,"value":506},{"type":396,"tag":421,"props":4144,"children":4145},{"style":444},[4146],{"type":402,"value":4147},"toString",{"type":396,"tag":421,"props":4149,"children":4150},{"style":498},[4151],{"type":402,"value":453},{"type":396,"tag":421,"props":4153,"children":4154},{"style":2012},[4155],{"type":402,"value":4156},"16",{"type":396,"tag":421,"props":4158,"children":4159},{"style":498},[4160],{"type":402,"value":474},{"type":396,"tag":421,"props":4162,"children":4163},{"style":450},[4164],{"type":402,"value":506},{"type":396,"tag":421,"props":4166,"children":4167},{"style":444},[4168],{"type":402,"value":4169},"substr",{"type":396,"tag":421,"props":4171,"children":4172},{"style":498},[4173],{"type":402,"value":453},{"type":396,"tag":421,"props":4175,"children":4176},{"style":2012},[4177],{"type":402,"value":4178},"2",{"type":396,"tag":421,"props":4180,"children":4181},{"style":498},[4182],{"type":402,"value":613},{"type":396,"tag":397,"props":4184,"children":4186},{"id":4185},"考虑的点",[4187],{"type":402,"value":4185},{"type":396,"tag":404,"props":4189,"children":4190},{},[4191],{"type":402,"value":4192},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":396,"tag":4194,"props":4195,"children":4196},"ul",{},[4197,4203,4208,4213],{"type":396,"tag":4198,"props":4199,"children":4200},"li",{},[4201],{"type":402,"value":4202},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":396,"tag":4198,"props":4204,"children":4205},{},[4206],{"type":402,"value":4207},"支持本地符号路径吗？支持网络路径吗？",{"type":396,"tag":4198,"props":4209,"children":4210},{},[4211],{"type":402,"value":4212},"如何控制包的大小？",{"type":396,"tag":4198,"props":4214,"children":4215},{},[4216],{"type":402,"value":4217},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":396,"tag":404,"props":4219,"children":4220},{},[4221],{"type":402,"value":4222},"也注意到一些有意思的问题：",{"type":396,"tag":4194,"props":4224,"children":4225},{},[4226,4238,4250],{"type":396,"tag":4198,"props":4227,"children":4228},{},[4229,4231],{"type":402,"value":4230},"Windows，删除正在监听的文件夹，",{"type":396,"tag":1152,"props":4232,"children":4235},{"href":4233,"rel":4234},"https://github.com/nodejs/node/issues/31702",[1156],[4236],{"type":402,"value":4237},"会发生什么事情？",{"type":396,"tag":4198,"props":4239,"children":4240},{},[4241,4243],{"type":402,"value":4242},"Linux，单个进程能操作的文件数量有上限，",{"type":396,"tag":1152,"props":4244,"children":4247},{"href":4245,"rel":4246},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[1156],[4248],{"type":402,"value":4249},"该怎么解决？",{"type":396,"tag":4198,"props":4251,"children":4252},{},[4253,4255],{"type":402,"value":4254},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":396,"tag":1152,"props":4256,"children":4259},{"href":4257,"rel":4258},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[1156],[4260],{"type":402,"value":4261},"怎么处理呢？",{"type":396,"tag":397,"props":4263,"children":4265},{"id":4264},"题外话",[4266],{"type":402,"value":4264},{"type":396,"tag":4268,"props":4269,"children":4272},"l-link",{"label":4270,"source":4271},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":396,"tag":404,"props":4274,"children":4275},{},[4276],{"type":402,"value":4277},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":396,"tag":397,"props":4279,"children":4281},{"id":4280},"其它资料",[4282],{"type":402,"value":4280},{"type":396,"tag":404,"props":4284,"children":4285},{},[4286],{"type":402,"value":4287},"相关类库：",{"type":396,"tag":4194,"props":4289,"children":4290},{},[4291,4300,4310],{"type":396,"tag":4198,"props":4292,"children":4293},{},[4294],{"type":396,"tag":1152,"props":4295,"children":4298},{"href":4296,"rel":4297},"https://www.npmjs.com/package/watcher",[1156],[4299],{"type":402,"value":2034},{"type":396,"tag":4198,"props":4301,"children":4302},{},[4303],{"type":396,"tag":1152,"props":4304,"children":4307},{"href":4305,"rel":4306},"https://github.com/paulmillr/chokidar",[1156],[4308],{"type":402,"value":4309},"chokidar",{"type":396,"tag":4198,"props":4311,"children":4312},{},[4313],{"type":396,"tag":1152,"props":4314,"children":4317},{"href":4315,"rel":4316},"https://github.com/Axosoft/nsfw",[1156],[4318],{"type":402,"value":4319},"nsfw",{"type":396,"tag":404,"props":4321,"children":4322},{},[4323],{"type":402,"value":4324},"推荐阅读：",{"type":396,"tag":4194,"props":4326,"children":4327},{},[4328,4338],{"type":396,"tag":4198,"props":4329,"children":4330},{},[4331],{"type":396,"tag":1152,"props":4332,"children":4335},{"href":4333,"rel":4334},"https://juejin.cn/post/7000262974430511117",[1156],[4336],{"type":402,"value":4337},"《node-watch、Chokidar封装思路解析》",{"type":396,"tag":4198,"props":4339,"children":4340},{},[4341],{"type":396,"tag":1152,"props":4342,"children":4345},{"href":4343,"rel":4344},"https://www.jianshu.com/p/09dae09457fa",[1156],[4346],{"type":402,"value":4347},"《如何利用 Nodejs 监听文件夹》",{"type":396,"tag":4349,"props":4350,"children":4351},"style",{},[4352],{"type":402,"value":4353},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":389,"searchDepth":434,"depth":434,"links":4355},[4356,4357,4358,4359,4360],{"id":399,"depth":434,"text":399},{"id":3916,"depth":434,"text":3916},{"id":4185,"depth":434,"text":4185},{"id":4264,"depth":434,"text":4264},{"id":4280,"depth":434,"text":4280},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","8.source-code/_node/node-watch","md",[4368,4372],{"_path":4369,"title":4370,"description":4371},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4373,"title":4374,"description":4375},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",1742040634988]