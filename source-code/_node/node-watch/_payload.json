[{"data":1,"prerenderedAt":4407},["ShallowReactive",2],{"navigation":3,"/source-code/_node/node-watch":416,"/source-code/_node/node-watch-surround":4399},[4,32,86,108,135,141,147,153,399,405,411],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":42,"_path":43},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":45,"_path":46},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":48,"_path":49},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":51,"_path":52},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":54,"_path":55},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":57,"_path":58},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":60,"_path":61},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":63,"_path":64},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":66,"_path":67},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":69,"_path":70},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":72,"_path":73},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":75,"_path":76},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":78,"_path":79},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":81,"_path":82},"🚝 四十二篇系列","/articles/fourty-two",{"title":84,"_path":85},"📝 技术博客归档","/articles/fold",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102,105],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107},"🖨️ any-to-base64","/tools/any-to-base64",{"title":109,"_path":110,"children":111},"吉他剧场 / Music","/music",[112,114,117,120,123,126,129,132],{"title":113,"_path":110},"🎸 FingerStyle！",{"title":115,"_path":116},"🌬️ 等待的风","/music/wind",{"title":118,"_path":119},"💕 约定的海洋","/music/ocean",{"title":121,"_path":122},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":124,"_path":125},"🌏 残酷天使的行动纲领","/music/eva",{"title":127,"_path":128},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":130,"_path":131},"🍷 Wu Wei","/music/wu-wei",{"title":133,"_path":134},"🌅 无题","/music/untitled",{"title":136,"_path":137,"children":138},"画点什么 / Paint","/paint",[139],{"title":140,"_path":137},"🚧 正在施工",{"title":142,"_path":143,"children":144},"读书笔记 / Notes","/books",[145],{"title":146,"_path":143},"📕 读书笔记",{"title":148,"_path":149,"children":150},"知识地图 / Maps","/maps",[151],{"title":152,"_path":149},"🏁 知识地图",{"title":154,"_path":155,"children":156},"零散的笔记 / Gists","/gists",[157,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384,387,390,393,396],{"title":158,"_path":155},"🧊 Gists",{"title":160,"_path":161},"网站的可访问性","/gists/accessibility",{"title":163,"_path":164},"Bit","/gists/bit",{"title":166,"_path":167},"图片模糊","/gists/blur",{"title":169,"_path":170},"渲染相关笔记","/gists/c4d",{"title":172,"_path":173},"CDN 问题记录","/gists/cdn",{"title":175,"_path":176},"消毒剂","/gists/cleaner",{"title":178,"_path":179},"Windows Command","/gists/cmd",{"title":181,"_path":182},"Command","/gists/command",{"title":184,"_path":185},"复杂科学","/gists/complexity-science",{"title":187,"_path":188},"GitHub Copilot","/gists/copilot",{"title":190,"_path":191},"宇宙","/gists/cosmos",{"title":193,"_path":194},"C++","/gists/cpp",{"title":196,"_path":197},"Data Structure","/gists/data-structure",{"title":199,"_path":200},"DEPRESSION","/gists/depression",{"title":202,"_path":203},"设计模式","/gists/design-patterns",{"title":205,"_path":206},"Developer Experience","/gists/developer-experience",{"title":208,"_path":209},"Device Metrics","/gists/device-metrix",{"title":211,"_path":212},"数字化转型","/gists/digital-transformation",{"title":214,"_path":215},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":217,"_path":218},"正则表达式","/gists/eegex",{"title":220,"_path":221},"Emoji","/gists/emoji",{"title":223,"_path":224},"工程","/gists/engineering",{"title":226,"_path":227},"熵","/gists/entropy",{"title":229,"_path":230},"Environment","/gists/environment",{"title":232,"_path":233},"Erlang","/gists/erlang",{"title":235,"_path":236},"逃离塔克夫","/gists/escape-from-tarkov",{"title":238,"_path":239},"ESNext (ES6-ES11)","/gists/esnext",{"title":241,"_path":242},"Eval！","/gists/eval",{"title":244,"_path":245},"Flutter","/gists/flutter",{"title":247,"_path":248},"字体","/gists/font",{"title":250,"_path":251},"JS 函数式编程","/gists/functional",{"title":253,"_path":254},"游戏化","/gists/gamification",{"title":256,"_path":257},"Google C++ Standard","/gists/google-cpp-standard",{"title":259,"_path":260},"双向链接完全体","/gists/graph",{"title":262,"_path":263},"Hardwares","/gists/hardwares",{"title":265,"_path":266},"哈希冲突","/gists/hash-collision",{"title":268,"_path":269},"信息设计","/gists/information-design",{"title":271,"_path":272},"InstantPage","/gists/instant.page",{"title":274,"_path":275},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":277,"_path":278},"KVStore","/gists/key-value-db",{"title":280,"_path":281},"Kubernetes","/gists/kubernetes",{"title":283,"_path":284},"Makefile","/gists/makefile",{"title":286,"_path":287},"Markdown Inline Style","/gists/markdown-nice",{"title":289,"_path":290},"小程序","/gists/miniapp",{"title":292,"_path":293},"减小页面快照体积","/gists/minify-html",{"title":295,"_path":296},"mklink","/gists/mklink",{"title":298,"_path":299},"Mock","/gists/mock",{"title":301,"_path":302},"多人协作系统","/gists/multiplayer",{"title":304,"_path":305},"多端应用","/gists/multy-end-app",{"title":307,"_path":308},"神经科学","/gists/neuroscience",{"title":310,"_path":311},"OO","/gists/oo",{"title":313,"_path":314},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":316,"_path":317},"PInvoke","/gists/pinvoke",{"title":319,"_path":320},"像素","/gists/pixel",{"title":322,"_path":323},"PowerShell","/gists/powershell",{"title":325,"_path":326},"量子","/gists/quantum",{"title":328,"_path":329},"保持好奇心","/gists/questions",{"title":331,"_path":332},"React Native","/gists/react-native",{"title":334,"_path":335},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":337,"_path":338},"SEO","/gists/seo",{"title":340,"_path":341},"Shader","/gists/shader",{"title":343,"_path":344},"Shape Up","/gists/shape-up",{"title":346,"_path":347},"睡觉","/gists/sleep",{"title":349,"_path":350},"记录奇怪的问题","/gists/solved",{"title":352,"_path":353},"States","/gists/states",{"title":355,"_path":356},"Storage","/gists/storage",{"title":358,"_path":359},"音视频流处理","/gists/stream-cli",{"title":361,"_path":362},"Symbol","/gists/symbol",{"title":364,"_path":365},"系统论","/gists/systems-theory",{"title":367,"_path":368},"Taro","/gists/taro",{"title":370,"_path":371},"任务切片","/gists/task-slice",{"title":373,"_path":374},"技术偏好","/gists/tech-dudge",{"title":376,"_path":377},"Untitled","/gists/untitled",{"title":379,"_path":380},"可变字体","/gists/variable-font",{"title":382,"_path":383},"视觉错觉","/gists/visual-illusion",{"title":385,"_path":386},"SS(SSR)","/gists/vpn",{"title":388,"_path":389},"VS Code 插件开发","/gists/vscode-plugin",{"title":391,"_path":392},"Web Components","/gists/web-components",{"title":394,"_path":395},"Windows","/gists/windows",{"title":397,"_path":398},"查缺补漏","/gists/wrong",{"title":400,"_path":401,"children":402},"代码笔记 / Gists","/source-code",[403],{"title":404,"_path":401},"🚄 代码笔记",{"title":406,"_path":407,"children":408},"我 / Abount","/hire",[409],{"title":410,"_path":407},"📬 技术简历",{"title":412,"_path":413,"children":414},"todo","/todo",[415],{"title":412,"_path":413},{"_path":417,"_dir":418,"_draft":419,"_partial":420,"_locale":421,"title":422,"description":423,"body":424,"_type":4393,"_id":4394,"_source":4395,"_file":4396,"_stem":4397,"_extension":4398},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":425,"children":426,"toc":4386},"root",[427,435,441,1178,1194,1471,1476,1653,1658,2328,2333,2790,2795,3946,3951,3956,4113,4118,4215,4220,4225,4250,4255,4294,4299,4305,4310,4315,4320,4352,4357,4380],{"type":428,"tag":429,"props":430,"children":432},"element","h2",{"id":431},"实现",[433],{"type":434,"value":431},"text",{"type":428,"tag":436,"props":437,"children":438},"p",{},[439],{"type":434,"value":440},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":428,"tag":442,"props":443,"children":447},"pre",{"className":444,"code":445,"language":446,"meta":421,"style":421},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[448],{"type":428,"tag":449,"props":450,"children":451},"code",{"__ignoreMap":421},[452,464,512,562,614,646,659,668,677,718,776,801,839,848,860,918,950,999,1053,1097,1126,1135,1148,1161,1169],{"type":428,"tag":453,"props":454,"children":457},"span",{"class":455,"line":456},"line",1,[458],{"type":428,"tag":453,"props":459,"children":461},{"style":460},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[462],{"type":434,"value":463},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":428,"tag":453,"props":465,"children":467},{"class":455,"line":466},2,[468,474,480,486,492,497,502,507],{"type":428,"tag":453,"props":469,"children":471},{"style":470},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[472],{"type":434,"value":473},"function",{"type":428,"tag":453,"props":475,"children":477},{"style":476},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[478],{"type":434,"value":479}," watch",{"type":428,"tag":453,"props":481,"children":483},{"style":482},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[484],{"type":434,"value":485},"(",{"type":428,"tag":453,"props":487,"children":489},{"style":488},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[490],{"type":434,"value":491},"dir",{"type":428,"tag":453,"props":493,"children":494},{"style":482},[495],{"type":434,"value":496},",",{"type":428,"tag":453,"props":498,"children":499},{"style":488},[500],{"type":434,"value":501}," cb",{"type":428,"tag":453,"props":503,"children":504},{"style":482},[505],{"type":434,"value":506},")",{"type":428,"tag":453,"props":508,"children":509},{"style":482},[510],{"type":434,"value":511}," {\n",{"type":428,"tag":453,"props":513,"children":515},{"class":455,"line":514},3,[516,522,528,534,539,544,548,552,557],{"type":428,"tag":453,"props":517,"children":519},{"style":518},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[520],{"type":434,"value":521},"  if",{"type":428,"tag":453,"props":523,"children":525},{"style":524},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[526],{"type":434,"value":527}," (",{"type":428,"tag":453,"props":529,"children":531},{"style":530},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[532],{"type":434,"value":533},"is",{"type":428,"tag":453,"props":535,"children":536},{"style":482},[537],{"type":434,"value":538},".",{"type":428,"tag":453,"props":540,"children":541},{"style":476},[542],{"type":434,"value":543},"File",{"type":428,"tag":453,"props":545,"children":546},{"style":524},[547],{"type":434,"value":485},{"type":428,"tag":453,"props":549,"children":550},{"style":530},[551],{"type":434,"value":491},{"type":428,"tag":453,"props":553,"children":554},{"style":524},[555],{"type":434,"value":556},")) ",{"type":428,"tag":453,"props":558,"children":559},{"style":482},[560],{"type":434,"value":561},"{\n",{"type":428,"tag":453,"props":563,"children":565},{"class":455,"line":564},4,[566,571,575,580,584,588,592,597,601,606,610],{"type":428,"tag":453,"props":567,"children":568},{"style":530},[569],{"type":434,"value":570},"    fs",{"type":428,"tag":453,"props":572,"children":573},{"style":482},[574],{"type":434,"value":538},{"type":428,"tag":453,"props":576,"children":577},{"style":476},[578],{"type":434,"value":579},"watchFile",{"type":428,"tag":453,"props":581,"children":582},{"style":524},[583],{"type":434,"value":485},{"type":428,"tag":453,"props":585,"children":586},{"style":530},[587],{"type":434,"value":491},{"type":428,"tag":453,"props":589,"children":590},{"style":482},[591],{"type":434,"value":496},{"type":428,"tag":453,"props":593,"children":594},{"style":470},[595],{"type":434,"value":596}," function",{"type":428,"tag":453,"props":598,"children":599},{"style":482},[600],{"type":434,"value":485},{"type":428,"tag":453,"props":602,"children":603},{"style":488},[604],{"type":434,"value":605},"err",{"type":428,"tag":453,"props":607,"children":608},{"style":482},[609],{"type":434,"value":506},{"type":428,"tag":453,"props":611,"children":612},{"style":482},[613],{"type":434,"value":511},{"type":428,"tag":453,"props":615,"children":617},{"class":455,"line":616},5,[618,623,627,632,636,641],{"type":428,"tag":453,"props":619,"children":620},{"style":476},[621],{"type":434,"value":622},"      normalizeCall",{"type":428,"tag":453,"props":624,"children":625},{"style":524},[626],{"type":434,"value":485},{"type":428,"tag":453,"props":628,"children":629},{"style":530},[630],{"type":434,"value":631},"cb",{"type":428,"tag":453,"props":633,"children":634},{"style":482},[635],{"type":434,"value":496},{"type":428,"tag":453,"props":637,"children":638},{"style":530},[639],{"type":434,"value":640}," dir",{"type":428,"tag":453,"props":642,"children":643},{"style":524},[644],{"type":434,"value":645},")\n",{"type":428,"tag":453,"props":647,"children":649},{"class":455,"line":648},6,[650,655],{"type":428,"tag":453,"props":651,"children":652},{"style":482},[653],{"type":434,"value":654},"    }",{"type":428,"tag":453,"props":656,"children":657},{"style":524},[658],{"type":434,"value":645},{"type":428,"tag":453,"props":660,"children":662},{"class":455,"line":661},7,[663],{"type":428,"tag":453,"props":664,"children":665},{"style":518},[666],{"type":434,"value":667},"    return\n",{"type":428,"tag":453,"props":669,"children":671},{"class":455,"line":670},8,[672],{"type":428,"tag":453,"props":673,"children":674},{"style":482},[675],{"type":434,"value":676},"  }\n",{"type":428,"tag":453,"props":678,"children":680},{"class":455,"line":679},9,[681,685,689,693,697,702,706,710,714],{"type":428,"tag":453,"props":682,"children":683},{"style":518},[684],{"type":434,"value":521},{"type":428,"tag":453,"props":686,"children":687},{"style":524},[688],{"type":434,"value":527},{"type":428,"tag":453,"props":690,"children":691},{"style":530},[692],{"type":434,"value":533},{"type":428,"tag":453,"props":694,"children":695},{"style":482},[696],{"type":434,"value":538},{"type":428,"tag":453,"props":698,"children":699},{"style":476},[700],{"type":434,"value":701},"Directory",{"type":428,"tag":453,"props":703,"children":704},{"style":524},[705],{"type":434,"value":485},{"type":428,"tag":453,"props":707,"children":708},{"style":530},[709],{"type":434,"value":491},{"type":428,"tag":453,"props":711,"children":712},{"style":524},[713],{"type":434,"value":556},{"type":428,"tag":453,"props":715,"children":716},{"style":482},[717],{"type":434,"value":561},{"type":428,"tag":453,"props":719,"children":721},{"class":455,"line":720},10,[722,726,730,735,739,743,747,751,755,759,763,768,772],{"type":428,"tag":453,"props":723,"children":724},{"style":530},[725],{"type":434,"value":570},{"type":428,"tag":453,"props":727,"children":728},{"style":482},[729],{"type":434,"value":538},{"type":428,"tag":453,"props":731,"children":732},{"style":476},[733],{"type":434,"value":734},"watch",{"type":428,"tag":453,"props":736,"children":737},{"style":524},[738],{"type":434,"value":485},{"type":428,"tag":453,"props":740,"children":741},{"style":530},[742],{"type":434,"value":491},{"type":428,"tag":453,"props":744,"children":745},{"style":482},[746],{"type":434,"value":496},{"type":428,"tag":453,"props":748,"children":749},{"style":470},[750],{"type":434,"value":596},{"type":428,"tag":453,"props":752,"children":753},{"style":482},[754],{"type":434,"value":485},{"type":428,"tag":453,"props":756,"children":757},{"style":488},[758],{"type":434,"value":605},{"type":428,"tag":453,"props":760,"children":761},{"style":482},[762],{"type":434,"value":496},{"type":428,"tag":453,"props":764,"children":765},{"style":488},[766],{"type":434,"value":767}," fname",{"type":428,"tag":453,"props":769,"children":770},{"style":482},[771],{"type":434,"value":506},{"type":428,"tag":453,"props":773,"children":774},{"style":482},[775],{"type":434,"value":511},{"type":428,"tag":453,"props":777,"children":779},{"class":455,"line":778},11,[780,784,788,792,796],{"type":428,"tag":453,"props":781,"children":782},{"style":476},[783],{"type":434,"value":622},{"type":428,"tag":453,"props":785,"children":786},{"style":524},[787],{"type":434,"value":485},{"type":428,"tag":453,"props":789,"children":790},{"style":530},[791],{"type":434,"value":631},{"type":428,"tag":453,"props":793,"children":794},{"style":482},[795],{"type":434,"value":496},{"type":428,"tag":453,"props":797,"children":798},{"style":524},[799],{"type":434,"value":800},"  \n",{"type":428,"tag":453,"props":802,"children":804},{"class":455,"line":803},12,[805,810,814,819,823,827,831,835],{"type":428,"tag":453,"props":806,"children":807},{"style":530},[808],{"type":434,"value":809},"        path",{"type":428,"tag":453,"props":811,"children":812},{"style":482},[813],{"type":434,"value":538},{"type":428,"tag":453,"props":815,"children":816},{"style":476},[817],{"type":434,"value":818},"join",{"type":428,"tag":453,"props":820,"children":821},{"style":524},[822],{"type":434,"value":485},{"type":428,"tag":453,"props":824,"children":825},{"style":530},[826],{"type":434,"value":491},{"type":428,"tag":453,"props":828,"children":829},{"style":482},[830],{"type":434,"value":496},{"type":428,"tag":453,"props":832,"children":833},{"style":530},[834],{"type":434,"value":767},{"type":428,"tag":453,"props":836,"children":837},{"style":524},[838],{"type":434,"value":645},{"type":428,"tag":453,"props":840,"children":842},{"class":455,"line":841},13,[843],{"type":428,"tag":453,"props":844,"children":845},{"style":524},[846],{"type":434,"value":847},"      )\n",{"type":428,"tag":453,"props":849,"children":851},{"class":455,"line":850},14,[852,856],{"type":428,"tag":453,"props":853,"children":854},{"style":482},[855],{"type":434,"value":654},{"type":428,"tag":453,"props":857,"children":858},{"style":524},[859],{"type":434,"value":645},{"type":428,"tag":453,"props":861,"children":863},{"class":455,"line":862},15,[864,868,872,877,881,885,889,893,897,901,905,910,914],{"type":428,"tag":453,"props":865,"children":866},{"style":530},[867],{"type":434,"value":570},{"type":428,"tag":453,"props":869,"children":870},{"style":482},[871],{"type":434,"value":538},{"type":428,"tag":453,"props":873,"children":874},{"style":476},[875],{"type":434,"value":876},"readdir",{"type":428,"tag":453,"props":878,"children":879},{"style":524},[880],{"type":434,"value":485},{"type":428,"tag":453,"props":882,"children":883},{"style":530},[884],{"type":434,"value":491},{"type":428,"tag":453,"props":886,"children":887},{"style":482},[888],{"type":434,"value":496},{"type":428,"tag":453,"props":890,"children":891},{"style":470},[892],{"type":434,"value":596},{"type":428,"tag":453,"props":894,"children":895},{"style":482},[896],{"type":434,"value":485},{"type":428,"tag":453,"props":898,"children":899},{"style":488},[900],{"type":434,"value":605},{"type":428,"tag":453,"props":902,"children":903},{"style":482},[904],{"type":434,"value":496},{"type":428,"tag":453,"props":906,"children":907},{"style":488},[908],{"type":434,"value":909}," files",{"type":428,"tag":453,"props":911,"children":912},{"style":482},[913],{"type":434,"value":506},{"type":428,"tag":453,"props":915,"children":916},{"style":482},[917],{"type":434,"value":511},{"type":428,"tag":453,"props":919,"children":921},{"class":455,"line":920},16,[922,927,931,935,940,945],{"type":428,"tag":453,"props":923,"children":924},{"style":518},[925],{"type":434,"value":926},"      if",{"type":428,"tag":453,"props":928,"children":929},{"style":524},[930],{"type":434,"value":527},{"type":428,"tag":453,"props":932,"children":933},{"style":530},[934],{"type":434,"value":605},{"type":428,"tag":453,"props":936,"children":937},{"style":524},[938],{"type":434,"value":939},") ",{"type":428,"tag":453,"props":941,"children":942},{"style":518},[943],{"type":434,"value":944},"throw",{"type":428,"tag":453,"props":946,"children":947},{"style":530},[948],{"type":434,"value":949}," err\n",{"type":428,"tag":453,"props":951,"children":953},{"class":455,"line":952},17,[954,959,963,968,972,976,980,985,989,994],{"type":428,"tag":453,"props":955,"children":956},{"style":530},[957],{"type":434,"value":958},"      files",{"type":428,"tag":453,"props":960,"children":961},{"style":482},[962],{"type":434,"value":538},{"type":428,"tag":453,"props":964,"children":965},{"style":476},[966],{"type":434,"value":967},"forEach",{"type":428,"tag":453,"props":969,"children":970},{"style":524},[971],{"type":434,"value":485},{"type":428,"tag":453,"props":973,"children":974},{"style":470},[975],{"type":434,"value":473},{"type":428,"tag":453,"props":977,"children":978},{"style":482},[979],{"type":434,"value":485},{"type":428,"tag":453,"props":981,"children":982},{"style":488},[983],{"type":434,"value":984},"n",{"type":428,"tag":453,"props":986,"children":987},{"style":482},[988],{"type":434,"value":506},{"type":428,"tag":453,"props":990,"children":991},{"style":482},[992],{"type":434,"value":993}," {",{"type":428,"tag":453,"props":995,"children":996},{"style":524},[997],{"type":434,"value":998}," \n",{"type":428,"tag":453,"props":1000,"children":1002},{"class":455,"line":1001},18,[1003,1008,1013,1019,1024,1028,1032,1036,1040,1044,1049],{"type":428,"tag":453,"props":1004,"children":1005},{"style":470},[1006],{"type":434,"value":1007},"        var",{"type":428,"tag":453,"props":1009,"children":1010},{"style":530},[1011],{"type":434,"value":1012}," file",{"type":428,"tag":453,"props":1014,"children":1016},{"style":1015},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1017],{"type":434,"value":1018}," =",{"type":428,"tag":453,"props":1020,"children":1021},{"style":530},[1022],{"type":434,"value":1023}," path",{"type":428,"tag":453,"props":1025,"children":1026},{"style":482},[1027],{"type":434,"value":538},{"type":428,"tag":453,"props":1029,"children":1030},{"style":476},[1031],{"type":434,"value":818},{"type":428,"tag":453,"props":1033,"children":1034},{"style":524},[1035],{"type":434,"value":485},{"type":428,"tag":453,"props":1037,"children":1038},{"style":530},[1039],{"type":434,"value":491},{"type":428,"tag":453,"props":1041,"children":1042},{"style":482},[1043],{"type":434,"value":496},{"type":428,"tag":453,"props":1045,"children":1046},{"style":530},[1047],{"type":434,"value":1048}," n",{"type":428,"tag":453,"props":1050,"children":1051},{"style":524},[1052],{"type":434,"value":645},{"type":428,"tag":453,"props":1054,"children":1056},{"class":455,"line":1055},19,[1057,1062,1067,1071,1075,1079,1083,1088,1093],{"type":428,"tag":453,"props":1058,"children":1059},{"style":518},[1060],{"type":434,"value":1061},"        if",{"type":428,"tag":453,"props":1063,"children":1064},{"style":524},[1065],{"type":434,"value":1066}," ( ",{"type":428,"tag":453,"props":1068,"children":1069},{"style":530},[1070],{"type":434,"value":533},{"type":428,"tag":453,"props":1072,"children":1073},{"style":482},[1074],{"type":434,"value":538},{"type":428,"tag":453,"props":1076,"children":1077},{"style":476},[1078],{"type":434,"value":701},{"type":428,"tag":453,"props":1080,"children":1081},{"style":524},[1082],{"type":434,"value":485},{"type":428,"tag":453,"props":1084,"children":1085},{"style":530},[1086],{"type":434,"value":1087},"file",{"type":428,"tag":453,"props":1089,"children":1090},{"style":524},[1091],{"type":434,"value":1092},") ) ",{"type":428,"tag":453,"props":1094,"children":1095},{"style":482},[1096],{"type":434,"value":561},{"type":428,"tag":453,"props":1098,"children":1100},{"class":455,"line":1099},20,[1101,1106,1110,1114,1118,1122],{"type":428,"tag":453,"props":1102,"children":1103},{"style":476},[1104],{"type":434,"value":1105},"          watch",{"type":428,"tag":453,"props":1107,"children":1108},{"style":524},[1109],{"type":434,"value":485},{"type":428,"tag":453,"props":1111,"children":1112},{"style":530},[1113],{"type":434,"value":1087},{"type":428,"tag":453,"props":1115,"children":1116},{"style":482},[1117],{"type":434,"value":496},{"type":428,"tag":453,"props":1119,"children":1120},{"style":530},[1121],{"type":434,"value":501},{"type":428,"tag":453,"props":1123,"children":1124},{"style":524},[1125],{"type":434,"value":645},{"type":428,"tag":453,"props":1127,"children":1129},{"class":455,"line":1128},21,[1130],{"type":428,"tag":453,"props":1131,"children":1132},{"style":482},[1133],{"type":434,"value":1134},"        }\n",{"type":428,"tag":453,"props":1136,"children":1138},{"class":455,"line":1137},22,[1139,1144],{"type":428,"tag":453,"props":1140,"children":1141},{"style":482},[1142],{"type":434,"value":1143},"      }",{"type":428,"tag":453,"props":1145,"children":1146},{"style":524},[1147],{"type":434,"value":645},{"type":428,"tag":453,"props":1149,"children":1151},{"class":455,"line":1150},23,[1152,1156],{"type":428,"tag":453,"props":1153,"children":1154},{"style":482},[1155],{"type":434,"value":654},{"type":428,"tag":453,"props":1157,"children":1158},{"style":524},[1159],{"type":434,"value":1160},")     \n",{"type":428,"tag":453,"props":1162,"children":1164},{"class":455,"line":1163},24,[1165],{"type":428,"tag":453,"props":1166,"children":1167},{"style":482},[1168],{"type":434,"value":676},{"type":428,"tag":453,"props":1170,"children":1172},{"class":455,"line":1171},25,[1173],{"type":428,"tag":453,"props":1174,"children":1175},{"style":482},[1176],{"type":434,"value":1177},"}\n",{"type":428,"tag":436,"props":1179,"children":1180},{},[1181,1183,1192],{"type":434,"value":1182},"由于 fs.watchFile 可能导致",{"type":428,"tag":1184,"props":1185,"children":1189},"a",{"href":1186,"rel":1187},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[1188],"nofollow",[1190],{"type":434,"value":1191},"高 CPU 负载等问题",{"type":434,"value":1193},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":428,"tag":442,"props":1195,"children":1197},{"className":444,"code":1196,"language":446,"meta":421,"style":421},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[1198],{"type":428,"tag":449,"props":1199,"children":1200},{"__ignoreMap":421},[1201,1231,1295,1353,1408,1444,1452,1464],{"type":428,"tag":453,"props":1202,"children":1203},{"class":455,"line":456},[1204,1209,1214,1218,1222,1227],{"type":428,"tag":453,"props":1205,"children":1206},{"style":518},[1207],{"type":434,"value":1208},"if",{"type":428,"tag":453,"props":1210,"children":1211},{"style":530},[1212],{"type":434,"value":1213}," (is",{"type":428,"tag":453,"props":1215,"children":1216},{"style":482},[1217],{"type":434,"value":538},{"type":428,"tag":453,"props":1219,"children":1220},{"style":476},[1221],{"type":434,"value":1087},{"type":428,"tag":453,"props":1223,"children":1224},{"style":530},[1225],{"type":434,"value":1226},"(fpath)) ",{"type":428,"tag":453,"props":1228,"children":1229},{"style":482},[1230],{"type":434,"value":561},{"type":428,"tag":453,"props":1232,"children":1233},{"class":455,"line":466},[1234,1239,1244,1248,1252,1256,1261,1265,1270,1274,1280,1286,1291],{"type":428,"tag":453,"props":1235,"children":1236},{"style":470},[1237],{"type":434,"value":1238},"  var",{"type":428,"tag":453,"props":1240,"children":1241},{"style":530},[1242],{"type":434,"value":1243}," parent",{"type":428,"tag":453,"props":1245,"children":1246},{"style":1015},[1247],{"type":434,"value":1018},{"type":428,"tag":453,"props":1249,"children":1250},{"style":530},[1251],{"type":434,"value":1023},{"type":428,"tag":453,"props":1253,"children":1254},{"style":482},[1255],{"type":434,"value":538},{"type":428,"tag":453,"props":1257,"children":1258},{"style":476},[1259],{"type":434,"value":1260},"resolve",{"type":428,"tag":453,"props":1262,"children":1263},{"style":524},[1264],{"type":434,"value":485},{"type":428,"tag":453,"props":1266,"children":1267},{"style":530},[1268],{"type":434,"value":1269},"fpath",{"type":428,"tag":453,"props":1271,"children":1272},{"style":482},[1273],{"type":434,"value":496},{"type":428,"tag":453,"props":1275,"children":1277},{"style":1276},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1278],{"type":434,"value":1279}," '",{"type":428,"tag":453,"props":1281,"children":1283},{"style":1282},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1284],{"type":434,"value":1285},"..",{"type":428,"tag":453,"props":1287,"children":1288},{"style":1276},[1289],{"type":434,"value":1290},"'",{"type":428,"tag":453,"props":1292,"children":1293},{"style":524},[1294],{"type":434,"value":645},{"type":428,"tag":453,"props":1296,"children":1297},{"class":455,"line":514},[1298,1303,1307,1311,1315,1320,1324,1328,1332,1337,1341,1345,1349],{"type":428,"tag":453,"props":1299,"children":1300},{"style":530},[1301],{"type":434,"value":1302},"  fs",{"type":428,"tag":453,"props":1304,"children":1305},{"style":482},[1306],{"type":434,"value":538},{"type":428,"tag":453,"props":1308,"children":1309},{"style":476},[1310],{"type":434,"value":734},{"type":428,"tag":453,"props":1312,"children":1313},{"style":524},[1314],{"type":434,"value":485},{"type":428,"tag":453,"props":1316,"children":1317},{"style":530},[1318],{"type":434,"value":1319},"parent",{"type":428,"tag":453,"props":1321,"children":1322},{"style":482},[1323],{"type":434,"value":496},{"type":428,"tag":453,"props":1325,"children":1326},{"style":470},[1327],{"type":434,"value":596},{"type":428,"tag":453,"props":1329,"children":1330},{"style":482},[1331],{"type":434,"value":485},{"type":428,"tag":453,"props":1333,"children":1334},{"style":488},[1335],{"type":434,"value":1336},"evt",{"type":428,"tag":453,"props":1338,"children":1339},{"style":482},[1340],{"type":434,"value":496},{"type":428,"tag":453,"props":1342,"children":1343},{"style":488},[1344],{"type":434,"value":767},{"type":428,"tag":453,"props":1346,"children":1347},{"style":482},[1348],{"type":434,"value":506},{"type":428,"tag":453,"props":1350,"children":1351},{"style":482},[1352],{"type":434,"value":511},{"type":428,"tag":453,"props":1354,"children":1355},{"class":455,"line":564},[1356,1361,1365,1370,1374,1379,1383,1387,1391,1396,1400,1404],{"type":428,"tag":453,"props":1357,"children":1358},{"style":518},[1359],{"type":434,"value":1360},"    if",{"type":428,"tag":453,"props":1362,"children":1363},{"style":524},[1364],{"type":434,"value":527},{"type":428,"tag":453,"props":1366,"children":1367},{"style":530},[1368],{"type":434,"value":1369},"path",{"type":428,"tag":453,"props":1371,"children":1372},{"style":482},[1373],{"type":434,"value":538},{"type":428,"tag":453,"props":1375,"children":1376},{"style":476},[1377],{"type":434,"value":1378},"basename",{"type":428,"tag":453,"props":1380,"children":1381},{"style":524},[1382],{"type":434,"value":485},{"type":428,"tag":453,"props":1384,"children":1385},{"style":530},[1386],{"type":434,"value":1269},{"type":428,"tag":453,"props":1388,"children":1389},{"style":524},[1390],{"type":434,"value":939},{"type":428,"tag":453,"props":1392,"children":1393},{"style":1015},[1394],{"type":434,"value":1395},"===",{"type":428,"tag":453,"props":1397,"children":1398},{"style":530},[1399],{"type":434,"value":767},{"type":428,"tag":453,"props":1401,"children":1402},{"style":524},[1403],{"type":434,"value":939},{"type":428,"tag":453,"props":1405,"children":1406},{"style":482},[1407],{"type":434,"value":561},{"type":428,"tag":453,"props":1409,"children":1410},{"class":455,"line":616},[1411,1415,1419,1423,1427,1432,1436,1440],{"type":428,"tag":453,"props":1412,"children":1413},{"style":476},[1414],{"type":434,"value":622},{"type":428,"tag":453,"props":1416,"children":1417},{"style":524},[1418],{"type":434,"value":485},{"type":428,"tag":453,"props":1420,"children":1421},{"style":530},[1422],{"type":434,"value":1269},{"type":428,"tag":453,"props":1424,"children":1425},{"style":482},[1426],{"type":434,"value":496},{"type":428,"tag":453,"props":1428,"children":1429},{"style":530},[1430],{"type":434,"value":1431}," options",{"type":428,"tag":453,"props":1433,"children":1434},{"style":482},[1435],{"type":434,"value":496},{"type":428,"tag":453,"props":1437,"children":1438},{"style":530},[1439],{"type":434,"value":501},{"type":428,"tag":453,"props":1441,"children":1442},{"style":524},[1443],{"type":434,"value":645},{"type":428,"tag":453,"props":1445,"children":1446},{"class":455,"line":648},[1447],{"type":428,"tag":453,"props":1448,"children":1449},{"style":482},[1450],{"type":434,"value":1451},"    }\n",{"type":428,"tag":453,"props":1453,"children":1454},{"class":455,"line":661},[1455,1460],{"type":428,"tag":453,"props":1456,"children":1457},{"style":482},[1458],{"type":434,"value":1459},"  }",{"type":428,"tag":453,"props":1461,"children":1462},{"style":524},[1463],{"type":434,"value":645},{"type":428,"tag":453,"props":1465,"children":1466},{"class":455,"line":670},[1467],{"type":428,"tag":453,"props":1468,"children":1469},{"style":482},[1470],{"type":434,"value":1177},{"type":428,"tag":436,"props":1472,"children":1473},{},[1474],{"type":434,"value":1475},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":428,"tag":442,"props":1477,"children":1479},{"className":444,"code":1478,"language":446,"meta":421,"style":421},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1480],{"type":428,"tag":449,"props":1481,"children":1482},{"__ignoreMap":421},[1483,1526,1563,1598,1632,1639,1646],{"type":428,"tag":453,"props":1484,"children":1485},{"class":455,"line":456},[1486,1490,1494,1498,1502,1506,1510,1514,1518,1522],{"type":428,"tag":453,"props":1487,"children":1488},{"style":470},[1489],{"type":434,"value":473},{"type":428,"tag":453,"props":1491,"children":1492},{"style":476},[1493],{"type":434,"value":479},{"type":428,"tag":453,"props":1495,"children":1496},{"style":482},[1497],{"type":434,"value":485},{"type":428,"tag":453,"props":1499,"children":1500},{"style":488},[1501],{"type":434,"value":1269},{"type":428,"tag":453,"props":1503,"children":1504},{"style":482},[1505],{"type":434,"value":496},{"type":428,"tag":453,"props":1507,"children":1508},{"style":488},[1509],{"type":434,"value":1431},{"type":428,"tag":453,"props":1511,"children":1512},{"style":482},[1513],{"type":434,"value":496},{"type":428,"tag":453,"props":1515,"children":1516},{"style":488},[1517],{"type":434,"value":501},{"type":428,"tag":453,"props":1519,"children":1520},{"style":482},[1521],{"type":434,"value":506},{"type":428,"tag":453,"props":1523,"children":1524},{"style":482},[1525],{"type":434,"value":511},{"type":428,"tag":453,"props":1527,"children":1528},{"class":455,"line":466},[1529,1533,1537,1541,1545,1550,1554,1558],{"type":428,"tag":453,"props":1530,"children":1531},{"style":518},[1532],{"type":434,"value":521},{"type":428,"tag":453,"props":1534,"children":1535},{"style":524},[1536],{"type":434,"value":527},{"type":428,"tag":453,"props":1538,"children":1539},{"style":530},[1540],{"type":434,"value":533},{"type":428,"tag":453,"props":1542,"children":1543},{"style":482},[1544],{"type":434,"value":538},{"type":428,"tag":453,"props":1546,"children":1547},{"style":476},[1548],{"type":434,"value":1549},"symbolic",{"type":428,"tag":453,"props":1551,"children":1552},{"style":524},[1553],{"type":434,"value":485},{"type":428,"tag":453,"props":1555,"children":1556},{"style":530},[1557],{"type":434,"value":1269},{"type":428,"tag":453,"props":1559,"children":1560},{"style":524},[1561],{"type":434,"value":1562},") \n",{"type":428,"tag":453,"props":1564,"children":1565},{"class":455,"line":514},[1566,1571,1576,1580,1585,1589,1594],{"type":428,"tag":453,"props":1567,"children":1568},{"style":1015},[1569],{"type":434,"value":1570},"    &&",{"type":428,"tag":453,"props":1572,"children":1573},{"style":1015},[1574],{"type":434,"value":1575}," !",{"type":428,"tag":453,"props":1577,"children":1578},{"style":524},[1579],{"type":434,"value":485},{"type":428,"tag":453,"props":1581,"children":1582},{"style":530},[1583],{"type":434,"value":1584},"options",{"type":428,"tag":453,"props":1586,"children":1587},{"style":482},[1588],{"type":434,"value":538},{"type":428,"tag":453,"props":1590,"children":1591},{"style":530},[1592],{"type":434,"value":1593},"followSymLinks",{"type":428,"tag":453,"props":1595,"children":1596},{"style":524},[1597],{"type":434,"value":998},{"type":428,"tag":453,"props":1599,"children":1600},{"class":455,"line":564},[1601,1606,1610,1614,1619,1624,1628],{"type":428,"tag":453,"props":1602,"children":1603},{"style":1015},[1604],{"type":434,"value":1605},"      &&",{"type":428,"tag":453,"props":1607,"children":1608},{"style":530},[1609],{"type":434,"value":1431},{"type":428,"tag":453,"props":1611,"children":1612},{"style":482},[1613],{"type":434,"value":538},{"type":428,"tag":453,"props":1615,"children":1616},{"style":530},[1617],{"type":434,"value":1618},"maxSymLevel",{"type":428,"tag":453,"props":1620,"children":1621},{"style":1015},[1622],{"type":434,"value":1623},"--",{"type":428,"tag":453,"props":1625,"children":1626},{"style":524},[1627],{"type":434,"value":556},{"type":428,"tag":453,"props":1629,"children":1630},{"style":482},[1631],{"type":434,"value":561},{"type":428,"tag":453,"props":1633,"children":1634},{"class":455,"line":616},[1635],{"type":428,"tag":453,"props":1636,"children":1637},{"style":518},[1638],{"type":434,"value":667},{"type":428,"tag":453,"props":1640,"children":1641},{"class":455,"line":648},[1642],{"type":428,"tag":453,"props":1643,"children":1644},{"style":482},[1645],{"type":434,"value":676},{"type":428,"tag":453,"props":1647,"children":1648},{"class":455,"line":661},[1649],{"type":428,"tag":453,"props":1650,"children":1651},{"style":482},[1652],{"type":434,"value":1177},{"type":428,"tag":436,"props":1654,"children":1655},{},[1656],{"type":434,"value":1657},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":428,"tag":442,"props":1659,"children":1661},{"className":444,"code":1660,"language":446,"meta":421,"style":421},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1662],{"type":428,"tag":449,"props":1663,"children":1664},{"__ignoreMap":421},[1665,1679,1687,1699,1744,1766,1816,1852,1868,1881,1888,1895,1902,1941,1962,1995,2023,2034,2052,2059,2126,2194,2214,2235,2267,2296,2308,2316],{"type":428,"tag":453,"props":1666,"children":1667},{"class":455,"line":456},[1668,1673],{"type":428,"tag":453,"props":1669,"children":1670},{"style":470},[1671],{"type":434,"value":1672},"var",{"type":428,"tag":453,"props":1674,"children":1676},{"style":1675},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1677],{"type":434,"value":1678}," IS_SUPPORT\n",{"type":428,"tag":453,"props":1680,"children":1681},{"class":455,"line":466},[1682],{"type":428,"tag":453,"props":1683,"children":1684},{"emptyLinePlaceholder":420},[1685],{"type":434,"value":1686},"\n",{"type":428,"tag":453,"props":1688,"children":1689},{"class":455,"line":514},[1690,1695],{"type":428,"tag":453,"props":1691,"children":1692},{"style":518},[1693],{"type":434,"value":1694},"try",{"type":428,"tag":453,"props":1696,"children":1697},{"style":482},[1698],{"type":434,"value":511},{"type":428,"tag":453,"props":1700,"children":1701},{"class":455,"line":564},[1702,1707,1711,1716,1720,1724,1728,1732,1736,1740],{"type":428,"tag":453,"props":1703,"children":1704},{"style":530},[1705],{"type":434,"value":1706},"  watcher",{"type":428,"tag":453,"props":1708,"children":1709},{"style":1015},[1710],{"type":434,"value":1018},{"type":428,"tag":453,"props":1712,"children":1713},{"style":530},[1714],{"type":434,"value":1715}," fs",{"type":428,"tag":453,"props":1717,"children":1718},{"style":482},[1719],{"type":434,"value":538},{"type":428,"tag":453,"props":1721,"children":1722},{"style":476},[1723],{"type":434,"value":734},{"type":428,"tag":453,"props":1725,"children":1726},{"style":524},[1727],{"type":434,"value":485},{"type":428,"tag":453,"props":1729,"children":1730},{"style":530},[1731],{"type":434,"value":1319},{"type":428,"tag":453,"props":1733,"children":1734},{"style":482},[1735],{"type":434,"value":496},{"type":428,"tag":453,"props":1737,"children":1738},{"style":530},[1739],{"type":434,"value":1431},{"type":428,"tag":453,"props":1741,"children":1742},{"style":524},[1743],{"type":434,"value":645},{"type":428,"tag":453,"props":1745,"children":1746},{"class":455,"line":616},[1747,1752,1757,1762],{"type":428,"tag":453,"props":1748,"children":1749},{"style":482},[1750],{"type":434,"value":1751},"}",{"type":428,"tag":453,"props":1753,"children":1754},{"style":518},[1755],{"type":434,"value":1756}," catch",{"type":428,"tag":453,"props":1758,"children":1759},{"style":530},[1760],{"type":434,"value":1761}," (e) ",{"type":428,"tag":453,"props":1763,"children":1764},{"style":482},[1765],{"type":434,"value":561},{"type":428,"tag":453,"props":1767,"children":1768},{"class":455,"line":648},[1769,1773,1777,1782,1786,1790,1795,1799,1804,1808,1812],{"type":428,"tag":453,"props":1770,"children":1771},{"style":518},[1772],{"type":434,"value":521},{"type":428,"tag":453,"props":1774,"children":1775},{"style":524},[1776],{"type":434,"value":527},{"type":428,"tag":453,"props":1778,"children":1779},{"style":530},[1780],{"type":434,"value":1781},"e",{"type":428,"tag":453,"props":1783,"children":1784},{"style":482},[1785],{"type":434,"value":538},{"type":428,"tag":453,"props":1787,"children":1788},{"style":530},[1789],{"type":434,"value":449},{"type":428,"tag":453,"props":1791,"children":1792},{"style":1015},[1793],{"type":434,"value":1794}," ==",{"type":428,"tag":453,"props":1796,"children":1797},{"style":1276},[1798],{"type":434,"value":1279},{"type":428,"tag":453,"props":1800,"children":1801},{"style":1282},[1802],{"type":434,"value":1803},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":428,"tag":453,"props":1805,"children":1806},{"style":1276},[1807],{"type":434,"value":1290},{"type":428,"tag":453,"props":1809,"children":1810},{"style":524},[1811],{"type":434,"value":939},{"type":428,"tag":453,"props":1813,"children":1814},{"style":482},[1815],{"type":434,"value":561},{"type":428,"tag":453,"props":1817,"children":1818},{"class":455,"line":661},[1819,1824,1829,1833,1838,1842,1848],{"type":428,"tag":453,"props":1820,"children":1821},{"style":518},[1822],{"type":434,"value":1823},"    return",{"type":428,"tag":453,"props":1825,"children":1826},{"style":476},[1827],{"type":434,"value":1828}," fn",{"type":428,"tag":453,"props":1830,"children":1831},{"style":524},[1832],{"type":434,"value":485},{"type":428,"tag":453,"props":1834,"children":1835},{"style":1675},[1836],{"type":434,"value":1837},"IS_SUPPORT",{"type":428,"tag":453,"props":1839,"children":1840},{"style":1015},[1841],{"type":434,"value":1018},{"type":428,"tag":453,"props":1843,"children":1845},{"style":1844},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1846],{"type":434,"value":1847}," false",{"type":428,"tag":453,"props":1849,"children":1850},{"style":524},[1851],{"type":434,"value":645},{"type":428,"tag":453,"props":1853,"children":1854},{"class":455,"line":670},[1855,1859,1864],{"type":428,"tag":453,"props":1856,"children":1857},{"style":482},[1858],{"type":434,"value":1459},{"type":428,"tag":453,"props":1860,"children":1861},{"style":518},[1862],{"type":434,"value":1863}," else",{"type":428,"tag":453,"props":1865,"children":1866},{"style":482},[1867],{"type":434,"value":511},{"type":428,"tag":453,"props":1869,"children":1870},{"class":455,"line":679},[1871,1876],{"type":428,"tag":453,"props":1872,"children":1873},{"style":518},[1874],{"type":434,"value":1875},"    throw",{"type":428,"tag":453,"props":1877,"children":1878},{"style":530},[1879],{"type":434,"value":1880}," e\n",{"type":428,"tag":453,"props":1882,"children":1883},{"class":455,"line":720},[1884],{"type":428,"tag":453,"props":1885,"children":1886},{"style":482},[1887],{"type":434,"value":676},{"type":428,"tag":453,"props":1889,"children":1890},{"class":455,"line":778},[1891],{"type":428,"tag":453,"props":1892,"children":1893},{"style":482},[1894],{"type":434,"value":1177},{"type":428,"tag":453,"props":1896,"children":1897},{"class":455,"line":803},[1898],{"type":428,"tag":453,"props":1899,"children":1900},{"emptyLinePlaceholder":420},[1901],{"type":434,"value":1686},{"type":428,"tag":453,"props":1903,"children":1904},{"class":455,"line":841},[1905,1909,1914,1919,1924,1928,1932,1937],{"type":428,"tag":453,"props":1906,"children":1907},{"style":470},[1908],{"type":434,"value":1672},{"type":428,"tag":453,"props":1910,"children":1911},{"style":530},[1912],{"type":434,"value":1913}," timer ",{"type":428,"tag":453,"props":1915,"children":1916},{"style":1015},[1917],{"type":434,"value":1918},"=",{"type":428,"tag":453,"props":1920,"children":1921},{"style":476},[1922],{"type":434,"value":1923}," setTimeout",{"type":428,"tag":453,"props":1925,"children":1926},{"style":530},[1927],{"type":434,"value":485},{"type":428,"tag":453,"props":1929,"children":1930},{"style":470},[1931],{"type":434,"value":473},{"type":428,"tag":453,"props":1933,"children":1934},{"style":482},[1935],{"type":434,"value":1936},"()",{"type":428,"tag":453,"props":1938,"children":1939},{"style":482},[1940],{"type":434,"value":511},{"type":428,"tag":453,"props":1942,"children":1943},{"class":455,"line":850},[1944,1948,1952,1957],{"type":428,"tag":453,"props":1945,"children":1946},{"style":530},[1947],{"type":434,"value":1706},{"type":428,"tag":453,"props":1949,"children":1950},{"style":482},[1951],{"type":434,"value":538},{"type":428,"tag":453,"props":1953,"children":1954},{"style":476},[1955],{"type":434,"value":1956},"close",{"type":428,"tag":453,"props":1958,"children":1959},{"style":524},[1960],{"type":434,"value":1961},"()\n",{"type":428,"tag":453,"props":1963,"children":1964},{"class":455,"line":862},[1965,1970,1974,1979,1983,1987,1991],{"type":428,"tag":453,"props":1966,"children":1967},{"style":530},[1968],{"type":434,"value":1969},"  stack",{"type":428,"tag":453,"props":1971,"children":1972},{"style":482},[1973],{"type":434,"value":538},{"type":428,"tag":453,"props":1975,"children":1976},{"style":476},[1977],{"type":434,"value":1978},"cleanup",{"type":428,"tag":453,"props":1980,"children":1981},{"style":524},[1982],{"type":434,"value":485},{"type":428,"tag":453,"props":1984,"children":1985},{"style":470},[1986],{"type":434,"value":473},{"type":428,"tag":453,"props":1988,"children":1989},{"style":482},[1990],{"type":434,"value":1936},{"type":428,"tag":453,"props":1992,"children":1993},{"style":482},[1994],{"type":434,"value":511},{"type":428,"tag":453,"props":1996,"children":1997},{"class":455,"line":920},[1998,2003,2007,2011,2015,2019],{"type":428,"tag":453,"props":1999,"children":2000},{"style":476},[2001],{"type":434,"value":2002},"    fn",{"type":428,"tag":453,"props":2004,"children":2005},{"style":524},[2006],{"type":434,"value":485},{"type":428,"tag":453,"props":2008,"children":2009},{"style":1675},[2010],{"type":434,"value":1837},{"type":428,"tag":453,"props":2012,"children":2013},{"style":1015},[2014],{"type":434,"value":1018},{"type":428,"tag":453,"props":2016,"children":2017},{"style":1844},[2018],{"type":434,"value":1847},{"type":428,"tag":453,"props":2020,"children":2021},{"style":524},[2022],{"type":434,"value":645},{"type":428,"tag":453,"props":2024,"children":2025},{"class":455,"line":952},[2026,2030],{"type":428,"tag":453,"props":2027,"children":2028},{"style":482},[2029],{"type":434,"value":1459},{"type":428,"tag":453,"props":2031,"children":2032},{"style":524},[2033],{"type":434,"value":645},{"type":428,"tag":453,"props":2035,"children":2036},{"class":455,"line":1001},[2037,2042,2048],{"type":428,"tag":453,"props":2038,"children":2039},{"style":482},[2040],{"type":434,"value":2041},"},",{"type":428,"tag":453,"props":2043,"children":2045},{"style":2044},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2046],{"type":434,"value":2047}," 200",{"type":428,"tag":453,"props":2049,"children":2050},{"style":530},[2051],{"type":434,"value":645},{"type":428,"tag":453,"props":2053,"children":2054},{"class":455,"line":1055},[2055],{"type":428,"tag":453,"props":2056,"children":2057},{"emptyLinePlaceholder":420},[2058],{"type":434,"value":1686},{"type":428,"tag":453,"props":2060,"children":2061},{"class":455,"line":1099},[2062,2067,2071,2076,2080,2084,2089,2093,2097,2101,2105,2109,2113,2118,2122],{"type":428,"tag":453,"props":2063,"children":2064},{"style":530},[2065],{"type":434,"value":2066},"watcher",{"type":428,"tag":453,"props":2068,"children":2069},{"style":482},[2070],{"type":434,"value":538},{"type":428,"tag":453,"props":2072,"children":2073},{"style":476},[2074],{"type":434,"value":2075},"on",{"type":428,"tag":453,"props":2077,"children":2078},{"style":530},[2079],{"type":434,"value":485},{"type":428,"tag":453,"props":2081,"children":2082},{"style":1276},[2083],{"type":434,"value":1290},{"type":428,"tag":453,"props":2085,"children":2086},{"style":1282},[2087],{"type":434,"value":2088},"change",{"type":428,"tag":453,"props":2090,"children":2091},{"style":1276},[2092],{"type":434,"value":1290},{"type":428,"tag":453,"props":2094,"children":2095},{"style":482},[2096],{"type":434,"value":496},{"type":428,"tag":453,"props":2098,"children":2099},{"style":470},[2100],{"type":434,"value":596},{"type":428,"tag":453,"props":2102,"children":2103},{"style":482},[2104],{"type":434,"value":485},{"type":428,"tag":453,"props":2106,"children":2107},{"style":488},[2108],{"type":434,"value":1336},{"type":428,"tag":453,"props":2110,"children":2111},{"style":482},[2112],{"type":434,"value":496},{"type":428,"tag":453,"props":2114,"children":2115},{"style":488},[2116],{"type":434,"value":2117}," name",{"type":428,"tag":453,"props":2119,"children":2120},{"style":482},[2121],{"type":434,"value":506},{"type":428,"tag":453,"props":2123,"children":2124},{"style":482},[2125],{"type":434,"value":511},{"type":428,"tag":453,"props":2127,"children":2128},{"class":455,"line":1128},[2129,2133,2137,2141,2145,2149,2153,2157,2161,2165,2169,2173,2177,2181,2186,2190],{"type":428,"tag":453,"props":2130,"children":2131},{"style":518},[2132],{"type":434,"value":521},{"type":428,"tag":453,"props":2134,"children":2135},{"style":524},[2136],{"type":434,"value":527},{"type":428,"tag":453,"props":2138,"children":2139},{"style":530},[2140],{"type":434,"value":1369},{"type":428,"tag":453,"props":2142,"children":2143},{"style":482},[2144],{"type":434,"value":538},{"type":428,"tag":453,"props":2146,"children":2147},{"style":476},[2148],{"type":434,"value":1378},{"type":428,"tag":453,"props":2150,"children":2151},{"style":524},[2152],{"type":434,"value":485},{"type":428,"tag":453,"props":2154,"children":2155},{"style":530},[2156],{"type":434,"value":1087},{"type":428,"tag":453,"props":2158,"children":2159},{"style":524},[2160],{"type":434,"value":939},{"type":428,"tag":453,"props":2162,"children":2163},{"style":1015},[2164],{"type":434,"value":1395},{"type":428,"tag":453,"props":2166,"children":2167},{"style":530},[2168],{"type":434,"value":1023},{"type":428,"tag":453,"props":2170,"children":2171},{"style":482},[2172],{"type":434,"value":538},{"type":428,"tag":453,"props":2174,"children":2175},{"style":476},[2176],{"type":434,"value":1378},{"type":428,"tag":453,"props":2178,"children":2179},{"style":524},[2180],{"type":434,"value":485},{"type":428,"tag":453,"props":2182,"children":2183},{"style":530},[2184],{"type":434,"value":2185},"name",{"type":428,"tag":453,"props":2187,"children":2188},{"style":524},[2189],{"type":434,"value":556},{"type":428,"tag":453,"props":2191,"children":2192},{"style":482},[2193],{"type":434,"value":561},{"type":428,"tag":453,"props":2195,"children":2196},{"class":455,"line":1137},[2197,2202,2206,2210],{"type":428,"tag":453,"props":2198,"children":2199},{"style":530},[2200],{"type":434,"value":2201},"    watcher",{"type":428,"tag":453,"props":2203,"children":2204},{"style":482},[2205],{"type":434,"value":538},{"type":428,"tag":453,"props":2207,"children":2208},{"style":476},[2209],{"type":434,"value":1956},{"type":428,"tag":453,"props":2211,"children":2212},{"style":524},[2213],{"type":434,"value":1961},{"type":428,"tag":453,"props":2215,"children":2216},{"class":455,"line":1150},[2217,2222,2226,2231],{"type":428,"tag":453,"props":2218,"children":2219},{"style":476},[2220],{"type":434,"value":2221},"    clearTimeout",{"type":428,"tag":453,"props":2223,"children":2224},{"style":524},[2225],{"type":434,"value":485},{"type":428,"tag":453,"props":2227,"children":2228},{"style":530},[2229],{"type":434,"value":2230},"timer",{"type":428,"tag":453,"props":2232,"children":2233},{"style":524},[2234],{"type":434,"value":645},{"type":428,"tag":453,"props":2236,"children":2237},{"class":455,"line":1163},[2238,2243,2247,2251,2255,2259,2263],{"type":428,"tag":453,"props":2239,"children":2240},{"style":530},[2241],{"type":434,"value":2242},"    stack",{"type":428,"tag":453,"props":2244,"children":2245},{"style":482},[2246],{"type":434,"value":538},{"type":428,"tag":453,"props":2248,"children":2249},{"style":476},[2250],{"type":434,"value":1978},{"type":428,"tag":453,"props":2252,"children":2253},{"style":524},[2254],{"type":434,"value":485},{"type":428,"tag":453,"props":2256,"children":2257},{"style":470},[2258],{"type":434,"value":473},{"type":428,"tag":453,"props":2260,"children":2261},{"style":482},[2262],{"type":434,"value":1936},{"type":428,"tag":453,"props":2264,"children":2265},{"style":482},[2266],{"type":434,"value":511},{"type":428,"tag":453,"props":2268,"children":2269},{"class":455,"line":1171},[2270,2275,2279,2283,2287,2292],{"type":428,"tag":453,"props":2271,"children":2272},{"style":476},[2273],{"type":434,"value":2274},"      fn",{"type":428,"tag":453,"props":2276,"children":2277},{"style":524},[2278],{"type":434,"value":485},{"type":428,"tag":453,"props":2280,"children":2281},{"style":1675},[2282],{"type":434,"value":1837},{"type":428,"tag":453,"props":2284,"children":2285},{"style":1015},[2286],{"type":434,"value":1018},{"type":428,"tag":453,"props":2288,"children":2289},{"style":1844},[2290],{"type":434,"value":2291}," true",{"type":428,"tag":453,"props":2293,"children":2294},{"style":524},[2295],{"type":434,"value":645},{"type":428,"tag":453,"props":2297,"children":2299},{"class":455,"line":2298},26,[2300,2304],{"type":428,"tag":453,"props":2301,"children":2302},{"style":482},[2303],{"type":434,"value":654},{"type":428,"tag":453,"props":2305,"children":2306},{"style":524},[2307],{"type":434,"value":645},{"type":428,"tag":453,"props":2309,"children":2311},{"class":455,"line":2310},27,[2312],{"type":428,"tag":453,"props":2313,"children":2314},{"style":482},[2315],{"type":434,"value":676},{"type":428,"tag":453,"props":2317,"children":2319},{"class":455,"line":2318},28,[2320,2324],{"type":428,"tag":453,"props":2321,"children":2322},{"style":482},[2323],{"type":434,"value":1751},{"type":428,"tag":453,"props":2325,"children":2326},{"style":530},[2327],{"type":434,"value":645},{"type":428,"tag":436,"props":2329,"children":2330},{},[2331],{"type":434,"value":2332},"Watcher 仅向外暴露指定方法。",{"type":428,"tag":442,"props":2334,"children":2336},{"className":444,"code":2335,"language":446,"meta":421,"style":421},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2337],{"type":428,"tag":449,"props":2338,"children":2339},{"__ignoreMap":421},[2340,2383,2404,2426,2447,2502,2538,2592,2609,2617,2657,2695,2752,2759,2770,2783],{"type":428,"tag":453,"props":2341,"children":2342},{"class":455,"line":456},[2343,2349,2353,2358,2362,2367,2371,2375,2379],{"type":428,"tag":453,"props":2344,"children":2346},{"style":2345},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[2347],{"type":434,"value":2348},"Watcher",{"type":428,"tag":453,"props":2350,"children":2351},{"style":482},[2352],{"type":434,"value":538},{"type":428,"tag":453,"props":2354,"children":2355},{"style":1675},[2356],{"type":434,"value":2357},"prototype",{"type":428,"tag":453,"props":2359,"children":2360},{"style":482},[2361],{"type":434,"value":538},{"type":428,"tag":453,"props":2363,"children":2364},{"style":476},[2365],{"type":434,"value":2366},"expose",{"type":428,"tag":453,"props":2368,"children":2369},{"style":1015},[2370],{"type":434,"value":1018},{"type":428,"tag":453,"props":2372,"children":2373},{"style":470},[2374],{"type":434,"value":596},{"type":428,"tag":453,"props":2376,"children":2377},{"style":482},[2378],{"type":434,"value":1936},{"type":428,"tag":453,"props":2380,"children":2381},{"style":482},[2382],{"type":434,"value":511},{"type":428,"tag":453,"props":2384,"children":2385},{"class":455,"line":466},[2386,2390,2395,2399],{"type":428,"tag":453,"props":2387,"children":2388},{"style":470},[2389],{"type":434,"value":1238},{"type":428,"tag":453,"props":2391,"children":2392},{"style":530},[2393],{"type":434,"value":2394}," expose",{"type":428,"tag":453,"props":2396,"children":2397},{"style":1015},[2398],{"type":434,"value":1018},{"type":428,"tag":453,"props":2400,"children":2401},{"style":482},[2402],{"type":434,"value":2403}," {}\n",{"type":428,"tag":453,"props":2405,"children":2406},{"class":455,"line":514},[2407,2411,2416,2420],{"type":428,"tag":453,"props":2408,"children":2409},{"style":470},[2410],{"type":434,"value":1238},{"type":428,"tag":453,"props":2412,"children":2413},{"style":530},[2414],{"type":434,"value":2415}," self",{"type":428,"tag":453,"props":2417,"children":2418},{"style":1015},[2419],{"type":434,"value":1018},{"type":428,"tag":453,"props":2421,"children":2423},{"style":2422},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2424],{"type":434,"value":2425}," this\n",{"type":428,"tag":453,"props":2427,"children":2428},{"class":455,"line":564},[2429,2433,2438,2442],{"type":428,"tag":453,"props":2430,"children":2431},{"style":470},[2432],{"type":434,"value":1238},{"type":428,"tag":453,"props":2434,"children":2435},{"style":530},[2436],{"type":434,"value":2437}," methods",{"type":428,"tag":453,"props":2439,"children":2440},{"style":1015},[2441],{"type":434,"value":1018},{"type":428,"tag":453,"props":2443,"children":2444},{"style":524},[2445],{"type":434,"value":2446}," [\n",{"type":428,"tag":453,"props":2448,"children":2449},{"class":455,"line":616},[2450,2455,2459,2463,2467,2471,2476,2480,2484,2488,2493,2497],{"type":428,"tag":453,"props":2451,"children":2452},{"style":1276},[2453],{"type":434,"value":2454},"    '",{"type":428,"tag":453,"props":2456,"children":2457},{"style":1282},[2458],{"type":434,"value":2075},{"type":428,"tag":453,"props":2460,"children":2461},{"style":1276},[2462],{"type":434,"value":1290},{"type":428,"tag":453,"props":2464,"children":2465},{"style":482},[2466],{"type":434,"value":496},{"type":428,"tag":453,"props":2468,"children":2469},{"style":1276},[2470],{"type":434,"value":1279},{"type":428,"tag":453,"props":2472,"children":2473},{"style":1282},[2474],{"type":434,"value":2475},"emit",{"type":428,"tag":453,"props":2477,"children":2478},{"style":1276},[2479],{"type":434,"value":1290},{"type":428,"tag":453,"props":2481,"children":2482},{"style":482},[2483],{"type":434,"value":496},{"type":428,"tag":453,"props":2485,"children":2486},{"style":1276},[2487],{"type":434,"value":1279},{"type":428,"tag":453,"props":2489,"children":2490},{"style":1282},[2491],{"type":434,"value":2492},"once",{"type":428,"tag":453,"props":2494,"children":2495},{"style":1276},[2496],{"type":434,"value":1290},{"type":428,"tag":453,"props":2498,"children":2499},{"style":482},[2500],{"type":434,"value":2501},",\n",{"type":428,"tag":453,"props":2503,"children":2504},{"class":455,"line":648},[2505,2509,2513,2517,2521,2525,2530,2534],{"type":428,"tag":453,"props":2506,"children":2507},{"style":1276},[2508],{"type":434,"value":2454},{"type":428,"tag":453,"props":2510,"children":2511},{"style":1282},[2512],{"type":434,"value":1956},{"type":428,"tag":453,"props":2514,"children":2515},{"style":1276},[2516],{"type":434,"value":1290},{"type":428,"tag":453,"props":2518,"children":2519},{"style":482},[2520],{"type":434,"value":496},{"type":428,"tag":453,"props":2522,"children":2523},{"style":1276},[2524],{"type":434,"value":1279},{"type":428,"tag":453,"props":2526,"children":2527},{"style":1282},[2528],{"type":434,"value":2529},"isClosed",{"type":428,"tag":453,"props":2531,"children":2532},{"style":1276},[2533],{"type":434,"value":1290},{"type":428,"tag":453,"props":2535,"children":2536},{"style":482},[2537],{"type":434,"value":2501},{"type":428,"tag":453,"props":2539,"children":2540},{"class":455,"line":661},[2541,2545,2550,2554,2558,2562,2567,2571,2575,2579,2584,2588],{"type":428,"tag":453,"props":2542,"children":2543},{"style":1276},[2544],{"type":434,"value":2454},{"type":428,"tag":453,"props":2546,"children":2547},{"style":1282},[2548],{"type":434,"value":2549},"listeners",{"type":428,"tag":453,"props":2551,"children":2552},{"style":1276},[2553],{"type":434,"value":1290},{"type":428,"tag":453,"props":2555,"children":2556},{"style":482},[2557],{"type":434,"value":496},{"type":428,"tag":453,"props":2559,"children":2560},{"style":1276},[2561],{"type":434,"value":1279},{"type":428,"tag":453,"props":2563,"children":2564},{"style":1282},[2565],{"type":434,"value":2566},"setMaxListeners",{"type":428,"tag":453,"props":2568,"children":2569},{"style":1276},[2570],{"type":434,"value":1290},{"type":428,"tag":453,"props":2572,"children":2573},{"style":482},[2574],{"type":434,"value":496},{"type":428,"tag":453,"props":2576,"children":2577},{"style":1276},[2578],{"type":434,"value":1279},{"type":428,"tag":453,"props":2580,"children":2581},{"style":1282},[2582],{"type":434,"value":2583},"getMaxListeners",{"type":428,"tag":453,"props":2585,"children":2586},{"style":1276},[2587],{"type":434,"value":1290},{"type":428,"tag":453,"props":2589,"children":2590},{"style":482},[2591],{"type":434,"value":2501},{"type":428,"tag":453,"props":2593,"children":2594},{"class":455,"line":670},[2595,2599,2604],{"type":428,"tag":453,"props":2596,"children":2597},{"style":1276},[2598],{"type":434,"value":2454},{"type":428,"tag":453,"props":2600,"children":2601},{"style":1282},[2602],{"type":434,"value":2603},"getWatchedPaths",{"type":428,"tag":453,"props":2605,"children":2606},{"style":1276},[2607],{"type":434,"value":2608},"'\n",{"type":428,"tag":453,"props":2610,"children":2611},{"class":455,"line":679},[2612],{"type":428,"tag":453,"props":2613,"children":2614},{"style":524},[2615],{"type":434,"value":2616},"  ]\n",{"type":428,"tag":453,"props":2618,"children":2619},{"class":455,"line":720},[2620,2625,2629,2633,2637,2641,2645,2649,2653],{"type":428,"tag":453,"props":2621,"children":2622},{"style":530},[2623],{"type":434,"value":2624},"  methods",{"type":428,"tag":453,"props":2626,"children":2627},{"style":482},[2628],{"type":434,"value":538},{"type":428,"tag":453,"props":2630,"children":2631},{"style":476},[2632],{"type":434,"value":967},{"type":428,"tag":453,"props":2634,"children":2635},{"style":524},[2636],{"type":434,"value":485},{"type":428,"tag":453,"props":2638,"children":2639},{"style":470},[2640],{"type":434,"value":473},{"type":428,"tag":453,"props":2642,"children":2643},{"style":482},[2644],{"type":434,"value":485},{"type":428,"tag":453,"props":2646,"children":2647},{"style":488},[2648],{"type":434,"value":2185},{"type":428,"tag":453,"props":2650,"children":2651},{"style":482},[2652],{"type":434,"value":506},{"type":428,"tag":453,"props":2654,"children":2655},{"style":482},[2656],{"type":434,"value":511},{"type":428,"tag":453,"props":2658,"children":2659},{"class":455,"line":778},[2660,2665,2670,2674,2679,2683,2687,2691],{"type":428,"tag":453,"props":2661,"children":2662},{"style":530},[2663],{"type":434,"value":2664},"    expose",{"type":428,"tag":453,"props":2666,"children":2667},{"style":524},[2668],{"type":434,"value":2669},"[",{"type":428,"tag":453,"props":2671,"children":2672},{"style":530},[2673],{"type":434,"value":2185},{"type":428,"tag":453,"props":2675,"children":2676},{"style":524},[2677],{"type":434,"value":2678},"] ",{"type":428,"tag":453,"props":2680,"children":2681},{"style":1015},[2682],{"type":434,"value":1918},{"type":428,"tag":453,"props":2684,"children":2685},{"style":470},[2686],{"type":434,"value":596},{"type":428,"tag":453,"props":2688,"children":2689},{"style":482},[2690],{"type":434,"value":1936},{"type":428,"tag":453,"props":2692,"children":2693},{"style":482},[2694],{"type":434,"value":511},{"type":428,"tag":453,"props":2696,"children":2697},{"class":455,"line":803},[2698,2703,2707,2711,2715,2720,2724,2729,2733,2738,2742,2748],{"type":428,"tag":453,"props":2699,"children":2700},{"style":518},[2701],{"type":434,"value":2702},"      return",{"type":428,"tag":453,"props":2704,"children":2705},{"style":530},[2706],{"type":434,"value":2415},{"type":428,"tag":453,"props":2708,"children":2709},{"style":524},[2710],{"type":434,"value":2669},{"type":428,"tag":453,"props":2712,"children":2713},{"style":530},[2714],{"type":434,"value":2185},{"type":428,"tag":453,"props":2716,"children":2717},{"style":524},[2718],{"type":434,"value":2719},"]",{"type":428,"tag":453,"props":2721,"children":2722},{"style":482},[2723],{"type":434,"value":538},{"type":428,"tag":453,"props":2725,"children":2726},{"style":476},[2727],{"type":434,"value":2728},"apply",{"type":428,"tag":453,"props":2730,"children":2731},{"style":524},[2732],{"type":434,"value":485},{"type":428,"tag":453,"props":2734,"children":2735},{"style":530},[2736],{"type":434,"value":2737},"self",{"type":428,"tag":453,"props":2739,"children":2740},{"style":482},[2741],{"type":434,"value":496},{"type":428,"tag":453,"props":2743,"children":2745},{"style":2744},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2746],{"type":434,"value":2747}," arguments",{"type":428,"tag":453,"props":2749,"children":2750},{"style":524},[2751],{"type":434,"value":645},{"type":428,"tag":453,"props":2753,"children":2754},{"class":455,"line":841},[2755],{"type":428,"tag":453,"props":2756,"children":2757},{"style":482},[2758],{"type":434,"value":1451},{"type":428,"tag":453,"props":2760,"children":2761},{"class":455,"line":850},[2762,2766],{"type":428,"tag":453,"props":2763,"children":2764},{"style":482},[2765],{"type":434,"value":1459},{"type":428,"tag":453,"props":2767,"children":2768},{"style":524},[2769],{"type":434,"value":645},{"type":428,"tag":453,"props":2771,"children":2772},{"class":455,"line":862},[2773,2778],{"type":428,"tag":453,"props":2774,"children":2775},{"style":518},[2776],{"type":434,"value":2777},"  return",{"type":428,"tag":453,"props":2779,"children":2780},{"style":530},[2781],{"type":434,"value":2782}," expose\n",{"type":428,"tag":453,"props":2784,"children":2785},{"class":455,"line":920},[2786],{"type":428,"tag":453,"props":2787,"children":2788},{"style":482},[2789],{"type":434,"value":1177},{"type":428,"tag":436,"props":2791,"children":2792},{},[2793],{"type":434,"value":2794},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":428,"tag":442,"props":2796,"children":2798},{"className":444,"code":2797,"language":446,"meta":421,"style":421},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2799],{"type":428,"tag":449,"props":2800,"children":2801},{"__ignoreMap":421},[2802,2831,2839,2869,2894,2924,2931,2972,3044,3097,3109,3165,3209,3220,3268,3305,3325,3333,3344,3355,3362,3393,3433,3453,3464,3502,3509,3516,3556,3597,3652,3694,3723,3736,3748,3813,3856,3878,3890,3898,3906,3914,3938],{"type":428,"tag":453,"props":2803,"children":2804},{"class":455,"line":456},[2805,2809,2814,2818,2823,2827],{"type":428,"tag":453,"props":2806,"children":2807},{"style":470},[2808],{"type":434,"value":473},{"type":428,"tag":453,"props":2810,"children":2811},{"style":476},[2812],{"type":434,"value":2813}," composeWatcher",{"type":428,"tag":453,"props":2815,"children":2816},{"style":482},[2817],{"type":434,"value":485},{"type":428,"tag":453,"props":2819,"children":2820},{"style":488},[2821],{"type":434,"value":2822},"watchers",{"type":428,"tag":453,"props":2824,"children":2825},{"style":482},[2826],{"type":434,"value":506},{"type":428,"tag":453,"props":2828,"children":2829},{"style":482},[2830],{"type":434,"value":511},{"type":428,"tag":453,"props":2832,"children":2833},{"class":455,"line":466},[2834],{"type":428,"tag":453,"props":2835,"children":2836},{"style":460},[2837],{"type":434,"value":2838},"  // 使用一个新的 watcher 整合事件列表\n",{"type":428,"tag":453,"props":2840,"children":2841},{"class":455,"line":514},[2842,2846,2851,2855,2860,2865],{"type":428,"tag":453,"props":2843,"children":2844},{"style":470},[2845],{"type":434,"value":1238},{"type":428,"tag":453,"props":2847,"children":2848},{"style":530},[2849],{"type":434,"value":2850}," watcher",{"type":428,"tag":453,"props":2852,"children":2853},{"style":1015},[2854],{"type":434,"value":1018},{"type":428,"tag":453,"props":2856,"children":2857},{"style":1015},[2858],{"type":434,"value":2859}," new",{"type":428,"tag":453,"props":2861,"children":2862},{"style":476},[2863],{"type":434,"value":2864}," Watcher",{"type":428,"tag":453,"props":2866,"children":2867},{"style":524},[2868],{"type":434,"value":1961},{"type":428,"tag":453,"props":2870,"children":2871},{"class":455,"line":564},[2872,2876,2881,2885,2890],{"type":428,"tag":453,"props":2873,"children":2874},{"style":470},[2875],{"type":434,"value":1238},{"type":428,"tag":453,"props":2877,"children":2878},{"style":530},[2879],{"type":434,"value":2880}," filterDups",{"type":428,"tag":453,"props":2882,"children":2883},{"style":1015},[2884],{"type":434,"value":1018},{"type":428,"tag":453,"props":2886,"children":2887},{"style":476},[2888],{"type":434,"value":2889}," createDupsFilter",{"type":428,"tag":453,"props":2891,"children":2892},{"style":524},[2893],{"type":434,"value":1961},{"type":428,"tag":453,"props":2895,"children":2896},{"class":455,"line":616},[2897,2901,2906,2910,2915,2919],{"type":428,"tag":453,"props":2898,"children":2899},{"style":470},[2900],{"type":434,"value":1238},{"type":428,"tag":453,"props":2902,"children":2903},{"style":530},[2904],{"type":434,"value":2905}," counter",{"type":428,"tag":453,"props":2907,"children":2908},{"style":1015},[2909],{"type":434,"value":1018},{"type":428,"tag":453,"props":2911,"children":2912},{"style":530},[2913],{"type":434,"value":2914}," watchers",{"type":428,"tag":453,"props":2916,"children":2917},{"style":482},[2918],{"type":434,"value":538},{"type":428,"tag":453,"props":2920,"children":2921},{"style":1675},[2922],{"type":434,"value":2923},"length\n",{"type":428,"tag":453,"props":2925,"children":2926},{"class":455,"line":648},[2927],{"type":428,"tag":453,"props":2928,"children":2929},{"emptyLinePlaceholder":420},[2930],{"type":434,"value":1686},{"type":428,"tag":453,"props":2932,"children":2933},{"class":455,"line":661},[2934,2939,2943,2947,2951,2955,2959,2964,2968],{"type":428,"tag":453,"props":2935,"children":2936},{"style":530},[2937],{"type":434,"value":2938},"  watchers",{"type":428,"tag":453,"props":2940,"children":2941},{"style":482},[2942],{"type":434,"value":538},{"type":428,"tag":453,"props":2944,"children":2945},{"style":476},[2946],{"type":434,"value":967},{"type":428,"tag":453,"props":2948,"children":2949},{"style":524},[2950],{"type":434,"value":485},{"type":428,"tag":453,"props":2952,"children":2953},{"style":470},[2954],{"type":434,"value":473},{"type":428,"tag":453,"props":2956,"children":2957},{"style":482},[2958],{"type":434,"value":485},{"type":428,"tag":453,"props":2960,"children":2961},{"style":488},[2962],{"type":434,"value":2963},"w",{"type":428,"tag":453,"props":2965,"children":2966},{"style":482},[2967],{"type":434,"value":506},{"type":428,"tag":453,"props":2969,"children":2970},{"style":482},[2971],{"type":434,"value":511},{"type":428,"tag":453,"props":2973,"children":2974},{"class":455,"line":670},[2975,2980,2984,2988,2992,2996,3000,3004,3008,3012,3016,3020,3024,3028,3032,3036,3040],{"type":428,"tag":453,"props":2976,"children":2977},{"style":530},[2978],{"type":434,"value":2979},"    w",{"type":428,"tag":453,"props":2981,"children":2982},{"style":482},[2983],{"type":434,"value":538},{"type":428,"tag":453,"props":2985,"children":2986},{"style":476},[2987],{"type":434,"value":2075},{"type":428,"tag":453,"props":2989,"children":2990},{"style":524},[2991],{"type":434,"value":485},{"type":428,"tag":453,"props":2993,"children":2994},{"style":1276},[2995],{"type":434,"value":1290},{"type":428,"tag":453,"props":2997,"children":2998},{"style":1282},[2999],{"type":434,"value":2088},{"type":428,"tag":453,"props":3001,"children":3002},{"style":1276},[3003],{"type":434,"value":1290},{"type":428,"tag":453,"props":3005,"children":3006},{"style":482},[3007],{"type":434,"value":496},{"type":428,"tag":453,"props":3009,"children":3010},{"style":476},[3011],{"type":434,"value":2880},{"type":428,"tag":453,"props":3013,"children":3014},{"style":524},[3015],{"type":434,"value":485},{"type":428,"tag":453,"props":3017,"children":3018},{"style":470},[3019],{"type":434,"value":473},{"type":428,"tag":453,"props":3021,"children":3022},{"style":482},[3023],{"type":434,"value":485},{"type":428,"tag":453,"props":3025,"children":3026},{"style":488},[3027],{"type":434,"value":1336},{"type":428,"tag":453,"props":3029,"children":3030},{"style":482},[3031],{"type":434,"value":496},{"type":428,"tag":453,"props":3033,"children":3034},{"style":488},[3035],{"type":434,"value":2117},{"type":428,"tag":453,"props":3037,"children":3038},{"style":482},[3039],{"type":434,"value":506},{"type":428,"tag":453,"props":3041,"children":3042},{"style":482},[3043],{"type":434,"value":511},{"type":428,"tag":453,"props":3045,"children":3046},{"class":455,"line":679},[3047,3052,3056,3060,3064,3068,3072,3076,3080,3085,3089,3093],{"type":428,"tag":453,"props":3048,"children":3049},{"style":530},[3050],{"type":434,"value":3051},"      watcher",{"type":428,"tag":453,"props":3053,"children":3054},{"style":482},[3055],{"type":434,"value":538},{"type":428,"tag":453,"props":3057,"children":3058},{"style":476},[3059],{"type":434,"value":2475},{"type":428,"tag":453,"props":3061,"children":3062},{"style":524},[3063],{"type":434,"value":485},{"type":428,"tag":453,"props":3065,"children":3066},{"style":1276},[3067],{"type":434,"value":1290},{"type":428,"tag":453,"props":3069,"children":3070},{"style":1282},[3071],{"type":434,"value":2088},{"type":428,"tag":453,"props":3073,"children":3074},{"style":1276},[3075],{"type":434,"value":1290},{"type":428,"tag":453,"props":3077,"children":3078},{"style":482},[3079],{"type":434,"value":496},{"type":428,"tag":453,"props":3081,"children":3082},{"style":530},[3083],{"type":434,"value":3084}," evt",{"type":428,"tag":453,"props":3086,"children":3087},{"style":482},[3088],{"type":434,"value":496},{"type":428,"tag":453,"props":3090,"children":3091},{"style":530},[3092],{"type":434,"value":2117},{"type":428,"tag":453,"props":3094,"children":3095},{"style":524},[3096],{"type":434,"value":645},{"type":428,"tag":453,"props":3098,"children":3099},{"class":455,"line":720},[3100,3104],{"type":428,"tag":453,"props":3101,"children":3102},{"style":482},[3103],{"type":434,"value":654},{"type":428,"tag":453,"props":3105,"children":3106},{"style":524},[3107],{"type":434,"value":3108},"))\n",{"type":428,"tag":453,"props":3110,"children":3111},{"class":455,"line":778},[3112,3116,3120,3124,3128,3132,3137,3141,3145,3149,3153,3157,3161],{"type":428,"tag":453,"props":3113,"children":3114},{"style":530},[3115],{"type":434,"value":2979},{"type":428,"tag":453,"props":3117,"children":3118},{"style":482},[3119],{"type":434,"value":538},{"type":428,"tag":453,"props":3121,"children":3122},{"style":476},[3123],{"type":434,"value":2075},{"type":428,"tag":453,"props":3125,"children":3126},{"style":524},[3127],{"type":434,"value":485},{"type":428,"tag":453,"props":3129,"children":3130},{"style":1276},[3131],{"type":434,"value":1290},{"type":428,"tag":453,"props":3133,"children":3134},{"style":1282},[3135],{"type":434,"value":3136},"error",{"type":428,"tag":453,"props":3138,"children":3139},{"style":1276},[3140],{"type":434,"value":1290},{"type":428,"tag":453,"props":3142,"children":3143},{"style":482},[3144],{"type":434,"value":496},{"type":428,"tag":453,"props":3146,"children":3147},{"style":470},[3148],{"type":434,"value":596},{"type":428,"tag":453,"props":3150,"children":3151},{"style":482},[3152],{"type":434,"value":485},{"type":428,"tag":453,"props":3154,"children":3155},{"style":488},[3156],{"type":434,"value":605},{"type":428,"tag":453,"props":3158,"children":3159},{"style":482},[3160],{"type":434,"value":506},{"type":428,"tag":453,"props":3162,"children":3163},{"style":482},[3164],{"type":434,"value":511},{"type":428,"tag":453,"props":3166,"children":3167},{"class":455,"line":803},[3168,3172,3176,3180,3184,3188,3192,3196,3200,3205],{"type":428,"tag":453,"props":3169,"children":3170},{"style":530},[3171],{"type":434,"value":3051},{"type":428,"tag":453,"props":3173,"children":3174},{"style":482},[3175],{"type":434,"value":538},{"type":428,"tag":453,"props":3177,"children":3178},{"style":476},[3179],{"type":434,"value":2475},{"type":428,"tag":453,"props":3181,"children":3182},{"style":524},[3183],{"type":434,"value":485},{"type":428,"tag":453,"props":3185,"children":3186},{"style":1276},[3187],{"type":434,"value":1290},{"type":428,"tag":453,"props":3189,"children":3190},{"style":1282},[3191],{"type":434,"value":3136},{"type":428,"tag":453,"props":3193,"children":3194},{"style":1276},[3195],{"type":434,"value":1290},{"type":428,"tag":453,"props":3197,"children":3198},{"style":482},[3199],{"type":434,"value":496},{"type":428,"tag":453,"props":3201,"children":3202},{"style":530},[3203],{"type":434,"value":3204}," err",{"type":428,"tag":453,"props":3206,"children":3207},{"style":524},[3208],{"type":434,"value":645},{"type":428,"tag":453,"props":3210,"children":3211},{"class":455,"line":841},[3212,3216],{"type":428,"tag":453,"props":3213,"children":3214},{"style":482},[3215],{"type":434,"value":654},{"type":428,"tag":453,"props":3217,"children":3218},{"style":524},[3219],{"type":434,"value":645},{"type":428,"tag":453,"props":3221,"children":3222},{"class":455,"line":850},[3223,3227,3231,3235,3239,3243,3248,3252,3256,3260,3264],{"type":428,"tag":453,"props":3224,"children":3225},{"style":530},[3226],{"type":434,"value":2979},{"type":428,"tag":453,"props":3228,"children":3229},{"style":482},[3230],{"type":434,"value":538},{"type":428,"tag":453,"props":3232,"children":3233},{"style":476},[3234],{"type":434,"value":2075},{"type":428,"tag":453,"props":3236,"children":3237},{"style":524},[3238],{"type":434,"value":485},{"type":428,"tag":453,"props":3240,"children":3241},{"style":1276},[3242],{"type":434,"value":1290},{"type":428,"tag":453,"props":3244,"children":3245},{"style":1282},[3246],{"type":434,"value":3247},"ready",{"type":428,"tag":453,"props":3249,"children":3250},{"style":1276},[3251],{"type":434,"value":1290},{"type":428,"tag":453,"props":3253,"children":3254},{"style":482},[3255],{"type":434,"value":496},{"type":428,"tag":453,"props":3257,"children":3258},{"style":470},[3259],{"type":434,"value":596},{"type":428,"tag":453,"props":3261,"children":3262},{"style":482},[3263],{"type":434,"value":1936},{"type":428,"tag":453,"props":3265,"children":3266},{"style":482},[3267],{"type":434,"value":511},{"type":428,"tag":453,"props":3269,"children":3270},{"class":455,"line":862},[3271,3275,3279,3284,3288,3292,3297,3301],{"type":428,"tag":453,"props":3272,"children":3273},{"style":518},[3274],{"type":434,"value":926},{"type":428,"tag":453,"props":3276,"children":3277},{"style":524},[3278],{"type":434,"value":527},{"type":428,"tag":453,"props":3280,"children":3281},{"style":1015},[3282],{"type":434,"value":3283},"!",{"type":428,"tag":453,"props":3285,"children":3286},{"style":524},[3287],{"type":434,"value":485},{"type":428,"tag":453,"props":3289,"children":3290},{"style":1015},[3291],{"type":434,"value":1623},{"type":428,"tag":453,"props":3293,"children":3294},{"style":530},[3295],{"type":434,"value":3296},"counter",{"type":428,"tag":453,"props":3298,"children":3299},{"style":524},[3300],{"type":434,"value":556},{"type":428,"tag":453,"props":3302,"children":3303},{"style":482},[3304],{"type":434,"value":561},{"type":428,"tag":453,"props":3306,"children":3307},{"class":455,"line":920},[3308,3313,3317,3321],{"type":428,"tag":453,"props":3309,"children":3310},{"style":476},[3311],{"type":434,"value":3312},"        emitReady",{"type":428,"tag":453,"props":3314,"children":3315},{"style":524},[3316],{"type":434,"value":485},{"type":428,"tag":453,"props":3318,"children":3319},{"style":530},[3320],{"type":434,"value":2066},{"type":428,"tag":453,"props":3322,"children":3323},{"style":524},[3324],{"type":434,"value":645},{"type":428,"tag":453,"props":3326,"children":3327},{"class":455,"line":952},[3328],{"type":428,"tag":453,"props":3329,"children":3330},{"style":482},[3331],{"type":434,"value":3332},"      }\n",{"type":428,"tag":453,"props":3334,"children":3335},{"class":455,"line":1001},[3336,3340],{"type":428,"tag":453,"props":3337,"children":3338},{"style":482},[3339],{"type":434,"value":654},{"type":428,"tag":453,"props":3341,"children":3342},{"style":524},[3343],{"type":434,"value":645},{"type":428,"tag":453,"props":3345,"children":3346},{"class":455,"line":1055},[3347,3351],{"type":428,"tag":453,"props":3348,"children":3349},{"style":482},[3350],{"type":434,"value":1459},{"type":428,"tag":453,"props":3352,"children":3353},{"style":524},[3354],{"type":434,"value":645},{"type":428,"tag":453,"props":3356,"children":3357},{"class":455,"line":1099},[3358],{"type":428,"tag":453,"props":3359,"children":3360},{"emptyLinePlaceholder":420},[3361],{"type":434,"value":1686},{"type":428,"tag":453,"props":3363,"children":3364},{"class":455,"line":1128},[3365,3369,3373,3377,3381,3385,3389],{"type":428,"tag":453,"props":3366,"children":3367},{"style":530},[3368],{"type":434,"value":1706},{"type":428,"tag":453,"props":3370,"children":3371},{"style":482},[3372],{"type":434,"value":538},{"type":428,"tag":453,"props":3374,"children":3375},{"style":476},[3376],{"type":434,"value":1956},{"type":428,"tag":453,"props":3378,"children":3379},{"style":1015},[3380],{"type":434,"value":1018},{"type":428,"tag":453,"props":3382,"children":3383},{"style":470},[3384],{"type":434,"value":596},{"type":428,"tag":453,"props":3386,"children":3387},{"style":482},[3388],{"type":434,"value":1936},{"type":428,"tag":453,"props":3390,"children":3391},{"style":482},[3392],{"type":434,"value":511},{"type":428,"tag":453,"props":3394,"children":3395},{"class":455,"line":1137},[3396,3401,3405,3409,3413,3417,3421,3425,3429],{"type":428,"tag":453,"props":3397,"children":3398},{"style":530},[3399],{"type":434,"value":3400},"    watchers",{"type":428,"tag":453,"props":3402,"children":3403},{"style":482},[3404],{"type":434,"value":538},{"type":428,"tag":453,"props":3406,"children":3407},{"style":476},[3408],{"type":434,"value":967},{"type":428,"tag":453,"props":3410,"children":3411},{"style":524},[3412],{"type":434,"value":485},{"type":428,"tag":453,"props":3414,"children":3415},{"style":470},[3416],{"type":434,"value":473},{"type":428,"tag":453,"props":3418,"children":3419},{"style":482},[3420],{"type":434,"value":485},{"type":428,"tag":453,"props":3422,"children":3423},{"style":488},[3424],{"type":434,"value":2963},{"type":428,"tag":453,"props":3426,"children":3427},{"style":482},[3428],{"type":434,"value":506},{"type":428,"tag":453,"props":3430,"children":3431},{"style":482},[3432],{"type":434,"value":511},{"type":428,"tag":453,"props":3434,"children":3435},{"class":455,"line":1150},[3436,3441,3445,3449],{"type":428,"tag":453,"props":3437,"children":3438},{"style":530},[3439],{"type":434,"value":3440},"      w",{"type":428,"tag":453,"props":3442,"children":3443},{"style":482},[3444],{"type":434,"value":538},{"type":428,"tag":453,"props":3446,"children":3447},{"style":476},[3448],{"type":434,"value":1956},{"type":428,"tag":453,"props":3450,"children":3451},{"style":524},[3452],{"type":434,"value":1961},{"type":428,"tag":453,"props":3454,"children":3455},{"class":455,"line":1163},[3456,3460],{"type":428,"tag":453,"props":3457,"children":3458},{"style":482},[3459],{"type":434,"value":654},{"type":428,"tag":453,"props":3461,"children":3462},{"style":524},[3463],{"type":434,"value":645},{"type":428,"tag":453,"props":3465,"children":3466},{"class":455,"line":1171},[3467,3472,3476,3481,3485,3490,3494,3498],{"type":428,"tag":453,"props":3468,"children":3469},{"style":530},[3470],{"type":434,"value":3471},"    process",{"type":428,"tag":453,"props":3473,"children":3474},{"style":482},[3475],{"type":434,"value":538},{"type":428,"tag":453,"props":3477,"children":3478},{"style":476},[3479],{"type":434,"value":3480},"nextTick",{"type":428,"tag":453,"props":3482,"children":3483},{"style":524},[3484],{"type":434,"value":485},{"type":428,"tag":453,"props":3486,"children":3487},{"style":530},[3488],{"type":434,"value":3489},"emitClose",{"type":428,"tag":453,"props":3491,"children":3492},{"style":482},[3493],{"type":434,"value":496},{"type":428,"tag":453,"props":3495,"children":3496},{"style":530},[3497],{"type":434,"value":2850},{"type":428,"tag":453,"props":3499,"children":3500},{"style":524},[3501],{"type":434,"value":645},{"type":428,"tag":453,"props":3503,"children":3504},{"class":455,"line":2298},[3505],{"type":428,"tag":453,"props":3506,"children":3507},{"style":482},[3508],{"type":434,"value":676},{"type":428,"tag":453,"props":3510,"children":3511},{"class":455,"line":2310},[3512],{"type":428,"tag":453,"props":3513,"children":3514},{"emptyLinePlaceholder":420},[3515],{"type":434,"value":1686},{"type":428,"tag":453,"props":3517,"children":3518},{"class":455,"line":2318},[3519,3523,3527,3531,3535,3539,3543,3548,3552],{"type":428,"tag":453,"props":3520,"children":3521},{"style":530},[3522],{"type":434,"value":1706},{"type":428,"tag":453,"props":3524,"children":3525},{"style":482},[3526],{"type":434,"value":538},{"type":428,"tag":453,"props":3528,"children":3529},{"style":476},[3530],{"type":434,"value":2603},{"type":428,"tag":453,"props":3532,"children":3533},{"style":1015},[3534],{"type":434,"value":1018},{"type":428,"tag":453,"props":3536,"children":3537},{"style":470},[3538],{"type":434,"value":596},{"type":428,"tag":453,"props":3540,"children":3541},{"style":482},[3542],{"type":434,"value":485},{"type":428,"tag":453,"props":3544,"children":3545},{"style":488},[3546],{"type":434,"value":3547},"fn",{"type":428,"tag":453,"props":3549,"children":3550},{"style":482},[3551],{"type":434,"value":506},{"type":428,"tag":453,"props":3553,"children":3554},{"style":482},[3555],{"type":434,"value":511},{"type":428,"tag":453,"props":3557,"children":3559},{"class":455,"line":3558},29,[3560,3564,3568,3572,3576,3581,3585,3589,3593],{"type":428,"tag":453,"props":3561,"children":3562},{"style":518},[3563],{"type":434,"value":1360},{"type":428,"tag":453,"props":3565,"children":3566},{"style":524},[3567],{"type":434,"value":527},{"type":428,"tag":453,"props":3569,"children":3570},{"style":530},[3571],{"type":434,"value":533},{"type":428,"tag":453,"props":3573,"children":3574},{"style":482},[3575],{"type":434,"value":538},{"type":428,"tag":453,"props":3577,"children":3578},{"style":476},[3579],{"type":434,"value":3580},"func",{"type":428,"tag":453,"props":3582,"children":3583},{"style":524},[3584],{"type":434,"value":485},{"type":428,"tag":453,"props":3586,"children":3587},{"style":530},[3588],{"type":434,"value":3547},{"type":428,"tag":453,"props":3590,"children":3591},{"style":524},[3592],{"type":434,"value":556},{"type":428,"tag":453,"props":3594,"children":3595},{"style":482},[3596],{"type":434,"value":561},{"type":428,"tag":453,"props":3598,"children":3600},{"class":455,"line":3599},30,[3601,3606,3611,3615,3619,3623,3628,3632,3636,3640,3644,3648],{"type":428,"tag":453,"props":3602,"children":3603},{"style":470},[3604],{"type":434,"value":3605},"      var",{"type":428,"tag":453,"props":3607,"children":3608},{"style":530},[3609],{"type":434,"value":3610}," promises",{"type":428,"tag":453,"props":3612,"children":3613},{"style":1015},[3614],{"type":434,"value":1018},{"type":428,"tag":453,"props":3616,"children":3617},{"style":530},[3618],{"type":434,"value":2914},{"type":428,"tag":453,"props":3620,"children":3621},{"style":482},[3622],{"type":434,"value":538},{"type":428,"tag":453,"props":3624,"children":3625},{"style":476},[3626],{"type":434,"value":3627},"map",{"type":428,"tag":453,"props":3629,"children":3630},{"style":524},[3631],{"type":434,"value":485},{"type":428,"tag":453,"props":3633,"children":3634},{"style":470},[3635],{"type":434,"value":473},{"type":428,"tag":453,"props":3637,"children":3638},{"style":482},[3639],{"type":434,"value":485},{"type":428,"tag":453,"props":3641,"children":3642},{"style":488},[3643],{"type":434,"value":2963},{"type":428,"tag":453,"props":3645,"children":3646},{"style":482},[3647],{"type":434,"value":506},{"type":428,"tag":453,"props":3649,"children":3650},{"style":482},[3651],{"type":434,"value":511},{"type":428,"tag":453,"props":3653,"children":3655},{"class":455,"line":3654},31,[3656,3661,3665,3670,3674,3678,3682,3686,3690],{"type":428,"tag":453,"props":3657,"children":3658},{"style":518},[3659],{"type":434,"value":3660},"        return",{"type":428,"tag":453,"props":3662,"children":3663},{"style":1015},[3664],{"type":434,"value":2859},{"type":428,"tag":453,"props":3666,"children":3667},{"style":2345},[3668],{"type":434,"value":3669}," Promise",{"type":428,"tag":453,"props":3671,"children":3672},{"style":524},[3673],{"type":434,"value":485},{"type":428,"tag":453,"props":3675,"children":3676},{"style":470},[3677],{"type":434,"value":473},{"type":428,"tag":453,"props":3679,"children":3680},{"style":482},[3681],{"type":434,"value":485},{"type":428,"tag":453,"props":3683,"children":3684},{"style":488},[3685],{"type":434,"value":1260},{"type":428,"tag":453,"props":3687,"children":3688},{"style":482},[3689],{"type":434,"value":506},{"type":428,"tag":453,"props":3691,"children":3692},{"style":482},[3693],{"type":434,"value":511},{"type":428,"tag":453,"props":3695,"children":3697},{"class":455,"line":3696},32,[3698,3703,3707,3711,3715,3719],{"type":428,"tag":453,"props":3699,"children":3700},{"style":530},[3701],{"type":434,"value":3702},"          w",{"type":428,"tag":453,"props":3704,"children":3705},{"style":482},[3706],{"type":434,"value":538},{"type":428,"tag":453,"props":3708,"children":3709},{"style":476},[3710],{"type":434,"value":2603},{"type":428,"tag":453,"props":3712,"children":3713},{"style":524},[3714],{"type":434,"value":485},{"type":428,"tag":453,"props":3716,"children":3717},{"style":530},[3718],{"type":434,"value":1260},{"type":428,"tag":453,"props":3720,"children":3721},{"style":524},[3722],{"type":434,"value":645},{"type":428,"tag":453,"props":3724,"children":3726},{"class":455,"line":3725},33,[3727,3732],{"type":428,"tag":453,"props":3728,"children":3729},{"style":482},[3730],{"type":434,"value":3731},"        }",{"type":428,"tag":453,"props":3733,"children":3734},{"style":524},[3735],{"type":434,"value":645},{"type":428,"tag":453,"props":3737,"children":3739},{"class":455,"line":3738},34,[3740,3744],{"type":428,"tag":453,"props":3741,"children":3742},{"style":482},[3743],{"type":434,"value":1143},{"type":428,"tag":453,"props":3745,"children":3746},{"style":524},[3747],{"type":434,"value":645},{"type":428,"tag":453,"props":3749,"children":3751},{"class":455,"line":3750},35,[3752,3757,3761,3766,3770,3775,3779,3783,3788,3792,3796,3800,3805,3809],{"type":428,"tag":453,"props":3753,"children":3754},{"style":2345},[3755],{"type":434,"value":3756},"      Promise",{"type":428,"tag":453,"props":3758,"children":3759},{"style":482},[3760],{"type":434,"value":538},{"type":428,"tag":453,"props":3762,"children":3763},{"style":476},[3764],{"type":434,"value":3765},"all",{"type":428,"tag":453,"props":3767,"children":3768},{"style":524},[3769],{"type":434,"value":485},{"type":428,"tag":453,"props":3771,"children":3772},{"style":530},[3773],{"type":434,"value":3774},"promises",{"type":428,"tag":453,"props":3776,"children":3777},{"style":524},[3778],{"type":434,"value":506},{"type":428,"tag":453,"props":3780,"children":3781},{"style":482},[3782],{"type":434,"value":538},{"type":428,"tag":453,"props":3784,"children":3785},{"style":476},[3786],{"type":434,"value":3787},"then",{"type":428,"tag":453,"props":3789,"children":3790},{"style":524},[3791],{"type":434,"value":485},{"type":428,"tag":453,"props":3793,"children":3794},{"style":470},[3795],{"type":434,"value":473},{"type":428,"tag":453,"props":3797,"children":3798},{"style":482},[3799],{"type":434,"value":485},{"type":428,"tag":453,"props":3801,"children":3802},{"style":488},[3803],{"type":434,"value":3804},"result",{"type":428,"tag":453,"props":3806,"children":3807},{"style":482},[3808],{"type":434,"value":506},{"type":428,"tag":453,"props":3810,"children":3811},{"style":482},[3812],{"type":434,"value":511},{"type":428,"tag":453,"props":3814,"children":3816},{"class":455,"line":3815},36,[3817,3821,3826,3830,3835,3839,3844,3848,3852],{"type":428,"tag":453,"props":3818,"children":3819},{"style":470},[3820],{"type":434,"value":1007},{"type":428,"tag":453,"props":3822,"children":3823},{"style":530},[3824],{"type":434,"value":3825}," ret",{"type":428,"tag":453,"props":3827,"children":3828},{"style":1015},[3829],{"type":434,"value":1018},{"type":428,"tag":453,"props":3831,"children":3832},{"style":476},[3833],{"type":434,"value":3834}," unique",{"type":428,"tag":453,"props":3836,"children":3837},{"style":524},[3838],{"type":434,"value":485},{"type":428,"tag":453,"props":3840,"children":3841},{"style":476},[3842],{"type":434,"value":3843},"flat1",{"type":428,"tag":453,"props":3845,"children":3846},{"style":524},[3847],{"type":434,"value":485},{"type":428,"tag":453,"props":3849,"children":3850},{"style":530},[3851],{"type":434,"value":3804},{"type":428,"tag":453,"props":3853,"children":3854},{"style":524},[3855],{"type":434,"value":3108},{"type":428,"tag":453,"props":3857,"children":3859},{"class":455,"line":3858},37,[3860,3865,3869,3874],{"type":428,"tag":453,"props":3861,"children":3862},{"style":476},[3863],{"type":434,"value":3864},"        fn",{"type":428,"tag":453,"props":3866,"children":3867},{"style":524},[3868],{"type":434,"value":485},{"type":428,"tag":453,"props":3870,"children":3871},{"style":530},[3872],{"type":434,"value":3873},"ret",{"type":428,"tag":453,"props":3875,"children":3876},{"style":524},[3877],{"type":434,"value":645},{"type":428,"tag":453,"props":3879,"children":3881},{"class":455,"line":3880},38,[3882,3886],{"type":428,"tag":453,"props":3883,"children":3884},{"style":482},[3885],{"type":434,"value":1143},{"type":428,"tag":453,"props":3887,"children":3888},{"style":524},[3889],{"type":434,"value":645},{"type":428,"tag":453,"props":3891,"children":3893},{"class":455,"line":3892},39,[3894],{"type":428,"tag":453,"props":3895,"children":3896},{"style":482},[3897],{"type":434,"value":1451},{"type":428,"tag":453,"props":3899,"children":3901},{"class":455,"line":3900},40,[3902],{"type":428,"tag":453,"props":3903,"children":3904},{"style":482},[3905],{"type":434,"value":676},{"type":428,"tag":453,"props":3907,"children":3909},{"class":455,"line":3908},41,[3910],{"type":428,"tag":453,"props":3911,"children":3912},{"emptyLinePlaceholder":420},[3913],{"type":434,"value":1686},{"type":428,"tag":453,"props":3915,"children":3917},{"class":455,"line":3916},42,[3918,3922,3926,3930,3934],{"type":428,"tag":453,"props":3919,"children":3920},{"style":518},[3921],{"type":434,"value":2777},{"type":428,"tag":453,"props":3923,"children":3924},{"style":530},[3925],{"type":434,"value":2850},{"type":428,"tag":453,"props":3927,"children":3928},{"style":482},[3929],{"type":434,"value":538},{"type":428,"tag":453,"props":3931,"children":3932},{"style":476},[3933],{"type":434,"value":2366},{"type":428,"tag":453,"props":3935,"children":3936},{"style":524},[3937],{"type":434,"value":1961},{"type":428,"tag":453,"props":3939,"children":3941},{"class":455,"line":3940},43,[3942],{"type":428,"tag":453,"props":3943,"children":3944},{"style":482},[3945],{"type":434,"value":1177},{"type":428,"tag":429,"props":3947,"children":3949},{"id":3948},"工具函数",[3950],{"type":434,"value":3948},{"type":428,"tag":436,"props":3952,"children":3953},{},[3954],{"type":434,"value":3955},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":428,"tag":442,"props":3957,"children":3959},{"className":444,"code":3958,"language":446,"meta":421,"style":421},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3960],{"type":428,"tag":449,"props":3961,"children":3962},{"__ignoreMap":421},[3963,3991,4054,4095,4106],{"type":428,"tag":453,"props":3964,"children":3965},{"class":455,"line":456},[3966,3970,3974,3978,3983,3987],{"type":428,"tag":453,"props":3967,"children":3968},{"style":470},[3969],{"type":434,"value":473},{"type":428,"tag":453,"props":3971,"children":3972},{"style":476},[3973],{"type":434,"value":3834},{"type":428,"tag":453,"props":3975,"children":3976},{"style":482},[3977],{"type":434,"value":485},{"type":428,"tag":453,"props":3979,"children":3980},{"style":488},[3981],{"type":434,"value":3982},"arr",{"type":428,"tag":453,"props":3984,"children":3985},{"style":482},[3986],{"type":434,"value":506},{"type":428,"tag":453,"props":3988,"children":3989},{"style":482},[3990],{"type":434,"value":511},{"type":428,"tag":453,"props":3992,"children":3993},{"class":455,"line":466},[3994,3998,4003,4007,4012,4016,4020,4024,4029,4033,4038,4042,4046,4050],{"type":428,"tag":453,"props":3995,"children":3996},{"style":518},[3997],{"type":434,"value":2777},{"type":428,"tag":453,"props":3999,"children":4000},{"style":530},[4001],{"type":434,"value":4002}," arr",{"type":428,"tag":453,"props":4004,"children":4005},{"style":482},[4006],{"type":434,"value":538},{"type":428,"tag":453,"props":4008,"children":4009},{"style":476},[4010],{"type":434,"value":4011},"filter",{"type":428,"tag":453,"props":4013,"children":4014},{"style":524},[4015],{"type":434,"value":485},{"type":428,"tag":453,"props":4017,"children":4018},{"style":470},[4019],{"type":434,"value":473},{"type":428,"tag":453,"props":4021,"children":4022},{"style":482},[4023],{"type":434,"value":485},{"type":428,"tag":453,"props":4025,"children":4026},{"style":488},[4027],{"type":434,"value":4028},"v",{"type":428,"tag":453,"props":4030,"children":4031},{"style":482},[4032],{"type":434,"value":496},{"type":428,"tag":453,"props":4034,"children":4035},{"style":488},[4036],{"type":434,"value":4037}," i",{"type":428,"tag":453,"props":4039,"children":4040},{"style":482},[4041],{"type":434,"value":496},{"type":428,"tag":453,"props":4043,"children":4044},{"style":488},[4045],{"type":434,"value":2415},{"type":428,"tag":453,"props":4047,"children":4048},{"style":482},[4049],{"type":434,"value":506},{"type":428,"tag":453,"props":4051,"children":4052},{"style":482},[4053],{"type":434,"value":511},{"type":428,"tag":453,"props":4055,"children":4056},{"class":455,"line":514},[4057,4061,4065,4069,4074,4078,4082,4086,4090],{"type":428,"tag":453,"props":4058,"children":4059},{"style":518},[4060],{"type":434,"value":1823},{"type":428,"tag":453,"props":4062,"children":4063},{"style":530},[4064],{"type":434,"value":2415},{"type":428,"tag":453,"props":4066,"children":4067},{"style":482},[4068],{"type":434,"value":538},{"type":428,"tag":453,"props":4070,"children":4071},{"style":476},[4072],{"type":434,"value":4073},"indexOf",{"type":428,"tag":453,"props":4075,"children":4076},{"style":524},[4077],{"type":434,"value":485},{"type":428,"tag":453,"props":4079,"children":4080},{"style":530},[4081],{"type":434,"value":4028},{"type":428,"tag":453,"props":4083,"children":4084},{"style":524},[4085],{"type":434,"value":939},{"type":428,"tag":453,"props":4087,"children":4088},{"style":1015},[4089],{"type":434,"value":1395},{"type":428,"tag":453,"props":4091,"children":4092},{"style":530},[4093],{"type":434,"value":4094}," i\n",{"type":428,"tag":453,"props":4096,"children":4097},{"class":455,"line":564},[4098,4102],{"type":428,"tag":453,"props":4099,"children":4100},{"style":482},[4101],{"type":434,"value":1459},{"type":428,"tag":453,"props":4103,"children":4104},{"style":524},[4105],{"type":434,"value":645},{"type":428,"tag":453,"props":4107,"children":4108},{"class":455,"line":616},[4109],{"type":428,"tag":453,"props":4110,"children":4111},{"style":482},[4112],{"type":434,"value":1177},{"type":428,"tag":436,"props":4114,"children":4115},{},[4116],{"type":434,"value":4117},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":428,"tag":442,"props":4119,"children":4121},{"className":444,"code":4120,"language":446,"meta":421,"style":421},"const getUUID = () => Math.random().toString(16).substr(2)\n",[4122],{"type":428,"tag":449,"props":4123,"children":4124},{"__ignoreMap":421},[4125],{"type":428,"tag":453,"props":4126,"children":4127},{"class":455,"line":456},[4128,4133,4139,4143,4148,4153,4158,4162,4167,4171,4175,4180,4184,4189,4193,4197,4202,4206,4211],{"type":428,"tag":453,"props":4129,"children":4130},{"style":470},[4131],{"type":434,"value":4132},"const",{"type":428,"tag":453,"props":4134,"children":4136},{"style":4135},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4137],{"type":434,"value":4138}," getUUID",{"type":428,"tag":453,"props":4140,"children":4141},{"style":1015},[4142],{"type":434,"value":1018},{"type":428,"tag":453,"props":4144,"children":4145},{"style":482},[4146],{"type":434,"value":4147}," ()",{"type":428,"tag":453,"props":4149,"children":4150},{"style":470},[4151],{"type":434,"value":4152}," =>",{"type":428,"tag":453,"props":4154,"children":4155},{"style":530},[4156],{"type":434,"value":4157}," Math",{"type":428,"tag":453,"props":4159,"children":4160},{"style":482},[4161],{"type":434,"value":538},{"type":428,"tag":453,"props":4163,"children":4164},{"style":476},[4165],{"type":434,"value":4166},"random",{"type":428,"tag":453,"props":4168,"children":4169},{"style":530},[4170],{"type":434,"value":1936},{"type":428,"tag":453,"props":4172,"children":4173},{"style":482},[4174],{"type":434,"value":538},{"type":428,"tag":453,"props":4176,"children":4177},{"style":476},[4178],{"type":434,"value":4179},"toString",{"type":428,"tag":453,"props":4181,"children":4182},{"style":530},[4183],{"type":434,"value":485},{"type":428,"tag":453,"props":4185,"children":4186},{"style":2044},[4187],{"type":434,"value":4188},"16",{"type":428,"tag":453,"props":4190,"children":4191},{"style":530},[4192],{"type":434,"value":506},{"type":428,"tag":453,"props":4194,"children":4195},{"style":482},[4196],{"type":434,"value":538},{"type":428,"tag":453,"props":4198,"children":4199},{"style":476},[4200],{"type":434,"value":4201},"substr",{"type":428,"tag":453,"props":4203,"children":4204},{"style":530},[4205],{"type":434,"value":485},{"type":428,"tag":453,"props":4207,"children":4208},{"style":2044},[4209],{"type":434,"value":4210},"2",{"type":428,"tag":453,"props":4212,"children":4213},{"style":530},[4214],{"type":434,"value":645},{"type":428,"tag":429,"props":4216,"children":4218},{"id":4217},"考虑的点",[4219],{"type":434,"value":4217},{"type":428,"tag":436,"props":4221,"children":4222},{},[4223],{"type":434,"value":4224},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":428,"tag":4226,"props":4227,"children":4228},"ul",{},[4229,4235,4240,4245],{"type":428,"tag":4230,"props":4231,"children":4232},"li",{},[4233],{"type":434,"value":4234},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":428,"tag":4230,"props":4236,"children":4237},{},[4238],{"type":434,"value":4239},"支持本地符号路径吗？支持网络路径吗？",{"type":428,"tag":4230,"props":4241,"children":4242},{},[4243],{"type":434,"value":4244},"如何控制包的大小？",{"type":428,"tag":4230,"props":4246,"children":4247},{},[4248],{"type":434,"value":4249},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":428,"tag":436,"props":4251,"children":4252},{},[4253],{"type":434,"value":4254},"也注意到一些有意思的问题：",{"type":428,"tag":4226,"props":4256,"children":4257},{},[4258,4270,4282],{"type":428,"tag":4230,"props":4259,"children":4260},{},[4261,4263],{"type":434,"value":4262},"Windows，删除正在监听的文件夹，",{"type":428,"tag":1184,"props":4264,"children":4267},{"href":4265,"rel":4266},"https://github.com/nodejs/node/issues/31702",[1188],[4268],{"type":434,"value":4269},"会发生什么事情？",{"type":428,"tag":4230,"props":4271,"children":4272},{},[4273,4275],{"type":434,"value":4274},"Linux，单个进程能操作的文件数量有上限，",{"type":428,"tag":1184,"props":4276,"children":4279},{"href":4277,"rel":4278},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[1188],[4280],{"type":434,"value":4281},"该怎么解决？",{"type":428,"tag":4230,"props":4283,"children":4284},{},[4285,4287],{"type":434,"value":4286},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":428,"tag":1184,"props":4288,"children":4291},{"href":4289,"rel":4290},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[1188],[4292],{"type":434,"value":4293},"怎么处理呢？",{"type":428,"tag":429,"props":4295,"children":4297},{"id":4296},"题外话",[4298],{"type":434,"value":4296},{"type":428,"tag":4300,"props":4301,"children":4304},"l-link",{"label":4302,"source":4303},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":428,"tag":436,"props":4306,"children":4307},{},[4308],{"type":434,"value":4309},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":428,"tag":429,"props":4311,"children":4313},{"id":4312},"其它资料",[4314],{"type":434,"value":4312},{"type":428,"tag":436,"props":4316,"children":4317},{},[4318],{"type":434,"value":4319},"相关类库：",{"type":428,"tag":4226,"props":4321,"children":4322},{},[4323,4332,4342],{"type":428,"tag":4230,"props":4324,"children":4325},{},[4326],{"type":428,"tag":1184,"props":4327,"children":4330},{"href":4328,"rel":4329},"https://www.npmjs.com/package/watcher",[1188],[4331],{"type":434,"value":2066},{"type":428,"tag":4230,"props":4333,"children":4334},{},[4335],{"type":428,"tag":1184,"props":4336,"children":4339},{"href":4337,"rel":4338},"https://github.com/paulmillr/chokidar",[1188],[4340],{"type":434,"value":4341},"chokidar",{"type":428,"tag":4230,"props":4343,"children":4344},{},[4345],{"type":428,"tag":1184,"props":4346,"children":4349},{"href":4347,"rel":4348},"https://github.com/Axosoft/nsfw",[1188],[4350],{"type":434,"value":4351},"nsfw",{"type":428,"tag":436,"props":4353,"children":4354},{},[4355],{"type":434,"value":4356},"推荐阅读：",{"type":428,"tag":4226,"props":4358,"children":4359},{},[4360,4370],{"type":428,"tag":4230,"props":4361,"children":4362},{},[4363],{"type":428,"tag":1184,"props":4364,"children":4367},{"href":4365,"rel":4366},"https://juejin.cn/post/7000262974430511117",[1188],[4368],{"type":434,"value":4369},"《node-watch、Chokidar封装思路解析》",{"type":428,"tag":4230,"props":4371,"children":4372},{},[4373],{"type":428,"tag":1184,"props":4374,"children":4377},{"href":4375,"rel":4376},"https://www.jianshu.com/p/09dae09457fa",[1188],[4378],{"type":434,"value":4379},"《如何利用 Nodejs 监听文件夹》",{"type":428,"tag":4381,"props":4382,"children":4383},"style",{},[4384],{"type":434,"value":4385},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":421,"searchDepth":466,"depth":466,"links":4387},[4388,4389,4390,4391,4392],{"id":431,"depth":466,"text":431},{"id":3948,"depth":466,"text":3948},{"id":4217,"depth":466,"text":4217},{"id":4296,"depth":466,"text":4296},{"id":4312,"depth":466,"text":4312},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","8.source-code/_node/node-watch","md",[4400,4404],{"_path":4401,"title":4402,"description":4403},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4405,"title":4406,"description":421},"/source-code/_ts/type-challenges","TypeScript Type Chanllenges",1738603237792]