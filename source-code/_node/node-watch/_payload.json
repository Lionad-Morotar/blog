[{"data":1,"prerenderedAt":4150},["ShallowReactive",2],{"navigation":3,"/source-code/_node/node-watch":158,"/source-code/_node/node-watch-surround":4141},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":4135,"_id":4136,"_source":4137,"_file":4138,"_stem":4139,"_extension":4140},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":167,"children":168,"toc":4128},"root",[169,177,183,920,936,1213,1218,1395,1400,2070,2075,2532,2537,3688,3693,3698,3855,3860,3957,3962,3967,3992,3997,4036,4041,4047,4052,4057,4062,4094,4099,4122],{"type":170,"tag":171,"props":172,"children":174},"element","h2",{"id":173},"实现",[175],{"type":176,"value":173},"text",{"type":170,"tag":178,"props":179,"children":180},"p",{},[181],{"type":176,"value":182},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":170,"tag":184,"props":185,"children":189},"pre",{"className":186,"code":187,"language":188,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[190],{"type":170,"tag":191,"props":192,"children":193},"code",{"__ignoreMap":163},[194,206,254,304,356,388,401,410,419,460,518,543,581,590,602,660,692,741,795,839,868,877,890,903,911],{"type":170,"tag":195,"props":196,"children":199},"span",{"class":197,"line":198},"line",1,[200],{"type":170,"tag":195,"props":201,"children":203},{"style":202},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[204],{"type":176,"value":205},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":170,"tag":195,"props":207,"children":209},{"class":197,"line":208},2,[210,216,222,228,234,239,244,249],{"type":170,"tag":195,"props":211,"children":213},{"style":212},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[214],{"type":176,"value":215},"function",{"type":170,"tag":195,"props":217,"children":219},{"style":218},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[220],{"type":176,"value":221}," watch",{"type":170,"tag":195,"props":223,"children":225},{"style":224},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[226],{"type":176,"value":227},"(",{"type":170,"tag":195,"props":229,"children":231},{"style":230},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[232],{"type":176,"value":233},"dir",{"type":170,"tag":195,"props":235,"children":236},{"style":224},[237],{"type":176,"value":238},",",{"type":170,"tag":195,"props":240,"children":241},{"style":230},[242],{"type":176,"value":243}," cb",{"type":170,"tag":195,"props":245,"children":246},{"style":224},[247],{"type":176,"value":248},")",{"type":170,"tag":195,"props":250,"children":251},{"style":224},[252],{"type":176,"value":253}," {\n",{"type":170,"tag":195,"props":255,"children":257},{"class":197,"line":256},3,[258,264,270,276,281,286,290,294,299],{"type":170,"tag":195,"props":259,"children":261},{"style":260},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[262],{"type":176,"value":263},"  if",{"type":170,"tag":195,"props":265,"children":267},{"style":266},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[268],{"type":176,"value":269}," (",{"type":170,"tag":195,"props":271,"children":273},{"style":272},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[274],{"type":176,"value":275},"is",{"type":170,"tag":195,"props":277,"children":278},{"style":224},[279],{"type":176,"value":280},".",{"type":170,"tag":195,"props":282,"children":283},{"style":218},[284],{"type":176,"value":285},"File",{"type":170,"tag":195,"props":287,"children":288},{"style":266},[289],{"type":176,"value":227},{"type":170,"tag":195,"props":291,"children":292},{"style":272},[293],{"type":176,"value":233},{"type":170,"tag":195,"props":295,"children":296},{"style":266},[297],{"type":176,"value":298},")) ",{"type":170,"tag":195,"props":300,"children":301},{"style":224},[302],{"type":176,"value":303},"{\n",{"type":170,"tag":195,"props":305,"children":307},{"class":197,"line":306},4,[308,313,317,322,326,330,334,339,343,348,352],{"type":170,"tag":195,"props":309,"children":310},{"style":272},[311],{"type":176,"value":312},"    fs",{"type":170,"tag":195,"props":314,"children":315},{"style":224},[316],{"type":176,"value":280},{"type":170,"tag":195,"props":318,"children":319},{"style":218},[320],{"type":176,"value":321},"watchFile",{"type":170,"tag":195,"props":323,"children":324},{"style":266},[325],{"type":176,"value":227},{"type":170,"tag":195,"props":327,"children":328},{"style":272},[329],{"type":176,"value":233},{"type":170,"tag":195,"props":331,"children":332},{"style":224},[333],{"type":176,"value":238},{"type":170,"tag":195,"props":335,"children":336},{"style":212},[337],{"type":176,"value":338}," function",{"type":170,"tag":195,"props":340,"children":341},{"style":224},[342],{"type":176,"value":227},{"type":170,"tag":195,"props":344,"children":345},{"style":230},[346],{"type":176,"value":347},"err",{"type":170,"tag":195,"props":349,"children":350},{"style":224},[351],{"type":176,"value":248},{"type":170,"tag":195,"props":353,"children":354},{"style":224},[355],{"type":176,"value":253},{"type":170,"tag":195,"props":357,"children":359},{"class":197,"line":358},5,[360,365,369,374,378,383],{"type":170,"tag":195,"props":361,"children":362},{"style":218},[363],{"type":176,"value":364},"      normalizeCall",{"type":170,"tag":195,"props":366,"children":367},{"style":266},[368],{"type":176,"value":227},{"type":170,"tag":195,"props":370,"children":371},{"style":272},[372],{"type":176,"value":373},"cb",{"type":170,"tag":195,"props":375,"children":376},{"style":224},[377],{"type":176,"value":238},{"type":170,"tag":195,"props":379,"children":380},{"style":272},[381],{"type":176,"value":382}," dir",{"type":170,"tag":195,"props":384,"children":385},{"style":266},[386],{"type":176,"value":387},")\n",{"type":170,"tag":195,"props":389,"children":391},{"class":197,"line":390},6,[392,397],{"type":170,"tag":195,"props":393,"children":394},{"style":224},[395],{"type":176,"value":396},"    }",{"type":170,"tag":195,"props":398,"children":399},{"style":266},[400],{"type":176,"value":387},{"type":170,"tag":195,"props":402,"children":404},{"class":197,"line":403},7,[405],{"type":170,"tag":195,"props":406,"children":407},{"style":260},[408],{"type":176,"value":409},"    return\n",{"type":170,"tag":195,"props":411,"children":413},{"class":197,"line":412},8,[414],{"type":170,"tag":195,"props":415,"children":416},{"style":224},[417],{"type":176,"value":418},"  }\n",{"type":170,"tag":195,"props":420,"children":422},{"class":197,"line":421},9,[423,427,431,435,439,444,448,452,456],{"type":170,"tag":195,"props":424,"children":425},{"style":260},[426],{"type":176,"value":263},{"type":170,"tag":195,"props":428,"children":429},{"style":266},[430],{"type":176,"value":269},{"type":170,"tag":195,"props":432,"children":433},{"style":272},[434],{"type":176,"value":275},{"type":170,"tag":195,"props":436,"children":437},{"style":224},[438],{"type":176,"value":280},{"type":170,"tag":195,"props":440,"children":441},{"style":218},[442],{"type":176,"value":443},"Directory",{"type":170,"tag":195,"props":445,"children":446},{"style":266},[447],{"type":176,"value":227},{"type":170,"tag":195,"props":449,"children":450},{"style":272},[451],{"type":176,"value":233},{"type":170,"tag":195,"props":453,"children":454},{"style":266},[455],{"type":176,"value":298},{"type":170,"tag":195,"props":457,"children":458},{"style":224},[459],{"type":176,"value":303},{"type":170,"tag":195,"props":461,"children":463},{"class":197,"line":462},10,[464,468,472,477,481,485,489,493,497,501,505,510,514],{"type":170,"tag":195,"props":465,"children":466},{"style":272},[467],{"type":176,"value":312},{"type":170,"tag":195,"props":469,"children":470},{"style":224},[471],{"type":176,"value":280},{"type":170,"tag":195,"props":473,"children":474},{"style":218},[475],{"type":176,"value":476},"watch",{"type":170,"tag":195,"props":478,"children":479},{"style":266},[480],{"type":176,"value":227},{"type":170,"tag":195,"props":482,"children":483},{"style":272},[484],{"type":176,"value":233},{"type":170,"tag":195,"props":486,"children":487},{"style":224},[488],{"type":176,"value":238},{"type":170,"tag":195,"props":490,"children":491},{"style":212},[492],{"type":176,"value":338},{"type":170,"tag":195,"props":494,"children":495},{"style":224},[496],{"type":176,"value":227},{"type":170,"tag":195,"props":498,"children":499},{"style":230},[500],{"type":176,"value":347},{"type":170,"tag":195,"props":502,"children":503},{"style":224},[504],{"type":176,"value":238},{"type":170,"tag":195,"props":506,"children":507},{"style":230},[508],{"type":176,"value":509}," fname",{"type":170,"tag":195,"props":511,"children":512},{"style":224},[513],{"type":176,"value":248},{"type":170,"tag":195,"props":515,"children":516},{"style":224},[517],{"type":176,"value":253},{"type":170,"tag":195,"props":519,"children":521},{"class":197,"line":520},11,[522,526,530,534,538],{"type":170,"tag":195,"props":523,"children":524},{"style":218},[525],{"type":176,"value":364},{"type":170,"tag":195,"props":527,"children":528},{"style":266},[529],{"type":176,"value":227},{"type":170,"tag":195,"props":531,"children":532},{"style":272},[533],{"type":176,"value":373},{"type":170,"tag":195,"props":535,"children":536},{"style":224},[537],{"type":176,"value":238},{"type":170,"tag":195,"props":539,"children":540},{"style":266},[541],{"type":176,"value":542},"  \n",{"type":170,"tag":195,"props":544,"children":546},{"class":197,"line":545},12,[547,552,556,561,565,569,573,577],{"type":170,"tag":195,"props":548,"children":549},{"style":272},[550],{"type":176,"value":551},"        path",{"type":170,"tag":195,"props":553,"children":554},{"style":224},[555],{"type":176,"value":280},{"type":170,"tag":195,"props":557,"children":558},{"style":218},[559],{"type":176,"value":560},"join",{"type":170,"tag":195,"props":562,"children":563},{"style":266},[564],{"type":176,"value":227},{"type":170,"tag":195,"props":566,"children":567},{"style":272},[568],{"type":176,"value":233},{"type":170,"tag":195,"props":570,"children":571},{"style":224},[572],{"type":176,"value":238},{"type":170,"tag":195,"props":574,"children":575},{"style":272},[576],{"type":176,"value":509},{"type":170,"tag":195,"props":578,"children":579},{"style":266},[580],{"type":176,"value":387},{"type":170,"tag":195,"props":582,"children":584},{"class":197,"line":583},13,[585],{"type":170,"tag":195,"props":586,"children":587},{"style":266},[588],{"type":176,"value":589},"      )\n",{"type":170,"tag":195,"props":591,"children":593},{"class":197,"line":592},14,[594,598],{"type":170,"tag":195,"props":595,"children":596},{"style":224},[597],{"type":176,"value":396},{"type":170,"tag":195,"props":599,"children":600},{"style":266},[601],{"type":176,"value":387},{"type":170,"tag":195,"props":603,"children":605},{"class":197,"line":604},15,[606,610,614,619,623,627,631,635,639,643,647,652,656],{"type":170,"tag":195,"props":607,"children":608},{"style":272},[609],{"type":176,"value":312},{"type":170,"tag":195,"props":611,"children":612},{"style":224},[613],{"type":176,"value":280},{"type":170,"tag":195,"props":615,"children":616},{"style":218},[617],{"type":176,"value":618},"readdir",{"type":170,"tag":195,"props":620,"children":621},{"style":266},[622],{"type":176,"value":227},{"type":170,"tag":195,"props":624,"children":625},{"style":272},[626],{"type":176,"value":233},{"type":170,"tag":195,"props":628,"children":629},{"style":224},[630],{"type":176,"value":238},{"type":170,"tag":195,"props":632,"children":633},{"style":212},[634],{"type":176,"value":338},{"type":170,"tag":195,"props":636,"children":637},{"style":224},[638],{"type":176,"value":227},{"type":170,"tag":195,"props":640,"children":641},{"style":230},[642],{"type":176,"value":347},{"type":170,"tag":195,"props":644,"children":645},{"style":224},[646],{"type":176,"value":238},{"type":170,"tag":195,"props":648,"children":649},{"style":230},[650],{"type":176,"value":651}," files",{"type":170,"tag":195,"props":653,"children":654},{"style":224},[655],{"type":176,"value":248},{"type":170,"tag":195,"props":657,"children":658},{"style":224},[659],{"type":176,"value":253},{"type":170,"tag":195,"props":661,"children":663},{"class":197,"line":662},16,[664,669,673,677,682,687],{"type":170,"tag":195,"props":665,"children":666},{"style":260},[667],{"type":176,"value":668},"      if",{"type":170,"tag":195,"props":670,"children":671},{"style":266},[672],{"type":176,"value":269},{"type":170,"tag":195,"props":674,"children":675},{"style":272},[676],{"type":176,"value":347},{"type":170,"tag":195,"props":678,"children":679},{"style":266},[680],{"type":176,"value":681},") ",{"type":170,"tag":195,"props":683,"children":684},{"style":260},[685],{"type":176,"value":686},"throw",{"type":170,"tag":195,"props":688,"children":689},{"style":272},[690],{"type":176,"value":691}," err\n",{"type":170,"tag":195,"props":693,"children":695},{"class":197,"line":694},17,[696,701,705,710,714,718,722,727,731,736],{"type":170,"tag":195,"props":697,"children":698},{"style":272},[699],{"type":176,"value":700},"      files",{"type":170,"tag":195,"props":702,"children":703},{"style":224},[704],{"type":176,"value":280},{"type":170,"tag":195,"props":706,"children":707},{"style":218},[708],{"type":176,"value":709},"forEach",{"type":170,"tag":195,"props":711,"children":712},{"style":266},[713],{"type":176,"value":227},{"type":170,"tag":195,"props":715,"children":716},{"style":212},[717],{"type":176,"value":215},{"type":170,"tag":195,"props":719,"children":720},{"style":224},[721],{"type":176,"value":227},{"type":170,"tag":195,"props":723,"children":724},{"style":230},[725],{"type":176,"value":726},"n",{"type":170,"tag":195,"props":728,"children":729},{"style":224},[730],{"type":176,"value":248},{"type":170,"tag":195,"props":732,"children":733},{"style":224},[734],{"type":176,"value":735}," {",{"type":170,"tag":195,"props":737,"children":738},{"style":266},[739],{"type":176,"value":740}," \n",{"type":170,"tag":195,"props":742,"children":744},{"class":197,"line":743},18,[745,750,755,761,766,770,774,778,782,786,791],{"type":170,"tag":195,"props":746,"children":747},{"style":212},[748],{"type":176,"value":749},"        var",{"type":170,"tag":195,"props":751,"children":752},{"style":272},[753],{"type":176,"value":754}," file",{"type":170,"tag":195,"props":756,"children":758},{"style":757},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[759],{"type":176,"value":760}," =",{"type":170,"tag":195,"props":762,"children":763},{"style":272},[764],{"type":176,"value":765}," path",{"type":170,"tag":195,"props":767,"children":768},{"style":224},[769],{"type":176,"value":280},{"type":170,"tag":195,"props":771,"children":772},{"style":218},[773],{"type":176,"value":560},{"type":170,"tag":195,"props":775,"children":776},{"style":266},[777],{"type":176,"value":227},{"type":170,"tag":195,"props":779,"children":780},{"style":272},[781],{"type":176,"value":233},{"type":170,"tag":195,"props":783,"children":784},{"style":224},[785],{"type":176,"value":238},{"type":170,"tag":195,"props":787,"children":788},{"style":272},[789],{"type":176,"value":790}," n",{"type":170,"tag":195,"props":792,"children":793},{"style":266},[794],{"type":176,"value":387},{"type":170,"tag":195,"props":796,"children":798},{"class":197,"line":797},19,[799,804,809,813,817,821,825,830,835],{"type":170,"tag":195,"props":800,"children":801},{"style":260},[802],{"type":176,"value":803},"        if",{"type":170,"tag":195,"props":805,"children":806},{"style":266},[807],{"type":176,"value":808}," ( ",{"type":170,"tag":195,"props":810,"children":811},{"style":272},[812],{"type":176,"value":275},{"type":170,"tag":195,"props":814,"children":815},{"style":224},[816],{"type":176,"value":280},{"type":170,"tag":195,"props":818,"children":819},{"style":218},[820],{"type":176,"value":443},{"type":170,"tag":195,"props":822,"children":823},{"style":266},[824],{"type":176,"value":227},{"type":170,"tag":195,"props":826,"children":827},{"style":272},[828],{"type":176,"value":829},"file",{"type":170,"tag":195,"props":831,"children":832},{"style":266},[833],{"type":176,"value":834},") ) ",{"type":170,"tag":195,"props":836,"children":837},{"style":224},[838],{"type":176,"value":303},{"type":170,"tag":195,"props":840,"children":842},{"class":197,"line":841},20,[843,848,852,856,860,864],{"type":170,"tag":195,"props":844,"children":845},{"style":218},[846],{"type":176,"value":847},"          watch",{"type":170,"tag":195,"props":849,"children":850},{"style":266},[851],{"type":176,"value":227},{"type":170,"tag":195,"props":853,"children":854},{"style":272},[855],{"type":176,"value":829},{"type":170,"tag":195,"props":857,"children":858},{"style":224},[859],{"type":176,"value":238},{"type":170,"tag":195,"props":861,"children":862},{"style":272},[863],{"type":176,"value":243},{"type":170,"tag":195,"props":865,"children":866},{"style":266},[867],{"type":176,"value":387},{"type":170,"tag":195,"props":869,"children":871},{"class":197,"line":870},21,[872],{"type":170,"tag":195,"props":873,"children":874},{"style":224},[875],{"type":176,"value":876},"        }\n",{"type":170,"tag":195,"props":878,"children":880},{"class":197,"line":879},22,[881,886],{"type":170,"tag":195,"props":882,"children":883},{"style":224},[884],{"type":176,"value":885},"      }",{"type":170,"tag":195,"props":887,"children":888},{"style":266},[889],{"type":176,"value":387},{"type":170,"tag":195,"props":891,"children":893},{"class":197,"line":892},23,[894,898],{"type":170,"tag":195,"props":895,"children":896},{"style":224},[897],{"type":176,"value":396},{"type":170,"tag":195,"props":899,"children":900},{"style":266},[901],{"type":176,"value":902},")     \n",{"type":170,"tag":195,"props":904,"children":906},{"class":197,"line":905},24,[907],{"type":170,"tag":195,"props":908,"children":909},{"style":224},[910],{"type":176,"value":418},{"type":170,"tag":195,"props":912,"children":914},{"class":197,"line":913},25,[915],{"type":170,"tag":195,"props":916,"children":917},{"style":224},[918],{"type":176,"value":919},"}\n",{"type":170,"tag":178,"props":921,"children":922},{},[923,925,934],{"type":176,"value":924},"由于 fs.watchFile 可能导致",{"type":170,"tag":926,"props":927,"children":931},"a",{"href":928,"rel":929},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[930],"nofollow",[932],{"type":176,"value":933},"高 CPU 负载等问题",{"type":176,"value":935},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":170,"tag":184,"props":937,"children":939},{"className":186,"code":938,"language":188,"meta":163,"style":163},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[940],{"type":170,"tag":191,"props":941,"children":942},{"__ignoreMap":163},[943,973,1037,1095,1150,1186,1194,1206],{"type":170,"tag":195,"props":944,"children":945},{"class":197,"line":198},[946,951,956,960,964,969],{"type":170,"tag":195,"props":947,"children":948},{"style":260},[949],{"type":176,"value":950},"if",{"type":170,"tag":195,"props":952,"children":953},{"style":272},[954],{"type":176,"value":955}," (is",{"type":170,"tag":195,"props":957,"children":958},{"style":224},[959],{"type":176,"value":280},{"type":170,"tag":195,"props":961,"children":962},{"style":218},[963],{"type":176,"value":829},{"type":170,"tag":195,"props":965,"children":966},{"style":272},[967],{"type":176,"value":968},"(fpath)) ",{"type":170,"tag":195,"props":970,"children":971},{"style":224},[972],{"type":176,"value":303},{"type":170,"tag":195,"props":974,"children":975},{"class":197,"line":208},[976,981,986,990,994,998,1003,1007,1012,1016,1022,1028,1033],{"type":170,"tag":195,"props":977,"children":978},{"style":212},[979],{"type":176,"value":980},"  var",{"type":170,"tag":195,"props":982,"children":983},{"style":272},[984],{"type":176,"value":985}," parent",{"type":170,"tag":195,"props":987,"children":988},{"style":757},[989],{"type":176,"value":760},{"type":170,"tag":195,"props":991,"children":992},{"style":272},[993],{"type":176,"value":765},{"type":170,"tag":195,"props":995,"children":996},{"style":224},[997],{"type":176,"value":280},{"type":170,"tag":195,"props":999,"children":1000},{"style":218},[1001],{"type":176,"value":1002},"resolve",{"type":170,"tag":195,"props":1004,"children":1005},{"style":266},[1006],{"type":176,"value":227},{"type":170,"tag":195,"props":1008,"children":1009},{"style":272},[1010],{"type":176,"value":1011},"fpath",{"type":170,"tag":195,"props":1013,"children":1014},{"style":224},[1015],{"type":176,"value":238},{"type":170,"tag":195,"props":1017,"children":1019},{"style":1018},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1020],{"type":176,"value":1021}," '",{"type":170,"tag":195,"props":1023,"children":1025},{"style":1024},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1026],{"type":176,"value":1027},"..",{"type":170,"tag":195,"props":1029,"children":1030},{"style":1018},[1031],{"type":176,"value":1032},"'",{"type":170,"tag":195,"props":1034,"children":1035},{"style":266},[1036],{"type":176,"value":387},{"type":170,"tag":195,"props":1038,"children":1039},{"class":197,"line":256},[1040,1045,1049,1053,1057,1062,1066,1070,1074,1079,1083,1087,1091],{"type":170,"tag":195,"props":1041,"children":1042},{"style":272},[1043],{"type":176,"value":1044},"  fs",{"type":170,"tag":195,"props":1046,"children":1047},{"style":224},[1048],{"type":176,"value":280},{"type":170,"tag":195,"props":1050,"children":1051},{"style":218},[1052],{"type":176,"value":476},{"type":170,"tag":195,"props":1054,"children":1055},{"style":266},[1056],{"type":176,"value":227},{"type":170,"tag":195,"props":1058,"children":1059},{"style":272},[1060],{"type":176,"value":1061},"parent",{"type":170,"tag":195,"props":1063,"children":1064},{"style":224},[1065],{"type":176,"value":238},{"type":170,"tag":195,"props":1067,"children":1068},{"style":212},[1069],{"type":176,"value":338},{"type":170,"tag":195,"props":1071,"children":1072},{"style":224},[1073],{"type":176,"value":227},{"type":170,"tag":195,"props":1075,"children":1076},{"style":230},[1077],{"type":176,"value":1078},"evt",{"type":170,"tag":195,"props":1080,"children":1081},{"style":224},[1082],{"type":176,"value":238},{"type":170,"tag":195,"props":1084,"children":1085},{"style":230},[1086],{"type":176,"value":509},{"type":170,"tag":195,"props":1088,"children":1089},{"style":224},[1090],{"type":176,"value":248},{"type":170,"tag":195,"props":1092,"children":1093},{"style":224},[1094],{"type":176,"value":253},{"type":170,"tag":195,"props":1096,"children":1097},{"class":197,"line":306},[1098,1103,1107,1112,1116,1121,1125,1129,1133,1138,1142,1146],{"type":170,"tag":195,"props":1099,"children":1100},{"style":260},[1101],{"type":176,"value":1102},"    if",{"type":170,"tag":195,"props":1104,"children":1105},{"style":266},[1106],{"type":176,"value":269},{"type":170,"tag":195,"props":1108,"children":1109},{"style":272},[1110],{"type":176,"value":1111},"path",{"type":170,"tag":195,"props":1113,"children":1114},{"style":224},[1115],{"type":176,"value":280},{"type":170,"tag":195,"props":1117,"children":1118},{"style":218},[1119],{"type":176,"value":1120},"basename",{"type":170,"tag":195,"props":1122,"children":1123},{"style":266},[1124],{"type":176,"value":227},{"type":170,"tag":195,"props":1126,"children":1127},{"style":272},[1128],{"type":176,"value":1011},{"type":170,"tag":195,"props":1130,"children":1131},{"style":266},[1132],{"type":176,"value":681},{"type":170,"tag":195,"props":1134,"children":1135},{"style":757},[1136],{"type":176,"value":1137},"===",{"type":170,"tag":195,"props":1139,"children":1140},{"style":272},[1141],{"type":176,"value":509},{"type":170,"tag":195,"props":1143,"children":1144},{"style":266},[1145],{"type":176,"value":681},{"type":170,"tag":195,"props":1147,"children":1148},{"style":224},[1149],{"type":176,"value":303},{"type":170,"tag":195,"props":1151,"children":1152},{"class":197,"line":358},[1153,1157,1161,1165,1169,1174,1178,1182],{"type":170,"tag":195,"props":1154,"children":1155},{"style":218},[1156],{"type":176,"value":364},{"type":170,"tag":195,"props":1158,"children":1159},{"style":266},[1160],{"type":176,"value":227},{"type":170,"tag":195,"props":1162,"children":1163},{"style":272},[1164],{"type":176,"value":1011},{"type":170,"tag":195,"props":1166,"children":1167},{"style":224},[1168],{"type":176,"value":238},{"type":170,"tag":195,"props":1170,"children":1171},{"style":272},[1172],{"type":176,"value":1173}," options",{"type":170,"tag":195,"props":1175,"children":1176},{"style":224},[1177],{"type":176,"value":238},{"type":170,"tag":195,"props":1179,"children":1180},{"style":272},[1181],{"type":176,"value":243},{"type":170,"tag":195,"props":1183,"children":1184},{"style":266},[1185],{"type":176,"value":387},{"type":170,"tag":195,"props":1187,"children":1188},{"class":197,"line":390},[1189],{"type":170,"tag":195,"props":1190,"children":1191},{"style":224},[1192],{"type":176,"value":1193},"    }\n",{"type":170,"tag":195,"props":1195,"children":1196},{"class":197,"line":403},[1197,1202],{"type":170,"tag":195,"props":1198,"children":1199},{"style":224},[1200],{"type":176,"value":1201},"  }",{"type":170,"tag":195,"props":1203,"children":1204},{"style":266},[1205],{"type":176,"value":387},{"type":170,"tag":195,"props":1207,"children":1208},{"class":197,"line":412},[1209],{"type":170,"tag":195,"props":1210,"children":1211},{"style":224},[1212],{"type":176,"value":919},{"type":170,"tag":178,"props":1214,"children":1215},{},[1216],{"type":176,"value":1217},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":170,"tag":184,"props":1219,"children":1221},{"className":186,"code":1220,"language":188,"meta":163,"style":163},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1222],{"type":170,"tag":191,"props":1223,"children":1224},{"__ignoreMap":163},[1225,1268,1305,1340,1374,1381,1388],{"type":170,"tag":195,"props":1226,"children":1227},{"class":197,"line":198},[1228,1232,1236,1240,1244,1248,1252,1256,1260,1264],{"type":170,"tag":195,"props":1229,"children":1230},{"style":212},[1231],{"type":176,"value":215},{"type":170,"tag":195,"props":1233,"children":1234},{"style":218},[1235],{"type":176,"value":221},{"type":170,"tag":195,"props":1237,"children":1238},{"style":224},[1239],{"type":176,"value":227},{"type":170,"tag":195,"props":1241,"children":1242},{"style":230},[1243],{"type":176,"value":1011},{"type":170,"tag":195,"props":1245,"children":1246},{"style":224},[1247],{"type":176,"value":238},{"type":170,"tag":195,"props":1249,"children":1250},{"style":230},[1251],{"type":176,"value":1173},{"type":170,"tag":195,"props":1253,"children":1254},{"style":224},[1255],{"type":176,"value":238},{"type":170,"tag":195,"props":1257,"children":1258},{"style":230},[1259],{"type":176,"value":243},{"type":170,"tag":195,"props":1261,"children":1262},{"style":224},[1263],{"type":176,"value":248},{"type":170,"tag":195,"props":1265,"children":1266},{"style":224},[1267],{"type":176,"value":253},{"type":170,"tag":195,"props":1269,"children":1270},{"class":197,"line":208},[1271,1275,1279,1283,1287,1292,1296,1300],{"type":170,"tag":195,"props":1272,"children":1273},{"style":260},[1274],{"type":176,"value":263},{"type":170,"tag":195,"props":1276,"children":1277},{"style":266},[1278],{"type":176,"value":269},{"type":170,"tag":195,"props":1280,"children":1281},{"style":272},[1282],{"type":176,"value":275},{"type":170,"tag":195,"props":1284,"children":1285},{"style":224},[1286],{"type":176,"value":280},{"type":170,"tag":195,"props":1288,"children":1289},{"style":218},[1290],{"type":176,"value":1291},"symbolic",{"type":170,"tag":195,"props":1293,"children":1294},{"style":266},[1295],{"type":176,"value":227},{"type":170,"tag":195,"props":1297,"children":1298},{"style":272},[1299],{"type":176,"value":1011},{"type":170,"tag":195,"props":1301,"children":1302},{"style":266},[1303],{"type":176,"value":1304},") \n",{"type":170,"tag":195,"props":1306,"children":1307},{"class":197,"line":256},[1308,1313,1318,1322,1327,1331,1336],{"type":170,"tag":195,"props":1309,"children":1310},{"style":757},[1311],{"type":176,"value":1312},"    &&",{"type":170,"tag":195,"props":1314,"children":1315},{"style":757},[1316],{"type":176,"value":1317}," !",{"type":170,"tag":195,"props":1319,"children":1320},{"style":266},[1321],{"type":176,"value":227},{"type":170,"tag":195,"props":1323,"children":1324},{"style":272},[1325],{"type":176,"value":1326},"options",{"type":170,"tag":195,"props":1328,"children":1329},{"style":224},[1330],{"type":176,"value":280},{"type":170,"tag":195,"props":1332,"children":1333},{"style":272},[1334],{"type":176,"value":1335},"followSymLinks",{"type":170,"tag":195,"props":1337,"children":1338},{"style":266},[1339],{"type":176,"value":740},{"type":170,"tag":195,"props":1341,"children":1342},{"class":197,"line":306},[1343,1348,1352,1356,1361,1366,1370],{"type":170,"tag":195,"props":1344,"children":1345},{"style":757},[1346],{"type":176,"value":1347},"      &&",{"type":170,"tag":195,"props":1349,"children":1350},{"style":272},[1351],{"type":176,"value":1173},{"type":170,"tag":195,"props":1353,"children":1354},{"style":224},[1355],{"type":176,"value":280},{"type":170,"tag":195,"props":1357,"children":1358},{"style":272},[1359],{"type":176,"value":1360},"maxSymLevel",{"type":170,"tag":195,"props":1362,"children":1363},{"style":757},[1364],{"type":176,"value":1365},"--",{"type":170,"tag":195,"props":1367,"children":1368},{"style":266},[1369],{"type":176,"value":298},{"type":170,"tag":195,"props":1371,"children":1372},{"style":224},[1373],{"type":176,"value":303},{"type":170,"tag":195,"props":1375,"children":1376},{"class":197,"line":358},[1377],{"type":170,"tag":195,"props":1378,"children":1379},{"style":260},[1380],{"type":176,"value":409},{"type":170,"tag":195,"props":1382,"children":1383},{"class":197,"line":390},[1384],{"type":170,"tag":195,"props":1385,"children":1386},{"style":224},[1387],{"type":176,"value":418},{"type":170,"tag":195,"props":1389,"children":1390},{"class":197,"line":403},[1391],{"type":170,"tag":195,"props":1392,"children":1393},{"style":224},[1394],{"type":176,"value":919},{"type":170,"tag":178,"props":1396,"children":1397},{},[1398],{"type":176,"value":1399},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":170,"tag":184,"props":1401,"children":1403},{"className":186,"code":1402,"language":188,"meta":163,"style":163},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1404],{"type":170,"tag":191,"props":1405,"children":1406},{"__ignoreMap":163},[1407,1421,1429,1441,1486,1508,1558,1594,1610,1623,1630,1637,1644,1683,1704,1737,1765,1776,1794,1801,1868,1936,1956,1977,2009,2038,2050,2058],{"type":170,"tag":195,"props":1408,"children":1409},{"class":197,"line":198},[1410,1415],{"type":170,"tag":195,"props":1411,"children":1412},{"style":212},[1413],{"type":176,"value":1414},"var",{"type":170,"tag":195,"props":1416,"children":1418},{"style":1417},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1419],{"type":176,"value":1420}," IS_SUPPORT\n",{"type":170,"tag":195,"props":1422,"children":1423},{"class":197,"line":208},[1424],{"type":170,"tag":195,"props":1425,"children":1426},{"emptyLinePlaceholder":162},[1427],{"type":176,"value":1428},"\n",{"type":170,"tag":195,"props":1430,"children":1431},{"class":197,"line":256},[1432,1437],{"type":170,"tag":195,"props":1433,"children":1434},{"style":260},[1435],{"type":176,"value":1436},"try",{"type":170,"tag":195,"props":1438,"children":1439},{"style":224},[1440],{"type":176,"value":253},{"type":170,"tag":195,"props":1442,"children":1443},{"class":197,"line":306},[1444,1449,1453,1458,1462,1466,1470,1474,1478,1482],{"type":170,"tag":195,"props":1445,"children":1446},{"style":272},[1447],{"type":176,"value":1448},"  watcher",{"type":170,"tag":195,"props":1450,"children":1451},{"style":757},[1452],{"type":176,"value":760},{"type":170,"tag":195,"props":1454,"children":1455},{"style":272},[1456],{"type":176,"value":1457}," fs",{"type":170,"tag":195,"props":1459,"children":1460},{"style":224},[1461],{"type":176,"value":280},{"type":170,"tag":195,"props":1463,"children":1464},{"style":218},[1465],{"type":176,"value":476},{"type":170,"tag":195,"props":1467,"children":1468},{"style":266},[1469],{"type":176,"value":227},{"type":170,"tag":195,"props":1471,"children":1472},{"style":272},[1473],{"type":176,"value":1061},{"type":170,"tag":195,"props":1475,"children":1476},{"style":224},[1477],{"type":176,"value":238},{"type":170,"tag":195,"props":1479,"children":1480},{"style":272},[1481],{"type":176,"value":1173},{"type":170,"tag":195,"props":1483,"children":1484},{"style":266},[1485],{"type":176,"value":387},{"type":170,"tag":195,"props":1487,"children":1488},{"class":197,"line":358},[1489,1494,1499,1504],{"type":170,"tag":195,"props":1490,"children":1491},{"style":224},[1492],{"type":176,"value":1493},"}",{"type":170,"tag":195,"props":1495,"children":1496},{"style":260},[1497],{"type":176,"value":1498}," catch",{"type":170,"tag":195,"props":1500,"children":1501},{"style":272},[1502],{"type":176,"value":1503}," (e) ",{"type":170,"tag":195,"props":1505,"children":1506},{"style":224},[1507],{"type":176,"value":303},{"type":170,"tag":195,"props":1509,"children":1510},{"class":197,"line":390},[1511,1515,1519,1524,1528,1532,1537,1541,1546,1550,1554],{"type":170,"tag":195,"props":1512,"children":1513},{"style":260},[1514],{"type":176,"value":263},{"type":170,"tag":195,"props":1516,"children":1517},{"style":266},[1518],{"type":176,"value":269},{"type":170,"tag":195,"props":1520,"children":1521},{"style":272},[1522],{"type":176,"value":1523},"e",{"type":170,"tag":195,"props":1525,"children":1526},{"style":224},[1527],{"type":176,"value":280},{"type":170,"tag":195,"props":1529,"children":1530},{"style":272},[1531],{"type":176,"value":191},{"type":170,"tag":195,"props":1533,"children":1534},{"style":757},[1535],{"type":176,"value":1536}," ==",{"type":170,"tag":195,"props":1538,"children":1539},{"style":1018},[1540],{"type":176,"value":1021},{"type":170,"tag":195,"props":1542,"children":1543},{"style":1024},[1544],{"type":176,"value":1545},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":170,"tag":195,"props":1547,"children":1548},{"style":1018},[1549],{"type":176,"value":1032},{"type":170,"tag":195,"props":1551,"children":1552},{"style":266},[1553],{"type":176,"value":681},{"type":170,"tag":195,"props":1555,"children":1556},{"style":224},[1557],{"type":176,"value":303},{"type":170,"tag":195,"props":1559,"children":1560},{"class":197,"line":403},[1561,1566,1571,1575,1580,1584,1590],{"type":170,"tag":195,"props":1562,"children":1563},{"style":260},[1564],{"type":176,"value":1565},"    return",{"type":170,"tag":195,"props":1567,"children":1568},{"style":218},[1569],{"type":176,"value":1570}," fn",{"type":170,"tag":195,"props":1572,"children":1573},{"style":266},[1574],{"type":176,"value":227},{"type":170,"tag":195,"props":1576,"children":1577},{"style":1417},[1578],{"type":176,"value":1579},"IS_SUPPORT",{"type":170,"tag":195,"props":1581,"children":1582},{"style":757},[1583],{"type":176,"value":760},{"type":170,"tag":195,"props":1585,"children":1587},{"style":1586},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1588],{"type":176,"value":1589}," false",{"type":170,"tag":195,"props":1591,"children":1592},{"style":266},[1593],{"type":176,"value":387},{"type":170,"tag":195,"props":1595,"children":1596},{"class":197,"line":412},[1597,1601,1606],{"type":170,"tag":195,"props":1598,"children":1599},{"style":224},[1600],{"type":176,"value":1201},{"type":170,"tag":195,"props":1602,"children":1603},{"style":260},[1604],{"type":176,"value":1605}," else",{"type":170,"tag":195,"props":1607,"children":1608},{"style":224},[1609],{"type":176,"value":253},{"type":170,"tag":195,"props":1611,"children":1612},{"class":197,"line":421},[1613,1618],{"type":170,"tag":195,"props":1614,"children":1615},{"style":260},[1616],{"type":176,"value":1617},"    throw",{"type":170,"tag":195,"props":1619,"children":1620},{"style":272},[1621],{"type":176,"value":1622}," e\n",{"type":170,"tag":195,"props":1624,"children":1625},{"class":197,"line":462},[1626],{"type":170,"tag":195,"props":1627,"children":1628},{"style":224},[1629],{"type":176,"value":418},{"type":170,"tag":195,"props":1631,"children":1632},{"class":197,"line":520},[1633],{"type":170,"tag":195,"props":1634,"children":1635},{"style":224},[1636],{"type":176,"value":919},{"type":170,"tag":195,"props":1638,"children":1639},{"class":197,"line":545},[1640],{"type":170,"tag":195,"props":1641,"children":1642},{"emptyLinePlaceholder":162},[1643],{"type":176,"value":1428},{"type":170,"tag":195,"props":1645,"children":1646},{"class":197,"line":583},[1647,1651,1656,1661,1666,1670,1674,1679],{"type":170,"tag":195,"props":1648,"children":1649},{"style":212},[1650],{"type":176,"value":1414},{"type":170,"tag":195,"props":1652,"children":1653},{"style":272},[1654],{"type":176,"value":1655}," timer ",{"type":170,"tag":195,"props":1657,"children":1658},{"style":757},[1659],{"type":176,"value":1660},"=",{"type":170,"tag":195,"props":1662,"children":1663},{"style":218},[1664],{"type":176,"value":1665}," setTimeout",{"type":170,"tag":195,"props":1667,"children":1668},{"style":272},[1669],{"type":176,"value":227},{"type":170,"tag":195,"props":1671,"children":1672},{"style":212},[1673],{"type":176,"value":215},{"type":170,"tag":195,"props":1675,"children":1676},{"style":224},[1677],{"type":176,"value":1678},"()",{"type":170,"tag":195,"props":1680,"children":1681},{"style":224},[1682],{"type":176,"value":253},{"type":170,"tag":195,"props":1684,"children":1685},{"class":197,"line":592},[1686,1690,1694,1699],{"type":170,"tag":195,"props":1687,"children":1688},{"style":272},[1689],{"type":176,"value":1448},{"type":170,"tag":195,"props":1691,"children":1692},{"style":224},[1693],{"type":176,"value":280},{"type":170,"tag":195,"props":1695,"children":1696},{"style":218},[1697],{"type":176,"value":1698},"close",{"type":170,"tag":195,"props":1700,"children":1701},{"style":266},[1702],{"type":176,"value":1703},"()\n",{"type":170,"tag":195,"props":1705,"children":1706},{"class":197,"line":604},[1707,1712,1716,1721,1725,1729,1733],{"type":170,"tag":195,"props":1708,"children":1709},{"style":272},[1710],{"type":176,"value":1711},"  stack",{"type":170,"tag":195,"props":1713,"children":1714},{"style":224},[1715],{"type":176,"value":280},{"type":170,"tag":195,"props":1717,"children":1718},{"style":218},[1719],{"type":176,"value":1720},"cleanup",{"type":170,"tag":195,"props":1722,"children":1723},{"style":266},[1724],{"type":176,"value":227},{"type":170,"tag":195,"props":1726,"children":1727},{"style":212},[1728],{"type":176,"value":215},{"type":170,"tag":195,"props":1730,"children":1731},{"style":224},[1732],{"type":176,"value":1678},{"type":170,"tag":195,"props":1734,"children":1735},{"style":224},[1736],{"type":176,"value":253},{"type":170,"tag":195,"props":1738,"children":1739},{"class":197,"line":662},[1740,1745,1749,1753,1757,1761],{"type":170,"tag":195,"props":1741,"children":1742},{"style":218},[1743],{"type":176,"value":1744},"    fn",{"type":170,"tag":195,"props":1746,"children":1747},{"style":266},[1748],{"type":176,"value":227},{"type":170,"tag":195,"props":1750,"children":1751},{"style":1417},[1752],{"type":176,"value":1579},{"type":170,"tag":195,"props":1754,"children":1755},{"style":757},[1756],{"type":176,"value":760},{"type":170,"tag":195,"props":1758,"children":1759},{"style":1586},[1760],{"type":176,"value":1589},{"type":170,"tag":195,"props":1762,"children":1763},{"style":266},[1764],{"type":176,"value":387},{"type":170,"tag":195,"props":1766,"children":1767},{"class":197,"line":694},[1768,1772],{"type":170,"tag":195,"props":1769,"children":1770},{"style":224},[1771],{"type":176,"value":1201},{"type":170,"tag":195,"props":1773,"children":1774},{"style":266},[1775],{"type":176,"value":387},{"type":170,"tag":195,"props":1777,"children":1778},{"class":197,"line":743},[1779,1784,1790],{"type":170,"tag":195,"props":1780,"children":1781},{"style":224},[1782],{"type":176,"value":1783},"},",{"type":170,"tag":195,"props":1785,"children":1787},{"style":1786},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1788],{"type":176,"value":1789}," 200",{"type":170,"tag":195,"props":1791,"children":1792},{"style":272},[1793],{"type":176,"value":387},{"type":170,"tag":195,"props":1795,"children":1796},{"class":197,"line":797},[1797],{"type":170,"tag":195,"props":1798,"children":1799},{"emptyLinePlaceholder":162},[1800],{"type":176,"value":1428},{"type":170,"tag":195,"props":1802,"children":1803},{"class":197,"line":841},[1804,1809,1813,1818,1822,1826,1831,1835,1839,1843,1847,1851,1855,1860,1864],{"type":170,"tag":195,"props":1805,"children":1806},{"style":272},[1807],{"type":176,"value":1808},"watcher",{"type":170,"tag":195,"props":1810,"children":1811},{"style":224},[1812],{"type":176,"value":280},{"type":170,"tag":195,"props":1814,"children":1815},{"style":218},[1816],{"type":176,"value":1817},"on",{"type":170,"tag":195,"props":1819,"children":1820},{"style":272},[1821],{"type":176,"value":227},{"type":170,"tag":195,"props":1823,"children":1824},{"style":1018},[1825],{"type":176,"value":1032},{"type":170,"tag":195,"props":1827,"children":1828},{"style":1024},[1829],{"type":176,"value":1830},"change",{"type":170,"tag":195,"props":1832,"children":1833},{"style":1018},[1834],{"type":176,"value":1032},{"type":170,"tag":195,"props":1836,"children":1837},{"style":224},[1838],{"type":176,"value":238},{"type":170,"tag":195,"props":1840,"children":1841},{"style":212},[1842],{"type":176,"value":338},{"type":170,"tag":195,"props":1844,"children":1845},{"style":224},[1846],{"type":176,"value":227},{"type":170,"tag":195,"props":1848,"children":1849},{"style":230},[1850],{"type":176,"value":1078},{"type":170,"tag":195,"props":1852,"children":1853},{"style":224},[1854],{"type":176,"value":238},{"type":170,"tag":195,"props":1856,"children":1857},{"style":230},[1858],{"type":176,"value":1859}," name",{"type":170,"tag":195,"props":1861,"children":1862},{"style":224},[1863],{"type":176,"value":248},{"type":170,"tag":195,"props":1865,"children":1866},{"style":224},[1867],{"type":176,"value":253},{"type":170,"tag":195,"props":1869,"children":1870},{"class":197,"line":870},[1871,1875,1879,1883,1887,1891,1895,1899,1903,1907,1911,1915,1919,1923,1928,1932],{"type":170,"tag":195,"props":1872,"children":1873},{"style":260},[1874],{"type":176,"value":263},{"type":170,"tag":195,"props":1876,"children":1877},{"style":266},[1878],{"type":176,"value":269},{"type":170,"tag":195,"props":1880,"children":1881},{"style":272},[1882],{"type":176,"value":1111},{"type":170,"tag":195,"props":1884,"children":1885},{"style":224},[1886],{"type":176,"value":280},{"type":170,"tag":195,"props":1888,"children":1889},{"style":218},[1890],{"type":176,"value":1120},{"type":170,"tag":195,"props":1892,"children":1893},{"style":266},[1894],{"type":176,"value":227},{"type":170,"tag":195,"props":1896,"children":1897},{"style":272},[1898],{"type":176,"value":829},{"type":170,"tag":195,"props":1900,"children":1901},{"style":266},[1902],{"type":176,"value":681},{"type":170,"tag":195,"props":1904,"children":1905},{"style":757},[1906],{"type":176,"value":1137},{"type":170,"tag":195,"props":1908,"children":1909},{"style":272},[1910],{"type":176,"value":765},{"type":170,"tag":195,"props":1912,"children":1913},{"style":224},[1914],{"type":176,"value":280},{"type":170,"tag":195,"props":1916,"children":1917},{"style":218},[1918],{"type":176,"value":1120},{"type":170,"tag":195,"props":1920,"children":1921},{"style":266},[1922],{"type":176,"value":227},{"type":170,"tag":195,"props":1924,"children":1925},{"style":272},[1926],{"type":176,"value":1927},"name",{"type":170,"tag":195,"props":1929,"children":1930},{"style":266},[1931],{"type":176,"value":298},{"type":170,"tag":195,"props":1933,"children":1934},{"style":224},[1935],{"type":176,"value":303},{"type":170,"tag":195,"props":1937,"children":1938},{"class":197,"line":879},[1939,1944,1948,1952],{"type":170,"tag":195,"props":1940,"children":1941},{"style":272},[1942],{"type":176,"value":1943},"    watcher",{"type":170,"tag":195,"props":1945,"children":1946},{"style":224},[1947],{"type":176,"value":280},{"type":170,"tag":195,"props":1949,"children":1950},{"style":218},[1951],{"type":176,"value":1698},{"type":170,"tag":195,"props":1953,"children":1954},{"style":266},[1955],{"type":176,"value":1703},{"type":170,"tag":195,"props":1957,"children":1958},{"class":197,"line":892},[1959,1964,1968,1973],{"type":170,"tag":195,"props":1960,"children":1961},{"style":218},[1962],{"type":176,"value":1963},"    clearTimeout",{"type":170,"tag":195,"props":1965,"children":1966},{"style":266},[1967],{"type":176,"value":227},{"type":170,"tag":195,"props":1969,"children":1970},{"style":272},[1971],{"type":176,"value":1972},"timer",{"type":170,"tag":195,"props":1974,"children":1975},{"style":266},[1976],{"type":176,"value":387},{"type":170,"tag":195,"props":1978,"children":1979},{"class":197,"line":905},[1980,1985,1989,1993,1997,2001,2005],{"type":170,"tag":195,"props":1981,"children":1982},{"style":272},[1983],{"type":176,"value":1984},"    stack",{"type":170,"tag":195,"props":1986,"children":1987},{"style":224},[1988],{"type":176,"value":280},{"type":170,"tag":195,"props":1990,"children":1991},{"style":218},[1992],{"type":176,"value":1720},{"type":170,"tag":195,"props":1994,"children":1995},{"style":266},[1996],{"type":176,"value":227},{"type":170,"tag":195,"props":1998,"children":1999},{"style":212},[2000],{"type":176,"value":215},{"type":170,"tag":195,"props":2002,"children":2003},{"style":224},[2004],{"type":176,"value":1678},{"type":170,"tag":195,"props":2006,"children":2007},{"style":224},[2008],{"type":176,"value":253},{"type":170,"tag":195,"props":2010,"children":2011},{"class":197,"line":913},[2012,2017,2021,2025,2029,2034],{"type":170,"tag":195,"props":2013,"children":2014},{"style":218},[2015],{"type":176,"value":2016},"      fn",{"type":170,"tag":195,"props":2018,"children":2019},{"style":266},[2020],{"type":176,"value":227},{"type":170,"tag":195,"props":2022,"children":2023},{"style":1417},[2024],{"type":176,"value":1579},{"type":170,"tag":195,"props":2026,"children":2027},{"style":757},[2028],{"type":176,"value":760},{"type":170,"tag":195,"props":2030,"children":2031},{"style":1586},[2032],{"type":176,"value":2033}," true",{"type":170,"tag":195,"props":2035,"children":2036},{"style":266},[2037],{"type":176,"value":387},{"type":170,"tag":195,"props":2039,"children":2041},{"class":197,"line":2040},26,[2042,2046],{"type":170,"tag":195,"props":2043,"children":2044},{"style":224},[2045],{"type":176,"value":396},{"type":170,"tag":195,"props":2047,"children":2048},{"style":266},[2049],{"type":176,"value":387},{"type":170,"tag":195,"props":2051,"children":2053},{"class":197,"line":2052},27,[2054],{"type":170,"tag":195,"props":2055,"children":2056},{"style":224},[2057],{"type":176,"value":418},{"type":170,"tag":195,"props":2059,"children":2061},{"class":197,"line":2060},28,[2062,2066],{"type":170,"tag":195,"props":2063,"children":2064},{"style":224},[2065],{"type":176,"value":1493},{"type":170,"tag":195,"props":2067,"children":2068},{"style":272},[2069],{"type":176,"value":387},{"type":170,"tag":178,"props":2071,"children":2072},{},[2073],{"type":176,"value":2074},"Watcher 仅向外暴露指定方法。",{"type":170,"tag":184,"props":2076,"children":2078},{"className":186,"code":2077,"language":188,"meta":163,"style":163},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2079],{"type":170,"tag":191,"props":2080,"children":2081},{"__ignoreMap":163},[2082,2125,2146,2168,2189,2244,2280,2334,2351,2359,2399,2437,2494,2501,2512,2525],{"type":170,"tag":195,"props":2083,"children":2084},{"class":197,"line":198},[2085,2091,2095,2100,2104,2109,2113,2117,2121],{"type":170,"tag":195,"props":2086,"children":2088},{"style":2087},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[2089],{"type":176,"value":2090},"Watcher",{"type":170,"tag":195,"props":2092,"children":2093},{"style":224},[2094],{"type":176,"value":280},{"type":170,"tag":195,"props":2096,"children":2097},{"style":1417},[2098],{"type":176,"value":2099},"prototype",{"type":170,"tag":195,"props":2101,"children":2102},{"style":224},[2103],{"type":176,"value":280},{"type":170,"tag":195,"props":2105,"children":2106},{"style":218},[2107],{"type":176,"value":2108},"expose",{"type":170,"tag":195,"props":2110,"children":2111},{"style":757},[2112],{"type":176,"value":760},{"type":170,"tag":195,"props":2114,"children":2115},{"style":212},[2116],{"type":176,"value":338},{"type":170,"tag":195,"props":2118,"children":2119},{"style":224},[2120],{"type":176,"value":1678},{"type":170,"tag":195,"props":2122,"children":2123},{"style":224},[2124],{"type":176,"value":253},{"type":170,"tag":195,"props":2126,"children":2127},{"class":197,"line":208},[2128,2132,2137,2141],{"type":170,"tag":195,"props":2129,"children":2130},{"style":212},[2131],{"type":176,"value":980},{"type":170,"tag":195,"props":2133,"children":2134},{"style":272},[2135],{"type":176,"value":2136}," expose",{"type":170,"tag":195,"props":2138,"children":2139},{"style":757},[2140],{"type":176,"value":760},{"type":170,"tag":195,"props":2142,"children":2143},{"style":224},[2144],{"type":176,"value":2145}," {}\n",{"type":170,"tag":195,"props":2147,"children":2148},{"class":197,"line":256},[2149,2153,2158,2162],{"type":170,"tag":195,"props":2150,"children":2151},{"style":212},[2152],{"type":176,"value":980},{"type":170,"tag":195,"props":2154,"children":2155},{"style":272},[2156],{"type":176,"value":2157}," self",{"type":170,"tag":195,"props":2159,"children":2160},{"style":757},[2161],{"type":176,"value":760},{"type":170,"tag":195,"props":2163,"children":2165},{"style":2164},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2166],{"type":176,"value":2167}," this\n",{"type":170,"tag":195,"props":2169,"children":2170},{"class":197,"line":306},[2171,2175,2180,2184],{"type":170,"tag":195,"props":2172,"children":2173},{"style":212},[2174],{"type":176,"value":980},{"type":170,"tag":195,"props":2176,"children":2177},{"style":272},[2178],{"type":176,"value":2179}," methods",{"type":170,"tag":195,"props":2181,"children":2182},{"style":757},[2183],{"type":176,"value":760},{"type":170,"tag":195,"props":2185,"children":2186},{"style":266},[2187],{"type":176,"value":2188}," [\n",{"type":170,"tag":195,"props":2190,"children":2191},{"class":197,"line":358},[2192,2197,2201,2205,2209,2213,2218,2222,2226,2230,2235,2239],{"type":170,"tag":195,"props":2193,"children":2194},{"style":1018},[2195],{"type":176,"value":2196},"    '",{"type":170,"tag":195,"props":2198,"children":2199},{"style":1024},[2200],{"type":176,"value":1817},{"type":170,"tag":195,"props":2202,"children":2203},{"style":1018},[2204],{"type":176,"value":1032},{"type":170,"tag":195,"props":2206,"children":2207},{"style":224},[2208],{"type":176,"value":238},{"type":170,"tag":195,"props":2210,"children":2211},{"style":1018},[2212],{"type":176,"value":1021},{"type":170,"tag":195,"props":2214,"children":2215},{"style":1024},[2216],{"type":176,"value":2217},"emit",{"type":170,"tag":195,"props":2219,"children":2220},{"style":1018},[2221],{"type":176,"value":1032},{"type":170,"tag":195,"props":2223,"children":2224},{"style":224},[2225],{"type":176,"value":238},{"type":170,"tag":195,"props":2227,"children":2228},{"style":1018},[2229],{"type":176,"value":1021},{"type":170,"tag":195,"props":2231,"children":2232},{"style":1024},[2233],{"type":176,"value":2234},"once",{"type":170,"tag":195,"props":2236,"children":2237},{"style":1018},[2238],{"type":176,"value":1032},{"type":170,"tag":195,"props":2240,"children":2241},{"style":224},[2242],{"type":176,"value":2243},",\n",{"type":170,"tag":195,"props":2245,"children":2246},{"class":197,"line":390},[2247,2251,2255,2259,2263,2267,2272,2276],{"type":170,"tag":195,"props":2248,"children":2249},{"style":1018},[2250],{"type":176,"value":2196},{"type":170,"tag":195,"props":2252,"children":2253},{"style":1024},[2254],{"type":176,"value":1698},{"type":170,"tag":195,"props":2256,"children":2257},{"style":1018},[2258],{"type":176,"value":1032},{"type":170,"tag":195,"props":2260,"children":2261},{"style":224},[2262],{"type":176,"value":238},{"type":170,"tag":195,"props":2264,"children":2265},{"style":1018},[2266],{"type":176,"value":1021},{"type":170,"tag":195,"props":2268,"children":2269},{"style":1024},[2270],{"type":176,"value":2271},"isClosed",{"type":170,"tag":195,"props":2273,"children":2274},{"style":1018},[2275],{"type":176,"value":1032},{"type":170,"tag":195,"props":2277,"children":2278},{"style":224},[2279],{"type":176,"value":2243},{"type":170,"tag":195,"props":2281,"children":2282},{"class":197,"line":403},[2283,2287,2292,2296,2300,2304,2309,2313,2317,2321,2326,2330],{"type":170,"tag":195,"props":2284,"children":2285},{"style":1018},[2286],{"type":176,"value":2196},{"type":170,"tag":195,"props":2288,"children":2289},{"style":1024},[2290],{"type":176,"value":2291},"listeners",{"type":170,"tag":195,"props":2293,"children":2294},{"style":1018},[2295],{"type":176,"value":1032},{"type":170,"tag":195,"props":2297,"children":2298},{"style":224},[2299],{"type":176,"value":238},{"type":170,"tag":195,"props":2301,"children":2302},{"style":1018},[2303],{"type":176,"value":1021},{"type":170,"tag":195,"props":2305,"children":2306},{"style":1024},[2307],{"type":176,"value":2308},"setMaxListeners",{"type":170,"tag":195,"props":2310,"children":2311},{"style":1018},[2312],{"type":176,"value":1032},{"type":170,"tag":195,"props":2314,"children":2315},{"style":224},[2316],{"type":176,"value":238},{"type":170,"tag":195,"props":2318,"children":2319},{"style":1018},[2320],{"type":176,"value":1021},{"type":170,"tag":195,"props":2322,"children":2323},{"style":1024},[2324],{"type":176,"value":2325},"getMaxListeners",{"type":170,"tag":195,"props":2327,"children":2328},{"style":1018},[2329],{"type":176,"value":1032},{"type":170,"tag":195,"props":2331,"children":2332},{"style":224},[2333],{"type":176,"value":2243},{"type":170,"tag":195,"props":2335,"children":2336},{"class":197,"line":412},[2337,2341,2346],{"type":170,"tag":195,"props":2338,"children":2339},{"style":1018},[2340],{"type":176,"value":2196},{"type":170,"tag":195,"props":2342,"children":2343},{"style":1024},[2344],{"type":176,"value":2345},"getWatchedPaths",{"type":170,"tag":195,"props":2347,"children":2348},{"style":1018},[2349],{"type":176,"value":2350},"'\n",{"type":170,"tag":195,"props":2352,"children":2353},{"class":197,"line":421},[2354],{"type":170,"tag":195,"props":2355,"children":2356},{"style":266},[2357],{"type":176,"value":2358},"  ]\n",{"type":170,"tag":195,"props":2360,"children":2361},{"class":197,"line":462},[2362,2367,2371,2375,2379,2383,2387,2391,2395],{"type":170,"tag":195,"props":2363,"children":2364},{"style":272},[2365],{"type":176,"value":2366},"  methods",{"type":170,"tag":195,"props":2368,"children":2369},{"style":224},[2370],{"type":176,"value":280},{"type":170,"tag":195,"props":2372,"children":2373},{"style":218},[2374],{"type":176,"value":709},{"type":170,"tag":195,"props":2376,"children":2377},{"style":266},[2378],{"type":176,"value":227},{"type":170,"tag":195,"props":2380,"children":2381},{"style":212},[2382],{"type":176,"value":215},{"type":170,"tag":195,"props":2384,"children":2385},{"style":224},[2386],{"type":176,"value":227},{"type":170,"tag":195,"props":2388,"children":2389},{"style":230},[2390],{"type":176,"value":1927},{"type":170,"tag":195,"props":2392,"children":2393},{"style":224},[2394],{"type":176,"value":248},{"type":170,"tag":195,"props":2396,"children":2397},{"style":224},[2398],{"type":176,"value":253},{"type":170,"tag":195,"props":2400,"children":2401},{"class":197,"line":520},[2402,2407,2412,2416,2421,2425,2429,2433],{"type":170,"tag":195,"props":2403,"children":2404},{"style":272},[2405],{"type":176,"value":2406},"    expose",{"type":170,"tag":195,"props":2408,"children":2409},{"style":266},[2410],{"type":176,"value":2411},"[",{"type":170,"tag":195,"props":2413,"children":2414},{"style":272},[2415],{"type":176,"value":1927},{"type":170,"tag":195,"props":2417,"children":2418},{"style":266},[2419],{"type":176,"value":2420},"] ",{"type":170,"tag":195,"props":2422,"children":2423},{"style":757},[2424],{"type":176,"value":1660},{"type":170,"tag":195,"props":2426,"children":2427},{"style":212},[2428],{"type":176,"value":338},{"type":170,"tag":195,"props":2430,"children":2431},{"style":224},[2432],{"type":176,"value":1678},{"type":170,"tag":195,"props":2434,"children":2435},{"style":224},[2436],{"type":176,"value":253},{"type":170,"tag":195,"props":2438,"children":2439},{"class":197,"line":545},[2440,2445,2449,2453,2457,2462,2466,2471,2475,2480,2484,2490],{"type":170,"tag":195,"props":2441,"children":2442},{"style":260},[2443],{"type":176,"value":2444},"      return",{"type":170,"tag":195,"props":2446,"children":2447},{"style":272},[2448],{"type":176,"value":2157},{"type":170,"tag":195,"props":2450,"children":2451},{"style":266},[2452],{"type":176,"value":2411},{"type":170,"tag":195,"props":2454,"children":2455},{"style":272},[2456],{"type":176,"value":1927},{"type":170,"tag":195,"props":2458,"children":2459},{"style":266},[2460],{"type":176,"value":2461},"]",{"type":170,"tag":195,"props":2463,"children":2464},{"style":224},[2465],{"type":176,"value":280},{"type":170,"tag":195,"props":2467,"children":2468},{"style":218},[2469],{"type":176,"value":2470},"apply",{"type":170,"tag":195,"props":2472,"children":2473},{"style":266},[2474],{"type":176,"value":227},{"type":170,"tag":195,"props":2476,"children":2477},{"style":272},[2478],{"type":176,"value":2479},"self",{"type":170,"tag":195,"props":2481,"children":2482},{"style":224},[2483],{"type":176,"value":238},{"type":170,"tag":195,"props":2485,"children":2487},{"style":2486},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2488],{"type":176,"value":2489}," arguments",{"type":170,"tag":195,"props":2491,"children":2492},{"style":266},[2493],{"type":176,"value":387},{"type":170,"tag":195,"props":2495,"children":2496},{"class":197,"line":583},[2497],{"type":170,"tag":195,"props":2498,"children":2499},{"style":224},[2500],{"type":176,"value":1193},{"type":170,"tag":195,"props":2502,"children":2503},{"class":197,"line":592},[2504,2508],{"type":170,"tag":195,"props":2505,"children":2506},{"style":224},[2507],{"type":176,"value":1201},{"type":170,"tag":195,"props":2509,"children":2510},{"style":266},[2511],{"type":176,"value":387},{"type":170,"tag":195,"props":2513,"children":2514},{"class":197,"line":604},[2515,2520],{"type":170,"tag":195,"props":2516,"children":2517},{"style":260},[2518],{"type":176,"value":2519},"  return",{"type":170,"tag":195,"props":2521,"children":2522},{"style":272},[2523],{"type":176,"value":2524}," expose\n",{"type":170,"tag":195,"props":2526,"children":2527},{"class":197,"line":662},[2528],{"type":170,"tag":195,"props":2529,"children":2530},{"style":224},[2531],{"type":176,"value":919},{"type":170,"tag":178,"props":2533,"children":2534},{},[2535],{"type":176,"value":2536},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":170,"tag":184,"props":2538,"children":2540},{"className":186,"code":2539,"language":188,"meta":163,"style":163},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2541],{"type":170,"tag":191,"props":2542,"children":2543},{"__ignoreMap":163},[2544,2573,2581,2611,2636,2666,2673,2714,2786,2839,2851,2907,2951,2962,3010,3047,3067,3075,3086,3097,3104,3135,3175,3195,3206,3244,3251,3258,3298,3339,3394,3436,3465,3478,3490,3555,3598,3620,3632,3640,3648,3656,3680],{"type":170,"tag":195,"props":2545,"children":2546},{"class":197,"line":198},[2547,2551,2556,2560,2565,2569],{"type":170,"tag":195,"props":2548,"children":2549},{"style":212},[2550],{"type":176,"value":215},{"type":170,"tag":195,"props":2552,"children":2553},{"style":218},[2554],{"type":176,"value":2555}," composeWatcher",{"type":170,"tag":195,"props":2557,"children":2558},{"style":224},[2559],{"type":176,"value":227},{"type":170,"tag":195,"props":2561,"children":2562},{"style":230},[2563],{"type":176,"value":2564},"watchers",{"type":170,"tag":195,"props":2566,"children":2567},{"style":224},[2568],{"type":176,"value":248},{"type":170,"tag":195,"props":2570,"children":2571},{"style":224},[2572],{"type":176,"value":253},{"type":170,"tag":195,"props":2574,"children":2575},{"class":197,"line":208},[2576],{"type":170,"tag":195,"props":2577,"children":2578},{"style":202},[2579],{"type":176,"value":2580},"  // 使用一个新的 watcher 整合事件列表\n",{"type":170,"tag":195,"props":2582,"children":2583},{"class":197,"line":256},[2584,2588,2593,2597,2602,2607],{"type":170,"tag":195,"props":2585,"children":2586},{"style":212},[2587],{"type":176,"value":980},{"type":170,"tag":195,"props":2589,"children":2590},{"style":272},[2591],{"type":176,"value":2592}," watcher",{"type":170,"tag":195,"props":2594,"children":2595},{"style":757},[2596],{"type":176,"value":760},{"type":170,"tag":195,"props":2598,"children":2599},{"style":757},[2600],{"type":176,"value":2601}," new",{"type":170,"tag":195,"props":2603,"children":2604},{"style":218},[2605],{"type":176,"value":2606}," Watcher",{"type":170,"tag":195,"props":2608,"children":2609},{"style":266},[2610],{"type":176,"value":1703},{"type":170,"tag":195,"props":2612,"children":2613},{"class":197,"line":306},[2614,2618,2623,2627,2632],{"type":170,"tag":195,"props":2615,"children":2616},{"style":212},[2617],{"type":176,"value":980},{"type":170,"tag":195,"props":2619,"children":2620},{"style":272},[2621],{"type":176,"value":2622}," filterDups",{"type":170,"tag":195,"props":2624,"children":2625},{"style":757},[2626],{"type":176,"value":760},{"type":170,"tag":195,"props":2628,"children":2629},{"style":218},[2630],{"type":176,"value":2631}," createDupsFilter",{"type":170,"tag":195,"props":2633,"children":2634},{"style":266},[2635],{"type":176,"value":1703},{"type":170,"tag":195,"props":2637,"children":2638},{"class":197,"line":358},[2639,2643,2648,2652,2657,2661],{"type":170,"tag":195,"props":2640,"children":2641},{"style":212},[2642],{"type":176,"value":980},{"type":170,"tag":195,"props":2644,"children":2645},{"style":272},[2646],{"type":176,"value":2647}," counter",{"type":170,"tag":195,"props":2649,"children":2650},{"style":757},[2651],{"type":176,"value":760},{"type":170,"tag":195,"props":2653,"children":2654},{"style":272},[2655],{"type":176,"value":2656}," watchers",{"type":170,"tag":195,"props":2658,"children":2659},{"style":224},[2660],{"type":176,"value":280},{"type":170,"tag":195,"props":2662,"children":2663},{"style":1417},[2664],{"type":176,"value":2665},"length\n",{"type":170,"tag":195,"props":2667,"children":2668},{"class":197,"line":390},[2669],{"type":170,"tag":195,"props":2670,"children":2671},{"emptyLinePlaceholder":162},[2672],{"type":176,"value":1428},{"type":170,"tag":195,"props":2674,"children":2675},{"class":197,"line":403},[2676,2681,2685,2689,2693,2697,2701,2706,2710],{"type":170,"tag":195,"props":2677,"children":2678},{"style":272},[2679],{"type":176,"value":2680},"  watchers",{"type":170,"tag":195,"props":2682,"children":2683},{"style":224},[2684],{"type":176,"value":280},{"type":170,"tag":195,"props":2686,"children":2687},{"style":218},[2688],{"type":176,"value":709},{"type":170,"tag":195,"props":2690,"children":2691},{"style":266},[2692],{"type":176,"value":227},{"type":170,"tag":195,"props":2694,"children":2695},{"style":212},[2696],{"type":176,"value":215},{"type":170,"tag":195,"props":2698,"children":2699},{"style":224},[2700],{"type":176,"value":227},{"type":170,"tag":195,"props":2702,"children":2703},{"style":230},[2704],{"type":176,"value":2705},"w",{"type":170,"tag":195,"props":2707,"children":2708},{"style":224},[2709],{"type":176,"value":248},{"type":170,"tag":195,"props":2711,"children":2712},{"style":224},[2713],{"type":176,"value":253},{"type":170,"tag":195,"props":2715,"children":2716},{"class":197,"line":412},[2717,2722,2726,2730,2734,2738,2742,2746,2750,2754,2758,2762,2766,2770,2774,2778,2782],{"type":170,"tag":195,"props":2718,"children":2719},{"style":272},[2720],{"type":176,"value":2721},"    w",{"type":170,"tag":195,"props":2723,"children":2724},{"style":224},[2725],{"type":176,"value":280},{"type":170,"tag":195,"props":2727,"children":2728},{"style":218},[2729],{"type":176,"value":1817},{"type":170,"tag":195,"props":2731,"children":2732},{"style":266},[2733],{"type":176,"value":227},{"type":170,"tag":195,"props":2735,"children":2736},{"style":1018},[2737],{"type":176,"value":1032},{"type":170,"tag":195,"props":2739,"children":2740},{"style":1024},[2741],{"type":176,"value":1830},{"type":170,"tag":195,"props":2743,"children":2744},{"style":1018},[2745],{"type":176,"value":1032},{"type":170,"tag":195,"props":2747,"children":2748},{"style":224},[2749],{"type":176,"value":238},{"type":170,"tag":195,"props":2751,"children":2752},{"style":218},[2753],{"type":176,"value":2622},{"type":170,"tag":195,"props":2755,"children":2756},{"style":266},[2757],{"type":176,"value":227},{"type":170,"tag":195,"props":2759,"children":2760},{"style":212},[2761],{"type":176,"value":215},{"type":170,"tag":195,"props":2763,"children":2764},{"style":224},[2765],{"type":176,"value":227},{"type":170,"tag":195,"props":2767,"children":2768},{"style":230},[2769],{"type":176,"value":1078},{"type":170,"tag":195,"props":2771,"children":2772},{"style":224},[2773],{"type":176,"value":238},{"type":170,"tag":195,"props":2775,"children":2776},{"style":230},[2777],{"type":176,"value":1859},{"type":170,"tag":195,"props":2779,"children":2780},{"style":224},[2781],{"type":176,"value":248},{"type":170,"tag":195,"props":2783,"children":2784},{"style":224},[2785],{"type":176,"value":253},{"type":170,"tag":195,"props":2787,"children":2788},{"class":197,"line":421},[2789,2794,2798,2802,2806,2810,2814,2818,2822,2827,2831,2835],{"type":170,"tag":195,"props":2790,"children":2791},{"style":272},[2792],{"type":176,"value":2793},"      watcher",{"type":170,"tag":195,"props":2795,"children":2796},{"style":224},[2797],{"type":176,"value":280},{"type":170,"tag":195,"props":2799,"children":2800},{"style":218},[2801],{"type":176,"value":2217},{"type":170,"tag":195,"props":2803,"children":2804},{"style":266},[2805],{"type":176,"value":227},{"type":170,"tag":195,"props":2807,"children":2808},{"style":1018},[2809],{"type":176,"value":1032},{"type":170,"tag":195,"props":2811,"children":2812},{"style":1024},[2813],{"type":176,"value":1830},{"type":170,"tag":195,"props":2815,"children":2816},{"style":1018},[2817],{"type":176,"value":1032},{"type":170,"tag":195,"props":2819,"children":2820},{"style":224},[2821],{"type":176,"value":238},{"type":170,"tag":195,"props":2823,"children":2824},{"style":272},[2825],{"type":176,"value":2826}," evt",{"type":170,"tag":195,"props":2828,"children":2829},{"style":224},[2830],{"type":176,"value":238},{"type":170,"tag":195,"props":2832,"children":2833},{"style":272},[2834],{"type":176,"value":1859},{"type":170,"tag":195,"props":2836,"children":2837},{"style":266},[2838],{"type":176,"value":387},{"type":170,"tag":195,"props":2840,"children":2841},{"class":197,"line":462},[2842,2846],{"type":170,"tag":195,"props":2843,"children":2844},{"style":224},[2845],{"type":176,"value":396},{"type":170,"tag":195,"props":2847,"children":2848},{"style":266},[2849],{"type":176,"value":2850},"))\n",{"type":170,"tag":195,"props":2852,"children":2853},{"class":197,"line":520},[2854,2858,2862,2866,2870,2874,2879,2883,2887,2891,2895,2899,2903],{"type":170,"tag":195,"props":2855,"children":2856},{"style":272},[2857],{"type":176,"value":2721},{"type":170,"tag":195,"props":2859,"children":2860},{"style":224},[2861],{"type":176,"value":280},{"type":170,"tag":195,"props":2863,"children":2864},{"style":218},[2865],{"type":176,"value":1817},{"type":170,"tag":195,"props":2867,"children":2868},{"style":266},[2869],{"type":176,"value":227},{"type":170,"tag":195,"props":2871,"children":2872},{"style":1018},[2873],{"type":176,"value":1032},{"type":170,"tag":195,"props":2875,"children":2876},{"style":1024},[2877],{"type":176,"value":2878},"error",{"type":170,"tag":195,"props":2880,"children":2881},{"style":1018},[2882],{"type":176,"value":1032},{"type":170,"tag":195,"props":2884,"children":2885},{"style":224},[2886],{"type":176,"value":238},{"type":170,"tag":195,"props":2888,"children":2889},{"style":212},[2890],{"type":176,"value":338},{"type":170,"tag":195,"props":2892,"children":2893},{"style":224},[2894],{"type":176,"value":227},{"type":170,"tag":195,"props":2896,"children":2897},{"style":230},[2898],{"type":176,"value":347},{"type":170,"tag":195,"props":2900,"children":2901},{"style":224},[2902],{"type":176,"value":248},{"type":170,"tag":195,"props":2904,"children":2905},{"style":224},[2906],{"type":176,"value":253},{"type":170,"tag":195,"props":2908,"children":2909},{"class":197,"line":545},[2910,2914,2918,2922,2926,2930,2934,2938,2942,2947],{"type":170,"tag":195,"props":2911,"children":2912},{"style":272},[2913],{"type":176,"value":2793},{"type":170,"tag":195,"props":2915,"children":2916},{"style":224},[2917],{"type":176,"value":280},{"type":170,"tag":195,"props":2919,"children":2920},{"style":218},[2921],{"type":176,"value":2217},{"type":170,"tag":195,"props":2923,"children":2924},{"style":266},[2925],{"type":176,"value":227},{"type":170,"tag":195,"props":2927,"children":2928},{"style":1018},[2929],{"type":176,"value":1032},{"type":170,"tag":195,"props":2931,"children":2932},{"style":1024},[2933],{"type":176,"value":2878},{"type":170,"tag":195,"props":2935,"children":2936},{"style":1018},[2937],{"type":176,"value":1032},{"type":170,"tag":195,"props":2939,"children":2940},{"style":224},[2941],{"type":176,"value":238},{"type":170,"tag":195,"props":2943,"children":2944},{"style":272},[2945],{"type":176,"value":2946}," err",{"type":170,"tag":195,"props":2948,"children":2949},{"style":266},[2950],{"type":176,"value":387},{"type":170,"tag":195,"props":2952,"children":2953},{"class":197,"line":583},[2954,2958],{"type":170,"tag":195,"props":2955,"children":2956},{"style":224},[2957],{"type":176,"value":396},{"type":170,"tag":195,"props":2959,"children":2960},{"style":266},[2961],{"type":176,"value":387},{"type":170,"tag":195,"props":2963,"children":2964},{"class":197,"line":592},[2965,2969,2973,2977,2981,2985,2990,2994,2998,3002,3006],{"type":170,"tag":195,"props":2966,"children":2967},{"style":272},[2968],{"type":176,"value":2721},{"type":170,"tag":195,"props":2970,"children":2971},{"style":224},[2972],{"type":176,"value":280},{"type":170,"tag":195,"props":2974,"children":2975},{"style":218},[2976],{"type":176,"value":1817},{"type":170,"tag":195,"props":2978,"children":2979},{"style":266},[2980],{"type":176,"value":227},{"type":170,"tag":195,"props":2982,"children":2983},{"style":1018},[2984],{"type":176,"value":1032},{"type":170,"tag":195,"props":2986,"children":2987},{"style":1024},[2988],{"type":176,"value":2989},"ready",{"type":170,"tag":195,"props":2991,"children":2992},{"style":1018},[2993],{"type":176,"value":1032},{"type":170,"tag":195,"props":2995,"children":2996},{"style":224},[2997],{"type":176,"value":238},{"type":170,"tag":195,"props":2999,"children":3000},{"style":212},[3001],{"type":176,"value":338},{"type":170,"tag":195,"props":3003,"children":3004},{"style":224},[3005],{"type":176,"value":1678},{"type":170,"tag":195,"props":3007,"children":3008},{"style":224},[3009],{"type":176,"value":253},{"type":170,"tag":195,"props":3011,"children":3012},{"class":197,"line":604},[3013,3017,3021,3026,3030,3034,3039,3043],{"type":170,"tag":195,"props":3014,"children":3015},{"style":260},[3016],{"type":176,"value":668},{"type":170,"tag":195,"props":3018,"children":3019},{"style":266},[3020],{"type":176,"value":269},{"type":170,"tag":195,"props":3022,"children":3023},{"style":757},[3024],{"type":176,"value":3025},"!",{"type":170,"tag":195,"props":3027,"children":3028},{"style":266},[3029],{"type":176,"value":227},{"type":170,"tag":195,"props":3031,"children":3032},{"style":757},[3033],{"type":176,"value":1365},{"type":170,"tag":195,"props":3035,"children":3036},{"style":272},[3037],{"type":176,"value":3038},"counter",{"type":170,"tag":195,"props":3040,"children":3041},{"style":266},[3042],{"type":176,"value":298},{"type":170,"tag":195,"props":3044,"children":3045},{"style":224},[3046],{"type":176,"value":303},{"type":170,"tag":195,"props":3048,"children":3049},{"class":197,"line":662},[3050,3055,3059,3063],{"type":170,"tag":195,"props":3051,"children":3052},{"style":218},[3053],{"type":176,"value":3054},"        emitReady",{"type":170,"tag":195,"props":3056,"children":3057},{"style":266},[3058],{"type":176,"value":227},{"type":170,"tag":195,"props":3060,"children":3061},{"style":272},[3062],{"type":176,"value":1808},{"type":170,"tag":195,"props":3064,"children":3065},{"style":266},[3066],{"type":176,"value":387},{"type":170,"tag":195,"props":3068,"children":3069},{"class":197,"line":694},[3070],{"type":170,"tag":195,"props":3071,"children":3072},{"style":224},[3073],{"type":176,"value":3074},"      }\n",{"type":170,"tag":195,"props":3076,"children":3077},{"class":197,"line":743},[3078,3082],{"type":170,"tag":195,"props":3079,"children":3080},{"style":224},[3081],{"type":176,"value":396},{"type":170,"tag":195,"props":3083,"children":3084},{"style":266},[3085],{"type":176,"value":387},{"type":170,"tag":195,"props":3087,"children":3088},{"class":197,"line":797},[3089,3093],{"type":170,"tag":195,"props":3090,"children":3091},{"style":224},[3092],{"type":176,"value":1201},{"type":170,"tag":195,"props":3094,"children":3095},{"style":266},[3096],{"type":176,"value":387},{"type":170,"tag":195,"props":3098,"children":3099},{"class":197,"line":841},[3100],{"type":170,"tag":195,"props":3101,"children":3102},{"emptyLinePlaceholder":162},[3103],{"type":176,"value":1428},{"type":170,"tag":195,"props":3105,"children":3106},{"class":197,"line":870},[3107,3111,3115,3119,3123,3127,3131],{"type":170,"tag":195,"props":3108,"children":3109},{"style":272},[3110],{"type":176,"value":1448},{"type":170,"tag":195,"props":3112,"children":3113},{"style":224},[3114],{"type":176,"value":280},{"type":170,"tag":195,"props":3116,"children":3117},{"style":218},[3118],{"type":176,"value":1698},{"type":170,"tag":195,"props":3120,"children":3121},{"style":757},[3122],{"type":176,"value":760},{"type":170,"tag":195,"props":3124,"children":3125},{"style":212},[3126],{"type":176,"value":338},{"type":170,"tag":195,"props":3128,"children":3129},{"style":224},[3130],{"type":176,"value":1678},{"type":170,"tag":195,"props":3132,"children":3133},{"style":224},[3134],{"type":176,"value":253},{"type":170,"tag":195,"props":3136,"children":3137},{"class":197,"line":879},[3138,3143,3147,3151,3155,3159,3163,3167,3171],{"type":170,"tag":195,"props":3139,"children":3140},{"style":272},[3141],{"type":176,"value":3142},"    watchers",{"type":170,"tag":195,"props":3144,"children":3145},{"style":224},[3146],{"type":176,"value":280},{"type":170,"tag":195,"props":3148,"children":3149},{"style":218},[3150],{"type":176,"value":709},{"type":170,"tag":195,"props":3152,"children":3153},{"style":266},[3154],{"type":176,"value":227},{"type":170,"tag":195,"props":3156,"children":3157},{"style":212},[3158],{"type":176,"value":215},{"type":170,"tag":195,"props":3160,"children":3161},{"style":224},[3162],{"type":176,"value":227},{"type":170,"tag":195,"props":3164,"children":3165},{"style":230},[3166],{"type":176,"value":2705},{"type":170,"tag":195,"props":3168,"children":3169},{"style":224},[3170],{"type":176,"value":248},{"type":170,"tag":195,"props":3172,"children":3173},{"style":224},[3174],{"type":176,"value":253},{"type":170,"tag":195,"props":3176,"children":3177},{"class":197,"line":892},[3178,3183,3187,3191],{"type":170,"tag":195,"props":3179,"children":3180},{"style":272},[3181],{"type":176,"value":3182},"      w",{"type":170,"tag":195,"props":3184,"children":3185},{"style":224},[3186],{"type":176,"value":280},{"type":170,"tag":195,"props":3188,"children":3189},{"style":218},[3190],{"type":176,"value":1698},{"type":170,"tag":195,"props":3192,"children":3193},{"style":266},[3194],{"type":176,"value":1703},{"type":170,"tag":195,"props":3196,"children":3197},{"class":197,"line":905},[3198,3202],{"type":170,"tag":195,"props":3199,"children":3200},{"style":224},[3201],{"type":176,"value":396},{"type":170,"tag":195,"props":3203,"children":3204},{"style":266},[3205],{"type":176,"value":387},{"type":170,"tag":195,"props":3207,"children":3208},{"class":197,"line":913},[3209,3214,3218,3223,3227,3232,3236,3240],{"type":170,"tag":195,"props":3210,"children":3211},{"style":272},[3212],{"type":176,"value":3213},"    process",{"type":170,"tag":195,"props":3215,"children":3216},{"style":224},[3217],{"type":176,"value":280},{"type":170,"tag":195,"props":3219,"children":3220},{"style":218},[3221],{"type":176,"value":3222},"nextTick",{"type":170,"tag":195,"props":3224,"children":3225},{"style":266},[3226],{"type":176,"value":227},{"type":170,"tag":195,"props":3228,"children":3229},{"style":272},[3230],{"type":176,"value":3231},"emitClose",{"type":170,"tag":195,"props":3233,"children":3234},{"style":224},[3235],{"type":176,"value":238},{"type":170,"tag":195,"props":3237,"children":3238},{"style":272},[3239],{"type":176,"value":2592},{"type":170,"tag":195,"props":3241,"children":3242},{"style":266},[3243],{"type":176,"value":387},{"type":170,"tag":195,"props":3245,"children":3246},{"class":197,"line":2040},[3247],{"type":170,"tag":195,"props":3248,"children":3249},{"style":224},[3250],{"type":176,"value":418},{"type":170,"tag":195,"props":3252,"children":3253},{"class":197,"line":2052},[3254],{"type":170,"tag":195,"props":3255,"children":3256},{"emptyLinePlaceholder":162},[3257],{"type":176,"value":1428},{"type":170,"tag":195,"props":3259,"children":3260},{"class":197,"line":2060},[3261,3265,3269,3273,3277,3281,3285,3290,3294],{"type":170,"tag":195,"props":3262,"children":3263},{"style":272},[3264],{"type":176,"value":1448},{"type":170,"tag":195,"props":3266,"children":3267},{"style":224},[3268],{"type":176,"value":280},{"type":170,"tag":195,"props":3270,"children":3271},{"style":218},[3272],{"type":176,"value":2345},{"type":170,"tag":195,"props":3274,"children":3275},{"style":757},[3276],{"type":176,"value":760},{"type":170,"tag":195,"props":3278,"children":3279},{"style":212},[3280],{"type":176,"value":338},{"type":170,"tag":195,"props":3282,"children":3283},{"style":224},[3284],{"type":176,"value":227},{"type":170,"tag":195,"props":3286,"children":3287},{"style":230},[3288],{"type":176,"value":3289},"fn",{"type":170,"tag":195,"props":3291,"children":3292},{"style":224},[3293],{"type":176,"value":248},{"type":170,"tag":195,"props":3295,"children":3296},{"style":224},[3297],{"type":176,"value":253},{"type":170,"tag":195,"props":3299,"children":3301},{"class":197,"line":3300},29,[3302,3306,3310,3314,3318,3323,3327,3331,3335],{"type":170,"tag":195,"props":3303,"children":3304},{"style":260},[3305],{"type":176,"value":1102},{"type":170,"tag":195,"props":3307,"children":3308},{"style":266},[3309],{"type":176,"value":269},{"type":170,"tag":195,"props":3311,"children":3312},{"style":272},[3313],{"type":176,"value":275},{"type":170,"tag":195,"props":3315,"children":3316},{"style":224},[3317],{"type":176,"value":280},{"type":170,"tag":195,"props":3319,"children":3320},{"style":218},[3321],{"type":176,"value":3322},"func",{"type":170,"tag":195,"props":3324,"children":3325},{"style":266},[3326],{"type":176,"value":227},{"type":170,"tag":195,"props":3328,"children":3329},{"style":272},[3330],{"type":176,"value":3289},{"type":170,"tag":195,"props":3332,"children":3333},{"style":266},[3334],{"type":176,"value":298},{"type":170,"tag":195,"props":3336,"children":3337},{"style":224},[3338],{"type":176,"value":303},{"type":170,"tag":195,"props":3340,"children":3342},{"class":197,"line":3341},30,[3343,3348,3353,3357,3361,3365,3370,3374,3378,3382,3386,3390],{"type":170,"tag":195,"props":3344,"children":3345},{"style":212},[3346],{"type":176,"value":3347},"      var",{"type":170,"tag":195,"props":3349,"children":3350},{"style":272},[3351],{"type":176,"value":3352}," promises",{"type":170,"tag":195,"props":3354,"children":3355},{"style":757},[3356],{"type":176,"value":760},{"type":170,"tag":195,"props":3358,"children":3359},{"style":272},[3360],{"type":176,"value":2656},{"type":170,"tag":195,"props":3362,"children":3363},{"style":224},[3364],{"type":176,"value":280},{"type":170,"tag":195,"props":3366,"children":3367},{"style":218},[3368],{"type":176,"value":3369},"map",{"type":170,"tag":195,"props":3371,"children":3372},{"style":266},[3373],{"type":176,"value":227},{"type":170,"tag":195,"props":3375,"children":3376},{"style":212},[3377],{"type":176,"value":215},{"type":170,"tag":195,"props":3379,"children":3380},{"style":224},[3381],{"type":176,"value":227},{"type":170,"tag":195,"props":3383,"children":3384},{"style":230},[3385],{"type":176,"value":2705},{"type":170,"tag":195,"props":3387,"children":3388},{"style":224},[3389],{"type":176,"value":248},{"type":170,"tag":195,"props":3391,"children":3392},{"style":224},[3393],{"type":176,"value":253},{"type":170,"tag":195,"props":3395,"children":3397},{"class":197,"line":3396},31,[3398,3403,3407,3412,3416,3420,3424,3428,3432],{"type":170,"tag":195,"props":3399,"children":3400},{"style":260},[3401],{"type":176,"value":3402},"        return",{"type":170,"tag":195,"props":3404,"children":3405},{"style":757},[3406],{"type":176,"value":2601},{"type":170,"tag":195,"props":3408,"children":3409},{"style":2087},[3410],{"type":176,"value":3411}," Promise",{"type":170,"tag":195,"props":3413,"children":3414},{"style":266},[3415],{"type":176,"value":227},{"type":170,"tag":195,"props":3417,"children":3418},{"style":212},[3419],{"type":176,"value":215},{"type":170,"tag":195,"props":3421,"children":3422},{"style":224},[3423],{"type":176,"value":227},{"type":170,"tag":195,"props":3425,"children":3426},{"style":230},[3427],{"type":176,"value":1002},{"type":170,"tag":195,"props":3429,"children":3430},{"style":224},[3431],{"type":176,"value":248},{"type":170,"tag":195,"props":3433,"children":3434},{"style":224},[3435],{"type":176,"value":253},{"type":170,"tag":195,"props":3437,"children":3439},{"class":197,"line":3438},32,[3440,3445,3449,3453,3457,3461],{"type":170,"tag":195,"props":3441,"children":3442},{"style":272},[3443],{"type":176,"value":3444},"          w",{"type":170,"tag":195,"props":3446,"children":3447},{"style":224},[3448],{"type":176,"value":280},{"type":170,"tag":195,"props":3450,"children":3451},{"style":218},[3452],{"type":176,"value":2345},{"type":170,"tag":195,"props":3454,"children":3455},{"style":266},[3456],{"type":176,"value":227},{"type":170,"tag":195,"props":3458,"children":3459},{"style":272},[3460],{"type":176,"value":1002},{"type":170,"tag":195,"props":3462,"children":3463},{"style":266},[3464],{"type":176,"value":387},{"type":170,"tag":195,"props":3466,"children":3468},{"class":197,"line":3467},33,[3469,3474],{"type":170,"tag":195,"props":3470,"children":3471},{"style":224},[3472],{"type":176,"value":3473},"        }",{"type":170,"tag":195,"props":3475,"children":3476},{"style":266},[3477],{"type":176,"value":387},{"type":170,"tag":195,"props":3479,"children":3481},{"class":197,"line":3480},34,[3482,3486],{"type":170,"tag":195,"props":3483,"children":3484},{"style":224},[3485],{"type":176,"value":885},{"type":170,"tag":195,"props":3487,"children":3488},{"style":266},[3489],{"type":176,"value":387},{"type":170,"tag":195,"props":3491,"children":3493},{"class":197,"line":3492},35,[3494,3499,3503,3508,3512,3517,3521,3525,3530,3534,3538,3542,3547,3551],{"type":170,"tag":195,"props":3495,"children":3496},{"style":2087},[3497],{"type":176,"value":3498},"      Promise",{"type":170,"tag":195,"props":3500,"children":3501},{"style":224},[3502],{"type":176,"value":280},{"type":170,"tag":195,"props":3504,"children":3505},{"style":218},[3506],{"type":176,"value":3507},"all",{"type":170,"tag":195,"props":3509,"children":3510},{"style":266},[3511],{"type":176,"value":227},{"type":170,"tag":195,"props":3513,"children":3514},{"style":272},[3515],{"type":176,"value":3516},"promises",{"type":170,"tag":195,"props":3518,"children":3519},{"style":266},[3520],{"type":176,"value":248},{"type":170,"tag":195,"props":3522,"children":3523},{"style":224},[3524],{"type":176,"value":280},{"type":170,"tag":195,"props":3526,"children":3527},{"style":218},[3528],{"type":176,"value":3529},"then",{"type":170,"tag":195,"props":3531,"children":3532},{"style":266},[3533],{"type":176,"value":227},{"type":170,"tag":195,"props":3535,"children":3536},{"style":212},[3537],{"type":176,"value":215},{"type":170,"tag":195,"props":3539,"children":3540},{"style":224},[3541],{"type":176,"value":227},{"type":170,"tag":195,"props":3543,"children":3544},{"style":230},[3545],{"type":176,"value":3546},"result",{"type":170,"tag":195,"props":3548,"children":3549},{"style":224},[3550],{"type":176,"value":248},{"type":170,"tag":195,"props":3552,"children":3553},{"style":224},[3554],{"type":176,"value":253},{"type":170,"tag":195,"props":3556,"children":3558},{"class":197,"line":3557},36,[3559,3563,3568,3572,3577,3581,3586,3590,3594],{"type":170,"tag":195,"props":3560,"children":3561},{"style":212},[3562],{"type":176,"value":749},{"type":170,"tag":195,"props":3564,"children":3565},{"style":272},[3566],{"type":176,"value":3567}," ret",{"type":170,"tag":195,"props":3569,"children":3570},{"style":757},[3571],{"type":176,"value":760},{"type":170,"tag":195,"props":3573,"children":3574},{"style":218},[3575],{"type":176,"value":3576}," unique",{"type":170,"tag":195,"props":3578,"children":3579},{"style":266},[3580],{"type":176,"value":227},{"type":170,"tag":195,"props":3582,"children":3583},{"style":218},[3584],{"type":176,"value":3585},"flat1",{"type":170,"tag":195,"props":3587,"children":3588},{"style":266},[3589],{"type":176,"value":227},{"type":170,"tag":195,"props":3591,"children":3592},{"style":272},[3593],{"type":176,"value":3546},{"type":170,"tag":195,"props":3595,"children":3596},{"style":266},[3597],{"type":176,"value":2850},{"type":170,"tag":195,"props":3599,"children":3601},{"class":197,"line":3600},37,[3602,3607,3611,3616],{"type":170,"tag":195,"props":3603,"children":3604},{"style":218},[3605],{"type":176,"value":3606},"        fn",{"type":170,"tag":195,"props":3608,"children":3609},{"style":266},[3610],{"type":176,"value":227},{"type":170,"tag":195,"props":3612,"children":3613},{"style":272},[3614],{"type":176,"value":3615},"ret",{"type":170,"tag":195,"props":3617,"children":3618},{"style":266},[3619],{"type":176,"value":387},{"type":170,"tag":195,"props":3621,"children":3623},{"class":197,"line":3622},38,[3624,3628],{"type":170,"tag":195,"props":3625,"children":3626},{"style":224},[3627],{"type":176,"value":885},{"type":170,"tag":195,"props":3629,"children":3630},{"style":266},[3631],{"type":176,"value":387},{"type":170,"tag":195,"props":3633,"children":3635},{"class":197,"line":3634},39,[3636],{"type":170,"tag":195,"props":3637,"children":3638},{"style":224},[3639],{"type":176,"value":1193},{"type":170,"tag":195,"props":3641,"children":3643},{"class":197,"line":3642},40,[3644],{"type":170,"tag":195,"props":3645,"children":3646},{"style":224},[3647],{"type":176,"value":418},{"type":170,"tag":195,"props":3649,"children":3651},{"class":197,"line":3650},41,[3652],{"type":170,"tag":195,"props":3653,"children":3654},{"emptyLinePlaceholder":162},[3655],{"type":176,"value":1428},{"type":170,"tag":195,"props":3657,"children":3659},{"class":197,"line":3658},42,[3660,3664,3668,3672,3676],{"type":170,"tag":195,"props":3661,"children":3662},{"style":260},[3663],{"type":176,"value":2519},{"type":170,"tag":195,"props":3665,"children":3666},{"style":272},[3667],{"type":176,"value":2592},{"type":170,"tag":195,"props":3669,"children":3670},{"style":224},[3671],{"type":176,"value":280},{"type":170,"tag":195,"props":3673,"children":3674},{"style":218},[3675],{"type":176,"value":2108},{"type":170,"tag":195,"props":3677,"children":3678},{"style":266},[3679],{"type":176,"value":1703},{"type":170,"tag":195,"props":3681,"children":3683},{"class":197,"line":3682},43,[3684],{"type":170,"tag":195,"props":3685,"children":3686},{"style":224},[3687],{"type":176,"value":919},{"type":170,"tag":171,"props":3689,"children":3691},{"id":3690},"工具函数",[3692],{"type":176,"value":3690},{"type":170,"tag":178,"props":3694,"children":3695},{},[3696],{"type":176,"value":3697},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":170,"tag":184,"props":3699,"children":3701},{"className":186,"code":3700,"language":188,"meta":163,"style":163},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3702],{"type":170,"tag":191,"props":3703,"children":3704},{"__ignoreMap":163},[3705,3733,3796,3837,3848],{"type":170,"tag":195,"props":3706,"children":3707},{"class":197,"line":198},[3708,3712,3716,3720,3725,3729],{"type":170,"tag":195,"props":3709,"children":3710},{"style":212},[3711],{"type":176,"value":215},{"type":170,"tag":195,"props":3713,"children":3714},{"style":218},[3715],{"type":176,"value":3576},{"type":170,"tag":195,"props":3717,"children":3718},{"style":224},[3719],{"type":176,"value":227},{"type":170,"tag":195,"props":3721,"children":3722},{"style":230},[3723],{"type":176,"value":3724},"arr",{"type":170,"tag":195,"props":3726,"children":3727},{"style":224},[3728],{"type":176,"value":248},{"type":170,"tag":195,"props":3730,"children":3731},{"style":224},[3732],{"type":176,"value":253},{"type":170,"tag":195,"props":3734,"children":3735},{"class":197,"line":208},[3736,3740,3745,3749,3754,3758,3762,3766,3771,3775,3780,3784,3788,3792],{"type":170,"tag":195,"props":3737,"children":3738},{"style":260},[3739],{"type":176,"value":2519},{"type":170,"tag":195,"props":3741,"children":3742},{"style":272},[3743],{"type":176,"value":3744}," arr",{"type":170,"tag":195,"props":3746,"children":3747},{"style":224},[3748],{"type":176,"value":280},{"type":170,"tag":195,"props":3750,"children":3751},{"style":218},[3752],{"type":176,"value":3753},"filter",{"type":170,"tag":195,"props":3755,"children":3756},{"style":266},[3757],{"type":176,"value":227},{"type":170,"tag":195,"props":3759,"children":3760},{"style":212},[3761],{"type":176,"value":215},{"type":170,"tag":195,"props":3763,"children":3764},{"style":224},[3765],{"type":176,"value":227},{"type":170,"tag":195,"props":3767,"children":3768},{"style":230},[3769],{"type":176,"value":3770},"v",{"type":170,"tag":195,"props":3772,"children":3773},{"style":224},[3774],{"type":176,"value":238},{"type":170,"tag":195,"props":3776,"children":3777},{"style":230},[3778],{"type":176,"value":3779}," i",{"type":170,"tag":195,"props":3781,"children":3782},{"style":224},[3783],{"type":176,"value":238},{"type":170,"tag":195,"props":3785,"children":3786},{"style":230},[3787],{"type":176,"value":2157},{"type":170,"tag":195,"props":3789,"children":3790},{"style":224},[3791],{"type":176,"value":248},{"type":170,"tag":195,"props":3793,"children":3794},{"style":224},[3795],{"type":176,"value":253},{"type":170,"tag":195,"props":3797,"children":3798},{"class":197,"line":256},[3799,3803,3807,3811,3816,3820,3824,3828,3832],{"type":170,"tag":195,"props":3800,"children":3801},{"style":260},[3802],{"type":176,"value":1565},{"type":170,"tag":195,"props":3804,"children":3805},{"style":272},[3806],{"type":176,"value":2157},{"type":170,"tag":195,"props":3808,"children":3809},{"style":224},[3810],{"type":176,"value":280},{"type":170,"tag":195,"props":3812,"children":3813},{"style":218},[3814],{"type":176,"value":3815},"indexOf",{"type":170,"tag":195,"props":3817,"children":3818},{"style":266},[3819],{"type":176,"value":227},{"type":170,"tag":195,"props":3821,"children":3822},{"style":272},[3823],{"type":176,"value":3770},{"type":170,"tag":195,"props":3825,"children":3826},{"style":266},[3827],{"type":176,"value":681},{"type":170,"tag":195,"props":3829,"children":3830},{"style":757},[3831],{"type":176,"value":1137},{"type":170,"tag":195,"props":3833,"children":3834},{"style":272},[3835],{"type":176,"value":3836}," i\n",{"type":170,"tag":195,"props":3838,"children":3839},{"class":197,"line":306},[3840,3844],{"type":170,"tag":195,"props":3841,"children":3842},{"style":224},[3843],{"type":176,"value":1201},{"type":170,"tag":195,"props":3845,"children":3846},{"style":266},[3847],{"type":176,"value":387},{"type":170,"tag":195,"props":3849,"children":3850},{"class":197,"line":358},[3851],{"type":170,"tag":195,"props":3852,"children":3853},{"style":224},[3854],{"type":176,"value":919},{"type":170,"tag":178,"props":3856,"children":3857},{},[3858],{"type":176,"value":3859},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":170,"tag":184,"props":3861,"children":3863},{"className":186,"code":3862,"language":188,"meta":163,"style":163},"const getUUID = () => Math.random().toString(16).substr(2)\n",[3864],{"type":170,"tag":191,"props":3865,"children":3866},{"__ignoreMap":163},[3867],{"type":170,"tag":195,"props":3868,"children":3869},{"class":197,"line":198},[3870,3875,3881,3885,3890,3895,3900,3904,3909,3913,3917,3922,3926,3931,3935,3939,3944,3948,3953],{"type":170,"tag":195,"props":3871,"children":3872},{"style":212},[3873],{"type":176,"value":3874},"const",{"type":170,"tag":195,"props":3876,"children":3878},{"style":3877},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[3879],{"type":176,"value":3880}," getUUID",{"type":170,"tag":195,"props":3882,"children":3883},{"style":757},[3884],{"type":176,"value":760},{"type":170,"tag":195,"props":3886,"children":3887},{"style":224},[3888],{"type":176,"value":3889}," ()",{"type":170,"tag":195,"props":3891,"children":3892},{"style":212},[3893],{"type":176,"value":3894}," =>",{"type":170,"tag":195,"props":3896,"children":3897},{"style":272},[3898],{"type":176,"value":3899}," Math",{"type":170,"tag":195,"props":3901,"children":3902},{"style":224},[3903],{"type":176,"value":280},{"type":170,"tag":195,"props":3905,"children":3906},{"style":218},[3907],{"type":176,"value":3908},"random",{"type":170,"tag":195,"props":3910,"children":3911},{"style":272},[3912],{"type":176,"value":1678},{"type":170,"tag":195,"props":3914,"children":3915},{"style":224},[3916],{"type":176,"value":280},{"type":170,"tag":195,"props":3918,"children":3919},{"style":218},[3920],{"type":176,"value":3921},"toString",{"type":170,"tag":195,"props":3923,"children":3924},{"style":272},[3925],{"type":176,"value":227},{"type":170,"tag":195,"props":3927,"children":3928},{"style":1786},[3929],{"type":176,"value":3930},"16",{"type":170,"tag":195,"props":3932,"children":3933},{"style":272},[3934],{"type":176,"value":248},{"type":170,"tag":195,"props":3936,"children":3937},{"style":224},[3938],{"type":176,"value":280},{"type":170,"tag":195,"props":3940,"children":3941},{"style":218},[3942],{"type":176,"value":3943},"substr",{"type":170,"tag":195,"props":3945,"children":3946},{"style":272},[3947],{"type":176,"value":227},{"type":170,"tag":195,"props":3949,"children":3950},{"style":1786},[3951],{"type":176,"value":3952},"2",{"type":170,"tag":195,"props":3954,"children":3955},{"style":272},[3956],{"type":176,"value":387},{"type":170,"tag":171,"props":3958,"children":3960},{"id":3959},"考虑的点",[3961],{"type":176,"value":3959},{"type":170,"tag":178,"props":3963,"children":3964},{},[3965],{"type":176,"value":3966},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":170,"tag":3968,"props":3969,"children":3970},"ul",{},[3971,3977,3982,3987],{"type":170,"tag":3972,"props":3973,"children":3974},"li",{},[3975],{"type":176,"value":3976},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":170,"tag":3972,"props":3978,"children":3979},{},[3980],{"type":176,"value":3981},"支持本地符号路径吗？支持网络路径吗？",{"type":170,"tag":3972,"props":3983,"children":3984},{},[3985],{"type":176,"value":3986},"如何控制包的大小？",{"type":170,"tag":3972,"props":3988,"children":3989},{},[3990],{"type":176,"value":3991},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":170,"tag":178,"props":3993,"children":3994},{},[3995],{"type":176,"value":3996},"也注意到一些有意思的问题：",{"type":170,"tag":3968,"props":3998,"children":3999},{},[4000,4012,4024],{"type":170,"tag":3972,"props":4001,"children":4002},{},[4003,4005],{"type":176,"value":4004},"Windows，删除正在监听的文件夹，",{"type":170,"tag":926,"props":4006,"children":4009},{"href":4007,"rel":4008},"https://github.com/nodejs/node/issues/31702",[930],[4010],{"type":176,"value":4011},"会发生什么事情？",{"type":170,"tag":3972,"props":4013,"children":4014},{},[4015,4017],{"type":176,"value":4016},"Linux，单个进程能操作的文件数量有上限，",{"type":170,"tag":926,"props":4018,"children":4021},{"href":4019,"rel":4020},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[930],[4022],{"type":176,"value":4023},"该怎么解决？",{"type":170,"tag":3972,"props":4025,"children":4026},{},[4027,4029],{"type":176,"value":4028},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":170,"tag":926,"props":4030,"children":4033},{"href":4031,"rel":4032},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[930],[4034],{"type":176,"value":4035},"怎么处理呢？",{"type":170,"tag":171,"props":4037,"children":4039},{"id":4038},"题外话",[4040],{"type":176,"value":4038},{"type":170,"tag":4042,"props":4043,"children":4046},"l-link",{"label":4044,"source":4045},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":170,"tag":178,"props":4048,"children":4049},{},[4050],{"type":176,"value":4051},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":170,"tag":171,"props":4053,"children":4055},{"id":4054},"其它资料",[4056],{"type":176,"value":4054},{"type":170,"tag":178,"props":4058,"children":4059},{},[4060],{"type":176,"value":4061},"相关类库：",{"type":170,"tag":3968,"props":4063,"children":4064},{},[4065,4074,4084],{"type":170,"tag":3972,"props":4066,"children":4067},{},[4068],{"type":170,"tag":926,"props":4069,"children":4072},{"href":4070,"rel":4071},"https://www.npmjs.com/package/watcher",[930],[4073],{"type":176,"value":1808},{"type":170,"tag":3972,"props":4075,"children":4076},{},[4077],{"type":170,"tag":926,"props":4078,"children":4081},{"href":4079,"rel":4080},"https://github.com/paulmillr/chokidar",[930],[4082],{"type":176,"value":4083},"chokidar",{"type":170,"tag":3972,"props":4085,"children":4086},{},[4087],{"type":170,"tag":926,"props":4088,"children":4091},{"href":4089,"rel":4090},"https://github.com/Axosoft/nsfw",[930],[4092],{"type":176,"value":4093},"nsfw",{"type":170,"tag":178,"props":4095,"children":4096},{},[4097],{"type":176,"value":4098},"推荐阅读：",{"type":170,"tag":3968,"props":4100,"children":4101},{},[4102,4112],{"type":170,"tag":3972,"props":4103,"children":4104},{},[4105],{"type":170,"tag":926,"props":4106,"children":4109},{"href":4107,"rel":4108},"https://juejin.cn/post/7000262974430511117",[930],[4110],{"type":176,"value":4111},"《node-watch、Chokidar封装思路解析》",{"type":170,"tag":3972,"props":4113,"children":4114},{},[4115],{"type":170,"tag":926,"props":4116,"children":4119},{"href":4117,"rel":4118},"https://www.jianshu.com/p/09dae09457fa",[930],[4120],{"type":176,"value":4121},"《如何利用 Nodejs 监听文件夹》",{"type":170,"tag":4123,"props":4124,"children":4125},"style",{},[4126],{"type":176,"value":4127},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":208,"depth":208,"links":4129},[4130,4131,4132,4133,4134],{"id":173,"depth":208,"text":173},{"id":3690,"depth":208,"text":3690},{"id":3959,"depth":208,"text":3959},{"id":4038,"depth":208,"text":4038},{"id":4054,"depth":208,"text":4054},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","8.source-code/_node/node-watch","md",[4142,4146],{"_path":4143,"title":4144,"description":4145},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4147,"title":4148,"description":4149},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",1742958695425]