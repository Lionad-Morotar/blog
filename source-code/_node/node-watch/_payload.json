[{"data":1,"prerenderedAt":4376},["Reactive",2],{"navigation":3,"/source-code/_node/node-watch":386,"/source-code/_node/node-watch-surround":4368},[4,32,80,96,123,129,135,369,375,381],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":42,"_path":43},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":45,"_path":46},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":48,"_path":49},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":51,"_path":52},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":54,"_path":55},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":57,"_path":58},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":60,"_path":61},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":63,"_path":64},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":66,"_path":67},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":69,"_path":70},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":72,"_path":73},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":75,"_path":76},"🚝 四十二篇系列","/articles/fourty-two",{"title":78,"_path":79},"📝 技术博客归档","/articles/fold",{"title":81,"_path":82,"children":83},"造物 / Make","/tools",[84,87,90,93],{"title":85,"_path":86},"🌐 AnySort","/tools/anysort",{"title":88,"_path":89},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":91,"_path":92},"👓 Crapto","/tools/crypto-inline",{"title":94,"_path":95},"🖨️ any-to-base64","/tools/any-to-base64",{"title":97,"_path":98,"children":99},"吉他剧场 / Music","/music",[100,102,105,108,111,114,117,120],{"title":101,"_path":98},"🎸 FingerStyle！",{"title":103,"_path":104},"🌬️ 等待的风","/music/wind",{"title":106,"_path":107},"💕 约定的海洋","/music/ocean",{"title":109,"_path":110},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":112,"_path":113},"🌏 残酷天使的行动纲领","/music/eva",{"title":115,"_path":116},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":118,"_path":119},"🍷 Wu Wei","/music/wu-wei",{"title":121,"_path":122},"🌅 无题","/music/untitled",{"title":124,"_path":125,"children":126},"画点什么 / Paint","/paint",[127],{"title":128,"_path":125},"🚧 正在施工",{"title":130,"_path":131,"children":132},"知识地图 / Maps","/maps",[133],{"title":134,"_path":131},"🏁 知识地图",{"title":136,"_path":137,"children":138},"零散的笔记 / Gists","/gists",[139,141,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366],{"title":140,"_path":137},"🧊 Gists",{"title":142,"_path":143},"网站的可访问性","/gists/accessibility",{"title":145,"_path":146},"Bit","/gists/bit",{"title":148,"_path":149},"图片模糊","/gists/blur",{"title":151,"_path":152},"渲染相关笔记","/gists/c4d",{"title":154,"_path":155},"CDN 问题记录","/gists/cdn",{"title":157,"_path":158},"消毒剂","/gists/cleaner",{"title":160,"_path":161},"Windows Command","/gists/cmd",{"title":163,"_path":164},"Command","/gists/command",{"title":166,"_path":167},"复杂科学","/gists/complexity-science",{"title":169,"_path":170},"宇宙","/gists/cosmos",{"title":172,"_path":173},"C++","/gists/cpp",{"title":175,"_path":176},"Data Structure","/gists/data-structure",{"title":178,"_path":179},"DEPRESSION","/gists/depression",{"title":181,"_path":182},"设计模式","/gists/design-patterns",{"title":184,"_path":185},"Developer Experience","/gists/developer-experience",{"title":187,"_path":188},"Device Metrics","/gists/device-metrix",{"title":190,"_path":191},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":193,"_path":194},"正则表达式","/gists/eegex",{"title":196,"_path":197},"Emoji","/gists/emoji",{"title":199,"_path":200},"工程","/gists/engineering",{"title":202,"_path":203},"熵","/gists/entropy",{"title":205,"_path":206},"Environment","/gists/environment",{"title":208,"_path":209},"Erlang","/gists/erlang",{"title":211,"_path":212},"逃离塔克夫","/gists/escape-from-tarkov",{"title":214,"_path":215},"ESNext (ES6-ES11)","/gists/esnext",{"title":217,"_path":218},"Eval！","/gists/eval",{"title":220,"_path":221},"Flutter","/gists/flutter",{"title":223,"_path":224},"字体","/gists/font",{"title":226,"_path":227},"JS 函数式编程","/gists/functional",{"title":229,"_path":230},"Google C++ Standard","/gists/google-cpp-standard",{"title":232,"_path":233},"双向链接完全体","/gists/graph",{"title":235,"_path":236},"Hardwares","/gists/hardwares",{"title":238,"_path":239},"哈希冲突","/gists/hash-collision",{"title":241,"_path":242},"信息设计","/gists/information-design",{"title":244,"_path":245},"InstantPage","/gists/instant.page",{"title":247,"_path":248},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":250,"_path":251},"KVStore","/gists/key-value-db",{"title":253,"_path":254},"Kubernetes","/gists/kubernetes",{"title":256,"_path":257},"Makefile","/gists/makefile",{"title":259,"_path":260},"Markdown Inline Style","/gists/markdown-nice",{"title":262,"_path":263},"小程序","/gists/miniapp",{"title":265,"_path":266},"减小页面快照体积","/gists/minify-html",{"title":268,"_path":269},"mklink","/gists/mklink",{"title":271,"_path":272},"Mock","/gists/mock",{"title":274,"_path":275},"多端应用","/gists/multy-end-app",{"title":277,"_path":278},"神经科学","/gists/neuroscience",{"title":280,"_path":281},"OO","/gists/oo",{"title":283,"_path":284},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":286,"_path":287},"人物","/gists/person",{"title":289,"_path":290},"PInvoke","/gists/pinvoke",{"title":292,"_path":293},"像素","/gists/pixel",{"title":295,"_path":296},"PowerShell","/gists/powershell",{"title":298,"_path":299},"量子","/gists/quantum",{"title":301,"_path":302},"保持好奇心","/gists/questions",{"title":304,"_path":305},"React Native","/gists/react-native",{"title":307,"_path":308},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":310,"_path":311},"SEO","/gists/seo",{"title":313,"_path":314},"Shader","/gists/shader",{"title":316,"_path":317},"Shape Up","/gists/shape-up",{"title":319,"_path":320},"睡觉","/gists/sleep",{"title":322,"_path":323},"States","/gists/states",{"title":325,"_path":326},"Storage","/gists/storage",{"title":328,"_path":329},"音视频流处理","/gists/stream-cli",{"title":331,"_path":332},"Symbol","/gists/symbol",{"title":334,"_path":335},"系统论","/gists/systems-theory",{"title":337,"_path":338},"Taro","/gists/taro",{"title":340,"_path":341},"任务切片","/gists/task-slice",{"title":343,"_path":344},"技术偏好","/gists/tech-dudge",{"title":346,"_path":347},"Untitled","/gists/untitled",{"title":349,"_path":350},"可变字体","/gists/variable-font",{"title":352,"_path":353},"视觉错觉","/gists/visual-illusion",{"title":355,"_path":356},"SS(SSR)","/gists/vpn",{"title":358,"_path":359},"VS Code 插件开发","/gists/vscode-plugin",{"title":361,"_path":362},"Web Components","/gists/web-components",{"title":364,"_path":365},"Windows","/gists/windows",{"title":367,"_path":368},"查缺补漏","/gists/wrong",{"title":370,"_path":371,"children":372},"代码笔记 / Gists","/source-code",[373],{"title":374,"_path":371},"🚄 代码笔记",{"title":376,"_path":377,"children":378},"我 / Abount","/hire",[379],{"title":380,"_path":377},"📬 技术简历",{"title":382,"_path":383,"children":384},"todo","/todo",[385],{"title":382,"_path":383},{"_path":387,"_dir":388,"_draft":389,"_partial":390,"_locale":391,"title":392,"description":393,"body":394,"_type":4363,"_id":4364,"_source":4365,"_file":4366,"_extension":4367},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":395,"children":396,"toc":4356},"root",[397,405,411,1148,1164,1441,1446,1623,1628,2298,2303,2760,2765,3916,3921,3926,4083,4088,4185,4190,4195,4220,4225,4264,4269,4275,4280,4285,4290,4322,4327,4350],{"type":398,"tag":399,"props":400,"children":402},"element","h2",{"id":401},"实现",[403],{"type":404,"value":401},"text",{"type":398,"tag":406,"props":407,"children":408},"p",{},[409],{"type":404,"value":410},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":398,"tag":412,"props":413,"children":417},"pre",{"className":414,"code":415,"language":416,"meta":391,"style":391},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[418],{"type":398,"tag":419,"props":420,"children":421},"code",{"__ignoreMap":391},[422,434,482,532,584,616,629,638,647,688,746,771,809,818,830,888,920,969,1023,1067,1096,1105,1118,1131,1139],{"type":398,"tag":423,"props":424,"children":427},"span",{"class":425,"line":426},"line",1,[428],{"type":398,"tag":423,"props":429,"children":431},{"style":430},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[432],{"type":404,"value":433},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":398,"tag":423,"props":435,"children":437},{"class":425,"line":436},2,[438,444,450,456,462,467,472,477],{"type":398,"tag":423,"props":439,"children":441},{"style":440},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[442],{"type":404,"value":443},"function",{"type":398,"tag":423,"props":445,"children":447},{"style":446},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[448],{"type":404,"value":449}," watch",{"type":398,"tag":423,"props":451,"children":453},{"style":452},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[454],{"type":404,"value":455},"(",{"type":398,"tag":423,"props":457,"children":459},{"style":458},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[460],{"type":404,"value":461},"dir",{"type":398,"tag":423,"props":463,"children":464},{"style":452},[465],{"type":404,"value":466},",",{"type":398,"tag":423,"props":468,"children":469},{"style":458},[470],{"type":404,"value":471}," cb",{"type":398,"tag":423,"props":473,"children":474},{"style":452},[475],{"type":404,"value":476},")",{"type":398,"tag":423,"props":478,"children":479},{"style":452},[480],{"type":404,"value":481}," {\n",{"type":398,"tag":423,"props":483,"children":485},{"class":425,"line":484},3,[486,492,498,504,509,514,518,522,527],{"type":398,"tag":423,"props":487,"children":489},{"style":488},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[490],{"type":404,"value":491},"  if",{"type":398,"tag":423,"props":493,"children":495},{"style":494},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[496],{"type":404,"value":497}," (",{"type":398,"tag":423,"props":499,"children":501},{"style":500},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[502],{"type":404,"value":503},"is",{"type":398,"tag":423,"props":505,"children":506},{"style":452},[507],{"type":404,"value":508},".",{"type":398,"tag":423,"props":510,"children":511},{"style":446},[512],{"type":404,"value":513},"File",{"type":398,"tag":423,"props":515,"children":516},{"style":494},[517],{"type":404,"value":455},{"type":398,"tag":423,"props":519,"children":520},{"style":500},[521],{"type":404,"value":461},{"type":398,"tag":423,"props":523,"children":524},{"style":494},[525],{"type":404,"value":526},")) ",{"type":398,"tag":423,"props":528,"children":529},{"style":452},[530],{"type":404,"value":531},"{\n",{"type":398,"tag":423,"props":533,"children":535},{"class":425,"line":534},4,[536,541,545,550,554,558,562,567,571,576,580],{"type":398,"tag":423,"props":537,"children":538},{"style":500},[539],{"type":404,"value":540},"    fs",{"type":398,"tag":423,"props":542,"children":543},{"style":452},[544],{"type":404,"value":508},{"type":398,"tag":423,"props":546,"children":547},{"style":446},[548],{"type":404,"value":549},"watchFile",{"type":398,"tag":423,"props":551,"children":552},{"style":494},[553],{"type":404,"value":455},{"type":398,"tag":423,"props":555,"children":556},{"style":500},[557],{"type":404,"value":461},{"type":398,"tag":423,"props":559,"children":560},{"style":452},[561],{"type":404,"value":466},{"type":398,"tag":423,"props":563,"children":564},{"style":440},[565],{"type":404,"value":566}," function",{"type":398,"tag":423,"props":568,"children":569},{"style":452},[570],{"type":404,"value":455},{"type":398,"tag":423,"props":572,"children":573},{"style":458},[574],{"type":404,"value":575},"err",{"type":398,"tag":423,"props":577,"children":578},{"style":452},[579],{"type":404,"value":476},{"type":398,"tag":423,"props":581,"children":582},{"style":452},[583],{"type":404,"value":481},{"type":398,"tag":423,"props":585,"children":587},{"class":425,"line":586},5,[588,593,597,602,606,611],{"type":398,"tag":423,"props":589,"children":590},{"style":446},[591],{"type":404,"value":592},"      normalizeCall",{"type":398,"tag":423,"props":594,"children":595},{"style":494},[596],{"type":404,"value":455},{"type":398,"tag":423,"props":598,"children":599},{"style":500},[600],{"type":404,"value":601},"cb",{"type":398,"tag":423,"props":603,"children":604},{"style":452},[605],{"type":404,"value":466},{"type":398,"tag":423,"props":607,"children":608},{"style":500},[609],{"type":404,"value":610}," dir",{"type":398,"tag":423,"props":612,"children":613},{"style":494},[614],{"type":404,"value":615},")\n",{"type":398,"tag":423,"props":617,"children":619},{"class":425,"line":618},6,[620,625],{"type":398,"tag":423,"props":621,"children":622},{"style":452},[623],{"type":404,"value":624},"    }",{"type":398,"tag":423,"props":626,"children":627},{"style":494},[628],{"type":404,"value":615},{"type":398,"tag":423,"props":630,"children":632},{"class":425,"line":631},7,[633],{"type":398,"tag":423,"props":634,"children":635},{"style":488},[636],{"type":404,"value":637},"    return\n",{"type":398,"tag":423,"props":639,"children":641},{"class":425,"line":640},8,[642],{"type":398,"tag":423,"props":643,"children":644},{"style":452},[645],{"type":404,"value":646},"  }\n",{"type":398,"tag":423,"props":648,"children":650},{"class":425,"line":649},9,[651,655,659,663,667,672,676,680,684],{"type":398,"tag":423,"props":652,"children":653},{"style":488},[654],{"type":404,"value":491},{"type":398,"tag":423,"props":656,"children":657},{"style":494},[658],{"type":404,"value":497},{"type":398,"tag":423,"props":660,"children":661},{"style":500},[662],{"type":404,"value":503},{"type":398,"tag":423,"props":664,"children":665},{"style":452},[666],{"type":404,"value":508},{"type":398,"tag":423,"props":668,"children":669},{"style":446},[670],{"type":404,"value":671},"Directory",{"type":398,"tag":423,"props":673,"children":674},{"style":494},[675],{"type":404,"value":455},{"type":398,"tag":423,"props":677,"children":678},{"style":500},[679],{"type":404,"value":461},{"type":398,"tag":423,"props":681,"children":682},{"style":494},[683],{"type":404,"value":526},{"type":398,"tag":423,"props":685,"children":686},{"style":452},[687],{"type":404,"value":531},{"type":398,"tag":423,"props":689,"children":691},{"class":425,"line":690},10,[692,696,700,705,709,713,717,721,725,729,733,738,742],{"type":398,"tag":423,"props":693,"children":694},{"style":500},[695],{"type":404,"value":540},{"type":398,"tag":423,"props":697,"children":698},{"style":452},[699],{"type":404,"value":508},{"type":398,"tag":423,"props":701,"children":702},{"style":446},[703],{"type":404,"value":704},"watch",{"type":398,"tag":423,"props":706,"children":707},{"style":494},[708],{"type":404,"value":455},{"type":398,"tag":423,"props":710,"children":711},{"style":500},[712],{"type":404,"value":461},{"type":398,"tag":423,"props":714,"children":715},{"style":452},[716],{"type":404,"value":466},{"type":398,"tag":423,"props":718,"children":719},{"style":440},[720],{"type":404,"value":566},{"type":398,"tag":423,"props":722,"children":723},{"style":452},[724],{"type":404,"value":455},{"type":398,"tag":423,"props":726,"children":727},{"style":458},[728],{"type":404,"value":575},{"type":398,"tag":423,"props":730,"children":731},{"style":452},[732],{"type":404,"value":466},{"type":398,"tag":423,"props":734,"children":735},{"style":458},[736],{"type":404,"value":737}," fname",{"type":398,"tag":423,"props":739,"children":740},{"style":452},[741],{"type":404,"value":476},{"type":398,"tag":423,"props":743,"children":744},{"style":452},[745],{"type":404,"value":481},{"type":398,"tag":423,"props":747,"children":749},{"class":425,"line":748},11,[750,754,758,762,766],{"type":398,"tag":423,"props":751,"children":752},{"style":446},[753],{"type":404,"value":592},{"type":398,"tag":423,"props":755,"children":756},{"style":494},[757],{"type":404,"value":455},{"type":398,"tag":423,"props":759,"children":760},{"style":500},[761],{"type":404,"value":601},{"type":398,"tag":423,"props":763,"children":764},{"style":452},[765],{"type":404,"value":466},{"type":398,"tag":423,"props":767,"children":768},{"style":494},[769],{"type":404,"value":770},"  \n",{"type":398,"tag":423,"props":772,"children":774},{"class":425,"line":773},12,[775,780,784,789,793,797,801,805],{"type":398,"tag":423,"props":776,"children":777},{"style":500},[778],{"type":404,"value":779},"        path",{"type":398,"tag":423,"props":781,"children":782},{"style":452},[783],{"type":404,"value":508},{"type":398,"tag":423,"props":785,"children":786},{"style":446},[787],{"type":404,"value":788},"join",{"type":398,"tag":423,"props":790,"children":791},{"style":494},[792],{"type":404,"value":455},{"type":398,"tag":423,"props":794,"children":795},{"style":500},[796],{"type":404,"value":461},{"type":398,"tag":423,"props":798,"children":799},{"style":452},[800],{"type":404,"value":466},{"type":398,"tag":423,"props":802,"children":803},{"style":500},[804],{"type":404,"value":737},{"type":398,"tag":423,"props":806,"children":807},{"style":494},[808],{"type":404,"value":615},{"type":398,"tag":423,"props":810,"children":812},{"class":425,"line":811},13,[813],{"type":398,"tag":423,"props":814,"children":815},{"style":494},[816],{"type":404,"value":817},"      )\n",{"type":398,"tag":423,"props":819,"children":821},{"class":425,"line":820},14,[822,826],{"type":398,"tag":423,"props":823,"children":824},{"style":452},[825],{"type":404,"value":624},{"type":398,"tag":423,"props":827,"children":828},{"style":494},[829],{"type":404,"value":615},{"type":398,"tag":423,"props":831,"children":833},{"class":425,"line":832},15,[834,838,842,847,851,855,859,863,867,871,875,880,884],{"type":398,"tag":423,"props":835,"children":836},{"style":500},[837],{"type":404,"value":540},{"type":398,"tag":423,"props":839,"children":840},{"style":452},[841],{"type":404,"value":508},{"type":398,"tag":423,"props":843,"children":844},{"style":446},[845],{"type":404,"value":846},"readdir",{"type":398,"tag":423,"props":848,"children":849},{"style":494},[850],{"type":404,"value":455},{"type":398,"tag":423,"props":852,"children":853},{"style":500},[854],{"type":404,"value":461},{"type":398,"tag":423,"props":856,"children":857},{"style":452},[858],{"type":404,"value":466},{"type":398,"tag":423,"props":860,"children":861},{"style":440},[862],{"type":404,"value":566},{"type":398,"tag":423,"props":864,"children":865},{"style":452},[866],{"type":404,"value":455},{"type":398,"tag":423,"props":868,"children":869},{"style":458},[870],{"type":404,"value":575},{"type":398,"tag":423,"props":872,"children":873},{"style":452},[874],{"type":404,"value":466},{"type":398,"tag":423,"props":876,"children":877},{"style":458},[878],{"type":404,"value":879}," files",{"type":398,"tag":423,"props":881,"children":882},{"style":452},[883],{"type":404,"value":476},{"type":398,"tag":423,"props":885,"children":886},{"style":452},[887],{"type":404,"value":481},{"type":398,"tag":423,"props":889,"children":891},{"class":425,"line":890},16,[892,897,901,905,910,915],{"type":398,"tag":423,"props":893,"children":894},{"style":488},[895],{"type":404,"value":896},"      if",{"type":398,"tag":423,"props":898,"children":899},{"style":494},[900],{"type":404,"value":497},{"type":398,"tag":423,"props":902,"children":903},{"style":500},[904],{"type":404,"value":575},{"type":398,"tag":423,"props":906,"children":907},{"style":494},[908],{"type":404,"value":909},") ",{"type":398,"tag":423,"props":911,"children":912},{"style":488},[913],{"type":404,"value":914},"throw",{"type":398,"tag":423,"props":916,"children":917},{"style":500},[918],{"type":404,"value":919}," err\n",{"type":398,"tag":423,"props":921,"children":923},{"class":425,"line":922},17,[924,929,933,938,942,946,950,955,959,964],{"type":398,"tag":423,"props":925,"children":926},{"style":500},[927],{"type":404,"value":928},"      files",{"type":398,"tag":423,"props":930,"children":931},{"style":452},[932],{"type":404,"value":508},{"type":398,"tag":423,"props":934,"children":935},{"style":446},[936],{"type":404,"value":937},"forEach",{"type":398,"tag":423,"props":939,"children":940},{"style":494},[941],{"type":404,"value":455},{"type":398,"tag":423,"props":943,"children":944},{"style":440},[945],{"type":404,"value":443},{"type":398,"tag":423,"props":947,"children":948},{"style":452},[949],{"type":404,"value":455},{"type":398,"tag":423,"props":951,"children":952},{"style":458},[953],{"type":404,"value":954},"n",{"type":398,"tag":423,"props":956,"children":957},{"style":452},[958],{"type":404,"value":476},{"type":398,"tag":423,"props":960,"children":961},{"style":452},[962],{"type":404,"value":963}," {",{"type":398,"tag":423,"props":965,"children":966},{"style":494},[967],{"type":404,"value":968}," \n",{"type":398,"tag":423,"props":970,"children":972},{"class":425,"line":971},18,[973,978,983,989,994,998,1002,1006,1010,1014,1019],{"type":398,"tag":423,"props":974,"children":975},{"style":440},[976],{"type":404,"value":977},"        var",{"type":398,"tag":423,"props":979,"children":980},{"style":500},[981],{"type":404,"value":982}," file",{"type":398,"tag":423,"props":984,"children":986},{"style":985},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[987],{"type":404,"value":988}," =",{"type":398,"tag":423,"props":990,"children":991},{"style":500},[992],{"type":404,"value":993}," path",{"type":398,"tag":423,"props":995,"children":996},{"style":452},[997],{"type":404,"value":508},{"type":398,"tag":423,"props":999,"children":1000},{"style":446},[1001],{"type":404,"value":788},{"type":398,"tag":423,"props":1003,"children":1004},{"style":494},[1005],{"type":404,"value":455},{"type":398,"tag":423,"props":1007,"children":1008},{"style":500},[1009],{"type":404,"value":461},{"type":398,"tag":423,"props":1011,"children":1012},{"style":452},[1013],{"type":404,"value":466},{"type":398,"tag":423,"props":1015,"children":1016},{"style":500},[1017],{"type":404,"value":1018}," n",{"type":398,"tag":423,"props":1020,"children":1021},{"style":494},[1022],{"type":404,"value":615},{"type":398,"tag":423,"props":1024,"children":1026},{"class":425,"line":1025},19,[1027,1032,1037,1041,1045,1049,1053,1058,1063],{"type":398,"tag":423,"props":1028,"children":1029},{"style":488},[1030],{"type":404,"value":1031},"        if",{"type":398,"tag":423,"props":1033,"children":1034},{"style":494},[1035],{"type":404,"value":1036}," ( ",{"type":398,"tag":423,"props":1038,"children":1039},{"style":500},[1040],{"type":404,"value":503},{"type":398,"tag":423,"props":1042,"children":1043},{"style":452},[1044],{"type":404,"value":508},{"type":398,"tag":423,"props":1046,"children":1047},{"style":446},[1048],{"type":404,"value":671},{"type":398,"tag":423,"props":1050,"children":1051},{"style":494},[1052],{"type":404,"value":455},{"type":398,"tag":423,"props":1054,"children":1055},{"style":500},[1056],{"type":404,"value":1057},"file",{"type":398,"tag":423,"props":1059,"children":1060},{"style":494},[1061],{"type":404,"value":1062},") ) ",{"type":398,"tag":423,"props":1064,"children":1065},{"style":452},[1066],{"type":404,"value":531},{"type":398,"tag":423,"props":1068,"children":1070},{"class":425,"line":1069},20,[1071,1076,1080,1084,1088,1092],{"type":398,"tag":423,"props":1072,"children":1073},{"style":446},[1074],{"type":404,"value":1075},"          watch",{"type":398,"tag":423,"props":1077,"children":1078},{"style":494},[1079],{"type":404,"value":455},{"type":398,"tag":423,"props":1081,"children":1082},{"style":500},[1083],{"type":404,"value":1057},{"type":398,"tag":423,"props":1085,"children":1086},{"style":452},[1087],{"type":404,"value":466},{"type":398,"tag":423,"props":1089,"children":1090},{"style":500},[1091],{"type":404,"value":471},{"type":398,"tag":423,"props":1093,"children":1094},{"style":494},[1095],{"type":404,"value":615},{"type":398,"tag":423,"props":1097,"children":1099},{"class":425,"line":1098},21,[1100],{"type":398,"tag":423,"props":1101,"children":1102},{"style":452},[1103],{"type":404,"value":1104},"        }\n",{"type":398,"tag":423,"props":1106,"children":1108},{"class":425,"line":1107},22,[1109,1114],{"type":398,"tag":423,"props":1110,"children":1111},{"style":452},[1112],{"type":404,"value":1113},"      }",{"type":398,"tag":423,"props":1115,"children":1116},{"style":494},[1117],{"type":404,"value":615},{"type":398,"tag":423,"props":1119,"children":1121},{"class":425,"line":1120},23,[1122,1126],{"type":398,"tag":423,"props":1123,"children":1124},{"style":452},[1125],{"type":404,"value":624},{"type":398,"tag":423,"props":1127,"children":1128},{"style":494},[1129],{"type":404,"value":1130},")     \n",{"type":398,"tag":423,"props":1132,"children":1134},{"class":425,"line":1133},24,[1135],{"type":398,"tag":423,"props":1136,"children":1137},{"style":452},[1138],{"type":404,"value":646},{"type":398,"tag":423,"props":1140,"children":1142},{"class":425,"line":1141},25,[1143],{"type":398,"tag":423,"props":1144,"children":1145},{"style":452},[1146],{"type":404,"value":1147},"}\n",{"type":398,"tag":406,"props":1149,"children":1150},{},[1151,1153,1162],{"type":404,"value":1152},"由于 fs.watchFile 可能导致",{"type":398,"tag":1154,"props":1155,"children":1159},"a",{"href":1156,"rel":1157},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[1158],"nofollow",[1160],{"type":404,"value":1161},"高 CPU 负载等问题",{"type":404,"value":1163},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":398,"tag":412,"props":1165,"children":1167},{"className":414,"code":1166,"language":416,"meta":391,"style":391},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[1168],{"type":398,"tag":419,"props":1169,"children":1170},{"__ignoreMap":391},[1171,1201,1265,1323,1378,1414,1422,1434],{"type":398,"tag":423,"props":1172,"children":1173},{"class":425,"line":426},[1174,1179,1184,1188,1192,1197],{"type":398,"tag":423,"props":1175,"children":1176},{"style":488},[1177],{"type":404,"value":1178},"if",{"type":398,"tag":423,"props":1180,"children":1181},{"style":500},[1182],{"type":404,"value":1183}," (is",{"type":398,"tag":423,"props":1185,"children":1186},{"style":452},[1187],{"type":404,"value":508},{"type":398,"tag":423,"props":1189,"children":1190},{"style":446},[1191],{"type":404,"value":1057},{"type":398,"tag":423,"props":1193,"children":1194},{"style":500},[1195],{"type":404,"value":1196},"(fpath)) ",{"type":398,"tag":423,"props":1198,"children":1199},{"style":452},[1200],{"type":404,"value":531},{"type":398,"tag":423,"props":1202,"children":1203},{"class":425,"line":436},[1204,1209,1214,1218,1222,1226,1231,1235,1240,1244,1250,1256,1261],{"type":398,"tag":423,"props":1205,"children":1206},{"style":440},[1207],{"type":404,"value":1208},"  var",{"type":398,"tag":423,"props":1210,"children":1211},{"style":500},[1212],{"type":404,"value":1213}," parent",{"type":398,"tag":423,"props":1215,"children":1216},{"style":985},[1217],{"type":404,"value":988},{"type":398,"tag":423,"props":1219,"children":1220},{"style":500},[1221],{"type":404,"value":993},{"type":398,"tag":423,"props":1223,"children":1224},{"style":452},[1225],{"type":404,"value":508},{"type":398,"tag":423,"props":1227,"children":1228},{"style":446},[1229],{"type":404,"value":1230},"resolve",{"type":398,"tag":423,"props":1232,"children":1233},{"style":494},[1234],{"type":404,"value":455},{"type":398,"tag":423,"props":1236,"children":1237},{"style":500},[1238],{"type":404,"value":1239},"fpath",{"type":398,"tag":423,"props":1241,"children":1242},{"style":452},[1243],{"type":404,"value":466},{"type":398,"tag":423,"props":1245,"children":1247},{"style":1246},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1248],{"type":404,"value":1249}," '",{"type":398,"tag":423,"props":1251,"children":1253},{"style":1252},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1254],{"type":404,"value":1255},"..",{"type":398,"tag":423,"props":1257,"children":1258},{"style":1246},[1259],{"type":404,"value":1260},"'",{"type":398,"tag":423,"props":1262,"children":1263},{"style":494},[1264],{"type":404,"value":615},{"type":398,"tag":423,"props":1266,"children":1267},{"class":425,"line":484},[1268,1273,1277,1281,1285,1290,1294,1298,1302,1307,1311,1315,1319],{"type":398,"tag":423,"props":1269,"children":1270},{"style":500},[1271],{"type":404,"value":1272},"  fs",{"type":398,"tag":423,"props":1274,"children":1275},{"style":452},[1276],{"type":404,"value":508},{"type":398,"tag":423,"props":1278,"children":1279},{"style":446},[1280],{"type":404,"value":704},{"type":398,"tag":423,"props":1282,"children":1283},{"style":494},[1284],{"type":404,"value":455},{"type":398,"tag":423,"props":1286,"children":1287},{"style":500},[1288],{"type":404,"value":1289},"parent",{"type":398,"tag":423,"props":1291,"children":1292},{"style":452},[1293],{"type":404,"value":466},{"type":398,"tag":423,"props":1295,"children":1296},{"style":440},[1297],{"type":404,"value":566},{"type":398,"tag":423,"props":1299,"children":1300},{"style":452},[1301],{"type":404,"value":455},{"type":398,"tag":423,"props":1303,"children":1304},{"style":458},[1305],{"type":404,"value":1306},"evt",{"type":398,"tag":423,"props":1308,"children":1309},{"style":452},[1310],{"type":404,"value":466},{"type":398,"tag":423,"props":1312,"children":1313},{"style":458},[1314],{"type":404,"value":737},{"type":398,"tag":423,"props":1316,"children":1317},{"style":452},[1318],{"type":404,"value":476},{"type":398,"tag":423,"props":1320,"children":1321},{"style":452},[1322],{"type":404,"value":481},{"type":398,"tag":423,"props":1324,"children":1325},{"class":425,"line":534},[1326,1331,1335,1340,1344,1349,1353,1357,1361,1366,1370,1374],{"type":398,"tag":423,"props":1327,"children":1328},{"style":488},[1329],{"type":404,"value":1330},"    if",{"type":398,"tag":423,"props":1332,"children":1333},{"style":494},[1334],{"type":404,"value":497},{"type":398,"tag":423,"props":1336,"children":1337},{"style":500},[1338],{"type":404,"value":1339},"path",{"type":398,"tag":423,"props":1341,"children":1342},{"style":452},[1343],{"type":404,"value":508},{"type":398,"tag":423,"props":1345,"children":1346},{"style":446},[1347],{"type":404,"value":1348},"basename",{"type":398,"tag":423,"props":1350,"children":1351},{"style":494},[1352],{"type":404,"value":455},{"type":398,"tag":423,"props":1354,"children":1355},{"style":500},[1356],{"type":404,"value":1239},{"type":398,"tag":423,"props":1358,"children":1359},{"style":494},[1360],{"type":404,"value":909},{"type":398,"tag":423,"props":1362,"children":1363},{"style":985},[1364],{"type":404,"value":1365},"===",{"type":398,"tag":423,"props":1367,"children":1368},{"style":500},[1369],{"type":404,"value":737},{"type":398,"tag":423,"props":1371,"children":1372},{"style":494},[1373],{"type":404,"value":909},{"type":398,"tag":423,"props":1375,"children":1376},{"style":452},[1377],{"type":404,"value":531},{"type":398,"tag":423,"props":1379,"children":1380},{"class":425,"line":586},[1381,1385,1389,1393,1397,1402,1406,1410],{"type":398,"tag":423,"props":1382,"children":1383},{"style":446},[1384],{"type":404,"value":592},{"type":398,"tag":423,"props":1386,"children":1387},{"style":494},[1388],{"type":404,"value":455},{"type":398,"tag":423,"props":1390,"children":1391},{"style":500},[1392],{"type":404,"value":1239},{"type":398,"tag":423,"props":1394,"children":1395},{"style":452},[1396],{"type":404,"value":466},{"type":398,"tag":423,"props":1398,"children":1399},{"style":500},[1400],{"type":404,"value":1401}," options",{"type":398,"tag":423,"props":1403,"children":1404},{"style":452},[1405],{"type":404,"value":466},{"type":398,"tag":423,"props":1407,"children":1408},{"style":500},[1409],{"type":404,"value":471},{"type":398,"tag":423,"props":1411,"children":1412},{"style":494},[1413],{"type":404,"value":615},{"type":398,"tag":423,"props":1415,"children":1416},{"class":425,"line":618},[1417],{"type":398,"tag":423,"props":1418,"children":1419},{"style":452},[1420],{"type":404,"value":1421},"    }\n",{"type":398,"tag":423,"props":1423,"children":1424},{"class":425,"line":631},[1425,1430],{"type":398,"tag":423,"props":1426,"children":1427},{"style":452},[1428],{"type":404,"value":1429},"  }",{"type":398,"tag":423,"props":1431,"children":1432},{"style":494},[1433],{"type":404,"value":615},{"type":398,"tag":423,"props":1435,"children":1436},{"class":425,"line":640},[1437],{"type":398,"tag":423,"props":1438,"children":1439},{"style":452},[1440],{"type":404,"value":1147},{"type":398,"tag":406,"props":1442,"children":1443},{},[1444],{"type":404,"value":1445},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":398,"tag":412,"props":1447,"children":1449},{"className":414,"code":1448,"language":416,"meta":391,"style":391},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1450],{"type":398,"tag":419,"props":1451,"children":1452},{"__ignoreMap":391},[1453,1496,1533,1568,1602,1609,1616],{"type":398,"tag":423,"props":1454,"children":1455},{"class":425,"line":426},[1456,1460,1464,1468,1472,1476,1480,1484,1488,1492],{"type":398,"tag":423,"props":1457,"children":1458},{"style":440},[1459],{"type":404,"value":443},{"type":398,"tag":423,"props":1461,"children":1462},{"style":446},[1463],{"type":404,"value":449},{"type":398,"tag":423,"props":1465,"children":1466},{"style":452},[1467],{"type":404,"value":455},{"type":398,"tag":423,"props":1469,"children":1470},{"style":458},[1471],{"type":404,"value":1239},{"type":398,"tag":423,"props":1473,"children":1474},{"style":452},[1475],{"type":404,"value":466},{"type":398,"tag":423,"props":1477,"children":1478},{"style":458},[1479],{"type":404,"value":1401},{"type":398,"tag":423,"props":1481,"children":1482},{"style":452},[1483],{"type":404,"value":466},{"type":398,"tag":423,"props":1485,"children":1486},{"style":458},[1487],{"type":404,"value":471},{"type":398,"tag":423,"props":1489,"children":1490},{"style":452},[1491],{"type":404,"value":476},{"type":398,"tag":423,"props":1493,"children":1494},{"style":452},[1495],{"type":404,"value":481},{"type":398,"tag":423,"props":1497,"children":1498},{"class":425,"line":436},[1499,1503,1507,1511,1515,1520,1524,1528],{"type":398,"tag":423,"props":1500,"children":1501},{"style":488},[1502],{"type":404,"value":491},{"type":398,"tag":423,"props":1504,"children":1505},{"style":494},[1506],{"type":404,"value":497},{"type":398,"tag":423,"props":1508,"children":1509},{"style":500},[1510],{"type":404,"value":503},{"type":398,"tag":423,"props":1512,"children":1513},{"style":452},[1514],{"type":404,"value":508},{"type":398,"tag":423,"props":1516,"children":1517},{"style":446},[1518],{"type":404,"value":1519},"symbolic",{"type":398,"tag":423,"props":1521,"children":1522},{"style":494},[1523],{"type":404,"value":455},{"type":398,"tag":423,"props":1525,"children":1526},{"style":500},[1527],{"type":404,"value":1239},{"type":398,"tag":423,"props":1529,"children":1530},{"style":494},[1531],{"type":404,"value":1532},") \n",{"type":398,"tag":423,"props":1534,"children":1535},{"class":425,"line":484},[1536,1541,1546,1550,1555,1559,1564],{"type":398,"tag":423,"props":1537,"children":1538},{"style":985},[1539],{"type":404,"value":1540},"    &&",{"type":398,"tag":423,"props":1542,"children":1543},{"style":985},[1544],{"type":404,"value":1545}," !",{"type":398,"tag":423,"props":1547,"children":1548},{"style":494},[1549],{"type":404,"value":455},{"type":398,"tag":423,"props":1551,"children":1552},{"style":500},[1553],{"type":404,"value":1554},"options",{"type":398,"tag":423,"props":1556,"children":1557},{"style":452},[1558],{"type":404,"value":508},{"type":398,"tag":423,"props":1560,"children":1561},{"style":500},[1562],{"type":404,"value":1563},"followSymLinks",{"type":398,"tag":423,"props":1565,"children":1566},{"style":494},[1567],{"type":404,"value":968},{"type":398,"tag":423,"props":1569,"children":1570},{"class":425,"line":534},[1571,1576,1580,1584,1589,1594,1598],{"type":398,"tag":423,"props":1572,"children":1573},{"style":985},[1574],{"type":404,"value":1575},"      &&",{"type":398,"tag":423,"props":1577,"children":1578},{"style":500},[1579],{"type":404,"value":1401},{"type":398,"tag":423,"props":1581,"children":1582},{"style":452},[1583],{"type":404,"value":508},{"type":398,"tag":423,"props":1585,"children":1586},{"style":500},[1587],{"type":404,"value":1588},"maxSymLevel",{"type":398,"tag":423,"props":1590,"children":1591},{"style":985},[1592],{"type":404,"value":1593},"--",{"type":398,"tag":423,"props":1595,"children":1596},{"style":494},[1597],{"type":404,"value":526},{"type":398,"tag":423,"props":1599,"children":1600},{"style":452},[1601],{"type":404,"value":531},{"type":398,"tag":423,"props":1603,"children":1604},{"class":425,"line":586},[1605],{"type":398,"tag":423,"props":1606,"children":1607},{"style":488},[1608],{"type":404,"value":637},{"type":398,"tag":423,"props":1610,"children":1611},{"class":425,"line":618},[1612],{"type":398,"tag":423,"props":1613,"children":1614},{"style":452},[1615],{"type":404,"value":646},{"type":398,"tag":423,"props":1617,"children":1618},{"class":425,"line":631},[1619],{"type":398,"tag":423,"props":1620,"children":1621},{"style":452},[1622],{"type":404,"value":1147},{"type":398,"tag":406,"props":1624,"children":1625},{},[1626],{"type":404,"value":1627},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":398,"tag":412,"props":1629,"children":1631},{"className":414,"code":1630,"language":416,"meta":391,"style":391},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1632],{"type":398,"tag":419,"props":1633,"children":1634},{"__ignoreMap":391},[1635,1649,1657,1669,1714,1736,1786,1822,1838,1851,1858,1865,1872,1911,1932,1965,1993,2004,2022,2029,2096,2164,2184,2205,2237,2266,2278,2286],{"type":398,"tag":423,"props":1636,"children":1637},{"class":425,"line":426},[1638,1643],{"type":398,"tag":423,"props":1639,"children":1640},{"style":440},[1641],{"type":404,"value":1642},"var",{"type":398,"tag":423,"props":1644,"children":1646},{"style":1645},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1647],{"type":404,"value":1648}," IS_SUPPORT\n",{"type":398,"tag":423,"props":1650,"children":1651},{"class":425,"line":436},[1652],{"type":398,"tag":423,"props":1653,"children":1654},{"emptyLinePlaceholder":390},[1655],{"type":404,"value":1656},"\n",{"type":398,"tag":423,"props":1658,"children":1659},{"class":425,"line":484},[1660,1665],{"type":398,"tag":423,"props":1661,"children":1662},{"style":488},[1663],{"type":404,"value":1664},"try",{"type":398,"tag":423,"props":1666,"children":1667},{"style":452},[1668],{"type":404,"value":481},{"type":398,"tag":423,"props":1670,"children":1671},{"class":425,"line":534},[1672,1677,1681,1686,1690,1694,1698,1702,1706,1710],{"type":398,"tag":423,"props":1673,"children":1674},{"style":500},[1675],{"type":404,"value":1676},"  watcher",{"type":398,"tag":423,"props":1678,"children":1679},{"style":985},[1680],{"type":404,"value":988},{"type":398,"tag":423,"props":1682,"children":1683},{"style":500},[1684],{"type":404,"value":1685}," fs",{"type":398,"tag":423,"props":1687,"children":1688},{"style":452},[1689],{"type":404,"value":508},{"type":398,"tag":423,"props":1691,"children":1692},{"style":446},[1693],{"type":404,"value":704},{"type":398,"tag":423,"props":1695,"children":1696},{"style":494},[1697],{"type":404,"value":455},{"type":398,"tag":423,"props":1699,"children":1700},{"style":500},[1701],{"type":404,"value":1289},{"type":398,"tag":423,"props":1703,"children":1704},{"style":452},[1705],{"type":404,"value":466},{"type":398,"tag":423,"props":1707,"children":1708},{"style":500},[1709],{"type":404,"value":1401},{"type":398,"tag":423,"props":1711,"children":1712},{"style":494},[1713],{"type":404,"value":615},{"type":398,"tag":423,"props":1715,"children":1716},{"class":425,"line":586},[1717,1722,1727,1732],{"type":398,"tag":423,"props":1718,"children":1719},{"style":452},[1720],{"type":404,"value":1721},"}",{"type":398,"tag":423,"props":1723,"children":1724},{"style":488},[1725],{"type":404,"value":1726}," catch",{"type":398,"tag":423,"props":1728,"children":1729},{"style":500},[1730],{"type":404,"value":1731}," (e) ",{"type":398,"tag":423,"props":1733,"children":1734},{"style":452},[1735],{"type":404,"value":531},{"type":398,"tag":423,"props":1737,"children":1738},{"class":425,"line":618},[1739,1743,1747,1752,1756,1760,1765,1769,1774,1778,1782],{"type":398,"tag":423,"props":1740,"children":1741},{"style":488},[1742],{"type":404,"value":491},{"type":398,"tag":423,"props":1744,"children":1745},{"style":494},[1746],{"type":404,"value":497},{"type":398,"tag":423,"props":1748,"children":1749},{"style":500},[1750],{"type":404,"value":1751},"e",{"type":398,"tag":423,"props":1753,"children":1754},{"style":452},[1755],{"type":404,"value":508},{"type":398,"tag":423,"props":1757,"children":1758},{"style":500},[1759],{"type":404,"value":419},{"type":398,"tag":423,"props":1761,"children":1762},{"style":985},[1763],{"type":404,"value":1764}," ==",{"type":398,"tag":423,"props":1766,"children":1767},{"style":1246},[1768],{"type":404,"value":1249},{"type":398,"tag":423,"props":1770,"children":1771},{"style":1252},[1772],{"type":404,"value":1773},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":398,"tag":423,"props":1775,"children":1776},{"style":1246},[1777],{"type":404,"value":1260},{"type":398,"tag":423,"props":1779,"children":1780},{"style":494},[1781],{"type":404,"value":909},{"type":398,"tag":423,"props":1783,"children":1784},{"style":452},[1785],{"type":404,"value":531},{"type":398,"tag":423,"props":1787,"children":1788},{"class":425,"line":631},[1789,1794,1799,1803,1808,1812,1818],{"type":398,"tag":423,"props":1790,"children":1791},{"style":488},[1792],{"type":404,"value":1793},"    return",{"type":398,"tag":423,"props":1795,"children":1796},{"style":446},[1797],{"type":404,"value":1798}," fn",{"type":398,"tag":423,"props":1800,"children":1801},{"style":494},[1802],{"type":404,"value":455},{"type":398,"tag":423,"props":1804,"children":1805},{"style":1645},[1806],{"type":404,"value":1807},"IS_SUPPORT",{"type":398,"tag":423,"props":1809,"children":1810},{"style":985},[1811],{"type":404,"value":988},{"type":398,"tag":423,"props":1813,"children":1815},{"style":1814},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1816],{"type":404,"value":1817}," false",{"type":398,"tag":423,"props":1819,"children":1820},{"style":494},[1821],{"type":404,"value":615},{"type":398,"tag":423,"props":1823,"children":1824},{"class":425,"line":640},[1825,1829,1834],{"type":398,"tag":423,"props":1826,"children":1827},{"style":452},[1828],{"type":404,"value":1429},{"type":398,"tag":423,"props":1830,"children":1831},{"style":488},[1832],{"type":404,"value":1833}," else",{"type":398,"tag":423,"props":1835,"children":1836},{"style":452},[1837],{"type":404,"value":481},{"type":398,"tag":423,"props":1839,"children":1840},{"class":425,"line":649},[1841,1846],{"type":398,"tag":423,"props":1842,"children":1843},{"style":488},[1844],{"type":404,"value":1845},"    throw",{"type":398,"tag":423,"props":1847,"children":1848},{"style":500},[1849],{"type":404,"value":1850}," e\n",{"type":398,"tag":423,"props":1852,"children":1853},{"class":425,"line":690},[1854],{"type":398,"tag":423,"props":1855,"children":1856},{"style":452},[1857],{"type":404,"value":646},{"type":398,"tag":423,"props":1859,"children":1860},{"class":425,"line":748},[1861],{"type":398,"tag":423,"props":1862,"children":1863},{"style":452},[1864],{"type":404,"value":1147},{"type":398,"tag":423,"props":1866,"children":1867},{"class":425,"line":773},[1868],{"type":398,"tag":423,"props":1869,"children":1870},{"emptyLinePlaceholder":390},[1871],{"type":404,"value":1656},{"type":398,"tag":423,"props":1873,"children":1874},{"class":425,"line":811},[1875,1879,1884,1889,1894,1898,1902,1907],{"type":398,"tag":423,"props":1876,"children":1877},{"style":440},[1878],{"type":404,"value":1642},{"type":398,"tag":423,"props":1880,"children":1881},{"style":500},[1882],{"type":404,"value":1883}," timer ",{"type":398,"tag":423,"props":1885,"children":1886},{"style":985},[1887],{"type":404,"value":1888},"=",{"type":398,"tag":423,"props":1890,"children":1891},{"style":446},[1892],{"type":404,"value":1893}," setTimeout",{"type":398,"tag":423,"props":1895,"children":1896},{"style":500},[1897],{"type":404,"value":455},{"type":398,"tag":423,"props":1899,"children":1900},{"style":440},[1901],{"type":404,"value":443},{"type":398,"tag":423,"props":1903,"children":1904},{"style":452},[1905],{"type":404,"value":1906},"()",{"type":398,"tag":423,"props":1908,"children":1909},{"style":452},[1910],{"type":404,"value":481},{"type":398,"tag":423,"props":1912,"children":1913},{"class":425,"line":820},[1914,1918,1922,1927],{"type":398,"tag":423,"props":1915,"children":1916},{"style":500},[1917],{"type":404,"value":1676},{"type":398,"tag":423,"props":1919,"children":1920},{"style":452},[1921],{"type":404,"value":508},{"type":398,"tag":423,"props":1923,"children":1924},{"style":446},[1925],{"type":404,"value":1926},"close",{"type":398,"tag":423,"props":1928,"children":1929},{"style":494},[1930],{"type":404,"value":1931},"()\n",{"type":398,"tag":423,"props":1933,"children":1934},{"class":425,"line":832},[1935,1940,1944,1949,1953,1957,1961],{"type":398,"tag":423,"props":1936,"children":1937},{"style":500},[1938],{"type":404,"value":1939},"  stack",{"type":398,"tag":423,"props":1941,"children":1942},{"style":452},[1943],{"type":404,"value":508},{"type":398,"tag":423,"props":1945,"children":1946},{"style":446},[1947],{"type":404,"value":1948},"cleanup",{"type":398,"tag":423,"props":1950,"children":1951},{"style":494},[1952],{"type":404,"value":455},{"type":398,"tag":423,"props":1954,"children":1955},{"style":440},[1956],{"type":404,"value":443},{"type":398,"tag":423,"props":1958,"children":1959},{"style":452},[1960],{"type":404,"value":1906},{"type":398,"tag":423,"props":1962,"children":1963},{"style":452},[1964],{"type":404,"value":481},{"type":398,"tag":423,"props":1966,"children":1967},{"class":425,"line":890},[1968,1973,1977,1981,1985,1989],{"type":398,"tag":423,"props":1969,"children":1970},{"style":446},[1971],{"type":404,"value":1972},"    fn",{"type":398,"tag":423,"props":1974,"children":1975},{"style":494},[1976],{"type":404,"value":455},{"type":398,"tag":423,"props":1978,"children":1979},{"style":1645},[1980],{"type":404,"value":1807},{"type":398,"tag":423,"props":1982,"children":1983},{"style":985},[1984],{"type":404,"value":988},{"type":398,"tag":423,"props":1986,"children":1987},{"style":1814},[1988],{"type":404,"value":1817},{"type":398,"tag":423,"props":1990,"children":1991},{"style":494},[1992],{"type":404,"value":615},{"type":398,"tag":423,"props":1994,"children":1995},{"class":425,"line":922},[1996,2000],{"type":398,"tag":423,"props":1997,"children":1998},{"style":452},[1999],{"type":404,"value":1429},{"type":398,"tag":423,"props":2001,"children":2002},{"style":494},[2003],{"type":404,"value":615},{"type":398,"tag":423,"props":2005,"children":2006},{"class":425,"line":971},[2007,2012,2018],{"type":398,"tag":423,"props":2008,"children":2009},{"style":452},[2010],{"type":404,"value":2011},"},",{"type":398,"tag":423,"props":2013,"children":2015},{"style":2014},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2016],{"type":404,"value":2017}," 200",{"type":398,"tag":423,"props":2019,"children":2020},{"style":500},[2021],{"type":404,"value":615},{"type":398,"tag":423,"props":2023,"children":2024},{"class":425,"line":1025},[2025],{"type":398,"tag":423,"props":2026,"children":2027},{"emptyLinePlaceholder":390},[2028],{"type":404,"value":1656},{"type":398,"tag":423,"props":2030,"children":2031},{"class":425,"line":1069},[2032,2037,2041,2046,2050,2054,2059,2063,2067,2071,2075,2079,2083,2088,2092],{"type":398,"tag":423,"props":2033,"children":2034},{"style":500},[2035],{"type":404,"value":2036},"watcher",{"type":398,"tag":423,"props":2038,"children":2039},{"style":452},[2040],{"type":404,"value":508},{"type":398,"tag":423,"props":2042,"children":2043},{"style":446},[2044],{"type":404,"value":2045},"on",{"type":398,"tag":423,"props":2047,"children":2048},{"style":500},[2049],{"type":404,"value":455},{"type":398,"tag":423,"props":2051,"children":2052},{"style":1246},[2053],{"type":404,"value":1260},{"type":398,"tag":423,"props":2055,"children":2056},{"style":1252},[2057],{"type":404,"value":2058},"change",{"type":398,"tag":423,"props":2060,"children":2061},{"style":1246},[2062],{"type":404,"value":1260},{"type":398,"tag":423,"props":2064,"children":2065},{"style":452},[2066],{"type":404,"value":466},{"type":398,"tag":423,"props":2068,"children":2069},{"style":440},[2070],{"type":404,"value":566},{"type":398,"tag":423,"props":2072,"children":2073},{"style":452},[2074],{"type":404,"value":455},{"type":398,"tag":423,"props":2076,"children":2077},{"style":458},[2078],{"type":404,"value":1306},{"type":398,"tag":423,"props":2080,"children":2081},{"style":452},[2082],{"type":404,"value":466},{"type":398,"tag":423,"props":2084,"children":2085},{"style":458},[2086],{"type":404,"value":2087}," name",{"type":398,"tag":423,"props":2089,"children":2090},{"style":452},[2091],{"type":404,"value":476},{"type":398,"tag":423,"props":2093,"children":2094},{"style":452},[2095],{"type":404,"value":481},{"type":398,"tag":423,"props":2097,"children":2098},{"class":425,"line":1098},[2099,2103,2107,2111,2115,2119,2123,2127,2131,2135,2139,2143,2147,2151,2156,2160],{"type":398,"tag":423,"props":2100,"children":2101},{"style":488},[2102],{"type":404,"value":491},{"type":398,"tag":423,"props":2104,"children":2105},{"style":494},[2106],{"type":404,"value":497},{"type":398,"tag":423,"props":2108,"children":2109},{"style":500},[2110],{"type":404,"value":1339},{"type":398,"tag":423,"props":2112,"children":2113},{"style":452},[2114],{"type":404,"value":508},{"type":398,"tag":423,"props":2116,"children":2117},{"style":446},[2118],{"type":404,"value":1348},{"type":398,"tag":423,"props":2120,"children":2121},{"style":494},[2122],{"type":404,"value":455},{"type":398,"tag":423,"props":2124,"children":2125},{"style":500},[2126],{"type":404,"value":1057},{"type":398,"tag":423,"props":2128,"children":2129},{"style":494},[2130],{"type":404,"value":909},{"type":398,"tag":423,"props":2132,"children":2133},{"style":985},[2134],{"type":404,"value":1365},{"type":398,"tag":423,"props":2136,"children":2137},{"style":500},[2138],{"type":404,"value":993},{"type":398,"tag":423,"props":2140,"children":2141},{"style":452},[2142],{"type":404,"value":508},{"type":398,"tag":423,"props":2144,"children":2145},{"style":446},[2146],{"type":404,"value":1348},{"type":398,"tag":423,"props":2148,"children":2149},{"style":494},[2150],{"type":404,"value":455},{"type":398,"tag":423,"props":2152,"children":2153},{"style":500},[2154],{"type":404,"value":2155},"name",{"type":398,"tag":423,"props":2157,"children":2158},{"style":494},[2159],{"type":404,"value":526},{"type":398,"tag":423,"props":2161,"children":2162},{"style":452},[2163],{"type":404,"value":531},{"type":398,"tag":423,"props":2165,"children":2166},{"class":425,"line":1107},[2167,2172,2176,2180],{"type":398,"tag":423,"props":2168,"children":2169},{"style":500},[2170],{"type":404,"value":2171},"    watcher",{"type":398,"tag":423,"props":2173,"children":2174},{"style":452},[2175],{"type":404,"value":508},{"type":398,"tag":423,"props":2177,"children":2178},{"style":446},[2179],{"type":404,"value":1926},{"type":398,"tag":423,"props":2181,"children":2182},{"style":494},[2183],{"type":404,"value":1931},{"type":398,"tag":423,"props":2185,"children":2186},{"class":425,"line":1120},[2187,2192,2196,2201],{"type":398,"tag":423,"props":2188,"children":2189},{"style":446},[2190],{"type":404,"value":2191},"    clearTimeout",{"type":398,"tag":423,"props":2193,"children":2194},{"style":494},[2195],{"type":404,"value":455},{"type":398,"tag":423,"props":2197,"children":2198},{"style":500},[2199],{"type":404,"value":2200},"timer",{"type":398,"tag":423,"props":2202,"children":2203},{"style":494},[2204],{"type":404,"value":615},{"type":398,"tag":423,"props":2206,"children":2207},{"class":425,"line":1133},[2208,2213,2217,2221,2225,2229,2233],{"type":398,"tag":423,"props":2209,"children":2210},{"style":500},[2211],{"type":404,"value":2212},"    stack",{"type":398,"tag":423,"props":2214,"children":2215},{"style":452},[2216],{"type":404,"value":508},{"type":398,"tag":423,"props":2218,"children":2219},{"style":446},[2220],{"type":404,"value":1948},{"type":398,"tag":423,"props":2222,"children":2223},{"style":494},[2224],{"type":404,"value":455},{"type":398,"tag":423,"props":2226,"children":2227},{"style":440},[2228],{"type":404,"value":443},{"type":398,"tag":423,"props":2230,"children":2231},{"style":452},[2232],{"type":404,"value":1906},{"type":398,"tag":423,"props":2234,"children":2235},{"style":452},[2236],{"type":404,"value":481},{"type":398,"tag":423,"props":2238,"children":2239},{"class":425,"line":1141},[2240,2245,2249,2253,2257,2262],{"type":398,"tag":423,"props":2241,"children":2242},{"style":446},[2243],{"type":404,"value":2244},"      fn",{"type":398,"tag":423,"props":2246,"children":2247},{"style":494},[2248],{"type":404,"value":455},{"type":398,"tag":423,"props":2250,"children":2251},{"style":1645},[2252],{"type":404,"value":1807},{"type":398,"tag":423,"props":2254,"children":2255},{"style":985},[2256],{"type":404,"value":988},{"type":398,"tag":423,"props":2258,"children":2259},{"style":1814},[2260],{"type":404,"value":2261}," true",{"type":398,"tag":423,"props":2263,"children":2264},{"style":494},[2265],{"type":404,"value":615},{"type":398,"tag":423,"props":2267,"children":2269},{"class":425,"line":2268},26,[2270,2274],{"type":398,"tag":423,"props":2271,"children":2272},{"style":452},[2273],{"type":404,"value":624},{"type":398,"tag":423,"props":2275,"children":2276},{"style":494},[2277],{"type":404,"value":615},{"type":398,"tag":423,"props":2279,"children":2281},{"class":425,"line":2280},27,[2282],{"type":398,"tag":423,"props":2283,"children":2284},{"style":452},[2285],{"type":404,"value":646},{"type":398,"tag":423,"props":2287,"children":2289},{"class":425,"line":2288},28,[2290,2294],{"type":398,"tag":423,"props":2291,"children":2292},{"style":452},[2293],{"type":404,"value":1721},{"type":398,"tag":423,"props":2295,"children":2296},{"style":500},[2297],{"type":404,"value":615},{"type":398,"tag":406,"props":2299,"children":2300},{},[2301],{"type":404,"value":2302},"Watcher 仅向外暴露指定方法。",{"type":398,"tag":412,"props":2304,"children":2306},{"className":414,"code":2305,"language":416,"meta":391,"style":391},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2307],{"type":398,"tag":419,"props":2308,"children":2309},{"__ignoreMap":391},[2310,2353,2374,2396,2417,2472,2508,2562,2579,2587,2627,2665,2722,2729,2740,2753],{"type":398,"tag":423,"props":2311,"children":2312},{"class":425,"line":426},[2313,2319,2323,2328,2332,2337,2341,2345,2349],{"type":398,"tag":423,"props":2314,"children":2316},{"style":2315},"--shiki-light:#E2931D;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[2317],{"type":404,"value":2318},"Watcher",{"type":398,"tag":423,"props":2320,"children":2321},{"style":452},[2322],{"type":404,"value":508},{"type":398,"tag":423,"props":2324,"children":2325},{"style":1645},[2326],{"type":404,"value":2327},"prototype",{"type":398,"tag":423,"props":2329,"children":2330},{"style":452},[2331],{"type":404,"value":508},{"type":398,"tag":423,"props":2333,"children":2334},{"style":446},[2335],{"type":404,"value":2336},"expose",{"type":398,"tag":423,"props":2338,"children":2339},{"style":985},[2340],{"type":404,"value":988},{"type":398,"tag":423,"props":2342,"children":2343},{"style":440},[2344],{"type":404,"value":566},{"type":398,"tag":423,"props":2346,"children":2347},{"style":452},[2348],{"type":404,"value":1906},{"type":398,"tag":423,"props":2350,"children":2351},{"style":452},[2352],{"type":404,"value":481},{"type":398,"tag":423,"props":2354,"children":2355},{"class":425,"line":436},[2356,2360,2365,2369],{"type":398,"tag":423,"props":2357,"children":2358},{"style":440},[2359],{"type":404,"value":1208},{"type":398,"tag":423,"props":2361,"children":2362},{"style":500},[2363],{"type":404,"value":2364}," expose",{"type":398,"tag":423,"props":2366,"children":2367},{"style":985},[2368],{"type":404,"value":988},{"type":398,"tag":423,"props":2370,"children":2371},{"style":452},[2372],{"type":404,"value":2373}," {}\n",{"type":398,"tag":423,"props":2375,"children":2376},{"class":425,"line":484},[2377,2381,2386,2390],{"type":398,"tag":423,"props":2378,"children":2379},{"style":440},[2380],{"type":404,"value":1208},{"type":398,"tag":423,"props":2382,"children":2383},{"style":500},[2384],{"type":404,"value":2385}," self",{"type":398,"tag":423,"props":2387,"children":2388},{"style":985},[2389],{"type":404,"value":988},{"type":398,"tag":423,"props":2391,"children":2393},{"style":2392},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2394],{"type":404,"value":2395}," this\n",{"type":398,"tag":423,"props":2397,"children":2398},{"class":425,"line":534},[2399,2403,2408,2412],{"type":398,"tag":423,"props":2400,"children":2401},{"style":440},[2402],{"type":404,"value":1208},{"type":398,"tag":423,"props":2404,"children":2405},{"style":500},[2406],{"type":404,"value":2407}," methods",{"type":398,"tag":423,"props":2409,"children":2410},{"style":985},[2411],{"type":404,"value":988},{"type":398,"tag":423,"props":2413,"children":2414},{"style":494},[2415],{"type":404,"value":2416}," [\n",{"type":398,"tag":423,"props":2418,"children":2419},{"class":425,"line":586},[2420,2425,2429,2433,2437,2441,2446,2450,2454,2458,2463,2467],{"type":398,"tag":423,"props":2421,"children":2422},{"style":1246},[2423],{"type":404,"value":2424},"    '",{"type":398,"tag":423,"props":2426,"children":2427},{"style":1252},[2428],{"type":404,"value":2045},{"type":398,"tag":423,"props":2430,"children":2431},{"style":1246},[2432],{"type":404,"value":1260},{"type":398,"tag":423,"props":2434,"children":2435},{"style":452},[2436],{"type":404,"value":466},{"type":398,"tag":423,"props":2438,"children":2439},{"style":1246},[2440],{"type":404,"value":1249},{"type":398,"tag":423,"props":2442,"children":2443},{"style":1252},[2444],{"type":404,"value":2445},"emit",{"type":398,"tag":423,"props":2447,"children":2448},{"style":1246},[2449],{"type":404,"value":1260},{"type":398,"tag":423,"props":2451,"children":2452},{"style":452},[2453],{"type":404,"value":466},{"type":398,"tag":423,"props":2455,"children":2456},{"style":1246},[2457],{"type":404,"value":1249},{"type":398,"tag":423,"props":2459,"children":2460},{"style":1252},[2461],{"type":404,"value":2462},"once",{"type":398,"tag":423,"props":2464,"children":2465},{"style":1246},[2466],{"type":404,"value":1260},{"type":398,"tag":423,"props":2468,"children":2469},{"style":452},[2470],{"type":404,"value":2471},",\n",{"type":398,"tag":423,"props":2473,"children":2474},{"class":425,"line":618},[2475,2479,2483,2487,2491,2495,2500,2504],{"type":398,"tag":423,"props":2476,"children":2477},{"style":1246},[2478],{"type":404,"value":2424},{"type":398,"tag":423,"props":2480,"children":2481},{"style":1252},[2482],{"type":404,"value":1926},{"type":398,"tag":423,"props":2484,"children":2485},{"style":1246},[2486],{"type":404,"value":1260},{"type":398,"tag":423,"props":2488,"children":2489},{"style":452},[2490],{"type":404,"value":466},{"type":398,"tag":423,"props":2492,"children":2493},{"style":1246},[2494],{"type":404,"value":1249},{"type":398,"tag":423,"props":2496,"children":2497},{"style":1252},[2498],{"type":404,"value":2499},"isClosed",{"type":398,"tag":423,"props":2501,"children":2502},{"style":1246},[2503],{"type":404,"value":1260},{"type":398,"tag":423,"props":2505,"children":2506},{"style":452},[2507],{"type":404,"value":2471},{"type":398,"tag":423,"props":2509,"children":2510},{"class":425,"line":631},[2511,2515,2520,2524,2528,2532,2537,2541,2545,2549,2554,2558],{"type":398,"tag":423,"props":2512,"children":2513},{"style":1246},[2514],{"type":404,"value":2424},{"type":398,"tag":423,"props":2516,"children":2517},{"style":1252},[2518],{"type":404,"value":2519},"listeners",{"type":398,"tag":423,"props":2521,"children":2522},{"style":1246},[2523],{"type":404,"value":1260},{"type":398,"tag":423,"props":2525,"children":2526},{"style":452},[2527],{"type":404,"value":466},{"type":398,"tag":423,"props":2529,"children":2530},{"style":1246},[2531],{"type":404,"value":1249},{"type":398,"tag":423,"props":2533,"children":2534},{"style":1252},[2535],{"type":404,"value":2536},"setMaxListeners",{"type":398,"tag":423,"props":2538,"children":2539},{"style":1246},[2540],{"type":404,"value":1260},{"type":398,"tag":423,"props":2542,"children":2543},{"style":452},[2544],{"type":404,"value":466},{"type":398,"tag":423,"props":2546,"children":2547},{"style":1246},[2548],{"type":404,"value":1249},{"type":398,"tag":423,"props":2550,"children":2551},{"style":1252},[2552],{"type":404,"value":2553},"getMaxListeners",{"type":398,"tag":423,"props":2555,"children":2556},{"style":1246},[2557],{"type":404,"value":1260},{"type":398,"tag":423,"props":2559,"children":2560},{"style":452},[2561],{"type":404,"value":2471},{"type":398,"tag":423,"props":2563,"children":2564},{"class":425,"line":640},[2565,2569,2574],{"type":398,"tag":423,"props":2566,"children":2567},{"style":1246},[2568],{"type":404,"value":2424},{"type":398,"tag":423,"props":2570,"children":2571},{"style":1252},[2572],{"type":404,"value":2573},"getWatchedPaths",{"type":398,"tag":423,"props":2575,"children":2576},{"style":1246},[2577],{"type":404,"value":2578},"'\n",{"type":398,"tag":423,"props":2580,"children":2581},{"class":425,"line":649},[2582],{"type":398,"tag":423,"props":2583,"children":2584},{"style":494},[2585],{"type":404,"value":2586},"  ]\n",{"type":398,"tag":423,"props":2588,"children":2589},{"class":425,"line":690},[2590,2595,2599,2603,2607,2611,2615,2619,2623],{"type":398,"tag":423,"props":2591,"children":2592},{"style":500},[2593],{"type":404,"value":2594},"  methods",{"type":398,"tag":423,"props":2596,"children":2597},{"style":452},[2598],{"type":404,"value":508},{"type":398,"tag":423,"props":2600,"children":2601},{"style":446},[2602],{"type":404,"value":937},{"type":398,"tag":423,"props":2604,"children":2605},{"style":494},[2606],{"type":404,"value":455},{"type":398,"tag":423,"props":2608,"children":2609},{"style":440},[2610],{"type":404,"value":443},{"type":398,"tag":423,"props":2612,"children":2613},{"style":452},[2614],{"type":404,"value":455},{"type":398,"tag":423,"props":2616,"children":2617},{"style":458},[2618],{"type":404,"value":2155},{"type":398,"tag":423,"props":2620,"children":2621},{"style":452},[2622],{"type":404,"value":476},{"type":398,"tag":423,"props":2624,"children":2625},{"style":452},[2626],{"type":404,"value":481},{"type":398,"tag":423,"props":2628,"children":2629},{"class":425,"line":748},[2630,2635,2640,2644,2649,2653,2657,2661],{"type":398,"tag":423,"props":2631,"children":2632},{"style":500},[2633],{"type":404,"value":2634},"    expose",{"type":398,"tag":423,"props":2636,"children":2637},{"style":494},[2638],{"type":404,"value":2639},"[",{"type":398,"tag":423,"props":2641,"children":2642},{"style":500},[2643],{"type":404,"value":2155},{"type":398,"tag":423,"props":2645,"children":2646},{"style":494},[2647],{"type":404,"value":2648},"] ",{"type":398,"tag":423,"props":2650,"children":2651},{"style":985},[2652],{"type":404,"value":1888},{"type":398,"tag":423,"props":2654,"children":2655},{"style":440},[2656],{"type":404,"value":566},{"type":398,"tag":423,"props":2658,"children":2659},{"style":452},[2660],{"type":404,"value":1906},{"type":398,"tag":423,"props":2662,"children":2663},{"style":452},[2664],{"type":404,"value":481},{"type":398,"tag":423,"props":2666,"children":2667},{"class":425,"line":773},[2668,2673,2677,2681,2685,2690,2694,2699,2703,2708,2712,2718],{"type":398,"tag":423,"props":2669,"children":2670},{"style":488},[2671],{"type":404,"value":2672},"      return",{"type":398,"tag":423,"props":2674,"children":2675},{"style":500},[2676],{"type":404,"value":2385},{"type":398,"tag":423,"props":2678,"children":2679},{"style":494},[2680],{"type":404,"value":2639},{"type":398,"tag":423,"props":2682,"children":2683},{"style":500},[2684],{"type":404,"value":2155},{"type":398,"tag":423,"props":2686,"children":2687},{"style":494},[2688],{"type":404,"value":2689},"]",{"type":398,"tag":423,"props":2691,"children":2692},{"style":452},[2693],{"type":404,"value":508},{"type":398,"tag":423,"props":2695,"children":2696},{"style":446},[2697],{"type":404,"value":2698},"apply",{"type":398,"tag":423,"props":2700,"children":2701},{"style":494},[2702],{"type":404,"value":455},{"type":398,"tag":423,"props":2704,"children":2705},{"style":500},[2706],{"type":404,"value":2707},"self",{"type":398,"tag":423,"props":2709,"children":2710},{"style":452},[2711],{"type":404,"value":466},{"type":398,"tag":423,"props":2713,"children":2715},{"style":2714},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2716],{"type":404,"value":2717}," arguments",{"type":398,"tag":423,"props":2719,"children":2720},{"style":494},[2721],{"type":404,"value":615},{"type":398,"tag":423,"props":2723,"children":2724},{"class":425,"line":811},[2725],{"type":398,"tag":423,"props":2726,"children":2727},{"style":452},[2728],{"type":404,"value":1421},{"type":398,"tag":423,"props":2730,"children":2731},{"class":425,"line":820},[2732,2736],{"type":398,"tag":423,"props":2733,"children":2734},{"style":452},[2735],{"type":404,"value":1429},{"type":398,"tag":423,"props":2737,"children":2738},{"style":494},[2739],{"type":404,"value":615},{"type":398,"tag":423,"props":2741,"children":2742},{"class":425,"line":832},[2743,2748],{"type":398,"tag":423,"props":2744,"children":2745},{"style":488},[2746],{"type":404,"value":2747},"  return",{"type":398,"tag":423,"props":2749,"children":2750},{"style":500},[2751],{"type":404,"value":2752}," expose\n",{"type":398,"tag":423,"props":2754,"children":2755},{"class":425,"line":890},[2756],{"type":398,"tag":423,"props":2757,"children":2758},{"style":452},[2759],{"type":404,"value":1147},{"type":398,"tag":406,"props":2761,"children":2762},{},[2763],{"type":404,"value":2764},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":398,"tag":412,"props":2766,"children":2768},{"className":414,"code":2767,"language":416,"meta":391,"style":391},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2769],{"type":398,"tag":419,"props":2770,"children":2771},{"__ignoreMap":391},[2772,2801,2809,2839,2864,2894,2901,2942,3014,3067,3079,3135,3179,3190,3238,3275,3295,3303,3314,3325,3332,3363,3403,3423,3434,3472,3479,3486,3526,3567,3622,3664,3693,3706,3718,3783,3826,3848,3860,3868,3876,3884,3908],{"type":398,"tag":423,"props":2773,"children":2774},{"class":425,"line":426},[2775,2779,2784,2788,2793,2797],{"type":398,"tag":423,"props":2776,"children":2777},{"style":440},[2778],{"type":404,"value":443},{"type":398,"tag":423,"props":2780,"children":2781},{"style":446},[2782],{"type":404,"value":2783}," composeWatcher",{"type":398,"tag":423,"props":2785,"children":2786},{"style":452},[2787],{"type":404,"value":455},{"type":398,"tag":423,"props":2789,"children":2790},{"style":458},[2791],{"type":404,"value":2792},"watchers",{"type":398,"tag":423,"props":2794,"children":2795},{"style":452},[2796],{"type":404,"value":476},{"type":398,"tag":423,"props":2798,"children":2799},{"style":452},[2800],{"type":404,"value":481},{"type":398,"tag":423,"props":2802,"children":2803},{"class":425,"line":436},[2804],{"type":398,"tag":423,"props":2805,"children":2806},{"style":430},[2807],{"type":404,"value":2808},"  // 使用一个新的 watcher 整合事件列表\n",{"type":398,"tag":423,"props":2810,"children":2811},{"class":425,"line":484},[2812,2816,2821,2825,2830,2835],{"type":398,"tag":423,"props":2813,"children":2814},{"style":440},[2815],{"type":404,"value":1208},{"type":398,"tag":423,"props":2817,"children":2818},{"style":500},[2819],{"type":404,"value":2820}," watcher",{"type":398,"tag":423,"props":2822,"children":2823},{"style":985},[2824],{"type":404,"value":988},{"type":398,"tag":423,"props":2826,"children":2827},{"style":985},[2828],{"type":404,"value":2829}," new",{"type":398,"tag":423,"props":2831,"children":2832},{"style":446},[2833],{"type":404,"value":2834}," Watcher",{"type":398,"tag":423,"props":2836,"children":2837},{"style":494},[2838],{"type":404,"value":1931},{"type":398,"tag":423,"props":2840,"children":2841},{"class":425,"line":534},[2842,2846,2851,2855,2860],{"type":398,"tag":423,"props":2843,"children":2844},{"style":440},[2845],{"type":404,"value":1208},{"type":398,"tag":423,"props":2847,"children":2848},{"style":500},[2849],{"type":404,"value":2850}," filterDups",{"type":398,"tag":423,"props":2852,"children":2853},{"style":985},[2854],{"type":404,"value":988},{"type":398,"tag":423,"props":2856,"children":2857},{"style":446},[2858],{"type":404,"value":2859}," createDupsFilter",{"type":398,"tag":423,"props":2861,"children":2862},{"style":494},[2863],{"type":404,"value":1931},{"type":398,"tag":423,"props":2865,"children":2866},{"class":425,"line":586},[2867,2871,2876,2880,2885,2889],{"type":398,"tag":423,"props":2868,"children":2869},{"style":440},[2870],{"type":404,"value":1208},{"type":398,"tag":423,"props":2872,"children":2873},{"style":500},[2874],{"type":404,"value":2875}," counter",{"type":398,"tag":423,"props":2877,"children":2878},{"style":985},[2879],{"type":404,"value":988},{"type":398,"tag":423,"props":2881,"children":2882},{"style":500},[2883],{"type":404,"value":2884}," watchers",{"type":398,"tag":423,"props":2886,"children":2887},{"style":452},[2888],{"type":404,"value":508},{"type":398,"tag":423,"props":2890,"children":2891},{"style":1645},[2892],{"type":404,"value":2893},"length\n",{"type":398,"tag":423,"props":2895,"children":2896},{"class":425,"line":618},[2897],{"type":398,"tag":423,"props":2898,"children":2899},{"emptyLinePlaceholder":390},[2900],{"type":404,"value":1656},{"type":398,"tag":423,"props":2902,"children":2903},{"class":425,"line":631},[2904,2909,2913,2917,2921,2925,2929,2934,2938],{"type":398,"tag":423,"props":2905,"children":2906},{"style":500},[2907],{"type":404,"value":2908},"  watchers",{"type":398,"tag":423,"props":2910,"children":2911},{"style":452},[2912],{"type":404,"value":508},{"type":398,"tag":423,"props":2914,"children":2915},{"style":446},[2916],{"type":404,"value":937},{"type":398,"tag":423,"props":2918,"children":2919},{"style":494},[2920],{"type":404,"value":455},{"type":398,"tag":423,"props":2922,"children":2923},{"style":440},[2924],{"type":404,"value":443},{"type":398,"tag":423,"props":2926,"children":2927},{"style":452},[2928],{"type":404,"value":455},{"type":398,"tag":423,"props":2930,"children":2931},{"style":458},[2932],{"type":404,"value":2933},"w",{"type":398,"tag":423,"props":2935,"children":2936},{"style":452},[2937],{"type":404,"value":476},{"type":398,"tag":423,"props":2939,"children":2940},{"style":452},[2941],{"type":404,"value":481},{"type":398,"tag":423,"props":2943,"children":2944},{"class":425,"line":640},[2945,2950,2954,2958,2962,2966,2970,2974,2978,2982,2986,2990,2994,2998,3002,3006,3010],{"type":398,"tag":423,"props":2946,"children":2947},{"style":500},[2948],{"type":404,"value":2949},"    w",{"type":398,"tag":423,"props":2951,"children":2952},{"style":452},[2953],{"type":404,"value":508},{"type":398,"tag":423,"props":2955,"children":2956},{"style":446},[2957],{"type":404,"value":2045},{"type":398,"tag":423,"props":2959,"children":2960},{"style":494},[2961],{"type":404,"value":455},{"type":398,"tag":423,"props":2963,"children":2964},{"style":1246},[2965],{"type":404,"value":1260},{"type":398,"tag":423,"props":2967,"children":2968},{"style":1252},[2969],{"type":404,"value":2058},{"type":398,"tag":423,"props":2971,"children":2972},{"style":1246},[2973],{"type":404,"value":1260},{"type":398,"tag":423,"props":2975,"children":2976},{"style":452},[2977],{"type":404,"value":466},{"type":398,"tag":423,"props":2979,"children":2980},{"style":446},[2981],{"type":404,"value":2850},{"type":398,"tag":423,"props":2983,"children":2984},{"style":494},[2985],{"type":404,"value":455},{"type":398,"tag":423,"props":2987,"children":2988},{"style":440},[2989],{"type":404,"value":443},{"type":398,"tag":423,"props":2991,"children":2992},{"style":452},[2993],{"type":404,"value":455},{"type":398,"tag":423,"props":2995,"children":2996},{"style":458},[2997],{"type":404,"value":1306},{"type":398,"tag":423,"props":2999,"children":3000},{"style":452},[3001],{"type":404,"value":466},{"type":398,"tag":423,"props":3003,"children":3004},{"style":458},[3005],{"type":404,"value":2087},{"type":398,"tag":423,"props":3007,"children":3008},{"style":452},[3009],{"type":404,"value":476},{"type":398,"tag":423,"props":3011,"children":3012},{"style":452},[3013],{"type":404,"value":481},{"type":398,"tag":423,"props":3015,"children":3016},{"class":425,"line":649},[3017,3022,3026,3030,3034,3038,3042,3046,3050,3055,3059,3063],{"type":398,"tag":423,"props":3018,"children":3019},{"style":500},[3020],{"type":404,"value":3021},"      watcher",{"type":398,"tag":423,"props":3023,"children":3024},{"style":452},[3025],{"type":404,"value":508},{"type":398,"tag":423,"props":3027,"children":3028},{"style":446},[3029],{"type":404,"value":2445},{"type":398,"tag":423,"props":3031,"children":3032},{"style":494},[3033],{"type":404,"value":455},{"type":398,"tag":423,"props":3035,"children":3036},{"style":1246},[3037],{"type":404,"value":1260},{"type":398,"tag":423,"props":3039,"children":3040},{"style":1252},[3041],{"type":404,"value":2058},{"type":398,"tag":423,"props":3043,"children":3044},{"style":1246},[3045],{"type":404,"value":1260},{"type":398,"tag":423,"props":3047,"children":3048},{"style":452},[3049],{"type":404,"value":466},{"type":398,"tag":423,"props":3051,"children":3052},{"style":500},[3053],{"type":404,"value":3054}," evt",{"type":398,"tag":423,"props":3056,"children":3057},{"style":452},[3058],{"type":404,"value":466},{"type":398,"tag":423,"props":3060,"children":3061},{"style":500},[3062],{"type":404,"value":2087},{"type":398,"tag":423,"props":3064,"children":3065},{"style":494},[3066],{"type":404,"value":615},{"type":398,"tag":423,"props":3068,"children":3069},{"class":425,"line":690},[3070,3074],{"type":398,"tag":423,"props":3071,"children":3072},{"style":452},[3073],{"type":404,"value":624},{"type":398,"tag":423,"props":3075,"children":3076},{"style":494},[3077],{"type":404,"value":3078},"))\n",{"type":398,"tag":423,"props":3080,"children":3081},{"class":425,"line":748},[3082,3086,3090,3094,3098,3102,3107,3111,3115,3119,3123,3127,3131],{"type":398,"tag":423,"props":3083,"children":3084},{"style":500},[3085],{"type":404,"value":2949},{"type":398,"tag":423,"props":3087,"children":3088},{"style":452},[3089],{"type":404,"value":508},{"type":398,"tag":423,"props":3091,"children":3092},{"style":446},[3093],{"type":404,"value":2045},{"type":398,"tag":423,"props":3095,"children":3096},{"style":494},[3097],{"type":404,"value":455},{"type":398,"tag":423,"props":3099,"children":3100},{"style":1246},[3101],{"type":404,"value":1260},{"type":398,"tag":423,"props":3103,"children":3104},{"style":1252},[3105],{"type":404,"value":3106},"error",{"type":398,"tag":423,"props":3108,"children":3109},{"style":1246},[3110],{"type":404,"value":1260},{"type":398,"tag":423,"props":3112,"children":3113},{"style":452},[3114],{"type":404,"value":466},{"type":398,"tag":423,"props":3116,"children":3117},{"style":440},[3118],{"type":404,"value":566},{"type":398,"tag":423,"props":3120,"children":3121},{"style":452},[3122],{"type":404,"value":455},{"type":398,"tag":423,"props":3124,"children":3125},{"style":458},[3126],{"type":404,"value":575},{"type":398,"tag":423,"props":3128,"children":3129},{"style":452},[3130],{"type":404,"value":476},{"type":398,"tag":423,"props":3132,"children":3133},{"style":452},[3134],{"type":404,"value":481},{"type":398,"tag":423,"props":3136,"children":3137},{"class":425,"line":773},[3138,3142,3146,3150,3154,3158,3162,3166,3170,3175],{"type":398,"tag":423,"props":3139,"children":3140},{"style":500},[3141],{"type":404,"value":3021},{"type":398,"tag":423,"props":3143,"children":3144},{"style":452},[3145],{"type":404,"value":508},{"type":398,"tag":423,"props":3147,"children":3148},{"style":446},[3149],{"type":404,"value":2445},{"type":398,"tag":423,"props":3151,"children":3152},{"style":494},[3153],{"type":404,"value":455},{"type":398,"tag":423,"props":3155,"children":3156},{"style":1246},[3157],{"type":404,"value":1260},{"type":398,"tag":423,"props":3159,"children":3160},{"style":1252},[3161],{"type":404,"value":3106},{"type":398,"tag":423,"props":3163,"children":3164},{"style":1246},[3165],{"type":404,"value":1260},{"type":398,"tag":423,"props":3167,"children":3168},{"style":452},[3169],{"type":404,"value":466},{"type":398,"tag":423,"props":3171,"children":3172},{"style":500},[3173],{"type":404,"value":3174}," err",{"type":398,"tag":423,"props":3176,"children":3177},{"style":494},[3178],{"type":404,"value":615},{"type":398,"tag":423,"props":3180,"children":3181},{"class":425,"line":811},[3182,3186],{"type":398,"tag":423,"props":3183,"children":3184},{"style":452},[3185],{"type":404,"value":624},{"type":398,"tag":423,"props":3187,"children":3188},{"style":494},[3189],{"type":404,"value":615},{"type":398,"tag":423,"props":3191,"children":3192},{"class":425,"line":820},[3193,3197,3201,3205,3209,3213,3218,3222,3226,3230,3234],{"type":398,"tag":423,"props":3194,"children":3195},{"style":500},[3196],{"type":404,"value":2949},{"type":398,"tag":423,"props":3198,"children":3199},{"style":452},[3200],{"type":404,"value":508},{"type":398,"tag":423,"props":3202,"children":3203},{"style":446},[3204],{"type":404,"value":2045},{"type":398,"tag":423,"props":3206,"children":3207},{"style":494},[3208],{"type":404,"value":455},{"type":398,"tag":423,"props":3210,"children":3211},{"style":1246},[3212],{"type":404,"value":1260},{"type":398,"tag":423,"props":3214,"children":3215},{"style":1252},[3216],{"type":404,"value":3217},"ready",{"type":398,"tag":423,"props":3219,"children":3220},{"style":1246},[3221],{"type":404,"value":1260},{"type":398,"tag":423,"props":3223,"children":3224},{"style":452},[3225],{"type":404,"value":466},{"type":398,"tag":423,"props":3227,"children":3228},{"style":440},[3229],{"type":404,"value":566},{"type":398,"tag":423,"props":3231,"children":3232},{"style":452},[3233],{"type":404,"value":1906},{"type":398,"tag":423,"props":3235,"children":3236},{"style":452},[3237],{"type":404,"value":481},{"type":398,"tag":423,"props":3239,"children":3240},{"class":425,"line":832},[3241,3245,3249,3254,3258,3262,3267,3271],{"type":398,"tag":423,"props":3242,"children":3243},{"style":488},[3244],{"type":404,"value":896},{"type":398,"tag":423,"props":3246,"children":3247},{"style":494},[3248],{"type":404,"value":497},{"type":398,"tag":423,"props":3250,"children":3251},{"style":985},[3252],{"type":404,"value":3253},"!",{"type":398,"tag":423,"props":3255,"children":3256},{"style":494},[3257],{"type":404,"value":455},{"type":398,"tag":423,"props":3259,"children":3260},{"style":985},[3261],{"type":404,"value":1593},{"type":398,"tag":423,"props":3263,"children":3264},{"style":500},[3265],{"type":404,"value":3266},"counter",{"type":398,"tag":423,"props":3268,"children":3269},{"style":494},[3270],{"type":404,"value":526},{"type":398,"tag":423,"props":3272,"children":3273},{"style":452},[3274],{"type":404,"value":531},{"type":398,"tag":423,"props":3276,"children":3277},{"class":425,"line":890},[3278,3283,3287,3291],{"type":398,"tag":423,"props":3279,"children":3280},{"style":446},[3281],{"type":404,"value":3282},"        emitReady",{"type":398,"tag":423,"props":3284,"children":3285},{"style":494},[3286],{"type":404,"value":455},{"type":398,"tag":423,"props":3288,"children":3289},{"style":500},[3290],{"type":404,"value":2036},{"type":398,"tag":423,"props":3292,"children":3293},{"style":494},[3294],{"type":404,"value":615},{"type":398,"tag":423,"props":3296,"children":3297},{"class":425,"line":922},[3298],{"type":398,"tag":423,"props":3299,"children":3300},{"style":452},[3301],{"type":404,"value":3302},"      }\n",{"type":398,"tag":423,"props":3304,"children":3305},{"class":425,"line":971},[3306,3310],{"type":398,"tag":423,"props":3307,"children":3308},{"style":452},[3309],{"type":404,"value":624},{"type":398,"tag":423,"props":3311,"children":3312},{"style":494},[3313],{"type":404,"value":615},{"type":398,"tag":423,"props":3315,"children":3316},{"class":425,"line":1025},[3317,3321],{"type":398,"tag":423,"props":3318,"children":3319},{"style":452},[3320],{"type":404,"value":1429},{"type":398,"tag":423,"props":3322,"children":3323},{"style":494},[3324],{"type":404,"value":615},{"type":398,"tag":423,"props":3326,"children":3327},{"class":425,"line":1069},[3328],{"type":398,"tag":423,"props":3329,"children":3330},{"emptyLinePlaceholder":390},[3331],{"type":404,"value":1656},{"type":398,"tag":423,"props":3333,"children":3334},{"class":425,"line":1098},[3335,3339,3343,3347,3351,3355,3359],{"type":398,"tag":423,"props":3336,"children":3337},{"style":500},[3338],{"type":404,"value":1676},{"type":398,"tag":423,"props":3340,"children":3341},{"style":452},[3342],{"type":404,"value":508},{"type":398,"tag":423,"props":3344,"children":3345},{"style":446},[3346],{"type":404,"value":1926},{"type":398,"tag":423,"props":3348,"children":3349},{"style":985},[3350],{"type":404,"value":988},{"type":398,"tag":423,"props":3352,"children":3353},{"style":440},[3354],{"type":404,"value":566},{"type":398,"tag":423,"props":3356,"children":3357},{"style":452},[3358],{"type":404,"value":1906},{"type":398,"tag":423,"props":3360,"children":3361},{"style":452},[3362],{"type":404,"value":481},{"type":398,"tag":423,"props":3364,"children":3365},{"class":425,"line":1107},[3366,3371,3375,3379,3383,3387,3391,3395,3399],{"type":398,"tag":423,"props":3367,"children":3368},{"style":500},[3369],{"type":404,"value":3370},"    watchers",{"type":398,"tag":423,"props":3372,"children":3373},{"style":452},[3374],{"type":404,"value":508},{"type":398,"tag":423,"props":3376,"children":3377},{"style":446},[3378],{"type":404,"value":937},{"type":398,"tag":423,"props":3380,"children":3381},{"style":494},[3382],{"type":404,"value":455},{"type":398,"tag":423,"props":3384,"children":3385},{"style":440},[3386],{"type":404,"value":443},{"type":398,"tag":423,"props":3388,"children":3389},{"style":452},[3390],{"type":404,"value":455},{"type":398,"tag":423,"props":3392,"children":3393},{"style":458},[3394],{"type":404,"value":2933},{"type":398,"tag":423,"props":3396,"children":3397},{"style":452},[3398],{"type":404,"value":476},{"type":398,"tag":423,"props":3400,"children":3401},{"style":452},[3402],{"type":404,"value":481},{"type":398,"tag":423,"props":3404,"children":3405},{"class":425,"line":1120},[3406,3411,3415,3419],{"type":398,"tag":423,"props":3407,"children":3408},{"style":500},[3409],{"type":404,"value":3410},"      w",{"type":398,"tag":423,"props":3412,"children":3413},{"style":452},[3414],{"type":404,"value":508},{"type":398,"tag":423,"props":3416,"children":3417},{"style":446},[3418],{"type":404,"value":1926},{"type":398,"tag":423,"props":3420,"children":3421},{"style":494},[3422],{"type":404,"value":1931},{"type":398,"tag":423,"props":3424,"children":3425},{"class":425,"line":1133},[3426,3430],{"type":398,"tag":423,"props":3427,"children":3428},{"style":452},[3429],{"type":404,"value":624},{"type":398,"tag":423,"props":3431,"children":3432},{"style":494},[3433],{"type":404,"value":615},{"type":398,"tag":423,"props":3435,"children":3436},{"class":425,"line":1141},[3437,3442,3446,3451,3455,3460,3464,3468],{"type":398,"tag":423,"props":3438,"children":3439},{"style":500},[3440],{"type":404,"value":3441},"    process",{"type":398,"tag":423,"props":3443,"children":3444},{"style":452},[3445],{"type":404,"value":508},{"type":398,"tag":423,"props":3447,"children":3448},{"style":446},[3449],{"type":404,"value":3450},"nextTick",{"type":398,"tag":423,"props":3452,"children":3453},{"style":494},[3454],{"type":404,"value":455},{"type":398,"tag":423,"props":3456,"children":3457},{"style":500},[3458],{"type":404,"value":3459},"emitClose",{"type":398,"tag":423,"props":3461,"children":3462},{"style":452},[3463],{"type":404,"value":466},{"type":398,"tag":423,"props":3465,"children":3466},{"style":500},[3467],{"type":404,"value":2820},{"type":398,"tag":423,"props":3469,"children":3470},{"style":494},[3471],{"type":404,"value":615},{"type":398,"tag":423,"props":3473,"children":3474},{"class":425,"line":2268},[3475],{"type":398,"tag":423,"props":3476,"children":3477},{"style":452},[3478],{"type":404,"value":646},{"type":398,"tag":423,"props":3480,"children":3481},{"class":425,"line":2280},[3482],{"type":398,"tag":423,"props":3483,"children":3484},{"emptyLinePlaceholder":390},[3485],{"type":404,"value":1656},{"type":398,"tag":423,"props":3487,"children":3488},{"class":425,"line":2288},[3489,3493,3497,3501,3505,3509,3513,3518,3522],{"type":398,"tag":423,"props":3490,"children":3491},{"style":500},[3492],{"type":404,"value":1676},{"type":398,"tag":423,"props":3494,"children":3495},{"style":452},[3496],{"type":404,"value":508},{"type":398,"tag":423,"props":3498,"children":3499},{"style":446},[3500],{"type":404,"value":2573},{"type":398,"tag":423,"props":3502,"children":3503},{"style":985},[3504],{"type":404,"value":988},{"type":398,"tag":423,"props":3506,"children":3507},{"style":440},[3508],{"type":404,"value":566},{"type":398,"tag":423,"props":3510,"children":3511},{"style":452},[3512],{"type":404,"value":455},{"type":398,"tag":423,"props":3514,"children":3515},{"style":458},[3516],{"type":404,"value":3517},"fn",{"type":398,"tag":423,"props":3519,"children":3520},{"style":452},[3521],{"type":404,"value":476},{"type":398,"tag":423,"props":3523,"children":3524},{"style":452},[3525],{"type":404,"value":481},{"type":398,"tag":423,"props":3527,"children":3529},{"class":425,"line":3528},29,[3530,3534,3538,3542,3546,3551,3555,3559,3563],{"type":398,"tag":423,"props":3531,"children":3532},{"style":488},[3533],{"type":404,"value":1330},{"type":398,"tag":423,"props":3535,"children":3536},{"style":494},[3537],{"type":404,"value":497},{"type":398,"tag":423,"props":3539,"children":3540},{"style":500},[3541],{"type":404,"value":503},{"type":398,"tag":423,"props":3543,"children":3544},{"style":452},[3545],{"type":404,"value":508},{"type":398,"tag":423,"props":3547,"children":3548},{"style":446},[3549],{"type":404,"value":3550},"func",{"type":398,"tag":423,"props":3552,"children":3553},{"style":494},[3554],{"type":404,"value":455},{"type":398,"tag":423,"props":3556,"children":3557},{"style":500},[3558],{"type":404,"value":3517},{"type":398,"tag":423,"props":3560,"children":3561},{"style":494},[3562],{"type":404,"value":526},{"type":398,"tag":423,"props":3564,"children":3565},{"style":452},[3566],{"type":404,"value":531},{"type":398,"tag":423,"props":3568,"children":3570},{"class":425,"line":3569},30,[3571,3576,3581,3585,3589,3593,3598,3602,3606,3610,3614,3618],{"type":398,"tag":423,"props":3572,"children":3573},{"style":440},[3574],{"type":404,"value":3575},"      var",{"type":398,"tag":423,"props":3577,"children":3578},{"style":500},[3579],{"type":404,"value":3580}," promises",{"type":398,"tag":423,"props":3582,"children":3583},{"style":985},[3584],{"type":404,"value":988},{"type":398,"tag":423,"props":3586,"children":3587},{"style":500},[3588],{"type":404,"value":2884},{"type":398,"tag":423,"props":3590,"children":3591},{"style":452},[3592],{"type":404,"value":508},{"type":398,"tag":423,"props":3594,"children":3595},{"style":446},[3596],{"type":404,"value":3597},"map",{"type":398,"tag":423,"props":3599,"children":3600},{"style":494},[3601],{"type":404,"value":455},{"type":398,"tag":423,"props":3603,"children":3604},{"style":440},[3605],{"type":404,"value":443},{"type":398,"tag":423,"props":3607,"children":3608},{"style":452},[3609],{"type":404,"value":455},{"type":398,"tag":423,"props":3611,"children":3612},{"style":458},[3613],{"type":404,"value":2933},{"type":398,"tag":423,"props":3615,"children":3616},{"style":452},[3617],{"type":404,"value":476},{"type":398,"tag":423,"props":3619,"children":3620},{"style":452},[3621],{"type":404,"value":481},{"type":398,"tag":423,"props":3623,"children":3625},{"class":425,"line":3624},31,[3626,3631,3635,3640,3644,3648,3652,3656,3660],{"type":398,"tag":423,"props":3627,"children":3628},{"style":488},[3629],{"type":404,"value":3630},"        return",{"type":398,"tag":423,"props":3632,"children":3633},{"style":985},[3634],{"type":404,"value":2829},{"type":398,"tag":423,"props":3636,"children":3637},{"style":2315},[3638],{"type":404,"value":3639}," Promise",{"type":398,"tag":423,"props":3641,"children":3642},{"style":494},[3643],{"type":404,"value":455},{"type":398,"tag":423,"props":3645,"children":3646},{"style":440},[3647],{"type":404,"value":443},{"type":398,"tag":423,"props":3649,"children":3650},{"style":452},[3651],{"type":404,"value":455},{"type":398,"tag":423,"props":3653,"children":3654},{"style":458},[3655],{"type":404,"value":1230},{"type":398,"tag":423,"props":3657,"children":3658},{"style":452},[3659],{"type":404,"value":476},{"type":398,"tag":423,"props":3661,"children":3662},{"style":452},[3663],{"type":404,"value":481},{"type":398,"tag":423,"props":3665,"children":3667},{"class":425,"line":3666},32,[3668,3673,3677,3681,3685,3689],{"type":398,"tag":423,"props":3669,"children":3670},{"style":500},[3671],{"type":404,"value":3672},"          w",{"type":398,"tag":423,"props":3674,"children":3675},{"style":452},[3676],{"type":404,"value":508},{"type":398,"tag":423,"props":3678,"children":3679},{"style":446},[3680],{"type":404,"value":2573},{"type":398,"tag":423,"props":3682,"children":3683},{"style":494},[3684],{"type":404,"value":455},{"type":398,"tag":423,"props":3686,"children":3687},{"style":500},[3688],{"type":404,"value":1230},{"type":398,"tag":423,"props":3690,"children":3691},{"style":494},[3692],{"type":404,"value":615},{"type":398,"tag":423,"props":3694,"children":3696},{"class":425,"line":3695},33,[3697,3702],{"type":398,"tag":423,"props":3698,"children":3699},{"style":452},[3700],{"type":404,"value":3701},"        }",{"type":398,"tag":423,"props":3703,"children":3704},{"style":494},[3705],{"type":404,"value":615},{"type":398,"tag":423,"props":3707,"children":3709},{"class":425,"line":3708},34,[3710,3714],{"type":398,"tag":423,"props":3711,"children":3712},{"style":452},[3713],{"type":404,"value":1113},{"type":398,"tag":423,"props":3715,"children":3716},{"style":494},[3717],{"type":404,"value":615},{"type":398,"tag":423,"props":3719,"children":3721},{"class":425,"line":3720},35,[3722,3727,3731,3736,3740,3745,3749,3753,3758,3762,3766,3770,3775,3779],{"type":398,"tag":423,"props":3723,"children":3724},{"style":2315},[3725],{"type":404,"value":3726},"      Promise",{"type":398,"tag":423,"props":3728,"children":3729},{"style":452},[3730],{"type":404,"value":508},{"type":398,"tag":423,"props":3732,"children":3733},{"style":446},[3734],{"type":404,"value":3735},"all",{"type":398,"tag":423,"props":3737,"children":3738},{"style":494},[3739],{"type":404,"value":455},{"type":398,"tag":423,"props":3741,"children":3742},{"style":500},[3743],{"type":404,"value":3744},"promises",{"type":398,"tag":423,"props":3746,"children":3747},{"style":494},[3748],{"type":404,"value":476},{"type":398,"tag":423,"props":3750,"children":3751},{"style":452},[3752],{"type":404,"value":508},{"type":398,"tag":423,"props":3754,"children":3755},{"style":446},[3756],{"type":404,"value":3757},"then",{"type":398,"tag":423,"props":3759,"children":3760},{"style":494},[3761],{"type":404,"value":455},{"type":398,"tag":423,"props":3763,"children":3764},{"style":440},[3765],{"type":404,"value":443},{"type":398,"tag":423,"props":3767,"children":3768},{"style":452},[3769],{"type":404,"value":455},{"type":398,"tag":423,"props":3771,"children":3772},{"style":458},[3773],{"type":404,"value":3774},"result",{"type":398,"tag":423,"props":3776,"children":3777},{"style":452},[3778],{"type":404,"value":476},{"type":398,"tag":423,"props":3780,"children":3781},{"style":452},[3782],{"type":404,"value":481},{"type":398,"tag":423,"props":3784,"children":3786},{"class":425,"line":3785},36,[3787,3791,3796,3800,3805,3809,3814,3818,3822],{"type":398,"tag":423,"props":3788,"children":3789},{"style":440},[3790],{"type":404,"value":977},{"type":398,"tag":423,"props":3792,"children":3793},{"style":500},[3794],{"type":404,"value":3795}," ret",{"type":398,"tag":423,"props":3797,"children":3798},{"style":985},[3799],{"type":404,"value":988},{"type":398,"tag":423,"props":3801,"children":3802},{"style":446},[3803],{"type":404,"value":3804}," unique",{"type":398,"tag":423,"props":3806,"children":3807},{"style":494},[3808],{"type":404,"value":455},{"type":398,"tag":423,"props":3810,"children":3811},{"style":446},[3812],{"type":404,"value":3813},"flat1",{"type":398,"tag":423,"props":3815,"children":3816},{"style":494},[3817],{"type":404,"value":455},{"type":398,"tag":423,"props":3819,"children":3820},{"style":500},[3821],{"type":404,"value":3774},{"type":398,"tag":423,"props":3823,"children":3824},{"style":494},[3825],{"type":404,"value":3078},{"type":398,"tag":423,"props":3827,"children":3829},{"class":425,"line":3828},37,[3830,3835,3839,3844],{"type":398,"tag":423,"props":3831,"children":3832},{"style":446},[3833],{"type":404,"value":3834},"        fn",{"type":398,"tag":423,"props":3836,"children":3837},{"style":494},[3838],{"type":404,"value":455},{"type":398,"tag":423,"props":3840,"children":3841},{"style":500},[3842],{"type":404,"value":3843},"ret",{"type":398,"tag":423,"props":3845,"children":3846},{"style":494},[3847],{"type":404,"value":615},{"type":398,"tag":423,"props":3849,"children":3851},{"class":425,"line":3850},38,[3852,3856],{"type":398,"tag":423,"props":3853,"children":3854},{"style":452},[3855],{"type":404,"value":1113},{"type":398,"tag":423,"props":3857,"children":3858},{"style":494},[3859],{"type":404,"value":615},{"type":398,"tag":423,"props":3861,"children":3863},{"class":425,"line":3862},39,[3864],{"type":398,"tag":423,"props":3865,"children":3866},{"style":452},[3867],{"type":404,"value":1421},{"type":398,"tag":423,"props":3869,"children":3871},{"class":425,"line":3870},40,[3872],{"type":398,"tag":423,"props":3873,"children":3874},{"style":452},[3875],{"type":404,"value":646},{"type":398,"tag":423,"props":3877,"children":3879},{"class":425,"line":3878},41,[3880],{"type":398,"tag":423,"props":3881,"children":3882},{"emptyLinePlaceholder":390},[3883],{"type":404,"value":1656},{"type":398,"tag":423,"props":3885,"children":3887},{"class":425,"line":3886},42,[3888,3892,3896,3900,3904],{"type":398,"tag":423,"props":3889,"children":3890},{"style":488},[3891],{"type":404,"value":2747},{"type":398,"tag":423,"props":3893,"children":3894},{"style":500},[3895],{"type":404,"value":2820},{"type":398,"tag":423,"props":3897,"children":3898},{"style":452},[3899],{"type":404,"value":508},{"type":398,"tag":423,"props":3901,"children":3902},{"style":446},[3903],{"type":404,"value":2336},{"type":398,"tag":423,"props":3905,"children":3906},{"style":494},[3907],{"type":404,"value":1931},{"type":398,"tag":423,"props":3909,"children":3911},{"class":425,"line":3910},43,[3912],{"type":398,"tag":423,"props":3913,"children":3914},{"style":452},[3915],{"type":404,"value":1147},{"type":398,"tag":399,"props":3917,"children":3919},{"id":3918},"工具函数",[3920],{"type":404,"value":3918},{"type":398,"tag":406,"props":3922,"children":3923},{},[3924],{"type":404,"value":3925},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":398,"tag":412,"props":3927,"children":3929},{"className":414,"code":3928,"language":416,"meta":391,"style":391},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3930],{"type":398,"tag":419,"props":3931,"children":3932},{"__ignoreMap":391},[3933,3961,4024,4065,4076],{"type":398,"tag":423,"props":3934,"children":3935},{"class":425,"line":426},[3936,3940,3944,3948,3953,3957],{"type":398,"tag":423,"props":3937,"children":3938},{"style":440},[3939],{"type":404,"value":443},{"type":398,"tag":423,"props":3941,"children":3942},{"style":446},[3943],{"type":404,"value":3804},{"type":398,"tag":423,"props":3945,"children":3946},{"style":452},[3947],{"type":404,"value":455},{"type":398,"tag":423,"props":3949,"children":3950},{"style":458},[3951],{"type":404,"value":3952},"arr",{"type":398,"tag":423,"props":3954,"children":3955},{"style":452},[3956],{"type":404,"value":476},{"type":398,"tag":423,"props":3958,"children":3959},{"style":452},[3960],{"type":404,"value":481},{"type":398,"tag":423,"props":3962,"children":3963},{"class":425,"line":436},[3964,3968,3973,3977,3982,3986,3990,3994,3999,4003,4008,4012,4016,4020],{"type":398,"tag":423,"props":3965,"children":3966},{"style":488},[3967],{"type":404,"value":2747},{"type":398,"tag":423,"props":3969,"children":3970},{"style":500},[3971],{"type":404,"value":3972}," arr",{"type":398,"tag":423,"props":3974,"children":3975},{"style":452},[3976],{"type":404,"value":508},{"type":398,"tag":423,"props":3978,"children":3979},{"style":446},[3980],{"type":404,"value":3981},"filter",{"type":398,"tag":423,"props":3983,"children":3984},{"style":494},[3985],{"type":404,"value":455},{"type":398,"tag":423,"props":3987,"children":3988},{"style":440},[3989],{"type":404,"value":443},{"type":398,"tag":423,"props":3991,"children":3992},{"style":452},[3993],{"type":404,"value":455},{"type":398,"tag":423,"props":3995,"children":3996},{"style":458},[3997],{"type":404,"value":3998},"v",{"type":398,"tag":423,"props":4000,"children":4001},{"style":452},[4002],{"type":404,"value":466},{"type":398,"tag":423,"props":4004,"children":4005},{"style":458},[4006],{"type":404,"value":4007}," i",{"type":398,"tag":423,"props":4009,"children":4010},{"style":452},[4011],{"type":404,"value":466},{"type":398,"tag":423,"props":4013,"children":4014},{"style":458},[4015],{"type":404,"value":2385},{"type":398,"tag":423,"props":4017,"children":4018},{"style":452},[4019],{"type":404,"value":476},{"type":398,"tag":423,"props":4021,"children":4022},{"style":452},[4023],{"type":404,"value":481},{"type":398,"tag":423,"props":4025,"children":4026},{"class":425,"line":484},[4027,4031,4035,4039,4044,4048,4052,4056,4060],{"type":398,"tag":423,"props":4028,"children":4029},{"style":488},[4030],{"type":404,"value":1793},{"type":398,"tag":423,"props":4032,"children":4033},{"style":500},[4034],{"type":404,"value":2385},{"type":398,"tag":423,"props":4036,"children":4037},{"style":452},[4038],{"type":404,"value":508},{"type":398,"tag":423,"props":4040,"children":4041},{"style":446},[4042],{"type":404,"value":4043},"indexOf",{"type":398,"tag":423,"props":4045,"children":4046},{"style":494},[4047],{"type":404,"value":455},{"type":398,"tag":423,"props":4049,"children":4050},{"style":500},[4051],{"type":404,"value":3998},{"type":398,"tag":423,"props":4053,"children":4054},{"style":494},[4055],{"type":404,"value":909},{"type":398,"tag":423,"props":4057,"children":4058},{"style":985},[4059],{"type":404,"value":1365},{"type":398,"tag":423,"props":4061,"children":4062},{"style":500},[4063],{"type":404,"value":4064}," i\n",{"type":398,"tag":423,"props":4066,"children":4067},{"class":425,"line":534},[4068,4072],{"type":398,"tag":423,"props":4069,"children":4070},{"style":452},[4071],{"type":404,"value":1429},{"type":398,"tag":423,"props":4073,"children":4074},{"style":494},[4075],{"type":404,"value":615},{"type":398,"tag":423,"props":4077,"children":4078},{"class":425,"line":586},[4079],{"type":398,"tag":423,"props":4080,"children":4081},{"style":452},[4082],{"type":404,"value":1147},{"type":398,"tag":406,"props":4084,"children":4085},{},[4086],{"type":404,"value":4087},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":398,"tag":412,"props":4089,"children":4091},{"className":414,"code":4090,"language":416,"meta":391,"style":391},"const getUUID = () => Math.random().toString(16).substr(2)\n",[4092],{"type":398,"tag":419,"props":4093,"children":4094},{"__ignoreMap":391},[4095],{"type":398,"tag":423,"props":4096,"children":4097},{"class":425,"line":426},[4098,4103,4109,4113,4118,4123,4128,4132,4137,4141,4145,4150,4154,4159,4163,4167,4172,4176,4181],{"type":398,"tag":423,"props":4099,"children":4100},{"style":440},[4101],{"type":404,"value":4102},"const",{"type":398,"tag":423,"props":4104,"children":4106},{"style":4105},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4107],{"type":404,"value":4108}," getUUID",{"type":398,"tag":423,"props":4110,"children":4111},{"style":985},[4112],{"type":404,"value":988},{"type":398,"tag":423,"props":4114,"children":4115},{"style":452},[4116],{"type":404,"value":4117}," ()",{"type":398,"tag":423,"props":4119,"children":4120},{"style":440},[4121],{"type":404,"value":4122}," =>",{"type":398,"tag":423,"props":4124,"children":4125},{"style":500},[4126],{"type":404,"value":4127}," Math",{"type":398,"tag":423,"props":4129,"children":4130},{"style":452},[4131],{"type":404,"value":508},{"type":398,"tag":423,"props":4133,"children":4134},{"style":446},[4135],{"type":404,"value":4136},"random",{"type":398,"tag":423,"props":4138,"children":4139},{"style":500},[4140],{"type":404,"value":1906},{"type":398,"tag":423,"props":4142,"children":4143},{"style":452},[4144],{"type":404,"value":508},{"type":398,"tag":423,"props":4146,"children":4147},{"style":446},[4148],{"type":404,"value":4149},"toString",{"type":398,"tag":423,"props":4151,"children":4152},{"style":500},[4153],{"type":404,"value":455},{"type":398,"tag":423,"props":4155,"children":4156},{"style":2014},[4157],{"type":404,"value":4158},"16",{"type":398,"tag":423,"props":4160,"children":4161},{"style":500},[4162],{"type":404,"value":476},{"type":398,"tag":423,"props":4164,"children":4165},{"style":452},[4166],{"type":404,"value":508},{"type":398,"tag":423,"props":4168,"children":4169},{"style":446},[4170],{"type":404,"value":4171},"substr",{"type":398,"tag":423,"props":4173,"children":4174},{"style":500},[4175],{"type":404,"value":455},{"type":398,"tag":423,"props":4177,"children":4178},{"style":2014},[4179],{"type":404,"value":4180},"2",{"type":398,"tag":423,"props":4182,"children":4183},{"style":500},[4184],{"type":404,"value":615},{"type":398,"tag":399,"props":4186,"children":4188},{"id":4187},"考虑的点",[4189],{"type":404,"value":4187},{"type":398,"tag":406,"props":4191,"children":4192},{},[4193],{"type":404,"value":4194},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":398,"tag":4196,"props":4197,"children":4198},"ul",{},[4199,4205,4210,4215],{"type":398,"tag":4200,"props":4201,"children":4202},"li",{},[4203],{"type":404,"value":4204},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":398,"tag":4200,"props":4206,"children":4207},{},[4208],{"type":404,"value":4209},"支持本地符号路径吗？支持网络路径吗？",{"type":398,"tag":4200,"props":4211,"children":4212},{},[4213],{"type":404,"value":4214},"如何控制包的大小？",{"type":398,"tag":4200,"props":4216,"children":4217},{},[4218],{"type":404,"value":4219},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":398,"tag":406,"props":4221,"children":4222},{},[4223],{"type":404,"value":4224},"也注意到一些有意思的问题：",{"type":398,"tag":4196,"props":4226,"children":4227},{},[4228,4240,4252],{"type":398,"tag":4200,"props":4229,"children":4230},{},[4231,4233],{"type":404,"value":4232},"Windows，删除正在监听的文件夹，",{"type":398,"tag":1154,"props":4234,"children":4237},{"href":4235,"rel":4236},"https://github.com/nodejs/node/issues/31702",[1158],[4238],{"type":404,"value":4239},"会发生什么事情？",{"type":398,"tag":4200,"props":4241,"children":4242},{},[4243,4245],{"type":404,"value":4244},"Linux，单个进程能操作的文件数量有上限，",{"type":398,"tag":1154,"props":4246,"children":4249},{"href":4247,"rel":4248},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[1158],[4250],{"type":404,"value":4251},"该怎么解决？",{"type":398,"tag":4200,"props":4253,"children":4254},{},[4255,4257],{"type":404,"value":4256},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":398,"tag":1154,"props":4258,"children":4261},{"href":4259,"rel":4260},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[1158],[4262],{"type":404,"value":4263},"怎么处理呢？",{"type":398,"tag":399,"props":4265,"children":4267},{"id":4266},"题外话",[4268],{"type":404,"value":4266},{"type":398,"tag":4270,"props":4271,"children":4274},"l-link",{"label":4272,"source":4273},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":398,"tag":406,"props":4276,"children":4277},{},[4278],{"type":404,"value":4279},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":398,"tag":399,"props":4281,"children":4283},{"id":4282},"其它资料",[4284],{"type":404,"value":4282},{"type":398,"tag":406,"props":4286,"children":4287},{},[4288],{"type":404,"value":4289},"相关类库：",{"type":398,"tag":4196,"props":4291,"children":4292},{},[4293,4302,4312],{"type":398,"tag":4200,"props":4294,"children":4295},{},[4296],{"type":398,"tag":1154,"props":4297,"children":4300},{"href":4298,"rel":4299},"https://www.npmjs.com/package/watcher",[1158],[4301],{"type":404,"value":2036},{"type":398,"tag":4200,"props":4303,"children":4304},{},[4305],{"type":398,"tag":1154,"props":4306,"children":4309},{"href":4307,"rel":4308},"https://github.com/paulmillr/chokidar",[1158],[4310],{"type":404,"value":4311},"chokidar",{"type":398,"tag":4200,"props":4313,"children":4314},{},[4315],{"type":398,"tag":1154,"props":4316,"children":4319},{"href":4317,"rel":4318},"https://github.com/Axosoft/nsfw",[1158],[4320],{"type":404,"value":4321},"nsfw",{"type":398,"tag":406,"props":4323,"children":4324},{},[4325],{"type":404,"value":4326},"推荐阅读：",{"type":398,"tag":4196,"props":4328,"children":4329},{},[4330,4340],{"type":398,"tag":4200,"props":4331,"children":4332},{},[4333],{"type":398,"tag":1154,"props":4334,"children":4337},{"href":4335,"rel":4336},"https://juejin.cn/post/7000262974430511117",[1158],[4338],{"type":404,"value":4339},"《node-watch、Chokidar封装思路解析》",{"type":398,"tag":4200,"props":4341,"children":4342},{},[4343],{"type":398,"tag":1154,"props":4344,"children":4347},{"href":4345,"rel":4346},"https://www.jianshu.com/p/09dae09457fa",[1158],[4348],{"type":404,"value":4349},"《如何利用 Nodejs 监听文件夹》",{"type":398,"tag":4351,"props":4352,"children":4353},"style",{},[4354],{"type":404,"value":4355},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":391,"searchDepth":436,"depth":436,"links":4357},[4358,4359,4360,4361,4362],{"id":401,"depth":436,"text":401},{"id":3918,"depth":436,"text":3918},{"id":4187,"depth":436,"text":4187},{"id":4266,"depth":436,"text":4266},{"id":4282,"depth":436,"text":4282},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","md",[4369,4373],{"_path":4370,"title":4371,"description":4372},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4374,"title":4375,"description":391},"/source-code/_ts/type-challenges","TypeScript Type Chanllenges",1710257727078]