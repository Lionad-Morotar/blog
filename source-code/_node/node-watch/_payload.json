[{"data":1,"prerenderedAt":4153},["ShallowReactive",2],{"navigation":3,"/source-code/_node/node-watch":161,"/source-code/_node/node-watch-surround":4144},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":4138,"_id":4139,"_source":4140,"_file":4141,"_stem":4142,"_extension":4143},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":170,"children":171,"toc":4131},"root",[172,180,186,923,939,1216,1221,1398,1403,2073,2078,2535,2540,3691,3696,3701,3858,3863,3960,3965,3970,3995,4000,4039,4044,4050,4055,4060,4065,4097,4102,4125],{"type":173,"tag":174,"props":175,"children":177},"element","h2",{"id":176},"实现",[178],{"type":179,"value":176},"text",{"type":173,"tag":181,"props":182,"children":183},"p",{},[184],{"type":179,"value":185},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":173,"tag":187,"props":188,"children":192},"pre",{"className":189,"code":190,"language":191,"meta":166,"style":166},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[193],{"type":173,"tag":194,"props":195,"children":196},"code",{"__ignoreMap":166},[197,209,257,307,359,391,404,413,422,463,521,546,584,593,605,663,695,744,798,842,871,880,893,906,914],{"type":173,"tag":198,"props":199,"children":202},"span",{"class":200,"line":201},"line",1,[203],{"type":173,"tag":198,"props":204,"children":206},{"style":205},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[207],{"type":179,"value":208},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":173,"tag":198,"props":210,"children":212},{"class":200,"line":211},2,[213,219,225,231,237,242,247,252],{"type":173,"tag":198,"props":214,"children":216},{"style":215},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[217],{"type":179,"value":218},"function",{"type":173,"tag":198,"props":220,"children":222},{"style":221},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[223],{"type":179,"value":224}," watch",{"type":173,"tag":198,"props":226,"children":228},{"style":227},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[229],{"type":179,"value":230},"(",{"type":173,"tag":198,"props":232,"children":234},{"style":233},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[235],{"type":179,"value":236},"dir",{"type":173,"tag":198,"props":238,"children":239},{"style":227},[240],{"type":179,"value":241},",",{"type":173,"tag":198,"props":243,"children":244},{"style":233},[245],{"type":179,"value":246}," cb",{"type":173,"tag":198,"props":248,"children":249},{"style":227},[250],{"type":179,"value":251},")",{"type":173,"tag":198,"props":253,"children":254},{"style":227},[255],{"type":179,"value":256}," {\n",{"type":173,"tag":198,"props":258,"children":260},{"class":200,"line":259},3,[261,267,273,279,284,289,293,297,302],{"type":173,"tag":198,"props":262,"children":264},{"style":263},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[265],{"type":179,"value":266},"  if",{"type":173,"tag":198,"props":268,"children":270},{"style":269},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[271],{"type":179,"value":272}," (",{"type":173,"tag":198,"props":274,"children":276},{"style":275},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[277],{"type":179,"value":278},"is",{"type":173,"tag":198,"props":280,"children":281},{"style":227},[282],{"type":179,"value":283},".",{"type":173,"tag":198,"props":285,"children":286},{"style":221},[287],{"type":179,"value":288},"File",{"type":173,"tag":198,"props":290,"children":291},{"style":269},[292],{"type":179,"value":230},{"type":173,"tag":198,"props":294,"children":295},{"style":275},[296],{"type":179,"value":236},{"type":173,"tag":198,"props":298,"children":299},{"style":269},[300],{"type":179,"value":301},")) ",{"type":173,"tag":198,"props":303,"children":304},{"style":227},[305],{"type":179,"value":306},"{\n",{"type":173,"tag":198,"props":308,"children":310},{"class":200,"line":309},4,[311,316,320,325,329,333,337,342,346,351,355],{"type":173,"tag":198,"props":312,"children":313},{"style":275},[314],{"type":179,"value":315},"    fs",{"type":173,"tag":198,"props":317,"children":318},{"style":227},[319],{"type":179,"value":283},{"type":173,"tag":198,"props":321,"children":322},{"style":221},[323],{"type":179,"value":324},"watchFile",{"type":173,"tag":198,"props":326,"children":327},{"style":269},[328],{"type":179,"value":230},{"type":173,"tag":198,"props":330,"children":331},{"style":275},[332],{"type":179,"value":236},{"type":173,"tag":198,"props":334,"children":335},{"style":227},[336],{"type":179,"value":241},{"type":173,"tag":198,"props":338,"children":339},{"style":215},[340],{"type":179,"value":341}," function",{"type":173,"tag":198,"props":343,"children":344},{"style":227},[345],{"type":179,"value":230},{"type":173,"tag":198,"props":347,"children":348},{"style":233},[349],{"type":179,"value":350},"err",{"type":173,"tag":198,"props":352,"children":353},{"style":227},[354],{"type":179,"value":251},{"type":173,"tag":198,"props":356,"children":357},{"style":227},[358],{"type":179,"value":256},{"type":173,"tag":198,"props":360,"children":362},{"class":200,"line":361},5,[363,368,372,377,381,386],{"type":173,"tag":198,"props":364,"children":365},{"style":221},[366],{"type":179,"value":367},"      normalizeCall",{"type":173,"tag":198,"props":369,"children":370},{"style":269},[371],{"type":179,"value":230},{"type":173,"tag":198,"props":373,"children":374},{"style":275},[375],{"type":179,"value":376},"cb",{"type":173,"tag":198,"props":378,"children":379},{"style":227},[380],{"type":179,"value":241},{"type":173,"tag":198,"props":382,"children":383},{"style":275},[384],{"type":179,"value":385}," dir",{"type":173,"tag":198,"props":387,"children":388},{"style":269},[389],{"type":179,"value":390},")\n",{"type":173,"tag":198,"props":392,"children":394},{"class":200,"line":393},6,[395,400],{"type":173,"tag":198,"props":396,"children":397},{"style":227},[398],{"type":179,"value":399},"    }",{"type":173,"tag":198,"props":401,"children":402},{"style":269},[403],{"type":179,"value":390},{"type":173,"tag":198,"props":405,"children":407},{"class":200,"line":406},7,[408],{"type":173,"tag":198,"props":409,"children":410},{"style":263},[411],{"type":179,"value":412},"    return\n",{"type":173,"tag":198,"props":414,"children":416},{"class":200,"line":415},8,[417],{"type":173,"tag":198,"props":418,"children":419},{"style":227},[420],{"type":179,"value":421},"  }\n",{"type":173,"tag":198,"props":423,"children":425},{"class":200,"line":424},9,[426,430,434,438,442,447,451,455,459],{"type":173,"tag":198,"props":427,"children":428},{"style":263},[429],{"type":179,"value":266},{"type":173,"tag":198,"props":431,"children":432},{"style":269},[433],{"type":179,"value":272},{"type":173,"tag":198,"props":435,"children":436},{"style":275},[437],{"type":179,"value":278},{"type":173,"tag":198,"props":439,"children":440},{"style":227},[441],{"type":179,"value":283},{"type":173,"tag":198,"props":443,"children":444},{"style":221},[445],{"type":179,"value":446},"Directory",{"type":173,"tag":198,"props":448,"children":449},{"style":269},[450],{"type":179,"value":230},{"type":173,"tag":198,"props":452,"children":453},{"style":275},[454],{"type":179,"value":236},{"type":173,"tag":198,"props":456,"children":457},{"style":269},[458],{"type":179,"value":301},{"type":173,"tag":198,"props":460,"children":461},{"style":227},[462],{"type":179,"value":306},{"type":173,"tag":198,"props":464,"children":466},{"class":200,"line":465},10,[467,471,475,480,484,488,492,496,500,504,508,513,517],{"type":173,"tag":198,"props":468,"children":469},{"style":275},[470],{"type":179,"value":315},{"type":173,"tag":198,"props":472,"children":473},{"style":227},[474],{"type":179,"value":283},{"type":173,"tag":198,"props":476,"children":477},{"style":221},[478],{"type":179,"value":479},"watch",{"type":173,"tag":198,"props":481,"children":482},{"style":269},[483],{"type":179,"value":230},{"type":173,"tag":198,"props":485,"children":486},{"style":275},[487],{"type":179,"value":236},{"type":173,"tag":198,"props":489,"children":490},{"style":227},[491],{"type":179,"value":241},{"type":173,"tag":198,"props":493,"children":494},{"style":215},[495],{"type":179,"value":341},{"type":173,"tag":198,"props":497,"children":498},{"style":227},[499],{"type":179,"value":230},{"type":173,"tag":198,"props":501,"children":502},{"style":233},[503],{"type":179,"value":350},{"type":173,"tag":198,"props":505,"children":506},{"style":227},[507],{"type":179,"value":241},{"type":173,"tag":198,"props":509,"children":510},{"style":233},[511],{"type":179,"value":512}," fname",{"type":173,"tag":198,"props":514,"children":515},{"style":227},[516],{"type":179,"value":251},{"type":173,"tag":198,"props":518,"children":519},{"style":227},[520],{"type":179,"value":256},{"type":173,"tag":198,"props":522,"children":524},{"class":200,"line":523},11,[525,529,533,537,541],{"type":173,"tag":198,"props":526,"children":527},{"style":221},[528],{"type":179,"value":367},{"type":173,"tag":198,"props":530,"children":531},{"style":269},[532],{"type":179,"value":230},{"type":173,"tag":198,"props":534,"children":535},{"style":275},[536],{"type":179,"value":376},{"type":173,"tag":198,"props":538,"children":539},{"style":227},[540],{"type":179,"value":241},{"type":173,"tag":198,"props":542,"children":543},{"style":269},[544],{"type":179,"value":545},"  \n",{"type":173,"tag":198,"props":547,"children":549},{"class":200,"line":548},12,[550,555,559,564,568,572,576,580],{"type":173,"tag":198,"props":551,"children":552},{"style":275},[553],{"type":179,"value":554},"        path",{"type":173,"tag":198,"props":556,"children":557},{"style":227},[558],{"type":179,"value":283},{"type":173,"tag":198,"props":560,"children":561},{"style":221},[562],{"type":179,"value":563},"join",{"type":173,"tag":198,"props":565,"children":566},{"style":269},[567],{"type":179,"value":230},{"type":173,"tag":198,"props":569,"children":570},{"style":275},[571],{"type":179,"value":236},{"type":173,"tag":198,"props":573,"children":574},{"style":227},[575],{"type":179,"value":241},{"type":173,"tag":198,"props":577,"children":578},{"style":275},[579],{"type":179,"value":512},{"type":173,"tag":198,"props":581,"children":582},{"style":269},[583],{"type":179,"value":390},{"type":173,"tag":198,"props":585,"children":587},{"class":200,"line":586},13,[588],{"type":173,"tag":198,"props":589,"children":590},{"style":269},[591],{"type":179,"value":592},"      )\n",{"type":173,"tag":198,"props":594,"children":596},{"class":200,"line":595},14,[597,601],{"type":173,"tag":198,"props":598,"children":599},{"style":227},[600],{"type":179,"value":399},{"type":173,"tag":198,"props":602,"children":603},{"style":269},[604],{"type":179,"value":390},{"type":173,"tag":198,"props":606,"children":608},{"class":200,"line":607},15,[609,613,617,622,626,630,634,638,642,646,650,655,659],{"type":173,"tag":198,"props":610,"children":611},{"style":275},[612],{"type":179,"value":315},{"type":173,"tag":198,"props":614,"children":615},{"style":227},[616],{"type":179,"value":283},{"type":173,"tag":198,"props":618,"children":619},{"style":221},[620],{"type":179,"value":621},"readdir",{"type":173,"tag":198,"props":623,"children":624},{"style":269},[625],{"type":179,"value":230},{"type":173,"tag":198,"props":627,"children":628},{"style":275},[629],{"type":179,"value":236},{"type":173,"tag":198,"props":631,"children":632},{"style":227},[633],{"type":179,"value":241},{"type":173,"tag":198,"props":635,"children":636},{"style":215},[637],{"type":179,"value":341},{"type":173,"tag":198,"props":639,"children":640},{"style":227},[641],{"type":179,"value":230},{"type":173,"tag":198,"props":643,"children":644},{"style":233},[645],{"type":179,"value":350},{"type":173,"tag":198,"props":647,"children":648},{"style":227},[649],{"type":179,"value":241},{"type":173,"tag":198,"props":651,"children":652},{"style":233},[653],{"type":179,"value":654}," files",{"type":173,"tag":198,"props":656,"children":657},{"style":227},[658],{"type":179,"value":251},{"type":173,"tag":198,"props":660,"children":661},{"style":227},[662],{"type":179,"value":256},{"type":173,"tag":198,"props":664,"children":666},{"class":200,"line":665},16,[667,672,676,680,685,690],{"type":173,"tag":198,"props":668,"children":669},{"style":263},[670],{"type":179,"value":671},"      if",{"type":173,"tag":198,"props":673,"children":674},{"style":269},[675],{"type":179,"value":272},{"type":173,"tag":198,"props":677,"children":678},{"style":275},[679],{"type":179,"value":350},{"type":173,"tag":198,"props":681,"children":682},{"style":269},[683],{"type":179,"value":684},") ",{"type":173,"tag":198,"props":686,"children":687},{"style":263},[688],{"type":179,"value":689},"throw",{"type":173,"tag":198,"props":691,"children":692},{"style":275},[693],{"type":179,"value":694}," err\n",{"type":173,"tag":198,"props":696,"children":698},{"class":200,"line":697},17,[699,704,708,713,717,721,725,730,734,739],{"type":173,"tag":198,"props":700,"children":701},{"style":275},[702],{"type":179,"value":703},"      files",{"type":173,"tag":198,"props":705,"children":706},{"style":227},[707],{"type":179,"value":283},{"type":173,"tag":198,"props":709,"children":710},{"style":221},[711],{"type":179,"value":712},"forEach",{"type":173,"tag":198,"props":714,"children":715},{"style":269},[716],{"type":179,"value":230},{"type":173,"tag":198,"props":718,"children":719},{"style":215},[720],{"type":179,"value":218},{"type":173,"tag":198,"props":722,"children":723},{"style":227},[724],{"type":179,"value":230},{"type":173,"tag":198,"props":726,"children":727},{"style":233},[728],{"type":179,"value":729},"n",{"type":173,"tag":198,"props":731,"children":732},{"style":227},[733],{"type":179,"value":251},{"type":173,"tag":198,"props":735,"children":736},{"style":227},[737],{"type":179,"value":738}," {",{"type":173,"tag":198,"props":740,"children":741},{"style":269},[742],{"type":179,"value":743}," \n",{"type":173,"tag":198,"props":745,"children":747},{"class":200,"line":746},18,[748,753,758,764,769,773,777,781,785,789,794],{"type":173,"tag":198,"props":749,"children":750},{"style":215},[751],{"type":179,"value":752},"        var",{"type":173,"tag":198,"props":754,"children":755},{"style":275},[756],{"type":179,"value":757}," file",{"type":173,"tag":198,"props":759,"children":761},{"style":760},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[762],{"type":179,"value":763}," =",{"type":173,"tag":198,"props":765,"children":766},{"style":275},[767],{"type":179,"value":768}," path",{"type":173,"tag":198,"props":770,"children":771},{"style":227},[772],{"type":179,"value":283},{"type":173,"tag":198,"props":774,"children":775},{"style":221},[776],{"type":179,"value":563},{"type":173,"tag":198,"props":778,"children":779},{"style":269},[780],{"type":179,"value":230},{"type":173,"tag":198,"props":782,"children":783},{"style":275},[784],{"type":179,"value":236},{"type":173,"tag":198,"props":786,"children":787},{"style":227},[788],{"type":179,"value":241},{"type":173,"tag":198,"props":790,"children":791},{"style":275},[792],{"type":179,"value":793}," n",{"type":173,"tag":198,"props":795,"children":796},{"style":269},[797],{"type":179,"value":390},{"type":173,"tag":198,"props":799,"children":801},{"class":200,"line":800},19,[802,807,812,816,820,824,828,833,838],{"type":173,"tag":198,"props":803,"children":804},{"style":263},[805],{"type":179,"value":806},"        if",{"type":173,"tag":198,"props":808,"children":809},{"style":269},[810],{"type":179,"value":811}," ( ",{"type":173,"tag":198,"props":813,"children":814},{"style":275},[815],{"type":179,"value":278},{"type":173,"tag":198,"props":817,"children":818},{"style":227},[819],{"type":179,"value":283},{"type":173,"tag":198,"props":821,"children":822},{"style":221},[823],{"type":179,"value":446},{"type":173,"tag":198,"props":825,"children":826},{"style":269},[827],{"type":179,"value":230},{"type":173,"tag":198,"props":829,"children":830},{"style":275},[831],{"type":179,"value":832},"file",{"type":173,"tag":198,"props":834,"children":835},{"style":269},[836],{"type":179,"value":837},") ) ",{"type":173,"tag":198,"props":839,"children":840},{"style":227},[841],{"type":179,"value":306},{"type":173,"tag":198,"props":843,"children":845},{"class":200,"line":844},20,[846,851,855,859,863,867],{"type":173,"tag":198,"props":847,"children":848},{"style":221},[849],{"type":179,"value":850},"          watch",{"type":173,"tag":198,"props":852,"children":853},{"style":269},[854],{"type":179,"value":230},{"type":173,"tag":198,"props":856,"children":857},{"style":275},[858],{"type":179,"value":832},{"type":173,"tag":198,"props":860,"children":861},{"style":227},[862],{"type":179,"value":241},{"type":173,"tag":198,"props":864,"children":865},{"style":275},[866],{"type":179,"value":246},{"type":173,"tag":198,"props":868,"children":869},{"style":269},[870],{"type":179,"value":390},{"type":173,"tag":198,"props":872,"children":874},{"class":200,"line":873},21,[875],{"type":173,"tag":198,"props":876,"children":877},{"style":227},[878],{"type":179,"value":879},"        }\n",{"type":173,"tag":198,"props":881,"children":883},{"class":200,"line":882},22,[884,889],{"type":173,"tag":198,"props":885,"children":886},{"style":227},[887],{"type":179,"value":888},"      }",{"type":173,"tag":198,"props":890,"children":891},{"style":269},[892],{"type":179,"value":390},{"type":173,"tag":198,"props":894,"children":896},{"class":200,"line":895},23,[897,901],{"type":173,"tag":198,"props":898,"children":899},{"style":227},[900],{"type":179,"value":399},{"type":173,"tag":198,"props":902,"children":903},{"style":269},[904],{"type":179,"value":905},")     \n",{"type":173,"tag":198,"props":907,"children":909},{"class":200,"line":908},24,[910],{"type":173,"tag":198,"props":911,"children":912},{"style":227},[913],{"type":179,"value":421},{"type":173,"tag":198,"props":915,"children":917},{"class":200,"line":916},25,[918],{"type":173,"tag":198,"props":919,"children":920},{"style":227},[921],{"type":179,"value":922},"}\n",{"type":173,"tag":181,"props":924,"children":925},{},[926,928,937],{"type":179,"value":927},"由于 fs.watchFile 可能导致",{"type":173,"tag":929,"props":930,"children":934},"a",{"href":931,"rel":932},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[933],"nofollow",[935],{"type":179,"value":936},"高 CPU 负载等问题",{"type":179,"value":938},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":173,"tag":187,"props":940,"children":942},{"className":189,"code":941,"language":191,"meta":166,"style":166},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[943],{"type":173,"tag":194,"props":944,"children":945},{"__ignoreMap":166},[946,976,1040,1098,1153,1189,1197,1209],{"type":173,"tag":198,"props":947,"children":948},{"class":200,"line":201},[949,954,959,963,967,972],{"type":173,"tag":198,"props":950,"children":951},{"style":263},[952],{"type":179,"value":953},"if",{"type":173,"tag":198,"props":955,"children":956},{"style":275},[957],{"type":179,"value":958}," (is",{"type":173,"tag":198,"props":960,"children":961},{"style":227},[962],{"type":179,"value":283},{"type":173,"tag":198,"props":964,"children":965},{"style":221},[966],{"type":179,"value":832},{"type":173,"tag":198,"props":968,"children":969},{"style":275},[970],{"type":179,"value":971},"(fpath)) ",{"type":173,"tag":198,"props":973,"children":974},{"style":227},[975],{"type":179,"value":306},{"type":173,"tag":198,"props":977,"children":978},{"class":200,"line":211},[979,984,989,993,997,1001,1006,1010,1015,1019,1025,1031,1036],{"type":173,"tag":198,"props":980,"children":981},{"style":215},[982],{"type":179,"value":983},"  var",{"type":173,"tag":198,"props":985,"children":986},{"style":275},[987],{"type":179,"value":988}," parent",{"type":173,"tag":198,"props":990,"children":991},{"style":760},[992],{"type":179,"value":763},{"type":173,"tag":198,"props":994,"children":995},{"style":275},[996],{"type":179,"value":768},{"type":173,"tag":198,"props":998,"children":999},{"style":227},[1000],{"type":179,"value":283},{"type":173,"tag":198,"props":1002,"children":1003},{"style":221},[1004],{"type":179,"value":1005},"resolve",{"type":173,"tag":198,"props":1007,"children":1008},{"style":269},[1009],{"type":179,"value":230},{"type":173,"tag":198,"props":1011,"children":1012},{"style":275},[1013],{"type":179,"value":1014},"fpath",{"type":173,"tag":198,"props":1016,"children":1017},{"style":227},[1018],{"type":179,"value":241},{"type":173,"tag":198,"props":1020,"children":1022},{"style":1021},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1023],{"type":179,"value":1024}," '",{"type":173,"tag":198,"props":1026,"children":1028},{"style":1027},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1029],{"type":179,"value":1030},"..",{"type":173,"tag":198,"props":1032,"children":1033},{"style":1021},[1034],{"type":179,"value":1035},"'",{"type":173,"tag":198,"props":1037,"children":1038},{"style":269},[1039],{"type":179,"value":390},{"type":173,"tag":198,"props":1041,"children":1042},{"class":200,"line":259},[1043,1048,1052,1056,1060,1065,1069,1073,1077,1082,1086,1090,1094],{"type":173,"tag":198,"props":1044,"children":1045},{"style":275},[1046],{"type":179,"value":1047},"  fs",{"type":173,"tag":198,"props":1049,"children":1050},{"style":227},[1051],{"type":179,"value":283},{"type":173,"tag":198,"props":1053,"children":1054},{"style":221},[1055],{"type":179,"value":479},{"type":173,"tag":198,"props":1057,"children":1058},{"style":269},[1059],{"type":179,"value":230},{"type":173,"tag":198,"props":1061,"children":1062},{"style":275},[1063],{"type":179,"value":1064},"parent",{"type":173,"tag":198,"props":1066,"children":1067},{"style":227},[1068],{"type":179,"value":241},{"type":173,"tag":198,"props":1070,"children":1071},{"style":215},[1072],{"type":179,"value":341},{"type":173,"tag":198,"props":1074,"children":1075},{"style":227},[1076],{"type":179,"value":230},{"type":173,"tag":198,"props":1078,"children":1079},{"style":233},[1080],{"type":179,"value":1081},"evt",{"type":173,"tag":198,"props":1083,"children":1084},{"style":227},[1085],{"type":179,"value":241},{"type":173,"tag":198,"props":1087,"children":1088},{"style":233},[1089],{"type":179,"value":512},{"type":173,"tag":198,"props":1091,"children":1092},{"style":227},[1093],{"type":179,"value":251},{"type":173,"tag":198,"props":1095,"children":1096},{"style":227},[1097],{"type":179,"value":256},{"type":173,"tag":198,"props":1099,"children":1100},{"class":200,"line":309},[1101,1106,1110,1115,1119,1124,1128,1132,1136,1141,1145,1149],{"type":173,"tag":198,"props":1102,"children":1103},{"style":263},[1104],{"type":179,"value":1105},"    if",{"type":173,"tag":198,"props":1107,"children":1108},{"style":269},[1109],{"type":179,"value":272},{"type":173,"tag":198,"props":1111,"children":1112},{"style":275},[1113],{"type":179,"value":1114},"path",{"type":173,"tag":198,"props":1116,"children":1117},{"style":227},[1118],{"type":179,"value":283},{"type":173,"tag":198,"props":1120,"children":1121},{"style":221},[1122],{"type":179,"value":1123},"basename",{"type":173,"tag":198,"props":1125,"children":1126},{"style":269},[1127],{"type":179,"value":230},{"type":173,"tag":198,"props":1129,"children":1130},{"style":275},[1131],{"type":179,"value":1014},{"type":173,"tag":198,"props":1133,"children":1134},{"style":269},[1135],{"type":179,"value":684},{"type":173,"tag":198,"props":1137,"children":1138},{"style":760},[1139],{"type":179,"value":1140},"===",{"type":173,"tag":198,"props":1142,"children":1143},{"style":275},[1144],{"type":179,"value":512},{"type":173,"tag":198,"props":1146,"children":1147},{"style":269},[1148],{"type":179,"value":684},{"type":173,"tag":198,"props":1150,"children":1151},{"style":227},[1152],{"type":179,"value":306},{"type":173,"tag":198,"props":1154,"children":1155},{"class":200,"line":361},[1156,1160,1164,1168,1172,1177,1181,1185],{"type":173,"tag":198,"props":1157,"children":1158},{"style":221},[1159],{"type":179,"value":367},{"type":173,"tag":198,"props":1161,"children":1162},{"style":269},[1163],{"type":179,"value":230},{"type":173,"tag":198,"props":1165,"children":1166},{"style":275},[1167],{"type":179,"value":1014},{"type":173,"tag":198,"props":1169,"children":1170},{"style":227},[1171],{"type":179,"value":241},{"type":173,"tag":198,"props":1173,"children":1174},{"style":275},[1175],{"type":179,"value":1176}," options",{"type":173,"tag":198,"props":1178,"children":1179},{"style":227},[1180],{"type":179,"value":241},{"type":173,"tag":198,"props":1182,"children":1183},{"style":275},[1184],{"type":179,"value":246},{"type":173,"tag":198,"props":1186,"children":1187},{"style":269},[1188],{"type":179,"value":390},{"type":173,"tag":198,"props":1190,"children":1191},{"class":200,"line":393},[1192],{"type":173,"tag":198,"props":1193,"children":1194},{"style":227},[1195],{"type":179,"value":1196},"    }\n",{"type":173,"tag":198,"props":1198,"children":1199},{"class":200,"line":406},[1200,1205],{"type":173,"tag":198,"props":1201,"children":1202},{"style":227},[1203],{"type":179,"value":1204},"  }",{"type":173,"tag":198,"props":1206,"children":1207},{"style":269},[1208],{"type":179,"value":390},{"type":173,"tag":198,"props":1210,"children":1211},{"class":200,"line":415},[1212],{"type":173,"tag":198,"props":1213,"children":1214},{"style":227},[1215],{"type":179,"value":922},{"type":173,"tag":181,"props":1217,"children":1218},{},[1219],{"type":179,"value":1220},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":173,"tag":187,"props":1222,"children":1224},{"className":189,"code":1223,"language":191,"meta":166,"style":166},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1225],{"type":173,"tag":194,"props":1226,"children":1227},{"__ignoreMap":166},[1228,1271,1308,1343,1377,1384,1391],{"type":173,"tag":198,"props":1229,"children":1230},{"class":200,"line":201},[1231,1235,1239,1243,1247,1251,1255,1259,1263,1267],{"type":173,"tag":198,"props":1232,"children":1233},{"style":215},[1234],{"type":179,"value":218},{"type":173,"tag":198,"props":1236,"children":1237},{"style":221},[1238],{"type":179,"value":224},{"type":173,"tag":198,"props":1240,"children":1241},{"style":227},[1242],{"type":179,"value":230},{"type":173,"tag":198,"props":1244,"children":1245},{"style":233},[1246],{"type":179,"value":1014},{"type":173,"tag":198,"props":1248,"children":1249},{"style":227},[1250],{"type":179,"value":241},{"type":173,"tag":198,"props":1252,"children":1253},{"style":233},[1254],{"type":179,"value":1176},{"type":173,"tag":198,"props":1256,"children":1257},{"style":227},[1258],{"type":179,"value":241},{"type":173,"tag":198,"props":1260,"children":1261},{"style":233},[1262],{"type":179,"value":246},{"type":173,"tag":198,"props":1264,"children":1265},{"style":227},[1266],{"type":179,"value":251},{"type":173,"tag":198,"props":1268,"children":1269},{"style":227},[1270],{"type":179,"value":256},{"type":173,"tag":198,"props":1272,"children":1273},{"class":200,"line":211},[1274,1278,1282,1286,1290,1295,1299,1303],{"type":173,"tag":198,"props":1275,"children":1276},{"style":263},[1277],{"type":179,"value":266},{"type":173,"tag":198,"props":1279,"children":1280},{"style":269},[1281],{"type":179,"value":272},{"type":173,"tag":198,"props":1283,"children":1284},{"style":275},[1285],{"type":179,"value":278},{"type":173,"tag":198,"props":1287,"children":1288},{"style":227},[1289],{"type":179,"value":283},{"type":173,"tag":198,"props":1291,"children":1292},{"style":221},[1293],{"type":179,"value":1294},"symbolic",{"type":173,"tag":198,"props":1296,"children":1297},{"style":269},[1298],{"type":179,"value":230},{"type":173,"tag":198,"props":1300,"children":1301},{"style":275},[1302],{"type":179,"value":1014},{"type":173,"tag":198,"props":1304,"children":1305},{"style":269},[1306],{"type":179,"value":1307},") \n",{"type":173,"tag":198,"props":1309,"children":1310},{"class":200,"line":259},[1311,1316,1321,1325,1330,1334,1339],{"type":173,"tag":198,"props":1312,"children":1313},{"style":760},[1314],{"type":179,"value":1315},"    &&",{"type":173,"tag":198,"props":1317,"children":1318},{"style":760},[1319],{"type":179,"value":1320}," !",{"type":173,"tag":198,"props":1322,"children":1323},{"style":269},[1324],{"type":179,"value":230},{"type":173,"tag":198,"props":1326,"children":1327},{"style":275},[1328],{"type":179,"value":1329},"options",{"type":173,"tag":198,"props":1331,"children":1332},{"style":227},[1333],{"type":179,"value":283},{"type":173,"tag":198,"props":1335,"children":1336},{"style":275},[1337],{"type":179,"value":1338},"followSymLinks",{"type":173,"tag":198,"props":1340,"children":1341},{"style":269},[1342],{"type":179,"value":743},{"type":173,"tag":198,"props":1344,"children":1345},{"class":200,"line":309},[1346,1351,1355,1359,1364,1369,1373],{"type":173,"tag":198,"props":1347,"children":1348},{"style":760},[1349],{"type":179,"value":1350},"      &&",{"type":173,"tag":198,"props":1352,"children":1353},{"style":275},[1354],{"type":179,"value":1176},{"type":173,"tag":198,"props":1356,"children":1357},{"style":227},[1358],{"type":179,"value":283},{"type":173,"tag":198,"props":1360,"children":1361},{"style":275},[1362],{"type":179,"value":1363},"maxSymLevel",{"type":173,"tag":198,"props":1365,"children":1366},{"style":760},[1367],{"type":179,"value":1368},"--",{"type":173,"tag":198,"props":1370,"children":1371},{"style":269},[1372],{"type":179,"value":301},{"type":173,"tag":198,"props":1374,"children":1375},{"style":227},[1376],{"type":179,"value":306},{"type":173,"tag":198,"props":1378,"children":1379},{"class":200,"line":361},[1380],{"type":173,"tag":198,"props":1381,"children":1382},{"style":263},[1383],{"type":179,"value":412},{"type":173,"tag":198,"props":1385,"children":1386},{"class":200,"line":393},[1387],{"type":173,"tag":198,"props":1388,"children":1389},{"style":227},[1390],{"type":179,"value":421},{"type":173,"tag":198,"props":1392,"children":1393},{"class":200,"line":406},[1394],{"type":173,"tag":198,"props":1395,"children":1396},{"style":227},[1397],{"type":179,"value":922},{"type":173,"tag":181,"props":1399,"children":1400},{},[1401],{"type":179,"value":1402},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":173,"tag":187,"props":1404,"children":1406},{"className":189,"code":1405,"language":191,"meta":166,"style":166},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1407],{"type":173,"tag":194,"props":1408,"children":1409},{"__ignoreMap":166},[1410,1424,1432,1444,1489,1511,1561,1597,1613,1626,1633,1640,1647,1686,1707,1740,1768,1779,1797,1804,1871,1939,1959,1980,2012,2041,2053,2061],{"type":173,"tag":198,"props":1411,"children":1412},{"class":200,"line":201},[1413,1418],{"type":173,"tag":198,"props":1414,"children":1415},{"style":215},[1416],{"type":179,"value":1417},"var",{"type":173,"tag":198,"props":1419,"children":1421},{"style":1420},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1422],{"type":179,"value":1423}," IS_SUPPORT\n",{"type":173,"tag":198,"props":1425,"children":1426},{"class":200,"line":211},[1427],{"type":173,"tag":198,"props":1428,"children":1429},{"emptyLinePlaceholder":165},[1430],{"type":179,"value":1431},"\n",{"type":173,"tag":198,"props":1433,"children":1434},{"class":200,"line":259},[1435,1440],{"type":173,"tag":198,"props":1436,"children":1437},{"style":263},[1438],{"type":179,"value":1439},"try",{"type":173,"tag":198,"props":1441,"children":1442},{"style":227},[1443],{"type":179,"value":256},{"type":173,"tag":198,"props":1445,"children":1446},{"class":200,"line":309},[1447,1452,1456,1461,1465,1469,1473,1477,1481,1485],{"type":173,"tag":198,"props":1448,"children":1449},{"style":275},[1450],{"type":179,"value":1451},"  watcher",{"type":173,"tag":198,"props":1453,"children":1454},{"style":760},[1455],{"type":179,"value":763},{"type":173,"tag":198,"props":1457,"children":1458},{"style":275},[1459],{"type":179,"value":1460}," fs",{"type":173,"tag":198,"props":1462,"children":1463},{"style":227},[1464],{"type":179,"value":283},{"type":173,"tag":198,"props":1466,"children":1467},{"style":221},[1468],{"type":179,"value":479},{"type":173,"tag":198,"props":1470,"children":1471},{"style":269},[1472],{"type":179,"value":230},{"type":173,"tag":198,"props":1474,"children":1475},{"style":275},[1476],{"type":179,"value":1064},{"type":173,"tag":198,"props":1478,"children":1479},{"style":227},[1480],{"type":179,"value":241},{"type":173,"tag":198,"props":1482,"children":1483},{"style":275},[1484],{"type":179,"value":1176},{"type":173,"tag":198,"props":1486,"children":1487},{"style":269},[1488],{"type":179,"value":390},{"type":173,"tag":198,"props":1490,"children":1491},{"class":200,"line":361},[1492,1497,1502,1507],{"type":173,"tag":198,"props":1493,"children":1494},{"style":227},[1495],{"type":179,"value":1496},"}",{"type":173,"tag":198,"props":1498,"children":1499},{"style":263},[1500],{"type":179,"value":1501}," catch",{"type":173,"tag":198,"props":1503,"children":1504},{"style":275},[1505],{"type":179,"value":1506}," (e) ",{"type":173,"tag":198,"props":1508,"children":1509},{"style":227},[1510],{"type":179,"value":306},{"type":173,"tag":198,"props":1512,"children":1513},{"class":200,"line":393},[1514,1518,1522,1527,1531,1535,1540,1544,1549,1553,1557],{"type":173,"tag":198,"props":1515,"children":1516},{"style":263},[1517],{"type":179,"value":266},{"type":173,"tag":198,"props":1519,"children":1520},{"style":269},[1521],{"type":179,"value":272},{"type":173,"tag":198,"props":1523,"children":1524},{"style":275},[1525],{"type":179,"value":1526},"e",{"type":173,"tag":198,"props":1528,"children":1529},{"style":227},[1530],{"type":179,"value":283},{"type":173,"tag":198,"props":1532,"children":1533},{"style":275},[1534],{"type":179,"value":194},{"type":173,"tag":198,"props":1536,"children":1537},{"style":760},[1538],{"type":179,"value":1539}," ==",{"type":173,"tag":198,"props":1541,"children":1542},{"style":1021},[1543],{"type":179,"value":1024},{"type":173,"tag":198,"props":1545,"children":1546},{"style":1027},[1547],{"type":179,"value":1548},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":173,"tag":198,"props":1550,"children":1551},{"style":1021},[1552],{"type":179,"value":1035},{"type":173,"tag":198,"props":1554,"children":1555},{"style":269},[1556],{"type":179,"value":684},{"type":173,"tag":198,"props":1558,"children":1559},{"style":227},[1560],{"type":179,"value":306},{"type":173,"tag":198,"props":1562,"children":1563},{"class":200,"line":406},[1564,1569,1574,1578,1583,1587,1593],{"type":173,"tag":198,"props":1565,"children":1566},{"style":263},[1567],{"type":179,"value":1568},"    return",{"type":173,"tag":198,"props":1570,"children":1571},{"style":221},[1572],{"type":179,"value":1573}," fn",{"type":173,"tag":198,"props":1575,"children":1576},{"style":269},[1577],{"type":179,"value":230},{"type":173,"tag":198,"props":1579,"children":1580},{"style":1420},[1581],{"type":179,"value":1582},"IS_SUPPORT",{"type":173,"tag":198,"props":1584,"children":1585},{"style":760},[1586],{"type":179,"value":763},{"type":173,"tag":198,"props":1588,"children":1590},{"style":1589},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1591],{"type":179,"value":1592}," false",{"type":173,"tag":198,"props":1594,"children":1595},{"style":269},[1596],{"type":179,"value":390},{"type":173,"tag":198,"props":1598,"children":1599},{"class":200,"line":415},[1600,1604,1609],{"type":173,"tag":198,"props":1601,"children":1602},{"style":227},[1603],{"type":179,"value":1204},{"type":173,"tag":198,"props":1605,"children":1606},{"style":263},[1607],{"type":179,"value":1608}," else",{"type":173,"tag":198,"props":1610,"children":1611},{"style":227},[1612],{"type":179,"value":256},{"type":173,"tag":198,"props":1614,"children":1615},{"class":200,"line":424},[1616,1621],{"type":173,"tag":198,"props":1617,"children":1618},{"style":263},[1619],{"type":179,"value":1620},"    throw",{"type":173,"tag":198,"props":1622,"children":1623},{"style":275},[1624],{"type":179,"value":1625}," e\n",{"type":173,"tag":198,"props":1627,"children":1628},{"class":200,"line":465},[1629],{"type":173,"tag":198,"props":1630,"children":1631},{"style":227},[1632],{"type":179,"value":421},{"type":173,"tag":198,"props":1634,"children":1635},{"class":200,"line":523},[1636],{"type":173,"tag":198,"props":1637,"children":1638},{"style":227},[1639],{"type":179,"value":922},{"type":173,"tag":198,"props":1641,"children":1642},{"class":200,"line":548},[1643],{"type":173,"tag":198,"props":1644,"children":1645},{"emptyLinePlaceholder":165},[1646],{"type":179,"value":1431},{"type":173,"tag":198,"props":1648,"children":1649},{"class":200,"line":586},[1650,1654,1659,1664,1669,1673,1677,1682],{"type":173,"tag":198,"props":1651,"children":1652},{"style":215},[1653],{"type":179,"value":1417},{"type":173,"tag":198,"props":1655,"children":1656},{"style":275},[1657],{"type":179,"value":1658}," timer ",{"type":173,"tag":198,"props":1660,"children":1661},{"style":760},[1662],{"type":179,"value":1663},"=",{"type":173,"tag":198,"props":1665,"children":1666},{"style":221},[1667],{"type":179,"value":1668}," setTimeout",{"type":173,"tag":198,"props":1670,"children":1671},{"style":275},[1672],{"type":179,"value":230},{"type":173,"tag":198,"props":1674,"children":1675},{"style":215},[1676],{"type":179,"value":218},{"type":173,"tag":198,"props":1678,"children":1679},{"style":227},[1680],{"type":179,"value":1681},"()",{"type":173,"tag":198,"props":1683,"children":1684},{"style":227},[1685],{"type":179,"value":256},{"type":173,"tag":198,"props":1687,"children":1688},{"class":200,"line":595},[1689,1693,1697,1702],{"type":173,"tag":198,"props":1690,"children":1691},{"style":275},[1692],{"type":179,"value":1451},{"type":173,"tag":198,"props":1694,"children":1695},{"style":227},[1696],{"type":179,"value":283},{"type":173,"tag":198,"props":1698,"children":1699},{"style":221},[1700],{"type":179,"value":1701},"close",{"type":173,"tag":198,"props":1703,"children":1704},{"style":269},[1705],{"type":179,"value":1706},"()\n",{"type":173,"tag":198,"props":1708,"children":1709},{"class":200,"line":607},[1710,1715,1719,1724,1728,1732,1736],{"type":173,"tag":198,"props":1711,"children":1712},{"style":275},[1713],{"type":179,"value":1714},"  stack",{"type":173,"tag":198,"props":1716,"children":1717},{"style":227},[1718],{"type":179,"value":283},{"type":173,"tag":198,"props":1720,"children":1721},{"style":221},[1722],{"type":179,"value":1723},"cleanup",{"type":173,"tag":198,"props":1725,"children":1726},{"style":269},[1727],{"type":179,"value":230},{"type":173,"tag":198,"props":1729,"children":1730},{"style":215},[1731],{"type":179,"value":218},{"type":173,"tag":198,"props":1733,"children":1734},{"style":227},[1735],{"type":179,"value":1681},{"type":173,"tag":198,"props":1737,"children":1738},{"style":227},[1739],{"type":179,"value":256},{"type":173,"tag":198,"props":1741,"children":1742},{"class":200,"line":665},[1743,1748,1752,1756,1760,1764],{"type":173,"tag":198,"props":1744,"children":1745},{"style":221},[1746],{"type":179,"value":1747},"    fn",{"type":173,"tag":198,"props":1749,"children":1750},{"style":269},[1751],{"type":179,"value":230},{"type":173,"tag":198,"props":1753,"children":1754},{"style":1420},[1755],{"type":179,"value":1582},{"type":173,"tag":198,"props":1757,"children":1758},{"style":760},[1759],{"type":179,"value":763},{"type":173,"tag":198,"props":1761,"children":1762},{"style":1589},[1763],{"type":179,"value":1592},{"type":173,"tag":198,"props":1765,"children":1766},{"style":269},[1767],{"type":179,"value":390},{"type":173,"tag":198,"props":1769,"children":1770},{"class":200,"line":697},[1771,1775],{"type":173,"tag":198,"props":1772,"children":1773},{"style":227},[1774],{"type":179,"value":1204},{"type":173,"tag":198,"props":1776,"children":1777},{"style":269},[1778],{"type":179,"value":390},{"type":173,"tag":198,"props":1780,"children":1781},{"class":200,"line":746},[1782,1787,1793],{"type":173,"tag":198,"props":1783,"children":1784},{"style":227},[1785],{"type":179,"value":1786},"},",{"type":173,"tag":198,"props":1788,"children":1790},{"style":1789},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1791],{"type":179,"value":1792}," 200",{"type":173,"tag":198,"props":1794,"children":1795},{"style":275},[1796],{"type":179,"value":390},{"type":173,"tag":198,"props":1798,"children":1799},{"class":200,"line":800},[1800],{"type":173,"tag":198,"props":1801,"children":1802},{"emptyLinePlaceholder":165},[1803],{"type":179,"value":1431},{"type":173,"tag":198,"props":1805,"children":1806},{"class":200,"line":844},[1807,1812,1816,1821,1825,1829,1834,1838,1842,1846,1850,1854,1858,1863,1867],{"type":173,"tag":198,"props":1808,"children":1809},{"style":275},[1810],{"type":179,"value":1811},"watcher",{"type":173,"tag":198,"props":1813,"children":1814},{"style":227},[1815],{"type":179,"value":283},{"type":173,"tag":198,"props":1817,"children":1818},{"style":221},[1819],{"type":179,"value":1820},"on",{"type":173,"tag":198,"props":1822,"children":1823},{"style":275},[1824],{"type":179,"value":230},{"type":173,"tag":198,"props":1826,"children":1827},{"style":1021},[1828],{"type":179,"value":1035},{"type":173,"tag":198,"props":1830,"children":1831},{"style":1027},[1832],{"type":179,"value":1833},"change",{"type":173,"tag":198,"props":1835,"children":1836},{"style":1021},[1837],{"type":179,"value":1035},{"type":173,"tag":198,"props":1839,"children":1840},{"style":227},[1841],{"type":179,"value":241},{"type":173,"tag":198,"props":1843,"children":1844},{"style":215},[1845],{"type":179,"value":341},{"type":173,"tag":198,"props":1847,"children":1848},{"style":227},[1849],{"type":179,"value":230},{"type":173,"tag":198,"props":1851,"children":1852},{"style":233},[1853],{"type":179,"value":1081},{"type":173,"tag":198,"props":1855,"children":1856},{"style":227},[1857],{"type":179,"value":241},{"type":173,"tag":198,"props":1859,"children":1860},{"style":233},[1861],{"type":179,"value":1862}," name",{"type":173,"tag":198,"props":1864,"children":1865},{"style":227},[1866],{"type":179,"value":251},{"type":173,"tag":198,"props":1868,"children":1869},{"style":227},[1870],{"type":179,"value":256},{"type":173,"tag":198,"props":1872,"children":1873},{"class":200,"line":873},[1874,1878,1882,1886,1890,1894,1898,1902,1906,1910,1914,1918,1922,1926,1931,1935],{"type":173,"tag":198,"props":1875,"children":1876},{"style":263},[1877],{"type":179,"value":266},{"type":173,"tag":198,"props":1879,"children":1880},{"style":269},[1881],{"type":179,"value":272},{"type":173,"tag":198,"props":1883,"children":1884},{"style":275},[1885],{"type":179,"value":1114},{"type":173,"tag":198,"props":1887,"children":1888},{"style":227},[1889],{"type":179,"value":283},{"type":173,"tag":198,"props":1891,"children":1892},{"style":221},[1893],{"type":179,"value":1123},{"type":173,"tag":198,"props":1895,"children":1896},{"style":269},[1897],{"type":179,"value":230},{"type":173,"tag":198,"props":1899,"children":1900},{"style":275},[1901],{"type":179,"value":832},{"type":173,"tag":198,"props":1903,"children":1904},{"style":269},[1905],{"type":179,"value":684},{"type":173,"tag":198,"props":1907,"children":1908},{"style":760},[1909],{"type":179,"value":1140},{"type":173,"tag":198,"props":1911,"children":1912},{"style":275},[1913],{"type":179,"value":768},{"type":173,"tag":198,"props":1915,"children":1916},{"style":227},[1917],{"type":179,"value":283},{"type":173,"tag":198,"props":1919,"children":1920},{"style":221},[1921],{"type":179,"value":1123},{"type":173,"tag":198,"props":1923,"children":1924},{"style":269},[1925],{"type":179,"value":230},{"type":173,"tag":198,"props":1927,"children":1928},{"style":275},[1929],{"type":179,"value":1930},"name",{"type":173,"tag":198,"props":1932,"children":1933},{"style":269},[1934],{"type":179,"value":301},{"type":173,"tag":198,"props":1936,"children":1937},{"style":227},[1938],{"type":179,"value":306},{"type":173,"tag":198,"props":1940,"children":1941},{"class":200,"line":882},[1942,1947,1951,1955],{"type":173,"tag":198,"props":1943,"children":1944},{"style":275},[1945],{"type":179,"value":1946},"    watcher",{"type":173,"tag":198,"props":1948,"children":1949},{"style":227},[1950],{"type":179,"value":283},{"type":173,"tag":198,"props":1952,"children":1953},{"style":221},[1954],{"type":179,"value":1701},{"type":173,"tag":198,"props":1956,"children":1957},{"style":269},[1958],{"type":179,"value":1706},{"type":173,"tag":198,"props":1960,"children":1961},{"class":200,"line":895},[1962,1967,1971,1976],{"type":173,"tag":198,"props":1963,"children":1964},{"style":221},[1965],{"type":179,"value":1966},"    clearTimeout",{"type":173,"tag":198,"props":1968,"children":1969},{"style":269},[1970],{"type":179,"value":230},{"type":173,"tag":198,"props":1972,"children":1973},{"style":275},[1974],{"type":179,"value":1975},"timer",{"type":173,"tag":198,"props":1977,"children":1978},{"style":269},[1979],{"type":179,"value":390},{"type":173,"tag":198,"props":1981,"children":1982},{"class":200,"line":908},[1983,1988,1992,1996,2000,2004,2008],{"type":173,"tag":198,"props":1984,"children":1985},{"style":275},[1986],{"type":179,"value":1987},"    stack",{"type":173,"tag":198,"props":1989,"children":1990},{"style":227},[1991],{"type":179,"value":283},{"type":173,"tag":198,"props":1993,"children":1994},{"style":221},[1995],{"type":179,"value":1723},{"type":173,"tag":198,"props":1997,"children":1998},{"style":269},[1999],{"type":179,"value":230},{"type":173,"tag":198,"props":2001,"children":2002},{"style":215},[2003],{"type":179,"value":218},{"type":173,"tag":198,"props":2005,"children":2006},{"style":227},[2007],{"type":179,"value":1681},{"type":173,"tag":198,"props":2009,"children":2010},{"style":227},[2011],{"type":179,"value":256},{"type":173,"tag":198,"props":2013,"children":2014},{"class":200,"line":916},[2015,2020,2024,2028,2032,2037],{"type":173,"tag":198,"props":2016,"children":2017},{"style":221},[2018],{"type":179,"value":2019},"      fn",{"type":173,"tag":198,"props":2021,"children":2022},{"style":269},[2023],{"type":179,"value":230},{"type":173,"tag":198,"props":2025,"children":2026},{"style":1420},[2027],{"type":179,"value":1582},{"type":173,"tag":198,"props":2029,"children":2030},{"style":760},[2031],{"type":179,"value":763},{"type":173,"tag":198,"props":2033,"children":2034},{"style":1589},[2035],{"type":179,"value":2036}," true",{"type":173,"tag":198,"props":2038,"children":2039},{"style":269},[2040],{"type":179,"value":390},{"type":173,"tag":198,"props":2042,"children":2044},{"class":200,"line":2043},26,[2045,2049],{"type":173,"tag":198,"props":2046,"children":2047},{"style":227},[2048],{"type":179,"value":399},{"type":173,"tag":198,"props":2050,"children":2051},{"style":269},[2052],{"type":179,"value":390},{"type":173,"tag":198,"props":2054,"children":2056},{"class":200,"line":2055},27,[2057],{"type":173,"tag":198,"props":2058,"children":2059},{"style":227},[2060],{"type":179,"value":421},{"type":173,"tag":198,"props":2062,"children":2064},{"class":200,"line":2063},28,[2065,2069],{"type":173,"tag":198,"props":2066,"children":2067},{"style":227},[2068],{"type":179,"value":1496},{"type":173,"tag":198,"props":2070,"children":2071},{"style":275},[2072],{"type":179,"value":390},{"type":173,"tag":181,"props":2074,"children":2075},{},[2076],{"type":179,"value":2077},"Watcher 仅向外暴露指定方法。",{"type":173,"tag":187,"props":2079,"children":2081},{"className":189,"code":2080,"language":191,"meta":166,"style":166},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2082],{"type":173,"tag":194,"props":2083,"children":2084},{"__ignoreMap":166},[2085,2128,2149,2171,2192,2247,2283,2337,2354,2362,2402,2440,2497,2504,2515,2528],{"type":173,"tag":198,"props":2086,"children":2087},{"class":200,"line":201},[2088,2094,2098,2103,2107,2112,2116,2120,2124],{"type":173,"tag":198,"props":2089,"children":2091},{"style":2090},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[2092],{"type":179,"value":2093},"Watcher",{"type":173,"tag":198,"props":2095,"children":2096},{"style":227},[2097],{"type":179,"value":283},{"type":173,"tag":198,"props":2099,"children":2100},{"style":1420},[2101],{"type":179,"value":2102},"prototype",{"type":173,"tag":198,"props":2104,"children":2105},{"style":227},[2106],{"type":179,"value":283},{"type":173,"tag":198,"props":2108,"children":2109},{"style":221},[2110],{"type":179,"value":2111},"expose",{"type":173,"tag":198,"props":2113,"children":2114},{"style":760},[2115],{"type":179,"value":763},{"type":173,"tag":198,"props":2117,"children":2118},{"style":215},[2119],{"type":179,"value":341},{"type":173,"tag":198,"props":2121,"children":2122},{"style":227},[2123],{"type":179,"value":1681},{"type":173,"tag":198,"props":2125,"children":2126},{"style":227},[2127],{"type":179,"value":256},{"type":173,"tag":198,"props":2129,"children":2130},{"class":200,"line":211},[2131,2135,2140,2144],{"type":173,"tag":198,"props":2132,"children":2133},{"style":215},[2134],{"type":179,"value":983},{"type":173,"tag":198,"props":2136,"children":2137},{"style":275},[2138],{"type":179,"value":2139}," expose",{"type":173,"tag":198,"props":2141,"children":2142},{"style":760},[2143],{"type":179,"value":763},{"type":173,"tag":198,"props":2145,"children":2146},{"style":227},[2147],{"type":179,"value":2148}," {}\n",{"type":173,"tag":198,"props":2150,"children":2151},{"class":200,"line":259},[2152,2156,2161,2165],{"type":173,"tag":198,"props":2153,"children":2154},{"style":215},[2155],{"type":179,"value":983},{"type":173,"tag":198,"props":2157,"children":2158},{"style":275},[2159],{"type":179,"value":2160}," self",{"type":173,"tag":198,"props":2162,"children":2163},{"style":760},[2164],{"type":179,"value":763},{"type":173,"tag":198,"props":2166,"children":2168},{"style":2167},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2169],{"type":179,"value":2170}," this\n",{"type":173,"tag":198,"props":2172,"children":2173},{"class":200,"line":309},[2174,2178,2183,2187],{"type":173,"tag":198,"props":2175,"children":2176},{"style":215},[2177],{"type":179,"value":983},{"type":173,"tag":198,"props":2179,"children":2180},{"style":275},[2181],{"type":179,"value":2182}," methods",{"type":173,"tag":198,"props":2184,"children":2185},{"style":760},[2186],{"type":179,"value":763},{"type":173,"tag":198,"props":2188,"children":2189},{"style":269},[2190],{"type":179,"value":2191}," [\n",{"type":173,"tag":198,"props":2193,"children":2194},{"class":200,"line":361},[2195,2200,2204,2208,2212,2216,2221,2225,2229,2233,2238,2242],{"type":173,"tag":198,"props":2196,"children":2197},{"style":1021},[2198],{"type":179,"value":2199},"    '",{"type":173,"tag":198,"props":2201,"children":2202},{"style":1027},[2203],{"type":179,"value":1820},{"type":173,"tag":198,"props":2205,"children":2206},{"style":1021},[2207],{"type":179,"value":1035},{"type":173,"tag":198,"props":2209,"children":2210},{"style":227},[2211],{"type":179,"value":241},{"type":173,"tag":198,"props":2213,"children":2214},{"style":1021},[2215],{"type":179,"value":1024},{"type":173,"tag":198,"props":2217,"children":2218},{"style":1027},[2219],{"type":179,"value":2220},"emit",{"type":173,"tag":198,"props":2222,"children":2223},{"style":1021},[2224],{"type":179,"value":1035},{"type":173,"tag":198,"props":2226,"children":2227},{"style":227},[2228],{"type":179,"value":241},{"type":173,"tag":198,"props":2230,"children":2231},{"style":1021},[2232],{"type":179,"value":1024},{"type":173,"tag":198,"props":2234,"children":2235},{"style":1027},[2236],{"type":179,"value":2237},"once",{"type":173,"tag":198,"props":2239,"children":2240},{"style":1021},[2241],{"type":179,"value":1035},{"type":173,"tag":198,"props":2243,"children":2244},{"style":227},[2245],{"type":179,"value":2246},",\n",{"type":173,"tag":198,"props":2248,"children":2249},{"class":200,"line":393},[2250,2254,2258,2262,2266,2270,2275,2279],{"type":173,"tag":198,"props":2251,"children":2252},{"style":1021},[2253],{"type":179,"value":2199},{"type":173,"tag":198,"props":2255,"children":2256},{"style":1027},[2257],{"type":179,"value":1701},{"type":173,"tag":198,"props":2259,"children":2260},{"style":1021},[2261],{"type":179,"value":1035},{"type":173,"tag":198,"props":2263,"children":2264},{"style":227},[2265],{"type":179,"value":241},{"type":173,"tag":198,"props":2267,"children":2268},{"style":1021},[2269],{"type":179,"value":1024},{"type":173,"tag":198,"props":2271,"children":2272},{"style":1027},[2273],{"type":179,"value":2274},"isClosed",{"type":173,"tag":198,"props":2276,"children":2277},{"style":1021},[2278],{"type":179,"value":1035},{"type":173,"tag":198,"props":2280,"children":2281},{"style":227},[2282],{"type":179,"value":2246},{"type":173,"tag":198,"props":2284,"children":2285},{"class":200,"line":406},[2286,2290,2295,2299,2303,2307,2312,2316,2320,2324,2329,2333],{"type":173,"tag":198,"props":2287,"children":2288},{"style":1021},[2289],{"type":179,"value":2199},{"type":173,"tag":198,"props":2291,"children":2292},{"style":1027},[2293],{"type":179,"value":2294},"listeners",{"type":173,"tag":198,"props":2296,"children":2297},{"style":1021},[2298],{"type":179,"value":1035},{"type":173,"tag":198,"props":2300,"children":2301},{"style":227},[2302],{"type":179,"value":241},{"type":173,"tag":198,"props":2304,"children":2305},{"style":1021},[2306],{"type":179,"value":1024},{"type":173,"tag":198,"props":2308,"children":2309},{"style":1027},[2310],{"type":179,"value":2311},"setMaxListeners",{"type":173,"tag":198,"props":2313,"children":2314},{"style":1021},[2315],{"type":179,"value":1035},{"type":173,"tag":198,"props":2317,"children":2318},{"style":227},[2319],{"type":179,"value":241},{"type":173,"tag":198,"props":2321,"children":2322},{"style":1021},[2323],{"type":179,"value":1024},{"type":173,"tag":198,"props":2325,"children":2326},{"style":1027},[2327],{"type":179,"value":2328},"getMaxListeners",{"type":173,"tag":198,"props":2330,"children":2331},{"style":1021},[2332],{"type":179,"value":1035},{"type":173,"tag":198,"props":2334,"children":2335},{"style":227},[2336],{"type":179,"value":2246},{"type":173,"tag":198,"props":2338,"children":2339},{"class":200,"line":415},[2340,2344,2349],{"type":173,"tag":198,"props":2341,"children":2342},{"style":1021},[2343],{"type":179,"value":2199},{"type":173,"tag":198,"props":2345,"children":2346},{"style":1027},[2347],{"type":179,"value":2348},"getWatchedPaths",{"type":173,"tag":198,"props":2350,"children":2351},{"style":1021},[2352],{"type":179,"value":2353},"'\n",{"type":173,"tag":198,"props":2355,"children":2356},{"class":200,"line":424},[2357],{"type":173,"tag":198,"props":2358,"children":2359},{"style":269},[2360],{"type":179,"value":2361},"  ]\n",{"type":173,"tag":198,"props":2363,"children":2364},{"class":200,"line":465},[2365,2370,2374,2378,2382,2386,2390,2394,2398],{"type":173,"tag":198,"props":2366,"children":2367},{"style":275},[2368],{"type":179,"value":2369},"  methods",{"type":173,"tag":198,"props":2371,"children":2372},{"style":227},[2373],{"type":179,"value":283},{"type":173,"tag":198,"props":2375,"children":2376},{"style":221},[2377],{"type":179,"value":712},{"type":173,"tag":198,"props":2379,"children":2380},{"style":269},[2381],{"type":179,"value":230},{"type":173,"tag":198,"props":2383,"children":2384},{"style":215},[2385],{"type":179,"value":218},{"type":173,"tag":198,"props":2387,"children":2388},{"style":227},[2389],{"type":179,"value":230},{"type":173,"tag":198,"props":2391,"children":2392},{"style":233},[2393],{"type":179,"value":1930},{"type":173,"tag":198,"props":2395,"children":2396},{"style":227},[2397],{"type":179,"value":251},{"type":173,"tag":198,"props":2399,"children":2400},{"style":227},[2401],{"type":179,"value":256},{"type":173,"tag":198,"props":2403,"children":2404},{"class":200,"line":523},[2405,2410,2415,2419,2424,2428,2432,2436],{"type":173,"tag":198,"props":2406,"children":2407},{"style":275},[2408],{"type":179,"value":2409},"    expose",{"type":173,"tag":198,"props":2411,"children":2412},{"style":269},[2413],{"type":179,"value":2414},"[",{"type":173,"tag":198,"props":2416,"children":2417},{"style":275},[2418],{"type":179,"value":1930},{"type":173,"tag":198,"props":2420,"children":2421},{"style":269},[2422],{"type":179,"value":2423},"] ",{"type":173,"tag":198,"props":2425,"children":2426},{"style":760},[2427],{"type":179,"value":1663},{"type":173,"tag":198,"props":2429,"children":2430},{"style":215},[2431],{"type":179,"value":341},{"type":173,"tag":198,"props":2433,"children":2434},{"style":227},[2435],{"type":179,"value":1681},{"type":173,"tag":198,"props":2437,"children":2438},{"style":227},[2439],{"type":179,"value":256},{"type":173,"tag":198,"props":2441,"children":2442},{"class":200,"line":548},[2443,2448,2452,2456,2460,2465,2469,2474,2478,2483,2487,2493],{"type":173,"tag":198,"props":2444,"children":2445},{"style":263},[2446],{"type":179,"value":2447},"      return",{"type":173,"tag":198,"props":2449,"children":2450},{"style":275},[2451],{"type":179,"value":2160},{"type":173,"tag":198,"props":2453,"children":2454},{"style":269},[2455],{"type":179,"value":2414},{"type":173,"tag":198,"props":2457,"children":2458},{"style":275},[2459],{"type":179,"value":1930},{"type":173,"tag":198,"props":2461,"children":2462},{"style":269},[2463],{"type":179,"value":2464},"]",{"type":173,"tag":198,"props":2466,"children":2467},{"style":227},[2468],{"type":179,"value":283},{"type":173,"tag":198,"props":2470,"children":2471},{"style":221},[2472],{"type":179,"value":2473},"apply",{"type":173,"tag":198,"props":2475,"children":2476},{"style":269},[2477],{"type":179,"value":230},{"type":173,"tag":198,"props":2479,"children":2480},{"style":275},[2481],{"type":179,"value":2482},"self",{"type":173,"tag":198,"props":2484,"children":2485},{"style":227},[2486],{"type":179,"value":241},{"type":173,"tag":198,"props":2488,"children":2490},{"style":2489},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2491],{"type":179,"value":2492}," arguments",{"type":173,"tag":198,"props":2494,"children":2495},{"style":269},[2496],{"type":179,"value":390},{"type":173,"tag":198,"props":2498,"children":2499},{"class":200,"line":586},[2500],{"type":173,"tag":198,"props":2501,"children":2502},{"style":227},[2503],{"type":179,"value":1196},{"type":173,"tag":198,"props":2505,"children":2506},{"class":200,"line":595},[2507,2511],{"type":173,"tag":198,"props":2508,"children":2509},{"style":227},[2510],{"type":179,"value":1204},{"type":173,"tag":198,"props":2512,"children":2513},{"style":269},[2514],{"type":179,"value":390},{"type":173,"tag":198,"props":2516,"children":2517},{"class":200,"line":607},[2518,2523],{"type":173,"tag":198,"props":2519,"children":2520},{"style":263},[2521],{"type":179,"value":2522},"  return",{"type":173,"tag":198,"props":2524,"children":2525},{"style":275},[2526],{"type":179,"value":2527}," expose\n",{"type":173,"tag":198,"props":2529,"children":2530},{"class":200,"line":665},[2531],{"type":173,"tag":198,"props":2532,"children":2533},{"style":227},[2534],{"type":179,"value":922},{"type":173,"tag":181,"props":2536,"children":2537},{},[2538],{"type":179,"value":2539},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":173,"tag":187,"props":2541,"children":2543},{"className":189,"code":2542,"language":191,"meta":166,"style":166},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2544],{"type":173,"tag":194,"props":2545,"children":2546},{"__ignoreMap":166},[2547,2576,2584,2614,2639,2669,2676,2717,2789,2842,2854,2910,2954,2965,3013,3050,3070,3078,3089,3100,3107,3138,3178,3198,3209,3247,3254,3261,3301,3342,3397,3439,3468,3481,3493,3558,3601,3623,3635,3643,3651,3659,3683],{"type":173,"tag":198,"props":2548,"children":2549},{"class":200,"line":201},[2550,2554,2559,2563,2568,2572],{"type":173,"tag":198,"props":2551,"children":2552},{"style":215},[2553],{"type":179,"value":218},{"type":173,"tag":198,"props":2555,"children":2556},{"style":221},[2557],{"type":179,"value":2558}," composeWatcher",{"type":173,"tag":198,"props":2560,"children":2561},{"style":227},[2562],{"type":179,"value":230},{"type":173,"tag":198,"props":2564,"children":2565},{"style":233},[2566],{"type":179,"value":2567},"watchers",{"type":173,"tag":198,"props":2569,"children":2570},{"style":227},[2571],{"type":179,"value":251},{"type":173,"tag":198,"props":2573,"children":2574},{"style":227},[2575],{"type":179,"value":256},{"type":173,"tag":198,"props":2577,"children":2578},{"class":200,"line":211},[2579],{"type":173,"tag":198,"props":2580,"children":2581},{"style":205},[2582],{"type":179,"value":2583},"  // 使用一个新的 watcher 整合事件列表\n",{"type":173,"tag":198,"props":2585,"children":2586},{"class":200,"line":259},[2587,2591,2596,2600,2605,2610],{"type":173,"tag":198,"props":2588,"children":2589},{"style":215},[2590],{"type":179,"value":983},{"type":173,"tag":198,"props":2592,"children":2593},{"style":275},[2594],{"type":179,"value":2595}," watcher",{"type":173,"tag":198,"props":2597,"children":2598},{"style":760},[2599],{"type":179,"value":763},{"type":173,"tag":198,"props":2601,"children":2602},{"style":760},[2603],{"type":179,"value":2604}," new",{"type":173,"tag":198,"props":2606,"children":2607},{"style":221},[2608],{"type":179,"value":2609}," Watcher",{"type":173,"tag":198,"props":2611,"children":2612},{"style":269},[2613],{"type":179,"value":1706},{"type":173,"tag":198,"props":2615,"children":2616},{"class":200,"line":309},[2617,2621,2626,2630,2635],{"type":173,"tag":198,"props":2618,"children":2619},{"style":215},[2620],{"type":179,"value":983},{"type":173,"tag":198,"props":2622,"children":2623},{"style":275},[2624],{"type":179,"value":2625}," filterDups",{"type":173,"tag":198,"props":2627,"children":2628},{"style":760},[2629],{"type":179,"value":763},{"type":173,"tag":198,"props":2631,"children":2632},{"style":221},[2633],{"type":179,"value":2634}," createDupsFilter",{"type":173,"tag":198,"props":2636,"children":2637},{"style":269},[2638],{"type":179,"value":1706},{"type":173,"tag":198,"props":2640,"children":2641},{"class":200,"line":361},[2642,2646,2651,2655,2660,2664],{"type":173,"tag":198,"props":2643,"children":2644},{"style":215},[2645],{"type":179,"value":983},{"type":173,"tag":198,"props":2647,"children":2648},{"style":275},[2649],{"type":179,"value":2650}," counter",{"type":173,"tag":198,"props":2652,"children":2653},{"style":760},[2654],{"type":179,"value":763},{"type":173,"tag":198,"props":2656,"children":2657},{"style":275},[2658],{"type":179,"value":2659}," watchers",{"type":173,"tag":198,"props":2661,"children":2662},{"style":227},[2663],{"type":179,"value":283},{"type":173,"tag":198,"props":2665,"children":2666},{"style":1420},[2667],{"type":179,"value":2668},"length\n",{"type":173,"tag":198,"props":2670,"children":2671},{"class":200,"line":393},[2672],{"type":173,"tag":198,"props":2673,"children":2674},{"emptyLinePlaceholder":165},[2675],{"type":179,"value":1431},{"type":173,"tag":198,"props":2677,"children":2678},{"class":200,"line":406},[2679,2684,2688,2692,2696,2700,2704,2709,2713],{"type":173,"tag":198,"props":2680,"children":2681},{"style":275},[2682],{"type":179,"value":2683},"  watchers",{"type":173,"tag":198,"props":2685,"children":2686},{"style":227},[2687],{"type":179,"value":283},{"type":173,"tag":198,"props":2689,"children":2690},{"style":221},[2691],{"type":179,"value":712},{"type":173,"tag":198,"props":2693,"children":2694},{"style":269},[2695],{"type":179,"value":230},{"type":173,"tag":198,"props":2697,"children":2698},{"style":215},[2699],{"type":179,"value":218},{"type":173,"tag":198,"props":2701,"children":2702},{"style":227},[2703],{"type":179,"value":230},{"type":173,"tag":198,"props":2705,"children":2706},{"style":233},[2707],{"type":179,"value":2708},"w",{"type":173,"tag":198,"props":2710,"children":2711},{"style":227},[2712],{"type":179,"value":251},{"type":173,"tag":198,"props":2714,"children":2715},{"style":227},[2716],{"type":179,"value":256},{"type":173,"tag":198,"props":2718,"children":2719},{"class":200,"line":415},[2720,2725,2729,2733,2737,2741,2745,2749,2753,2757,2761,2765,2769,2773,2777,2781,2785],{"type":173,"tag":198,"props":2721,"children":2722},{"style":275},[2723],{"type":179,"value":2724},"    w",{"type":173,"tag":198,"props":2726,"children":2727},{"style":227},[2728],{"type":179,"value":283},{"type":173,"tag":198,"props":2730,"children":2731},{"style":221},[2732],{"type":179,"value":1820},{"type":173,"tag":198,"props":2734,"children":2735},{"style":269},[2736],{"type":179,"value":230},{"type":173,"tag":198,"props":2738,"children":2739},{"style":1021},[2740],{"type":179,"value":1035},{"type":173,"tag":198,"props":2742,"children":2743},{"style":1027},[2744],{"type":179,"value":1833},{"type":173,"tag":198,"props":2746,"children":2747},{"style":1021},[2748],{"type":179,"value":1035},{"type":173,"tag":198,"props":2750,"children":2751},{"style":227},[2752],{"type":179,"value":241},{"type":173,"tag":198,"props":2754,"children":2755},{"style":221},[2756],{"type":179,"value":2625},{"type":173,"tag":198,"props":2758,"children":2759},{"style":269},[2760],{"type":179,"value":230},{"type":173,"tag":198,"props":2762,"children":2763},{"style":215},[2764],{"type":179,"value":218},{"type":173,"tag":198,"props":2766,"children":2767},{"style":227},[2768],{"type":179,"value":230},{"type":173,"tag":198,"props":2770,"children":2771},{"style":233},[2772],{"type":179,"value":1081},{"type":173,"tag":198,"props":2774,"children":2775},{"style":227},[2776],{"type":179,"value":241},{"type":173,"tag":198,"props":2778,"children":2779},{"style":233},[2780],{"type":179,"value":1862},{"type":173,"tag":198,"props":2782,"children":2783},{"style":227},[2784],{"type":179,"value":251},{"type":173,"tag":198,"props":2786,"children":2787},{"style":227},[2788],{"type":179,"value":256},{"type":173,"tag":198,"props":2790,"children":2791},{"class":200,"line":424},[2792,2797,2801,2805,2809,2813,2817,2821,2825,2830,2834,2838],{"type":173,"tag":198,"props":2793,"children":2794},{"style":275},[2795],{"type":179,"value":2796},"      watcher",{"type":173,"tag":198,"props":2798,"children":2799},{"style":227},[2800],{"type":179,"value":283},{"type":173,"tag":198,"props":2802,"children":2803},{"style":221},[2804],{"type":179,"value":2220},{"type":173,"tag":198,"props":2806,"children":2807},{"style":269},[2808],{"type":179,"value":230},{"type":173,"tag":198,"props":2810,"children":2811},{"style":1021},[2812],{"type":179,"value":1035},{"type":173,"tag":198,"props":2814,"children":2815},{"style":1027},[2816],{"type":179,"value":1833},{"type":173,"tag":198,"props":2818,"children":2819},{"style":1021},[2820],{"type":179,"value":1035},{"type":173,"tag":198,"props":2822,"children":2823},{"style":227},[2824],{"type":179,"value":241},{"type":173,"tag":198,"props":2826,"children":2827},{"style":275},[2828],{"type":179,"value":2829}," evt",{"type":173,"tag":198,"props":2831,"children":2832},{"style":227},[2833],{"type":179,"value":241},{"type":173,"tag":198,"props":2835,"children":2836},{"style":275},[2837],{"type":179,"value":1862},{"type":173,"tag":198,"props":2839,"children":2840},{"style":269},[2841],{"type":179,"value":390},{"type":173,"tag":198,"props":2843,"children":2844},{"class":200,"line":465},[2845,2849],{"type":173,"tag":198,"props":2846,"children":2847},{"style":227},[2848],{"type":179,"value":399},{"type":173,"tag":198,"props":2850,"children":2851},{"style":269},[2852],{"type":179,"value":2853},"))\n",{"type":173,"tag":198,"props":2855,"children":2856},{"class":200,"line":523},[2857,2861,2865,2869,2873,2877,2882,2886,2890,2894,2898,2902,2906],{"type":173,"tag":198,"props":2858,"children":2859},{"style":275},[2860],{"type":179,"value":2724},{"type":173,"tag":198,"props":2862,"children":2863},{"style":227},[2864],{"type":179,"value":283},{"type":173,"tag":198,"props":2866,"children":2867},{"style":221},[2868],{"type":179,"value":1820},{"type":173,"tag":198,"props":2870,"children":2871},{"style":269},[2872],{"type":179,"value":230},{"type":173,"tag":198,"props":2874,"children":2875},{"style":1021},[2876],{"type":179,"value":1035},{"type":173,"tag":198,"props":2878,"children":2879},{"style":1027},[2880],{"type":179,"value":2881},"error",{"type":173,"tag":198,"props":2883,"children":2884},{"style":1021},[2885],{"type":179,"value":1035},{"type":173,"tag":198,"props":2887,"children":2888},{"style":227},[2889],{"type":179,"value":241},{"type":173,"tag":198,"props":2891,"children":2892},{"style":215},[2893],{"type":179,"value":341},{"type":173,"tag":198,"props":2895,"children":2896},{"style":227},[2897],{"type":179,"value":230},{"type":173,"tag":198,"props":2899,"children":2900},{"style":233},[2901],{"type":179,"value":350},{"type":173,"tag":198,"props":2903,"children":2904},{"style":227},[2905],{"type":179,"value":251},{"type":173,"tag":198,"props":2907,"children":2908},{"style":227},[2909],{"type":179,"value":256},{"type":173,"tag":198,"props":2911,"children":2912},{"class":200,"line":548},[2913,2917,2921,2925,2929,2933,2937,2941,2945,2950],{"type":173,"tag":198,"props":2914,"children":2915},{"style":275},[2916],{"type":179,"value":2796},{"type":173,"tag":198,"props":2918,"children":2919},{"style":227},[2920],{"type":179,"value":283},{"type":173,"tag":198,"props":2922,"children":2923},{"style":221},[2924],{"type":179,"value":2220},{"type":173,"tag":198,"props":2926,"children":2927},{"style":269},[2928],{"type":179,"value":230},{"type":173,"tag":198,"props":2930,"children":2931},{"style":1021},[2932],{"type":179,"value":1035},{"type":173,"tag":198,"props":2934,"children":2935},{"style":1027},[2936],{"type":179,"value":2881},{"type":173,"tag":198,"props":2938,"children":2939},{"style":1021},[2940],{"type":179,"value":1035},{"type":173,"tag":198,"props":2942,"children":2943},{"style":227},[2944],{"type":179,"value":241},{"type":173,"tag":198,"props":2946,"children":2947},{"style":275},[2948],{"type":179,"value":2949}," err",{"type":173,"tag":198,"props":2951,"children":2952},{"style":269},[2953],{"type":179,"value":390},{"type":173,"tag":198,"props":2955,"children":2956},{"class":200,"line":586},[2957,2961],{"type":173,"tag":198,"props":2958,"children":2959},{"style":227},[2960],{"type":179,"value":399},{"type":173,"tag":198,"props":2962,"children":2963},{"style":269},[2964],{"type":179,"value":390},{"type":173,"tag":198,"props":2966,"children":2967},{"class":200,"line":595},[2968,2972,2976,2980,2984,2988,2993,2997,3001,3005,3009],{"type":173,"tag":198,"props":2969,"children":2970},{"style":275},[2971],{"type":179,"value":2724},{"type":173,"tag":198,"props":2973,"children":2974},{"style":227},[2975],{"type":179,"value":283},{"type":173,"tag":198,"props":2977,"children":2978},{"style":221},[2979],{"type":179,"value":1820},{"type":173,"tag":198,"props":2981,"children":2982},{"style":269},[2983],{"type":179,"value":230},{"type":173,"tag":198,"props":2985,"children":2986},{"style":1021},[2987],{"type":179,"value":1035},{"type":173,"tag":198,"props":2989,"children":2990},{"style":1027},[2991],{"type":179,"value":2992},"ready",{"type":173,"tag":198,"props":2994,"children":2995},{"style":1021},[2996],{"type":179,"value":1035},{"type":173,"tag":198,"props":2998,"children":2999},{"style":227},[3000],{"type":179,"value":241},{"type":173,"tag":198,"props":3002,"children":3003},{"style":215},[3004],{"type":179,"value":341},{"type":173,"tag":198,"props":3006,"children":3007},{"style":227},[3008],{"type":179,"value":1681},{"type":173,"tag":198,"props":3010,"children":3011},{"style":227},[3012],{"type":179,"value":256},{"type":173,"tag":198,"props":3014,"children":3015},{"class":200,"line":607},[3016,3020,3024,3029,3033,3037,3042,3046],{"type":173,"tag":198,"props":3017,"children":3018},{"style":263},[3019],{"type":179,"value":671},{"type":173,"tag":198,"props":3021,"children":3022},{"style":269},[3023],{"type":179,"value":272},{"type":173,"tag":198,"props":3025,"children":3026},{"style":760},[3027],{"type":179,"value":3028},"!",{"type":173,"tag":198,"props":3030,"children":3031},{"style":269},[3032],{"type":179,"value":230},{"type":173,"tag":198,"props":3034,"children":3035},{"style":760},[3036],{"type":179,"value":1368},{"type":173,"tag":198,"props":3038,"children":3039},{"style":275},[3040],{"type":179,"value":3041},"counter",{"type":173,"tag":198,"props":3043,"children":3044},{"style":269},[3045],{"type":179,"value":301},{"type":173,"tag":198,"props":3047,"children":3048},{"style":227},[3049],{"type":179,"value":306},{"type":173,"tag":198,"props":3051,"children":3052},{"class":200,"line":665},[3053,3058,3062,3066],{"type":173,"tag":198,"props":3054,"children":3055},{"style":221},[3056],{"type":179,"value":3057},"        emitReady",{"type":173,"tag":198,"props":3059,"children":3060},{"style":269},[3061],{"type":179,"value":230},{"type":173,"tag":198,"props":3063,"children":3064},{"style":275},[3065],{"type":179,"value":1811},{"type":173,"tag":198,"props":3067,"children":3068},{"style":269},[3069],{"type":179,"value":390},{"type":173,"tag":198,"props":3071,"children":3072},{"class":200,"line":697},[3073],{"type":173,"tag":198,"props":3074,"children":3075},{"style":227},[3076],{"type":179,"value":3077},"      }\n",{"type":173,"tag":198,"props":3079,"children":3080},{"class":200,"line":746},[3081,3085],{"type":173,"tag":198,"props":3082,"children":3083},{"style":227},[3084],{"type":179,"value":399},{"type":173,"tag":198,"props":3086,"children":3087},{"style":269},[3088],{"type":179,"value":390},{"type":173,"tag":198,"props":3090,"children":3091},{"class":200,"line":800},[3092,3096],{"type":173,"tag":198,"props":3093,"children":3094},{"style":227},[3095],{"type":179,"value":1204},{"type":173,"tag":198,"props":3097,"children":3098},{"style":269},[3099],{"type":179,"value":390},{"type":173,"tag":198,"props":3101,"children":3102},{"class":200,"line":844},[3103],{"type":173,"tag":198,"props":3104,"children":3105},{"emptyLinePlaceholder":165},[3106],{"type":179,"value":1431},{"type":173,"tag":198,"props":3108,"children":3109},{"class":200,"line":873},[3110,3114,3118,3122,3126,3130,3134],{"type":173,"tag":198,"props":3111,"children":3112},{"style":275},[3113],{"type":179,"value":1451},{"type":173,"tag":198,"props":3115,"children":3116},{"style":227},[3117],{"type":179,"value":283},{"type":173,"tag":198,"props":3119,"children":3120},{"style":221},[3121],{"type":179,"value":1701},{"type":173,"tag":198,"props":3123,"children":3124},{"style":760},[3125],{"type":179,"value":763},{"type":173,"tag":198,"props":3127,"children":3128},{"style":215},[3129],{"type":179,"value":341},{"type":173,"tag":198,"props":3131,"children":3132},{"style":227},[3133],{"type":179,"value":1681},{"type":173,"tag":198,"props":3135,"children":3136},{"style":227},[3137],{"type":179,"value":256},{"type":173,"tag":198,"props":3139,"children":3140},{"class":200,"line":882},[3141,3146,3150,3154,3158,3162,3166,3170,3174],{"type":173,"tag":198,"props":3142,"children":3143},{"style":275},[3144],{"type":179,"value":3145},"    watchers",{"type":173,"tag":198,"props":3147,"children":3148},{"style":227},[3149],{"type":179,"value":283},{"type":173,"tag":198,"props":3151,"children":3152},{"style":221},[3153],{"type":179,"value":712},{"type":173,"tag":198,"props":3155,"children":3156},{"style":269},[3157],{"type":179,"value":230},{"type":173,"tag":198,"props":3159,"children":3160},{"style":215},[3161],{"type":179,"value":218},{"type":173,"tag":198,"props":3163,"children":3164},{"style":227},[3165],{"type":179,"value":230},{"type":173,"tag":198,"props":3167,"children":3168},{"style":233},[3169],{"type":179,"value":2708},{"type":173,"tag":198,"props":3171,"children":3172},{"style":227},[3173],{"type":179,"value":251},{"type":173,"tag":198,"props":3175,"children":3176},{"style":227},[3177],{"type":179,"value":256},{"type":173,"tag":198,"props":3179,"children":3180},{"class":200,"line":895},[3181,3186,3190,3194],{"type":173,"tag":198,"props":3182,"children":3183},{"style":275},[3184],{"type":179,"value":3185},"      w",{"type":173,"tag":198,"props":3187,"children":3188},{"style":227},[3189],{"type":179,"value":283},{"type":173,"tag":198,"props":3191,"children":3192},{"style":221},[3193],{"type":179,"value":1701},{"type":173,"tag":198,"props":3195,"children":3196},{"style":269},[3197],{"type":179,"value":1706},{"type":173,"tag":198,"props":3199,"children":3200},{"class":200,"line":908},[3201,3205],{"type":173,"tag":198,"props":3202,"children":3203},{"style":227},[3204],{"type":179,"value":399},{"type":173,"tag":198,"props":3206,"children":3207},{"style":269},[3208],{"type":179,"value":390},{"type":173,"tag":198,"props":3210,"children":3211},{"class":200,"line":916},[3212,3217,3221,3226,3230,3235,3239,3243],{"type":173,"tag":198,"props":3213,"children":3214},{"style":275},[3215],{"type":179,"value":3216},"    process",{"type":173,"tag":198,"props":3218,"children":3219},{"style":227},[3220],{"type":179,"value":283},{"type":173,"tag":198,"props":3222,"children":3223},{"style":221},[3224],{"type":179,"value":3225},"nextTick",{"type":173,"tag":198,"props":3227,"children":3228},{"style":269},[3229],{"type":179,"value":230},{"type":173,"tag":198,"props":3231,"children":3232},{"style":275},[3233],{"type":179,"value":3234},"emitClose",{"type":173,"tag":198,"props":3236,"children":3237},{"style":227},[3238],{"type":179,"value":241},{"type":173,"tag":198,"props":3240,"children":3241},{"style":275},[3242],{"type":179,"value":2595},{"type":173,"tag":198,"props":3244,"children":3245},{"style":269},[3246],{"type":179,"value":390},{"type":173,"tag":198,"props":3248,"children":3249},{"class":200,"line":2043},[3250],{"type":173,"tag":198,"props":3251,"children":3252},{"style":227},[3253],{"type":179,"value":421},{"type":173,"tag":198,"props":3255,"children":3256},{"class":200,"line":2055},[3257],{"type":173,"tag":198,"props":3258,"children":3259},{"emptyLinePlaceholder":165},[3260],{"type":179,"value":1431},{"type":173,"tag":198,"props":3262,"children":3263},{"class":200,"line":2063},[3264,3268,3272,3276,3280,3284,3288,3293,3297],{"type":173,"tag":198,"props":3265,"children":3266},{"style":275},[3267],{"type":179,"value":1451},{"type":173,"tag":198,"props":3269,"children":3270},{"style":227},[3271],{"type":179,"value":283},{"type":173,"tag":198,"props":3273,"children":3274},{"style":221},[3275],{"type":179,"value":2348},{"type":173,"tag":198,"props":3277,"children":3278},{"style":760},[3279],{"type":179,"value":763},{"type":173,"tag":198,"props":3281,"children":3282},{"style":215},[3283],{"type":179,"value":341},{"type":173,"tag":198,"props":3285,"children":3286},{"style":227},[3287],{"type":179,"value":230},{"type":173,"tag":198,"props":3289,"children":3290},{"style":233},[3291],{"type":179,"value":3292},"fn",{"type":173,"tag":198,"props":3294,"children":3295},{"style":227},[3296],{"type":179,"value":251},{"type":173,"tag":198,"props":3298,"children":3299},{"style":227},[3300],{"type":179,"value":256},{"type":173,"tag":198,"props":3302,"children":3304},{"class":200,"line":3303},29,[3305,3309,3313,3317,3321,3326,3330,3334,3338],{"type":173,"tag":198,"props":3306,"children":3307},{"style":263},[3308],{"type":179,"value":1105},{"type":173,"tag":198,"props":3310,"children":3311},{"style":269},[3312],{"type":179,"value":272},{"type":173,"tag":198,"props":3314,"children":3315},{"style":275},[3316],{"type":179,"value":278},{"type":173,"tag":198,"props":3318,"children":3319},{"style":227},[3320],{"type":179,"value":283},{"type":173,"tag":198,"props":3322,"children":3323},{"style":221},[3324],{"type":179,"value":3325},"func",{"type":173,"tag":198,"props":3327,"children":3328},{"style":269},[3329],{"type":179,"value":230},{"type":173,"tag":198,"props":3331,"children":3332},{"style":275},[3333],{"type":179,"value":3292},{"type":173,"tag":198,"props":3335,"children":3336},{"style":269},[3337],{"type":179,"value":301},{"type":173,"tag":198,"props":3339,"children":3340},{"style":227},[3341],{"type":179,"value":306},{"type":173,"tag":198,"props":3343,"children":3345},{"class":200,"line":3344},30,[3346,3351,3356,3360,3364,3368,3373,3377,3381,3385,3389,3393],{"type":173,"tag":198,"props":3347,"children":3348},{"style":215},[3349],{"type":179,"value":3350},"      var",{"type":173,"tag":198,"props":3352,"children":3353},{"style":275},[3354],{"type":179,"value":3355}," promises",{"type":173,"tag":198,"props":3357,"children":3358},{"style":760},[3359],{"type":179,"value":763},{"type":173,"tag":198,"props":3361,"children":3362},{"style":275},[3363],{"type":179,"value":2659},{"type":173,"tag":198,"props":3365,"children":3366},{"style":227},[3367],{"type":179,"value":283},{"type":173,"tag":198,"props":3369,"children":3370},{"style":221},[3371],{"type":179,"value":3372},"map",{"type":173,"tag":198,"props":3374,"children":3375},{"style":269},[3376],{"type":179,"value":230},{"type":173,"tag":198,"props":3378,"children":3379},{"style":215},[3380],{"type":179,"value":218},{"type":173,"tag":198,"props":3382,"children":3383},{"style":227},[3384],{"type":179,"value":230},{"type":173,"tag":198,"props":3386,"children":3387},{"style":233},[3388],{"type":179,"value":2708},{"type":173,"tag":198,"props":3390,"children":3391},{"style":227},[3392],{"type":179,"value":251},{"type":173,"tag":198,"props":3394,"children":3395},{"style":227},[3396],{"type":179,"value":256},{"type":173,"tag":198,"props":3398,"children":3400},{"class":200,"line":3399},31,[3401,3406,3410,3415,3419,3423,3427,3431,3435],{"type":173,"tag":198,"props":3402,"children":3403},{"style":263},[3404],{"type":179,"value":3405},"        return",{"type":173,"tag":198,"props":3407,"children":3408},{"style":760},[3409],{"type":179,"value":2604},{"type":173,"tag":198,"props":3411,"children":3412},{"style":2090},[3413],{"type":179,"value":3414}," Promise",{"type":173,"tag":198,"props":3416,"children":3417},{"style":269},[3418],{"type":179,"value":230},{"type":173,"tag":198,"props":3420,"children":3421},{"style":215},[3422],{"type":179,"value":218},{"type":173,"tag":198,"props":3424,"children":3425},{"style":227},[3426],{"type":179,"value":230},{"type":173,"tag":198,"props":3428,"children":3429},{"style":233},[3430],{"type":179,"value":1005},{"type":173,"tag":198,"props":3432,"children":3433},{"style":227},[3434],{"type":179,"value":251},{"type":173,"tag":198,"props":3436,"children":3437},{"style":227},[3438],{"type":179,"value":256},{"type":173,"tag":198,"props":3440,"children":3442},{"class":200,"line":3441},32,[3443,3448,3452,3456,3460,3464],{"type":173,"tag":198,"props":3444,"children":3445},{"style":275},[3446],{"type":179,"value":3447},"          w",{"type":173,"tag":198,"props":3449,"children":3450},{"style":227},[3451],{"type":179,"value":283},{"type":173,"tag":198,"props":3453,"children":3454},{"style":221},[3455],{"type":179,"value":2348},{"type":173,"tag":198,"props":3457,"children":3458},{"style":269},[3459],{"type":179,"value":230},{"type":173,"tag":198,"props":3461,"children":3462},{"style":275},[3463],{"type":179,"value":1005},{"type":173,"tag":198,"props":3465,"children":3466},{"style":269},[3467],{"type":179,"value":390},{"type":173,"tag":198,"props":3469,"children":3471},{"class":200,"line":3470},33,[3472,3477],{"type":173,"tag":198,"props":3473,"children":3474},{"style":227},[3475],{"type":179,"value":3476},"        }",{"type":173,"tag":198,"props":3478,"children":3479},{"style":269},[3480],{"type":179,"value":390},{"type":173,"tag":198,"props":3482,"children":3484},{"class":200,"line":3483},34,[3485,3489],{"type":173,"tag":198,"props":3486,"children":3487},{"style":227},[3488],{"type":179,"value":888},{"type":173,"tag":198,"props":3490,"children":3491},{"style":269},[3492],{"type":179,"value":390},{"type":173,"tag":198,"props":3494,"children":3496},{"class":200,"line":3495},35,[3497,3502,3506,3511,3515,3520,3524,3528,3533,3537,3541,3545,3550,3554],{"type":173,"tag":198,"props":3498,"children":3499},{"style":2090},[3500],{"type":179,"value":3501},"      Promise",{"type":173,"tag":198,"props":3503,"children":3504},{"style":227},[3505],{"type":179,"value":283},{"type":173,"tag":198,"props":3507,"children":3508},{"style":221},[3509],{"type":179,"value":3510},"all",{"type":173,"tag":198,"props":3512,"children":3513},{"style":269},[3514],{"type":179,"value":230},{"type":173,"tag":198,"props":3516,"children":3517},{"style":275},[3518],{"type":179,"value":3519},"promises",{"type":173,"tag":198,"props":3521,"children":3522},{"style":269},[3523],{"type":179,"value":251},{"type":173,"tag":198,"props":3525,"children":3526},{"style":227},[3527],{"type":179,"value":283},{"type":173,"tag":198,"props":3529,"children":3530},{"style":221},[3531],{"type":179,"value":3532},"then",{"type":173,"tag":198,"props":3534,"children":3535},{"style":269},[3536],{"type":179,"value":230},{"type":173,"tag":198,"props":3538,"children":3539},{"style":215},[3540],{"type":179,"value":218},{"type":173,"tag":198,"props":3542,"children":3543},{"style":227},[3544],{"type":179,"value":230},{"type":173,"tag":198,"props":3546,"children":3547},{"style":233},[3548],{"type":179,"value":3549},"result",{"type":173,"tag":198,"props":3551,"children":3552},{"style":227},[3553],{"type":179,"value":251},{"type":173,"tag":198,"props":3555,"children":3556},{"style":227},[3557],{"type":179,"value":256},{"type":173,"tag":198,"props":3559,"children":3561},{"class":200,"line":3560},36,[3562,3566,3571,3575,3580,3584,3589,3593,3597],{"type":173,"tag":198,"props":3563,"children":3564},{"style":215},[3565],{"type":179,"value":752},{"type":173,"tag":198,"props":3567,"children":3568},{"style":275},[3569],{"type":179,"value":3570}," ret",{"type":173,"tag":198,"props":3572,"children":3573},{"style":760},[3574],{"type":179,"value":763},{"type":173,"tag":198,"props":3576,"children":3577},{"style":221},[3578],{"type":179,"value":3579}," unique",{"type":173,"tag":198,"props":3581,"children":3582},{"style":269},[3583],{"type":179,"value":230},{"type":173,"tag":198,"props":3585,"children":3586},{"style":221},[3587],{"type":179,"value":3588},"flat1",{"type":173,"tag":198,"props":3590,"children":3591},{"style":269},[3592],{"type":179,"value":230},{"type":173,"tag":198,"props":3594,"children":3595},{"style":275},[3596],{"type":179,"value":3549},{"type":173,"tag":198,"props":3598,"children":3599},{"style":269},[3600],{"type":179,"value":2853},{"type":173,"tag":198,"props":3602,"children":3604},{"class":200,"line":3603},37,[3605,3610,3614,3619],{"type":173,"tag":198,"props":3606,"children":3607},{"style":221},[3608],{"type":179,"value":3609},"        fn",{"type":173,"tag":198,"props":3611,"children":3612},{"style":269},[3613],{"type":179,"value":230},{"type":173,"tag":198,"props":3615,"children":3616},{"style":275},[3617],{"type":179,"value":3618},"ret",{"type":173,"tag":198,"props":3620,"children":3621},{"style":269},[3622],{"type":179,"value":390},{"type":173,"tag":198,"props":3624,"children":3626},{"class":200,"line":3625},38,[3627,3631],{"type":173,"tag":198,"props":3628,"children":3629},{"style":227},[3630],{"type":179,"value":888},{"type":173,"tag":198,"props":3632,"children":3633},{"style":269},[3634],{"type":179,"value":390},{"type":173,"tag":198,"props":3636,"children":3638},{"class":200,"line":3637},39,[3639],{"type":173,"tag":198,"props":3640,"children":3641},{"style":227},[3642],{"type":179,"value":1196},{"type":173,"tag":198,"props":3644,"children":3646},{"class":200,"line":3645},40,[3647],{"type":173,"tag":198,"props":3648,"children":3649},{"style":227},[3650],{"type":179,"value":421},{"type":173,"tag":198,"props":3652,"children":3654},{"class":200,"line":3653},41,[3655],{"type":173,"tag":198,"props":3656,"children":3657},{"emptyLinePlaceholder":165},[3658],{"type":179,"value":1431},{"type":173,"tag":198,"props":3660,"children":3662},{"class":200,"line":3661},42,[3663,3667,3671,3675,3679],{"type":173,"tag":198,"props":3664,"children":3665},{"style":263},[3666],{"type":179,"value":2522},{"type":173,"tag":198,"props":3668,"children":3669},{"style":275},[3670],{"type":179,"value":2595},{"type":173,"tag":198,"props":3672,"children":3673},{"style":227},[3674],{"type":179,"value":283},{"type":173,"tag":198,"props":3676,"children":3677},{"style":221},[3678],{"type":179,"value":2111},{"type":173,"tag":198,"props":3680,"children":3681},{"style":269},[3682],{"type":179,"value":1706},{"type":173,"tag":198,"props":3684,"children":3686},{"class":200,"line":3685},43,[3687],{"type":173,"tag":198,"props":3688,"children":3689},{"style":227},[3690],{"type":179,"value":922},{"type":173,"tag":174,"props":3692,"children":3694},{"id":3693},"工具函数",[3695],{"type":179,"value":3693},{"type":173,"tag":181,"props":3697,"children":3698},{},[3699],{"type":179,"value":3700},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":173,"tag":187,"props":3702,"children":3704},{"className":189,"code":3703,"language":191,"meta":166,"style":166},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3705],{"type":173,"tag":194,"props":3706,"children":3707},{"__ignoreMap":166},[3708,3736,3799,3840,3851],{"type":173,"tag":198,"props":3709,"children":3710},{"class":200,"line":201},[3711,3715,3719,3723,3728,3732],{"type":173,"tag":198,"props":3712,"children":3713},{"style":215},[3714],{"type":179,"value":218},{"type":173,"tag":198,"props":3716,"children":3717},{"style":221},[3718],{"type":179,"value":3579},{"type":173,"tag":198,"props":3720,"children":3721},{"style":227},[3722],{"type":179,"value":230},{"type":173,"tag":198,"props":3724,"children":3725},{"style":233},[3726],{"type":179,"value":3727},"arr",{"type":173,"tag":198,"props":3729,"children":3730},{"style":227},[3731],{"type":179,"value":251},{"type":173,"tag":198,"props":3733,"children":3734},{"style":227},[3735],{"type":179,"value":256},{"type":173,"tag":198,"props":3737,"children":3738},{"class":200,"line":211},[3739,3743,3748,3752,3757,3761,3765,3769,3774,3778,3783,3787,3791,3795],{"type":173,"tag":198,"props":3740,"children":3741},{"style":263},[3742],{"type":179,"value":2522},{"type":173,"tag":198,"props":3744,"children":3745},{"style":275},[3746],{"type":179,"value":3747}," arr",{"type":173,"tag":198,"props":3749,"children":3750},{"style":227},[3751],{"type":179,"value":283},{"type":173,"tag":198,"props":3753,"children":3754},{"style":221},[3755],{"type":179,"value":3756},"filter",{"type":173,"tag":198,"props":3758,"children":3759},{"style":269},[3760],{"type":179,"value":230},{"type":173,"tag":198,"props":3762,"children":3763},{"style":215},[3764],{"type":179,"value":218},{"type":173,"tag":198,"props":3766,"children":3767},{"style":227},[3768],{"type":179,"value":230},{"type":173,"tag":198,"props":3770,"children":3771},{"style":233},[3772],{"type":179,"value":3773},"v",{"type":173,"tag":198,"props":3775,"children":3776},{"style":227},[3777],{"type":179,"value":241},{"type":173,"tag":198,"props":3779,"children":3780},{"style":233},[3781],{"type":179,"value":3782}," i",{"type":173,"tag":198,"props":3784,"children":3785},{"style":227},[3786],{"type":179,"value":241},{"type":173,"tag":198,"props":3788,"children":3789},{"style":233},[3790],{"type":179,"value":2160},{"type":173,"tag":198,"props":3792,"children":3793},{"style":227},[3794],{"type":179,"value":251},{"type":173,"tag":198,"props":3796,"children":3797},{"style":227},[3798],{"type":179,"value":256},{"type":173,"tag":198,"props":3800,"children":3801},{"class":200,"line":259},[3802,3806,3810,3814,3819,3823,3827,3831,3835],{"type":173,"tag":198,"props":3803,"children":3804},{"style":263},[3805],{"type":179,"value":1568},{"type":173,"tag":198,"props":3807,"children":3808},{"style":275},[3809],{"type":179,"value":2160},{"type":173,"tag":198,"props":3811,"children":3812},{"style":227},[3813],{"type":179,"value":283},{"type":173,"tag":198,"props":3815,"children":3816},{"style":221},[3817],{"type":179,"value":3818},"indexOf",{"type":173,"tag":198,"props":3820,"children":3821},{"style":269},[3822],{"type":179,"value":230},{"type":173,"tag":198,"props":3824,"children":3825},{"style":275},[3826],{"type":179,"value":3773},{"type":173,"tag":198,"props":3828,"children":3829},{"style":269},[3830],{"type":179,"value":684},{"type":173,"tag":198,"props":3832,"children":3833},{"style":760},[3834],{"type":179,"value":1140},{"type":173,"tag":198,"props":3836,"children":3837},{"style":275},[3838],{"type":179,"value":3839}," i\n",{"type":173,"tag":198,"props":3841,"children":3842},{"class":200,"line":309},[3843,3847],{"type":173,"tag":198,"props":3844,"children":3845},{"style":227},[3846],{"type":179,"value":1204},{"type":173,"tag":198,"props":3848,"children":3849},{"style":269},[3850],{"type":179,"value":390},{"type":173,"tag":198,"props":3852,"children":3853},{"class":200,"line":361},[3854],{"type":173,"tag":198,"props":3855,"children":3856},{"style":227},[3857],{"type":179,"value":922},{"type":173,"tag":181,"props":3859,"children":3860},{},[3861],{"type":179,"value":3862},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":173,"tag":187,"props":3864,"children":3866},{"className":189,"code":3865,"language":191,"meta":166,"style":166},"const getUUID = () => Math.random().toString(16).substr(2)\n",[3867],{"type":173,"tag":194,"props":3868,"children":3869},{"__ignoreMap":166},[3870],{"type":173,"tag":198,"props":3871,"children":3872},{"class":200,"line":201},[3873,3878,3884,3888,3893,3898,3903,3907,3912,3916,3920,3925,3929,3934,3938,3942,3947,3951,3956],{"type":173,"tag":198,"props":3874,"children":3875},{"style":215},[3876],{"type":179,"value":3877},"const",{"type":173,"tag":198,"props":3879,"children":3881},{"style":3880},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[3882],{"type":179,"value":3883}," getUUID",{"type":173,"tag":198,"props":3885,"children":3886},{"style":760},[3887],{"type":179,"value":763},{"type":173,"tag":198,"props":3889,"children":3890},{"style":227},[3891],{"type":179,"value":3892}," ()",{"type":173,"tag":198,"props":3894,"children":3895},{"style":215},[3896],{"type":179,"value":3897}," =>",{"type":173,"tag":198,"props":3899,"children":3900},{"style":275},[3901],{"type":179,"value":3902}," Math",{"type":173,"tag":198,"props":3904,"children":3905},{"style":227},[3906],{"type":179,"value":283},{"type":173,"tag":198,"props":3908,"children":3909},{"style":221},[3910],{"type":179,"value":3911},"random",{"type":173,"tag":198,"props":3913,"children":3914},{"style":275},[3915],{"type":179,"value":1681},{"type":173,"tag":198,"props":3917,"children":3918},{"style":227},[3919],{"type":179,"value":283},{"type":173,"tag":198,"props":3921,"children":3922},{"style":221},[3923],{"type":179,"value":3924},"toString",{"type":173,"tag":198,"props":3926,"children":3927},{"style":275},[3928],{"type":179,"value":230},{"type":173,"tag":198,"props":3930,"children":3931},{"style":1789},[3932],{"type":179,"value":3933},"16",{"type":173,"tag":198,"props":3935,"children":3936},{"style":275},[3937],{"type":179,"value":251},{"type":173,"tag":198,"props":3939,"children":3940},{"style":227},[3941],{"type":179,"value":283},{"type":173,"tag":198,"props":3943,"children":3944},{"style":221},[3945],{"type":179,"value":3946},"substr",{"type":173,"tag":198,"props":3948,"children":3949},{"style":275},[3950],{"type":179,"value":230},{"type":173,"tag":198,"props":3952,"children":3953},{"style":1789},[3954],{"type":179,"value":3955},"2",{"type":173,"tag":198,"props":3957,"children":3958},{"style":275},[3959],{"type":179,"value":390},{"type":173,"tag":174,"props":3961,"children":3963},{"id":3962},"考虑的点",[3964],{"type":179,"value":3962},{"type":173,"tag":181,"props":3966,"children":3967},{},[3968],{"type":179,"value":3969},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":173,"tag":3971,"props":3972,"children":3973},"ul",{},[3974,3980,3985,3990],{"type":173,"tag":3975,"props":3976,"children":3977},"li",{},[3978],{"type":179,"value":3979},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":173,"tag":3975,"props":3981,"children":3982},{},[3983],{"type":179,"value":3984},"支持本地符号路径吗？支持网络路径吗？",{"type":173,"tag":3975,"props":3986,"children":3987},{},[3988],{"type":179,"value":3989},"如何控制包的大小？",{"type":173,"tag":3975,"props":3991,"children":3992},{},[3993],{"type":179,"value":3994},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":173,"tag":181,"props":3996,"children":3997},{},[3998],{"type":179,"value":3999},"也注意到一些有意思的问题：",{"type":173,"tag":3971,"props":4001,"children":4002},{},[4003,4015,4027],{"type":173,"tag":3975,"props":4004,"children":4005},{},[4006,4008],{"type":179,"value":4007},"Windows，删除正在监听的文件夹，",{"type":173,"tag":929,"props":4009,"children":4012},{"href":4010,"rel":4011},"https://github.com/nodejs/node/issues/31702",[933],[4013],{"type":179,"value":4014},"会发生什么事情？",{"type":173,"tag":3975,"props":4016,"children":4017},{},[4018,4020],{"type":179,"value":4019},"Linux，单个进程能操作的文件数量有上限，",{"type":173,"tag":929,"props":4021,"children":4024},{"href":4022,"rel":4023},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[933],[4025],{"type":179,"value":4026},"该怎么解决？",{"type":173,"tag":3975,"props":4028,"children":4029},{},[4030,4032],{"type":179,"value":4031},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":173,"tag":929,"props":4033,"children":4036},{"href":4034,"rel":4035},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[933],[4037],{"type":179,"value":4038},"怎么处理呢？",{"type":173,"tag":174,"props":4040,"children":4042},{"id":4041},"题外话",[4043],{"type":179,"value":4041},{"type":173,"tag":4045,"props":4046,"children":4049},"l-link",{"label":4047,"source":4048},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":173,"tag":181,"props":4051,"children":4052},{},[4053],{"type":179,"value":4054},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":173,"tag":174,"props":4056,"children":4058},{"id":4057},"其它资料",[4059],{"type":179,"value":4057},{"type":173,"tag":181,"props":4061,"children":4062},{},[4063],{"type":179,"value":4064},"相关类库：",{"type":173,"tag":3971,"props":4066,"children":4067},{},[4068,4077,4087],{"type":173,"tag":3975,"props":4069,"children":4070},{},[4071],{"type":173,"tag":929,"props":4072,"children":4075},{"href":4073,"rel":4074},"https://www.npmjs.com/package/watcher",[933],[4076],{"type":179,"value":1811},{"type":173,"tag":3975,"props":4078,"children":4079},{},[4080],{"type":173,"tag":929,"props":4081,"children":4084},{"href":4082,"rel":4083},"https://github.com/paulmillr/chokidar",[933],[4085],{"type":179,"value":4086},"chokidar",{"type":173,"tag":3975,"props":4088,"children":4089},{},[4090],{"type":173,"tag":929,"props":4091,"children":4094},{"href":4092,"rel":4093},"https://github.com/Axosoft/nsfw",[933],[4095],{"type":179,"value":4096},"nsfw",{"type":173,"tag":181,"props":4098,"children":4099},{},[4100],{"type":179,"value":4101},"推荐阅读：",{"type":173,"tag":3971,"props":4103,"children":4104},{},[4105,4115],{"type":173,"tag":3975,"props":4106,"children":4107},{},[4108],{"type":173,"tag":929,"props":4109,"children":4112},{"href":4110,"rel":4111},"https://juejin.cn/post/7000262974430511117",[933],[4113],{"type":179,"value":4114},"《node-watch、Chokidar封装思路解析》",{"type":173,"tag":3975,"props":4116,"children":4117},{},[4118],{"type":173,"tag":929,"props":4119,"children":4122},{"href":4120,"rel":4121},"https://www.jianshu.com/p/09dae09457fa",[933],[4123],{"type":179,"value":4124},"《如何利用 Nodejs 监听文件夹》",{"type":173,"tag":4126,"props":4127,"children":4128},"style",{},[4129],{"type":179,"value":4130},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":211,"depth":211,"links":4132},[4133,4134,4135,4136,4137],{"id":176,"depth":211,"text":176},{"id":3693,"depth":211,"text":3693},{"id":3962,"depth":211,"text":3962},{"id":4041,"depth":211,"text":4041},{"id":4057,"depth":211,"text":4057},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","8.source-code/_node/node-watch","md",[4145,4149],{"_path":4146,"title":4147,"description":4148},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4150,"title":4151,"description":4152},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",1749721445990]