[{"data":1,"prerenderedAt":4147},["ShallowReactive",2],{"navigation":3,"/source-code/_node/node-watch":155,"/source-code/_node/node-watch-surround":4138},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":156,"_dir":157,"_draft":158,"_partial":159,"_locale":160,"title":161,"description":162,"body":163,"_type":4132,"_id":4133,"_source":4134,"_file":4135,"_stem":4136,"_extension":4137},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":164,"children":165,"toc":4125},"root",[166,174,180,917,933,1210,1215,1392,1397,2067,2072,2529,2534,3685,3690,3695,3852,3857,3954,3959,3964,3989,3994,4033,4038,4044,4049,4054,4059,4091,4096,4119],{"type":167,"tag":168,"props":169,"children":171},"element","h2",{"id":170},"实现",[172],{"type":173,"value":170},"text",{"type":167,"tag":175,"props":176,"children":177},"p",{},[178],{"type":173,"value":179},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":167,"tag":181,"props":182,"children":186},"pre",{"className":183,"code":184,"language":185,"meta":160,"style":160},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[187],{"type":167,"tag":188,"props":189,"children":190},"code",{"__ignoreMap":160},[191,203,251,301,353,385,398,407,416,457,515,540,578,587,599,657,689,738,792,836,865,874,887,900,908],{"type":167,"tag":192,"props":193,"children":196},"span",{"class":194,"line":195},"line",1,[197],{"type":167,"tag":192,"props":198,"children":200},{"style":199},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[201],{"type":173,"value":202},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":167,"tag":192,"props":204,"children":206},{"class":194,"line":205},2,[207,213,219,225,231,236,241,246],{"type":167,"tag":192,"props":208,"children":210},{"style":209},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[211],{"type":173,"value":212},"function",{"type":167,"tag":192,"props":214,"children":216},{"style":215},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[217],{"type":173,"value":218}," watch",{"type":167,"tag":192,"props":220,"children":222},{"style":221},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[223],{"type":173,"value":224},"(",{"type":167,"tag":192,"props":226,"children":228},{"style":227},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[229],{"type":173,"value":230},"dir",{"type":167,"tag":192,"props":232,"children":233},{"style":221},[234],{"type":173,"value":235},",",{"type":167,"tag":192,"props":237,"children":238},{"style":227},[239],{"type":173,"value":240}," cb",{"type":167,"tag":192,"props":242,"children":243},{"style":221},[244],{"type":173,"value":245},")",{"type":167,"tag":192,"props":247,"children":248},{"style":221},[249],{"type":173,"value":250}," {\n",{"type":167,"tag":192,"props":252,"children":254},{"class":194,"line":253},3,[255,261,267,273,278,283,287,291,296],{"type":167,"tag":192,"props":256,"children":258},{"style":257},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[259],{"type":173,"value":260},"  if",{"type":167,"tag":192,"props":262,"children":264},{"style":263},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[265],{"type":173,"value":266}," (",{"type":167,"tag":192,"props":268,"children":270},{"style":269},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[271],{"type":173,"value":272},"is",{"type":167,"tag":192,"props":274,"children":275},{"style":221},[276],{"type":173,"value":277},".",{"type":167,"tag":192,"props":279,"children":280},{"style":215},[281],{"type":173,"value":282},"File",{"type":167,"tag":192,"props":284,"children":285},{"style":263},[286],{"type":173,"value":224},{"type":167,"tag":192,"props":288,"children":289},{"style":269},[290],{"type":173,"value":230},{"type":167,"tag":192,"props":292,"children":293},{"style":263},[294],{"type":173,"value":295},")) ",{"type":167,"tag":192,"props":297,"children":298},{"style":221},[299],{"type":173,"value":300},"{\n",{"type":167,"tag":192,"props":302,"children":304},{"class":194,"line":303},4,[305,310,314,319,323,327,331,336,340,345,349],{"type":167,"tag":192,"props":306,"children":307},{"style":269},[308],{"type":173,"value":309},"    fs",{"type":167,"tag":192,"props":311,"children":312},{"style":221},[313],{"type":173,"value":277},{"type":167,"tag":192,"props":315,"children":316},{"style":215},[317],{"type":173,"value":318},"watchFile",{"type":167,"tag":192,"props":320,"children":321},{"style":263},[322],{"type":173,"value":224},{"type":167,"tag":192,"props":324,"children":325},{"style":269},[326],{"type":173,"value":230},{"type":167,"tag":192,"props":328,"children":329},{"style":221},[330],{"type":173,"value":235},{"type":167,"tag":192,"props":332,"children":333},{"style":209},[334],{"type":173,"value":335}," function",{"type":167,"tag":192,"props":337,"children":338},{"style":221},[339],{"type":173,"value":224},{"type":167,"tag":192,"props":341,"children":342},{"style":227},[343],{"type":173,"value":344},"err",{"type":167,"tag":192,"props":346,"children":347},{"style":221},[348],{"type":173,"value":245},{"type":167,"tag":192,"props":350,"children":351},{"style":221},[352],{"type":173,"value":250},{"type":167,"tag":192,"props":354,"children":356},{"class":194,"line":355},5,[357,362,366,371,375,380],{"type":167,"tag":192,"props":358,"children":359},{"style":215},[360],{"type":173,"value":361},"      normalizeCall",{"type":167,"tag":192,"props":363,"children":364},{"style":263},[365],{"type":173,"value":224},{"type":167,"tag":192,"props":367,"children":368},{"style":269},[369],{"type":173,"value":370},"cb",{"type":167,"tag":192,"props":372,"children":373},{"style":221},[374],{"type":173,"value":235},{"type":167,"tag":192,"props":376,"children":377},{"style":269},[378],{"type":173,"value":379}," dir",{"type":167,"tag":192,"props":381,"children":382},{"style":263},[383],{"type":173,"value":384},")\n",{"type":167,"tag":192,"props":386,"children":388},{"class":194,"line":387},6,[389,394],{"type":167,"tag":192,"props":390,"children":391},{"style":221},[392],{"type":173,"value":393},"    }",{"type":167,"tag":192,"props":395,"children":396},{"style":263},[397],{"type":173,"value":384},{"type":167,"tag":192,"props":399,"children":401},{"class":194,"line":400},7,[402],{"type":167,"tag":192,"props":403,"children":404},{"style":257},[405],{"type":173,"value":406},"    return\n",{"type":167,"tag":192,"props":408,"children":410},{"class":194,"line":409},8,[411],{"type":167,"tag":192,"props":412,"children":413},{"style":221},[414],{"type":173,"value":415},"  }\n",{"type":167,"tag":192,"props":417,"children":419},{"class":194,"line":418},9,[420,424,428,432,436,441,445,449,453],{"type":167,"tag":192,"props":421,"children":422},{"style":257},[423],{"type":173,"value":260},{"type":167,"tag":192,"props":425,"children":426},{"style":263},[427],{"type":173,"value":266},{"type":167,"tag":192,"props":429,"children":430},{"style":269},[431],{"type":173,"value":272},{"type":167,"tag":192,"props":433,"children":434},{"style":221},[435],{"type":173,"value":277},{"type":167,"tag":192,"props":437,"children":438},{"style":215},[439],{"type":173,"value":440},"Directory",{"type":167,"tag":192,"props":442,"children":443},{"style":263},[444],{"type":173,"value":224},{"type":167,"tag":192,"props":446,"children":447},{"style":269},[448],{"type":173,"value":230},{"type":167,"tag":192,"props":450,"children":451},{"style":263},[452],{"type":173,"value":295},{"type":167,"tag":192,"props":454,"children":455},{"style":221},[456],{"type":173,"value":300},{"type":167,"tag":192,"props":458,"children":460},{"class":194,"line":459},10,[461,465,469,474,478,482,486,490,494,498,502,507,511],{"type":167,"tag":192,"props":462,"children":463},{"style":269},[464],{"type":173,"value":309},{"type":167,"tag":192,"props":466,"children":467},{"style":221},[468],{"type":173,"value":277},{"type":167,"tag":192,"props":470,"children":471},{"style":215},[472],{"type":173,"value":473},"watch",{"type":167,"tag":192,"props":475,"children":476},{"style":263},[477],{"type":173,"value":224},{"type":167,"tag":192,"props":479,"children":480},{"style":269},[481],{"type":173,"value":230},{"type":167,"tag":192,"props":483,"children":484},{"style":221},[485],{"type":173,"value":235},{"type":167,"tag":192,"props":487,"children":488},{"style":209},[489],{"type":173,"value":335},{"type":167,"tag":192,"props":491,"children":492},{"style":221},[493],{"type":173,"value":224},{"type":167,"tag":192,"props":495,"children":496},{"style":227},[497],{"type":173,"value":344},{"type":167,"tag":192,"props":499,"children":500},{"style":221},[501],{"type":173,"value":235},{"type":167,"tag":192,"props":503,"children":504},{"style":227},[505],{"type":173,"value":506}," fname",{"type":167,"tag":192,"props":508,"children":509},{"style":221},[510],{"type":173,"value":245},{"type":167,"tag":192,"props":512,"children":513},{"style":221},[514],{"type":173,"value":250},{"type":167,"tag":192,"props":516,"children":518},{"class":194,"line":517},11,[519,523,527,531,535],{"type":167,"tag":192,"props":520,"children":521},{"style":215},[522],{"type":173,"value":361},{"type":167,"tag":192,"props":524,"children":525},{"style":263},[526],{"type":173,"value":224},{"type":167,"tag":192,"props":528,"children":529},{"style":269},[530],{"type":173,"value":370},{"type":167,"tag":192,"props":532,"children":533},{"style":221},[534],{"type":173,"value":235},{"type":167,"tag":192,"props":536,"children":537},{"style":263},[538],{"type":173,"value":539},"  \n",{"type":167,"tag":192,"props":541,"children":543},{"class":194,"line":542},12,[544,549,553,558,562,566,570,574],{"type":167,"tag":192,"props":545,"children":546},{"style":269},[547],{"type":173,"value":548},"        path",{"type":167,"tag":192,"props":550,"children":551},{"style":221},[552],{"type":173,"value":277},{"type":167,"tag":192,"props":554,"children":555},{"style":215},[556],{"type":173,"value":557},"join",{"type":167,"tag":192,"props":559,"children":560},{"style":263},[561],{"type":173,"value":224},{"type":167,"tag":192,"props":563,"children":564},{"style":269},[565],{"type":173,"value":230},{"type":167,"tag":192,"props":567,"children":568},{"style":221},[569],{"type":173,"value":235},{"type":167,"tag":192,"props":571,"children":572},{"style":269},[573],{"type":173,"value":506},{"type":167,"tag":192,"props":575,"children":576},{"style":263},[577],{"type":173,"value":384},{"type":167,"tag":192,"props":579,"children":581},{"class":194,"line":580},13,[582],{"type":167,"tag":192,"props":583,"children":584},{"style":263},[585],{"type":173,"value":586},"      )\n",{"type":167,"tag":192,"props":588,"children":590},{"class":194,"line":589},14,[591,595],{"type":167,"tag":192,"props":592,"children":593},{"style":221},[594],{"type":173,"value":393},{"type":167,"tag":192,"props":596,"children":597},{"style":263},[598],{"type":173,"value":384},{"type":167,"tag":192,"props":600,"children":602},{"class":194,"line":601},15,[603,607,611,616,620,624,628,632,636,640,644,649,653],{"type":167,"tag":192,"props":604,"children":605},{"style":269},[606],{"type":173,"value":309},{"type":167,"tag":192,"props":608,"children":609},{"style":221},[610],{"type":173,"value":277},{"type":167,"tag":192,"props":612,"children":613},{"style":215},[614],{"type":173,"value":615},"readdir",{"type":167,"tag":192,"props":617,"children":618},{"style":263},[619],{"type":173,"value":224},{"type":167,"tag":192,"props":621,"children":622},{"style":269},[623],{"type":173,"value":230},{"type":167,"tag":192,"props":625,"children":626},{"style":221},[627],{"type":173,"value":235},{"type":167,"tag":192,"props":629,"children":630},{"style":209},[631],{"type":173,"value":335},{"type":167,"tag":192,"props":633,"children":634},{"style":221},[635],{"type":173,"value":224},{"type":167,"tag":192,"props":637,"children":638},{"style":227},[639],{"type":173,"value":344},{"type":167,"tag":192,"props":641,"children":642},{"style":221},[643],{"type":173,"value":235},{"type":167,"tag":192,"props":645,"children":646},{"style":227},[647],{"type":173,"value":648}," files",{"type":167,"tag":192,"props":650,"children":651},{"style":221},[652],{"type":173,"value":245},{"type":167,"tag":192,"props":654,"children":655},{"style":221},[656],{"type":173,"value":250},{"type":167,"tag":192,"props":658,"children":660},{"class":194,"line":659},16,[661,666,670,674,679,684],{"type":167,"tag":192,"props":662,"children":663},{"style":257},[664],{"type":173,"value":665},"      if",{"type":167,"tag":192,"props":667,"children":668},{"style":263},[669],{"type":173,"value":266},{"type":167,"tag":192,"props":671,"children":672},{"style":269},[673],{"type":173,"value":344},{"type":167,"tag":192,"props":675,"children":676},{"style":263},[677],{"type":173,"value":678},") ",{"type":167,"tag":192,"props":680,"children":681},{"style":257},[682],{"type":173,"value":683},"throw",{"type":167,"tag":192,"props":685,"children":686},{"style":269},[687],{"type":173,"value":688}," err\n",{"type":167,"tag":192,"props":690,"children":692},{"class":194,"line":691},17,[693,698,702,707,711,715,719,724,728,733],{"type":167,"tag":192,"props":694,"children":695},{"style":269},[696],{"type":173,"value":697},"      files",{"type":167,"tag":192,"props":699,"children":700},{"style":221},[701],{"type":173,"value":277},{"type":167,"tag":192,"props":703,"children":704},{"style":215},[705],{"type":173,"value":706},"forEach",{"type":167,"tag":192,"props":708,"children":709},{"style":263},[710],{"type":173,"value":224},{"type":167,"tag":192,"props":712,"children":713},{"style":209},[714],{"type":173,"value":212},{"type":167,"tag":192,"props":716,"children":717},{"style":221},[718],{"type":173,"value":224},{"type":167,"tag":192,"props":720,"children":721},{"style":227},[722],{"type":173,"value":723},"n",{"type":167,"tag":192,"props":725,"children":726},{"style":221},[727],{"type":173,"value":245},{"type":167,"tag":192,"props":729,"children":730},{"style":221},[731],{"type":173,"value":732}," {",{"type":167,"tag":192,"props":734,"children":735},{"style":263},[736],{"type":173,"value":737}," \n",{"type":167,"tag":192,"props":739,"children":741},{"class":194,"line":740},18,[742,747,752,758,763,767,771,775,779,783,788],{"type":167,"tag":192,"props":743,"children":744},{"style":209},[745],{"type":173,"value":746},"        var",{"type":167,"tag":192,"props":748,"children":749},{"style":269},[750],{"type":173,"value":751}," file",{"type":167,"tag":192,"props":753,"children":755},{"style":754},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[756],{"type":173,"value":757}," =",{"type":167,"tag":192,"props":759,"children":760},{"style":269},[761],{"type":173,"value":762}," path",{"type":167,"tag":192,"props":764,"children":765},{"style":221},[766],{"type":173,"value":277},{"type":167,"tag":192,"props":768,"children":769},{"style":215},[770],{"type":173,"value":557},{"type":167,"tag":192,"props":772,"children":773},{"style":263},[774],{"type":173,"value":224},{"type":167,"tag":192,"props":776,"children":777},{"style":269},[778],{"type":173,"value":230},{"type":167,"tag":192,"props":780,"children":781},{"style":221},[782],{"type":173,"value":235},{"type":167,"tag":192,"props":784,"children":785},{"style":269},[786],{"type":173,"value":787}," n",{"type":167,"tag":192,"props":789,"children":790},{"style":263},[791],{"type":173,"value":384},{"type":167,"tag":192,"props":793,"children":795},{"class":194,"line":794},19,[796,801,806,810,814,818,822,827,832],{"type":167,"tag":192,"props":797,"children":798},{"style":257},[799],{"type":173,"value":800},"        if",{"type":167,"tag":192,"props":802,"children":803},{"style":263},[804],{"type":173,"value":805}," ( ",{"type":167,"tag":192,"props":807,"children":808},{"style":269},[809],{"type":173,"value":272},{"type":167,"tag":192,"props":811,"children":812},{"style":221},[813],{"type":173,"value":277},{"type":167,"tag":192,"props":815,"children":816},{"style":215},[817],{"type":173,"value":440},{"type":167,"tag":192,"props":819,"children":820},{"style":263},[821],{"type":173,"value":224},{"type":167,"tag":192,"props":823,"children":824},{"style":269},[825],{"type":173,"value":826},"file",{"type":167,"tag":192,"props":828,"children":829},{"style":263},[830],{"type":173,"value":831},") ) ",{"type":167,"tag":192,"props":833,"children":834},{"style":221},[835],{"type":173,"value":300},{"type":167,"tag":192,"props":837,"children":839},{"class":194,"line":838},20,[840,845,849,853,857,861],{"type":167,"tag":192,"props":841,"children":842},{"style":215},[843],{"type":173,"value":844},"          watch",{"type":167,"tag":192,"props":846,"children":847},{"style":263},[848],{"type":173,"value":224},{"type":167,"tag":192,"props":850,"children":851},{"style":269},[852],{"type":173,"value":826},{"type":167,"tag":192,"props":854,"children":855},{"style":221},[856],{"type":173,"value":235},{"type":167,"tag":192,"props":858,"children":859},{"style":269},[860],{"type":173,"value":240},{"type":167,"tag":192,"props":862,"children":863},{"style":263},[864],{"type":173,"value":384},{"type":167,"tag":192,"props":866,"children":868},{"class":194,"line":867},21,[869],{"type":167,"tag":192,"props":870,"children":871},{"style":221},[872],{"type":173,"value":873},"        }\n",{"type":167,"tag":192,"props":875,"children":877},{"class":194,"line":876},22,[878,883],{"type":167,"tag":192,"props":879,"children":880},{"style":221},[881],{"type":173,"value":882},"      }",{"type":167,"tag":192,"props":884,"children":885},{"style":263},[886],{"type":173,"value":384},{"type":167,"tag":192,"props":888,"children":890},{"class":194,"line":889},23,[891,895],{"type":167,"tag":192,"props":892,"children":893},{"style":221},[894],{"type":173,"value":393},{"type":167,"tag":192,"props":896,"children":897},{"style":263},[898],{"type":173,"value":899},")     \n",{"type":167,"tag":192,"props":901,"children":903},{"class":194,"line":902},24,[904],{"type":167,"tag":192,"props":905,"children":906},{"style":221},[907],{"type":173,"value":415},{"type":167,"tag":192,"props":909,"children":911},{"class":194,"line":910},25,[912],{"type":167,"tag":192,"props":913,"children":914},{"style":221},[915],{"type":173,"value":916},"}\n",{"type":167,"tag":175,"props":918,"children":919},{},[920,922,931],{"type":173,"value":921},"由于 fs.watchFile 可能导致",{"type":167,"tag":923,"props":924,"children":928},"a",{"href":925,"rel":926},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[927],"nofollow",[929],{"type":173,"value":930},"高 CPU 负载等问题",{"type":173,"value":932},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":167,"tag":181,"props":934,"children":936},{"className":183,"code":935,"language":185,"meta":160,"style":160},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[937],{"type":167,"tag":188,"props":938,"children":939},{"__ignoreMap":160},[940,970,1034,1092,1147,1183,1191,1203],{"type":167,"tag":192,"props":941,"children":942},{"class":194,"line":195},[943,948,953,957,961,966],{"type":167,"tag":192,"props":944,"children":945},{"style":257},[946],{"type":173,"value":947},"if",{"type":167,"tag":192,"props":949,"children":950},{"style":269},[951],{"type":173,"value":952}," (is",{"type":167,"tag":192,"props":954,"children":955},{"style":221},[956],{"type":173,"value":277},{"type":167,"tag":192,"props":958,"children":959},{"style":215},[960],{"type":173,"value":826},{"type":167,"tag":192,"props":962,"children":963},{"style":269},[964],{"type":173,"value":965},"(fpath)) ",{"type":167,"tag":192,"props":967,"children":968},{"style":221},[969],{"type":173,"value":300},{"type":167,"tag":192,"props":971,"children":972},{"class":194,"line":205},[973,978,983,987,991,995,1000,1004,1009,1013,1019,1025,1030],{"type":167,"tag":192,"props":974,"children":975},{"style":209},[976],{"type":173,"value":977},"  var",{"type":167,"tag":192,"props":979,"children":980},{"style":269},[981],{"type":173,"value":982}," parent",{"type":167,"tag":192,"props":984,"children":985},{"style":754},[986],{"type":173,"value":757},{"type":167,"tag":192,"props":988,"children":989},{"style":269},[990],{"type":173,"value":762},{"type":167,"tag":192,"props":992,"children":993},{"style":221},[994],{"type":173,"value":277},{"type":167,"tag":192,"props":996,"children":997},{"style":215},[998],{"type":173,"value":999},"resolve",{"type":167,"tag":192,"props":1001,"children":1002},{"style":263},[1003],{"type":173,"value":224},{"type":167,"tag":192,"props":1005,"children":1006},{"style":269},[1007],{"type":173,"value":1008},"fpath",{"type":167,"tag":192,"props":1010,"children":1011},{"style":221},[1012],{"type":173,"value":235},{"type":167,"tag":192,"props":1014,"children":1016},{"style":1015},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1017],{"type":173,"value":1018}," '",{"type":167,"tag":192,"props":1020,"children":1022},{"style":1021},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1023],{"type":173,"value":1024},"..",{"type":167,"tag":192,"props":1026,"children":1027},{"style":1015},[1028],{"type":173,"value":1029},"'",{"type":167,"tag":192,"props":1031,"children":1032},{"style":263},[1033],{"type":173,"value":384},{"type":167,"tag":192,"props":1035,"children":1036},{"class":194,"line":253},[1037,1042,1046,1050,1054,1059,1063,1067,1071,1076,1080,1084,1088],{"type":167,"tag":192,"props":1038,"children":1039},{"style":269},[1040],{"type":173,"value":1041},"  fs",{"type":167,"tag":192,"props":1043,"children":1044},{"style":221},[1045],{"type":173,"value":277},{"type":167,"tag":192,"props":1047,"children":1048},{"style":215},[1049],{"type":173,"value":473},{"type":167,"tag":192,"props":1051,"children":1052},{"style":263},[1053],{"type":173,"value":224},{"type":167,"tag":192,"props":1055,"children":1056},{"style":269},[1057],{"type":173,"value":1058},"parent",{"type":167,"tag":192,"props":1060,"children":1061},{"style":221},[1062],{"type":173,"value":235},{"type":167,"tag":192,"props":1064,"children":1065},{"style":209},[1066],{"type":173,"value":335},{"type":167,"tag":192,"props":1068,"children":1069},{"style":221},[1070],{"type":173,"value":224},{"type":167,"tag":192,"props":1072,"children":1073},{"style":227},[1074],{"type":173,"value":1075},"evt",{"type":167,"tag":192,"props":1077,"children":1078},{"style":221},[1079],{"type":173,"value":235},{"type":167,"tag":192,"props":1081,"children":1082},{"style":227},[1083],{"type":173,"value":506},{"type":167,"tag":192,"props":1085,"children":1086},{"style":221},[1087],{"type":173,"value":245},{"type":167,"tag":192,"props":1089,"children":1090},{"style":221},[1091],{"type":173,"value":250},{"type":167,"tag":192,"props":1093,"children":1094},{"class":194,"line":303},[1095,1100,1104,1109,1113,1118,1122,1126,1130,1135,1139,1143],{"type":167,"tag":192,"props":1096,"children":1097},{"style":257},[1098],{"type":173,"value":1099},"    if",{"type":167,"tag":192,"props":1101,"children":1102},{"style":263},[1103],{"type":173,"value":266},{"type":167,"tag":192,"props":1105,"children":1106},{"style":269},[1107],{"type":173,"value":1108},"path",{"type":167,"tag":192,"props":1110,"children":1111},{"style":221},[1112],{"type":173,"value":277},{"type":167,"tag":192,"props":1114,"children":1115},{"style":215},[1116],{"type":173,"value":1117},"basename",{"type":167,"tag":192,"props":1119,"children":1120},{"style":263},[1121],{"type":173,"value":224},{"type":167,"tag":192,"props":1123,"children":1124},{"style":269},[1125],{"type":173,"value":1008},{"type":167,"tag":192,"props":1127,"children":1128},{"style":263},[1129],{"type":173,"value":678},{"type":167,"tag":192,"props":1131,"children":1132},{"style":754},[1133],{"type":173,"value":1134},"===",{"type":167,"tag":192,"props":1136,"children":1137},{"style":269},[1138],{"type":173,"value":506},{"type":167,"tag":192,"props":1140,"children":1141},{"style":263},[1142],{"type":173,"value":678},{"type":167,"tag":192,"props":1144,"children":1145},{"style":221},[1146],{"type":173,"value":300},{"type":167,"tag":192,"props":1148,"children":1149},{"class":194,"line":355},[1150,1154,1158,1162,1166,1171,1175,1179],{"type":167,"tag":192,"props":1151,"children":1152},{"style":215},[1153],{"type":173,"value":361},{"type":167,"tag":192,"props":1155,"children":1156},{"style":263},[1157],{"type":173,"value":224},{"type":167,"tag":192,"props":1159,"children":1160},{"style":269},[1161],{"type":173,"value":1008},{"type":167,"tag":192,"props":1163,"children":1164},{"style":221},[1165],{"type":173,"value":235},{"type":167,"tag":192,"props":1167,"children":1168},{"style":269},[1169],{"type":173,"value":1170}," options",{"type":167,"tag":192,"props":1172,"children":1173},{"style":221},[1174],{"type":173,"value":235},{"type":167,"tag":192,"props":1176,"children":1177},{"style":269},[1178],{"type":173,"value":240},{"type":167,"tag":192,"props":1180,"children":1181},{"style":263},[1182],{"type":173,"value":384},{"type":167,"tag":192,"props":1184,"children":1185},{"class":194,"line":387},[1186],{"type":167,"tag":192,"props":1187,"children":1188},{"style":221},[1189],{"type":173,"value":1190},"    }\n",{"type":167,"tag":192,"props":1192,"children":1193},{"class":194,"line":400},[1194,1199],{"type":167,"tag":192,"props":1195,"children":1196},{"style":221},[1197],{"type":173,"value":1198},"  }",{"type":167,"tag":192,"props":1200,"children":1201},{"style":263},[1202],{"type":173,"value":384},{"type":167,"tag":192,"props":1204,"children":1205},{"class":194,"line":409},[1206],{"type":167,"tag":192,"props":1207,"children":1208},{"style":221},[1209],{"type":173,"value":916},{"type":167,"tag":175,"props":1211,"children":1212},{},[1213],{"type":173,"value":1214},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":167,"tag":181,"props":1216,"children":1218},{"className":183,"code":1217,"language":185,"meta":160,"style":160},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1219],{"type":167,"tag":188,"props":1220,"children":1221},{"__ignoreMap":160},[1222,1265,1302,1337,1371,1378,1385],{"type":167,"tag":192,"props":1223,"children":1224},{"class":194,"line":195},[1225,1229,1233,1237,1241,1245,1249,1253,1257,1261],{"type":167,"tag":192,"props":1226,"children":1227},{"style":209},[1228],{"type":173,"value":212},{"type":167,"tag":192,"props":1230,"children":1231},{"style":215},[1232],{"type":173,"value":218},{"type":167,"tag":192,"props":1234,"children":1235},{"style":221},[1236],{"type":173,"value":224},{"type":167,"tag":192,"props":1238,"children":1239},{"style":227},[1240],{"type":173,"value":1008},{"type":167,"tag":192,"props":1242,"children":1243},{"style":221},[1244],{"type":173,"value":235},{"type":167,"tag":192,"props":1246,"children":1247},{"style":227},[1248],{"type":173,"value":1170},{"type":167,"tag":192,"props":1250,"children":1251},{"style":221},[1252],{"type":173,"value":235},{"type":167,"tag":192,"props":1254,"children":1255},{"style":227},[1256],{"type":173,"value":240},{"type":167,"tag":192,"props":1258,"children":1259},{"style":221},[1260],{"type":173,"value":245},{"type":167,"tag":192,"props":1262,"children":1263},{"style":221},[1264],{"type":173,"value":250},{"type":167,"tag":192,"props":1266,"children":1267},{"class":194,"line":205},[1268,1272,1276,1280,1284,1289,1293,1297],{"type":167,"tag":192,"props":1269,"children":1270},{"style":257},[1271],{"type":173,"value":260},{"type":167,"tag":192,"props":1273,"children":1274},{"style":263},[1275],{"type":173,"value":266},{"type":167,"tag":192,"props":1277,"children":1278},{"style":269},[1279],{"type":173,"value":272},{"type":167,"tag":192,"props":1281,"children":1282},{"style":221},[1283],{"type":173,"value":277},{"type":167,"tag":192,"props":1285,"children":1286},{"style":215},[1287],{"type":173,"value":1288},"symbolic",{"type":167,"tag":192,"props":1290,"children":1291},{"style":263},[1292],{"type":173,"value":224},{"type":167,"tag":192,"props":1294,"children":1295},{"style":269},[1296],{"type":173,"value":1008},{"type":167,"tag":192,"props":1298,"children":1299},{"style":263},[1300],{"type":173,"value":1301},") \n",{"type":167,"tag":192,"props":1303,"children":1304},{"class":194,"line":253},[1305,1310,1315,1319,1324,1328,1333],{"type":167,"tag":192,"props":1306,"children":1307},{"style":754},[1308],{"type":173,"value":1309},"    &&",{"type":167,"tag":192,"props":1311,"children":1312},{"style":754},[1313],{"type":173,"value":1314}," !",{"type":167,"tag":192,"props":1316,"children":1317},{"style":263},[1318],{"type":173,"value":224},{"type":167,"tag":192,"props":1320,"children":1321},{"style":269},[1322],{"type":173,"value":1323},"options",{"type":167,"tag":192,"props":1325,"children":1326},{"style":221},[1327],{"type":173,"value":277},{"type":167,"tag":192,"props":1329,"children":1330},{"style":269},[1331],{"type":173,"value":1332},"followSymLinks",{"type":167,"tag":192,"props":1334,"children":1335},{"style":263},[1336],{"type":173,"value":737},{"type":167,"tag":192,"props":1338,"children":1339},{"class":194,"line":303},[1340,1345,1349,1353,1358,1363,1367],{"type":167,"tag":192,"props":1341,"children":1342},{"style":754},[1343],{"type":173,"value":1344},"      &&",{"type":167,"tag":192,"props":1346,"children":1347},{"style":269},[1348],{"type":173,"value":1170},{"type":167,"tag":192,"props":1350,"children":1351},{"style":221},[1352],{"type":173,"value":277},{"type":167,"tag":192,"props":1354,"children":1355},{"style":269},[1356],{"type":173,"value":1357},"maxSymLevel",{"type":167,"tag":192,"props":1359,"children":1360},{"style":754},[1361],{"type":173,"value":1362},"--",{"type":167,"tag":192,"props":1364,"children":1365},{"style":263},[1366],{"type":173,"value":295},{"type":167,"tag":192,"props":1368,"children":1369},{"style":221},[1370],{"type":173,"value":300},{"type":167,"tag":192,"props":1372,"children":1373},{"class":194,"line":355},[1374],{"type":167,"tag":192,"props":1375,"children":1376},{"style":257},[1377],{"type":173,"value":406},{"type":167,"tag":192,"props":1379,"children":1380},{"class":194,"line":387},[1381],{"type":167,"tag":192,"props":1382,"children":1383},{"style":221},[1384],{"type":173,"value":415},{"type":167,"tag":192,"props":1386,"children":1387},{"class":194,"line":400},[1388],{"type":167,"tag":192,"props":1389,"children":1390},{"style":221},[1391],{"type":173,"value":916},{"type":167,"tag":175,"props":1393,"children":1394},{},[1395],{"type":173,"value":1396},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":167,"tag":181,"props":1398,"children":1400},{"className":183,"code":1399,"language":185,"meta":160,"style":160},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1401],{"type":167,"tag":188,"props":1402,"children":1403},{"__ignoreMap":160},[1404,1418,1426,1438,1483,1505,1555,1591,1607,1620,1627,1634,1641,1680,1701,1734,1762,1773,1791,1798,1865,1933,1953,1974,2006,2035,2047,2055],{"type":167,"tag":192,"props":1405,"children":1406},{"class":194,"line":195},[1407,1412],{"type":167,"tag":192,"props":1408,"children":1409},{"style":209},[1410],{"type":173,"value":1411},"var",{"type":167,"tag":192,"props":1413,"children":1415},{"style":1414},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1416],{"type":173,"value":1417}," IS_SUPPORT\n",{"type":167,"tag":192,"props":1419,"children":1420},{"class":194,"line":205},[1421],{"type":167,"tag":192,"props":1422,"children":1423},{"emptyLinePlaceholder":159},[1424],{"type":173,"value":1425},"\n",{"type":167,"tag":192,"props":1427,"children":1428},{"class":194,"line":253},[1429,1434],{"type":167,"tag":192,"props":1430,"children":1431},{"style":257},[1432],{"type":173,"value":1433},"try",{"type":167,"tag":192,"props":1435,"children":1436},{"style":221},[1437],{"type":173,"value":250},{"type":167,"tag":192,"props":1439,"children":1440},{"class":194,"line":303},[1441,1446,1450,1455,1459,1463,1467,1471,1475,1479],{"type":167,"tag":192,"props":1442,"children":1443},{"style":269},[1444],{"type":173,"value":1445},"  watcher",{"type":167,"tag":192,"props":1447,"children":1448},{"style":754},[1449],{"type":173,"value":757},{"type":167,"tag":192,"props":1451,"children":1452},{"style":269},[1453],{"type":173,"value":1454}," fs",{"type":167,"tag":192,"props":1456,"children":1457},{"style":221},[1458],{"type":173,"value":277},{"type":167,"tag":192,"props":1460,"children":1461},{"style":215},[1462],{"type":173,"value":473},{"type":167,"tag":192,"props":1464,"children":1465},{"style":263},[1466],{"type":173,"value":224},{"type":167,"tag":192,"props":1468,"children":1469},{"style":269},[1470],{"type":173,"value":1058},{"type":167,"tag":192,"props":1472,"children":1473},{"style":221},[1474],{"type":173,"value":235},{"type":167,"tag":192,"props":1476,"children":1477},{"style":269},[1478],{"type":173,"value":1170},{"type":167,"tag":192,"props":1480,"children":1481},{"style":263},[1482],{"type":173,"value":384},{"type":167,"tag":192,"props":1484,"children":1485},{"class":194,"line":355},[1486,1491,1496,1501],{"type":167,"tag":192,"props":1487,"children":1488},{"style":221},[1489],{"type":173,"value":1490},"}",{"type":167,"tag":192,"props":1492,"children":1493},{"style":257},[1494],{"type":173,"value":1495}," catch",{"type":167,"tag":192,"props":1497,"children":1498},{"style":269},[1499],{"type":173,"value":1500}," (e) ",{"type":167,"tag":192,"props":1502,"children":1503},{"style":221},[1504],{"type":173,"value":300},{"type":167,"tag":192,"props":1506,"children":1507},{"class":194,"line":387},[1508,1512,1516,1521,1525,1529,1534,1538,1543,1547,1551],{"type":167,"tag":192,"props":1509,"children":1510},{"style":257},[1511],{"type":173,"value":260},{"type":167,"tag":192,"props":1513,"children":1514},{"style":263},[1515],{"type":173,"value":266},{"type":167,"tag":192,"props":1517,"children":1518},{"style":269},[1519],{"type":173,"value":1520},"e",{"type":167,"tag":192,"props":1522,"children":1523},{"style":221},[1524],{"type":173,"value":277},{"type":167,"tag":192,"props":1526,"children":1527},{"style":269},[1528],{"type":173,"value":188},{"type":167,"tag":192,"props":1530,"children":1531},{"style":754},[1532],{"type":173,"value":1533}," ==",{"type":167,"tag":192,"props":1535,"children":1536},{"style":1015},[1537],{"type":173,"value":1018},{"type":167,"tag":192,"props":1539,"children":1540},{"style":1021},[1541],{"type":173,"value":1542},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":167,"tag":192,"props":1544,"children":1545},{"style":1015},[1546],{"type":173,"value":1029},{"type":167,"tag":192,"props":1548,"children":1549},{"style":263},[1550],{"type":173,"value":678},{"type":167,"tag":192,"props":1552,"children":1553},{"style":221},[1554],{"type":173,"value":300},{"type":167,"tag":192,"props":1556,"children":1557},{"class":194,"line":400},[1558,1563,1568,1572,1577,1581,1587],{"type":167,"tag":192,"props":1559,"children":1560},{"style":257},[1561],{"type":173,"value":1562},"    return",{"type":167,"tag":192,"props":1564,"children":1565},{"style":215},[1566],{"type":173,"value":1567}," fn",{"type":167,"tag":192,"props":1569,"children":1570},{"style":263},[1571],{"type":173,"value":224},{"type":167,"tag":192,"props":1573,"children":1574},{"style":1414},[1575],{"type":173,"value":1576},"IS_SUPPORT",{"type":167,"tag":192,"props":1578,"children":1579},{"style":754},[1580],{"type":173,"value":757},{"type":167,"tag":192,"props":1582,"children":1584},{"style":1583},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1585],{"type":173,"value":1586}," false",{"type":167,"tag":192,"props":1588,"children":1589},{"style":263},[1590],{"type":173,"value":384},{"type":167,"tag":192,"props":1592,"children":1593},{"class":194,"line":409},[1594,1598,1603],{"type":167,"tag":192,"props":1595,"children":1596},{"style":221},[1597],{"type":173,"value":1198},{"type":167,"tag":192,"props":1599,"children":1600},{"style":257},[1601],{"type":173,"value":1602}," else",{"type":167,"tag":192,"props":1604,"children":1605},{"style":221},[1606],{"type":173,"value":250},{"type":167,"tag":192,"props":1608,"children":1609},{"class":194,"line":418},[1610,1615],{"type":167,"tag":192,"props":1611,"children":1612},{"style":257},[1613],{"type":173,"value":1614},"    throw",{"type":167,"tag":192,"props":1616,"children":1617},{"style":269},[1618],{"type":173,"value":1619}," e\n",{"type":167,"tag":192,"props":1621,"children":1622},{"class":194,"line":459},[1623],{"type":167,"tag":192,"props":1624,"children":1625},{"style":221},[1626],{"type":173,"value":415},{"type":167,"tag":192,"props":1628,"children":1629},{"class":194,"line":517},[1630],{"type":167,"tag":192,"props":1631,"children":1632},{"style":221},[1633],{"type":173,"value":916},{"type":167,"tag":192,"props":1635,"children":1636},{"class":194,"line":542},[1637],{"type":167,"tag":192,"props":1638,"children":1639},{"emptyLinePlaceholder":159},[1640],{"type":173,"value":1425},{"type":167,"tag":192,"props":1642,"children":1643},{"class":194,"line":580},[1644,1648,1653,1658,1663,1667,1671,1676],{"type":167,"tag":192,"props":1645,"children":1646},{"style":209},[1647],{"type":173,"value":1411},{"type":167,"tag":192,"props":1649,"children":1650},{"style":269},[1651],{"type":173,"value":1652}," timer ",{"type":167,"tag":192,"props":1654,"children":1655},{"style":754},[1656],{"type":173,"value":1657},"=",{"type":167,"tag":192,"props":1659,"children":1660},{"style":215},[1661],{"type":173,"value":1662}," setTimeout",{"type":167,"tag":192,"props":1664,"children":1665},{"style":269},[1666],{"type":173,"value":224},{"type":167,"tag":192,"props":1668,"children":1669},{"style":209},[1670],{"type":173,"value":212},{"type":167,"tag":192,"props":1672,"children":1673},{"style":221},[1674],{"type":173,"value":1675},"()",{"type":167,"tag":192,"props":1677,"children":1678},{"style":221},[1679],{"type":173,"value":250},{"type":167,"tag":192,"props":1681,"children":1682},{"class":194,"line":589},[1683,1687,1691,1696],{"type":167,"tag":192,"props":1684,"children":1685},{"style":269},[1686],{"type":173,"value":1445},{"type":167,"tag":192,"props":1688,"children":1689},{"style":221},[1690],{"type":173,"value":277},{"type":167,"tag":192,"props":1692,"children":1693},{"style":215},[1694],{"type":173,"value":1695},"close",{"type":167,"tag":192,"props":1697,"children":1698},{"style":263},[1699],{"type":173,"value":1700},"()\n",{"type":167,"tag":192,"props":1702,"children":1703},{"class":194,"line":601},[1704,1709,1713,1718,1722,1726,1730],{"type":167,"tag":192,"props":1705,"children":1706},{"style":269},[1707],{"type":173,"value":1708},"  stack",{"type":167,"tag":192,"props":1710,"children":1711},{"style":221},[1712],{"type":173,"value":277},{"type":167,"tag":192,"props":1714,"children":1715},{"style":215},[1716],{"type":173,"value":1717},"cleanup",{"type":167,"tag":192,"props":1719,"children":1720},{"style":263},[1721],{"type":173,"value":224},{"type":167,"tag":192,"props":1723,"children":1724},{"style":209},[1725],{"type":173,"value":212},{"type":167,"tag":192,"props":1727,"children":1728},{"style":221},[1729],{"type":173,"value":1675},{"type":167,"tag":192,"props":1731,"children":1732},{"style":221},[1733],{"type":173,"value":250},{"type":167,"tag":192,"props":1735,"children":1736},{"class":194,"line":659},[1737,1742,1746,1750,1754,1758],{"type":167,"tag":192,"props":1738,"children":1739},{"style":215},[1740],{"type":173,"value":1741},"    fn",{"type":167,"tag":192,"props":1743,"children":1744},{"style":263},[1745],{"type":173,"value":224},{"type":167,"tag":192,"props":1747,"children":1748},{"style":1414},[1749],{"type":173,"value":1576},{"type":167,"tag":192,"props":1751,"children":1752},{"style":754},[1753],{"type":173,"value":757},{"type":167,"tag":192,"props":1755,"children":1756},{"style":1583},[1757],{"type":173,"value":1586},{"type":167,"tag":192,"props":1759,"children":1760},{"style":263},[1761],{"type":173,"value":384},{"type":167,"tag":192,"props":1763,"children":1764},{"class":194,"line":691},[1765,1769],{"type":167,"tag":192,"props":1766,"children":1767},{"style":221},[1768],{"type":173,"value":1198},{"type":167,"tag":192,"props":1770,"children":1771},{"style":263},[1772],{"type":173,"value":384},{"type":167,"tag":192,"props":1774,"children":1775},{"class":194,"line":740},[1776,1781,1787],{"type":167,"tag":192,"props":1777,"children":1778},{"style":221},[1779],{"type":173,"value":1780},"},",{"type":167,"tag":192,"props":1782,"children":1784},{"style":1783},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1785],{"type":173,"value":1786}," 200",{"type":167,"tag":192,"props":1788,"children":1789},{"style":269},[1790],{"type":173,"value":384},{"type":167,"tag":192,"props":1792,"children":1793},{"class":194,"line":794},[1794],{"type":167,"tag":192,"props":1795,"children":1796},{"emptyLinePlaceholder":159},[1797],{"type":173,"value":1425},{"type":167,"tag":192,"props":1799,"children":1800},{"class":194,"line":838},[1801,1806,1810,1815,1819,1823,1828,1832,1836,1840,1844,1848,1852,1857,1861],{"type":167,"tag":192,"props":1802,"children":1803},{"style":269},[1804],{"type":173,"value":1805},"watcher",{"type":167,"tag":192,"props":1807,"children":1808},{"style":221},[1809],{"type":173,"value":277},{"type":167,"tag":192,"props":1811,"children":1812},{"style":215},[1813],{"type":173,"value":1814},"on",{"type":167,"tag":192,"props":1816,"children":1817},{"style":269},[1818],{"type":173,"value":224},{"type":167,"tag":192,"props":1820,"children":1821},{"style":1015},[1822],{"type":173,"value":1029},{"type":167,"tag":192,"props":1824,"children":1825},{"style":1021},[1826],{"type":173,"value":1827},"change",{"type":167,"tag":192,"props":1829,"children":1830},{"style":1015},[1831],{"type":173,"value":1029},{"type":167,"tag":192,"props":1833,"children":1834},{"style":221},[1835],{"type":173,"value":235},{"type":167,"tag":192,"props":1837,"children":1838},{"style":209},[1839],{"type":173,"value":335},{"type":167,"tag":192,"props":1841,"children":1842},{"style":221},[1843],{"type":173,"value":224},{"type":167,"tag":192,"props":1845,"children":1846},{"style":227},[1847],{"type":173,"value":1075},{"type":167,"tag":192,"props":1849,"children":1850},{"style":221},[1851],{"type":173,"value":235},{"type":167,"tag":192,"props":1853,"children":1854},{"style":227},[1855],{"type":173,"value":1856}," name",{"type":167,"tag":192,"props":1858,"children":1859},{"style":221},[1860],{"type":173,"value":245},{"type":167,"tag":192,"props":1862,"children":1863},{"style":221},[1864],{"type":173,"value":250},{"type":167,"tag":192,"props":1866,"children":1867},{"class":194,"line":867},[1868,1872,1876,1880,1884,1888,1892,1896,1900,1904,1908,1912,1916,1920,1925,1929],{"type":167,"tag":192,"props":1869,"children":1870},{"style":257},[1871],{"type":173,"value":260},{"type":167,"tag":192,"props":1873,"children":1874},{"style":263},[1875],{"type":173,"value":266},{"type":167,"tag":192,"props":1877,"children":1878},{"style":269},[1879],{"type":173,"value":1108},{"type":167,"tag":192,"props":1881,"children":1882},{"style":221},[1883],{"type":173,"value":277},{"type":167,"tag":192,"props":1885,"children":1886},{"style":215},[1887],{"type":173,"value":1117},{"type":167,"tag":192,"props":1889,"children":1890},{"style":263},[1891],{"type":173,"value":224},{"type":167,"tag":192,"props":1893,"children":1894},{"style":269},[1895],{"type":173,"value":826},{"type":167,"tag":192,"props":1897,"children":1898},{"style":263},[1899],{"type":173,"value":678},{"type":167,"tag":192,"props":1901,"children":1902},{"style":754},[1903],{"type":173,"value":1134},{"type":167,"tag":192,"props":1905,"children":1906},{"style":269},[1907],{"type":173,"value":762},{"type":167,"tag":192,"props":1909,"children":1910},{"style":221},[1911],{"type":173,"value":277},{"type":167,"tag":192,"props":1913,"children":1914},{"style":215},[1915],{"type":173,"value":1117},{"type":167,"tag":192,"props":1917,"children":1918},{"style":263},[1919],{"type":173,"value":224},{"type":167,"tag":192,"props":1921,"children":1922},{"style":269},[1923],{"type":173,"value":1924},"name",{"type":167,"tag":192,"props":1926,"children":1927},{"style":263},[1928],{"type":173,"value":295},{"type":167,"tag":192,"props":1930,"children":1931},{"style":221},[1932],{"type":173,"value":300},{"type":167,"tag":192,"props":1934,"children":1935},{"class":194,"line":876},[1936,1941,1945,1949],{"type":167,"tag":192,"props":1937,"children":1938},{"style":269},[1939],{"type":173,"value":1940},"    watcher",{"type":167,"tag":192,"props":1942,"children":1943},{"style":221},[1944],{"type":173,"value":277},{"type":167,"tag":192,"props":1946,"children":1947},{"style":215},[1948],{"type":173,"value":1695},{"type":167,"tag":192,"props":1950,"children":1951},{"style":263},[1952],{"type":173,"value":1700},{"type":167,"tag":192,"props":1954,"children":1955},{"class":194,"line":889},[1956,1961,1965,1970],{"type":167,"tag":192,"props":1957,"children":1958},{"style":215},[1959],{"type":173,"value":1960},"    clearTimeout",{"type":167,"tag":192,"props":1962,"children":1963},{"style":263},[1964],{"type":173,"value":224},{"type":167,"tag":192,"props":1966,"children":1967},{"style":269},[1968],{"type":173,"value":1969},"timer",{"type":167,"tag":192,"props":1971,"children":1972},{"style":263},[1973],{"type":173,"value":384},{"type":167,"tag":192,"props":1975,"children":1976},{"class":194,"line":902},[1977,1982,1986,1990,1994,1998,2002],{"type":167,"tag":192,"props":1978,"children":1979},{"style":269},[1980],{"type":173,"value":1981},"    stack",{"type":167,"tag":192,"props":1983,"children":1984},{"style":221},[1985],{"type":173,"value":277},{"type":167,"tag":192,"props":1987,"children":1988},{"style":215},[1989],{"type":173,"value":1717},{"type":167,"tag":192,"props":1991,"children":1992},{"style":263},[1993],{"type":173,"value":224},{"type":167,"tag":192,"props":1995,"children":1996},{"style":209},[1997],{"type":173,"value":212},{"type":167,"tag":192,"props":1999,"children":2000},{"style":221},[2001],{"type":173,"value":1675},{"type":167,"tag":192,"props":2003,"children":2004},{"style":221},[2005],{"type":173,"value":250},{"type":167,"tag":192,"props":2007,"children":2008},{"class":194,"line":910},[2009,2014,2018,2022,2026,2031],{"type":167,"tag":192,"props":2010,"children":2011},{"style":215},[2012],{"type":173,"value":2013},"      fn",{"type":167,"tag":192,"props":2015,"children":2016},{"style":263},[2017],{"type":173,"value":224},{"type":167,"tag":192,"props":2019,"children":2020},{"style":1414},[2021],{"type":173,"value":1576},{"type":167,"tag":192,"props":2023,"children":2024},{"style":754},[2025],{"type":173,"value":757},{"type":167,"tag":192,"props":2027,"children":2028},{"style":1583},[2029],{"type":173,"value":2030}," true",{"type":167,"tag":192,"props":2032,"children":2033},{"style":263},[2034],{"type":173,"value":384},{"type":167,"tag":192,"props":2036,"children":2038},{"class":194,"line":2037},26,[2039,2043],{"type":167,"tag":192,"props":2040,"children":2041},{"style":221},[2042],{"type":173,"value":393},{"type":167,"tag":192,"props":2044,"children":2045},{"style":263},[2046],{"type":173,"value":384},{"type":167,"tag":192,"props":2048,"children":2050},{"class":194,"line":2049},27,[2051],{"type":167,"tag":192,"props":2052,"children":2053},{"style":221},[2054],{"type":173,"value":415},{"type":167,"tag":192,"props":2056,"children":2058},{"class":194,"line":2057},28,[2059,2063],{"type":167,"tag":192,"props":2060,"children":2061},{"style":221},[2062],{"type":173,"value":1490},{"type":167,"tag":192,"props":2064,"children":2065},{"style":269},[2066],{"type":173,"value":384},{"type":167,"tag":175,"props":2068,"children":2069},{},[2070],{"type":173,"value":2071},"Watcher 仅向外暴露指定方法。",{"type":167,"tag":181,"props":2073,"children":2075},{"className":183,"code":2074,"language":185,"meta":160,"style":160},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2076],{"type":167,"tag":188,"props":2077,"children":2078},{"__ignoreMap":160},[2079,2122,2143,2165,2186,2241,2277,2331,2348,2356,2396,2434,2491,2498,2509,2522],{"type":167,"tag":192,"props":2080,"children":2081},{"class":194,"line":195},[2082,2088,2092,2097,2101,2106,2110,2114,2118],{"type":167,"tag":192,"props":2083,"children":2085},{"style":2084},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[2086],{"type":173,"value":2087},"Watcher",{"type":167,"tag":192,"props":2089,"children":2090},{"style":221},[2091],{"type":173,"value":277},{"type":167,"tag":192,"props":2093,"children":2094},{"style":1414},[2095],{"type":173,"value":2096},"prototype",{"type":167,"tag":192,"props":2098,"children":2099},{"style":221},[2100],{"type":173,"value":277},{"type":167,"tag":192,"props":2102,"children":2103},{"style":215},[2104],{"type":173,"value":2105},"expose",{"type":167,"tag":192,"props":2107,"children":2108},{"style":754},[2109],{"type":173,"value":757},{"type":167,"tag":192,"props":2111,"children":2112},{"style":209},[2113],{"type":173,"value":335},{"type":167,"tag":192,"props":2115,"children":2116},{"style":221},[2117],{"type":173,"value":1675},{"type":167,"tag":192,"props":2119,"children":2120},{"style":221},[2121],{"type":173,"value":250},{"type":167,"tag":192,"props":2123,"children":2124},{"class":194,"line":205},[2125,2129,2134,2138],{"type":167,"tag":192,"props":2126,"children":2127},{"style":209},[2128],{"type":173,"value":977},{"type":167,"tag":192,"props":2130,"children":2131},{"style":269},[2132],{"type":173,"value":2133}," expose",{"type":167,"tag":192,"props":2135,"children":2136},{"style":754},[2137],{"type":173,"value":757},{"type":167,"tag":192,"props":2139,"children":2140},{"style":221},[2141],{"type":173,"value":2142}," {}\n",{"type":167,"tag":192,"props":2144,"children":2145},{"class":194,"line":253},[2146,2150,2155,2159],{"type":167,"tag":192,"props":2147,"children":2148},{"style":209},[2149],{"type":173,"value":977},{"type":167,"tag":192,"props":2151,"children":2152},{"style":269},[2153],{"type":173,"value":2154}," self",{"type":167,"tag":192,"props":2156,"children":2157},{"style":754},[2158],{"type":173,"value":757},{"type":167,"tag":192,"props":2160,"children":2162},{"style":2161},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2163],{"type":173,"value":2164}," this\n",{"type":167,"tag":192,"props":2166,"children":2167},{"class":194,"line":303},[2168,2172,2177,2181],{"type":167,"tag":192,"props":2169,"children":2170},{"style":209},[2171],{"type":173,"value":977},{"type":167,"tag":192,"props":2173,"children":2174},{"style":269},[2175],{"type":173,"value":2176}," methods",{"type":167,"tag":192,"props":2178,"children":2179},{"style":754},[2180],{"type":173,"value":757},{"type":167,"tag":192,"props":2182,"children":2183},{"style":263},[2184],{"type":173,"value":2185}," [\n",{"type":167,"tag":192,"props":2187,"children":2188},{"class":194,"line":355},[2189,2194,2198,2202,2206,2210,2215,2219,2223,2227,2232,2236],{"type":167,"tag":192,"props":2190,"children":2191},{"style":1015},[2192],{"type":173,"value":2193},"    '",{"type":167,"tag":192,"props":2195,"children":2196},{"style":1021},[2197],{"type":173,"value":1814},{"type":167,"tag":192,"props":2199,"children":2200},{"style":1015},[2201],{"type":173,"value":1029},{"type":167,"tag":192,"props":2203,"children":2204},{"style":221},[2205],{"type":173,"value":235},{"type":167,"tag":192,"props":2207,"children":2208},{"style":1015},[2209],{"type":173,"value":1018},{"type":167,"tag":192,"props":2211,"children":2212},{"style":1021},[2213],{"type":173,"value":2214},"emit",{"type":167,"tag":192,"props":2216,"children":2217},{"style":1015},[2218],{"type":173,"value":1029},{"type":167,"tag":192,"props":2220,"children":2221},{"style":221},[2222],{"type":173,"value":235},{"type":167,"tag":192,"props":2224,"children":2225},{"style":1015},[2226],{"type":173,"value":1018},{"type":167,"tag":192,"props":2228,"children":2229},{"style":1021},[2230],{"type":173,"value":2231},"once",{"type":167,"tag":192,"props":2233,"children":2234},{"style":1015},[2235],{"type":173,"value":1029},{"type":167,"tag":192,"props":2237,"children":2238},{"style":221},[2239],{"type":173,"value":2240},",\n",{"type":167,"tag":192,"props":2242,"children":2243},{"class":194,"line":387},[2244,2248,2252,2256,2260,2264,2269,2273],{"type":167,"tag":192,"props":2245,"children":2246},{"style":1015},[2247],{"type":173,"value":2193},{"type":167,"tag":192,"props":2249,"children":2250},{"style":1021},[2251],{"type":173,"value":1695},{"type":167,"tag":192,"props":2253,"children":2254},{"style":1015},[2255],{"type":173,"value":1029},{"type":167,"tag":192,"props":2257,"children":2258},{"style":221},[2259],{"type":173,"value":235},{"type":167,"tag":192,"props":2261,"children":2262},{"style":1015},[2263],{"type":173,"value":1018},{"type":167,"tag":192,"props":2265,"children":2266},{"style":1021},[2267],{"type":173,"value":2268},"isClosed",{"type":167,"tag":192,"props":2270,"children":2271},{"style":1015},[2272],{"type":173,"value":1029},{"type":167,"tag":192,"props":2274,"children":2275},{"style":221},[2276],{"type":173,"value":2240},{"type":167,"tag":192,"props":2278,"children":2279},{"class":194,"line":400},[2280,2284,2289,2293,2297,2301,2306,2310,2314,2318,2323,2327],{"type":167,"tag":192,"props":2281,"children":2282},{"style":1015},[2283],{"type":173,"value":2193},{"type":167,"tag":192,"props":2285,"children":2286},{"style":1021},[2287],{"type":173,"value":2288},"listeners",{"type":167,"tag":192,"props":2290,"children":2291},{"style":1015},[2292],{"type":173,"value":1029},{"type":167,"tag":192,"props":2294,"children":2295},{"style":221},[2296],{"type":173,"value":235},{"type":167,"tag":192,"props":2298,"children":2299},{"style":1015},[2300],{"type":173,"value":1018},{"type":167,"tag":192,"props":2302,"children":2303},{"style":1021},[2304],{"type":173,"value":2305},"setMaxListeners",{"type":167,"tag":192,"props":2307,"children":2308},{"style":1015},[2309],{"type":173,"value":1029},{"type":167,"tag":192,"props":2311,"children":2312},{"style":221},[2313],{"type":173,"value":235},{"type":167,"tag":192,"props":2315,"children":2316},{"style":1015},[2317],{"type":173,"value":1018},{"type":167,"tag":192,"props":2319,"children":2320},{"style":1021},[2321],{"type":173,"value":2322},"getMaxListeners",{"type":167,"tag":192,"props":2324,"children":2325},{"style":1015},[2326],{"type":173,"value":1029},{"type":167,"tag":192,"props":2328,"children":2329},{"style":221},[2330],{"type":173,"value":2240},{"type":167,"tag":192,"props":2332,"children":2333},{"class":194,"line":409},[2334,2338,2343],{"type":167,"tag":192,"props":2335,"children":2336},{"style":1015},[2337],{"type":173,"value":2193},{"type":167,"tag":192,"props":2339,"children":2340},{"style":1021},[2341],{"type":173,"value":2342},"getWatchedPaths",{"type":167,"tag":192,"props":2344,"children":2345},{"style":1015},[2346],{"type":173,"value":2347},"'\n",{"type":167,"tag":192,"props":2349,"children":2350},{"class":194,"line":418},[2351],{"type":167,"tag":192,"props":2352,"children":2353},{"style":263},[2354],{"type":173,"value":2355},"  ]\n",{"type":167,"tag":192,"props":2357,"children":2358},{"class":194,"line":459},[2359,2364,2368,2372,2376,2380,2384,2388,2392],{"type":167,"tag":192,"props":2360,"children":2361},{"style":269},[2362],{"type":173,"value":2363},"  methods",{"type":167,"tag":192,"props":2365,"children":2366},{"style":221},[2367],{"type":173,"value":277},{"type":167,"tag":192,"props":2369,"children":2370},{"style":215},[2371],{"type":173,"value":706},{"type":167,"tag":192,"props":2373,"children":2374},{"style":263},[2375],{"type":173,"value":224},{"type":167,"tag":192,"props":2377,"children":2378},{"style":209},[2379],{"type":173,"value":212},{"type":167,"tag":192,"props":2381,"children":2382},{"style":221},[2383],{"type":173,"value":224},{"type":167,"tag":192,"props":2385,"children":2386},{"style":227},[2387],{"type":173,"value":1924},{"type":167,"tag":192,"props":2389,"children":2390},{"style":221},[2391],{"type":173,"value":245},{"type":167,"tag":192,"props":2393,"children":2394},{"style":221},[2395],{"type":173,"value":250},{"type":167,"tag":192,"props":2397,"children":2398},{"class":194,"line":517},[2399,2404,2409,2413,2418,2422,2426,2430],{"type":167,"tag":192,"props":2400,"children":2401},{"style":269},[2402],{"type":173,"value":2403},"    expose",{"type":167,"tag":192,"props":2405,"children":2406},{"style":263},[2407],{"type":173,"value":2408},"[",{"type":167,"tag":192,"props":2410,"children":2411},{"style":269},[2412],{"type":173,"value":1924},{"type":167,"tag":192,"props":2414,"children":2415},{"style":263},[2416],{"type":173,"value":2417},"] ",{"type":167,"tag":192,"props":2419,"children":2420},{"style":754},[2421],{"type":173,"value":1657},{"type":167,"tag":192,"props":2423,"children":2424},{"style":209},[2425],{"type":173,"value":335},{"type":167,"tag":192,"props":2427,"children":2428},{"style":221},[2429],{"type":173,"value":1675},{"type":167,"tag":192,"props":2431,"children":2432},{"style":221},[2433],{"type":173,"value":250},{"type":167,"tag":192,"props":2435,"children":2436},{"class":194,"line":542},[2437,2442,2446,2450,2454,2459,2463,2468,2472,2477,2481,2487],{"type":167,"tag":192,"props":2438,"children":2439},{"style":257},[2440],{"type":173,"value":2441},"      return",{"type":167,"tag":192,"props":2443,"children":2444},{"style":269},[2445],{"type":173,"value":2154},{"type":167,"tag":192,"props":2447,"children":2448},{"style":263},[2449],{"type":173,"value":2408},{"type":167,"tag":192,"props":2451,"children":2452},{"style":269},[2453],{"type":173,"value":1924},{"type":167,"tag":192,"props":2455,"children":2456},{"style":263},[2457],{"type":173,"value":2458},"]",{"type":167,"tag":192,"props":2460,"children":2461},{"style":221},[2462],{"type":173,"value":277},{"type":167,"tag":192,"props":2464,"children":2465},{"style":215},[2466],{"type":173,"value":2467},"apply",{"type":167,"tag":192,"props":2469,"children":2470},{"style":263},[2471],{"type":173,"value":224},{"type":167,"tag":192,"props":2473,"children":2474},{"style":269},[2475],{"type":173,"value":2476},"self",{"type":167,"tag":192,"props":2478,"children":2479},{"style":221},[2480],{"type":173,"value":235},{"type":167,"tag":192,"props":2482,"children":2484},{"style":2483},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2485],{"type":173,"value":2486}," arguments",{"type":167,"tag":192,"props":2488,"children":2489},{"style":263},[2490],{"type":173,"value":384},{"type":167,"tag":192,"props":2492,"children":2493},{"class":194,"line":580},[2494],{"type":167,"tag":192,"props":2495,"children":2496},{"style":221},[2497],{"type":173,"value":1190},{"type":167,"tag":192,"props":2499,"children":2500},{"class":194,"line":589},[2501,2505],{"type":167,"tag":192,"props":2502,"children":2503},{"style":221},[2504],{"type":173,"value":1198},{"type":167,"tag":192,"props":2506,"children":2507},{"style":263},[2508],{"type":173,"value":384},{"type":167,"tag":192,"props":2510,"children":2511},{"class":194,"line":601},[2512,2517],{"type":167,"tag":192,"props":2513,"children":2514},{"style":257},[2515],{"type":173,"value":2516},"  return",{"type":167,"tag":192,"props":2518,"children":2519},{"style":269},[2520],{"type":173,"value":2521}," expose\n",{"type":167,"tag":192,"props":2523,"children":2524},{"class":194,"line":659},[2525],{"type":167,"tag":192,"props":2526,"children":2527},{"style":221},[2528],{"type":173,"value":916},{"type":167,"tag":175,"props":2530,"children":2531},{},[2532],{"type":173,"value":2533},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":167,"tag":181,"props":2535,"children":2537},{"className":183,"code":2536,"language":185,"meta":160,"style":160},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2538],{"type":167,"tag":188,"props":2539,"children":2540},{"__ignoreMap":160},[2541,2570,2578,2608,2633,2663,2670,2711,2783,2836,2848,2904,2948,2959,3007,3044,3064,3072,3083,3094,3101,3132,3172,3192,3203,3241,3248,3255,3295,3336,3391,3433,3462,3475,3487,3552,3595,3617,3629,3637,3645,3653,3677],{"type":167,"tag":192,"props":2542,"children":2543},{"class":194,"line":195},[2544,2548,2553,2557,2562,2566],{"type":167,"tag":192,"props":2545,"children":2546},{"style":209},[2547],{"type":173,"value":212},{"type":167,"tag":192,"props":2549,"children":2550},{"style":215},[2551],{"type":173,"value":2552}," composeWatcher",{"type":167,"tag":192,"props":2554,"children":2555},{"style":221},[2556],{"type":173,"value":224},{"type":167,"tag":192,"props":2558,"children":2559},{"style":227},[2560],{"type":173,"value":2561},"watchers",{"type":167,"tag":192,"props":2563,"children":2564},{"style":221},[2565],{"type":173,"value":245},{"type":167,"tag":192,"props":2567,"children":2568},{"style":221},[2569],{"type":173,"value":250},{"type":167,"tag":192,"props":2571,"children":2572},{"class":194,"line":205},[2573],{"type":167,"tag":192,"props":2574,"children":2575},{"style":199},[2576],{"type":173,"value":2577},"  // 使用一个新的 watcher 整合事件列表\n",{"type":167,"tag":192,"props":2579,"children":2580},{"class":194,"line":253},[2581,2585,2590,2594,2599,2604],{"type":167,"tag":192,"props":2582,"children":2583},{"style":209},[2584],{"type":173,"value":977},{"type":167,"tag":192,"props":2586,"children":2587},{"style":269},[2588],{"type":173,"value":2589}," watcher",{"type":167,"tag":192,"props":2591,"children":2592},{"style":754},[2593],{"type":173,"value":757},{"type":167,"tag":192,"props":2595,"children":2596},{"style":754},[2597],{"type":173,"value":2598}," new",{"type":167,"tag":192,"props":2600,"children":2601},{"style":215},[2602],{"type":173,"value":2603}," Watcher",{"type":167,"tag":192,"props":2605,"children":2606},{"style":263},[2607],{"type":173,"value":1700},{"type":167,"tag":192,"props":2609,"children":2610},{"class":194,"line":303},[2611,2615,2620,2624,2629],{"type":167,"tag":192,"props":2612,"children":2613},{"style":209},[2614],{"type":173,"value":977},{"type":167,"tag":192,"props":2616,"children":2617},{"style":269},[2618],{"type":173,"value":2619}," filterDups",{"type":167,"tag":192,"props":2621,"children":2622},{"style":754},[2623],{"type":173,"value":757},{"type":167,"tag":192,"props":2625,"children":2626},{"style":215},[2627],{"type":173,"value":2628}," createDupsFilter",{"type":167,"tag":192,"props":2630,"children":2631},{"style":263},[2632],{"type":173,"value":1700},{"type":167,"tag":192,"props":2634,"children":2635},{"class":194,"line":355},[2636,2640,2645,2649,2654,2658],{"type":167,"tag":192,"props":2637,"children":2638},{"style":209},[2639],{"type":173,"value":977},{"type":167,"tag":192,"props":2641,"children":2642},{"style":269},[2643],{"type":173,"value":2644}," counter",{"type":167,"tag":192,"props":2646,"children":2647},{"style":754},[2648],{"type":173,"value":757},{"type":167,"tag":192,"props":2650,"children":2651},{"style":269},[2652],{"type":173,"value":2653}," watchers",{"type":167,"tag":192,"props":2655,"children":2656},{"style":221},[2657],{"type":173,"value":277},{"type":167,"tag":192,"props":2659,"children":2660},{"style":1414},[2661],{"type":173,"value":2662},"length\n",{"type":167,"tag":192,"props":2664,"children":2665},{"class":194,"line":387},[2666],{"type":167,"tag":192,"props":2667,"children":2668},{"emptyLinePlaceholder":159},[2669],{"type":173,"value":1425},{"type":167,"tag":192,"props":2671,"children":2672},{"class":194,"line":400},[2673,2678,2682,2686,2690,2694,2698,2703,2707],{"type":167,"tag":192,"props":2674,"children":2675},{"style":269},[2676],{"type":173,"value":2677},"  watchers",{"type":167,"tag":192,"props":2679,"children":2680},{"style":221},[2681],{"type":173,"value":277},{"type":167,"tag":192,"props":2683,"children":2684},{"style":215},[2685],{"type":173,"value":706},{"type":167,"tag":192,"props":2687,"children":2688},{"style":263},[2689],{"type":173,"value":224},{"type":167,"tag":192,"props":2691,"children":2692},{"style":209},[2693],{"type":173,"value":212},{"type":167,"tag":192,"props":2695,"children":2696},{"style":221},[2697],{"type":173,"value":224},{"type":167,"tag":192,"props":2699,"children":2700},{"style":227},[2701],{"type":173,"value":2702},"w",{"type":167,"tag":192,"props":2704,"children":2705},{"style":221},[2706],{"type":173,"value":245},{"type":167,"tag":192,"props":2708,"children":2709},{"style":221},[2710],{"type":173,"value":250},{"type":167,"tag":192,"props":2712,"children":2713},{"class":194,"line":409},[2714,2719,2723,2727,2731,2735,2739,2743,2747,2751,2755,2759,2763,2767,2771,2775,2779],{"type":167,"tag":192,"props":2715,"children":2716},{"style":269},[2717],{"type":173,"value":2718},"    w",{"type":167,"tag":192,"props":2720,"children":2721},{"style":221},[2722],{"type":173,"value":277},{"type":167,"tag":192,"props":2724,"children":2725},{"style":215},[2726],{"type":173,"value":1814},{"type":167,"tag":192,"props":2728,"children":2729},{"style":263},[2730],{"type":173,"value":224},{"type":167,"tag":192,"props":2732,"children":2733},{"style":1015},[2734],{"type":173,"value":1029},{"type":167,"tag":192,"props":2736,"children":2737},{"style":1021},[2738],{"type":173,"value":1827},{"type":167,"tag":192,"props":2740,"children":2741},{"style":1015},[2742],{"type":173,"value":1029},{"type":167,"tag":192,"props":2744,"children":2745},{"style":221},[2746],{"type":173,"value":235},{"type":167,"tag":192,"props":2748,"children":2749},{"style":215},[2750],{"type":173,"value":2619},{"type":167,"tag":192,"props":2752,"children":2753},{"style":263},[2754],{"type":173,"value":224},{"type":167,"tag":192,"props":2756,"children":2757},{"style":209},[2758],{"type":173,"value":212},{"type":167,"tag":192,"props":2760,"children":2761},{"style":221},[2762],{"type":173,"value":224},{"type":167,"tag":192,"props":2764,"children":2765},{"style":227},[2766],{"type":173,"value":1075},{"type":167,"tag":192,"props":2768,"children":2769},{"style":221},[2770],{"type":173,"value":235},{"type":167,"tag":192,"props":2772,"children":2773},{"style":227},[2774],{"type":173,"value":1856},{"type":167,"tag":192,"props":2776,"children":2777},{"style":221},[2778],{"type":173,"value":245},{"type":167,"tag":192,"props":2780,"children":2781},{"style":221},[2782],{"type":173,"value":250},{"type":167,"tag":192,"props":2784,"children":2785},{"class":194,"line":418},[2786,2791,2795,2799,2803,2807,2811,2815,2819,2824,2828,2832],{"type":167,"tag":192,"props":2787,"children":2788},{"style":269},[2789],{"type":173,"value":2790},"      watcher",{"type":167,"tag":192,"props":2792,"children":2793},{"style":221},[2794],{"type":173,"value":277},{"type":167,"tag":192,"props":2796,"children":2797},{"style":215},[2798],{"type":173,"value":2214},{"type":167,"tag":192,"props":2800,"children":2801},{"style":263},[2802],{"type":173,"value":224},{"type":167,"tag":192,"props":2804,"children":2805},{"style":1015},[2806],{"type":173,"value":1029},{"type":167,"tag":192,"props":2808,"children":2809},{"style":1021},[2810],{"type":173,"value":1827},{"type":167,"tag":192,"props":2812,"children":2813},{"style":1015},[2814],{"type":173,"value":1029},{"type":167,"tag":192,"props":2816,"children":2817},{"style":221},[2818],{"type":173,"value":235},{"type":167,"tag":192,"props":2820,"children":2821},{"style":269},[2822],{"type":173,"value":2823}," evt",{"type":167,"tag":192,"props":2825,"children":2826},{"style":221},[2827],{"type":173,"value":235},{"type":167,"tag":192,"props":2829,"children":2830},{"style":269},[2831],{"type":173,"value":1856},{"type":167,"tag":192,"props":2833,"children":2834},{"style":263},[2835],{"type":173,"value":384},{"type":167,"tag":192,"props":2837,"children":2838},{"class":194,"line":459},[2839,2843],{"type":167,"tag":192,"props":2840,"children":2841},{"style":221},[2842],{"type":173,"value":393},{"type":167,"tag":192,"props":2844,"children":2845},{"style":263},[2846],{"type":173,"value":2847},"))\n",{"type":167,"tag":192,"props":2849,"children":2850},{"class":194,"line":517},[2851,2855,2859,2863,2867,2871,2876,2880,2884,2888,2892,2896,2900],{"type":167,"tag":192,"props":2852,"children":2853},{"style":269},[2854],{"type":173,"value":2718},{"type":167,"tag":192,"props":2856,"children":2857},{"style":221},[2858],{"type":173,"value":277},{"type":167,"tag":192,"props":2860,"children":2861},{"style":215},[2862],{"type":173,"value":1814},{"type":167,"tag":192,"props":2864,"children":2865},{"style":263},[2866],{"type":173,"value":224},{"type":167,"tag":192,"props":2868,"children":2869},{"style":1015},[2870],{"type":173,"value":1029},{"type":167,"tag":192,"props":2872,"children":2873},{"style":1021},[2874],{"type":173,"value":2875},"error",{"type":167,"tag":192,"props":2877,"children":2878},{"style":1015},[2879],{"type":173,"value":1029},{"type":167,"tag":192,"props":2881,"children":2882},{"style":221},[2883],{"type":173,"value":235},{"type":167,"tag":192,"props":2885,"children":2886},{"style":209},[2887],{"type":173,"value":335},{"type":167,"tag":192,"props":2889,"children":2890},{"style":221},[2891],{"type":173,"value":224},{"type":167,"tag":192,"props":2893,"children":2894},{"style":227},[2895],{"type":173,"value":344},{"type":167,"tag":192,"props":2897,"children":2898},{"style":221},[2899],{"type":173,"value":245},{"type":167,"tag":192,"props":2901,"children":2902},{"style":221},[2903],{"type":173,"value":250},{"type":167,"tag":192,"props":2905,"children":2906},{"class":194,"line":542},[2907,2911,2915,2919,2923,2927,2931,2935,2939,2944],{"type":167,"tag":192,"props":2908,"children":2909},{"style":269},[2910],{"type":173,"value":2790},{"type":167,"tag":192,"props":2912,"children":2913},{"style":221},[2914],{"type":173,"value":277},{"type":167,"tag":192,"props":2916,"children":2917},{"style":215},[2918],{"type":173,"value":2214},{"type":167,"tag":192,"props":2920,"children":2921},{"style":263},[2922],{"type":173,"value":224},{"type":167,"tag":192,"props":2924,"children":2925},{"style":1015},[2926],{"type":173,"value":1029},{"type":167,"tag":192,"props":2928,"children":2929},{"style":1021},[2930],{"type":173,"value":2875},{"type":167,"tag":192,"props":2932,"children":2933},{"style":1015},[2934],{"type":173,"value":1029},{"type":167,"tag":192,"props":2936,"children":2937},{"style":221},[2938],{"type":173,"value":235},{"type":167,"tag":192,"props":2940,"children":2941},{"style":269},[2942],{"type":173,"value":2943}," err",{"type":167,"tag":192,"props":2945,"children":2946},{"style":263},[2947],{"type":173,"value":384},{"type":167,"tag":192,"props":2949,"children":2950},{"class":194,"line":580},[2951,2955],{"type":167,"tag":192,"props":2952,"children":2953},{"style":221},[2954],{"type":173,"value":393},{"type":167,"tag":192,"props":2956,"children":2957},{"style":263},[2958],{"type":173,"value":384},{"type":167,"tag":192,"props":2960,"children":2961},{"class":194,"line":589},[2962,2966,2970,2974,2978,2982,2987,2991,2995,2999,3003],{"type":167,"tag":192,"props":2963,"children":2964},{"style":269},[2965],{"type":173,"value":2718},{"type":167,"tag":192,"props":2967,"children":2968},{"style":221},[2969],{"type":173,"value":277},{"type":167,"tag":192,"props":2971,"children":2972},{"style":215},[2973],{"type":173,"value":1814},{"type":167,"tag":192,"props":2975,"children":2976},{"style":263},[2977],{"type":173,"value":224},{"type":167,"tag":192,"props":2979,"children":2980},{"style":1015},[2981],{"type":173,"value":1029},{"type":167,"tag":192,"props":2983,"children":2984},{"style":1021},[2985],{"type":173,"value":2986},"ready",{"type":167,"tag":192,"props":2988,"children":2989},{"style":1015},[2990],{"type":173,"value":1029},{"type":167,"tag":192,"props":2992,"children":2993},{"style":221},[2994],{"type":173,"value":235},{"type":167,"tag":192,"props":2996,"children":2997},{"style":209},[2998],{"type":173,"value":335},{"type":167,"tag":192,"props":3000,"children":3001},{"style":221},[3002],{"type":173,"value":1675},{"type":167,"tag":192,"props":3004,"children":3005},{"style":221},[3006],{"type":173,"value":250},{"type":167,"tag":192,"props":3008,"children":3009},{"class":194,"line":601},[3010,3014,3018,3023,3027,3031,3036,3040],{"type":167,"tag":192,"props":3011,"children":3012},{"style":257},[3013],{"type":173,"value":665},{"type":167,"tag":192,"props":3015,"children":3016},{"style":263},[3017],{"type":173,"value":266},{"type":167,"tag":192,"props":3019,"children":3020},{"style":754},[3021],{"type":173,"value":3022},"!",{"type":167,"tag":192,"props":3024,"children":3025},{"style":263},[3026],{"type":173,"value":224},{"type":167,"tag":192,"props":3028,"children":3029},{"style":754},[3030],{"type":173,"value":1362},{"type":167,"tag":192,"props":3032,"children":3033},{"style":269},[3034],{"type":173,"value":3035},"counter",{"type":167,"tag":192,"props":3037,"children":3038},{"style":263},[3039],{"type":173,"value":295},{"type":167,"tag":192,"props":3041,"children":3042},{"style":221},[3043],{"type":173,"value":300},{"type":167,"tag":192,"props":3045,"children":3046},{"class":194,"line":659},[3047,3052,3056,3060],{"type":167,"tag":192,"props":3048,"children":3049},{"style":215},[3050],{"type":173,"value":3051},"        emitReady",{"type":167,"tag":192,"props":3053,"children":3054},{"style":263},[3055],{"type":173,"value":224},{"type":167,"tag":192,"props":3057,"children":3058},{"style":269},[3059],{"type":173,"value":1805},{"type":167,"tag":192,"props":3061,"children":3062},{"style":263},[3063],{"type":173,"value":384},{"type":167,"tag":192,"props":3065,"children":3066},{"class":194,"line":691},[3067],{"type":167,"tag":192,"props":3068,"children":3069},{"style":221},[3070],{"type":173,"value":3071},"      }\n",{"type":167,"tag":192,"props":3073,"children":3074},{"class":194,"line":740},[3075,3079],{"type":167,"tag":192,"props":3076,"children":3077},{"style":221},[3078],{"type":173,"value":393},{"type":167,"tag":192,"props":3080,"children":3081},{"style":263},[3082],{"type":173,"value":384},{"type":167,"tag":192,"props":3084,"children":3085},{"class":194,"line":794},[3086,3090],{"type":167,"tag":192,"props":3087,"children":3088},{"style":221},[3089],{"type":173,"value":1198},{"type":167,"tag":192,"props":3091,"children":3092},{"style":263},[3093],{"type":173,"value":384},{"type":167,"tag":192,"props":3095,"children":3096},{"class":194,"line":838},[3097],{"type":167,"tag":192,"props":3098,"children":3099},{"emptyLinePlaceholder":159},[3100],{"type":173,"value":1425},{"type":167,"tag":192,"props":3102,"children":3103},{"class":194,"line":867},[3104,3108,3112,3116,3120,3124,3128],{"type":167,"tag":192,"props":3105,"children":3106},{"style":269},[3107],{"type":173,"value":1445},{"type":167,"tag":192,"props":3109,"children":3110},{"style":221},[3111],{"type":173,"value":277},{"type":167,"tag":192,"props":3113,"children":3114},{"style":215},[3115],{"type":173,"value":1695},{"type":167,"tag":192,"props":3117,"children":3118},{"style":754},[3119],{"type":173,"value":757},{"type":167,"tag":192,"props":3121,"children":3122},{"style":209},[3123],{"type":173,"value":335},{"type":167,"tag":192,"props":3125,"children":3126},{"style":221},[3127],{"type":173,"value":1675},{"type":167,"tag":192,"props":3129,"children":3130},{"style":221},[3131],{"type":173,"value":250},{"type":167,"tag":192,"props":3133,"children":3134},{"class":194,"line":876},[3135,3140,3144,3148,3152,3156,3160,3164,3168],{"type":167,"tag":192,"props":3136,"children":3137},{"style":269},[3138],{"type":173,"value":3139},"    watchers",{"type":167,"tag":192,"props":3141,"children":3142},{"style":221},[3143],{"type":173,"value":277},{"type":167,"tag":192,"props":3145,"children":3146},{"style":215},[3147],{"type":173,"value":706},{"type":167,"tag":192,"props":3149,"children":3150},{"style":263},[3151],{"type":173,"value":224},{"type":167,"tag":192,"props":3153,"children":3154},{"style":209},[3155],{"type":173,"value":212},{"type":167,"tag":192,"props":3157,"children":3158},{"style":221},[3159],{"type":173,"value":224},{"type":167,"tag":192,"props":3161,"children":3162},{"style":227},[3163],{"type":173,"value":2702},{"type":167,"tag":192,"props":3165,"children":3166},{"style":221},[3167],{"type":173,"value":245},{"type":167,"tag":192,"props":3169,"children":3170},{"style":221},[3171],{"type":173,"value":250},{"type":167,"tag":192,"props":3173,"children":3174},{"class":194,"line":889},[3175,3180,3184,3188],{"type":167,"tag":192,"props":3176,"children":3177},{"style":269},[3178],{"type":173,"value":3179},"      w",{"type":167,"tag":192,"props":3181,"children":3182},{"style":221},[3183],{"type":173,"value":277},{"type":167,"tag":192,"props":3185,"children":3186},{"style":215},[3187],{"type":173,"value":1695},{"type":167,"tag":192,"props":3189,"children":3190},{"style":263},[3191],{"type":173,"value":1700},{"type":167,"tag":192,"props":3193,"children":3194},{"class":194,"line":902},[3195,3199],{"type":167,"tag":192,"props":3196,"children":3197},{"style":221},[3198],{"type":173,"value":393},{"type":167,"tag":192,"props":3200,"children":3201},{"style":263},[3202],{"type":173,"value":384},{"type":167,"tag":192,"props":3204,"children":3205},{"class":194,"line":910},[3206,3211,3215,3220,3224,3229,3233,3237],{"type":167,"tag":192,"props":3207,"children":3208},{"style":269},[3209],{"type":173,"value":3210},"    process",{"type":167,"tag":192,"props":3212,"children":3213},{"style":221},[3214],{"type":173,"value":277},{"type":167,"tag":192,"props":3216,"children":3217},{"style":215},[3218],{"type":173,"value":3219},"nextTick",{"type":167,"tag":192,"props":3221,"children":3222},{"style":263},[3223],{"type":173,"value":224},{"type":167,"tag":192,"props":3225,"children":3226},{"style":269},[3227],{"type":173,"value":3228},"emitClose",{"type":167,"tag":192,"props":3230,"children":3231},{"style":221},[3232],{"type":173,"value":235},{"type":167,"tag":192,"props":3234,"children":3235},{"style":269},[3236],{"type":173,"value":2589},{"type":167,"tag":192,"props":3238,"children":3239},{"style":263},[3240],{"type":173,"value":384},{"type":167,"tag":192,"props":3242,"children":3243},{"class":194,"line":2037},[3244],{"type":167,"tag":192,"props":3245,"children":3246},{"style":221},[3247],{"type":173,"value":415},{"type":167,"tag":192,"props":3249,"children":3250},{"class":194,"line":2049},[3251],{"type":167,"tag":192,"props":3252,"children":3253},{"emptyLinePlaceholder":159},[3254],{"type":173,"value":1425},{"type":167,"tag":192,"props":3256,"children":3257},{"class":194,"line":2057},[3258,3262,3266,3270,3274,3278,3282,3287,3291],{"type":167,"tag":192,"props":3259,"children":3260},{"style":269},[3261],{"type":173,"value":1445},{"type":167,"tag":192,"props":3263,"children":3264},{"style":221},[3265],{"type":173,"value":277},{"type":167,"tag":192,"props":3267,"children":3268},{"style":215},[3269],{"type":173,"value":2342},{"type":167,"tag":192,"props":3271,"children":3272},{"style":754},[3273],{"type":173,"value":757},{"type":167,"tag":192,"props":3275,"children":3276},{"style":209},[3277],{"type":173,"value":335},{"type":167,"tag":192,"props":3279,"children":3280},{"style":221},[3281],{"type":173,"value":224},{"type":167,"tag":192,"props":3283,"children":3284},{"style":227},[3285],{"type":173,"value":3286},"fn",{"type":167,"tag":192,"props":3288,"children":3289},{"style":221},[3290],{"type":173,"value":245},{"type":167,"tag":192,"props":3292,"children":3293},{"style":221},[3294],{"type":173,"value":250},{"type":167,"tag":192,"props":3296,"children":3298},{"class":194,"line":3297},29,[3299,3303,3307,3311,3315,3320,3324,3328,3332],{"type":167,"tag":192,"props":3300,"children":3301},{"style":257},[3302],{"type":173,"value":1099},{"type":167,"tag":192,"props":3304,"children":3305},{"style":263},[3306],{"type":173,"value":266},{"type":167,"tag":192,"props":3308,"children":3309},{"style":269},[3310],{"type":173,"value":272},{"type":167,"tag":192,"props":3312,"children":3313},{"style":221},[3314],{"type":173,"value":277},{"type":167,"tag":192,"props":3316,"children":3317},{"style":215},[3318],{"type":173,"value":3319},"func",{"type":167,"tag":192,"props":3321,"children":3322},{"style":263},[3323],{"type":173,"value":224},{"type":167,"tag":192,"props":3325,"children":3326},{"style":269},[3327],{"type":173,"value":3286},{"type":167,"tag":192,"props":3329,"children":3330},{"style":263},[3331],{"type":173,"value":295},{"type":167,"tag":192,"props":3333,"children":3334},{"style":221},[3335],{"type":173,"value":300},{"type":167,"tag":192,"props":3337,"children":3339},{"class":194,"line":3338},30,[3340,3345,3350,3354,3358,3362,3367,3371,3375,3379,3383,3387],{"type":167,"tag":192,"props":3341,"children":3342},{"style":209},[3343],{"type":173,"value":3344},"      var",{"type":167,"tag":192,"props":3346,"children":3347},{"style":269},[3348],{"type":173,"value":3349}," promises",{"type":167,"tag":192,"props":3351,"children":3352},{"style":754},[3353],{"type":173,"value":757},{"type":167,"tag":192,"props":3355,"children":3356},{"style":269},[3357],{"type":173,"value":2653},{"type":167,"tag":192,"props":3359,"children":3360},{"style":221},[3361],{"type":173,"value":277},{"type":167,"tag":192,"props":3363,"children":3364},{"style":215},[3365],{"type":173,"value":3366},"map",{"type":167,"tag":192,"props":3368,"children":3369},{"style":263},[3370],{"type":173,"value":224},{"type":167,"tag":192,"props":3372,"children":3373},{"style":209},[3374],{"type":173,"value":212},{"type":167,"tag":192,"props":3376,"children":3377},{"style":221},[3378],{"type":173,"value":224},{"type":167,"tag":192,"props":3380,"children":3381},{"style":227},[3382],{"type":173,"value":2702},{"type":167,"tag":192,"props":3384,"children":3385},{"style":221},[3386],{"type":173,"value":245},{"type":167,"tag":192,"props":3388,"children":3389},{"style":221},[3390],{"type":173,"value":250},{"type":167,"tag":192,"props":3392,"children":3394},{"class":194,"line":3393},31,[3395,3400,3404,3409,3413,3417,3421,3425,3429],{"type":167,"tag":192,"props":3396,"children":3397},{"style":257},[3398],{"type":173,"value":3399},"        return",{"type":167,"tag":192,"props":3401,"children":3402},{"style":754},[3403],{"type":173,"value":2598},{"type":167,"tag":192,"props":3405,"children":3406},{"style":2084},[3407],{"type":173,"value":3408}," Promise",{"type":167,"tag":192,"props":3410,"children":3411},{"style":263},[3412],{"type":173,"value":224},{"type":167,"tag":192,"props":3414,"children":3415},{"style":209},[3416],{"type":173,"value":212},{"type":167,"tag":192,"props":3418,"children":3419},{"style":221},[3420],{"type":173,"value":224},{"type":167,"tag":192,"props":3422,"children":3423},{"style":227},[3424],{"type":173,"value":999},{"type":167,"tag":192,"props":3426,"children":3427},{"style":221},[3428],{"type":173,"value":245},{"type":167,"tag":192,"props":3430,"children":3431},{"style":221},[3432],{"type":173,"value":250},{"type":167,"tag":192,"props":3434,"children":3436},{"class":194,"line":3435},32,[3437,3442,3446,3450,3454,3458],{"type":167,"tag":192,"props":3438,"children":3439},{"style":269},[3440],{"type":173,"value":3441},"          w",{"type":167,"tag":192,"props":3443,"children":3444},{"style":221},[3445],{"type":173,"value":277},{"type":167,"tag":192,"props":3447,"children":3448},{"style":215},[3449],{"type":173,"value":2342},{"type":167,"tag":192,"props":3451,"children":3452},{"style":263},[3453],{"type":173,"value":224},{"type":167,"tag":192,"props":3455,"children":3456},{"style":269},[3457],{"type":173,"value":999},{"type":167,"tag":192,"props":3459,"children":3460},{"style":263},[3461],{"type":173,"value":384},{"type":167,"tag":192,"props":3463,"children":3465},{"class":194,"line":3464},33,[3466,3471],{"type":167,"tag":192,"props":3467,"children":3468},{"style":221},[3469],{"type":173,"value":3470},"        }",{"type":167,"tag":192,"props":3472,"children":3473},{"style":263},[3474],{"type":173,"value":384},{"type":167,"tag":192,"props":3476,"children":3478},{"class":194,"line":3477},34,[3479,3483],{"type":167,"tag":192,"props":3480,"children":3481},{"style":221},[3482],{"type":173,"value":882},{"type":167,"tag":192,"props":3484,"children":3485},{"style":263},[3486],{"type":173,"value":384},{"type":167,"tag":192,"props":3488,"children":3490},{"class":194,"line":3489},35,[3491,3496,3500,3505,3509,3514,3518,3522,3527,3531,3535,3539,3544,3548],{"type":167,"tag":192,"props":3492,"children":3493},{"style":2084},[3494],{"type":173,"value":3495},"      Promise",{"type":167,"tag":192,"props":3497,"children":3498},{"style":221},[3499],{"type":173,"value":277},{"type":167,"tag":192,"props":3501,"children":3502},{"style":215},[3503],{"type":173,"value":3504},"all",{"type":167,"tag":192,"props":3506,"children":3507},{"style":263},[3508],{"type":173,"value":224},{"type":167,"tag":192,"props":3510,"children":3511},{"style":269},[3512],{"type":173,"value":3513},"promises",{"type":167,"tag":192,"props":3515,"children":3516},{"style":263},[3517],{"type":173,"value":245},{"type":167,"tag":192,"props":3519,"children":3520},{"style":221},[3521],{"type":173,"value":277},{"type":167,"tag":192,"props":3523,"children":3524},{"style":215},[3525],{"type":173,"value":3526},"then",{"type":167,"tag":192,"props":3528,"children":3529},{"style":263},[3530],{"type":173,"value":224},{"type":167,"tag":192,"props":3532,"children":3533},{"style":209},[3534],{"type":173,"value":212},{"type":167,"tag":192,"props":3536,"children":3537},{"style":221},[3538],{"type":173,"value":224},{"type":167,"tag":192,"props":3540,"children":3541},{"style":227},[3542],{"type":173,"value":3543},"result",{"type":167,"tag":192,"props":3545,"children":3546},{"style":221},[3547],{"type":173,"value":245},{"type":167,"tag":192,"props":3549,"children":3550},{"style":221},[3551],{"type":173,"value":250},{"type":167,"tag":192,"props":3553,"children":3555},{"class":194,"line":3554},36,[3556,3560,3565,3569,3574,3578,3583,3587,3591],{"type":167,"tag":192,"props":3557,"children":3558},{"style":209},[3559],{"type":173,"value":746},{"type":167,"tag":192,"props":3561,"children":3562},{"style":269},[3563],{"type":173,"value":3564}," ret",{"type":167,"tag":192,"props":3566,"children":3567},{"style":754},[3568],{"type":173,"value":757},{"type":167,"tag":192,"props":3570,"children":3571},{"style":215},[3572],{"type":173,"value":3573}," unique",{"type":167,"tag":192,"props":3575,"children":3576},{"style":263},[3577],{"type":173,"value":224},{"type":167,"tag":192,"props":3579,"children":3580},{"style":215},[3581],{"type":173,"value":3582},"flat1",{"type":167,"tag":192,"props":3584,"children":3585},{"style":263},[3586],{"type":173,"value":224},{"type":167,"tag":192,"props":3588,"children":3589},{"style":269},[3590],{"type":173,"value":3543},{"type":167,"tag":192,"props":3592,"children":3593},{"style":263},[3594],{"type":173,"value":2847},{"type":167,"tag":192,"props":3596,"children":3598},{"class":194,"line":3597},37,[3599,3604,3608,3613],{"type":167,"tag":192,"props":3600,"children":3601},{"style":215},[3602],{"type":173,"value":3603},"        fn",{"type":167,"tag":192,"props":3605,"children":3606},{"style":263},[3607],{"type":173,"value":224},{"type":167,"tag":192,"props":3609,"children":3610},{"style":269},[3611],{"type":173,"value":3612},"ret",{"type":167,"tag":192,"props":3614,"children":3615},{"style":263},[3616],{"type":173,"value":384},{"type":167,"tag":192,"props":3618,"children":3620},{"class":194,"line":3619},38,[3621,3625],{"type":167,"tag":192,"props":3622,"children":3623},{"style":221},[3624],{"type":173,"value":882},{"type":167,"tag":192,"props":3626,"children":3627},{"style":263},[3628],{"type":173,"value":384},{"type":167,"tag":192,"props":3630,"children":3632},{"class":194,"line":3631},39,[3633],{"type":167,"tag":192,"props":3634,"children":3635},{"style":221},[3636],{"type":173,"value":1190},{"type":167,"tag":192,"props":3638,"children":3640},{"class":194,"line":3639},40,[3641],{"type":167,"tag":192,"props":3642,"children":3643},{"style":221},[3644],{"type":173,"value":415},{"type":167,"tag":192,"props":3646,"children":3648},{"class":194,"line":3647},41,[3649],{"type":167,"tag":192,"props":3650,"children":3651},{"emptyLinePlaceholder":159},[3652],{"type":173,"value":1425},{"type":167,"tag":192,"props":3654,"children":3656},{"class":194,"line":3655},42,[3657,3661,3665,3669,3673],{"type":167,"tag":192,"props":3658,"children":3659},{"style":257},[3660],{"type":173,"value":2516},{"type":167,"tag":192,"props":3662,"children":3663},{"style":269},[3664],{"type":173,"value":2589},{"type":167,"tag":192,"props":3666,"children":3667},{"style":221},[3668],{"type":173,"value":277},{"type":167,"tag":192,"props":3670,"children":3671},{"style":215},[3672],{"type":173,"value":2105},{"type":167,"tag":192,"props":3674,"children":3675},{"style":263},[3676],{"type":173,"value":1700},{"type":167,"tag":192,"props":3678,"children":3680},{"class":194,"line":3679},43,[3681],{"type":167,"tag":192,"props":3682,"children":3683},{"style":221},[3684],{"type":173,"value":916},{"type":167,"tag":168,"props":3686,"children":3688},{"id":3687},"工具函数",[3689],{"type":173,"value":3687},{"type":167,"tag":175,"props":3691,"children":3692},{},[3693],{"type":173,"value":3694},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":167,"tag":181,"props":3696,"children":3698},{"className":183,"code":3697,"language":185,"meta":160,"style":160},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3699],{"type":167,"tag":188,"props":3700,"children":3701},{"__ignoreMap":160},[3702,3730,3793,3834,3845],{"type":167,"tag":192,"props":3703,"children":3704},{"class":194,"line":195},[3705,3709,3713,3717,3722,3726],{"type":167,"tag":192,"props":3706,"children":3707},{"style":209},[3708],{"type":173,"value":212},{"type":167,"tag":192,"props":3710,"children":3711},{"style":215},[3712],{"type":173,"value":3573},{"type":167,"tag":192,"props":3714,"children":3715},{"style":221},[3716],{"type":173,"value":224},{"type":167,"tag":192,"props":3718,"children":3719},{"style":227},[3720],{"type":173,"value":3721},"arr",{"type":167,"tag":192,"props":3723,"children":3724},{"style":221},[3725],{"type":173,"value":245},{"type":167,"tag":192,"props":3727,"children":3728},{"style":221},[3729],{"type":173,"value":250},{"type":167,"tag":192,"props":3731,"children":3732},{"class":194,"line":205},[3733,3737,3742,3746,3751,3755,3759,3763,3768,3772,3777,3781,3785,3789],{"type":167,"tag":192,"props":3734,"children":3735},{"style":257},[3736],{"type":173,"value":2516},{"type":167,"tag":192,"props":3738,"children":3739},{"style":269},[3740],{"type":173,"value":3741}," arr",{"type":167,"tag":192,"props":3743,"children":3744},{"style":221},[3745],{"type":173,"value":277},{"type":167,"tag":192,"props":3747,"children":3748},{"style":215},[3749],{"type":173,"value":3750},"filter",{"type":167,"tag":192,"props":3752,"children":3753},{"style":263},[3754],{"type":173,"value":224},{"type":167,"tag":192,"props":3756,"children":3757},{"style":209},[3758],{"type":173,"value":212},{"type":167,"tag":192,"props":3760,"children":3761},{"style":221},[3762],{"type":173,"value":224},{"type":167,"tag":192,"props":3764,"children":3765},{"style":227},[3766],{"type":173,"value":3767},"v",{"type":167,"tag":192,"props":3769,"children":3770},{"style":221},[3771],{"type":173,"value":235},{"type":167,"tag":192,"props":3773,"children":3774},{"style":227},[3775],{"type":173,"value":3776}," i",{"type":167,"tag":192,"props":3778,"children":3779},{"style":221},[3780],{"type":173,"value":235},{"type":167,"tag":192,"props":3782,"children":3783},{"style":227},[3784],{"type":173,"value":2154},{"type":167,"tag":192,"props":3786,"children":3787},{"style":221},[3788],{"type":173,"value":245},{"type":167,"tag":192,"props":3790,"children":3791},{"style":221},[3792],{"type":173,"value":250},{"type":167,"tag":192,"props":3794,"children":3795},{"class":194,"line":253},[3796,3800,3804,3808,3813,3817,3821,3825,3829],{"type":167,"tag":192,"props":3797,"children":3798},{"style":257},[3799],{"type":173,"value":1562},{"type":167,"tag":192,"props":3801,"children":3802},{"style":269},[3803],{"type":173,"value":2154},{"type":167,"tag":192,"props":3805,"children":3806},{"style":221},[3807],{"type":173,"value":277},{"type":167,"tag":192,"props":3809,"children":3810},{"style":215},[3811],{"type":173,"value":3812},"indexOf",{"type":167,"tag":192,"props":3814,"children":3815},{"style":263},[3816],{"type":173,"value":224},{"type":167,"tag":192,"props":3818,"children":3819},{"style":269},[3820],{"type":173,"value":3767},{"type":167,"tag":192,"props":3822,"children":3823},{"style":263},[3824],{"type":173,"value":678},{"type":167,"tag":192,"props":3826,"children":3827},{"style":754},[3828],{"type":173,"value":1134},{"type":167,"tag":192,"props":3830,"children":3831},{"style":269},[3832],{"type":173,"value":3833}," i\n",{"type":167,"tag":192,"props":3835,"children":3836},{"class":194,"line":303},[3837,3841],{"type":167,"tag":192,"props":3838,"children":3839},{"style":221},[3840],{"type":173,"value":1198},{"type":167,"tag":192,"props":3842,"children":3843},{"style":263},[3844],{"type":173,"value":384},{"type":167,"tag":192,"props":3846,"children":3847},{"class":194,"line":355},[3848],{"type":167,"tag":192,"props":3849,"children":3850},{"style":221},[3851],{"type":173,"value":916},{"type":167,"tag":175,"props":3853,"children":3854},{},[3855],{"type":173,"value":3856},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":167,"tag":181,"props":3858,"children":3860},{"className":183,"code":3859,"language":185,"meta":160,"style":160},"const getUUID = () => Math.random().toString(16).substr(2)\n",[3861],{"type":167,"tag":188,"props":3862,"children":3863},{"__ignoreMap":160},[3864],{"type":167,"tag":192,"props":3865,"children":3866},{"class":194,"line":195},[3867,3872,3878,3882,3887,3892,3897,3901,3906,3910,3914,3919,3923,3928,3932,3936,3941,3945,3950],{"type":167,"tag":192,"props":3868,"children":3869},{"style":209},[3870],{"type":173,"value":3871},"const",{"type":167,"tag":192,"props":3873,"children":3875},{"style":3874},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[3876],{"type":173,"value":3877}," getUUID",{"type":167,"tag":192,"props":3879,"children":3880},{"style":754},[3881],{"type":173,"value":757},{"type":167,"tag":192,"props":3883,"children":3884},{"style":221},[3885],{"type":173,"value":3886}," ()",{"type":167,"tag":192,"props":3888,"children":3889},{"style":209},[3890],{"type":173,"value":3891}," =>",{"type":167,"tag":192,"props":3893,"children":3894},{"style":269},[3895],{"type":173,"value":3896}," Math",{"type":167,"tag":192,"props":3898,"children":3899},{"style":221},[3900],{"type":173,"value":277},{"type":167,"tag":192,"props":3902,"children":3903},{"style":215},[3904],{"type":173,"value":3905},"random",{"type":167,"tag":192,"props":3907,"children":3908},{"style":269},[3909],{"type":173,"value":1675},{"type":167,"tag":192,"props":3911,"children":3912},{"style":221},[3913],{"type":173,"value":277},{"type":167,"tag":192,"props":3915,"children":3916},{"style":215},[3917],{"type":173,"value":3918},"toString",{"type":167,"tag":192,"props":3920,"children":3921},{"style":269},[3922],{"type":173,"value":224},{"type":167,"tag":192,"props":3924,"children":3925},{"style":1783},[3926],{"type":173,"value":3927},"16",{"type":167,"tag":192,"props":3929,"children":3930},{"style":269},[3931],{"type":173,"value":245},{"type":167,"tag":192,"props":3933,"children":3934},{"style":221},[3935],{"type":173,"value":277},{"type":167,"tag":192,"props":3937,"children":3938},{"style":215},[3939],{"type":173,"value":3940},"substr",{"type":167,"tag":192,"props":3942,"children":3943},{"style":269},[3944],{"type":173,"value":224},{"type":167,"tag":192,"props":3946,"children":3947},{"style":1783},[3948],{"type":173,"value":3949},"2",{"type":167,"tag":192,"props":3951,"children":3952},{"style":269},[3953],{"type":173,"value":384},{"type":167,"tag":168,"props":3955,"children":3957},{"id":3956},"考虑的点",[3958],{"type":173,"value":3956},{"type":167,"tag":175,"props":3960,"children":3961},{},[3962],{"type":173,"value":3963},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":167,"tag":3965,"props":3966,"children":3967},"ul",{},[3968,3974,3979,3984],{"type":167,"tag":3969,"props":3970,"children":3971},"li",{},[3972],{"type":173,"value":3973},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":167,"tag":3969,"props":3975,"children":3976},{},[3977],{"type":173,"value":3978},"支持本地符号路径吗？支持网络路径吗？",{"type":167,"tag":3969,"props":3980,"children":3981},{},[3982],{"type":173,"value":3983},"如何控制包的大小？",{"type":167,"tag":3969,"props":3985,"children":3986},{},[3987],{"type":173,"value":3988},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":167,"tag":175,"props":3990,"children":3991},{},[3992],{"type":173,"value":3993},"也注意到一些有意思的问题：",{"type":167,"tag":3965,"props":3995,"children":3996},{},[3997,4009,4021],{"type":167,"tag":3969,"props":3998,"children":3999},{},[4000,4002],{"type":173,"value":4001},"Windows，删除正在监听的文件夹，",{"type":167,"tag":923,"props":4003,"children":4006},{"href":4004,"rel":4005},"https://github.com/nodejs/node/issues/31702",[927],[4007],{"type":173,"value":4008},"会发生什么事情？",{"type":167,"tag":3969,"props":4010,"children":4011},{},[4012,4014],{"type":173,"value":4013},"Linux，单个进程能操作的文件数量有上限，",{"type":167,"tag":923,"props":4015,"children":4018},{"href":4016,"rel":4017},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[927],[4019],{"type":173,"value":4020},"该怎么解决？",{"type":167,"tag":3969,"props":4022,"children":4023},{},[4024,4026],{"type":173,"value":4025},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":167,"tag":923,"props":4027,"children":4030},{"href":4028,"rel":4029},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[927],[4031],{"type":173,"value":4032},"怎么处理呢？",{"type":167,"tag":168,"props":4034,"children":4036},{"id":4035},"题外话",[4037],{"type":173,"value":4035},{"type":167,"tag":4039,"props":4040,"children":4043},"l-link",{"label":4041,"source":4042},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":167,"tag":175,"props":4045,"children":4046},{},[4047],{"type":173,"value":4048},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":167,"tag":168,"props":4050,"children":4052},{"id":4051},"其它资料",[4053],{"type":173,"value":4051},{"type":167,"tag":175,"props":4055,"children":4056},{},[4057],{"type":173,"value":4058},"相关类库：",{"type":167,"tag":3965,"props":4060,"children":4061},{},[4062,4071,4081],{"type":167,"tag":3969,"props":4063,"children":4064},{},[4065],{"type":167,"tag":923,"props":4066,"children":4069},{"href":4067,"rel":4068},"https://www.npmjs.com/package/watcher",[927],[4070],{"type":173,"value":1805},{"type":167,"tag":3969,"props":4072,"children":4073},{},[4074],{"type":167,"tag":923,"props":4075,"children":4078},{"href":4076,"rel":4077},"https://github.com/paulmillr/chokidar",[927],[4079],{"type":173,"value":4080},"chokidar",{"type":167,"tag":3969,"props":4082,"children":4083},{},[4084],{"type":167,"tag":923,"props":4085,"children":4088},{"href":4086,"rel":4087},"https://github.com/Axosoft/nsfw",[927],[4089],{"type":173,"value":4090},"nsfw",{"type":167,"tag":175,"props":4092,"children":4093},{},[4094],{"type":173,"value":4095},"推荐阅读：",{"type":167,"tag":3965,"props":4097,"children":4098},{},[4099,4109],{"type":167,"tag":3969,"props":4100,"children":4101},{},[4102],{"type":167,"tag":923,"props":4103,"children":4106},{"href":4104,"rel":4105},"https://juejin.cn/post/7000262974430511117",[927],[4107],{"type":173,"value":4108},"《node-watch、Chokidar封装思路解析》",{"type":167,"tag":3969,"props":4110,"children":4111},{},[4112],{"type":167,"tag":923,"props":4113,"children":4116},{"href":4114,"rel":4115},"https://www.jianshu.com/p/09dae09457fa",[927],[4117],{"type":173,"value":4118},"《如何利用 Nodejs 监听文件夹》",{"type":167,"tag":4120,"props":4121,"children":4122},"style",{},[4123],{"type":173,"value":4124},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":160,"searchDepth":205,"depth":205,"links":4126},[4127,4128,4129,4130,4131],{"id":170,"depth":205,"text":170},{"id":3687,"depth":205,"text":3687},{"id":3956,"depth":205,"text":3956},{"id":4035,"depth":205,"text":4035},{"id":4051,"depth":205,"text":4051},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","8.source-code/_node/node-watch","md",[4139,4143],{"_path":4140,"title":4141,"description":4142},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4144,"title":4145,"description":4146},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",1742348697319]