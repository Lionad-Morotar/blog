[{"data":1,"prerenderedAt":4379},["Reactive",2],{"navigation":3,"/source-code/_node/node-watch":389,"/source-code/_node/node-watch-surround":4371},[4,32,83,99,126,132,138,372,378,384],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🌃 长夜梦","/flows/long-night-dream",{"title":15,"_path":16},"🌌 万物联结与幸福感","/flows/everything",{"title":18,"_path":19},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":21,"_path":22},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":24,"_path":25},"🌧️ 我的腼腆","/flows/shy",{"title":27,"_path":28},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":30,"_path":31},"📝 心流归档","/flows/fold",{"title":33,"_path":34,"children":35},"技术博客 / Coder","/articles",[36,38,41,44,47,50,53,56,59,62,65,68,71,74,77,80],{"title":37,"_path":34},"🦁 为什么我要写博客",{"title":39,"_path":40},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":42,"_path":43},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":45,"_path":46},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":48,"_path":49},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":51,"_path":52},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":54,"_path":55},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":57,"_path":58},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":60,"_path":61},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":63,"_path":64},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":66,"_path":67},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":69,"_path":70},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":72,"_path":73},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":75,"_path":76},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":78,"_path":79},"🚝 四十二篇系列","/articles/fourty-two",{"title":81,"_path":82},"📝 技术博客归档","/articles/fold",{"title":84,"_path":85,"children":86},"造物 / Make","/tools",[87,90,93,96],{"title":88,"_path":89},"🌐 AnySort","/tools/anysort",{"title":91,"_path":92},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":94,"_path":95},"👓 Crapto","/tools/crypto-inline",{"title":97,"_path":98},"🖨️ any-to-base64","/tools/any-to-base64",{"title":100,"_path":101,"children":102},"吉他剧场 / Music","/music",[103,105,108,111,114,117,120,123],{"title":104,"_path":101},"🎸 FingerStyle！",{"title":106,"_path":107},"🌬️ 等待的风","/music/wind",{"title":109,"_path":110},"💕 约定的海洋","/music/ocean",{"title":112,"_path":113},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":115,"_path":116},"🌏 残酷天使的行动纲领","/music/eva",{"title":118,"_path":119},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":121,"_path":122},"🍷 Wu Wei","/music/wu-wei",{"title":124,"_path":125},"🌅 无题","/music/untitled",{"title":127,"_path":128,"children":129},"画点什么 / Paint","/paint",[130],{"title":131,"_path":128},"🚧 正在施工",{"title":133,"_path":134,"children":135},"知识地图 / Maps","/maps",[136],{"title":137,"_path":134},"🏁 知识地图",{"title":139,"_path":140,"children":141},"零散的笔记 / Gists","/gists",[142,144,147,150,153,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369],{"title":143,"_path":140},"🧊 Gists",{"title":145,"_path":146},"网站的可访问性","/gists/accessibility",{"title":148,"_path":149},"Bit","/gists/bit",{"title":151,"_path":152},"图片模糊","/gists/blur",{"title":154,"_path":155},"渲染相关笔记","/gists/c4d",{"title":157,"_path":158},"CDN 问题记录","/gists/cdn",{"title":160,"_path":161},"消毒剂","/gists/cleaner",{"title":163,"_path":164},"Windows Command","/gists/cmd",{"title":166,"_path":167},"Command","/gists/command",{"title":169,"_path":170},"复杂科学","/gists/complexity-science",{"title":172,"_path":173},"宇宙","/gists/cosmos",{"title":175,"_path":176},"C++","/gists/cpp",{"title":178,"_path":179},"Data Structure","/gists/data-structure",{"title":181,"_path":182},"DEPRESSION","/gists/depression",{"title":184,"_path":185},"设计模式","/gists/design-patterns",{"title":187,"_path":188},"Developer Experience","/gists/developer-experience",{"title":190,"_path":191},"Device Metrics","/gists/device-metrix",{"title":193,"_path":194},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":196,"_path":197},"正则表达式","/gists/eegex",{"title":199,"_path":200},"Emoji","/gists/emoji",{"title":202,"_path":203},"工程","/gists/engineering",{"title":205,"_path":206},"熵","/gists/entropy",{"title":208,"_path":209},"Environment","/gists/environment",{"title":211,"_path":212},"Erlang","/gists/erlang",{"title":214,"_path":215},"逃离塔克夫","/gists/escape-from-tarkov",{"title":217,"_path":218},"ESNext (ES6-ES11)","/gists/esnext",{"title":220,"_path":221},"Eval！","/gists/eval",{"title":223,"_path":224},"Flutter","/gists/flutter",{"title":226,"_path":227},"字体","/gists/font",{"title":229,"_path":230},"JS 函数式编程","/gists/functional",{"title":232,"_path":233},"Google C++ Standard","/gists/google-cpp-standard",{"title":235,"_path":236},"双向链接完全体","/gists/graph",{"title":238,"_path":239},"Hardwares","/gists/hardwares",{"title":241,"_path":242},"哈希冲突","/gists/hash-collision",{"title":244,"_path":245},"信息设计","/gists/information-design",{"title":247,"_path":248},"InstantPage","/gists/instant.page",{"title":250,"_path":251},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":253,"_path":254},"KVStore","/gists/key-value-db",{"title":256,"_path":257},"Kubernetes","/gists/kubernetes",{"title":259,"_path":260},"Makefile","/gists/makefile",{"title":262,"_path":263},"Markdown Inline Style","/gists/markdown-nice",{"title":265,"_path":266},"小程序","/gists/miniapp",{"title":268,"_path":269},"减小页面快照体积","/gists/minify-html",{"title":271,"_path":272},"mklink","/gists/mklink",{"title":274,"_path":275},"Mock","/gists/mock",{"title":277,"_path":278},"多端应用","/gists/multy-end-app",{"title":280,"_path":281},"神经科学","/gists/neuroscience",{"title":283,"_path":284},"OO","/gists/oo",{"title":286,"_path":287},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":289,"_path":290},"人物","/gists/person",{"title":292,"_path":293},"PInvoke","/gists/pinvoke",{"title":295,"_path":296},"像素","/gists/pixel",{"title":298,"_path":299},"PowerShell","/gists/powershell",{"title":301,"_path":302},"量子","/gists/quantum",{"title":304,"_path":305},"保持好奇心","/gists/questions",{"title":307,"_path":308},"React Native","/gists/react-native",{"title":310,"_path":311},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":313,"_path":314},"SEO","/gists/seo",{"title":316,"_path":317},"Shader","/gists/shader",{"title":319,"_path":320},"Shape Up","/gists/shape-up",{"title":322,"_path":323},"睡觉","/gists/sleep",{"title":325,"_path":326},"States","/gists/states",{"title":328,"_path":329},"Storage","/gists/storage",{"title":331,"_path":332},"音视频流处理","/gists/stream-cli",{"title":334,"_path":335},"Symbol","/gists/symbol",{"title":337,"_path":338},"系统论","/gists/systems-theory",{"title":340,"_path":341},"Taro","/gists/taro",{"title":343,"_path":344},"任务切片","/gists/task-slice",{"title":346,"_path":347},"技术偏好","/gists/tech-dudge",{"title":349,"_path":350},"Untitled","/gists/untitled",{"title":352,"_path":353},"可变字体","/gists/variable-font",{"title":355,"_path":356},"视觉错觉","/gists/visual-illusion",{"title":358,"_path":359},"SS(SSR)","/gists/vpn",{"title":361,"_path":362},"VS Code 插件开发","/gists/vscode-plugin",{"title":364,"_path":365},"Web Components","/gists/web-components",{"title":367,"_path":368},"Windows","/gists/windows",{"title":370,"_path":371},"查缺补漏","/gists/wrong",{"title":373,"_path":374,"children":375},"代码笔记 / Gists","/source-code",[376],{"title":377,"_path":374},"🚄 代码笔记",{"title":379,"_path":380,"children":381},"我 / Abount","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"title":385,"_path":386,"children":387},"todo","/todo",[388],{"title":385,"_path":386},{"_path":390,"_dir":391,"_draft":392,"_partial":393,"_locale":394,"title":395,"description":396,"body":397,"_type":4366,"_id":4367,"_source":4368,"_file":4369,"_extension":4370},"/source-code/_node/node-watch","_node",false,true,"","node-watch","node-watch 是在 fs.watch 的基础上封装而来的库，能监听文件变化",{"type":398,"children":399,"toc":4359},"root",[400,408,414,1151,1167,1444,1449,1626,1631,2301,2306,2763,2768,3919,3924,3929,4086,4091,4188,4193,4198,4223,4228,4267,4272,4278,4283,4288,4293,4325,4330,4353],{"type":401,"tag":402,"props":403,"children":405},"element","h2",{"id":404},"实现",[406],{"type":407,"value":404},"text",{"type":401,"tag":409,"props":410,"children":411},"p",{},[412],{"type":407,"value":413},"从提交历史来看，最初的提交的代码非常简单，几乎是只多了一个递归监听功能。在 normalizeCall 函数中使用计时函数，把回调往后延迟了 100ms，防止短暂时间内同一个文件多次修改（比方说某些编辑器保存文件时会先生成一个临时文件）。",{"type":401,"tag":415,"props":416,"children":420},"pre",{"className":417,"code":418,"language":419,"meta":394,"style":394},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\nfunction watch(dir, cb) {\n  if (is.File(dir)) {\n    fs.watchFile(dir, function(err) {\n      normalizeCall(cb, dir)\n    })\n    return\n  }\n  if (is.Directory(dir)) {\n    fs.watch(dir, function(err, fname) {\n      normalizeCall(cb,  \n        path.join(dir, fname)\n      )\n    })\n    fs.readdir(dir, function(err, files) {\n      if (err) throw err\n      files.forEach(function(n) { \n        var file = path.join(dir, n)\n        if ( is.Directory(file) ) {\n          watch(file, cb)\n        }\n      })\n    })     \n  }\n} \n","js",[421],{"type":401,"tag":422,"props":423,"children":424},"code",{"__ignoreMap":394},[425,437,485,535,587,619,632,641,650,691,749,774,812,821,833,891,923,972,1026,1070,1099,1108,1121,1134,1142],{"type":401,"tag":426,"props":427,"children":430},"span",{"class":428,"line":429},"line",1,[431],{"type":401,"tag":426,"props":432,"children":434},{"style":433},"--shiki-light:#90A4AE;--shiki-default:#6A737D;--shiki-dark:#6A737D;--shiki-sepia:#88846F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[435],{"type":407,"value":436},"//  https://github.com/yuanchuan/node-watch/commit/d2d8e2db4b771f918d67d261708752d8eb5c17b3\n",{"type":401,"tag":426,"props":438,"children":440},{"class":428,"line":439},2,[441,447,453,459,465,470,475,480],{"type":401,"tag":426,"props":442,"children":444},{"style":443},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[445],{"type":407,"value":446},"function",{"type":401,"tag":426,"props":448,"children":450},{"style":449},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[451],{"type":407,"value":452}," watch",{"type":401,"tag":426,"props":454,"children":456},{"style":455},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[457],{"type":407,"value":458},"(",{"type":401,"tag":426,"props":460,"children":462},{"style":461},"--shiki-light:#90A4AE;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#FD971F;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[463],{"type":407,"value":464},"dir",{"type":401,"tag":426,"props":466,"children":467},{"style":455},[468],{"type":407,"value":469},",",{"type":401,"tag":426,"props":471,"children":472},{"style":461},[473],{"type":407,"value":474}," cb",{"type":401,"tag":426,"props":476,"children":477},{"style":455},[478],{"type":407,"value":479},")",{"type":401,"tag":426,"props":481,"children":482},{"style":455},[483],{"type":407,"value":484}," {\n",{"type":401,"tag":426,"props":486,"children":488},{"class":428,"line":487},3,[489,495,501,507,512,517,521,525,530],{"type":401,"tag":426,"props":490,"children":492},{"style":491},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672;--shiki-light-font-style:italic;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:inherit",[493],{"type":407,"value":494},"  if",{"type":401,"tag":426,"props":496,"children":498},{"style":497},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[499],{"type":407,"value":500}," (",{"type":401,"tag":426,"props":502,"children":504},{"style":503},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[505],{"type":407,"value":506},"is",{"type":401,"tag":426,"props":508,"children":509},{"style":455},[510],{"type":407,"value":511},".",{"type":401,"tag":426,"props":513,"children":514},{"style":449},[515],{"type":407,"value":516},"File",{"type":401,"tag":426,"props":518,"children":519},{"style":497},[520],{"type":407,"value":458},{"type":401,"tag":426,"props":522,"children":523},{"style":503},[524],{"type":407,"value":464},{"type":401,"tag":426,"props":526,"children":527},{"style":497},[528],{"type":407,"value":529},")) ",{"type":401,"tag":426,"props":531,"children":532},{"style":455},[533],{"type":407,"value":534},"{\n",{"type":401,"tag":426,"props":536,"children":538},{"class":428,"line":537},4,[539,544,548,553,557,561,565,570,574,579,583],{"type":401,"tag":426,"props":540,"children":541},{"style":503},[542],{"type":407,"value":543},"    fs",{"type":401,"tag":426,"props":545,"children":546},{"style":455},[547],{"type":407,"value":511},{"type":401,"tag":426,"props":549,"children":550},{"style":449},[551],{"type":407,"value":552},"watchFile",{"type":401,"tag":426,"props":554,"children":555},{"style":497},[556],{"type":407,"value":458},{"type":401,"tag":426,"props":558,"children":559},{"style":503},[560],{"type":407,"value":464},{"type":401,"tag":426,"props":562,"children":563},{"style":455},[564],{"type":407,"value":469},{"type":401,"tag":426,"props":566,"children":567},{"style":443},[568],{"type":407,"value":569}," function",{"type":401,"tag":426,"props":571,"children":572},{"style":455},[573],{"type":407,"value":458},{"type":401,"tag":426,"props":575,"children":576},{"style":461},[577],{"type":407,"value":578},"err",{"type":401,"tag":426,"props":580,"children":581},{"style":455},[582],{"type":407,"value":479},{"type":401,"tag":426,"props":584,"children":585},{"style":455},[586],{"type":407,"value":484},{"type":401,"tag":426,"props":588,"children":590},{"class":428,"line":589},5,[591,596,600,605,609,614],{"type":401,"tag":426,"props":592,"children":593},{"style":449},[594],{"type":407,"value":595},"      normalizeCall",{"type":401,"tag":426,"props":597,"children":598},{"style":497},[599],{"type":407,"value":458},{"type":401,"tag":426,"props":601,"children":602},{"style":503},[603],{"type":407,"value":604},"cb",{"type":401,"tag":426,"props":606,"children":607},{"style":455},[608],{"type":407,"value":469},{"type":401,"tag":426,"props":610,"children":611},{"style":503},[612],{"type":407,"value":613}," dir",{"type":401,"tag":426,"props":615,"children":616},{"style":497},[617],{"type":407,"value":618},")\n",{"type":401,"tag":426,"props":620,"children":622},{"class":428,"line":621},6,[623,628],{"type":401,"tag":426,"props":624,"children":625},{"style":455},[626],{"type":407,"value":627},"    }",{"type":401,"tag":426,"props":629,"children":630},{"style":497},[631],{"type":407,"value":618},{"type":401,"tag":426,"props":633,"children":635},{"class":428,"line":634},7,[636],{"type":401,"tag":426,"props":637,"children":638},{"style":491},[639],{"type":407,"value":640},"    return\n",{"type":401,"tag":426,"props":642,"children":644},{"class":428,"line":643},8,[645],{"type":401,"tag":426,"props":646,"children":647},{"style":455},[648],{"type":407,"value":649},"  }\n",{"type":401,"tag":426,"props":651,"children":653},{"class":428,"line":652},9,[654,658,662,666,670,675,679,683,687],{"type":401,"tag":426,"props":655,"children":656},{"style":491},[657],{"type":407,"value":494},{"type":401,"tag":426,"props":659,"children":660},{"style":497},[661],{"type":407,"value":500},{"type":401,"tag":426,"props":663,"children":664},{"style":503},[665],{"type":407,"value":506},{"type":401,"tag":426,"props":667,"children":668},{"style":455},[669],{"type":407,"value":511},{"type":401,"tag":426,"props":671,"children":672},{"style":449},[673],{"type":407,"value":674},"Directory",{"type":401,"tag":426,"props":676,"children":677},{"style":497},[678],{"type":407,"value":458},{"type":401,"tag":426,"props":680,"children":681},{"style":503},[682],{"type":407,"value":464},{"type":401,"tag":426,"props":684,"children":685},{"style":497},[686],{"type":407,"value":529},{"type":401,"tag":426,"props":688,"children":689},{"style":455},[690],{"type":407,"value":534},{"type":401,"tag":426,"props":692,"children":694},{"class":428,"line":693},10,[695,699,703,708,712,716,720,724,728,732,736,741,745],{"type":401,"tag":426,"props":696,"children":697},{"style":503},[698],{"type":407,"value":543},{"type":401,"tag":426,"props":700,"children":701},{"style":455},[702],{"type":407,"value":511},{"type":401,"tag":426,"props":704,"children":705},{"style":449},[706],{"type":407,"value":707},"watch",{"type":401,"tag":426,"props":709,"children":710},{"style":497},[711],{"type":407,"value":458},{"type":401,"tag":426,"props":713,"children":714},{"style":503},[715],{"type":407,"value":464},{"type":401,"tag":426,"props":717,"children":718},{"style":455},[719],{"type":407,"value":469},{"type":401,"tag":426,"props":721,"children":722},{"style":443},[723],{"type":407,"value":569},{"type":401,"tag":426,"props":725,"children":726},{"style":455},[727],{"type":407,"value":458},{"type":401,"tag":426,"props":729,"children":730},{"style":461},[731],{"type":407,"value":578},{"type":401,"tag":426,"props":733,"children":734},{"style":455},[735],{"type":407,"value":469},{"type":401,"tag":426,"props":737,"children":738},{"style":461},[739],{"type":407,"value":740}," fname",{"type":401,"tag":426,"props":742,"children":743},{"style":455},[744],{"type":407,"value":479},{"type":401,"tag":426,"props":746,"children":747},{"style":455},[748],{"type":407,"value":484},{"type":401,"tag":426,"props":750,"children":752},{"class":428,"line":751},11,[753,757,761,765,769],{"type":401,"tag":426,"props":754,"children":755},{"style":449},[756],{"type":407,"value":595},{"type":401,"tag":426,"props":758,"children":759},{"style":497},[760],{"type":407,"value":458},{"type":401,"tag":426,"props":762,"children":763},{"style":503},[764],{"type":407,"value":604},{"type":401,"tag":426,"props":766,"children":767},{"style":455},[768],{"type":407,"value":469},{"type":401,"tag":426,"props":770,"children":771},{"style":497},[772],{"type":407,"value":773},"  \n",{"type":401,"tag":426,"props":775,"children":777},{"class":428,"line":776},12,[778,783,787,792,796,800,804,808],{"type":401,"tag":426,"props":779,"children":780},{"style":503},[781],{"type":407,"value":782},"        path",{"type":401,"tag":426,"props":784,"children":785},{"style":455},[786],{"type":407,"value":511},{"type":401,"tag":426,"props":788,"children":789},{"style":449},[790],{"type":407,"value":791},"join",{"type":401,"tag":426,"props":793,"children":794},{"style":497},[795],{"type":407,"value":458},{"type":401,"tag":426,"props":797,"children":798},{"style":503},[799],{"type":407,"value":464},{"type":401,"tag":426,"props":801,"children":802},{"style":455},[803],{"type":407,"value":469},{"type":401,"tag":426,"props":805,"children":806},{"style":503},[807],{"type":407,"value":740},{"type":401,"tag":426,"props":809,"children":810},{"style":497},[811],{"type":407,"value":618},{"type":401,"tag":426,"props":813,"children":815},{"class":428,"line":814},13,[816],{"type":401,"tag":426,"props":817,"children":818},{"style":497},[819],{"type":407,"value":820},"      )\n",{"type":401,"tag":426,"props":822,"children":824},{"class":428,"line":823},14,[825,829],{"type":401,"tag":426,"props":826,"children":827},{"style":455},[828],{"type":407,"value":627},{"type":401,"tag":426,"props":830,"children":831},{"style":497},[832],{"type":407,"value":618},{"type":401,"tag":426,"props":834,"children":836},{"class":428,"line":835},15,[837,841,845,850,854,858,862,866,870,874,878,883,887],{"type":401,"tag":426,"props":838,"children":839},{"style":503},[840],{"type":407,"value":543},{"type":401,"tag":426,"props":842,"children":843},{"style":455},[844],{"type":407,"value":511},{"type":401,"tag":426,"props":846,"children":847},{"style":449},[848],{"type":407,"value":849},"readdir",{"type":401,"tag":426,"props":851,"children":852},{"style":497},[853],{"type":407,"value":458},{"type":401,"tag":426,"props":855,"children":856},{"style":503},[857],{"type":407,"value":464},{"type":401,"tag":426,"props":859,"children":860},{"style":455},[861],{"type":407,"value":469},{"type":401,"tag":426,"props":863,"children":864},{"style":443},[865],{"type":407,"value":569},{"type":401,"tag":426,"props":867,"children":868},{"style":455},[869],{"type":407,"value":458},{"type":401,"tag":426,"props":871,"children":872},{"style":461},[873],{"type":407,"value":578},{"type":401,"tag":426,"props":875,"children":876},{"style":455},[877],{"type":407,"value":469},{"type":401,"tag":426,"props":879,"children":880},{"style":461},[881],{"type":407,"value":882}," files",{"type":401,"tag":426,"props":884,"children":885},{"style":455},[886],{"type":407,"value":479},{"type":401,"tag":426,"props":888,"children":889},{"style":455},[890],{"type":407,"value":484},{"type":401,"tag":426,"props":892,"children":894},{"class":428,"line":893},16,[895,900,904,908,913,918],{"type":401,"tag":426,"props":896,"children":897},{"style":491},[898],{"type":407,"value":899},"      if",{"type":401,"tag":426,"props":901,"children":902},{"style":497},[903],{"type":407,"value":500},{"type":401,"tag":426,"props":905,"children":906},{"style":503},[907],{"type":407,"value":578},{"type":401,"tag":426,"props":909,"children":910},{"style":497},[911],{"type":407,"value":912},") ",{"type":401,"tag":426,"props":914,"children":915},{"style":491},[916],{"type":407,"value":917},"throw",{"type":401,"tag":426,"props":919,"children":920},{"style":503},[921],{"type":407,"value":922}," err\n",{"type":401,"tag":426,"props":924,"children":926},{"class":428,"line":925},17,[927,932,936,941,945,949,953,958,962,967],{"type":401,"tag":426,"props":928,"children":929},{"style":503},[930],{"type":407,"value":931},"      files",{"type":401,"tag":426,"props":933,"children":934},{"style":455},[935],{"type":407,"value":511},{"type":401,"tag":426,"props":937,"children":938},{"style":449},[939],{"type":407,"value":940},"forEach",{"type":401,"tag":426,"props":942,"children":943},{"style":497},[944],{"type":407,"value":458},{"type":401,"tag":426,"props":946,"children":947},{"style":443},[948],{"type":407,"value":446},{"type":401,"tag":426,"props":950,"children":951},{"style":455},[952],{"type":407,"value":458},{"type":401,"tag":426,"props":954,"children":955},{"style":461},[956],{"type":407,"value":957},"n",{"type":401,"tag":426,"props":959,"children":960},{"style":455},[961],{"type":407,"value":479},{"type":401,"tag":426,"props":963,"children":964},{"style":455},[965],{"type":407,"value":966}," {",{"type":401,"tag":426,"props":968,"children":969},{"style":497},[970],{"type":407,"value":971}," \n",{"type":401,"tag":426,"props":973,"children":975},{"class":428,"line":974},18,[976,981,986,992,997,1001,1005,1009,1013,1017,1022],{"type":401,"tag":426,"props":977,"children":978},{"style":443},[979],{"type":407,"value":980},"        var",{"type":401,"tag":426,"props":982,"children":983},{"style":503},[984],{"type":407,"value":985}," file",{"type":401,"tag":426,"props":987,"children":989},{"style":988},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[990],{"type":407,"value":991}," =",{"type":401,"tag":426,"props":993,"children":994},{"style":503},[995],{"type":407,"value":996}," path",{"type":401,"tag":426,"props":998,"children":999},{"style":455},[1000],{"type":407,"value":511},{"type":401,"tag":426,"props":1002,"children":1003},{"style":449},[1004],{"type":407,"value":791},{"type":401,"tag":426,"props":1006,"children":1007},{"style":497},[1008],{"type":407,"value":458},{"type":401,"tag":426,"props":1010,"children":1011},{"style":503},[1012],{"type":407,"value":464},{"type":401,"tag":426,"props":1014,"children":1015},{"style":455},[1016],{"type":407,"value":469},{"type":401,"tag":426,"props":1018,"children":1019},{"style":503},[1020],{"type":407,"value":1021}," n",{"type":401,"tag":426,"props":1023,"children":1024},{"style":497},[1025],{"type":407,"value":618},{"type":401,"tag":426,"props":1027,"children":1029},{"class":428,"line":1028},19,[1030,1035,1040,1044,1048,1052,1056,1061,1066],{"type":401,"tag":426,"props":1031,"children":1032},{"style":491},[1033],{"type":407,"value":1034},"        if",{"type":401,"tag":426,"props":1036,"children":1037},{"style":497},[1038],{"type":407,"value":1039}," ( ",{"type":401,"tag":426,"props":1041,"children":1042},{"style":503},[1043],{"type":407,"value":506},{"type":401,"tag":426,"props":1045,"children":1046},{"style":455},[1047],{"type":407,"value":511},{"type":401,"tag":426,"props":1049,"children":1050},{"style":449},[1051],{"type":407,"value":674},{"type":401,"tag":426,"props":1053,"children":1054},{"style":497},[1055],{"type":407,"value":458},{"type":401,"tag":426,"props":1057,"children":1058},{"style":503},[1059],{"type":407,"value":1060},"file",{"type":401,"tag":426,"props":1062,"children":1063},{"style":497},[1064],{"type":407,"value":1065},") ) ",{"type":401,"tag":426,"props":1067,"children":1068},{"style":455},[1069],{"type":407,"value":534},{"type":401,"tag":426,"props":1071,"children":1073},{"class":428,"line":1072},20,[1074,1079,1083,1087,1091,1095],{"type":401,"tag":426,"props":1075,"children":1076},{"style":449},[1077],{"type":407,"value":1078},"          watch",{"type":401,"tag":426,"props":1080,"children":1081},{"style":497},[1082],{"type":407,"value":458},{"type":401,"tag":426,"props":1084,"children":1085},{"style":503},[1086],{"type":407,"value":1060},{"type":401,"tag":426,"props":1088,"children":1089},{"style":455},[1090],{"type":407,"value":469},{"type":401,"tag":426,"props":1092,"children":1093},{"style":503},[1094],{"type":407,"value":474},{"type":401,"tag":426,"props":1096,"children":1097},{"style":497},[1098],{"type":407,"value":618},{"type":401,"tag":426,"props":1100,"children":1102},{"class":428,"line":1101},21,[1103],{"type":401,"tag":426,"props":1104,"children":1105},{"style":455},[1106],{"type":407,"value":1107},"        }\n",{"type":401,"tag":426,"props":1109,"children":1111},{"class":428,"line":1110},22,[1112,1117],{"type":401,"tag":426,"props":1113,"children":1114},{"style":455},[1115],{"type":407,"value":1116},"      }",{"type":401,"tag":426,"props":1118,"children":1119},{"style":497},[1120],{"type":407,"value":618},{"type":401,"tag":426,"props":1122,"children":1124},{"class":428,"line":1123},23,[1125,1129],{"type":401,"tag":426,"props":1126,"children":1127},{"style":455},[1128],{"type":407,"value":627},{"type":401,"tag":426,"props":1130,"children":1131},{"style":497},[1132],{"type":407,"value":1133},")     \n",{"type":401,"tag":426,"props":1135,"children":1137},{"class":428,"line":1136},24,[1138],{"type":401,"tag":426,"props":1139,"children":1140},{"style":455},[1141],{"type":407,"value":649},{"type":401,"tag":426,"props":1143,"children":1145},{"class":428,"line":1144},25,[1146],{"type":401,"tag":426,"props":1147,"children":1148},{"style":455},[1149],{"type":407,"value":1150},"}\n",{"type":401,"tag":409,"props":1152,"children":1153},{},[1154,1156,1165],{"type":407,"value":1155},"由于 fs.watchFile 可能导致",{"type":401,"tag":1157,"props":1158,"children":1162},"a",{"href":1159,"rel":1160},"https://nodejs.org/api/fs.html#fs_fs_watchfile_filename_options_listener",[1161],"nofollow",[1163],{"type":407,"value":1164},"高 CPU 负载等问题",{"type":407,"value":1166},"，watch 文件时使用 watch 其父目录作替代，并通过匹配事件参数是否和此文件同名来判断是否要触发回调函数。",{"type":401,"tag":415,"props":1168,"children":1170},{"className":417,"code":1169,"language":419,"meta":394,"style":394},"if (is.file(fpath)) {\n  var parent = path.resolve(fpath, '..')\n  fs.watch(parent, function(evt, fname) {\n    if (path.basename(fpath) === fname) {\n      normalizeCall(fpath, options, cb)\n    }\n  })\n} \n",[1171],{"type":401,"tag":422,"props":1172,"children":1173},{"__ignoreMap":394},[1174,1204,1268,1326,1381,1417,1425,1437],{"type":401,"tag":426,"props":1175,"children":1176},{"class":428,"line":429},[1177,1182,1187,1191,1195,1200],{"type":401,"tag":426,"props":1178,"children":1179},{"style":491},[1180],{"type":407,"value":1181},"if",{"type":401,"tag":426,"props":1183,"children":1184},{"style":503},[1185],{"type":407,"value":1186}," (is",{"type":401,"tag":426,"props":1188,"children":1189},{"style":455},[1190],{"type":407,"value":511},{"type":401,"tag":426,"props":1192,"children":1193},{"style":449},[1194],{"type":407,"value":1060},{"type":401,"tag":426,"props":1196,"children":1197},{"style":503},[1198],{"type":407,"value":1199},"(fpath)) ",{"type":401,"tag":426,"props":1201,"children":1202},{"style":455},[1203],{"type":407,"value":534},{"type":401,"tag":426,"props":1205,"children":1206},{"class":428,"line":439},[1207,1212,1217,1221,1225,1229,1234,1238,1243,1247,1253,1259,1264],{"type":401,"tag":426,"props":1208,"children":1209},{"style":443},[1210],{"type":407,"value":1211},"  var",{"type":401,"tag":426,"props":1213,"children":1214},{"style":503},[1215],{"type":407,"value":1216}," parent",{"type":401,"tag":426,"props":1218,"children":1219},{"style":988},[1220],{"type":407,"value":991},{"type":401,"tag":426,"props":1222,"children":1223},{"style":503},[1224],{"type":407,"value":996},{"type":401,"tag":426,"props":1226,"children":1227},{"style":455},[1228],{"type":407,"value":511},{"type":401,"tag":426,"props":1230,"children":1231},{"style":449},[1232],{"type":407,"value":1233},"resolve",{"type":401,"tag":426,"props":1235,"children":1236},{"style":497},[1237],{"type":407,"value":458},{"type":401,"tag":426,"props":1239,"children":1240},{"style":503},[1241],{"type":407,"value":1242},"fpath",{"type":401,"tag":426,"props":1244,"children":1245},{"style":455},[1246],{"type":407,"value":469},{"type":401,"tag":426,"props":1248,"children":1250},{"style":1249},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1251],{"type":407,"value":1252}," '",{"type":401,"tag":426,"props":1254,"children":1256},{"style":1255},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1257],{"type":407,"value":1258},"..",{"type":401,"tag":426,"props":1260,"children":1261},{"style":1249},[1262],{"type":407,"value":1263},"'",{"type":401,"tag":426,"props":1265,"children":1266},{"style":497},[1267],{"type":407,"value":618},{"type":401,"tag":426,"props":1269,"children":1270},{"class":428,"line":487},[1271,1276,1280,1284,1288,1293,1297,1301,1305,1310,1314,1318,1322],{"type":401,"tag":426,"props":1272,"children":1273},{"style":503},[1274],{"type":407,"value":1275},"  fs",{"type":401,"tag":426,"props":1277,"children":1278},{"style":455},[1279],{"type":407,"value":511},{"type":401,"tag":426,"props":1281,"children":1282},{"style":449},[1283],{"type":407,"value":707},{"type":401,"tag":426,"props":1285,"children":1286},{"style":497},[1287],{"type":407,"value":458},{"type":401,"tag":426,"props":1289,"children":1290},{"style":503},[1291],{"type":407,"value":1292},"parent",{"type":401,"tag":426,"props":1294,"children":1295},{"style":455},[1296],{"type":407,"value":469},{"type":401,"tag":426,"props":1298,"children":1299},{"style":443},[1300],{"type":407,"value":569},{"type":401,"tag":426,"props":1302,"children":1303},{"style":455},[1304],{"type":407,"value":458},{"type":401,"tag":426,"props":1306,"children":1307},{"style":461},[1308],{"type":407,"value":1309},"evt",{"type":401,"tag":426,"props":1311,"children":1312},{"style":455},[1313],{"type":407,"value":469},{"type":401,"tag":426,"props":1315,"children":1316},{"style":461},[1317],{"type":407,"value":740},{"type":401,"tag":426,"props":1319,"children":1320},{"style":455},[1321],{"type":407,"value":479},{"type":401,"tag":426,"props":1323,"children":1324},{"style":455},[1325],{"type":407,"value":484},{"type":401,"tag":426,"props":1327,"children":1328},{"class":428,"line":537},[1329,1334,1338,1343,1347,1352,1356,1360,1364,1369,1373,1377],{"type":401,"tag":426,"props":1330,"children":1331},{"style":491},[1332],{"type":407,"value":1333},"    if",{"type":401,"tag":426,"props":1335,"children":1336},{"style":497},[1337],{"type":407,"value":500},{"type":401,"tag":426,"props":1339,"children":1340},{"style":503},[1341],{"type":407,"value":1342},"path",{"type":401,"tag":426,"props":1344,"children":1345},{"style":455},[1346],{"type":407,"value":511},{"type":401,"tag":426,"props":1348,"children":1349},{"style":449},[1350],{"type":407,"value":1351},"basename",{"type":401,"tag":426,"props":1353,"children":1354},{"style":497},[1355],{"type":407,"value":458},{"type":401,"tag":426,"props":1357,"children":1358},{"style":503},[1359],{"type":407,"value":1242},{"type":401,"tag":426,"props":1361,"children":1362},{"style":497},[1363],{"type":407,"value":912},{"type":401,"tag":426,"props":1365,"children":1366},{"style":988},[1367],{"type":407,"value":1368},"===",{"type":401,"tag":426,"props":1370,"children":1371},{"style":503},[1372],{"type":407,"value":740},{"type":401,"tag":426,"props":1374,"children":1375},{"style":497},[1376],{"type":407,"value":912},{"type":401,"tag":426,"props":1378,"children":1379},{"style":455},[1380],{"type":407,"value":534},{"type":401,"tag":426,"props":1382,"children":1383},{"class":428,"line":589},[1384,1388,1392,1396,1400,1405,1409,1413],{"type":401,"tag":426,"props":1385,"children":1386},{"style":449},[1387],{"type":407,"value":595},{"type":401,"tag":426,"props":1389,"children":1390},{"style":497},[1391],{"type":407,"value":458},{"type":401,"tag":426,"props":1393,"children":1394},{"style":503},[1395],{"type":407,"value":1242},{"type":401,"tag":426,"props":1397,"children":1398},{"style":455},[1399],{"type":407,"value":469},{"type":401,"tag":426,"props":1401,"children":1402},{"style":503},[1403],{"type":407,"value":1404}," options",{"type":401,"tag":426,"props":1406,"children":1407},{"style":455},[1408],{"type":407,"value":469},{"type":401,"tag":426,"props":1410,"children":1411},{"style":503},[1412],{"type":407,"value":474},{"type":401,"tag":426,"props":1414,"children":1415},{"style":497},[1416],{"type":407,"value":618},{"type":401,"tag":426,"props":1418,"children":1419},{"class":428,"line":621},[1420],{"type":401,"tag":426,"props":1421,"children":1422},{"style":455},[1423],{"type":407,"value":1424},"    }\n",{"type":401,"tag":426,"props":1426,"children":1427},{"class":428,"line":634},[1428,1433],{"type":401,"tag":426,"props":1429,"children":1430},{"style":455},[1431],{"type":407,"value":1432},"  }",{"type":401,"tag":426,"props":1434,"children":1435},{"style":497},[1436],{"type":407,"value":618},{"type":401,"tag":426,"props":1438,"children":1439},{"class":428,"line":643},[1440],{"type":401,"tag":426,"props":1441,"children":1442},{"style":455},[1443],{"type":407,"value":1150},{"type":401,"tag":409,"props":1445,"children":1446},{},[1447],{"type":407,"value":1448},"如果目录中带有符号链接，node-watch 会默认跟踪下去，同时使用一个默认的 maxSymbolLevel 数字配置项，设置最大跟踪层数，防止死循环或性能问题。",{"type":401,"tag":415,"props":1450,"children":1452},{"className":417,"code":1451,"language":419,"meta":394,"style":394},"function watch(fpath, options, cb) {\n  if (is.symbolic(fpath) \n    && !(options.followSymLinks \n      && options.maxSymLevel--)) {\n    return\n  }\n}\n",[1453],{"type":401,"tag":422,"props":1454,"children":1455},{"__ignoreMap":394},[1456,1499,1536,1571,1605,1612,1619],{"type":401,"tag":426,"props":1457,"children":1458},{"class":428,"line":429},[1459,1463,1467,1471,1475,1479,1483,1487,1491,1495],{"type":401,"tag":426,"props":1460,"children":1461},{"style":443},[1462],{"type":407,"value":446},{"type":401,"tag":426,"props":1464,"children":1465},{"style":449},[1466],{"type":407,"value":452},{"type":401,"tag":426,"props":1468,"children":1469},{"style":455},[1470],{"type":407,"value":458},{"type":401,"tag":426,"props":1472,"children":1473},{"style":461},[1474],{"type":407,"value":1242},{"type":401,"tag":426,"props":1476,"children":1477},{"style":455},[1478],{"type":407,"value":469},{"type":401,"tag":426,"props":1480,"children":1481},{"style":461},[1482],{"type":407,"value":1404},{"type":401,"tag":426,"props":1484,"children":1485},{"style":455},[1486],{"type":407,"value":469},{"type":401,"tag":426,"props":1488,"children":1489},{"style":461},[1490],{"type":407,"value":474},{"type":401,"tag":426,"props":1492,"children":1493},{"style":455},[1494],{"type":407,"value":479},{"type":401,"tag":426,"props":1496,"children":1497},{"style":455},[1498],{"type":407,"value":484},{"type":401,"tag":426,"props":1500,"children":1501},{"class":428,"line":439},[1502,1506,1510,1514,1518,1523,1527,1531],{"type":401,"tag":426,"props":1503,"children":1504},{"style":491},[1505],{"type":407,"value":494},{"type":401,"tag":426,"props":1507,"children":1508},{"style":497},[1509],{"type":407,"value":500},{"type":401,"tag":426,"props":1511,"children":1512},{"style":503},[1513],{"type":407,"value":506},{"type":401,"tag":426,"props":1515,"children":1516},{"style":455},[1517],{"type":407,"value":511},{"type":401,"tag":426,"props":1519,"children":1520},{"style":449},[1521],{"type":407,"value":1522},"symbolic",{"type":401,"tag":426,"props":1524,"children":1525},{"style":497},[1526],{"type":407,"value":458},{"type":401,"tag":426,"props":1528,"children":1529},{"style":503},[1530],{"type":407,"value":1242},{"type":401,"tag":426,"props":1532,"children":1533},{"style":497},[1534],{"type":407,"value":1535},") \n",{"type":401,"tag":426,"props":1537,"children":1538},{"class":428,"line":487},[1539,1544,1549,1553,1558,1562,1567],{"type":401,"tag":426,"props":1540,"children":1541},{"style":988},[1542],{"type":407,"value":1543},"    &&",{"type":401,"tag":426,"props":1545,"children":1546},{"style":988},[1547],{"type":407,"value":1548}," !",{"type":401,"tag":426,"props":1550,"children":1551},{"style":497},[1552],{"type":407,"value":458},{"type":401,"tag":426,"props":1554,"children":1555},{"style":503},[1556],{"type":407,"value":1557},"options",{"type":401,"tag":426,"props":1559,"children":1560},{"style":455},[1561],{"type":407,"value":511},{"type":401,"tag":426,"props":1563,"children":1564},{"style":503},[1565],{"type":407,"value":1566},"followSymLinks",{"type":401,"tag":426,"props":1568,"children":1569},{"style":497},[1570],{"type":407,"value":971},{"type":401,"tag":426,"props":1572,"children":1573},{"class":428,"line":537},[1574,1579,1583,1587,1592,1597,1601],{"type":401,"tag":426,"props":1575,"children":1576},{"style":988},[1577],{"type":407,"value":1578},"      &&",{"type":401,"tag":426,"props":1580,"children":1581},{"style":503},[1582],{"type":407,"value":1404},{"type":401,"tag":426,"props":1584,"children":1585},{"style":455},[1586],{"type":407,"value":511},{"type":401,"tag":426,"props":1588,"children":1589},{"style":503},[1590],{"type":407,"value":1591},"maxSymLevel",{"type":401,"tag":426,"props":1593,"children":1594},{"style":988},[1595],{"type":407,"value":1596},"--",{"type":401,"tag":426,"props":1598,"children":1599},{"style":497},[1600],{"type":407,"value":529},{"type":401,"tag":426,"props":1602,"children":1603},{"style":455},[1604],{"type":407,"value":534},{"type":401,"tag":426,"props":1606,"children":1607},{"class":428,"line":589},[1608],{"type":401,"tag":426,"props":1609,"children":1610},{"style":491},[1611],{"type":407,"value":640},{"type":401,"tag":426,"props":1613,"children":1614},{"class":428,"line":621},[1615],{"type":401,"tag":426,"props":1616,"children":1617},{"style":455},[1618],{"type":407,"value":649},{"type":401,"tag":426,"props":1620,"children":1621},{"class":428,"line":634},[1622],{"type":401,"tag":426,"props":1623,"children":1624},{"style":455},[1625],{"type":407,"value":1150},{"type":401,"tag":409,"props":1627,"children":1628},{},[1629],{"type":407,"value":1630},"NodeJS 文档提到，fs.watch 的 recursive 选项在 Linux 中是无效的，因为 fs.watch 的实现依赖具体操作系统底层 API。所以到底要不要用原生的 recursive 选项需要提前判断一下，node-watch 的实现挺粗暴，直接使用 IO 操作去检测：先到系统临时文件目录创建一些文件夹，然后监听它们并删除里面的内容，如果超时了还没有触发 watcher 的 change 事件，那就说明不是原生支持 recursive 选项。",{"type":401,"tag":415,"props":1632,"children":1634},{"className":417,"code":1633,"language":419,"meta":394,"style":394},"var IS_SUPPORT\n\ntry {\n  watcher = fs.watch(parent, options)\n} catch (e) {\n  if (e.code == 'ERR_FEATURE_UNAVAILABLE_ON_PLATFORM') {\n    return fn(IS_SUPPORT = false)\n  } else {\n    throw e\n  }\n}\n\nvar timer = setTimeout(function() {\n  watcher.close()\n  stack.cleanup(function() {\n    fn(IS_SUPPORT = false)\n  })\n}, 200)\n\nwatcher.on('change', function(evt, name) {\n  if (path.basename(file) === path.basename(name)) {\n    watcher.close()\n    clearTimeout(timer)\n    stack.cleanup(function() {\n      fn(IS_SUPPORT = true)\n    })\n  }\n})\n",[1635],{"type":401,"tag":422,"props":1636,"children":1637},{"__ignoreMap":394},[1638,1652,1660,1672,1717,1739,1789,1825,1841,1854,1861,1868,1875,1914,1935,1968,1996,2007,2025,2032,2099,2167,2187,2208,2240,2269,2281,2289],{"type":401,"tag":426,"props":1639,"children":1640},{"class":428,"line":429},[1641,1646],{"type":401,"tag":426,"props":1642,"children":1643},{"style":443},[1644],{"type":407,"value":1645},"var",{"type":401,"tag":426,"props":1647,"children":1649},{"style":1648},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1650],{"type":407,"value":1651}," IS_SUPPORT\n",{"type":401,"tag":426,"props":1653,"children":1654},{"class":428,"line":439},[1655],{"type":401,"tag":426,"props":1656,"children":1657},{"emptyLinePlaceholder":393},[1658],{"type":407,"value":1659},"\n",{"type":401,"tag":426,"props":1661,"children":1662},{"class":428,"line":487},[1663,1668],{"type":401,"tag":426,"props":1664,"children":1665},{"style":491},[1666],{"type":407,"value":1667},"try",{"type":401,"tag":426,"props":1669,"children":1670},{"style":455},[1671],{"type":407,"value":484},{"type":401,"tag":426,"props":1673,"children":1674},{"class":428,"line":537},[1675,1680,1684,1689,1693,1697,1701,1705,1709,1713],{"type":401,"tag":426,"props":1676,"children":1677},{"style":503},[1678],{"type":407,"value":1679},"  watcher",{"type":401,"tag":426,"props":1681,"children":1682},{"style":988},[1683],{"type":407,"value":991},{"type":401,"tag":426,"props":1685,"children":1686},{"style":503},[1687],{"type":407,"value":1688}," fs",{"type":401,"tag":426,"props":1690,"children":1691},{"style":455},[1692],{"type":407,"value":511},{"type":401,"tag":426,"props":1694,"children":1695},{"style":449},[1696],{"type":407,"value":707},{"type":401,"tag":426,"props":1698,"children":1699},{"style":497},[1700],{"type":407,"value":458},{"type":401,"tag":426,"props":1702,"children":1703},{"style":503},[1704],{"type":407,"value":1292},{"type":401,"tag":426,"props":1706,"children":1707},{"style":455},[1708],{"type":407,"value":469},{"type":401,"tag":426,"props":1710,"children":1711},{"style":503},[1712],{"type":407,"value":1404},{"type":401,"tag":426,"props":1714,"children":1715},{"style":497},[1716],{"type":407,"value":618},{"type":401,"tag":426,"props":1718,"children":1719},{"class":428,"line":589},[1720,1725,1730,1735],{"type":401,"tag":426,"props":1721,"children":1722},{"style":455},[1723],{"type":407,"value":1724},"}",{"type":401,"tag":426,"props":1726,"children":1727},{"style":491},[1728],{"type":407,"value":1729}," catch",{"type":401,"tag":426,"props":1731,"children":1732},{"style":503},[1733],{"type":407,"value":1734}," (e) ",{"type":401,"tag":426,"props":1736,"children":1737},{"style":455},[1738],{"type":407,"value":534},{"type":401,"tag":426,"props":1740,"children":1741},{"class":428,"line":621},[1742,1746,1750,1755,1759,1763,1768,1772,1777,1781,1785],{"type":401,"tag":426,"props":1743,"children":1744},{"style":491},[1745],{"type":407,"value":494},{"type":401,"tag":426,"props":1747,"children":1748},{"style":497},[1749],{"type":407,"value":500},{"type":401,"tag":426,"props":1751,"children":1752},{"style":503},[1753],{"type":407,"value":1754},"e",{"type":401,"tag":426,"props":1756,"children":1757},{"style":455},[1758],{"type":407,"value":511},{"type":401,"tag":426,"props":1760,"children":1761},{"style":503},[1762],{"type":407,"value":422},{"type":401,"tag":426,"props":1764,"children":1765},{"style":988},[1766],{"type":407,"value":1767}," ==",{"type":401,"tag":426,"props":1769,"children":1770},{"style":1249},[1771],{"type":407,"value":1252},{"type":401,"tag":426,"props":1773,"children":1774},{"style":1255},[1775],{"type":407,"value":1776},"ERR_FEATURE_UNAVAILABLE_ON_PLATFORM",{"type":401,"tag":426,"props":1778,"children":1779},{"style":1249},[1780],{"type":407,"value":1263},{"type":401,"tag":426,"props":1782,"children":1783},{"style":497},[1784],{"type":407,"value":912},{"type":401,"tag":426,"props":1786,"children":1787},{"style":455},[1788],{"type":407,"value":534},{"type":401,"tag":426,"props":1790,"children":1791},{"class":428,"line":634},[1792,1797,1802,1806,1811,1815,1821],{"type":401,"tag":426,"props":1793,"children":1794},{"style":491},[1795],{"type":407,"value":1796},"    return",{"type":401,"tag":426,"props":1798,"children":1799},{"style":449},[1800],{"type":407,"value":1801}," fn",{"type":401,"tag":426,"props":1803,"children":1804},{"style":497},[1805],{"type":407,"value":458},{"type":401,"tag":426,"props":1807,"children":1808},{"style":1648},[1809],{"type":407,"value":1810},"IS_SUPPORT",{"type":401,"tag":426,"props":1812,"children":1813},{"style":988},[1814],{"type":407,"value":991},{"type":401,"tag":426,"props":1816,"children":1818},{"style":1817},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1819],{"type":407,"value":1820}," false",{"type":401,"tag":426,"props":1822,"children":1823},{"style":497},[1824],{"type":407,"value":618},{"type":401,"tag":426,"props":1826,"children":1827},{"class":428,"line":643},[1828,1832,1837],{"type":401,"tag":426,"props":1829,"children":1830},{"style":455},[1831],{"type":407,"value":1432},{"type":401,"tag":426,"props":1833,"children":1834},{"style":491},[1835],{"type":407,"value":1836}," else",{"type":401,"tag":426,"props":1838,"children":1839},{"style":455},[1840],{"type":407,"value":484},{"type":401,"tag":426,"props":1842,"children":1843},{"class":428,"line":652},[1844,1849],{"type":401,"tag":426,"props":1845,"children":1846},{"style":491},[1847],{"type":407,"value":1848},"    throw",{"type":401,"tag":426,"props":1850,"children":1851},{"style":503},[1852],{"type":407,"value":1853}," e\n",{"type":401,"tag":426,"props":1855,"children":1856},{"class":428,"line":693},[1857],{"type":401,"tag":426,"props":1858,"children":1859},{"style":455},[1860],{"type":407,"value":649},{"type":401,"tag":426,"props":1862,"children":1863},{"class":428,"line":751},[1864],{"type":401,"tag":426,"props":1865,"children":1866},{"style":455},[1867],{"type":407,"value":1150},{"type":401,"tag":426,"props":1869,"children":1870},{"class":428,"line":776},[1871],{"type":401,"tag":426,"props":1872,"children":1873},{"emptyLinePlaceholder":393},[1874],{"type":407,"value":1659},{"type":401,"tag":426,"props":1876,"children":1877},{"class":428,"line":814},[1878,1882,1887,1892,1897,1901,1905,1910],{"type":401,"tag":426,"props":1879,"children":1880},{"style":443},[1881],{"type":407,"value":1645},{"type":401,"tag":426,"props":1883,"children":1884},{"style":503},[1885],{"type":407,"value":1886}," timer ",{"type":401,"tag":426,"props":1888,"children":1889},{"style":988},[1890],{"type":407,"value":1891},"=",{"type":401,"tag":426,"props":1893,"children":1894},{"style":449},[1895],{"type":407,"value":1896}," setTimeout",{"type":401,"tag":426,"props":1898,"children":1899},{"style":503},[1900],{"type":407,"value":458},{"type":401,"tag":426,"props":1902,"children":1903},{"style":443},[1904],{"type":407,"value":446},{"type":401,"tag":426,"props":1906,"children":1907},{"style":455},[1908],{"type":407,"value":1909},"()",{"type":401,"tag":426,"props":1911,"children":1912},{"style":455},[1913],{"type":407,"value":484},{"type":401,"tag":426,"props":1915,"children":1916},{"class":428,"line":823},[1917,1921,1925,1930],{"type":401,"tag":426,"props":1918,"children":1919},{"style":503},[1920],{"type":407,"value":1679},{"type":401,"tag":426,"props":1922,"children":1923},{"style":455},[1924],{"type":407,"value":511},{"type":401,"tag":426,"props":1926,"children":1927},{"style":449},[1928],{"type":407,"value":1929},"close",{"type":401,"tag":426,"props":1931,"children":1932},{"style":497},[1933],{"type":407,"value":1934},"()\n",{"type":401,"tag":426,"props":1936,"children":1937},{"class":428,"line":835},[1938,1943,1947,1952,1956,1960,1964],{"type":401,"tag":426,"props":1939,"children":1940},{"style":503},[1941],{"type":407,"value":1942},"  stack",{"type":401,"tag":426,"props":1944,"children":1945},{"style":455},[1946],{"type":407,"value":511},{"type":401,"tag":426,"props":1948,"children":1949},{"style":449},[1950],{"type":407,"value":1951},"cleanup",{"type":401,"tag":426,"props":1953,"children":1954},{"style":497},[1955],{"type":407,"value":458},{"type":401,"tag":426,"props":1957,"children":1958},{"style":443},[1959],{"type":407,"value":446},{"type":401,"tag":426,"props":1961,"children":1962},{"style":455},[1963],{"type":407,"value":1909},{"type":401,"tag":426,"props":1965,"children":1966},{"style":455},[1967],{"type":407,"value":484},{"type":401,"tag":426,"props":1969,"children":1970},{"class":428,"line":893},[1971,1976,1980,1984,1988,1992],{"type":401,"tag":426,"props":1972,"children":1973},{"style":449},[1974],{"type":407,"value":1975},"    fn",{"type":401,"tag":426,"props":1977,"children":1978},{"style":497},[1979],{"type":407,"value":458},{"type":401,"tag":426,"props":1981,"children":1982},{"style":1648},[1983],{"type":407,"value":1810},{"type":401,"tag":426,"props":1985,"children":1986},{"style":988},[1987],{"type":407,"value":991},{"type":401,"tag":426,"props":1989,"children":1990},{"style":1817},[1991],{"type":407,"value":1820},{"type":401,"tag":426,"props":1993,"children":1994},{"style":497},[1995],{"type":407,"value":618},{"type":401,"tag":426,"props":1997,"children":1998},{"class":428,"line":925},[1999,2003],{"type":401,"tag":426,"props":2000,"children":2001},{"style":455},[2002],{"type":407,"value":1432},{"type":401,"tag":426,"props":2004,"children":2005},{"style":497},[2006],{"type":407,"value":618},{"type":401,"tag":426,"props":2008,"children":2009},{"class":428,"line":974},[2010,2015,2021],{"type":401,"tag":426,"props":2011,"children":2012},{"style":455},[2013],{"type":407,"value":2014},"},",{"type":401,"tag":426,"props":2016,"children":2018},{"style":2017},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2019],{"type":407,"value":2020}," 200",{"type":401,"tag":426,"props":2022,"children":2023},{"style":503},[2024],{"type":407,"value":618},{"type":401,"tag":426,"props":2026,"children":2027},{"class":428,"line":1028},[2028],{"type":401,"tag":426,"props":2029,"children":2030},{"emptyLinePlaceholder":393},[2031],{"type":407,"value":1659},{"type":401,"tag":426,"props":2033,"children":2034},{"class":428,"line":1072},[2035,2040,2044,2049,2053,2057,2062,2066,2070,2074,2078,2082,2086,2091,2095],{"type":401,"tag":426,"props":2036,"children":2037},{"style":503},[2038],{"type":407,"value":2039},"watcher",{"type":401,"tag":426,"props":2041,"children":2042},{"style":455},[2043],{"type":407,"value":511},{"type":401,"tag":426,"props":2045,"children":2046},{"style":449},[2047],{"type":407,"value":2048},"on",{"type":401,"tag":426,"props":2050,"children":2051},{"style":503},[2052],{"type":407,"value":458},{"type":401,"tag":426,"props":2054,"children":2055},{"style":1249},[2056],{"type":407,"value":1263},{"type":401,"tag":426,"props":2058,"children":2059},{"style":1255},[2060],{"type":407,"value":2061},"change",{"type":401,"tag":426,"props":2063,"children":2064},{"style":1249},[2065],{"type":407,"value":1263},{"type":401,"tag":426,"props":2067,"children":2068},{"style":455},[2069],{"type":407,"value":469},{"type":401,"tag":426,"props":2071,"children":2072},{"style":443},[2073],{"type":407,"value":569},{"type":401,"tag":426,"props":2075,"children":2076},{"style":455},[2077],{"type":407,"value":458},{"type":401,"tag":426,"props":2079,"children":2080},{"style":461},[2081],{"type":407,"value":1309},{"type":401,"tag":426,"props":2083,"children":2084},{"style":455},[2085],{"type":407,"value":469},{"type":401,"tag":426,"props":2087,"children":2088},{"style":461},[2089],{"type":407,"value":2090}," name",{"type":401,"tag":426,"props":2092,"children":2093},{"style":455},[2094],{"type":407,"value":479},{"type":401,"tag":426,"props":2096,"children":2097},{"style":455},[2098],{"type":407,"value":484},{"type":401,"tag":426,"props":2100,"children":2101},{"class":428,"line":1101},[2102,2106,2110,2114,2118,2122,2126,2130,2134,2138,2142,2146,2150,2154,2159,2163],{"type":401,"tag":426,"props":2103,"children":2104},{"style":491},[2105],{"type":407,"value":494},{"type":401,"tag":426,"props":2107,"children":2108},{"style":497},[2109],{"type":407,"value":500},{"type":401,"tag":426,"props":2111,"children":2112},{"style":503},[2113],{"type":407,"value":1342},{"type":401,"tag":426,"props":2115,"children":2116},{"style":455},[2117],{"type":407,"value":511},{"type":401,"tag":426,"props":2119,"children":2120},{"style":449},[2121],{"type":407,"value":1351},{"type":401,"tag":426,"props":2123,"children":2124},{"style":497},[2125],{"type":407,"value":458},{"type":401,"tag":426,"props":2127,"children":2128},{"style":503},[2129],{"type":407,"value":1060},{"type":401,"tag":426,"props":2131,"children":2132},{"style":497},[2133],{"type":407,"value":912},{"type":401,"tag":426,"props":2135,"children":2136},{"style":988},[2137],{"type":407,"value":1368},{"type":401,"tag":426,"props":2139,"children":2140},{"style":503},[2141],{"type":407,"value":996},{"type":401,"tag":426,"props":2143,"children":2144},{"style":455},[2145],{"type":407,"value":511},{"type":401,"tag":426,"props":2147,"children":2148},{"style":449},[2149],{"type":407,"value":1351},{"type":401,"tag":426,"props":2151,"children":2152},{"style":497},[2153],{"type":407,"value":458},{"type":401,"tag":426,"props":2155,"children":2156},{"style":503},[2157],{"type":407,"value":2158},"name",{"type":401,"tag":426,"props":2160,"children":2161},{"style":497},[2162],{"type":407,"value":529},{"type":401,"tag":426,"props":2164,"children":2165},{"style":455},[2166],{"type":407,"value":534},{"type":401,"tag":426,"props":2168,"children":2169},{"class":428,"line":1110},[2170,2175,2179,2183],{"type":401,"tag":426,"props":2171,"children":2172},{"style":503},[2173],{"type":407,"value":2174},"    watcher",{"type":401,"tag":426,"props":2176,"children":2177},{"style":455},[2178],{"type":407,"value":511},{"type":401,"tag":426,"props":2180,"children":2181},{"style":449},[2182],{"type":407,"value":1929},{"type":401,"tag":426,"props":2184,"children":2185},{"style":497},[2186],{"type":407,"value":1934},{"type":401,"tag":426,"props":2188,"children":2189},{"class":428,"line":1123},[2190,2195,2199,2204],{"type":401,"tag":426,"props":2191,"children":2192},{"style":449},[2193],{"type":407,"value":2194},"    clearTimeout",{"type":401,"tag":426,"props":2196,"children":2197},{"style":497},[2198],{"type":407,"value":458},{"type":401,"tag":426,"props":2200,"children":2201},{"style":503},[2202],{"type":407,"value":2203},"timer",{"type":401,"tag":426,"props":2205,"children":2206},{"style":497},[2207],{"type":407,"value":618},{"type":401,"tag":426,"props":2209,"children":2210},{"class":428,"line":1136},[2211,2216,2220,2224,2228,2232,2236],{"type":401,"tag":426,"props":2212,"children":2213},{"style":503},[2214],{"type":407,"value":2215},"    stack",{"type":401,"tag":426,"props":2217,"children":2218},{"style":455},[2219],{"type":407,"value":511},{"type":401,"tag":426,"props":2221,"children":2222},{"style":449},[2223],{"type":407,"value":1951},{"type":401,"tag":426,"props":2225,"children":2226},{"style":497},[2227],{"type":407,"value":458},{"type":401,"tag":426,"props":2229,"children":2230},{"style":443},[2231],{"type":407,"value":446},{"type":401,"tag":426,"props":2233,"children":2234},{"style":455},[2235],{"type":407,"value":1909},{"type":401,"tag":426,"props":2237,"children":2238},{"style":455},[2239],{"type":407,"value":484},{"type":401,"tag":426,"props":2241,"children":2242},{"class":428,"line":1144},[2243,2248,2252,2256,2260,2265],{"type":401,"tag":426,"props":2244,"children":2245},{"style":449},[2246],{"type":407,"value":2247},"      fn",{"type":401,"tag":426,"props":2249,"children":2250},{"style":497},[2251],{"type":407,"value":458},{"type":401,"tag":426,"props":2253,"children":2254},{"style":1648},[2255],{"type":407,"value":1810},{"type":401,"tag":426,"props":2257,"children":2258},{"style":988},[2259],{"type":407,"value":991},{"type":401,"tag":426,"props":2261,"children":2262},{"style":1817},[2263],{"type":407,"value":2264}," true",{"type":401,"tag":426,"props":2266,"children":2267},{"style":497},[2268],{"type":407,"value":618},{"type":401,"tag":426,"props":2270,"children":2272},{"class":428,"line":2271},26,[2273,2277],{"type":401,"tag":426,"props":2274,"children":2275},{"style":455},[2276],{"type":407,"value":627},{"type":401,"tag":426,"props":2278,"children":2279},{"style":497},[2280],{"type":407,"value":618},{"type":401,"tag":426,"props":2282,"children":2284},{"class":428,"line":2283},27,[2285],{"type":401,"tag":426,"props":2286,"children":2287},{"style":455},[2288],{"type":407,"value":649},{"type":401,"tag":426,"props":2290,"children":2292},{"class":428,"line":2291},28,[2293,2297],{"type":401,"tag":426,"props":2294,"children":2295},{"style":455},[2296],{"type":407,"value":1724},{"type":401,"tag":426,"props":2298,"children":2299},{"style":503},[2300],{"type":407,"value":618},{"type":401,"tag":409,"props":2302,"children":2303},{},[2304],{"type":407,"value":2305},"Watcher 仅向外暴露指定方法。",{"type":401,"tag":415,"props":2307,"children":2309},{"className":417,"code":2308,"language":419,"meta":394,"style":394},"Watcher.prototype.expose = function() {\n  var expose = {}\n  var self = this\n  var methods = [\n    'on', 'emit', 'once',\n    'close', 'isClosed',\n    'listeners', 'setMaxListeners', 'getMaxListeners',\n    'getWatchedPaths'\n  ]\n  methods.forEach(function(name) {\n    expose[name] = function() {\n      return self[name].apply(self, arguments)\n    }\n  })\n  return expose\n}\n",[2310],{"type":401,"tag":422,"props":2311,"children":2312},{"__ignoreMap":394},[2313,2356,2377,2399,2420,2475,2511,2565,2582,2590,2630,2668,2725,2732,2743,2756],{"type":401,"tag":426,"props":2314,"children":2315},{"class":428,"line":429},[2316,2322,2326,2331,2335,2340,2344,2348,2352],{"type":401,"tag":426,"props":2317,"children":2319},{"style":2318},"--shiki-light:#E2931D;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#66D9EF;--shiki-light-font-style:inherit;--shiki-default-font-style:inherit;--shiki-dark-font-style:inherit;--shiki-sepia-font-style:italic",[2320],{"type":407,"value":2321},"Watcher",{"type":401,"tag":426,"props":2323,"children":2324},{"style":455},[2325],{"type":407,"value":511},{"type":401,"tag":426,"props":2327,"children":2328},{"style":1648},[2329],{"type":407,"value":2330},"prototype",{"type":401,"tag":426,"props":2332,"children":2333},{"style":455},[2334],{"type":407,"value":511},{"type":401,"tag":426,"props":2336,"children":2337},{"style":449},[2338],{"type":407,"value":2339},"expose",{"type":401,"tag":426,"props":2341,"children":2342},{"style":988},[2343],{"type":407,"value":991},{"type":401,"tag":426,"props":2345,"children":2346},{"style":443},[2347],{"type":407,"value":569},{"type":401,"tag":426,"props":2349,"children":2350},{"style":455},[2351],{"type":407,"value":1909},{"type":401,"tag":426,"props":2353,"children":2354},{"style":455},[2355],{"type":407,"value":484},{"type":401,"tag":426,"props":2357,"children":2358},{"class":428,"line":439},[2359,2363,2368,2372],{"type":401,"tag":426,"props":2360,"children":2361},{"style":443},[2362],{"type":407,"value":1211},{"type":401,"tag":426,"props":2364,"children":2365},{"style":503},[2366],{"type":407,"value":2367}," expose",{"type":401,"tag":426,"props":2369,"children":2370},{"style":988},[2371],{"type":407,"value":991},{"type":401,"tag":426,"props":2373,"children":2374},{"style":455},[2375],{"type":407,"value":2376}," {}\n",{"type":401,"tag":426,"props":2378,"children":2379},{"class":428,"line":487},[2380,2384,2389,2393],{"type":401,"tag":426,"props":2381,"children":2382},{"style":443},[2383],{"type":407,"value":1211},{"type":401,"tag":426,"props":2385,"children":2386},{"style":503},[2387],{"type":407,"value":2388}," self",{"type":401,"tag":426,"props":2390,"children":2391},{"style":988},[2392],{"type":407,"value":991},{"type":401,"tag":426,"props":2394,"children":2396},{"style":2395},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2397],{"type":407,"value":2398}," this\n",{"type":401,"tag":426,"props":2400,"children":2401},{"class":428,"line":537},[2402,2406,2411,2415],{"type":401,"tag":426,"props":2403,"children":2404},{"style":443},[2405],{"type":407,"value":1211},{"type":401,"tag":426,"props":2407,"children":2408},{"style":503},[2409],{"type":407,"value":2410}," methods",{"type":401,"tag":426,"props":2412,"children":2413},{"style":988},[2414],{"type":407,"value":991},{"type":401,"tag":426,"props":2416,"children":2417},{"style":497},[2418],{"type":407,"value":2419}," [\n",{"type":401,"tag":426,"props":2421,"children":2422},{"class":428,"line":589},[2423,2428,2432,2436,2440,2444,2449,2453,2457,2461,2466,2470],{"type":401,"tag":426,"props":2424,"children":2425},{"style":1249},[2426],{"type":407,"value":2427},"    '",{"type":401,"tag":426,"props":2429,"children":2430},{"style":1255},[2431],{"type":407,"value":2048},{"type":401,"tag":426,"props":2433,"children":2434},{"style":1249},[2435],{"type":407,"value":1263},{"type":401,"tag":426,"props":2437,"children":2438},{"style":455},[2439],{"type":407,"value":469},{"type":401,"tag":426,"props":2441,"children":2442},{"style":1249},[2443],{"type":407,"value":1252},{"type":401,"tag":426,"props":2445,"children":2446},{"style":1255},[2447],{"type":407,"value":2448},"emit",{"type":401,"tag":426,"props":2450,"children":2451},{"style":1249},[2452],{"type":407,"value":1263},{"type":401,"tag":426,"props":2454,"children":2455},{"style":455},[2456],{"type":407,"value":469},{"type":401,"tag":426,"props":2458,"children":2459},{"style":1249},[2460],{"type":407,"value":1252},{"type":401,"tag":426,"props":2462,"children":2463},{"style":1255},[2464],{"type":407,"value":2465},"once",{"type":401,"tag":426,"props":2467,"children":2468},{"style":1249},[2469],{"type":407,"value":1263},{"type":401,"tag":426,"props":2471,"children":2472},{"style":455},[2473],{"type":407,"value":2474},",\n",{"type":401,"tag":426,"props":2476,"children":2477},{"class":428,"line":621},[2478,2482,2486,2490,2494,2498,2503,2507],{"type":401,"tag":426,"props":2479,"children":2480},{"style":1249},[2481],{"type":407,"value":2427},{"type":401,"tag":426,"props":2483,"children":2484},{"style":1255},[2485],{"type":407,"value":1929},{"type":401,"tag":426,"props":2487,"children":2488},{"style":1249},[2489],{"type":407,"value":1263},{"type":401,"tag":426,"props":2491,"children":2492},{"style":455},[2493],{"type":407,"value":469},{"type":401,"tag":426,"props":2495,"children":2496},{"style":1249},[2497],{"type":407,"value":1252},{"type":401,"tag":426,"props":2499,"children":2500},{"style":1255},[2501],{"type":407,"value":2502},"isClosed",{"type":401,"tag":426,"props":2504,"children":2505},{"style":1249},[2506],{"type":407,"value":1263},{"type":401,"tag":426,"props":2508,"children":2509},{"style":455},[2510],{"type":407,"value":2474},{"type":401,"tag":426,"props":2512,"children":2513},{"class":428,"line":634},[2514,2518,2523,2527,2531,2535,2540,2544,2548,2552,2557,2561],{"type":401,"tag":426,"props":2515,"children":2516},{"style":1249},[2517],{"type":407,"value":2427},{"type":401,"tag":426,"props":2519,"children":2520},{"style":1255},[2521],{"type":407,"value":2522},"listeners",{"type":401,"tag":426,"props":2524,"children":2525},{"style":1249},[2526],{"type":407,"value":1263},{"type":401,"tag":426,"props":2528,"children":2529},{"style":455},[2530],{"type":407,"value":469},{"type":401,"tag":426,"props":2532,"children":2533},{"style":1249},[2534],{"type":407,"value":1252},{"type":401,"tag":426,"props":2536,"children":2537},{"style":1255},[2538],{"type":407,"value":2539},"setMaxListeners",{"type":401,"tag":426,"props":2541,"children":2542},{"style":1249},[2543],{"type":407,"value":1263},{"type":401,"tag":426,"props":2545,"children":2546},{"style":455},[2547],{"type":407,"value":469},{"type":401,"tag":426,"props":2549,"children":2550},{"style":1249},[2551],{"type":407,"value":1252},{"type":401,"tag":426,"props":2553,"children":2554},{"style":1255},[2555],{"type":407,"value":2556},"getMaxListeners",{"type":401,"tag":426,"props":2558,"children":2559},{"style":1249},[2560],{"type":407,"value":1263},{"type":401,"tag":426,"props":2562,"children":2563},{"style":455},[2564],{"type":407,"value":2474},{"type":401,"tag":426,"props":2566,"children":2567},{"class":428,"line":643},[2568,2572,2577],{"type":401,"tag":426,"props":2569,"children":2570},{"style":1249},[2571],{"type":407,"value":2427},{"type":401,"tag":426,"props":2573,"children":2574},{"style":1255},[2575],{"type":407,"value":2576},"getWatchedPaths",{"type":401,"tag":426,"props":2578,"children":2579},{"style":1249},[2580],{"type":407,"value":2581},"'\n",{"type":401,"tag":426,"props":2583,"children":2584},{"class":428,"line":652},[2585],{"type":401,"tag":426,"props":2586,"children":2587},{"style":497},[2588],{"type":407,"value":2589},"  ]\n",{"type":401,"tag":426,"props":2591,"children":2592},{"class":428,"line":693},[2593,2598,2602,2606,2610,2614,2618,2622,2626],{"type":401,"tag":426,"props":2594,"children":2595},{"style":503},[2596],{"type":407,"value":2597},"  methods",{"type":401,"tag":426,"props":2599,"children":2600},{"style":455},[2601],{"type":407,"value":511},{"type":401,"tag":426,"props":2603,"children":2604},{"style":449},[2605],{"type":407,"value":940},{"type":401,"tag":426,"props":2607,"children":2608},{"style":497},[2609],{"type":407,"value":458},{"type":401,"tag":426,"props":2611,"children":2612},{"style":443},[2613],{"type":407,"value":446},{"type":401,"tag":426,"props":2615,"children":2616},{"style":455},[2617],{"type":407,"value":458},{"type":401,"tag":426,"props":2619,"children":2620},{"style":461},[2621],{"type":407,"value":2158},{"type":401,"tag":426,"props":2623,"children":2624},{"style":455},[2625],{"type":407,"value":479},{"type":401,"tag":426,"props":2627,"children":2628},{"style":455},[2629],{"type":407,"value":484},{"type":401,"tag":426,"props":2631,"children":2632},{"class":428,"line":751},[2633,2638,2643,2647,2652,2656,2660,2664],{"type":401,"tag":426,"props":2634,"children":2635},{"style":503},[2636],{"type":407,"value":2637},"    expose",{"type":401,"tag":426,"props":2639,"children":2640},{"style":497},[2641],{"type":407,"value":2642},"[",{"type":401,"tag":426,"props":2644,"children":2645},{"style":503},[2646],{"type":407,"value":2158},{"type":401,"tag":426,"props":2648,"children":2649},{"style":497},[2650],{"type":407,"value":2651},"] ",{"type":401,"tag":426,"props":2653,"children":2654},{"style":988},[2655],{"type":407,"value":1891},{"type":401,"tag":426,"props":2657,"children":2658},{"style":443},[2659],{"type":407,"value":569},{"type":401,"tag":426,"props":2661,"children":2662},{"style":455},[2663],{"type":407,"value":1909},{"type":401,"tag":426,"props":2665,"children":2666},{"style":455},[2667],{"type":407,"value":484},{"type":401,"tag":426,"props":2669,"children":2670},{"class":428,"line":776},[2671,2676,2680,2684,2688,2693,2697,2702,2706,2711,2715,2721],{"type":401,"tag":426,"props":2672,"children":2673},{"style":491},[2674],{"type":407,"value":2675},"      return",{"type":401,"tag":426,"props":2677,"children":2678},{"style":503},[2679],{"type":407,"value":2388},{"type":401,"tag":426,"props":2681,"children":2682},{"style":497},[2683],{"type":407,"value":2642},{"type":401,"tag":426,"props":2685,"children":2686},{"style":503},[2687],{"type":407,"value":2158},{"type":401,"tag":426,"props":2689,"children":2690},{"style":497},[2691],{"type":407,"value":2692},"]",{"type":401,"tag":426,"props":2694,"children":2695},{"style":455},[2696],{"type":407,"value":511},{"type":401,"tag":426,"props":2698,"children":2699},{"style":449},[2700],{"type":407,"value":2701},"apply",{"type":401,"tag":426,"props":2703,"children":2704},{"style":497},[2705],{"type":407,"value":458},{"type":401,"tag":426,"props":2707,"children":2708},{"style":503},[2709],{"type":407,"value":2710},"self",{"type":401,"tag":426,"props":2712,"children":2713},{"style":455},[2714],{"type":407,"value":469},{"type":401,"tag":426,"props":2716,"children":2718},{"style":2717},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2719],{"type":407,"value":2720}," arguments",{"type":401,"tag":426,"props":2722,"children":2723},{"style":497},[2724],{"type":407,"value":618},{"type":401,"tag":426,"props":2726,"children":2727},{"class":428,"line":814},[2728],{"type":401,"tag":426,"props":2729,"children":2730},{"style":455},[2731],{"type":407,"value":1424},{"type":401,"tag":426,"props":2733,"children":2734},{"class":428,"line":823},[2735,2739],{"type":401,"tag":426,"props":2736,"children":2737},{"style":455},[2738],{"type":407,"value":1432},{"type":401,"tag":426,"props":2740,"children":2741},{"style":497},[2742],{"type":407,"value":618},{"type":401,"tag":426,"props":2744,"children":2745},{"class":428,"line":835},[2746,2751],{"type":401,"tag":426,"props":2747,"children":2748},{"style":491},[2749],{"type":407,"value":2750},"  return",{"type":401,"tag":426,"props":2752,"children":2753},{"style":503},[2754],{"type":407,"value":2755}," expose\n",{"type":401,"tag":426,"props":2757,"children":2758},{"class":428,"line":893},[2759],{"type":401,"tag":426,"props":2760,"children":2761},{"style":455},[2762],{"type":407,"value":1150},{"type":401,"tag":409,"props":2764,"children":2765},{},[2766],{"type":407,"value":2767},"监听路径支持传数组，我们当然希望就算是数组，也是由同一个 EventEmitter 来管理事件的，传入的是既然是数组，那么自然会生成多个 watcher 实例，只不过代码中使用了 composeWatcher 函数，把这些事件整合并向外发送。",{"type":401,"tag":415,"props":2769,"children":2771},{"className":417,"code":2770,"language":419,"meta":394,"style":394},"function composeWatcher(watchers) {\n  // 使用一个新的 watcher 整合事件列表\n  var watcher = new Watcher()\n  var filterDups = createDupsFilter()\n  var counter = watchers.length\n\n  watchers.forEach(function(w) {\n    w.on('change', filterDups(function(evt, name) {\n      watcher.emit('change', evt, name)\n    }))\n    w.on('error', function(err) {\n      watcher.emit('error', err)\n    })\n    w.on('ready', function() {\n      if (!(--counter)) {\n        emitReady(watcher)\n      }\n    })\n  })\n\n  watcher.close = function() {\n    watchers.forEach(function(w) {\n      w.close()\n    })\n    process.nextTick(emitClose, watcher)\n  }\n\n  watcher.getWatchedPaths = function(fn) {\n    if (is.func(fn)) {\n      var promises = watchers.map(function(w) {\n        return new Promise(function(resolve) {\n          w.getWatchedPaths(resolve)\n        })\n      })\n      Promise.all(promises).then(function(result) {\n        var ret = unique(flat1(result))\n        fn(ret)\n      })\n    }\n  }\n\n  return watcher.expose()\n}\n",[2772],{"type":401,"tag":422,"props":2773,"children":2774},{"__ignoreMap":394},[2775,2804,2812,2842,2867,2897,2904,2945,3017,3070,3082,3138,3182,3193,3241,3278,3298,3306,3317,3328,3335,3366,3406,3426,3437,3475,3482,3489,3529,3570,3625,3667,3696,3709,3721,3786,3829,3851,3863,3871,3879,3887,3911],{"type":401,"tag":426,"props":2776,"children":2777},{"class":428,"line":429},[2778,2782,2787,2791,2796,2800],{"type":401,"tag":426,"props":2779,"children":2780},{"style":443},[2781],{"type":407,"value":446},{"type":401,"tag":426,"props":2783,"children":2784},{"style":449},[2785],{"type":407,"value":2786}," composeWatcher",{"type":401,"tag":426,"props":2788,"children":2789},{"style":455},[2790],{"type":407,"value":458},{"type":401,"tag":426,"props":2792,"children":2793},{"style":461},[2794],{"type":407,"value":2795},"watchers",{"type":401,"tag":426,"props":2797,"children":2798},{"style":455},[2799],{"type":407,"value":479},{"type":401,"tag":426,"props":2801,"children":2802},{"style":455},[2803],{"type":407,"value":484},{"type":401,"tag":426,"props":2805,"children":2806},{"class":428,"line":439},[2807],{"type":401,"tag":426,"props":2808,"children":2809},{"style":433},[2810],{"type":407,"value":2811},"  // 使用一个新的 watcher 整合事件列表\n",{"type":401,"tag":426,"props":2813,"children":2814},{"class":428,"line":487},[2815,2819,2824,2828,2833,2838],{"type":401,"tag":426,"props":2816,"children":2817},{"style":443},[2818],{"type":407,"value":1211},{"type":401,"tag":426,"props":2820,"children":2821},{"style":503},[2822],{"type":407,"value":2823}," watcher",{"type":401,"tag":426,"props":2825,"children":2826},{"style":988},[2827],{"type":407,"value":991},{"type":401,"tag":426,"props":2829,"children":2830},{"style":988},[2831],{"type":407,"value":2832}," new",{"type":401,"tag":426,"props":2834,"children":2835},{"style":449},[2836],{"type":407,"value":2837}," Watcher",{"type":401,"tag":426,"props":2839,"children":2840},{"style":497},[2841],{"type":407,"value":1934},{"type":401,"tag":426,"props":2843,"children":2844},{"class":428,"line":537},[2845,2849,2854,2858,2863],{"type":401,"tag":426,"props":2846,"children":2847},{"style":443},[2848],{"type":407,"value":1211},{"type":401,"tag":426,"props":2850,"children":2851},{"style":503},[2852],{"type":407,"value":2853}," filterDups",{"type":401,"tag":426,"props":2855,"children":2856},{"style":988},[2857],{"type":407,"value":991},{"type":401,"tag":426,"props":2859,"children":2860},{"style":449},[2861],{"type":407,"value":2862}," createDupsFilter",{"type":401,"tag":426,"props":2864,"children":2865},{"style":497},[2866],{"type":407,"value":1934},{"type":401,"tag":426,"props":2868,"children":2869},{"class":428,"line":589},[2870,2874,2879,2883,2888,2892],{"type":401,"tag":426,"props":2871,"children":2872},{"style":443},[2873],{"type":407,"value":1211},{"type":401,"tag":426,"props":2875,"children":2876},{"style":503},[2877],{"type":407,"value":2878}," counter",{"type":401,"tag":426,"props":2880,"children":2881},{"style":988},[2882],{"type":407,"value":991},{"type":401,"tag":426,"props":2884,"children":2885},{"style":503},[2886],{"type":407,"value":2887}," watchers",{"type":401,"tag":426,"props":2889,"children":2890},{"style":455},[2891],{"type":407,"value":511},{"type":401,"tag":426,"props":2893,"children":2894},{"style":1648},[2895],{"type":407,"value":2896},"length\n",{"type":401,"tag":426,"props":2898,"children":2899},{"class":428,"line":621},[2900],{"type":401,"tag":426,"props":2901,"children":2902},{"emptyLinePlaceholder":393},[2903],{"type":407,"value":1659},{"type":401,"tag":426,"props":2905,"children":2906},{"class":428,"line":634},[2907,2912,2916,2920,2924,2928,2932,2937,2941],{"type":401,"tag":426,"props":2908,"children":2909},{"style":503},[2910],{"type":407,"value":2911},"  watchers",{"type":401,"tag":426,"props":2913,"children":2914},{"style":455},[2915],{"type":407,"value":511},{"type":401,"tag":426,"props":2917,"children":2918},{"style":449},[2919],{"type":407,"value":940},{"type":401,"tag":426,"props":2921,"children":2922},{"style":497},[2923],{"type":407,"value":458},{"type":401,"tag":426,"props":2925,"children":2926},{"style":443},[2927],{"type":407,"value":446},{"type":401,"tag":426,"props":2929,"children":2930},{"style":455},[2931],{"type":407,"value":458},{"type":401,"tag":426,"props":2933,"children":2934},{"style":461},[2935],{"type":407,"value":2936},"w",{"type":401,"tag":426,"props":2938,"children":2939},{"style":455},[2940],{"type":407,"value":479},{"type":401,"tag":426,"props":2942,"children":2943},{"style":455},[2944],{"type":407,"value":484},{"type":401,"tag":426,"props":2946,"children":2947},{"class":428,"line":643},[2948,2953,2957,2961,2965,2969,2973,2977,2981,2985,2989,2993,2997,3001,3005,3009,3013],{"type":401,"tag":426,"props":2949,"children":2950},{"style":503},[2951],{"type":407,"value":2952},"    w",{"type":401,"tag":426,"props":2954,"children":2955},{"style":455},[2956],{"type":407,"value":511},{"type":401,"tag":426,"props":2958,"children":2959},{"style":449},[2960],{"type":407,"value":2048},{"type":401,"tag":426,"props":2962,"children":2963},{"style":497},[2964],{"type":407,"value":458},{"type":401,"tag":426,"props":2966,"children":2967},{"style":1249},[2968],{"type":407,"value":1263},{"type":401,"tag":426,"props":2970,"children":2971},{"style":1255},[2972],{"type":407,"value":2061},{"type":401,"tag":426,"props":2974,"children":2975},{"style":1249},[2976],{"type":407,"value":1263},{"type":401,"tag":426,"props":2978,"children":2979},{"style":455},[2980],{"type":407,"value":469},{"type":401,"tag":426,"props":2982,"children":2983},{"style":449},[2984],{"type":407,"value":2853},{"type":401,"tag":426,"props":2986,"children":2987},{"style":497},[2988],{"type":407,"value":458},{"type":401,"tag":426,"props":2990,"children":2991},{"style":443},[2992],{"type":407,"value":446},{"type":401,"tag":426,"props":2994,"children":2995},{"style":455},[2996],{"type":407,"value":458},{"type":401,"tag":426,"props":2998,"children":2999},{"style":461},[3000],{"type":407,"value":1309},{"type":401,"tag":426,"props":3002,"children":3003},{"style":455},[3004],{"type":407,"value":469},{"type":401,"tag":426,"props":3006,"children":3007},{"style":461},[3008],{"type":407,"value":2090},{"type":401,"tag":426,"props":3010,"children":3011},{"style":455},[3012],{"type":407,"value":479},{"type":401,"tag":426,"props":3014,"children":3015},{"style":455},[3016],{"type":407,"value":484},{"type":401,"tag":426,"props":3018,"children":3019},{"class":428,"line":652},[3020,3025,3029,3033,3037,3041,3045,3049,3053,3058,3062,3066],{"type":401,"tag":426,"props":3021,"children":3022},{"style":503},[3023],{"type":407,"value":3024},"      watcher",{"type":401,"tag":426,"props":3026,"children":3027},{"style":455},[3028],{"type":407,"value":511},{"type":401,"tag":426,"props":3030,"children":3031},{"style":449},[3032],{"type":407,"value":2448},{"type":401,"tag":426,"props":3034,"children":3035},{"style":497},[3036],{"type":407,"value":458},{"type":401,"tag":426,"props":3038,"children":3039},{"style":1249},[3040],{"type":407,"value":1263},{"type":401,"tag":426,"props":3042,"children":3043},{"style":1255},[3044],{"type":407,"value":2061},{"type":401,"tag":426,"props":3046,"children":3047},{"style":1249},[3048],{"type":407,"value":1263},{"type":401,"tag":426,"props":3050,"children":3051},{"style":455},[3052],{"type":407,"value":469},{"type":401,"tag":426,"props":3054,"children":3055},{"style":503},[3056],{"type":407,"value":3057}," evt",{"type":401,"tag":426,"props":3059,"children":3060},{"style":455},[3061],{"type":407,"value":469},{"type":401,"tag":426,"props":3063,"children":3064},{"style":503},[3065],{"type":407,"value":2090},{"type":401,"tag":426,"props":3067,"children":3068},{"style":497},[3069],{"type":407,"value":618},{"type":401,"tag":426,"props":3071,"children":3072},{"class":428,"line":693},[3073,3077],{"type":401,"tag":426,"props":3074,"children":3075},{"style":455},[3076],{"type":407,"value":627},{"type":401,"tag":426,"props":3078,"children":3079},{"style":497},[3080],{"type":407,"value":3081},"))\n",{"type":401,"tag":426,"props":3083,"children":3084},{"class":428,"line":751},[3085,3089,3093,3097,3101,3105,3110,3114,3118,3122,3126,3130,3134],{"type":401,"tag":426,"props":3086,"children":3087},{"style":503},[3088],{"type":407,"value":2952},{"type":401,"tag":426,"props":3090,"children":3091},{"style":455},[3092],{"type":407,"value":511},{"type":401,"tag":426,"props":3094,"children":3095},{"style":449},[3096],{"type":407,"value":2048},{"type":401,"tag":426,"props":3098,"children":3099},{"style":497},[3100],{"type":407,"value":458},{"type":401,"tag":426,"props":3102,"children":3103},{"style":1249},[3104],{"type":407,"value":1263},{"type":401,"tag":426,"props":3106,"children":3107},{"style":1255},[3108],{"type":407,"value":3109},"error",{"type":401,"tag":426,"props":3111,"children":3112},{"style":1249},[3113],{"type":407,"value":1263},{"type":401,"tag":426,"props":3115,"children":3116},{"style":455},[3117],{"type":407,"value":469},{"type":401,"tag":426,"props":3119,"children":3120},{"style":443},[3121],{"type":407,"value":569},{"type":401,"tag":426,"props":3123,"children":3124},{"style":455},[3125],{"type":407,"value":458},{"type":401,"tag":426,"props":3127,"children":3128},{"style":461},[3129],{"type":407,"value":578},{"type":401,"tag":426,"props":3131,"children":3132},{"style":455},[3133],{"type":407,"value":479},{"type":401,"tag":426,"props":3135,"children":3136},{"style":455},[3137],{"type":407,"value":484},{"type":401,"tag":426,"props":3139,"children":3140},{"class":428,"line":776},[3141,3145,3149,3153,3157,3161,3165,3169,3173,3178],{"type":401,"tag":426,"props":3142,"children":3143},{"style":503},[3144],{"type":407,"value":3024},{"type":401,"tag":426,"props":3146,"children":3147},{"style":455},[3148],{"type":407,"value":511},{"type":401,"tag":426,"props":3150,"children":3151},{"style":449},[3152],{"type":407,"value":2448},{"type":401,"tag":426,"props":3154,"children":3155},{"style":497},[3156],{"type":407,"value":458},{"type":401,"tag":426,"props":3158,"children":3159},{"style":1249},[3160],{"type":407,"value":1263},{"type":401,"tag":426,"props":3162,"children":3163},{"style":1255},[3164],{"type":407,"value":3109},{"type":401,"tag":426,"props":3166,"children":3167},{"style":1249},[3168],{"type":407,"value":1263},{"type":401,"tag":426,"props":3170,"children":3171},{"style":455},[3172],{"type":407,"value":469},{"type":401,"tag":426,"props":3174,"children":3175},{"style":503},[3176],{"type":407,"value":3177}," err",{"type":401,"tag":426,"props":3179,"children":3180},{"style":497},[3181],{"type":407,"value":618},{"type":401,"tag":426,"props":3183,"children":3184},{"class":428,"line":814},[3185,3189],{"type":401,"tag":426,"props":3186,"children":3187},{"style":455},[3188],{"type":407,"value":627},{"type":401,"tag":426,"props":3190,"children":3191},{"style":497},[3192],{"type":407,"value":618},{"type":401,"tag":426,"props":3194,"children":3195},{"class":428,"line":823},[3196,3200,3204,3208,3212,3216,3221,3225,3229,3233,3237],{"type":401,"tag":426,"props":3197,"children":3198},{"style":503},[3199],{"type":407,"value":2952},{"type":401,"tag":426,"props":3201,"children":3202},{"style":455},[3203],{"type":407,"value":511},{"type":401,"tag":426,"props":3205,"children":3206},{"style":449},[3207],{"type":407,"value":2048},{"type":401,"tag":426,"props":3209,"children":3210},{"style":497},[3211],{"type":407,"value":458},{"type":401,"tag":426,"props":3213,"children":3214},{"style":1249},[3215],{"type":407,"value":1263},{"type":401,"tag":426,"props":3217,"children":3218},{"style":1255},[3219],{"type":407,"value":3220},"ready",{"type":401,"tag":426,"props":3222,"children":3223},{"style":1249},[3224],{"type":407,"value":1263},{"type":401,"tag":426,"props":3226,"children":3227},{"style":455},[3228],{"type":407,"value":469},{"type":401,"tag":426,"props":3230,"children":3231},{"style":443},[3232],{"type":407,"value":569},{"type":401,"tag":426,"props":3234,"children":3235},{"style":455},[3236],{"type":407,"value":1909},{"type":401,"tag":426,"props":3238,"children":3239},{"style":455},[3240],{"type":407,"value":484},{"type":401,"tag":426,"props":3242,"children":3243},{"class":428,"line":835},[3244,3248,3252,3257,3261,3265,3270,3274],{"type":401,"tag":426,"props":3245,"children":3246},{"style":491},[3247],{"type":407,"value":899},{"type":401,"tag":426,"props":3249,"children":3250},{"style":497},[3251],{"type":407,"value":500},{"type":401,"tag":426,"props":3253,"children":3254},{"style":988},[3255],{"type":407,"value":3256},"!",{"type":401,"tag":426,"props":3258,"children":3259},{"style":497},[3260],{"type":407,"value":458},{"type":401,"tag":426,"props":3262,"children":3263},{"style":988},[3264],{"type":407,"value":1596},{"type":401,"tag":426,"props":3266,"children":3267},{"style":503},[3268],{"type":407,"value":3269},"counter",{"type":401,"tag":426,"props":3271,"children":3272},{"style":497},[3273],{"type":407,"value":529},{"type":401,"tag":426,"props":3275,"children":3276},{"style":455},[3277],{"type":407,"value":534},{"type":401,"tag":426,"props":3279,"children":3280},{"class":428,"line":893},[3281,3286,3290,3294],{"type":401,"tag":426,"props":3282,"children":3283},{"style":449},[3284],{"type":407,"value":3285},"        emitReady",{"type":401,"tag":426,"props":3287,"children":3288},{"style":497},[3289],{"type":407,"value":458},{"type":401,"tag":426,"props":3291,"children":3292},{"style":503},[3293],{"type":407,"value":2039},{"type":401,"tag":426,"props":3295,"children":3296},{"style":497},[3297],{"type":407,"value":618},{"type":401,"tag":426,"props":3299,"children":3300},{"class":428,"line":925},[3301],{"type":401,"tag":426,"props":3302,"children":3303},{"style":455},[3304],{"type":407,"value":3305},"      }\n",{"type":401,"tag":426,"props":3307,"children":3308},{"class":428,"line":974},[3309,3313],{"type":401,"tag":426,"props":3310,"children":3311},{"style":455},[3312],{"type":407,"value":627},{"type":401,"tag":426,"props":3314,"children":3315},{"style":497},[3316],{"type":407,"value":618},{"type":401,"tag":426,"props":3318,"children":3319},{"class":428,"line":1028},[3320,3324],{"type":401,"tag":426,"props":3321,"children":3322},{"style":455},[3323],{"type":407,"value":1432},{"type":401,"tag":426,"props":3325,"children":3326},{"style":497},[3327],{"type":407,"value":618},{"type":401,"tag":426,"props":3329,"children":3330},{"class":428,"line":1072},[3331],{"type":401,"tag":426,"props":3332,"children":3333},{"emptyLinePlaceholder":393},[3334],{"type":407,"value":1659},{"type":401,"tag":426,"props":3336,"children":3337},{"class":428,"line":1101},[3338,3342,3346,3350,3354,3358,3362],{"type":401,"tag":426,"props":3339,"children":3340},{"style":503},[3341],{"type":407,"value":1679},{"type":401,"tag":426,"props":3343,"children":3344},{"style":455},[3345],{"type":407,"value":511},{"type":401,"tag":426,"props":3347,"children":3348},{"style":449},[3349],{"type":407,"value":1929},{"type":401,"tag":426,"props":3351,"children":3352},{"style":988},[3353],{"type":407,"value":991},{"type":401,"tag":426,"props":3355,"children":3356},{"style":443},[3357],{"type":407,"value":569},{"type":401,"tag":426,"props":3359,"children":3360},{"style":455},[3361],{"type":407,"value":1909},{"type":401,"tag":426,"props":3363,"children":3364},{"style":455},[3365],{"type":407,"value":484},{"type":401,"tag":426,"props":3367,"children":3368},{"class":428,"line":1110},[3369,3374,3378,3382,3386,3390,3394,3398,3402],{"type":401,"tag":426,"props":3370,"children":3371},{"style":503},[3372],{"type":407,"value":3373},"    watchers",{"type":401,"tag":426,"props":3375,"children":3376},{"style":455},[3377],{"type":407,"value":511},{"type":401,"tag":426,"props":3379,"children":3380},{"style":449},[3381],{"type":407,"value":940},{"type":401,"tag":426,"props":3383,"children":3384},{"style":497},[3385],{"type":407,"value":458},{"type":401,"tag":426,"props":3387,"children":3388},{"style":443},[3389],{"type":407,"value":446},{"type":401,"tag":426,"props":3391,"children":3392},{"style":455},[3393],{"type":407,"value":458},{"type":401,"tag":426,"props":3395,"children":3396},{"style":461},[3397],{"type":407,"value":2936},{"type":401,"tag":426,"props":3399,"children":3400},{"style":455},[3401],{"type":407,"value":479},{"type":401,"tag":426,"props":3403,"children":3404},{"style":455},[3405],{"type":407,"value":484},{"type":401,"tag":426,"props":3407,"children":3408},{"class":428,"line":1123},[3409,3414,3418,3422],{"type":401,"tag":426,"props":3410,"children":3411},{"style":503},[3412],{"type":407,"value":3413},"      w",{"type":401,"tag":426,"props":3415,"children":3416},{"style":455},[3417],{"type":407,"value":511},{"type":401,"tag":426,"props":3419,"children":3420},{"style":449},[3421],{"type":407,"value":1929},{"type":401,"tag":426,"props":3423,"children":3424},{"style":497},[3425],{"type":407,"value":1934},{"type":401,"tag":426,"props":3427,"children":3428},{"class":428,"line":1136},[3429,3433],{"type":401,"tag":426,"props":3430,"children":3431},{"style":455},[3432],{"type":407,"value":627},{"type":401,"tag":426,"props":3434,"children":3435},{"style":497},[3436],{"type":407,"value":618},{"type":401,"tag":426,"props":3438,"children":3439},{"class":428,"line":1144},[3440,3445,3449,3454,3458,3463,3467,3471],{"type":401,"tag":426,"props":3441,"children":3442},{"style":503},[3443],{"type":407,"value":3444},"    process",{"type":401,"tag":426,"props":3446,"children":3447},{"style":455},[3448],{"type":407,"value":511},{"type":401,"tag":426,"props":3450,"children":3451},{"style":449},[3452],{"type":407,"value":3453},"nextTick",{"type":401,"tag":426,"props":3455,"children":3456},{"style":497},[3457],{"type":407,"value":458},{"type":401,"tag":426,"props":3459,"children":3460},{"style":503},[3461],{"type":407,"value":3462},"emitClose",{"type":401,"tag":426,"props":3464,"children":3465},{"style":455},[3466],{"type":407,"value":469},{"type":401,"tag":426,"props":3468,"children":3469},{"style":503},[3470],{"type":407,"value":2823},{"type":401,"tag":426,"props":3472,"children":3473},{"style":497},[3474],{"type":407,"value":618},{"type":401,"tag":426,"props":3476,"children":3477},{"class":428,"line":2271},[3478],{"type":401,"tag":426,"props":3479,"children":3480},{"style":455},[3481],{"type":407,"value":649},{"type":401,"tag":426,"props":3483,"children":3484},{"class":428,"line":2283},[3485],{"type":401,"tag":426,"props":3486,"children":3487},{"emptyLinePlaceholder":393},[3488],{"type":407,"value":1659},{"type":401,"tag":426,"props":3490,"children":3491},{"class":428,"line":2291},[3492,3496,3500,3504,3508,3512,3516,3521,3525],{"type":401,"tag":426,"props":3493,"children":3494},{"style":503},[3495],{"type":407,"value":1679},{"type":401,"tag":426,"props":3497,"children":3498},{"style":455},[3499],{"type":407,"value":511},{"type":401,"tag":426,"props":3501,"children":3502},{"style":449},[3503],{"type":407,"value":2576},{"type":401,"tag":426,"props":3505,"children":3506},{"style":988},[3507],{"type":407,"value":991},{"type":401,"tag":426,"props":3509,"children":3510},{"style":443},[3511],{"type":407,"value":569},{"type":401,"tag":426,"props":3513,"children":3514},{"style":455},[3515],{"type":407,"value":458},{"type":401,"tag":426,"props":3517,"children":3518},{"style":461},[3519],{"type":407,"value":3520},"fn",{"type":401,"tag":426,"props":3522,"children":3523},{"style":455},[3524],{"type":407,"value":479},{"type":401,"tag":426,"props":3526,"children":3527},{"style":455},[3528],{"type":407,"value":484},{"type":401,"tag":426,"props":3530,"children":3532},{"class":428,"line":3531},29,[3533,3537,3541,3545,3549,3554,3558,3562,3566],{"type":401,"tag":426,"props":3534,"children":3535},{"style":491},[3536],{"type":407,"value":1333},{"type":401,"tag":426,"props":3538,"children":3539},{"style":497},[3540],{"type":407,"value":500},{"type":401,"tag":426,"props":3542,"children":3543},{"style":503},[3544],{"type":407,"value":506},{"type":401,"tag":426,"props":3546,"children":3547},{"style":455},[3548],{"type":407,"value":511},{"type":401,"tag":426,"props":3550,"children":3551},{"style":449},[3552],{"type":407,"value":3553},"func",{"type":401,"tag":426,"props":3555,"children":3556},{"style":497},[3557],{"type":407,"value":458},{"type":401,"tag":426,"props":3559,"children":3560},{"style":503},[3561],{"type":407,"value":3520},{"type":401,"tag":426,"props":3563,"children":3564},{"style":497},[3565],{"type":407,"value":529},{"type":401,"tag":426,"props":3567,"children":3568},{"style":455},[3569],{"type":407,"value":534},{"type":401,"tag":426,"props":3571,"children":3573},{"class":428,"line":3572},30,[3574,3579,3584,3588,3592,3596,3601,3605,3609,3613,3617,3621],{"type":401,"tag":426,"props":3575,"children":3576},{"style":443},[3577],{"type":407,"value":3578},"      var",{"type":401,"tag":426,"props":3580,"children":3581},{"style":503},[3582],{"type":407,"value":3583}," promises",{"type":401,"tag":426,"props":3585,"children":3586},{"style":988},[3587],{"type":407,"value":991},{"type":401,"tag":426,"props":3589,"children":3590},{"style":503},[3591],{"type":407,"value":2887},{"type":401,"tag":426,"props":3593,"children":3594},{"style":455},[3595],{"type":407,"value":511},{"type":401,"tag":426,"props":3597,"children":3598},{"style":449},[3599],{"type":407,"value":3600},"map",{"type":401,"tag":426,"props":3602,"children":3603},{"style":497},[3604],{"type":407,"value":458},{"type":401,"tag":426,"props":3606,"children":3607},{"style":443},[3608],{"type":407,"value":446},{"type":401,"tag":426,"props":3610,"children":3611},{"style":455},[3612],{"type":407,"value":458},{"type":401,"tag":426,"props":3614,"children":3615},{"style":461},[3616],{"type":407,"value":2936},{"type":401,"tag":426,"props":3618,"children":3619},{"style":455},[3620],{"type":407,"value":479},{"type":401,"tag":426,"props":3622,"children":3623},{"style":455},[3624],{"type":407,"value":484},{"type":401,"tag":426,"props":3626,"children":3628},{"class":428,"line":3627},31,[3629,3634,3638,3643,3647,3651,3655,3659,3663],{"type":401,"tag":426,"props":3630,"children":3631},{"style":491},[3632],{"type":407,"value":3633},"        return",{"type":401,"tag":426,"props":3635,"children":3636},{"style":988},[3637],{"type":407,"value":2832},{"type":401,"tag":426,"props":3639,"children":3640},{"style":2318},[3641],{"type":407,"value":3642}," Promise",{"type":401,"tag":426,"props":3644,"children":3645},{"style":497},[3646],{"type":407,"value":458},{"type":401,"tag":426,"props":3648,"children":3649},{"style":443},[3650],{"type":407,"value":446},{"type":401,"tag":426,"props":3652,"children":3653},{"style":455},[3654],{"type":407,"value":458},{"type":401,"tag":426,"props":3656,"children":3657},{"style":461},[3658],{"type":407,"value":1233},{"type":401,"tag":426,"props":3660,"children":3661},{"style":455},[3662],{"type":407,"value":479},{"type":401,"tag":426,"props":3664,"children":3665},{"style":455},[3666],{"type":407,"value":484},{"type":401,"tag":426,"props":3668,"children":3670},{"class":428,"line":3669},32,[3671,3676,3680,3684,3688,3692],{"type":401,"tag":426,"props":3672,"children":3673},{"style":503},[3674],{"type":407,"value":3675},"          w",{"type":401,"tag":426,"props":3677,"children":3678},{"style":455},[3679],{"type":407,"value":511},{"type":401,"tag":426,"props":3681,"children":3682},{"style":449},[3683],{"type":407,"value":2576},{"type":401,"tag":426,"props":3685,"children":3686},{"style":497},[3687],{"type":407,"value":458},{"type":401,"tag":426,"props":3689,"children":3690},{"style":503},[3691],{"type":407,"value":1233},{"type":401,"tag":426,"props":3693,"children":3694},{"style":497},[3695],{"type":407,"value":618},{"type":401,"tag":426,"props":3697,"children":3699},{"class":428,"line":3698},33,[3700,3705],{"type":401,"tag":426,"props":3701,"children":3702},{"style":455},[3703],{"type":407,"value":3704},"        }",{"type":401,"tag":426,"props":3706,"children":3707},{"style":497},[3708],{"type":407,"value":618},{"type":401,"tag":426,"props":3710,"children":3712},{"class":428,"line":3711},34,[3713,3717],{"type":401,"tag":426,"props":3714,"children":3715},{"style":455},[3716],{"type":407,"value":1116},{"type":401,"tag":426,"props":3718,"children":3719},{"style":497},[3720],{"type":407,"value":618},{"type":401,"tag":426,"props":3722,"children":3724},{"class":428,"line":3723},35,[3725,3730,3734,3739,3743,3748,3752,3756,3761,3765,3769,3773,3778,3782],{"type":401,"tag":426,"props":3726,"children":3727},{"style":2318},[3728],{"type":407,"value":3729},"      Promise",{"type":401,"tag":426,"props":3731,"children":3732},{"style":455},[3733],{"type":407,"value":511},{"type":401,"tag":426,"props":3735,"children":3736},{"style":449},[3737],{"type":407,"value":3738},"all",{"type":401,"tag":426,"props":3740,"children":3741},{"style":497},[3742],{"type":407,"value":458},{"type":401,"tag":426,"props":3744,"children":3745},{"style":503},[3746],{"type":407,"value":3747},"promises",{"type":401,"tag":426,"props":3749,"children":3750},{"style":497},[3751],{"type":407,"value":479},{"type":401,"tag":426,"props":3753,"children":3754},{"style":455},[3755],{"type":407,"value":511},{"type":401,"tag":426,"props":3757,"children":3758},{"style":449},[3759],{"type":407,"value":3760},"then",{"type":401,"tag":426,"props":3762,"children":3763},{"style":497},[3764],{"type":407,"value":458},{"type":401,"tag":426,"props":3766,"children":3767},{"style":443},[3768],{"type":407,"value":446},{"type":401,"tag":426,"props":3770,"children":3771},{"style":455},[3772],{"type":407,"value":458},{"type":401,"tag":426,"props":3774,"children":3775},{"style":461},[3776],{"type":407,"value":3777},"result",{"type":401,"tag":426,"props":3779,"children":3780},{"style":455},[3781],{"type":407,"value":479},{"type":401,"tag":426,"props":3783,"children":3784},{"style":455},[3785],{"type":407,"value":484},{"type":401,"tag":426,"props":3787,"children":3789},{"class":428,"line":3788},36,[3790,3794,3799,3803,3808,3812,3817,3821,3825],{"type":401,"tag":426,"props":3791,"children":3792},{"style":443},[3793],{"type":407,"value":980},{"type":401,"tag":426,"props":3795,"children":3796},{"style":503},[3797],{"type":407,"value":3798}," ret",{"type":401,"tag":426,"props":3800,"children":3801},{"style":988},[3802],{"type":407,"value":991},{"type":401,"tag":426,"props":3804,"children":3805},{"style":449},[3806],{"type":407,"value":3807}," unique",{"type":401,"tag":426,"props":3809,"children":3810},{"style":497},[3811],{"type":407,"value":458},{"type":401,"tag":426,"props":3813,"children":3814},{"style":449},[3815],{"type":407,"value":3816},"flat1",{"type":401,"tag":426,"props":3818,"children":3819},{"style":497},[3820],{"type":407,"value":458},{"type":401,"tag":426,"props":3822,"children":3823},{"style":503},[3824],{"type":407,"value":3777},{"type":401,"tag":426,"props":3826,"children":3827},{"style":497},[3828],{"type":407,"value":3081},{"type":401,"tag":426,"props":3830,"children":3832},{"class":428,"line":3831},37,[3833,3838,3842,3847],{"type":401,"tag":426,"props":3834,"children":3835},{"style":449},[3836],{"type":407,"value":3837},"        fn",{"type":401,"tag":426,"props":3839,"children":3840},{"style":497},[3841],{"type":407,"value":458},{"type":401,"tag":426,"props":3843,"children":3844},{"style":503},[3845],{"type":407,"value":3846},"ret",{"type":401,"tag":426,"props":3848,"children":3849},{"style":497},[3850],{"type":407,"value":618},{"type":401,"tag":426,"props":3852,"children":3854},{"class":428,"line":3853},38,[3855,3859],{"type":401,"tag":426,"props":3856,"children":3857},{"style":455},[3858],{"type":407,"value":1116},{"type":401,"tag":426,"props":3860,"children":3861},{"style":497},[3862],{"type":407,"value":618},{"type":401,"tag":426,"props":3864,"children":3866},{"class":428,"line":3865},39,[3867],{"type":401,"tag":426,"props":3868,"children":3869},{"style":455},[3870],{"type":407,"value":1424},{"type":401,"tag":426,"props":3872,"children":3874},{"class":428,"line":3873},40,[3875],{"type":401,"tag":426,"props":3876,"children":3877},{"style":455},[3878],{"type":407,"value":649},{"type":401,"tag":426,"props":3880,"children":3882},{"class":428,"line":3881},41,[3883],{"type":401,"tag":426,"props":3884,"children":3885},{"emptyLinePlaceholder":393},[3886],{"type":407,"value":1659},{"type":401,"tag":426,"props":3888,"children":3890},{"class":428,"line":3889},42,[3891,3895,3899,3903,3907],{"type":401,"tag":426,"props":3892,"children":3893},{"style":491},[3894],{"type":407,"value":2750},{"type":401,"tag":426,"props":3896,"children":3897},{"style":503},[3898],{"type":407,"value":2823},{"type":401,"tag":426,"props":3900,"children":3901},{"style":455},[3902],{"type":407,"value":511},{"type":401,"tag":426,"props":3904,"children":3905},{"style":449},[3906],{"type":407,"value":2339},{"type":401,"tag":426,"props":3908,"children":3909},{"style":497},[3910],{"type":407,"value":1934},{"type":401,"tag":426,"props":3912,"children":3914},{"class":428,"line":3913},43,[3915],{"type":401,"tag":426,"props":3916,"children":3917},{"style":455},[3918],{"type":407,"value":1150},{"type":401,"tag":402,"props":3920,"children":3922},{"id":3921},"工具函数",[3923],{"type":407,"value":3921},{"type":401,"tag":409,"props":3925,"children":3926},{},[3927],{"type":407,"value":3928},"通过索引快速去重。第一次见到有人使用 filter 方法的第三个参数。",{"type":401,"tag":415,"props":3930,"children":3932},{"className":417,"code":3931,"language":419,"meta":394,"style":394},"function unique(arr) {\n  return arr.filter(function(v, i, self) {\n    return self.indexOf(v) === i\n  })\n}\n",[3933],{"type":401,"tag":422,"props":3934,"children":3935},{"__ignoreMap":394},[3936,3964,4027,4068,4079],{"type":401,"tag":426,"props":3937,"children":3938},{"class":428,"line":429},[3939,3943,3947,3951,3956,3960],{"type":401,"tag":426,"props":3940,"children":3941},{"style":443},[3942],{"type":407,"value":446},{"type":401,"tag":426,"props":3944,"children":3945},{"style":449},[3946],{"type":407,"value":3807},{"type":401,"tag":426,"props":3948,"children":3949},{"style":455},[3950],{"type":407,"value":458},{"type":401,"tag":426,"props":3952,"children":3953},{"style":461},[3954],{"type":407,"value":3955},"arr",{"type":401,"tag":426,"props":3957,"children":3958},{"style":455},[3959],{"type":407,"value":479},{"type":401,"tag":426,"props":3961,"children":3962},{"style":455},[3963],{"type":407,"value":484},{"type":401,"tag":426,"props":3965,"children":3966},{"class":428,"line":439},[3967,3971,3976,3980,3985,3989,3993,3997,4002,4006,4011,4015,4019,4023],{"type":401,"tag":426,"props":3968,"children":3969},{"style":491},[3970],{"type":407,"value":2750},{"type":401,"tag":426,"props":3972,"children":3973},{"style":503},[3974],{"type":407,"value":3975}," arr",{"type":401,"tag":426,"props":3977,"children":3978},{"style":455},[3979],{"type":407,"value":511},{"type":401,"tag":426,"props":3981,"children":3982},{"style":449},[3983],{"type":407,"value":3984},"filter",{"type":401,"tag":426,"props":3986,"children":3987},{"style":497},[3988],{"type":407,"value":458},{"type":401,"tag":426,"props":3990,"children":3991},{"style":443},[3992],{"type":407,"value":446},{"type":401,"tag":426,"props":3994,"children":3995},{"style":455},[3996],{"type":407,"value":458},{"type":401,"tag":426,"props":3998,"children":3999},{"style":461},[4000],{"type":407,"value":4001},"v",{"type":401,"tag":426,"props":4003,"children":4004},{"style":455},[4005],{"type":407,"value":469},{"type":401,"tag":426,"props":4007,"children":4008},{"style":461},[4009],{"type":407,"value":4010}," i",{"type":401,"tag":426,"props":4012,"children":4013},{"style":455},[4014],{"type":407,"value":469},{"type":401,"tag":426,"props":4016,"children":4017},{"style":461},[4018],{"type":407,"value":2388},{"type":401,"tag":426,"props":4020,"children":4021},{"style":455},[4022],{"type":407,"value":479},{"type":401,"tag":426,"props":4024,"children":4025},{"style":455},[4026],{"type":407,"value":484},{"type":401,"tag":426,"props":4028,"children":4029},{"class":428,"line":487},[4030,4034,4038,4042,4047,4051,4055,4059,4063],{"type":401,"tag":426,"props":4031,"children":4032},{"style":491},[4033],{"type":407,"value":1796},{"type":401,"tag":426,"props":4035,"children":4036},{"style":503},[4037],{"type":407,"value":2388},{"type":401,"tag":426,"props":4039,"children":4040},{"style":455},[4041],{"type":407,"value":511},{"type":401,"tag":426,"props":4043,"children":4044},{"style":449},[4045],{"type":407,"value":4046},"indexOf",{"type":401,"tag":426,"props":4048,"children":4049},{"style":497},[4050],{"type":407,"value":458},{"type":401,"tag":426,"props":4052,"children":4053},{"style":503},[4054],{"type":407,"value":4001},{"type":401,"tag":426,"props":4056,"children":4057},{"style":497},[4058],{"type":407,"value":912},{"type":401,"tag":426,"props":4060,"children":4061},{"style":988},[4062],{"type":407,"value":1368},{"type":401,"tag":426,"props":4064,"children":4065},{"style":503},[4066],{"type":407,"value":4067}," i\n",{"type":401,"tag":426,"props":4069,"children":4070},{"class":428,"line":537},[4071,4075],{"type":401,"tag":426,"props":4072,"children":4073},{"style":455},[4074],{"type":407,"value":1432},{"type":401,"tag":426,"props":4076,"children":4077},{"style":497},[4078],{"type":407,"value":618},{"type":401,"tag":426,"props":4080,"children":4081},{"class":428,"line":589},[4082],{"type":401,"tag":426,"props":4083,"children":4084},{"style":455},[4085],{"type":407,"value":1150},{"type":401,"tag":409,"props":4087,"children":4088},{},[4089],{"type":407,"value":4090},"获取 UUID，这个有意思，但不知道效率怎么样。",{"type":401,"tag":415,"props":4092,"children":4094},{"className":417,"code":4093,"language":419,"meta":394,"style":394},"const getUUID = () => Math.random().toString(16).substr(2)\n",[4095],{"type":401,"tag":422,"props":4096,"children":4097},{"__ignoreMap":394},[4098],{"type":401,"tag":426,"props":4099,"children":4100},{"class":428,"line":429},[4101,4106,4112,4116,4121,4126,4131,4135,4140,4144,4148,4153,4157,4162,4166,4170,4175,4179,4184],{"type":401,"tag":426,"props":4102,"children":4103},{"style":443},[4104],{"type":407,"value":4105},"const",{"type":401,"tag":426,"props":4107,"children":4109},{"style":4108},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[4110],{"type":407,"value":4111}," getUUID",{"type":401,"tag":426,"props":4113,"children":4114},{"style":988},[4115],{"type":407,"value":991},{"type":401,"tag":426,"props":4117,"children":4118},{"style":455},[4119],{"type":407,"value":4120}," ()",{"type":401,"tag":426,"props":4122,"children":4123},{"style":443},[4124],{"type":407,"value":4125}," =>",{"type":401,"tag":426,"props":4127,"children":4128},{"style":503},[4129],{"type":407,"value":4130}," Math",{"type":401,"tag":426,"props":4132,"children":4133},{"style":455},[4134],{"type":407,"value":511},{"type":401,"tag":426,"props":4136,"children":4137},{"style":449},[4138],{"type":407,"value":4139},"random",{"type":401,"tag":426,"props":4141,"children":4142},{"style":503},[4143],{"type":407,"value":1909},{"type":401,"tag":426,"props":4145,"children":4146},{"style":455},[4147],{"type":407,"value":511},{"type":401,"tag":426,"props":4149,"children":4150},{"style":449},[4151],{"type":407,"value":4152},"toString",{"type":401,"tag":426,"props":4154,"children":4155},{"style":503},[4156],{"type":407,"value":458},{"type":401,"tag":426,"props":4158,"children":4159},{"style":2017},[4160],{"type":407,"value":4161},"16",{"type":401,"tag":426,"props":4163,"children":4164},{"style":503},[4165],{"type":407,"value":479},{"type":401,"tag":426,"props":4167,"children":4168},{"style":455},[4169],{"type":407,"value":511},{"type":401,"tag":426,"props":4171,"children":4172},{"style":449},[4173],{"type":407,"value":4174},"substr",{"type":401,"tag":426,"props":4176,"children":4177},{"style":503},[4178],{"type":407,"value":458},{"type":401,"tag":426,"props":4180,"children":4181},{"style":2017},[4182],{"type":407,"value":4183},"2",{"type":401,"tag":426,"props":4185,"children":4186},{"style":503},[4187],{"type":407,"value":618},{"type":401,"tag":402,"props":4189,"children":4191},{"id":4190},"考虑的点",[4192],{"type":407,"value":4190},{"type":401,"tag":409,"props":4194,"children":4195},{},[4196],{"type":407,"value":4197},"最后总结一下一些框架设计相关的小细节，如果需要自己设计一个 fs.watch，可能要做以下考虑：",{"type":401,"tag":4199,"props":4200,"children":4201},"ul",{},[4202,4208,4213,4218],{"type":401,"tag":4203,"props":4204,"children":4205},"li",{},[4206],{"type":407,"value":4207},"使用原生依赖吗？使用原生依赖会带来更高的性能，但是也会增加代码难度以及测试的复杂度",{"type":401,"tag":4203,"props":4209,"children":4210},{},[4211],{"type":407,"value":4212},"支持本地符号路径吗？支持网络路径吗？",{"type":401,"tag":4203,"props":4214,"children":4215},{},[4216],{"type":407,"value":4217},"如何控制包的大小？",{"type":401,"tag":4203,"props":4219,"children":4220},{},[4221],{"type":407,"value":4222},"由于不同系统的底层依赖不同，那么 API 要怎么设计，屏蔽底层，才能便于使用？",{"type":401,"tag":409,"props":4224,"children":4225},{},[4226],{"type":407,"value":4227},"也注意到一些有意思的问题：",{"type":401,"tag":4199,"props":4229,"children":4230},{},[4231,4243,4255],{"type":401,"tag":4203,"props":4232,"children":4233},{},[4234,4236],{"type":407,"value":4235},"Windows，删除正在监听的文件夹，",{"type":401,"tag":1157,"props":4237,"children":4240},{"href":4238,"rel":4239},"https://github.com/nodejs/node/issues/31702",[1161],[4241],{"type":407,"value":4242},"会发生什么事情？",{"type":401,"tag":4203,"props":4244,"children":4245},{},[4246,4248],{"type":407,"value":4247},"Linux，单个进程能操作的文件数量有上限，",{"type":401,"tag":1157,"props":4249,"children":4252},{"href":4250,"rel":4251},"https://github.com/nodejs/node-v0.x-archive/issues/2479",[1161],[4253],{"type":407,"value":4254},"该怎么解决？",{"type":401,"tag":4203,"props":4256,"children":4257},{},[4258,4260],{"type":407,"value":4259},"碰到操作系统或应用层面的问题，导致文件在短时间内多次触发更新，",{"type":401,"tag":1157,"props":4261,"children":4264},{"href":4262,"rel":4263},"https://github.com/yuanchuan/node-watch/blob/4cac915ab7cb5cc6a95263712e9def1004c35f78/lib/watch.js#L68",[1161],[4265],{"type":407,"value":4266},"怎么处理呢？",{"type":401,"tag":402,"props":4268,"children":4270},{"id":4269},"题外话",[4271],{"type":407,"value":4269},{"type":401,"tag":4273,"props":4274,"children":4277},"l-link",{"label":4275,"source":4276},"《Recursive Node.js fs.watch on Linux》","https://stackoverflow.com/questions/43112227/recursive-node-js-fs-watch-on-linux",[],{"type":401,"tag":409,"props":4279,"children":4280},{},[4281],{"type":407,"value":4282},"这个回答中的 node-watch 为啥会被踩，我没看很懂。",{"type":401,"tag":402,"props":4284,"children":4286},{"id":4285},"其它资料",[4287],{"type":407,"value":4285},{"type":401,"tag":409,"props":4289,"children":4290},{},[4291],{"type":407,"value":4292},"相关类库：",{"type":401,"tag":4199,"props":4294,"children":4295},{},[4296,4305,4315],{"type":401,"tag":4203,"props":4297,"children":4298},{},[4299],{"type":401,"tag":1157,"props":4300,"children":4303},{"href":4301,"rel":4302},"https://www.npmjs.com/package/watcher",[1161],[4304],{"type":407,"value":2039},{"type":401,"tag":4203,"props":4306,"children":4307},{},[4308],{"type":401,"tag":1157,"props":4309,"children":4312},{"href":4310,"rel":4311},"https://github.com/paulmillr/chokidar",[1161],[4313],{"type":407,"value":4314},"chokidar",{"type":401,"tag":4203,"props":4316,"children":4317},{},[4318],{"type":401,"tag":1157,"props":4319,"children":4322},{"href":4320,"rel":4321},"https://github.com/Axosoft/nsfw",[1161],[4323],{"type":407,"value":4324},"nsfw",{"type":401,"tag":409,"props":4326,"children":4327},{},[4328],{"type":407,"value":4329},"推荐阅读：",{"type":401,"tag":4199,"props":4331,"children":4332},{},[4333,4343],{"type":401,"tag":4203,"props":4334,"children":4335},{},[4336],{"type":401,"tag":1157,"props":4337,"children":4340},{"href":4338,"rel":4339},"https://juejin.cn/post/7000262974430511117",[1161],[4341],{"type":407,"value":4342},"《node-watch、Chokidar封装思路解析》",{"type":401,"tag":4203,"props":4344,"children":4345},{},[4346],{"type":401,"tag":1157,"props":4347,"children":4350},{"href":4348,"rel":4349},"https://www.jianshu.com/p/09dae09457fa",[1161],[4351],{"type":407,"value":4352},"《如何利用 Nodejs 监听文件夹》",{"type":401,"tag":4354,"props":4355,"children":4356},"style",{},[4357],{"type":407,"value":4358},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":394,"searchDepth":439,"depth":439,"links":4360},[4361,4362,4363,4364,4365],{"id":404,"depth":439,"text":404},{"id":3921,"depth":439,"text":3921},{"id":4190,"depth":439,"text":4190},{"id":4269,"depth":439,"text":4269},{"id":4285,"depth":439,"text":4285},"markdown","content:8.source-code:_node:node-watch.md","content","8.source-code/_node/node-watch.md","md",[4372,4376],{"_path":4373,"title":4374,"description":4375},"/source-code/_module/is-online","判断 NodeJS 是否在线","之前被组长问道要如何判断 NodeJS 是否在线，我不假思索回答：“Ping 百度试试。”。调用 Ping 需要 child_process，那还不如直接改用内置的 DNS 试试是否在线更简单一些。不过会不会碰到缓存等问题，没往下细想了。今天正好在别人的博客看到了 NodeJS DNS 模块，突然想起这个问题，于是就搜了一下相关库。找到了 internet-available 这个玩意儿。这里一起来看看他们的实现。",{"_path":4377,"title":4378,"description":394},"/source-code/_ts/type-challenges","TypeScript Type Chanllenges",1718183390678]