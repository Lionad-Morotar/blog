[{"data":1,"prerenderedAt":11698},["ShallowReactive",2],{"navigation":3,"/source-code/_ts/typescript-compiler":161,"/source-code/_ts/typescript-compiler-surround":11689},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":11683,"_id":11684,"_source":11685,"_file":11686,"_stem":11687,"_extension":11688},"/source-code/_ts/typescript-compiler","_ts",false,true,"","TypeScript 编译器","TypeScript 的整个编译流程层层递进，分工明确：预处理器确定文件范围，解析器生成抽象语法结构，Binder 建立符号体系并理顺作用域，Program 汇集全局视角，TypeChecker 完成类型推断和诊断，最终由 Emitter 生成输出文件。",{"type":170,"children":171,"toc":11671},"root",[172,180,186,193,209,214,219,260,265,300,306,329,335,340,378,383,406,417,435,448,460,481,491,534,546,558,603,608,628,634,639,661,666,906,911,946,951,1194,1205,1211,1216,1229,1234,1239,1244,1363,1368,1526,1531,1669,1682,1688,1693,1794,1799,1805,1811,1816,2375,2380,2488,2493,2499,2504,2537,2542,2550,2556,2562,2575,2668,2681,2688,2693,2698,2889,2894,2899,2906,2911,3099,3104,3109,3116,3121,3414,3419,3424,3535,3540,3815,3828,3849,4262,4267,4639,4644,4649,4819,4832,5072,5077,5082,5139,5152,5159,5164,5419,5431,5543,5548,6140,6145,6223,6228,6405,6410,6601,6614,6795,6807,6812,6817,6822,6916,6928,6935,6940,7097,7102,7286,7307,7312,7317,7322,7639,7644,7825,7830,8335,8340,8345,8461,8490,8495,8907,8912,9067,9072,9164,9169,9310,9315,9321,9326,9332,9338,9343,9614,9635,10236,10242,10247,10251,10256,10261,10266,10469,10474,10479,10674,10679,10685,10690,10774,10779,10785,10881,10887,10892,11665],{"type":173,"tag":174,"props":175,"children":176},"element","p",{},[177],{"type":178,"value":179},"text","本文以 TypeScript v5.9.0 版本为准。",{"type":173,"tag":181,"props":182,"children":184},"h2",{"id":183},"概览",[185],{"type":178,"value":183},{"type":173,"tag":187,"props":188,"children":190},"h4",{"id":189},"如何阅读-typescript-源码",[191],{"type":178,"value":192},"如何阅读 TypeScript 源码？",{"type":173,"tag":174,"props":194,"children":195},{},[196,198,207],{"type":178,"value":197},"先从小型实现 ",{"type":173,"tag":199,"props":200,"children":204},"a",{"href":201,"rel":202},"https://github.com/sandersn/mini-typescript/tree/centi-typescript",[203],"nofollow",[205],{"type":178,"value":206},"centi-typescript",{"type":178,"value":208}," 入手，理解 TypeScript 代码结构，再过渡到真实的 TS 仓库。",{"type":173,"tag":174,"props":210,"children":211},{},[212],{"type":178,"value":213},"无论源码解析文章内容多详实，放在项目庞大体量的代码面前都像个小导游。理解源码的最好方式还是要动手实践，比如从调试入手。下载仓库源码后，使用带 SourceMap 选项编译 TypeScript，就可以用 VSCode 本地调试其代码。此时用 Debugger 配合一些微型代码片段，可以快速了解编译器的工作原理。",{"type":173,"tag":174,"props":215,"children":216},{},[217],{"type":178,"value":218},"阅读源码时大量依赖了 Copilot：在发挥上下文翻译、解释代码、寻找模式等领域，AI 助手可以极大地提升阅读效率。同时，火焰图和 Call Tree 也能帮助理解代码的执行流程，它们仍然是 Copilot 时代不可缺少的工具。",{"type":173,"tag":174,"props":220,"children":221},{},[222,224,231,233,240,242,249,251,258],{"type":178,"value":223},"在有一定理解后，可阅读 ",{"type":173,"tag":199,"props":225,"children":228},{"href":226,"rel":227},"https://github.com/microsoft/TypeScript-Compiler-Notes/blob/main/GLOSSARY.md",[203],[229],{"type":178,"value":230},"TypeScript 编译器术语表",{"type":178,"value":232},"加深概念。此外，调试入门见",{"type":173,"tag":199,"props":234,"children":237},{"href":235,"rel":236},"https://zhuanlan.zhihu.com/p/417298212",[203],[238],{"type":178,"value":239},"《我读 Typescript 源码的秘诀都在这里了》",{"type":178,"value":241},"，或参考更完整的入门资料",{"type":173,"tag":199,"props":243,"children":246},{"href":244,"rel":245},"https://www.zhihu.com/column/c_1643269342841327616",[203],[247],{"type":178,"value":248},"《TypeScript 语言实现》",{"type":178,"value":250},"，或官方资料：",{"type":173,"tag":199,"props":252,"children":255},{"href":253,"rel":254},"https://github.com/microsoft/TypeScript-Compiler-Notes",[203],[256],{"type":178,"value":257},"TypeScript Compiler Notes",{"type":178,"value":259},"。",{"type":173,"tag":187,"props":261,"children":263},{"id":262},"趁手的工具",[264],{"type":178,"value":262},{"type":173,"tag":266,"props":267,"children":268},"ul",{},[269,280,290],{"type":173,"tag":270,"props":271,"children":272},"li",{},[273],{"type":173,"tag":199,"props":274,"children":277},{"href":275,"rel":276},"https://ts-ast-viewer.com",[203],[278],{"type":178,"value":279},"TypeScript AST Viewer",{"type":173,"tag":270,"props":281,"children":282},{},[283],{"type":173,"tag":199,"props":284,"children":287},{"href":285,"rel":286},"https://www.speedscope.app/",[203],[288],{"type":178,"value":289},"SpeedScope FlameGraph Analyzer",{"type":173,"tag":270,"props":291,"children":292},{},[293],{"type":173,"tag":199,"props":294,"children":297},{"href":295,"rel":296},"https://www.typescriptlang.org/play",[203],[298],{"type":178,"value":299},"TypeScript Playground",{"type":173,"tag":187,"props":301,"children":303},{"id":302},"typescript-编译器的一些关键概念",[304],{"type":178,"value":305},"TypeScript 编译器的一些关键概念？",{"type":173,"tag":266,"props":307,"children":308},{},[309,314,319,324],{"type":173,"tag":270,"props":310,"children":311},{},[312],{"type":178,"value":313},"类型推断：TypeScript 编译器会根据代码上下文自动推断变量、函数参数和返回值的类型，而不需要显式声明类型。这种推断基于控制流分析，能够在不同代码路径上动态调整类型。",{"type":173,"tag":270,"props":315,"children":316},{},[317],{"type":178,"value":318},"控制流分析：Control flow analysis（控制流分析）是 TypeScript 编译器中的一项核心技术，用于根据代码的执行流程，动态推断和分析变量的类型。它让类型系统不仅静态地分析声明，还能理解程序运行过程中不同代码路径上变量类型的变化，从而实现更精确的类型检查和类型推断。",{"type":173,"tag":270,"props":320,"children":321},{},[322],{"type":178,"value":323},"TypeFacts：TypeFacts 用来描述某个类型具体特性与关系的“标志位枚举类型（bitmask）”，允许高效地表示、记录和快速判断某个类型的一些“事实真相”，这些事实往往和类型保护（type guard）、控制流类型收窄、类型兼容性分析等环节密切关联。",{"type":173,"tag":270,"props":325,"children":326},{},[327],{"type":178,"value":328},"表观类型（Apparent Type）：经过某些规则处理后，暴露给外部的类型结构，常用于类型检查、属性访问、签名推断等场景，如联合类型的表观类型可能是所有成员的联合。",{"type":173,"tag":187,"props":330,"children":332},{"id":331},"编译器的整体流程",[333],{"type":178,"value":334},"编译器的整体流程？",{"type":173,"tag":174,"props":336,"children":337},{},[338],{"type":178,"value":339},"TypeScript 的整个编译流程层层递进，分工明确：预处理器确定文件范围，解析器生成抽象语法结构，Binder建立符号体系并理顺作用域，Program汇集全局视角，TypeChecker完成类型推断和诊断，最终由Emitter生成输出文件。",{"type":173,"tag":174,"props":341,"children":342},{},[343,345,352,354,360,362,368,370,376],{"type":178,"value":344},"编译过程的起点是预处理器。它会扫描代码中的 ",{"type":173,"tag":346,"props":347,"children":349},"code",{"className":348},[],[350],{"type":178,"value":351},"/// \u003Creference>",{"type":178,"value":353}," 指令、",{"type":173,"tag":346,"props":355,"children":357},{"className":356},[],[358],{"type":178,"value":359},"require",{"type":178,"value":361}," 语句以及 ",{"type":173,"tag":346,"props":363,"children":365},{"className":364},[],[366],{"type":178,"value":367},"import",{"type":178,"value":369}," 语句，从而",{"type":173,"tag":371,"props":372,"children":373},"strong",{},[374],{"type":178,"value":375},"确定该次编译需要包含哪些源文件",{"type":178,"value":377},"，为后续分析和构建依赖树奠定基础。",{"type":173,"tag":174,"props":379,"children":380},{},[381],{"type":178,"value":382},"在文件依赖关系明确之后，解析器（Parser）会将源文件逐个转换为抽象语法树（AST，Abstract Syntax Tree）。",{"type":173,"tag":266,"props":384,"children":385},{},[386,396],{"type":173,"tag":270,"props":387,"children":388},{},[389,394],{"type":173,"tag":371,"props":390,"children":391},{},[392],{"type":178,"value":393},"AST",{"type":178,"value":395}," 是源代码的结构化表达，仅关心语法结构，与具体实现细节无关。",{"type":173,"tag":270,"props":397,"children":398},{},[399,404],{"type":173,"tag":371,"props":400,"children":401},{},[402],{"type":178,"value":403},"SourceFile",{"type":178,"value":405}," 对象承担了每个源文件的语法树载体，内部不仅保存 AST，还包含文件名、源码文本等元数据。",{"type":173,"tag":174,"props":407,"children":408},{},[409,411,416],{"type":178,"value":410},"Binder 负责遍历 AST 节点，",{"type":173,"tag":371,"props":412,"children":413},{},[414],{"type":178,"value":415},"为每个命名实体（如变量、函数、类、接口等）分配并绑定唯一的 Symbol（符号）",{"type":178,"value":259},{"type":173,"tag":266,"props":418,"children":419},{},[420,425,430],{"type":173,"tag":270,"props":421,"children":422},{},[423],{"type":178,"value":424},"支持声明合并：例如同名的类与命名空间可以合并为同一个 Symbol。",{"type":173,"tag":270,"props":426,"children":427},{},[428],{"type":178,"value":429},"每个 Symbol 记录所有相关声明节点信息，同时处理作用域（Scope），确保符号在各自的封闭作用域中正确分层与隔离。",{"type":173,"tag":270,"props":431,"children":432},{},[433],{"type":178,"value":434},"这一过程保证了后续类型分析时，每个引用都能找到其唯一且准确的定义。",{"type":173,"tag":174,"props":436,"children":437},{},[438,440,446],{"type":178,"value":439},"通过调用 ",{"type":173,"tag":346,"props":441,"children":443},{"className":442},[],[444],{"type":178,"value":445},"createSourceFile",{"type":178,"value":447}," API，可生成 SourceFile 及其对应的 Symbol 构建成果。",{"type":173,"tag":174,"props":449,"children":450},{},[451,453,458],{"type":178,"value":452},"经过绑定以后，",{"type":173,"tag":371,"props":454,"children":455},{},[456],{"type":178,"value":457},"Program",{"type":178,"value":459}," 对象被创建出来。",{"type":173,"tag":266,"props":461,"children":462},{},[463,468],{"type":173,"tag":270,"props":464,"children":465},{},[466],{"type":178,"value":467},"Program 是当前所有 SourceFile 的全局集合，加上一组编译选项（CompilerOptions）。",{"type":173,"tag":270,"props":469,"children":470},{},[471,473,479],{"type":178,"value":472},"通过 ",{"type":173,"tag":346,"props":474,"children":476},{"className":475},[],[477],{"type":178,"value":478},"createProgram",{"type":178,"value":480}," API 生成，在整个编译期间为所有源文件和类型分析提供统一的上下文。",{"type":173,"tag":174,"props":482,"children":483},{},[484,489],{"type":173,"tag":371,"props":485,"children":486},{},[487],{"type":178,"value":488},"TypeChecker",{"type":178,"value":490}," 是 TypeScript 类型系统的核心引擎。从 Program 实例获取所有必要信息后进入工作状态：",{"type":173,"tag":266,"props":492,"children":493},{},[494,508,521],{"type":173,"tag":270,"props":495,"children":496},{},[497,502,506],{"type":173,"tag":371,"props":498,"children":499},{},[500],{"type":178,"value":501},"符号合并与全局符号表",{"type":173,"tag":503,"props":504,"children":505},"br",{},[],{"type":178,"value":507},"\nTypeChecker 首先将所有 SourceFile 中的 Symbol 进行合并，如跨文件的命名空间、重载声明等，构建全局符号表，精准反映整个程序的命名与类型空间。",{"type":173,"tag":270,"props":509,"children":510},{},[511,516,519],{"type":173,"tag":371,"props":512,"children":513},{},[514],{"type":178,"value":515},"类型推断与约束分析",{"type":173,"tag":503,"props":517,"children":518},{},[],{"type":178,"value":520},"\n负责为每个语法节点分配具体的 Type，判断类型兼容性、推断泛型等。",{"type":173,"tag":270,"props":522,"children":523},{},[524,529,532],{"type":173,"tag":371,"props":525,"children":526},{},[527],{"type":178,"value":528},"生成语义诊断（Semantic Diagnostics）",{"type":173,"tag":503,"props":530,"children":531},{},[],{"type":178,"value":533},"\n检查类型错误、不一致或潜在缺陷，生成准确的错误提示信息。",{"type":173,"tag":174,"props":535,"children":536},{},[537,539,544],{"type":178,"value":538},"TypeChecker 在整个过程中采用",{"type":173,"tag":371,"props":540,"children":541},{},[542],{"type":178,"value":543},"惰性计算（lazy evaluation）策略",{"type":178,"value":545},"，只对用户当前查询或编辑的内容进行深入分析，极大提升了性能与交互体验。",{"type":173,"tag":174,"props":547,"children":548},{},[549,551,556],{"type":178,"value":550},"最后由 ",{"type":173,"tag":371,"props":552,"children":553},{},[554],{"type":178,"value":555},"Emitter",{"type":178,"value":557}," 负责根据语法树和类型信息，为每个 SourceFile 生成具体的输出文件，包括：",{"type":173,"tag":266,"props":559,"children":560},{},[561,572,583,592],{"type":173,"tag":270,"props":562,"children":563},{},[564,570],{"type":173,"tag":346,"props":565,"children":567},{"className":566},[],[568],{"type":178,"value":569},".js",{"type":178,"value":571},"（JavaScript 编译产物）",{"type":173,"tag":270,"props":573,"children":574},{},[575,581],{"type":173,"tag":346,"props":576,"children":578},{"className":577},[],[579],{"type":178,"value":580},".d.ts",{"type":178,"value":582},"（类型声明文件）",{"type":173,"tag":270,"props":584,"children":585},{},[586],{"type":173,"tag":346,"props":587,"children":589},{"className":588},[],[590],{"type":178,"value":591},".jsx",{"type":173,"tag":270,"props":593,"children":594},{},[595,601],{"type":173,"tag":346,"props":596,"children":598},{"className":597},[],[599],{"type":178,"value":600},".js.map",{"type":178,"value":602},"（源码映射，便于调试）",{"type":173,"tag":174,"props":604,"children":605},{},[606],{"type":178,"value":607},"Emitter 按需输出这些文件，为运行时环境或类型消费方（如编辑器、其他项目等）提供必要的支撑。",{"type":173,"tag":174,"props":609,"children":610},{},[611,613,618,620,627],{"type":178,"value":612},"见：",{"type":173,"tag":199,"props":614,"children":616},{"href":253,"rel":615},[203],[617],{"type":178,"value":257},{"type":178,"value":619},"、",{"type":173,"tag":199,"props":621,"children":624},{"href":622,"rel":623},"https://jkchao.github.io/typescript-book-chinese/compiler/overview.html",[203],[625],{"type":178,"value":626},"TypeScript Deep Dive",{"type":178,"value":259},{"type":173,"tag":187,"props":629,"children":631},{"id":630},"编译器的模块结构和数据流过程",[632],{"type":178,"value":633},"编译器的模块结构和数据流过程？",{"type":173,"tag":174,"props":635,"children":636},{},[637],{"type":178,"value":638},"编译器前端负责：",{"type":173,"tag":640,"props":641,"children":642},"ol",{},[643,656],{"type":173,"tag":270,"props":644,"children":645},{},[646,648,654],{"type":178,"value":647},"把 ",{"type":173,"tag":346,"props":649,"children":651},{"className":650},[],[652],{"type":178,"value":653},".ts/.tsx",{"type":178,"value":655}," 文本变成抽象语法树（AST）。",{"type":173,"tag":270,"props":657,"children":658},{},[659],{"type":178,"value":660},"建立符号表 & 类型系统，生成完整的类型信息与诊断。",{"type":173,"tag":174,"props":662,"children":663},{},[664],{"type":178,"value":665},"具体步骤与源码位置：",{"type":173,"tag":640,"props":667,"children":668},{},[669,703,735,793,891],{"type":173,"tag":270,"props":670,"children":671},{},[672,674,677,679,685,688,690,693,695,701],{"type":178,"value":673},"词法分析（Lexical Scan）",{"type":173,"tag":503,"props":675,"children":676},{},[],{"type":178,"value":678},"\n• 模块：",{"type":173,"tag":346,"props":680,"children":682},{"className":681},[],[683],{"type":178,"value":684},"scanner.ts",{"type":173,"tag":503,"props":686,"children":687},{},[],{"type":178,"value":689},"\n• 流程：读字符流 → 产生 token 流（关键字、标识符、字面量等）。",{"type":173,"tag":503,"props":691,"children":692},{},[],{"type":178,"value":694},"\n• 结果：",{"type":173,"tag":346,"props":696,"children":698},{"className":697},[],[699],{"type":178,"value":700},"Token\u003CT>",{"type":178,"value":702},"（枚举 + 位置信息）。",{"type":173,"tag":270,"props":704,"children":705},{},[706,708,711,712,718,721,723,726,728,733],{"type":178,"value":707},"语法分析（Parse）",{"type":173,"tag":503,"props":709,"children":710},{},[],{"type":178,"value":678},{"type":173,"tag":346,"props":713,"children":715},{"className":714},[],[716],{"type":178,"value":717},"parser.ts",{"type":173,"tag":503,"props":719,"children":720},{},[],{"type":178,"value":722},"\n• 流程：把 token 流递归下降为 AST 节点（Node）。",{"type":173,"tag":503,"props":724,"children":725},{},[],{"type":178,"value":727},"\n• 生成：",{"type":173,"tag":346,"props":729,"children":731},{"className":730},[],[732],{"type":178,"value":403},{"type":178,"value":734}," 根节点，里边嵌套所有语句/表达式/类型节点。",{"type":173,"tag":270,"props":736,"children":737},{},[738,740,743,744,750,753,755,758,760,766,768,771,773,776,778,784,785,791],{"type":178,"value":739},"绑定（Bind）",{"type":173,"tag":503,"props":741,"children":742},{},[],{"type":178,"value":678},{"type":173,"tag":346,"props":745,"children":747},{"className":746},[],[748],{"type":178,"value":749},"binder.ts",{"type":173,"tag":503,"props":751,"children":752},{},[],{"type":178,"value":754},"\n• 作用：",{"type":173,"tag":503,"props":756,"children":757},{},[],{"type":178,"value":759},"\na) 为每个声明创建 ",{"type":173,"tag":346,"props":761,"children":763},{"className":762},[],[764],{"type":178,"value":765},"Symbol",{"type":178,"value":767},"，挂到对应作用域。",{"type":173,"tag":503,"props":769,"children":770},{},[],{"type":178,"value":772},"\nb) 处理导入/导出、作用域链、捕获变量等。",{"type":173,"tag":503,"props":774,"children":775},{},[],{"type":178,"value":777},"\n• 产物：",{"type":173,"tag":346,"props":779,"children":781},{"className":780},[],[782],{"type":178,"value":783},"SymbolTable",{"type":178,"value":619},{"type":173,"tag":346,"props":786,"children":788},{"className":787},[],[789],{"type":178,"value":790},"FlowNode",{"type":178,"value":792},"（控制流图入口）。",{"type":173,"tag":270,"props":794,"children":795},{},[796,798,801,802,808,810,816,819,821,824,826,832,834,837,839,845,846,852,854,857,858,861,863,869,871,877,878,881,883,889],{"type":178,"value":797},"语义 & 类型检查（Check）",{"type":173,"tag":503,"props":799,"children":800},{},[],{"type":178,"value":678},{"type":173,"tag":346,"props":803,"children":805},{"className":804},[],[806],{"type":178,"value":807},"checker.ts",{"type":178,"value":809}," + ",{"type":173,"tag":346,"props":811,"children":813},{"className":812},[],[814],{"type":178,"value":815},"flow.ts",{"type":173,"tag":503,"props":817,"children":818},{},[],{"type":178,"value":820},"\n• 任务：",{"type":173,"tag":503,"props":822,"children":823},{},[],{"type":178,"value":825},"\na) 根据 AST + SymbolTable 推断/验证每个表达式的 ",{"type":173,"tag":346,"props":827,"children":829},{"className":828},[],[830],{"type":178,"value":831},"Type",{"type":178,"value":833},".",{"type":173,"tag":503,"props":835,"children":836},{},[],{"type":178,"value":838},"\nb) 构造/遍历控制流图（",{"type":173,"tag":346,"props":840,"children":842},{"className":841},[],[843],{"type":178,"value":844},"FlowStart",{"type":178,"value":619},{"type":173,"tag":346,"props":847,"children":849},{"className":848},[],[850],{"type":178,"value":851},"FlowLoop",{"type":178,"value":853}," …）做类型收窄、 definite-assignment 检查。",{"type":173,"tag":503,"props":855,"children":856},{},[],{"type":178,"value":694},{"type":173,"tag":503,"props":859,"children":860},{},[],{"type":178,"value":862},"\n– 把 ",{"type":173,"tag":346,"props":864,"children":866},{"className":865},[],[867],{"type":178,"value":868},"type",{"type":178,"value":870}," 缓存到每个 ",{"type":173,"tag":346,"props":872,"children":874},{"className":873},[],[875],{"type":178,"value":876},"Node",{"type":178,"value":833},{"type":173,"tag":503,"props":879,"children":880},{},[],{"type":178,"value":882},"\n– 收集 ",{"type":173,"tag":346,"props":884,"children":886},{"className":885},[],[887],{"type":178,"value":888},"Diagnostic",{"type":178,"value":890},"（类型错误、语义错误）。",{"type":173,"tag":270,"props":892,"children":893},{},[894,896,899,901,904],{"type":178,"value":895},"前端输出",{"type":173,"tag":503,"props":897,"children":898},{},[],{"type":178,"value":900},"\n• 一个“带类型的 AST”+“符号表”+“控制流图”+ 诊断集合。",{"type":173,"tag":503,"props":902,"children":903},{},[],{"type":178,"value":905},"\n• 这正是后端进行代码降级（down-level）和 Emit 的依据。",{"type":173,"tag":174,"props":907,"children":908},{},[909],{"type":178,"value":910},"编译器后端负责：",{"type":173,"tag":640,"props":912,"children":913},{},[914,934],{"type":173,"tag":270,"props":915,"children":916},{},[917,919,925,926,932],{"type":178,"value":918},"根据编译目标（",{"type":173,"tag":346,"props":920,"children":922},{"className":921},[],[923],{"type":178,"value":924},"--target",{"type":178,"value":619},{"type":173,"tag":346,"props":927,"children":929},{"className":928},[],[930],{"type":178,"value":931},"--module",{"type":178,"value":933}," 等）把 AST 转成 JS。",{"type":173,"tag":270,"props":935,"children":936},{},[937,939,944],{"type":178,"value":938},"生成 ",{"type":173,"tag":346,"props":940,"children":942},{"className":941},[],[943],{"type":178,"value":580},{"type":178,"value":945},"、source map、build info 等附加产物。",{"type":173,"tag":174,"props":947,"children":948},{},[949],{"type":178,"value":950},"主要阶段：",{"type":173,"tag":640,"props":952,"children":953},{},[954,1068,1124,1155],{"type":173,"tag":270,"props":955,"children":956},{},[957,959,962,963,969,972,974,977,979,985,987,993,994,1000,1001,1007,1009,1012,1013,1019,1021,1027,1029,1032,1033,1039,1041,1047,1049,1052,1054,1057,1063,1066],{"type":178,"value":958},"Transform 阶段（AST → AST）",{"type":173,"tag":503,"props":960,"children":961},{},[],{"type":178,"value":678},{"type":173,"tag":346,"props":964,"children":966},{"className":965},[],[967],{"type":178,"value":968},"transformers/*",{"type":173,"tag":503,"props":970,"children":971},{},[],{"type":178,"value":973},"\n• 典型变换",{"type":173,"tag":503,"props":975,"children":976},{},[],{"type":178,"value":978},"\n– ",{"type":173,"tag":346,"props":980,"children":982},{"className":981},[],[983],{"type":178,"value":984},"es2015.ts",{"type":178,"value":986},"：展开 ",{"type":173,"tag":346,"props":988,"children":990},{"className":989},[],[991],{"type":178,"value":992},"class",{"type":178,"value":619},{"type":173,"tag":346,"props":995,"children":997},{"className":996},[],[998],{"type":178,"value":999},"for-of",{"type":178,"value":619},{"type":173,"tag":346,"props":1002,"children":1004},{"className":1003},[],[1005],{"type":178,"value":1006},"async/await",{"type":178,"value":1008}," 到 ES5/ES3。",{"type":173,"tag":503,"props":1010,"children":1011},{},[],{"type":178,"value":978},{"type":173,"tag":346,"props":1014,"children":1016},{"className":1015},[],[1017],{"type":178,"value":1018},"decoratorsLegacy.ts",{"type":178,"value":1020}," / ",{"type":173,"tag":346,"props":1022,"children":1024},{"className":1023},[],[1025],{"type":178,"value":1026},"decorators.ts",{"type":178,"value":1028},"：插入装饰器辅助函数。",{"type":173,"tag":503,"props":1030,"children":1031},{},[],{"type":178,"value":978},{"type":173,"tag":346,"props":1034,"children":1036},{"className":1035},[],[1037],{"type":178,"value":1038},"jsx.ts",{"type":178,"value":1040},"：把 JSX → ",{"type":173,"tag":346,"props":1042,"children":1044},{"className":1043},[],[1045],{"type":178,"value":1046},"React.createElement",{"type":178,"value":1048}," 或自定义 pragma。",{"type":173,"tag":503,"props":1050,"children":1051},{},[],{"type":178,"value":1053},"\n• 机制：",{"type":173,"tag":503,"props":1055,"children":1056},{},[],{"type":173,"tag":346,"props":1058,"children":1060},{"className":1059},[],[1061],{"type":178,"value":1062},"transform(node, [transformerFactory1, transformerFactory2, …])",{"type":173,"tag":503,"props":1064,"children":1065},{},[],{"type":178,"value":1067},"\n采用访客模式深拷贝/修改子树。",{"type":173,"tag":270,"props":1069,"children":1070},{},[1071,1073,1076,1077,1083,1086,1087,1090,1092,1095,1097,1100,1102,1108,1110,1116,1118,1123],{"type":178,"value":1072},"Emit 阶段（AST → 文本）",{"type":173,"tag":503,"props":1074,"children":1075},{},[],{"type":178,"value":678},{"type":173,"tag":346,"props":1078,"children":1080},{"className":1079},[],[1081],{"type":178,"value":1082},"emitter.ts",{"type":173,"tag":503,"props":1084,"children":1085},{},[],{"type":178,"value":820},{"type":173,"tag":503,"props":1088,"children":1089},{},[],{"type":178,"value":1091},"\na) 深度遍历最终 AST，把节点写成 JS 字符串。",{"type":173,"tag":503,"props":1093,"children":1094},{},[],{"type":178,"value":1096},"\nb) 记录位置信息，生成 source map。",{"type":173,"tag":503,"props":1098,"children":1099},{},[],{"type":178,"value":1101},"\nc) 若 ",{"type":173,"tag":346,"props":1103,"children":1105},{"className":1104},[],[1106],{"type":178,"value":1107},"declaration:true",{"type":178,"value":1109},"，并行跑 ",{"type":173,"tag":346,"props":1111,"children":1113},{"className":1112},[],[1114],{"type":178,"value":1115},"declarationEmitter.ts",{"type":178,"value":1117}," 生成 ",{"type":173,"tag":346,"props":1119,"children":1121},{"className":1120},[],[1122],{"type":178,"value":580},{"type":178,"value":259},{"type":173,"tag":270,"props":1125,"children":1126},{},[1127,1129,1132,1134,1140,1142,1148,1150,1153],{"type":178,"value":1128},"额外产物",{"type":173,"tag":503,"props":1130,"children":1131},{},[],{"type":178,"value":1133},"\n• Build Info (",{"type":173,"tag":346,"props":1135,"children":1137},{"className":1136},[],[1138],{"type":178,"value":1139},".tsbuildinfo",{"type":178,"value":1141},")：",{"type":173,"tag":346,"props":1143,"children":1145},{"className":1144},[],[1146],{"type":178,"value":1147},"builder.ts",{"type":178,"value":1149}," 输出的增量编译元数据。",{"type":173,"tag":503,"props":1151,"children":1152},{},[],{"type":178,"value":1154},"\n• Diagnostics：后端也可能追加（如装饰器语义限制）。",{"type":173,"tag":270,"props":1156,"children":1157},{},[1158,1160,1163,1165,1171,1172,1178,1179,1185,1186,1192],{"type":178,"value":1159},"后端输出",{"type":173,"tag":503,"props":1161,"children":1162},{},[],{"type":178,"value":1164},"\n• ",{"type":173,"tag":346,"props":1166,"children":1168},{"className":1167},[],[1169],{"type":178,"value":1170},"*.js",{"type":178,"value":619},{"type":173,"tag":346,"props":1173,"children":1175},{"className":1174},[],[1176],{"type":178,"value":1177},"*.d.ts",{"type":178,"value":619},{"type":173,"tag":346,"props":1180,"children":1182},{"className":1181},[],[1183],{"type":178,"value":1184},"*.map",{"type":178,"value":619},{"type":173,"tag":346,"props":1187,"children":1189},{"className":1188},[],[1190],{"type":178,"value":1191},"*.tsbuildinfo",{"type":178,"value":1193}," 文件写入磁盘或返回给 Language Service。",{"type":173,"tag":174,"props":1195,"children":1196},{},[1197,1198],{"type":178,"value":612},{"type":173,"tag":199,"props":1199,"children":1202},{"href":1200,"rel":1201},"https://zhuanlan.zhihu.com/p/636256231",[203],[1203],{"type":178,"value":1204},"编译器的设计思路：以TypeScript Compiler为例",{"type":173,"tag":187,"props":1206,"children":1208},{"id":1207},"什么是控制流分析control-flow-analysis",[1209],{"type":178,"value":1210},"什么是控制流分析（Control Flow Analysis）？",{"type":173,"tag":174,"props":1212,"children":1213},{},[1214],{"type":178,"value":1215},"“控制流”（flow analysis）是服务于类型系统的隐形于编译器的流程图，以便在类型检查时一旦多条路径在某点汇合，编译器将取这些路径上类型的并集（而非交集），以回到最保守但安全的类型。",{"type":173,"tag":640,"props":1217,"children":1218},{},[1219,1224],{"type":173,"tag":270,"props":1220,"children":1221},{},[1222],{"type":178,"value":1223},"绑定阶段，编译器把每条语句、分支、循环等转换成一系列 FlowNode（例如 FlowStart、FlowCondition、FlowAssignment、FlowLoop 等），再用有向边将它们连接，保证图的拓扑与源码的执行顺序一致。",{"type":173,"tag":270,"props":1225,"children":1226},{},[1227],{"type":178,"value":1228},"类型检查阶段，检查器沿图前进或回溯，动态收窄并合并变量类型——在 if 判断处分叉两条路径，各自携带不同的类型假设；在 FlowLoop 节点既记录循环入口又建立回边，使循环体中的赋值能够影响下一次迭代的类型推断。",{"type":173,"tag":181,"props":1230,"children":1232},{"id":1231},"类型概览",[1233],{"type":178,"value":1231},{"type":173,"tag":187,"props":1235,"children":1237},{"id":1236},"常用概念",[1238],{"type":178,"value":1236},{"type":173,"tag":174,"props":1240,"children":1241},{},[1242],{"type":178,"value":1243},"SyntaxKind，TS 将文本转换为 AST 时，根据不同的语法结构生成对应的节点类型，用于标识 AST 中每个节点的具体类型。还有一些类型是 SyntaxKind 的集合，聚合特定类型的节点，如 LiteralSyntaxKind（字面量类型节点）、KeywordSyntaxKind（关键字节点）等。",{"type":173,"tag":1245,"props":1246,"children":1250},"pre",{"className":1247,"code":1248,"language":1249,"meta":166,"style":166},"language-ts shiki shiki-themes material-theme-lighter github-light github-dark monokai","export const enum SyntaxKind {\n  Unknown,\n  EndOfFileToken,\n  SingleLineCommentTrivia,\n  MultiLineCommentTrivia,\n  //...\n}\n","ts",[1251],{"type":173,"tag":346,"props":1252,"children":1253},{"__ignoreMap":166},[1254,1290,1305,1318,1331,1344,1354],{"type":173,"tag":1255,"props":1256,"children":1259},"span",{"class":1257,"line":1258},"line",1,[1260,1266,1272,1278,1284],{"type":173,"tag":1255,"props":1261,"children":1263},{"style":1262},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1264],{"type":178,"value":1265},"export",{"type":173,"tag":1255,"props":1267,"children":1269},{"style":1268},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1270],{"type":178,"value":1271}," const",{"type":173,"tag":1255,"props":1273,"children":1275},{"style":1274},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1276],{"type":178,"value":1277}," enum",{"type":173,"tag":1255,"props":1279,"children":1281},{"style":1280},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[1282],{"type":178,"value":1283}," SyntaxKind",{"type":173,"tag":1255,"props":1285,"children":1287},{"style":1286},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1288],{"type":178,"value":1289}," {\n",{"type":173,"tag":1255,"props":1291,"children":1293},{"class":1257,"line":1292},2,[1294,1300],{"type":173,"tag":1255,"props":1295,"children":1297},{"style":1296},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[1298],{"type":178,"value":1299},"  Unknown",{"type":173,"tag":1255,"props":1301,"children":1302},{"style":1286},[1303],{"type":178,"value":1304},",\n",{"type":173,"tag":1255,"props":1306,"children":1308},{"class":1257,"line":1307},3,[1309,1314],{"type":173,"tag":1255,"props":1310,"children":1311},{"style":1296},[1312],{"type":178,"value":1313},"  EndOfFileToken",{"type":173,"tag":1255,"props":1315,"children":1316},{"style":1286},[1317],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1319,"children":1321},{"class":1257,"line":1320},4,[1322,1327],{"type":173,"tag":1255,"props":1323,"children":1324},{"style":1296},[1325],{"type":178,"value":1326},"  SingleLineCommentTrivia",{"type":173,"tag":1255,"props":1328,"children":1329},{"style":1286},[1330],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1332,"children":1334},{"class":1257,"line":1333},5,[1335,1340],{"type":173,"tag":1255,"props":1336,"children":1337},{"style":1296},[1338],{"type":178,"value":1339},"  MultiLineCommentTrivia",{"type":173,"tag":1255,"props":1341,"children":1342},{"style":1286},[1343],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1345,"children":1347},{"class":1257,"line":1346},6,[1348],{"type":173,"tag":1255,"props":1349,"children":1351},{"style":1350},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1352],{"type":178,"value":1353},"  //...\n",{"type":173,"tag":1255,"props":1355,"children":1357},{"class":1257,"line":1356},7,[1358],{"type":173,"tag":1255,"props":1359,"children":1360},{"style":1286},[1361],{"type":178,"value":1362},"}\n",{"type":173,"tag":174,"props":1364,"children":1365},{},[1366],{"type":178,"value":1367},"NodeFlags，节点标记，用于表示各种抽象语法树（AST）节点附加信息的位掩码的集合，辅助编译器做后续处理，比如类型推断等。",{"type":173,"tag":1245,"props":1369,"children":1371},{"className":1247,"code":1370,"language":1249,"meta":166,"style":166},"export const enum NodeFlags {\n  None      = 0,\n  Let       = 1 \u003C\u003C 0,\n  Const     = 1 \u003C\u003C 1,\n  Using     = 1 \u003C\u003C 2,\n  //...\n}\n",[1372],{"type":173,"tag":346,"props":1373,"children":1374},{"__ignoreMap":166},[1375,1399,1423,1454,1483,1512,1519],{"type":173,"tag":1255,"props":1376,"children":1377},{"class":1257,"line":1258},[1378,1382,1386,1390,1395],{"type":173,"tag":1255,"props":1379,"children":1380},{"style":1262},[1381],{"type":178,"value":1265},{"type":173,"tag":1255,"props":1383,"children":1384},{"style":1268},[1385],{"type":178,"value":1271},{"type":173,"tag":1255,"props":1387,"children":1388},{"style":1274},[1389],{"type":178,"value":1277},{"type":173,"tag":1255,"props":1391,"children":1392},{"style":1280},[1393],{"type":178,"value":1394}," NodeFlags",{"type":173,"tag":1255,"props":1396,"children":1397},{"style":1286},[1398],{"type":178,"value":1289},{"type":173,"tag":1255,"props":1400,"children":1401},{"class":1257,"line":1292},[1402,1407,1413,1419],{"type":173,"tag":1255,"props":1403,"children":1404},{"style":1296},[1405],{"type":178,"value":1406},"  None",{"type":173,"tag":1255,"props":1408,"children":1410},{"style":1409},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1411],{"type":178,"value":1412},"      =",{"type":173,"tag":1255,"props":1414,"children":1416},{"style":1415},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1417],{"type":178,"value":1418}," 0",{"type":173,"tag":1255,"props":1420,"children":1421},{"style":1286},[1422],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1424,"children":1425},{"class":1257,"line":1307},[1426,1431,1436,1441,1446,1450],{"type":173,"tag":1255,"props":1427,"children":1428},{"style":1296},[1429],{"type":178,"value":1430},"  Let",{"type":173,"tag":1255,"props":1432,"children":1433},{"style":1409},[1434],{"type":178,"value":1435},"       =",{"type":173,"tag":1255,"props":1437,"children":1438},{"style":1415},[1439],{"type":178,"value":1440}," 1",{"type":173,"tag":1255,"props":1442,"children":1443},{"style":1409},[1444],{"type":178,"value":1445}," \u003C\u003C",{"type":173,"tag":1255,"props":1447,"children":1448},{"style":1415},[1449],{"type":178,"value":1418},{"type":173,"tag":1255,"props":1451,"children":1452},{"style":1286},[1453],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1455,"children":1456},{"class":1257,"line":1320},[1457,1462,1467,1471,1475,1479],{"type":173,"tag":1255,"props":1458,"children":1459},{"style":1296},[1460],{"type":178,"value":1461},"  Const",{"type":173,"tag":1255,"props":1463,"children":1464},{"style":1409},[1465],{"type":178,"value":1466},"     =",{"type":173,"tag":1255,"props":1468,"children":1469},{"style":1415},[1470],{"type":178,"value":1440},{"type":173,"tag":1255,"props":1472,"children":1473},{"style":1409},[1474],{"type":178,"value":1445},{"type":173,"tag":1255,"props":1476,"children":1477},{"style":1415},[1478],{"type":178,"value":1440},{"type":173,"tag":1255,"props":1480,"children":1481},{"style":1286},[1482],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1484,"children":1485},{"class":1257,"line":1333},[1486,1491,1495,1499,1503,1508],{"type":173,"tag":1255,"props":1487,"children":1488},{"style":1296},[1489],{"type":178,"value":1490},"  Using",{"type":173,"tag":1255,"props":1492,"children":1493},{"style":1409},[1494],{"type":178,"value":1466},{"type":173,"tag":1255,"props":1496,"children":1497},{"style":1415},[1498],{"type":178,"value":1440},{"type":173,"tag":1255,"props":1500,"children":1501},{"style":1409},[1502],{"type":178,"value":1445},{"type":173,"tag":1255,"props":1504,"children":1505},{"style":1415},[1506],{"type":178,"value":1507}," 2",{"type":173,"tag":1255,"props":1509,"children":1510},{"style":1286},[1511],{"type":178,"value":1304},{"type":173,"tag":1255,"props":1513,"children":1514},{"class":1257,"line":1346},[1515],{"type":173,"tag":1255,"props":1516,"children":1517},{"style":1350},[1518],{"type":178,"value":1353},{"type":173,"tag":1255,"props":1520,"children":1521},{"class":1257,"line":1356},[1522],{"type":173,"tag":1255,"props":1523,"children":1524},{"style":1286},[1525],{"type":178,"value":1362},{"type":173,"tag":174,"props":1527,"children":1528},{},[1529],{"type":178,"value":1530},"真实的 AST 节点是由 Node SyntaxKind、NodeFlags 和额外的标记组合而成的。",{"type":173,"tag":1245,"props":1532,"children":1534},{"className":1247,"code":1533,"language":1249,"meta":166,"style":166},"// ReadonlyTextRange 通过开始和结束位置记录了节点在源代码中的位置信息。\nexport interface Node extends ReadonlyTextRange {\n    readonly kind: SyntaxKind;\n    readonly flags: NodeFlags;\n    readonly parent: Node;\n    //...\n}\n",[1535],{"type":173,"tag":346,"props":1536,"children":1537},{"__ignoreMap":166},[1538,1546,1578,1606,1630,1654,1662],{"type":173,"tag":1255,"props":1539,"children":1540},{"class":1257,"line":1258},[1541],{"type":173,"tag":1255,"props":1542,"children":1543},{"style":1350},[1544],{"type":178,"value":1545},"// ReadonlyTextRange 通过开始和结束位置记录了节点在源代码中的位置信息。\n",{"type":173,"tag":1255,"props":1547,"children":1548},{"class":1257,"line":1292},[1549,1553,1558,1563,1568,1574],{"type":173,"tag":1255,"props":1550,"children":1551},{"style":1262},[1552],{"type":178,"value":1265},{"type":173,"tag":1255,"props":1554,"children":1555},{"style":1274},[1556],{"type":178,"value":1557}," interface",{"type":173,"tag":1255,"props":1559,"children":1560},{"style":1280},[1561],{"type":178,"value":1562}," Node",{"type":173,"tag":1255,"props":1564,"children":1565},{"style":1268},[1566],{"type":178,"value":1567}," extends",{"type":173,"tag":1255,"props":1569,"children":1571},{"style":1570},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-font-style:inherit;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-font-style:inherit;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-font-style:italic;--shiki-sepia-text-decoration:underline",[1572],{"type":178,"value":1573}," ReadonlyTextRange",{"type":173,"tag":1255,"props":1575,"children":1576},{"style":1286},[1577],{"type":178,"value":1289},{"type":173,"tag":1255,"props":1579,"children":1580},{"class":1257,"line":1307},[1581,1586,1592,1597,1601],{"type":173,"tag":1255,"props":1582,"children":1583},{"style":1268},[1584],{"type":178,"value":1585},"    readonly",{"type":173,"tag":1255,"props":1587,"children":1589},{"style":1588},"--shiki-light:#E53935;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2",[1590],{"type":178,"value":1591}," kind",{"type":173,"tag":1255,"props":1593,"children":1594},{"style":1409},[1595],{"type":178,"value":1596},":",{"type":173,"tag":1255,"props":1598,"children":1599},{"style":1280},[1600],{"type":178,"value":1283},{"type":173,"tag":1255,"props":1602,"children":1603},{"style":1286},[1604],{"type":178,"value":1605},";\n",{"type":173,"tag":1255,"props":1607,"children":1608},{"class":1257,"line":1320},[1609,1613,1618,1622,1626],{"type":173,"tag":1255,"props":1610,"children":1611},{"style":1268},[1612],{"type":178,"value":1585},{"type":173,"tag":1255,"props":1614,"children":1615},{"style":1588},[1616],{"type":178,"value":1617}," flags",{"type":173,"tag":1255,"props":1619,"children":1620},{"style":1409},[1621],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1623,"children":1624},{"style":1280},[1625],{"type":178,"value":1394},{"type":173,"tag":1255,"props":1627,"children":1628},{"style":1286},[1629],{"type":178,"value":1605},{"type":173,"tag":1255,"props":1631,"children":1632},{"class":1257,"line":1333},[1633,1637,1642,1646,1650],{"type":173,"tag":1255,"props":1634,"children":1635},{"style":1268},[1636],{"type":178,"value":1585},{"type":173,"tag":1255,"props":1638,"children":1639},{"style":1588},[1640],{"type":178,"value":1641}," parent",{"type":173,"tag":1255,"props":1643,"children":1644},{"style":1409},[1645],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1647,"children":1648},{"style":1280},[1649],{"type":178,"value":1562},{"type":173,"tag":1255,"props":1651,"children":1652},{"style":1286},[1653],{"type":178,"value":1605},{"type":173,"tag":1255,"props":1655,"children":1656},{"class":1257,"line":1346},[1657],{"type":173,"tag":1255,"props":1658,"children":1659},{"style":1350},[1660],{"type":178,"value":1661},"    //...\n",{"type":173,"tag":1255,"props":1663,"children":1664},{"class":1257,"line":1356},[1665],{"type":173,"tag":1255,"props":1666,"children":1667},{"style":1286},[1668],{"type":178,"value":1362},{"type":173,"tag":266,"props":1670,"children":1671},{},[1672,1677],{"type":173,"tag":270,"props":1673,"children":1674},{},[1675],{"type":178,"value":1676},"内建类型（IntrinsicType）：用于内部实现的、基础的类型，例如 string、number、boolean、void、any、unknown 等。在类型检查中，简单的类型可直接对比得出结果，只有符合类型才需要初始化，以减少性能消耗。",{"type":173,"tag":270,"props":1678,"children":1679},{},[1680],{"type":178,"value":1681},"可刷新类型（FreshableType）：用于描述那些可以“重置”的类型。这个概念常出现在对象字面量或数组字面量等类型推断时，编译器需要将其标记为“新鲜”的，以便后续类型收窄和属性检查。",{"type":173,"tag":187,"props":1683,"children":1685},{"id":1684},"any-和-unknown-的区别",[1686],{"type":178,"value":1687},"any 和 unknown 的区别？",{"type":173,"tag":174,"props":1689,"children":1690},{},[1691],{"type":178,"value":1692},"unknown 相比 any 类型更严格，早期暴露错误，防止隐式 any 引发潜在问题，这一点可以从编译器对 JS 和 TS 文件设置的默认类型分辨。在纯 JS 文件，TypeScript 要最大程度兼容原生 JS 的灵活性，不阻碍开发流程、不引入过多类型错误。因此，遇到无法推断的泛型类型参数，默认就是 any，完全信任开发者、不过多类型限制。而在 TS 中，如果无法从上下文推断出泛型类型参数的默认值，返回 unknown，让错误早暴露，引导开发者补全类型声明或修正逻辑。",{"type":173,"tag":1245,"props":1694,"children":1696},{"className":1247,"code":1695,"language":1249,"meta":166,"style":166},"function getDefaultTypeArgumentType(isInJavaScriptFile: boolean): Type {\n  return isInJavaScriptFile ? anyType : unknownType\n}\n",[1697],{"type":173,"tag":346,"props":1698,"children":1699},{"__ignoreMap":166},[1700,1753,1787],{"type":173,"tag":1255,"props":1701,"children":1702},{"class":1257,"line":1258},[1703,1708,1714,1719,1725,1729,1735,1740,1744,1749],{"type":173,"tag":1255,"props":1704,"children":1705},{"style":1274},[1706],{"type":178,"value":1707},"function",{"type":173,"tag":1255,"props":1709,"children":1711},{"style":1710},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1712],{"type":178,"value":1713}," getDefaultTypeArgumentType",{"type":173,"tag":1255,"props":1715,"children":1716},{"style":1286},[1717],{"type":178,"value":1718},"(",{"type":173,"tag":1255,"props":1720,"children":1722},{"style":1721},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1723],{"type":178,"value":1724},"isInJavaScriptFile",{"type":173,"tag":1255,"props":1726,"children":1727},{"style":1409},[1728],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1730,"children":1732},{"style":1731},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1733],{"type":178,"value":1734}," boolean",{"type":173,"tag":1255,"props":1736,"children":1737},{"style":1286},[1738],{"type":178,"value":1739},")",{"type":173,"tag":1255,"props":1741,"children":1742},{"style":1409},[1743],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1745,"children":1746},{"style":1280},[1747],{"type":178,"value":1748}," Type",{"type":173,"tag":1255,"props":1750,"children":1751},{"style":1286},[1752],{"type":178,"value":1289},{"type":173,"tag":1255,"props":1754,"children":1755},{"class":1257,"line":1292},[1756,1761,1767,1772,1777,1782],{"type":173,"tag":1255,"props":1757,"children":1758},{"style":1262},[1759],{"type":178,"value":1760},"  return",{"type":173,"tag":1255,"props":1762,"children":1764},{"style":1763},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1765],{"type":178,"value":1766}," isInJavaScriptFile",{"type":173,"tag":1255,"props":1768,"children":1769},{"style":1409},[1770],{"type":178,"value":1771}," ?",{"type":173,"tag":1255,"props":1773,"children":1774},{"style":1763},[1775],{"type":178,"value":1776}," anyType",{"type":173,"tag":1255,"props":1778,"children":1779},{"style":1409},[1780],{"type":178,"value":1781}," :",{"type":173,"tag":1255,"props":1783,"children":1784},{"style":1763},[1785],{"type":178,"value":1786}," unknownType\n",{"type":173,"tag":1255,"props":1788,"children":1789},{"class":1257,"line":1307},[1790],{"type":173,"tag":1255,"props":1791,"children":1792},{"style":1286},[1793],{"type":178,"value":1362},{"type":173,"tag":174,"props":1795,"children":1796},{},[1797],{"type":178,"value":1798},"解析",{"type":173,"tag":181,"props":1800,"children":1802},{"id":1801},"binder",[1803],{"type":178,"value":1804},"Binder",{"type":173,"tag":187,"props":1806,"children":1808},{"id":1807},"symbol-的数据结构",[1809],{"type":178,"value":1810},"Symbol 的数据结构？",{"type":173,"tag":174,"props":1812,"children":1813},{},[1814],{"type":178,"value":1815},"在 TS 编译器中，Symbol 用于表示程序中的命名实体，如变量、函数、类、接口等，并记录了它们的相关信息，以便辅助类型推断。",{"type":173,"tag":1245,"props":1817,"children":1819},{"className":1247,"code":1818,"language":1249,"meta":166,"style":166},"export interface Symbol {\n  // 标记符号的类型（变量、函数、类、接口、模块等），可组合\n  flags: SymbolFlags                   \n  // 转义后的唯一符号名\n  escapedName: __String             \n  // 该符号所有声明节点（如接口合并、类声明等）     \n  declarations?: Declaration[]           \n  // 该符号的第一个“值声明”，即运行时有值的声明\n  valueDeclaration?: Declaration      \n  // 成员符号表（如类、接口、对象字面量的属性/方法）   \n  members?: SymbolTable       \n  // 模块的导出成员符号表           \n  exports?: SymbolTable          \n  // UMD 条件性全局导出符号表        \n  globalExports?: SymbolTable            \n  // 唯一 id，内部用于查找符号链接\n  id: SymbolId          \n  // 合并 id，内部用于合并符号\n  mergeId: number       \n  // 父符号（如成员的所属类/接口/模块）\n  parent?: Symbol       \n  // 关联的导出符号（如 export default 的导出符号）\n  exportSymbol?: Symbol \n  // 是否为仅包含 const enum 的模块\n  constEnumOnlyModule: boolean | undefined \n  // 是否被引用，及引用的意义（如类型参数/参数）\n  isReferenced?: SymbolFlags \n  // 最后一次赋值的源码位置\n  lastAssignmentPos?: number \n  // JS 类属性是否可被方法符号替换\n  isReplaceableByMethod?: boolean \n  // 动态赋值声明与符号的映射（如 late-bound 属性）\n  assignmentDeclarationMembers?: Map\u003Cnumber, Declaration> \n}\n",[1820],{"type":173,"tag":346,"props":1821,"children":1822},{"__ignoreMap":166},[1823,1843,1851,1873,1881,1903,1911,1934,1943,1965,1974,1997,2006,2028,2037,2059,2068,2090,2099,2121,2130,2151,2160,2182,2191,2222,2231,2252,2261,2282,2291,2312,2321,2367],{"type":173,"tag":1255,"props":1824,"children":1825},{"class":1257,"line":1258},[1826,1830,1834,1839],{"type":173,"tag":1255,"props":1827,"children":1828},{"style":1262},[1829],{"type":178,"value":1265},{"type":173,"tag":1255,"props":1831,"children":1832},{"style":1274},[1833],{"type":178,"value":1557},{"type":173,"tag":1255,"props":1835,"children":1836},{"style":1280},[1837],{"type":178,"value":1838}," Symbol",{"type":173,"tag":1255,"props":1840,"children":1841},{"style":1286},[1842],{"type":178,"value":1289},{"type":173,"tag":1255,"props":1844,"children":1845},{"class":1257,"line":1292},[1846],{"type":173,"tag":1255,"props":1847,"children":1848},{"style":1350},[1849],{"type":178,"value":1850},"  // 标记符号的类型（变量、函数、类、接口、模块等），可组合\n",{"type":173,"tag":1255,"props":1852,"children":1853},{"class":1257,"line":1307},[1854,1859,1863,1868],{"type":173,"tag":1255,"props":1855,"children":1856},{"style":1588},[1857],{"type":178,"value":1858},"  flags",{"type":173,"tag":1255,"props":1860,"children":1861},{"style":1409},[1862],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1864,"children":1865},{"style":1280},[1866],{"type":178,"value":1867}," SymbolFlags",{"type":173,"tag":1255,"props":1869,"children":1870},{"style":1763},[1871],{"type":178,"value":1872},"                   \n",{"type":173,"tag":1255,"props":1874,"children":1875},{"class":1257,"line":1320},[1876],{"type":173,"tag":1255,"props":1877,"children":1878},{"style":1350},[1879],{"type":178,"value":1880},"  // 转义后的唯一符号名\n",{"type":173,"tag":1255,"props":1882,"children":1883},{"class":1257,"line":1333},[1884,1889,1893,1898],{"type":173,"tag":1255,"props":1885,"children":1886},{"style":1588},[1887],{"type":178,"value":1888},"  escapedName",{"type":173,"tag":1255,"props":1890,"children":1891},{"style":1409},[1892],{"type":178,"value":1596},{"type":173,"tag":1255,"props":1894,"children":1895},{"style":1280},[1896],{"type":178,"value":1897}," __String",{"type":173,"tag":1255,"props":1899,"children":1900},{"style":1763},[1901],{"type":178,"value":1902},"             \n",{"type":173,"tag":1255,"props":1904,"children":1905},{"class":1257,"line":1346},[1906],{"type":173,"tag":1255,"props":1907,"children":1908},{"style":1350},[1909],{"type":178,"value":1910},"  // 该符号所有声明节点（如接口合并、类声明等）     \n",{"type":173,"tag":1255,"props":1912,"children":1913},{"class":1257,"line":1356},[1914,1919,1924,1929],{"type":173,"tag":1255,"props":1915,"children":1916},{"style":1588},[1917],{"type":178,"value":1918},"  declarations",{"type":173,"tag":1255,"props":1920,"children":1921},{"style":1409},[1922],{"type":178,"value":1923},"?:",{"type":173,"tag":1255,"props":1925,"children":1926},{"style":1280},[1927],{"type":178,"value":1928}," Declaration",{"type":173,"tag":1255,"props":1930,"children":1931},{"style":1763},[1932],{"type":178,"value":1933},"[]           \n",{"type":173,"tag":1255,"props":1935,"children":1937},{"class":1257,"line":1936},8,[1938],{"type":173,"tag":1255,"props":1939,"children":1940},{"style":1350},[1941],{"type":178,"value":1942},"  // 该符号的第一个“值声明”，即运行时有值的声明\n",{"type":173,"tag":1255,"props":1944,"children":1946},{"class":1257,"line":1945},9,[1947,1952,1956,1960],{"type":173,"tag":1255,"props":1948,"children":1949},{"style":1588},[1950],{"type":178,"value":1951},"  valueDeclaration",{"type":173,"tag":1255,"props":1953,"children":1954},{"style":1409},[1955],{"type":178,"value":1923},{"type":173,"tag":1255,"props":1957,"children":1958},{"style":1280},[1959],{"type":178,"value":1928},{"type":173,"tag":1255,"props":1961,"children":1962},{"style":1763},[1963],{"type":178,"value":1964},"      \n",{"type":173,"tag":1255,"props":1966,"children":1968},{"class":1257,"line":1967},10,[1969],{"type":173,"tag":1255,"props":1970,"children":1971},{"style":1350},[1972],{"type":178,"value":1973},"  // 成员符号表（如类、接口、对象字面量的属性/方法）   \n",{"type":173,"tag":1255,"props":1975,"children":1977},{"class":1257,"line":1976},11,[1978,1983,1987,1992],{"type":173,"tag":1255,"props":1979,"children":1980},{"style":1588},[1981],{"type":178,"value":1982},"  members",{"type":173,"tag":1255,"props":1984,"children":1985},{"style":1409},[1986],{"type":178,"value":1923},{"type":173,"tag":1255,"props":1988,"children":1989},{"style":1280},[1990],{"type":178,"value":1991}," SymbolTable",{"type":173,"tag":1255,"props":1993,"children":1994},{"style":1763},[1995],{"type":178,"value":1996},"       \n",{"type":173,"tag":1255,"props":1998,"children":2000},{"class":1257,"line":1999},12,[2001],{"type":173,"tag":1255,"props":2002,"children":2003},{"style":1350},[2004],{"type":178,"value":2005},"  // 模块的导出成员符号表           \n",{"type":173,"tag":1255,"props":2007,"children":2009},{"class":1257,"line":2008},13,[2010,2015,2019,2023],{"type":173,"tag":1255,"props":2011,"children":2012},{"style":1588},[2013],{"type":178,"value":2014},"  exports",{"type":173,"tag":1255,"props":2016,"children":2017},{"style":1409},[2018],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2020,"children":2021},{"style":1280},[2022],{"type":178,"value":1991},{"type":173,"tag":1255,"props":2024,"children":2025},{"style":1763},[2026],{"type":178,"value":2027},"          \n",{"type":173,"tag":1255,"props":2029,"children":2031},{"class":1257,"line":2030},14,[2032],{"type":173,"tag":1255,"props":2033,"children":2034},{"style":1350},[2035],{"type":178,"value":2036},"  // UMD 条件性全局导出符号表        \n",{"type":173,"tag":1255,"props":2038,"children":2040},{"class":1257,"line":2039},15,[2041,2046,2050,2054],{"type":173,"tag":1255,"props":2042,"children":2043},{"style":1588},[2044],{"type":178,"value":2045},"  globalExports",{"type":173,"tag":1255,"props":2047,"children":2048},{"style":1409},[2049],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2051,"children":2052},{"style":1280},[2053],{"type":178,"value":1991},{"type":173,"tag":1255,"props":2055,"children":2056},{"style":1763},[2057],{"type":178,"value":2058},"            \n",{"type":173,"tag":1255,"props":2060,"children":2062},{"class":1257,"line":2061},16,[2063],{"type":173,"tag":1255,"props":2064,"children":2065},{"style":1350},[2066],{"type":178,"value":2067},"  // 唯一 id，内部用于查找符号链接\n",{"type":173,"tag":1255,"props":2069,"children":2071},{"class":1257,"line":2070},17,[2072,2077,2081,2086],{"type":173,"tag":1255,"props":2073,"children":2074},{"style":1588},[2075],{"type":178,"value":2076},"  id",{"type":173,"tag":1255,"props":2078,"children":2079},{"style":1409},[2080],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2082,"children":2083},{"style":1280},[2084],{"type":178,"value":2085}," SymbolId",{"type":173,"tag":1255,"props":2087,"children":2088},{"style":1763},[2089],{"type":178,"value":2027},{"type":173,"tag":1255,"props":2091,"children":2093},{"class":1257,"line":2092},18,[2094],{"type":173,"tag":1255,"props":2095,"children":2096},{"style":1350},[2097],{"type":178,"value":2098},"  // 合并 id，内部用于合并符号\n",{"type":173,"tag":1255,"props":2100,"children":2102},{"class":1257,"line":2101},19,[2103,2108,2112,2117],{"type":173,"tag":1255,"props":2104,"children":2105},{"style":1588},[2106],{"type":178,"value":2107},"  mergeId",{"type":173,"tag":1255,"props":2109,"children":2110},{"style":1409},[2111],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2113,"children":2114},{"style":1731},[2115],{"type":178,"value":2116}," number",{"type":173,"tag":1255,"props":2118,"children":2119},{"style":1763},[2120],{"type":178,"value":1996},{"type":173,"tag":1255,"props":2122,"children":2124},{"class":1257,"line":2123},20,[2125],{"type":173,"tag":1255,"props":2126,"children":2127},{"style":1350},[2128],{"type":178,"value":2129},"  // 父符号（如成员的所属类/接口/模块）\n",{"type":173,"tag":1255,"props":2131,"children":2133},{"class":1257,"line":2132},21,[2134,2139,2143,2147],{"type":173,"tag":1255,"props":2135,"children":2136},{"style":1588},[2137],{"type":178,"value":2138},"  parent",{"type":173,"tag":1255,"props":2140,"children":2141},{"style":1409},[2142],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2144,"children":2145},{"style":1280},[2146],{"type":178,"value":1838},{"type":173,"tag":1255,"props":2148,"children":2149},{"style":1763},[2150],{"type":178,"value":1996},{"type":173,"tag":1255,"props":2152,"children":2154},{"class":1257,"line":2153},22,[2155],{"type":173,"tag":1255,"props":2156,"children":2157},{"style":1350},[2158],{"type":178,"value":2159},"  // 关联的导出符号（如 export default 的导出符号）\n",{"type":173,"tag":1255,"props":2161,"children":2163},{"class":1257,"line":2162},23,[2164,2169,2173,2177],{"type":173,"tag":1255,"props":2165,"children":2166},{"style":1588},[2167],{"type":178,"value":2168},"  exportSymbol",{"type":173,"tag":1255,"props":2170,"children":2171},{"style":1409},[2172],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2174,"children":2175},{"style":1280},[2176],{"type":178,"value":1838},{"type":173,"tag":1255,"props":2178,"children":2179},{"style":1763},[2180],{"type":178,"value":2181}," \n",{"type":173,"tag":1255,"props":2183,"children":2185},{"class":1257,"line":2184},24,[2186],{"type":173,"tag":1255,"props":2187,"children":2188},{"style":1350},[2189],{"type":178,"value":2190},"  // 是否为仅包含 const enum 的模块\n",{"type":173,"tag":1255,"props":2192,"children":2194},{"class":1257,"line":2193},25,[2195,2200,2204,2208,2213,2218],{"type":173,"tag":1255,"props":2196,"children":2197},{"style":1588},[2198],{"type":178,"value":2199},"  constEnumOnlyModule",{"type":173,"tag":1255,"props":2201,"children":2202},{"style":1409},[2203],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2205,"children":2206},{"style":1731},[2207],{"type":178,"value":1734},{"type":173,"tag":1255,"props":2209,"children":2210},{"style":1409},[2211],{"type":178,"value":2212}," |",{"type":173,"tag":1255,"props":2214,"children":2215},{"style":1731},[2216],{"type":178,"value":2217}," undefined",{"type":173,"tag":1255,"props":2219,"children":2220},{"style":1763},[2221],{"type":178,"value":2181},{"type":173,"tag":1255,"props":2223,"children":2225},{"class":1257,"line":2224},26,[2226],{"type":173,"tag":1255,"props":2227,"children":2228},{"style":1350},[2229],{"type":178,"value":2230},"  // 是否被引用，及引用的意义（如类型参数/参数）\n",{"type":173,"tag":1255,"props":2232,"children":2234},{"class":1257,"line":2233},27,[2235,2240,2244,2248],{"type":173,"tag":1255,"props":2236,"children":2237},{"style":1588},[2238],{"type":178,"value":2239},"  isReferenced",{"type":173,"tag":1255,"props":2241,"children":2242},{"style":1409},[2243],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2245,"children":2246},{"style":1280},[2247],{"type":178,"value":1867},{"type":173,"tag":1255,"props":2249,"children":2250},{"style":1763},[2251],{"type":178,"value":2181},{"type":173,"tag":1255,"props":2253,"children":2255},{"class":1257,"line":2254},28,[2256],{"type":173,"tag":1255,"props":2257,"children":2258},{"style":1350},[2259],{"type":178,"value":2260},"  // 最后一次赋值的源码位置\n",{"type":173,"tag":1255,"props":2262,"children":2264},{"class":1257,"line":2263},29,[2265,2270,2274,2278],{"type":173,"tag":1255,"props":2266,"children":2267},{"style":1588},[2268],{"type":178,"value":2269},"  lastAssignmentPos",{"type":173,"tag":1255,"props":2271,"children":2272},{"style":1409},[2273],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2275,"children":2276},{"style":1731},[2277],{"type":178,"value":2116},{"type":173,"tag":1255,"props":2279,"children":2280},{"style":1763},[2281],{"type":178,"value":2181},{"type":173,"tag":1255,"props":2283,"children":2285},{"class":1257,"line":2284},30,[2286],{"type":173,"tag":1255,"props":2287,"children":2288},{"style":1350},[2289],{"type":178,"value":2290},"  // JS 类属性是否可被方法符号替换\n",{"type":173,"tag":1255,"props":2292,"children":2294},{"class":1257,"line":2293},31,[2295,2300,2304,2308],{"type":173,"tag":1255,"props":2296,"children":2297},{"style":1588},[2298],{"type":178,"value":2299},"  isReplaceableByMethod",{"type":173,"tag":1255,"props":2301,"children":2302},{"style":1409},[2303],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2305,"children":2306},{"style":1731},[2307],{"type":178,"value":1734},{"type":173,"tag":1255,"props":2309,"children":2310},{"style":1763},[2311],{"type":178,"value":2181},{"type":173,"tag":1255,"props":2313,"children":2315},{"class":1257,"line":2314},32,[2316],{"type":173,"tag":1255,"props":2317,"children":2318},{"style":1350},[2319],{"type":178,"value":2320},"  // 动态赋值声明与符号的映射（如 late-bound 属性）\n",{"type":173,"tag":1255,"props":2322,"children":2324},{"class":1257,"line":2323},33,[2325,2330,2334,2339,2344,2349,2354,2358,2363],{"type":173,"tag":1255,"props":2326,"children":2327},{"style":1588},[2328],{"type":178,"value":2329},"  assignmentDeclarationMembers",{"type":173,"tag":1255,"props":2331,"children":2332},{"style":1409},[2333],{"type":178,"value":1923},{"type":173,"tag":1255,"props":2335,"children":2336},{"style":1280},[2337],{"type":178,"value":2338}," Map",{"type":173,"tag":1255,"props":2340,"children":2341},{"style":1286},[2342],{"type":178,"value":2343},"\u003C",{"type":173,"tag":1255,"props":2345,"children":2346},{"style":1731},[2347],{"type":178,"value":2348},"number",{"type":173,"tag":1255,"props":2350,"children":2351},{"style":1286},[2352],{"type":178,"value":2353},",",{"type":173,"tag":1255,"props":2355,"children":2356},{"style":1280},[2357],{"type":178,"value":1928},{"type":173,"tag":1255,"props":2359,"children":2360},{"style":1286},[2361],{"type":178,"value":2362},">",{"type":173,"tag":1255,"props":2364,"children":2365},{"style":1763},[2366],{"type":178,"value":2181},{"type":173,"tag":1255,"props":2368,"children":2370},{"class":1257,"line":2369},34,[2371],{"type":173,"tag":1255,"props":2372,"children":2373},{"style":1286},[2374],{"type":178,"value":1362},{"type":173,"tag":174,"props":2376,"children":2377},{},[2378],{"type":178,"value":2379},"比如，在 TS 中有值声明和类型声明两种声明信息（ValueDeclarations、TypeDeclarations），都需要记录到 symbol.declarations 中。由于值声明通常是唯一的，所以值声明允许绑定到 symbol.valueDeclaration，而类型声明非唯一，只能通过 isTypeAliasDeclaration 等函数根据节点的类型做判断。",{"type":173,"tag":1245,"props":2381,"children":2383},{"className":1247,"code":2382,"language":1249,"meta":166,"style":166},"function isTypeAliasDeclaration(node: Node): node is TypeAliasDeclaration {\n  return node.kind === SyntaxKind.TypeAliasDeclaration\n}\n",[2384],{"type":173,"tag":346,"props":2385,"children":2386},{"__ignoreMap":166},[2387,2443,2481],{"type":173,"tag":1255,"props":2388,"children":2389},{"class":1257,"line":1258},[2390,2394,2399,2403,2408,2412,2416,2420,2424,2429,2434,2439],{"type":173,"tag":1255,"props":2391,"children":2392},{"style":1274},[2393],{"type":178,"value":1707},{"type":173,"tag":1255,"props":2395,"children":2396},{"style":1710},[2397],{"type":178,"value":2398}," isTypeAliasDeclaration",{"type":173,"tag":1255,"props":2400,"children":2401},{"style":1286},[2402],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2404,"children":2405},{"style":1721},[2406],{"type":178,"value":2407},"node",{"type":173,"tag":1255,"props":2409,"children":2410},{"style":1409},[2411],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2413,"children":2414},{"style":1280},[2415],{"type":178,"value":1562},{"type":173,"tag":1255,"props":2417,"children":2418},{"style":1286},[2419],{"type":178,"value":1739},{"type":173,"tag":1255,"props":2421,"children":2422},{"style":1409},[2423],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2425,"children":2426},{"style":1721},[2427],{"type":178,"value":2428}," node",{"type":173,"tag":1255,"props":2430,"children":2431},{"style":1409},[2432],{"type":178,"value":2433}," is",{"type":173,"tag":1255,"props":2435,"children":2436},{"style":1280},[2437],{"type":178,"value":2438}," TypeAliasDeclaration",{"type":173,"tag":1255,"props":2440,"children":2441},{"style":1286},[2442],{"type":178,"value":1289},{"type":173,"tag":1255,"props":2444,"children":2445},{"class":1257,"line":1292},[2446,2450,2454,2458,2463,2468,2472,2476],{"type":173,"tag":1255,"props":2447,"children":2448},{"style":1262},[2449],{"type":178,"value":1760},{"type":173,"tag":1255,"props":2451,"children":2452},{"style":1763},[2453],{"type":178,"value":2428},{"type":173,"tag":1255,"props":2455,"children":2456},{"style":1286},[2457],{"type":178,"value":833},{"type":173,"tag":1255,"props":2459,"children":2460},{"style":1763},[2461],{"type":178,"value":2462},"kind",{"type":173,"tag":1255,"props":2464,"children":2465},{"style":1409},[2466],{"type":178,"value":2467}," ===",{"type":173,"tag":1255,"props":2469,"children":2470},{"style":1763},[2471],{"type":178,"value":1283},{"type":173,"tag":1255,"props":2473,"children":2474},{"style":1286},[2475],{"type":178,"value":833},{"type":173,"tag":1255,"props":2477,"children":2478},{"style":1763},[2479],{"type":178,"value":2480},"TypeAliasDeclaration\n",{"type":173,"tag":1255,"props":2482,"children":2483},{"class":1257,"line":1307},[2484],{"type":173,"tag":1255,"props":2485,"children":2486},{"style":1286},[2487],{"type":178,"value":1362},{"type":173,"tag":181,"props":2489,"children":2491},{"id":2490},"program",[2492],{"type":178,"value":457},{"type":173,"tag":187,"props":2494,"children":2496},{"id":2495},"program-的基本流程",[2497],{"type":178,"value":2498},"Program 的基本流程",{"type":173,"tag":174,"props":2500,"children":2501},{},[2502],{"type":178,"value":2503},"在命令行执行 tsc 时，Program 协调了 TypeScript 管道的工作过程，如：读取项目配置（tsconfig）、文件预处理（模块解析）、语法树解析、绑定（绑定语法树和符号）、类型检查（根据语法树及其绑定检查类型错误）、转换（将语法树转换为符合配置的 JavaScript 代码）、输出。",{"type":173,"tag":266,"props":2505,"children":2506},{},[2507,2512,2517,2522,2527,2532],{"type":173,"tag":270,"props":2508,"children":2509},{},[2510],{"type":178,"value":2511},"scanner：读取文件内容，分词，生成 Token 流。",{"type":173,"tag":270,"props":2513,"children":2514},{},[2515],{"type":178,"value":2516},"parser：将 Token 流转换为语法树（AST）。",{"type":173,"tag":270,"props":2518,"children":2519},{},[2520],{"type":178,"value":2521},"binder：把程序中的变量、函数、类等标识符绑定到具体的符号（Symbol）对象上，组织出符号表，为后续类型检查、类型推断和代码生成提供基础语义信息。",{"type":173,"tag":270,"props":2523,"children":2524},{},[2525],{"type":178,"value":2526},"checker：根据绑定的符号表，进行类型检查和类型推断，确保代码符合 TypeScript 的类型规则。",{"type":173,"tag":270,"props":2528,"children":2529},{},[2530],{"type":178,"value":2531},"transformer：将语法树转换为符合目标 JavaScript 版本的代码，可能包括语法转换、特性降级等。",{"type":173,"tag":270,"props":2533,"children":2534},{},[2535],{"type":178,"value":2536},"emitter：将转换后的语法树输出为 JavaScript 代码文件。",{"type":173,"tag":174,"props":2538,"children":2539},{},[2540],{"type":178,"value":2541},"关于 Checker 的某种概况性说明：",{"type":173,"tag":174,"props":2543,"children":2544},{},[2545],{"type":173,"tag":2546,"props":2547,"children":2549},"img",{"alt":166,"src":2548},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507120154134.png",[],{"type":173,"tag":181,"props":2551,"children":2553},{"id":2552},"checker",[2554],{"type":178,"value":2555},"Checker",{"type":173,"tag":187,"props":2557,"children":2559},{"id":2558},"一个典型的类型检查的调用过程",[2560],{"type":178,"value":2561},"一个典型的类型检查的调用过程？",{"type":173,"tag":174,"props":2563,"children":2564},{},[2565,2567,2573],{"type":178,"value":2566},"以下代码为例，分析使用 TS Compiler API 的 ",{"type":173,"tag":346,"props":2568,"children":2570},{"className":2569},[],[2571],{"type":178,"value":2572},"checker.getTypeAtLocation",{"type":178,"value":2574}," 获取 x1 的类型的过程。",{"type":173,"tag":1245,"props":2576,"children":2580},{"className":2577,"code":2578,"language":2579,"meta":166,"style":166},"language-typescript shiki shiki-themes material-theme-lighter github-light github-dark monokai","declare function fn(x: number): string\nconst x1 = fn(1)\n","typescript",[2581],{"type":173,"tag":346,"props":2582,"children":2583},{"__ignoreMap":166},[2584,2632],{"type":173,"tag":1255,"props":2585,"children":2586},{"class":1257,"line":1258},[2587,2592,2597,2602,2606,2611,2615,2619,2623,2627],{"type":173,"tag":1255,"props":2588,"children":2589},{"style":1268},[2590],{"type":178,"value":2591},"declare",{"type":173,"tag":1255,"props":2593,"children":2594},{"style":1274},[2595],{"type":178,"value":2596}," function",{"type":173,"tag":1255,"props":2598,"children":2599},{"style":1710},[2600],{"type":178,"value":2601}," fn",{"type":173,"tag":1255,"props":2603,"children":2604},{"style":1286},[2605],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2607,"children":2608},{"style":1721},[2609],{"type":178,"value":2610},"x",{"type":173,"tag":1255,"props":2612,"children":2613},{"style":1409},[2614],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2616,"children":2617},{"style":1731},[2618],{"type":178,"value":2116},{"type":173,"tag":1255,"props":2620,"children":2621},{"style":1286},[2622],{"type":178,"value":1739},{"type":173,"tag":1255,"props":2624,"children":2625},{"style":1409},[2626],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2628,"children":2629},{"style":1731},[2630],{"type":178,"value":2631}," string\n",{"type":173,"tag":1255,"props":2633,"children":2634},{"class":1257,"line":1292},[2635,2640,2645,2650,2654,2658,2663],{"type":173,"tag":1255,"props":2636,"children":2637},{"style":1274},[2638],{"type":178,"value":2639},"const",{"type":173,"tag":1255,"props":2641,"children":2642},{"style":1296},[2643],{"type":178,"value":2644}," x1",{"type":173,"tag":1255,"props":2646,"children":2647},{"style":1409},[2648],{"type":178,"value":2649}," =",{"type":173,"tag":1255,"props":2651,"children":2652},{"style":1710},[2653],{"type":178,"value":2601},{"type":173,"tag":1255,"props":2655,"children":2656},{"style":1763},[2657],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2659,"children":2660},{"style":1415},[2661],{"type":178,"value":2662},"1",{"type":173,"tag":1255,"props":2664,"children":2665},{"style":1763},[2666],{"type":178,"value":2667},")\n",{"type":173,"tag":174,"props":2669,"children":2670},{},[2671,2673,2679],{"type":178,"value":2672},"火焰图从 ",{"type":173,"tag":346,"props":2674,"children":2676},{"className":2675},[],[2677],{"type":178,"value":2678},"trace",{"type":178,"value":2680}," 函数开始看起。需要注意的是，由于采样精度有限，所以火焰图中可能会有一些函数调用被省略。",{"type":173,"tag":174,"props":2682,"children":2683},{},[2684],{"type":173,"tag":2546,"props":2685,"children":2687},{"alt":166,"src":2686},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140933194.png",[],{"type":173,"tag":174,"props":2689,"children":2690},{},[2691],{"type":178,"value":2692},"以下是详细的调用过程说明。",{"type":173,"tag":174,"props":2694,"children":2695},{},[2696],{"type":178,"value":2697},"每一个 Program 都有自己的 TypeChecker 实例，其中提供了 getTypeOfLocation API，用来获取某个位置的节点标记。",{"type":173,"tag":1245,"props":2699,"children":2701},{"className":1247,"code":2700,"language":1249,"meta":166,"style":166},"function createTypeChecker(program: Program): TypeChecker {\n  return {\n    getTypeAtLocation: nodeIn => {\n      const node = getParseTreeNode(nodeIn)\n      return node ? getTypeOfNode(node) : errorType\n    },\n  }\n}\n",[2702],{"type":173,"tag":346,"props":2703,"children":2704},{"__ignoreMap":166},[2705,2751,2762,2788,2823,2866,2874,2882],{"type":173,"tag":1255,"props":2706,"children":2707},{"class":1257,"line":1258},[2708,2712,2717,2721,2725,2729,2734,2738,2742,2747],{"type":173,"tag":1255,"props":2709,"children":2710},{"style":1274},[2711],{"type":178,"value":1707},{"type":173,"tag":1255,"props":2713,"children":2714},{"style":1710},[2715],{"type":178,"value":2716}," createTypeChecker",{"type":173,"tag":1255,"props":2718,"children":2719},{"style":1286},[2720],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2722,"children":2723},{"style":1721},[2724],{"type":178,"value":2490},{"type":173,"tag":1255,"props":2726,"children":2727},{"style":1409},[2728],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2730,"children":2731},{"style":1280},[2732],{"type":178,"value":2733}," Program",{"type":173,"tag":1255,"props":2735,"children":2736},{"style":1286},[2737],{"type":178,"value":1739},{"type":173,"tag":1255,"props":2739,"children":2740},{"style":1409},[2741],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2743,"children":2744},{"style":1280},[2745],{"type":178,"value":2746}," TypeChecker",{"type":173,"tag":1255,"props":2748,"children":2749},{"style":1286},[2750],{"type":178,"value":1289},{"type":173,"tag":1255,"props":2752,"children":2753},{"class":1257,"line":1292},[2754,2758],{"type":173,"tag":1255,"props":2755,"children":2756},{"style":1262},[2757],{"type":178,"value":1760},{"type":173,"tag":1255,"props":2759,"children":2760},{"style":1286},[2761],{"type":178,"value":1289},{"type":173,"tag":1255,"props":2763,"children":2764},{"class":1257,"line":1307},[2765,2770,2774,2779,2784],{"type":173,"tag":1255,"props":2766,"children":2767},{"style":1710},[2768],{"type":178,"value":2769},"    getTypeAtLocation",{"type":173,"tag":1255,"props":2771,"children":2772},{"style":1286},[2773],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2775,"children":2776},{"style":1721},[2777],{"type":178,"value":2778}," nodeIn",{"type":173,"tag":1255,"props":2780,"children":2781},{"style":1274},[2782],{"type":178,"value":2783}," =>",{"type":173,"tag":1255,"props":2785,"children":2786},{"style":1286},[2787],{"type":178,"value":1289},{"type":173,"tag":1255,"props":2789,"children":2790},{"class":1257,"line":1320},[2791,2796,2800,2804,2809,2814,2819],{"type":173,"tag":1255,"props":2792,"children":2793},{"style":1274},[2794],{"type":178,"value":2795},"      const",{"type":173,"tag":1255,"props":2797,"children":2798},{"style":1296},[2799],{"type":178,"value":2428},{"type":173,"tag":1255,"props":2801,"children":2802},{"style":1409},[2803],{"type":178,"value":2649},{"type":173,"tag":1255,"props":2805,"children":2806},{"style":1710},[2807],{"type":178,"value":2808}," getParseTreeNode",{"type":173,"tag":1255,"props":2810,"children":2812},{"style":2811},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[2813],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2815,"children":2816},{"style":1763},[2817],{"type":178,"value":2818},"nodeIn",{"type":173,"tag":1255,"props":2820,"children":2821},{"style":2811},[2822],{"type":178,"value":2667},{"type":173,"tag":1255,"props":2824,"children":2825},{"class":1257,"line":1333},[2826,2831,2835,2839,2844,2848,2852,2857,2861],{"type":173,"tag":1255,"props":2827,"children":2828},{"style":1262},[2829],{"type":178,"value":2830},"      return",{"type":173,"tag":1255,"props":2832,"children":2833},{"style":1763},[2834],{"type":178,"value":2428},{"type":173,"tag":1255,"props":2836,"children":2837},{"style":1409},[2838],{"type":178,"value":1771},{"type":173,"tag":1255,"props":2840,"children":2841},{"style":1710},[2842],{"type":178,"value":2843}," getTypeOfNode",{"type":173,"tag":1255,"props":2845,"children":2846},{"style":2811},[2847],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2849,"children":2850},{"style":1763},[2851],{"type":178,"value":2407},{"type":173,"tag":1255,"props":2853,"children":2854},{"style":2811},[2855],{"type":178,"value":2856},") ",{"type":173,"tag":1255,"props":2858,"children":2859},{"style":1409},[2860],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2862,"children":2863},{"style":1763},[2864],{"type":178,"value":2865}," errorType\n",{"type":173,"tag":1255,"props":2867,"children":2868},{"class":1257,"line":1346},[2869],{"type":173,"tag":1255,"props":2870,"children":2871},{"style":1286},[2872],{"type":178,"value":2873},"    },\n",{"type":173,"tag":1255,"props":2875,"children":2876},{"class":1257,"line":1356},[2877],{"type":173,"tag":1255,"props":2878,"children":2879},{"style":1286},[2880],{"type":178,"value":2881},"  }\n",{"type":173,"tag":1255,"props":2883,"children":2884},{"class":1257,"line":1936},[2885],{"type":173,"tag":1255,"props":2886,"children":2887},{"style":1286},[2888],{"type":178,"value":1362},{"type":173,"tag":174,"props":2890,"children":2891},{},[2892],{"type":178,"value":2893},"由于 TypeScript 在编译等过程中，经常会对语法树（AST）做各种变换，比如类型分析、代码合成（emit helper）、自动补充内容等。node.original 主要解决 AST 节点在变换、派生或合成后，如何溯源的问题。如重构、自动补全、语法高亮、定义跳转、引用查找，都需要知道原始的节点信息。所以从上代码能看到，getTypeAtLocation 先找到了原始节点，再获取其类型。",{"type":173,"tag":174,"props":2895,"children":2896},{},[2897],{"type":178,"value":2898},"x1 的原始节点数据结构如图。",{"type":173,"tag":174,"props":2900,"children":2901},{},[2902],{"type":173,"tag":2546,"props":2903,"children":2905},{"alt":166,"src":2904},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140424234.png",[],{"type":173,"tag":174,"props":2907,"children":2908},{},[2909],{"type":178,"value":2910},"getTyp调用不同的处理函数，因为 x1 位于变量声明节点，所以流程进入对应 if 语句，先获取节点对应的 Symbol，再从中获取类型。",{"type":173,"tag":1245,"props":2912,"children":2914},{"className":1247,"code":2913,"language":1249,"meta":166,"style":166},"function getTypeOfNode(node: Node): Type {\n  if (isExpressionNode(node)) {\n    //...\n  }\n  //...\n  if (isDeclarationNameOrImportPropertyName(node)) {\n    return getTypeOfSymbol(getSymbolAtLocation(node))\n  }\n}\n",[2915],{"type":173,"tag":346,"props":2916,"children":2917},{"__ignoreMap":166},[2918,2961,2997,3004,3011,3018,3050,3085,3092],{"type":173,"tag":1255,"props":2919,"children":2920},{"class":1257,"line":1258},[2921,2925,2929,2933,2937,2941,2945,2949,2953,2957],{"type":173,"tag":1255,"props":2922,"children":2923},{"style":1274},[2924],{"type":178,"value":1707},{"type":173,"tag":1255,"props":2926,"children":2927},{"style":1710},[2928],{"type":178,"value":2843},{"type":173,"tag":1255,"props":2930,"children":2931},{"style":1286},[2932],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2934,"children":2935},{"style":1721},[2936],{"type":178,"value":2407},{"type":173,"tag":1255,"props":2938,"children":2939},{"style":1409},[2940],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2942,"children":2943},{"style":1280},[2944],{"type":178,"value":1562},{"type":173,"tag":1255,"props":2946,"children":2947},{"style":1286},[2948],{"type":178,"value":1739},{"type":173,"tag":1255,"props":2950,"children":2951},{"style":1409},[2952],{"type":178,"value":1596},{"type":173,"tag":1255,"props":2954,"children":2955},{"style":1280},[2956],{"type":178,"value":1748},{"type":173,"tag":1255,"props":2958,"children":2959},{"style":1286},[2960],{"type":178,"value":1289},{"type":173,"tag":1255,"props":2962,"children":2963},{"class":1257,"line":1292},[2964,2969,2974,2979,2983,2987,2992],{"type":173,"tag":1255,"props":2965,"children":2966},{"style":1262},[2967],{"type":178,"value":2968},"  if",{"type":173,"tag":1255,"props":2970,"children":2971},{"style":2811},[2972],{"type":178,"value":2973}," (",{"type":173,"tag":1255,"props":2975,"children":2976},{"style":1710},[2977],{"type":178,"value":2978},"isExpressionNode",{"type":173,"tag":1255,"props":2980,"children":2981},{"style":2811},[2982],{"type":178,"value":1718},{"type":173,"tag":1255,"props":2984,"children":2985},{"style":1763},[2986],{"type":178,"value":2407},{"type":173,"tag":1255,"props":2988,"children":2989},{"style":2811},[2990],{"type":178,"value":2991},")) ",{"type":173,"tag":1255,"props":2993,"children":2994},{"style":1286},[2995],{"type":178,"value":2996},"{\n",{"type":173,"tag":1255,"props":2998,"children":2999},{"class":1257,"line":1307},[3000],{"type":173,"tag":1255,"props":3001,"children":3002},{"style":1350},[3003],{"type":178,"value":1661},{"type":173,"tag":1255,"props":3005,"children":3006},{"class":1257,"line":1320},[3007],{"type":173,"tag":1255,"props":3008,"children":3009},{"style":1286},[3010],{"type":178,"value":2881},{"type":173,"tag":1255,"props":3012,"children":3013},{"class":1257,"line":1333},[3014],{"type":173,"tag":1255,"props":3015,"children":3016},{"style":1350},[3017],{"type":178,"value":1353},{"type":173,"tag":1255,"props":3019,"children":3020},{"class":1257,"line":1346},[3021,3025,3029,3034,3038,3042,3046],{"type":173,"tag":1255,"props":3022,"children":3023},{"style":1262},[3024],{"type":178,"value":2968},{"type":173,"tag":1255,"props":3026,"children":3027},{"style":2811},[3028],{"type":178,"value":2973},{"type":173,"tag":1255,"props":3030,"children":3031},{"style":1710},[3032],{"type":178,"value":3033},"isDeclarationNameOrImportPropertyName",{"type":173,"tag":1255,"props":3035,"children":3036},{"style":2811},[3037],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3039,"children":3040},{"style":1763},[3041],{"type":178,"value":2407},{"type":173,"tag":1255,"props":3043,"children":3044},{"style":2811},[3045],{"type":178,"value":2991},{"type":173,"tag":1255,"props":3047,"children":3048},{"style":1286},[3049],{"type":178,"value":2996},{"type":173,"tag":1255,"props":3051,"children":3052},{"class":1257,"line":1356},[3053,3058,3063,3067,3072,3076,3080],{"type":173,"tag":1255,"props":3054,"children":3055},{"style":1262},[3056],{"type":178,"value":3057},"    return",{"type":173,"tag":1255,"props":3059,"children":3060},{"style":1710},[3061],{"type":178,"value":3062}," getTypeOfSymbol",{"type":173,"tag":1255,"props":3064,"children":3065},{"style":2811},[3066],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3068,"children":3069},{"style":1710},[3070],{"type":178,"value":3071},"getSymbolAtLocation",{"type":173,"tag":1255,"props":3073,"children":3074},{"style":2811},[3075],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3077,"children":3078},{"style":1763},[3079],{"type":178,"value":2407},{"type":173,"tag":1255,"props":3081,"children":3082},{"style":2811},[3083],{"type":178,"value":3084},"))\n",{"type":173,"tag":1255,"props":3086,"children":3087},{"class":1257,"line":1936},[3088],{"type":173,"tag":1255,"props":3089,"children":3090},{"style":1286},[3091],{"type":178,"value":2881},{"type":173,"tag":1255,"props":3093,"children":3094},{"class":1257,"line":1945},[3095],{"type":173,"tag":1255,"props":3096,"children":3097},{"style":1286},[3098],{"type":178,"value":1362},{"type":173,"tag":174,"props":3100,"children":3101},{},[3102],{"type":178,"value":3103},"为什么要从 Symbol 而不是节点获取类型呢？当源码转换成 AST 时，是不携带上下文信息的，需要再将 AST 交给 Binder 处理成 Symbol。每个 Symbol 都记录所有相关声明节点信息，同时处理了作用域（Scope），可以保证 Symbol 在各自的封闭作用域中正确分层与隔离，以便更准确的拿到类型。",{"type":173,"tag":174,"props":3105,"children":3106},{},[3107],{"type":178,"value":3108},"以下是 x1 位置对应的 Symbol。",{"type":173,"tag":174,"props":3110,"children":3111},{},[3112],{"type":173,"tag":2546,"props":3113,"children":3115},{"alt":166,"src":3114},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140437709.png",[],{"type":173,"tag":174,"props":3117,"children":3118},{},[3119],{"type":178,"value":3120},"getTypeOfSymbol 会根据 Symbol 的检查状态及类别，调用不同的处理函数。举例，某些复杂类型需要延迟计算其类型，那么它可能携带 DeferredType 的检查状态。而 x1 对应的 Symbol 是简单类型，直接根据其类型交由 getTypeOfVariableOrParameterOrProperty 处理。",{"type":173,"tag":1245,"props":3122,"children":3124},{"className":1247,"code":3123,"language":1249,"meta":166,"style":166},"function getTypeOfSymbol(symbol: Symbol): Type {\n  const checkFlags = getCheckFlags(symbol)\n  if (checkFlags & CheckFlags.DeferredType) {\n    return getTypeOfSymbolWithDeferredType(symbol)\n  }\n  //...\n  if (symbol.flags & (SymbolFlags.Variable | SymbolFlags.Property)) {\n    return getTypeOfVariableOrParameterOrProperty(symbol)\n  }\n  //...\n  return errorType\n}\n",[3125],{"type":173,"tag":346,"props":3126,"children":3127},{"__ignoreMap":166},[3128,3172,3206,3249,3273,3280,3287,3358,3382,3389,3396,3407],{"type":173,"tag":1255,"props":3129,"children":3130},{"class":1257,"line":1258},[3131,3135,3139,3143,3148,3152,3156,3160,3164,3168],{"type":173,"tag":1255,"props":3132,"children":3133},{"style":1274},[3134],{"type":178,"value":1707},{"type":173,"tag":1255,"props":3136,"children":3137},{"style":1710},[3138],{"type":178,"value":3062},{"type":173,"tag":1255,"props":3140,"children":3141},{"style":1286},[3142],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3144,"children":3145},{"style":1721},[3146],{"type":178,"value":3147},"symbol",{"type":173,"tag":1255,"props":3149,"children":3150},{"style":1409},[3151],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3153,"children":3154},{"style":1280},[3155],{"type":178,"value":1838},{"type":173,"tag":1255,"props":3157,"children":3158},{"style":1286},[3159],{"type":178,"value":1739},{"type":173,"tag":1255,"props":3161,"children":3162},{"style":1409},[3163],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3165,"children":3166},{"style":1280},[3167],{"type":178,"value":1748},{"type":173,"tag":1255,"props":3169,"children":3170},{"style":1286},[3171],{"type":178,"value":1289},{"type":173,"tag":1255,"props":3173,"children":3174},{"class":1257,"line":1292},[3175,3180,3185,3189,3194,3198,3202],{"type":173,"tag":1255,"props":3176,"children":3177},{"style":1274},[3178],{"type":178,"value":3179},"  const",{"type":173,"tag":1255,"props":3181,"children":3182},{"style":1296},[3183],{"type":178,"value":3184}," checkFlags",{"type":173,"tag":1255,"props":3186,"children":3187},{"style":1409},[3188],{"type":178,"value":2649},{"type":173,"tag":1255,"props":3190,"children":3191},{"style":1710},[3192],{"type":178,"value":3193}," getCheckFlags",{"type":173,"tag":1255,"props":3195,"children":3196},{"style":2811},[3197],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3199,"children":3200},{"style":1763},[3201],{"type":178,"value":3147},{"type":173,"tag":1255,"props":3203,"children":3204},{"style":2811},[3205],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3207,"children":3208},{"class":1257,"line":1307},[3209,3213,3217,3222,3227,3232,3236,3241,3245],{"type":173,"tag":1255,"props":3210,"children":3211},{"style":1262},[3212],{"type":178,"value":2968},{"type":173,"tag":1255,"props":3214,"children":3215},{"style":2811},[3216],{"type":178,"value":2973},{"type":173,"tag":1255,"props":3218,"children":3219},{"style":1763},[3220],{"type":178,"value":3221},"checkFlags",{"type":173,"tag":1255,"props":3223,"children":3224},{"style":1409},[3225],{"type":178,"value":3226}," &",{"type":173,"tag":1255,"props":3228,"children":3229},{"style":1763},[3230],{"type":178,"value":3231}," CheckFlags",{"type":173,"tag":1255,"props":3233,"children":3234},{"style":1286},[3235],{"type":178,"value":833},{"type":173,"tag":1255,"props":3237,"children":3238},{"style":1763},[3239],{"type":178,"value":3240},"DeferredType",{"type":173,"tag":1255,"props":3242,"children":3243},{"style":2811},[3244],{"type":178,"value":2856},{"type":173,"tag":1255,"props":3246,"children":3247},{"style":1286},[3248],{"type":178,"value":2996},{"type":173,"tag":1255,"props":3250,"children":3251},{"class":1257,"line":1320},[3252,3256,3261,3265,3269],{"type":173,"tag":1255,"props":3253,"children":3254},{"style":1262},[3255],{"type":178,"value":3057},{"type":173,"tag":1255,"props":3257,"children":3258},{"style":1710},[3259],{"type":178,"value":3260}," getTypeOfSymbolWithDeferredType",{"type":173,"tag":1255,"props":3262,"children":3263},{"style":2811},[3264],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3266,"children":3267},{"style":1763},[3268],{"type":178,"value":3147},{"type":173,"tag":1255,"props":3270,"children":3271},{"style":2811},[3272],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3274,"children":3275},{"class":1257,"line":1333},[3276],{"type":173,"tag":1255,"props":3277,"children":3278},{"style":1286},[3279],{"type":178,"value":2881},{"type":173,"tag":1255,"props":3281,"children":3282},{"class":1257,"line":1346},[3283],{"type":173,"tag":1255,"props":3284,"children":3285},{"style":1350},[3286],{"type":178,"value":1353},{"type":173,"tag":1255,"props":3288,"children":3289},{"class":1257,"line":1356},[3290,3294,3298,3302,3306,3311,3315,3319,3324,3328,3333,3337,3341,3345,3350,3354],{"type":173,"tag":1255,"props":3291,"children":3292},{"style":1262},[3293],{"type":178,"value":2968},{"type":173,"tag":1255,"props":3295,"children":3296},{"style":2811},[3297],{"type":178,"value":2973},{"type":173,"tag":1255,"props":3299,"children":3300},{"style":1763},[3301],{"type":178,"value":3147},{"type":173,"tag":1255,"props":3303,"children":3304},{"style":1286},[3305],{"type":178,"value":833},{"type":173,"tag":1255,"props":3307,"children":3308},{"style":1763},[3309],{"type":178,"value":3310},"flags",{"type":173,"tag":1255,"props":3312,"children":3313},{"style":1409},[3314],{"type":178,"value":3226},{"type":173,"tag":1255,"props":3316,"children":3317},{"style":2811},[3318],{"type":178,"value":2973},{"type":173,"tag":1255,"props":3320,"children":3321},{"style":1763},[3322],{"type":178,"value":3323},"SymbolFlags",{"type":173,"tag":1255,"props":3325,"children":3326},{"style":1286},[3327],{"type":178,"value":833},{"type":173,"tag":1255,"props":3329,"children":3330},{"style":1763},[3331],{"type":178,"value":3332},"Variable",{"type":173,"tag":1255,"props":3334,"children":3335},{"style":1409},[3336],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3338,"children":3339},{"style":1763},[3340],{"type":178,"value":1867},{"type":173,"tag":1255,"props":3342,"children":3343},{"style":1286},[3344],{"type":178,"value":833},{"type":173,"tag":1255,"props":3346,"children":3347},{"style":1763},[3348],{"type":178,"value":3349},"Property",{"type":173,"tag":1255,"props":3351,"children":3352},{"style":2811},[3353],{"type":178,"value":2991},{"type":173,"tag":1255,"props":3355,"children":3356},{"style":1286},[3357],{"type":178,"value":2996},{"type":173,"tag":1255,"props":3359,"children":3360},{"class":1257,"line":1936},[3361,3365,3370,3374,3378],{"type":173,"tag":1255,"props":3362,"children":3363},{"style":1262},[3364],{"type":178,"value":3057},{"type":173,"tag":1255,"props":3366,"children":3367},{"style":1710},[3368],{"type":178,"value":3369}," getTypeOfVariableOrParameterOrProperty",{"type":173,"tag":1255,"props":3371,"children":3372},{"style":2811},[3373],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3375,"children":3376},{"style":1763},[3377],{"type":178,"value":3147},{"type":173,"tag":1255,"props":3379,"children":3380},{"style":2811},[3381],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3383,"children":3384},{"class":1257,"line":1945},[3385],{"type":173,"tag":1255,"props":3386,"children":3387},{"style":1286},[3388],{"type":178,"value":2881},{"type":173,"tag":1255,"props":3390,"children":3391},{"class":1257,"line":1967},[3392],{"type":173,"tag":1255,"props":3393,"children":3394},{"style":1350},[3395],{"type":178,"value":1353},{"type":173,"tag":1255,"props":3397,"children":3398},{"class":1257,"line":1976},[3399,3403],{"type":173,"tag":1255,"props":3400,"children":3401},{"style":1262},[3402],{"type":178,"value":1760},{"type":173,"tag":1255,"props":3404,"children":3405},{"style":1763},[3406],{"type":178,"value":2865},{"type":173,"tag":1255,"props":3408,"children":3409},{"class":1257,"line":1999},[3410],{"type":173,"tag":1255,"props":3411,"children":3412},{"style":1286},[3413],{"type":178,"value":1362},{"type":173,"tag":174,"props":3415,"children":3416},{},[3417],{"type":178,"value":3418},"Symbol 有 links 属性，用来存储符号的附加信息，如缓存、临时数据、类型检查相关状态。获取 Symbol 的类型时，只要类型不是上下文相关的，那么计算结果会缓存到 Symbol.links.type 属性中。",{"type":173,"tag":174,"props":3420,"children":3421},{},[3422],{"type":178,"value":3423},"什么是上下文相关的类型呢？举个例子，以下代码中的 item 的类型要从其父 Symbol 中推断出来，那么它就是上下文相关的。",{"type":173,"tag":1245,"props":3425,"children":3427},{"className":1247,"code":3426,"language":1249,"meta":166,"style":166},"const arr = [1, 2, 3]\narr.map((item) => item.toFixed())\n",[3428],{"type":173,"tag":346,"props":3429,"children":3430},{"__ignoreMap":166},[3431,3478],{"type":173,"tag":1255,"props":3432,"children":3433},{"class":1257,"line":1258},[3434,3438,3443,3447,3452,3456,3460,3464,3468,3473],{"type":173,"tag":1255,"props":3435,"children":3436},{"style":1274},[3437],{"type":178,"value":2639},{"type":173,"tag":1255,"props":3439,"children":3440},{"style":1296},[3441],{"type":178,"value":3442}," arr",{"type":173,"tag":1255,"props":3444,"children":3445},{"style":1409},[3446],{"type":178,"value":2649},{"type":173,"tag":1255,"props":3448,"children":3449},{"style":1763},[3450],{"type":178,"value":3451}," [",{"type":173,"tag":1255,"props":3453,"children":3454},{"style":1415},[3455],{"type":178,"value":2662},{"type":173,"tag":1255,"props":3457,"children":3458},{"style":1286},[3459],{"type":178,"value":2353},{"type":173,"tag":1255,"props":3461,"children":3462},{"style":1415},[3463],{"type":178,"value":1507},{"type":173,"tag":1255,"props":3465,"children":3466},{"style":1286},[3467],{"type":178,"value":2353},{"type":173,"tag":1255,"props":3469,"children":3470},{"style":1415},[3471],{"type":178,"value":3472}," 3",{"type":173,"tag":1255,"props":3474,"children":3475},{"style":1763},[3476],{"type":178,"value":3477},"]\n",{"type":173,"tag":1255,"props":3479,"children":3480},{"class":1257,"line":1292},[3481,3486,3490,3495,3499,3503,3508,3512,3516,3521,3525,3530],{"type":173,"tag":1255,"props":3482,"children":3483},{"style":1763},[3484],{"type":178,"value":3485},"arr",{"type":173,"tag":1255,"props":3487,"children":3488},{"style":1286},[3489],{"type":178,"value":833},{"type":173,"tag":1255,"props":3491,"children":3492},{"style":1710},[3493],{"type":178,"value":3494},"map",{"type":173,"tag":1255,"props":3496,"children":3497},{"style":1763},[3498],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3500,"children":3501},{"style":1286},[3502],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3504,"children":3505},{"style":1721},[3506],{"type":178,"value":3507},"item",{"type":173,"tag":1255,"props":3509,"children":3510},{"style":1286},[3511],{"type":178,"value":1739},{"type":173,"tag":1255,"props":3513,"children":3514},{"style":1274},[3515],{"type":178,"value":2783},{"type":173,"tag":1255,"props":3517,"children":3518},{"style":1763},[3519],{"type":178,"value":3520}," item",{"type":173,"tag":1255,"props":3522,"children":3523},{"style":1286},[3524],{"type":178,"value":833},{"type":173,"tag":1255,"props":3526,"children":3527},{"style":1710},[3528],{"type":178,"value":3529},"toFixed",{"type":173,"tag":1255,"props":3531,"children":3532},{"style":1763},[3533],{"type":178,"value":3534},"())\n",{"type":173,"tag":174,"props":3536,"children":3537},{},[3538],{"type":178,"value":3539},"显然 x1 是简单函数，不是上下文相关类型，我们继续看流程，getTypeOfVariableOrParameterOrProperty 实际调用了另一个函数去计算类型，它本身实现的是缓存模式，此概念稍后会介绍。实际的计算由 getTypeOfVariableOrParameterOrPropertyWorker 实现，需要从变量声明 symbol.valueDeclaration 中推断类型信息。",{"type":173,"tag":1245,"props":3541,"children":3543},{"className":1247,"code":3542,"language":1249,"meta":166,"style":166},"function getTypeOfVariableOrParameterOrPropertyWorker(symbol: Symbol): Type {\n  if (\n    isParameter(declaration)\n    || isPropertyDeclaration(declaration)\n    || isPropertySignature(declaration)\n    || isVariableDeclaration(declaration)\n    || isBindingElement(declaration)\n    || isJSDocPropertyLikeTag(declaration)\n  ) {\n    type = getWidenedTypeForVariableLikeDeclaration(declaration, /*reportErrors*/ true)\n  }\n}\n",[3544],{"type":173,"tag":346,"props":3545,"children":3546},{"__ignoreMap":166},[3547,3591,3603,3624,3649,3673,3697,3721,3745,3757,3801,3808],{"type":173,"tag":1255,"props":3548,"children":3549},{"class":1257,"line":1258},[3550,3554,3559,3563,3567,3571,3575,3579,3583,3587],{"type":173,"tag":1255,"props":3551,"children":3552},{"style":1274},[3553],{"type":178,"value":1707},{"type":173,"tag":1255,"props":3555,"children":3556},{"style":1710},[3557],{"type":178,"value":3558}," getTypeOfVariableOrParameterOrPropertyWorker",{"type":173,"tag":1255,"props":3560,"children":3561},{"style":1286},[3562],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3564,"children":3565},{"style":1721},[3566],{"type":178,"value":3147},{"type":173,"tag":1255,"props":3568,"children":3569},{"style":1409},[3570],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3572,"children":3573},{"style":1280},[3574],{"type":178,"value":1838},{"type":173,"tag":1255,"props":3576,"children":3577},{"style":1286},[3578],{"type":178,"value":1739},{"type":173,"tag":1255,"props":3580,"children":3581},{"style":1409},[3582],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3584,"children":3585},{"style":1280},[3586],{"type":178,"value":1748},{"type":173,"tag":1255,"props":3588,"children":3589},{"style":1286},[3590],{"type":178,"value":1289},{"type":173,"tag":1255,"props":3592,"children":3593},{"class":1257,"line":1292},[3594,3598],{"type":173,"tag":1255,"props":3595,"children":3596},{"style":1262},[3597],{"type":178,"value":2968},{"type":173,"tag":1255,"props":3599,"children":3600},{"style":2811},[3601],{"type":178,"value":3602}," (\n",{"type":173,"tag":1255,"props":3604,"children":3605},{"class":1257,"line":1307},[3606,3611,3615,3620],{"type":173,"tag":1255,"props":3607,"children":3608},{"style":1710},[3609],{"type":178,"value":3610},"    isParameter",{"type":173,"tag":1255,"props":3612,"children":3613},{"style":2811},[3614],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3616,"children":3617},{"style":1763},[3618],{"type":178,"value":3619},"declaration",{"type":173,"tag":1255,"props":3621,"children":3622},{"style":2811},[3623],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3625,"children":3626},{"class":1257,"line":1320},[3627,3632,3637,3641,3645],{"type":173,"tag":1255,"props":3628,"children":3629},{"style":1409},[3630],{"type":178,"value":3631},"    ||",{"type":173,"tag":1255,"props":3633,"children":3634},{"style":1710},[3635],{"type":178,"value":3636}," isPropertyDeclaration",{"type":173,"tag":1255,"props":3638,"children":3639},{"style":2811},[3640],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3642,"children":3643},{"style":1763},[3644],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3646,"children":3647},{"style":2811},[3648],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3650,"children":3651},{"class":1257,"line":1333},[3652,3656,3661,3665,3669],{"type":173,"tag":1255,"props":3653,"children":3654},{"style":1409},[3655],{"type":178,"value":3631},{"type":173,"tag":1255,"props":3657,"children":3658},{"style":1710},[3659],{"type":178,"value":3660}," isPropertySignature",{"type":173,"tag":1255,"props":3662,"children":3663},{"style":2811},[3664],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3666,"children":3667},{"style":1763},[3668],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3670,"children":3671},{"style":2811},[3672],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3674,"children":3675},{"class":1257,"line":1346},[3676,3680,3685,3689,3693],{"type":173,"tag":1255,"props":3677,"children":3678},{"style":1409},[3679],{"type":178,"value":3631},{"type":173,"tag":1255,"props":3681,"children":3682},{"style":1710},[3683],{"type":178,"value":3684}," isVariableDeclaration",{"type":173,"tag":1255,"props":3686,"children":3687},{"style":2811},[3688],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3690,"children":3691},{"style":1763},[3692],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3694,"children":3695},{"style":2811},[3696],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3698,"children":3699},{"class":1257,"line":1356},[3700,3704,3709,3713,3717],{"type":173,"tag":1255,"props":3701,"children":3702},{"style":1409},[3703],{"type":178,"value":3631},{"type":173,"tag":1255,"props":3705,"children":3706},{"style":1710},[3707],{"type":178,"value":3708}," isBindingElement",{"type":173,"tag":1255,"props":3710,"children":3711},{"style":2811},[3712],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3714,"children":3715},{"style":1763},[3716],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3718,"children":3719},{"style":2811},[3720],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3722,"children":3723},{"class":1257,"line":1936},[3724,3728,3733,3737,3741],{"type":173,"tag":1255,"props":3725,"children":3726},{"style":1409},[3727],{"type":178,"value":3631},{"type":173,"tag":1255,"props":3729,"children":3730},{"style":1710},[3731],{"type":178,"value":3732}," isJSDocPropertyLikeTag",{"type":173,"tag":1255,"props":3734,"children":3735},{"style":2811},[3736],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3738,"children":3739},{"style":1763},[3740],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3742,"children":3743},{"style":2811},[3744],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3746,"children":3747},{"class":1257,"line":1945},[3748,3753],{"type":173,"tag":1255,"props":3749,"children":3750},{"style":2811},[3751],{"type":178,"value":3752},"  ) ",{"type":173,"tag":1255,"props":3754,"children":3755},{"style":1286},[3756],{"type":178,"value":2996},{"type":173,"tag":1255,"props":3758,"children":3759},{"class":1257,"line":1967},[3760,3765,3769,3774,3778,3782,3786,3791,3797],{"type":173,"tag":1255,"props":3761,"children":3762},{"style":1763},[3763],{"type":178,"value":3764},"    type",{"type":173,"tag":1255,"props":3766,"children":3767},{"style":1409},[3768],{"type":178,"value":2649},{"type":173,"tag":1255,"props":3770,"children":3771},{"style":1710},[3772],{"type":178,"value":3773}," getWidenedTypeForVariableLikeDeclaration",{"type":173,"tag":1255,"props":3775,"children":3776},{"style":2811},[3777],{"type":178,"value":1718},{"type":173,"tag":1255,"props":3779,"children":3780},{"style":1763},[3781],{"type":178,"value":3619},{"type":173,"tag":1255,"props":3783,"children":3784},{"style":1286},[3785],{"type":178,"value":2353},{"type":173,"tag":1255,"props":3787,"children":3788},{"style":1350},[3789],{"type":178,"value":3790}," /*reportErrors*/",{"type":173,"tag":1255,"props":3792,"children":3794},{"style":3793},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[3795],{"type":178,"value":3796}," true",{"type":173,"tag":1255,"props":3798,"children":3799},{"style":2811},[3800],{"type":178,"value":2667},{"type":173,"tag":1255,"props":3802,"children":3803},{"class":1257,"line":1976},[3804],{"type":173,"tag":1255,"props":3805,"children":3806},{"style":1286},[3807],{"type":178,"value":2881},{"type":173,"tag":1255,"props":3809,"children":3810},{"class":1257,"line":1999},[3811],{"type":173,"tag":1255,"props":3812,"children":3813},{"style":1286},[3814],{"type":178,"value":1362},{"type":173,"tag":174,"props":3816,"children":3817},{},[3818,3820,3826],{"type":178,"value":3819},"这里涉及一个 TS 类型推断的核心概念：widened type。在某些情况下，如返回值、参数赋值的类型计算中，需要从字面量类型中推导出更宽泛的类型，例如：",{"type":173,"tag":346,"props":3821,"children":3823},{"className":3822},[],[3824],{"type":178,"value":3825},"const x = '123'",{"type":178,"value":3827}," 中的 x 的类型是 string 而不是字面量 '123'，除非指定 const。把字面量扩宽为 string 的逻辑，就是在以下代码 widenTypeInferredFromInitializer 中处理的。简便起见，这里忽略 widened type 的细节继续看。",{"type":173,"tag":174,"props":3829,"children":3830},{},[3831,3833,3839,3841,3847],{"type":178,"value":3832},"JS 中，除了不带值初始化的变量声明，常见的变量声明有两种形式：一种如我们举例代码使用的 ",{"type":173,"tag":346,"props":3834,"children":3836},{"className":3835},[],[3837],{"type":178,"value":3838},"const x1 = f1(1)",{"type":178,"value":3840},"，另一种是包含类型注解的 ",{"type":173,"tag":346,"props":3842,"children":3844},{"className":3843},[],[3845],{"type":178,"value":3846},"let x2: string = 'hello'",{"type":178,"value":3848},"。后者可以直接从类型注解中拿到实际类型，在 declaredType 取得值后直接返回对应类型（tryGetTypeFromEffectiveTypeNode），而前者需要处理声明的初始化器（DeclarationInitializer）。",{"type":173,"tag":1245,"props":3850,"children":3852},{"className":1247,"code":3851,"language":1249,"meta":166,"style":166},"function getTypeForVariableLikeDeclaration(\n    declaration: ParameterDeclaration | PropertyDeclaration | PropertySignature | VariableDeclaration | BindingElement | JSDocPropertyLikeTag,\n    includeOptionality: boolean,\n    checkMode: CheckMode,\n): Type | undefined {\n  const declaredType = tryGetTypeFromEffectiveTypeNode(declaration)\n  if (declaredType) {\n    return //...\n  }\n  // 有初始化表达式，且是简单赋值（比如函数参数默认值就不算）\n  if (!!declaration.initializer && hasOnlyExpressionInitializer(declaration)) {\n    const type = widenTypeInferredFromInitializer(declaration, checkDeclarationInitializer(declaration, checkMode))\n    return addOptionality(type, isProperty, isOptional)\n  }\n}\n",[3853],{"type":173,"tag":346,"props":3854,"children":3855},{"__ignoreMap":166},[3856,3873,3939,3959,3980,4007,4040,4064,4076,4083,4091,4146,4206,4248,4255],{"type":173,"tag":1255,"props":3857,"children":3858},{"class":1257,"line":1258},[3859,3863,3868],{"type":173,"tag":1255,"props":3860,"children":3861},{"style":1274},[3862],{"type":178,"value":1707},{"type":173,"tag":1255,"props":3864,"children":3865},{"style":1710},[3866],{"type":178,"value":3867}," getTypeForVariableLikeDeclaration",{"type":173,"tag":1255,"props":3869,"children":3870},{"style":1286},[3871],{"type":178,"value":3872},"(\n",{"type":173,"tag":1255,"props":3874,"children":3875},{"class":1257,"line":1292},[3876,3881,3885,3890,3894,3899,3903,3908,3912,3917,3921,3926,3930,3935],{"type":173,"tag":1255,"props":3877,"children":3878},{"style":1721},[3879],{"type":178,"value":3880},"    declaration",{"type":173,"tag":1255,"props":3882,"children":3883},{"style":1409},[3884],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3886,"children":3887},{"style":1280},[3888],{"type":178,"value":3889}," ParameterDeclaration",{"type":173,"tag":1255,"props":3891,"children":3892},{"style":1409},[3893],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3895,"children":3896},{"style":1280},[3897],{"type":178,"value":3898}," PropertyDeclaration",{"type":173,"tag":1255,"props":3900,"children":3901},{"style":1409},[3902],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3904,"children":3905},{"style":1280},[3906],{"type":178,"value":3907}," PropertySignature",{"type":173,"tag":1255,"props":3909,"children":3910},{"style":1409},[3911],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3913,"children":3914},{"style":1280},[3915],{"type":178,"value":3916}," VariableDeclaration",{"type":173,"tag":1255,"props":3918,"children":3919},{"style":1409},[3920],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3922,"children":3923},{"style":1280},[3924],{"type":178,"value":3925}," BindingElement",{"type":173,"tag":1255,"props":3927,"children":3928},{"style":1409},[3929],{"type":178,"value":2212},{"type":173,"tag":1255,"props":3931,"children":3932},{"style":1280},[3933],{"type":178,"value":3934}," JSDocPropertyLikeTag",{"type":173,"tag":1255,"props":3936,"children":3937},{"style":1286},[3938],{"type":178,"value":1304},{"type":173,"tag":1255,"props":3940,"children":3941},{"class":1257,"line":1307},[3942,3947,3951,3955],{"type":173,"tag":1255,"props":3943,"children":3944},{"style":1721},[3945],{"type":178,"value":3946},"    includeOptionality",{"type":173,"tag":1255,"props":3948,"children":3949},{"style":1409},[3950],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3952,"children":3953},{"style":1731},[3954],{"type":178,"value":1734},{"type":173,"tag":1255,"props":3956,"children":3957},{"style":1286},[3958],{"type":178,"value":1304},{"type":173,"tag":1255,"props":3960,"children":3961},{"class":1257,"line":1320},[3962,3967,3971,3976],{"type":173,"tag":1255,"props":3963,"children":3964},{"style":1721},[3965],{"type":178,"value":3966},"    checkMode",{"type":173,"tag":1255,"props":3968,"children":3969},{"style":1409},[3970],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3972,"children":3973},{"style":1280},[3974],{"type":178,"value":3975}," CheckMode",{"type":173,"tag":1255,"props":3977,"children":3978},{"style":1286},[3979],{"type":178,"value":1304},{"type":173,"tag":1255,"props":3981,"children":3982},{"class":1257,"line":1333},[3983,3987,3991,3995,3999,4003],{"type":173,"tag":1255,"props":3984,"children":3985},{"style":1286},[3986],{"type":178,"value":1739},{"type":173,"tag":1255,"props":3988,"children":3989},{"style":1409},[3990],{"type":178,"value":1596},{"type":173,"tag":1255,"props":3992,"children":3993},{"style":1280},[3994],{"type":178,"value":1748},{"type":173,"tag":1255,"props":3996,"children":3997},{"style":1409},[3998],{"type":178,"value":2212},{"type":173,"tag":1255,"props":4000,"children":4001},{"style":1731},[4002],{"type":178,"value":2217},{"type":173,"tag":1255,"props":4004,"children":4005},{"style":1286},[4006],{"type":178,"value":1289},{"type":173,"tag":1255,"props":4008,"children":4009},{"class":1257,"line":1346},[4010,4014,4019,4023,4028,4032,4036],{"type":173,"tag":1255,"props":4011,"children":4012},{"style":1274},[4013],{"type":178,"value":3179},{"type":173,"tag":1255,"props":4015,"children":4016},{"style":1296},[4017],{"type":178,"value":4018}," declaredType",{"type":173,"tag":1255,"props":4020,"children":4021},{"style":1409},[4022],{"type":178,"value":2649},{"type":173,"tag":1255,"props":4024,"children":4025},{"style":1710},[4026],{"type":178,"value":4027}," tryGetTypeFromEffectiveTypeNode",{"type":173,"tag":1255,"props":4029,"children":4030},{"style":2811},[4031],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4033,"children":4034},{"style":1763},[4035],{"type":178,"value":3619},{"type":173,"tag":1255,"props":4037,"children":4038},{"style":2811},[4039],{"type":178,"value":2667},{"type":173,"tag":1255,"props":4041,"children":4042},{"class":1257,"line":1356},[4043,4047,4051,4056,4060],{"type":173,"tag":1255,"props":4044,"children":4045},{"style":1262},[4046],{"type":178,"value":2968},{"type":173,"tag":1255,"props":4048,"children":4049},{"style":2811},[4050],{"type":178,"value":2973},{"type":173,"tag":1255,"props":4052,"children":4053},{"style":1763},[4054],{"type":178,"value":4055},"declaredType",{"type":173,"tag":1255,"props":4057,"children":4058},{"style":2811},[4059],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4061,"children":4062},{"style":1286},[4063],{"type":178,"value":2996},{"type":173,"tag":1255,"props":4065,"children":4066},{"class":1257,"line":1936},[4067,4071],{"type":173,"tag":1255,"props":4068,"children":4069},{"style":1262},[4070],{"type":178,"value":3057},{"type":173,"tag":1255,"props":4072,"children":4073},{"style":1350},[4074],{"type":178,"value":4075}," //...\n",{"type":173,"tag":1255,"props":4077,"children":4078},{"class":1257,"line":1945},[4079],{"type":173,"tag":1255,"props":4080,"children":4081},{"style":1286},[4082],{"type":178,"value":2881},{"type":173,"tag":1255,"props":4084,"children":4085},{"class":1257,"line":1967},[4086],{"type":173,"tag":1255,"props":4087,"children":4088},{"style":1350},[4089],{"type":178,"value":4090},"  // 有初始化表达式，且是简单赋值（比如函数参数默认值就不算）\n",{"type":173,"tag":1255,"props":4092,"children":4093},{"class":1257,"line":1976},[4094,4098,4102,4107,4111,4115,4120,4125,4130,4134,4138,4142],{"type":173,"tag":1255,"props":4095,"children":4096},{"style":1262},[4097],{"type":178,"value":2968},{"type":173,"tag":1255,"props":4099,"children":4100},{"style":2811},[4101],{"type":178,"value":2973},{"type":173,"tag":1255,"props":4103,"children":4104},{"style":1409},[4105],{"type":178,"value":4106},"!!",{"type":173,"tag":1255,"props":4108,"children":4109},{"style":1763},[4110],{"type":178,"value":3619},{"type":173,"tag":1255,"props":4112,"children":4113},{"style":1286},[4114],{"type":178,"value":833},{"type":173,"tag":1255,"props":4116,"children":4117},{"style":1763},[4118],{"type":178,"value":4119},"initializer",{"type":173,"tag":1255,"props":4121,"children":4122},{"style":1409},[4123],{"type":178,"value":4124}," &&",{"type":173,"tag":1255,"props":4126,"children":4127},{"style":1710},[4128],{"type":178,"value":4129}," hasOnlyExpressionInitializer",{"type":173,"tag":1255,"props":4131,"children":4132},{"style":2811},[4133],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4135,"children":4136},{"style":1763},[4137],{"type":178,"value":3619},{"type":173,"tag":1255,"props":4139,"children":4140},{"style":2811},[4141],{"type":178,"value":2991},{"type":173,"tag":1255,"props":4143,"children":4144},{"style":1286},[4145],{"type":178,"value":2996},{"type":173,"tag":1255,"props":4147,"children":4148},{"class":1257,"line":1999},[4149,4154,4159,4163,4168,4172,4176,4180,4185,4189,4193,4197,4202],{"type":173,"tag":1255,"props":4150,"children":4151},{"style":1274},[4152],{"type":178,"value":4153},"    const",{"type":173,"tag":1255,"props":4155,"children":4156},{"style":1296},[4157],{"type":178,"value":4158}," type",{"type":173,"tag":1255,"props":4160,"children":4161},{"style":1409},[4162],{"type":178,"value":2649},{"type":173,"tag":1255,"props":4164,"children":4165},{"style":1710},[4166],{"type":178,"value":4167}," widenTypeInferredFromInitializer",{"type":173,"tag":1255,"props":4169,"children":4170},{"style":2811},[4171],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4173,"children":4174},{"style":1763},[4175],{"type":178,"value":3619},{"type":173,"tag":1255,"props":4177,"children":4178},{"style":1286},[4179],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4181,"children":4182},{"style":1710},[4183],{"type":178,"value":4184}," checkDeclarationInitializer",{"type":173,"tag":1255,"props":4186,"children":4187},{"style":2811},[4188],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4190,"children":4191},{"style":1763},[4192],{"type":178,"value":3619},{"type":173,"tag":1255,"props":4194,"children":4195},{"style":1286},[4196],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4198,"children":4199},{"style":1763},[4200],{"type":178,"value":4201}," checkMode",{"type":173,"tag":1255,"props":4203,"children":4204},{"style":2811},[4205],{"type":178,"value":3084},{"type":173,"tag":1255,"props":4207,"children":4208},{"class":1257,"line":2008},[4209,4213,4218,4222,4226,4230,4235,4239,4244],{"type":173,"tag":1255,"props":4210,"children":4211},{"style":1262},[4212],{"type":178,"value":3057},{"type":173,"tag":1255,"props":4214,"children":4215},{"style":1710},[4216],{"type":178,"value":4217}," addOptionality",{"type":173,"tag":1255,"props":4219,"children":4220},{"style":2811},[4221],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4223,"children":4224},{"style":1763},[4225],{"type":178,"value":868},{"type":173,"tag":1255,"props":4227,"children":4228},{"style":1286},[4229],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4231,"children":4232},{"style":1763},[4233],{"type":178,"value":4234}," isProperty",{"type":173,"tag":1255,"props":4236,"children":4237},{"style":1286},[4238],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4240,"children":4241},{"style":1763},[4242],{"type":178,"value":4243}," isOptional",{"type":173,"tag":1255,"props":4245,"children":4246},{"style":2811},[4247],{"type":178,"value":2667},{"type":173,"tag":1255,"props":4249,"children":4250},{"class":1257,"line":2030},[4251],{"type":173,"tag":1255,"props":4252,"children":4253},{"style":1286},[4254],{"type":178,"value":2881},{"type":173,"tag":1255,"props":4256,"children":4257},{"class":1257,"line":2039},[4258],{"type":173,"tag":1255,"props":4259,"children":4260},{"style":1286},[4261],{"type":178,"value":1362},{"type":173,"tag":174,"props":4263,"children":4264},{},[4265],{"type":178,"value":4266},"checkDeclarationInitializer 会根据上下文类型来处理简单赋值和复杂赋值（解构赋值）的类型，而我们例子中的代码 x1 结构很简单，是一个不带泛型参数的函数的调用，所以可以直接从其返回值中获取赋值的类型，并由此进入 checkNonNullType，再进入 checkExpression 函数。",{"type":173,"tag":1245,"props":4268,"children":4270},{"className":1247,"code":4269,"language":1249,"meta":166,"style":166},"function getQuickTypeOfExpression(node: Expression): Type | undefined {\n  //...\n  // Optimize for the common case of a call to a function with a single non-generic call\n  // signature where we can just fetch the return type without checking the arguments.\n  if (isCallExpression(expr) && expr.expression.kind !== SyntaxKind.SuperKeyword && !isRequireCall(expr, /*requireStringLiteralLikeArgument*/ true) && !isSymbolOrSymbolForCall(expr) && !isImportCall(expr)) {\n      return isCallChain(expr) ? getReturnTypeOfSingleNonGenericSignatureOfCallChain(expr) :\n          getReturnTypeOfSingleNonGenericCallSignature(checkNonNullExpression(expr.expression))\n  }\n  //...\n  return undefined\n}\n",[4271],{"type":173,"tag":346,"props":4272,"children":4273},{"__ignoreMap":166},[4274,4327,4334,4342,4350,4517,4568,4605,4612,4619,4632],{"type":173,"tag":1255,"props":4275,"children":4276},{"class":1257,"line":1258},[4277,4281,4286,4290,4294,4298,4303,4307,4311,4315,4319,4323],{"type":173,"tag":1255,"props":4278,"children":4279},{"style":1274},[4280],{"type":178,"value":1707},{"type":173,"tag":1255,"props":4282,"children":4283},{"style":1710},[4284],{"type":178,"value":4285}," getQuickTypeOfExpression",{"type":173,"tag":1255,"props":4287,"children":4288},{"style":1286},[4289],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4291,"children":4292},{"style":1721},[4293],{"type":178,"value":2407},{"type":173,"tag":1255,"props":4295,"children":4296},{"style":1409},[4297],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4299,"children":4300},{"style":1280},[4301],{"type":178,"value":4302}," Expression",{"type":173,"tag":1255,"props":4304,"children":4305},{"style":1286},[4306],{"type":178,"value":1739},{"type":173,"tag":1255,"props":4308,"children":4309},{"style":1409},[4310],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4312,"children":4313},{"style":1280},[4314],{"type":178,"value":1748},{"type":173,"tag":1255,"props":4316,"children":4317},{"style":1409},[4318],{"type":178,"value":2212},{"type":173,"tag":1255,"props":4320,"children":4321},{"style":1731},[4322],{"type":178,"value":2217},{"type":173,"tag":1255,"props":4324,"children":4325},{"style":1286},[4326],{"type":178,"value":1289},{"type":173,"tag":1255,"props":4328,"children":4329},{"class":1257,"line":1292},[4330],{"type":173,"tag":1255,"props":4331,"children":4332},{"style":1350},[4333],{"type":178,"value":1353},{"type":173,"tag":1255,"props":4335,"children":4336},{"class":1257,"line":1307},[4337],{"type":173,"tag":1255,"props":4338,"children":4339},{"style":1350},[4340],{"type":178,"value":4341},"  // Optimize for the common case of a call to a function with a single non-generic call\n",{"type":173,"tag":1255,"props":4343,"children":4344},{"class":1257,"line":1320},[4345],{"type":173,"tag":1255,"props":4346,"children":4347},{"style":1350},[4348],{"type":178,"value":4349},"  // signature where we can just fetch the return type without checking the arguments.\n",{"type":173,"tag":1255,"props":4351,"children":4352},{"class":1257,"line":1333},[4353,4357,4361,4366,4370,4375,4379,4384,4389,4393,4398,4402,4406,4411,4415,4419,4424,4428,4433,4438,4442,4446,4450,4455,4459,4463,4467,4471,4476,4480,4484,4488,4492,4496,4501,4505,4509,4513],{"type":173,"tag":1255,"props":4354,"children":4355},{"style":1262},[4356],{"type":178,"value":2968},{"type":173,"tag":1255,"props":4358,"children":4359},{"style":2811},[4360],{"type":178,"value":2973},{"type":173,"tag":1255,"props":4362,"children":4363},{"style":1710},[4364],{"type":178,"value":4365},"isCallExpression",{"type":173,"tag":1255,"props":4367,"children":4368},{"style":2811},[4369],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4371,"children":4372},{"style":1763},[4373],{"type":178,"value":4374},"expr",{"type":173,"tag":1255,"props":4376,"children":4377},{"style":2811},[4378],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4380,"children":4381},{"style":1409},[4382],{"type":178,"value":4383},"&&",{"type":173,"tag":1255,"props":4385,"children":4386},{"style":1763},[4387],{"type":178,"value":4388}," expr",{"type":173,"tag":1255,"props":4390,"children":4391},{"style":1286},[4392],{"type":178,"value":833},{"type":173,"tag":1255,"props":4394,"children":4395},{"style":1763},[4396],{"type":178,"value":4397},"expression",{"type":173,"tag":1255,"props":4399,"children":4400},{"style":1286},[4401],{"type":178,"value":833},{"type":173,"tag":1255,"props":4403,"children":4404},{"style":1763},[4405],{"type":178,"value":2462},{"type":173,"tag":1255,"props":4407,"children":4408},{"style":1409},[4409],{"type":178,"value":4410}," !==",{"type":173,"tag":1255,"props":4412,"children":4413},{"style":1763},[4414],{"type":178,"value":1283},{"type":173,"tag":1255,"props":4416,"children":4417},{"style":1286},[4418],{"type":178,"value":833},{"type":173,"tag":1255,"props":4420,"children":4421},{"style":1763},[4422],{"type":178,"value":4423},"SuperKeyword",{"type":173,"tag":1255,"props":4425,"children":4426},{"style":1409},[4427],{"type":178,"value":4124},{"type":173,"tag":1255,"props":4429,"children":4430},{"style":1409},[4431],{"type":178,"value":4432}," !",{"type":173,"tag":1255,"props":4434,"children":4435},{"style":1710},[4436],{"type":178,"value":4437},"isRequireCall",{"type":173,"tag":1255,"props":4439,"children":4440},{"style":2811},[4441],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4443,"children":4444},{"style":1763},[4445],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4447,"children":4448},{"style":1286},[4449],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4451,"children":4452},{"style":1350},[4453],{"type":178,"value":4454}," /*requireStringLiteralLikeArgument*/",{"type":173,"tag":1255,"props":4456,"children":4457},{"style":3793},[4458],{"type":178,"value":3796},{"type":173,"tag":1255,"props":4460,"children":4461},{"style":2811},[4462],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4464,"children":4465},{"style":1409},[4466],{"type":178,"value":4383},{"type":173,"tag":1255,"props":4468,"children":4469},{"style":1409},[4470],{"type":178,"value":4432},{"type":173,"tag":1255,"props":4472,"children":4473},{"style":1710},[4474],{"type":178,"value":4475},"isSymbolOrSymbolForCall",{"type":173,"tag":1255,"props":4477,"children":4478},{"style":2811},[4479],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4481,"children":4482},{"style":1763},[4483],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4485,"children":4486},{"style":2811},[4487],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4489,"children":4490},{"style":1409},[4491],{"type":178,"value":4383},{"type":173,"tag":1255,"props":4493,"children":4494},{"style":1409},[4495],{"type":178,"value":4432},{"type":173,"tag":1255,"props":4497,"children":4498},{"style":1710},[4499],{"type":178,"value":4500},"isImportCall",{"type":173,"tag":1255,"props":4502,"children":4503},{"style":2811},[4504],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4506,"children":4507},{"style":1763},[4508],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4510,"children":4511},{"style":2811},[4512],{"type":178,"value":2991},{"type":173,"tag":1255,"props":4514,"children":4515},{"style":1286},[4516],{"type":178,"value":2996},{"type":173,"tag":1255,"props":4518,"children":4519},{"class":1257,"line":1346},[4520,4524,4529,4533,4537,4541,4546,4551,4555,4559,4563],{"type":173,"tag":1255,"props":4521,"children":4522},{"style":1262},[4523],{"type":178,"value":2830},{"type":173,"tag":1255,"props":4525,"children":4526},{"style":1710},[4527],{"type":178,"value":4528}," isCallChain",{"type":173,"tag":1255,"props":4530,"children":4531},{"style":2811},[4532],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4534,"children":4535},{"style":1763},[4536],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4538,"children":4539},{"style":2811},[4540],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4542,"children":4543},{"style":1409},[4544],{"type":178,"value":4545},"?",{"type":173,"tag":1255,"props":4547,"children":4548},{"style":1710},[4549],{"type":178,"value":4550}," getReturnTypeOfSingleNonGenericSignatureOfCallChain",{"type":173,"tag":1255,"props":4552,"children":4553},{"style":2811},[4554],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4556,"children":4557},{"style":1763},[4558],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4560,"children":4561},{"style":2811},[4562],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4564,"children":4565},{"style":1409},[4566],{"type":178,"value":4567},":\n",{"type":173,"tag":1255,"props":4569,"children":4570},{"class":1257,"line":1356},[4571,4576,4580,4585,4589,4593,4597,4601],{"type":173,"tag":1255,"props":4572,"children":4573},{"style":1710},[4574],{"type":178,"value":4575},"          getReturnTypeOfSingleNonGenericCallSignature",{"type":173,"tag":1255,"props":4577,"children":4578},{"style":2811},[4579],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4581,"children":4582},{"style":1710},[4583],{"type":178,"value":4584},"checkNonNullExpression",{"type":173,"tag":1255,"props":4586,"children":4587},{"style":2811},[4588],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4590,"children":4591},{"style":1763},[4592],{"type":178,"value":4374},{"type":173,"tag":1255,"props":4594,"children":4595},{"style":1286},[4596],{"type":178,"value":833},{"type":173,"tag":1255,"props":4598,"children":4599},{"style":1763},[4600],{"type":178,"value":4397},{"type":173,"tag":1255,"props":4602,"children":4603},{"style":2811},[4604],{"type":178,"value":3084},{"type":173,"tag":1255,"props":4606,"children":4607},{"class":1257,"line":1936},[4608],{"type":173,"tag":1255,"props":4609,"children":4610},{"style":1286},[4611],{"type":178,"value":2881},{"type":173,"tag":1255,"props":4613,"children":4614},{"class":1257,"line":1945},[4615],{"type":173,"tag":1255,"props":4616,"children":4617},{"style":1350},[4618],{"type":178,"value":1353},{"type":173,"tag":1255,"props":4620,"children":4621},{"class":1257,"line":1967},[4622,4626],{"type":173,"tag":1255,"props":4623,"children":4624},{"style":1262},[4625],{"type":178,"value":1760},{"type":173,"tag":1255,"props":4627,"children":4629},{"style":4628},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[4630],{"type":178,"value":4631}," undefined\n",{"type":173,"tag":1255,"props":4633,"children":4634},{"class":1257,"line":1976},[4635],{"type":173,"tag":1255,"props":4636,"children":4637},{"style":1286},[4638],{"type":178,"value":1362},{"type":173,"tag":174,"props":4640,"children":4641},{},[4642],{"type":178,"value":4643},"checkExpression 是 TypeScript 类型检查的一个关键节点。也由此引入 TypeScript 中关于类型的重要概念：类型实例化。可以把实例化过程理解为给泛型填空，即在用到泛型类型或泛型函数时，把类型参数替换为实际给定的类型，从而生成具有特定结构和行为的“具体类型”。",{"type":173,"tag":174,"props":4645,"children":4646},{},[4647],{"type":178,"value":4648},"checkExpression 从表达式析取出一个可能带泛型的类型，并交给后续过程进行实例化。",{"type":173,"tag":1245,"props":4650,"children":4652},{"className":1247,"code":4651,"language":1249,"meta":166,"style":166},"function checkExpression(node: Expression, checkMode?: CheckMode): Type {\n  const uninstantiatedType = checkExpressionWorker(node, checkMode)\n  const type = instantiateTypeWithSingleGenericCallSignature(node, uninstantiatedType, checkMode)\n  //...\n}\n",[4653],{"type":173,"tag":346,"props":4654,"children":4655},{"__ignoreMap":166},[4656,4716,4757,4805,4812],{"type":173,"tag":1255,"props":4657,"children":4658},{"class":1257,"line":1258},[4659,4663,4668,4672,4676,4680,4684,4688,4692,4696,4700,4704,4708,4712],{"type":173,"tag":1255,"props":4660,"children":4661},{"style":1274},[4662],{"type":178,"value":1707},{"type":173,"tag":1255,"props":4664,"children":4665},{"style":1710},[4666],{"type":178,"value":4667}," checkExpression",{"type":173,"tag":1255,"props":4669,"children":4670},{"style":1286},[4671],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4673,"children":4674},{"style":1721},[4675],{"type":178,"value":2407},{"type":173,"tag":1255,"props":4677,"children":4678},{"style":1409},[4679],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4681,"children":4682},{"style":1280},[4683],{"type":178,"value":4302},{"type":173,"tag":1255,"props":4685,"children":4686},{"style":1286},[4687],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4689,"children":4690},{"style":1721},[4691],{"type":178,"value":4201},{"type":173,"tag":1255,"props":4693,"children":4694},{"style":1409},[4695],{"type":178,"value":1923},{"type":173,"tag":1255,"props":4697,"children":4698},{"style":1280},[4699],{"type":178,"value":3975},{"type":173,"tag":1255,"props":4701,"children":4702},{"style":1286},[4703],{"type":178,"value":1739},{"type":173,"tag":1255,"props":4705,"children":4706},{"style":1409},[4707],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4709,"children":4710},{"style":1280},[4711],{"type":178,"value":1748},{"type":173,"tag":1255,"props":4713,"children":4714},{"style":1286},[4715],{"type":178,"value":1289},{"type":173,"tag":1255,"props":4717,"children":4718},{"class":1257,"line":1292},[4719,4723,4728,4732,4737,4741,4745,4749,4753],{"type":173,"tag":1255,"props":4720,"children":4721},{"style":1274},[4722],{"type":178,"value":3179},{"type":173,"tag":1255,"props":4724,"children":4725},{"style":1296},[4726],{"type":178,"value":4727}," uninstantiatedType",{"type":173,"tag":1255,"props":4729,"children":4730},{"style":1409},[4731],{"type":178,"value":2649},{"type":173,"tag":1255,"props":4733,"children":4734},{"style":1710},[4735],{"type":178,"value":4736}," checkExpressionWorker",{"type":173,"tag":1255,"props":4738,"children":4739},{"style":2811},[4740],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4742,"children":4743},{"style":1763},[4744],{"type":178,"value":2407},{"type":173,"tag":1255,"props":4746,"children":4747},{"style":1286},[4748],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4750,"children":4751},{"style":1763},[4752],{"type":178,"value":4201},{"type":173,"tag":1255,"props":4754,"children":4755},{"style":2811},[4756],{"type":178,"value":2667},{"type":173,"tag":1255,"props":4758,"children":4759},{"class":1257,"line":1307},[4760,4764,4768,4772,4777,4781,4785,4789,4793,4797,4801],{"type":173,"tag":1255,"props":4761,"children":4762},{"style":1274},[4763],{"type":178,"value":3179},{"type":173,"tag":1255,"props":4765,"children":4766},{"style":1296},[4767],{"type":178,"value":4158},{"type":173,"tag":1255,"props":4769,"children":4770},{"style":1409},[4771],{"type":178,"value":2649},{"type":173,"tag":1255,"props":4773,"children":4774},{"style":1710},[4775],{"type":178,"value":4776}," instantiateTypeWithSingleGenericCallSignature",{"type":173,"tag":1255,"props":4778,"children":4779},{"style":2811},[4780],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4782,"children":4783},{"style":1763},[4784],{"type":178,"value":2407},{"type":173,"tag":1255,"props":4786,"children":4787},{"style":1286},[4788],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4790,"children":4791},{"style":1763},[4792],{"type":178,"value":4727},{"type":173,"tag":1255,"props":4794,"children":4795},{"style":1286},[4796],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4798,"children":4799},{"style":1763},[4800],{"type":178,"value":4201},{"type":173,"tag":1255,"props":4802,"children":4803},{"style":2811},[4804],{"type":178,"value":2667},{"type":173,"tag":1255,"props":4806,"children":4807},{"class":1257,"line":1320},[4808],{"type":173,"tag":1255,"props":4809,"children":4810},{"style":1350},[4811],{"type":178,"value":1353},{"type":173,"tag":1255,"props":4813,"children":4814},{"class":1257,"line":1333},[4815],{"type":173,"tag":1255,"props":4816,"children":4817},{"style":1286},[4818],{"type":178,"value":1362},{"type":173,"tag":174,"props":4820,"children":4821},{},[4822,4824,4830],{"type":178,"value":4823},"checkExpressionWorker 字面意义即检查表达式节点的类型，它根据节点标记调用不同的具体类型实例化逻辑，比如，",{"type":173,"tag":346,"props":4825,"children":4827},{"className":4826},[],[4828],{"type":178,"value":4829},"f1()",{"type":178,"value":4831}," 节点包含 f1 标识符，f1 标识符节点的类型的实例化会交由 checkIdentifier 处理。",{"type":173,"tag":1245,"props":4833,"children":4835},{"className":1247,"code":4834,"language":1249,"meta":166,"style":166},"function checkExpressionWorker(node: Expression | QualifiedName, checkMode: CheckMode | undefined, forceTuple?: boolean): Type {\n  const kind = node.kind\n  switch (kind) {\n    case SyntaxKind.Identifier:\n      return checkIdentifier(node as Identifier, checkMode)\n    //...\n  }\n}\n",[4836],{"type":173,"tag":346,"props":4837,"children":4838},{"__ignoreMap":166},[4839,4932,4960,4984,5009,5051,5058,5065],{"type":173,"tag":1255,"props":4840,"children":4841},{"class":1257,"line":1258},[4842,4846,4850,4854,4858,4862,4866,4870,4875,4879,4883,4887,4891,4895,4899,4903,4908,4912,4916,4920,4924,4928],{"type":173,"tag":1255,"props":4843,"children":4844},{"style":1274},[4845],{"type":178,"value":1707},{"type":173,"tag":1255,"props":4847,"children":4848},{"style":1710},[4849],{"type":178,"value":4736},{"type":173,"tag":1255,"props":4851,"children":4852},{"style":1286},[4853],{"type":178,"value":1718},{"type":173,"tag":1255,"props":4855,"children":4856},{"style":1721},[4857],{"type":178,"value":2407},{"type":173,"tag":1255,"props":4859,"children":4860},{"style":1409},[4861],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4863,"children":4864},{"style":1280},[4865],{"type":178,"value":4302},{"type":173,"tag":1255,"props":4867,"children":4868},{"style":1409},[4869],{"type":178,"value":2212},{"type":173,"tag":1255,"props":4871,"children":4872},{"style":1280},[4873],{"type":178,"value":4874}," QualifiedName",{"type":173,"tag":1255,"props":4876,"children":4877},{"style":1286},[4878],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4880,"children":4881},{"style":1721},[4882],{"type":178,"value":4201},{"type":173,"tag":1255,"props":4884,"children":4885},{"style":1409},[4886],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4888,"children":4889},{"style":1280},[4890],{"type":178,"value":3975},{"type":173,"tag":1255,"props":4892,"children":4893},{"style":1409},[4894],{"type":178,"value":2212},{"type":173,"tag":1255,"props":4896,"children":4897},{"style":1731},[4898],{"type":178,"value":2217},{"type":173,"tag":1255,"props":4900,"children":4901},{"style":1286},[4902],{"type":178,"value":2353},{"type":173,"tag":1255,"props":4904,"children":4905},{"style":1721},[4906],{"type":178,"value":4907}," forceTuple",{"type":173,"tag":1255,"props":4909,"children":4910},{"style":1409},[4911],{"type":178,"value":1923},{"type":173,"tag":1255,"props":4913,"children":4914},{"style":1731},[4915],{"type":178,"value":1734},{"type":173,"tag":1255,"props":4917,"children":4918},{"style":1286},[4919],{"type":178,"value":1739},{"type":173,"tag":1255,"props":4921,"children":4922},{"style":1409},[4923],{"type":178,"value":1596},{"type":173,"tag":1255,"props":4925,"children":4926},{"style":1280},[4927],{"type":178,"value":1748},{"type":173,"tag":1255,"props":4929,"children":4930},{"style":1286},[4931],{"type":178,"value":1289},{"type":173,"tag":1255,"props":4933,"children":4934},{"class":1257,"line":1292},[4935,4939,4943,4947,4951,4955],{"type":173,"tag":1255,"props":4936,"children":4937},{"style":1274},[4938],{"type":178,"value":3179},{"type":173,"tag":1255,"props":4940,"children":4941},{"style":1296},[4942],{"type":178,"value":1591},{"type":173,"tag":1255,"props":4944,"children":4945},{"style":1409},[4946],{"type":178,"value":2649},{"type":173,"tag":1255,"props":4948,"children":4949},{"style":1763},[4950],{"type":178,"value":2428},{"type":173,"tag":1255,"props":4952,"children":4953},{"style":1286},[4954],{"type":178,"value":833},{"type":173,"tag":1255,"props":4956,"children":4957},{"style":1763},[4958],{"type":178,"value":4959},"kind\n",{"type":173,"tag":1255,"props":4961,"children":4962},{"class":1257,"line":1307},[4963,4968,4972,4976,4980],{"type":173,"tag":1255,"props":4964,"children":4965},{"style":1262},[4966],{"type":178,"value":4967},"  switch",{"type":173,"tag":1255,"props":4969,"children":4970},{"style":2811},[4971],{"type":178,"value":2973},{"type":173,"tag":1255,"props":4973,"children":4974},{"style":1763},[4975],{"type":178,"value":2462},{"type":173,"tag":1255,"props":4977,"children":4978},{"style":2811},[4979],{"type":178,"value":2856},{"type":173,"tag":1255,"props":4981,"children":4982},{"style":1286},[4983],{"type":178,"value":2996},{"type":173,"tag":1255,"props":4985,"children":4986},{"class":1257,"line":1320},[4987,4992,4996,5000,5005],{"type":173,"tag":1255,"props":4988,"children":4989},{"style":1262},[4990],{"type":178,"value":4991},"    case",{"type":173,"tag":1255,"props":4993,"children":4994},{"style":1763},[4995],{"type":178,"value":1283},{"type":173,"tag":1255,"props":4997,"children":4998},{"style":1286},[4999],{"type":178,"value":833},{"type":173,"tag":1255,"props":5001,"children":5002},{"style":1763},[5003],{"type":178,"value":5004},"Identifier",{"type":173,"tag":1255,"props":5006,"children":5007},{"style":1286},[5008],{"type":178,"value":4567},{"type":173,"tag":1255,"props":5010,"children":5011},{"class":1257,"line":1333},[5012,5016,5021,5025,5029,5034,5039,5043,5047],{"type":173,"tag":1255,"props":5013,"children":5014},{"style":1262},[5015],{"type":178,"value":2830},{"type":173,"tag":1255,"props":5017,"children":5018},{"style":1710},[5019],{"type":178,"value":5020}," checkIdentifier",{"type":173,"tag":1255,"props":5022,"children":5023},{"style":2811},[5024],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5026,"children":5027},{"style":1763},[5028],{"type":178,"value":2407},{"type":173,"tag":1255,"props":5030,"children":5031},{"style":1262},[5032],{"type":178,"value":5033}," as",{"type":173,"tag":1255,"props":5035,"children":5036},{"style":1280},[5037],{"type":178,"value":5038}," Identifier",{"type":173,"tag":1255,"props":5040,"children":5041},{"style":1286},[5042],{"type":178,"value":2353},{"type":173,"tag":1255,"props":5044,"children":5045},{"style":1763},[5046],{"type":178,"value":4201},{"type":173,"tag":1255,"props":5048,"children":5049},{"style":2811},[5050],{"type":178,"value":2667},{"type":173,"tag":1255,"props":5052,"children":5053},{"class":1257,"line":1346},[5054],{"type":173,"tag":1255,"props":5055,"children":5056},{"style":1350},[5057],{"type":178,"value":1661},{"type":173,"tag":1255,"props":5059,"children":5060},{"class":1257,"line":1356},[5061],{"type":173,"tag":1255,"props":5062,"children":5063},{"style":1286},[5064],{"type":178,"value":2881},{"type":173,"tag":1255,"props":5066,"children":5067},{"class":1257,"line":1936},[5068],{"type":173,"tag":1255,"props":5069,"children":5070},{"style":1286},[5071],{"type":178,"value":1362},{"type":173,"tag":174,"props":5073,"children":5074},{},[5075],{"type":178,"value":5076},"checkIdentifier 中涉及类型收窄判断。类型收窄在 TypeScript 是一个常用的技术，用于在特定上下文中推断变量的更具体类型。以源码而言，相关 getNarrowedType 和 getNarrowedTypeOfSymbol 两个过程，前者根据某个“候选类型” candidate 以及分支条件（如 if、switch、typeof、instanceof 等），返回收窄后的类型，后者给定一个符号（变量、参数等）和代码中的某个位置，返回该符号在该位置经过控制流分析后的收窄类型。",{"type":173,"tag":174,"props":5078,"children":5079},{},[5080],{"type":178,"value":5081},"以下代码为例，x 参数在类型检查时就会涉及类型收窄过程。",{"type":173,"tag":1245,"props":5083,"children":5085},{"className":1247,"code":5084,"language":1249,"meta":166,"style":166},"function test(x: string | number): void\n",[5086],{"type":173,"tag":346,"props":5087,"children":5088},{"__ignoreMap":166},[5089],{"type":173,"tag":1255,"props":5090,"children":5091},{"class":1257,"line":1258},[5092,5096,5101,5105,5109,5113,5118,5122,5126,5130,5134],{"type":173,"tag":1255,"props":5093,"children":5094},{"style":1274},[5095],{"type":178,"value":1707},{"type":173,"tag":1255,"props":5097,"children":5098},{"style":1710},[5099],{"type":178,"value":5100}," test",{"type":173,"tag":1255,"props":5102,"children":5103},{"style":1286},[5104],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5106,"children":5107},{"style":1721},[5108],{"type":178,"value":2610},{"type":173,"tag":1255,"props":5110,"children":5111},{"style":1409},[5112],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5114,"children":5115},{"style":1731},[5116],{"type":178,"value":5117}," string",{"type":173,"tag":1255,"props":5119,"children":5120},{"style":1409},[5121],{"type":178,"value":2212},{"type":173,"tag":1255,"props":5123,"children":5124},{"style":1731},[5125],{"type":178,"value":2116},{"type":173,"tag":1255,"props":5127,"children":5128},{"style":1286},[5129],{"type":178,"value":1739},{"type":173,"tag":1255,"props":5131,"children":5132},{"style":1409},[5133],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5135,"children":5136},{"style":1731},[5137],{"type":178,"value":5138}," void\n",{"type":173,"tag":174,"props":5140,"children":5141},{},[5142,5144,5150],{"type":178,"value":5143},"f1 函数本身不涉及类型收窄，所以跳过具体流程。回到 checkExpression 函数，由于从 getQuickTypeOfExpression 调用的 checkExpression 被标记了无需检查泛型，所以其类型实例化前后类型是一样的，所以在 checkExpression 获得结果 ",{"type":173,"tag":346,"props":5145,"children":5147},{"className":5146},[],[5148],{"type":178,"value":5149},"f1(1)",{"type":178,"value":5151}," 表达式的类型，如下所示。",{"type":173,"tag":174,"props":5153,"children":5154},{},[5155],{"type":173,"tag":2546,"props":5156,"children":5158},{"alt":166,"src":5157},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140721530.png",[],{"type":173,"tag":174,"props":5160,"children":5161},{},[5162],{"type":178,"value":5163},"可以发现，Type 其实是一个节点：TypeNode。在 TypeScript 编译器内部，TypeNode 由一个 flags 属性标记其实际类型，比如 flags 可以是 NumberLiteral，标记一种字面量类型。",{"type":173,"tag":1245,"props":5165,"children":5167},{"className":1247,"code":5166,"language":1249,"meta":166,"style":166},"export interface Type {\n  flags: {\n    Any             = 1 \u003C\u003C 0,\n    NumberLiteral   = 1 \u003C\u003C 8,\n    UniqueESSymbol  = 1 \u003C\u003C 13,  // unique symbol\n    Void            = 1 \u003C\u003C 14,\n    TypeParameter   = 1 \u003C\u003C 18,  // Type parameter\n    Object          = 1 \u003C\u003C 19,  // Object type\n    //...\n  }\n}\n",[5168],{"type":173,"tag":346,"props":5169,"children":5170},{"__ignoreMap":166},[5171,5190,5205,5234,5264,5299,5329,5363,5398,5405,5412],{"type":173,"tag":1255,"props":5172,"children":5173},{"class":1257,"line":1258},[5174,5178,5182,5186],{"type":173,"tag":1255,"props":5175,"children":5176},{"style":1262},[5177],{"type":178,"value":1265},{"type":173,"tag":1255,"props":5179,"children":5180},{"style":1274},[5181],{"type":178,"value":1557},{"type":173,"tag":1255,"props":5183,"children":5184},{"style":1280},[5185],{"type":178,"value":1748},{"type":173,"tag":1255,"props":5187,"children":5188},{"style":1286},[5189],{"type":178,"value":1289},{"type":173,"tag":1255,"props":5191,"children":5192},{"class":1257,"line":1292},[5193,5197,5201],{"type":173,"tag":1255,"props":5194,"children":5195},{"style":1588},[5196],{"type":178,"value":1858},{"type":173,"tag":1255,"props":5198,"children":5199},{"style":1409},[5200],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5202,"children":5203},{"style":1286},[5204],{"type":178,"value":1289},{"type":173,"tag":1255,"props":5206,"children":5207},{"class":1257,"line":1307},[5208,5213,5218,5222,5226,5230],{"type":173,"tag":1255,"props":5209,"children":5210},{"style":1588},[5211],{"type":178,"value":5212},"    Any",{"type":173,"tag":1255,"props":5214,"children":5215},{"style":1409},[5216],{"type":178,"value":5217},"             =",{"type":173,"tag":1255,"props":5219,"children":5220},{"style":1415},[5221],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5223,"children":5224},{"style":1409},[5225],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5227,"children":5228},{"style":1415},[5229],{"type":178,"value":1418},{"type":173,"tag":1255,"props":5231,"children":5232},{"style":1286},[5233],{"type":178,"value":1304},{"type":173,"tag":1255,"props":5235,"children":5236},{"class":1257,"line":1320},[5237,5242,5247,5251,5255,5260],{"type":173,"tag":1255,"props":5238,"children":5239},{"style":1588},[5240],{"type":178,"value":5241},"    NumberLiteral",{"type":173,"tag":1255,"props":5243,"children":5244},{"style":1409},[5245],{"type":178,"value":5246},"   =",{"type":173,"tag":1255,"props":5248,"children":5249},{"style":1415},[5250],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5252,"children":5253},{"style":1409},[5254],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5256,"children":5257},{"style":1415},[5258],{"type":178,"value":5259}," 8",{"type":173,"tag":1255,"props":5261,"children":5262},{"style":1286},[5263],{"type":178,"value":1304},{"type":173,"tag":1255,"props":5265,"children":5266},{"class":1257,"line":1333},[5267,5272,5277,5281,5285,5290,5294],{"type":173,"tag":1255,"props":5268,"children":5269},{"style":1588},[5270],{"type":178,"value":5271},"    UniqueESSymbol",{"type":173,"tag":1255,"props":5273,"children":5274},{"style":1409},[5275],{"type":178,"value":5276},"  =",{"type":173,"tag":1255,"props":5278,"children":5279},{"style":1415},[5280],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5282,"children":5283},{"style":1409},[5284],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5286,"children":5287},{"style":1415},[5288],{"type":178,"value":5289}," 13",{"type":173,"tag":1255,"props":5291,"children":5292},{"style":1286},[5293],{"type":178,"value":2353},{"type":173,"tag":1255,"props":5295,"children":5296},{"style":1350},[5297],{"type":178,"value":5298},"  // unique symbol\n",{"type":173,"tag":1255,"props":5300,"children":5301},{"class":1257,"line":1346},[5302,5307,5312,5316,5320,5325],{"type":173,"tag":1255,"props":5303,"children":5304},{"style":1588},[5305],{"type":178,"value":5306},"    Void",{"type":173,"tag":1255,"props":5308,"children":5309},{"style":1409},[5310],{"type":178,"value":5311},"            =",{"type":173,"tag":1255,"props":5313,"children":5314},{"style":1415},[5315],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5317,"children":5318},{"style":1409},[5319],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5321,"children":5322},{"style":1415},[5323],{"type":178,"value":5324}," 14",{"type":173,"tag":1255,"props":5326,"children":5327},{"style":1286},[5328],{"type":178,"value":1304},{"type":173,"tag":1255,"props":5330,"children":5331},{"class":1257,"line":1356},[5332,5337,5341,5345,5349,5354,5358],{"type":173,"tag":1255,"props":5333,"children":5334},{"style":1588},[5335],{"type":178,"value":5336},"    TypeParameter",{"type":173,"tag":1255,"props":5338,"children":5339},{"style":1409},[5340],{"type":178,"value":5246},{"type":173,"tag":1255,"props":5342,"children":5343},{"style":1415},[5344],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5346,"children":5347},{"style":1409},[5348],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5350,"children":5351},{"style":1415},[5352],{"type":178,"value":5353}," 18",{"type":173,"tag":1255,"props":5355,"children":5356},{"style":1286},[5357],{"type":178,"value":2353},{"type":173,"tag":1255,"props":5359,"children":5360},{"style":1350},[5361],{"type":178,"value":5362},"  // Type parameter\n",{"type":173,"tag":1255,"props":5364,"children":5365},{"class":1257,"line":1936},[5366,5371,5376,5380,5384,5389,5393],{"type":173,"tag":1255,"props":5367,"children":5368},{"style":1588},[5369],{"type":178,"value":5370},"    Object",{"type":173,"tag":1255,"props":5372,"children":5373},{"style":1409},[5374],{"type":178,"value":5375},"          =",{"type":173,"tag":1255,"props":5377,"children":5378},{"style":1415},[5379],{"type":178,"value":1440},{"type":173,"tag":1255,"props":5381,"children":5382},{"style":1409},[5383],{"type":178,"value":1445},{"type":173,"tag":1255,"props":5385,"children":5386},{"style":1415},[5387],{"type":178,"value":5388}," 19",{"type":173,"tag":1255,"props":5390,"children":5391},{"style":1286},[5392],{"type":178,"value":2353},{"type":173,"tag":1255,"props":5394,"children":5395},{"style":1350},[5396],{"type":178,"value":5397},"  // Object type\n",{"type":173,"tag":1255,"props":5399,"children":5400},{"class":1257,"line":1945},[5401],{"type":173,"tag":1255,"props":5402,"children":5403},{"style":1350},[5404],{"type":178,"value":1661},{"type":173,"tag":1255,"props":5406,"children":5407},{"class":1257,"line":1967},[5408],{"type":173,"tag":1255,"props":5409,"children":5410},{"style":1286},[5411],{"type":178,"value":2881},{"type":173,"tag":1255,"props":5413,"children":5414},{"class":1257,"line":1976},[5415],{"type":173,"tag":1255,"props":5416,"children":5417},{"style":1286},[5418],{"type":178,"value":1362},{"type":173,"tag":174,"props":5420,"children":5421},{},[5422,5424,5430],{"type":178,"value":5423},"但并不是所有类型都是字面量之类的简单类型，Type 还可以是更复杂的联合类型（Union Type）、交叉类型（Intersection Type）等，这些类型可能只会在需要计算时才将其解析（延迟计算），以下代码为例，C 的类型是 ",{"type":173,"tag":346,"props":5425,"children":5427},{"className":5426},[],[5428],{"type":178,"value":5429},"A & B",{"type":178,"value":259},{"type":173,"tag":1245,"props":5432,"children":5434},{"className":1247,"code":5433,"language":1249,"meta":166,"style":166},"type A = { x: number }\ntype B = { y: string }\ntype C = A & B\n",[5435],{"type":173,"tag":346,"props":5436,"children":5437},{"__ignoreMap":166},[5438,5477,5514],{"type":173,"tag":1255,"props":5439,"children":5440},{"class":1257,"line":1258},[5441,5445,5450,5454,5459,5464,5468,5472],{"type":173,"tag":1255,"props":5442,"children":5443},{"style":1274},[5444],{"type":178,"value":868},{"type":173,"tag":1255,"props":5446,"children":5447},{"style":1280},[5448],{"type":178,"value":5449}," A",{"type":173,"tag":1255,"props":5451,"children":5452},{"style":1409},[5453],{"type":178,"value":2649},{"type":173,"tag":1255,"props":5455,"children":5456},{"style":1286},[5457],{"type":178,"value":5458}," {",{"type":173,"tag":1255,"props":5460,"children":5461},{"style":1588},[5462],{"type":178,"value":5463}," x",{"type":173,"tag":1255,"props":5465,"children":5466},{"style":1409},[5467],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5469,"children":5470},{"style":1731},[5471],{"type":178,"value":2116},{"type":173,"tag":1255,"props":5473,"children":5474},{"style":1286},[5475],{"type":178,"value":5476}," }\n",{"type":173,"tag":1255,"props":5478,"children":5479},{"class":1257,"line":1292},[5480,5484,5489,5493,5497,5502,5506,5510],{"type":173,"tag":1255,"props":5481,"children":5482},{"style":1274},[5483],{"type":178,"value":868},{"type":173,"tag":1255,"props":5485,"children":5486},{"style":1280},[5487],{"type":178,"value":5488}," B",{"type":173,"tag":1255,"props":5490,"children":5491},{"style":1409},[5492],{"type":178,"value":2649},{"type":173,"tag":1255,"props":5494,"children":5495},{"style":1286},[5496],{"type":178,"value":5458},{"type":173,"tag":1255,"props":5498,"children":5499},{"style":1588},[5500],{"type":178,"value":5501}," y",{"type":173,"tag":1255,"props":5503,"children":5504},{"style":1409},[5505],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5507,"children":5508},{"style":1731},[5509],{"type":178,"value":5117},{"type":173,"tag":1255,"props":5511,"children":5512},{"style":1286},[5513],{"type":178,"value":5476},{"type":173,"tag":1255,"props":5515,"children":5516},{"class":1257,"line":1307},[5517,5521,5526,5530,5534,5538],{"type":173,"tag":1255,"props":5518,"children":5519},{"style":1274},[5520],{"type":178,"value":868},{"type":173,"tag":1255,"props":5522,"children":5523},{"style":1280},[5524],{"type":178,"value":5525}," C",{"type":173,"tag":1255,"props":5527,"children":5528},{"style":1409},[5529],{"type":178,"value":2649},{"type":173,"tag":1255,"props":5531,"children":5532},{"style":1280},[5533],{"type":178,"value":5449},{"type":173,"tag":1255,"props":5535,"children":5536},{"style":1409},[5537],{"type":178,"value":3226},{"type":173,"tag":1255,"props":5539,"children":5540},{"style":1280},[5541],{"type":178,"value":5542}," B\n",{"type":173,"tag":174,"props":5544,"children":5545},{},[5546],{"type":178,"value":5547},"f1 函数没有重载，是单签名的，并且从函数获取类型的过程也可能涉及延迟计算，所以代码流程由 getReturnTypeOfSingleNonGenericCallSignature 从 getSingleCallSignature 进入 getSingleSignature，最后进入 resolveStructuredTypeMembers 尝试解析函数的签名类型。",{"type":173,"tag":1245,"props":5549,"children":5551},{"className":1247,"code":5550,"language":1249,"meta":166,"style":166},"function resolveStructuredTypeMembers(type: StructuredType): ResolvedType {\n  if (!(type as ResolvedType).members) {\n    if (type.flags & TypeFlags.Object) {\n        if ((type as ObjectType).objectFlags & ObjectFlags.Reference) {\n            resolveTypeReferenceMembers(type as TypeReference)\n        } else if ((type as ObjectType).objectFlags & ObjectFlags.Anonymous) {\n            resolveAnonymousTypeMembers(type as AnonymousType)\n        }\n        //...\n    }\n    else if (type.flags & TypeFlags.Union) {\n        resolveUnionTypeMembers(type as UnionType)\n    }\n    else if (type.flags & TypeFlags.Intersection) {\n        resolveIntersectionTypeMembers(type as IntersectionType)\n    }\n    //...\n  }\n  return type as ResolvedType\n}\n",[5552],{"type":173,"tag":346,"props":5553,"children":5554},{"__ignoreMap":166},[5555,5601,5654,5704,5769,5798,5869,5898,5906,5914,5922,5975,6004,6011,6063,6092,6099,6106,6113,6133],{"type":173,"tag":1255,"props":5556,"children":5557},{"class":1257,"line":1258},[5558,5562,5567,5571,5575,5579,5584,5588,5592,5597],{"type":173,"tag":1255,"props":5559,"children":5560},{"style":1274},[5561],{"type":178,"value":1707},{"type":173,"tag":1255,"props":5563,"children":5564},{"style":1710},[5565],{"type":178,"value":5566}," resolveStructuredTypeMembers",{"type":173,"tag":1255,"props":5568,"children":5569},{"style":1286},[5570],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5572,"children":5573},{"style":1721},[5574],{"type":178,"value":868},{"type":173,"tag":1255,"props":5576,"children":5577},{"style":1409},[5578],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5580,"children":5581},{"style":1280},[5582],{"type":178,"value":5583}," StructuredType",{"type":173,"tag":1255,"props":5585,"children":5586},{"style":1286},[5587],{"type":178,"value":1739},{"type":173,"tag":1255,"props":5589,"children":5590},{"style":1409},[5591],{"type":178,"value":1596},{"type":173,"tag":1255,"props":5593,"children":5594},{"style":1280},[5595],{"type":178,"value":5596}," ResolvedType",{"type":173,"tag":1255,"props":5598,"children":5599},{"style":1286},[5600],{"type":178,"value":1289},{"type":173,"tag":1255,"props":5602,"children":5603},{"class":1257,"line":1292},[5604,5608,5612,5617,5621,5625,5629,5633,5637,5641,5646,5650],{"type":173,"tag":1255,"props":5605,"children":5606},{"style":1262},[5607],{"type":178,"value":2968},{"type":173,"tag":1255,"props":5609,"children":5610},{"style":2811},[5611],{"type":178,"value":2973},{"type":173,"tag":1255,"props":5613,"children":5614},{"style":1409},[5615],{"type":178,"value":5616},"!",{"type":173,"tag":1255,"props":5618,"children":5619},{"style":2811},[5620],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5622,"children":5623},{"style":1763},[5624],{"type":178,"value":868},{"type":173,"tag":1255,"props":5626,"children":5627},{"style":1262},[5628],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5630,"children":5631},{"style":1280},[5632],{"type":178,"value":5596},{"type":173,"tag":1255,"props":5634,"children":5635},{"style":2811},[5636],{"type":178,"value":1739},{"type":173,"tag":1255,"props":5638,"children":5639},{"style":1286},[5640],{"type":178,"value":833},{"type":173,"tag":1255,"props":5642,"children":5643},{"style":1763},[5644],{"type":178,"value":5645},"members",{"type":173,"tag":1255,"props":5647,"children":5648},{"style":2811},[5649],{"type":178,"value":2856},{"type":173,"tag":1255,"props":5651,"children":5652},{"style":1286},[5653],{"type":178,"value":2996},{"type":173,"tag":1255,"props":5655,"children":5656},{"class":1257,"line":1307},[5657,5662,5666,5670,5674,5678,5682,5687,5691,5696,5700],{"type":173,"tag":1255,"props":5658,"children":5659},{"style":1262},[5660],{"type":178,"value":5661},"    if",{"type":173,"tag":1255,"props":5663,"children":5664},{"style":2811},[5665],{"type":178,"value":2973},{"type":173,"tag":1255,"props":5667,"children":5668},{"style":1763},[5669],{"type":178,"value":868},{"type":173,"tag":1255,"props":5671,"children":5672},{"style":1286},[5673],{"type":178,"value":833},{"type":173,"tag":1255,"props":5675,"children":5676},{"style":1763},[5677],{"type":178,"value":3310},{"type":173,"tag":1255,"props":5679,"children":5680},{"style":1409},[5681],{"type":178,"value":3226},{"type":173,"tag":1255,"props":5683,"children":5684},{"style":1763},[5685],{"type":178,"value":5686}," TypeFlags",{"type":173,"tag":1255,"props":5688,"children":5689},{"style":1286},[5690],{"type":178,"value":833},{"type":173,"tag":1255,"props":5692,"children":5693},{"style":1763},[5694],{"type":178,"value":5695},"Object",{"type":173,"tag":1255,"props":5697,"children":5698},{"style":2811},[5699],{"type":178,"value":2856},{"type":173,"tag":1255,"props":5701,"children":5702},{"style":1286},[5703],{"type":178,"value":2996},{"type":173,"tag":1255,"props":5705,"children":5706},{"class":1257,"line":1320},[5707,5712,5717,5721,5725,5730,5734,5738,5743,5747,5752,5756,5761,5765],{"type":173,"tag":1255,"props":5708,"children":5709},{"style":1262},[5710],{"type":178,"value":5711},"        if",{"type":173,"tag":1255,"props":5713,"children":5714},{"style":2811},[5715],{"type":178,"value":5716}," ((",{"type":173,"tag":1255,"props":5718,"children":5719},{"style":1763},[5720],{"type":178,"value":868},{"type":173,"tag":1255,"props":5722,"children":5723},{"style":1262},[5724],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5726,"children":5727},{"style":1280},[5728],{"type":178,"value":5729}," ObjectType",{"type":173,"tag":1255,"props":5731,"children":5732},{"style":2811},[5733],{"type":178,"value":1739},{"type":173,"tag":1255,"props":5735,"children":5736},{"style":1286},[5737],{"type":178,"value":833},{"type":173,"tag":1255,"props":5739,"children":5740},{"style":1763},[5741],{"type":178,"value":5742},"objectFlags",{"type":173,"tag":1255,"props":5744,"children":5745},{"style":1409},[5746],{"type":178,"value":3226},{"type":173,"tag":1255,"props":5748,"children":5749},{"style":1763},[5750],{"type":178,"value":5751}," ObjectFlags",{"type":173,"tag":1255,"props":5753,"children":5754},{"style":1286},[5755],{"type":178,"value":833},{"type":173,"tag":1255,"props":5757,"children":5758},{"style":1763},[5759],{"type":178,"value":5760},"Reference",{"type":173,"tag":1255,"props":5762,"children":5763},{"style":2811},[5764],{"type":178,"value":2856},{"type":173,"tag":1255,"props":5766,"children":5767},{"style":1286},[5768],{"type":178,"value":2996},{"type":173,"tag":1255,"props":5770,"children":5771},{"class":1257,"line":1333},[5772,5777,5781,5785,5789,5794],{"type":173,"tag":1255,"props":5773,"children":5774},{"style":1710},[5775],{"type":178,"value":5776},"            resolveTypeReferenceMembers",{"type":173,"tag":1255,"props":5778,"children":5779},{"style":2811},[5780],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5782,"children":5783},{"style":1763},[5784],{"type":178,"value":868},{"type":173,"tag":1255,"props":5786,"children":5787},{"style":1262},[5788],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5790,"children":5791},{"style":1280},[5792],{"type":178,"value":5793}," TypeReference",{"type":173,"tag":1255,"props":5795,"children":5796},{"style":2811},[5797],{"type":178,"value":2667},{"type":173,"tag":1255,"props":5799,"children":5800},{"class":1257,"line":1346},[5801,5806,5811,5816,5820,5824,5828,5832,5836,5840,5844,5848,5852,5856,5861,5865],{"type":173,"tag":1255,"props":5802,"children":5803},{"style":1286},[5804],{"type":178,"value":5805},"        }",{"type":173,"tag":1255,"props":5807,"children":5808},{"style":1262},[5809],{"type":178,"value":5810}," else",{"type":173,"tag":1255,"props":5812,"children":5813},{"style":1262},[5814],{"type":178,"value":5815}," if",{"type":173,"tag":1255,"props":5817,"children":5818},{"style":2811},[5819],{"type":178,"value":5716},{"type":173,"tag":1255,"props":5821,"children":5822},{"style":1763},[5823],{"type":178,"value":868},{"type":173,"tag":1255,"props":5825,"children":5826},{"style":1262},[5827],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5829,"children":5830},{"style":1280},[5831],{"type":178,"value":5729},{"type":173,"tag":1255,"props":5833,"children":5834},{"style":2811},[5835],{"type":178,"value":1739},{"type":173,"tag":1255,"props":5837,"children":5838},{"style":1286},[5839],{"type":178,"value":833},{"type":173,"tag":1255,"props":5841,"children":5842},{"style":1763},[5843],{"type":178,"value":5742},{"type":173,"tag":1255,"props":5845,"children":5846},{"style":1409},[5847],{"type":178,"value":3226},{"type":173,"tag":1255,"props":5849,"children":5850},{"style":1763},[5851],{"type":178,"value":5751},{"type":173,"tag":1255,"props":5853,"children":5854},{"style":1286},[5855],{"type":178,"value":833},{"type":173,"tag":1255,"props":5857,"children":5858},{"style":1763},[5859],{"type":178,"value":5860},"Anonymous",{"type":173,"tag":1255,"props":5862,"children":5863},{"style":2811},[5864],{"type":178,"value":2856},{"type":173,"tag":1255,"props":5866,"children":5867},{"style":1286},[5868],{"type":178,"value":2996},{"type":173,"tag":1255,"props":5870,"children":5871},{"class":1257,"line":1356},[5872,5877,5881,5885,5889,5894],{"type":173,"tag":1255,"props":5873,"children":5874},{"style":1710},[5875],{"type":178,"value":5876},"            resolveAnonymousTypeMembers",{"type":173,"tag":1255,"props":5878,"children":5879},{"style":2811},[5880],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5882,"children":5883},{"style":1763},[5884],{"type":178,"value":868},{"type":173,"tag":1255,"props":5886,"children":5887},{"style":1262},[5888],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5890,"children":5891},{"style":1280},[5892],{"type":178,"value":5893}," AnonymousType",{"type":173,"tag":1255,"props":5895,"children":5896},{"style":2811},[5897],{"type":178,"value":2667},{"type":173,"tag":1255,"props":5899,"children":5900},{"class":1257,"line":1936},[5901],{"type":173,"tag":1255,"props":5902,"children":5903},{"style":1286},[5904],{"type":178,"value":5905},"        }\n",{"type":173,"tag":1255,"props":5907,"children":5908},{"class":1257,"line":1945},[5909],{"type":173,"tag":1255,"props":5910,"children":5911},{"style":1350},[5912],{"type":178,"value":5913},"        //...\n",{"type":173,"tag":1255,"props":5915,"children":5916},{"class":1257,"line":1967},[5917],{"type":173,"tag":1255,"props":5918,"children":5919},{"style":1286},[5920],{"type":178,"value":5921},"    }\n",{"type":173,"tag":1255,"props":5923,"children":5924},{"class":1257,"line":1976},[5925,5930,5934,5938,5942,5946,5950,5954,5958,5962,5967,5971],{"type":173,"tag":1255,"props":5926,"children":5927},{"style":1262},[5928],{"type":178,"value":5929},"    else",{"type":173,"tag":1255,"props":5931,"children":5932},{"style":1262},[5933],{"type":178,"value":5815},{"type":173,"tag":1255,"props":5935,"children":5936},{"style":2811},[5937],{"type":178,"value":2973},{"type":173,"tag":1255,"props":5939,"children":5940},{"style":1763},[5941],{"type":178,"value":868},{"type":173,"tag":1255,"props":5943,"children":5944},{"style":1286},[5945],{"type":178,"value":833},{"type":173,"tag":1255,"props":5947,"children":5948},{"style":1763},[5949],{"type":178,"value":3310},{"type":173,"tag":1255,"props":5951,"children":5952},{"style":1409},[5953],{"type":178,"value":3226},{"type":173,"tag":1255,"props":5955,"children":5956},{"style":1763},[5957],{"type":178,"value":5686},{"type":173,"tag":1255,"props":5959,"children":5960},{"style":1286},[5961],{"type":178,"value":833},{"type":173,"tag":1255,"props":5963,"children":5964},{"style":1763},[5965],{"type":178,"value":5966},"Union",{"type":173,"tag":1255,"props":5968,"children":5969},{"style":2811},[5970],{"type":178,"value":2856},{"type":173,"tag":1255,"props":5972,"children":5973},{"style":1286},[5974],{"type":178,"value":2996},{"type":173,"tag":1255,"props":5976,"children":5977},{"class":1257,"line":1999},[5978,5983,5987,5991,5995,6000],{"type":173,"tag":1255,"props":5979,"children":5980},{"style":1710},[5981],{"type":178,"value":5982},"        resolveUnionTypeMembers",{"type":173,"tag":1255,"props":5984,"children":5985},{"style":2811},[5986],{"type":178,"value":1718},{"type":173,"tag":1255,"props":5988,"children":5989},{"style":1763},[5990],{"type":178,"value":868},{"type":173,"tag":1255,"props":5992,"children":5993},{"style":1262},[5994],{"type":178,"value":5033},{"type":173,"tag":1255,"props":5996,"children":5997},{"style":1280},[5998],{"type":178,"value":5999}," UnionType",{"type":173,"tag":1255,"props":6001,"children":6002},{"style":2811},[6003],{"type":178,"value":2667},{"type":173,"tag":1255,"props":6005,"children":6006},{"class":1257,"line":2008},[6007],{"type":173,"tag":1255,"props":6008,"children":6009},{"style":1286},[6010],{"type":178,"value":5921},{"type":173,"tag":1255,"props":6012,"children":6013},{"class":1257,"line":2030},[6014,6018,6022,6026,6030,6034,6038,6042,6046,6050,6055,6059],{"type":173,"tag":1255,"props":6015,"children":6016},{"style":1262},[6017],{"type":178,"value":5929},{"type":173,"tag":1255,"props":6019,"children":6020},{"style":1262},[6021],{"type":178,"value":5815},{"type":173,"tag":1255,"props":6023,"children":6024},{"style":2811},[6025],{"type":178,"value":2973},{"type":173,"tag":1255,"props":6027,"children":6028},{"style":1763},[6029],{"type":178,"value":868},{"type":173,"tag":1255,"props":6031,"children":6032},{"style":1286},[6033],{"type":178,"value":833},{"type":173,"tag":1255,"props":6035,"children":6036},{"style":1763},[6037],{"type":178,"value":3310},{"type":173,"tag":1255,"props":6039,"children":6040},{"style":1409},[6041],{"type":178,"value":3226},{"type":173,"tag":1255,"props":6043,"children":6044},{"style":1763},[6045],{"type":178,"value":5686},{"type":173,"tag":1255,"props":6047,"children":6048},{"style":1286},[6049],{"type":178,"value":833},{"type":173,"tag":1255,"props":6051,"children":6052},{"style":1763},[6053],{"type":178,"value":6054},"Intersection",{"type":173,"tag":1255,"props":6056,"children":6057},{"style":2811},[6058],{"type":178,"value":2856},{"type":173,"tag":1255,"props":6060,"children":6061},{"style":1286},[6062],{"type":178,"value":2996},{"type":173,"tag":1255,"props":6064,"children":6065},{"class":1257,"line":2039},[6066,6071,6075,6079,6083,6088],{"type":173,"tag":1255,"props":6067,"children":6068},{"style":1710},[6069],{"type":178,"value":6070},"        resolveIntersectionTypeMembers",{"type":173,"tag":1255,"props":6072,"children":6073},{"style":2811},[6074],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6076,"children":6077},{"style":1763},[6078],{"type":178,"value":868},{"type":173,"tag":1255,"props":6080,"children":6081},{"style":1262},[6082],{"type":178,"value":5033},{"type":173,"tag":1255,"props":6084,"children":6085},{"style":1280},[6086],{"type":178,"value":6087}," IntersectionType",{"type":173,"tag":1255,"props":6089,"children":6090},{"style":2811},[6091],{"type":178,"value":2667},{"type":173,"tag":1255,"props":6093,"children":6094},{"class":1257,"line":2061},[6095],{"type":173,"tag":1255,"props":6096,"children":6097},{"style":1286},[6098],{"type":178,"value":5921},{"type":173,"tag":1255,"props":6100,"children":6101},{"class":1257,"line":2070},[6102],{"type":173,"tag":1255,"props":6103,"children":6104},{"style":1350},[6105],{"type":178,"value":1661},{"type":173,"tag":1255,"props":6107,"children":6108},{"class":1257,"line":2092},[6109],{"type":173,"tag":1255,"props":6110,"children":6111},{"style":1286},[6112],{"type":178,"value":2881},{"type":173,"tag":1255,"props":6114,"children":6115},{"class":1257,"line":2101},[6116,6120,6124,6128],{"type":173,"tag":1255,"props":6117,"children":6118},{"style":1262},[6119],{"type":178,"value":1760},{"type":173,"tag":1255,"props":6121,"children":6122},{"style":1763},[6123],{"type":178,"value":4158},{"type":173,"tag":1255,"props":6125,"children":6126},{"style":1262},[6127],{"type":178,"value":5033},{"type":173,"tag":1255,"props":6129,"children":6130},{"style":1280},[6131],{"type":178,"value":6132}," ResolvedType\n",{"type":173,"tag":1255,"props":6134,"children":6135},{"class":1257,"line":2123},[6136],{"type":173,"tag":1255,"props":6137,"children":6138},{"style":1286},[6139],{"type":178,"value":1362},{"type":173,"tag":174,"props":6141,"children":6142},{},[6143],{"type":178,"value":6144},"此函数涉及匿名类型和具名类型的处理，典型的具名类型形如：",{"type":173,"tag":1245,"props":6146,"children":6148},{"className":1247,"code":6147,"language":1249,"meta":166,"style":166},"interface Point { x: number, y: number }\nlet p: Point\n",[6149],{"type":173,"tag":346,"props":6150,"children":6151},{"__ignoreMap":166},[6152,6201],{"type":173,"tag":1255,"props":6153,"children":6154},{"class":1257,"line":1258},[6155,6160,6165,6169,6173,6177,6181,6185,6189,6193,6197],{"type":173,"tag":1255,"props":6156,"children":6157},{"style":1274},[6158],{"type":178,"value":6159},"interface",{"type":173,"tag":1255,"props":6161,"children":6162},{"style":1280},[6163],{"type":178,"value":6164}," Point",{"type":173,"tag":1255,"props":6166,"children":6167},{"style":1286},[6168],{"type":178,"value":5458},{"type":173,"tag":1255,"props":6170,"children":6171},{"style":1588},[6172],{"type":178,"value":5463},{"type":173,"tag":1255,"props":6174,"children":6175},{"style":1409},[6176],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6178,"children":6179},{"style":1731},[6180],{"type":178,"value":2116},{"type":173,"tag":1255,"props":6182,"children":6183},{"style":1286},[6184],{"type":178,"value":2353},{"type":173,"tag":1255,"props":6186,"children":6187},{"style":1588},[6188],{"type":178,"value":5501},{"type":173,"tag":1255,"props":6190,"children":6191},{"style":1409},[6192],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6194,"children":6195},{"style":1731},[6196],{"type":178,"value":2116},{"type":173,"tag":1255,"props":6198,"children":6199},{"style":1286},[6200],{"type":178,"value":5476},{"type":173,"tag":1255,"props":6202,"children":6203},{"class":1257,"line":1292},[6204,6209,6214,6218],{"type":173,"tag":1255,"props":6205,"children":6206},{"style":1274},[6207],{"type":178,"value":6208},"let",{"type":173,"tag":1255,"props":6210,"children":6211},{"style":1763},[6212],{"type":178,"value":6213}," p",{"type":173,"tag":1255,"props":6215,"children":6216},{"style":1409},[6217],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6219,"children":6220},{"style":1280},[6221],{"type":178,"value":6222}," Point\n",{"type":173,"tag":174,"props":6224,"children":6225},{},[6226],{"type":178,"value":6227},"显而易见，f1 不是具名类型，所以继续由 resolveAnonymousTypeMembers 解析。因为 TypeScript 是结构化类型系统，对于不同的函数而言，只要其调用签名相同，就可以认为类型是兼容的，所以解析函数类型，也仅需解析其 callSignatures。type.callSignatures 的结果可能是数组，但实际取得值会在 getSingleSignature 中兼容成数组第一项。",{"type":173,"tag":1245,"props":6229,"children":6231},{"className":1247,"code":6230,"language":1249,"meta":166,"style":166},"function resolveAnonymousTypeMembers(type: AnonymousType) {\n  //...\n  if (symbol.flags & (SymbolFlags.Function | SymbolFlags.Method)) {\n    type.callSignatures = getSignaturesOfSymbol(symbol)\n  }\n  //...\n}\n",[6232],{"type":173,"tag":346,"props":6233,"children":6234},{"__ignoreMap":166},[6235,6271,6278,6347,6384,6391,6398],{"type":173,"tag":1255,"props":6236,"children":6237},{"class":1257,"line":1258},[6238,6242,6247,6251,6255,6259,6263,6267],{"type":173,"tag":1255,"props":6239,"children":6240},{"style":1274},[6241],{"type":178,"value":1707},{"type":173,"tag":1255,"props":6243,"children":6244},{"style":1710},[6245],{"type":178,"value":6246}," resolveAnonymousTypeMembers",{"type":173,"tag":1255,"props":6248,"children":6249},{"style":1286},[6250],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6252,"children":6253},{"style":1721},[6254],{"type":178,"value":868},{"type":173,"tag":1255,"props":6256,"children":6257},{"style":1409},[6258],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6260,"children":6261},{"style":1280},[6262],{"type":178,"value":5893},{"type":173,"tag":1255,"props":6264,"children":6265},{"style":1286},[6266],{"type":178,"value":1739},{"type":173,"tag":1255,"props":6268,"children":6269},{"style":1286},[6270],{"type":178,"value":1289},{"type":173,"tag":1255,"props":6272,"children":6273},{"class":1257,"line":1292},[6274],{"type":173,"tag":1255,"props":6275,"children":6276},{"style":1350},[6277],{"type":178,"value":1353},{"type":173,"tag":1255,"props":6279,"children":6280},{"class":1257,"line":1307},[6281,6285,6289,6293,6297,6301,6305,6309,6313,6317,6322,6326,6330,6334,6339,6343],{"type":173,"tag":1255,"props":6282,"children":6283},{"style":1262},[6284],{"type":178,"value":2968},{"type":173,"tag":1255,"props":6286,"children":6287},{"style":2811},[6288],{"type":178,"value":2973},{"type":173,"tag":1255,"props":6290,"children":6291},{"style":1763},[6292],{"type":178,"value":3147},{"type":173,"tag":1255,"props":6294,"children":6295},{"style":1286},[6296],{"type":178,"value":833},{"type":173,"tag":1255,"props":6298,"children":6299},{"style":1763},[6300],{"type":178,"value":3310},{"type":173,"tag":1255,"props":6302,"children":6303},{"style":1409},[6304],{"type":178,"value":3226},{"type":173,"tag":1255,"props":6306,"children":6307},{"style":2811},[6308],{"type":178,"value":2973},{"type":173,"tag":1255,"props":6310,"children":6311},{"style":1763},[6312],{"type":178,"value":3323},{"type":173,"tag":1255,"props":6314,"children":6315},{"style":1286},[6316],{"type":178,"value":833},{"type":173,"tag":1255,"props":6318,"children":6319},{"style":1763},[6320],{"type":178,"value":6321},"Function",{"type":173,"tag":1255,"props":6323,"children":6324},{"style":1409},[6325],{"type":178,"value":2212},{"type":173,"tag":1255,"props":6327,"children":6328},{"style":1763},[6329],{"type":178,"value":1867},{"type":173,"tag":1255,"props":6331,"children":6332},{"style":1286},[6333],{"type":178,"value":833},{"type":173,"tag":1255,"props":6335,"children":6336},{"style":1763},[6337],{"type":178,"value":6338},"Method",{"type":173,"tag":1255,"props":6340,"children":6341},{"style":2811},[6342],{"type":178,"value":2991},{"type":173,"tag":1255,"props":6344,"children":6345},{"style":1286},[6346],{"type":178,"value":2996},{"type":173,"tag":1255,"props":6348,"children":6349},{"class":1257,"line":1320},[6350,6354,6358,6363,6367,6372,6376,6380],{"type":173,"tag":1255,"props":6351,"children":6352},{"style":1763},[6353],{"type":178,"value":3764},{"type":173,"tag":1255,"props":6355,"children":6356},{"style":1286},[6357],{"type":178,"value":833},{"type":173,"tag":1255,"props":6359,"children":6360},{"style":1763},[6361],{"type":178,"value":6362},"callSignatures",{"type":173,"tag":1255,"props":6364,"children":6365},{"style":1409},[6366],{"type":178,"value":2649},{"type":173,"tag":1255,"props":6368,"children":6369},{"style":1710},[6370],{"type":178,"value":6371}," getSignaturesOfSymbol",{"type":173,"tag":1255,"props":6373,"children":6374},{"style":2811},[6375],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6377,"children":6378},{"style":1763},[6379],{"type":178,"value":3147},{"type":173,"tag":1255,"props":6381,"children":6382},{"style":2811},[6383],{"type":178,"value":2667},{"type":173,"tag":1255,"props":6385,"children":6386},{"class":1257,"line":1333},[6387],{"type":173,"tag":1255,"props":6388,"children":6389},{"style":1286},[6390],{"type":178,"value":2881},{"type":173,"tag":1255,"props":6392,"children":6393},{"class":1257,"line":1346},[6394],{"type":173,"tag":1255,"props":6395,"children":6396},{"style":1350},[6397],{"type":178,"value":1353},{"type":173,"tag":1255,"props":6399,"children":6400},{"class":1257,"line":1356},[6401],{"type":173,"tag":1255,"props":6402,"children":6403},{"style":1286},[6404],{"type":178,"value":1362},{"type":173,"tag":174,"props":6406,"children":6407},{},[6408],{"type":178,"value":6409},"此时我们拿到了 f1 的签名类型。最后，还需根据上 getQuickTypeOfExpression 函数，通过 getReturnTypeOfSingleNonGenericCallSignature，根据函数的类型标注，获取其返回值类型，作为调用的结果类型，赋值给 x1。",{"type":173,"tag":1245,"props":6411,"children":6413},{"className":1247,"code":6412,"language":1249,"meta":166,"style":166},"function getReturnTypeOfSignature(signature: Signature): Type {\n  if (!signature.resolvedReturnType) {\n    let type = getReturnTypeFromAnnotation(signature.declaration)\n    signature.resolvedReturnType ??= type\n  }\n  return signature.resolvedReturnType\n}\n",[6414],{"type":173,"tag":346,"props":6415,"children":6416},{"__ignoreMap":166},[6417,6463,6499,6540,6566,6573,6594],{"type":173,"tag":1255,"props":6418,"children":6419},{"class":1257,"line":1258},[6420,6424,6429,6433,6438,6442,6447,6451,6455,6459],{"type":173,"tag":1255,"props":6421,"children":6422},{"style":1274},[6423],{"type":178,"value":1707},{"type":173,"tag":1255,"props":6425,"children":6426},{"style":1710},[6427],{"type":178,"value":6428}," getReturnTypeOfSignature",{"type":173,"tag":1255,"props":6430,"children":6431},{"style":1286},[6432],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6434,"children":6435},{"style":1721},[6436],{"type":178,"value":6437},"signature",{"type":173,"tag":1255,"props":6439,"children":6440},{"style":1409},[6441],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6443,"children":6444},{"style":1280},[6445],{"type":178,"value":6446}," Signature",{"type":173,"tag":1255,"props":6448,"children":6449},{"style":1286},[6450],{"type":178,"value":1739},{"type":173,"tag":1255,"props":6452,"children":6453},{"style":1409},[6454],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6456,"children":6457},{"style":1280},[6458],{"type":178,"value":1748},{"type":173,"tag":1255,"props":6460,"children":6461},{"style":1286},[6462],{"type":178,"value":1289},{"type":173,"tag":1255,"props":6464,"children":6465},{"class":1257,"line":1292},[6466,6470,6474,6478,6482,6486,6491,6495],{"type":173,"tag":1255,"props":6467,"children":6468},{"style":1262},[6469],{"type":178,"value":2968},{"type":173,"tag":1255,"props":6471,"children":6472},{"style":2811},[6473],{"type":178,"value":2973},{"type":173,"tag":1255,"props":6475,"children":6476},{"style":1409},[6477],{"type":178,"value":5616},{"type":173,"tag":1255,"props":6479,"children":6480},{"style":1763},[6481],{"type":178,"value":6437},{"type":173,"tag":1255,"props":6483,"children":6484},{"style":1286},[6485],{"type":178,"value":833},{"type":173,"tag":1255,"props":6487,"children":6488},{"style":1763},[6489],{"type":178,"value":6490},"resolvedReturnType",{"type":173,"tag":1255,"props":6492,"children":6493},{"style":2811},[6494],{"type":178,"value":2856},{"type":173,"tag":1255,"props":6496,"children":6497},{"style":1286},[6498],{"type":178,"value":2996},{"type":173,"tag":1255,"props":6500,"children":6501},{"class":1257,"line":1307},[6502,6507,6511,6515,6520,6524,6528,6532,6536],{"type":173,"tag":1255,"props":6503,"children":6504},{"style":1274},[6505],{"type":178,"value":6506},"    let",{"type":173,"tag":1255,"props":6508,"children":6509},{"style":1763},[6510],{"type":178,"value":4158},{"type":173,"tag":1255,"props":6512,"children":6513},{"style":1409},[6514],{"type":178,"value":2649},{"type":173,"tag":1255,"props":6516,"children":6517},{"style":1710},[6518],{"type":178,"value":6519}," getReturnTypeFromAnnotation",{"type":173,"tag":1255,"props":6521,"children":6522},{"style":2811},[6523],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6525,"children":6526},{"style":1763},[6527],{"type":178,"value":6437},{"type":173,"tag":1255,"props":6529,"children":6530},{"style":1286},[6531],{"type":178,"value":833},{"type":173,"tag":1255,"props":6533,"children":6534},{"style":1763},[6535],{"type":178,"value":3619},{"type":173,"tag":1255,"props":6537,"children":6538},{"style":2811},[6539],{"type":178,"value":2667},{"type":173,"tag":1255,"props":6541,"children":6542},{"class":1257,"line":1320},[6543,6548,6552,6556,6561],{"type":173,"tag":1255,"props":6544,"children":6545},{"style":1763},[6546],{"type":178,"value":6547},"    signature",{"type":173,"tag":1255,"props":6549,"children":6550},{"style":1286},[6551],{"type":178,"value":833},{"type":173,"tag":1255,"props":6553,"children":6554},{"style":1763},[6555],{"type":178,"value":6490},{"type":173,"tag":1255,"props":6557,"children":6558},{"style":1409},[6559],{"type":178,"value":6560}," ??=",{"type":173,"tag":1255,"props":6562,"children":6563},{"style":1763},[6564],{"type":178,"value":6565}," type\n",{"type":173,"tag":1255,"props":6567,"children":6568},{"class":1257,"line":1333},[6569],{"type":173,"tag":1255,"props":6570,"children":6571},{"style":1286},[6572],{"type":178,"value":2881},{"type":173,"tag":1255,"props":6574,"children":6575},{"class":1257,"line":1346},[6576,6580,6585,6589],{"type":173,"tag":1255,"props":6577,"children":6578},{"style":1262},[6579],{"type":178,"value":1760},{"type":173,"tag":1255,"props":6581,"children":6582},{"style":1763},[6583],{"type":178,"value":6584}," signature",{"type":173,"tag":1255,"props":6586,"children":6587},{"style":1286},[6588],{"type":178,"value":833},{"type":173,"tag":1255,"props":6590,"children":6591},{"style":1763},[6592],{"type":178,"value":6593},"resolvedReturnType\n",{"type":173,"tag":1255,"props":6595,"children":6596},{"class":1257,"line":1356},[6597],{"type":173,"tag":1255,"props":6598,"children":6599},{"style":1286},[6600],{"type":178,"value":1362},{"type":173,"tag":174,"props":6602,"children":6603},{},[6604,6606,6612],{"type":178,"value":6605},"getReturnTypeFromAnnotation 的过程则非常简单。我们已经知道 f1 的类型标注是 ",{"type":173,"tag":346,"props":6607,"children":6609},{"className":6608},[],[6610],{"type":178,"value":6611},"fn(x: number): string",{"type":178,"value":6613},"，可以直接根据此类型节点，根据类型节点标记拿到字符串字面量 string。此过程相关 getTypeFromTypeNode 函数。",{"type":173,"tag":1245,"props":6615,"children":6617},{"className":1247,"code":6616,"language":1249,"meta":166,"style":166},"function getTypeFromTypeNodeWorker(node: TypeNode): Type {\n  switch (node.kind) {\n    case SyntaxKind.StringKeyword:\n      return stringType // -> 'string'\n    case SyntaxKind.NeverKeyword:\n      return neverType\n    //...\n  }\n}\n",[6618],{"type":173,"tag":346,"props":6619,"children":6620},{"__ignoreMap":166},[6621,6666,6697,6721,6738,6762,6774,6781,6788],{"type":173,"tag":1255,"props":6622,"children":6623},{"class":1257,"line":1258},[6624,6628,6633,6637,6641,6645,6650,6654,6658,6662],{"type":173,"tag":1255,"props":6625,"children":6626},{"style":1274},[6627],{"type":178,"value":1707},{"type":173,"tag":1255,"props":6629,"children":6630},{"style":1710},[6631],{"type":178,"value":6632}," getTypeFromTypeNodeWorker",{"type":173,"tag":1255,"props":6634,"children":6635},{"style":1286},[6636],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6638,"children":6639},{"style":1721},[6640],{"type":178,"value":2407},{"type":173,"tag":1255,"props":6642,"children":6643},{"style":1409},[6644],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6646,"children":6647},{"style":1280},[6648],{"type":178,"value":6649}," TypeNode",{"type":173,"tag":1255,"props":6651,"children":6652},{"style":1286},[6653],{"type":178,"value":1739},{"type":173,"tag":1255,"props":6655,"children":6656},{"style":1409},[6657],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6659,"children":6660},{"style":1280},[6661],{"type":178,"value":1748},{"type":173,"tag":1255,"props":6663,"children":6664},{"style":1286},[6665],{"type":178,"value":1289},{"type":173,"tag":1255,"props":6667,"children":6668},{"class":1257,"line":1292},[6669,6673,6677,6681,6685,6689,6693],{"type":173,"tag":1255,"props":6670,"children":6671},{"style":1262},[6672],{"type":178,"value":4967},{"type":173,"tag":1255,"props":6674,"children":6675},{"style":2811},[6676],{"type":178,"value":2973},{"type":173,"tag":1255,"props":6678,"children":6679},{"style":1763},[6680],{"type":178,"value":2407},{"type":173,"tag":1255,"props":6682,"children":6683},{"style":1286},[6684],{"type":178,"value":833},{"type":173,"tag":1255,"props":6686,"children":6687},{"style":1763},[6688],{"type":178,"value":2462},{"type":173,"tag":1255,"props":6690,"children":6691},{"style":2811},[6692],{"type":178,"value":2856},{"type":173,"tag":1255,"props":6694,"children":6695},{"style":1286},[6696],{"type":178,"value":2996},{"type":173,"tag":1255,"props":6698,"children":6699},{"class":1257,"line":1307},[6700,6704,6708,6712,6717],{"type":173,"tag":1255,"props":6701,"children":6702},{"style":1262},[6703],{"type":178,"value":4991},{"type":173,"tag":1255,"props":6705,"children":6706},{"style":1763},[6707],{"type":178,"value":1283},{"type":173,"tag":1255,"props":6709,"children":6710},{"style":1286},[6711],{"type":178,"value":833},{"type":173,"tag":1255,"props":6713,"children":6714},{"style":1763},[6715],{"type":178,"value":6716},"StringKeyword",{"type":173,"tag":1255,"props":6718,"children":6719},{"style":1286},[6720],{"type":178,"value":4567},{"type":173,"tag":1255,"props":6722,"children":6723},{"class":1257,"line":1320},[6724,6728,6733],{"type":173,"tag":1255,"props":6725,"children":6726},{"style":1262},[6727],{"type":178,"value":2830},{"type":173,"tag":1255,"props":6729,"children":6730},{"style":1763},[6731],{"type":178,"value":6732}," stringType",{"type":173,"tag":1255,"props":6734,"children":6735},{"style":1350},[6736],{"type":178,"value":6737}," // -> 'string'\n",{"type":173,"tag":1255,"props":6739,"children":6740},{"class":1257,"line":1333},[6741,6745,6749,6753,6758],{"type":173,"tag":1255,"props":6742,"children":6743},{"style":1262},[6744],{"type":178,"value":4991},{"type":173,"tag":1255,"props":6746,"children":6747},{"style":1763},[6748],{"type":178,"value":1283},{"type":173,"tag":1255,"props":6750,"children":6751},{"style":1286},[6752],{"type":178,"value":833},{"type":173,"tag":1255,"props":6754,"children":6755},{"style":1763},[6756],{"type":178,"value":6757},"NeverKeyword",{"type":173,"tag":1255,"props":6759,"children":6760},{"style":1286},[6761],{"type":178,"value":4567},{"type":173,"tag":1255,"props":6763,"children":6764},{"class":1257,"line":1346},[6765,6769],{"type":173,"tag":1255,"props":6766,"children":6767},{"style":1262},[6768],{"type":178,"value":2830},{"type":173,"tag":1255,"props":6770,"children":6771},{"style":1763},[6772],{"type":178,"value":6773}," neverType\n",{"type":173,"tag":1255,"props":6775,"children":6776},{"class":1257,"line":1356},[6777],{"type":173,"tag":1255,"props":6778,"children":6779},{"style":1350},[6780],{"type":178,"value":1661},{"type":173,"tag":1255,"props":6782,"children":6783},{"class":1257,"line":1936},[6784],{"type":173,"tag":1255,"props":6785,"children":6786},{"style":1286},[6787],{"type":178,"value":2881},{"type":173,"tag":1255,"props":6789,"children":6790},{"class":1257,"line":1945},[6791],{"type":173,"tag":1255,"props":6792,"children":6793},{"style":1286},[6794],{"type":178,"value":1362},{"type":173,"tag":174,"props":6796,"children":6797},{},[6798,6800,6806],{"type":178,"value":6799},"getTypeFromTypeNode 和 getTypeFromTypeNodeWorker 的区别在于前者处理了控制流分析，后文会介绍。至此，已经完成 x1 的类型获取，结果为 ",{"type":173,"tag":346,"props":6801,"children":6803},{"className":6802},[],[6804],{"type":178,"value":6805},"string",{"type":178,"value":259},{"type":173,"tag":174,"props":6808,"children":6809},{},[6810],{"type":178,"value":6811},"至此，我们可以清晰列出获取 x1 的类型的调用过程：getTypeAtLocation、getTypeOfNode、getTypeOfSymbol、getTypeOfVariableOrParameterOrProperty、getTypeOfVariableOrParameterOrPropertyWorker、getWidenedTypeForVariableLikeDeclaration、getTypeForVariableLikeDeclaration、checkDeclarationInitializer、getQuickTypeOfExpression、checkNonNullExpression、checkExpression、checkExpressionWorker、checkIdentifier、getNarrowedTypeOfSymbol，从 getQuickTypeOfExpression 叉分出 getReturnTypeOfSingleNonGenericCallSignature、getSingleCallSignature、getSingleSignature、resolveStructuredTypeMembers、resolveAnonymousTypeMembers、getSignaturesOfSymbol、getSignatureFromDeclaration。",{"type":173,"tag":174,"props":6813,"children":6814},{},[6815],{"type":178,"value":6816},"如果函数是泛型函数，调用过程会有什么不同呢？",{"type":173,"tag":174,"props":6818,"children":6819},{},[6820],{"type":178,"value":6821},"取 f1 的签名时调用了 getQuickTypeOfExpression 函数，上文提到由于 f1 是一个非泛型函数，所以可以快速获取其类型。这里尝试只添加一个泛型参数，让 f1 变成泛型函数 f2，看看调用过程会有什么变化。",{"type":173,"tag":1245,"props":6823,"children":6825},{"className":1247,"code":6824,"language":1249,"meta":166,"style":166},"declare function f2\u003CT>(x: number): string\nconst x2 = f2(2)\n",[6826],{"type":173,"tag":346,"props":6827,"children":6828},{"__ignoreMap":166},[6829,6883],{"type":173,"tag":1255,"props":6830,"children":6831},{"class":1257,"line":1258},[6832,6836,6840,6845,6849,6854,6859,6863,6867,6871,6875,6879],{"type":173,"tag":1255,"props":6833,"children":6834},{"style":1268},[6835],{"type":178,"value":2591},{"type":173,"tag":1255,"props":6837,"children":6838},{"style":1274},[6839],{"type":178,"value":2596},{"type":173,"tag":1255,"props":6841,"children":6842},{"style":1710},[6843],{"type":178,"value":6844}," f2",{"type":173,"tag":1255,"props":6846,"children":6847},{"style":1286},[6848],{"type":178,"value":2343},{"type":173,"tag":1255,"props":6850,"children":6851},{"style":1280},[6852],{"type":178,"value":6853},"T",{"type":173,"tag":1255,"props":6855,"children":6856},{"style":1286},[6857],{"type":178,"value":6858},">(",{"type":173,"tag":1255,"props":6860,"children":6861},{"style":1721},[6862],{"type":178,"value":2610},{"type":173,"tag":1255,"props":6864,"children":6865},{"style":1409},[6866],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6868,"children":6869},{"style":1731},[6870],{"type":178,"value":2116},{"type":173,"tag":1255,"props":6872,"children":6873},{"style":1286},[6874],{"type":178,"value":1739},{"type":173,"tag":1255,"props":6876,"children":6877},{"style":1409},[6878],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6880,"children":6881},{"style":1731},[6882],{"type":178,"value":2631},{"type":173,"tag":1255,"props":6884,"children":6885},{"class":1257,"line":1292},[6886,6890,6895,6899,6903,6907,6912],{"type":173,"tag":1255,"props":6887,"children":6888},{"style":1274},[6889],{"type":178,"value":2639},{"type":173,"tag":1255,"props":6891,"children":6892},{"style":1296},[6893],{"type":178,"value":6894}," x2",{"type":173,"tag":1255,"props":6896,"children":6897},{"style":1409},[6898],{"type":178,"value":2649},{"type":173,"tag":1255,"props":6900,"children":6901},{"style":1710},[6902],{"type":178,"value":6844},{"type":173,"tag":1255,"props":6904,"children":6905},{"style":1763},[6906],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6908,"children":6909},{"style":1415},[6910],{"type":178,"value":6911},"2",{"type":173,"tag":1255,"props":6913,"children":6914},{"style":1763},[6915],{"type":178,"value":2667},{"type":173,"tag":174,"props":6917,"children":6918},{},[6919,6921,6926],{"type":178,"value":6920},"调用过程从 ",{"type":173,"tag":346,"props":6922,"children":6924},{"className":6923},[],[6925],{"type":178,"value":2678},{"type":178,"value":6927}," 函数开始看起，大致如图。",{"type":173,"tag":174,"props":6929,"children":6930},{},[6931],{"type":173,"tag":2546,"props":6932,"children":6934},{"alt":166,"src":6933},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507141042870.png",[],{"type":173,"tag":174,"props":6936,"children":6937},{},[6938],{"type":178,"value":6939},"最先出现分歧的是 getReturnTypeOfSingleNonGenericCallSignature 调用，由于 f2 带泛型参数导致返回 undefined（而不是像 f1 返回返回值 string 的类型签名），继而 getQuickTypeOfExpression 也返回 undefined。",{"type":173,"tag":1245,"props":6941,"children":6943},{"className":1247,"code":6942,"language":1249,"meta":166,"style":166},"function getReturnTypeOfSingleNonGenericCallSignature(funcType: Type) {\n  const signature = getSingleCallSignature(funcType)\n  if (signature && !signature.typeParameters) {\n    return getReturnTypeOfSignature(signature)\n  }\n}\n",[6944],{"type":173,"tag":346,"props":6945,"children":6946},{"__ignoreMap":166},[6947,6984,7016,7060,7083,7090],{"type":173,"tag":1255,"props":6948,"children":6949},{"class":1257,"line":1258},[6950,6954,6959,6963,6968,6972,6976,6980],{"type":173,"tag":1255,"props":6951,"children":6952},{"style":1274},[6953],{"type":178,"value":1707},{"type":173,"tag":1255,"props":6955,"children":6956},{"style":1710},[6957],{"type":178,"value":6958}," getReturnTypeOfSingleNonGenericCallSignature",{"type":173,"tag":1255,"props":6960,"children":6961},{"style":1286},[6962],{"type":178,"value":1718},{"type":173,"tag":1255,"props":6964,"children":6965},{"style":1721},[6966],{"type":178,"value":6967},"funcType",{"type":173,"tag":1255,"props":6969,"children":6970},{"style":1409},[6971],{"type":178,"value":1596},{"type":173,"tag":1255,"props":6973,"children":6974},{"style":1280},[6975],{"type":178,"value":1748},{"type":173,"tag":1255,"props":6977,"children":6978},{"style":1286},[6979],{"type":178,"value":1739},{"type":173,"tag":1255,"props":6981,"children":6982},{"style":1286},[6983],{"type":178,"value":1289},{"type":173,"tag":1255,"props":6985,"children":6986},{"class":1257,"line":1292},[6987,6991,6995,6999,7004,7008,7012],{"type":173,"tag":1255,"props":6988,"children":6989},{"style":1274},[6990],{"type":178,"value":3179},{"type":173,"tag":1255,"props":6992,"children":6993},{"style":1296},[6994],{"type":178,"value":6584},{"type":173,"tag":1255,"props":6996,"children":6997},{"style":1409},[6998],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7000,"children":7001},{"style":1710},[7002],{"type":178,"value":7003}," getSingleCallSignature",{"type":173,"tag":1255,"props":7005,"children":7006},{"style":2811},[7007],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7009,"children":7010},{"style":1763},[7011],{"type":178,"value":6967},{"type":173,"tag":1255,"props":7013,"children":7014},{"style":2811},[7015],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7017,"children":7018},{"class":1257,"line":1307},[7019,7023,7027,7031,7035,7039,7043,7047,7052,7056],{"type":173,"tag":1255,"props":7020,"children":7021},{"style":1262},[7022],{"type":178,"value":2968},{"type":173,"tag":1255,"props":7024,"children":7025},{"style":2811},[7026],{"type":178,"value":2973},{"type":173,"tag":1255,"props":7028,"children":7029},{"style":1763},[7030],{"type":178,"value":6437},{"type":173,"tag":1255,"props":7032,"children":7033},{"style":1409},[7034],{"type":178,"value":4124},{"type":173,"tag":1255,"props":7036,"children":7037},{"style":1409},[7038],{"type":178,"value":4432},{"type":173,"tag":1255,"props":7040,"children":7041},{"style":1763},[7042],{"type":178,"value":6437},{"type":173,"tag":1255,"props":7044,"children":7045},{"style":1286},[7046],{"type":178,"value":833},{"type":173,"tag":1255,"props":7048,"children":7049},{"style":1763},[7050],{"type":178,"value":7051},"typeParameters",{"type":173,"tag":1255,"props":7053,"children":7054},{"style":2811},[7055],{"type":178,"value":2856},{"type":173,"tag":1255,"props":7057,"children":7058},{"style":1286},[7059],{"type":178,"value":2996},{"type":173,"tag":1255,"props":7061,"children":7062},{"class":1257,"line":1320},[7063,7067,7071,7075,7079],{"type":173,"tag":1255,"props":7064,"children":7065},{"style":1262},[7066],{"type":178,"value":3057},{"type":173,"tag":1255,"props":7068,"children":7069},{"style":1710},[7070],{"type":178,"value":6428},{"type":173,"tag":1255,"props":7072,"children":7073},{"style":2811},[7074],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7076,"children":7077},{"style":1763},[7078],{"type":178,"value":6437},{"type":173,"tag":1255,"props":7080,"children":7081},{"style":2811},[7082],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7084,"children":7085},{"class":1257,"line":1333},[7086],{"type":173,"tag":1255,"props":7087,"children":7088},{"style":1286},[7089],{"type":178,"value":2881},{"type":173,"tag":1255,"props":7091,"children":7092},{"class":1257,"line":1346},[7093],{"type":173,"tag":1255,"props":7094,"children":7095},{"style":1286},[7096],{"type":178,"value":1362},{"type":173,"tag":174,"props":7098,"children":7099},{},[7100],{"type":178,"value":7101},"换句话说，getQuickTypeOfExpression 只适用于非泛型函数的调用的类型获取。逻辑分叉出现在 checkDeclarationInitializer，不能快速推断 f2 的类型，使逻辑进入 checkExpressionCached 函数。",{"type":173,"tag":1245,"props":7103,"children":7105},{"className":1247,"code":7104,"language":1249,"meta":166,"style":166},"function checkDeclarationInitializer() {\n  const type = getQuickTypeOfExpression(initializer) || (contextualType ?\n    checkExpressionWithContextualType(initializer, contextualType, /*inferenceContext*/ undefined, checkMode || CheckMode.Normal) :\n    checkExpressionCached(initializer, checkMode))\n}\n",[7106],{"type":173,"tag":346,"props":7107,"children":7108},{"__ignoreMap":166},[7109,7129,7179,7251,7279],{"type":173,"tag":1255,"props":7110,"children":7111},{"class":1257,"line":1258},[7112,7116,7120,7125],{"type":173,"tag":1255,"props":7113,"children":7114},{"style":1274},[7115],{"type":178,"value":1707},{"type":173,"tag":1255,"props":7117,"children":7118},{"style":1710},[7119],{"type":178,"value":4184},{"type":173,"tag":1255,"props":7121,"children":7122},{"style":1286},[7123],{"type":178,"value":7124},"()",{"type":173,"tag":1255,"props":7126,"children":7127},{"style":1286},[7128],{"type":178,"value":1289},{"type":173,"tag":1255,"props":7130,"children":7131},{"class":1257,"line":1292},[7132,7136,7140,7144,7148,7152,7156,7160,7165,7169,7174],{"type":173,"tag":1255,"props":7133,"children":7134},{"style":1274},[7135],{"type":178,"value":3179},{"type":173,"tag":1255,"props":7137,"children":7138},{"style":1296},[7139],{"type":178,"value":4158},{"type":173,"tag":1255,"props":7141,"children":7142},{"style":1409},[7143],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7145,"children":7146},{"style":1710},[7147],{"type":178,"value":4285},{"type":173,"tag":1255,"props":7149,"children":7150},{"style":2811},[7151],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7153,"children":7154},{"style":1763},[7155],{"type":178,"value":4119},{"type":173,"tag":1255,"props":7157,"children":7158},{"style":2811},[7159],{"type":178,"value":2856},{"type":173,"tag":1255,"props":7161,"children":7162},{"style":1409},[7163],{"type":178,"value":7164},"||",{"type":173,"tag":1255,"props":7166,"children":7167},{"style":2811},[7168],{"type":178,"value":2973},{"type":173,"tag":1255,"props":7170,"children":7171},{"style":1763},[7172],{"type":178,"value":7173},"contextualType",{"type":173,"tag":1255,"props":7175,"children":7176},{"style":1409},[7177],{"type":178,"value":7178}," ?\n",{"type":173,"tag":1255,"props":7180,"children":7181},{"class":1257,"line":1307},[7182,7187,7191,7195,7199,7204,7208,7213,7217,7221,7225,7230,7234,7238,7243,7247],{"type":173,"tag":1255,"props":7183,"children":7184},{"style":1710},[7185],{"type":178,"value":7186},"    checkExpressionWithContextualType",{"type":173,"tag":1255,"props":7188,"children":7189},{"style":2811},[7190],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7192,"children":7193},{"style":1763},[7194],{"type":178,"value":4119},{"type":173,"tag":1255,"props":7196,"children":7197},{"style":1286},[7198],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7200,"children":7201},{"style":1763},[7202],{"type":178,"value":7203}," contextualType",{"type":173,"tag":1255,"props":7205,"children":7206},{"style":1286},[7207],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7209,"children":7210},{"style":1350},[7211],{"type":178,"value":7212}," /*inferenceContext*/",{"type":173,"tag":1255,"props":7214,"children":7215},{"style":4628},[7216],{"type":178,"value":2217},{"type":173,"tag":1255,"props":7218,"children":7219},{"style":1286},[7220],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7222,"children":7223},{"style":1763},[7224],{"type":178,"value":4201},{"type":173,"tag":1255,"props":7226,"children":7227},{"style":1409},[7228],{"type":178,"value":7229}," ||",{"type":173,"tag":1255,"props":7231,"children":7232},{"style":1763},[7233],{"type":178,"value":3975},{"type":173,"tag":1255,"props":7235,"children":7236},{"style":1286},[7237],{"type":178,"value":833},{"type":173,"tag":1255,"props":7239,"children":7240},{"style":1763},[7241],{"type":178,"value":7242},"Normal",{"type":173,"tag":1255,"props":7244,"children":7245},{"style":2811},[7246],{"type":178,"value":2856},{"type":173,"tag":1255,"props":7248,"children":7249},{"style":1409},[7250],{"type":178,"value":4567},{"type":173,"tag":1255,"props":7252,"children":7253},{"class":1257,"line":1320},[7254,7259,7263,7267,7271,7275],{"type":173,"tag":1255,"props":7255,"children":7256},{"style":1710},[7257],{"type":178,"value":7258},"    checkExpressionCached",{"type":173,"tag":1255,"props":7260,"children":7261},{"style":2811},[7262],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7264,"children":7265},{"style":1763},[7266],{"type":178,"value":4119},{"type":173,"tag":1255,"props":7268,"children":7269},{"style":1286},[7270],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7272,"children":7273},{"style":1763},[7274],{"type":178,"value":4201},{"type":173,"tag":1255,"props":7276,"children":7277},{"style":2811},[7278],{"type":178,"value":3084},{"type":173,"tag":1255,"props":7280,"children":7281},{"class":1257,"line":1333},[7282],{"type":173,"tag":1255,"props":7283,"children":7284},{"style":1286},[7285],{"type":178,"value":1362},{"type":173,"tag":174,"props":7287,"children":7288},{},[7289,7291,7297,7299,7305],{"type":178,"value":7290},"为什么不是调用 checkExpressionWithContextualType 呢？我们是从变量声明这个场景获取标识符的类型，假设有 ",{"type":173,"tag":346,"props":7292,"children":7294},{"className":7293},[],[7295],{"type":178,"value":7296},"let x: {a: number} = { a: 1 }",{"type":178,"value":7298}," 代码，",{"type":173,"tag":346,"props":7300,"children":7302},{"className":7301},[],[7303],{"type":178,"value":7304},"{ a: 1 }",{"type":178,"value":7306}," 的类型推断需要根据上下文处理，所以适用 checkExpressionWithContextualType。而 f2 的情况不需要所以 contextualType 为空。",{"type":173,"tag":174,"props":7308,"children":7309},{},[7310],{"type":178,"value":7311},"之前已经介绍了 checkExpressionWorker 会根据节点标记调用检测函数，如果在 switch 中记录这些被检测的节点，就会发现，由于 checkDeclarationInitializer 中这个分叉的出现，从 f1 仅需检测一个节点（Identifier），变成了到 f2 这边需要检测多个节点（Identifier、CallExpression、Identifier、FirstLiteralToken，即 f2 函数标识符、调用表达式、参数标识符和参数字面量）。",{"type":173,"tag":174,"props":7313,"children":7314},{},[7315],{"type":178,"value":7316},"在分叉出现的这一路上，以检测函数调用节点为例，见到了熟悉的 checkCallExpression、getResolvedSignature、resolveSignature、resolveCallExpression、resolveCall，大致指从检查调用表达式、获取签名、解析签名、解析调用表达式一直到解析调用。",{"type":173,"tag":174,"props":7318,"children":7319},{},[7320],{"type":178,"value":7321},"这些函数中只有 resolveCall 是较复杂的函数，后续会着重介绍。它主要从可能存在的多个函数重载中匹配一个合适的签名供后续流程使用。",{"type":173,"tag":1245,"props":7323,"children":7325},{"className":1247,"code":7324,"language":1249,"meta":166,"style":166},"function resolveCall(node: CallLikeExpression, signatures: readonly Signature[], candidatesOutArray: Signature[] | undefined, checkMode: CheckMode, callChainFlags: SignatureFlags, headMessage?: DiagnosticMessage): Signature {\n  let result: Signature | undefined\n  const candidates = reorderCandidates(signatures, candidates, callChainFlags)\n  result = chooseOverload(candidates, assignableRelation, isSingleNonGenericCandidate, signatureHelpTrailingComma)\n  return result\n}\n",[7326],{"type":173,"tag":346,"props":7327,"children":7328},{"__ignoreMap":166},[7329,7484,7513,7563,7620,7632],{"type":173,"tag":1255,"props":7330,"children":7331},{"class":1257,"line":1258},[7332,7336,7341,7345,7349,7353,7358,7362,7367,7371,7376,7380,7385,7389,7394,7398,7402,7407,7412,7416,7420,7424,7428,7432,7436,7441,7445,7450,7454,7459,7463,7468,7472,7476,7480],{"type":173,"tag":1255,"props":7333,"children":7334},{"style":1274},[7335],{"type":178,"value":1707},{"type":173,"tag":1255,"props":7337,"children":7338},{"style":1710},[7339],{"type":178,"value":7340}," resolveCall",{"type":173,"tag":1255,"props":7342,"children":7343},{"style":1286},[7344],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7346,"children":7347},{"style":1721},[7348],{"type":178,"value":2407},{"type":173,"tag":1255,"props":7350,"children":7351},{"style":1409},[7352],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7354,"children":7355},{"style":1280},[7356],{"type":178,"value":7357}," CallLikeExpression",{"type":173,"tag":1255,"props":7359,"children":7360},{"style":1286},[7361],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7363,"children":7364},{"style":1721},[7365],{"type":178,"value":7366}," signatures",{"type":173,"tag":1255,"props":7368,"children":7369},{"style":1409},[7370],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7372,"children":7373},{"style":1268},[7374],{"type":178,"value":7375}," readonly",{"type":173,"tag":1255,"props":7377,"children":7378},{"style":1280},[7379],{"type":178,"value":6446},{"type":173,"tag":1255,"props":7381,"children":7382},{"style":1763},[7383],{"type":178,"value":7384},"[]",{"type":173,"tag":1255,"props":7386,"children":7387},{"style":1286},[7388],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7390,"children":7391},{"style":1721},[7392],{"type":178,"value":7393}," candidatesOutArray",{"type":173,"tag":1255,"props":7395,"children":7396},{"style":1409},[7397],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7399,"children":7400},{"style":1280},[7401],{"type":178,"value":6446},{"type":173,"tag":1255,"props":7403,"children":7404},{"style":1763},[7405],{"type":178,"value":7406},"[] ",{"type":173,"tag":1255,"props":7408,"children":7409},{"style":1409},[7410],{"type":178,"value":7411},"|",{"type":173,"tag":1255,"props":7413,"children":7414},{"style":1731},[7415],{"type":178,"value":2217},{"type":173,"tag":1255,"props":7417,"children":7418},{"style":1286},[7419],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7421,"children":7422},{"style":1721},[7423],{"type":178,"value":4201},{"type":173,"tag":1255,"props":7425,"children":7426},{"style":1409},[7427],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7429,"children":7430},{"style":1280},[7431],{"type":178,"value":3975},{"type":173,"tag":1255,"props":7433,"children":7434},{"style":1286},[7435],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7437,"children":7438},{"style":1721},[7439],{"type":178,"value":7440}," callChainFlags",{"type":173,"tag":1255,"props":7442,"children":7443},{"style":1409},[7444],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7446,"children":7447},{"style":1280},[7448],{"type":178,"value":7449}," SignatureFlags",{"type":173,"tag":1255,"props":7451,"children":7452},{"style":1286},[7453],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7455,"children":7456},{"style":1721},[7457],{"type":178,"value":7458}," headMessage",{"type":173,"tag":1255,"props":7460,"children":7461},{"style":1409},[7462],{"type":178,"value":1923},{"type":173,"tag":1255,"props":7464,"children":7465},{"style":1280},[7466],{"type":178,"value":7467}," DiagnosticMessage",{"type":173,"tag":1255,"props":7469,"children":7470},{"style":1286},[7471],{"type":178,"value":1739},{"type":173,"tag":1255,"props":7473,"children":7474},{"style":1409},[7475],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7477,"children":7478},{"style":1280},[7479],{"type":178,"value":6446},{"type":173,"tag":1255,"props":7481,"children":7482},{"style":1286},[7483],{"type":178,"value":1289},{"type":173,"tag":1255,"props":7485,"children":7486},{"class":1257,"line":1292},[7487,7492,7497,7501,7505,7509],{"type":173,"tag":1255,"props":7488,"children":7489},{"style":1274},[7490],{"type":178,"value":7491},"  let",{"type":173,"tag":1255,"props":7493,"children":7494},{"style":1763},[7495],{"type":178,"value":7496}," result",{"type":173,"tag":1255,"props":7498,"children":7499},{"style":1409},[7500],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7502,"children":7503},{"style":1280},[7504],{"type":178,"value":6446},{"type":173,"tag":1255,"props":7506,"children":7507},{"style":1409},[7508],{"type":178,"value":2212},{"type":173,"tag":1255,"props":7510,"children":7511},{"style":1731},[7512],{"type":178,"value":4631},{"type":173,"tag":1255,"props":7514,"children":7515},{"class":1257,"line":1307},[7516,7520,7525,7529,7534,7538,7543,7547,7551,7555,7559],{"type":173,"tag":1255,"props":7517,"children":7518},{"style":1274},[7519],{"type":178,"value":3179},{"type":173,"tag":1255,"props":7521,"children":7522},{"style":1296},[7523],{"type":178,"value":7524}," candidates",{"type":173,"tag":1255,"props":7526,"children":7527},{"style":1409},[7528],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7530,"children":7531},{"style":1710},[7532],{"type":178,"value":7533}," reorderCandidates",{"type":173,"tag":1255,"props":7535,"children":7536},{"style":2811},[7537],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7539,"children":7540},{"style":1763},[7541],{"type":178,"value":7542},"signatures",{"type":173,"tag":1255,"props":7544,"children":7545},{"style":1286},[7546],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7548,"children":7549},{"style":1763},[7550],{"type":178,"value":7524},{"type":173,"tag":1255,"props":7552,"children":7553},{"style":1286},[7554],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7556,"children":7557},{"style":1763},[7558],{"type":178,"value":7440},{"type":173,"tag":1255,"props":7560,"children":7561},{"style":2811},[7562],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7564,"children":7565},{"class":1257,"line":1320},[7566,7571,7575,7580,7584,7589,7593,7598,7602,7607,7611,7616],{"type":173,"tag":1255,"props":7567,"children":7568},{"style":1763},[7569],{"type":178,"value":7570},"  result",{"type":173,"tag":1255,"props":7572,"children":7573},{"style":1409},[7574],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7576,"children":7577},{"style":1710},[7578],{"type":178,"value":7579}," chooseOverload",{"type":173,"tag":1255,"props":7581,"children":7582},{"style":2811},[7583],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7585,"children":7586},{"style":1763},[7587],{"type":178,"value":7588},"candidates",{"type":173,"tag":1255,"props":7590,"children":7591},{"style":1286},[7592],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7594,"children":7595},{"style":1763},[7596],{"type":178,"value":7597}," assignableRelation",{"type":173,"tag":1255,"props":7599,"children":7600},{"style":1286},[7601],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7603,"children":7604},{"style":1763},[7605],{"type":178,"value":7606}," isSingleNonGenericCandidate",{"type":173,"tag":1255,"props":7608,"children":7609},{"style":1286},[7610],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7612,"children":7613},{"style":1763},[7614],{"type":178,"value":7615}," signatureHelpTrailingComma",{"type":173,"tag":1255,"props":7617,"children":7618},{"style":2811},[7619],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7621,"children":7622},{"class":1257,"line":1333},[7623,7627],{"type":173,"tag":1255,"props":7624,"children":7625},{"style":1262},[7626],{"type":178,"value":1760},{"type":173,"tag":1255,"props":7628,"children":7629},{"style":1763},[7630],{"type":178,"value":7631}," result\n",{"type":173,"tag":1255,"props":7633,"children":7634},{"class":1257,"line":1346},[7635],{"type":173,"tag":1255,"props":7636,"children":7637},{"style":1286},[7638],{"type":178,"value":1362},{"type":173,"tag":174,"props":7640,"children":7641},{},[7642],{"type":178,"value":7643},"拿到签名后，在 checkCallExpression 中解析得到返回值的类型，此过程和 f1 是一样的，最后取得结果 string。",{"type":173,"tag":1245,"props":7645,"children":7647},{"className":1247,"code":7646,"language":1249,"meta":166,"style":166},"function checkCallExpression(node: CallExpression | NewExpression, checkMode?: CheckMode): Type {\n  const signature = getResolvedSignature(node, /*candidatesOutArray*/ undefined, checkMode)\n  const returnType = getReturnTypeOfSignature(signature)\n  return returnType\n}\n",[7648],{"type":173,"tag":346,"props":7649,"children":7650},{"__ignoreMap":166},[7651,7721,7774,7806,7818],{"type":173,"tag":1255,"props":7652,"children":7653},{"class":1257,"line":1258},[7654,7658,7663,7667,7671,7675,7680,7684,7689,7693,7697,7701,7705,7709,7713,7717],{"type":173,"tag":1255,"props":7655,"children":7656},{"style":1274},[7657],{"type":178,"value":1707},{"type":173,"tag":1255,"props":7659,"children":7660},{"style":1710},[7661],{"type":178,"value":7662}," checkCallExpression",{"type":173,"tag":1255,"props":7664,"children":7665},{"style":1286},[7666],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7668,"children":7669},{"style":1721},[7670],{"type":178,"value":2407},{"type":173,"tag":1255,"props":7672,"children":7673},{"style":1409},[7674],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7676,"children":7677},{"style":1280},[7678],{"type":178,"value":7679}," CallExpression",{"type":173,"tag":1255,"props":7681,"children":7682},{"style":1409},[7683],{"type":178,"value":2212},{"type":173,"tag":1255,"props":7685,"children":7686},{"style":1280},[7687],{"type":178,"value":7688}," NewExpression",{"type":173,"tag":1255,"props":7690,"children":7691},{"style":1286},[7692],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7694,"children":7695},{"style":1721},[7696],{"type":178,"value":4201},{"type":173,"tag":1255,"props":7698,"children":7699},{"style":1409},[7700],{"type":178,"value":1923},{"type":173,"tag":1255,"props":7702,"children":7703},{"style":1280},[7704],{"type":178,"value":3975},{"type":173,"tag":1255,"props":7706,"children":7707},{"style":1286},[7708],{"type":178,"value":1739},{"type":173,"tag":1255,"props":7710,"children":7711},{"style":1409},[7712],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7714,"children":7715},{"style":1280},[7716],{"type":178,"value":1748},{"type":173,"tag":1255,"props":7718,"children":7719},{"style":1286},[7720],{"type":178,"value":1289},{"type":173,"tag":1255,"props":7722,"children":7723},{"class":1257,"line":1292},[7724,7728,7732,7736,7741,7745,7749,7753,7758,7762,7766,7770],{"type":173,"tag":1255,"props":7725,"children":7726},{"style":1274},[7727],{"type":178,"value":3179},{"type":173,"tag":1255,"props":7729,"children":7730},{"style":1296},[7731],{"type":178,"value":6584},{"type":173,"tag":1255,"props":7733,"children":7734},{"style":1409},[7735],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7737,"children":7738},{"style":1710},[7739],{"type":178,"value":7740}," getResolvedSignature",{"type":173,"tag":1255,"props":7742,"children":7743},{"style":2811},[7744],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7746,"children":7747},{"style":1763},[7748],{"type":178,"value":2407},{"type":173,"tag":1255,"props":7750,"children":7751},{"style":1286},[7752],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7754,"children":7755},{"style":1350},[7756],{"type":178,"value":7757}," /*candidatesOutArray*/",{"type":173,"tag":1255,"props":7759,"children":7760},{"style":4628},[7761],{"type":178,"value":2217},{"type":173,"tag":1255,"props":7763,"children":7764},{"style":1286},[7765],{"type":178,"value":2353},{"type":173,"tag":1255,"props":7767,"children":7768},{"style":1763},[7769],{"type":178,"value":4201},{"type":173,"tag":1255,"props":7771,"children":7772},{"style":2811},[7773],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7775,"children":7776},{"class":1257,"line":1307},[7777,7781,7786,7790,7794,7798,7802],{"type":173,"tag":1255,"props":7778,"children":7779},{"style":1274},[7780],{"type":178,"value":3179},{"type":173,"tag":1255,"props":7782,"children":7783},{"style":1296},[7784],{"type":178,"value":7785}," returnType",{"type":173,"tag":1255,"props":7787,"children":7788},{"style":1409},[7789],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7791,"children":7792},{"style":1710},[7793],{"type":178,"value":6428},{"type":173,"tag":1255,"props":7795,"children":7796},{"style":2811},[7797],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7799,"children":7800},{"style":1763},[7801],{"type":178,"value":6437},{"type":173,"tag":1255,"props":7803,"children":7804},{"style":2811},[7805],{"type":178,"value":2667},{"type":173,"tag":1255,"props":7807,"children":7808},{"class":1257,"line":1320},[7809,7813],{"type":173,"tag":1255,"props":7810,"children":7811},{"style":1262},[7812],{"type":178,"value":1760},{"type":173,"tag":1255,"props":7814,"children":7815},{"style":1763},[7816],{"type":178,"value":7817}," returnType\n",{"type":173,"tag":1255,"props":7819,"children":7820},{"class":1257,"line":1333},[7821],{"type":173,"tag":1255,"props":7822,"children":7823},{"style":1286},[7824],{"type":178,"value":1362},{"type":173,"tag":174,"props":7826,"children":7827},{},[7828],{"type":178,"value":7829},"chooseOverload 顾名思义，从多个重载中选择一个合适的重载签名。它会根据参数个数、参数类型、返回类型等信息，选择最匹配的重载签名。如果函数是泛型函数，会在此过程中推断泛型参数。比如，f2 的 T 会在 inferTypeArguments 中推断成为 unknown。",{"type":173,"tag":1245,"props":7831,"children":7833},{"className":1247,"code":7832,"language":1249,"meta":166,"style":166},"function chooseOverload(candidates: Signature[]) {\n  for (let candidateIndex = 0; candidateIndex \u003C candidates.length; candidateIndex++) {\n    const candidate = candidates[candidateIndex]\n    if (candidate.typeParameters) {\n        let typeArgumentTypes: Type[] | undefined\n        inferenceContext = createInferenceContext(candidate.typeParameters, candidate, /*flags*/ isInJSFile(node) ? InferenceFlags.AnyDefault : InferenceFlags.None)\n        typeArgumentTypes = inferTypeArguments(node, candidate, args, argCheckMode | CheckMode.SkipGenericFunctions, inferenceContext)\n        argCheckMode |= inferenceContext.flags & InferenceFlags.SkippedGenericFunction ? CheckMode.SkipGenericFunctions : CheckMode.Normal\n    }\n  }\n}\n",[7834],{"type":173,"tag":346,"props":7835,"children":7836},{"__ignoreMap":166},[7837,7876,7953,7987,8019,8052,8158,8239,8314,8321,8328],{"type":173,"tag":1255,"props":7838,"children":7839},{"class":1257,"line":1258},[7840,7844,7848,7852,7856,7860,7864,7868,7872],{"type":173,"tag":1255,"props":7841,"children":7842},{"style":1274},[7843],{"type":178,"value":1707},{"type":173,"tag":1255,"props":7845,"children":7846},{"style":1710},[7847],{"type":178,"value":7579},{"type":173,"tag":1255,"props":7849,"children":7850},{"style":1286},[7851],{"type":178,"value":1718},{"type":173,"tag":1255,"props":7853,"children":7854},{"style":1721},[7855],{"type":178,"value":7588},{"type":173,"tag":1255,"props":7857,"children":7858},{"style":1409},[7859],{"type":178,"value":1596},{"type":173,"tag":1255,"props":7861,"children":7862},{"style":1280},[7863],{"type":178,"value":6446},{"type":173,"tag":1255,"props":7865,"children":7866},{"style":1763},[7867],{"type":178,"value":7384},{"type":173,"tag":1255,"props":7869,"children":7870},{"style":1286},[7871],{"type":178,"value":1739},{"type":173,"tag":1255,"props":7873,"children":7874},{"style":1286},[7875],{"type":178,"value":1289},{"type":173,"tag":1255,"props":7877,"children":7878},{"class":1257,"line":1292},[7879,7884,7888,7892,7897,7901,7905,7910,7914,7919,7923,7927,7932,7936,7940,7945,7949],{"type":173,"tag":1255,"props":7880,"children":7881},{"style":1262},[7882],{"type":178,"value":7883},"  for",{"type":173,"tag":1255,"props":7885,"children":7886},{"style":2811},[7887],{"type":178,"value":2973},{"type":173,"tag":1255,"props":7889,"children":7890},{"style":1274},[7891],{"type":178,"value":6208},{"type":173,"tag":1255,"props":7893,"children":7894},{"style":1763},[7895],{"type":178,"value":7896}," candidateIndex",{"type":173,"tag":1255,"props":7898,"children":7899},{"style":1409},[7900],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7902,"children":7903},{"style":1415},[7904],{"type":178,"value":1418},{"type":173,"tag":1255,"props":7906,"children":7907},{"style":1286},[7908],{"type":178,"value":7909},";",{"type":173,"tag":1255,"props":7911,"children":7912},{"style":1763},[7913],{"type":178,"value":7896},{"type":173,"tag":1255,"props":7915,"children":7916},{"style":1409},[7917],{"type":178,"value":7918}," \u003C",{"type":173,"tag":1255,"props":7920,"children":7921},{"style":1763},[7922],{"type":178,"value":7524},{"type":173,"tag":1255,"props":7924,"children":7925},{"style":1286},[7926],{"type":178,"value":833},{"type":173,"tag":1255,"props":7928,"children":7929},{"style":1296},[7930],{"type":178,"value":7931},"length",{"type":173,"tag":1255,"props":7933,"children":7934},{"style":1286},[7935],{"type":178,"value":7909},{"type":173,"tag":1255,"props":7937,"children":7938},{"style":1763},[7939],{"type":178,"value":7896},{"type":173,"tag":1255,"props":7941,"children":7942},{"style":1409},[7943],{"type":178,"value":7944},"++",{"type":173,"tag":1255,"props":7946,"children":7947},{"style":2811},[7948],{"type":178,"value":2856},{"type":173,"tag":1255,"props":7950,"children":7951},{"style":1286},[7952],{"type":178,"value":2996},{"type":173,"tag":1255,"props":7954,"children":7955},{"class":1257,"line":1307},[7956,7960,7965,7969,7973,7978,7983],{"type":173,"tag":1255,"props":7957,"children":7958},{"style":1274},[7959],{"type":178,"value":4153},{"type":173,"tag":1255,"props":7961,"children":7962},{"style":1296},[7963],{"type":178,"value":7964}," candidate",{"type":173,"tag":1255,"props":7966,"children":7967},{"style":1409},[7968],{"type":178,"value":2649},{"type":173,"tag":1255,"props":7970,"children":7971},{"style":1763},[7972],{"type":178,"value":7524},{"type":173,"tag":1255,"props":7974,"children":7975},{"style":2811},[7976],{"type":178,"value":7977},"[",{"type":173,"tag":1255,"props":7979,"children":7980},{"style":1763},[7981],{"type":178,"value":7982},"candidateIndex",{"type":173,"tag":1255,"props":7984,"children":7985},{"style":2811},[7986],{"type":178,"value":3477},{"type":173,"tag":1255,"props":7988,"children":7989},{"class":1257,"line":1320},[7990,7994,7998,8003,8007,8011,8015],{"type":173,"tag":1255,"props":7991,"children":7992},{"style":1262},[7993],{"type":178,"value":5661},{"type":173,"tag":1255,"props":7995,"children":7996},{"style":2811},[7997],{"type":178,"value":2973},{"type":173,"tag":1255,"props":7999,"children":8000},{"style":1763},[8001],{"type":178,"value":8002},"candidate",{"type":173,"tag":1255,"props":8004,"children":8005},{"style":1286},[8006],{"type":178,"value":833},{"type":173,"tag":1255,"props":8008,"children":8009},{"style":1763},[8010],{"type":178,"value":7051},{"type":173,"tag":1255,"props":8012,"children":8013},{"style":2811},[8014],{"type":178,"value":2856},{"type":173,"tag":1255,"props":8016,"children":8017},{"style":1286},[8018],{"type":178,"value":2996},{"type":173,"tag":1255,"props":8020,"children":8021},{"class":1257,"line":1333},[8022,8027,8032,8036,8040,8044,8048],{"type":173,"tag":1255,"props":8023,"children":8024},{"style":1274},[8025],{"type":178,"value":8026},"        let",{"type":173,"tag":1255,"props":8028,"children":8029},{"style":1763},[8030],{"type":178,"value":8031}," typeArgumentTypes",{"type":173,"tag":1255,"props":8033,"children":8034},{"style":1409},[8035],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8037,"children":8038},{"style":1280},[8039],{"type":178,"value":1748},{"type":173,"tag":1255,"props":8041,"children":8042},{"style":2811},[8043],{"type":178,"value":7406},{"type":173,"tag":1255,"props":8045,"children":8046},{"style":1409},[8047],{"type":178,"value":7411},{"type":173,"tag":1255,"props":8049,"children":8050},{"style":1731},[8051],{"type":178,"value":4631},{"type":173,"tag":1255,"props":8053,"children":8054},{"class":1257,"line":1346},[8055,8060,8064,8069,8073,8077,8081,8085,8089,8093,8097,8102,8107,8111,8115,8119,8123,8128,8132,8137,8141,8145,8149,8154],{"type":173,"tag":1255,"props":8056,"children":8057},{"style":1763},[8058],{"type":178,"value":8059},"        inferenceContext",{"type":173,"tag":1255,"props":8061,"children":8062},{"style":1409},[8063],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8065,"children":8066},{"style":1710},[8067],{"type":178,"value":8068}," createInferenceContext",{"type":173,"tag":1255,"props":8070,"children":8071},{"style":2811},[8072],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8074,"children":8075},{"style":1763},[8076],{"type":178,"value":8002},{"type":173,"tag":1255,"props":8078,"children":8079},{"style":1286},[8080],{"type":178,"value":833},{"type":173,"tag":1255,"props":8082,"children":8083},{"style":1763},[8084],{"type":178,"value":7051},{"type":173,"tag":1255,"props":8086,"children":8087},{"style":1286},[8088],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8090,"children":8091},{"style":1763},[8092],{"type":178,"value":7964},{"type":173,"tag":1255,"props":8094,"children":8095},{"style":1286},[8096],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8098,"children":8099},{"style":1350},[8100],{"type":178,"value":8101}," /*flags*/",{"type":173,"tag":1255,"props":8103,"children":8104},{"style":1710},[8105],{"type":178,"value":8106}," isInJSFile",{"type":173,"tag":1255,"props":8108,"children":8109},{"style":2811},[8110],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8112,"children":8113},{"style":1763},[8114],{"type":178,"value":2407},{"type":173,"tag":1255,"props":8116,"children":8117},{"style":2811},[8118],{"type":178,"value":2856},{"type":173,"tag":1255,"props":8120,"children":8121},{"style":1409},[8122],{"type":178,"value":4545},{"type":173,"tag":1255,"props":8124,"children":8125},{"style":1763},[8126],{"type":178,"value":8127}," InferenceFlags",{"type":173,"tag":1255,"props":8129,"children":8130},{"style":1286},[8131],{"type":178,"value":833},{"type":173,"tag":1255,"props":8133,"children":8134},{"style":1763},[8135],{"type":178,"value":8136},"AnyDefault",{"type":173,"tag":1255,"props":8138,"children":8139},{"style":1409},[8140],{"type":178,"value":1781},{"type":173,"tag":1255,"props":8142,"children":8143},{"style":1763},[8144],{"type":178,"value":8127},{"type":173,"tag":1255,"props":8146,"children":8147},{"style":1286},[8148],{"type":178,"value":833},{"type":173,"tag":1255,"props":8150,"children":8151},{"style":1763},[8152],{"type":178,"value":8153},"None",{"type":173,"tag":1255,"props":8155,"children":8156},{"style":2811},[8157],{"type":178,"value":2667},{"type":173,"tag":1255,"props":8159,"children":8160},{"class":1257,"line":1356},[8161,8166,8170,8175,8179,8183,8187,8191,8195,8200,8204,8209,8213,8217,8221,8226,8230,8235],{"type":173,"tag":1255,"props":8162,"children":8163},{"style":1763},[8164],{"type":178,"value":8165},"        typeArgumentTypes",{"type":173,"tag":1255,"props":8167,"children":8168},{"style":1409},[8169],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8171,"children":8172},{"style":1710},[8173],{"type":178,"value":8174}," inferTypeArguments",{"type":173,"tag":1255,"props":8176,"children":8177},{"style":2811},[8178],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8180,"children":8181},{"style":1763},[8182],{"type":178,"value":2407},{"type":173,"tag":1255,"props":8184,"children":8185},{"style":1286},[8186],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8188,"children":8189},{"style":1763},[8190],{"type":178,"value":7964},{"type":173,"tag":1255,"props":8192,"children":8193},{"style":1286},[8194],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8196,"children":8197},{"style":1763},[8198],{"type":178,"value":8199}," args",{"type":173,"tag":1255,"props":8201,"children":8202},{"style":1286},[8203],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8205,"children":8206},{"style":1763},[8207],{"type":178,"value":8208}," argCheckMode",{"type":173,"tag":1255,"props":8210,"children":8211},{"style":1409},[8212],{"type":178,"value":2212},{"type":173,"tag":1255,"props":8214,"children":8215},{"style":1763},[8216],{"type":178,"value":3975},{"type":173,"tag":1255,"props":8218,"children":8219},{"style":1286},[8220],{"type":178,"value":833},{"type":173,"tag":1255,"props":8222,"children":8223},{"style":1763},[8224],{"type":178,"value":8225},"SkipGenericFunctions",{"type":173,"tag":1255,"props":8227,"children":8228},{"style":1286},[8229],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8231,"children":8232},{"style":1763},[8233],{"type":178,"value":8234}," inferenceContext",{"type":173,"tag":1255,"props":8236,"children":8237},{"style":2811},[8238],{"type":178,"value":2667},{"type":173,"tag":1255,"props":8240,"children":8241},{"class":1257,"line":1936},[8242,8247,8252,8256,8260,8264,8268,8272,8276,8281,8285,8289,8293,8297,8301,8305,8309],{"type":173,"tag":1255,"props":8243,"children":8244},{"style":1763},[8245],{"type":178,"value":8246},"        argCheckMode",{"type":173,"tag":1255,"props":8248,"children":8249},{"style":1409},[8250],{"type":178,"value":8251}," |=",{"type":173,"tag":1255,"props":8253,"children":8254},{"style":1763},[8255],{"type":178,"value":8234},{"type":173,"tag":1255,"props":8257,"children":8258},{"style":1286},[8259],{"type":178,"value":833},{"type":173,"tag":1255,"props":8261,"children":8262},{"style":1763},[8263],{"type":178,"value":3310},{"type":173,"tag":1255,"props":8265,"children":8266},{"style":1409},[8267],{"type":178,"value":3226},{"type":173,"tag":1255,"props":8269,"children":8270},{"style":1763},[8271],{"type":178,"value":8127},{"type":173,"tag":1255,"props":8273,"children":8274},{"style":1286},[8275],{"type":178,"value":833},{"type":173,"tag":1255,"props":8277,"children":8278},{"style":1763},[8279],{"type":178,"value":8280},"SkippedGenericFunction",{"type":173,"tag":1255,"props":8282,"children":8283},{"style":1409},[8284],{"type":178,"value":1771},{"type":173,"tag":1255,"props":8286,"children":8287},{"style":1763},[8288],{"type":178,"value":3975},{"type":173,"tag":1255,"props":8290,"children":8291},{"style":1286},[8292],{"type":178,"value":833},{"type":173,"tag":1255,"props":8294,"children":8295},{"style":1763},[8296],{"type":178,"value":8225},{"type":173,"tag":1255,"props":8298,"children":8299},{"style":1409},[8300],{"type":178,"value":1781},{"type":173,"tag":1255,"props":8302,"children":8303},{"style":1763},[8304],{"type":178,"value":3975},{"type":173,"tag":1255,"props":8306,"children":8307},{"style":1286},[8308],{"type":178,"value":833},{"type":173,"tag":1255,"props":8310,"children":8311},{"style":1763},[8312],{"type":178,"value":8313},"Normal\n",{"type":173,"tag":1255,"props":8315,"children":8316},{"class":1257,"line":1945},[8317],{"type":173,"tag":1255,"props":8318,"children":8319},{"style":1286},[8320],{"type":178,"value":5921},{"type":173,"tag":1255,"props":8322,"children":8323},{"class":1257,"line":1967},[8324],{"type":173,"tag":1255,"props":8325,"children":8326},{"style":1286},[8327],{"type":178,"value":2881},{"type":173,"tag":1255,"props":8329,"children":8330},{"class":1257,"line":1976},[8331],{"type":173,"tag":1255,"props":8332,"children":8333},{"style":1286},[8334],{"type":178,"value":1362},{"type":173,"tag":174,"props":8336,"children":8337},{},[8338],{"type":178,"value":8339},"日常代码我们常提到 TS 会根据上下文做类型推断，这里的“上下文”也就是 contextualType。contextualType 容易和 inferenceContext 混淆，这里有必要澄清一下。",{"type":173,"tag":174,"props":8341,"children":8342},{},[8343],{"type":178,"value":8344},"contextualType 指的是根据上下文推断出来的类型，而 inferenceContext 则是推断类型时，即时依赖的上下文信息，以下代码举例：",{"type":173,"tag":1245,"props":8346,"children":8348},{"className":1247,"code":8347,"language":1249,"meta":166,"style":166},"let fn: \u003CT>(x: T) => T = (x) => x + 1\nfn(42)\n",[8349],{"type":173,"tag":346,"props":8350,"children":8351},{"__ignoreMap":166},[8352,8440],{"type":173,"tag":1255,"props":8353,"children":8354},{"class":1257,"line":1258},[8355,8359,8364,8368,8372,8376,8380,8384,8388,8393,8397,8401,8405,8409,8413,8417,8421,8425,8430,8435],{"type":173,"tag":1255,"props":8356,"children":8357},{"style":1274},[8358],{"type":178,"value":6208},{"type":173,"tag":1255,"props":8360,"children":8362},{"style":8361},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[8363],{"type":178,"value":2601},{"type":173,"tag":1255,"props":8365,"children":8366},{"style":1409},[8367],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8369,"children":8370},{"style":1286},[8371],{"type":178,"value":7918},{"type":173,"tag":1255,"props":8373,"children":8374},{"style":1280},[8375],{"type":178,"value":6853},{"type":173,"tag":1255,"props":8377,"children":8378},{"style":1286},[8379],{"type":178,"value":6858},{"type":173,"tag":1255,"props":8381,"children":8382},{"style":1721},[8383],{"type":178,"value":2610},{"type":173,"tag":1255,"props":8385,"children":8386},{"style":1409},[8387],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8389,"children":8390},{"style":1280},[8391],{"type":178,"value":8392}," T",{"type":173,"tag":1255,"props":8394,"children":8395},{"style":1286},[8396],{"type":178,"value":1739},{"type":173,"tag":1255,"props":8398,"children":8399},{"style":1274},[8400],{"type":178,"value":2783},{"type":173,"tag":1255,"props":8402,"children":8403},{"style":1280},[8404],{"type":178,"value":8392},{"type":173,"tag":1255,"props":8406,"children":8407},{"style":1409},[8408],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8410,"children":8411},{"style":1286},[8412],{"type":178,"value":2973},{"type":173,"tag":1255,"props":8414,"children":8415},{"style":1721},[8416],{"type":178,"value":2610},{"type":173,"tag":1255,"props":8418,"children":8419},{"style":1286},[8420],{"type":178,"value":1739},{"type":173,"tag":1255,"props":8422,"children":8423},{"style":1274},[8424],{"type":178,"value":2783},{"type":173,"tag":1255,"props":8426,"children":8427},{"style":1763},[8428],{"type":178,"value":8429}," x ",{"type":173,"tag":1255,"props":8431,"children":8432},{"style":1409},[8433],{"type":178,"value":8434},"+",{"type":173,"tag":1255,"props":8436,"children":8437},{"style":1415},[8438],{"type":178,"value":8439}," 1\n",{"type":173,"tag":1255,"props":8441,"children":8442},{"class":1257,"line":1292},[8443,8448,8452,8457],{"type":173,"tag":1255,"props":8444,"children":8445},{"style":1710},[8446],{"type":178,"value":8447},"fn",{"type":173,"tag":1255,"props":8449,"children":8450},{"style":1763},[8451],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8453,"children":8454},{"style":1415},[8455],{"type":178,"value":8456},"42",{"type":173,"tag":1255,"props":8458,"children":8459},{"style":1763},[8460],{"type":178,"value":2667},{"type":173,"tag":174,"props":8462,"children":8463},{},[8464,8466,8472,8474,8480,8482,8488],{"type":178,"value":8465},"上代码中 ",{"type":173,"tag":346,"props":8467,"children":8469},{"className":8468},[],[8470],{"type":178,"value":8471},"(x) => x + 1",{"type":178,"value":8473}," 的 contextualType 就是 ",{"type":173,"tag":346,"props":8475,"children":8477},{"className":8476},[],[8478],{"type":178,"value":8479},"\u003CT>(x: T) => T",{"type":178,"value":8481},"，因为声明的变量类型明确规定了。而上代码的 ",{"type":173,"tag":346,"props":8483,"children":8485},{"className":8484},[],[8486],{"type":178,"value":8487},"fn(42)",{"type":178,"value":8489}," 的调用中，T 根据参数 42 推断成 number 则是推断时 inferenceContext 的一部分。",{"type":173,"tag":174,"props":8491,"children":8492},{},[8493],{"type":178,"value":8494},"回到代码。实际上，尽管 f2 的泛型推断调用了 inferTypeArguments 函数，但是没有涉及到 TS 编译器类型推断的核心（inferTypes 调用），主要是因为实参 2 对应的参数 x 的推断不需要泛型的参与。见 inferTypeArguments，仅当 paramType 包含可推断的类型变量时，才会调用 inferTypes 函数进行类型推断。",{"type":173,"tag":1245,"props":8496,"children":8498},{"className":1247,"code":8497,"language":1249,"meta":166,"style":166},"function inferTypeArguments(node: CallLikeExpression, signature: Signature, args: readonly Expression[], checkMode: CheckMode, context: InferenceContext): Type[] {\n  for (let i = 0; i \u003C argCount; i++) {\n    const arg = args[i]\n    if (arg.kind !== SyntaxKind.OmittedExpression) {\n      const paramType = getTypeAtPosition(signature, i)\n      if (couldContainTypeVariables(paramType)) {\n        //... inferTypes here\n      }\n    }\n  }\n  return getInferredTypes(context)\n}\n",[8499],{"type":173,"tag":346,"props":8500,"children":8501},{"__ignoreMap":166},[8502,8623,8688,8721,8770,8811,8845,8853,8861,8868,8875,8900],{"type":173,"tag":1255,"props":8503,"children":8504},{"class":1257,"line":1258},[8505,8509,8513,8517,8521,8525,8529,8533,8537,8541,8545,8549,8553,8557,8561,8565,8569,8573,8577,8581,8585,8589,8594,8598,8603,8607,8611,8615,8619],{"type":173,"tag":1255,"props":8506,"children":8507},{"style":1274},[8508],{"type":178,"value":1707},{"type":173,"tag":1255,"props":8510,"children":8511},{"style":1710},[8512],{"type":178,"value":8174},{"type":173,"tag":1255,"props":8514,"children":8515},{"style":1286},[8516],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8518,"children":8519},{"style":1721},[8520],{"type":178,"value":2407},{"type":173,"tag":1255,"props":8522,"children":8523},{"style":1409},[8524],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8526,"children":8527},{"style":1280},[8528],{"type":178,"value":7357},{"type":173,"tag":1255,"props":8530,"children":8531},{"style":1286},[8532],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8534,"children":8535},{"style":1721},[8536],{"type":178,"value":6584},{"type":173,"tag":1255,"props":8538,"children":8539},{"style":1409},[8540],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8542,"children":8543},{"style":1280},[8544],{"type":178,"value":6446},{"type":173,"tag":1255,"props":8546,"children":8547},{"style":1286},[8548],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8550,"children":8551},{"style":1721},[8552],{"type":178,"value":8199},{"type":173,"tag":1255,"props":8554,"children":8555},{"style":1409},[8556],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8558,"children":8559},{"style":1268},[8560],{"type":178,"value":7375},{"type":173,"tag":1255,"props":8562,"children":8563},{"style":1280},[8564],{"type":178,"value":4302},{"type":173,"tag":1255,"props":8566,"children":8567},{"style":1763},[8568],{"type":178,"value":7384},{"type":173,"tag":1255,"props":8570,"children":8571},{"style":1286},[8572],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8574,"children":8575},{"style":1721},[8576],{"type":178,"value":4201},{"type":173,"tag":1255,"props":8578,"children":8579},{"style":1409},[8580],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8582,"children":8583},{"style":1280},[8584],{"type":178,"value":3975},{"type":173,"tag":1255,"props":8586,"children":8587},{"style":1286},[8588],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8590,"children":8591},{"style":1721},[8592],{"type":178,"value":8593}," context",{"type":173,"tag":1255,"props":8595,"children":8596},{"style":1409},[8597],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8599,"children":8600},{"style":1280},[8601],{"type":178,"value":8602}," InferenceContext",{"type":173,"tag":1255,"props":8604,"children":8605},{"style":1286},[8606],{"type":178,"value":1739},{"type":173,"tag":1255,"props":8608,"children":8609},{"style":1409},[8610],{"type":178,"value":1596},{"type":173,"tag":1255,"props":8612,"children":8613},{"style":1280},[8614],{"type":178,"value":1748},{"type":173,"tag":1255,"props":8616,"children":8617},{"style":1763},[8618],{"type":178,"value":7406},{"type":173,"tag":1255,"props":8620,"children":8621},{"style":1286},[8622],{"type":178,"value":2996},{"type":173,"tag":1255,"props":8624,"children":8625},{"class":1257,"line":1292},[8626,8630,8634,8638,8643,8647,8651,8655,8659,8663,8668,8672,8676,8680,8684],{"type":173,"tag":1255,"props":8627,"children":8628},{"style":1262},[8629],{"type":178,"value":7883},{"type":173,"tag":1255,"props":8631,"children":8632},{"style":2811},[8633],{"type":178,"value":2973},{"type":173,"tag":1255,"props":8635,"children":8636},{"style":1274},[8637],{"type":178,"value":6208},{"type":173,"tag":1255,"props":8639,"children":8640},{"style":1763},[8641],{"type":178,"value":8642}," i",{"type":173,"tag":1255,"props":8644,"children":8645},{"style":1409},[8646],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8648,"children":8649},{"style":1415},[8650],{"type":178,"value":1418},{"type":173,"tag":1255,"props":8652,"children":8653},{"style":1286},[8654],{"type":178,"value":7909},{"type":173,"tag":1255,"props":8656,"children":8657},{"style":1763},[8658],{"type":178,"value":8642},{"type":173,"tag":1255,"props":8660,"children":8661},{"style":1409},[8662],{"type":178,"value":7918},{"type":173,"tag":1255,"props":8664,"children":8665},{"style":1763},[8666],{"type":178,"value":8667}," argCount",{"type":173,"tag":1255,"props":8669,"children":8670},{"style":1286},[8671],{"type":178,"value":7909},{"type":173,"tag":1255,"props":8673,"children":8674},{"style":1763},[8675],{"type":178,"value":8642},{"type":173,"tag":1255,"props":8677,"children":8678},{"style":1409},[8679],{"type":178,"value":7944},{"type":173,"tag":1255,"props":8681,"children":8682},{"style":2811},[8683],{"type":178,"value":2856},{"type":173,"tag":1255,"props":8685,"children":8686},{"style":1286},[8687],{"type":178,"value":2996},{"type":173,"tag":1255,"props":8689,"children":8690},{"class":1257,"line":1307},[8691,8695,8700,8704,8708,8712,8717],{"type":173,"tag":1255,"props":8692,"children":8693},{"style":1274},[8694],{"type":178,"value":4153},{"type":173,"tag":1255,"props":8696,"children":8697},{"style":1296},[8698],{"type":178,"value":8699}," arg",{"type":173,"tag":1255,"props":8701,"children":8702},{"style":1409},[8703],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8705,"children":8706},{"style":1763},[8707],{"type":178,"value":8199},{"type":173,"tag":1255,"props":8709,"children":8710},{"style":2811},[8711],{"type":178,"value":7977},{"type":173,"tag":1255,"props":8713,"children":8714},{"style":1763},[8715],{"type":178,"value":8716},"i",{"type":173,"tag":1255,"props":8718,"children":8719},{"style":2811},[8720],{"type":178,"value":3477},{"type":173,"tag":1255,"props":8722,"children":8723},{"class":1257,"line":1320},[8724,8728,8732,8737,8741,8745,8749,8753,8757,8762,8766],{"type":173,"tag":1255,"props":8725,"children":8726},{"style":1262},[8727],{"type":178,"value":5661},{"type":173,"tag":1255,"props":8729,"children":8730},{"style":2811},[8731],{"type":178,"value":2973},{"type":173,"tag":1255,"props":8733,"children":8734},{"style":1763},[8735],{"type":178,"value":8736},"arg",{"type":173,"tag":1255,"props":8738,"children":8739},{"style":1286},[8740],{"type":178,"value":833},{"type":173,"tag":1255,"props":8742,"children":8743},{"style":1763},[8744],{"type":178,"value":2462},{"type":173,"tag":1255,"props":8746,"children":8747},{"style":1409},[8748],{"type":178,"value":4410},{"type":173,"tag":1255,"props":8750,"children":8751},{"style":1763},[8752],{"type":178,"value":1283},{"type":173,"tag":1255,"props":8754,"children":8755},{"style":1286},[8756],{"type":178,"value":833},{"type":173,"tag":1255,"props":8758,"children":8759},{"style":1763},[8760],{"type":178,"value":8761},"OmittedExpression",{"type":173,"tag":1255,"props":8763,"children":8764},{"style":2811},[8765],{"type":178,"value":2856},{"type":173,"tag":1255,"props":8767,"children":8768},{"style":1286},[8769],{"type":178,"value":2996},{"type":173,"tag":1255,"props":8771,"children":8772},{"class":1257,"line":1333},[8773,8777,8782,8786,8791,8795,8799,8803,8807],{"type":173,"tag":1255,"props":8774,"children":8775},{"style":1274},[8776],{"type":178,"value":2795},{"type":173,"tag":1255,"props":8778,"children":8779},{"style":1296},[8780],{"type":178,"value":8781}," paramType",{"type":173,"tag":1255,"props":8783,"children":8784},{"style":1409},[8785],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8787,"children":8788},{"style":1710},[8789],{"type":178,"value":8790}," getTypeAtPosition",{"type":173,"tag":1255,"props":8792,"children":8793},{"style":2811},[8794],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8796,"children":8797},{"style":1763},[8798],{"type":178,"value":6437},{"type":173,"tag":1255,"props":8800,"children":8801},{"style":1286},[8802],{"type":178,"value":2353},{"type":173,"tag":1255,"props":8804,"children":8805},{"style":1763},[8806],{"type":178,"value":8642},{"type":173,"tag":1255,"props":8808,"children":8809},{"style":2811},[8810],{"type":178,"value":2667},{"type":173,"tag":1255,"props":8812,"children":8813},{"class":1257,"line":1346},[8814,8819,8823,8828,8832,8837,8841],{"type":173,"tag":1255,"props":8815,"children":8816},{"style":1262},[8817],{"type":178,"value":8818},"      if",{"type":173,"tag":1255,"props":8820,"children":8821},{"style":2811},[8822],{"type":178,"value":2973},{"type":173,"tag":1255,"props":8824,"children":8825},{"style":1710},[8826],{"type":178,"value":8827},"couldContainTypeVariables",{"type":173,"tag":1255,"props":8829,"children":8830},{"style":2811},[8831],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8833,"children":8834},{"style":1763},[8835],{"type":178,"value":8836},"paramType",{"type":173,"tag":1255,"props":8838,"children":8839},{"style":2811},[8840],{"type":178,"value":2991},{"type":173,"tag":1255,"props":8842,"children":8843},{"style":1286},[8844],{"type":178,"value":2996},{"type":173,"tag":1255,"props":8846,"children":8847},{"class":1257,"line":1356},[8848],{"type":173,"tag":1255,"props":8849,"children":8850},{"style":1350},[8851],{"type":178,"value":8852},"        //... inferTypes here\n",{"type":173,"tag":1255,"props":8854,"children":8855},{"class":1257,"line":1936},[8856],{"type":173,"tag":1255,"props":8857,"children":8858},{"style":1286},[8859],{"type":178,"value":8860},"      }\n",{"type":173,"tag":1255,"props":8862,"children":8863},{"class":1257,"line":1945},[8864],{"type":173,"tag":1255,"props":8865,"children":8866},{"style":1286},[8867],{"type":178,"value":5921},{"type":173,"tag":1255,"props":8869,"children":8870},{"class":1257,"line":1967},[8871],{"type":173,"tag":1255,"props":8872,"children":8873},{"style":1286},[8874],{"type":178,"value":2881},{"type":173,"tag":1255,"props":8876,"children":8877},{"class":1257,"line":1976},[8878,8882,8887,8891,8896],{"type":173,"tag":1255,"props":8879,"children":8880},{"style":1262},[8881],{"type":178,"value":1760},{"type":173,"tag":1255,"props":8883,"children":8884},{"style":1710},[8885],{"type":178,"value":8886}," getInferredTypes",{"type":173,"tag":1255,"props":8888,"children":8889},{"style":2811},[8890],{"type":178,"value":1718},{"type":173,"tag":1255,"props":8892,"children":8893},{"style":1763},[8894],{"type":178,"value":8895},"context",{"type":173,"tag":1255,"props":8897,"children":8898},{"style":2811},[8899],{"type":178,"value":2667},{"type":173,"tag":1255,"props":8901,"children":8902},{"class":1257,"line":1999},[8903],{"type":173,"tag":1255,"props":8904,"children":8905},{"style":1286},[8906],{"type":178,"value":1362},{"type":173,"tag":174,"props":8908,"children":8909},{},[8910],{"type":178,"value":8911},"怎么算参数包含可推断的类型变量呢？简单来说，可实例化的类型就算，在 TypeFlags 的定义中可以找到编译器是如何确认某种类型是可实例化的（TypeFlags.Instantiable）。",{"type":173,"tag":1245,"props":8913,"children":8915},{"className":1247,"code":8914,"language":1249,"meta":166,"style":166},"type TypeFlags = {\n  //...\n  InstantiableNonPrimitive = TypeVariable | Conditional | Substitution,\n  InstantiablePrimitive = Index | TemplateLiteral | StringMapping,\n  Instantiable = InstantiableNonPrimitive | InstantiablePrimitive,\n  //...\n}\n",[8916],{"type":173,"tag":346,"props":8917,"children":8918},{"__ignoreMap":166},[8919,8938,8945,8984,9023,9053,9060],{"type":173,"tag":1255,"props":8920,"children":8921},{"class":1257,"line":1258},[8922,8926,8930,8934],{"type":173,"tag":1255,"props":8923,"children":8924},{"style":1274},[8925],{"type":178,"value":868},{"type":173,"tag":1255,"props":8927,"children":8928},{"style":1280},[8929],{"type":178,"value":5686},{"type":173,"tag":1255,"props":8931,"children":8932},{"style":1409},[8933],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8935,"children":8936},{"style":1286},[8937],{"type":178,"value":1289},{"type":173,"tag":1255,"props":8939,"children":8940},{"class":1257,"line":1292},[8941],{"type":173,"tag":1255,"props":8942,"children":8943},{"style":1350},[8944],{"type":178,"value":1353},{"type":173,"tag":1255,"props":8946,"children":8947},{"class":1257,"line":1307},[8948,8953,8957,8962,8966,8971,8975,8980],{"type":173,"tag":1255,"props":8949,"children":8950},{"style":1588},[8951],{"type":178,"value":8952},"  InstantiableNonPrimitive",{"type":173,"tag":1255,"props":8954,"children":8955},{"style":1409},[8956],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8958,"children":8959},{"style":1763},[8960],{"type":178,"value":8961}," TypeVariable ",{"type":173,"tag":1255,"props":8963,"children":8964},{"style":1409},[8965],{"type":178,"value":7411},{"type":173,"tag":1255,"props":8967,"children":8968},{"style":1763},[8969],{"type":178,"value":8970}," Conditional ",{"type":173,"tag":1255,"props":8972,"children":8973},{"style":1409},[8974],{"type":178,"value":7411},{"type":173,"tag":1255,"props":8976,"children":8977},{"style":1763},[8978],{"type":178,"value":8979}," Substitution",{"type":173,"tag":1255,"props":8981,"children":8982},{"style":1286},[8983],{"type":178,"value":1304},{"type":173,"tag":1255,"props":8985,"children":8986},{"class":1257,"line":1320},[8987,8992,8996,9001,9005,9010,9014,9019],{"type":173,"tag":1255,"props":8988,"children":8989},{"style":1588},[8990],{"type":178,"value":8991},"  InstantiablePrimitive",{"type":173,"tag":1255,"props":8993,"children":8994},{"style":1409},[8995],{"type":178,"value":2649},{"type":173,"tag":1255,"props":8997,"children":8998},{"style":1763},[8999],{"type":178,"value":9000}," Index ",{"type":173,"tag":1255,"props":9002,"children":9003},{"style":1409},[9004],{"type":178,"value":7411},{"type":173,"tag":1255,"props":9006,"children":9007},{"style":1763},[9008],{"type":178,"value":9009}," TemplateLiteral ",{"type":173,"tag":1255,"props":9011,"children":9012},{"style":1409},[9013],{"type":178,"value":7411},{"type":173,"tag":1255,"props":9015,"children":9016},{"style":1763},[9017],{"type":178,"value":9018}," StringMapping",{"type":173,"tag":1255,"props":9020,"children":9021},{"style":1286},[9022],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9024,"children":9025},{"class":1257,"line":1333},[9026,9031,9035,9040,9044,9049],{"type":173,"tag":1255,"props":9027,"children":9028},{"style":1588},[9029],{"type":178,"value":9030},"  Instantiable",{"type":173,"tag":1255,"props":9032,"children":9033},{"style":1409},[9034],{"type":178,"value":2649},{"type":173,"tag":1255,"props":9036,"children":9037},{"style":1763},[9038],{"type":178,"value":9039}," InstantiableNonPrimitive ",{"type":173,"tag":1255,"props":9041,"children":9042},{"style":1409},[9043],{"type":178,"value":7411},{"type":173,"tag":1255,"props":9045,"children":9046},{"style":1763},[9047],{"type":178,"value":9048}," InstantiablePrimitive",{"type":173,"tag":1255,"props":9050,"children":9051},{"style":1286},[9052],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9054,"children":9055},{"class":1257,"line":1346},[9056],{"type":173,"tag":1255,"props":9057,"children":9058},{"style":1350},[9059],{"type":178,"value":1353},{"type":173,"tag":1255,"props":9061,"children":9062},{"class":1257,"line":1356},[9063],{"type":173,"tag":1255,"props":9064,"children":9065},{"style":1286},[9066],{"type":178,"value":1362},{"type":173,"tag":174,"props":9068,"children":9069},{},[9070],{"type":178,"value":9071},"为了给参数取得一个对应的可实例化类型，以下以对 f2 稍加修改得到的新代码 f3 为例。",{"type":173,"tag":1245,"props":9073,"children":9075},{"className":1247,"code":9074,"language":1249,"meta":166,"style":166},"declare function f3\u003CT>(x: T): string\nconst x3 = f3(3)\n",[9076],{"type":173,"tag":346,"props":9077,"children":9078},{"__ignoreMap":166},[9079,9131],{"type":173,"tag":1255,"props":9080,"children":9081},{"class":1257,"line":1258},[9082,9086,9090,9095,9099,9103,9107,9111,9115,9119,9123,9127],{"type":173,"tag":1255,"props":9083,"children":9084},{"style":1268},[9085],{"type":178,"value":2591},{"type":173,"tag":1255,"props":9087,"children":9088},{"style":1274},[9089],{"type":178,"value":2596},{"type":173,"tag":1255,"props":9091,"children":9092},{"style":1710},[9093],{"type":178,"value":9094}," f3",{"type":173,"tag":1255,"props":9096,"children":9097},{"style":1286},[9098],{"type":178,"value":2343},{"type":173,"tag":1255,"props":9100,"children":9101},{"style":1280},[9102],{"type":178,"value":6853},{"type":173,"tag":1255,"props":9104,"children":9105},{"style":1286},[9106],{"type":178,"value":6858},{"type":173,"tag":1255,"props":9108,"children":9109},{"style":1721},[9110],{"type":178,"value":2610},{"type":173,"tag":1255,"props":9112,"children":9113},{"style":1409},[9114],{"type":178,"value":1596},{"type":173,"tag":1255,"props":9116,"children":9117},{"style":1280},[9118],{"type":178,"value":8392},{"type":173,"tag":1255,"props":9120,"children":9121},{"style":1286},[9122],{"type":178,"value":1739},{"type":173,"tag":1255,"props":9124,"children":9125},{"style":1409},[9126],{"type":178,"value":1596},{"type":173,"tag":1255,"props":9128,"children":9129},{"style":1731},[9130],{"type":178,"value":2631},{"type":173,"tag":1255,"props":9132,"children":9133},{"class":1257,"line":1292},[9134,9138,9143,9147,9151,9155,9160],{"type":173,"tag":1255,"props":9135,"children":9136},{"style":1274},[9137],{"type":178,"value":2639},{"type":173,"tag":1255,"props":9139,"children":9140},{"style":1296},[9141],{"type":178,"value":9142}," x3",{"type":173,"tag":1255,"props":9144,"children":9145},{"style":1409},[9146],{"type":178,"value":2649},{"type":173,"tag":1255,"props":9148,"children":9149},{"style":1710},[9150],{"type":178,"value":9094},{"type":173,"tag":1255,"props":9152,"children":9153},{"style":1763},[9154],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9156,"children":9157},{"style":1415},[9158],{"type":178,"value":9159},"3",{"type":173,"tag":1255,"props":9161,"children":9162},{"style":1763},[9163],{"type":178,"value":2667},{"type":173,"tag":174,"props":9165,"children":9166},{},[9167],{"type":178,"value":9168},"实参 3 对应的参数 x 的类型就是一个可实例化的类型。于是乎，inferTypeArguments 中拿到实参类型 argType 后就进入了 inferTypes 类型推断过程。",{"type":173,"tag":1245,"props":9170,"children":9172},{"className":1247,"code":9171,"language":1249,"meta":166,"style":166},"if (couldContainTypeVariables(paramType)) {\n  const argType = checkExpressionWithContextualType(arg, paramType, context, checkMode)\n  inferTypes(context.inferences, argType, paramType)\n}\n",[9173],{"type":173,"tag":346,"props":9174,"children":9175},{"__ignoreMap":166},[9176,9201,9258,9303],{"type":173,"tag":1255,"props":9177,"children":9178},{"class":1257,"line":1258},[9179,9184,9188,9192,9197],{"type":173,"tag":1255,"props":9180,"children":9181},{"style":1262},[9182],{"type":178,"value":9183},"if",{"type":173,"tag":1255,"props":9185,"children":9186},{"style":1763},[9187],{"type":178,"value":2973},{"type":173,"tag":1255,"props":9189,"children":9190},{"style":1710},[9191],{"type":178,"value":8827},{"type":173,"tag":1255,"props":9193,"children":9194},{"style":1763},[9195],{"type":178,"value":9196},"(paramType)) ",{"type":173,"tag":1255,"props":9198,"children":9199},{"style":1286},[9200],{"type":178,"value":2996},{"type":173,"tag":1255,"props":9202,"children":9203},{"class":1257,"line":1292},[9204,9208,9213,9217,9222,9226,9230,9234,9238,9242,9246,9250,9254],{"type":173,"tag":1255,"props":9205,"children":9206},{"style":1274},[9207],{"type":178,"value":3179},{"type":173,"tag":1255,"props":9209,"children":9210},{"style":1296},[9211],{"type":178,"value":9212}," argType",{"type":173,"tag":1255,"props":9214,"children":9215},{"style":1409},[9216],{"type":178,"value":2649},{"type":173,"tag":1255,"props":9218,"children":9219},{"style":1710},[9220],{"type":178,"value":9221}," checkExpressionWithContextualType",{"type":173,"tag":1255,"props":9223,"children":9224},{"style":2811},[9225],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9227,"children":9228},{"style":1763},[9229],{"type":178,"value":8736},{"type":173,"tag":1255,"props":9231,"children":9232},{"style":1286},[9233],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9235,"children":9236},{"style":1763},[9237],{"type":178,"value":8781},{"type":173,"tag":1255,"props":9239,"children":9240},{"style":1286},[9241],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9243,"children":9244},{"style":1763},[9245],{"type":178,"value":8593},{"type":173,"tag":1255,"props":9247,"children":9248},{"style":1286},[9249],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9251,"children":9252},{"style":1763},[9253],{"type":178,"value":4201},{"type":173,"tag":1255,"props":9255,"children":9256},{"style":2811},[9257],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9259,"children":9260},{"class":1257,"line":1307},[9261,9266,9270,9274,9278,9283,9287,9291,9295,9299],{"type":173,"tag":1255,"props":9262,"children":9263},{"style":1710},[9264],{"type":178,"value":9265},"  inferTypes",{"type":173,"tag":1255,"props":9267,"children":9268},{"style":2811},[9269],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9271,"children":9272},{"style":1763},[9273],{"type":178,"value":8895},{"type":173,"tag":1255,"props":9275,"children":9276},{"style":1286},[9277],{"type":178,"value":833},{"type":173,"tag":1255,"props":9279,"children":9280},{"style":1763},[9281],{"type":178,"value":9282},"inferences",{"type":173,"tag":1255,"props":9284,"children":9285},{"style":1286},[9286],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9288,"children":9289},{"style":1763},[9290],{"type":178,"value":9212},{"type":173,"tag":1255,"props":9292,"children":9293},{"style":1286},[9294],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9296,"children":9297},{"style":1763},[9298],{"type":178,"value":8781},{"type":173,"tag":1255,"props":9300,"children":9301},{"style":2811},[9302],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9304,"children":9305},{"class":1257,"line":1320},[9306],{"type":173,"tag":1255,"props":9307,"children":9308},{"style":1286},[9309],{"type":178,"value":1362},{"type":173,"tag":174,"props":9311,"children":9312},{},[9313],{"type":178,"value":9314},"inferTypes 的逻辑比较复杂，在之后会详细介绍。对于 f3 而言，实参 3 的参数 x 的参数类型 T 的推断结果就是 number。此结果会保存到 context.inferences 中，供后续流程使用。",{"type":173,"tag":187,"props":9316,"children":9318},{"id":9317},"从一个简单的例子看类型推断分析infertypes",[9319],{"type":178,"value":9320},"从一个简单的例子看类型推断分析（inferTypes）？",{"type":173,"tag":174,"props":9322,"children":9323},{},[9324],{"type":178,"value":9325},"TODO",{"type":173,"tag":181,"props":9327,"children":9329},{"id":9328},"transformers",[9330],{"type":178,"value":9331},"Transformers",{"type":173,"tag":187,"props":9333,"children":9335},{"id":9334},"转换器管道是如何工作的",[9336],{"type":178,"value":9337},"转换器管道是如何工作的？",{"type":173,"tag":174,"props":9339,"children":9340},{},[9341],{"type":178,"value":9342},"输出文件时会调用转换器管道转换代码。上文提到，输出操作是由 Program 统筹执行的，对应代码：",{"type":173,"tag":1245,"props":9344,"children":9346},{"className":1247,"code":9345,"language":1249,"meta":166,"style":166},"function emitWorker () {\n  const emitResult = typeChecker.runWithCancellationToken(\n    cancellationToken,\n    () =>\n      emitFiles(\n        emitResolver,\n        getEmitHost(writeFileCallback),\n        sourceFile,\n        getTransformers(options, customTransformers, emitOnly),\n        emitOnly,\n        /*onlyBuildInfo*/ false,\n        forceDtsEmit,\n        skipBuildInfo,\n      ),\n  )\n}\n",[9347],{"type":173,"tag":346,"props":9348,"children":9349},{"__ignoreMap":166},[9350,9371,9405,9417,9430,9442,9454,9479,9491,9534,9546,9563,9575,9587,9599,9607],{"type":173,"tag":1255,"props":9351,"children":9352},{"class":1257,"line":1258},[9353,9357,9362,9367],{"type":173,"tag":1255,"props":9354,"children":9355},{"style":1274},[9356],{"type":178,"value":1707},{"type":173,"tag":1255,"props":9358,"children":9359},{"style":1710},[9360],{"type":178,"value":9361}," emitWorker",{"type":173,"tag":1255,"props":9363,"children":9364},{"style":1286},[9365],{"type":178,"value":9366}," ()",{"type":173,"tag":1255,"props":9368,"children":9369},{"style":1286},[9370],{"type":178,"value":1289},{"type":173,"tag":1255,"props":9372,"children":9373},{"class":1257,"line":1292},[9374,9378,9383,9387,9392,9396,9401],{"type":173,"tag":1255,"props":9375,"children":9376},{"style":1274},[9377],{"type":178,"value":3179},{"type":173,"tag":1255,"props":9379,"children":9380},{"style":1296},[9381],{"type":178,"value":9382}," emitResult",{"type":173,"tag":1255,"props":9384,"children":9385},{"style":1409},[9386],{"type":178,"value":2649},{"type":173,"tag":1255,"props":9388,"children":9389},{"style":1763},[9390],{"type":178,"value":9391}," typeChecker",{"type":173,"tag":1255,"props":9393,"children":9394},{"style":1286},[9395],{"type":178,"value":833},{"type":173,"tag":1255,"props":9397,"children":9398},{"style":1710},[9399],{"type":178,"value":9400},"runWithCancellationToken",{"type":173,"tag":1255,"props":9402,"children":9403},{"style":2811},[9404],{"type":178,"value":3872},{"type":173,"tag":1255,"props":9406,"children":9407},{"class":1257,"line":1307},[9408,9413],{"type":173,"tag":1255,"props":9409,"children":9410},{"style":1763},[9411],{"type":178,"value":9412},"    cancellationToken",{"type":173,"tag":1255,"props":9414,"children":9415},{"style":1286},[9416],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9418,"children":9419},{"class":1257,"line":1320},[9420,9425],{"type":173,"tag":1255,"props":9421,"children":9422},{"style":1286},[9423],{"type":178,"value":9424},"    ()",{"type":173,"tag":1255,"props":9426,"children":9427},{"style":1274},[9428],{"type":178,"value":9429}," =>\n",{"type":173,"tag":1255,"props":9431,"children":9432},{"class":1257,"line":1333},[9433,9438],{"type":173,"tag":1255,"props":9434,"children":9435},{"style":1710},[9436],{"type":178,"value":9437},"      emitFiles",{"type":173,"tag":1255,"props":9439,"children":9440},{"style":2811},[9441],{"type":178,"value":3872},{"type":173,"tag":1255,"props":9443,"children":9444},{"class":1257,"line":1346},[9445,9450],{"type":173,"tag":1255,"props":9446,"children":9447},{"style":1763},[9448],{"type":178,"value":9449},"        emitResolver",{"type":173,"tag":1255,"props":9451,"children":9452},{"style":1286},[9453],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9455,"children":9456},{"class":1257,"line":1356},[9457,9462,9466,9471,9475],{"type":173,"tag":1255,"props":9458,"children":9459},{"style":1710},[9460],{"type":178,"value":9461},"        getEmitHost",{"type":173,"tag":1255,"props":9463,"children":9464},{"style":2811},[9465],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9467,"children":9468},{"style":1763},[9469],{"type":178,"value":9470},"writeFileCallback",{"type":173,"tag":1255,"props":9472,"children":9473},{"style":2811},[9474],{"type":178,"value":1739},{"type":173,"tag":1255,"props":9476,"children":9477},{"style":1286},[9478],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9480,"children":9481},{"class":1257,"line":1936},[9482,9487],{"type":173,"tag":1255,"props":9483,"children":9484},{"style":1763},[9485],{"type":178,"value":9486},"        sourceFile",{"type":173,"tag":1255,"props":9488,"children":9489},{"style":1286},[9490],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9492,"children":9493},{"class":1257,"line":1945},[9494,9499,9503,9508,9512,9517,9521,9526,9530],{"type":173,"tag":1255,"props":9495,"children":9496},{"style":1710},[9497],{"type":178,"value":9498},"        getTransformers",{"type":173,"tag":1255,"props":9500,"children":9501},{"style":2811},[9502],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9504,"children":9505},{"style":1763},[9506],{"type":178,"value":9507},"options",{"type":173,"tag":1255,"props":9509,"children":9510},{"style":1286},[9511],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9513,"children":9514},{"style":1763},[9515],{"type":178,"value":9516}," customTransformers",{"type":173,"tag":1255,"props":9518,"children":9519},{"style":1286},[9520],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9522,"children":9523},{"style":1763},[9524],{"type":178,"value":9525}," emitOnly",{"type":173,"tag":1255,"props":9527,"children":9528},{"style":2811},[9529],{"type":178,"value":1739},{"type":173,"tag":1255,"props":9531,"children":9532},{"style":1286},[9533],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9535,"children":9536},{"class":1257,"line":1967},[9537,9542],{"type":173,"tag":1255,"props":9538,"children":9539},{"style":1763},[9540],{"type":178,"value":9541},"        emitOnly",{"type":173,"tag":1255,"props":9543,"children":9544},{"style":1286},[9545],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9547,"children":9548},{"class":1257,"line":1976},[9549,9554,9559],{"type":173,"tag":1255,"props":9550,"children":9551},{"style":1350},[9552],{"type":178,"value":9553},"        /*onlyBuildInfo*/",{"type":173,"tag":1255,"props":9555,"children":9556},{"style":3793},[9557],{"type":178,"value":9558}," false",{"type":173,"tag":1255,"props":9560,"children":9561},{"style":1286},[9562],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9564,"children":9565},{"class":1257,"line":1999},[9566,9571],{"type":173,"tag":1255,"props":9567,"children":9568},{"style":1763},[9569],{"type":178,"value":9570},"        forceDtsEmit",{"type":173,"tag":1255,"props":9572,"children":9573},{"style":1286},[9574],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9576,"children":9577},{"class":1257,"line":2008},[9578,9583],{"type":173,"tag":1255,"props":9579,"children":9580},{"style":1763},[9581],{"type":178,"value":9582},"        skipBuildInfo",{"type":173,"tag":1255,"props":9584,"children":9585},{"style":1286},[9586],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9588,"children":9589},{"class":1257,"line":2030},[9590,9595],{"type":173,"tag":1255,"props":9591,"children":9592},{"style":2811},[9593],{"type":178,"value":9594},"      )",{"type":173,"tag":1255,"props":9596,"children":9597},{"style":1286},[9598],{"type":178,"value":1304},{"type":173,"tag":1255,"props":9600,"children":9601},{"class":1257,"line":2039},[9602],{"type":173,"tag":1255,"props":9603,"children":9604},{"style":2811},[9605],{"type":178,"value":9606},"  )\n",{"type":173,"tag":1255,"props":9608,"children":9609},{"class":1257,"line":2061},[9610],{"type":173,"tag":1255,"props":9611,"children":9612},{"style":1286},[9613],{"type":178,"value":1362},{"type":173,"tag":174,"props":9615,"children":9616},{},[9617,9619,9625,9627,9633],{"type":178,"value":9618},"转换器管道有 scriptTransformers 和 declarationTransformers 两种，分别对应代码生成和声明生成。ESNext、ES2021、ES2020 等不用版本的转换器被做成了插件，在编译时根据 ",{"type":173,"tag":346,"props":9620,"children":9622},{"className":9621},[],[9623],{"type":178,"value":9624},"compilerOptions",{"type":178,"value":9626}," 的 ",{"type":173,"tag":346,"props":9628,"children":9630},{"className":9629},[],[9631],{"type":178,"value":9632},"target",{"type":178,"value":9634}," 属性动态加载，输出前添加到转换器管道中，见以下代码。",{"type":173,"tag":1245,"props":9636,"children":9638},{"className":1247,"code":9637,"language":1249,"meta":166,"style":166},"function getScriptTransformers(compilerOptions: CompilerOptions, customTransformers?: CustomTransformers, emitOnly?: boolean | EmitOnly) {\n    const languageVersion = getEmitScriptTarget(compilerOptions)\n    const transformers: TransformerFactory\u003CSourceFile | Bundle>[] = []\n\n    transformers.push(transformTypeScript)\n    if (compilerOptions.experimentalDecorators) {\n        transformers.push(transformLegacyDecorators)\n    }\n    if (getJSXTransformEnabled(compilerOptions)) {\n        transformers.push(transformJsx)\n    }\n    if (languageVersion \u003C ScriptTarget.ESNext) {\n        transformers.push(transformESNext)\n    }\n    if (languageVersion \u003C ScriptTarget.ES2021) {\n        transformers.push(transformES2021)\n    }\n    if (languageVersion \u003C ScriptTarget.ES2020) {\n        transformers.push(transformES2020)\n    }\n    //...\n    return transformers\n}\n",[9639],{"type":173,"tag":346,"props":9640,"children":9641},{"__ignoreMap":166},[9642,9721,9754,9810,9818,9848,9880,9909,9916,9948,9976,9983,10025,10053,10060,10100,10128,10135,10175,10203,10210,10217,10229],{"type":173,"tag":1255,"props":9643,"children":9644},{"class":1257,"line":1258},[9645,9649,9654,9658,9662,9666,9671,9675,9679,9683,9688,9692,9696,9700,9704,9708,9713,9717],{"type":173,"tag":1255,"props":9646,"children":9647},{"style":1274},[9648],{"type":178,"value":1707},{"type":173,"tag":1255,"props":9650,"children":9651},{"style":1710},[9652],{"type":178,"value":9653}," getScriptTransformers",{"type":173,"tag":1255,"props":9655,"children":9656},{"style":1286},[9657],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9659,"children":9660},{"style":1721},[9661],{"type":178,"value":9624},{"type":173,"tag":1255,"props":9663,"children":9664},{"style":1409},[9665],{"type":178,"value":1596},{"type":173,"tag":1255,"props":9667,"children":9668},{"style":1280},[9669],{"type":178,"value":9670}," CompilerOptions",{"type":173,"tag":1255,"props":9672,"children":9673},{"style":1286},[9674],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9676,"children":9677},{"style":1721},[9678],{"type":178,"value":9516},{"type":173,"tag":1255,"props":9680,"children":9681},{"style":1409},[9682],{"type":178,"value":1923},{"type":173,"tag":1255,"props":9684,"children":9685},{"style":1280},[9686],{"type":178,"value":9687}," CustomTransformers",{"type":173,"tag":1255,"props":9689,"children":9690},{"style":1286},[9691],{"type":178,"value":2353},{"type":173,"tag":1255,"props":9693,"children":9694},{"style":1721},[9695],{"type":178,"value":9525},{"type":173,"tag":1255,"props":9697,"children":9698},{"style":1409},[9699],{"type":178,"value":1923},{"type":173,"tag":1255,"props":9701,"children":9702},{"style":1731},[9703],{"type":178,"value":1734},{"type":173,"tag":1255,"props":9705,"children":9706},{"style":1409},[9707],{"type":178,"value":2212},{"type":173,"tag":1255,"props":9709,"children":9710},{"style":1280},[9711],{"type":178,"value":9712}," EmitOnly",{"type":173,"tag":1255,"props":9714,"children":9715},{"style":1286},[9716],{"type":178,"value":1739},{"type":173,"tag":1255,"props":9718,"children":9719},{"style":1286},[9720],{"type":178,"value":1289},{"type":173,"tag":1255,"props":9722,"children":9723},{"class":1257,"line":1292},[9724,9728,9733,9737,9742,9746,9750],{"type":173,"tag":1255,"props":9725,"children":9726},{"style":1274},[9727],{"type":178,"value":4153},{"type":173,"tag":1255,"props":9729,"children":9730},{"style":1296},[9731],{"type":178,"value":9732}," languageVersion",{"type":173,"tag":1255,"props":9734,"children":9735},{"style":1409},[9736],{"type":178,"value":2649},{"type":173,"tag":1255,"props":9738,"children":9739},{"style":1710},[9740],{"type":178,"value":9741}," getEmitScriptTarget",{"type":173,"tag":1255,"props":9743,"children":9744},{"style":2811},[9745],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9747,"children":9748},{"style":1763},[9749],{"type":178,"value":9624},{"type":173,"tag":1255,"props":9751,"children":9752},{"style":2811},[9753],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9755,"children":9756},{"class":1257,"line":1307},[9757,9761,9766,9770,9775,9779,9783,9787,9792,9796,9800,9805],{"type":173,"tag":1255,"props":9758,"children":9759},{"style":1274},[9760],{"type":178,"value":4153},{"type":173,"tag":1255,"props":9762,"children":9763},{"style":1296},[9764],{"type":178,"value":9765}," transformers",{"type":173,"tag":1255,"props":9767,"children":9768},{"style":1409},[9769],{"type":178,"value":1596},{"type":173,"tag":1255,"props":9771,"children":9772},{"style":1280},[9773],{"type":178,"value":9774}," TransformerFactory",{"type":173,"tag":1255,"props":9776,"children":9777},{"style":1286},[9778],{"type":178,"value":2343},{"type":173,"tag":1255,"props":9780,"children":9781},{"style":1280},[9782],{"type":178,"value":403},{"type":173,"tag":1255,"props":9784,"children":9785},{"style":1409},[9786],{"type":178,"value":2212},{"type":173,"tag":1255,"props":9788,"children":9789},{"style":1280},[9790],{"type":178,"value":9791}," Bundle",{"type":173,"tag":1255,"props":9793,"children":9794},{"style":1286},[9795],{"type":178,"value":2362},{"type":173,"tag":1255,"props":9797,"children":9798},{"style":2811},[9799],{"type":178,"value":7406},{"type":173,"tag":1255,"props":9801,"children":9802},{"style":1409},[9803],{"type":178,"value":9804},"=",{"type":173,"tag":1255,"props":9806,"children":9807},{"style":2811},[9808],{"type":178,"value":9809}," []\n",{"type":173,"tag":1255,"props":9811,"children":9812},{"class":1257,"line":1320},[9813],{"type":173,"tag":1255,"props":9814,"children":9815},{"emptyLinePlaceholder":165},[9816],{"type":178,"value":9817},"\n",{"type":173,"tag":1255,"props":9819,"children":9820},{"class":1257,"line":1333},[9821,9826,9830,9835,9839,9844],{"type":173,"tag":1255,"props":9822,"children":9823},{"style":1763},[9824],{"type":178,"value":9825},"    transformers",{"type":173,"tag":1255,"props":9827,"children":9828},{"style":1286},[9829],{"type":178,"value":833},{"type":173,"tag":1255,"props":9831,"children":9832},{"style":1710},[9833],{"type":178,"value":9834},"push",{"type":173,"tag":1255,"props":9836,"children":9837},{"style":2811},[9838],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9840,"children":9841},{"style":1763},[9842],{"type":178,"value":9843},"transformTypeScript",{"type":173,"tag":1255,"props":9845,"children":9846},{"style":2811},[9847],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9849,"children":9850},{"class":1257,"line":1346},[9851,9855,9859,9863,9867,9872,9876],{"type":173,"tag":1255,"props":9852,"children":9853},{"style":1262},[9854],{"type":178,"value":5661},{"type":173,"tag":1255,"props":9856,"children":9857},{"style":2811},[9858],{"type":178,"value":2973},{"type":173,"tag":1255,"props":9860,"children":9861},{"style":1763},[9862],{"type":178,"value":9624},{"type":173,"tag":1255,"props":9864,"children":9865},{"style":1286},[9866],{"type":178,"value":833},{"type":173,"tag":1255,"props":9868,"children":9869},{"style":1763},[9870],{"type":178,"value":9871},"experimentalDecorators",{"type":173,"tag":1255,"props":9873,"children":9874},{"style":2811},[9875],{"type":178,"value":2856},{"type":173,"tag":1255,"props":9877,"children":9878},{"style":1286},[9879],{"type":178,"value":2996},{"type":173,"tag":1255,"props":9881,"children":9882},{"class":1257,"line":1356},[9883,9888,9892,9896,9900,9905],{"type":173,"tag":1255,"props":9884,"children":9885},{"style":1763},[9886],{"type":178,"value":9887},"        transformers",{"type":173,"tag":1255,"props":9889,"children":9890},{"style":1286},[9891],{"type":178,"value":833},{"type":173,"tag":1255,"props":9893,"children":9894},{"style":1710},[9895],{"type":178,"value":9834},{"type":173,"tag":1255,"props":9897,"children":9898},{"style":2811},[9899],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9901,"children":9902},{"style":1763},[9903],{"type":178,"value":9904},"transformLegacyDecorators",{"type":173,"tag":1255,"props":9906,"children":9907},{"style":2811},[9908],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9910,"children":9911},{"class":1257,"line":1936},[9912],{"type":173,"tag":1255,"props":9913,"children":9914},{"style":1286},[9915],{"type":178,"value":5921},{"type":173,"tag":1255,"props":9917,"children":9918},{"class":1257,"line":1945},[9919,9923,9927,9932,9936,9940,9944],{"type":173,"tag":1255,"props":9920,"children":9921},{"style":1262},[9922],{"type":178,"value":5661},{"type":173,"tag":1255,"props":9924,"children":9925},{"style":2811},[9926],{"type":178,"value":2973},{"type":173,"tag":1255,"props":9928,"children":9929},{"style":1710},[9930],{"type":178,"value":9931},"getJSXTransformEnabled",{"type":173,"tag":1255,"props":9933,"children":9934},{"style":2811},[9935],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9937,"children":9938},{"style":1763},[9939],{"type":178,"value":9624},{"type":173,"tag":1255,"props":9941,"children":9942},{"style":2811},[9943],{"type":178,"value":2991},{"type":173,"tag":1255,"props":9945,"children":9946},{"style":1286},[9947],{"type":178,"value":2996},{"type":173,"tag":1255,"props":9949,"children":9950},{"class":1257,"line":1967},[9951,9955,9959,9963,9967,9972],{"type":173,"tag":1255,"props":9952,"children":9953},{"style":1763},[9954],{"type":178,"value":9887},{"type":173,"tag":1255,"props":9956,"children":9957},{"style":1286},[9958],{"type":178,"value":833},{"type":173,"tag":1255,"props":9960,"children":9961},{"style":1710},[9962],{"type":178,"value":9834},{"type":173,"tag":1255,"props":9964,"children":9965},{"style":2811},[9966],{"type":178,"value":1718},{"type":173,"tag":1255,"props":9968,"children":9969},{"style":1763},[9970],{"type":178,"value":9971},"transformJsx",{"type":173,"tag":1255,"props":9973,"children":9974},{"style":2811},[9975],{"type":178,"value":2667},{"type":173,"tag":1255,"props":9977,"children":9978},{"class":1257,"line":1976},[9979],{"type":173,"tag":1255,"props":9980,"children":9981},{"style":1286},[9982],{"type":178,"value":5921},{"type":173,"tag":1255,"props":9984,"children":9985},{"class":1257,"line":1999},[9986,9990,9994,9999,10003,10008,10012,10017,10021],{"type":173,"tag":1255,"props":9987,"children":9988},{"style":1262},[9989],{"type":178,"value":5661},{"type":173,"tag":1255,"props":9991,"children":9992},{"style":2811},[9993],{"type":178,"value":2973},{"type":173,"tag":1255,"props":9995,"children":9996},{"style":1763},[9997],{"type":178,"value":9998},"languageVersion",{"type":173,"tag":1255,"props":10000,"children":10001},{"style":1409},[10002],{"type":178,"value":7918},{"type":173,"tag":1255,"props":10004,"children":10005},{"style":1763},[10006],{"type":178,"value":10007}," ScriptTarget",{"type":173,"tag":1255,"props":10009,"children":10010},{"style":1286},[10011],{"type":178,"value":833},{"type":173,"tag":1255,"props":10013,"children":10014},{"style":1763},[10015],{"type":178,"value":10016},"ESNext",{"type":173,"tag":1255,"props":10018,"children":10019},{"style":2811},[10020],{"type":178,"value":2856},{"type":173,"tag":1255,"props":10022,"children":10023},{"style":1286},[10024],{"type":178,"value":2996},{"type":173,"tag":1255,"props":10026,"children":10027},{"class":1257,"line":2008},[10028,10032,10036,10040,10044,10049],{"type":173,"tag":1255,"props":10029,"children":10030},{"style":1763},[10031],{"type":178,"value":9887},{"type":173,"tag":1255,"props":10033,"children":10034},{"style":1286},[10035],{"type":178,"value":833},{"type":173,"tag":1255,"props":10037,"children":10038},{"style":1710},[10039],{"type":178,"value":9834},{"type":173,"tag":1255,"props":10041,"children":10042},{"style":2811},[10043],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10045,"children":10046},{"style":1763},[10047],{"type":178,"value":10048},"transformESNext",{"type":173,"tag":1255,"props":10050,"children":10051},{"style":2811},[10052],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10054,"children":10055},{"class":1257,"line":2030},[10056],{"type":173,"tag":1255,"props":10057,"children":10058},{"style":1286},[10059],{"type":178,"value":5921},{"type":173,"tag":1255,"props":10061,"children":10062},{"class":1257,"line":2039},[10063,10067,10071,10075,10079,10083,10087,10092,10096],{"type":173,"tag":1255,"props":10064,"children":10065},{"style":1262},[10066],{"type":178,"value":5661},{"type":173,"tag":1255,"props":10068,"children":10069},{"style":2811},[10070],{"type":178,"value":2973},{"type":173,"tag":1255,"props":10072,"children":10073},{"style":1763},[10074],{"type":178,"value":9998},{"type":173,"tag":1255,"props":10076,"children":10077},{"style":1409},[10078],{"type":178,"value":7918},{"type":173,"tag":1255,"props":10080,"children":10081},{"style":1763},[10082],{"type":178,"value":10007},{"type":173,"tag":1255,"props":10084,"children":10085},{"style":1286},[10086],{"type":178,"value":833},{"type":173,"tag":1255,"props":10088,"children":10089},{"style":1296},[10090],{"type":178,"value":10091},"ES2021",{"type":173,"tag":1255,"props":10093,"children":10094},{"style":2811},[10095],{"type":178,"value":2856},{"type":173,"tag":1255,"props":10097,"children":10098},{"style":1286},[10099],{"type":178,"value":2996},{"type":173,"tag":1255,"props":10101,"children":10102},{"class":1257,"line":2061},[10103,10107,10111,10115,10119,10124],{"type":173,"tag":1255,"props":10104,"children":10105},{"style":1763},[10106],{"type":178,"value":9887},{"type":173,"tag":1255,"props":10108,"children":10109},{"style":1286},[10110],{"type":178,"value":833},{"type":173,"tag":1255,"props":10112,"children":10113},{"style":1710},[10114],{"type":178,"value":9834},{"type":173,"tag":1255,"props":10116,"children":10117},{"style":2811},[10118],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10120,"children":10121},{"style":1763},[10122],{"type":178,"value":10123},"transformES2021",{"type":173,"tag":1255,"props":10125,"children":10126},{"style":2811},[10127],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10129,"children":10130},{"class":1257,"line":2070},[10131],{"type":173,"tag":1255,"props":10132,"children":10133},{"style":1286},[10134],{"type":178,"value":5921},{"type":173,"tag":1255,"props":10136,"children":10137},{"class":1257,"line":2092},[10138,10142,10146,10150,10154,10158,10162,10167,10171],{"type":173,"tag":1255,"props":10139,"children":10140},{"style":1262},[10141],{"type":178,"value":5661},{"type":173,"tag":1255,"props":10143,"children":10144},{"style":2811},[10145],{"type":178,"value":2973},{"type":173,"tag":1255,"props":10147,"children":10148},{"style":1763},[10149],{"type":178,"value":9998},{"type":173,"tag":1255,"props":10151,"children":10152},{"style":1409},[10153],{"type":178,"value":7918},{"type":173,"tag":1255,"props":10155,"children":10156},{"style":1763},[10157],{"type":178,"value":10007},{"type":173,"tag":1255,"props":10159,"children":10160},{"style":1286},[10161],{"type":178,"value":833},{"type":173,"tag":1255,"props":10163,"children":10164},{"style":1296},[10165],{"type":178,"value":10166},"ES2020",{"type":173,"tag":1255,"props":10168,"children":10169},{"style":2811},[10170],{"type":178,"value":2856},{"type":173,"tag":1255,"props":10172,"children":10173},{"style":1286},[10174],{"type":178,"value":2996},{"type":173,"tag":1255,"props":10176,"children":10177},{"class":1257,"line":2101},[10178,10182,10186,10190,10194,10199],{"type":173,"tag":1255,"props":10179,"children":10180},{"style":1763},[10181],{"type":178,"value":9887},{"type":173,"tag":1255,"props":10183,"children":10184},{"style":1286},[10185],{"type":178,"value":833},{"type":173,"tag":1255,"props":10187,"children":10188},{"style":1710},[10189],{"type":178,"value":9834},{"type":173,"tag":1255,"props":10191,"children":10192},{"style":2811},[10193],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10195,"children":10196},{"style":1763},[10197],{"type":178,"value":10198},"transformES2020",{"type":173,"tag":1255,"props":10200,"children":10201},{"style":2811},[10202],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10204,"children":10205},{"class":1257,"line":2123},[10206],{"type":173,"tag":1255,"props":10207,"children":10208},{"style":1286},[10209],{"type":178,"value":5921},{"type":173,"tag":1255,"props":10211,"children":10212},{"class":1257,"line":2132},[10213],{"type":173,"tag":1255,"props":10214,"children":10215},{"style":1350},[10216],{"type":178,"value":1661},{"type":173,"tag":1255,"props":10218,"children":10219},{"class":1257,"line":2153},[10220,10224],{"type":173,"tag":1255,"props":10221,"children":10222},{"style":1262},[10223],{"type":178,"value":3057},{"type":173,"tag":1255,"props":10225,"children":10226},{"style":1763},[10227],{"type":178,"value":10228}," transformers\n",{"type":173,"tag":1255,"props":10230,"children":10231},{"class":1257,"line":2162},[10232],{"type":173,"tag":1255,"props":10233,"children":10234},{"style":1286},[10235],{"type":178,"value":1362},{"type":173,"tag":187,"props":10237,"children":10239},{"id":10238},"转换器插件是如何工作的",[10240],{"type":178,"value":10241},"转换器插件是如何工作的？",{"type":173,"tag":174,"props":10243,"children":10244},{},[10245],{"type":178,"value":10246},"以功能最简短的 taggedTemplate 转换器为例。",{"type":173,"tag":174,"props":10248,"children":10249},{},[10250],{"type":178,"value":9325},{"type":173,"tag":181,"props":10252,"children":10254},{"id":10253},"代码模式",[10255],{"type":178,"value":10253},{"type":173,"tag":187,"props":10257,"children":10259},{"id":10258},"卫语句",[10260],{"type":178,"value":10258},{"type":173,"tag":174,"props":10262,"children":10263},{},[10264],{"type":178,"value":10265},"TypeScript 常对 JavaScript 文件有特殊处理，比如在类型分析时如果遇到变量初始化器，在 TS 文件中可能要做类型推断，而 JS 文件中只需要简单从 JSDoc 注释中获取类型，因此常在代码中见到卫语句模式，如 checkDeclarationInitializer 中的 isInJSFile 判断。",{"type":173,"tag":1245,"props":10267,"children":10269},{"className":1247,"code":10268,"language":1249,"meta":166,"style":166},"function checkDeclarationInitializer(\n  declaration: HasExpressionInitializer,\n  checkMode: CheckMode,\n  contextualType?: Type | undefined,\n) {\n  const initializer = getEffectiveInitializer(declaration)\n  if (isInJSFile(declaration)) {\n      return //...\n  }\n  return //...\n}\n",[10270],{"type":173,"tag":346,"props":10271,"children":10272},{"__ignoreMap":166},[10273,10288,10309,10329,10357,10368,10401,10433,10444,10451,10462],{"type":173,"tag":1255,"props":10274,"children":10275},{"class":1257,"line":1258},[10276,10280,10284],{"type":173,"tag":1255,"props":10277,"children":10278},{"style":1274},[10279],{"type":178,"value":1707},{"type":173,"tag":1255,"props":10281,"children":10282},{"style":1710},[10283],{"type":178,"value":4184},{"type":173,"tag":1255,"props":10285,"children":10286},{"style":1286},[10287],{"type":178,"value":3872},{"type":173,"tag":1255,"props":10289,"children":10290},{"class":1257,"line":1292},[10291,10296,10300,10305],{"type":173,"tag":1255,"props":10292,"children":10293},{"style":1721},[10294],{"type":178,"value":10295},"  declaration",{"type":173,"tag":1255,"props":10297,"children":10298},{"style":1409},[10299],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10301,"children":10302},{"style":1280},[10303],{"type":178,"value":10304}," HasExpressionInitializer",{"type":173,"tag":1255,"props":10306,"children":10307},{"style":1286},[10308],{"type":178,"value":1304},{"type":173,"tag":1255,"props":10310,"children":10311},{"class":1257,"line":1307},[10312,10317,10321,10325],{"type":173,"tag":1255,"props":10313,"children":10314},{"style":1721},[10315],{"type":178,"value":10316},"  checkMode",{"type":173,"tag":1255,"props":10318,"children":10319},{"style":1409},[10320],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10322,"children":10323},{"style":1280},[10324],{"type":178,"value":3975},{"type":173,"tag":1255,"props":10326,"children":10327},{"style":1286},[10328],{"type":178,"value":1304},{"type":173,"tag":1255,"props":10330,"children":10331},{"class":1257,"line":1320},[10332,10337,10341,10345,10349,10353],{"type":173,"tag":1255,"props":10333,"children":10334},{"style":1721},[10335],{"type":178,"value":10336},"  contextualType",{"type":173,"tag":1255,"props":10338,"children":10339},{"style":1409},[10340],{"type":178,"value":1923},{"type":173,"tag":1255,"props":10342,"children":10343},{"style":1280},[10344],{"type":178,"value":1748},{"type":173,"tag":1255,"props":10346,"children":10347},{"style":1409},[10348],{"type":178,"value":2212},{"type":173,"tag":1255,"props":10350,"children":10351},{"style":1731},[10352],{"type":178,"value":2217},{"type":173,"tag":1255,"props":10354,"children":10355},{"style":1286},[10356],{"type":178,"value":1304},{"type":173,"tag":1255,"props":10358,"children":10359},{"class":1257,"line":1333},[10360,10364],{"type":173,"tag":1255,"props":10361,"children":10362},{"style":1286},[10363],{"type":178,"value":1739},{"type":173,"tag":1255,"props":10365,"children":10366},{"style":1286},[10367],{"type":178,"value":1289},{"type":173,"tag":1255,"props":10369,"children":10370},{"class":1257,"line":1346},[10371,10375,10380,10384,10389,10393,10397],{"type":173,"tag":1255,"props":10372,"children":10373},{"style":1274},[10374],{"type":178,"value":3179},{"type":173,"tag":1255,"props":10376,"children":10377},{"style":1296},[10378],{"type":178,"value":10379}," initializer",{"type":173,"tag":1255,"props":10381,"children":10382},{"style":1409},[10383],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10385,"children":10386},{"style":1710},[10387],{"type":178,"value":10388}," getEffectiveInitializer",{"type":173,"tag":1255,"props":10390,"children":10391},{"style":2811},[10392],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10394,"children":10395},{"style":1763},[10396],{"type":178,"value":3619},{"type":173,"tag":1255,"props":10398,"children":10399},{"style":2811},[10400],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10402,"children":10403},{"class":1257,"line":1356},[10404,10408,10412,10417,10421,10425,10429],{"type":173,"tag":1255,"props":10405,"children":10406},{"style":1262},[10407],{"type":178,"value":2968},{"type":173,"tag":1255,"props":10409,"children":10410},{"style":2811},[10411],{"type":178,"value":2973},{"type":173,"tag":1255,"props":10413,"children":10414},{"style":1710},[10415],{"type":178,"value":10416},"isInJSFile",{"type":173,"tag":1255,"props":10418,"children":10419},{"style":2811},[10420],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10422,"children":10423},{"style":1763},[10424],{"type":178,"value":3619},{"type":173,"tag":1255,"props":10426,"children":10427},{"style":2811},[10428],{"type":178,"value":2991},{"type":173,"tag":1255,"props":10430,"children":10431},{"style":1286},[10432],{"type":178,"value":2996},{"type":173,"tag":1255,"props":10434,"children":10435},{"class":1257,"line":1936},[10436,10440],{"type":173,"tag":1255,"props":10437,"children":10438},{"style":1262},[10439],{"type":178,"value":2830},{"type":173,"tag":1255,"props":10441,"children":10442},{"style":1350},[10443],{"type":178,"value":4075},{"type":173,"tag":1255,"props":10445,"children":10446},{"class":1257,"line":1945},[10447],{"type":173,"tag":1255,"props":10448,"children":10449},{"style":1286},[10450],{"type":178,"value":2881},{"type":173,"tag":1255,"props":10452,"children":10453},{"class":1257,"line":1967},[10454,10458],{"type":173,"tag":1255,"props":10455,"children":10456},{"style":1262},[10457],{"type":178,"value":1760},{"type":173,"tag":1255,"props":10459,"children":10460},{"style":1350},[10461],{"type":178,"value":4075},{"type":173,"tag":1255,"props":10463,"children":10464},{"class":1257,"line":1976},[10465],{"type":173,"tag":1255,"props":10466,"children":10467},{"style":1286},[10468],{"type":178,"value":1362},{"type":173,"tag":187,"props":10470,"children":10472},{"id":10471},"缓存模式",[10473],{"type":178,"value":10471},{"type":173,"tag":174,"props":10475,"children":10476},{},[10477],{"type":178,"value":10478},"TypeScript 编译器代码中常见一种 xxx、xxxWorker 的命名模式，分别对应功能的外部包装以及实际实现。以 getTypeOfVariableOrParameterOrProperty 为例，其外部包装实现了缓存效果，避免重复计算，而 getTypeOfVariableOrParameterOrPropertyWorker 才是真正的计算逻辑。",{"type":173,"tag":1245,"props":10480,"children":10482},{"className":1247,"code":10481,"language":1249,"meta":166,"style":166},"function getTypeOfVariableOrParameterOrProperty(symbol: Symbol): Type {\n  const links = getSymbolLinks(symbol)\n  if (!links.type) {\n    const type = getTypeOfVariableOrParameterOrPropertyWorker(symbol)\n    return type\n  }\n  return links.type\n}\n",[10483],{"type":173,"tag":346,"props":10484,"children":10485},{"__ignoreMap":166},[10486,10529,10562,10598,10629,10640,10647,10667],{"type":173,"tag":1255,"props":10487,"children":10488},{"class":1257,"line":1258},[10489,10493,10497,10501,10505,10509,10513,10517,10521,10525],{"type":173,"tag":1255,"props":10490,"children":10491},{"style":1274},[10492],{"type":178,"value":1707},{"type":173,"tag":1255,"props":10494,"children":10495},{"style":1710},[10496],{"type":178,"value":3369},{"type":173,"tag":1255,"props":10498,"children":10499},{"style":1286},[10500],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10502,"children":10503},{"style":1721},[10504],{"type":178,"value":3147},{"type":173,"tag":1255,"props":10506,"children":10507},{"style":1409},[10508],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10510,"children":10511},{"style":1280},[10512],{"type":178,"value":1838},{"type":173,"tag":1255,"props":10514,"children":10515},{"style":1286},[10516],{"type":178,"value":1739},{"type":173,"tag":1255,"props":10518,"children":10519},{"style":1409},[10520],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10522,"children":10523},{"style":1280},[10524],{"type":178,"value":1748},{"type":173,"tag":1255,"props":10526,"children":10527},{"style":1286},[10528],{"type":178,"value":1289},{"type":173,"tag":1255,"props":10530,"children":10531},{"class":1257,"line":1292},[10532,10536,10541,10545,10550,10554,10558],{"type":173,"tag":1255,"props":10533,"children":10534},{"style":1274},[10535],{"type":178,"value":3179},{"type":173,"tag":1255,"props":10537,"children":10538},{"style":1296},[10539],{"type":178,"value":10540}," links",{"type":173,"tag":1255,"props":10542,"children":10543},{"style":1409},[10544],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10546,"children":10547},{"style":1710},[10548],{"type":178,"value":10549}," getSymbolLinks",{"type":173,"tag":1255,"props":10551,"children":10552},{"style":2811},[10553],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10555,"children":10556},{"style":1763},[10557],{"type":178,"value":3147},{"type":173,"tag":1255,"props":10559,"children":10560},{"style":2811},[10561],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10563,"children":10564},{"class":1257,"line":1307},[10565,10569,10573,10577,10582,10586,10590,10594],{"type":173,"tag":1255,"props":10566,"children":10567},{"style":1262},[10568],{"type":178,"value":2968},{"type":173,"tag":1255,"props":10570,"children":10571},{"style":2811},[10572],{"type":178,"value":2973},{"type":173,"tag":1255,"props":10574,"children":10575},{"style":1409},[10576],{"type":178,"value":5616},{"type":173,"tag":1255,"props":10578,"children":10579},{"style":1763},[10580],{"type":178,"value":10581},"links",{"type":173,"tag":1255,"props":10583,"children":10584},{"style":1286},[10585],{"type":178,"value":833},{"type":173,"tag":1255,"props":10587,"children":10588},{"style":1763},[10589],{"type":178,"value":868},{"type":173,"tag":1255,"props":10591,"children":10592},{"style":2811},[10593],{"type":178,"value":2856},{"type":173,"tag":1255,"props":10595,"children":10596},{"style":1286},[10597],{"type":178,"value":2996},{"type":173,"tag":1255,"props":10599,"children":10600},{"class":1257,"line":1320},[10601,10605,10609,10613,10617,10621,10625],{"type":173,"tag":1255,"props":10602,"children":10603},{"style":1274},[10604],{"type":178,"value":4153},{"type":173,"tag":1255,"props":10606,"children":10607},{"style":1296},[10608],{"type":178,"value":4158},{"type":173,"tag":1255,"props":10610,"children":10611},{"style":1409},[10612],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10614,"children":10615},{"style":1710},[10616],{"type":178,"value":3558},{"type":173,"tag":1255,"props":10618,"children":10619},{"style":2811},[10620],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10622,"children":10623},{"style":1763},[10624],{"type":178,"value":3147},{"type":173,"tag":1255,"props":10626,"children":10627},{"style":2811},[10628],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10630,"children":10631},{"class":1257,"line":1333},[10632,10636],{"type":173,"tag":1255,"props":10633,"children":10634},{"style":1262},[10635],{"type":178,"value":3057},{"type":173,"tag":1255,"props":10637,"children":10638},{"style":1763},[10639],{"type":178,"value":6565},{"type":173,"tag":1255,"props":10641,"children":10642},{"class":1257,"line":1346},[10643],{"type":173,"tag":1255,"props":10644,"children":10645},{"style":1286},[10646],{"type":178,"value":2881},{"type":173,"tag":1255,"props":10648,"children":10649},{"class":1257,"line":1356},[10650,10654,10658,10662],{"type":173,"tag":1255,"props":10651,"children":10652},{"style":1262},[10653],{"type":178,"value":1760},{"type":173,"tag":1255,"props":10655,"children":10656},{"style":1763},[10657],{"type":178,"value":10540},{"type":173,"tag":1255,"props":10659,"children":10660},{"style":1286},[10661],{"type":178,"value":833},{"type":173,"tag":1255,"props":10663,"children":10664},{"style":1763},[10665],{"type":178,"value":10666},"type\n",{"type":173,"tag":1255,"props":10668,"children":10669},{"class":1257,"line":1936},[10670],{"type":173,"tag":1255,"props":10671,"children":10672},{"style":1286},[10673],{"type":178,"value":1362},{"type":173,"tag":181,"props":10675,"children":10677},{"id":10676},"杂项",[10678],{"type":178,"value":10676},{"type":173,"tag":187,"props":10680,"children":10682},{"id":10681},"什么是无类型函数调用untyped-function-call",[10683],{"type":178,"value":10684},"什么是无类型函数调用（untyped function call）？",{"type":173,"tag":174,"props":10686,"children":10687},{},[10688],{"type":178,"value":10689},"调用的表达式本身没有明确的函数类型（如 any 类型，或对象类型但没有 call/construct 签名，但又是 Function 的子类型），此时 TypeScript 不做参数类型检查，调用结果类型为 any，比如：",{"type":173,"tag":1245,"props":10691,"children":10693},{"className":1247,"code":10692,"language":1249,"meta":166,"style":166},"declare const f: Function\nconst res = f(\"hello\")\n//    ^? any\n",[10694],{"type":173,"tag":346,"props":10695,"children":10696},{"__ignoreMap":166},[10697,10722,10766],{"type":173,"tag":1255,"props":10698,"children":10699},{"class":1257,"line":1258},[10700,10704,10708,10713,10717],{"type":173,"tag":1255,"props":10701,"children":10702},{"style":1268},[10703],{"type":178,"value":2591},{"type":173,"tag":1255,"props":10705,"children":10706},{"style":1274},[10707],{"type":178,"value":1271},{"type":173,"tag":1255,"props":10709,"children":10710},{"style":8361},[10711],{"type":178,"value":10712}," f",{"type":173,"tag":1255,"props":10714,"children":10715},{"style":1409},[10716],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10718,"children":10719},{"style":1280},[10720],{"type":178,"value":10721}," Function\n",{"type":173,"tag":1255,"props":10723,"children":10724},{"class":1257,"line":1292},[10725,10729,10734,10738,10742,10746,10752,10758,10762],{"type":173,"tag":1255,"props":10726,"children":10727},{"style":1274},[10728],{"type":178,"value":2639},{"type":173,"tag":1255,"props":10730,"children":10731},{"style":1296},[10732],{"type":178,"value":10733}," res",{"type":173,"tag":1255,"props":10735,"children":10736},{"style":1409},[10737],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10739,"children":10740},{"style":1710},[10741],{"type":178,"value":10712},{"type":173,"tag":1255,"props":10743,"children":10744},{"style":1763},[10745],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10747,"children":10749},{"style":10748},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[10750],{"type":178,"value":10751},"\"",{"type":173,"tag":1255,"props":10753,"children":10755},{"style":10754},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[10756],{"type":178,"value":10757},"hello",{"type":173,"tag":1255,"props":10759,"children":10760},{"style":10748},[10761],{"type":178,"value":10751},{"type":173,"tag":1255,"props":10763,"children":10764},{"style":1763},[10765],{"type":178,"value":2667},{"type":173,"tag":1255,"props":10767,"children":10768},{"class":1257,"line":1307},[10769],{"type":173,"tag":1255,"props":10770,"children":10771},{"style":1350},[10772],{"type":178,"value":10773},"//    ^? any\n",{"type":173,"tag":181,"props":10775,"children":10777},{"id":10776},"有意思的问题",[10778],{"type":178,"value":10776},{"type":173,"tag":187,"props":10780,"children":10782},{"id":10781},"编译器在代码层面如何处理类型的循环引用",[10783],{"type":178,"value":10784},"编译器在代码层面如何处理类型的循环引用？",{"type":173,"tag":1245,"props":10786,"children":10788},{"className":1247,"code":10787,"language":1249,"meta":166,"style":166},"type X = { fn: () => Y }\ntype Y = { fn: () => X }\n",[10789],{"type":173,"tag":346,"props":10790,"children":10791},{"__ignoreMap":166},[10792,10838],{"type":173,"tag":1255,"props":10793,"children":10794},{"class":1257,"line":1258},[10795,10799,10804,10808,10812,10817,10821,10825,10829,10834],{"type":173,"tag":1255,"props":10796,"children":10797},{"style":1274},[10798],{"type":178,"value":868},{"type":173,"tag":1255,"props":10800,"children":10801},{"style":1280},[10802],{"type":178,"value":10803}," X",{"type":173,"tag":1255,"props":10805,"children":10806},{"style":1409},[10807],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10809,"children":10810},{"style":1286},[10811],{"type":178,"value":5458},{"type":173,"tag":1255,"props":10813,"children":10815},{"style":10814},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[10816],{"type":178,"value":2601},{"type":173,"tag":1255,"props":10818,"children":10819},{"style":1409},[10820],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10822,"children":10823},{"style":1286},[10824],{"type":178,"value":9366},{"type":173,"tag":1255,"props":10826,"children":10827},{"style":1274},[10828],{"type":178,"value":2783},{"type":173,"tag":1255,"props":10830,"children":10831},{"style":1280},[10832],{"type":178,"value":10833}," Y",{"type":173,"tag":1255,"props":10835,"children":10836},{"style":1286},[10837],{"type":178,"value":5476},{"type":173,"tag":1255,"props":10839,"children":10840},{"class":1257,"line":1292},[10841,10845,10849,10853,10857,10861,10865,10869,10873,10877],{"type":173,"tag":1255,"props":10842,"children":10843},{"style":1274},[10844],{"type":178,"value":868},{"type":173,"tag":1255,"props":10846,"children":10847},{"style":1280},[10848],{"type":178,"value":10833},{"type":173,"tag":1255,"props":10850,"children":10851},{"style":1409},[10852],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10854,"children":10855},{"style":1286},[10856],{"type":178,"value":5458},{"type":173,"tag":1255,"props":10858,"children":10859},{"style":10814},[10860],{"type":178,"value":2601},{"type":173,"tag":1255,"props":10862,"children":10863},{"style":1409},[10864],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10866,"children":10867},{"style":1286},[10868],{"type":178,"value":9366},{"type":173,"tag":1255,"props":10870,"children":10871},{"style":1274},[10872],{"type":178,"value":2783},{"type":173,"tag":1255,"props":10874,"children":10875},{"style":1280},[10876],{"type":178,"value":10803},{"type":173,"tag":1255,"props":10878,"children":10879},{"style":1286},[10880],{"type":178,"value":5476},{"type":173,"tag":181,"props":10882,"children":10884},{"id":10883},"extra",[10885],{"type":178,"value":10886},"Extra",{"type":173,"tag":187,"props":10888,"children":10890},{"id":10889},"引入表观类型概念",[10891],{"type":178,"value":10889},{"type":173,"tag":1245,"props":10893,"children":10895},{"className":1247,"code":10894,"language":1249,"meta":166,"style":166},"function getApparentType(type: Type): Type {\n  const t = type.flags & TypeFlags.Instantiable ? getBaseConstraintOfType(type) || unknownType : type\n  const objectFlags = getObjectFlags(t)\n  return objectFlags & ObjectFlags.Mapped ? getApparentTypeOfMappedType(t as MappedType) :\n    objectFlags & ObjectFlags.Reference && t !== type ? getTypeWithThisArgument(t, type) :\n    t.flags & TypeFlags.Intersection ? getApparentTypeOfIntersectionType(t as IntersectionType, type) :\n    t.flags & TypeFlags.StringLike ? globalStringType :\n    t.flags & TypeFlags.NumberLike ? globalNumberType :\n    t.flags & TypeFlags.BigIntLike ? getGlobalBigIntType() :\n    t.flags & TypeFlags.BooleanLike ? globalBooleanType :\n    t.flags & TypeFlags.ESSymbolLike ? getGlobalESSymbolType() :\n    t.flags & TypeFlags.NonPrimitive ? emptyObjectType :\n    t.flags & TypeFlags.Index ? stringNumberSymbolType :\n    t.flags & TypeFlags.Unknown && !strictNullChecks ? emptyObjectType :\n    t\n}\n",[10896],{"type":173,"tag":346,"props":10897,"children":10898},{"__ignoreMap":166},[10899,10943,11026,11060,11122,11195,11268,11314,11359,11409,11454,11503,11548,11593,11650,11658],{"type":173,"tag":1255,"props":10900,"children":10901},{"class":1257,"line":1258},[10902,10906,10911,10915,10919,10923,10927,10931,10935,10939],{"type":173,"tag":1255,"props":10903,"children":10904},{"style":1274},[10905],{"type":178,"value":1707},{"type":173,"tag":1255,"props":10907,"children":10908},{"style":1710},[10909],{"type":178,"value":10910}," getApparentType",{"type":173,"tag":1255,"props":10912,"children":10913},{"style":1286},[10914],{"type":178,"value":1718},{"type":173,"tag":1255,"props":10916,"children":10917},{"style":1721},[10918],{"type":178,"value":868},{"type":173,"tag":1255,"props":10920,"children":10921},{"style":1409},[10922],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10924,"children":10925},{"style":1280},[10926],{"type":178,"value":1748},{"type":173,"tag":1255,"props":10928,"children":10929},{"style":1286},[10930],{"type":178,"value":1739},{"type":173,"tag":1255,"props":10932,"children":10933},{"style":1409},[10934],{"type":178,"value":1596},{"type":173,"tag":1255,"props":10936,"children":10937},{"style":1280},[10938],{"type":178,"value":1748},{"type":173,"tag":1255,"props":10940,"children":10941},{"style":1286},[10942],{"type":178,"value":1289},{"type":173,"tag":1255,"props":10944,"children":10945},{"class":1257,"line":1292},[10946,10950,10955,10959,10963,10967,10971,10975,10979,10983,10988,10992,10997,11001,11005,11009,11013,11018,11022],{"type":173,"tag":1255,"props":10947,"children":10948},{"style":1274},[10949],{"type":178,"value":3179},{"type":173,"tag":1255,"props":10951,"children":10952},{"style":1296},[10953],{"type":178,"value":10954}," t",{"type":173,"tag":1255,"props":10956,"children":10957},{"style":1409},[10958],{"type":178,"value":2649},{"type":173,"tag":1255,"props":10960,"children":10961},{"style":1763},[10962],{"type":178,"value":4158},{"type":173,"tag":1255,"props":10964,"children":10965},{"style":1286},[10966],{"type":178,"value":833},{"type":173,"tag":1255,"props":10968,"children":10969},{"style":1763},[10970],{"type":178,"value":3310},{"type":173,"tag":1255,"props":10972,"children":10973},{"style":1409},[10974],{"type":178,"value":3226},{"type":173,"tag":1255,"props":10976,"children":10977},{"style":1763},[10978],{"type":178,"value":5686},{"type":173,"tag":1255,"props":10980,"children":10981},{"style":1286},[10982],{"type":178,"value":833},{"type":173,"tag":1255,"props":10984,"children":10985},{"style":1763},[10986],{"type":178,"value":10987},"Instantiable",{"type":173,"tag":1255,"props":10989,"children":10990},{"style":1409},[10991],{"type":178,"value":1771},{"type":173,"tag":1255,"props":10993,"children":10994},{"style":1710},[10995],{"type":178,"value":10996}," getBaseConstraintOfType",{"type":173,"tag":1255,"props":10998,"children":10999},{"style":2811},[11000],{"type":178,"value":1718},{"type":173,"tag":1255,"props":11002,"children":11003},{"style":1763},[11004],{"type":178,"value":868},{"type":173,"tag":1255,"props":11006,"children":11007},{"style":2811},[11008],{"type":178,"value":2856},{"type":173,"tag":1255,"props":11010,"children":11011},{"style":1409},[11012],{"type":178,"value":7164},{"type":173,"tag":1255,"props":11014,"children":11015},{"style":1763},[11016],{"type":178,"value":11017}," unknownType",{"type":173,"tag":1255,"props":11019,"children":11020},{"style":1409},[11021],{"type":178,"value":1781},{"type":173,"tag":1255,"props":11023,"children":11024},{"style":1763},[11025],{"type":178,"value":6565},{"type":173,"tag":1255,"props":11027,"children":11028},{"class":1257,"line":1307},[11029,11033,11038,11042,11047,11051,11056],{"type":173,"tag":1255,"props":11030,"children":11031},{"style":1274},[11032],{"type":178,"value":3179},{"type":173,"tag":1255,"props":11034,"children":11035},{"style":1296},[11036],{"type":178,"value":11037}," objectFlags",{"type":173,"tag":1255,"props":11039,"children":11040},{"style":1409},[11041],{"type":178,"value":2649},{"type":173,"tag":1255,"props":11043,"children":11044},{"style":1710},[11045],{"type":178,"value":11046}," getObjectFlags",{"type":173,"tag":1255,"props":11048,"children":11049},{"style":2811},[11050],{"type":178,"value":1718},{"type":173,"tag":1255,"props":11052,"children":11053},{"style":1763},[11054],{"type":178,"value":11055},"t",{"type":173,"tag":1255,"props":11057,"children":11058},{"style":2811},[11059],{"type":178,"value":2667},{"type":173,"tag":1255,"props":11061,"children":11062},{"class":1257,"line":1320},[11063,11067,11071,11075,11079,11083,11088,11092,11097,11101,11105,11109,11114,11118],{"type":173,"tag":1255,"props":11064,"children":11065},{"style":1262},[11066],{"type":178,"value":1760},{"type":173,"tag":1255,"props":11068,"children":11069},{"style":1763},[11070],{"type":178,"value":11037},{"type":173,"tag":1255,"props":11072,"children":11073},{"style":1409},[11074],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11076,"children":11077},{"style":1763},[11078],{"type":178,"value":5751},{"type":173,"tag":1255,"props":11080,"children":11081},{"style":1286},[11082],{"type":178,"value":833},{"type":173,"tag":1255,"props":11084,"children":11085},{"style":1763},[11086],{"type":178,"value":11087},"Mapped",{"type":173,"tag":1255,"props":11089,"children":11090},{"style":1409},[11091],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11093,"children":11094},{"style":1710},[11095],{"type":178,"value":11096}," getApparentTypeOfMappedType",{"type":173,"tag":1255,"props":11098,"children":11099},{"style":2811},[11100],{"type":178,"value":1718},{"type":173,"tag":1255,"props":11102,"children":11103},{"style":1763},[11104],{"type":178,"value":11055},{"type":173,"tag":1255,"props":11106,"children":11107},{"style":1262},[11108],{"type":178,"value":5033},{"type":173,"tag":1255,"props":11110,"children":11111},{"style":1280},[11112],{"type":178,"value":11113}," MappedType",{"type":173,"tag":1255,"props":11115,"children":11116},{"style":2811},[11117],{"type":178,"value":2856},{"type":173,"tag":1255,"props":11119,"children":11120},{"style":1409},[11121],{"type":178,"value":4567},{"type":173,"tag":1255,"props":11123,"children":11124},{"class":1257,"line":1333},[11125,11130,11134,11138,11142,11146,11150,11154,11158,11162,11166,11171,11175,11179,11183,11187,11191],{"type":173,"tag":1255,"props":11126,"children":11127},{"style":1763},[11128],{"type":178,"value":11129},"    objectFlags",{"type":173,"tag":1255,"props":11131,"children":11132},{"style":1409},[11133],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11135,"children":11136},{"style":1763},[11137],{"type":178,"value":5751},{"type":173,"tag":1255,"props":11139,"children":11140},{"style":1286},[11141],{"type":178,"value":833},{"type":173,"tag":1255,"props":11143,"children":11144},{"style":1763},[11145],{"type":178,"value":5760},{"type":173,"tag":1255,"props":11147,"children":11148},{"style":1409},[11149],{"type":178,"value":4124},{"type":173,"tag":1255,"props":11151,"children":11152},{"style":1763},[11153],{"type":178,"value":10954},{"type":173,"tag":1255,"props":11155,"children":11156},{"style":1409},[11157],{"type":178,"value":4410},{"type":173,"tag":1255,"props":11159,"children":11160},{"style":1763},[11161],{"type":178,"value":4158},{"type":173,"tag":1255,"props":11163,"children":11164},{"style":1409},[11165],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11167,"children":11168},{"style":1710},[11169],{"type":178,"value":11170}," getTypeWithThisArgument",{"type":173,"tag":1255,"props":11172,"children":11173},{"style":2811},[11174],{"type":178,"value":1718},{"type":173,"tag":1255,"props":11176,"children":11177},{"style":1763},[11178],{"type":178,"value":11055},{"type":173,"tag":1255,"props":11180,"children":11181},{"style":1286},[11182],{"type":178,"value":2353},{"type":173,"tag":1255,"props":11184,"children":11185},{"style":1763},[11186],{"type":178,"value":4158},{"type":173,"tag":1255,"props":11188,"children":11189},{"style":2811},[11190],{"type":178,"value":2856},{"type":173,"tag":1255,"props":11192,"children":11193},{"style":1409},[11194],{"type":178,"value":4567},{"type":173,"tag":1255,"props":11196,"children":11197},{"class":1257,"line":1346},[11198,11203,11207,11211,11215,11219,11223,11227,11231,11236,11240,11244,11248,11252,11256,11260,11264],{"type":173,"tag":1255,"props":11199,"children":11200},{"style":1763},[11201],{"type":178,"value":11202},"    t",{"type":173,"tag":1255,"props":11204,"children":11205},{"style":1286},[11206],{"type":178,"value":833},{"type":173,"tag":1255,"props":11208,"children":11209},{"style":1763},[11210],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11212,"children":11213},{"style":1409},[11214],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11216,"children":11217},{"style":1763},[11218],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11220,"children":11221},{"style":1286},[11222],{"type":178,"value":833},{"type":173,"tag":1255,"props":11224,"children":11225},{"style":1763},[11226],{"type":178,"value":6054},{"type":173,"tag":1255,"props":11228,"children":11229},{"style":1409},[11230],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11232,"children":11233},{"style":1710},[11234],{"type":178,"value":11235}," getApparentTypeOfIntersectionType",{"type":173,"tag":1255,"props":11237,"children":11238},{"style":2811},[11239],{"type":178,"value":1718},{"type":173,"tag":1255,"props":11241,"children":11242},{"style":1763},[11243],{"type":178,"value":11055},{"type":173,"tag":1255,"props":11245,"children":11246},{"style":1262},[11247],{"type":178,"value":5033},{"type":173,"tag":1255,"props":11249,"children":11250},{"style":1280},[11251],{"type":178,"value":6087},{"type":173,"tag":1255,"props":11253,"children":11254},{"style":1286},[11255],{"type":178,"value":2353},{"type":173,"tag":1255,"props":11257,"children":11258},{"style":1763},[11259],{"type":178,"value":4158},{"type":173,"tag":1255,"props":11261,"children":11262},{"style":2811},[11263],{"type":178,"value":2856},{"type":173,"tag":1255,"props":11265,"children":11266},{"style":1409},[11267],{"type":178,"value":4567},{"type":173,"tag":1255,"props":11269,"children":11270},{"class":1257,"line":1356},[11271,11275,11279,11283,11287,11291,11295,11300,11304,11309],{"type":173,"tag":1255,"props":11272,"children":11273},{"style":1763},[11274],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11276,"children":11277},{"style":1286},[11278],{"type":178,"value":833},{"type":173,"tag":1255,"props":11280,"children":11281},{"style":1763},[11282],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11284,"children":11285},{"style":1409},[11286],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11288,"children":11289},{"style":1763},[11290],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11292,"children":11293},{"style":1286},[11294],{"type":178,"value":833},{"type":173,"tag":1255,"props":11296,"children":11297},{"style":1763},[11298],{"type":178,"value":11299},"StringLike",{"type":173,"tag":1255,"props":11301,"children":11302},{"style":1409},[11303],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11305,"children":11306},{"style":1763},[11307],{"type":178,"value":11308}," globalStringType",{"type":173,"tag":1255,"props":11310,"children":11311},{"style":1409},[11312],{"type":178,"value":11313}," :\n",{"type":173,"tag":1255,"props":11315,"children":11316},{"class":1257,"line":1936},[11317,11321,11325,11329,11333,11337,11341,11346,11350,11355],{"type":173,"tag":1255,"props":11318,"children":11319},{"style":1763},[11320],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11322,"children":11323},{"style":1286},[11324],{"type":178,"value":833},{"type":173,"tag":1255,"props":11326,"children":11327},{"style":1763},[11328],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11330,"children":11331},{"style":1409},[11332],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11334,"children":11335},{"style":1763},[11336],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11338,"children":11339},{"style":1286},[11340],{"type":178,"value":833},{"type":173,"tag":1255,"props":11342,"children":11343},{"style":1763},[11344],{"type":178,"value":11345},"NumberLike",{"type":173,"tag":1255,"props":11347,"children":11348},{"style":1409},[11349],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11351,"children":11352},{"style":1763},[11353],{"type":178,"value":11354}," globalNumberType",{"type":173,"tag":1255,"props":11356,"children":11357},{"style":1409},[11358],{"type":178,"value":11313},{"type":173,"tag":1255,"props":11360,"children":11361},{"class":1257,"line":1945},[11362,11366,11370,11374,11378,11382,11386,11391,11395,11400,11405],{"type":173,"tag":1255,"props":11363,"children":11364},{"style":1763},[11365],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11367,"children":11368},{"style":1286},[11369],{"type":178,"value":833},{"type":173,"tag":1255,"props":11371,"children":11372},{"style":1763},[11373],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11375,"children":11376},{"style":1409},[11377],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11379,"children":11380},{"style":1763},[11381],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11383,"children":11384},{"style":1286},[11385],{"type":178,"value":833},{"type":173,"tag":1255,"props":11387,"children":11388},{"style":1763},[11389],{"type":178,"value":11390},"BigIntLike",{"type":173,"tag":1255,"props":11392,"children":11393},{"style":1409},[11394],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11396,"children":11397},{"style":1710},[11398],{"type":178,"value":11399}," getGlobalBigIntType",{"type":173,"tag":1255,"props":11401,"children":11402},{"style":2811},[11403],{"type":178,"value":11404},"() ",{"type":173,"tag":1255,"props":11406,"children":11407},{"style":1409},[11408],{"type":178,"value":4567},{"type":173,"tag":1255,"props":11410,"children":11411},{"class":1257,"line":1967},[11412,11416,11420,11424,11428,11432,11436,11441,11445,11450],{"type":173,"tag":1255,"props":11413,"children":11414},{"style":1763},[11415],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11417,"children":11418},{"style":1286},[11419],{"type":178,"value":833},{"type":173,"tag":1255,"props":11421,"children":11422},{"style":1763},[11423],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11425,"children":11426},{"style":1409},[11427],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11429,"children":11430},{"style":1763},[11431],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11433,"children":11434},{"style":1286},[11435],{"type":178,"value":833},{"type":173,"tag":1255,"props":11437,"children":11438},{"style":1763},[11439],{"type":178,"value":11440},"BooleanLike",{"type":173,"tag":1255,"props":11442,"children":11443},{"style":1409},[11444],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11446,"children":11447},{"style":1763},[11448],{"type":178,"value":11449}," globalBooleanType",{"type":173,"tag":1255,"props":11451,"children":11452},{"style":1409},[11453],{"type":178,"value":11313},{"type":173,"tag":1255,"props":11455,"children":11456},{"class":1257,"line":1976},[11457,11461,11465,11469,11473,11477,11481,11486,11490,11495,11499],{"type":173,"tag":1255,"props":11458,"children":11459},{"style":1763},[11460],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11462,"children":11463},{"style":1286},[11464],{"type":178,"value":833},{"type":173,"tag":1255,"props":11466,"children":11467},{"style":1763},[11468],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11470,"children":11471},{"style":1409},[11472],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11474,"children":11475},{"style":1763},[11476],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11478,"children":11479},{"style":1286},[11480],{"type":178,"value":833},{"type":173,"tag":1255,"props":11482,"children":11483},{"style":1763},[11484],{"type":178,"value":11485},"ESSymbolLike",{"type":173,"tag":1255,"props":11487,"children":11488},{"style":1409},[11489],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11491,"children":11492},{"style":1710},[11493],{"type":178,"value":11494}," getGlobalESSymbolType",{"type":173,"tag":1255,"props":11496,"children":11497},{"style":2811},[11498],{"type":178,"value":11404},{"type":173,"tag":1255,"props":11500,"children":11501},{"style":1409},[11502],{"type":178,"value":4567},{"type":173,"tag":1255,"props":11504,"children":11505},{"class":1257,"line":1999},[11506,11510,11514,11518,11522,11526,11530,11535,11539,11544],{"type":173,"tag":1255,"props":11507,"children":11508},{"style":1763},[11509],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11511,"children":11512},{"style":1286},[11513],{"type":178,"value":833},{"type":173,"tag":1255,"props":11515,"children":11516},{"style":1763},[11517],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11519,"children":11520},{"style":1409},[11521],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11523,"children":11524},{"style":1763},[11525],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11527,"children":11528},{"style":1286},[11529],{"type":178,"value":833},{"type":173,"tag":1255,"props":11531,"children":11532},{"style":1763},[11533],{"type":178,"value":11534},"NonPrimitive",{"type":173,"tag":1255,"props":11536,"children":11537},{"style":1409},[11538],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11540,"children":11541},{"style":1763},[11542],{"type":178,"value":11543}," emptyObjectType",{"type":173,"tag":1255,"props":11545,"children":11546},{"style":1409},[11547],{"type":178,"value":11313},{"type":173,"tag":1255,"props":11549,"children":11550},{"class":1257,"line":2008},[11551,11555,11559,11563,11567,11571,11575,11580,11584,11589],{"type":173,"tag":1255,"props":11552,"children":11553},{"style":1763},[11554],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11556,"children":11557},{"style":1286},[11558],{"type":178,"value":833},{"type":173,"tag":1255,"props":11560,"children":11561},{"style":1763},[11562],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11564,"children":11565},{"style":1409},[11566],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11568,"children":11569},{"style":1763},[11570],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11572,"children":11573},{"style":1286},[11574],{"type":178,"value":833},{"type":173,"tag":1255,"props":11576,"children":11577},{"style":1763},[11578],{"type":178,"value":11579},"Index",{"type":173,"tag":1255,"props":11581,"children":11582},{"style":1409},[11583],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11585,"children":11586},{"style":1763},[11587],{"type":178,"value":11588}," stringNumberSymbolType",{"type":173,"tag":1255,"props":11590,"children":11591},{"style":1409},[11592],{"type":178,"value":11313},{"type":173,"tag":1255,"props":11594,"children":11595},{"class":1257,"line":2030},[11596,11600,11604,11608,11612,11616,11620,11625,11629,11633,11638,11642,11646],{"type":173,"tag":1255,"props":11597,"children":11598},{"style":1763},[11599],{"type":178,"value":11202},{"type":173,"tag":1255,"props":11601,"children":11602},{"style":1286},[11603],{"type":178,"value":833},{"type":173,"tag":1255,"props":11605,"children":11606},{"style":1763},[11607],{"type":178,"value":3310},{"type":173,"tag":1255,"props":11609,"children":11610},{"style":1409},[11611],{"type":178,"value":3226},{"type":173,"tag":1255,"props":11613,"children":11614},{"style":1763},[11615],{"type":178,"value":5686},{"type":173,"tag":1255,"props":11617,"children":11618},{"style":1286},[11619],{"type":178,"value":833},{"type":173,"tag":1255,"props":11621,"children":11622},{"style":1763},[11623],{"type":178,"value":11624},"Unknown",{"type":173,"tag":1255,"props":11626,"children":11627},{"style":1409},[11628],{"type":178,"value":4124},{"type":173,"tag":1255,"props":11630,"children":11631},{"style":1409},[11632],{"type":178,"value":4432},{"type":173,"tag":1255,"props":11634,"children":11635},{"style":1763},[11636],{"type":178,"value":11637},"strictNullChecks",{"type":173,"tag":1255,"props":11639,"children":11640},{"style":1409},[11641],{"type":178,"value":1771},{"type":173,"tag":1255,"props":11643,"children":11644},{"style":1763},[11645],{"type":178,"value":11543},{"type":173,"tag":1255,"props":11647,"children":11648},{"style":1409},[11649],{"type":178,"value":11313},{"type":173,"tag":1255,"props":11651,"children":11652},{"class":1257,"line":2039},[11653],{"type":173,"tag":1255,"props":11654,"children":11655},{"style":1763},[11656],{"type":178,"value":11657},"    t\n",{"type":173,"tag":1255,"props":11659,"children":11660},{"class":1257,"line":2061},[11661],{"type":173,"tag":1255,"props":11662,"children":11663},{"style":1286},[11664],{"type":178,"value":1362},{"type":173,"tag":11666,"props":11667,"children":11668},"style",{},[11669],{"type":178,"value":11670},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":1292,"depth":1292,"links":11672},[11673,11674,11675,11676,11677,11678,11679,11680,11681,11682],{"id":183,"depth":1292,"text":183},{"id":1231,"depth":1292,"text":1231},{"id":1801,"depth":1292,"text":1804},{"id":2490,"depth":1292,"text":457},{"id":2552,"depth":1292,"text":2555},{"id":9328,"depth":1292,"text":9331},{"id":10253,"depth":1292,"text":10253},{"id":10676,"depth":1292,"text":10676},{"id":10776,"depth":1292,"text":10776},{"id":10883,"depth":1292,"text":10886},"markdown","content:8.source-code:_ts:typescript-compiler.md","content","8.source-code/_ts/typescript-compiler.md","8.source-code/_ts/typescript-compiler","md",[11690,11694],{"_path":11691,"title":11692,"description":11693},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",{"_path":11695,"title":11696,"description":11697},"/source-code/_ts/utility-types","Utility Types","TypeScript 内置的工具类型和高级类型，包括 Partial、Required、Readonly、Record、Pick、Omit、Exclude、Extract、NonNullable、Parameters、ReturnType 等。",1761757114204]