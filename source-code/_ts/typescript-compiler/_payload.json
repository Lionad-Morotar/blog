[{"data":1,"prerenderedAt":10065},["ShallowReactive",2],{"navigation":3,"/source-code/_ts/typescript-compiler":161,"/source-code/_ts/typescript-compiler-surround":10056},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":10050,"_id":10051,"_source":10052,"_file":10053,"_stem":10054,"_extension":10055},"/source-code/_ts/typescript-compiler","_ts",false,true,"","TypeScript 编译器","TypeScript 的整个编译流程层层递进，分工明确：预处理器确定文件范围，解析器生成抽象语法结构，Binder建立符号体系并理顺作用域，Program汇集全局视角，TypeChecker完成类型推断和诊断，最终由Emitter生成输出文件。",{"type":170,"children":171,"toc":10038},"root",[172,180,186,223,228,235,240,263,268,274,297,303,307,345,350,373,384,402,415,427,448,458,501,513,525,570,575,595,600,605,618,624,629,751,756,762,767,800,805,813,819,825,838,935,948,955,960,965,1163,1168,1173,1180,1185,1378,1383,1388,1395,1400,1705,1710,1715,1828,1833,2112,2125,2146,2555,2560,2942,2947,2952,3123,3136,3377,3382,3387,3444,3457,3464,3469,3731,3743,3855,3860,4477,4482,4560,4565,4742,4747,4938,4951,5132,5144,5149,5154,5159,5254,5266,5273,5278,5435,5440,5624,5645,5650,5655,5973,5978,6159,6164,6689,6694,6699,6815,6844,6849,7261,7266,7421,7426,7518,7523,7672,7677,7683,7688,7694,7700,7705,7976,7997,8602,8608,8613,8617,8622,8627,8632,8836,8841,8846,9041,9046,9052,9057,9142,9147,9153,9249,9255,9260,10032],{"type":173,"tag":174,"props":175,"children":176},"element","p",{},[177],{"type":178,"value":179},"text","本文以 TypeScript v5.9.0 版本为准，部分内容由 AI 辅助生成，请注意核对。",{"type":173,"tag":181,"props":182,"children":184},"h2",{"id":183},"工具",[185],{"type":178,"value":183},{"type":173,"tag":187,"props":188,"children":189},"ul",{},[190,203,213],{"type":173,"tag":191,"props":192,"children":193},"li",{},[194],{"type":173,"tag":195,"props":196,"children":200},"a",{"href":197,"rel":198},"https://ts-ast-viewer.com",[199],"nofollow",[201],{"type":178,"value":202},"TypeScript AST Viewer",{"type":173,"tag":191,"props":204,"children":205},{},[206],{"type":173,"tag":195,"props":207,"children":210},{"href":208,"rel":209},"https://www.speedscope.app/",[199],[211],{"type":178,"value":212},"SpeedScope FlameGraph Analyzer",{"type":173,"tag":191,"props":214,"children":215},{},[216],{"type":173,"tag":195,"props":217,"children":220},{"href":218,"rel":219},"https://www.typescriptlang.org/play",[199],[221],{"type":178,"value":222},"TypeScript Playground",{"type":173,"tag":181,"props":224,"children":226},{"id":225},"编译器概览",[227],{"type":178,"value":225},{"type":173,"tag":229,"props":230,"children":232},"h4",{"id":231},"如何调试-typescript-源码",[233],{"type":178,"value":234},"如何调试 TypeScript 源码？",{"type":173,"tag":174,"props":236,"children":237},{},[238],{"type":178,"value":239},"下载仓库源码后，使用带 SourceMap 选项编译 TypeScript，就可以用 VSCode 本地调试其代码。",{"type":173,"tag":174,"props":241,"children":242},{},[243,245,252,254,261],{"type":178,"value":244},"快速入门见：",{"type":173,"tag":195,"props":246,"children":249},{"href":247,"rel":248},"https://zhuanlan.zhihu.com/p/417298212",[199],[250],{"type":178,"value":251},"我读 Typescript 源码的秘诀都在这里了",{"type":178,"value":253},"，或参考更完整的：",{"type":173,"tag":195,"props":255,"children":258},{"href":256,"rel":257},"https://github.com/microsoft/TypeScript-Compiler-Notes",[199],[259],{"type":178,"value":260},"TypeScript Compiler Notes",{"type":178,"value":262},"。",{"type":173,"tag":174,"props":264,"children":265},{},[266],{"type":178,"value":267},"阅读源码时大量依赖了 Copilot：在发挥上下文翻译、解释代码、寻找模式等领域，AI 助手可以极大地提升阅读效率。同时，火焰图和 Call Tree 也能帮助理解代码的执行流程，它们仍然是 Copilot 时代不可缺少的工具。",{"type":173,"tag":229,"props":269,"children":271},{"id":270},"typescript-编译器的一些关键概念",[272],{"type":178,"value":273},"TypeScript 编译器的一些关键概念？",{"type":173,"tag":187,"props":275,"children":276},{},[277,282,287,292],{"type":173,"tag":191,"props":278,"children":279},{},[280],{"type":178,"value":281},"类型推断：TypeScript 编译器会根据代码上下文自动推断变量、函数参数和返回值的类型，而不需要显式声明类型。这种推断基于控制流分析，能够在不同代码路径上动态调整类型。",{"type":173,"tag":191,"props":283,"children":284},{},[285],{"type":178,"value":286},"控制流分析：Control flow analysis（控制流分析）是 TypeScript 编译器中的一项核心技术，用于根据代码的执行流程，动态推断和分析变量的类型。它让类型系统不仅静态地分析声明，还能理解程序运行过程中不同代码路径上变量类型的变化，从而实现更精确的类型检查和类型推断。",{"type":173,"tag":191,"props":288,"children":289},{},[290],{"type":178,"value":291},"TypeFacts：TypeFacts 用来描述某个类型具体特性与关系的“标志位枚举类型（bitmask）”，允许高效地表示、记录和快速判断某个类型的一些“事实真相”，这些事实往往和类型保护（type guard）、控制流类型收窄、类型兼容性分析等环节密切关联。",{"type":173,"tag":191,"props":293,"children":294},{},[295],{"type":178,"value":296},"表观类型（Apparent Type）：经过某些规则处理后，暴露给外部的类型结构，常用于类型检查、属性访问、签名推断等场景，如联合类型的表观类型可能是所有成员的联合。",{"type":173,"tag":229,"props":298,"children":300},{"id":299},"编译器的整体流程",[301],{"type":178,"value":302},"编译器的整体流程？",{"type":173,"tag":174,"props":304,"children":305},{},[306],{"type":178,"value":168},{"type":173,"tag":174,"props":308,"children":309},{},[310,312,319,321,327,329,335,337,343],{"type":178,"value":311},"编译过程的起点是预处理器。它会扫描代码中的 ",{"type":173,"tag":313,"props":314,"children":316},"code",{"className":315},[],[317],{"type":178,"value":318},"/// \u003Creference>",{"type":178,"value":320}," 指令、",{"type":173,"tag":313,"props":322,"children":324},{"className":323},[],[325],{"type":178,"value":326},"require",{"type":178,"value":328}," 语句以及 ",{"type":173,"tag":313,"props":330,"children":332},{"className":331},[],[333],{"type":178,"value":334},"import",{"type":178,"value":336}," 语句，从而",{"type":173,"tag":338,"props":339,"children":340},"strong",{},[341],{"type":178,"value":342},"确定该次编译需要包含哪些源文件",{"type":178,"value":344},"，为后续分析和构建依赖树奠定基础。",{"type":173,"tag":174,"props":346,"children":347},{},[348],{"type":178,"value":349},"在文件依赖关系明确之后，解析器（Parser）会将源文件逐个转换为抽象语法树（AST，Abstract Syntax Tree）。",{"type":173,"tag":187,"props":351,"children":352},{},[353,363],{"type":173,"tag":191,"props":354,"children":355},{},[356,361],{"type":173,"tag":338,"props":357,"children":358},{},[359],{"type":178,"value":360},"AST",{"type":178,"value":362}," 是源代码的结构化表达，仅关心语法结构，与具体实现细节无关。",{"type":173,"tag":191,"props":364,"children":365},{},[366,371],{"type":173,"tag":338,"props":367,"children":368},{},[369],{"type":178,"value":370},"SourceFile",{"type":178,"value":372}," 对象承担了每个源文件的语法树载体，内部不仅保存 AST，还包含文件名、源码文本等元数据。",{"type":173,"tag":174,"props":374,"children":375},{},[376,378,383],{"type":178,"value":377},"Binder 负责遍历 AST 节点，",{"type":173,"tag":338,"props":379,"children":380},{},[381],{"type":178,"value":382},"为每个命名实体（如变量、函数、类、接口等）分配并绑定唯一的 Symbol（符号）",{"type":178,"value":262},{"type":173,"tag":187,"props":385,"children":386},{},[387,392,397],{"type":173,"tag":191,"props":388,"children":389},{},[390],{"type":178,"value":391},"支持声明合并：例如同名的类与命名空间可以合并为同一个 Symbol。",{"type":173,"tag":191,"props":393,"children":394},{},[395],{"type":178,"value":396},"每个 Symbol 记录所有相关声明节点信息，同时处理作用域（Scope），确保符号在各自的封闭作用域中正确分层与隔离。",{"type":173,"tag":191,"props":398,"children":399},{},[400],{"type":178,"value":401},"这一过程保证了后续类型分析时，每个引用都能找到其唯一且准确的定义。",{"type":173,"tag":174,"props":403,"children":404},{},[405,407,413],{"type":178,"value":406},"通过调用 ",{"type":173,"tag":313,"props":408,"children":410},{"className":409},[],[411],{"type":178,"value":412},"createSourceFile",{"type":178,"value":414}," API，可生成 SourceFile 及其对应的 Symbol 构建成果。",{"type":173,"tag":174,"props":416,"children":417},{},[418,420,425],{"type":178,"value":419},"经过绑定以后，",{"type":173,"tag":338,"props":421,"children":422},{},[423],{"type":178,"value":424},"Program",{"type":178,"value":426}," 对象被创建出来。",{"type":173,"tag":187,"props":428,"children":429},{},[430,435],{"type":173,"tag":191,"props":431,"children":432},{},[433],{"type":178,"value":434},"Program 是当前所有 SourceFile 的全局集合，加上一组编译选项（CompilerOptions）。",{"type":173,"tag":191,"props":436,"children":437},{},[438,440,446],{"type":178,"value":439},"通过 ",{"type":173,"tag":313,"props":441,"children":443},{"className":442},[],[444],{"type":178,"value":445},"createProgram",{"type":178,"value":447}," API 生成，在整个编译期间为所有源文件和类型分析提供统一的上下文。",{"type":173,"tag":174,"props":449,"children":450},{},[451,456],{"type":173,"tag":338,"props":452,"children":453},{},[454],{"type":178,"value":455},"TypeChecker",{"type":178,"value":457}," 是 TypeScript 类型系统的核心引擎。从 Program 实例获取所有必要信息后进入工作状态：",{"type":173,"tag":187,"props":459,"children":460},{},[461,475,488],{"type":173,"tag":191,"props":462,"children":463},{},[464,469,473],{"type":173,"tag":338,"props":465,"children":466},{},[467],{"type":178,"value":468},"符号合并与全局符号表",{"type":173,"tag":470,"props":471,"children":472},"br",{},[],{"type":178,"value":474},"\nTypeChecker 首先将所有 SourceFile 中的 Symbol 进行合并，如跨文件的命名空间、重载声明等，构建全局符号表，精准反映整个程序的命名与类型空间。",{"type":173,"tag":191,"props":476,"children":477},{},[478,483,486],{"type":173,"tag":338,"props":479,"children":480},{},[481],{"type":178,"value":482},"类型推断与约束分析",{"type":173,"tag":470,"props":484,"children":485},{},[],{"type":178,"value":487},"\n负责为每个语法节点分配具体的 Type，判断类型兼容性、推断泛型等。",{"type":173,"tag":191,"props":489,"children":490},{},[491,496,499],{"type":173,"tag":338,"props":492,"children":493},{},[494],{"type":178,"value":495},"生成语义诊断（Semantic Diagnostics）",{"type":173,"tag":470,"props":497,"children":498},{},[],{"type":178,"value":500},"\n检查类型错误、不一致或潜在缺陷，生成准确的错误提示信息。",{"type":173,"tag":174,"props":502,"children":503},{},[504,506,511],{"type":178,"value":505},"TypeChecker 在整个过程中采用",{"type":173,"tag":338,"props":507,"children":508},{},[509],{"type":178,"value":510},"惰性计算（lazy evaluation）策略",{"type":178,"value":512},"，只对用户当前查询或编辑的内容进行深入分析，极大提升了性能与交互体验。",{"type":173,"tag":174,"props":514,"children":515},{},[516,518,523],{"type":178,"value":517},"最后由 ",{"type":173,"tag":338,"props":519,"children":520},{},[521],{"type":178,"value":522},"Emitter",{"type":178,"value":524}," 负责根据语法树和类型信息，为每个 SourceFile 生成具体的输出文件，包括：",{"type":173,"tag":187,"props":526,"children":527},{},[528,539,550,559],{"type":173,"tag":191,"props":529,"children":530},{},[531,537],{"type":173,"tag":313,"props":532,"children":534},{"className":533},[],[535],{"type":178,"value":536},".js",{"type":178,"value":538},"（JavaScript 编译产物）",{"type":173,"tag":191,"props":540,"children":541},{},[542,548],{"type":173,"tag":313,"props":543,"children":545},{"className":544},[],[546],{"type":178,"value":547},".d.ts",{"type":178,"value":549},"（类型声明文件）",{"type":173,"tag":191,"props":551,"children":552},{},[553],{"type":173,"tag":313,"props":554,"children":556},{"className":555},[],[557],{"type":178,"value":558},".jsx",{"type":173,"tag":191,"props":560,"children":561},{},[562,568],{"type":173,"tag":313,"props":563,"children":565},{"className":564},[],[566],{"type":178,"value":567},".js.map",{"type":178,"value":569},"（源码映射，便于调试）",{"type":173,"tag":174,"props":571,"children":572},{},[573],{"type":178,"value":574},"Emitter 按需输出这些文件，为运行时环境或类型消费方（如编辑器、其他项目等）提供必要的支撑。",{"type":173,"tag":174,"props":576,"children":577},{},[578,580,585,587,594],{"type":178,"value":579},"见：",{"type":173,"tag":195,"props":581,"children":583},{"href":256,"rel":582},[199],[584],{"type":178,"value":260},{"type":178,"value":586},"、",{"type":173,"tag":195,"props":588,"children":591},{"href":589,"rel":590},"https://jkchao.github.io/typescript-book-chinese/compiler/overview.html",[199],[592],{"type":178,"value":593},"TypeScript Deep Dive",{"type":178,"value":262},{"type":173,"tag":181,"props":596,"children":598},{"id":597},"类型概览",[599],{"type":178,"value":597},{"type":173,"tag":229,"props":601,"children":603},{"id":602},"常用概念",[604],{"type":178,"value":602},{"type":173,"tag":187,"props":606,"children":607},{},[608,613],{"type":173,"tag":191,"props":609,"children":610},{},[611],{"type":178,"value":612},"内建类型（IntrinsicType）：用于内部实现的、基础的类型，例如 string、number、boolean、void、any、unknown 等。",{"type":173,"tag":191,"props":614,"children":615},{},[616],{"type":178,"value":617},"可刷新类型（FreshableType）：用于描述那些可以“重置”的类型。这个概念常出现在对象字面量或数组字面量等类型推断时，编译器需要将其标记为“新鲜”的，以便后续类型收窄和属性检查。",{"type":173,"tag":229,"props":619,"children":621},{"id":620},"any-和-unknown-的区别",[622],{"type":178,"value":623},"any 和 unknown 的区别？",{"type":173,"tag":174,"props":625,"children":626},{},[627],{"type":178,"value":628},"unknown 相比 any 类型更严格，早期暴露错误，防止隐式 any 引发潜在问题，这一点可以从编译器对 JS 和 TS 文件设置的默认类型分辨。在纯 JS 文件，TypeScript 要最大程度兼容原生 JS 的灵活性，不阻碍开发流程、不引入过多类型错误。因此，遇到无法推断的泛型类型参数，默认就是 any，完全信任开发者、不过多类型限制。而在 TS 中，如果无法从上下文推断出泛型类型参数的默认值，返回 unknown，让错误早暴露，引导开发者补全类型声明或修正逻辑。",{"type":173,"tag":630,"props":631,"children":635},"pre",{"className":632,"code":633,"language":634,"meta":166,"style":166},"language-ts shiki shiki-themes material-theme-lighter github-light github-dark monokai","function getDefaultTypeArgumentType(isInJavaScriptFile: boolean): Type {\n  return isInJavaScriptFile ? anyType : unknownType;\n}\n","ts",[636],{"type":173,"tag":313,"props":637,"children":638},{"__ignoreMap":166},[639,701,742],{"type":173,"tag":640,"props":641,"children":644},"span",{"class":642,"line":643},"line",1,[645,651,657,663,669,675,681,686,690,696],{"type":173,"tag":640,"props":646,"children":648},{"style":647},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[649],{"type":178,"value":650},"function",{"type":173,"tag":640,"props":652,"children":654},{"style":653},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[655],{"type":178,"value":656}," getDefaultTypeArgumentType",{"type":173,"tag":640,"props":658,"children":660},{"style":659},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[661],{"type":178,"value":662},"(",{"type":173,"tag":640,"props":664,"children":666},{"style":665},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[667],{"type":178,"value":668},"isInJavaScriptFile",{"type":173,"tag":640,"props":670,"children":672},{"style":671},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[673],{"type":178,"value":674},":",{"type":173,"tag":640,"props":676,"children":678},{"style":677},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[679],{"type":178,"value":680}," boolean",{"type":173,"tag":640,"props":682,"children":683},{"style":659},[684],{"type":178,"value":685},")",{"type":173,"tag":640,"props":687,"children":688},{"style":671},[689],{"type":178,"value":674},{"type":173,"tag":640,"props":691,"children":693},{"style":692},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[694],{"type":178,"value":695}," Type",{"type":173,"tag":640,"props":697,"children":698},{"style":659},[699],{"type":178,"value":700}," {\n",{"type":173,"tag":640,"props":702,"children":704},{"class":642,"line":703},2,[705,711,717,722,727,732,737],{"type":173,"tag":640,"props":706,"children":708},{"style":707},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[709],{"type":178,"value":710},"  return",{"type":173,"tag":640,"props":712,"children":714},{"style":713},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[715],{"type":178,"value":716}," isInJavaScriptFile",{"type":173,"tag":640,"props":718,"children":719},{"style":671},[720],{"type":178,"value":721}," ?",{"type":173,"tag":640,"props":723,"children":724},{"style":713},[725],{"type":178,"value":726}," anyType",{"type":173,"tag":640,"props":728,"children":729},{"style":671},[730],{"type":178,"value":731}," :",{"type":173,"tag":640,"props":733,"children":734},{"style":713},[735],{"type":178,"value":736}," unknownType",{"type":173,"tag":640,"props":738,"children":739},{"style":659},[740],{"type":178,"value":741},";\n",{"type":173,"tag":640,"props":743,"children":745},{"class":642,"line":744},3,[746],{"type":173,"tag":640,"props":747,"children":748},{"style":659},[749],{"type":178,"value":750},"}\n",{"type":173,"tag":181,"props":752,"children":754},{"id":753},"program",[755],{"type":178,"value":424},{"type":173,"tag":229,"props":757,"children":759},{"id":758},"program-的基本流程",[760],{"type":178,"value":761},"Program 的基本流程",{"type":173,"tag":174,"props":763,"children":764},{},[765],{"type":178,"value":766},"在命令行执行 tsc 时，Program 协调了 TypeScript 管道的工作过程，如：读取项目配置（tsconfig）、文件预处理（模块解析）、语法树解析、绑定（绑定语法树和符号）、类型检查（根据语法树及其绑定检查类型错误）、转换（将语法树转换为符合配置的 JavaScript 代码）、输出。",{"type":173,"tag":187,"props":768,"children":769},{},[770,775,780,785,790,795],{"type":173,"tag":191,"props":771,"children":772},{},[773],{"type":178,"value":774},"scanner：读取文件内容，分词，生成 Token 流。",{"type":173,"tag":191,"props":776,"children":777},{},[778],{"type":178,"value":779},"parser：将 Token 流转换为语法树（AST）。",{"type":173,"tag":191,"props":781,"children":782},{},[783],{"type":178,"value":784},"binder：把程序中的变量、函数、类等标识符绑定到具体的符号（Symbol）对象上，组织出符号表，为后续类型检查、类型推断和代码生成提供基础语义信息。",{"type":173,"tag":191,"props":786,"children":787},{},[788],{"type":178,"value":789},"checker：根据绑定的符号表，进行类型检查和类型推断，确保代码符合 TypeScript 的类型规则。",{"type":173,"tag":191,"props":791,"children":792},{},[793],{"type":178,"value":794},"transformer：将语法树转换为符合目标 JavaScript 版本的代码，可能包括语法转换、特性降级等。",{"type":173,"tag":191,"props":796,"children":797},{},[798],{"type":178,"value":799},"emitter：将转换后的语法树输出为 JavaScript 代码文件。",{"type":173,"tag":174,"props":801,"children":802},{},[803],{"type":178,"value":804},"关于 Checker 的某种概况性说明：",{"type":173,"tag":174,"props":806,"children":807},{},[808],{"type":173,"tag":809,"props":810,"children":812},"img",{"alt":166,"src":811},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507120154134.png",[],{"type":173,"tag":181,"props":814,"children":816},{"id":815},"checker",[817],{"type":178,"value":818},"Checker",{"type":173,"tag":229,"props":820,"children":822},{"id":821},"一个典型的类型检查的调用过程",[823],{"type":178,"value":824},"一个典型的类型检查的调用过程？",{"type":173,"tag":174,"props":826,"children":827},{},[828,830,836],{"type":178,"value":829},"以下代码为例，分析使用 TS Compiler API 的 ",{"type":173,"tag":313,"props":831,"children":833},{"className":832},[],[834],{"type":178,"value":835},"checker.getTypeAtLocation",{"type":178,"value":837}," 获取 x1 的类型的过程。",{"type":173,"tag":630,"props":839,"children":843},{"className":840,"code":841,"language":842,"meta":166,"style":166},"language-typescript shiki shiki-themes material-theme-lighter github-light github-dark monokai","declare function fn(x: number): string\nconst x1 = fn(1)\n","typescript",[844],{"type":173,"tag":313,"props":845,"children":846},{"__ignoreMap":166},[847,897],{"type":173,"tag":640,"props":848,"children":849},{"class":642,"line":643},[850,856,861,866,870,875,879,884,888,892],{"type":173,"tag":640,"props":851,"children":853},{"style":852},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[854],{"type":178,"value":855},"declare",{"type":173,"tag":640,"props":857,"children":858},{"style":647},[859],{"type":178,"value":860}," function",{"type":173,"tag":640,"props":862,"children":863},{"style":653},[864],{"type":178,"value":865}," fn",{"type":173,"tag":640,"props":867,"children":868},{"style":659},[869],{"type":178,"value":662},{"type":173,"tag":640,"props":871,"children":872},{"style":665},[873],{"type":178,"value":874},"x",{"type":173,"tag":640,"props":876,"children":877},{"style":671},[878],{"type":178,"value":674},{"type":173,"tag":640,"props":880,"children":881},{"style":677},[882],{"type":178,"value":883}," number",{"type":173,"tag":640,"props":885,"children":886},{"style":659},[887],{"type":178,"value":685},{"type":173,"tag":640,"props":889,"children":890},{"style":671},[891],{"type":178,"value":674},{"type":173,"tag":640,"props":893,"children":894},{"style":677},[895],{"type":178,"value":896}," string\n",{"type":173,"tag":640,"props":898,"children":899},{"class":642,"line":703},[900,905,911,916,920,924,930],{"type":173,"tag":640,"props":901,"children":902},{"style":647},[903],{"type":178,"value":904},"const",{"type":173,"tag":640,"props":906,"children":908},{"style":907},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[909],{"type":178,"value":910}," x1",{"type":173,"tag":640,"props":912,"children":913},{"style":671},[914],{"type":178,"value":915}," =",{"type":173,"tag":640,"props":917,"children":918},{"style":653},[919],{"type":178,"value":865},{"type":173,"tag":640,"props":921,"children":922},{"style":713},[923],{"type":178,"value":662},{"type":173,"tag":640,"props":925,"children":927},{"style":926},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[928],{"type":178,"value":929},"1",{"type":173,"tag":640,"props":931,"children":932},{"style":713},[933],{"type":178,"value":934},")\n",{"type":173,"tag":174,"props":936,"children":937},{},[938,940,946],{"type":178,"value":939},"火焰图从 ",{"type":173,"tag":313,"props":941,"children":943},{"className":942},[],[944],{"type":178,"value":945},"trace",{"type":178,"value":947}," 函数开始看起。需要注意的是，由于采样精度有限，所以火焰图中可能会有一些函数调用被省略。",{"type":173,"tag":174,"props":949,"children":950},{},[951],{"type":173,"tag":809,"props":952,"children":954},{"alt":166,"src":953},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140933194.png",[],{"type":173,"tag":174,"props":956,"children":957},{},[958],{"type":178,"value":959},"以下是详细的调用过程说明。",{"type":173,"tag":174,"props":961,"children":962},{},[963],{"type":178,"value":964},"每一个 Program 都有自己的 TypeChecker 实例，其中提供了 getTypeOfLocation API，用来获取某个位置的节点类型。",{"type":173,"tag":630,"props":966,"children":968},{"className":632,"code":967,"language":634,"meta":166,"style":166},"function createTypeChecker(program: Program): TypeChecker {\n  return {\n    getTypeAtLocation: nodeIn => {\n      const node = getParseTreeNode(nodeIn)\n      return node ? getTypeOfNode(node) : errorType\n    },\n  }\n}\n",[969],{"type":173,"tag":313,"props":970,"children":971},{"__ignoreMap":166},[972,1018,1029,1055,1092,1137,1146,1155],{"type":173,"tag":640,"props":973,"children":974},{"class":642,"line":643},[975,979,984,988,992,996,1001,1005,1009,1014],{"type":173,"tag":640,"props":976,"children":977},{"style":647},[978],{"type":178,"value":650},{"type":173,"tag":640,"props":980,"children":981},{"style":653},[982],{"type":178,"value":983}," createTypeChecker",{"type":173,"tag":640,"props":985,"children":986},{"style":659},[987],{"type":178,"value":662},{"type":173,"tag":640,"props":989,"children":990},{"style":665},[991],{"type":178,"value":753},{"type":173,"tag":640,"props":993,"children":994},{"style":671},[995],{"type":178,"value":674},{"type":173,"tag":640,"props":997,"children":998},{"style":692},[999],{"type":178,"value":1000}," Program",{"type":173,"tag":640,"props":1002,"children":1003},{"style":659},[1004],{"type":178,"value":685},{"type":173,"tag":640,"props":1006,"children":1007},{"style":671},[1008],{"type":178,"value":674},{"type":173,"tag":640,"props":1010,"children":1011},{"style":692},[1012],{"type":178,"value":1013}," TypeChecker",{"type":173,"tag":640,"props":1015,"children":1016},{"style":659},[1017],{"type":178,"value":700},{"type":173,"tag":640,"props":1019,"children":1020},{"class":642,"line":703},[1021,1025],{"type":173,"tag":640,"props":1022,"children":1023},{"style":707},[1024],{"type":178,"value":710},{"type":173,"tag":640,"props":1026,"children":1027},{"style":659},[1028],{"type":178,"value":700},{"type":173,"tag":640,"props":1030,"children":1031},{"class":642,"line":744},[1032,1037,1041,1046,1051],{"type":173,"tag":640,"props":1033,"children":1034},{"style":653},[1035],{"type":178,"value":1036},"    getTypeAtLocation",{"type":173,"tag":640,"props":1038,"children":1039},{"style":659},[1040],{"type":178,"value":674},{"type":173,"tag":640,"props":1042,"children":1043},{"style":665},[1044],{"type":178,"value":1045}," nodeIn",{"type":173,"tag":640,"props":1047,"children":1048},{"style":647},[1049],{"type":178,"value":1050}," =>",{"type":173,"tag":640,"props":1052,"children":1053},{"style":659},[1054],{"type":178,"value":700},{"type":173,"tag":640,"props":1056,"children":1058},{"class":642,"line":1057},4,[1059,1064,1069,1073,1078,1083,1088],{"type":173,"tag":640,"props":1060,"children":1061},{"style":647},[1062],{"type":178,"value":1063},"      const",{"type":173,"tag":640,"props":1065,"children":1066},{"style":907},[1067],{"type":178,"value":1068}," node",{"type":173,"tag":640,"props":1070,"children":1071},{"style":671},[1072],{"type":178,"value":915},{"type":173,"tag":640,"props":1074,"children":1075},{"style":653},[1076],{"type":178,"value":1077}," getParseTreeNode",{"type":173,"tag":640,"props":1079,"children":1081},{"style":1080},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1082],{"type":178,"value":662},{"type":173,"tag":640,"props":1084,"children":1085},{"style":713},[1086],{"type":178,"value":1087},"nodeIn",{"type":173,"tag":640,"props":1089,"children":1090},{"style":1080},[1091],{"type":178,"value":934},{"type":173,"tag":640,"props":1093,"children":1095},{"class":642,"line":1094},5,[1096,1101,1105,1109,1114,1118,1123,1128,1132],{"type":173,"tag":640,"props":1097,"children":1098},{"style":707},[1099],{"type":178,"value":1100},"      return",{"type":173,"tag":640,"props":1102,"children":1103},{"style":713},[1104],{"type":178,"value":1068},{"type":173,"tag":640,"props":1106,"children":1107},{"style":671},[1108],{"type":178,"value":721},{"type":173,"tag":640,"props":1110,"children":1111},{"style":653},[1112],{"type":178,"value":1113}," getTypeOfNode",{"type":173,"tag":640,"props":1115,"children":1116},{"style":1080},[1117],{"type":178,"value":662},{"type":173,"tag":640,"props":1119,"children":1120},{"style":713},[1121],{"type":178,"value":1122},"node",{"type":173,"tag":640,"props":1124,"children":1125},{"style":1080},[1126],{"type":178,"value":1127},") ",{"type":173,"tag":640,"props":1129,"children":1130},{"style":671},[1131],{"type":178,"value":674},{"type":173,"tag":640,"props":1133,"children":1134},{"style":713},[1135],{"type":178,"value":1136}," errorType\n",{"type":173,"tag":640,"props":1138,"children":1140},{"class":642,"line":1139},6,[1141],{"type":173,"tag":640,"props":1142,"children":1143},{"style":659},[1144],{"type":178,"value":1145},"    },\n",{"type":173,"tag":640,"props":1147,"children":1149},{"class":642,"line":1148},7,[1150],{"type":173,"tag":640,"props":1151,"children":1152},{"style":659},[1153],{"type":178,"value":1154},"  }\n",{"type":173,"tag":640,"props":1156,"children":1158},{"class":642,"line":1157},8,[1159],{"type":173,"tag":640,"props":1160,"children":1161},{"style":659},[1162],{"type":178,"value":750},{"type":173,"tag":174,"props":1164,"children":1165},{},[1166],{"type":178,"value":1167},"由于 TypeScript 在编译等过程中，经常会对语法树（AST）做各种变换，比如类型分析、代码合成（emit helper）、自动补充内容等。node.original 主要解决 AST 节点在变换、派生或合成后，如何溯源的问题。如重构、自动补全、语法高亮、定义跳转、引用查找，都需要知道原始的节点信息。所以从上代码能看到，getTypeAtLocation 先找到了原始节点，再获取其类型。",{"type":173,"tag":174,"props":1169,"children":1170},{},[1171],{"type":178,"value":1172},"x1 的原始节点数据结构如图。",{"type":173,"tag":174,"props":1174,"children":1175},{},[1176],{"type":173,"tag":809,"props":1177,"children":1179},{"alt":166,"src":1178},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140424234.png",[],{"type":173,"tag":174,"props":1181,"children":1182},{},[1183],{"type":178,"value":1184},"getTyp调用不同的处理函数，因为 x1 位于变量声明节点，所以流程进入对应 if 语句，先获取节点对应的 Symbol，再从中获取类型。",{"type":173,"tag":630,"props":1186,"children":1188},{"className":632,"code":1187,"language":634,"meta":166,"style":166},"function getTypeOfNode(node: Node): Type {\n  if (isExpressionNode(node)) {\n    //...\n  }\n  //...\n  if (isDeclarationNameOrImportPropertyName(node)) {\n    return getTypeOfSymbol(getSymbolAtLocation(node))\n  }\n}\n",[1189],{"type":173,"tag":313,"props":1190,"children":1191},{"__ignoreMap":166},[1192,1236,1272,1281,1288,1296,1328,1363,1370],{"type":173,"tag":640,"props":1193,"children":1194},{"class":642,"line":643},[1195,1199,1203,1207,1211,1215,1220,1224,1228,1232],{"type":173,"tag":640,"props":1196,"children":1197},{"style":647},[1198],{"type":178,"value":650},{"type":173,"tag":640,"props":1200,"children":1201},{"style":653},[1202],{"type":178,"value":1113},{"type":173,"tag":640,"props":1204,"children":1205},{"style":659},[1206],{"type":178,"value":662},{"type":173,"tag":640,"props":1208,"children":1209},{"style":665},[1210],{"type":178,"value":1122},{"type":173,"tag":640,"props":1212,"children":1213},{"style":671},[1214],{"type":178,"value":674},{"type":173,"tag":640,"props":1216,"children":1217},{"style":692},[1218],{"type":178,"value":1219}," Node",{"type":173,"tag":640,"props":1221,"children":1222},{"style":659},[1223],{"type":178,"value":685},{"type":173,"tag":640,"props":1225,"children":1226},{"style":671},[1227],{"type":178,"value":674},{"type":173,"tag":640,"props":1229,"children":1230},{"style":692},[1231],{"type":178,"value":695},{"type":173,"tag":640,"props":1233,"children":1234},{"style":659},[1235],{"type":178,"value":700},{"type":173,"tag":640,"props":1237,"children":1238},{"class":642,"line":703},[1239,1244,1249,1254,1258,1262,1267],{"type":173,"tag":640,"props":1240,"children":1241},{"style":707},[1242],{"type":178,"value":1243},"  if",{"type":173,"tag":640,"props":1245,"children":1246},{"style":1080},[1247],{"type":178,"value":1248}," (",{"type":173,"tag":640,"props":1250,"children":1251},{"style":653},[1252],{"type":178,"value":1253},"isExpressionNode",{"type":173,"tag":640,"props":1255,"children":1256},{"style":1080},[1257],{"type":178,"value":662},{"type":173,"tag":640,"props":1259,"children":1260},{"style":713},[1261],{"type":178,"value":1122},{"type":173,"tag":640,"props":1263,"children":1264},{"style":1080},[1265],{"type":178,"value":1266},")) ",{"type":173,"tag":640,"props":1268,"children":1269},{"style":659},[1270],{"type":178,"value":1271},"{\n",{"type":173,"tag":640,"props":1273,"children":1274},{"class":642,"line":744},[1275],{"type":173,"tag":640,"props":1276,"children":1278},{"style":1277},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1279],{"type":178,"value":1280},"    //...\n",{"type":173,"tag":640,"props":1282,"children":1283},{"class":642,"line":1057},[1284],{"type":173,"tag":640,"props":1285,"children":1286},{"style":659},[1287],{"type":178,"value":1154},{"type":173,"tag":640,"props":1289,"children":1290},{"class":642,"line":1094},[1291],{"type":173,"tag":640,"props":1292,"children":1293},{"style":1277},[1294],{"type":178,"value":1295},"  //...\n",{"type":173,"tag":640,"props":1297,"children":1298},{"class":642,"line":1139},[1299,1303,1307,1312,1316,1320,1324],{"type":173,"tag":640,"props":1300,"children":1301},{"style":707},[1302],{"type":178,"value":1243},{"type":173,"tag":640,"props":1304,"children":1305},{"style":1080},[1306],{"type":178,"value":1248},{"type":173,"tag":640,"props":1308,"children":1309},{"style":653},[1310],{"type":178,"value":1311},"isDeclarationNameOrImportPropertyName",{"type":173,"tag":640,"props":1313,"children":1314},{"style":1080},[1315],{"type":178,"value":662},{"type":173,"tag":640,"props":1317,"children":1318},{"style":713},[1319],{"type":178,"value":1122},{"type":173,"tag":640,"props":1321,"children":1322},{"style":1080},[1323],{"type":178,"value":1266},{"type":173,"tag":640,"props":1325,"children":1326},{"style":659},[1327],{"type":178,"value":1271},{"type":173,"tag":640,"props":1329,"children":1330},{"class":642,"line":1148},[1331,1336,1341,1345,1350,1354,1358],{"type":173,"tag":640,"props":1332,"children":1333},{"style":707},[1334],{"type":178,"value":1335},"    return",{"type":173,"tag":640,"props":1337,"children":1338},{"style":653},[1339],{"type":178,"value":1340}," getTypeOfSymbol",{"type":173,"tag":640,"props":1342,"children":1343},{"style":1080},[1344],{"type":178,"value":662},{"type":173,"tag":640,"props":1346,"children":1347},{"style":653},[1348],{"type":178,"value":1349},"getSymbolAtLocation",{"type":173,"tag":640,"props":1351,"children":1352},{"style":1080},[1353],{"type":178,"value":662},{"type":173,"tag":640,"props":1355,"children":1356},{"style":713},[1357],{"type":178,"value":1122},{"type":173,"tag":640,"props":1359,"children":1360},{"style":1080},[1361],{"type":178,"value":1362},"))\n",{"type":173,"tag":640,"props":1364,"children":1365},{"class":642,"line":1157},[1366],{"type":173,"tag":640,"props":1367,"children":1368},{"style":659},[1369],{"type":178,"value":1154},{"type":173,"tag":640,"props":1371,"children":1373},{"class":642,"line":1372},9,[1374],{"type":173,"tag":640,"props":1375,"children":1376},{"style":659},[1377],{"type":178,"value":750},{"type":173,"tag":174,"props":1379,"children":1380},{},[1381],{"type":178,"value":1382},"为什么要从 Symbol 而不是节点获取类型呢？当源码转换成 AST 时，是不携带上下文信息的，需要再将 AST 交给 Binder 处理成 Symbol。每个 Symbol 都记录所有相关声明节点信息，同时处理了作用域（Scope），可以保证 Symbol 在各自的封闭作用域中正确分层与隔离，以便更准确的拿到类型。",{"type":173,"tag":174,"props":1384,"children":1385},{},[1386],{"type":178,"value":1387},"以下是 x1 位置对应的 Symbol。",{"type":173,"tag":174,"props":1389,"children":1390},{},[1391],{"type":173,"tag":809,"props":1392,"children":1394},{"alt":166,"src":1393},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140437709.png",[],{"type":173,"tag":174,"props":1396,"children":1397},{},[1398],{"type":178,"value":1399},"getTypeOfSymbol 会根据 Symbol 的检查状态及类别，调用不同的处理函数。举例，某些复杂类型需要延迟计算其类型，那么它可能携带 DeferredType 的检查状态。而 x1 对应的 Symbol 是简单类型，直接根据其类型交由 getTypeOfVariableOrParameterOrProperty 处理。",{"type":173,"tag":630,"props":1401,"children":1403},{"className":632,"code":1402,"language":634,"meta":166,"style":166},"function getTypeOfSymbol(symbol: Symbol): Type {\n  const checkFlags = getCheckFlags(symbol)\n  if (checkFlags & CheckFlags.DeferredType) {\n    return getTypeOfSymbolWithDeferredType(symbol)\n  }\n  //...\n  if (symbol.flags & (SymbolFlags.Variable | SymbolFlags.Property)) {\n    return getTypeOfVariableOrParameterOrProperty(symbol)\n  }\n  //...\n  return errorType;\n}\n",[1404],{"type":173,"tag":313,"props":1405,"children":1406},{"__ignoreMap":166},[1407,1452,1486,1530,1554,1561,1568,1641,1665,1672,1680,1697],{"type":173,"tag":640,"props":1408,"children":1409},{"class":642,"line":643},[1410,1414,1418,1422,1427,1431,1436,1440,1444,1448],{"type":173,"tag":640,"props":1411,"children":1412},{"style":647},[1413],{"type":178,"value":650},{"type":173,"tag":640,"props":1415,"children":1416},{"style":653},[1417],{"type":178,"value":1340},{"type":173,"tag":640,"props":1419,"children":1420},{"style":659},[1421],{"type":178,"value":662},{"type":173,"tag":640,"props":1423,"children":1424},{"style":665},[1425],{"type":178,"value":1426},"symbol",{"type":173,"tag":640,"props":1428,"children":1429},{"style":671},[1430],{"type":178,"value":674},{"type":173,"tag":640,"props":1432,"children":1433},{"style":692},[1434],{"type":178,"value":1435}," Symbol",{"type":173,"tag":640,"props":1437,"children":1438},{"style":659},[1439],{"type":178,"value":685},{"type":173,"tag":640,"props":1441,"children":1442},{"style":671},[1443],{"type":178,"value":674},{"type":173,"tag":640,"props":1445,"children":1446},{"style":692},[1447],{"type":178,"value":695},{"type":173,"tag":640,"props":1449,"children":1450},{"style":659},[1451],{"type":178,"value":700},{"type":173,"tag":640,"props":1453,"children":1454},{"class":642,"line":703},[1455,1460,1465,1469,1474,1478,1482],{"type":173,"tag":640,"props":1456,"children":1457},{"style":647},[1458],{"type":178,"value":1459},"  const",{"type":173,"tag":640,"props":1461,"children":1462},{"style":907},[1463],{"type":178,"value":1464}," checkFlags",{"type":173,"tag":640,"props":1466,"children":1467},{"style":671},[1468],{"type":178,"value":915},{"type":173,"tag":640,"props":1470,"children":1471},{"style":653},[1472],{"type":178,"value":1473}," getCheckFlags",{"type":173,"tag":640,"props":1475,"children":1476},{"style":1080},[1477],{"type":178,"value":662},{"type":173,"tag":640,"props":1479,"children":1480},{"style":713},[1481],{"type":178,"value":1426},{"type":173,"tag":640,"props":1483,"children":1484},{"style":1080},[1485],{"type":178,"value":934},{"type":173,"tag":640,"props":1487,"children":1488},{"class":642,"line":744},[1489,1493,1497,1502,1507,1512,1517,1522,1526],{"type":173,"tag":640,"props":1490,"children":1491},{"style":707},[1492],{"type":178,"value":1243},{"type":173,"tag":640,"props":1494,"children":1495},{"style":1080},[1496],{"type":178,"value":1248},{"type":173,"tag":640,"props":1498,"children":1499},{"style":713},[1500],{"type":178,"value":1501},"checkFlags",{"type":173,"tag":640,"props":1503,"children":1504},{"style":671},[1505],{"type":178,"value":1506}," &",{"type":173,"tag":640,"props":1508,"children":1509},{"style":713},[1510],{"type":178,"value":1511}," CheckFlags",{"type":173,"tag":640,"props":1513,"children":1514},{"style":659},[1515],{"type":178,"value":1516},".",{"type":173,"tag":640,"props":1518,"children":1519},{"style":713},[1520],{"type":178,"value":1521},"DeferredType",{"type":173,"tag":640,"props":1523,"children":1524},{"style":1080},[1525],{"type":178,"value":1127},{"type":173,"tag":640,"props":1527,"children":1528},{"style":659},[1529],{"type":178,"value":1271},{"type":173,"tag":640,"props":1531,"children":1532},{"class":642,"line":1057},[1533,1537,1542,1546,1550],{"type":173,"tag":640,"props":1534,"children":1535},{"style":707},[1536],{"type":178,"value":1335},{"type":173,"tag":640,"props":1538,"children":1539},{"style":653},[1540],{"type":178,"value":1541}," getTypeOfSymbolWithDeferredType",{"type":173,"tag":640,"props":1543,"children":1544},{"style":1080},[1545],{"type":178,"value":662},{"type":173,"tag":640,"props":1547,"children":1548},{"style":713},[1549],{"type":178,"value":1426},{"type":173,"tag":640,"props":1551,"children":1552},{"style":1080},[1553],{"type":178,"value":934},{"type":173,"tag":640,"props":1555,"children":1556},{"class":642,"line":1094},[1557],{"type":173,"tag":640,"props":1558,"children":1559},{"style":659},[1560],{"type":178,"value":1154},{"type":173,"tag":640,"props":1562,"children":1563},{"class":642,"line":1139},[1564],{"type":173,"tag":640,"props":1565,"children":1566},{"style":1277},[1567],{"type":178,"value":1295},{"type":173,"tag":640,"props":1569,"children":1570},{"class":642,"line":1148},[1571,1575,1579,1583,1587,1592,1596,1600,1605,1609,1614,1619,1624,1628,1633,1637],{"type":173,"tag":640,"props":1572,"children":1573},{"style":707},[1574],{"type":178,"value":1243},{"type":173,"tag":640,"props":1576,"children":1577},{"style":1080},[1578],{"type":178,"value":1248},{"type":173,"tag":640,"props":1580,"children":1581},{"style":713},[1582],{"type":178,"value":1426},{"type":173,"tag":640,"props":1584,"children":1585},{"style":659},[1586],{"type":178,"value":1516},{"type":173,"tag":640,"props":1588,"children":1589},{"style":713},[1590],{"type":178,"value":1591},"flags",{"type":173,"tag":640,"props":1593,"children":1594},{"style":671},[1595],{"type":178,"value":1506},{"type":173,"tag":640,"props":1597,"children":1598},{"style":1080},[1599],{"type":178,"value":1248},{"type":173,"tag":640,"props":1601,"children":1602},{"style":713},[1603],{"type":178,"value":1604},"SymbolFlags",{"type":173,"tag":640,"props":1606,"children":1607},{"style":659},[1608],{"type":178,"value":1516},{"type":173,"tag":640,"props":1610,"children":1611},{"style":713},[1612],{"type":178,"value":1613},"Variable",{"type":173,"tag":640,"props":1615,"children":1616},{"style":671},[1617],{"type":178,"value":1618}," |",{"type":173,"tag":640,"props":1620,"children":1621},{"style":713},[1622],{"type":178,"value":1623}," SymbolFlags",{"type":173,"tag":640,"props":1625,"children":1626},{"style":659},[1627],{"type":178,"value":1516},{"type":173,"tag":640,"props":1629,"children":1630},{"style":713},[1631],{"type":178,"value":1632},"Property",{"type":173,"tag":640,"props":1634,"children":1635},{"style":1080},[1636],{"type":178,"value":1266},{"type":173,"tag":640,"props":1638,"children":1639},{"style":659},[1640],{"type":178,"value":1271},{"type":173,"tag":640,"props":1642,"children":1643},{"class":642,"line":1157},[1644,1648,1653,1657,1661],{"type":173,"tag":640,"props":1645,"children":1646},{"style":707},[1647],{"type":178,"value":1335},{"type":173,"tag":640,"props":1649,"children":1650},{"style":653},[1651],{"type":178,"value":1652}," getTypeOfVariableOrParameterOrProperty",{"type":173,"tag":640,"props":1654,"children":1655},{"style":1080},[1656],{"type":178,"value":662},{"type":173,"tag":640,"props":1658,"children":1659},{"style":713},[1660],{"type":178,"value":1426},{"type":173,"tag":640,"props":1662,"children":1663},{"style":1080},[1664],{"type":178,"value":934},{"type":173,"tag":640,"props":1666,"children":1667},{"class":642,"line":1372},[1668],{"type":173,"tag":640,"props":1669,"children":1670},{"style":659},[1671],{"type":178,"value":1154},{"type":173,"tag":640,"props":1673,"children":1675},{"class":642,"line":1674},10,[1676],{"type":173,"tag":640,"props":1677,"children":1678},{"style":1277},[1679],{"type":178,"value":1295},{"type":173,"tag":640,"props":1681,"children":1683},{"class":642,"line":1682},11,[1684,1688,1693],{"type":173,"tag":640,"props":1685,"children":1686},{"style":707},[1687],{"type":178,"value":710},{"type":173,"tag":640,"props":1689,"children":1690},{"style":713},[1691],{"type":178,"value":1692}," errorType",{"type":173,"tag":640,"props":1694,"children":1695},{"style":659},[1696],{"type":178,"value":741},{"type":173,"tag":640,"props":1698,"children":1700},{"class":642,"line":1699},12,[1701],{"type":173,"tag":640,"props":1702,"children":1703},{"style":659},[1704],{"type":178,"value":750},{"type":173,"tag":174,"props":1706,"children":1707},{},[1708],{"type":178,"value":1709},"Symbol 有 links 属性，用来存储符号的附加信息，如缓存、临时数据、类型检查相关状态。获取 Symbol 的类型时，只要类型不是上下文相关的，那么计算结果会缓存到 Symbol.links.type 属性中。",{"type":173,"tag":174,"props":1711,"children":1712},{},[1713],{"type":178,"value":1714},"什么是上下文相关的类型呢？举个例子，以下代码中的 item 的类型要从其父 Symbol 中推断出来，那么它就是上下文相关的。",{"type":173,"tag":630,"props":1716,"children":1718},{"className":632,"code":1717,"language":634,"meta":166,"style":166},"const arr = [1, 2, 3]\narr.map((item) => item.toFixed())\n",[1719],{"type":173,"tag":313,"props":1720,"children":1721},{"__ignoreMap":166},[1722,1771],{"type":173,"tag":640,"props":1723,"children":1724},{"class":642,"line":643},[1725,1729,1734,1738,1743,1747,1752,1757,1761,1766],{"type":173,"tag":640,"props":1726,"children":1727},{"style":647},[1728],{"type":178,"value":904},{"type":173,"tag":640,"props":1730,"children":1731},{"style":907},[1732],{"type":178,"value":1733}," arr",{"type":173,"tag":640,"props":1735,"children":1736},{"style":671},[1737],{"type":178,"value":915},{"type":173,"tag":640,"props":1739,"children":1740},{"style":713},[1741],{"type":178,"value":1742}," [",{"type":173,"tag":640,"props":1744,"children":1745},{"style":926},[1746],{"type":178,"value":929},{"type":173,"tag":640,"props":1748,"children":1749},{"style":659},[1750],{"type":178,"value":1751},",",{"type":173,"tag":640,"props":1753,"children":1754},{"style":926},[1755],{"type":178,"value":1756}," 2",{"type":173,"tag":640,"props":1758,"children":1759},{"style":659},[1760],{"type":178,"value":1751},{"type":173,"tag":640,"props":1762,"children":1763},{"style":926},[1764],{"type":178,"value":1765}," 3",{"type":173,"tag":640,"props":1767,"children":1768},{"style":713},[1769],{"type":178,"value":1770},"]\n",{"type":173,"tag":640,"props":1772,"children":1773},{"class":642,"line":703},[1774,1779,1783,1788,1792,1796,1801,1805,1809,1814,1818,1823],{"type":173,"tag":640,"props":1775,"children":1776},{"style":713},[1777],{"type":178,"value":1778},"arr",{"type":173,"tag":640,"props":1780,"children":1781},{"style":659},[1782],{"type":178,"value":1516},{"type":173,"tag":640,"props":1784,"children":1785},{"style":653},[1786],{"type":178,"value":1787},"map",{"type":173,"tag":640,"props":1789,"children":1790},{"style":713},[1791],{"type":178,"value":662},{"type":173,"tag":640,"props":1793,"children":1794},{"style":659},[1795],{"type":178,"value":662},{"type":173,"tag":640,"props":1797,"children":1798},{"style":665},[1799],{"type":178,"value":1800},"item",{"type":173,"tag":640,"props":1802,"children":1803},{"style":659},[1804],{"type":178,"value":685},{"type":173,"tag":640,"props":1806,"children":1807},{"style":647},[1808],{"type":178,"value":1050},{"type":173,"tag":640,"props":1810,"children":1811},{"style":713},[1812],{"type":178,"value":1813}," item",{"type":173,"tag":640,"props":1815,"children":1816},{"style":659},[1817],{"type":178,"value":1516},{"type":173,"tag":640,"props":1819,"children":1820},{"style":653},[1821],{"type":178,"value":1822},"toFixed",{"type":173,"tag":640,"props":1824,"children":1825},{"style":713},[1826],{"type":178,"value":1827},"())\n",{"type":173,"tag":174,"props":1829,"children":1830},{},[1831],{"type":178,"value":1832},"显然 x1 是简单函数，不是上下文相关类型，我们继续看流程，getTypeOfVariableOrParameterOrProperty 实际调用了另一个函数去计算类型，它本身实现的是缓存模式，此概念稍后会介绍。实际的计算由 getTypeOfVariableOrParameterOrPropertyWorker 实现，需要从变量声明 symbol.valueDeclaration 中推断类型信息。",{"type":173,"tag":630,"props":1834,"children":1836},{"className":632,"code":1835,"language":634,"meta":166,"style":166},"function getTypeOfVariableOrParameterOrPropertyWorker(symbol: Symbol): Type {\n  if (\n    isParameter(declaration)\n    || isPropertyDeclaration(declaration)\n    || isPropertySignature(declaration)\n    || isVariableDeclaration(declaration)\n    || isBindingElement(declaration)\n    || isJSDocPropertyLikeTag(declaration)\n  ) {\n    type = getWidenedTypeForVariableLikeDeclaration(declaration, /*reportErrors*/ true);\n  }\n}\n",[1837],{"type":173,"tag":313,"props":1838,"children":1839},{"__ignoreMap":166},[1840,1884,1896,1917,1942,1966,1990,2014,2038,2050,2098,2105],{"type":173,"tag":640,"props":1841,"children":1842},{"class":642,"line":643},[1843,1847,1852,1856,1860,1864,1868,1872,1876,1880],{"type":173,"tag":640,"props":1844,"children":1845},{"style":647},[1846],{"type":178,"value":650},{"type":173,"tag":640,"props":1848,"children":1849},{"style":653},[1850],{"type":178,"value":1851}," getTypeOfVariableOrParameterOrPropertyWorker",{"type":173,"tag":640,"props":1853,"children":1854},{"style":659},[1855],{"type":178,"value":662},{"type":173,"tag":640,"props":1857,"children":1858},{"style":665},[1859],{"type":178,"value":1426},{"type":173,"tag":640,"props":1861,"children":1862},{"style":671},[1863],{"type":178,"value":674},{"type":173,"tag":640,"props":1865,"children":1866},{"style":692},[1867],{"type":178,"value":1435},{"type":173,"tag":640,"props":1869,"children":1870},{"style":659},[1871],{"type":178,"value":685},{"type":173,"tag":640,"props":1873,"children":1874},{"style":671},[1875],{"type":178,"value":674},{"type":173,"tag":640,"props":1877,"children":1878},{"style":692},[1879],{"type":178,"value":695},{"type":173,"tag":640,"props":1881,"children":1882},{"style":659},[1883],{"type":178,"value":700},{"type":173,"tag":640,"props":1885,"children":1886},{"class":642,"line":703},[1887,1891],{"type":173,"tag":640,"props":1888,"children":1889},{"style":707},[1890],{"type":178,"value":1243},{"type":173,"tag":640,"props":1892,"children":1893},{"style":1080},[1894],{"type":178,"value":1895}," (\n",{"type":173,"tag":640,"props":1897,"children":1898},{"class":642,"line":744},[1899,1904,1908,1913],{"type":173,"tag":640,"props":1900,"children":1901},{"style":653},[1902],{"type":178,"value":1903},"    isParameter",{"type":173,"tag":640,"props":1905,"children":1906},{"style":1080},[1907],{"type":178,"value":662},{"type":173,"tag":640,"props":1909,"children":1910},{"style":713},[1911],{"type":178,"value":1912},"declaration",{"type":173,"tag":640,"props":1914,"children":1915},{"style":1080},[1916],{"type":178,"value":934},{"type":173,"tag":640,"props":1918,"children":1919},{"class":642,"line":1057},[1920,1925,1930,1934,1938],{"type":173,"tag":640,"props":1921,"children":1922},{"style":671},[1923],{"type":178,"value":1924},"    ||",{"type":173,"tag":640,"props":1926,"children":1927},{"style":653},[1928],{"type":178,"value":1929}," isPropertyDeclaration",{"type":173,"tag":640,"props":1931,"children":1932},{"style":1080},[1933],{"type":178,"value":662},{"type":173,"tag":640,"props":1935,"children":1936},{"style":713},[1937],{"type":178,"value":1912},{"type":173,"tag":640,"props":1939,"children":1940},{"style":1080},[1941],{"type":178,"value":934},{"type":173,"tag":640,"props":1943,"children":1944},{"class":642,"line":1094},[1945,1949,1954,1958,1962],{"type":173,"tag":640,"props":1946,"children":1947},{"style":671},[1948],{"type":178,"value":1924},{"type":173,"tag":640,"props":1950,"children":1951},{"style":653},[1952],{"type":178,"value":1953}," isPropertySignature",{"type":173,"tag":640,"props":1955,"children":1956},{"style":1080},[1957],{"type":178,"value":662},{"type":173,"tag":640,"props":1959,"children":1960},{"style":713},[1961],{"type":178,"value":1912},{"type":173,"tag":640,"props":1963,"children":1964},{"style":1080},[1965],{"type":178,"value":934},{"type":173,"tag":640,"props":1967,"children":1968},{"class":642,"line":1139},[1969,1973,1978,1982,1986],{"type":173,"tag":640,"props":1970,"children":1971},{"style":671},[1972],{"type":178,"value":1924},{"type":173,"tag":640,"props":1974,"children":1975},{"style":653},[1976],{"type":178,"value":1977}," isVariableDeclaration",{"type":173,"tag":640,"props":1979,"children":1980},{"style":1080},[1981],{"type":178,"value":662},{"type":173,"tag":640,"props":1983,"children":1984},{"style":713},[1985],{"type":178,"value":1912},{"type":173,"tag":640,"props":1987,"children":1988},{"style":1080},[1989],{"type":178,"value":934},{"type":173,"tag":640,"props":1991,"children":1992},{"class":642,"line":1148},[1993,1997,2002,2006,2010],{"type":173,"tag":640,"props":1994,"children":1995},{"style":671},[1996],{"type":178,"value":1924},{"type":173,"tag":640,"props":1998,"children":1999},{"style":653},[2000],{"type":178,"value":2001}," isBindingElement",{"type":173,"tag":640,"props":2003,"children":2004},{"style":1080},[2005],{"type":178,"value":662},{"type":173,"tag":640,"props":2007,"children":2008},{"style":713},[2009],{"type":178,"value":1912},{"type":173,"tag":640,"props":2011,"children":2012},{"style":1080},[2013],{"type":178,"value":934},{"type":173,"tag":640,"props":2015,"children":2016},{"class":642,"line":1157},[2017,2021,2026,2030,2034],{"type":173,"tag":640,"props":2018,"children":2019},{"style":671},[2020],{"type":178,"value":1924},{"type":173,"tag":640,"props":2022,"children":2023},{"style":653},[2024],{"type":178,"value":2025}," isJSDocPropertyLikeTag",{"type":173,"tag":640,"props":2027,"children":2028},{"style":1080},[2029],{"type":178,"value":662},{"type":173,"tag":640,"props":2031,"children":2032},{"style":713},[2033],{"type":178,"value":1912},{"type":173,"tag":640,"props":2035,"children":2036},{"style":1080},[2037],{"type":178,"value":934},{"type":173,"tag":640,"props":2039,"children":2040},{"class":642,"line":1372},[2041,2046],{"type":173,"tag":640,"props":2042,"children":2043},{"style":1080},[2044],{"type":178,"value":2045},"  ) ",{"type":173,"tag":640,"props":2047,"children":2048},{"style":659},[2049],{"type":178,"value":1271},{"type":173,"tag":640,"props":2051,"children":2052},{"class":642,"line":1674},[2053,2058,2062,2067,2071,2075,2079,2084,2090,2094],{"type":173,"tag":640,"props":2054,"children":2055},{"style":713},[2056],{"type":178,"value":2057},"    type",{"type":173,"tag":640,"props":2059,"children":2060},{"style":671},[2061],{"type":178,"value":915},{"type":173,"tag":640,"props":2063,"children":2064},{"style":653},[2065],{"type":178,"value":2066}," getWidenedTypeForVariableLikeDeclaration",{"type":173,"tag":640,"props":2068,"children":2069},{"style":1080},[2070],{"type":178,"value":662},{"type":173,"tag":640,"props":2072,"children":2073},{"style":713},[2074],{"type":178,"value":1912},{"type":173,"tag":640,"props":2076,"children":2077},{"style":659},[2078],{"type":178,"value":1751},{"type":173,"tag":640,"props":2080,"children":2081},{"style":1277},[2082],{"type":178,"value":2083}," /*reportErrors*/",{"type":173,"tag":640,"props":2085,"children":2087},{"style":2086},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2088],{"type":178,"value":2089}," true",{"type":173,"tag":640,"props":2091,"children":2092},{"style":1080},[2093],{"type":178,"value":685},{"type":173,"tag":640,"props":2095,"children":2096},{"style":659},[2097],{"type":178,"value":741},{"type":173,"tag":640,"props":2099,"children":2100},{"class":642,"line":1682},[2101],{"type":173,"tag":640,"props":2102,"children":2103},{"style":659},[2104],{"type":178,"value":1154},{"type":173,"tag":640,"props":2106,"children":2107},{"class":642,"line":1699},[2108],{"type":173,"tag":640,"props":2109,"children":2110},{"style":659},[2111],{"type":178,"value":750},{"type":173,"tag":174,"props":2113,"children":2114},{},[2115,2117,2123],{"type":178,"value":2116},"这里涉及一个 TS 类型推断的核心概念：widened type。在某些情况下，如返回值、参数赋值的类型计算中，需要从字面量类型中推导出更宽泛的类型，例如：",{"type":173,"tag":313,"props":2118,"children":2120},{"className":2119},[],[2121],{"type":178,"value":2122},"const x = '123'",{"type":178,"value":2124}," 中的 x 的类型是 string 而不是字面量 '123'，除非指定 const。把字面量扩宽为 string 的逻辑，就是在以下代码 widenTypeInferredFromInitializer 中处理的。简便起见，这里忽略 widened type 的细节继续看。",{"type":173,"tag":174,"props":2126,"children":2127},{},[2128,2130,2136,2138,2144],{"type":178,"value":2129},"JS 中，除了不带值初始化的变量声明，常见的变量声明有两种形式：一种如我们举例代码使用的 ",{"type":173,"tag":313,"props":2131,"children":2133},{"className":2132},[],[2134],{"type":178,"value":2135},"const x1 = f1(1)",{"type":178,"value":2137},"，另一种是包含类型注解的 ",{"type":173,"tag":313,"props":2139,"children":2141},{"className":2140},[],[2142],{"type":178,"value":2143},"let x2: string = 'hello'",{"type":178,"value":2145},"。后者可以直接从类型注解中拿到实际类型，在 declaredType 取得值后直接返回对应类型 ，而前者需要处理声明的初始化器（DeclarationInitializer）。",{"type":173,"tag":630,"props":2147,"children":2149},{"className":632,"code":2148,"language":634,"meta":166,"style":166},"function getTypeForVariableLikeDeclaration(\n    declaration: ParameterDeclaration | PropertyDeclaration | PropertySignature | VariableDeclaration | BindingElement | JSDocPropertyLikeTag,\n    includeOptionality: boolean,\n    checkMode: CheckMode,\n): Type | undefined {\n  const declaredType = tryGetTypeFromEffectiveTypeNode(declaration)\n  if (declaredType) {\n    //...\n  }\n  if (hasOnlyExpressionInitializer(declaration) && !!declaration.initializer) {\n    const type = widenTypeInferredFromInitializer(declaration, checkDeclarationInitializer(declaration, checkMode))\n    return addOptionality(type, isProperty, isOptional)\n  }\n}\n",[2150],{"type":173,"tag":313,"props":2151,"children":2152},{"__ignoreMap":166},[2153,2170,2237,2257,2278,2306,2339,2363,2370,2377,2436,2496,2539,2547],{"type":173,"tag":640,"props":2154,"children":2155},{"class":642,"line":643},[2156,2160,2165],{"type":173,"tag":640,"props":2157,"children":2158},{"style":647},[2159],{"type":178,"value":650},{"type":173,"tag":640,"props":2161,"children":2162},{"style":653},[2163],{"type":178,"value":2164}," getTypeForVariableLikeDeclaration",{"type":173,"tag":640,"props":2166,"children":2167},{"style":659},[2168],{"type":178,"value":2169},"(\n",{"type":173,"tag":640,"props":2171,"children":2172},{"class":642,"line":703},[2173,2178,2182,2187,2191,2196,2200,2205,2209,2214,2218,2223,2227,2232],{"type":173,"tag":640,"props":2174,"children":2175},{"style":665},[2176],{"type":178,"value":2177},"    declaration",{"type":173,"tag":640,"props":2179,"children":2180},{"style":671},[2181],{"type":178,"value":674},{"type":173,"tag":640,"props":2183,"children":2184},{"style":692},[2185],{"type":178,"value":2186}," ParameterDeclaration",{"type":173,"tag":640,"props":2188,"children":2189},{"style":671},[2190],{"type":178,"value":1618},{"type":173,"tag":640,"props":2192,"children":2193},{"style":692},[2194],{"type":178,"value":2195}," PropertyDeclaration",{"type":173,"tag":640,"props":2197,"children":2198},{"style":671},[2199],{"type":178,"value":1618},{"type":173,"tag":640,"props":2201,"children":2202},{"style":692},[2203],{"type":178,"value":2204}," PropertySignature",{"type":173,"tag":640,"props":2206,"children":2207},{"style":671},[2208],{"type":178,"value":1618},{"type":173,"tag":640,"props":2210,"children":2211},{"style":692},[2212],{"type":178,"value":2213}," VariableDeclaration",{"type":173,"tag":640,"props":2215,"children":2216},{"style":671},[2217],{"type":178,"value":1618},{"type":173,"tag":640,"props":2219,"children":2220},{"style":692},[2221],{"type":178,"value":2222}," BindingElement",{"type":173,"tag":640,"props":2224,"children":2225},{"style":671},[2226],{"type":178,"value":1618},{"type":173,"tag":640,"props":2228,"children":2229},{"style":692},[2230],{"type":178,"value":2231}," JSDocPropertyLikeTag",{"type":173,"tag":640,"props":2233,"children":2234},{"style":659},[2235],{"type":178,"value":2236},",\n",{"type":173,"tag":640,"props":2238,"children":2239},{"class":642,"line":744},[2240,2245,2249,2253],{"type":173,"tag":640,"props":2241,"children":2242},{"style":665},[2243],{"type":178,"value":2244},"    includeOptionality",{"type":173,"tag":640,"props":2246,"children":2247},{"style":671},[2248],{"type":178,"value":674},{"type":173,"tag":640,"props":2250,"children":2251},{"style":677},[2252],{"type":178,"value":680},{"type":173,"tag":640,"props":2254,"children":2255},{"style":659},[2256],{"type":178,"value":2236},{"type":173,"tag":640,"props":2258,"children":2259},{"class":642,"line":1057},[2260,2265,2269,2274],{"type":173,"tag":640,"props":2261,"children":2262},{"style":665},[2263],{"type":178,"value":2264},"    checkMode",{"type":173,"tag":640,"props":2266,"children":2267},{"style":671},[2268],{"type":178,"value":674},{"type":173,"tag":640,"props":2270,"children":2271},{"style":692},[2272],{"type":178,"value":2273}," CheckMode",{"type":173,"tag":640,"props":2275,"children":2276},{"style":659},[2277],{"type":178,"value":2236},{"type":173,"tag":640,"props":2279,"children":2280},{"class":642,"line":1094},[2281,2285,2289,2293,2297,2302],{"type":173,"tag":640,"props":2282,"children":2283},{"style":659},[2284],{"type":178,"value":685},{"type":173,"tag":640,"props":2286,"children":2287},{"style":671},[2288],{"type":178,"value":674},{"type":173,"tag":640,"props":2290,"children":2291},{"style":692},[2292],{"type":178,"value":695},{"type":173,"tag":640,"props":2294,"children":2295},{"style":671},[2296],{"type":178,"value":1618},{"type":173,"tag":640,"props":2298,"children":2299},{"style":677},[2300],{"type":178,"value":2301}," undefined",{"type":173,"tag":640,"props":2303,"children":2304},{"style":659},[2305],{"type":178,"value":700},{"type":173,"tag":640,"props":2307,"children":2308},{"class":642,"line":1139},[2309,2313,2318,2322,2327,2331,2335],{"type":173,"tag":640,"props":2310,"children":2311},{"style":647},[2312],{"type":178,"value":1459},{"type":173,"tag":640,"props":2314,"children":2315},{"style":907},[2316],{"type":178,"value":2317}," declaredType",{"type":173,"tag":640,"props":2319,"children":2320},{"style":671},[2321],{"type":178,"value":915},{"type":173,"tag":640,"props":2323,"children":2324},{"style":653},[2325],{"type":178,"value":2326}," tryGetTypeFromEffectiveTypeNode",{"type":173,"tag":640,"props":2328,"children":2329},{"style":1080},[2330],{"type":178,"value":662},{"type":173,"tag":640,"props":2332,"children":2333},{"style":713},[2334],{"type":178,"value":1912},{"type":173,"tag":640,"props":2336,"children":2337},{"style":1080},[2338],{"type":178,"value":934},{"type":173,"tag":640,"props":2340,"children":2341},{"class":642,"line":1148},[2342,2346,2350,2355,2359],{"type":173,"tag":640,"props":2343,"children":2344},{"style":707},[2345],{"type":178,"value":1243},{"type":173,"tag":640,"props":2347,"children":2348},{"style":1080},[2349],{"type":178,"value":1248},{"type":173,"tag":640,"props":2351,"children":2352},{"style":713},[2353],{"type":178,"value":2354},"declaredType",{"type":173,"tag":640,"props":2356,"children":2357},{"style":1080},[2358],{"type":178,"value":1127},{"type":173,"tag":640,"props":2360,"children":2361},{"style":659},[2362],{"type":178,"value":1271},{"type":173,"tag":640,"props":2364,"children":2365},{"class":642,"line":1157},[2366],{"type":173,"tag":640,"props":2367,"children":2368},{"style":1277},[2369],{"type":178,"value":1280},{"type":173,"tag":640,"props":2371,"children":2372},{"class":642,"line":1372},[2373],{"type":173,"tag":640,"props":2374,"children":2375},{"style":659},[2376],{"type":178,"value":1154},{"type":173,"tag":640,"props":2378,"children":2379},{"class":642,"line":1674},[2380,2384,2388,2393,2397,2401,2405,2410,2415,2419,2423,2428,2432],{"type":173,"tag":640,"props":2381,"children":2382},{"style":707},[2383],{"type":178,"value":1243},{"type":173,"tag":640,"props":2385,"children":2386},{"style":1080},[2387],{"type":178,"value":1248},{"type":173,"tag":640,"props":2389,"children":2390},{"style":653},[2391],{"type":178,"value":2392},"hasOnlyExpressionInitializer",{"type":173,"tag":640,"props":2394,"children":2395},{"style":1080},[2396],{"type":178,"value":662},{"type":173,"tag":640,"props":2398,"children":2399},{"style":713},[2400],{"type":178,"value":1912},{"type":173,"tag":640,"props":2402,"children":2403},{"style":1080},[2404],{"type":178,"value":1127},{"type":173,"tag":640,"props":2406,"children":2407},{"style":671},[2408],{"type":178,"value":2409},"&&",{"type":173,"tag":640,"props":2411,"children":2412},{"style":671},[2413],{"type":178,"value":2414}," !!",{"type":173,"tag":640,"props":2416,"children":2417},{"style":713},[2418],{"type":178,"value":1912},{"type":173,"tag":640,"props":2420,"children":2421},{"style":659},[2422],{"type":178,"value":1516},{"type":173,"tag":640,"props":2424,"children":2425},{"style":713},[2426],{"type":178,"value":2427},"initializer",{"type":173,"tag":640,"props":2429,"children":2430},{"style":1080},[2431],{"type":178,"value":1127},{"type":173,"tag":640,"props":2433,"children":2434},{"style":659},[2435],{"type":178,"value":1271},{"type":173,"tag":640,"props":2437,"children":2438},{"class":642,"line":1682},[2439,2444,2449,2453,2458,2462,2466,2470,2475,2479,2483,2487,2492],{"type":173,"tag":640,"props":2440,"children":2441},{"style":647},[2442],{"type":178,"value":2443},"    const",{"type":173,"tag":640,"props":2445,"children":2446},{"style":907},[2447],{"type":178,"value":2448}," type",{"type":173,"tag":640,"props":2450,"children":2451},{"style":671},[2452],{"type":178,"value":915},{"type":173,"tag":640,"props":2454,"children":2455},{"style":653},[2456],{"type":178,"value":2457}," widenTypeInferredFromInitializer",{"type":173,"tag":640,"props":2459,"children":2460},{"style":1080},[2461],{"type":178,"value":662},{"type":173,"tag":640,"props":2463,"children":2464},{"style":713},[2465],{"type":178,"value":1912},{"type":173,"tag":640,"props":2467,"children":2468},{"style":659},[2469],{"type":178,"value":1751},{"type":173,"tag":640,"props":2471,"children":2472},{"style":653},[2473],{"type":178,"value":2474}," checkDeclarationInitializer",{"type":173,"tag":640,"props":2476,"children":2477},{"style":1080},[2478],{"type":178,"value":662},{"type":173,"tag":640,"props":2480,"children":2481},{"style":713},[2482],{"type":178,"value":1912},{"type":173,"tag":640,"props":2484,"children":2485},{"style":659},[2486],{"type":178,"value":1751},{"type":173,"tag":640,"props":2488,"children":2489},{"style":713},[2490],{"type":178,"value":2491}," checkMode",{"type":173,"tag":640,"props":2493,"children":2494},{"style":1080},[2495],{"type":178,"value":1362},{"type":173,"tag":640,"props":2497,"children":2498},{"class":642,"line":1699},[2499,2503,2508,2512,2517,2521,2526,2530,2535],{"type":173,"tag":640,"props":2500,"children":2501},{"style":707},[2502],{"type":178,"value":1335},{"type":173,"tag":640,"props":2504,"children":2505},{"style":653},[2506],{"type":178,"value":2507}," addOptionality",{"type":173,"tag":640,"props":2509,"children":2510},{"style":1080},[2511],{"type":178,"value":662},{"type":173,"tag":640,"props":2513,"children":2514},{"style":713},[2515],{"type":178,"value":2516},"type",{"type":173,"tag":640,"props":2518,"children":2519},{"style":659},[2520],{"type":178,"value":1751},{"type":173,"tag":640,"props":2522,"children":2523},{"style":713},[2524],{"type":178,"value":2525}," isProperty",{"type":173,"tag":640,"props":2527,"children":2528},{"style":659},[2529],{"type":178,"value":1751},{"type":173,"tag":640,"props":2531,"children":2532},{"style":713},[2533],{"type":178,"value":2534}," isOptional",{"type":173,"tag":640,"props":2536,"children":2537},{"style":1080},[2538],{"type":178,"value":934},{"type":173,"tag":640,"props":2540,"children":2542},{"class":642,"line":2541},13,[2543],{"type":173,"tag":640,"props":2544,"children":2545},{"style":659},[2546],{"type":178,"value":1154},{"type":173,"tag":640,"props":2548,"children":2550},{"class":642,"line":2549},14,[2551],{"type":173,"tag":640,"props":2552,"children":2553},{"style":659},[2554],{"type":178,"value":750},{"type":173,"tag":174,"props":2556,"children":2557},{},[2558],{"type":178,"value":2559},"checkDeclarationInitializer 会根据上下文类型来处理简单赋值和复杂赋值（解构赋值）的类型，而我们例子中的代码 x1 结构很简单，是一个不带泛型参数的函数的调用，所以可以直接从其返回值中获取赋值的类型，并由此进入 checkNonNullType，再进入 checkExpression 函数。",{"type":173,"tag":630,"props":2561,"children":2563},{"className":632,"code":2562,"language":634,"meta":166,"style":166},"function getQuickTypeOfExpression(node: Expression): Type | undefined {\n  //...\n  // Optimize for the common case of a call to a function with a single non-generic call\n  // signature where we can just fetch the return type without checking the arguments.\n  if (isCallExpression(expr) && expr.expression.kind !== SyntaxKind.SuperKeyword && !isRequireCall(expr, /*requireStringLiteralLikeArgument*/ true) && !isSymbolOrSymbolForCall(expr) && !isImportCall(expr)) {\n      return isCallChain(expr) ? getReturnTypeOfSingleNonGenericSignatureOfCallChain(expr) :\n          getReturnTypeOfSingleNonGenericCallSignature(checkNonNullExpression(expr.expression));\n  }\n  //...\n  return undefined;\n}\n",[2564],{"type":173,"tag":313,"props":2565,"children":2566},{"__ignoreMap":166},[2567,2620,2627,2635,2643,2812,2863,2905,2912,2919,2935],{"type":173,"tag":640,"props":2568,"children":2569},{"class":642,"line":643},[2570,2574,2579,2583,2587,2591,2596,2600,2604,2608,2612,2616],{"type":173,"tag":640,"props":2571,"children":2572},{"style":647},[2573],{"type":178,"value":650},{"type":173,"tag":640,"props":2575,"children":2576},{"style":653},[2577],{"type":178,"value":2578}," getQuickTypeOfExpression",{"type":173,"tag":640,"props":2580,"children":2581},{"style":659},[2582],{"type":178,"value":662},{"type":173,"tag":640,"props":2584,"children":2585},{"style":665},[2586],{"type":178,"value":1122},{"type":173,"tag":640,"props":2588,"children":2589},{"style":671},[2590],{"type":178,"value":674},{"type":173,"tag":640,"props":2592,"children":2593},{"style":692},[2594],{"type":178,"value":2595}," Expression",{"type":173,"tag":640,"props":2597,"children":2598},{"style":659},[2599],{"type":178,"value":685},{"type":173,"tag":640,"props":2601,"children":2602},{"style":671},[2603],{"type":178,"value":674},{"type":173,"tag":640,"props":2605,"children":2606},{"style":692},[2607],{"type":178,"value":695},{"type":173,"tag":640,"props":2609,"children":2610},{"style":671},[2611],{"type":178,"value":1618},{"type":173,"tag":640,"props":2613,"children":2614},{"style":677},[2615],{"type":178,"value":2301},{"type":173,"tag":640,"props":2617,"children":2618},{"style":659},[2619],{"type":178,"value":700},{"type":173,"tag":640,"props":2621,"children":2622},{"class":642,"line":703},[2623],{"type":173,"tag":640,"props":2624,"children":2625},{"style":1277},[2626],{"type":178,"value":1295},{"type":173,"tag":640,"props":2628,"children":2629},{"class":642,"line":744},[2630],{"type":173,"tag":640,"props":2631,"children":2632},{"style":1277},[2633],{"type":178,"value":2634},"  // Optimize for the common case of a call to a function with a single non-generic call\n",{"type":173,"tag":640,"props":2636,"children":2637},{"class":642,"line":1057},[2638],{"type":173,"tag":640,"props":2639,"children":2640},{"style":1277},[2641],{"type":178,"value":2642},"  // signature where we can just fetch the return type without checking the arguments.\n",{"type":173,"tag":640,"props":2644,"children":2645},{"class":642,"line":1094},[2646,2650,2654,2659,2663,2668,2672,2676,2681,2685,2690,2694,2699,2704,2709,2713,2718,2723,2728,2733,2737,2741,2745,2750,2754,2758,2762,2766,2771,2775,2779,2783,2787,2791,2796,2800,2804,2808],{"type":173,"tag":640,"props":2647,"children":2648},{"style":707},[2649],{"type":178,"value":1243},{"type":173,"tag":640,"props":2651,"children":2652},{"style":1080},[2653],{"type":178,"value":1248},{"type":173,"tag":640,"props":2655,"children":2656},{"style":653},[2657],{"type":178,"value":2658},"isCallExpression",{"type":173,"tag":640,"props":2660,"children":2661},{"style":1080},[2662],{"type":178,"value":662},{"type":173,"tag":640,"props":2664,"children":2665},{"style":713},[2666],{"type":178,"value":2667},"expr",{"type":173,"tag":640,"props":2669,"children":2670},{"style":1080},[2671],{"type":178,"value":1127},{"type":173,"tag":640,"props":2673,"children":2674},{"style":671},[2675],{"type":178,"value":2409},{"type":173,"tag":640,"props":2677,"children":2678},{"style":713},[2679],{"type":178,"value":2680}," expr",{"type":173,"tag":640,"props":2682,"children":2683},{"style":659},[2684],{"type":178,"value":1516},{"type":173,"tag":640,"props":2686,"children":2687},{"style":713},[2688],{"type":178,"value":2689},"expression",{"type":173,"tag":640,"props":2691,"children":2692},{"style":659},[2693],{"type":178,"value":1516},{"type":173,"tag":640,"props":2695,"children":2696},{"style":713},[2697],{"type":178,"value":2698},"kind",{"type":173,"tag":640,"props":2700,"children":2701},{"style":671},[2702],{"type":178,"value":2703}," !==",{"type":173,"tag":640,"props":2705,"children":2706},{"style":713},[2707],{"type":178,"value":2708}," SyntaxKind",{"type":173,"tag":640,"props":2710,"children":2711},{"style":659},[2712],{"type":178,"value":1516},{"type":173,"tag":640,"props":2714,"children":2715},{"style":713},[2716],{"type":178,"value":2717},"SuperKeyword",{"type":173,"tag":640,"props":2719,"children":2720},{"style":671},[2721],{"type":178,"value":2722}," &&",{"type":173,"tag":640,"props":2724,"children":2725},{"style":671},[2726],{"type":178,"value":2727}," !",{"type":173,"tag":640,"props":2729,"children":2730},{"style":653},[2731],{"type":178,"value":2732},"isRequireCall",{"type":173,"tag":640,"props":2734,"children":2735},{"style":1080},[2736],{"type":178,"value":662},{"type":173,"tag":640,"props":2738,"children":2739},{"style":713},[2740],{"type":178,"value":2667},{"type":173,"tag":640,"props":2742,"children":2743},{"style":659},[2744],{"type":178,"value":1751},{"type":173,"tag":640,"props":2746,"children":2747},{"style":1277},[2748],{"type":178,"value":2749}," /*requireStringLiteralLikeArgument*/",{"type":173,"tag":640,"props":2751,"children":2752},{"style":2086},[2753],{"type":178,"value":2089},{"type":173,"tag":640,"props":2755,"children":2756},{"style":1080},[2757],{"type":178,"value":1127},{"type":173,"tag":640,"props":2759,"children":2760},{"style":671},[2761],{"type":178,"value":2409},{"type":173,"tag":640,"props":2763,"children":2764},{"style":671},[2765],{"type":178,"value":2727},{"type":173,"tag":640,"props":2767,"children":2768},{"style":653},[2769],{"type":178,"value":2770},"isSymbolOrSymbolForCall",{"type":173,"tag":640,"props":2772,"children":2773},{"style":1080},[2774],{"type":178,"value":662},{"type":173,"tag":640,"props":2776,"children":2777},{"style":713},[2778],{"type":178,"value":2667},{"type":173,"tag":640,"props":2780,"children":2781},{"style":1080},[2782],{"type":178,"value":1127},{"type":173,"tag":640,"props":2784,"children":2785},{"style":671},[2786],{"type":178,"value":2409},{"type":173,"tag":640,"props":2788,"children":2789},{"style":671},[2790],{"type":178,"value":2727},{"type":173,"tag":640,"props":2792,"children":2793},{"style":653},[2794],{"type":178,"value":2795},"isImportCall",{"type":173,"tag":640,"props":2797,"children":2798},{"style":1080},[2799],{"type":178,"value":662},{"type":173,"tag":640,"props":2801,"children":2802},{"style":713},[2803],{"type":178,"value":2667},{"type":173,"tag":640,"props":2805,"children":2806},{"style":1080},[2807],{"type":178,"value":1266},{"type":173,"tag":640,"props":2809,"children":2810},{"style":659},[2811],{"type":178,"value":1271},{"type":173,"tag":640,"props":2813,"children":2814},{"class":642,"line":1139},[2815,2819,2824,2828,2832,2836,2841,2846,2850,2854,2858],{"type":173,"tag":640,"props":2816,"children":2817},{"style":707},[2818],{"type":178,"value":1100},{"type":173,"tag":640,"props":2820,"children":2821},{"style":653},[2822],{"type":178,"value":2823}," isCallChain",{"type":173,"tag":640,"props":2825,"children":2826},{"style":1080},[2827],{"type":178,"value":662},{"type":173,"tag":640,"props":2829,"children":2830},{"style":713},[2831],{"type":178,"value":2667},{"type":173,"tag":640,"props":2833,"children":2834},{"style":1080},[2835],{"type":178,"value":1127},{"type":173,"tag":640,"props":2837,"children":2838},{"style":671},[2839],{"type":178,"value":2840},"?",{"type":173,"tag":640,"props":2842,"children":2843},{"style":653},[2844],{"type":178,"value":2845}," getReturnTypeOfSingleNonGenericSignatureOfCallChain",{"type":173,"tag":640,"props":2847,"children":2848},{"style":1080},[2849],{"type":178,"value":662},{"type":173,"tag":640,"props":2851,"children":2852},{"style":713},[2853],{"type":178,"value":2667},{"type":173,"tag":640,"props":2855,"children":2856},{"style":1080},[2857],{"type":178,"value":1127},{"type":173,"tag":640,"props":2859,"children":2860},{"style":671},[2861],{"type":178,"value":2862},":\n",{"type":173,"tag":640,"props":2864,"children":2865},{"class":642,"line":1148},[2866,2871,2875,2880,2884,2888,2892,2896,2901],{"type":173,"tag":640,"props":2867,"children":2868},{"style":653},[2869],{"type":178,"value":2870},"          getReturnTypeOfSingleNonGenericCallSignature",{"type":173,"tag":640,"props":2872,"children":2873},{"style":1080},[2874],{"type":178,"value":662},{"type":173,"tag":640,"props":2876,"children":2877},{"style":653},[2878],{"type":178,"value":2879},"checkNonNullExpression",{"type":173,"tag":640,"props":2881,"children":2882},{"style":1080},[2883],{"type":178,"value":662},{"type":173,"tag":640,"props":2885,"children":2886},{"style":713},[2887],{"type":178,"value":2667},{"type":173,"tag":640,"props":2889,"children":2890},{"style":659},[2891],{"type":178,"value":1516},{"type":173,"tag":640,"props":2893,"children":2894},{"style":713},[2895],{"type":178,"value":2689},{"type":173,"tag":640,"props":2897,"children":2898},{"style":1080},[2899],{"type":178,"value":2900},"))",{"type":173,"tag":640,"props":2902,"children":2903},{"style":659},[2904],{"type":178,"value":741},{"type":173,"tag":640,"props":2906,"children":2907},{"class":642,"line":1157},[2908],{"type":173,"tag":640,"props":2909,"children":2910},{"style":659},[2911],{"type":178,"value":1154},{"type":173,"tag":640,"props":2913,"children":2914},{"class":642,"line":1372},[2915],{"type":173,"tag":640,"props":2916,"children":2917},{"style":1277},[2918],{"type":178,"value":1295},{"type":173,"tag":640,"props":2920,"children":2921},{"class":642,"line":1674},[2922,2926,2931],{"type":173,"tag":640,"props":2923,"children":2924},{"style":707},[2925],{"type":178,"value":710},{"type":173,"tag":640,"props":2927,"children":2929},{"style":2928},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2930],{"type":178,"value":2301},{"type":173,"tag":640,"props":2932,"children":2933},{"style":659},[2934],{"type":178,"value":741},{"type":173,"tag":640,"props":2936,"children":2937},{"class":642,"line":1682},[2938],{"type":173,"tag":640,"props":2939,"children":2940},{"style":659},[2941],{"type":178,"value":750},{"type":173,"tag":174,"props":2943,"children":2944},{},[2945],{"type":178,"value":2946},"checkExpression 是 TypeScript 类型检查的核心函数。也由此引入 TypeScript 中关于类型的重要概念：类型实例化。可以把实例化过程理解为给泛型填空，即在用到泛型类型或泛型函数时，把类型参数替换为实际给定的类型，从而生成具有特定结构和行为的“具体类型”。",{"type":173,"tag":174,"props":2948,"children":2949},{},[2950],{"type":178,"value":2951},"checkExpression 从表达式析取出一个可能带泛型的类型，并交给后续过程进行实例化。",{"type":173,"tag":630,"props":2953,"children":2955},{"className":632,"code":2954,"language":634,"meta":166,"style":166},"function checkExpression(node: Expression, checkMode?: CheckMode): Type {\n  const uninstantiatedType = checkExpressionWorker(node, checkMode)\n  const type = instantiateTypeWithSingleGenericCallSignature(node, uninstantiatedType, checkMode)\n  //...\n}\n",[2956],{"type":173,"tag":313,"props":2957,"children":2958},{"__ignoreMap":166},[2959,3020,3061,3109,3116],{"type":173,"tag":640,"props":2960,"children":2961},{"class":642,"line":643},[2962,2966,2971,2975,2979,2983,2987,2991,2995,3000,3004,3008,3012,3016],{"type":173,"tag":640,"props":2963,"children":2964},{"style":647},[2965],{"type":178,"value":650},{"type":173,"tag":640,"props":2967,"children":2968},{"style":653},[2969],{"type":178,"value":2970}," checkExpression",{"type":173,"tag":640,"props":2972,"children":2973},{"style":659},[2974],{"type":178,"value":662},{"type":173,"tag":640,"props":2976,"children":2977},{"style":665},[2978],{"type":178,"value":1122},{"type":173,"tag":640,"props":2980,"children":2981},{"style":671},[2982],{"type":178,"value":674},{"type":173,"tag":640,"props":2984,"children":2985},{"style":692},[2986],{"type":178,"value":2595},{"type":173,"tag":640,"props":2988,"children":2989},{"style":659},[2990],{"type":178,"value":1751},{"type":173,"tag":640,"props":2992,"children":2993},{"style":665},[2994],{"type":178,"value":2491},{"type":173,"tag":640,"props":2996,"children":2997},{"style":671},[2998],{"type":178,"value":2999},"?:",{"type":173,"tag":640,"props":3001,"children":3002},{"style":692},[3003],{"type":178,"value":2273},{"type":173,"tag":640,"props":3005,"children":3006},{"style":659},[3007],{"type":178,"value":685},{"type":173,"tag":640,"props":3009,"children":3010},{"style":671},[3011],{"type":178,"value":674},{"type":173,"tag":640,"props":3013,"children":3014},{"style":692},[3015],{"type":178,"value":695},{"type":173,"tag":640,"props":3017,"children":3018},{"style":659},[3019],{"type":178,"value":700},{"type":173,"tag":640,"props":3021,"children":3022},{"class":642,"line":703},[3023,3027,3032,3036,3041,3045,3049,3053,3057],{"type":173,"tag":640,"props":3024,"children":3025},{"style":647},[3026],{"type":178,"value":1459},{"type":173,"tag":640,"props":3028,"children":3029},{"style":907},[3030],{"type":178,"value":3031}," uninstantiatedType",{"type":173,"tag":640,"props":3033,"children":3034},{"style":671},[3035],{"type":178,"value":915},{"type":173,"tag":640,"props":3037,"children":3038},{"style":653},[3039],{"type":178,"value":3040}," checkExpressionWorker",{"type":173,"tag":640,"props":3042,"children":3043},{"style":1080},[3044],{"type":178,"value":662},{"type":173,"tag":640,"props":3046,"children":3047},{"style":713},[3048],{"type":178,"value":1122},{"type":173,"tag":640,"props":3050,"children":3051},{"style":659},[3052],{"type":178,"value":1751},{"type":173,"tag":640,"props":3054,"children":3055},{"style":713},[3056],{"type":178,"value":2491},{"type":173,"tag":640,"props":3058,"children":3059},{"style":1080},[3060],{"type":178,"value":934},{"type":173,"tag":640,"props":3062,"children":3063},{"class":642,"line":744},[3064,3068,3072,3076,3081,3085,3089,3093,3097,3101,3105],{"type":173,"tag":640,"props":3065,"children":3066},{"style":647},[3067],{"type":178,"value":1459},{"type":173,"tag":640,"props":3069,"children":3070},{"style":907},[3071],{"type":178,"value":2448},{"type":173,"tag":640,"props":3073,"children":3074},{"style":671},[3075],{"type":178,"value":915},{"type":173,"tag":640,"props":3077,"children":3078},{"style":653},[3079],{"type":178,"value":3080}," instantiateTypeWithSingleGenericCallSignature",{"type":173,"tag":640,"props":3082,"children":3083},{"style":1080},[3084],{"type":178,"value":662},{"type":173,"tag":640,"props":3086,"children":3087},{"style":713},[3088],{"type":178,"value":1122},{"type":173,"tag":640,"props":3090,"children":3091},{"style":659},[3092],{"type":178,"value":1751},{"type":173,"tag":640,"props":3094,"children":3095},{"style":713},[3096],{"type":178,"value":3031},{"type":173,"tag":640,"props":3098,"children":3099},{"style":659},[3100],{"type":178,"value":1751},{"type":173,"tag":640,"props":3102,"children":3103},{"style":713},[3104],{"type":178,"value":2491},{"type":173,"tag":640,"props":3106,"children":3107},{"style":1080},[3108],{"type":178,"value":934},{"type":173,"tag":640,"props":3110,"children":3111},{"class":642,"line":1057},[3112],{"type":173,"tag":640,"props":3113,"children":3114},{"style":1277},[3115],{"type":178,"value":1295},{"type":173,"tag":640,"props":3117,"children":3118},{"class":642,"line":1094},[3119],{"type":173,"tag":640,"props":3120,"children":3121},{"style":659},[3122],{"type":178,"value":750},{"type":173,"tag":174,"props":3124,"children":3125},{},[3126,3128,3134],{"type":178,"value":3127},"checkExpressionWorker 字面意义即检查表达式节点的类型，它根据节点类型调用不同的具体类型实例化逻辑，比如，",{"type":173,"tag":313,"props":3129,"children":3131},{"className":3130},[],[3132],{"type":178,"value":3133},"f1()",{"type":178,"value":3135}," 节点包含 f1 标识符，f1 标识符节点的类型的实例化会交由 checkIdentifier 处理。",{"type":173,"tag":630,"props":3137,"children":3139},{"className":632,"code":3138,"language":634,"meta":166,"style":166},"function checkExpressionWorker(node: Expression | QualifiedName, checkMode: CheckMode | undefined, forceTuple?: boolean): Type {\n  const kind = node.kind\n  switch (kind) {\n    case SyntaxKind.Identifier:\n      return checkIdentifier(node as Identifier, checkMode)\n    //...\n  }\n}\n",[3140],{"type":173,"tag":313,"props":3141,"children":3142},{"__ignoreMap":166},[3143,3236,3265,3289,3314,3356,3363,3370],{"type":173,"tag":640,"props":3144,"children":3145},{"class":642,"line":643},[3146,3150,3154,3158,3162,3166,3170,3174,3179,3183,3187,3191,3195,3199,3203,3207,3212,3216,3220,3224,3228,3232],{"type":173,"tag":640,"props":3147,"children":3148},{"style":647},[3149],{"type":178,"value":650},{"type":173,"tag":640,"props":3151,"children":3152},{"style":653},[3153],{"type":178,"value":3040},{"type":173,"tag":640,"props":3155,"children":3156},{"style":659},[3157],{"type":178,"value":662},{"type":173,"tag":640,"props":3159,"children":3160},{"style":665},[3161],{"type":178,"value":1122},{"type":173,"tag":640,"props":3163,"children":3164},{"style":671},[3165],{"type":178,"value":674},{"type":173,"tag":640,"props":3167,"children":3168},{"style":692},[3169],{"type":178,"value":2595},{"type":173,"tag":640,"props":3171,"children":3172},{"style":671},[3173],{"type":178,"value":1618},{"type":173,"tag":640,"props":3175,"children":3176},{"style":692},[3177],{"type":178,"value":3178}," QualifiedName",{"type":173,"tag":640,"props":3180,"children":3181},{"style":659},[3182],{"type":178,"value":1751},{"type":173,"tag":640,"props":3184,"children":3185},{"style":665},[3186],{"type":178,"value":2491},{"type":173,"tag":640,"props":3188,"children":3189},{"style":671},[3190],{"type":178,"value":674},{"type":173,"tag":640,"props":3192,"children":3193},{"style":692},[3194],{"type":178,"value":2273},{"type":173,"tag":640,"props":3196,"children":3197},{"style":671},[3198],{"type":178,"value":1618},{"type":173,"tag":640,"props":3200,"children":3201},{"style":677},[3202],{"type":178,"value":2301},{"type":173,"tag":640,"props":3204,"children":3205},{"style":659},[3206],{"type":178,"value":1751},{"type":173,"tag":640,"props":3208,"children":3209},{"style":665},[3210],{"type":178,"value":3211}," forceTuple",{"type":173,"tag":640,"props":3213,"children":3214},{"style":671},[3215],{"type":178,"value":2999},{"type":173,"tag":640,"props":3217,"children":3218},{"style":677},[3219],{"type":178,"value":680},{"type":173,"tag":640,"props":3221,"children":3222},{"style":659},[3223],{"type":178,"value":685},{"type":173,"tag":640,"props":3225,"children":3226},{"style":671},[3227],{"type":178,"value":674},{"type":173,"tag":640,"props":3229,"children":3230},{"style":692},[3231],{"type":178,"value":695},{"type":173,"tag":640,"props":3233,"children":3234},{"style":659},[3235],{"type":178,"value":700},{"type":173,"tag":640,"props":3237,"children":3238},{"class":642,"line":703},[3239,3243,3248,3252,3256,3260],{"type":173,"tag":640,"props":3240,"children":3241},{"style":647},[3242],{"type":178,"value":1459},{"type":173,"tag":640,"props":3244,"children":3245},{"style":907},[3246],{"type":178,"value":3247}," kind",{"type":173,"tag":640,"props":3249,"children":3250},{"style":671},[3251],{"type":178,"value":915},{"type":173,"tag":640,"props":3253,"children":3254},{"style":713},[3255],{"type":178,"value":1068},{"type":173,"tag":640,"props":3257,"children":3258},{"style":659},[3259],{"type":178,"value":1516},{"type":173,"tag":640,"props":3261,"children":3262},{"style":713},[3263],{"type":178,"value":3264},"kind\n",{"type":173,"tag":640,"props":3266,"children":3267},{"class":642,"line":744},[3268,3273,3277,3281,3285],{"type":173,"tag":640,"props":3269,"children":3270},{"style":707},[3271],{"type":178,"value":3272},"  switch",{"type":173,"tag":640,"props":3274,"children":3275},{"style":1080},[3276],{"type":178,"value":1248},{"type":173,"tag":640,"props":3278,"children":3279},{"style":713},[3280],{"type":178,"value":2698},{"type":173,"tag":640,"props":3282,"children":3283},{"style":1080},[3284],{"type":178,"value":1127},{"type":173,"tag":640,"props":3286,"children":3287},{"style":659},[3288],{"type":178,"value":1271},{"type":173,"tag":640,"props":3290,"children":3291},{"class":642,"line":1057},[3292,3297,3301,3305,3310],{"type":173,"tag":640,"props":3293,"children":3294},{"style":707},[3295],{"type":178,"value":3296},"    case",{"type":173,"tag":640,"props":3298,"children":3299},{"style":713},[3300],{"type":178,"value":2708},{"type":173,"tag":640,"props":3302,"children":3303},{"style":659},[3304],{"type":178,"value":1516},{"type":173,"tag":640,"props":3306,"children":3307},{"style":713},[3308],{"type":178,"value":3309},"Identifier",{"type":173,"tag":640,"props":3311,"children":3312},{"style":659},[3313],{"type":178,"value":2862},{"type":173,"tag":640,"props":3315,"children":3316},{"class":642,"line":1094},[3317,3321,3326,3330,3334,3339,3344,3348,3352],{"type":173,"tag":640,"props":3318,"children":3319},{"style":707},[3320],{"type":178,"value":1100},{"type":173,"tag":640,"props":3322,"children":3323},{"style":653},[3324],{"type":178,"value":3325}," checkIdentifier",{"type":173,"tag":640,"props":3327,"children":3328},{"style":1080},[3329],{"type":178,"value":662},{"type":173,"tag":640,"props":3331,"children":3332},{"style":713},[3333],{"type":178,"value":1122},{"type":173,"tag":640,"props":3335,"children":3336},{"style":707},[3337],{"type":178,"value":3338}," as",{"type":173,"tag":640,"props":3340,"children":3341},{"style":692},[3342],{"type":178,"value":3343}," Identifier",{"type":173,"tag":640,"props":3345,"children":3346},{"style":659},[3347],{"type":178,"value":1751},{"type":173,"tag":640,"props":3349,"children":3350},{"style":713},[3351],{"type":178,"value":2491},{"type":173,"tag":640,"props":3353,"children":3354},{"style":1080},[3355],{"type":178,"value":934},{"type":173,"tag":640,"props":3357,"children":3358},{"class":642,"line":1139},[3359],{"type":173,"tag":640,"props":3360,"children":3361},{"style":1277},[3362],{"type":178,"value":1280},{"type":173,"tag":640,"props":3364,"children":3365},{"class":642,"line":1148},[3366],{"type":173,"tag":640,"props":3367,"children":3368},{"style":659},[3369],{"type":178,"value":1154},{"type":173,"tag":640,"props":3371,"children":3372},{"class":642,"line":1157},[3373],{"type":173,"tag":640,"props":3374,"children":3375},{"style":659},[3376],{"type":178,"value":750},{"type":173,"tag":174,"props":3378,"children":3379},{},[3380],{"type":178,"value":3381},"checkIdentifier 中涉及类型收窄判断。类型收窄在 TypeScript 是一个常用的技术，用于在特定上下文中推断变量的更具体类型。以源码而言，相关 getNarrowedType 和 getNarrowedTypeOfSymbol 两个过程，前者根据某个“候选类型” candidate 以及分支条件（如 if、switch、typeof、instanceof 等），返回收窄后的类型，后者给定一个符号（变量、参数等）和代码中的某个位置，返回该符号在该位置经过控制流分析后的收窄类型。",{"type":173,"tag":174,"props":3383,"children":3384},{},[3385],{"type":178,"value":3386},"以下代码为例，x 参数在类型检查时就会涉及类型收窄过程。",{"type":173,"tag":630,"props":3388,"children":3390},{"className":632,"code":3389,"language":634,"meta":166,"style":166},"function test(x: string | number): void\n",[3391],{"type":173,"tag":313,"props":3392,"children":3393},{"__ignoreMap":166},[3394],{"type":173,"tag":640,"props":3395,"children":3396},{"class":642,"line":643},[3397,3401,3406,3410,3414,3418,3423,3427,3431,3435,3439],{"type":173,"tag":640,"props":3398,"children":3399},{"style":647},[3400],{"type":178,"value":650},{"type":173,"tag":640,"props":3402,"children":3403},{"style":653},[3404],{"type":178,"value":3405}," test",{"type":173,"tag":640,"props":3407,"children":3408},{"style":659},[3409],{"type":178,"value":662},{"type":173,"tag":640,"props":3411,"children":3412},{"style":665},[3413],{"type":178,"value":874},{"type":173,"tag":640,"props":3415,"children":3416},{"style":671},[3417],{"type":178,"value":674},{"type":173,"tag":640,"props":3419,"children":3420},{"style":677},[3421],{"type":178,"value":3422}," string",{"type":173,"tag":640,"props":3424,"children":3425},{"style":671},[3426],{"type":178,"value":1618},{"type":173,"tag":640,"props":3428,"children":3429},{"style":677},[3430],{"type":178,"value":883},{"type":173,"tag":640,"props":3432,"children":3433},{"style":659},[3434],{"type":178,"value":685},{"type":173,"tag":640,"props":3436,"children":3437},{"style":671},[3438],{"type":178,"value":674},{"type":173,"tag":640,"props":3440,"children":3441},{"style":677},[3442],{"type":178,"value":3443}," void\n",{"type":173,"tag":174,"props":3445,"children":3446},{},[3447,3449,3455],{"type":178,"value":3448},"f1 函数本身不涉及类型收窄，所以跳过具体流程。回到 checkExpression 函数，由于从 getQuickTypeOfExpression 调用的 checkExpression 被标记了无需检查泛型，所以其类型实例化前后类型是一样的，所以在 checkExpression 获得结果 ",{"type":173,"tag":313,"props":3450,"children":3452},{"className":3451},[],[3453],{"type":178,"value":3454},"f1(1)",{"type":178,"value":3456}," 表达式的类型，如下所示。",{"type":173,"tag":174,"props":3458,"children":3459},{},[3460],{"type":173,"tag":809,"props":3461,"children":3463},{"alt":166,"src":3462},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507140721530.png",[],{"type":173,"tag":174,"props":3465,"children":3466},{},[3467],{"type":178,"value":3468},"可以发现，Type 其实是一个节点：TypeNode。在 TypeScript 编译器内部，TypeNode 由一个 flags 属性标记其实际类型，比如 flags 可以是 NumberLiteral，标记一种字面量类型。",{"type":173,"tag":630,"props":3470,"children":3472},{"className":632,"code":3471,"language":634,"meta":166,"style":166},"export interface Type {\n  flags: {\n    Any             = 1 \u003C\u003C 0,\n    NumberLiteral   = 1 \u003C\u003C 8,\n    UniqueESSymbol  = 1 \u003C\u003C 13,  // unique symbol\n    Void            = 1 \u003C\u003C 14,\n    TypeParameter   = 1 \u003C\u003C 18,  // Type parameter\n    Object          = 1 \u003C\u003C 19,  // Object type\n    //...\n  }\n}\n",[3473],{"type":173,"tag":313,"props":3474,"children":3475},{"__ignoreMap":166},[3476,3497,3514,3546,3576,3611,3641,3675,3710,3717,3724],{"type":173,"tag":640,"props":3477,"children":3478},{"class":642,"line":643},[3479,3484,3489,3493],{"type":173,"tag":640,"props":3480,"children":3481},{"style":707},[3482],{"type":178,"value":3483},"export",{"type":173,"tag":640,"props":3485,"children":3486},{"style":647},[3487],{"type":178,"value":3488}," interface",{"type":173,"tag":640,"props":3490,"children":3491},{"style":692},[3492],{"type":178,"value":695},{"type":173,"tag":640,"props":3494,"children":3495},{"style":659},[3496],{"type":178,"value":700},{"type":173,"tag":640,"props":3498,"children":3499},{"class":642,"line":703},[3500,3506,3510],{"type":173,"tag":640,"props":3501,"children":3503},{"style":3502},"--shiki-light:#E53935;--shiki-default:#E36209;--shiki-dark:#FFAB70;--shiki-sepia:#F8F8F2",[3504],{"type":178,"value":3505},"  flags",{"type":173,"tag":640,"props":3507,"children":3508},{"style":671},[3509],{"type":178,"value":674},{"type":173,"tag":640,"props":3511,"children":3512},{"style":659},[3513],{"type":178,"value":700},{"type":173,"tag":640,"props":3515,"children":3516},{"class":642,"line":744},[3517,3522,3527,3532,3537,3542],{"type":173,"tag":640,"props":3518,"children":3519},{"style":3502},[3520],{"type":178,"value":3521},"    Any",{"type":173,"tag":640,"props":3523,"children":3524},{"style":671},[3525],{"type":178,"value":3526},"             =",{"type":173,"tag":640,"props":3528,"children":3529},{"style":926},[3530],{"type":178,"value":3531}," 1",{"type":173,"tag":640,"props":3533,"children":3534},{"style":671},[3535],{"type":178,"value":3536}," \u003C\u003C",{"type":173,"tag":640,"props":3538,"children":3539},{"style":926},[3540],{"type":178,"value":3541}," 0",{"type":173,"tag":640,"props":3543,"children":3544},{"style":659},[3545],{"type":178,"value":2236},{"type":173,"tag":640,"props":3547,"children":3548},{"class":642,"line":1057},[3549,3554,3559,3563,3567,3572],{"type":173,"tag":640,"props":3550,"children":3551},{"style":3502},[3552],{"type":178,"value":3553},"    NumberLiteral",{"type":173,"tag":640,"props":3555,"children":3556},{"style":671},[3557],{"type":178,"value":3558},"   =",{"type":173,"tag":640,"props":3560,"children":3561},{"style":926},[3562],{"type":178,"value":3531},{"type":173,"tag":640,"props":3564,"children":3565},{"style":671},[3566],{"type":178,"value":3536},{"type":173,"tag":640,"props":3568,"children":3569},{"style":926},[3570],{"type":178,"value":3571}," 8",{"type":173,"tag":640,"props":3573,"children":3574},{"style":659},[3575],{"type":178,"value":2236},{"type":173,"tag":640,"props":3577,"children":3578},{"class":642,"line":1094},[3579,3584,3589,3593,3597,3602,3606],{"type":173,"tag":640,"props":3580,"children":3581},{"style":3502},[3582],{"type":178,"value":3583},"    UniqueESSymbol",{"type":173,"tag":640,"props":3585,"children":3586},{"style":671},[3587],{"type":178,"value":3588},"  =",{"type":173,"tag":640,"props":3590,"children":3591},{"style":926},[3592],{"type":178,"value":3531},{"type":173,"tag":640,"props":3594,"children":3595},{"style":671},[3596],{"type":178,"value":3536},{"type":173,"tag":640,"props":3598,"children":3599},{"style":926},[3600],{"type":178,"value":3601}," 13",{"type":173,"tag":640,"props":3603,"children":3604},{"style":659},[3605],{"type":178,"value":1751},{"type":173,"tag":640,"props":3607,"children":3608},{"style":1277},[3609],{"type":178,"value":3610},"  // unique symbol\n",{"type":173,"tag":640,"props":3612,"children":3613},{"class":642,"line":1139},[3614,3619,3624,3628,3632,3637],{"type":173,"tag":640,"props":3615,"children":3616},{"style":3502},[3617],{"type":178,"value":3618},"    Void",{"type":173,"tag":640,"props":3620,"children":3621},{"style":671},[3622],{"type":178,"value":3623},"            =",{"type":173,"tag":640,"props":3625,"children":3626},{"style":926},[3627],{"type":178,"value":3531},{"type":173,"tag":640,"props":3629,"children":3630},{"style":671},[3631],{"type":178,"value":3536},{"type":173,"tag":640,"props":3633,"children":3634},{"style":926},[3635],{"type":178,"value":3636}," 14",{"type":173,"tag":640,"props":3638,"children":3639},{"style":659},[3640],{"type":178,"value":2236},{"type":173,"tag":640,"props":3642,"children":3643},{"class":642,"line":1148},[3644,3649,3653,3657,3661,3666,3670],{"type":173,"tag":640,"props":3645,"children":3646},{"style":3502},[3647],{"type":178,"value":3648},"    TypeParameter",{"type":173,"tag":640,"props":3650,"children":3651},{"style":671},[3652],{"type":178,"value":3558},{"type":173,"tag":640,"props":3654,"children":3655},{"style":926},[3656],{"type":178,"value":3531},{"type":173,"tag":640,"props":3658,"children":3659},{"style":671},[3660],{"type":178,"value":3536},{"type":173,"tag":640,"props":3662,"children":3663},{"style":926},[3664],{"type":178,"value":3665}," 18",{"type":173,"tag":640,"props":3667,"children":3668},{"style":659},[3669],{"type":178,"value":1751},{"type":173,"tag":640,"props":3671,"children":3672},{"style":1277},[3673],{"type":178,"value":3674},"  // Type parameter\n",{"type":173,"tag":640,"props":3676,"children":3677},{"class":642,"line":1157},[3678,3683,3688,3692,3696,3701,3705],{"type":173,"tag":640,"props":3679,"children":3680},{"style":3502},[3681],{"type":178,"value":3682},"    Object",{"type":173,"tag":640,"props":3684,"children":3685},{"style":671},[3686],{"type":178,"value":3687},"          =",{"type":173,"tag":640,"props":3689,"children":3690},{"style":926},[3691],{"type":178,"value":3531},{"type":173,"tag":640,"props":3693,"children":3694},{"style":671},[3695],{"type":178,"value":3536},{"type":173,"tag":640,"props":3697,"children":3698},{"style":926},[3699],{"type":178,"value":3700}," 19",{"type":173,"tag":640,"props":3702,"children":3703},{"style":659},[3704],{"type":178,"value":1751},{"type":173,"tag":640,"props":3706,"children":3707},{"style":1277},[3708],{"type":178,"value":3709},"  // Object type\n",{"type":173,"tag":640,"props":3711,"children":3712},{"class":642,"line":1372},[3713],{"type":173,"tag":640,"props":3714,"children":3715},{"style":1277},[3716],{"type":178,"value":1280},{"type":173,"tag":640,"props":3718,"children":3719},{"class":642,"line":1674},[3720],{"type":173,"tag":640,"props":3721,"children":3722},{"style":659},[3723],{"type":178,"value":1154},{"type":173,"tag":640,"props":3725,"children":3726},{"class":642,"line":1682},[3727],{"type":173,"tag":640,"props":3728,"children":3729},{"style":659},[3730],{"type":178,"value":750},{"type":173,"tag":174,"props":3732,"children":3733},{},[3734,3736,3742],{"type":178,"value":3735},"但并不是所有类型都是字面量之类的简单类型，Type 还可以是更复杂的联合类型（Union Type）、交叉类型（Intersection Type）等，这些类型可能只会在需要计算时才将其解析（延迟计算），以下代码为例，C 的类型是 ",{"type":173,"tag":313,"props":3737,"children":3739},{"className":3738},[],[3740],{"type":178,"value":3741},"A & B",{"type":178,"value":262},{"type":173,"tag":630,"props":3744,"children":3746},{"className":632,"code":3745,"language":634,"meta":166,"style":166},"type A = { x: number }\ntype B = { y: string }\ntype C = A & B\n",[3747],{"type":173,"tag":313,"props":3748,"children":3749},{"__ignoreMap":166},[3750,3789,3826],{"type":173,"tag":640,"props":3751,"children":3752},{"class":642,"line":643},[3753,3757,3762,3766,3771,3776,3780,3784],{"type":173,"tag":640,"props":3754,"children":3755},{"style":647},[3756],{"type":178,"value":2516},{"type":173,"tag":640,"props":3758,"children":3759},{"style":692},[3760],{"type":178,"value":3761}," A",{"type":173,"tag":640,"props":3763,"children":3764},{"style":671},[3765],{"type":178,"value":915},{"type":173,"tag":640,"props":3767,"children":3768},{"style":659},[3769],{"type":178,"value":3770}," {",{"type":173,"tag":640,"props":3772,"children":3773},{"style":3502},[3774],{"type":178,"value":3775}," x",{"type":173,"tag":640,"props":3777,"children":3778},{"style":671},[3779],{"type":178,"value":674},{"type":173,"tag":640,"props":3781,"children":3782},{"style":677},[3783],{"type":178,"value":883},{"type":173,"tag":640,"props":3785,"children":3786},{"style":659},[3787],{"type":178,"value":3788}," }\n",{"type":173,"tag":640,"props":3790,"children":3791},{"class":642,"line":703},[3792,3796,3801,3805,3809,3814,3818,3822],{"type":173,"tag":640,"props":3793,"children":3794},{"style":647},[3795],{"type":178,"value":2516},{"type":173,"tag":640,"props":3797,"children":3798},{"style":692},[3799],{"type":178,"value":3800}," B",{"type":173,"tag":640,"props":3802,"children":3803},{"style":671},[3804],{"type":178,"value":915},{"type":173,"tag":640,"props":3806,"children":3807},{"style":659},[3808],{"type":178,"value":3770},{"type":173,"tag":640,"props":3810,"children":3811},{"style":3502},[3812],{"type":178,"value":3813}," y",{"type":173,"tag":640,"props":3815,"children":3816},{"style":671},[3817],{"type":178,"value":674},{"type":173,"tag":640,"props":3819,"children":3820},{"style":677},[3821],{"type":178,"value":3422},{"type":173,"tag":640,"props":3823,"children":3824},{"style":659},[3825],{"type":178,"value":3788},{"type":173,"tag":640,"props":3827,"children":3828},{"class":642,"line":744},[3829,3833,3838,3842,3846,3850],{"type":173,"tag":640,"props":3830,"children":3831},{"style":647},[3832],{"type":178,"value":2516},{"type":173,"tag":640,"props":3834,"children":3835},{"style":692},[3836],{"type":178,"value":3837}," C",{"type":173,"tag":640,"props":3839,"children":3840},{"style":671},[3841],{"type":178,"value":915},{"type":173,"tag":640,"props":3843,"children":3844},{"style":692},[3845],{"type":178,"value":3761},{"type":173,"tag":640,"props":3847,"children":3848},{"style":671},[3849],{"type":178,"value":1506},{"type":173,"tag":640,"props":3851,"children":3852},{"style":692},[3853],{"type":178,"value":3854}," B\n",{"type":173,"tag":174,"props":3856,"children":3857},{},[3858],{"type":178,"value":3859},"f1 函数没有重载，是单签名的，并且从函数获取类型的过程也可能涉及延迟计算，所以代码流程由 getReturnTypeOfSingleNonGenericCallSignature 从 getSingleCallSignature 进入 getSingleSignature，最后进入 resolveStructuredTypeMembers 尝试解析函数的签名类型。",{"type":173,"tag":630,"props":3861,"children":3863},{"className":632,"code":3862,"language":634,"meta":166,"style":166},"function resolveStructuredTypeMembers(type: StructuredType): ResolvedType {\n  if (!(type as ResolvedType).members) {\n    if (type.flags & TypeFlags.Object) {\n        if ((type as ObjectType).objectFlags & ObjectFlags.Reference) {\n            resolveTypeReferenceMembers(type as TypeReference);\n        } else if ((type as ObjectType).objectFlags & ObjectFlags.Anonymous) {\n            resolveAnonymousTypeMembers(type as AnonymousType);\n        }\n        //...\n    }\n    else if (type.flags & TypeFlags.Union) {\n        resolveUnionTypeMembers(type as UnionType);\n    }\n    else if (type.flags & TypeFlags.Intersection) {\n        resolveIntersectionTypeMembers(type as IntersectionType);\n    }\n    //...\n  }\n  return type as ResolvedType;\n}\n",[3864],{"type":173,"tag":313,"props":3865,"children":3866},{"__ignoreMap":166},[3867,3913,3966,4016,4081,4114,4185,4218,4226,4234,4242,4295,4328,4335,4387,4421,4429,4437,4445,4469],{"type":173,"tag":640,"props":3868,"children":3869},{"class":642,"line":643},[3870,3874,3879,3883,3887,3891,3896,3900,3904,3909],{"type":173,"tag":640,"props":3871,"children":3872},{"style":647},[3873],{"type":178,"value":650},{"type":173,"tag":640,"props":3875,"children":3876},{"style":653},[3877],{"type":178,"value":3878}," resolveStructuredTypeMembers",{"type":173,"tag":640,"props":3880,"children":3881},{"style":659},[3882],{"type":178,"value":662},{"type":173,"tag":640,"props":3884,"children":3885},{"style":665},[3886],{"type":178,"value":2516},{"type":173,"tag":640,"props":3888,"children":3889},{"style":671},[3890],{"type":178,"value":674},{"type":173,"tag":640,"props":3892,"children":3893},{"style":692},[3894],{"type":178,"value":3895}," StructuredType",{"type":173,"tag":640,"props":3897,"children":3898},{"style":659},[3899],{"type":178,"value":685},{"type":173,"tag":640,"props":3901,"children":3902},{"style":671},[3903],{"type":178,"value":674},{"type":173,"tag":640,"props":3905,"children":3906},{"style":692},[3907],{"type":178,"value":3908}," ResolvedType",{"type":173,"tag":640,"props":3910,"children":3911},{"style":659},[3912],{"type":178,"value":700},{"type":173,"tag":640,"props":3914,"children":3915},{"class":642,"line":703},[3916,3920,3924,3929,3933,3937,3941,3945,3949,3953,3958,3962],{"type":173,"tag":640,"props":3917,"children":3918},{"style":707},[3919],{"type":178,"value":1243},{"type":173,"tag":640,"props":3921,"children":3922},{"style":1080},[3923],{"type":178,"value":1248},{"type":173,"tag":640,"props":3925,"children":3926},{"style":671},[3927],{"type":178,"value":3928},"!",{"type":173,"tag":640,"props":3930,"children":3931},{"style":1080},[3932],{"type":178,"value":662},{"type":173,"tag":640,"props":3934,"children":3935},{"style":713},[3936],{"type":178,"value":2516},{"type":173,"tag":640,"props":3938,"children":3939},{"style":707},[3940],{"type":178,"value":3338},{"type":173,"tag":640,"props":3942,"children":3943},{"style":692},[3944],{"type":178,"value":3908},{"type":173,"tag":640,"props":3946,"children":3947},{"style":1080},[3948],{"type":178,"value":685},{"type":173,"tag":640,"props":3950,"children":3951},{"style":659},[3952],{"type":178,"value":1516},{"type":173,"tag":640,"props":3954,"children":3955},{"style":713},[3956],{"type":178,"value":3957},"members",{"type":173,"tag":640,"props":3959,"children":3960},{"style":1080},[3961],{"type":178,"value":1127},{"type":173,"tag":640,"props":3963,"children":3964},{"style":659},[3965],{"type":178,"value":1271},{"type":173,"tag":640,"props":3967,"children":3968},{"class":642,"line":744},[3969,3974,3978,3982,3986,3990,3994,3999,4003,4008,4012],{"type":173,"tag":640,"props":3970,"children":3971},{"style":707},[3972],{"type":178,"value":3973},"    if",{"type":173,"tag":640,"props":3975,"children":3976},{"style":1080},[3977],{"type":178,"value":1248},{"type":173,"tag":640,"props":3979,"children":3980},{"style":713},[3981],{"type":178,"value":2516},{"type":173,"tag":640,"props":3983,"children":3984},{"style":659},[3985],{"type":178,"value":1516},{"type":173,"tag":640,"props":3987,"children":3988},{"style":713},[3989],{"type":178,"value":1591},{"type":173,"tag":640,"props":3991,"children":3992},{"style":671},[3993],{"type":178,"value":1506},{"type":173,"tag":640,"props":3995,"children":3996},{"style":713},[3997],{"type":178,"value":3998}," TypeFlags",{"type":173,"tag":640,"props":4000,"children":4001},{"style":659},[4002],{"type":178,"value":1516},{"type":173,"tag":640,"props":4004,"children":4005},{"style":713},[4006],{"type":178,"value":4007},"Object",{"type":173,"tag":640,"props":4009,"children":4010},{"style":1080},[4011],{"type":178,"value":1127},{"type":173,"tag":640,"props":4013,"children":4014},{"style":659},[4015],{"type":178,"value":1271},{"type":173,"tag":640,"props":4017,"children":4018},{"class":642,"line":1057},[4019,4024,4029,4033,4037,4042,4046,4050,4055,4059,4064,4068,4073,4077],{"type":173,"tag":640,"props":4020,"children":4021},{"style":707},[4022],{"type":178,"value":4023},"        if",{"type":173,"tag":640,"props":4025,"children":4026},{"style":1080},[4027],{"type":178,"value":4028}," ((",{"type":173,"tag":640,"props":4030,"children":4031},{"style":713},[4032],{"type":178,"value":2516},{"type":173,"tag":640,"props":4034,"children":4035},{"style":707},[4036],{"type":178,"value":3338},{"type":173,"tag":640,"props":4038,"children":4039},{"style":692},[4040],{"type":178,"value":4041}," ObjectType",{"type":173,"tag":640,"props":4043,"children":4044},{"style":1080},[4045],{"type":178,"value":685},{"type":173,"tag":640,"props":4047,"children":4048},{"style":659},[4049],{"type":178,"value":1516},{"type":173,"tag":640,"props":4051,"children":4052},{"style":713},[4053],{"type":178,"value":4054},"objectFlags",{"type":173,"tag":640,"props":4056,"children":4057},{"style":671},[4058],{"type":178,"value":1506},{"type":173,"tag":640,"props":4060,"children":4061},{"style":713},[4062],{"type":178,"value":4063}," ObjectFlags",{"type":173,"tag":640,"props":4065,"children":4066},{"style":659},[4067],{"type":178,"value":1516},{"type":173,"tag":640,"props":4069,"children":4070},{"style":713},[4071],{"type":178,"value":4072},"Reference",{"type":173,"tag":640,"props":4074,"children":4075},{"style":1080},[4076],{"type":178,"value":1127},{"type":173,"tag":640,"props":4078,"children":4079},{"style":659},[4080],{"type":178,"value":1271},{"type":173,"tag":640,"props":4082,"children":4083},{"class":642,"line":1094},[4084,4089,4093,4097,4101,4106,4110],{"type":173,"tag":640,"props":4085,"children":4086},{"style":653},[4087],{"type":178,"value":4088},"            resolveTypeReferenceMembers",{"type":173,"tag":640,"props":4090,"children":4091},{"style":1080},[4092],{"type":178,"value":662},{"type":173,"tag":640,"props":4094,"children":4095},{"style":713},[4096],{"type":178,"value":2516},{"type":173,"tag":640,"props":4098,"children":4099},{"style":707},[4100],{"type":178,"value":3338},{"type":173,"tag":640,"props":4102,"children":4103},{"style":692},[4104],{"type":178,"value":4105}," TypeReference",{"type":173,"tag":640,"props":4107,"children":4108},{"style":1080},[4109],{"type":178,"value":685},{"type":173,"tag":640,"props":4111,"children":4112},{"style":659},[4113],{"type":178,"value":741},{"type":173,"tag":640,"props":4115,"children":4116},{"class":642,"line":1139},[4117,4122,4127,4132,4136,4140,4144,4148,4152,4156,4160,4164,4168,4172,4177,4181],{"type":173,"tag":640,"props":4118,"children":4119},{"style":659},[4120],{"type":178,"value":4121},"        }",{"type":173,"tag":640,"props":4123,"children":4124},{"style":707},[4125],{"type":178,"value":4126}," else",{"type":173,"tag":640,"props":4128,"children":4129},{"style":707},[4130],{"type":178,"value":4131}," if",{"type":173,"tag":640,"props":4133,"children":4134},{"style":1080},[4135],{"type":178,"value":4028},{"type":173,"tag":640,"props":4137,"children":4138},{"style":713},[4139],{"type":178,"value":2516},{"type":173,"tag":640,"props":4141,"children":4142},{"style":707},[4143],{"type":178,"value":3338},{"type":173,"tag":640,"props":4145,"children":4146},{"style":692},[4147],{"type":178,"value":4041},{"type":173,"tag":640,"props":4149,"children":4150},{"style":1080},[4151],{"type":178,"value":685},{"type":173,"tag":640,"props":4153,"children":4154},{"style":659},[4155],{"type":178,"value":1516},{"type":173,"tag":640,"props":4157,"children":4158},{"style":713},[4159],{"type":178,"value":4054},{"type":173,"tag":640,"props":4161,"children":4162},{"style":671},[4163],{"type":178,"value":1506},{"type":173,"tag":640,"props":4165,"children":4166},{"style":713},[4167],{"type":178,"value":4063},{"type":173,"tag":640,"props":4169,"children":4170},{"style":659},[4171],{"type":178,"value":1516},{"type":173,"tag":640,"props":4173,"children":4174},{"style":713},[4175],{"type":178,"value":4176},"Anonymous",{"type":173,"tag":640,"props":4178,"children":4179},{"style":1080},[4180],{"type":178,"value":1127},{"type":173,"tag":640,"props":4182,"children":4183},{"style":659},[4184],{"type":178,"value":1271},{"type":173,"tag":640,"props":4186,"children":4187},{"class":642,"line":1148},[4188,4193,4197,4201,4205,4210,4214],{"type":173,"tag":640,"props":4189,"children":4190},{"style":653},[4191],{"type":178,"value":4192},"            resolveAnonymousTypeMembers",{"type":173,"tag":640,"props":4194,"children":4195},{"style":1080},[4196],{"type":178,"value":662},{"type":173,"tag":640,"props":4198,"children":4199},{"style":713},[4200],{"type":178,"value":2516},{"type":173,"tag":640,"props":4202,"children":4203},{"style":707},[4204],{"type":178,"value":3338},{"type":173,"tag":640,"props":4206,"children":4207},{"style":692},[4208],{"type":178,"value":4209}," AnonymousType",{"type":173,"tag":640,"props":4211,"children":4212},{"style":1080},[4213],{"type":178,"value":685},{"type":173,"tag":640,"props":4215,"children":4216},{"style":659},[4217],{"type":178,"value":741},{"type":173,"tag":640,"props":4219,"children":4220},{"class":642,"line":1157},[4221],{"type":173,"tag":640,"props":4222,"children":4223},{"style":659},[4224],{"type":178,"value":4225},"        }\n",{"type":173,"tag":640,"props":4227,"children":4228},{"class":642,"line":1372},[4229],{"type":173,"tag":640,"props":4230,"children":4231},{"style":1277},[4232],{"type":178,"value":4233},"        //...\n",{"type":173,"tag":640,"props":4235,"children":4236},{"class":642,"line":1674},[4237],{"type":173,"tag":640,"props":4238,"children":4239},{"style":659},[4240],{"type":178,"value":4241},"    }\n",{"type":173,"tag":640,"props":4243,"children":4244},{"class":642,"line":1682},[4245,4250,4254,4258,4262,4266,4270,4274,4278,4282,4287,4291],{"type":173,"tag":640,"props":4246,"children":4247},{"style":707},[4248],{"type":178,"value":4249},"    else",{"type":173,"tag":640,"props":4251,"children":4252},{"style":707},[4253],{"type":178,"value":4131},{"type":173,"tag":640,"props":4255,"children":4256},{"style":1080},[4257],{"type":178,"value":1248},{"type":173,"tag":640,"props":4259,"children":4260},{"style":713},[4261],{"type":178,"value":2516},{"type":173,"tag":640,"props":4263,"children":4264},{"style":659},[4265],{"type":178,"value":1516},{"type":173,"tag":640,"props":4267,"children":4268},{"style":713},[4269],{"type":178,"value":1591},{"type":173,"tag":640,"props":4271,"children":4272},{"style":671},[4273],{"type":178,"value":1506},{"type":173,"tag":640,"props":4275,"children":4276},{"style":713},[4277],{"type":178,"value":3998},{"type":173,"tag":640,"props":4279,"children":4280},{"style":659},[4281],{"type":178,"value":1516},{"type":173,"tag":640,"props":4283,"children":4284},{"style":713},[4285],{"type":178,"value":4286},"Union",{"type":173,"tag":640,"props":4288,"children":4289},{"style":1080},[4290],{"type":178,"value":1127},{"type":173,"tag":640,"props":4292,"children":4293},{"style":659},[4294],{"type":178,"value":1271},{"type":173,"tag":640,"props":4296,"children":4297},{"class":642,"line":1699},[4298,4303,4307,4311,4315,4320,4324],{"type":173,"tag":640,"props":4299,"children":4300},{"style":653},[4301],{"type":178,"value":4302},"        resolveUnionTypeMembers",{"type":173,"tag":640,"props":4304,"children":4305},{"style":1080},[4306],{"type":178,"value":662},{"type":173,"tag":640,"props":4308,"children":4309},{"style":713},[4310],{"type":178,"value":2516},{"type":173,"tag":640,"props":4312,"children":4313},{"style":707},[4314],{"type":178,"value":3338},{"type":173,"tag":640,"props":4316,"children":4317},{"style":692},[4318],{"type":178,"value":4319}," UnionType",{"type":173,"tag":640,"props":4321,"children":4322},{"style":1080},[4323],{"type":178,"value":685},{"type":173,"tag":640,"props":4325,"children":4326},{"style":659},[4327],{"type":178,"value":741},{"type":173,"tag":640,"props":4329,"children":4330},{"class":642,"line":2541},[4331],{"type":173,"tag":640,"props":4332,"children":4333},{"style":659},[4334],{"type":178,"value":4241},{"type":173,"tag":640,"props":4336,"children":4337},{"class":642,"line":2549},[4338,4342,4346,4350,4354,4358,4362,4366,4370,4374,4379,4383],{"type":173,"tag":640,"props":4339,"children":4340},{"style":707},[4341],{"type":178,"value":4249},{"type":173,"tag":640,"props":4343,"children":4344},{"style":707},[4345],{"type":178,"value":4131},{"type":173,"tag":640,"props":4347,"children":4348},{"style":1080},[4349],{"type":178,"value":1248},{"type":173,"tag":640,"props":4351,"children":4352},{"style":713},[4353],{"type":178,"value":2516},{"type":173,"tag":640,"props":4355,"children":4356},{"style":659},[4357],{"type":178,"value":1516},{"type":173,"tag":640,"props":4359,"children":4360},{"style":713},[4361],{"type":178,"value":1591},{"type":173,"tag":640,"props":4363,"children":4364},{"style":671},[4365],{"type":178,"value":1506},{"type":173,"tag":640,"props":4367,"children":4368},{"style":713},[4369],{"type":178,"value":3998},{"type":173,"tag":640,"props":4371,"children":4372},{"style":659},[4373],{"type":178,"value":1516},{"type":173,"tag":640,"props":4375,"children":4376},{"style":713},[4377],{"type":178,"value":4378},"Intersection",{"type":173,"tag":640,"props":4380,"children":4381},{"style":1080},[4382],{"type":178,"value":1127},{"type":173,"tag":640,"props":4384,"children":4385},{"style":659},[4386],{"type":178,"value":1271},{"type":173,"tag":640,"props":4388,"children":4390},{"class":642,"line":4389},15,[4391,4396,4400,4404,4408,4413,4417],{"type":173,"tag":640,"props":4392,"children":4393},{"style":653},[4394],{"type":178,"value":4395},"        resolveIntersectionTypeMembers",{"type":173,"tag":640,"props":4397,"children":4398},{"style":1080},[4399],{"type":178,"value":662},{"type":173,"tag":640,"props":4401,"children":4402},{"style":713},[4403],{"type":178,"value":2516},{"type":173,"tag":640,"props":4405,"children":4406},{"style":707},[4407],{"type":178,"value":3338},{"type":173,"tag":640,"props":4409,"children":4410},{"style":692},[4411],{"type":178,"value":4412}," IntersectionType",{"type":173,"tag":640,"props":4414,"children":4415},{"style":1080},[4416],{"type":178,"value":685},{"type":173,"tag":640,"props":4418,"children":4419},{"style":659},[4420],{"type":178,"value":741},{"type":173,"tag":640,"props":4422,"children":4424},{"class":642,"line":4423},16,[4425],{"type":173,"tag":640,"props":4426,"children":4427},{"style":659},[4428],{"type":178,"value":4241},{"type":173,"tag":640,"props":4430,"children":4432},{"class":642,"line":4431},17,[4433],{"type":173,"tag":640,"props":4434,"children":4435},{"style":1277},[4436],{"type":178,"value":1280},{"type":173,"tag":640,"props":4438,"children":4440},{"class":642,"line":4439},18,[4441],{"type":173,"tag":640,"props":4442,"children":4443},{"style":659},[4444],{"type":178,"value":1154},{"type":173,"tag":640,"props":4446,"children":4448},{"class":642,"line":4447},19,[4449,4453,4457,4461,4465],{"type":173,"tag":640,"props":4450,"children":4451},{"style":707},[4452],{"type":178,"value":710},{"type":173,"tag":640,"props":4454,"children":4455},{"style":713},[4456],{"type":178,"value":2448},{"type":173,"tag":640,"props":4458,"children":4459},{"style":707},[4460],{"type":178,"value":3338},{"type":173,"tag":640,"props":4462,"children":4463},{"style":692},[4464],{"type":178,"value":3908},{"type":173,"tag":640,"props":4466,"children":4467},{"style":659},[4468],{"type":178,"value":741},{"type":173,"tag":640,"props":4470,"children":4472},{"class":642,"line":4471},20,[4473],{"type":173,"tag":640,"props":4474,"children":4475},{"style":659},[4476],{"type":178,"value":750},{"type":173,"tag":174,"props":4478,"children":4479},{},[4480],{"type":178,"value":4481},"此函数涉及匿名类型和具名类型的处理，典型的具名类型形如：",{"type":173,"tag":630,"props":4483,"children":4485},{"className":632,"code":4484,"language":634,"meta":166,"style":166},"interface Point { x: number, y: number }\nlet p: Point\n",[4486],{"type":173,"tag":313,"props":4487,"children":4488},{"__ignoreMap":166},[4489,4538],{"type":173,"tag":640,"props":4490,"children":4491},{"class":642,"line":643},[4492,4497,4502,4506,4510,4514,4518,4522,4526,4530,4534],{"type":173,"tag":640,"props":4493,"children":4494},{"style":647},[4495],{"type":178,"value":4496},"interface",{"type":173,"tag":640,"props":4498,"children":4499},{"style":692},[4500],{"type":178,"value":4501}," Point",{"type":173,"tag":640,"props":4503,"children":4504},{"style":659},[4505],{"type":178,"value":3770},{"type":173,"tag":640,"props":4507,"children":4508},{"style":3502},[4509],{"type":178,"value":3775},{"type":173,"tag":640,"props":4511,"children":4512},{"style":671},[4513],{"type":178,"value":674},{"type":173,"tag":640,"props":4515,"children":4516},{"style":677},[4517],{"type":178,"value":883},{"type":173,"tag":640,"props":4519,"children":4520},{"style":659},[4521],{"type":178,"value":1751},{"type":173,"tag":640,"props":4523,"children":4524},{"style":3502},[4525],{"type":178,"value":3813},{"type":173,"tag":640,"props":4527,"children":4528},{"style":671},[4529],{"type":178,"value":674},{"type":173,"tag":640,"props":4531,"children":4532},{"style":677},[4533],{"type":178,"value":883},{"type":173,"tag":640,"props":4535,"children":4536},{"style":659},[4537],{"type":178,"value":3788},{"type":173,"tag":640,"props":4539,"children":4540},{"class":642,"line":703},[4541,4546,4551,4555],{"type":173,"tag":640,"props":4542,"children":4543},{"style":647},[4544],{"type":178,"value":4545},"let",{"type":173,"tag":640,"props":4547,"children":4548},{"style":713},[4549],{"type":178,"value":4550}," p",{"type":173,"tag":640,"props":4552,"children":4553},{"style":671},[4554],{"type":178,"value":674},{"type":173,"tag":640,"props":4556,"children":4557},{"style":692},[4558],{"type":178,"value":4559}," Point\n",{"type":173,"tag":174,"props":4561,"children":4562},{},[4563],{"type":178,"value":4564},"显而易见，f1 不是具名类型，所以继续由 resolveAnonymousTypeMembers 解析。因为 TypeScript 是结构化类型系统，对于不同的函数而言，只要其调用签名相同，就可以认为类型是兼容的，所以解析函数类型，也仅需解析其 callSignatures。type.callSignatures 的结果可能是数组，但实际取得值会在 getSingleSignature 中兼容成数组第一项。",{"type":173,"tag":630,"props":4566,"children":4568},{"className":632,"code":4567,"language":634,"meta":166,"style":166},"function resolveAnonymousTypeMembers(type: AnonymousType) {\n  //...\n  if (symbol.flags & (SymbolFlags.Function | SymbolFlags.Method)) {\n    type.callSignatures = getSignaturesOfSymbol(symbol)\n  }\n  //...\n}\n",[4569],{"type":173,"tag":313,"props":4570,"children":4571},{"__ignoreMap":166},[4572,4608,4615,4684,4721,4728,4735],{"type":173,"tag":640,"props":4573,"children":4574},{"class":642,"line":643},[4575,4579,4584,4588,4592,4596,4600,4604],{"type":173,"tag":640,"props":4576,"children":4577},{"style":647},[4578],{"type":178,"value":650},{"type":173,"tag":640,"props":4580,"children":4581},{"style":653},[4582],{"type":178,"value":4583}," resolveAnonymousTypeMembers",{"type":173,"tag":640,"props":4585,"children":4586},{"style":659},[4587],{"type":178,"value":662},{"type":173,"tag":640,"props":4589,"children":4590},{"style":665},[4591],{"type":178,"value":2516},{"type":173,"tag":640,"props":4593,"children":4594},{"style":671},[4595],{"type":178,"value":674},{"type":173,"tag":640,"props":4597,"children":4598},{"style":692},[4599],{"type":178,"value":4209},{"type":173,"tag":640,"props":4601,"children":4602},{"style":659},[4603],{"type":178,"value":685},{"type":173,"tag":640,"props":4605,"children":4606},{"style":659},[4607],{"type":178,"value":700},{"type":173,"tag":640,"props":4609,"children":4610},{"class":642,"line":703},[4611],{"type":173,"tag":640,"props":4612,"children":4613},{"style":1277},[4614],{"type":178,"value":1295},{"type":173,"tag":640,"props":4616,"children":4617},{"class":642,"line":744},[4618,4622,4626,4630,4634,4638,4642,4646,4650,4654,4659,4663,4667,4671,4676,4680],{"type":173,"tag":640,"props":4619,"children":4620},{"style":707},[4621],{"type":178,"value":1243},{"type":173,"tag":640,"props":4623,"children":4624},{"style":1080},[4625],{"type":178,"value":1248},{"type":173,"tag":640,"props":4627,"children":4628},{"style":713},[4629],{"type":178,"value":1426},{"type":173,"tag":640,"props":4631,"children":4632},{"style":659},[4633],{"type":178,"value":1516},{"type":173,"tag":640,"props":4635,"children":4636},{"style":713},[4637],{"type":178,"value":1591},{"type":173,"tag":640,"props":4639,"children":4640},{"style":671},[4641],{"type":178,"value":1506},{"type":173,"tag":640,"props":4643,"children":4644},{"style":1080},[4645],{"type":178,"value":1248},{"type":173,"tag":640,"props":4647,"children":4648},{"style":713},[4649],{"type":178,"value":1604},{"type":173,"tag":640,"props":4651,"children":4652},{"style":659},[4653],{"type":178,"value":1516},{"type":173,"tag":640,"props":4655,"children":4656},{"style":713},[4657],{"type":178,"value":4658},"Function",{"type":173,"tag":640,"props":4660,"children":4661},{"style":671},[4662],{"type":178,"value":1618},{"type":173,"tag":640,"props":4664,"children":4665},{"style":713},[4666],{"type":178,"value":1623},{"type":173,"tag":640,"props":4668,"children":4669},{"style":659},[4670],{"type":178,"value":1516},{"type":173,"tag":640,"props":4672,"children":4673},{"style":713},[4674],{"type":178,"value":4675},"Method",{"type":173,"tag":640,"props":4677,"children":4678},{"style":1080},[4679],{"type":178,"value":1266},{"type":173,"tag":640,"props":4681,"children":4682},{"style":659},[4683],{"type":178,"value":1271},{"type":173,"tag":640,"props":4685,"children":4686},{"class":642,"line":1057},[4687,4691,4695,4700,4704,4709,4713,4717],{"type":173,"tag":640,"props":4688,"children":4689},{"style":713},[4690],{"type":178,"value":2057},{"type":173,"tag":640,"props":4692,"children":4693},{"style":659},[4694],{"type":178,"value":1516},{"type":173,"tag":640,"props":4696,"children":4697},{"style":713},[4698],{"type":178,"value":4699},"callSignatures",{"type":173,"tag":640,"props":4701,"children":4702},{"style":671},[4703],{"type":178,"value":915},{"type":173,"tag":640,"props":4705,"children":4706},{"style":653},[4707],{"type":178,"value":4708}," getSignaturesOfSymbol",{"type":173,"tag":640,"props":4710,"children":4711},{"style":1080},[4712],{"type":178,"value":662},{"type":173,"tag":640,"props":4714,"children":4715},{"style":713},[4716],{"type":178,"value":1426},{"type":173,"tag":640,"props":4718,"children":4719},{"style":1080},[4720],{"type":178,"value":934},{"type":173,"tag":640,"props":4722,"children":4723},{"class":642,"line":1094},[4724],{"type":173,"tag":640,"props":4725,"children":4726},{"style":659},[4727],{"type":178,"value":1154},{"type":173,"tag":640,"props":4729,"children":4730},{"class":642,"line":1139},[4731],{"type":173,"tag":640,"props":4732,"children":4733},{"style":1277},[4734],{"type":178,"value":1295},{"type":173,"tag":640,"props":4736,"children":4737},{"class":642,"line":1148},[4738],{"type":173,"tag":640,"props":4739,"children":4740},{"style":659},[4741],{"type":178,"value":750},{"type":173,"tag":174,"props":4743,"children":4744},{},[4745],{"type":178,"value":4746},"此时我们拿到了 f1 的签名类型。最后，还需根据上 getQuickTypeOfExpression 函数，通过 getReturnTypeOfSingleNonGenericCallSignature，根据函数的类型标注，获取其返回值类型，作为调用的结果类型，赋值给 x1。",{"type":173,"tag":630,"props":4748,"children":4750},{"className":632,"code":4749,"language":634,"meta":166,"style":166},"function getReturnTypeOfSignature(signature: Signature): Type {\n  if (!signature.resolvedReturnType) {\n    let type = getReturnTypeFromAnnotation(signature.declaration)\n    signature.resolvedReturnType ??= type\n  }\n  return signature.resolvedReturnType\n}\n",[4751],{"type":173,"tag":313,"props":4752,"children":4753},{"__ignoreMap":166},[4754,4800,4836,4877,4903,4910,4931],{"type":173,"tag":640,"props":4755,"children":4756},{"class":642,"line":643},[4757,4761,4766,4770,4775,4779,4784,4788,4792,4796],{"type":173,"tag":640,"props":4758,"children":4759},{"style":647},[4760],{"type":178,"value":650},{"type":173,"tag":640,"props":4762,"children":4763},{"style":653},[4764],{"type":178,"value":4765}," getReturnTypeOfSignature",{"type":173,"tag":640,"props":4767,"children":4768},{"style":659},[4769],{"type":178,"value":662},{"type":173,"tag":640,"props":4771,"children":4772},{"style":665},[4773],{"type":178,"value":4774},"signature",{"type":173,"tag":640,"props":4776,"children":4777},{"style":671},[4778],{"type":178,"value":674},{"type":173,"tag":640,"props":4780,"children":4781},{"style":692},[4782],{"type":178,"value":4783}," Signature",{"type":173,"tag":640,"props":4785,"children":4786},{"style":659},[4787],{"type":178,"value":685},{"type":173,"tag":640,"props":4789,"children":4790},{"style":671},[4791],{"type":178,"value":674},{"type":173,"tag":640,"props":4793,"children":4794},{"style":692},[4795],{"type":178,"value":695},{"type":173,"tag":640,"props":4797,"children":4798},{"style":659},[4799],{"type":178,"value":700},{"type":173,"tag":640,"props":4801,"children":4802},{"class":642,"line":703},[4803,4807,4811,4815,4819,4823,4828,4832],{"type":173,"tag":640,"props":4804,"children":4805},{"style":707},[4806],{"type":178,"value":1243},{"type":173,"tag":640,"props":4808,"children":4809},{"style":1080},[4810],{"type":178,"value":1248},{"type":173,"tag":640,"props":4812,"children":4813},{"style":671},[4814],{"type":178,"value":3928},{"type":173,"tag":640,"props":4816,"children":4817},{"style":713},[4818],{"type":178,"value":4774},{"type":173,"tag":640,"props":4820,"children":4821},{"style":659},[4822],{"type":178,"value":1516},{"type":173,"tag":640,"props":4824,"children":4825},{"style":713},[4826],{"type":178,"value":4827},"resolvedReturnType",{"type":173,"tag":640,"props":4829,"children":4830},{"style":1080},[4831],{"type":178,"value":1127},{"type":173,"tag":640,"props":4833,"children":4834},{"style":659},[4835],{"type":178,"value":1271},{"type":173,"tag":640,"props":4837,"children":4838},{"class":642,"line":744},[4839,4844,4848,4852,4857,4861,4865,4869,4873],{"type":173,"tag":640,"props":4840,"children":4841},{"style":647},[4842],{"type":178,"value":4843},"    let",{"type":173,"tag":640,"props":4845,"children":4846},{"style":713},[4847],{"type":178,"value":2448},{"type":173,"tag":640,"props":4849,"children":4850},{"style":671},[4851],{"type":178,"value":915},{"type":173,"tag":640,"props":4853,"children":4854},{"style":653},[4855],{"type":178,"value":4856}," getReturnTypeFromAnnotation",{"type":173,"tag":640,"props":4858,"children":4859},{"style":1080},[4860],{"type":178,"value":662},{"type":173,"tag":640,"props":4862,"children":4863},{"style":713},[4864],{"type":178,"value":4774},{"type":173,"tag":640,"props":4866,"children":4867},{"style":659},[4868],{"type":178,"value":1516},{"type":173,"tag":640,"props":4870,"children":4871},{"style":713},[4872],{"type":178,"value":1912},{"type":173,"tag":640,"props":4874,"children":4875},{"style":1080},[4876],{"type":178,"value":934},{"type":173,"tag":640,"props":4878,"children":4879},{"class":642,"line":1057},[4880,4885,4889,4893,4898],{"type":173,"tag":640,"props":4881,"children":4882},{"style":713},[4883],{"type":178,"value":4884},"    signature",{"type":173,"tag":640,"props":4886,"children":4887},{"style":659},[4888],{"type":178,"value":1516},{"type":173,"tag":640,"props":4890,"children":4891},{"style":713},[4892],{"type":178,"value":4827},{"type":173,"tag":640,"props":4894,"children":4895},{"style":671},[4896],{"type":178,"value":4897}," ??=",{"type":173,"tag":640,"props":4899,"children":4900},{"style":713},[4901],{"type":178,"value":4902}," type\n",{"type":173,"tag":640,"props":4904,"children":4905},{"class":642,"line":1094},[4906],{"type":173,"tag":640,"props":4907,"children":4908},{"style":659},[4909],{"type":178,"value":1154},{"type":173,"tag":640,"props":4911,"children":4912},{"class":642,"line":1139},[4913,4917,4922,4926],{"type":173,"tag":640,"props":4914,"children":4915},{"style":707},[4916],{"type":178,"value":710},{"type":173,"tag":640,"props":4918,"children":4919},{"style":713},[4920],{"type":178,"value":4921}," signature",{"type":173,"tag":640,"props":4923,"children":4924},{"style":659},[4925],{"type":178,"value":1516},{"type":173,"tag":640,"props":4927,"children":4928},{"style":713},[4929],{"type":178,"value":4930},"resolvedReturnType\n",{"type":173,"tag":640,"props":4932,"children":4933},{"class":642,"line":1148},[4934],{"type":173,"tag":640,"props":4935,"children":4936},{"style":659},[4937],{"type":178,"value":750},{"type":173,"tag":174,"props":4939,"children":4940},{},[4941,4943,4949],{"type":178,"value":4942},"getReturnTypeFromAnnotation 的过程则非常简单。我们已经知道 f1 的类型标注是 ",{"type":173,"tag":313,"props":4944,"children":4946},{"className":4945},[],[4947],{"type":178,"value":4948},"fn(x: number): string",{"type":178,"value":4950},"，可以直接根据此类型节点，根据类型节点类型拿到字符串字面量 string。此过程相关 getTypeFromTypeNode 函数。",{"type":173,"tag":630,"props":4952,"children":4954},{"className":632,"code":4953,"language":634,"meta":166,"style":166},"function getTypeFromTypeNodeWorker(node: TypeNode): Type {\n  switch (node.kind) {\n    case SyntaxKind.StringKeyword:\n      return stringType // -> 'string'\n    case SyntaxKind.NeverKeyword:\n      return neverType\n    //...\n  }\n}\n",[4955],{"type":173,"tag":313,"props":4956,"children":4957},{"__ignoreMap":166},[4958,5003,5034,5058,5075,5099,5111,5118,5125],{"type":173,"tag":640,"props":4959,"children":4960},{"class":642,"line":643},[4961,4965,4970,4974,4978,4982,4987,4991,4995,4999],{"type":173,"tag":640,"props":4962,"children":4963},{"style":647},[4964],{"type":178,"value":650},{"type":173,"tag":640,"props":4966,"children":4967},{"style":653},[4968],{"type":178,"value":4969}," getTypeFromTypeNodeWorker",{"type":173,"tag":640,"props":4971,"children":4972},{"style":659},[4973],{"type":178,"value":662},{"type":173,"tag":640,"props":4975,"children":4976},{"style":665},[4977],{"type":178,"value":1122},{"type":173,"tag":640,"props":4979,"children":4980},{"style":671},[4981],{"type":178,"value":674},{"type":173,"tag":640,"props":4983,"children":4984},{"style":692},[4985],{"type":178,"value":4986}," TypeNode",{"type":173,"tag":640,"props":4988,"children":4989},{"style":659},[4990],{"type":178,"value":685},{"type":173,"tag":640,"props":4992,"children":4993},{"style":671},[4994],{"type":178,"value":674},{"type":173,"tag":640,"props":4996,"children":4997},{"style":692},[4998],{"type":178,"value":695},{"type":173,"tag":640,"props":5000,"children":5001},{"style":659},[5002],{"type":178,"value":700},{"type":173,"tag":640,"props":5004,"children":5005},{"class":642,"line":703},[5006,5010,5014,5018,5022,5026,5030],{"type":173,"tag":640,"props":5007,"children":5008},{"style":707},[5009],{"type":178,"value":3272},{"type":173,"tag":640,"props":5011,"children":5012},{"style":1080},[5013],{"type":178,"value":1248},{"type":173,"tag":640,"props":5015,"children":5016},{"style":713},[5017],{"type":178,"value":1122},{"type":173,"tag":640,"props":5019,"children":5020},{"style":659},[5021],{"type":178,"value":1516},{"type":173,"tag":640,"props":5023,"children":5024},{"style":713},[5025],{"type":178,"value":2698},{"type":173,"tag":640,"props":5027,"children":5028},{"style":1080},[5029],{"type":178,"value":1127},{"type":173,"tag":640,"props":5031,"children":5032},{"style":659},[5033],{"type":178,"value":1271},{"type":173,"tag":640,"props":5035,"children":5036},{"class":642,"line":744},[5037,5041,5045,5049,5054],{"type":173,"tag":640,"props":5038,"children":5039},{"style":707},[5040],{"type":178,"value":3296},{"type":173,"tag":640,"props":5042,"children":5043},{"style":713},[5044],{"type":178,"value":2708},{"type":173,"tag":640,"props":5046,"children":5047},{"style":659},[5048],{"type":178,"value":1516},{"type":173,"tag":640,"props":5050,"children":5051},{"style":713},[5052],{"type":178,"value":5053},"StringKeyword",{"type":173,"tag":640,"props":5055,"children":5056},{"style":659},[5057],{"type":178,"value":2862},{"type":173,"tag":640,"props":5059,"children":5060},{"class":642,"line":1057},[5061,5065,5070],{"type":173,"tag":640,"props":5062,"children":5063},{"style":707},[5064],{"type":178,"value":1100},{"type":173,"tag":640,"props":5066,"children":5067},{"style":713},[5068],{"type":178,"value":5069}," stringType",{"type":173,"tag":640,"props":5071,"children":5072},{"style":1277},[5073],{"type":178,"value":5074}," // -> 'string'\n",{"type":173,"tag":640,"props":5076,"children":5077},{"class":642,"line":1094},[5078,5082,5086,5090,5095],{"type":173,"tag":640,"props":5079,"children":5080},{"style":707},[5081],{"type":178,"value":3296},{"type":173,"tag":640,"props":5083,"children":5084},{"style":713},[5085],{"type":178,"value":2708},{"type":173,"tag":640,"props":5087,"children":5088},{"style":659},[5089],{"type":178,"value":1516},{"type":173,"tag":640,"props":5091,"children":5092},{"style":713},[5093],{"type":178,"value":5094},"NeverKeyword",{"type":173,"tag":640,"props":5096,"children":5097},{"style":659},[5098],{"type":178,"value":2862},{"type":173,"tag":640,"props":5100,"children":5101},{"class":642,"line":1139},[5102,5106],{"type":173,"tag":640,"props":5103,"children":5104},{"style":707},[5105],{"type":178,"value":1100},{"type":173,"tag":640,"props":5107,"children":5108},{"style":713},[5109],{"type":178,"value":5110}," neverType\n",{"type":173,"tag":640,"props":5112,"children":5113},{"class":642,"line":1148},[5114],{"type":173,"tag":640,"props":5115,"children":5116},{"style":1277},[5117],{"type":178,"value":1280},{"type":173,"tag":640,"props":5119,"children":5120},{"class":642,"line":1157},[5121],{"type":173,"tag":640,"props":5122,"children":5123},{"style":659},[5124],{"type":178,"value":1154},{"type":173,"tag":640,"props":5126,"children":5127},{"class":642,"line":1372},[5128],{"type":173,"tag":640,"props":5129,"children":5130},{"style":659},[5131],{"type":178,"value":750},{"type":173,"tag":174,"props":5133,"children":5134},{},[5135,5137,5143],{"type":178,"value":5136},"getTypeFromTypeNode 和 getTypeFromTypeNodeWorker 的区别在于前者处理了控制流分析，后文会介绍。至此，已经完成 x1 的类型获取，结果为 ",{"type":173,"tag":313,"props":5138,"children":5140},{"className":5139},[],[5141],{"type":178,"value":5142},"string",{"type":178,"value":262},{"type":173,"tag":174,"props":5145,"children":5146},{},[5147],{"type":178,"value":5148},"至此，我们可以清晰列出获取 x1 的类型的调用过程：getTypeAtLocation、getTypeOfNode、getTypeOfSymbol、getTypeOfVariableOrParameterOrProperty、getTypeOfVariableOrParameterOrPropertyWorker、getWidenedTypeForVariableLikeDeclaration、getTypeForVariableLikeDeclaration、checkDeclarationInitializer、getQuickTypeOfExpression、checkNonNullExpression、checkExpression、checkExpressionWorker、checkIdentifier、getNarrowedTypeOfSymbol，从 getQuickTypeOfExpression 叉分出 getReturnTypeOfSingleNonGenericCallSignature、getSingleCallSignature、getSingleSignature、resolveStructuredTypeMembers、resolveAnonymousTypeMembers、getSignaturesOfSymbol、getSignatureFromDeclaration。",{"type":173,"tag":174,"props":5150,"children":5151},{},[5152],{"type":178,"value":5153},"如果函数是泛型函数，调用过程会有什么不同呢？",{"type":173,"tag":174,"props":5155,"children":5156},{},[5157],{"type":178,"value":5158},"取 f1 的签名时调用了 getQuickTypeOfExpression 函数，上文提到由于 f1 是一个非泛型函数，所以可以快速获取其类型。这里尝试只添加一个泛型参数，让 f1 变成泛型函数 f2，看看调用过程会有什么变化。",{"type":173,"tag":630,"props":5160,"children":5162},{"className":632,"code":5161,"language":634,"meta":166,"style":166},"declare function f2\u003CT>(x: number): string\nconst x2 = f2(2)\n",[5163],{"type":173,"tag":313,"props":5164,"children":5165},{"__ignoreMap":166},[5166,5221],{"type":173,"tag":640,"props":5167,"children":5168},{"class":642,"line":643},[5169,5173,5177,5182,5187,5192,5197,5201,5205,5209,5213,5217],{"type":173,"tag":640,"props":5170,"children":5171},{"style":852},[5172],{"type":178,"value":855},{"type":173,"tag":640,"props":5174,"children":5175},{"style":647},[5176],{"type":178,"value":860},{"type":173,"tag":640,"props":5178,"children":5179},{"style":653},[5180],{"type":178,"value":5181}," f2",{"type":173,"tag":640,"props":5183,"children":5184},{"style":659},[5185],{"type":178,"value":5186},"\u003C",{"type":173,"tag":640,"props":5188,"children":5189},{"style":692},[5190],{"type":178,"value":5191},"T",{"type":173,"tag":640,"props":5193,"children":5194},{"style":659},[5195],{"type":178,"value":5196},">(",{"type":173,"tag":640,"props":5198,"children":5199},{"style":665},[5200],{"type":178,"value":874},{"type":173,"tag":640,"props":5202,"children":5203},{"style":671},[5204],{"type":178,"value":674},{"type":173,"tag":640,"props":5206,"children":5207},{"style":677},[5208],{"type":178,"value":883},{"type":173,"tag":640,"props":5210,"children":5211},{"style":659},[5212],{"type":178,"value":685},{"type":173,"tag":640,"props":5214,"children":5215},{"style":671},[5216],{"type":178,"value":674},{"type":173,"tag":640,"props":5218,"children":5219},{"style":677},[5220],{"type":178,"value":896},{"type":173,"tag":640,"props":5222,"children":5223},{"class":642,"line":703},[5224,5228,5233,5237,5241,5245,5250],{"type":173,"tag":640,"props":5225,"children":5226},{"style":647},[5227],{"type":178,"value":904},{"type":173,"tag":640,"props":5229,"children":5230},{"style":907},[5231],{"type":178,"value":5232}," x2",{"type":173,"tag":640,"props":5234,"children":5235},{"style":671},[5236],{"type":178,"value":915},{"type":173,"tag":640,"props":5238,"children":5239},{"style":653},[5240],{"type":178,"value":5181},{"type":173,"tag":640,"props":5242,"children":5243},{"style":713},[5244],{"type":178,"value":662},{"type":173,"tag":640,"props":5246,"children":5247},{"style":926},[5248],{"type":178,"value":5249},"2",{"type":173,"tag":640,"props":5251,"children":5252},{"style":713},[5253],{"type":178,"value":934},{"type":173,"tag":174,"props":5255,"children":5256},{},[5257,5259,5264],{"type":178,"value":5258},"调用过程从 ",{"type":173,"tag":313,"props":5260,"children":5262},{"className":5261},[],[5263],{"type":178,"value":945},{"type":178,"value":5265}," 函数开始看起，大致如图。",{"type":173,"tag":174,"props":5267,"children":5268},{},[5269],{"type":173,"tag":809,"props":5270,"children":5272},{"alt":166,"src":5271},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/202507141042870.png",[],{"type":173,"tag":174,"props":5274,"children":5275},{},[5276],{"type":178,"value":5277},"最先出现分歧的是 getReturnTypeOfSingleNonGenericCallSignature 调用，由于 f2 带泛型参数导致返回 undefined（而不是像 f1 返回返回值 string 的类型签名），继而 getQuickTypeOfExpression 也返回 undefined。",{"type":173,"tag":630,"props":5279,"children":5281},{"className":632,"code":5280,"language":634,"meta":166,"style":166},"function getReturnTypeOfSingleNonGenericCallSignature(funcType: Type) {\n  const signature = getSingleCallSignature(funcType)\n  if (signature && !signature.typeParameters) {\n    return getReturnTypeOfSignature(signature)\n  }\n}\n",[5282],{"type":173,"tag":313,"props":5283,"children":5284},{"__ignoreMap":166},[5285,5322,5354,5398,5421,5428],{"type":173,"tag":640,"props":5286,"children":5287},{"class":642,"line":643},[5288,5292,5297,5301,5306,5310,5314,5318],{"type":173,"tag":640,"props":5289,"children":5290},{"style":647},[5291],{"type":178,"value":650},{"type":173,"tag":640,"props":5293,"children":5294},{"style":653},[5295],{"type":178,"value":5296}," getReturnTypeOfSingleNonGenericCallSignature",{"type":173,"tag":640,"props":5298,"children":5299},{"style":659},[5300],{"type":178,"value":662},{"type":173,"tag":640,"props":5302,"children":5303},{"style":665},[5304],{"type":178,"value":5305},"funcType",{"type":173,"tag":640,"props":5307,"children":5308},{"style":671},[5309],{"type":178,"value":674},{"type":173,"tag":640,"props":5311,"children":5312},{"style":692},[5313],{"type":178,"value":695},{"type":173,"tag":640,"props":5315,"children":5316},{"style":659},[5317],{"type":178,"value":685},{"type":173,"tag":640,"props":5319,"children":5320},{"style":659},[5321],{"type":178,"value":700},{"type":173,"tag":640,"props":5323,"children":5324},{"class":642,"line":703},[5325,5329,5333,5337,5342,5346,5350],{"type":173,"tag":640,"props":5326,"children":5327},{"style":647},[5328],{"type":178,"value":1459},{"type":173,"tag":640,"props":5330,"children":5331},{"style":907},[5332],{"type":178,"value":4921},{"type":173,"tag":640,"props":5334,"children":5335},{"style":671},[5336],{"type":178,"value":915},{"type":173,"tag":640,"props":5338,"children":5339},{"style":653},[5340],{"type":178,"value":5341}," getSingleCallSignature",{"type":173,"tag":640,"props":5343,"children":5344},{"style":1080},[5345],{"type":178,"value":662},{"type":173,"tag":640,"props":5347,"children":5348},{"style":713},[5349],{"type":178,"value":5305},{"type":173,"tag":640,"props":5351,"children":5352},{"style":1080},[5353],{"type":178,"value":934},{"type":173,"tag":640,"props":5355,"children":5356},{"class":642,"line":744},[5357,5361,5365,5369,5373,5377,5381,5385,5390,5394],{"type":173,"tag":640,"props":5358,"children":5359},{"style":707},[5360],{"type":178,"value":1243},{"type":173,"tag":640,"props":5362,"children":5363},{"style":1080},[5364],{"type":178,"value":1248},{"type":173,"tag":640,"props":5366,"children":5367},{"style":713},[5368],{"type":178,"value":4774},{"type":173,"tag":640,"props":5370,"children":5371},{"style":671},[5372],{"type":178,"value":2722},{"type":173,"tag":640,"props":5374,"children":5375},{"style":671},[5376],{"type":178,"value":2727},{"type":173,"tag":640,"props":5378,"children":5379},{"style":713},[5380],{"type":178,"value":4774},{"type":173,"tag":640,"props":5382,"children":5383},{"style":659},[5384],{"type":178,"value":1516},{"type":173,"tag":640,"props":5386,"children":5387},{"style":713},[5388],{"type":178,"value":5389},"typeParameters",{"type":173,"tag":640,"props":5391,"children":5392},{"style":1080},[5393],{"type":178,"value":1127},{"type":173,"tag":640,"props":5395,"children":5396},{"style":659},[5397],{"type":178,"value":1271},{"type":173,"tag":640,"props":5399,"children":5400},{"class":642,"line":1057},[5401,5405,5409,5413,5417],{"type":173,"tag":640,"props":5402,"children":5403},{"style":707},[5404],{"type":178,"value":1335},{"type":173,"tag":640,"props":5406,"children":5407},{"style":653},[5408],{"type":178,"value":4765},{"type":173,"tag":640,"props":5410,"children":5411},{"style":1080},[5412],{"type":178,"value":662},{"type":173,"tag":640,"props":5414,"children":5415},{"style":713},[5416],{"type":178,"value":4774},{"type":173,"tag":640,"props":5418,"children":5419},{"style":1080},[5420],{"type":178,"value":934},{"type":173,"tag":640,"props":5422,"children":5423},{"class":642,"line":1094},[5424],{"type":173,"tag":640,"props":5425,"children":5426},{"style":659},[5427],{"type":178,"value":1154},{"type":173,"tag":640,"props":5429,"children":5430},{"class":642,"line":1139},[5431],{"type":173,"tag":640,"props":5432,"children":5433},{"style":659},[5434],{"type":178,"value":750},{"type":173,"tag":174,"props":5436,"children":5437},{},[5438],{"type":178,"value":5439},"换句话说，getQuickTypeOfExpression 只适用于非泛型函数的调用的类型获取。逻辑分叉出现在 checkDeclarationInitializer，不能快速推断 f2 的类型，使逻辑进入 checkExpressionCached 函数。",{"type":173,"tag":630,"props":5441,"children":5443},{"className":632,"code":5442,"language":634,"meta":166,"style":166},"function checkDeclarationInitializer() {\n  const type = getQuickTypeOfExpression(initializer) || (contextualType ?\n    checkExpressionWithContextualType(initializer, contextualType, /*inferenceContext*/ undefined, checkMode || CheckMode.Normal) :\n    checkExpressionCached(initializer, checkMode))\n}\n",[5444],{"type":173,"tag":313,"props":5445,"children":5446},{"__ignoreMap":166},[5447,5467,5517,5589,5617],{"type":173,"tag":640,"props":5448,"children":5449},{"class":642,"line":643},[5450,5454,5458,5463],{"type":173,"tag":640,"props":5451,"children":5452},{"style":647},[5453],{"type":178,"value":650},{"type":173,"tag":640,"props":5455,"children":5456},{"style":653},[5457],{"type":178,"value":2474},{"type":173,"tag":640,"props":5459,"children":5460},{"style":659},[5461],{"type":178,"value":5462},"()",{"type":173,"tag":640,"props":5464,"children":5465},{"style":659},[5466],{"type":178,"value":700},{"type":173,"tag":640,"props":5468,"children":5469},{"class":642,"line":703},[5470,5474,5478,5482,5486,5490,5494,5498,5503,5507,5512],{"type":173,"tag":640,"props":5471,"children":5472},{"style":647},[5473],{"type":178,"value":1459},{"type":173,"tag":640,"props":5475,"children":5476},{"style":907},[5477],{"type":178,"value":2448},{"type":173,"tag":640,"props":5479,"children":5480},{"style":671},[5481],{"type":178,"value":915},{"type":173,"tag":640,"props":5483,"children":5484},{"style":653},[5485],{"type":178,"value":2578},{"type":173,"tag":640,"props":5487,"children":5488},{"style":1080},[5489],{"type":178,"value":662},{"type":173,"tag":640,"props":5491,"children":5492},{"style":713},[5493],{"type":178,"value":2427},{"type":173,"tag":640,"props":5495,"children":5496},{"style":1080},[5497],{"type":178,"value":1127},{"type":173,"tag":640,"props":5499,"children":5500},{"style":671},[5501],{"type":178,"value":5502},"||",{"type":173,"tag":640,"props":5504,"children":5505},{"style":1080},[5506],{"type":178,"value":1248},{"type":173,"tag":640,"props":5508,"children":5509},{"style":713},[5510],{"type":178,"value":5511},"contextualType",{"type":173,"tag":640,"props":5513,"children":5514},{"style":671},[5515],{"type":178,"value":5516}," ?\n",{"type":173,"tag":640,"props":5518,"children":5519},{"class":642,"line":744},[5520,5525,5529,5533,5537,5542,5546,5551,5555,5559,5563,5568,5572,5576,5581,5585],{"type":173,"tag":640,"props":5521,"children":5522},{"style":653},[5523],{"type":178,"value":5524},"    checkExpressionWithContextualType",{"type":173,"tag":640,"props":5526,"children":5527},{"style":1080},[5528],{"type":178,"value":662},{"type":173,"tag":640,"props":5530,"children":5531},{"style":713},[5532],{"type":178,"value":2427},{"type":173,"tag":640,"props":5534,"children":5535},{"style":659},[5536],{"type":178,"value":1751},{"type":173,"tag":640,"props":5538,"children":5539},{"style":713},[5540],{"type":178,"value":5541}," contextualType",{"type":173,"tag":640,"props":5543,"children":5544},{"style":659},[5545],{"type":178,"value":1751},{"type":173,"tag":640,"props":5547,"children":5548},{"style":1277},[5549],{"type":178,"value":5550}," /*inferenceContext*/",{"type":173,"tag":640,"props":5552,"children":5553},{"style":2928},[5554],{"type":178,"value":2301},{"type":173,"tag":640,"props":5556,"children":5557},{"style":659},[5558],{"type":178,"value":1751},{"type":173,"tag":640,"props":5560,"children":5561},{"style":713},[5562],{"type":178,"value":2491},{"type":173,"tag":640,"props":5564,"children":5565},{"style":671},[5566],{"type":178,"value":5567}," ||",{"type":173,"tag":640,"props":5569,"children":5570},{"style":713},[5571],{"type":178,"value":2273},{"type":173,"tag":640,"props":5573,"children":5574},{"style":659},[5575],{"type":178,"value":1516},{"type":173,"tag":640,"props":5577,"children":5578},{"style":713},[5579],{"type":178,"value":5580},"Normal",{"type":173,"tag":640,"props":5582,"children":5583},{"style":1080},[5584],{"type":178,"value":1127},{"type":173,"tag":640,"props":5586,"children":5587},{"style":671},[5588],{"type":178,"value":2862},{"type":173,"tag":640,"props":5590,"children":5591},{"class":642,"line":1057},[5592,5597,5601,5605,5609,5613],{"type":173,"tag":640,"props":5593,"children":5594},{"style":653},[5595],{"type":178,"value":5596},"    checkExpressionCached",{"type":173,"tag":640,"props":5598,"children":5599},{"style":1080},[5600],{"type":178,"value":662},{"type":173,"tag":640,"props":5602,"children":5603},{"style":713},[5604],{"type":178,"value":2427},{"type":173,"tag":640,"props":5606,"children":5607},{"style":659},[5608],{"type":178,"value":1751},{"type":173,"tag":640,"props":5610,"children":5611},{"style":713},[5612],{"type":178,"value":2491},{"type":173,"tag":640,"props":5614,"children":5615},{"style":1080},[5616],{"type":178,"value":1362},{"type":173,"tag":640,"props":5618,"children":5619},{"class":642,"line":1094},[5620],{"type":173,"tag":640,"props":5621,"children":5622},{"style":659},[5623],{"type":178,"value":750},{"type":173,"tag":174,"props":5625,"children":5626},{},[5627,5629,5635,5637,5643],{"type":178,"value":5628},"为什么不是调用 checkExpressionWithContextualType 呢？我们是从变量声明这个场景获取标识符的类型，假设有 ",{"type":173,"tag":313,"props":5630,"children":5632},{"className":5631},[],[5633],{"type":178,"value":5634},"let x: {a: number} = { a: 1 }",{"type":178,"value":5636}," 代码，",{"type":173,"tag":313,"props":5638,"children":5640},{"className":5639},[],[5641],{"type":178,"value":5642},"{ a: 1 }",{"type":178,"value":5644}," 的类型推断需要根据上下文处理，所以适用 checkExpressionWithContextualType。而 f2 的情况不需要所以 contextualType 为空。",{"type":173,"tag":174,"props":5646,"children":5647},{},[5648],{"type":178,"value":5649},"这之后的路上见到了熟悉的 checkCallExpression、getResolvedSignature、resolveSignature、resolveCallExpression、resolveCall，大致指从检查调用表达式、获取签名、解析签名、解析调用表达式一直到解析调用。",{"type":173,"tag":174,"props":5651,"children":5652},{},[5653],{"type":178,"value":5654},"这些函数中只有 resolveCall 是较复杂的函数，后续会着重介绍。它主要从可能存在的多个函数重载中匹配一个合适的签名供后续流程使用。",{"type":173,"tag":630,"props":5656,"children":5658},{"className":632,"code":5657,"language":634,"meta":166,"style":166},"function resolveCall(node: CallLikeExpression, signatures: readonly Signature[], candidatesOutArray: Signature[] | undefined, checkMode: CheckMode, callChainFlags: SignatureFlags, headMessage?: DiagnosticMessage): Signature {\n  let result: Signature | undefined\n  const candidates = reorderCandidates(signatures, candidates, callChainFlags)\n  result = chooseOverload(candidates, assignableRelation, isSingleNonGenericCandidate, signatureHelpTrailingComma)\n  return result\n}\n",[5659],{"type":173,"tag":313,"props":5660,"children":5661},{"__ignoreMap":166},[5662,5817,5847,5897,5954,5966],{"type":173,"tag":640,"props":5663,"children":5664},{"class":642,"line":643},[5665,5669,5674,5678,5682,5686,5691,5695,5700,5704,5709,5713,5718,5722,5727,5731,5735,5740,5745,5749,5753,5757,5761,5765,5769,5774,5778,5783,5787,5792,5796,5801,5805,5809,5813],{"type":173,"tag":640,"props":5666,"children":5667},{"style":647},[5668],{"type":178,"value":650},{"type":173,"tag":640,"props":5670,"children":5671},{"style":653},[5672],{"type":178,"value":5673}," resolveCall",{"type":173,"tag":640,"props":5675,"children":5676},{"style":659},[5677],{"type":178,"value":662},{"type":173,"tag":640,"props":5679,"children":5680},{"style":665},[5681],{"type":178,"value":1122},{"type":173,"tag":640,"props":5683,"children":5684},{"style":671},[5685],{"type":178,"value":674},{"type":173,"tag":640,"props":5687,"children":5688},{"style":692},[5689],{"type":178,"value":5690}," CallLikeExpression",{"type":173,"tag":640,"props":5692,"children":5693},{"style":659},[5694],{"type":178,"value":1751},{"type":173,"tag":640,"props":5696,"children":5697},{"style":665},[5698],{"type":178,"value":5699}," signatures",{"type":173,"tag":640,"props":5701,"children":5702},{"style":671},[5703],{"type":178,"value":674},{"type":173,"tag":640,"props":5705,"children":5706},{"style":852},[5707],{"type":178,"value":5708}," readonly",{"type":173,"tag":640,"props":5710,"children":5711},{"style":692},[5712],{"type":178,"value":4783},{"type":173,"tag":640,"props":5714,"children":5715},{"style":713},[5716],{"type":178,"value":5717},"[]",{"type":173,"tag":640,"props":5719,"children":5720},{"style":659},[5721],{"type":178,"value":1751},{"type":173,"tag":640,"props":5723,"children":5724},{"style":665},[5725],{"type":178,"value":5726}," candidatesOutArray",{"type":173,"tag":640,"props":5728,"children":5729},{"style":671},[5730],{"type":178,"value":674},{"type":173,"tag":640,"props":5732,"children":5733},{"style":692},[5734],{"type":178,"value":4783},{"type":173,"tag":640,"props":5736,"children":5737},{"style":713},[5738],{"type":178,"value":5739},"[] ",{"type":173,"tag":640,"props":5741,"children":5742},{"style":671},[5743],{"type":178,"value":5744},"|",{"type":173,"tag":640,"props":5746,"children":5747},{"style":677},[5748],{"type":178,"value":2301},{"type":173,"tag":640,"props":5750,"children":5751},{"style":659},[5752],{"type":178,"value":1751},{"type":173,"tag":640,"props":5754,"children":5755},{"style":665},[5756],{"type":178,"value":2491},{"type":173,"tag":640,"props":5758,"children":5759},{"style":671},[5760],{"type":178,"value":674},{"type":173,"tag":640,"props":5762,"children":5763},{"style":692},[5764],{"type":178,"value":2273},{"type":173,"tag":640,"props":5766,"children":5767},{"style":659},[5768],{"type":178,"value":1751},{"type":173,"tag":640,"props":5770,"children":5771},{"style":665},[5772],{"type":178,"value":5773}," callChainFlags",{"type":173,"tag":640,"props":5775,"children":5776},{"style":671},[5777],{"type":178,"value":674},{"type":173,"tag":640,"props":5779,"children":5780},{"style":692},[5781],{"type":178,"value":5782}," SignatureFlags",{"type":173,"tag":640,"props":5784,"children":5785},{"style":659},[5786],{"type":178,"value":1751},{"type":173,"tag":640,"props":5788,"children":5789},{"style":665},[5790],{"type":178,"value":5791}," headMessage",{"type":173,"tag":640,"props":5793,"children":5794},{"style":671},[5795],{"type":178,"value":2999},{"type":173,"tag":640,"props":5797,"children":5798},{"style":692},[5799],{"type":178,"value":5800}," DiagnosticMessage",{"type":173,"tag":640,"props":5802,"children":5803},{"style":659},[5804],{"type":178,"value":685},{"type":173,"tag":640,"props":5806,"children":5807},{"style":671},[5808],{"type":178,"value":674},{"type":173,"tag":640,"props":5810,"children":5811},{"style":692},[5812],{"type":178,"value":4783},{"type":173,"tag":640,"props":5814,"children":5815},{"style":659},[5816],{"type":178,"value":700},{"type":173,"tag":640,"props":5818,"children":5819},{"class":642,"line":703},[5820,5825,5830,5834,5838,5842],{"type":173,"tag":640,"props":5821,"children":5822},{"style":647},[5823],{"type":178,"value":5824},"  let",{"type":173,"tag":640,"props":5826,"children":5827},{"style":713},[5828],{"type":178,"value":5829}," result",{"type":173,"tag":640,"props":5831,"children":5832},{"style":671},[5833],{"type":178,"value":674},{"type":173,"tag":640,"props":5835,"children":5836},{"style":692},[5837],{"type":178,"value":4783},{"type":173,"tag":640,"props":5839,"children":5840},{"style":671},[5841],{"type":178,"value":1618},{"type":173,"tag":640,"props":5843,"children":5844},{"style":677},[5845],{"type":178,"value":5846}," undefined\n",{"type":173,"tag":640,"props":5848,"children":5849},{"class":642,"line":744},[5850,5854,5859,5863,5868,5872,5877,5881,5885,5889,5893],{"type":173,"tag":640,"props":5851,"children":5852},{"style":647},[5853],{"type":178,"value":1459},{"type":173,"tag":640,"props":5855,"children":5856},{"style":907},[5857],{"type":178,"value":5858}," candidates",{"type":173,"tag":640,"props":5860,"children":5861},{"style":671},[5862],{"type":178,"value":915},{"type":173,"tag":640,"props":5864,"children":5865},{"style":653},[5866],{"type":178,"value":5867}," reorderCandidates",{"type":173,"tag":640,"props":5869,"children":5870},{"style":1080},[5871],{"type":178,"value":662},{"type":173,"tag":640,"props":5873,"children":5874},{"style":713},[5875],{"type":178,"value":5876},"signatures",{"type":173,"tag":640,"props":5878,"children":5879},{"style":659},[5880],{"type":178,"value":1751},{"type":173,"tag":640,"props":5882,"children":5883},{"style":713},[5884],{"type":178,"value":5858},{"type":173,"tag":640,"props":5886,"children":5887},{"style":659},[5888],{"type":178,"value":1751},{"type":173,"tag":640,"props":5890,"children":5891},{"style":713},[5892],{"type":178,"value":5773},{"type":173,"tag":640,"props":5894,"children":5895},{"style":1080},[5896],{"type":178,"value":934},{"type":173,"tag":640,"props":5898,"children":5899},{"class":642,"line":1057},[5900,5905,5909,5914,5918,5923,5927,5932,5936,5941,5945,5950],{"type":173,"tag":640,"props":5901,"children":5902},{"style":713},[5903],{"type":178,"value":5904},"  result",{"type":173,"tag":640,"props":5906,"children":5907},{"style":671},[5908],{"type":178,"value":915},{"type":173,"tag":640,"props":5910,"children":5911},{"style":653},[5912],{"type":178,"value":5913}," chooseOverload",{"type":173,"tag":640,"props":5915,"children":5916},{"style":1080},[5917],{"type":178,"value":662},{"type":173,"tag":640,"props":5919,"children":5920},{"style":713},[5921],{"type":178,"value":5922},"candidates",{"type":173,"tag":640,"props":5924,"children":5925},{"style":659},[5926],{"type":178,"value":1751},{"type":173,"tag":640,"props":5928,"children":5929},{"style":713},[5930],{"type":178,"value":5931}," assignableRelation",{"type":173,"tag":640,"props":5933,"children":5934},{"style":659},[5935],{"type":178,"value":1751},{"type":173,"tag":640,"props":5937,"children":5938},{"style":713},[5939],{"type":178,"value":5940}," isSingleNonGenericCandidate",{"type":173,"tag":640,"props":5942,"children":5943},{"style":659},[5944],{"type":178,"value":1751},{"type":173,"tag":640,"props":5946,"children":5947},{"style":713},[5948],{"type":178,"value":5949}," signatureHelpTrailingComma",{"type":173,"tag":640,"props":5951,"children":5952},{"style":1080},[5953],{"type":178,"value":934},{"type":173,"tag":640,"props":5955,"children":5956},{"class":642,"line":1094},[5957,5961],{"type":173,"tag":640,"props":5958,"children":5959},{"style":707},[5960],{"type":178,"value":710},{"type":173,"tag":640,"props":5962,"children":5963},{"style":713},[5964],{"type":178,"value":5965}," result\n",{"type":173,"tag":640,"props":5967,"children":5968},{"class":642,"line":1139},[5969],{"type":173,"tag":640,"props":5970,"children":5971},{"style":659},[5972],{"type":178,"value":750},{"type":173,"tag":174,"props":5974,"children":5975},{},[5976],{"type":178,"value":5977},"拿到签名后，在 checkCallExpression 中解析得到返回值的类型，此过程和 f1 是一样的，最后取得结果 string。",{"type":173,"tag":630,"props":5979,"children":5981},{"className":632,"code":5980,"language":634,"meta":166,"style":166},"function checkCallExpression(node: CallExpression | NewExpression, checkMode?: CheckMode): Type {\n  const signature = getResolvedSignature(node, /*candidatesOutArray*/ undefined, checkMode)\n  const returnType = getReturnTypeOfSignature(signature)\n  return returnType\n}\n",[5982],{"type":173,"tag":313,"props":5983,"children":5984},{"__ignoreMap":166},[5985,6055,6108,6140,6152],{"type":173,"tag":640,"props":5986,"children":5987},{"class":642,"line":643},[5988,5992,5997,6001,6005,6009,6014,6018,6023,6027,6031,6035,6039,6043,6047,6051],{"type":173,"tag":640,"props":5989,"children":5990},{"style":647},[5991],{"type":178,"value":650},{"type":173,"tag":640,"props":5993,"children":5994},{"style":653},[5995],{"type":178,"value":5996}," checkCallExpression",{"type":173,"tag":640,"props":5998,"children":5999},{"style":659},[6000],{"type":178,"value":662},{"type":173,"tag":640,"props":6002,"children":6003},{"style":665},[6004],{"type":178,"value":1122},{"type":173,"tag":640,"props":6006,"children":6007},{"style":671},[6008],{"type":178,"value":674},{"type":173,"tag":640,"props":6010,"children":6011},{"style":692},[6012],{"type":178,"value":6013}," CallExpression",{"type":173,"tag":640,"props":6015,"children":6016},{"style":671},[6017],{"type":178,"value":1618},{"type":173,"tag":640,"props":6019,"children":6020},{"style":692},[6021],{"type":178,"value":6022}," NewExpression",{"type":173,"tag":640,"props":6024,"children":6025},{"style":659},[6026],{"type":178,"value":1751},{"type":173,"tag":640,"props":6028,"children":6029},{"style":665},[6030],{"type":178,"value":2491},{"type":173,"tag":640,"props":6032,"children":6033},{"style":671},[6034],{"type":178,"value":2999},{"type":173,"tag":640,"props":6036,"children":6037},{"style":692},[6038],{"type":178,"value":2273},{"type":173,"tag":640,"props":6040,"children":6041},{"style":659},[6042],{"type":178,"value":685},{"type":173,"tag":640,"props":6044,"children":6045},{"style":671},[6046],{"type":178,"value":674},{"type":173,"tag":640,"props":6048,"children":6049},{"style":692},[6050],{"type":178,"value":695},{"type":173,"tag":640,"props":6052,"children":6053},{"style":659},[6054],{"type":178,"value":700},{"type":173,"tag":640,"props":6056,"children":6057},{"class":642,"line":703},[6058,6062,6066,6070,6075,6079,6083,6087,6092,6096,6100,6104],{"type":173,"tag":640,"props":6059,"children":6060},{"style":647},[6061],{"type":178,"value":1459},{"type":173,"tag":640,"props":6063,"children":6064},{"style":907},[6065],{"type":178,"value":4921},{"type":173,"tag":640,"props":6067,"children":6068},{"style":671},[6069],{"type":178,"value":915},{"type":173,"tag":640,"props":6071,"children":6072},{"style":653},[6073],{"type":178,"value":6074}," getResolvedSignature",{"type":173,"tag":640,"props":6076,"children":6077},{"style":1080},[6078],{"type":178,"value":662},{"type":173,"tag":640,"props":6080,"children":6081},{"style":713},[6082],{"type":178,"value":1122},{"type":173,"tag":640,"props":6084,"children":6085},{"style":659},[6086],{"type":178,"value":1751},{"type":173,"tag":640,"props":6088,"children":6089},{"style":1277},[6090],{"type":178,"value":6091}," /*candidatesOutArray*/",{"type":173,"tag":640,"props":6093,"children":6094},{"style":2928},[6095],{"type":178,"value":2301},{"type":173,"tag":640,"props":6097,"children":6098},{"style":659},[6099],{"type":178,"value":1751},{"type":173,"tag":640,"props":6101,"children":6102},{"style":713},[6103],{"type":178,"value":2491},{"type":173,"tag":640,"props":6105,"children":6106},{"style":1080},[6107],{"type":178,"value":934},{"type":173,"tag":640,"props":6109,"children":6110},{"class":642,"line":744},[6111,6115,6120,6124,6128,6132,6136],{"type":173,"tag":640,"props":6112,"children":6113},{"style":647},[6114],{"type":178,"value":1459},{"type":173,"tag":640,"props":6116,"children":6117},{"style":907},[6118],{"type":178,"value":6119}," returnType",{"type":173,"tag":640,"props":6121,"children":6122},{"style":671},[6123],{"type":178,"value":915},{"type":173,"tag":640,"props":6125,"children":6126},{"style":653},[6127],{"type":178,"value":4765},{"type":173,"tag":640,"props":6129,"children":6130},{"style":1080},[6131],{"type":178,"value":662},{"type":173,"tag":640,"props":6133,"children":6134},{"style":713},[6135],{"type":178,"value":4774},{"type":173,"tag":640,"props":6137,"children":6138},{"style":1080},[6139],{"type":178,"value":934},{"type":173,"tag":640,"props":6141,"children":6142},{"class":642,"line":1057},[6143,6147],{"type":173,"tag":640,"props":6144,"children":6145},{"style":707},[6146],{"type":178,"value":710},{"type":173,"tag":640,"props":6148,"children":6149},{"style":713},[6150],{"type":178,"value":6151}," returnType\n",{"type":173,"tag":640,"props":6153,"children":6154},{"class":642,"line":1094},[6155],{"type":173,"tag":640,"props":6156,"children":6157},{"style":659},[6158],{"type":178,"value":750},{"type":173,"tag":174,"props":6160,"children":6161},{},[6162],{"type":178,"value":6163},"chooseOverload 顾名思义，从多个重载中选择一个合适的重载签名。它会根据参数个数、参数类型、返回类型等信息，选择最匹配的重载签名。如果函数是泛型函数，会在此过程中推断泛型参数。比如，f2 的 T 会在 inferTypeArguments 中推断成为 unknown。",{"type":173,"tag":630,"props":6165,"children":6167},{"className":632,"code":6166,"language":634,"meta":166,"style":166},"function chooseOverload(candidates: Signature[]) {\n  for (let candidateIndex = 0; candidateIndex \u003C candidates.length; candidateIndex++) {\n    const candidate = candidates[candidateIndex];\n    if (candidate.typeParameters) {\n        let typeArgumentTypes: Type[] | undefined;\n        inferenceContext = createInferenceContext(candidate.typeParameters, candidate, /*flags*/ isInJSFile(node) ? InferenceFlags.AnyDefault : InferenceFlags.None);\n        typeArgumentTypes = inferTypeArguments(node, candidate, args, argCheckMode | CheckMode.SkipGenericFunctions, inferenceContext);\n        argCheckMode |= inferenceContext.flags & InferenceFlags.SkippedGenericFunction ? CheckMode.SkipGenericFunctions : CheckMode.Normal;\n    }\n  }\n}\n",[6168],{"type":173,"tag":313,"props":6169,"children":6170},{"__ignoreMap":166},[6171,6210,6287,6326,6358,6395,6505,6590,6668,6675,6682],{"type":173,"tag":640,"props":6172,"children":6173},{"class":642,"line":643},[6174,6178,6182,6186,6190,6194,6198,6202,6206],{"type":173,"tag":640,"props":6175,"children":6176},{"style":647},[6177],{"type":178,"value":650},{"type":173,"tag":640,"props":6179,"children":6180},{"style":653},[6181],{"type":178,"value":5913},{"type":173,"tag":640,"props":6183,"children":6184},{"style":659},[6185],{"type":178,"value":662},{"type":173,"tag":640,"props":6187,"children":6188},{"style":665},[6189],{"type":178,"value":5922},{"type":173,"tag":640,"props":6191,"children":6192},{"style":671},[6193],{"type":178,"value":674},{"type":173,"tag":640,"props":6195,"children":6196},{"style":692},[6197],{"type":178,"value":4783},{"type":173,"tag":640,"props":6199,"children":6200},{"style":713},[6201],{"type":178,"value":5717},{"type":173,"tag":640,"props":6203,"children":6204},{"style":659},[6205],{"type":178,"value":685},{"type":173,"tag":640,"props":6207,"children":6208},{"style":659},[6209],{"type":178,"value":700},{"type":173,"tag":640,"props":6211,"children":6212},{"class":642,"line":703},[6213,6218,6222,6226,6231,6235,6239,6244,6248,6253,6257,6261,6266,6270,6274,6279,6283],{"type":173,"tag":640,"props":6214,"children":6215},{"style":707},[6216],{"type":178,"value":6217},"  for",{"type":173,"tag":640,"props":6219,"children":6220},{"style":1080},[6221],{"type":178,"value":1248},{"type":173,"tag":640,"props":6223,"children":6224},{"style":647},[6225],{"type":178,"value":4545},{"type":173,"tag":640,"props":6227,"children":6228},{"style":713},[6229],{"type":178,"value":6230}," candidateIndex",{"type":173,"tag":640,"props":6232,"children":6233},{"style":671},[6234],{"type":178,"value":915},{"type":173,"tag":640,"props":6236,"children":6237},{"style":926},[6238],{"type":178,"value":3541},{"type":173,"tag":640,"props":6240,"children":6241},{"style":659},[6242],{"type":178,"value":6243},";",{"type":173,"tag":640,"props":6245,"children":6246},{"style":713},[6247],{"type":178,"value":6230},{"type":173,"tag":640,"props":6249,"children":6250},{"style":671},[6251],{"type":178,"value":6252}," \u003C",{"type":173,"tag":640,"props":6254,"children":6255},{"style":713},[6256],{"type":178,"value":5858},{"type":173,"tag":640,"props":6258,"children":6259},{"style":659},[6260],{"type":178,"value":1516},{"type":173,"tag":640,"props":6262,"children":6263},{"style":907},[6264],{"type":178,"value":6265},"length",{"type":173,"tag":640,"props":6267,"children":6268},{"style":659},[6269],{"type":178,"value":6243},{"type":173,"tag":640,"props":6271,"children":6272},{"style":713},[6273],{"type":178,"value":6230},{"type":173,"tag":640,"props":6275,"children":6276},{"style":671},[6277],{"type":178,"value":6278},"++",{"type":173,"tag":640,"props":6280,"children":6281},{"style":1080},[6282],{"type":178,"value":1127},{"type":173,"tag":640,"props":6284,"children":6285},{"style":659},[6286],{"type":178,"value":1271},{"type":173,"tag":640,"props":6288,"children":6289},{"class":642,"line":744},[6290,6294,6299,6303,6307,6312,6317,6322],{"type":173,"tag":640,"props":6291,"children":6292},{"style":647},[6293],{"type":178,"value":2443},{"type":173,"tag":640,"props":6295,"children":6296},{"style":907},[6297],{"type":178,"value":6298}," candidate",{"type":173,"tag":640,"props":6300,"children":6301},{"style":671},[6302],{"type":178,"value":915},{"type":173,"tag":640,"props":6304,"children":6305},{"style":713},[6306],{"type":178,"value":5858},{"type":173,"tag":640,"props":6308,"children":6309},{"style":1080},[6310],{"type":178,"value":6311},"[",{"type":173,"tag":640,"props":6313,"children":6314},{"style":713},[6315],{"type":178,"value":6316},"candidateIndex",{"type":173,"tag":640,"props":6318,"children":6319},{"style":1080},[6320],{"type":178,"value":6321},"]",{"type":173,"tag":640,"props":6323,"children":6324},{"style":659},[6325],{"type":178,"value":741},{"type":173,"tag":640,"props":6327,"children":6328},{"class":642,"line":1057},[6329,6333,6337,6342,6346,6350,6354],{"type":173,"tag":640,"props":6330,"children":6331},{"style":707},[6332],{"type":178,"value":3973},{"type":173,"tag":640,"props":6334,"children":6335},{"style":1080},[6336],{"type":178,"value":1248},{"type":173,"tag":640,"props":6338,"children":6339},{"style":713},[6340],{"type":178,"value":6341},"candidate",{"type":173,"tag":640,"props":6343,"children":6344},{"style":659},[6345],{"type":178,"value":1516},{"type":173,"tag":640,"props":6347,"children":6348},{"style":713},[6349],{"type":178,"value":5389},{"type":173,"tag":640,"props":6351,"children":6352},{"style":1080},[6353],{"type":178,"value":1127},{"type":173,"tag":640,"props":6355,"children":6356},{"style":659},[6357],{"type":178,"value":1271},{"type":173,"tag":640,"props":6359,"children":6360},{"class":642,"line":1094},[6361,6366,6371,6375,6379,6383,6387,6391],{"type":173,"tag":640,"props":6362,"children":6363},{"style":647},[6364],{"type":178,"value":6365},"        let",{"type":173,"tag":640,"props":6367,"children":6368},{"style":713},[6369],{"type":178,"value":6370}," typeArgumentTypes",{"type":173,"tag":640,"props":6372,"children":6373},{"style":671},[6374],{"type":178,"value":674},{"type":173,"tag":640,"props":6376,"children":6377},{"style":692},[6378],{"type":178,"value":695},{"type":173,"tag":640,"props":6380,"children":6381},{"style":1080},[6382],{"type":178,"value":5739},{"type":173,"tag":640,"props":6384,"children":6385},{"style":671},[6386],{"type":178,"value":5744},{"type":173,"tag":640,"props":6388,"children":6389},{"style":677},[6390],{"type":178,"value":2301},{"type":173,"tag":640,"props":6392,"children":6393},{"style":659},[6394],{"type":178,"value":741},{"type":173,"tag":640,"props":6396,"children":6397},{"class":642,"line":1139},[6398,6403,6407,6412,6416,6420,6424,6428,6432,6436,6440,6445,6450,6454,6458,6462,6466,6471,6475,6480,6484,6488,6492,6497,6501],{"type":173,"tag":640,"props":6399,"children":6400},{"style":713},[6401],{"type":178,"value":6402},"        inferenceContext",{"type":173,"tag":640,"props":6404,"children":6405},{"style":671},[6406],{"type":178,"value":915},{"type":173,"tag":640,"props":6408,"children":6409},{"style":653},[6410],{"type":178,"value":6411}," createInferenceContext",{"type":173,"tag":640,"props":6413,"children":6414},{"style":1080},[6415],{"type":178,"value":662},{"type":173,"tag":640,"props":6417,"children":6418},{"style":713},[6419],{"type":178,"value":6341},{"type":173,"tag":640,"props":6421,"children":6422},{"style":659},[6423],{"type":178,"value":1516},{"type":173,"tag":640,"props":6425,"children":6426},{"style":713},[6427],{"type":178,"value":5389},{"type":173,"tag":640,"props":6429,"children":6430},{"style":659},[6431],{"type":178,"value":1751},{"type":173,"tag":640,"props":6433,"children":6434},{"style":713},[6435],{"type":178,"value":6298},{"type":173,"tag":640,"props":6437,"children":6438},{"style":659},[6439],{"type":178,"value":1751},{"type":173,"tag":640,"props":6441,"children":6442},{"style":1277},[6443],{"type":178,"value":6444}," /*flags*/",{"type":173,"tag":640,"props":6446,"children":6447},{"style":653},[6448],{"type":178,"value":6449}," isInJSFile",{"type":173,"tag":640,"props":6451,"children":6452},{"style":1080},[6453],{"type":178,"value":662},{"type":173,"tag":640,"props":6455,"children":6456},{"style":713},[6457],{"type":178,"value":1122},{"type":173,"tag":640,"props":6459,"children":6460},{"style":1080},[6461],{"type":178,"value":1127},{"type":173,"tag":640,"props":6463,"children":6464},{"style":671},[6465],{"type":178,"value":2840},{"type":173,"tag":640,"props":6467,"children":6468},{"style":713},[6469],{"type":178,"value":6470}," InferenceFlags",{"type":173,"tag":640,"props":6472,"children":6473},{"style":659},[6474],{"type":178,"value":1516},{"type":173,"tag":640,"props":6476,"children":6477},{"style":713},[6478],{"type":178,"value":6479},"AnyDefault",{"type":173,"tag":640,"props":6481,"children":6482},{"style":671},[6483],{"type":178,"value":731},{"type":173,"tag":640,"props":6485,"children":6486},{"style":713},[6487],{"type":178,"value":6470},{"type":173,"tag":640,"props":6489,"children":6490},{"style":659},[6491],{"type":178,"value":1516},{"type":173,"tag":640,"props":6493,"children":6494},{"style":713},[6495],{"type":178,"value":6496},"None",{"type":173,"tag":640,"props":6498,"children":6499},{"style":1080},[6500],{"type":178,"value":685},{"type":173,"tag":640,"props":6502,"children":6503},{"style":659},[6504],{"type":178,"value":741},{"type":173,"tag":640,"props":6506,"children":6507},{"class":642,"line":1148},[6508,6513,6517,6522,6526,6530,6534,6538,6542,6547,6551,6556,6560,6564,6568,6573,6577,6582,6586],{"type":173,"tag":640,"props":6509,"children":6510},{"style":713},[6511],{"type":178,"value":6512},"        typeArgumentTypes",{"type":173,"tag":640,"props":6514,"children":6515},{"style":671},[6516],{"type":178,"value":915},{"type":173,"tag":640,"props":6518,"children":6519},{"style":653},[6520],{"type":178,"value":6521}," inferTypeArguments",{"type":173,"tag":640,"props":6523,"children":6524},{"style":1080},[6525],{"type":178,"value":662},{"type":173,"tag":640,"props":6527,"children":6528},{"style":713},[6529],{"type":178,"value":1122},{"type":173,"tag":640,"props":6531,"children":6532},{"style":659},[6533],{"type":178,"value":1751},{"type":173,"tag":640,"props":6535,"children":6536},{"style":713},[6537],{"type":178,"value":6298},{"type":173,"tag":640,"props":6539,"children":6540},{"style":659},[6541],{"type":178,"value":1751},{"type":173,"tag":640,"props":6543,"children":6544},{"style":713},[6545],{"type":178,"value":6546}," args",{"type":173,"tag":640,"props":6548,"children":6549},{"style":659},[6550],{"type":178,"value":1751},{"type":173,"tag":640,"props":6552,"children":6553},{"style":713},[6554],{"type":178,"value":6555}," argCheckMode",{"type":173,"tag":640,"props":6557,"children":6558},{"style":671},[6559],{"type":178,"value":1618},{"type":173,"tag":640,"props":6561,"children":6562},{"style":713},[6563],{"type":178,"value":2273},{"type":173,"tag":640,"props":6565,"children":6566},{"style":659},[6567],{"type":178,"value":1516},{"type":173,"tag":640,"props":6569,"children":6570},{"style":713},[6571],{"type":178,"value":6572},"SkipGenericFunctions",{"type":173,"tag":640,"props":6574,"children":6575},{"style":659},[6576],{"type":178,"value":1751},{"type":173,"tag":640,"props":6578,"children":6579},{"style":713},[6580],{"type":178,"value":6581}," inferenceContext",{"type":173,"tag":640,"props":6583,"children":6584},{"style":1080},[6585],{"type":178,"value":685},{"type":173,"tag":640,"props":6587,"children":6588},{"style":659},[6589],{"type":178,"value":741},{"type":173,"tag":640,"props":6591,"children":6592},{"class":642,"line":1157},[6593,6598,6603,6607,6611,6615,6619,6623,6627,6632,6636,6640,6644,6648,6652,6656,6660,6664],{"type":173,"tag":640,"props":6594,"children":6595},{"style":713},[6596],{"type":178,"value":6597},"        argCheckMode",{"type":173,"tag":640,"props":6599,"children":6600},{"style":671},[6601],{"type":178,"value":6602}," |=",{"type":173,"tag":640,"props":6604,"children":6605},{"style":713},[6606],{"type":178,"value":6581},{"type":173,"tag":640,"props":6608,"children":6609},{"style":659},[6610],{"type":178,"value":1516},{"type":173,"tag":640,"props":6612,"children":6613},{"style":713},[6614],{"type":178,"value":1591},{"type":173,"tag":640,"props":6616,"children":6617},{"style":671},[6618],{"type":178,"value":1506},{"type":173,"tag":640,"props":6620,"children":6621},{"style":713},[6622],{"type":178,"value":6470},{"type":173,"tag":640,"props":6624,"children":6625},{"style":659},[6626],{"type":178,"value":1516},{"type":173,"tag":640,"props":6628,"children":6629},{"style":713},[6630],{"type":178,"value":6631},"SkippedGenericFunction",{"type":173,"tag":640,"props":6633,"children":6634},{"style":671},[6635],{"type":178,"value":721},{"type":173,"tag":640,"props":6637,"children":6638},{"style":713},[6639],{"type":178,"value":2273},{"type":173,"tag":640,"props":6641,"children":6642},{"style":659},[6643],{"type":178,"value":1516},{"type":173,"tag":640,"props":6645,"children":6646},{"style":713},[6647],{"type":178,"value":6572},{"type":173,"tag":640,"props":6649,"children":6650},{"style":671},[6651],{"type":178,"value":731},{"type":173,"tag":640,"props":6653,"children":6654},{"style":713},[6655],{"type":178,"value":2273},{"type":173,"tag":640,"props":6657,"children":6658},{"style":659},[6659],{"type":178,"value":1516},{"type":173,"tag":640,"props":6661,"children":6662},{"style":713},[6663],{"type":178,"value":5580},{"type":173,"tag":640,"props":6665,"children":6666},{"style":659},[6667],{"type":178,"value":741},{"type":173,"tag":640,"props":6669,"children":6670},{"class":642,"line":1372},[6671],{"type":173,"tag":640,"props":6672,"children":6673},{"style":659},[6674],{"type":178,"value":4241},{"type":173,"tag":640,"props":6676,"children":6677},{"class":642,"line":1674},[6678],{"type":173,"tag":640,"props":6679,"children":6680},{"style":659},[6681],{"type":178,"value":1154},{"type":173,"tag":640,"props":6683,"children":6684},{"class":642,"line":1682},[6685],{"type":173,"tag":640,"props":6686,"children":6687},{"style":659},[6688],{"type":178,"value":750},{"type":173,"tag":174,"props":6690,"children":6691},{},[6692],{"type":178,"value":6693},"日常代码我们常提到 TS 会根据上下文做类型推断，这里的“上下文”也就是 contextualType。contextualType 容易和 inferenceContext 混淆，这里有必要澄清一下。",{"type":173,"tag":174,"props":6695,"children":6696},{},[6697],{"type":178,"value":6698},"contextualType 指的是根据上下文推断出来的类型，而 inferenceContext 则是推断类型时，即时依赖的上下文信息，以下代码举例：",{"type":173,"tag":630,"props":6700,"children":6702},{"className":632,"code":6701,"language":634,"meta":166,"style":166},"let fn: \u003CT>(x: T) => T = (x) => x + 1\nfn(42)\n",[6703],{"type":173,"tag":313,"props":6704,"children":6705},{"__ignoreMap":166},[6706,6794],{"type":173,"tag":640,"props":6707,"children":6708},{"class":642,"line":643},[6709,6713,6718,6722,6726,6730,6734,6738,6742,6747,6751,6755,6759,6763,6767,6771,6775,6779,6784,6789],{"type":173,"tag":640,"props":6710,"children":6711},{"style":647},[6712],{"type":178,"value":4545},{"type":173,"tag":640,"props":6714,"children":6716},{"style":6715},"--shiki-light:#90A4AE;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[6717],{"type":178,"value":865},{"type":173,"tag":640,"props":6719,"children":6720},{"style":671},[6721],{"type":178,"value":674},{"type":173,"tag":640,"props":6723,"children":6724},{"style":659},[6725],{"type":178,"value":6252},{"type":173,"tag":640,"props":6727,"children":6728},{"style":692},[6729],{"type":178,"value":5191},{"type":173,"tag":640,"props":6731,"children":6732},{"style":659},[6733],{"type":178,"value":5196},{"type":173,"tag":640,"props":6735,"children":6736},{"style":665},[6737],{"type":178,"value":874},{"type":173,"tag":640,"props":6739,"children":6740},{"style":671},[6741],{"type":178,"value":674},{"type":173,"tag":640,"props":6743,"children":6744},{"style":692},[6745],{"type":178,"value":6746}," T",{"type":173,"tag":640,"props":6748,"children":6749},{"style":659},[6750],{"type":178,"value":685},{"type":173,"tag":640,"props":6752,"children":6753},{"style":647},[6754],{"type":178,"value":1050},{"type":173,"tag":640,"props":6756,"children":6757},{"style":692},[6758],{"type":178,"value":6746},{"type":173,"tag":640,"props":6760,"children":6761},{"style":671},[6762],{"type":178,"value":915},{"type":173,"tag":640,"props":6764,"children":6765},{"style":659},[6766],{"type":178,"value":1248},{"type":173,"tag":640,"props":6768,"children":6769},{"style":665},[6770],{"type":178,"value":874},{"type":173,"tag":640,"props":6772,"children":6773},{"style":659},[6774],{"type":178,"value":685},{"type":173,"tag":640,"props":6776,"children":6777},{"style":647},[6778],{"type":178,"value":1050},{"type":173,"tag":640,"props":6780,"children":6781},{"style":713},[6782],{"type":178,"value":6783}," x ",{"type":173,"tag":640,"props":6785,"children":6786},{"style":671},[6787],{"type":178,"value":6788},"+",{"type":173,"tag":640,"props":6790,"children":6791},{"style":926},[6792],{"type":178,"value":6793}," 1\n",{"type":173,"tag":640,"props":6795,"children":6796},{"class":642,"line":703},[6797,6802,6806,6811],{"type":173,"tag":640,"props":6798,"children":6799},{"style":653},[6800],{"type":178,"value":6801},"fn",{"type":173,"tag":640,"props":6803,"children":6804},{"style":713},[6805],{"type":178,"value":662},{"type":173,"tag":640,"props":6807,"children":6808},{"style":926},[6809],{"type":178,"value":6810},"42",{"type":173,"tag":640,"props":6812,"children":6813},{"style":713},[6814],{"type":178,"value":934},{"type":173,"tag":174,"props":6816,"children":6817},{},[6818,6820,6826,6828,6834,6836,6842],{"type":178,"value":6819},"上代码中 ",{"type":173,"tag":313,"props":6821,"children":6823},{"className":6822},[],[6824],{"type":178,"value":6825},"(x) => x + 1",{"type":178,"value":6827}," 的 contextualType 就是 ",{"type":173,"tag":313,"props":6829,"children":6831},{"className":6830},[],[6832],{"type":178,"value":6833},"\u003CT>(x: T) => T",{"type":178,"value":6835},"，因为声明的变量类型明确规定了。而上代码的 ",{"type":173,"tag":313,"props":6837,"children":6839},{"className":6838},[],[6840],{"type":178,"value":6841},"fn(42)",{"type":178,"value":6843}," 的调用中，T 根据参数 42 推断成 number 则是推断时 inferenceContext 的一部分。",{"type":173,"tag":174,"props":6845,"children":6846},{},[6847],{"type":178,"value":6848},"回到代码。实际上，尽管 f2 的泛型推断调用了 inferTypeArguments 函数，但是没有涉及到 TS 编译器类型推断的核心（inferTypes 调用），主要是因为实参 2 对应的参数 x 的推断不需要泛型的参与。见 inferTypeArguments，仅当 paramType 包含可推断的类型变量时，才会调用 inferTypes 函数进行类型推断。",{"type":173,"tag":630,"props":6850,"children":6852},{"className":632,"code":6851,"language":634,"meta":166,"style":166},"function inferTypeArguments(node: CallLikeExpression, signature: Signature, args: readonly Expression[], checkMode: CheckMode, context: InferenceContext): Type[] {\n  for (let i = 0; i \u003C argCount; i++) {\n    const arg = args[i]\n    if (arg.kind !== SyntaxKind.OmittedExpression) {\n      const paramType = getTypeAtPosition(signature, i)\n      if (couldContainTypeVariables(paramType)) {\n        //... inferTypes here\n      }\n    }\n  }\n  return getInferredTypes(context)\n}\n",[6853],{"type":173,"tag":313,"props":6854,"children":6855},{"__ignoreMap":166},[6856,6977,7042,7075,7124,7165,7199,7207,7215,7222,7229,7254],{"type":173,"tag":640,"props":6857,"children":6858},{"class":642,"line":643},[6859,6863,6867,6871,6875,6879,6883,6887,6891,6895,6899,6903,6907,6911,6915,6919,6923,6927,6931,6935,6939,6943,6948,6952,6957,6961,6965,6969,6973],{"type":173,"tag":640,"props":6860,"children":6861},{"style":647},[6862],{"type":178,"value":650},{"type":173,"tag":640,"props":6864,"children":6865},{"style":653},[6866],{"type":178,"value":6521},{"type":173,"tag":640,"props":6868,"children":6869},{"style":659},[6870],{"type":178,"value":662},{"type":173,"tag":640,"props":6872,"children":6873},{"style":665},[6874],{"type":178,"value":1122},{"type":173,"tag":640,"props":6876,"children":6877},{"style":671},[6878],{"type":178,"value":674},{"type":173,"tag":640,"props":6880,"children":6881},{"style":692},[6882],{"type":178,"value":5690},{"type":173,"tag":640,"props":6884,"children":6885},{"style":659},[6886],{"type":178,"value":1751},{"type":173,"tag":640,"props":6888,"children":6889},{"style":665},[6890],{"type":178,"value":4921},{"type":173,"tag":640,"props":6892,"children":6893},{"style":671},[6894],{"type":178,"value":674},{"type":173,"tag":640,"props":6896,"children":6897},{"style":692},[6898],{"type":178,"value":4783},{"type":173,"tag":640,"props":6900,"children":6901},{"style":659},[6902],{"type":178,"value":1751},{"type":173,"tag":640,"props":6904,"children":6905},{"style":665},[6906],{"type":178,"value":6546},{"type":173,"tag":640,"props":6908,"children":6909},{"style":671},[6910],{"type":178,"value":674},{"type":173,"tag":640,"props":6912,"children":6913},{"style":852},[6914],{"type":178,"value":5708},{"type":173,"tag":640,"props":6916,"children":6917},{"style":692},[6918],{"type":178,"value":2595},{"type":173,"tag":640,"props":6920,"children":6921},{"style":713},[6922],{"type":178,"value":5717},{"type":173,"tag":640,"props":6924,"children":6925},{"style":659},[6926],{"type":178,"value":1751},{"type":173,"tag":640,"props":6928,"children":6929},{"style":665},[6930],{"type":178,"value":2491},{"type":173,"tag":640,"props":6932,"children":6933},{"style":671},[6934],{"type":178,"value":674},{"type":173,"tag":640,"props":6936,"children":6937},{"style":692},[6938],{"type":178,"value":2273},{"type":173,"tag":640,"props":6940,"children":6941},{"style":659},[6942],{"type":178,"value":1751},{"type":173,"tag":640,"props":6944,"children":6945},{"style":665},[6946],{"type":178,"value":6947}," context",{"type":173,"tag":640,"props":6949,"children":6950},{"style":671},[6951],{"type":178,"value":674},{"type":173,"tag":640,"props":6953,"children":6954},{"style":692},[6955],{"type":178,"value":6956}," InferenceContext",{"type":173,"tag":640,"props":6958,"children":6959},{"style":659},[6960],{"type":178,"value":685},{"type":173,"tag":640,"props":6962,"children":6963},{"style":671},[6964],{"type":178,"value":674},{"type":173,"tag":640,"props":6966,"children":6967},{"style":692},[6968],{"type":178,"value":695},{"type":173,"tag":640,"props":6970,"children":6971},{"style":713},[6972],{"type":178,"value":5739},{"type":173,"tag":640,"props":6974,"children":6975},{"style":659},[6976],{"type":178,"value":1271},{"type":173,"tag":640,"props":6978,"children":6979},{"class":642,"line":703},[6980,6984,6988,6992,6997,7001,7005,7009,7013,7017,7022,7026,7030,7034,7038],{"type":173,"tag":640,"props":6981,"children":6982},{"style":707},[6983],{"type":178,"value":6217},{"type":173,"tag":640,"props":6985,"children":6986},{"style":1080},[6987],{"type":178,"value":1248},{"type":173,"tag":640,"props":6989,"children":6990},{"style":647},[6991],{"type":178,"value":4545},{"type":173,"tag":640,"props":6993,"children":6994},{"style":713},[6995],{"type":178,"value":6996}," i",{"type":173,"tag":640,"props":6998,"children":6999},{"style":671},[7000],{"type":178,"value":915},{"type":173,"tag":640,"props":7002,"children":7003},{"style":926},[7004],{"type":178,"value":3541},{"type":173,"tag":640,"props":7006,"children":7007},{"style":659},[7008],{"type":178,"value":6243},{"type":173,"tag":640,"props":7010,"children":7011},{"style":713},[7012],{"type":178,"value":6996},{"type":173,"tag":640,"props":7014,"children":7015},{"style":671},[7016],{"type":178,"value":6252},{"type":173,"tag":640,"props":7018,"children":7019},{"style":713},[7020],{"type":178,"value":7021}," argCount",{"type":173,"tag":640,"props":7023,"children":7024},{"style":659},[7025],{"type":178,"value":6243},{"type":173,"tag":640,"props":7027,"children":7028},{"style":713},[7029],{"type":178,"value":6996},{"type":173,"tag":640,"props":7031,"children":7032},{"style":671},[7033],{"type":178,"value":6278},{"type":173,"tag":640,"props":7035,"children":7036},{"style":1080},[7037],{"type":178,"value":1127},{"type":173,"tag":640,"props":7039,"children":7040},{"style":659},[7041],{"type":178,"value":1271},{"type":173,"tag":640,"props":7043,"children":7044},{"class":642,"line":744},[7045,7049,7054,7058,7062,7066,7071],{"type":173,"tag":640,"props":7046,"children":7047},{"style":647},[7048],{"type":178,"value":2443},{"type":173,"tag":640,"props":7050,"children":7051},{"style":907},[7052],{"type":178,"value":7053}," arg",{"type":173,"tag":640,"props":7055,"children":7056},{"style":671},[7057],{"type":178,"value":915},{"type":173,"tag":640,"props":7059,"children":7060},{"style":713},[7061],{"type":178,"value":6546},{"type":173,"tag":640,"props":7063,"children":7064},{"style":1080},[7065],{"type":178,"value":6311},{"type":173,"tag":640,"props":7067,"children":7068},{"style":713},[7069],{"type":178,"value":7070},"i",{"type":173,"tag":640,"props":7072,"children":7073},{"style":1080},[7074],{"type":178,"value":1770},{"type":173,"tag":640,"props":7076,"children":7077},{"class":642,"line":1057},[7078,7082,7086,7091,7095,7099,7103,7107,7111,7116,7120],{"type":173,"tag":640,"props":7079,"children":7080},{"style":707},[7081],{"type":178,"value":3973},{"type":173,"tag":640,"props":7083,"children":7084},{"style":1080},[7085],{"type":178,"value":1248},{"type":173,"tag":640,"props":7087,"children":7088},{"style":713},[7089],{"type":178,"value":7090},"arg",{"type":173,"tag":640,"props":7092,"children":7093},{"style":659},[7094],{"type":178,"value":1516},{"type":173,"tag":640,"props":7096,"children":7097},{"style":713},[7098],{"type":178,"value":2698},{"type":173,"tag":640,"props":7100,"children":7101},{"style":671},[7102],{"type":178,"value":2703},{"type":173,"tag":640,"props":7104,"children":7105},{"style":713},[7106],{"type":178,"value":2708},{"type":173,"tag":640,"props":7108,"children":7109},{"style":659},[7110],{"type":178,"value":1516},{"type":173,"tag":640,"props":7112,"children":7113},{"style":713},[7114],{"type":178,"value":7115},"OmittedExpression",{"type":173,"tag":640,"props":7117,"children":7118},{"style":1080},[7119],{"type":178,"value":1127},{"type":173,"tag":640,"props":7121,"children":7122},{"style":659},[7123],{"type":178,"value":1271},{"type":173,"tag":640,"props":7125,"children":7126},{"class":642,"line":1094},[7127,7131,7136,7140,7145,7149,7153,7157,7161],{"type":173,"tag":640,"props":7128,"children":7129},{"style":647},[7130],{"type":178,"value":1063},{"type":173,"tag":640,"props":7132,"children":7133},{"style":907},[7134],{"type":178,"value":7135}," paramType",{"type":173,"tag":640,"props":7137,"children":7138},{"style":671},[7139],{"type":178,"value":915},{"type":173,"tag":640,"props":7141,"children":7142},{"style":653},[7143],{"type":178,"value":7144}," getTypeAtPosition",{"type":173,"tag":640,"props":7146,"children":7147},{"style":1080},[7148],{"type":178,"value":662},{"type":173,"tag":640,"props":7150,"children":7151},{"style":713},[7152],{"type":178,"value":4774},{"type":173,"tag":640,"props":7154,"children":7155},{"style":659},[7156],{"type":178,"value":1751},{"type":173,"tag":640,"props":7158,"children":7159},{"style":713},[7160],{"type":178,"value":6996},{"type":173,"tag":640,"props":7162,"children":7163},{"style":1080},[7164],{"type":178,"value":934},{"type":173,"tag":640,"props":7166,"children":7167},{"class":642,"line":1139},[7168,7173,7177,7182,7186,7191,7195],{"type":173,"tag":640,"props":7169,"children":7170},{"style":707},[7171],{"type":178,"value":7172},"      if",{"type":173,"tag":640,"props":7174,"children":7175},{"style":1080},[7176],{"type":178,"value":1248},{"type":173,"tag":640,"props":7178,"children":7179},{"style":653},[7180],{"type":178,"value":7181},"couldContainTypeVariables",{"type":173,"tag":640,"props":7183,"children":7184},{"style":1080},[7185],{"type":178,"value":662},{"type":173,"tag":640,"props":7187,"children":7188},{"style":713},[7189],{"type":178,"value":7190},"paramType",{"type":173,"tag":640,"props":7192,"children":7193},{"style":1080},[7194],{"type":178,"value":1266},{"type":173,"tag":640,"props":7196,"children":7197},{"style":659},[7198],{"type":178,"value":1271},{"type":173,"tag":640,"props":7200,"children":7201},{"class":642,"line":1148},[7202],{"type":173,"tag":640,"props":7203,"children":7204},{"style":1277},[7205],{"type":178,"value":7206},"        //... inferTypes here\n",{"type":173,"tag":640,"props":7208,"children":7209},{"class":642,"line":1157},[7210],{"type":173,"tag":640,"props":7211,"children":7212},{"style":659},[7213],{"type":178,"value":7214},"      }\n",{"type":173,"tag":640,"props":7216,"children":7217},{"class":642,"line":1372},[7218],{"type":173,"tag":640,"props":7219,"children":7220},{"style":659},[7221],{"type":178,"value":4241},{"type":173,"tag":640,"props":7223,"children":7224},{"class":642,"line":1674},[7225],{"type":173,"tag":640,"props":7226,"children":7227},{"style":659},[7228],{"type":178,"value":1154},{"type":173,"tag":640,"props":7230,"children":7231},{"class":642,"line":1682},[7232,7236,7241,7245,7250],{"type":173,"tag":640,"props":7233,"children":7234},{"style":707},[7235],{"type":178,"value":710},{"type":173,"tag":640,"props":7237,"children":7238},{"style":653},[7239],{"type":178,"value":7240}," getInferredTypes",{"type":173,"tag":640,"props":7242,"children":7243},{"style":1080},[7244],{"type":178,"value":662},{"type":173,"tag":640,"props":7246,"children":7247},{"style":713},[7248],{"type":178,"value":7249},"context",{"type":173,"tag":640,"props":7251,"children":7252},{"style":1080},[7253],{"type":178,"value":934},{"type":173,"tag":640,"props":7255,"children":7256},{"class":642,"line":1699},[7257],{"type":173,"tag":640,"props":7258,"children":7259},{"style":659},[7260],{"type":178,"value":750},{"type":173,"tag":174,"props":7262,"children":7263},{},[7264],{"type":178,"value":7265},"怎么算参数包含可推断的类型变量呢？简单来说，可实例化的类型就算，在 TypeFlags 的定义中可以找到编译器是如何确认某种类型是可实例化的（TypeFlags.Instantiable）。",{"type":173,"tag":630,"props":7267,"children":7269},{"className":632,"code":7268,"language":634,"meta":166,"style":166},"type TypeFlags = {\n  //...\n  InstantiableNonPrimitive = TypeVariable | Conditional | Substitution,\n  InstantiablePrimitive = Index | TemplateLiteral | StringMapping,\n  Instantiable = InstantiableNonPrimitive | InstantiablePrimitive,\n  //...\n}\n",[7270],{"type":173,"tag":313,"props":7271,"children":7272},{"__ignoreMap":166},[7273,7292,7299,7338,7377,7407,7414],{"type":173,"tag":640,"props":7274,"children":7275},{"class":642,"line":643},[7276,7280,7284,7288],{"type":173,"tag":640,"props":7277,"children":7278},{"style":647},[7279],{"type":178,"value":2516},{"type":173,"tag":640,"props":7281,"children":7282},{"style":692},[7283],{"type":178,"value":3998},{"type":173,"tag":640,"props":7285,"children":7286},{"style":671},[7287],{"type":178,"value":915},{"type":173,"tag":640,"props":7289,"children":7290},{"style":659},[7291],{"type":178,"value":700},{"type":173,"tag":640,"props":7293,"children":7294},{"class":642,"line":703},[7295],{"type":173,"tag":640,"props":7296,"children":7297},{"style":1277},[7298],{"type":178,"value":1295},{"type":173,"tag":640,"props":7300,"children":7301},{"class":642,"line":744},[7302,7307,7311,7316,7320,7325,7329,7334],{"type":173,"tag":640,"props":7303,"children":7304},{"style":3502},[7305],{"type":178,"value":7306},"  InstantiableNonPrimitive",{"type":173,"tag":640,"props":7308,"children":7309},{"style":671},[7310],{"type":178,"value":915},{"type":173,"tag":640,"props":7312,"children":7313},{"style":713},[7314],{"type":178,"value":7315}," TypeVariable ",{"type":173,"tag":640,"props":7317,"children":7318},{"style":671},[7319],{"type":178,"value":5744},{"type":173,"tag":640,"props":7321,"children":7322},{"style":713},[7323],{"type":178,"value":7324}," Conditional ",{"type":173,"tag":640,"props":7326,"children":7327},{"style":671},[7328],{"type":178,"value":5744},{"type":173,"tag":640,"props":7330,"children":7331},{"style":713},[7332],{"type":178,"value":7333}," Substitution",{"type":173,"tag":640,"props":7335,"children":7336},{"style":659},[7337],{"type":178,"value":2236},{"type":173,"tag":640,"props":7339,"children":7340},{"class":642,"line":1057},[7341,7346,7350,7355,7359,7364,7368,7373],{"type":173,"tag":640,"props":7342,"children":7343},{"style":3502},[7344],{"type":178,"value":7345},"  InstantiablePrimitive",{"type":173,"tag":640,"props":7347,"children":7348},{"style":671},[7349],{"type":178,"value":915},{"type":173,"tag":640,"props":7351,"children":7352},{"style":713},[7353],{"type":178,"value":7354}," Index ",{"type":173,"tag":640,"props":7356,"children":7357},{"style":671},[7358],{"type":178,"value":5744},{"type":173,"tag":640,"props":7360,"children":7361},{"style":713},[7362],{"type":178,"value":7363}," TemplateLiteral ",{"type":173,"tag":640,"props":7365,"children":7366},{"style":671},[7367],{"type":178,"value":5744},{"type":173,"tag":640,"props":7369,"children":7370},{"style":713},[7371],{"type":178,"value":7372}," StringMapping",{"type":173,"tag":640,"props":7374,"children":7375},{"style":659},[7376],{"type":178,"value":2236},{"type":173,"tag":640,"props":7378,"children":7379},{"class":642,"line":1094},[7380,7385,7389,7394,7398,7403],{"type":173,"tag":640,"props":7381,"children":7382},{"style":3502},[7383],{"type":178,"value":7384},"  Instantiable",{"type":173,"tag":640,"props":7386,"children":7387},{"style":671},[7388],{"type":178,"value":915},{"type":173,"tag":640,"props":7390,"children":7391},{"style":713},[7392],{"type":178,"value":7393}," InstantiableNonPrimitive ",{"type":173,"tag":640,"props":7395,"children":7396},{"style":671},[7397],{"type":178,"value":5744},{"type":173,"tag":640,"props":7399,"children":7400},{"style":713},[7401],{"type":178,"value":7402}," InstantiablePrimitive",{"type":173,"tag":640,"props":7404,"children":7405},{"style":659},[7406],{"type":178,"value":2236},{"type":173,"tag":640,"props":7408,"children":7409},{"class":642,"line":1139},[7410],{"type":173,"tag":640,"props":7411,"children":7412},{"style":1277},[7413],{"type":178,"value":1295},{"type":173,"tag":640,"props":7415,"children":7416},{"class":642,"line":1148},[7417],{"type":173,"tag":640,"props":7418,"children":7419},{"style":659},[7420],{"type":178,"value":750},{"type":173,"tag":174,"props":7422,"children":7423},{},[7424],{"type":178,"value":7425},"为了给参数取得一个对应的可实例化类型，以下以对 f2 稍加修改得到的新代码 f3 为例。",{"type":173,"tag":630,"props":7427,"children":7429},{"className":632,"code":7428,"language":634,"meta":166,"style":166},"declare function f3\u003CT>(x: T): string\nconst x3 = f3(3)\n",[7430],{"type":173,"tag":313,"props":7431,"children":7432},{"__ignoreMap":166},[7433,7485],{"type":173,"tag":640,"props":7434,"children":7435},{"class":642,"line":643},[7436,7440,7444,7449,7453,7457,7461,7465,7469,7473,7477,7481],{"type":173,"tag":640,"props":7437,"children":7438},{"style":852},[7439],{"type":178,"value":855},{"type":173,"tag":640,"props":7441,"children":7442},{"style":647},[7443],{"type":178,"value":860},{"type":173,"tag":640,"props":7445,"children":7446},{"style":653},[7447],{"type":178,"value":7448}," f3",{"type":173,"tag":640,"props":7450,"children":7451},{"style":659},[7452],{"type":178,"value":5186},{"type":173,"tag":640,"props":7454,"children":7455},{"style":692},[7456],{"type":178,"value":5191},{"type":173,"tag":640,"props":7458,"children":7459},{"style":659},[7460],{"type":178,"value":5196},{"type":173,"tag":640,"props":7462,"children":7463},{"style":665},[7464],{"type":178,"value":874},{"type":173,"tag":640,"props":7466,"children":7467},{"style":671},[7468],{"type":178,"value":674},{"type":173,"tag":640,"props":7470,"children":7471},{"style":692},[7472],{"type":178,"value":6746},{"type":173,"tag":640,"props":7474,"children":7475},{"style":659},[7476],{"type":178,"value":685},{"type":173,"tag":640,"props":7478,"children":7479},{"style":671},[7480],{"type":178,"value":674},{"type":173,"tag":640,"props":7482,"children":7483},{"style":677},[7484],{"type":178,"value":896},{"type":173,"tag":640,"props":7486,"children":7487},{"class":642,"line":703},[7488,7492,7497,7501,7505,7509,7514],{"type":173,"tag":640,"props":7489,"children":7490},{"style":647},[7491],{"type":178,"value":904},{"type":173,"tag":640,"props":7493,"children":7494},{"style":907},[7495],{"type":178,"value":7496}," x3",{"type":173,"tag":640,"props":7498,"children":7499},{"style":671},[7500],{"type":178,"value":915},{"type":173,"tag":640,"props":7502,"children":7503},{"style":653},[7504],{"type":178,"value":7448},{"type":173,"tag":640,"props":7506,"children":7507},{"style":713},[7508],{"type":178,"value":662},{"type":173,"tag":640,"props":7510,"children":7511},{"style":926},[7512],{"type":178,"value":7513},"3",{"type":173,"tag":640,"props":7515,"children":7516},{"style":713},[7517],{"type":178,"value":934},{"type":173,"tag":174,"props":7519,"children":7520},{},[7521],{"type":178,"value":7522},"实参 3 对应的参数 x 的类型就是一个可实例化的类型。于是乎，inferTypeArguments 中拿到实参类型 argType 后就进入了 inferTypes 类型推断过程。",{"type":173,"tag":630,"props":7524,"children":7526},{"className":632,"code":7525,"language":634,"meta":166,"style":166},"if (couldContainTypeVariables(paramType)) {\n  const argType = checkExpressionWithContextualType(arg, paramType, context, checkMode);\n  inferTypes(context.inferences, argType, paramType);\n}\n",[7527],{"type":173,"tag":313,"props":7528,"children":7529},{"__ignoreMap":166},[7530,7555,7616,7665],{"type":173,"tag":640,"props":7531,"children":7532},{"class":642,"line":643},[7533,7538,7542,7546,7551],{"type":173,"tag":640,"props":7534,"children":7535},{"style":707},[7536],{"type":178,"value":7537},"if",{"type":173,"tag":640,"props":7539,"children":7540},{"style":713},[7541],{"type":178,"value":1248},{"type":173,"tag":640,"props":7543,"children":7544},{"style":653},[7545],{"type":178,"value":7181},{"type":173,"tag":640,"props":7547,"children":7548},{"style":713},[7549],{"type":178,"value":7550},"(paramType)) ",{"type":173,"tag":640,"props":7552,"children":7553},{"style":659},[7554],{"type":178,"value":1271},{"type":173,"tag":640,"props":7556,"children":7557},{"class":642,"line":703},[7558,7562,7567,7571,7576,7580,7584,7588,7592,7596,7600,7604,7608,7612],{"type":173,"tag":640,"props":7559,"children":7560},{"style":647},[7561],{"type":178,"value":1459},{"type":173,"tag":640,"props":7563,"children":7564},{"style":907},[7565],{"type":178,"value":7566}," argType",{"type":173,"tag":640,"props":7568,"children":7569},{"style":671},[7570],{"type":178,"value":915},{"type":173,"tag":640,"props":7572,"children":7573},{"style":653},[7574],{"type":178,"value":7575}," checkExpressionWithContextualType",{"type":173,"tag":640,"props":7577,"children":7578},{"style":1080},[7579],{"type":178,"value":662},{"type":173,"tag":640,"props":7581,"children":7582},{"style":713},[7583],{"type":178,"value":7090},{"type":173,"tag":640,"props":7585,"children":7586},{"style":659},[7587],{"type":178,"value":1751},{"type":173,"tag":640,"props":7589,"children":7590},{"style":713},[7591],{"type":178,"value":7135},{"type":173,"tag":640,"props":7593,"children":7594},{"style":659},[7595],{"type":178,"value":1751},{"type":173,"tag":640,"props":7597,"children":7598},{"style":713},[7599],{"type":178,"value":6947},{"type":173,"tag":640,"props":7601,"children":7602},{"style":659},[7603],{"type":178,"value":1751},{"type":173,"tag":640,"props":7605,"children":7606},{"style":713},[7607],{"type":178,"value":2491},{"type":173,"tag":640,"props":7609,"children":7610},{"style":1080},[7611],{"type":178,"value":685},{"type":173,"tag":640,"props":7613,"children":7614},{"style":659},[7615],{"type":178,"value":741},{"type":173,"tag":640,"props":7617,"children":7618},{"class":642,"line":744},[7619,7624,7628,7632,7636,7641,7645,7649,7653,7657,7661],{"type":173,"tag":640,"props":7620,"children":7621},{"style":653},[7622],{"type":178,"value":7623},"  inferTypes",{"type":173,"tag":640,"props":7625,"children":7626},{"style":1080},[7627],{"type":178,"value":662},{"type":173,"tag":640,"props":7629,"children":7630},{"style":713},[7631],{"type":178,"value":7249},{"type":173,"tag":640,"props":7633,"children":7634},{"style":659},[7635],{"type":178,"value":1516},{"type":173,"tag":640,"props":7637,"children":7638},{"style":713},[7639],{"type":178,"value":7640},"inferences",{"type":173,"tag":640,"props":7642,"children":7643},{"style":659},[7644],{"type":178,"value":1751},{"type":173,"tag":640,"props":7646,"children":7647},{"style":713},[7648],{"type":178,"value":7566},{"type":173,"tag":640,"props":7650,"children":7651},{"style":659},[7652],{"type":178,"value":1751},{"type":173,"tag":640,"props":7654,"children":7655},{"style":713},[7656],{"type":178,"value":7135},{"type":173,"tag":640,"props":7658,"children":7659},{"style":1080},[7660],{"type":178,"value":685},{"type":173,"tag":640,"props":7662,"children":7663},{"style":659},[7664],{"type":178,"value":741},{"type":173,"tag":640,"props":7666,"children":7667},{"class":642,"line":1057},[7668],{"type":173,"tag":640,"props":7669,"children":7670},{"style":659},[7671],{"type":178,"value":750},{"type":173,"tag":174,"props":7673,"children":7674},{},[7675],{"type":178,"value":7676},"inferTypes 的逻辑比较复杂，在之后会详细介绍。对于 f3 而言，实参 3 的参数 x 的参数类型 T 的推断结果就是 number。此结果会保存到 context.inferences 中，供后续流程使用。",{"type":173,"tag":229,"props":7678,"children":7680},{"id":7679},"从一个简单的例子看类型推断分析infertypes",[7681],{"type":178,"value":7682},"从一个简单的例子看类型推断分析（inferTypes）？",{"type":173,"tag":174,"props":7684,"children":7685},{},[7686],{"type":178,"value":7687},"TODO",{"type":173,"tag":181,"props":7689,"children":7691},{"id":7690},"transformers",[7692],{"type":178,"value":7693},"Transformers",{"type":173,"tag":229,"props":7695,"children":7697},{"id":7696},"转换器管道是如何工作的",[7698],{"type":178,"value":7699},"转换器管道是如何工作的？",{"type":173,"tag":174,"props":7701,"children":7702},{},[7703],{"type":178,"value":7704},"输出文件时会调用转换器管道转换代码。上文提到，输出操作是由 Program 统筹执行的，对应代码：",{"type":173,"tag":630,"props":7706,"children":7708},{"className":632,"code":7707,"language":634,"meta":166,"style":166},"function emitWorker () {\n  const emitResult = typeChecker.runWithCancellationToken(\n    cancellationToken,\n    () =>\n      emitFiles(\n        emitResolver,\n        getEmitHost(writeFileCallback),\n        sourceFile,\n        getTransformers(options, customTransformers, emitOnly),\n        emitOnly,\n        /*onlyBuildInfo*/ false,\n        forceDtsEmit,\n        skipBuildInfo,\n      ),\n  )\n}\n",[7709],{"type":173,"tag":313,"props":7710,"children":7711},{"__ignoreMap":166},[7712,7733,7767,7779,7792,7804,7816,7841,7853,7896,7908,7925,7937,7949,7961,7969],{"type":173,"tag":640,"props":7713,"children":7714},{"class":642,"line":643},[7715,7719,7724,7729],{"type":173,"tag":640,"props":7716,"children":7717},{"style":647},[7718],{"type":178,"value":650},{"type":173,"tag":640,"props":7720,"children":7721},{"style":653},[7722],{"type":178,"value":7723}," emitWorker",{"type":173,"tag":640,"props":7725,"children":7726},{"style":659},[7727],{"type":178,"value":7728}," ()",{"type":173,"tag":640,"props":7730,"children":7731},{"style":659},[7732],{"type":178,"value":700},{"type":173,"tag":640,"props":7734,"children":7735},{"class":642,"line":703},[7736,7740,7745,7749,7754,7758,7763],{"type":173,"tag":640,"props":7737,"children":7738},{"style":647},[7739],{"type":178,"value":1459},{"type":173,"tag":640,"props":7741,"children":7742},{"style":907},[7743],{"type":178,"value":7744}," emitResult",{"type":173,"tag":640,"props":7746,"children":7747},{"style":671},[7748],{"type":178,"value":915},{"type":173,"tag":640,"props":7750,"children":7751},{"style":713},[7752],{"type":178,"value":7753}," typeChecker",{"type":173,"tag":640,"props":7755,"children":7756},{"style":659},[7757],{"type":178,"value":1516},{"type":173,"tag":640,"props":7759,"children":7760},{"style":653},[7761],{"type":178,"value":7762},"runWithCancellationToken",{"type":173,"tag":640,"props":7764,"children":7765},{"style":1080},[7766],{"type":178,"value":2169},{"type":173,"tag":640,"props":7768,"children":7769},{"class":642,"line":744},[7770,7775],{"type":173,"tag":640,"props":7771,"children":7772},{"style":713},[7773],{"type":178,"value":7774},"    cancellationToken",{"type":173,"tag":640,"props":7776,"children":7777},{"style":659},[7778],{"type":178,"value":2236},{"type":173,"tag":640,"props":7780,"children":7781},{"class":642,"line":1057},[7782,7787],{"type":173,"tag":640,"props":7783,"children":7784},{"style":659},[7785],{"type":178,"value":7786},"    ()",{"type":173,"tag":640,"props":7788,"children":7789},{"style":647},[7790],{"type":178,"value":7791}," =>\n",{"type":173,"tag":640,"props":7793,"children":7794},{"class":642,"line":1094},[7795,7800],{"type":173,"tag":640,"props":7796,"children":7797},{"style":653},[7798],{"type":178,"value":7799},"      emitFiles",{"type":173,"tag":640,"props":7801,"children":7802},{"style":1080},[7803],{"type":178,"value":2169},{"type":173,"tag":640,"props":7805,"children":7806},{"class":642,"line":1139},[7807,7812],{"type":173,"tag":640,"props":7808,"children":7809},{"style":713},[7810],{"type":178,"value":7811},"        emitResolver",{"type":173,"tag":640,"props":7813,"children":7814},{"style":659},[7815],{"type":178,"value":2236},{"type":173,"tag":640,"props":7817,"children":7818},{"class":642,"line":1148},[7819,7824,7828,7833,7837],{"type":173,"tag":640,"props":7820,"children":7821},{"style":653},[7822],{"type":178,"value":7823},"        getEmitHost",{"type":173,"tag":640,"props":7825,"children":7826},{"style":1080},[7827],{"type":178,"value":662},{"type":173,"tag":640,"props":7829,"children":7830},{"style":713},[7831],{"type":178,"value":7832},"writeFileCallback",{"type":173,"tag":640,"props":7834,"children":7835},{"style":1080},[7836],{"type":178,"value":685},{"type":173,"tag":640,"props":7838,"children":7839},{"style":659},[7840],{"type":178,"value":2236},{"type":173,"tag":640,"props":7842,"children":7843},{"class":642,"line":1157},[7844,7849],{"type":173,"tag":640,"props":7845,"children":7846},{"style":713},[7847],{"type":178,"value":7848},"        sourceFile",{"type":173,"tag":640,"props":7850,"children":7851},{"style":659},[7852],{"type":178,"value":2236},{"type":173,"tag":640,"props":7854,"children":7855},{"class":642,"line":1372},[7856,7861,7865,7870,7874,7879,7883,7888,7892],{"type":173,"tag":640,"props":7857,"children":7858},{"style":653},[7859],{"type":178,"value":7860},"        getTransformers",{"type":173,"tag":640,"props":7862,"children":7863},{"style":1080},[7864],{"type":178,"value":662},{"type":173,"tag":640,"props":7866,"children":7867},{"style":713},[7868],{"type":178,"value":7869},"options",{"type":173,"tag":640,"props":7871,"children":7872},{"style":659},[7873],{"type":178,"value":1751},{"type":173,"tag":640,"props":7875,"children":7876},{"style":713},[7877],{"type":178,"value":7878}," customTransformers",{"type":173,"tag":640,"props":7880,"children":7881},{"style":659},[7882],{"type":178,"value":1751},{"type":173,"tag":640,"props":7884,"children":7885},{"style":713},[7886],{"type":178,"value":7887}," emitOnly",{"type":173,"tag":640,"props":7889,"children":7890},{"style":1080},[7891],{"type":178,"value":685},{"type":173,"tag":640,"props":7893,"children":7894},{"style":659},[7895],{"type":178,"value":2236},{"type":173,"tag":640,"props":7897,"children":7898},{"class":642,"line":1674},[7899,7904],{"type":173,"tag":640,"props":7900,"children":7901},{"style":713},[7902],{"type":178,"value":7903},"        emitOnly",{"type":173,"tag":640,"props":7905,"children":7906},{"style":659},[7907],{"type":178,"value":2236},{"type":173,"tag":640,"props":7909,"children":7910},{"class":642,"line":1682},[7911,7916,7921],{"type":173,"tag":640,"props":7912,"children":7913},{"style":1277},[7914],{"type":178,"value":7915},"        /*onlyBuildInfo*/",{"type":173,"tag":640,"props":7917,"children":7918},{"style":2086},[7919],{"type":178,"value":7920}," false",{"type":173,"tag":640,"props":7922,"children":7923},{"style":659},[7924],{"type":178,"value":2236},{"type":173,"tag":640,"props":7926,"children":7927},{"class":642,"line":1699},[7928,7933],{"type":173,"tag":640,"props":7929,"children":7930},{"style":713},[7931],{"type":178,"value":7932},"        forceDtsEmit",{"type":173,"tag":640,"props":7934,"children":7935},{"style":659},[7936],{"type":178,"value":2236},{"type":173,"tag":640,"props":7938,"children":7939},{"class":642,"line":2541},[7940,7945],{"type":173,"tag":640,"props":7941,"children":7942},{"style":713},[7943],{"type":178,"value":7944},"        skipBuildInfo",{"type":173,"tag":640,"props":7946,"children":7947},{"style":659},[7948],{"type":178,"value":2236},{"type":173,"tag":640,"props":7950,"children":7951},{"class":642,"line":2549},[7952,7957],{"type":173,"tag":640,"props":7953,"children":7954},{"style":1080},[7955],{"type":178,"value":7956},"      )",{"type":173,"tag":640,"props":7958,"children":7959},{"style":659},[7960],{"type":178,"value":2236},{"type":173,"tag":640,"props":7962,"children":7963},{"class":642,"line":4389},[7964],{"type":173,"tag":640,"props":7965,"children":7966},{"style":1080},[7967],{"type":178,"value":7968},"  )\n",{"type":173,"tag":640,"props":7970,"children":7971},{"class":642,"line":4423},[7972],{"type":173,"tag":640,"props":7973,"children":7974},{"style":659},[7975],{"type":178,"value":750},{"type":173,"tag":174,"props":7977,"children":7978},{},[7979,7981,7987,7989,7995],{"type":178,"value":7980},"转换器管道有 scriptTransformers 和 declarationTransformers 两种，分别对应代码生成和声明生成。ESNext、ES2021、ES2020 等不用版本的转换器被做成了插件，在编译时根据 ",{"type":173,"tag":313,"props":7982,"children":7984},{"className":7983},[],[7985],{"type":178,"value":7986},"compilerOptions",{"type":178,"value":7988}," 的 ",{"type":173,"tag":313,"props":7990,"children":7992},{"className":7991},[],[7993],{"type":178,"value":7994},"target",{"type":178,"value":7996}," 属性动态加载，输出前添加到转换器管道中，见以下代码。",{"type":173,"tag":630,"props":7998,"children":8000},{"className":632,"code":7999,"language":634,"meta":166,"style":166},"function getScriptTransformers(compilerOptions: CompilerOptions, customTransformers?: CustomTransformers, emitOnly?: boolean | EmitOnly) {\n    const languageVersion = getEmitScriptTarget(compilerOptions)\n    const transformers: TransformerFactory\u003CSourceFile | Bundle>[] = []\n\n    transformers.push(transformTypeScript)\n    if (compilerOptions.experimentalDecorators) {\n        transformers.push(transformLegacyDecorators)\n    }\n    if (getJSXTransformEnabled(compilerOptions)) {\n        transformers.push(transformJsx)\n    }\n    if (languageVersion \u003C ScriptTarget.ESNext) {\n        transformers.push(transformESNext)\n    }\n    if (languageVersion \u003C ScriptTarget.ES2021) {\n        transformers.push(transformES2021)\n    }\n    if (languageVersion \u003C ScriptTarget.ES2020) {\n        transformers.push(transformES2020)\n    }\n    //...\n    return transformers\n}\n",[8001],{"type":173,"tag":313,"props":8002,"children":8003},{"__ignoreMap":166},[8004,8083,8116,8173,8181,8211,8243,8272,8279,8311,8339,8346,8388,8416,8423,8463,8491,8498,8538,8566,8573,8581,8594],{"type":173,"tag":640,"props":8005,"children":8006},{"class":642,"line":643},[8007,8011,8016,8020,8024,8028,8033,8037,8041,8045,8050,8054,8058,8062,8066,8070,8075,8079],{"type":173,"tag":640,"props":8008,"children":8009},{"style":647},[8010],{"type":178,"value":650},{"type":173,"tag":640,"props":8012,"children":8013},{"style":653},[8014],{"type":178,"value":8015}," getScriptTransformers",{"type":173,"tag":640,"props":8017,"children":8018},{"style":659},[8019],{"type":178,"value":662},{"type":173,"tag":640,"props":8021,"children":8022},{"style":665},[8023],{"type":178,"value":7986},{"type":173,"tag":640,"props":8025,"children":8026},{"style":671},[8027],{"type":178,"value":674},{"type":173,"tag":640,"props":8029,"children":8030},{"style":692},[8031],{"type":178,"value":8032}," CompilerOptions",{"type":173,"tag":640,"props":8034,"children":8035},{"style":659},[8036],{"type":178,"value":1751},{"type":173,"tag":640,"props":8038,"children":8039},{"style":665},[8040],{"type":178,"value":7878},{"type":173,"tag":640,"props":8042,"children":8043},{"style":671},[8044],{"type":178,"value":2999},{"type":173,"tag":640,"props":8046,"children":8047},{"style":692},[8048],{"type":178,"value":8049}," CustomTransformers",{"type":173,"tag":640,"props":8051,"children":8052},{"style":659},[8053],{"type":178,"value":1751},{"type":173,"tag":640,"props":8055,"children":8056},{"style":665},[8057],{"type":178,"value":7887},{"type":173,"tag":640,"props":8059,"children":8060},{"style":671},[8061],{"type":178,"value":2999},{"type":173,"tag":640,"props":8063,"children":8064},{"style":677},[8065],{"type":178,"value":680},{"type":173,"tag":640,"props":8067,"children":8068},{"style":671},[8069],{"type":178,"value":1618},{"type":173,"tag":640,"props":8071,"children":8072},{"style":692},[8073],{"type":178,"value":8074}," EmitOnly",{"type":173,"tag":640,"props":8076,"children":8077},{"style":659},[8078],{"type":178,"value":685},{"type":173,"tag":640,"props":8080,"children":8081},{"style":659},[8082],{"type":178,"value":700},{"type":173,"tag":640,"props":8084,"children":8085},{"class":642,"line":703},[8086,8090,8095,8099,8104,8108,8112],{"type":173,"tag":640,"props":8087,"children":8088},{"style":647},[8089],{"type":178,"value":2443},{"type":173,"tag":640,"props":8091,"children":8092},{"style":907},[8093],{"type":178,"value":8094}," languageVersion",{"type":173,"tag":640,"props":8096,"children":8097},{"style":671},[8098],{"type":178,"value":915},{"type":173,"tag":640,"props":8100,"children":8101},{"style":653},[8102],{"type":178,"value":8103}," getEmitScriptTarget",{"type":173,"tag":640,"props":8105,"children":8106},{"style":1080},[8107],{"type":178,"value":662},{"type":173,"tag":640,"props":8109,"children":8110},{"style":713},[8111],{"type":178,"value":7986},{"type":173,"tag":640,"props":8113,"children":8114},{"style":1080},[8115],{"type":178,"value":934},{"type":173,"tag":640,"props":8117,"children":8118},{"class":642,"line":744},[8119,8123,8128,8132,8137,8141,8145,8149,8154,8159,8163,8168],{"type":173,"tag":640,"props":8120,"children":8121},{"style":647},[8122],{"type":178,"value":2443},{"type":173,"tag":640,"props":8124,"children":8125},{"style":907},[8126],{"type":178,"value":8127}," transformers",{"type":173,"tag":640,"props":8129,"children":8130},{"style":671},[8131],{"type":178,"value":674},{"type":173,"tag":640,"props":8133,"children":8134},{"style":692},[8135],{"type":178,"value":8136}," TransformerFactory",{"type":173,"tag":640,"props":8138,"children":8139},{"style":659},[8140],{"type":178,"value":5186},{"type":173,"tag":640,"props":8142,"children":8143},{"style":692},[8144],{"type":178,"value":370},{"type":173,"tag":640,"props":8146,"children":8147},{"style":671},[8148],{"type":178,"value":1618},{"type":173,"tag":640,"props":8150,"children":8151},{"style":692},[8152],{"type":178,"value":8153}," Bundle",{"type":173,"tag":640,"props":8155,"children":8156},{"style":659},[8157],{"type":178,"value":8158},">",{"type":173,"tag":640,"props":8160,"children":8161},{"style":1080},[8162],{"type":178,"value":5739},{"type":173,"tag":640,"props":8164,"children":8165},{"style":671},[8166],{"type":178,"value":8167},"=",{"type":173,"tag":640,"props":8169,"children":8170},{"style":1080},[8171],{"type":178,"value":8172}," []\n",{"type":173,"tag":640,"props":8174,"children":8175},{"class":642,"line":1057},[8176],{"type":173,"tag":640,"props":8177,"children":8178},{"emptyLinePlaceholder":165},[8179],{"type":178,"value":8180},"\n",{"type":173,"tag":640,"props":8182,"children":8183},{"class":642,"line":1094},[8184,8189,8193,8198,8202,8207],{"type":173,"tag":640,"props":8185,"children":8186},{"style":713},[8187],{"type":178,"value":8188},"    transformers",{"type":173,"tag":640,"props":8190,"children":8191},{"style":659},[8192],{"type":178,"value":1516},{"type":173,"tag":640,"props":8194,"children":8195},{"style":653},[8196],{"type":178,"value":8197},"push",{"type":173,"tag":640,"props":8199,"children":8200},{"style":1080},[8201],{"type":178,"value":662},{"type":173,"tag":640,"props":8203,"children":8204},{"style":713},[8205],{"type":178,"value":8206},"transformTypeScript",{"type":173,"tag":640,"props":8208,"children":8209},{"style":1080},[8210],{"type":178,"value":934},{"type":173,"tag":640,"props":8212,"children":8213},{"class":642,"line":1139},[8214,8218,8222,8226,8230,8235,8239],{"type":173,"tag":640,"props":8215,"children":8216},{"style":707},[8217],{"type":178,"value":3973},{"type":173,"tag":640,"props":8219,"children":8220},{"style":1080},[8221],{"type":178,"value":1248},{"type":173,"tag":640,"props":8223,"children":8224},{"style":713},[8225],{"type":178,"value":7986},{"type":173,"tag":640,"props":8227,"children":8228},{"style":659},[8229],{"type":178,"value":1516},{"type":173,"tag":640,"props":8231,"children":8232},{"style":713},[8233],{"type":178,"value":8234},"experimentalDecorators",{"type":173,"tag":640,"props":8236,"children":8237},{"style":1080},[8238],{"type":178,"value":1127},{"type":173,"tag":640,"props":8240,"children":8241},{"style":659},[8242],{"type":178,"value":1271},{"type":173,"tag":640,"props":8244,"children":8245},{"class":642,"line":1148},[8246,8251,8255,8259,8263,8268],{"type":173,"tag":640,"props":8247,"children":8248},{"style":713},[8249],{"type":178,"value":8250},"        transformers",{"type":173,"tag":640,"props":8252,"children":8253},{"style":659},[8254],{"type":178,"value":1516},{"type":173,"tag":640,"props":8256,"children":8257},{"style":653},[8258],{"type":178,"value":8197},{"type":173,"tag":640,"props":8260,"children":8261},{"style":1080},[8262],{"type":178,"value":662},{"type":173,"tag":640,"props":8264,"children":8265},{"style":713},[8266],{"type":178,"value":8267},"transformLegacyDecorators",{"type":173,"tag":640,"props":8269,"children":8270},{"style":1080},[8271],{"type":178,"value":934},{"type":173,"tag":640,"props":8273,"children":8274},{"class":642,"line":1157},[8275],{"type":173,"tag":640,"props":8276,"children":8277},{"style":659},[8278],{"type":178,"value":4241},{"type":173,"tag":640,"props":8280,"children":8281},{"class":642,"line":1372},[8282,8286,8290,8295,8299,8303,8307],{"type":173,"tag":640,"props":8283,"children":8284},{"style":707},[8285],{"type":178,"value":3973},{"type":173,"tag":640,"props":8287,"children":8288},{"style":1080},[8289],{"type":178,"value":1248},{"type":173,"tag":640,"props":8291,"children":8292},{"style":653},[8293],{"type":178,"value":8294},"getJSXTransformEnabled",{"type":173,"tag":640,"props":8296,"children":8297},{"style":1080},[8298],{"type":178,"value":662},{"type":173,"tag":640,"props":8300,"children":8301},{"style":713},[8302],{"type":178,"value":7986},{"type":173,"tag":640,"props":8304,"children":8305},{"style":1080},[8306],{"type":178,"value":1266},{"type":173,"tag":640,"props":8308,"children":8309},{"style":659},[8310],{"type":178,"value":1271},{"type":173,"tag":640,"props":8312,"children":8313},{"class":642,"line":1674},[8314,8318,8322,8326,8330,8335],{"type":173,"tag":640,"props":8315,"children":8316},{"style":713},[8317],{"type":178,"value":8250},{"type":173,"tag":640,"props":8319,"children":8320},{"style":659},[8321],{"type":178,"value":1516},{"type":173,"tag":640,"props":8323,"children":8324},{"style":653},[8325],{"type":178,"value":8197},{"type":173,"tag":640,"props":8327,"children":8328},{"style":1080},[8329],{"type":178,"value":662},{"type":173,"tag":640,"props":8331,"children":8332},{"style":713},[8333],{"type":178,"value":8334},"transformJsx",{"type":173,"tag":640,"props":8336,"children":8337},{"style":1080},[8338],{"type":178,"value":934},{"type":173,"tag":640,"props":8340,"children":8341},{"class":642,"line":1682},[8342],{"type":173,"tag":640,"props":8343,"children":8344},{"style":659},[8345],{"type":178,"value":4241},{"type":173,"tag":640,"props":8347,"children":8348},{"class":642,"line":1699},[8349,8353,8357,8362,8366,8371,8375,8380,8384],{"type":173,"tag":640,"props":8350,"children":8351},{"style":707},[8352],{"type":178,"value":3973},{"type":173,"tag":640,"props":8354,"children":8355},{"style":1080},[8356],{"type":178,"value":1248},{"type":173,"tag":640,"props":8358,"children":8359},{"style":713},[8360],{"type":178,"value":8361},"languageVersion",{"type":173,"tag":640,"props":8363,"children":8364},{"style":671},[8365],{"type":178,"value":6252},{"type":173,"tag":640,"props":8367,"children":8368},{"style":713},[8369],{"type":178,"value":8370}," ScriptTarget",{"type":173,"tag":640,"props":8372,"children":8373},{"style":659},[8374],{"type":178,"value":1516},{"type":173,"tag":640,"props":8376,"children":8377},{"style":713},[8378],{"type":178,"value":8379},"ESNext",{"type":173,"tag":640,"props":8381,"children":8382},{"style":1080},[8383],{"type":178,"value":1127},{"type":173,"tag":640,"props":8385,"children":8386},{"style":659},[8387],{"type":178,"value":1271},{"type":173,"tag":640,"props":8389,"children":8390},{"class":642,"line":2541},[8391,8395,8399,8403,8407,8412],{"type":173,"tag":640,"props":8392,"children":8393},{"style":713},[8394],{"type":178,"value":8250},{"type":173,"tag":640,"props":8396,"children":8397},{"style":659},[8398],{"type":178,"value":1516},{"type":173,"tag":640,"props":8400,"children":8401},{"style":653},[8402],{"type":178,"value":8197},{"type":173,"tag":640,"props":8404,"children":8405},{"style":1080},[8406],{"type":178,"value":662},{"type":173,"tag":640,"props":8408,"children":8409},{"style":713},[8410],{"type":178,"value":8411},"transformESNext",{"type":173,"tag":640,"props":8413,"children":8414},{"style":1080},[8415],{"type":178,"value":934},{"type":173,"tag":640,"props":8417,"children":8418},{"class":642,"line":2549},[8419],{"type":173,"tag":640,"props":8420,"children":8421},{"style":659},[8422],{"type":178,"value":4241},{"type":173,"tag":640,"props":8424,"children":8425},{"class":642,"line":4389},[8426,8430,8434,8438,8442,8446,8450,8455,8459],{"type":173,"tag":640,"props":8427,"children":8428},{"style":707},[8429],{"type":178,"value":3973},{"type":173,"tag":640,"props":8431,"children":8432},{"style":1080},[8433],{"type":178,"value":1248},{"type":173,"tag":640,"props":8435,"children":8436},{"style":713},[8437],{"type":178,"value":8361},{"type":173,"tag":640,"props":8439,"children":8440},{"style":671},[8441],{"type":178,"value":6252},{"type":173,"tag":640,"props":8443,"children":8444},{"style":713},[8445],{"type":178,"value":8370},{"type":173,"tag":640,"props":8447,"children":8448},{"style":659},[8449],{"type":178,"value":1516},{"type":173,"tag":640,"props":8451,"children":8452},{"style":907},[8453],{"type":178,"value":8454},"ES2021",{"type":173,"tag":640,"props":8456,"children":8457},{"style":1080},[8458],{"type":178,"value":1127},{"type":173,"tag":640,"props":8460,"children":8461},{"style":659},[8462],{"type":178,"value":1271},{"type":173,"tag":640,"props":8464,"children":8465},{"class":642,"line":4423},[8466,8470,8474,8478,8482,8487],{"type":173,"tag":640,"props":8467,"children":8468},{"style":713},[8469],{"type":178,"value":8250},{"type":173,"tag":640,"props":8471,"children":8472},{"style":659},[8473],{"type":178,"value":1516},{"type":173,"tag":640,"props":8475,"children":8476},{"style":653},[8477],{"type":178,"value":8197},{"type":173,"tag":640,"props":8479,"children":8480},{"style":1080},[8481],{"type":178,"value":662},{"type":173,"tag":640,"props":8483,"children":8484},{"style":713},[8485],{"type":178,"value":8486},"transformES2021",{"type":173,"tag":640,"props":8488,"children":8489},{"style":1080},[8490],{"type":178,"value":934},{"type":173,"tag":640,"props":8492,"children":8493},{"class":642,"line":4431},[8494],{"type":173,"tag":640,"props":8495,"children":8496},{"style":659},[8497],{"type":178,"value":4241},{"type":173,"tag":640,"props":8499,"children":8500},{"class":642,"line":4439},[8501,8505,8509,8513,8517,8521,8525,8530,8534],{"type":173,"tag":640,"props":8502,"children":8503},{"style":707},[8504],{"type":178,"value":3973},{"type":173,"tag":640,"props":8506,"children":8507},{"style":1080},[8508],{"type":178,"value":1248},{"type":173,"tag":640,"props":8510,"children":8511},{"style":713},[8512],{"type":178,"value":8361},{"type":173,"tag":640,"props":8514,"children":8515},{"style":671},[8516],{"type":178,"value":6252},{"type":173,"tag":640,"props":8518,"children":8519},{"style":713},[8520],{"type":178,"value":8370},{"type":173,"tag":640,"props":8522,"children":8523},{"style":659},[8524],{"type":178,"value":1516},{"type":173,"tag":640,"props":8526,"children":8527},{"style":907},[8528],{"type":178,"value":8529},"ES2020",{"type":173,"tag":640,"props":8531,"children":8532},{"style":1080},[8533],{"type":178,"value":1127},{"type":173,"tag":640,"props":8535,"children":8536},{"style":659},[8537],{"type":178,"value":1271},{"type":173,"tag":640,"props":8539,"children":8540},{"class":642,"line":4447},[8541,8545,8549,8553,8557,8562],{"type":173,"tag":640,"props":8542,"children":8543},{"style":713},[8544],{"type":178,"value":8250},{"type":173,"tag":640,"props":8546,"children":8547},{"style":659},[8548],{"type":178,"value":1516},{"type":173,"tag":640,"props":8550,"children":8551},{"style":653},[8552],{"type":178,"value":8197},{"type":173,"tag":640,"props":8554,"children":8555},{"style":1080},[8556],{"type":178,"value":662},{"type":173,"tag":640,"props":8558,"children":8559},{"style":713},[8560],{"type":178,"value":8561},"transformES2020",{"type":173,"tag":640,"props":8563,"children":8564},{"style":1080},[8565],{"type":178,"value":934},{"type":173,"tag":640,"props":8567,"children":8568},{"class":642,"line":4471},[8569],{"type":173,"tag":640,"props":8570,"children":8571},{"style":659},[8572],{"type":178,"value":4241},{"type":173,"tag":640,"props":8574,"children":8576},{"class":642,"line":8575},21,[8577],{"type":173,"tag":640,"props":8578,"children":8579},{"style":1277},[8580],{"type":178,"value":1280},{"type":173,"tag":640,"props":8582,"children":8584},{"class":642,"line":8583},22,[8585,8589],{"type":173,"tag":640,"props":8586,"children":8587},{"style":707},[8588],{"type":178,"value":1335},{"type":173,"tag":640,"props":8590,"children":8591},{"style":713},[8592],{"type":178,"value":8593}," transformers\n",{"type":173,"tag":640,"props":8595,"children":8597},{"class":642,"line":8596},23,[8598],{"type":173,"tag":640,"props":8599,"children":8600},{"style":659},[8601],{"type":178,"value":750},{"type":173,"tag":229,"props":8603,"children":8605},{"id":8604},"转换器插件是如何工作的",[8606],{"type":178,"value":8607},"转换器插件是如何工作的？",{"type":173,"tag":174,"props":8609,"children":8610},{},[8611],{"type":178,"value":8612},"以功能最简短的 taggedTemplate 转换器为例。",{"type":173,"tag":174,"props":8614,"children":8615},{},[8616],{"type":178,"value":7687},{"type":173,"tag":181,"props":8618,"children":8620},{"id":8619},"代码模式",[8621],{"type":178,"value":8619},{"type":173,"tag":229,"props":8623,"children":8625},{"id":8624},"卫语句",[8626],{"type":178,"value":8624},{"type":173,"tag":174,"props":8628,"children":8629},{},[8630],{"type":178,"value":8631},"TypeScript 常对 JavaScript 文件有特殊处理，比如在类型分析时如果遇到变量初始化器，在 TS 文件中可能要做类型推断，而 JS 文件中只需要简单从 JSDoc 注释中获取类型，因此常在代码中见到卫语句模式，如 checkDeclarationInitializer 中的 isInJSFile 判断。",{"type":173,"tag":630,"props":8633,"children":8635},{"className":632,"code":8634,"language":634,"meta":166,"style":166},"function checkDeclarationInitializer(\n  declaration: HasExpressionInitializer,\n  checkMode: CheckMode,\n  contextualType?: Type | undefined,\n) {\n  const initializer = getEffectiveInitializer(declaration)\n  if (isInJSFile(declaration)) {\n      return //...\n  }\n  return //...\n}\n",[8636],{"type":173,"tag":313,"props":8637,"children":8638},{"__ignoreMap":166},[8639,8654,8675,8695,8723,8734,8767,8799,8811,8818,8829],{"type":173,"tag":640,"props":8640,"children":8641},{"class":642,"line":643},[8642,8646,8650],{"type":173,"tag":640,"props":8643,"children":8644},{"style":647},[8645],{"type":178,"value":650},{"type":173,"tag":640,"props":8647,"children":8648},{"style":653},[8649],{"type":178,"value":2474},{"type":173,"tag":640,"props":8651,"children":8652},{"style":659},[8653],{"type":178,"value":2169},{"type":173,"tag":640,"props":8655,"children":8656},{"class":642,"line":703},[8657,8662,8666,8671],{"type":173,"tag":640,"props":8658,"children":8659},{"style":665},[8660],{"type":178,"value":8661},"  declaration",{"type":173,"tag":640,"props":8663,"children":8664},{"style":671},[8665],{"type":178,"value":674},{"type":173,"tag":640,"props":8667,"children":8668},{"style":692},[8669],{"type":178,"value":8670}," HasExpressionInitializer",{"type":173,"tag":640,"props":8672,"children":8673},{"style":659},[8674],{"type":178,"value":2236},{"type":173,"tag":640,"props":8676,"children":8677},{"class":642,"line":744},[8678,8683,8687,8691],{"type":173,"tag":640,"props":8679,"children":8680},{"style":665},[8681],{"type":178,"value":8682},"  checkMode",{"type":173,"tag":640,"props":8684,"children":8685},{"style":671},[8686],{"type":178,"value":674},{"type":173,"tag":640,"props":8688,"children":8689},{"style":692},[8690],{"type":178,"value":2273},{"type":173,"tag":640,"props":8692,"children":8693},{"style":659},[8694],{"type":178,"value":2236},{"type":173,"tag":640,"props":8696,"children":8697},{"class":642,"line":1057},[8698,8703,8707,8711,8715,8719],{"type":173,"tag":640,"props":8699,"children":8700},{"style":665},[8701],{"type":178,"value":8702},"  contextualType",{"type":173,"tag":640,"props":8704,"children":8705},{"style":671},[8706],{"type":178,"value":2999},{"type":173,"tag":640,"props":8708,"children":8709},{"style":692},[8710],{"type":178,"value":695},{"type":173,"tag":640,"props":8712,"children":8713},{"style":671},[8714],{"type":178,"value":1618},{"type":173,"tag":640,"props":8716,"children":8717},{"style":677},[8718],{"type":178,"value":2301},{"type":173,"tag":640,"props":8720,"children":8721},{"style":659},[8722],{"type":178,"value":2236},{"type":173,"tag":640,"props":8724,"children":8725},{"class":642,"line":1094},[8726,8730],{"type":173,"tag":640,"props":8727,"children":8728},{"style":659},[8729],{"type":178,"value":685},{"type":173,"tag":640,"props":8731,"children":8732},{"style":659},[8733],{"type":178,"value":700},{"type":173,"tag":640,"props":8735,"children":8736},{"class":642,"line":1139},[8737,8741,8746,8750,8755,8759,8763],{"type":173,"tag":640,"props":8738,"children":8739},{"style":647},[8740],{"type":178,"value":1459},{"type":173,"tag":640,"props":8742,"children":8743},{"style":907},[8744],{"type":178,"value":8745}," initializer",{"type":173,"tag":640,"props":8747,"children":8748},{"style":671},[8749],{"type":178,"value":915},{"type":173,"tag":640,"props":8751,"children":8752},{"style":653},[8753],{"type":178,"value":8754}," getEffectiveInitializer",{"type":173,"tag":640,"props":8756,"children":8757},{"style":1080},[8758],{"type":178,"value":662},{"type":173,"tag":640,"props":8760,"children":8761},{"style":713},[8762],{"type":178,"value":1912},{"type":173,"tag":640,"props":8764,"children":8765},{"style":1080},[8766],{"type":178,"value":934},{"type":173,"tag":640,"props":8768,"children":8769},{"class":642,"line":1148},[8770,8774,8778,8783,8787,8791,8795],{"type":173,"tag":640,"props":8771,"children":8772},{"style":707},[8773],{"type":178,"value":1243},{"type":173,"tag":640,"props":8775,"children":8776},{"style":1080},[8777],{"type":178,"value":1248},{"type":173,"tag":640,"props":8779,"children":8780},{"style":653},[8781],{"type":178,"value":8782},"isInJSFile",{"type":173,"tag":640,"props":8784,"children":8785},{"style":1080},[8786],{"type":178,"value":662},{"type":173,"tag":640,"props":8788,"children":8789},{"style":713},[8790],{"type":178,"value":1912},{"type":173,"tag":640,"props":8792,"children":8793},{"style":1080},[8794],{"type":178,"value":1266},{"type":173,"tag":640,"props":8796,"children":8797},{"style":659},[8798],{"type":178,"value":1271},{"type":173,"tag":640,"props":8800,"children":8801},{"class":642,"line":1157},[8802,8806],{"type":173,"tag":640,"props":8803,"children":8804},{"style":707},[8805],{"type":178,"value":1100},{"type":173,"tag":640,"props":8807,"children":8808},{"style":1277},[8809],{"type":178,"value":8810}," //...\n",{"type":173,"tag":640,"props":8812,"children":8813},{"class":642,"line":1372},[8814],{"type":173,"tag":640,"props":8815,"children":8816},{"style":659},[8817],{"type":178,"value":1154},{"type":173,"tag":640,"props":8819,"children":8820},{"class":642,"line":1674},[8821,8825],{"type":173,"tag":640,"props":8822,"children":8823},{"style":707},[8824],{"type":178,"value":710},{"type":173,"tag":640,"props":8826,"children":8827},{"style":1277},[8828],{"type":178,"value":8810},{"type":173,"tag":640,"props":8830,"children":8831},{"class":642,"line":1682},[8832],{"type":173,"tag":640,"props":8833,"children":8834},{"style":659},[8835],{"type":178,"value":750},{"type":173,"tag":229,"props":8837,"children":8839},{"id":8838},"缓存模式",[8840],{"type":178,"value":8838},{"type":173,"tag":174,"props":8842,"children":8843},{},[8844],{"type":178,"value":8845},"TypeScript 编译器代码中常见一种 xxx、xxxWorker 的命名模式，分别对应功能的外部包装以及实际实现。以 getTypeOfVariableOrParameterOrProperty 为例，其外部包装实现了缓存效果，避免重复计算，而 getTypeOfVariableOrParameterOrPropertyWorker 才是真正的计算逻辑。",{"type":173,"tag":630,"props":8847,"children":8849},{"className":632,"code":8848,"language":634,"meta":166,"style":166},"function getTypeOfVariableOrParameterOrProperty(symbol: Symbol): Type {\n  const links = getSymbolLinks(symbol)\n  if (!links.type) {\n    const type = getTypeOfVariableOrParameterOrPropertyWorker(symbol)\n    return type\n  }\n  return links.type\n}\n",[8850],{"type":173,"tag":313,"props":8851,"children":8852},{"__ignoreMap":166},[8853,8896,8929,8965,8996,9007,9014,9034],{"type":173,"tag":640,"props":8854,"children":8855},{"class":642,"line":643},[8856,8860,8864,8868,8872,8876,8880,8884,8888,8892],{"type":173,"tag":640,"props":8857,"children":8858},{"style":647},[8859],{"type":178,"value":650},{"type":173,"tag":640,"props":8861,"children":8862},{"style":653},[8863],{"type":178,"value":1652},{"type":173,"tag":640,"props":8865,"children":8866},{"style":659},[8867],{"type":178,"value":662},{"type":173,"tag":640,"props":8869,"children":8870},{"style":665},[8871],{"type":178,"value":1426},{"type":173,"tag":640,"props":8873,"children":8874},{"style":671},[8875],{"type":178,"value":674},{"type":173,"tag":640,"props":8877,"children":8878},{"style":692},[8879],{"type":178,"value":1435},{"type":173,"tag":640,"props":8881,"children":8882},{"style":659},[8883],{"type":178,"value":685},{"type":173,"tag":640,"props":8885,"children":8886},{"style":671},[8887],{"type":178,"value":674},{"type":173,"tag":640,"props":8889,"children":8890},{"style":692},[8891],{"type":178,"value":695},{"type":173,"tag":640,"props":8893,"children":8894},{"style":659},[8895],{"type":178,"value":700},{"type":173,"tag":640,"props":8897,"children":8898},{"class":642,"line":703},[8899,8903,8908,8912,8917,8921,8925],{"type":173,"tag":640,"props":8900,"children":8901},{"style":647},[8902],{"type":178,"value":1459},{"type":173,"tag":640,"props":8904,"children":8905},{"style":907},[8906],{"type":178,"value":8907}," links",{"type":173,"tag":640,"props":8909,"children":8910},{"style":671},[8911],{"type":178,"value":915},{"type":173,"tag":640,"props":8913,"children":8914},{"style":653},[8915],{"type":178,"value":8916}," getSymbolLinks",{"type":173,"tag":640,"props":8918,"children":8919},{"style":1080},[8920],{"type":178,"value":662},{"type":173,"tag":640,"props":8922,"children":8923},{"style":713},[8924],{"type":178,"value":1426},{"type":173,"tag":640,"props":8926,"children":8927},{"style":1080},[8928],{"type":178,"value":934},{"type":173,"tag":640,"props":8930,"children":8931},{"class":642,"line":744},[8932,8936,8940,8944,8949,8953,8957,8961],{"type":173,"tag":640,"props":8933,"children":8934},{"style":707},[8935],{"type":178,"value":1243},{"type":173,"tag":640,"props":8937,"children":8938},{"style":1080},[8939],{"type":178,"value":1248},{"type":173,"tag":640,"props":8941,"children":8942},{"style":671},[8943],{"type":178,"value":3928},{"type":173,"tag":640,"props":8945,"children":8946},{"style":713},[8947],{"type":178,"value":8948},"links",{"type":173,"tag":640,"props":8950,"children":8951},{"style":659},[8952],{"type":178,"value":1516},{"type":173,"tag":640,"props":8954,"children":8955},{"style":713},[8956],{"type":178,"value":2516},{"type":173,"tag":640,"props":8958,"children":8959},{"style":1080},[8960],{"type":178,"value":1127},{"type":173,"tag":640,"props":8962,"children":8963},{"style":659},[8964],{"type":178,"value":1271},{"type":173,"tag":640,"props":8966,"children":8967},{"class":642,"line":1057},[8968,8972,8976,8980,8984,8988,8992],{"type":173,"tag":640,"props":8969,"children":8970},{"style":647},[8971],{"type":178,"value":2443},{"type":173,"tag":640,"props":8973,"children":8974},{"style":907},[8975],{"type":178,"value":2448},{"type":173,"tag":640,"props":8977,"children":8978},{"style":671},[8979],{"type":178,"value":915},{"type":173,"tag":640,"props":8981,"children":8982},{"style":653},[8983],{"type":178,"value":1851},{"type":173,"tag":640,"props":8985,"children":8986},{"style":1080},[8987],{"type":178,"value":662},{"type":173,"tag":640,"props":8989,"children":8990},{"style":713},[8991],{"type":178,"value":1426},{"type":173,"tag":640,"props":8993,"children":8994},{"style":1080},[8995],{"type":178,"value":934},{"type":173,"tag":640,"props":8997,"children":8998},{"class":642,"line":1094},[8999,9003],{"type":173,"tag":640,"props":9000,"children":9001},{"style":707},[9002],{"type":178,"value":1335},{"type":173,"tag":640,"props":9004,"children":9005},{"style":713},[9006],{"type":178,"value":4902},{"type":173,"tag":640,"props":9008,"children":9009},{"class":642,"line":1139},[9010],{"type":173,"tag":640,"props":9011,"children":9012},{"style":659},[9013],{"type":178,"value":1154},{"type":173,"tag":640,"props":9015,"children":9016},{"class":642,"line":1148},[9017,9021,9025,9029],{"type":173,"tag":640,"props":9018,"children":9019},{"style":707},[9020],{"type":178,"value":710},{"type":173,"tag":640,"props":9022,"children":9023},{"style":713},[9024],{"type":178,"value":8907},{"type":173,"tag":640,"props":9026,"children":9027},{"style":659},[9028],{"type":178,"value":1516},{"type":173,"tag":640,"props":9030,"children":9031},{"style":713},[9032],{"type":178,"value":9033},"type\n",{"type":173,"tag":640,"props":9035,"children":9036},{"class":642,"line":1157},[9037],{"type":173,"tag":640,"props":9038,"children":9039},{"style":659},[9040],{"type":178,"value":750},{"type":173,"tag":181,"props":9042,"children":9044},{"id":9043},"杂项",[9045],{"type":178,"value":9043},{"type":173,"tag":229,"props":9047,"children":9049},{"id":9048},"什么是无类型函数调用untyped-function-call",[9050],{"type":178,"value":9051},"什么是无类型函数调用（untyped function call）？",{"type":173,"tag":174,"props":9053,"children":9054},{},[9055],{"type":178,"value":9056},"调用的表达式本身没有明确的函数类型（如 any 类型，或对象类型但没有 call/construct 签名，但又是 Function 的子类型），此时 TypeScript 不做参数类型检查，调用结果类型为 any，比如：",{"type":173,"tag":630,"props":9058,"children":9060},{"className":632,"code":9059,"language":634,"meta":166,"style":166},"declare const f: Function\nconst res = f(\"hello\")\n//    ^? any\n",[9061],{"type":173,"tag":313,"props":9062,"children":9063},{"__ignoreMap":166},[9064,9090,9134],{"type":173,"tag":640,"props":9065,"children":9066},{"class":642,"line":643},[9067,9071,9076,9081,9085],{"type":173,"tag":640,"props":9068,"children":9069},{"style":852},[9070],{"type":178,"value":855},{"type":173,"tag":640,"props":9072,"children":9073},{"style":647},[9074],{"type":178,"value":9075}," const",{"type":173,"tag":640,"props":9077,"children":9078},{"style":6715},[9079],{"type":178,"value":9080}," f",{"type":173,"tag":640,"props":9082,"children":9083},{"style":671},[9084],{"type":178,"value":674},{"type":173,"tag":640,"props":9086,"children":9087},{"style":692},[9088],{"type":178,"value":9089}," Function\n",{"type":173,"tag":640,"props":9091,"children":9092},{"class":642,"line":703},[9093,9097,9102,9106,9110,9114,9120,9126,9130],{"type":173,"tag":640,"props":9094,"children":9095},{"style":647},[9096],{"type":178,"value":904},{"type":173,"tag":640,"props":9098,"children":9099},{"style":907},[9100],{"type":178,"value":9101}," res",{"type":173,"tag":640,"props":9103,"children":9104},{"style":671},[9105],{"type":178,"value":915},{"type":173,"tag":640,"props":9107,"children":9108},{"style":653},[9109],{"type":178,"value":9080},{"type":173,"tag":640,"props":9111,"children":9112},{"style":713},[9113],{"type":178,"value":662},{"type":173,"tag":640,"props":9115,"children":9117},{"style":9116},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[9118],{"type":178,"value":9119},"\"",{"type":173,"tag":640,"props":9121,"children":9123},{"style":9122},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[9124],{"type":178,"value":9125},"hello",{"type":173,"tag":640,"props":9127,"children":9128},{"style":9116},[9129],{"type":178,"value":9119},{"type":173,"tag":640,"props":9131,"children":9132},{"style":713},[9133],{"type":178,"value":934},{"type":173,"tag":640,"props":9135,"children":9136},{"class":642,"line":744},[9137],{"type":173,"tag":640,"props":9138,"children":9139},{"style":1277},[9140],{"type":178,"value":9141},"//    ^? any\n",{"type":173,"tag":181,"props":9143,"children":9145},{"id":9144},"有意思的问题",[9146],{"type":178,"value":9144},{"type":173,"tag":229,"props":9148,"children":9150},{"id":9149},"编译器在代码层面如何处理类型的循环引用",[9151],{"type":178,"value":9152},"编译器在代码层面如何处理类型的循环引用？",{"type":173,"tag":630,"props":9154,"children":9156},{"className":632,"code":9155,"language":634,"meta":166,"style":166},"type X = { fn: () => Y }\ntype Y = { fn: () => X }\n",[9157],{"type":173,"tag":313,"props":9158,"children":9159},{"__ignoreMap":166},[9160,9206],{"type":173,"tag":640,"props":9161,"children":9162},{"class":642,"line":643},[9163,9167,9172,9176,9180,9185,9189,9193,9197,9202],{"type":173,"tag":640,"props":9164,"children":9165},{"style":647},[9166],{"type":178,"value":2516},{"type":173,"tag":640,"props":9168,"children":9169},{"style":692},[9170],{"type":178,"value":9171}," X",{"type":173,"tag":640,"props":9173,"children":9174},{"style":671},[9175],{"type":178,"value":915},{"type":173,"tag":640,"props":9177,"children":9178},{"style":659},[9179],{"type":178,"value":3770},{"type":173,"tag":640,"props":9181,"children":9183},{"style":9182},"--shiki-light:#E53935;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[9184],{"type":178,"value":865},{"type":173,"tag":640,"props":9186,"children":9187},{"style":671},[9188],{"type":178,"value":674},{"type":173,"tag":640,"props":9190,"children":9191},{"style":659},[9192],{"type":178,"value":7728},{"type":173,"tag":640,"props":9194,"children":9195},{"style":647},[9196],{"type":178,"value":1050},{"type":173,"tag":640,"props":9198,"children":9199},{"style":692},[9200],{"type":178,"value":9201}," Y",{"type":173,"tag":640,"props":9203,"children":9204},{"style":659},[9205],{"type":178,"value":3788},{"type":173,"tag":640,"props":9207,"children":9208},{"class":642,"line":703},[9209,9213,9217,9221,9225,9229,9233,9237,9241,9245],{"type":173,"tag":640,"props":9210,"children":9211},{"style":647},[9212],{"type":178,"value":2516},{"type":173,"tag":640,"props":9214,"children":9215},{"style":692},[9216],{"type":178,"value":9201},{"type":173,"tag":640,"props":9218,"children":9219},{"style":671},[9220],{"type":178,"value":915},{"type":173,"tag":640,"props":9222,"children":9223},{"style":659},[9224],{"type":178,"value":3770},{"type":173,"tag":640,"props":9226,"children":9227},{"style":9182},[9228],{"type":178,"value":865},{"type":173,"tag":640,"props":9230,"children":9231},{"style":671},[9232],{"type":178,"value":674},{"type":173,"tag":640,"props":9234,"children":9235},{"style":659},[9236],{"type":178,"value":7728},{"type":173,"tag":640,"props":9238,"children":9239},{"style":647},[9240],{"type":178,"value":1050},{"type":173,"tag":640,"props":9242,"children":9243},{"style":692},[9244],{"type":178,"value":9171},{"type":173,"tag":640,"props":9246,"children":9247},{"style":659},[9248],{"type":178,"value":3788},{"type":173,"tag":181,"props":9250,"children":9252},{"id":9251},"extra",[9253],{"type":178,"value":9254},"Extra",{"type":173,"tag":229,"props":9256,"children":9258},{"id":9257},"引入表观类型概念",[9259],{"type":178,"value":9257},{"type":173,"tag":630,"props":9261,"children":9263},{"className":632,"code":9262,"language":634,"meta":166,"style":166},"function getApparentType(type: Type): Type {\n  const t = type.flags & TypeFlags.Instantiable ? getBaseConstraintOfType(type) || unknownType : type\n  const objectFlags = getObjectFlags(t)\n  return objectFlags & ObjectFlags.Mapped ? getApparentTypeOfMappedType(t as MappedType) :\n    objectFlags & ObjectFlags.Reference && t !== type ? getTypeWithThisArgument(t, type) :\n    t.flags & TypeFlags.Intersection ? getApparentTypeOfIntersectionType(t as IntersectionType, type) :\n    t.flags & TypeFlags.StringLike ? globalStringType :\n    t.flags & TypeFlags.NumberLike ? globalNumberType :\n    t.flags & TypeFlags.BigIntLike ? getGlobalBigIntType() :\n    t.flags & TypeFlags.BooleanLike ? globalBooleanType :\n    t.flags & TypeFlags.ESSymbolLike ? getGlobalESSymbolType() :\n    t.flags & TypeFlags.NonPrimitive ? emptyObjectType :\n    t.flags & TypeFlags.Index ? stringNumberSymbolType :\n    t.flags & TypeFlags.Unknown && !strictNullChecks ? emptyObjectType :\n    t\n}\n",[9264],{"type":173,"tag":313,"props":9265,"children":9266},{"__ignoreMap":166},[9267,9311,9393,9427,9489,9562,9635,9681,9726,9776,9821,9870,9915,9960,10017,10025],{"type":173,"tag":640,"props":9268,"children":9269},{"class":642,"line":643},[9270,9274,9279,9283,9287,9291,9295,9299,9303,9307],{"type":173,"tag":640,"props":9271,"children":9272},{"style":647},[9273],{"type":178,"value":650},{"type":173,"tag":640,"props":9275,"children":9276},{"style":653},[9277],{"type":178,"value":9278}," getApparentType",{"type":173,"tag":640,"props":9280,"children":9281},{"style":659},[9282],{"type":178,"value":662},{"type":173,"tag":640,"props":9284,"children":9285},{"style":665},[9286],{"type":178,"value":2516},{"type":173,"tag":640,"props":9288,"children":9289},{"style":671},[9290],{"type":178,"value":674},{"type":173,"tag":640,"props":9292,"children":9293},{"style":692},[9294],{"type":178,"value":695},{"type":173,"tag":640,"props":9296,"children":9297},{"style":659},[9298],{"type":178,"value":685},{"type":173,"tag":640,"props":9300,"children":9301},{"style":671},[9302],{"type":178,"value":674},{"type":173,"tag":640,"props":9304,"children":9305},{"style":692},[9306],{"type":178,"value":695},{"type":173,"tag":640,"props":9308,"children":9309},{"style":659},[9310],{"type":178,"value":700},{"type":173,"tag":640,"props":9312,"children":9313},{"class":642,"line":703},[9314,9318,9323,9327,9331,9335,9339,9343,9347,9351,9356,9360,9365,9369,9373,9377,9381,9385,9389],{"type":173,"tag":640,"props":9315,"children":9316},{"style":647},[9317],{"type":178,"value":1459},{"type":173,"tag":640,"props":9319,"children":9320},{"style":907},[9321],{"type":178,"value":9322}," t",{"type":173,"tag":640,"props":9324,"children":9325},{"style":671},[9326],{"type":178,"value":915},{"type":173,"tag":640,"props":9328,"children":9329},{"style":713},[9330],{"type":178,"value":2448},{"type":173,"tag":640,"props":9332,"children":9333},{"style":659},[9334],{"type":178,"value":1516},{"type":173,"tag":640,"props":9336,"children":9337},{"style":713},[9338],{"type":178,"value":1591},{"type":173,"tag":640,"props":9340,"children":9341},{"style":671},[9342],{"type":178,"value":1506},{"type":173,"tag":640,"props":9344,"children":9345},{"style":713},[9346],{"type":178,"value":3998},{"type":173,"tag":640,"props":9348,"children":9349},{"style":659},[9350],{"type":178,"value":1516},{"type":173,"tag":640,"props":9352,"children":9353},{"style":713},[9354],{"type":178,"value":9355},"Instantiable",{"type":173,"tag":640,"props":9357,"children":9358},{"style":671},[9359],{"type":178,"value":721},{"type":173,"tag":640,"props":9361,"children":9362},{"style":653},[9363],{"type":178,"value":9364}," getBaseConstraintOfType",{"type":173,"tag":640,"props":9366,"children":9367},{"style":1080},[9368],{"type":178,"value":662},{"type":173,"tag":640,"props":9370,"children":9371},{"style":713},[9372],{"type":178,"value":2516},{"type":173,"tag":640,"props":9374,"children":9375},{"style":1080},[9376],{"type":178,"value":1127},{"type":173,"tag":640,"props":9378,"children":9379},{"style":671},[9380],{"type":178,"value":5502},{"type":173,"tag":640,"props":9382,"children":9383},{"style":713},[9384],{"type":178,"value":736},{"type":173,"tag":640,"props":9386,"children":9387},{"style":671},[9388],{"type":178,"value":731},{"type":173,"tag":640,"props":9390,"children":9391},{"style":713},[9392],{"type":178,"value":4902},{"type":173,"tag":640,"props":9394,"children":9395},{"class":642,"line":744},[9396,9400,9405,9409,9414,9418,9423],{"type":173,"tag":640,"props":9397,"children":9398},{"style":647},[9399],{"type":178,"value":1459},{"type":173,"tag":640,"props":9401,"children":9402},{"style":907},[9403],{"type":178,"value":9404}," objectFlags",{"type":173,"tag":640,"props":9406,"children":9407},{"style":671},[9408],{"type":178,"value":915},{"type":173,"tag":640,"props":9410,"children":9411},{"style":653},[9412],{"type":178,"value":9413}," getObjectFlags",{"type":173,"tag":640,"props":9415,"children":9416},{"style":1080},[9417],{"type":178,"value":662},{"type":173,"tag":640,"props":9419,"children":9420},{"style":713},[9421],{"type":178,"value":9422},"t",{"type":173,"tag":640,"props":9424,"children":9425},{"style":1080},[9426],{"type":178,"value":934},{"type":173,"tag":640,"props":9428,"children":9429},{"class":642,"line":1057},[9430,9434,9438,9442,9446,9450,9455,9459,9464,9468,9472,9476,9481,9485],{"type":173,"tag":640,"props":9431,"children":9432},{"style":707},[9433],{"type":178,"value":710},{"type":173,"tag":640,"props":9435,"children":9436},{"style":713},[9437],{"type":178,"value":9404},{"type":173,"tag":640,"props":9439,"children":9440},{"style":671},[9441],{"type":178,"value":1506},{"type":173,"tag":640,"props":9443,"children":9444},{"style":713},[9445],{"type":178,"value":4063},{"type":173,"tag":640,"props":9447,"children":9448},{"style":659},[9449],{"type":178,"value":1516},{"type":173,"tag":640,"props":9451,"children":9452},{"style":713},[9453],{"type":178,"value":9454},"Mapped",{"type":173,"tag":640,"props":9456,"children":9457},{"style":671},[9458],{"type":178,"value":721},{"type":173,"tag":640,"props":9460,"children":9461},{"style":653},[9462],{"type":178,"value":9463}," getApparentTypeOfMappedType",{"type":173,"tag":640,"props":9465,"children":9466},{"style":1080},[9467],{"type":178,"value":662},{"type":173,"tag":640,"props":9469,"children":9470},{"style":713},[9471],{"type":178,"value":9422},{"type":173,"tag":640,"props":9473,"children":9474},{"style":707},[9475],{"type":178,"value":3338},{"type":173,"tag":640,"props":9477,"children":9478},{"style":692},[9479],{"type":178,"value":9480}," MappedType",{"type":173,"tag":640,"props":9482,"children":9483},{"style":1080},[9484],{"type":178,"value":1127},{"type":173,"tag":640,"props":9486,"children":9487},{"style":671},[9488],{"type":178,"value":2862},{"type":173,"tag":640,"props":9490,"children":9491},{"class":642,"line":1094},[9492,9497,9501,9505,9509,9513,9517,9521,9525,9529,9533,9538,9542,9546,9550,9554,9558],{"type":173,"tag":640,"props":9493,"children":9494},{"style":713},[9495],{"type":178,"value":9496},"    objectFlags",{"type":173,"tag":640,"props":9498,"children":9499},{"style":671},[9500],{"type":178,"value":1506},{"type":173,"tag":640,"props":9502,"children":9503},{"style":713},[9504],{"type":178,"value":4063},{"type":173,"tag":640,"props":9506,"children":9507},{"style":659},[9508],{"type":178,"value":1516},{"type":173,"tag":640,"props":9510,"children":9511},{"style":713},[9512],{"type":178,"value":4072},{"type":173,"tag":640,"props":9514,"children":9515},{"style":671},[9516],{"type":178,"value":2722},{"type":173,"tag":640,"props":9518,"children":9519},{"style":713},[9520],{"type":178,"value":9322},{"type":173,"tag":640,"props":9522,"children":9523},{"style":671},[9524],{"type":178,"value":2703},{"type":173,"tag":640,"props":9526,"children":9527},{"style":713},[9528],{"type":178,"value":2448},{"type":173,"tag":640,"props":9530,"children":9531},{"style":671},[9532],{"type":178,"value":721},{"type":173,"tag":640,"props":9534,"children":9535},{"style":653},[9536],{"type":178,"value":9537}," getTypeWithThisArgument",{"type":173,"tag":640,"props":9539,"children":9540},{"style":1080},[9541],{"type":178,"value":662},{"type":173,"tag":640,"props":9543,"children":9544},{"style":713},[9545],{"type":178,"value":9422},{"type":173,"tag":640,"props":9547,"children":9548},{"style":659},[9549],{"type":178,"value":1751},{"type":173,"tag":640,"props":9551,"children":9552},{"style":713},[9553],{"type":178,"value":2448},{"type":173,"tag":640,"props":9555,"children":9556},{"style":1080},[9557],{"type":178,"value":1127},{"type":173,"tag":640,"props":9559,"children":9560},{"style":671},[9561],{"type":178,"value":2862},{"type":173,"tag":640,"props":9563,"children":9564},{"class":642,"line":1139},[9565,9570,9574,9578,9582,9586,9590,9594,9598,9603,9607,9611,9615,9619,9623,9627,9631],{"type":173,"tag":640,"props":9566,"children":9567},{"style":713},[9568],{"type":178,"value":9569},"    t",{"type":173,"tag":640,"props":9571,"children":9572},{"style":659},[9573],{"type":178,"value":1516},{"type":173,"tag":640,"props":9575,"children":9576},{"style":713},[9577],{"type":178,"value":1591},{"type":173,"tag":640,"props":9579,"children":9580},{"style":671},[9581],{"type":178,"value":1506},{"type":173,"tag":640,"props":9583,"children":9584},{"style":713},[9585],{"type":178,"value":3998},{"type":173,"tag":640,"props":9587,"children":9588},{"style":659},[9589],{"type":178,"value":1516},{"type":173,"tag":640,"props":9591,"children":9592},{"style":713},[9593],{"type":178,"value":4378},{"type":173,"tag":640,"props":9595,"children":9596},{"style":671},[9597],{"type":178,"value":721},{"type":173,"tag":640,"props":9599,"children":9600},{"style":653},[9601],{"type":178,"value":9602}," getApparentTypeOfIntersectionType",{"type":173,"tag":640,"props":9604,"children":9605},{"style":1080},[9606],{"type":178,"value":662},{"type":173,"tag":640,"props":9608,"children":9609},{"style":713},[9610],{"type":178,"value":9422},{"type":173,"tag":640,"props":9612,"children":9613},{"style":707},[9614],{"type":178,"value":3338},{"type":173,"tag":640,"props":9616,"children":9617},{"style":692},[9618],{"type":178,"value":4412},{"type":173,"tag":640,"props":9620,"children":9621},{"style":659},[9622],{"type":178,"value":1751},{"type":173,"tag":640,"props":9624,"children":9625},{"style":713},[9626],{"type":178,"value":2448},{"type":173,"tag":640,"props":9628,"children":9629},{"style":1080},[9630],{"type":178,"value":1127},{"type":173,"tag":640,"props":9632,"children":9633},{"style":671},[9634],{"type":178,"value":2862},{"type":173,"tag":640,"props":9636,"children":9637},{"class":642,"line":1148},[9638,9642,9646,9650,9654,9658,9662,9667,9671,9676],{"type":173,"tag":640,"props":9639,"children":9640},{"style":713},[9641],{"type":178,"value":9569},{"type":173,"tag":640,"props":9643,"children":9644},{"style":659},[9645],{"type":178,"value":1516},{"type":173,"tag":640,"props":9647,"children":9648},{"style":713},[9649],{"type":178,"value":1591},{"type":173,"tag":640,"props":9651,"children":9652},{"style":671},[9653],{"type":178,"value":1506},{"type":173,"tag":640,"props":9655,"children":9656},{"style":713},[9657],{"type":178,"value":3998},{"type":173,"tag":640,"props":9659,"children":9660},{"style":659},[9661],{"type":178,"value":1516},{"type":173,"tag":640,"props":9663,"children":9664},{"style":713},[9665],{"type":178,"value":9666},"StringLike",{"type":173,"tag":640,"props":9668,"children":9669},{"style":671},[9670],{"type":178,"value":721},{"type":173,"tag":640,"props":9672,"children":9673},{"style":713},[9674],{"type":178,"value":9675}," globalStringType",{"type":173,"tag":640,"props":9677,"children":9678},{"style":671},[9679],{"type":178,"value":9680}," :\n",{"type":173,"tag":640,"props":9682,"children":9683},{"class":642,"line":1157},[9684,9688,9692,9696,9700,9704,9708,9713,9717,9722],{"type":173,"tag":640,"props":9685,"children":9686},{"style":713},[9687],{"type":178,"value":9569},{"type":173,"tag":640,"props":9689,"children":9690},{"style":659},[9691],{"type":178,"value":1516},{"type":173,"tag":640,"props":9693,"children":9694},{"style":713},[9695],{"type":178,"value":1591},{"type":173,"tag":640,"props":9697,"children":9698},{"style":671},[9699],{"type":178,"value":1506},{"type":173,"tag":640,"props":9701,"children":9702},{"style":713},[9703],{"type":178,"value":3998},{"type":173,"tag":640,"props":9705,"children":9706},{"style":659},[9707],{"type":178,"value":1516},{"type":173,"tag":640,"props":9709,"children":9710},{"style":713},[9711],{"type":178,"value":9712},"NumberLike",{"type":173,"tag":640,"props":9714,"children":9715},{"style":671},[9716],{"type":178,"value":721},{"type":173,"tag":640,"props":9718,"children":9719},{"style":713},[9720],{"type":178,"value":9721}," globalNumberType",{"type":173,"tag":640,"props":9723,"children":9724},{"style":671},[9725],{"type":178,"value":9680},{"type":173,"tag":640,"props":9727,"children":9728},{"class":642,"line":1372},[9729,9733,9737,9741,9745,9749,9753,9758,9762,9767,9772],{"type":173,"tag":640,"props":9730,"children":9731},{"style":713},[9732],{"type":178,"value":9569},{"type":173,"tag":640,"props":9734,"children":9735},{"style":659},[9736],{"type":178,"value":1516},{"type":173,"tag":640,"props":9738,"children":9739},{"style":713},[9740],{"type":178,"value":1591},{"type":173,"tag":640,"props":9742,"children":9743},{"style":671},[9744],{"type":178,"value":1506},{"type":173,"tag":640,"props":9746,"children":9747},{"style":713},[9748],{"type":178,"value":3998},{"type":173,"tag":640,"props":9750,"children":9751},{"style":659},[9752],{"type":178,"value":1516},{"type":173,"tag":640,"props":9754,"children":9755},{"style":713},[9756],{"type":178,"value":9757},"BigIntLike",{"type":173,"tag":640,"props":9759,"children":9760},{"style":671},[9761],{"type":178,"value":721},{"type":173,"tag":640,"props":9763,"children":9764},{"style":653},[9765],{"type":178,"value":9766}," getGlobalBigIntType",{"type":173,"tag":640,"props":9768,"children":9769},{"style":1080},[9770],{"type":178,"value":9771},"() ",{"type":173,"tag":640,"props":9773,"children":9774},{"style":671},[9775],{"type":178,"value":2862},{"type":173,"tag":640,"props":9777,"children":9778},{"class":642,"line":1674},[9779,9783,9787,9791,9795,9799,9803,9808,9812,9817],{"type":173,"tag":640,"props":9780,"children":9781},{"style":713},[9782],{"type":178,"value":9569},{"type":173,"tag":640,"props":9784,"children":9785},{"style":659},[9786],{"type":178,"value":1516},{"type":173,"tag":640,"props":9788,"children":9789},{"style":713},[9790],{"type":178,"value":1591},{"type":173,"tag":640,"props":9792,"children":9793},{"style":671},[9794],{"type":178,"value":1506},{"type":173,"tag":640,"props":9796,"children":9797},{"style":713},[9798],{"type":178,"value":3998},{"type":173,"tag":640,"props":9800,"children":9801},{"style":659},[9802],{"type":178,"value":1516},{"type":173,"tag":640,"props":9804,"children":9805},{"style":713},[9806],{"type":178,"value":9807},"BooleanLike",{"type":173,"tag":640,"props":9809,"children":9810},{"style":671},[9811],{"type":178,"value":721},{"type":173,"tag":640,"props":9813,"children":9814},{"style":713},[9815],{"type":178,"value":9816}," globalBooleanType",{"type":173,"tag":640,"props":9818,"children":9819},{"style":671},[9820],{"type":178,"value":9680},{"type":173,"tag":640,"props":9822,"children":9823},{"class":642,"line":1682},[9824,9828,9832,9836,9840,9844,9848,9853,9857,9862,9866],{"type":173,"tag":640,"props":9825,"children":9826},{"style":713},[9827],{"type":178,"value":9569},{"type":173,"tag":640,"props":9829,"children":9830},{"style":659},[9831],{"type":178,"value":1516},{"type":173,"tag":640,"props":9833,"children":9834},{"style":713},[9835],{"type":178,"value":1591},{"type":173,"tag":640,"props":9837,"children":9838},{"style":671},[9839],{"type":178,"value":1506},{"type":173,"tag":640,"props":9841,"children":9842},{"style":713},[9843],{"type":178,"value":3998},{"type":173,"tag":640,"props":9845,"children":9846},{"style":659},[9847],{"type":178,"value":1516},{"type":173,"tag":640,"props":9849,"children":9850},{"style":713},[9851],{"type":178,"value":9852},"ESSymbolLike",{"type":173,"tag":640,"props":9854,"children":9855},{"style":671},[9856],{"type":178,"value":721},{"type":173,"tag":640,"props":9858,"children":9859},{"style":653},[9860],{"type":178,"value":9861}," getGlobalESSymbolType",{"type":173,"tag":640,"props":9863,"children":9864},{"style":1080},[9865],{"type":178,"value":9771},{"type":173,"tag":640,"props":9867,"children":9868},{"style":671},[9869],{"type":178,"value":2862},{"type":173,"tag":640,"props":9871,"children":9872},{"class":642,"line":1699},[9873,9877,9881,9885,9889,9893,9897,9902,9906,9911],{"type":173,"tag":640,"props":9874,"children":9875},{"style":713},[9876],{"type":178,"value":9569},{"type":173,"tag":640,"props":9878,"children":9879},{"style":659},[9880],{"type":178,"value":1516},{"type":173,"tag":640,"props":9882,"children":9883},{"style":713},[9884],{"type":178,"value":1591},{"type":173,"tag":640,"props":9886,"children":9887},{"style":671},[9888],{"type":178,"value":1506},{"type":173,"tag":640,"props":9890,"children":9891},{"style":713},[9892],{"type":178,"value":3998},{"type":173,"tag":640,"props":9894,"children":9895},{"style":659},[9896],{"type":178,"value":1516},{"type":173,"tag":640,"props":9898,"children":9899},{"style":713},[9900],{"type":178,"value":9901},"NonPrimitive",{"type":173,"tag":640,"props":9903,"children":9904},{"style":671},[9905],{"type":178,"value":721},{"type":173,"tag":640,"props":9907,"children":9908},{"style":713},[9909],{"type":178,"value":9910}," emptyObjectType",{"type":173,"tag":640,"props":9912,"children":9913},{"style":671},[9914],{"type":178,"value":9680},{"type":173,"tag":640,"props":9916,"children":9917},{"class":642,"line":2541},[9918,9922,9926,9930,9934,9938,9942,9947,9951,9956],{"type":173,"tag":640,"props":9919,"children":9920},{"style":713},[9921],{"type":178,"value":9569},{"type":173,"tag":640,"props":9923,"children":9924},{"style":659},[9925],{"type":178,"value":1516},{"type":173,"tag":640,"props":9927,"children":9928},{"style":713},[9929],{"type":178,"value":1591},{"type":173,"tag":640,"props":9931,"children":9932},{"style":671},[9933],{"type":178,"value":1506},{"type":173,"tag":640,"props":9935,"children":9936},{"style":713},[9937],{"type":178,"value":3998},{"type":173,"tag":640,"props":9939,"children":9940},{"style":659},[9941],{"type":178,"value":1516},{"type":173,"tag":640,"props":9943,"children":9944},{"style":713},[9945],{"type":178,"value":9946},"Index",{"type":173,"tag":640,"props":9948,"children":9949},{"style":671},[9950],{"type":178,"value":721},{"type":173,"tag":640,"props":9952,"children":9953},{"style":713},[9954],{"type":178,"value":9955}," stringNumberSymbolType",{"type":173,"tag":640,"props":9957,"children":9958},{"style":671},[9959],{"type":178,"value":9680},{"type":173,"tag":640,"props":9961,"children":9962},{"class":642,"line":2549},[9963,9967,9971,9975,9979,9983,9987,9992,9996,10000,10005,10009,10013],{"type":173,"tag":640,"props":9964,"children":9965},{"style":713},[9966],{"type":178,"value":9569},{"type":173,"tag":640,"props":9968,"children":9969},{"style":659},[9970],{"type":178,"value":1516},{"type":173,"tag":640,"props":9972,"children":9973},{"style":713},[9974],{"type":178,"value":1591},{"type":173,"tag":640,"props":9976,"children":9977},{"style":671},[9978],{"type":178,"value":1506},{"type":173,"tag":640,"props":9980,"children":9981},{"style":713},[9982],{"type":178,"value":3998},{"type":173,"tag":640,"props":9984,"children":9985},{"style":659},[9986],{"type":178,"value":1516},{"type":173,"tag":640,"props":9988,"children":9989},{"style":713},[9990],{"type":178,"value":9991},"Unknown",{"type":173,"tag":640,"props":9993,"children":9994},{"style":671},[9995],{"type":178,"value":2722},{"type":173,"tag":640,"props":9997,"children":9998},{"style":671},[9999],{"type":178,"value":2727},{"type":173,"tag":640,"props":10001,"children":10002},{"style":713},[10003],{"type":178,"value":10004},"strictNullChecks",{"type":173,"tag":640,"props":10006,"children":10007},{"style":671},[10008],{"type":178,"value":721},{"type":173,"tag":640,"props":10010,"children":10011},{"style":713},[10012],{"type":178,"value":9910},{"type":173,"tag":640,"props":10014,"children":10015},{"style":671},[10016],{"type":178,"value":9680},{"type":173,"tag":640,"props":10018,"children":10019},{"class":642,"line":4389},[10020],{"type":173,"tag":640,"props":10021,"children":10022},{"style":713},[10023],{"type":178,"value":10024},"    t\n",{"type":173,"tag":640,"props":10026,"children":10027},{"class":642,"line":4423},[10028],{"type":173,"tag":640,"props":10029,"children":10030},{"style":659},[10031],{"type":178,"value":750},{"type":173,"tag":10033,"props":10034,"children":10035},"style",{},[10036],{"type":178,"value":10037},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":703,"depth":703,"links":10039},[10040,10041,10042,10043,10044,10045,10046,10047,10048,10049],{"id":183,"depth":703,"text":183},{"id":225,"depth":703,"text":225},{"id":597,"depth":703,"text":597},{"id":753,"depth":703,"text":424},{"id":815,"depth":703,"text":818},{"id":7690,"depth":703,"text":7693},{"id":8619,"depth":703,"text":8619},{"id":9043,"depth":703,"text":9043},{"id":9144,"depth":703,"text":9144},{"id":9251,"depth":703,"text":9254},"markdown","content:8.source-code:_ts:typescript-compiler.md","content","8.source-code/_ts/typescript-compiler.md","8.source-code/_ts/typescript-compiler","md",[10057,10061],{"_path":10058,"title":10059,"description":10060},"/source-code/_ts/type-challenges","TypeScript Type Challenges","TypeScript type challenges",{"_path":10062,"title":10063,"description":10064},"/source-code/_ts/utility-types","Utility Types","TypeScript 内置的工具类型和高级类型，包括 Partial、Required、Readonly、Record、Pick、Omit、Exclude、Extract、NonNullable、Parameters、ReturnType 等。",1753069997949]