[{"data":1,"prerenderedAt":4789},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":158,"/_achieved/2020-08/helmet-and-security-surround":4781},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":4775,"_id":4776,"_source":4777,"_file":4778,"_stem":4779,"_extension":4780},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库 Helmet 的原理，相关 MIME 嗅探、XSS、CSP、DNS 预取等。",{"type":167,"children":168,"toc":4758},"root",[169,191,222,227,389,394,402,407,414,438,445,490,502,514,520,583,604,610,670,682,750,772,777,837,862,895,904,930,936,973,1714,1734,1941,1947,1972,2015,2023,2579,2584,2632,2668,2676,2688,2694,2718,2725,2748,2753,2983,3002,3314,3319,3325,3364,3374,3439,3451,3459,3464,3496,3508,4212,4233,4241,4247,4307,4319,4325,4338,4351,4410,4415,4420,4439,4462,4495,4752],{"type":170,"tag":171,"props":172,"children":173},"element","p",{},[174,177],{"type":175,"value":176},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":170,"tag":178,"props":179,"children":180},"sup",{},[181],{"type":170,"tag":182,"props":183,"children":188},"a",{"href":184,"ariaDescribedBy":185,"dataFootnoteRef":163,"id":187},"#user-content-fn-helmet",[186],"footnote-label","user-content-fnref-helmet",[189],{"type":175,"value":190},"1",{"type":170,"tag":171,"props":192,"children":193},{},[194,196,207,209,220],{"type":175,"value":195},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":170,"tag":178,"props":197,"children":198},{},[199],{"type":170,"tag":182,"props":200,"children":204},{"href":201,"ariaDescribedBy":202,"dataFootnoteRef":163,"id":203},"#user-content-fn-dns-rebinding-1",[186],"user-content-fnref-dns-rebinding-1",[205],{"type":175,"value":206},"2",{"type":175,"value":208}," 问题，它就无能为力 ",{"type":170,"tag":178,"props":210,"children":211},{},[212],{"type":170,"tag":182,"props":213,"children":217},{"href":214,"ariaDescribedBy":215,"dataFootnoteRef":163,"id":216},"#user-content-fn-dns-rebinding-2",[186],"user-content-fnref-dns-rebinding-2",[218],{"type":175,"value":219},"3",{"type":175,"value":221},"。不过尽管不是银弹，它确实还是很有效的。",{"type":170,"tag":171,"props":223,"children":224},{},[225],{"type":175,"value":226},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":170,"tag":228,"props":229,"children":233},"pre",{"code":230,"language":231,"meta":163,"className":232,"style":163},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[234],{"type":170,"tag":235,"props":236,"children":237},"code",{"__ignoreMap":163},[238,295,304,330,338],{"type":170,"tag":239,"props":240,"children":243},"span",{"class":241,"line":242},"line",1,[244,250,256,262,268,274,280,286,290],{"type":170,"tag":239,"props":245,"children":247},{"style":246},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[248],{"type":175,"value":249},"const",{"type":170,"tag":239,"props":251,"children":253},{"style":252},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[254],{"type":175,"value":255}," express",{"type":170,"tag":239,"props":257,"children":259},{"style":258},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[260],{"type":175,"value":261}," =",{"type":170,"tag":239,"props":263,"children":265},{"style":264},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[266],{"type":175,"value":267}," require",{"type":170,"tag":239,"props":269,"children":271},{"style":270},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[272],{"type":175,"value":273},"(",{"type":170,"tag":239,"props":275,"children":277},{"style":276},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[278],{"type":175,"value":279},"'",{"type":170,"tag":239,"props":281,"children":283},{"style":282},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[284],{"type":175,"value":285},"express",{"type":170,"tag":239,"props":287,"children":288},{"style":276},[289],{"type":175,"value":279},{"type":170,"tag":239,"props":291,"children":292},{"style":270},[293],{"type":175,"value":294},")\n",{"type":170,"tag":239,"props":296,"children":298},{"class":241,"line":297},2,[299],{"type":170,"tag":239,"props":300,"children":301},{"emptyLinePlaceholder":162},[302],{"type":175,"value":303},"\n",{"type":170,"tag":239,"props":305,"children":307},{"class":241,"line":306},3,[308,312,317,321,325],{"type":170,"tag":239,"props":309,"children":310},{"style":246},[311],{"type":175,"value":249},{"type":170,"tag":239,"props":313,"children":314},{"style":252},[315],{"type":175,"value":316}," app",{"type":170,"tag":239,"props":318,"children":319},{"style":258},[320],{"type":175,"value":261},{"type":170,"tag":239,"props":322,"children":323},{"style":264},[324],{"type":175,"value":255},{"type":170,"tag":239,"props":326,"children":327},{"style":270},[328],{"type":175,"value":329},"()\n",{"type":170,"tag":239,"props":331,"children":333},{"class":241,"line":332},4,[334],{"type":170,"tag":239,"props":335,"children":336},{"emptyLinePlaceholder":162},[337],{"type":175,"value":303},{"type":170,"tag":239,"props":339,"children":341},{"class":241,"line":340},5,[342,347,353,358,362,367,371,375,380,384],{"type":170,"tag":239,"props":343,"children":344},{"style":270},[345],{"type":175,"value":346},"app",{"type":170,"tag":239,"props":348,"children":350},{"style":349},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[351],{"type":175,"value":352},".",{"type":170,"tag":239,"props":354,"children":355},{"style":264},[356],{"type":175,"value":357},"use",{"type":170,"tag":239,"props":359,"children":360},{"style":270},[361],{"type":175,"value":273},{"type":170,"tag":239,"props":363,"children":364},{"style":264},[365],{"type":175,"value":366},"require",{"type":170,"tag":239,"props":368,"children":369},{"style":270},[370],{"type":175,"value":273},{"type":170,"tag":239,"props":372,"children":373},{"style":276},[374],{"type":175,"value":279},{"type":170,"tag":239,"props":376,"children":377},{"style":282},[378],{"type":175,"value":379},"helmet",{"type":170,"tag":239,"props":381,"children":382},{"style":276},[383],{"type":175,"value":279},{"type":170,"tag":239,"props":385,"children":386},{"style":270},[387],{"type":175,"value":388},")())\n",{"type":170,"tag":171,"props":390,"children":391},{},[392],{"type":175,"value":393},"新的响应请求的 Headers 会变成这样：",{"type":170,"tag":228,"props":395,"children":397},{"code":396},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[398],{"type":170,"tag":235,"props":399,"children":400},{"__ignoreMap":163},[401],{"type":175,"value":396},{"type":170,"tag":171,"props":403,"children":404},{},[405],{"type":175,"value":406},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":170,"tag":408,"props":409,"children":411},"h2",{"id":410},"_11-种安全策略",[412],{"type":175,"value":413},"11 种安全策略",{"type":170,"tag":171,"props":415,"children":416},{},[417,419,425,436],{"type":175,"value":418},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":170,"tag":235,"props":420,"children":422},{"className":421},[],[423],{"type":175,"value":424},"OWASP Secure Headers",{"type":170,"tag":178,"props":426,"children":427},{},[428],{"type":170,"tag":182,"props":429,"children":433},{"href":430,"ariaDescribedBy":431,"dataFootnoteRef":163,"id":432},"#user-content-fn-shp",[186],"user-content-fnref-shp",[434],{"type":175,"value":435},"4",{"type":175,"value":437}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":170,"tag":439,"props":440,"children":442},"h3",{"id":441},"移除-x-powered-by",[443],{"type":175,"value":444},"移除 X-Powered-By",{"type":170,"tag":228,"props":446,"children":448},{"code":447,"language":231,"meta":163,"className":232,"style":163},"response.removeHeader('X-Powered-By')\n",[449],{"type":170,"tag":235,"props":450,"children":451},{"__ignoreMap":163},[452],{"type":170,"tag":239,"props":453,"children":454},{"class":241,"line":242},[455,460,464,469,473,477,482,486],{"type":170,"tag":239,"props":456,"children":457},{"style":270},[458],{"type":175,"value":459},"response",{"type":170,"tag":239,"props":461,"children":462},{"style":349},[463],{"type":175,"value":352},{"type":170,"tag":239,"props":465,"children":466},{"style":264},[467],{"type":175,"value":468},"removeHeader",{"type":170,"tag":239,"props":470,"children":471},{"style":270},[472],{"type":175,"value":273},{"type":170,"tag":239,"props":474,"children":475},{"style":276},[476],{"type":175,"value":279},{"type":170,"tag":239,"props":478,"children":479},{"style":282},[480],{"type":175,"value":481},"X-Powered-By",{"type":170,"tag":239,"props":483,"children":484},{"style":276},[485],{"type":175,"value":279},{"type":170,"tag":239,"props":487,"children":488},{"style":270},[489],{"type":175,"value":294},{"type":170,"tag":171,"props":491,"children":492},{},[493,495,500],{"type":175,"value":494},"一些框架会在请求头中添加 ",{"type":170,"tag":235,"props":496,"children":498},{"className":497},[],[499],{"type":175,"value":481},{"type":175,"value":501},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":170,"tag":171,"props":503,"children":504},{},[505,507,512],{"type":175,"value":506},"由于 Express 默认会给响应头增加 ",{"type":170,"tag":235,"props":508,"children":510},{"className":509},[],[511],{"type":175,"value":481},{"type":175,"value":513},"，所以 Helmet 直接把它移除了。",{"type":170,"tag":439,"props":515,"children":517},{"id":516},"移除-mime-嗅探",[518],{"type":175,"value":519},"移除 MIME 嗅探",{"type":170,"tag":228,"props":521,"children":523},{"code":522,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[524],{"type":170,"tag":235,"props":525,"children":526},{"__ignoreMap":163},[527],{"type":170,"tag":239,"props":528,"children":529},{"class":241,"line":242},[530,534,538,543,547,551,556,560,565,570,575,579],{"type":170,"tag":239,"props":531,"children":532},{"style":270},[533],{"type":175,"value":459},{"type":170,"tag":239,"props":535,"children":536},{"style":349},[537],{"type":175,"value":352},{"type":170,"tag":239,"props":539,"children":540},{"style":264},[541],{"type":175,"value":542},"setHeader",{"type":170,"tag":239,"props":544,"children":545},{"style":270},[546],{"type":175,"value":273},{"type":170,"tag":239,"props":548,"children":549},{"style":276},[550],{"type":175,"value":279},{"type":170,"tag":239,"props":552,"children":553},{"style":282},[554],{"type":175,"value":555},"X-Content-Type-Options",{"type":170,"tag":239,"props":557,"children":558},{"style":276},[559],{"type":175,"value":279},{"type":170,"tag":239,"props":561,"children":562},{"style":349},[563],{"type":175,"value":564},",",{"type":170,"tag":239,"props":566,"children":567},{"style":276},[568],{"type":175,"value":569}," '",{"type":170,"tag":239,"props":571,"children":572},{"style":282},[573],{"type":175,"value":574},"nosniff",{"type":170,"tag":239,"props":576,"children":577},{"style":276},[578],{"type":175,"value":279},{"type":170,"tag":239,"props":580,"children":581},{"style":270},[582],{"type":175,"value":294},{"type":170,"tag":171,"props":584,"children":585},{},[586,588,594,596,602],{"type":175,"value":587},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":170,"tag":235,"props":589,"children":591},{"className":590},[],[592],{"type":175,"value":593},"Content-Type",{"type":175,"value":595},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":170,"tag":235,"props":597,"children":599},{"className":598},[],[600],{"type":175,"value":601},"X-Content-Type-Options = nosniff",{"type":175,"value":603}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":170,"tag":439,"props":605,"children":607},{"id":606},"移除-x-xss-protection",[608],{"type":175,"value":609},"移除 X-XSS-Protection",{"type":170,"tag":228,"props":611,"children":613},{"code":612,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-XSS-Protection', '0')\n",[614],{"type":170,"tag":235,"props":615,"children":616},{"__ignoreMap":163},[617],{"type":170,"tag":239,"props":618,"children":619},{"class":241,"line":242},[620,624,628,632,636,640,645,649,653,657,662,666],{"type":170,"tag":239,"props":621,"children":622},{"style":270},[623],{"type":175,"value":459},{"type":170,"tag":239,"props":625,"children":626},{"style":349},[627],{"type":175,"value":352},{"type":170,"tag":239,"props":629,"children":630},{"style":264},[631],{"type":175,"value":542},{"type":170,"tag":239,"props":633,"children":634},{"style":270},[635],{"type":175,"value":273},{"type":170,"tag":239,"props":637,"children":638},{"style":276},[639],{"type":175,"value":279},{"type":170,"tag":239,"props":641,"children":642},{"style":282},[643],{"type":175,"value":644},"X-XSS-Protection",{"type":170,"tag":239,"props":646,"children":647},{"style":276},[648],{"type":175,"value":279},{"type":170,"tag":239,"props":650,"children":651},{"style":349},[652],{"type":175,"value":564},{"type":170,"tag":239,"props":654,"children":655},{"style":276},[656],{"type":175,"value":569},{"type":170,"tag":239,"props":658,"children":659},{"style":282},[660],{"type":175,"value":661},"0",{"type":170,"tag":239,"props":663,"children":664},{"style":276},[665],{"type":175,"value":279},{"type":170,"tag":239,"props":667,"children":668},{"style":270},[669],{"type":175,"value":294},{"type":170,"tag":171,"props":671,"children":672},{},[673,675,680],{"type":175,"value":674},"不是应该打开 ",{"type":170,"tag":235,"props":676,"children":678},{"className":677},[],[679],{"type":175,"value":644},{"type":175,"value":681},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":170,"tag":171,"props":683,"children":684},{},[685,687,693,695,706,708,713,715,721,723,734,736,741,743,748],{"type":175,"value":686},"这得追溯回去年的 Chrome 移除 ",{"type":170,"tag":235,"props":688,"children":690},{"className":689},[],[691],{"type":175,"value":692},"XSS Auditor",{"type":175,"value":694},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了 ",{"type":170,"tag":178,"props":696,"children":697},{},[698],{"type":170,"tag":182,"props":699,"children":703},{"href":700,"ariaDescribedBy":701,"dataFootnoteRef":163,"id":702},"#user-content-fn-xss-auditor",[186],"user-content-fnref-xss-auditor",[704],{"type":175,"value":705},"5",{"type":175,"value":707},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":170,"tag":235,"props":709,"children":711},{"className":710},[],[712],{"type":175,"value":692},{"type":175,"value":714},"，并开始使用 ",{"type":170,"tag":235,"props":716,"children":718},{"className":717},[],[719],{"type":175,"value":720},"CSP",{"type":175,"value":722}," 等现代标准（更现代的标准）",{"type":170,"tag":178,"props":724,"children":725},{},[726],{"type":170,"tag":182,"props":727,"children":731},{"href":728,"ariaDescribedBy":729,"dataFootnoteRef":163,"id":730},"#user-content-fn-delete-xss-auditor",[186],"user-content-fnref-delete-xss-auditor",[732],{"type":175,"value":733},"6",{"type":175,"value":735},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":170,"tag":235,"props":737,"children":739},{"className":738},[],[740],{"type":175,"value":644},{"type":175,"value":742}," 这个响应头是让浏览器不要再用 ",{"type":170,"tag":235,"props":744,"children":746},{"className":745},[],[747],{"type":175,"value":692},{"type":175,"value":749},"。",{"type":170,"tag":171,"props":751,"children":752},{},[753,755,763,765],{"type":175,"value":754},"见：",{"type":170,"tag":182,"props":756,"children":760},{"href":757,"rel":758},"https://github.com/OWASP/CheatSheetSeries/issues/376",[759],"nofollow",[761],{"type":175,"value":762},"#376",{"type":175,"value":764},"、",{"type":170,"tag":182,"props":766,"children":769},{"href":767,"rel":768},"https://nuxt-security.vercel.app/headers/xxssprotection",[759],[770],{"type":175,"value":771},"Nuxt Security X-XSS-Protection",{"type":170,"tag":439,"props":773,"children":775},{"id":774},"禁止页面被嵌套",[776],{"type":175,"value":774},{"type":170,"tag":228,"props":778,"children":780},{"code":779,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[781],{"type":170,"tag":235,"props":782,"children":783},{"__ignoreMap":163},[784],{"type":170,"tag":239,"props":785,"children":786},{"class":241,"line":242},[787,791,795,799,803,807,812,816,820,824,829,833],{"type":170,"tag":239,"props":788,"children":789},{"style":270},[790],{"type":175,"value":459},{"type":170,"tag":239,"props":792,"children":793},{"style":349},[794],{"type":175,"value":352},{"type":170,"tag":239,"props":796,"children":797},{"style":264},[798],{"type":175,"value":542},{"type":170,"tag":239,"props":800,"children":801},{"style":270},[802],{"type":175,"value":273},{"type":170,"tag":239,"props":804,"children":805},{"style":276},[806],{"type":175,"value":279},{"type":170,"tag":239,"props":808,"children":809},{"style":282},[810],{"type":175,"value":811},"X-Frame-Options",{"type":170,"tag":239,"props":813,"children":814},{"style":276},[815],{"type":175,"value":279},{"type":170,"tag":239,"props":817,"children":818},{"style":349},[819],{"type":175,"value":564},{"type":170,"tag":239,"props":821,"children":822},{"style":276},[823],{"type":175,"value":569},{"type":170,"tag":239,"props":825,"children":826},{"style":282},[827],{"type":175,"value":828},"SAMEORIGIN",{"type":170,"tag":239,"props":830,"children":831},{"style":276},[832],{"type":175,"value":279},{"type":170,"tag":239,"props":834,"children":835},{"style":270},[836],{"type":175,"value":294},{"type":170,"tag":171,"props":838,"children":839},{},[840,845,847,852,854,860],{"type":170,"tag":235,"props":841,"children":843},{"className":842},[],[844],{"type":175,"value":811},{"type":175,"value":846}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":170,"tag":235,"props":848,"children":850},{"className":849},[],[851],{"type":175,"value":811},{"type":175,"value":853}," 为 ",{"type":170,"tag":235,"props":855,"children":857},{"className":856},[],[858],{"type":175,"value":859},"SameOrigin",{"type":175,"value":861},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":170,"tag":171,"props":863,"children":864},{},[865,867,873,874,879,880,886,888,893],{"type":175,"value":866},"本来它的值有三种选择，",{"type":170,"tag":235,"props":868,"children":870},{"className":869},[],[871],{"type":175,"value":872},"Deny",{"type":175,"value":764},{"type":170,"tag":235,"props":875,"children":877},{"className":876},[],[878],{"type":175,"value":859},{"type":175,"value":764},{"type":170,"tag":235,"props":881,"children":883},{"className":882},[],[884],{"type":175,"value":885},"AllowFrom",{"type":175,"value":887},"。但 ",{"type":170,"tag":235,"props":889,"children":891},{"className":890},[],[892],{"type":175,"value":885},{"type":175,"value":894}," 因为其兼容性原因，被 Helmet 弃用：",{"type":170,"tag":171,"props":896,"children":897},{},[898],{"type":170,"tag":899,"props":900,"children":903},"img",{"alt":901,"src":902},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":170,"tag":171,"props":905,"children":906},{},[907,909,914,916,922,924,929],{"type":175,"value":908},"此外，可以在 ",{"type":170,"tag":235,"props":910,"children":912},{"className":911},[],[913],{"type":175,"value":720},{"type":175,"value":915}," 中设置 ",{"type":170,"tag":235,"props":917,"children":919},{"className":918},[],[920],{"type":175,"value":921},"frame-ancestors",{"type":175,"value":923}," 指令来替代 ",{"type":170,"tag":235,"props":925,"children":927},{"className":926},[],[928],{"type":175,"value":811},{"type":175,"value":749},{"type":170,"tag":439,"props":931,"children":933},{"id":932},"移除-referer",[934],{"type":175,"value":935},"移除 Referer",{"type":170,"tag":171,"props":937,"children":938},{},[939,945,947,953,964,966,971],{"type":170,"tag":235,"props":940,"children":942},{"className":941},[],[943],{"type":175,"value":944},"Referrer-Policy",{"type":175,"value":946}," 可以控制浏览器请求头的 ",{"type":170,"tag":235,"props":948,"children":950},{"className":949},[],[951],{"type":175,"value":952},"Referer",{"type":170,"tag":178,"props":954,"children":955},{},[956],{"type":170,"tag":182,"props":957,"children":961},{"href":958,"ariaDescribedBy":959,"dataFootnoteRef":163,"id":960},"#user-content-fn-referer",[186],"user-content-fnref-referer",[962],{"type":175,"value":963},"7",{"type":175,"value":965}," 的显示方式。移除 ",{"type":170,"tag":235,"props":967,"children":969},{"className":968},[],[970],{"type":175,"value":952},{"type":175,"value":972}," 能保护用户的访问记录，防止隐私泄漏。",{"type":170,"tag":228,"props":974,"children":976},{"code":975,"language":231,"meta":163,"className":232,"style":163},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[977],{"type":170,"tag":235,"props":978,"children":979},{"__ignoreMap":163},[980,1011,1020,1042,1050,1070,1079,1100,1109,1130,1139,1160,1169,1190,1199,1220,1229,1250,1259,1268,1277,1338,1412,1443,1456,1465,1508,1517,1552,1585,1639,1684,1697,1706],{"type":170,"tag":239,"props":981,"children":982},{"class":241,"line":242},[983,987,992,996,1001,1006],{"type":170,"tag":239,"props":984,"children":985},{"style":246},[986],{"type":175,"value":249},{"type":170,"tag":239,"props":988,"children":989},{"style":252},[990],{"type":175,"value":991}," ALLOWED_TOKENS",{"type":170,"tag":239,"props":993,"children":994},{"style":258},[995],{"type":175,"value":261},{"type":170,"tag":239,"props":997,"children":998},{"style":258},[999],{"type":175,"value":1000}," new",{"type":170,"tag":239,"props":1002,"children":1003},{"style":264},[1004],{"type":175,"value":1005}," Set",{"type":170,"tag":239,"props":1007,"children":1008},{"style":270},[1009],{"type":175,"value":1010},"([\n",{"type":170,"tag":239,"props":1012,"children":1013},{"class":241,"line":297},[1014],{"type":170,"tag":239,"props":1015,"children":1017},{"style":1016},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1018],{"type":175,"value":1019},"  // 任何时候都不携带 Referer\n",{"type":170,"tag":239,"props":1021,"children":1022},{"class":241,"line":306},[1023,1028,1033,1037],{"type":170,"tag":239,"props":1024,"children":1025},{"style":276},[1026],{"type":175,"value":1027},"  '",{"type":170,"tag":239,"props":1029,"children":1030},{"style":282},[1031],{"type":175,"value":1032},"no-referrer",{"type":170,"tag":239,"props":1034,"children":1035},{"style":276},[1036],{"type":175,"value":279},{"type":170,"tag":239,"props":1038,"children":1039},{"style":349},[1040],{"type":175,"value":1041},",\n",{"type":170,"tag":239,"props":1043,"children":1044},{"class":241,"line":332},[1045],{"type":170,"tag":239,"props":1046,"children":1047},{"style":1016},[1048],{"type":175,"value":1049},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":170,"tag":239,"props":1051,"children":1052},{"class":241,"line":340},[1053,1057,1062,1066],{"type":170,"tag":239,"props":1054,"children":1055},{"style":276},[1056],{"type":175,"value":1027},{"type":170,"tag":239,"props":1058,"children":1059},{"style":282},[1060],{"type":175,"value":1061},"no-referrer-when-downgrade",{"type":170,"tag":239,"props":1063,"children":1064},{"style":276},[1065],{"type":175,"value":279},{"type":170,"tag":239,"props":1067,"children":1068},{"style":349},[1069],{"type":175,"value":1041},{"type":170,"tag":239,"props":1071,"children":1073},{"class":241,"line":1072},6,[1074],{"type":170,"tag":239,"props":1075,"children":1076},{"style":1016},[1077],{"type":175,"value":1078},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":170,"tag":239,"props":1080,"children":1082},{"class":241,"line":1081},7,[1083,1087,1092,1096],{"type":170,"tag":239,"props":1084,"children":1085},{"style":276},[1086],{"type":175,"value":1027},{"type":170,"tag":239,"props":1088,"children":1089},{"style":282},[1090],{"type":175,"value":1091},"same-origin",{"type":170,"tag":239,"props":1093,"children":1094},{"style":276},[1095],{"type":175,"value":279},{"type":170,"tag":239,"props":1097,"children":1098},{"style":349},[1099],{"type":175,"value":1041},{"type":170,"tag":239,"props":1101,"children":1103},{"class":241,"line":1102},8,[1104],{"type":170,"tag":239,"props":1105,"children":1106},{"style":1016},[1107],{"type":175,"value":1108},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":170,"tag":239,"props":1110,"children":1112},{"class":241,"line":1111},9,[1113,1117,1122,1126],{"type":170,"tag":239,"props":1114,"children":1115},{"style":276},[1116],{"type":175,"value":1027},{"type":170,"tag":239,"props":1118,"children":1119},{"style":282},[1120],{"type":175,"value":1121},"origin",{"type":170,"tag":239,"props":1123,"children":1124},{"style":276},[1125],{"type":175,"value":279},{"type":170,"tag":239,"props":1127,"children":1128},{"style":349},[1129],{"type":175,"value":1041},{"type":170,"tag":239,"props":1131,"children":1133},{"class":241,"line":1132},10,[1134],{"type":170,"tag":239,"props":1135,"children":1136},{"style":1016},[1137],{"type":175,"value":1138},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":170,"tag":239,"props":1140,"children":1142},{"class":241,"line":1141},11,[1143,1147,1152,1156],{"type":170,"tag":239,"props":1144,"children":1145},{"style":276},[1146],{"type":175,"value":1027},{"type":170,"tag":239,"props":1148,"children":1149},{"style":282},[1150],{"type":175,"value":1151},"strict-origin",{"type":170,"tag":239,"props":1153,"children":1154},{"style":276},[1155],{"type":175,"value":279},{"type":170,"tag":239,"props":1157,"children":1158},{"style":349},[1159],{"type":175,"value":1041},{"type":170,"tag":239,"props":1161,"children":1163},{"class":241,"line":1162},12,[1164],{"type":170,"tag":239,"props":1165,"children":1166},{"style":1016},[1167],{"type":175,"value":1168},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":170,"tag":239,"props":1170,"children":1172},{"class":241,"line":1171},13,[1173,1177,1182,1186],{"type":170,"tag":239,"props":1174,"children":1175},{"style":276},[1176],{"type":175,"value":1027},{"type":170,"tag":239,"props":1178,"children":1179},{"style":282},[1180],{"type":175,"value":1181},"origin-when-cross-origin",{"type":170,"tag":239,"props":1183,"children":1184},{"style":276},[1185],{"type":175,"value":279},{"type":170,"tag":239,"props":1187,"children":1188},{"style":349},[1189],{"type":175,"value":1041},{"type":170,"tag":239,"props":1191,"children":1193},{"class":241,"line":1192},14,[1194],{"type":170,"tag":239,"props":1195,"children":1196},{"style":1016},[1197],{"type":175,"value":1198},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":170,"tag":239,"props":1200,"children":1202},{"class":241,"line":1201},15,[1203,1207,1212,1216],{"type":170,"tag":239,"props":1204,"children":1205},{"style":276},[1206],{"type":175,"value":1027},{"type":170,"tag":239,"props":1208,"children":1209},{"style":282},[1210],{"type":175,"value":1211},"strict-origin-when-cross-origin",{"type":170,"tag":239,"props":1213,"children":1214},{"style":276},[1215],{"type":175,"value":279},{"type":170,"tag":239,"props":1217,"children":1218},{"style":349},[1219],{"type":175,"value":1041},{"type":170,"tag":239,"props":1221,"children":1223},{"class":241,"line":1222},16,[1224],{"type":170,"tag":239,"props":1225,"children":1226},{"style":1016},[1227],{"type":175,"value":1228},"  // 所有请求都携带上完整的 Referer\n",{"type":170,"tag":239,"props":1230,"children":1232},{"class":241,"line":1231},17,[1233,1237,1242,1246],{"type":170,"tag":239,"props":1234,"children":1235},{"style":276},[1236],{"type":175,"value":1027},{"type":170,"tag":239,"props":1238,"children":1239},{"style":282},[1240],{"type":175,"value":1241},"unsafe-url",{"type":170,"tag":239,"props":1243,"children":1244},{"style":276},[1245],{"type":175,"value":279},{"type":170,"tag":239,"props":1247,"children":1248},{"style":349},[1249],{"type":175,"value":1041},{"type":170,"tag":239,"props":1251,"children":1253},{"class":241,"line":1252},18,[1254],{"type":170,"tag":239,"props":1255,"children":1256},{"style":1016},[1257],{"type":175,"value":1258},"  // 无策略\n",{"type":170,"tag":239,"props":1260,"children":1262},{"class":241,"line":1261},19,[1263],{"type":170,"tag":239,"props":1264,"children":1265},{"style":276},[1266],{"type":175,"value":1267},"  ''\n",{"type":170,"tag":239,"props":1269,"children":1271},{"class":241,"line":1270},20,[1272],{"type":170,"tag":239,"props":1273,"children":1274},{"style":270},[1275],{"type":175,"value":1276},"])\n",{"type":170,"tag":239,"props":1278,"children":1280},{"class":241,"line":1279},21,[1281,1286,1291,1296,1302,1306,1311,1315,1319,1323,1328,1333],{"type":170,"tag":239,"props":1282,"children":1283},{"style":246},[1284],{"type":175,"value":1285},"function",{"type":170,"tag":239,"props":1287,"children":1288},{"style":264},[1289],{"type":175,"value":1290}," getHeaderValueFromOptions",{"type":170,"tag":239,"props":1292,"children":1293},{"style":349},[1294],{"type":175,"value":1295},"({",{"type":170,"tag":239,"props":1297,"children":1299},{"style":1298},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1300],{"type":175,"value":1301}," policy",{"type":170,"tag":239,"props":1303,"children":1304},{"style":258},[1305],{"type":175,"value":261},{"type":170,"tag":239,"props":1307,"children":1308},{"style":270},[1309],{"type":175,"value":1310}," [",{"type":170,"tag":239,"props":1312,"children":1313},{"style":276},[1314],{"type":175,"value":279},{"type":170,"tag":239,"props":1316,"children":1317},{"style":282},[1318],{"type":175,"value":1032},{"type":170,"tag":239,"props":1320,"children":1321},{"style":276},[1322],{"type":175,"value":279},{"type":170,"tag":239,"props":1324,"children":1325},{"style":270},[1326],{"type":175,"value":1327},"] ",{"type":170,"tag":239,"props":1329,"children":1330},{"style":349},[1331],{"type":175,"value":1332},"})",{"type":170,"tag":239,"props":1334,"children":1335},{"style":349},[1336],{"type":175,"value":1337}," {\n",{"type":170,"tag":239,"props":1339,"children":1341},{"class":241,"line":1340},22,[1342,1347,1352,1356,1361,1365,1370,1374,1379,1383,1388,1393,1398,1402,1407],{"type":170,"tag":239,"props":1343,"children":1344},{"style":246},[1345],{"type":175,"value":1346},"  const",{"type":170,"tag":239,"props":1348,"children":1349},{"style":252},[1350],{"type":175,"value":1351}," tokens",{"type":170,"tag":239,"props":1353,"children":1354},{"style":258},[1355],{"type":175,"value":261},{"type":170,"tag":239,"props":1357,"children":1358},{"style":258},[1359],{"type":175,"value":1360}," typeof",{"type":170,"tag":239,"props":1362,"children":1363},{"style":270},[1364],{"type":175,"value":1301},{"type":170,"tag":239,"props":1366,"children":1367},{"style":258},[1368],{"type":175,"value":1369}," ===",{"type":170,"tag":239,"props":1371,"children":1372},{"style":276},[1373],{"type":175,"value":569},{"type":170,"tag":239,"props":1375,"children":1376},{"style":282},[1377],{"type":175,"value":1378},"string",{"type":170,"tag":239,"props":1380,"children":1381},{"style":276},[1382],{"type":175,"value":279},{"type":170,"tag":239,"props":1384,"children":1385},{"style":258},[1386],{"type":175,"value":1387}," ?",{"type":170,"tag":239,"props":1389,"children":1391},{"style":1390},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1392],{"type":175,"value":1310},{"type":170,"tag":239,"props":1394,"children":1395},{"style":270},[1396],{"type":175,"value":1397},"policy",{"type":170,"tag":239,"props":1399,"children":1400},{"style":1390},[1401],{"type":175,"value":1327},{"type":170,"tag":239,"props":1403,"children":1404},{"style":258},[1405],{"type":175,"value":1406},":",{"type":170,"tag":239,"props":1408,"children":1409},{"style":270},[1410],{"type":175,"value":1411}," policy\n",{"type":170,"tag":239,"props":1413,"children":1415},{"class":241,"line":1414},23,[1416,1421,1425,1430,1434,1439],{"type":170,"tag":239,"props":1417,"children":1418},{"style":270},[1419],{"type":175,"value":1420},"    tokensSeen",{"type":170,"tag":239,"props":1422,"children":1423},{"style":349},[1424],{"type":175,"value":352},{"type":170,"tag":239,"props":1426,"children":1427},{"style":264},[1428],{"type":175,"value":1429},"add",{"type":170,"tag":239,"props":1431,"children":1432},{"style":1390},[1433],{"type":175,"value":273},{"type":170,"tag":239,"props":1435,"children":1436},{"style":270},[1437],{"type":175,"value":1438},"token",{"type":170,"tag":239,"props":1440,"children":1441},{"style":1390},[1442],{"type":175,"value":294},{"type":170,"tag":239,"props":1444,"children":1446},{"class":241,"line":1445},24,[1447,1452],{"type":170,"tag":239,"props":1448,"children":1449},{"style":349},[1450],{"type":175,"value":1451},"  }",{"type":170,"tag":239,"props":1453,"children":1454},{"style":270},[1455],{"type":175,"value":294},{"type":170,"tag":239,"props":1457,"children":1459},{"class":241,"line":1458},25,[1460],{"type":170,"tag":239,"props":1461,"children":1462},{"style":1016},[1463],{"type":175,"value":1464},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":170,"tag":239,"props":1466,"children":1468},{"class":241,"line":1467},26,[1469,1475,1479,1483,1488,1492,1496,1500,1504],{"type":170,"tag":239,"props":1470,"children":1472},{"style":1471},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1473],{"type":175,"value":1474},"  return",{"type":170,"tag":239,"props":1476,"children":1477},{"style":270},[1478],{"type":175,"value":1351},{"type":170,"tag":239,"props":1480,"children":1481},{"style":349},[1482],{"type":175,"value":352},{"type":170,"tag":239,"props":1484,"children":1485},{"style":264},[1486],{"type":175,"value":1487},"join",{"type":170,"tag":239,"props":1489,"children":1490},{"style":270},[1491],{"type":175,"value":273},{"type":170,"tag":239,"props":1493,"children":1494},{"style":276},[1495],{"type":175,"value":279},{"type":170,"tag":239,"props":1497,"children":1498},{"style":282},[1499],{"type":175,"value":564},{"type":170,"tag":239,"props":1501,"children":1502},{"style":276},[1503],{"type":175,"value":279},{"type":170,"tag":239,"props":1505,"children":1506},{"style":270},[1507],{"type":175,"value":294},{"type":170,"tag":239,"props":1509,"children":1511},{"class":241,"line":1510},27,[1512],{"type":170,"tag":239,"props":1513,"children":1514},{"style":270},[1515],{"type":175,"value":1516},"}\n",{"type":170,"tag":239,"props":1518,"children":1520},{"class":241,"line":1519},28,[1521,1525,1530,1534,1539,1543,1548],{"type":170,"tag":239,"props":1522,"children":1523},{"style":246},[1524],{"type":175,"value":1285},{"type":170,"tag":239,"props":1526,"children":1527},{"style":264},[1528],{"type":175,"value":1529}," referrerPolicy",{"type":170,"tag":239,"props":1531,"children":1532},{"style":349},[1533],{"type":175,"value":273},{"type":170,"tag":239,"props":1535,"children":1536},{"style":1298},[1537],{"type":175,"value":1538},"options",{"type":170,"tag":239,"props":1540,"children":1541},{"style":258},[1542],{"type":175,"value":261},{"type":170,"tag":239,"props":1544,"children":1545},{"style":349},[1546],{"type":175,"value":1547}," {})",{"type":170,"tag":239,"props":1549,"children":1550},{"style":349},[1551],{"type":175,"value":1337},{"type":170,"tag":239,"props":1553,"children":1555},{"class":241,"line":1554},29,[1556,1560,1565,1569,1573,1577,1581],{"type":170,"tag":239,"props":1557,"children":1558},{"style":246},[1559],{"type":175,"value":1346},{"type":170,"tag":239,"props":1561,"children":1562},{"style":252},[1563],{"type":175,"value":1564}," headerValue",{"type":170,"tag":239,"props":1566,"children":1567},{"style":258},[1568],{"type":175,"value":261},{"type":170,"tag":239,"props":1570,"children":1571},{"style":264},[1572],{"type":175,"value":1290},{"type":170,"tag":239,"props":1574,"children":1575},{"style":1390},[1576],{"type":175,"value":273},{"type":170,"tag":239,"props":1578,"children":1579},{"style":270},[1580],{"type":175,"value":1538},{"type":170,"tag":239,"props":1582,"children":1583},{"style":1390},[1584],{"type":175,"value":294},{"type":170,"tag":239,"props":1586,"children":1588},{"class":241,"line":1587},30,[1589,1593,1598,1603,1607,1612,1616,1621,1625,1630,1635],{"type":170,"tag":239,"props":1590,"children":1591},{"style":1471},[1592],{"type":175,"value":1474},{"type":170,"tag":239,"props":1594,"children":1595},{"style":246},[1596],{"type":175,"value":1597}," function",{"type":170,"tag":239,"props":1599,"children":1600},{"style":264},[1601],{"type":175,"value":1602}," referrerPolicyMiddleware",{"type":170,"tag":239,"props":1604,"children":1605},{"style":349},[1606],{"type":175,"value":273},{"type":170,"tag":239,"props":1608,"children":1609},{"style":1298},[1610],{"type":175,"value":1611},"_req",{"type":170,"tag":239,"props":1613,"children":1614},{"style":349},[1615],{"type":175,"value":564},{"type":170,"tag":239,"props":1617,"children":1618},{"style":1298},[1619],{"type":175,"value":1620}," res",{"type":170,"tag":239,"props":1622,"children":1623},{"style":349},[1624],{"type":175,"value":564},{"type":170,"tag":239,"props":1626,"children":1627},{"style":1298},[1628],{"type":175,"value":1629}," next",{"type":170,"tag":239,"props":1631,"children":1632},{"style":349},[1633],{"type":175,"value":1634},")",{"type":170,"tag":239,"props":1636,"children":1637},{"style":349},[1638],{"type":175,"value":1337},{"type":170,"tag":239,"props":1640,"children":1642},{"class":241,"line":1641},31,[1643,1648,1652,1656,1660,1664,1668,1672,1676,1680],{"type":170,"tag":239,"props":1644,"children":1645},{"style":270},[1646],{"type":175,"value":1647},"    res",{"type":170,"tag":239,"props":1649,"children":1650},{"style":349},[1651],{"type":175,"value":352},{"type":170,"tag":239,"props":1653,"children":1654},{"style":264},[1655],{"type":175,"value":542},{"type":170,"tag":239,"props":1657,"children":1658},{"style":1390},[1659],{"type":175,"value":273},{"type":170,"tag":239,"props":1661,"children":1662},{"style":276},[1663],{"type":175,"value":279},{"type":170,"tag":239,"props":1665,"children":1666},{"style":282},[1667],{"type":175,"value":944},{"type":170,"tag":239,"props":1669,"children":1670},{"style":276},[1671],{"type":175,"value":279},{"type":170,"tag":239,"props":1673,"children":1674},{"style":349},[1675],{"type":175,"value":564},{"type":170,"tag":239,"props":1677,"children":1678},{"style":270},[1679],{"type":175,"value":1564},{"type":170,"tag":239,"props":1681,"children":1682},{"style":1390},[1683],{"type":175,"value":294},{"type":170,"tag":239,"props":1685,"children":1687},{"class":241,"line":1686},32,[1688,1693],{"type":170,"tag":239,"props":1689,"children":1690},{"style":264},[1691],{"type":175,"value":1692},"    next",{"type":170,"tag":239,"props":1694,"children":1695},{"style":1390},[1696],{"type":175,"value":329},{"type":170,"tag":239,"props":1698,"children":1700},{"class":241,"line":1699},33,[1701],{"type":170,"tag":239,"props":1702,"children":1703},{"style":349},[1704],{"type":175,"value":1705},"  }\n",{"type":170,"tag":239,"props":1707,"children":1709},{"class":241,"line":1708},34,[1710],{"type":170,"tag":239,"props":1711,"children":1712},{"style":349},[1713],{"type":175,"value":1516},{"type":170,"tag":171,"props":1715,"children":1716},{},[1717,1719,1725,1727,1732],{"type":175,"value":1718},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":170,"tag":235,"props":1720,"children":1722},{"className":1721},[],[1723],{"type":175,"value":1724},"Referrer Policy",{"type":175,"value":1726},"。Meta 标签设置的 ",{"type":170,"tag":235,"props":1728,"children":1730},{"className":1729},[],[1731],{"type":175,"value":1724},{"type":175,"value":1733}," 对整个页面都有效果（但优先级最低）。",{"type":170,"tag":228,"props":1735,"children":1739},{"code":1736,"language":1737,"meta":163,"className":1738,"style":163},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1740],{"type":170,"tag":235,"props":1741,"children":1742},{"__ignoreMap":163},[1743,1808,1876],{"type":170,"tag":239,"props":1744,"children":1745},{"class":241,"line":242},[1746,1751,1757,1763,1768,1773,1778,1782,1787,1791,1795,1799,1803],{"type":170,"tag":239,"props":1747,"children":1748},{"style":349},[1749],{"type":175,"value":1750},"\u003C",{"type":170,"tag":239,"props":1752,"children":1754},{"style":1753},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1755],{"type":175,"value":1756},"meta",{"type":170,"tag":239,"props":1758,"children":1760},{"style":1759},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1761],{"type":175,"value":1762}," name",{"type":170,"tag":239,"props":1764,"children":1765},{"style":349},[1766],{"type":175,"value":1767},"=",{"type":170,"tag":239,"props":1769,"children":1770},{"style":276},[1771],{"type":175,"value":1772},"\"",{"type":170,"tag":239,"props":1774,"children":1775},{"style":282},[1776],{"type":175,"value":1777},"referrer",{"type":170,"tag":239,"props":1779,"children":1780},{"style":276},[1781],{"type":175,"value":1772},{"type":170,"tag":239,"props":1783,"children":1784},{"style":1759},[1785],{"type":175,"value":1786}," content",{"type":170,"tag":239,"props":1788,"children":1789},{"style":349},[1790],{"type":175,"value":1767},{"type":170,"tag":239,"props":1792,"children":1793},{"style":276},[1794],{"type":175,"value":1772},{"type":170,"tag":239,"props":1796,"children":1797},{"style":282},[1798],{"type":175,"value":1121},{"type":170,"tag":239,"props":1800,"children":1801},{"style":276},[1802],{"type":175,"value":1772},{"type":170,"tag":239,"props":1804,"children":1805},{"style":349},[1806],{"type":175,"value":1807}," />\n",{"type":170,"tag":239,"props":1809,"children":1810},{"class":241,"line":297},[1811,1815,1819,1824,1828,1832,1837,1841,1846,1850,1854,1858,1862,1867,1871],{"type":170,"tag":239,"props":1812,"children":1813},{"style":349},[1814],{"type":175,"value":1750},{"type":170,"tag":239,"props":1816,"children":1817},{"style":1753},[1818],{"type":175,"value":182},{"type":170,"tag":239,"props":1820,"children":1821},{"style":1759},[1822],{"type":175,"value":1823}," href",{"type":170,"tag":239,"props":1825,"children":1826},{"style":349},[1827],{"type":175,"value":1767},{"type":170,"tag":239,"props":1829,"children":1830},{"style":276},[1831],{"type":175,"value":1772},{"type":170,"tag":239,"props":1833,"children":1834},{"style":282},[1835],{"type":175,"value":1836},"http://example.com",{"type":170,"tag":239,"props":1838,"children":1839},{"style":276},[1840],{"type":175,"value":1772},{"type":170,"tag":239,"props":1842,"children":1843},{"style":1759},[1844],{"type":175,"value":1845}," referrerpolicy",{"type":170,"tag":239,"props":1847,"children":1848},{"style":349},[1849],{"type":175,"value":1767},{"type":170,"tag":239,"props":1851,"children":1852},{"style":276},[1853],{"type":175,"value":1772},{"type":170,"tag":239,"props":1855,"children":1856},{"style":282},[1857],{"type":175,"value":1121},{"type":170,"tag":239,"props":1859,"children":1860},{"style":276},[1861],{"type":175,"value":1772},{"type":170,"tag":239,"props":1863,"children":1864},{"style":349},[1865],{"type":175,"value":1866},">\u003C/",{"type":170,"tag":239,"props":1868,"children":1869},{"style":1753},[1870],{"type":175,"value":182},{"type":170,"tag":239,"props":1872,"children":1873},{"style":349},[1874],{"type":175,"value":1875},">\n",{"type":170,"tag":239,"props":1877,"children":1878},{"class":241,"line":306},[1879,1883,1887,1891,1895,1899,1903,1907,1912,1916,1920,1925,1929,1933,1937],{"type":170,"tag":239,"props":1880,"children":1881},{"style":349},[1882],{"type":175,"value":1750},{"type":170,"tag":239,"props":1884,"children":1885},{"style":1753},[1886],{"type":175,"value":182},{"type":170,"tag":239,"props":1888,"children":1889},{"style":1759},[1890],{"type":175,"value":1823},{"type":170,"tag":239,"props":1892,"children":1893},{"style":349},[1894],{"type":175,"value":1767},{"type":170,"tag":239,"props":1896,"children":1897},{"style":276},[1898],{"type":175,"value":1772},{"type":170,"tag":239,"props":1900,"children":1901},{"style":282},[1902],{"type":175,"value":1836},{"type":170,"tag":239,"props":1904,"children":1905},{"style":276},[1906],{"type":175,"value":1772},{"type":170,"tag":239,"props":1908,"children":1909},{"style":1759},[1910],{"type":175,"value":1911}," rel",{"type":170,"tag":239,"props":1913,"children":1914},{"style":349},[1915],{"type":175,"value":1767},{"type":170,"tag":239,"props":1917,"children":1918},{"style":276},[1919],{"type":175,"value":1772},{"type":170,"tag":239,"props":1921,"children":1922},{"style":282},[1923],{"type":175,"value":1924},"noreferrer",{"type":170,"tag":239,"props":1926,"children":1927},{"style":276},[1928],{"type":175,"value":1772},{"type":170,"tag":239,"props":1930,"children":1931},{"style":349},[1932],{"type":175,"value":1866},{"type":170,"tag":239,"props":1934,"children":1935},{"style":1753},[1936],{"type":175,"value":182},{"type":170,"tag":239,"props":1938,"children":1939},{"style":349},[1940],{"type":175,"value":1875},{"type":170,"tag":439,"props":1942,"children":1944},{"id":1943},"强制使用-https",[1945],{"type":175,"value":1946},"强制使用 HTTPS",{"type":170,"tag":171,"props":1948,"children":1949},{},[1950,1952,1958,1960,1971],{"type":175,"value":1951},"通过设置请求头的 ",{"type":170,"tag":235,"props":1953,"children":1955},{"className":1954},[],[1956],{"type":175,"value":1957},"Strict-Transport-Security（STS）",{"type":175,"value":1959},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":170,"tag":178,"props":1961,"children":1962},{},[1963],{"type":170,"tag":182,"props":1964,"children":1968},{"href":1965,"ariaDescribedBy":1966,"dataFootnoteRef":163,"id":1967},"#user-content-fn-timeend",[186],"user-content-fnref-timeend",[1969],{"type":175,"value":1970},"8",{"type":175,"value":749},{"type":170,"tag":171,"props":1973,"children":1974},{},[1975,1977,1983,1985,1991,1993,1999,2001,2007,2009,2014],{"type":175,"value":1976},"这个规范本身很好理解，通过 ",{"type":170,"tag":235,"props":1978,"children":1980},{"className":1979},[],[1981],{"type":175,"value":1982},"max-age",{"type":175,"value":1984}," 可以指定倒计时时间；",{"type":170,"tag":235,"props":1986,"children":1988},{"className":1987},[],[1989],{"type":175,"value":1990},"includesSubDomains",{"type":175,"value":1992}," 指定子域的 ",{"type":170,"tag":235,"props":1994,"children":1996},{"className":1995},[],[1997],{"type":175,"value":1998},"HSTS",{"type":175,"value":2000},"；",{"type":170,"tag":235,"props":2002,"children":2004},{"className":2003},[],[2005],{"type":175,"value":2006},"preload",{"type":175,"value":2008}," 指定预加载内容的 ",{"type":170,"tag":235,"props":2010,"children":2012},{"className":2011},[],[2013],{"type":175,"value":1998},{"type":175,"value":749},{"type":170,"tag":228,"props":2016,"children":2018},{"code":2017},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2019],{"type":170,"tag":235,"props":2020,"children":2021},{"__ignoreMap":163},[2022],{"type":175,"value":2017},{"type":170,"tag":228,"props":2024,"children":2026},{"code":2025,"language":231,"meta":163,"className":232,"style":163},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2027],{"type":170,"tag":235,"props":2028,"children":2029},{"__ignoreMap":163},[2030,2092,2119,2192,2255,2292,2299,2352,2392,2399,2431,2462,2510,2554,2565,2572],{"type":170,"tag":239,"props":2031,"children":2032},{"class":241,"line":242},[2033,2037,2042,2046,2051,2055,2061,2066,2071,2075,2080,2084,2088],{"type":170,"tag":239,"props":2034,"children":2035},{"style":246},[2036],{"type":175,"value":249},{"type":170,"tag":239,"props":2038,"children":2039},{"style":252},[2040],{"type":175,"value":2041}," DEFAULT_MAX_AGE",{"type":170,"tag":239,"props":2043,"children":2044},{"style":258},[2045],{"type":175,"value":261},{"type":170,"tag":239,"props":2047,"children":2048},{"style":264},[2049],{"type":175,"value":2050}," String",{"type":170,"tag":239,"props":2052,"children":2053},{"style":270},[2054],{"type":175,"value":273},{"type":170,"tag":239,"props":2056,"children":2058},{"style":2057},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2059],{"type":175,"value":2060},"180",{"type":170,"tag":239,"props":2062,"children":2063},{"style":258},[2064],{"type":175,"value":2065}," *",{"type":170,"tag":239,"props":2067,"children":2068},{"style":2057},[2069],{"type":175,"value":2070}," 24",{"type":170,"tag":239,"props":2072,"children":2073},{"style":258},[2074],{"type":175,"value":2065},{"type":170,"tag":239,"props":2076,"children":2077},{"style":2057},[2078],{"type":175,"value":2079}," 60",{"type":170,"tag":239,"props":2081,"children":2082},{"style":258},[2083],{"type":175,"value":2065},{"type":170,"tag":239,"props":2085,"children":2086},{"style":2057},[2087],{"type":175,"value":2079},{"type":170,"tag":239,"props":2089,"children":2090},{"style":270},[2091],{"type":175,"value":294},{"type":170,"tag":239,"props":2093,"children":2094},{"class":241,"line":297},[2095,2099,2103,2107,2111,2115],{"type":170,"tag":239,"props":2096,"children":2097},{"style":246},[2098],{"type":175,"value":1285},{"type":170,"tag":239,"props":2100,"children":2101},{"style":264},[2102],{"type":175,"value":1290},{"type":170,"tag":239,"props":2104,"children":2105},{"style":349},[2106],{"type":175,"value":273},{"type":170,"tag":239,"props":2108,"children":2109},{"style":1298},[2110],{"type":175,"value":1538},{"type":170,"tag":239,"props":2112,"children":2113},{"style":349},[2114],{"type":175,"value":1634},{"type":170,"tag":239,"props":2116,"children":2117},{"style":349},[2118],{"type":175,"value":1337},{"type":170,"tag":239,"props":2120,"children":2121},{"class":241,"line":306},[2122,2126,2131,2135,2139,2144,2149,2155,2159,2164,2169,2174,2178,2183,2187],{"type":170,"tag":239,"props":2123,"children":2124},{"style":246},[2125],{"type":175,"value":1346},{"type":170,"tag":239,"props":2127,"children":2128},{"style":252},[2129],{"type":175,"value":2130}," directives",{"type":170,"tag":239,"props":2132,"children":2133},{"style":258},[2134],{"type":175,"value":261},{"type":170,"tag":239,"props":2136,"children":2137},{"style":1390},[2138],{"type":175,"value":1310},{"type":170,"tag":239,"props":2140,"children":2141},{"style":276},[2142],{"type":175,"value":2143},"`",{"type":170,"tag":239,"props":2145,"children":2146},{"style":282},[2147],{"type":175,"value":2148},"max-age=",{"type":170,"tag":239,"props":2150,"children":2152},{"style":2151},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2153],{"type":175,"value":2154},"${",{"type":170,"tag":239,"props":2156,"children":2157},{"style":270},[2158],{"type":175,"value":1538},{"type":170,"tag":239,"props":2160,"children":2162},{"style":2161},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2163],{"type":175,"value":352},{"type":170,"tag":239,"props":2165,"children":2166},{"style":270},[2167],{"type":175,"value":2168},"maxAge",{"type":170,"tag":239,"props":2170,"children":2171},{"style":258},[2172],{"type":175,"value":2173}," ||",{"type":170,"tag":239,"props":2175,"children":2176},{"style":252},[2177],{"type":175,"value":2041},{"type":170,"tag":239,"props":2179,"children":2180},{"style":2151},[2181],{"type":175,"value":2182},"}",{"type":170,"tag":239,"props":2184,"children":2185},{"style":276},[2186],{"type":175,"value":2143},{"type":170,"tag":239,"props":2188,"children":2189},{"style":1390},[2190],{"type":175,"value":2191},"]\n",{"type":170,"tag":239,"props":2193,"children":2194},{"class":241,"line":332},[2195,2200,2205,2209,2213,2218,2222,2228,2232,2237,2241,2245,2250],{"type":170,"tag":239,"props":2196,"children":2197},{"style":1471},[2198],{"type":175,"value":2199},"  if",{"type":170,"tag":239,"props":2201,"children":2202},{"style":1390},[2203],{"type":175,"value":2204}," (",{"type":170,"tag":239,"props":2206,"children":2207},{"style":270},[2208],{"type":175,"value":1538},{"type":170,"tag":239,"props":2210,"children":2211},{"style":349},[2212],{"type":175,"value":352},{"type":170,"tag":239,"props":2214,"children":2215},{"style":270},[2216],{"type":175,"value":2217},"includeSubDomains",{"type":170,"tag":239,"props":2219,"children":2220},{"style":258},[2221],{"type":175,"value":1369},{"type":170,"tag":239,"props":2223,"children":2225},{"style":2224},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2226],{"type":175,"value":2227}," undefined",{"type":170,"tag":239,"props":2229,"children":2230},{"style":258},[2231],{"type":175,"value":2173},{"type":170,"tag":239,"props":2233,"children":2234},{"style":270},[2235],{"type":175,"value":2236}," options",{"type":170,"tag":239,"props":2238,"children":2239},{"style":349},[2240],{"type":175,"value":352},{"type":170,"tag":239,"props":2242,"children":2243},{"style":270},[2244],{"type":175,"value":2217},{"type":170,"tag":239,"props":2246,"children":2247},{"style":1390},[2248],{"type":175,"value":2249},") ",{"type":170,"tag":239,"props":2251,"children":2252},{"style":349},[2253],{"type":175,"value":2254},"{\n",{"type":170,"tag":239,"props":2256,"children":2257},{"class":241,"line":340},[2258,2263,2267,2272,2276,2280,2284,2288],{"type":170,"tag":239,"props":2259,"children":2260},{"style":270},[2261],{"type":175,"value":2262},"    directives",{"type":170,"tag":239,"props":2264,"children":2265},{"style":349},[2266],{"type":175,"value":352},{"type":170,"tag":239,"props":2268,"children":2269},{"style":264},[2270],{"type":175,"value":2271},"push",{"type":170,"tag":239,"props":2273,"children":2274},{"style":1390},[2275],{"type":175,"value":273},{"type":170,"tag":239,"props":2277,"children":2278},{"style":276},[2279],{"type":175,"value":279},{"type":170,"tag":239,"props":2281,"children":2282},{"style":282},[2283],{"type":175,"value":2217},{"type":170,"tag":239,"props":2285,"children":2286},{"style":276},[2287],{"type":175,"value":279},{"type":170,"tag":239,"props":2289,"children":2290},{"style":1390},[2291],{"type":175,"value":294},{"type":170,"tag":239,"props":2293,"children":2294},{"class":241,"line":1072},[2295],{"type":170,"tag":239,"props":2296,"children":2297},{"style":349},[2298],{"type":175,"value":1705},{"type":170,"tag":239,"props":2300,"children":2301},{"class":241,"line":1081},[2302,2307,2311,2315,2320,2324,2328,2332,2336,2340,2344,2348],{"type":170,"tag":239,"props":2303,"children":2304},{"style":270},[2305],{"type":175,"value":2306},"  options",{"type":170,"tag":239,"props":2308,"children":2309},{"style":349},[2310],{"type":175,"value":352},{"type":170,"tag":239,"props":2312,"children":2313},{"style":270},[2314],{"type":175,"value":2006},{"type":170,"tag":239,"props":2316,"children":2317},{"style":258},[2318],{"type":175,"value":2319}," &&",{"type":170,"tag":239,"props":2321,"children":2322},{"style":270},[2323],{"type":175,"value":2130},{"type":170,"tag":239,"props":2325,"children":2326},{"style":349},[2327],{"type":175,"value":352},{"type":170,"tag":239,"props":2329,"children":2330},{"style":264},[2331],{"type":175,"value":2271},{"type":170,"tag":239,"props":2333,"children":2334},{"style":1390},[2335],{"type":175,"value":273},{"type":170,"tag":239,"props":2337,"children":2338},{"style":276},[2339],{"type":175,"value":279},{"type":170,"tag":239,"props":2341,"children":2342},{"style":282},[2343],{"type":175,"value":2006},{"type":170,"tag":239,"props":2345,"children":2346},{"style":276},[2347],{"type":175,"value":279},{"type":170,"tag":239,"props":2349,"children":2350},{"style":1390},[2351],{"type":175,"value":294},{"type":170,"tag":239,"props":2353,"children":2354},{"class":241,"line":1102},[2355,2359,2363,2367,2371,2375,2379,2384,2388],{"type":170,"tag":239,"props":2356,"children":2357},{"style":1471},[2358],{"type":175,"value":1474},{"type":170,"tag":239,"props":2360,"children":2361},{"style":270},[2362],{"type":175,"value":2130},{"type":170,"tag":239,"props":2364,"children":2365},{"style":349},[2366],{"type":175,"value":352},{"type":170,"tag":239,"props":2368,"children":2369},{"style":264},[2370],{"type":175,"value":1487},{"type":170,"tag":239,"props":2372,"children":2373},{"style":1390},[2374],{"type":175,"value":273},{"type":170,"tag":239,"props":2376,"children":2377},{"style":276},[2378],{"type":175,"value":279},{"type":170,"tag":239,"props":2380,"children":2381},{"style":282},[2382],{"type":175,"value":2383},"; ",{"type":170,"tag":239,"props":2385,"children":2386},{"style":276},[2387],{"type":175,"value":279},{"type":170,"tag":239,"props":2389,"children":2390},{"style":1390},[2391],{"type":175,"value":294},{"type":170,"tag":239,"props":2393,"children":2394},{"class":241,"line":1111},[2395],{"type":170,"tag":239,"props":2396,"children":2397},{"style":349},[2398],{"type":175,"value":1516},{"type":170,"tag":239,"props":2400,"children":2401},{"class":241,"line":1132},[2402,2406,2411,2415,2419,2423,2427],{"type":170,"tag":239,"props":2403,"children":2404},{"style":246},[2405],{"type":175,"value":1285},{"type":170,"tag":239,"props":2407,"children":2408},{"style":264},[2409],{"type":175,"value":2410}," strictTransportSecurity",{"type":170,"tag":239,"props":2412,"children":2413},{"style":349},[2414],{"type":175,"value":273},{"type":170,"tag":239,"props":2416,"children":2417},{"style":1298},[2418],{"type":175,"value":1538},{"type":170,"tag":239,"props":2420,"children":2421},{"style":258},[2422],{"type":175,"value":261},{"type":170,"tag":239,"props":2424,"children":2425},{"style":349},[2426],{"type":175,"value":1547},{"type":170,"tag":239,"props":2428,"children":2429},{"style":349},[2430],{"type":175,"value":1337},{"type":170,"tag":239,"props":2432,"children":2433},{"class":241,"line":1141},[2434,2438,2442,2446,2450,2454,2458],{"type":170,"tag":239,"props":2435,"children":2436},{"style":246},[2437],{"type":175,"value":1346},{"type":170,"tag":239,"props":2439,"children":2440},{"style":252},[2441],{"type":175,"value":1564},{"type":170,"tag":239,"props":2443,"children":2444},{"style":258},[2445],{"type":175,"value":261},{"type":170,"tag":239,"props":2447,"children":2448},{"style":264},[2449],{"type":175,"value":1290},{"type":170,"tag":239,"props":2451,"children":2452},{"style":1390},[2453],{"type":175,"value":273},{"type":170,"tag":239,"props":2455,"children":2456},{"style":270},[2457],{"type":175,"value":1538},{"type":170,"tag":239,"props":2459,"children":2460},{"style":1390},[2461],{"type":175,"value":294},{"type":170,"tag":239,"props":2463,"children":2464},{"class":241,"line":1162},[2465,2469,2473,2478,2482,2486,2490,2494,2498,2502,2506],{"type":170,"tag":239,"props":2466,"children":2467},{"style":1471},[2468],{"type":175,"value":1474},{"type":170,"tag":239,"props":2470,"children":2471},{"style":246},[2472],{"type":175,"value":1597},{"type":170,"tag":239,"props":2474,"children":2475},{"style":264},[2476],{"type":175,"value":2477}," strictTransportSecurityMiddleware",{"type":170,"tag":239,"props":2479,"children":2480},{"style":349},[2481],{"type":175,"value":273},{"type":170,"tag":239,"props":2483,"children":2484},{"style":1298},[2485],{"type":175,"value":1611},{"type":170,"tag":239,"props":2487,"children":2488},{"style":349},[2489],{"type":175,"value":564},{"type":170,"tag":239,"props":2491,"children":2492},{"style":1298},[2493],{"type":175,"value":1620},{"type":170,"tag":239,"props":2495,"children":2496},{"style":349},[2497],{"type":175,"value":564},{"type":170,"tag":239,"props":2499,"children":2500},{"style":1298},[2501],{"type":175,"value":1629},{"type":170,"tag":239,"props":2503,"children":2504},{"style":349},[2505],{"type":175,"value":1634},{"type":170,"tag":239,"props":2507,"children":2508},{"style":349},[2509],{"type":175,"value":1337},{"type":170,"tag":239,"props":2511,"children":2512},{"class":241,"line":1171},[2513,2517,2521,2525,2529,2533,2538,2542,2546,2550],{"type":170,"tag":239,"props":2514,"children":2515},{"style":270},[2516],{"type":175,"value":1647},{"type":170,"tag":239,"props":2518,"children":2519},{"style":349},[2520],{"type":175,"value":352},{"type":170,"tag":239,"props":2522,"children":2523},{"style":264},[2524],{"type":175,"value":542},{"type":170,"tag":239,"props":2526,"children":2527},{"style":1390},[2528],{"type":175,"value":273},{"type":170,"tag":239,"props":2530,"children":2531},{"style":276},[2532],{"type":175,"value":279},{"type":170,"tag":239,"props":2534,"children":2535},{"style":282},[2536],{"type":175,"value":2537},"Strict-Transport-Security",{"type":170,"tag":239,"props":2539,"children":2540},{"style":276},[2541],{"type":175,"value":279},{"type":170,"tag":239,"props":2543,"children":2544},{"style":349},[2545],{"type":175,"value":564},{"type":170,"tag":239,"props":2547,"children":2548},{"style":270},[2549],{"type":175,"value":1564},{"type":170,"tag":239,"props":2551,"children":2552},{"style":1390},[2553],{"type":175,"value":294},{"type":170,"tag":239,"props":2555,"children":2556},{"class":241,"line":1192},[2557,2561],{"type":170,"tag":239,"props":2558,"children":2559},{"style":264},[2560],{"type":175,"value":1692},{"type":170,"tag":239,"props":2562,"children":2563},{"style":1390},[2564],{"type":175,"value":329},{"type":170,"tag":239,"props":2566,"children":2567},{"class":241,"line":1201},[2568],{"type":170,"tag":239,"props":2569,"children":2570},{"style":349},[2571],{"type":175,"value":1705},{"type":170,"tag":239,"props":2573,"children":2574},{"class":241,"line":1222},[2575],{"type":170,"tag":239,"props":2576,"children":2577},{"style":349},[2578],{"type":175,"value":1516},{"type":170,"tag":439,"props":2580,"children":2582},{"id":2581},"可选用证书透明性策略",[2583],{"type":175,"value":2581},{"type":170,"tag":228,"props":2585,"children":2587},{"code":2586,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('Expect-CT' /* someValue */)\n",[2588],{"type":170,"tag":235,"props":2589,"children":2590},{"__ignoreMap":163},[2591],{"type":170,"tag":239,"props":2592,"children":2593},{"class":241,"line":242},[2594,2598,2602,2606,2610,2614,2619,2623,2628],{"type":170,"tag":239,"props":2595,"children":2596},{"style":270},[2597],{"type":175,"value":459},{"type":170,"tag":239,"props":2599,"children":2600},{"style":349},[2601],{"type":175,"value":352},{"type":170,"tag":239,"props":2603,"children":2604},{"style":264},[2605],{"type":175,"value":542},{"type":170,"tag":239,"props":2607,"children":2608},{"style":270},[2609],{"type":175,"value":273},{"type":170,"tag":239,"props":2611,"children":2612},{"style":276},[2613],{"type":175,"value":279},{"type":170,"tag":239,"props":2615,"children":2616},{"style":282},[2617],{"type":175,"value":2618},"Expect-CT",{"type":170,"tag":239,"props":2620,"children":2621},{"style":276},[2622],{"type":175,"value":279},{"type":170,"tag":239,"props":2624,"children":2625},{"style":1016},[2626],{"type":175,"value":2627}," /* someValue */",{"type":170,"tag":239,"props":2629,"children":2630},{"style":270},[2631],{"type":175,"value":294},{"type":170,"tag":171,"props":2633,"children":2634},{},[2635,2640,2642,2653,2655,2666],{"type":170,"tag":235,"props":2636,"children":2638},{"className":2637},[],[2639],{"type":175,"value":2618},{"type":175,"value":2641}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略 ",{"type":170,"tag":178,"props":2643,"children":2644},{},[2645],{"type":170,"tag":182,"props":2646,"children":2650},{"href":2647,"ariaDescribedBy":2648,"dataFootnoteRef":163,"id":2649},"#user-content-fn-chrome-ct",[186],"user-content-fnref-chrome-ct",[2651],{"type":175,"value":2652},"9",{"type":175,"value":2654},"），避免中间人攻击 ",{"type":170,"tag":178,"props":2656,"children":2657},{},[2658],{"type":170,"tag":182,"props":2659,"children":2663},{"href":2660,"ariaDescribedBy":2661,"dataFootnoteRef":163,"id":2662},"#user-content-fn-ct",[186],"user-content-fnref-ct",[2664],{"type":175,"value":2665},"10",{"type":175,"value":2667},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":170,"tag":228,"props":2669,"children":2671},{"code":2670},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2672],{"type":170,"tag":235,"props":2673,"children":2674},{"__ignoreMap":163},[2675],{"type":175,"value":2670},{"type":170,"tag":171,"props":2677,"children":2678},{},[2679,2681,2686],{"type":175,"value":2680},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":170,"tag":235,"props":2682,"children":2684},{"className":2683},[],[2685],{"type":175,"value":2618},{"type":175,"value":2687}," 就作不上用咯。.. TODO",{"type":170,"tag":439,"props":2689,"children":2691},{"id":2690},"拒绝来自-pdfflash-的跨域请求",[2692],{"type":175,"value":2693},"拒绝来自 PDF、Flash 的跨域请求",{"type":170,"tag":171,"props":2695,"children":2696},{},[2697,2703,2705,2716],{"type":170,"tag":235,"props":2698,"children":2700},{"className":2699},[],[2701],{"type":175,"value":2702},"X-Permitted-Cross-Domain-Policies",{"type":175,"value":2704}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例 ",{"type":170,"tag":178,"props":2706,"children":2707},{},[2708],{"type":170,"tag":182,"props":2709,"children":2713},{"href":2710,"ariaDescribedBy":2711,"dataFootnoteRef":163,"id":2712},"#user-content-fn-pdf-reader",[186],"user-content-fnref-pdf-reader",[2714],{"type":175,"value":2715},"11",{"type":175,"value":2717},"：",{"type":170,"tag":171,"props":2719,"children":2720},{},[2721],{"type":170,"tag":899,"props":2722,"children":2724},{"alt":2702,"src":2723},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":170,"tag":2726,"props":2727,"children":2728},"ol",{},[2729,2735],{"type":170,"tag":2730,"props":2731,"children":2732},"li",{},[2733],{"type":175,"value":2734},"用户在 A 网站打开了某个 PDF；",{"type":170,"tag":2730,"props":2736,"children":2737},{},[2738,2740,2746],{"type":175,"value":2739},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":170,"tag":235,"props":2741,"children":2743},{"className":2742},[],[2744],{"type":175,"value":2745},"crossdomain.xml",{"type":175,"value":2747}," 文件（策略文件）作为跨域策略应对方案。",{"type":170,"tag":171,"props":2749,"children":2750},{},[2751],{"type":175,"value":2752},"一个策略文件可能长这样：",{"type":170,"tag":228,"props":2754,"children":2756},{"code":2755,"language":1737,"meta":163,"className":1738,"style":163},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2757],{"type":170,"tag":235,"props":2758,"children":2759},{"__ignoreMap":163},[2760,2768,2784,2823,2859,2895,2931,2967],{"type":170,"tag":239,"props":2761,"children":2762},{"class":241,"line":242},[2763],{"type":170,"tag":239,"props":2764,"children":2765},{"style":1016},[2766],{"type":175,"value":2767},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":170,"tag":239,"props":2769,"children":2770},{"class":241,"line":297},[2771,2775,2780],{"type":170,"tag":239,"props":2772,"children":2773},{"style":349},[2774],{"type":175,"value":1750},{"type":170,"tag":239,"props":2776,"children":2777},{"style":1753},[2778],{"type":175,"value":2779},"cross-domain-policy",{"type":170,"tag":239,"props":2781,"children":2782},{"style":349},[2783],{"type":175,"value":1875},{"type":170,"tag":239,"props":2785,"children":2786},{"class":241,"line":306},[2787,2792,2797,2802,2806,2810,2815,2819],{"type":170,"tag":239,"props":2788,"children":2789},{"style":349},[2790],{"type":175,"value":2791},"  \u003C",{"type":170,"tag":239,"props":2793,"children":2794},{"style":1753},[2795],{"type":175,"value":2796},"allow-access-from",{"type":170,"tag":239,"props":2798,"children":2799},{"style":1759},[2800],{"type":175,"value":2801}," domain",{"type":170,"tag":239,"props":2803,"children":2804},{"style":349},[2805],{"type":175,"value":1767},{"type":170,"tag":239,"props":2807,"children":2808},{"style":276},[2809],{"type":175,"value":1772},{"type":170,"tag":239,"props":2811,"children":2812},{"style":282},[2813],{"type":175,"value":2814},"*.taobao.com",{"type":170,"tag":239,"props":2816,"children":2817},{"style":276},[2818],{"type":175,"value":1772},{"type":170,"tag":239,"props":2820,"children":2821},{"style":349},[2822],{"type":175,"value":1807},{"type":170,"tag":239,"props":2824,"children":2825},{"class":241,"line":332},[2826,2830,2834,2838,2842,2846,2851,2855],{"type":170,"tag":239,"props":2827,"children":2828},{"style":349},[2829],{"type":175,"value":2791},{"type":170,"tag":239,"props":2831,"children":2832},{"style":1753},[2833],{"type":175,"value":2796},{"type":170,"tag":239,"props":2835,"children":2836},{"style":1759},[2837],{"type":175,"value":2801},{"type":170,"tag":239,"props":2839,"children":2840},{"style":349},[2841],{"type":175,"value":1767},{"type":170,"tag":239,"props":2843,"children":2844},{"style":276},[2845],{"type":175,"value":1772},{"type":170,"tag":239,"props":2847,"children":2848},{"style":282},[2849],{"type":175,"value":2850},"*.taobao.net",{"type":170,"tag":239,"props":2852,"children":2853},{"style":276},[2854],{"type":175,"value":1772},{"type":170,"tag":239,"props":2856,"children":2857},{"style":349},[2858],{"type":175,"value":1807},{"type":170,"tag":239,"props":2860,"children":2861},{"class":241,"line":340},[2862,2866,2870,2874,2878,2882,2887,2891],{"type":170,"tag":239,"props":2863,"children":2864},{"style":349},[2865],{"type":175,"value":2791},{"type":170,"tag":239,"props":2867,"children":2868},{"style":1753},[2869],{"type":175,"value":2796},{"type":170,"tag":239,"props":2871,"children":2872},{"style":1759},[2873],{"type":175,"value":2801},{"type":170,"tag":239,"props":2875,"children":2876},{"style":349},[2877],{"type":175,"value":1767},{"type":170,"tag":239,"props":2879,"children":2880},{"style":276},[2881],{"type":175,"value":1772},{"type":170,"tag":239,"props":2883,"children":2884},{"style":282},[2885],{"type":175,"value":2886},"*.taobaocdn.com",{"type":170,"tag":239,"props":2888,"children":2889},{"style":276},[2890],{"type":175,"value":1772},{"type":170,"tag":239,"props":2892,"children":2893},{"style":349},[2894],{"type":175,"value":1807},{"type":170,"tag":239,"props":2896,"children":2897},{"class":241,"line":1072},[2898,2902,2906,2910,2914,2918,2923,2927],{"type":170,"tag":239,"props":2899,"children":2900},{"style":349},[2901],{"type":175,"value":2791},{"type":170,"tag":239,"props":2903,"children":2904},{"style":1753},[2905],{"type":175,"value":2796},{"type":170,"tag":239,"props":2907,"children":2908},{"style":1759},[2909],{"type":175,"value":2801},{"type":170,"tag":239,"props":2911,"children":2912},{"style":349},[2913],{"type":175,"value":1767},{"type":170,"tag":239,"props":2915,"children":2916},{"style":276},[2917],{"type":175,"value":1772},{"type":170,"tag":239,"props":2919,"children":2920},{"style":282},[2921],{"type":175,"value":2922},"*.tbcdn.cn",{"type":170,"tag":239,"props":2924,"children":2925},{"style":276},[2926],{"type":175,"value":1772},{"type":170,"tag":239,"props":2928,"children":2929},{"style":349},[2930],{"type":175,"value":1807},{"type":170,"tag":239,"props":2932,"children":2933},{"class":241,"line":1081},[2934,2938,2942,2946,2950,2954,2959,2963],{"type":170,"tag":239,"props":2935,"children":2936},{"style":349},[2937],{"type":175,"value":2791},{"type":170,"tag":239,"props":2939,"children":2940},{"style":1753},[2941],{"type":175,"value":2796},{"type":170,"tag":239,"props":2943,"children":2944},{"style":1759},[2945],{"type":175,"value":2801},{"type":170,"tag":239,"props":2947,"children":2948},{"style":349},[2949],{"type":175,"value":1767},{"type":170,"tag":239,"props":2951,"children":2952},{"style":276},[2953],{"type":175,"value":1772},{"type":170,"tag":239,"props":2955,"children":2956},{"style":282},[2957],{"type":175,"value":2958},"*.alicdn.com",{"type":170,"tag":239,"props":2960,"children":2961},{"style":276},[2962],{"type":175,"value":1772},{"type":170,"tag":239,"props":2964,"children":2965},{"style":349},[2966],{"type":175,"value":1807},{"type":170,"tag":239,"props":2968,"children":2969},{"class":241,"line":1102},[2970,2975,2979],{"type":170,"tag":239,"props":2971,"children":2972},{"style":349},[2973],{"type":175,"value":2974},"\u003C/",{"type":170,"tag":239,"props":2976,"children":2977},{"style":1753},[2978],{"type":175,"value":2779},{"type":170,"tag":239,"props":2980,"children":2981},{"style":349},[2982],{"type":175,"value":1875},{"type":170,"tag":171,"props":2984,"children":2985},{},[2986,2988,2993,2995,3000],{"type":175,"value":2987},"其中，若请求响应头包含了 ",{"type":170,"tag":235,"props":2989,"children":2991},{"className":2990},[],[2992],{"type":175,"value":2702},{"type":175,"value":2994},"，便可指定浏览器针对 ",{"type":170,"tag":235,"props":2996,"children":2998},{"className":2997},[],[2999],{"type":175,"value":2745},{"type":175,"value":3001}," 的应对行为。",{"type":170,"tag":228,"props":3003,"children":3005},{"code":3004,"language":231,"meta":163,"className":232,"style":163},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3006],{"type":170,"tag":235,"props":3007,"children":3008},{"__ignoreMap":163},[3009,3037,3045,3065,3073,3093,3101,3121,3129,3146,3153,3198,3246,3289,3300,3307],{"type":170,"tag":239,"props":3010,"children":3011},{"class":241,"line":242},[3012,3016,3021,3025,3029,3033],{"type":170,"tag":239,"props":3013,"children":3014},{"style":246},[3015],{"type":175,"value":249},{"type":170,"tag":239,"props":3017,"children":3018},{"style":252},[3019],{"type":175,"value":3020}," ALLOWED_PERMITTED_POLICIES",{"type":170,"tag":239,"props":3022,"children":3023},{"style":258},[3024],{"type":175,"value":261},{"type":170,"tag":239,"props":3026,"children":3027},{"style":258},[3028],{"type":175,"value":1000},{"type":170,"tag":239,"props":3030,"children":3031},{"style":264},[3032],{"type":175,"value":1005},{"type":170,"tag":239,"props":3034,"children":3035},{"style":270},[3036],{"type":175,"value":1010},{"type":170,"tag":239,"props":3038,"children":3039},{"class":241,"line":297},[3040],{"type":170,"tag":239,"props":3041,"children":3042},{"style":1016},[3043],{"type":175,"value":3044},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":170,"tag":239,"props":3046,"children":3047},{"class":241,"line":306},[3048,3052,3057,3061],{"type":170,"tag":239,"props":3049,"children":3050},{"style":276},[3051],{"type":175,"value":1027},{"type":170,"tag":239,"props":3053,"children":3054},{"style":282},[3055],{"type":175,"value":3056},"master-only",{"type":170,"tag":239,"props":3058,"children":3059},{"style":276},[3060],{"type":175,"value":279},{"type":170,"tag":239,"props":3062,"children":3063},{"style":349},[3064],{"type":175,"value":1041},{"type":170,"tag":239,"props":3066,"children":3067},{"class":241,"line":332},[3068],{"type":170,"tag":239,"props":3069,"children":3070},{"style":1016},[3071],{"type":175,"value":3072},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":170,"tag":239,"props":3074,"children":3075},{"class":241,"line":340},[3076,3080,3085,3089],{"type":170,"tag":239,"props":3077,"children":3078},{"style":276},[3079],{"type":175,"value":1027},{"type":170,"tag":239,"props":3081,"children":3082},{"style":282},[3083],{"type":175,"value":3084},"by-content-type",{"type":170,"tag":239,"props":3086,"children":3087},{"style":276},[3088],{"type":175,"value":279},{"type":170,"tag":239,"props":3090,"children":3091},{"style":349},[3092],{"type":175,"value":1041},{"type":170,"tag":239,"props":3094,"children":3095},{"class":241,"line":1072},[3096],{"type":170,"tag":239,"props":3097,"children":3098},{"style":1016},[3099],{"type":175,"value":3100},"  // 不使用任何位置的 crossdomain.xml\n",{"type":170,"tag":239,"props":3102,"children":3103},{"class":241,"line":1081},[3104,3108,3113,3117],{"type":170,"tag":239,"props":3105,"children":3106},{"style":276},[3107],{"type":175,"value":1027},{"type":170,"tag":239,"props":3109,"children":3110},{"style":282},[3111],{"type":175,"value":3112},"none",{"type":170,"tag":239,"props":3114,"children":3115},{"style":276},[3116],{"type":175,"value":279},{"type":170,"tag":239,"props":3118,"children":3119},{"style":349},[3120],{"type":175,"value":1041},{"type":170,"tag":239,"props":3122,"children":3123},{"class":241,"line":1102},[3124],{"type":170,"tag":239,"props":3125,"children":3126},{"style":1016},[3127],{"type":175,"value":3128},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":170,"tag":239,"props":3130,"children":3131},{"class":241,"line":1111},[3132,3136,3141],{"type":170,"tag":239,"props":3133,"children":3134},{"style":276},[3135],{"type":175,"value":1027},{"type":170,"tag":239,"props":3137,"children":3138},{"style":282},[3139],{"type":175,"value":3140},"all",{"type":170,"tag":239,"props":3142,"children":3143},{"style":276},[3144],{"type":175,"value":3145},"'\n",{"type":170,"tag":239,"props":3147,"children":3148},{"class":241,"line":1132},[3149],{"type":170,"tag":239,"props":3150,"children":3151},{"style":270},[3152],{"type":175,"value":1276},{"type":170,"tag":239,"props":3154,"children":3155},{"class":241,"line":1141},[3156,3160,3165,3169,3174,3178,3182,3186,3190,3194],{"type":170,"tag":239,"props":3157,"children":3158},{"style":246},[3159],{"type":175,"value":1285},{"type":170,"tag":239,"props":3161,"children":3162},{"style":264},[3163],{"type":175,"value":3164}," xPermittedCrossDomainPolicies",{"type":170,"tag":239,"props":3166,"children":3167},{"style":349},[3168],{"type":175,"value":273},{"type":170,"tag":239,"props":3170,"children":3171},{"style":1298},[3172],{"type":175,"value":3173},"headerValue",{"type":170,"tag":239,"props":3175,"children":3176},{"style":258},[3177],{"type":175,"value":261},{"type":170,"tag":239,"props":3179,"children":3180},{"style":276},[3181],{"type":175,"value":569},{"type":170,"tag":239,"props":3183,"children":3184},{"style":282},[3185],{"type":175,"value":3112},{"type":170,"tag":239,"props":3187,"children":3188},{"style":276},[3189],{"type":175,"value":279},{"type":170,"tag":239,"props":3191,"children":3192},{"style":349},[3193],{"type":175,"value":1634},{"type":170,"tag":239,"props":3195,"children":3196},{"style":349},[3197],{"type":175,"value":1337},{"type":170,"tag":239,"props":3199,"children":3200},{"class":241,"line":1162},[3201,3205,3209,3214,3218,3222,3226,3230,3234,3238,3242],{"type":170,"tag":239,"props":3202,"children":3203},{"style":1471},[3204],{"type":175,"value":1474},{"type":170,"tag":239,"props":3206,"children":3207},{"style":246},[3208],{"type":175,"value":1597},{"type":170,"tag":239,"props":3210,"children":3211},{"style":264},[3212],{"type":175,"value":3213}," xPermittedCrossDomainPoliciesMiddleware",{"type":170,"tag":239,"props":3215,"children":3216},{"style":349},[3217],{"type":175,"value":273},{"type":170,"tag":239,"props":3219,"children":3220},{"style":1298},[3221],{"type":175,"value":1611},{"type":170,"tag":239,"props":3223,"children":3224},{"style":349},[3225],{"type":175,"value":564},{"type":170,"tag":239,"props":3227,"children":3228},{"style":1298},[3229],{"type":175,"value":1620},{"type":170,"tag":239,"props":3231,"children":3232},{"style":349},[3233],{"type":175,"value":564},{"type":170,"tag":239,"props":3235,"children":3236},{"style":1298},[3237],{"type":175,"value":1629},{"type":170,"tag":239,"props":3239,"children":3240},{"style":349},[3241],{"type":175,"value":1634},{"type":170,"tag":239,"props":3243,"children":3244},{"style":349},[3245],{"type":175,"value":1337},{"type":170,"tag":239,"props":3247,"children":3248},{"class":241,"line":1171},[3249,3253,3257,3261,3265,3269,3273,3277,3281,3285],{"type":170,"tag":239,"props":3250,"children":3251},{"style":270},[3252],{"type":175,"value":1647},{"type":170,"tag":239,"props":3254,"children":3255},{"style":349},[3256],{"type":175,"value":352},{"type":170,"tag":239,"props":3258,"children":3259},{"style":264},[3260],{"type":175,"value":542},{"type":170,"tag":239,"props":3262,"children":3263},{"style":1390},[3264],{"type":175,"value":273},{"type":170,"tag":239,"props":3266,"children":3267},{"style":276},[3268],{"type":175,"value":279},{"type":170,"tag":239,"props":3270,"children":3271},{"style":282},[3272],{"type":175,"value":2702},{"type":170,"tag":239,"props":3274,"children":3275},{"style":276},[3276],{"type":175,"value":279},{"type":170,"tag":239,"props":3278,"children":3279},{"style":349},[3280],{"type":175,"value":564},{"type":170,"tag":239,"props":3282,"children":3283},{"style":270},[3284],{"type":175,"value":1564},{"type":170,"tag":239,"props":3286,"children":3287},{"style":1390},[3288],{"type":175,"value":294},{"type":170,"tag":239,"props":3290,"children":3291},{"class":241,"line":1192},[3292,3296],{"type":170,"tag":239,"props":3293,"children":3294},{"style":264},[3295],{"type":175,"value":1692},{"type":170,"tag":239,"props":3297,"children":3298},{"style":1390},[3299],{"type":175,"value":329},{"type":170,"tag":239,"props":3301,"children":3302},{"class":241,"line":1201},[3303],{"type":170,"tag":239,"props":3304,"children":3305},{"style":349},[3306],{"type":175,"value":1705},{"type":170,"tag":239,"props":3308,"children":3309},{"class":241,"line":1222},[3310],{"type":170,"tag":239,"props":3311,"children":3312},{"style":349},[3313],{"type":175,"value":1516},{"type":170,"tag":171,"props":3315,"children":3316},{},[3317],{"type":175,"value":3318},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":170,"tag":439,"props":3320,"children":3322},{"id":3321},"开启-csp",[3323],{"type":175,"value":3324},"开启 CSP",{"type":170,"tag":171,"props":3326,"children":3327},{},[3328,3330,3335,3337,3342,3344,3349,3351,3362],{"type":175,"value":3329},"还记得刚才提到 Chrome 关闭了 ",{"type":170,"tag":235,"props":3331,"children":3333},{"className":3332},[],[3334],{"type":175,"value":692},{"type":175,"value":3336}," 吗？既然不再使用 ",{"type":170,"tag":235,"props":3338,"children":3340},{"className":3339},[],[3341],{"type":175,"value":692},{"type":175,"value":3343},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":170,"tag":235,"props":3345,"children":3347},{"className":3346},[],[3348],{"type":175,"value":720},{"type":175,"value":3350}," 标准 ",{"type":170,"tag":178,"props":3352,"children":3353},{},[3354],{"type":170,"tag":182,"props":3355,"children":3359},{"href":3356,"ariaDescribedBy":3357,"dataFootnoteRef":163,"id":3358},"#user-content-fn-csp-standard",[186],"user-content-fnref-csp-standard",[3360],{"type":175,"value":3361},"12",{"type":175,"value":3363},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":170,"tag":171,"props":3365,"children":3366},{},[3367,3372],{"type":170,"tag":235,"props":3368,"children":3370},{"className":3369},[],[3371],{"type":175,"value":720},{"type":175,"value":3373}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":170,"tag":228,"props":3375,"children":3377},{"code":3376,"language":1737,"meta":163,"className":1738,"style":163},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3378],{"type":170,"tag":235,"props":3379,"children":3380},{"__ignoreMap":163},[3381],{"type":170,"tag":239,"props":3382,"children":3383},{"class":241,"line":242},[3384,3388,3392,3397,3401,3405,3410,3414,3418,3422,3426,3431,3435],{"type":170,"tag":239,"props":3385,"children":3386},{"style":349},[3387],{"type":175,"value":1750},{"type":170,"tag":239,"props":3389,"children":3390},{"style":1753},[3391],{"type":175,"value":1756},{"type":170,"tag":239,"props":3393,"children":3394},{"style":1759},[3395],{"type":175,"value":3396}," http-equiv",{"type":170,"tag":239,"props":3398,"children":3399},{"style":349},[3400],{"type":175,"value":1767},{"type":170,"tag":239,"props":3402,"children":3403},{"style":276},[3404],{"type":175,"value":1772},{"type":170,"tag":239,"props":3406,"children":3407},{"style":282},[3408],{"type":175,"value":3409},"Content-Security-Policy",{"type":170,"tag":239,"props":3411,"children":3412},{"style":276},[3413],{"type":175,"value":1772},{"type":170,"tag":239,"props":3415,"children":3416},{"style":1759},[3417],{"type":175,"value":1786},{"type":170,"tag":239,"props":3419,"children":3420},{"style":349},[3421],{"type":175,"value":1767},{"type":170,"tag":239,"props":3423,"children":3424},{"style":276},[3425],{"type":175,"value":1772},{"type":170,"tag":239,"props":3427,"children":3428},{"style":282},[3429],{"type":175,"value":3430},"default-src 'self'; img-src https://*; child-src 'none';",{"type":170,"tag":239,"props":3432,"children":3433},{"style":276},[3434],{"type":175,"value":1772},{"type":170,"tag":239,"props":3436,"children":3437},{"style":349},[3438],{"type":175,"value":1807},{"type":170,"tag":171,"props":3440,"children":3441},{},[3442,3444,3449],{"type":175,"value":3443},"一个典型的 ",{"type":170,"tag":235,"props":3445,"children":3447},{"className":3446},[],[3448],{"type":175,"value":720},{"type":175,"value":3450}," 头如下：",{"type":170,"tag":228,"props":3452,"children":3454},{"code":3453},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3455],{"type":170,"tag":235,"props":3456,"children":3457},{"__ignoreMap":163},[3458],{"type":175,"value":3453},{"type":170,"tag":171,"props":3460,"children":3461},{},[3462],{"type":175,"value":3463},"大致来说，CSP 相关以下几种安全行为：",{"type":170,"tag":3465,"props":3466,"children":3467},"ul",{},[3468,3473,3478,3483],{"type":170,"tag":2730,"props":3469,"children":3470},{},[3471],{"type":175,"value":3472},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":170,"tag":2730,"props":3474,"children":3475},{},[3476],{"type":175,"value":3477},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":170,"tag":2730,"props":3479,"children":3480},{},[3481],{"type":175,"value":3482},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":170,"tag":2730,"props":3484,"children":3485},{},[3486,3488,3494],{"type":175,"value":3487},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":170,"tag":235,"props":3489,"children":3491},{"className":3490},[],[3492],{"type":175,"value":3493},"Content-Security-Policy-Report-Only",{"type":175,"value":3495}," Header。",{"type":170,"tag":171,"props":3497,"children":3498},{},[3499,3501,3506],{"type":175,"value":3500},"那么我们看看 Helmet 中默认配置的 ",{"type":170,"tag":235,"props":3502,"children":3504},{"className":3503},[],[3505],{"type":175,"value":720},{"type":175,"value":3507}," 策略：",{"type":170,"tag":228,"props":3509,"children":3511},{"code":3510,"language":231,"meta":163,"className":232,"style":163},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版 URL 的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3512],{"type":170,"tag":235,"props":3513,"children":3514},{"__ignoreMap":163},[3515,3535,3543,3590,3598,3642,3650,3679,3687,3765,3773,3816,3824,3884,3892,3937,3945,3989,3997,4005,4013,4021,4070,4078,4156,4164,4172,4180,4205],{"type":170,"tag":239,"props":3516,"children":3517},{"class":241,"line":242},[3518,3522,3527,3531],{"type":170,"tag":239,"props":3519,"children":3520},{"style":246},[3521],{"type":175,"value":249},{"type":170,"tag":239,"props":3523,"children":3524},{"style":252},[3525],{"type":175,"value":3526}," DEFAULT_DIRECTIVES",{"type":170,"tag":239,"props":3528,"children":3529},{"style":258},[3530],{"type":175,"value":261},{"type":170,"tag":239,"props":3532,"children":3533},{"style":349},[3534],{"type":175,"value":1337},{"type":170,"tag":239,"props":3536,"children":3537},{"class":241,"line":297},[3538],{"type":170,"tag":239,"props":3539,"children":3540},{"style":1016},[3541],{"type":175,"value":3542},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":170,"tag":239,"props":3544,"children":3545},{"class":241,"line":306},[3546,3550,3556,3560,3564,3568,3572,3577,3581,3586],{"type":170,"tag":239,"props":3547,"children":3548},{"style":276},[3549],{"type":175,"value":1027},{"type":170,"tag":239,"props":3551,"children":3553},{"style":3552},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3554],{"type":175,"value":3555},"default-src",{"type":170,"tag":239,"props":3557,"children":3558},{"style":276},[3559],{"type":175,"value":279},{"type":170,"tag":239,"props":3561,"children":3562},{"style":349},[3563],{"type":175,"value":1406},{"type":170,"tag":239,"props":3565,"children":3566},{"style":270},[3567],{"type":175,"value":1310},{"type":170,"tag":239,"props":3569,"children":3570},{"style":276},[3571],{"type":175,"value":1772},{"type":170,"tag":239,"props":3573,"children":3574},{"style":282},[3575],{"type":175,"value":3576},"'self'",{"type":170,"tag":239,"props":3578,"children":3579},{"style":276},[3580],{"type":175,"value":1772},{"type":170,"tag":239,"props":3582,"children":3583},{"style":270},[3584],{"type":175,"value":3585},"]",{"type":170,"tag":239,"props":3587,"children":3588},{"style":349},[3589],{"type":175,"value":1041},{"type":170,"tag":239,"props":3591,"children":3592},{"class":241,"line":332},[3593],{"type":170,"tag":239,"props":3594,"children":3595},{"style":1016},[3596],{"type":175,"value":3597},"  // 限制 base 标签的 URI 为源地址\n",{"type":170,"tag":239,"props":3599,"children":3600},{"class":241,"line":340},[3601,3605,3610,3614,3618,3622,3626,3630,3634,3638],{"type":170,"tag":239,"props":3602,"children":3603},{"style":276},[3604],{"type":175,"value":1027},{"type":170,"tag":239,"props":3606,"children":3607},{"style":3552},[3608],{"type":175,"value":3609},"base-uri",{"type":170,"tag":239,"props":3611,"children":3612},{"style":276},[3613],{"type":175,"value":279},{"type":170,"tag":239,"props":3615,"children":3616},{"style":349},[3617],{"type":175,"value":1406},{"type":170,"tag":239,"props":3619,"children":3620},{"style":270},[3621],{"type":175,"value":1310},{"type":170,"tag":239,"props":3623,"children":3624},{"style":276},[3625],{"type":175,"value":1772},{"type":170,"tag":239,"props":3627,"children":3628},{"style":282},[3629],{"type":175,"value":3576},{"type":170,"tag":239,"props":3631,"children":3632},{"style":276},[3633],{"type":175,"value":1772},{"type":170,"tag":239,"props":3635,"children":3636},{"style":270},[3637],{"type":175,"value":3585},{"type":170,"tag":239,"props":3639,"children":3640},{"style":349},[3641],{"type":175,"value":1041},{"type":170,"tag":239,"props":3643,"children":3644},{"class":241,"line":1072},[3645],{"type":170,"tag":239,"props":3646,"children":3647},{"style":1016},[3648],{"type":175,"value":3649},"  // 禁止通过 HTTP 协议加载内容\n",{"type":170,"tag":239,"props":3651,"children":3652},{"class":241,"line":1081},[3653,3657,3662,3666,3670,3675],{"type":170,"tag":239,"props":3654,"children":3655},{"style":276},[3656],{"type":175,"value":1027},{"type":170,"tag":239,"props":3658,"children":3659},{"style":3552},[3660],{"type":175,"value":3661},"block-all-mixed-content",{"type":170,"tag":239,"props":3663,"children":3664},{"style":276},[3665],{"type":175,"value":279},{"type":170,"tag":239,"props":3667,"children":3668},{"style":349},[3669],{"type":175,"value":1406},{"type":170,"tag":239,"props":3671,"children":3672},{"style":270},[3673],{"type":175,"value":3674}," []",{"type":170,"tag":239,"props":3676,"children":3677},{"style":349},[3678],{"type":175,"value":1041},{"type":170,"tag":239,"props":3680,"children":3681},{"class":241,"line":1102},[3682],{"type":170,"tag":239,"props":3683,"children":3684},{"style":1016},[3685],{"type":175,"value":3686},"  // 限制字体加载地址\n",{"type":170,"tag":239,"props":3688,"children":3689},{"class":241,"line":1111},[3690,3694,3699,3703,3707,3711,3715,3719,3723,3727,3731,3736,3740,3744,3748,3753,3757,3761],{"type":170,"tag":239,"props":3691,"children":3692},{"style":276},[3693],{"type":175,"value":1027},{"type":170,"tag":239,"props":3695,"children":3696},{"style":3552},[3697],{"type":175,"value":3698},"font-src",{"type":170,"tag":239,"props":3700,"children":3701},{"style":276},[3702],{"type":175,"value":279},{"type":170,"tag":239,"props":3704,"children":3705},{"style":349},[3706],{"type":175,"value":1406},{"type":170,"tag":239,"props":3708,"children":3709},{"style":270},[3710],{"type":175,"value":1310},{"type":170,"tag":239,"props":3712,"children":3713},{"style":276},[3714],{"type":175,"value":1772},{"type":170,"tag":239,"props":3716,"children":3717},{"style":282},[3718],{"type":175,"value":3576},{"type":170,"tag":239,"props":3720,"children":3721},{"style":276},[3722],{"type":175,"value":1772},{"type":170,"tag":239,"props":3724,"children":3725},{"style":349},[3726],{"type":175,"value":564},{"type":170,"tag":239,"props":3728,"children":3729},{"style":276},[3730],{"type":175,"value":569},{"type":170,"tag":239,"props":3732,"children":3733},{"style":282},[3734],{"type":175,"value":3735},"https:",{"type":170,"tag":239,"props":3737,"children":3738},{"style":276},[3739],{"type":175,"value":279},{"type":170,"tag":239,"props":3741,"children":3742},{"style":349},[3743],{"type":175,"value":564},{"type":170,"tag":239,"props":3745,"children":3746},{"style":276},[3747],{"type":175,"value":569},{"type":170,"tag":239,"props":3749,"children":3750},{"style":282},[3751],{"type":175,"value":3752},"data:",{"type":170,"tag":239,"props":3754,"children":3755},{"style":276},[3756],{"type":175,"value":279},{"type":170,"tag":239,"props":3758,"children":3759},{"style":270},[3760],{"type":175,"value":3585},{"type":170,"tag":239,"props":3762,"children":3763},{"style":349},[3764],{"type":175,"value":1041},{"type":170,"tag":239,"props":3766,"children":3767},{"class":241,"line":1132},[3768],{"type":170,"tag":239,"props":3769,"children":3770},{"style":1016},[3771],{"type":175,"value":3772},"  // 限制嵌入的外部资源\n",{"type":170,"tag":239,"props":3774,"children":3775},{"class":241,"line":1141},[3776,3780,3784,3788,3792,3796,3800,3804,3808,3812],{"type":170,"tag":239,"props":3777,"children":3778},{"style":276},[3779],{"type":175,"value":1027},{"type":170,"tag":239,"props":3781,"children":3782},{"style":3552},[3783],{"type":175,"value":921},{"type":170,"tag":239,"props":3785,"children":3786},{"style":276},[3787],{"type":175,"value":279},{"type":170,"tag":239,"props":3789,"children":3790},{"style":349},[3791],{"type":175,"value":1406},{"type":170,"tag":239,"props":3793,"children":3794},{"style":270},[3795],{"type":175,"value":1310},{"type":170,"tag":239,"props":3797,"children":3798},{"style":276},[3799],{"type":175,"value":1772},{"type":170,"tag":239,"props":3801,"children":3802},{"style":282},[3803],{"type":175,"value":3576},{"type":170,"tag":239,"props":3805,"children":3806},{"style":276},[3807],{"type":175,"value":1772},{"type":170,"tag":239,"props":3809,"children":3810},{"style":270},[3811],{"type":175,"value":3585},{"type":170,"tag":239,"props":3813,"children":3814},{"style":349},[3815],{"type":175,"value":1041},{"type":170,"tag":239,"props":3817,"children":3818},{"class":241,"line":1162},[3819],{"type":170,"tag":239,"props":3820,"children":3821},{"style":1016},[3822],{"type":175,"value":3823},"  // 限制图片加载地址\n",{"type":170,"tag":239,"props":3825,"children":3826},{"class":241,"line":1171},[3827,3831,3836,3840,3844,3848,3852,3856,3860,3864,3868,3872,3876,3880],{"type":170,"tag":239,"props":3828,"children":3829},{"style":276},[3830],{"type":175,"value":1027},{"type":170,"tag":239,"props":3832,"children":3833},{"style":3552},[3834],{"type":175,"value":3835},"img-src",{"type":170,"tag":239,"props":3837,"children":3838},{"style":276},[3839],{"type":175,"value":279},{"type":170,"tag":239,"props":3841,"children":3842},{"style":349},[3843],{"type":175,"value":1406},{"type":170,"tag":239,"props":3845,"children":3846},{"style":270},[3847],{"type":175,"value":1310},{"type":170,"tag":239,"props":3849,"children":3850},{"style":276},[3851],{"type":175,"value":1772},{"type":170,"tag":239,"props":3853,"children":3854},{"style":282},[3855],{"type":175,"value":3576},{"type":170,"tag":239,"props":3857,"children":3858},{"style":276},[3859],{"type":175,"value":1772},{"type":170,"tag":239,"props":3861,"children":3862},{"style":349},[3863],{"type":175,"value":564},{"type":170,"tag":239,"props":3865,"children":3866},{"style":276},[3867],{"type":175,"value":569},{"type":170,"tag":239,"props":3869,"children":3870},{"style":282},[3871],{"type":175,"value":3752},{"type":170,"tag":239,"props":3873,"children":3874},{"style":276},[3875],{"type":175,"value":279},{"type":170,"tag":239,"props":3877,"children":3878},{"style":270},[3879],{"type":175,"value":3585},{"type":170,"tag":239,"props":3881,"children":3882},{"style":349},[3883],{"type":175,"value":1041},{"type":170,"tag":239,"props":3885,"children":3886},{"class":241,"line":1192},[3887],{"type":170,"tag":239,"props":3888,"children":3889},{"style":1016},[3890],{"type":175,"value":3891},"  // 禁用 object 标签\n",{"type":170,"tag":239,"props":3893,"children":3894},{"class":241,"line":1201},[3895,3899,3904,3908,3912,3916,3920,3925,3929,3933],{"type":170,"tag":239,"props":3896,"children":3897},{"style":276},[3898],{"type":175,"value":1027},{"type":170,"tag":239,"props":3900,"children":3901},{"style":3552},[3902],{"type":175,"value":3903},"object-src",{"type":170,"tag":239,"props":3905,"children":3906},{"style":276},[3907],{"type":175,"value":279},{"type":170,"tag":239,"props":3909,"children":3910},{"style":349},[3911],{"type":175,"value":1406},{"type":170,"tag":239,"props":3913,"children":3914},{"style":270},[3915],{"type":175,"value":1310},{"type":170,"tag":239,"props":3917,"children":3918},{"style":276},[3919],{"type":175,"value":1772},{"type":170,"tag":239,"props":3921,"children":3922},{"style":282},[3923],{"type":175,"value":3924},"'none'",{"type":170,"tag":239,"props":3926,"children":3927},{"style":276},[3928],{"type":175,"value":1772},{"type":170,"tag":239,"props":3930,"children":3931},{"style":270},[3932],{"type":175,"value":3585},{"type":170,"tag":239,"props":3934,"children":3935},{"style":349},[3936],{"type":175,"value":1041},{"type":170,"tag":239,"props":3938,"children":3939},{"class":241,"line":1222},[3940],{"type":170,"tag":239,"props":3941,"children":3942},{"style":1016},[3943],{"type":175,"value":3944},"  // 只从源地址加载脚本\n",{"type":170,"tag":239,"props":3946,"children":3947},{"class":241,"line":1231},[3948,3952,3957,3961,3965,3969,3973,3977,3981,3985],{"type":170,"tag":239,"props":3949,"children":3950},{"style":276},[3951],{"type":175,"value":1027},{"type":170,"tag":239,"props":3953,"children":3954},{"style":3552},[3955],{"type":175,"value":3956},"script-src",{"type":170,"tag":239,"props":3958,"children":3959},{"style":276},[3960],{"type":175,"value":279},{"type":170,"tag":239,"props":3962,"children":3963},{"style":349},[3964],{"type":175,"value":1406},{"type":170,"tag":239,"props":3966,"children":3967},{"style":270},[3968],{"type":175,"value":1310},{"type":170,"tag":239,"props":3970,"children":3971},{"style":276},[3972],{"type":175,"value":1772},{"type":170,"tag":239,"props":3974,"children":3975},{"style":282},[3976],{"type":175,"value":3576},{"type":170,"tag":239,"props":3978,"children":3979},{"style":276},[3980],{"type":175,"value":1772},{"type":170,"tag":239,"props":3982,"children":3983},{"style":270},[3984],{"type":175,"value":3585},{"type":170,"tag":239,"props":3986,"children":3987},{"style":349},[3988],{"type":175,"value":1041},{"type":170,"tag":239,"props":3990,"children":3991},{"class":241,"line":1252},[3992],{"type":170,"tag":239,"props":3993,"children":3994},{"style":1016},[3995],{"type":175,"value":3996},"  // 禁用内联脚本\n",{"type":170,"tag":239,"props":3998,"children":3999},{"class":241,"line":1261},[4000],{"type":170,"tag":239,"props":4001,"children":4002},{"style":1016},[4003],{"type":175,"value":4004},"  // ？这里没能理解\n",{"type":170,"tag":239,"props":4006,"children":4007},{"class":241,"line":1270},[4008],{"type":170,"tag":239,"props":4009,"children":4010},{"style":1016},[4011],{"type":175,"value":4012},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":170,"tag":239,"props":4014,"children":4015},{"class":241,"line":1279},[4016],{"type":170,"tag":239,"props":4017,"children":4018},{"style":1016},[4019],{"type":175,"value":4020},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":170,"tag":239,"props":4022,"children":4023},{"class":241,"line":1340},[4024,4028,4033,4037,4041,4045,4049,4053,4057,4061,4065],{"type":170,"tag":239,"props":4025,"children":4026},{"style":276},[4027],{"type":175,"value":1027},{"type":170,"tag":239,"props":4029,"children":4030},{"style":3552},[4031],{"type":175,"value":4032},"script-src-attr",{"type":170,"tag":239,"props":4034,"children":4035},{"style":276},[4036],{"type":175,"value":279},{"type":170,"tag":239,"props":4038,"children":4039},{"style":349},[4040],{"type":175,"value":1406},{"type":170,"tag":239,"props":4042,"children":4043},{"style":270},[4044],{"type":175,"value":1310},{"type":170,"tag":239,"props":4046,"children":4047},{"style":276},[4048],{"type":175,"value":1772},{"type":170,"tag":239,"props":4050,"children":4051},{"style":282},[4052],{"type":175,"value":3924},{"type":170,"tag":239,"props":4054,"children":4055},{"style":276},[4056],{"type":175,"value":1772},{"type":170,"tag":239,"props":4058,"children":4059},{"style":270},[4060],{"type":175,"value":3585},{"type":170,"tag":239,"props":4062,"children":4063},{"style":349},[4064],{"type":175,"value":564},{"type":170,"tag":239,"props":4066,"children":4067},{"style":270},[4068],{"type":175,"value":4069},"‘\n",{"type":170,"tag":239,"props":4071,"children":4072},{"class":241,"line":1414},[4073],{"type":170,"tag":239,"props":4074,"children":4075},{"style":1016},[4076],{"type":175,"value":4077},"  // 限制样式表加载地址\n",{"type":170,"tag":239,"props":4079,"children":4080},{"class":241,"line":1445},[4081,4085,4090,4094,4098,4102,4106,4110,4114,4118,4122,4126,4130,4134,4139,4144,4148,4152],{"type":170,"tag":239,"props":4082,"children":4083},{"style":276},[4084],{"type":175,"value":1027},{"type":170,"tag":239,"props":4086,"children":4087},{"style":3552},[4088],{"type":175,"value":4089},"style-src",{"type":170,"tag":239,"props":4091,"children":4092},{"style":276},[4093],{"type":175,"value":279},{"type":170,"tag":239,"props":4095,"children":4096},{"style":349},[4097],{"type":175,"value":1406},{"type":170,"tag":239,"props":4099,"children":4100},{"style":270},[4101],{"type":175,"value":1310},{"type":170,"tag":239,"props":4103,"children":4104},{"style":276},[4105],{"type":175,"value":1772},{"type":170,"tag":239,"props":4107,"children":4108},{"style":282},[4109],{"type":175,"value":3576},{"type":170,"tag":239,"props":4111,"children":4112},{"style":276},[4113],{"type":175,"value":1772},{"type":170,"tag":239,"props":4115,"children":4116},{"style":349},[4117],{"type":175,"value":564},{"type":170,"tag":239,"props":4119,"children":4120},{"style":276},[4121],{"type":175,"value":569},{"type":170,"tag":239,"props":4123,"children":4124},{"style":282},[4125],{"type":175,"value":3735},{"type":170,"tag":239,"props":4127,"children":4128},{"style":276},[4129],{"type":175,"value":279},{"type":170,"tag":239,"props":4131,"children":4132},{"style":349},[4133],{"type":175,"value":564},{"type":170,"tag":239,"props":4135,"children":4136},{"style":276},[4137],{"type":175,"value":4138}," \"",{"type":170,"tag":239,"props":4140,"children":4141},{"style":282},[4142],{"type":175,"value":4143},"'unsafe-inline'",{"type":170,"tag":239,"props":4145,"children":4146},{"style":276},[4147],{"type":175,"value":1772},{"type":170,"tag":239,"props":4149,"children":4150},{"style":270},[4151],{"type":175,"value":3585},{"type":170,"tag":239,"props":4153,"children":4154},{"style":349},[4155],{"type":175,"value":1041},{"type":170,"tag":239,"props":4157,"children":4158},{"class":241,"line":1458},[4159],{"type":170,"tag":239,"props":4160,"children":4161},{"style":1016},[4162],{"type":175,"value":4163},"  // 不使用升级协议指令\n",{"type":170,"tag":239,"props":4165,"children":4166},{"class":241,"line":1467},[4167],{"type":170,"tag":239,"props":4168,"children":4169},{"style":1016},[4170],{"type":175,"value":4171},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版 URL 的网站，\n",{"type":170,"tag":239,"props":4173,"children":4174},{"class":241,"line":1510},[4175],{"type":170,"tag":239,"props":4176,"children":4177},{"style":1016},[4178],{"type":175,"value":4179},"  // 所以默认不开启此指令\n",{"type":170,"tag":239,"props":4181,"children":4182},{"class":241,"line":1519},[4183,4187,4192,4196,4200],{"type":170,"tag":239,"props":4184,"children":4185},{"style":276},[4186],{"type":175,"value":1027},{"type":170,"tag":239,"props":4188,"children":4189},{"style":3552},[4190],{"type":175,"value":4191},"upgrade-insecure-requests",{"type":170,"tag":239,"props":4193,"children":4194},{"style":276},[4195],{"type":175,"value":279},{"type":170,"tag":239,"props":4197,"children":4198},{"style":349},[4199],{"type":175,"value":1406},{"type":170,"tag":239,"props":4201,"children":4202},{"style":270},[4203],{"type":175,"value":4204}," []\n",{"type":170,"tag":239,"props":4206,"children":4207},{"class":241,"line":1554},[4208],{"type":170,"tag":239,"props":4209,"children":4210},{"style":349},[4211],{"type":175,"value":1516},{"type":170,"tag":171,"props":4213,"children":4214},{},[4215,4217,4223,4225,4231],{"type":175,"value":4216},"最后，我们看兼容性。.. Caniuse 网站只提供了 ",{"type":170,"tag":235,"props":4218,"children":4220},{"className":4219},[],[4221],{"type":175,"value":4222},"CSP 1.0",{"type":175,"value":4224}," 的兼容性，我没有找到最新版本规范（",{"type":170,"tag":235,"props":4226,"children":4228},{"className":4227},[],[4229],{"type":175,"value":4230},"CSP 3.0",{"type":175,"value":4232},"）的兼容性数据 😝。",{"type":170,"tag":171,"props":4234,"children":4235},{},[4236],{"type":170,"tag":899,"props":4237,"children":4240},{"alt":4238,"src":4239},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":170,"tag":439,"props":4242,"children":4244},{"id":4243},"移除下载文件后的打开按钮",[4245],{"type":175,"value":4246},"移除下载文件后的“打开”按钮",{"type":170,"tag":228,"props":4248,"children":4250},{"code":4249,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Download-Options', 'noopen')\n",[4251],{"type":170,"tag":235,"props":4252,"children":4253},{"__ignoreMap":163},[4254],{"type":170,"tag":239,"props":4255,"children":4256},{"class":241,"line":242},[4257,4261,4265,4269,4273,4277,4282,4286,4290,4294,4299,4303],{"type":170,"tag":239,"props":4258,"children":4259},{"style":270},[4260],{"type":175,"value":459},{"type":170,"tag":239,"props":4262,"children":4263},{"style":349},[4264],{"type":175,"value":352},{"type":170,"tag":239,"props":4266,"children":4267},{"style":264},[4268],{"type":175,"value":542},{"type":170,"tag":239,"props":4270,"children":4271},{"style":270},[4272],{"type":175,"value":273},{"type":170,"tag":239,"props":4274,"children":4275},{"style":276},[4276],{"type":175,"value":279},{"type":170,"tag":239,"props":4278,"children":4279},{"style":282},[4280],{"type":175,"value":4281},"X-Download-Options",{"type":170,"tag":239,"props":4283,"children":4284},{"style":276},[4285],{"type":175,"value":279},{"type":170,"tag":239,"props":4287,"children":4288},{"style":349},[4289],{"type":175,"value":564},{"type":170,"tag":239,"props":4291,"children":4292},{"style":276},[4293],{"type":175,"value":569},{"type":170,"tag":239,"props":4295,"children":4296},{"style":282},[4297],{"type":175,"value":4298},"noopen",{"type":170,"tag":239,"props":4300,"children":4301},{"style":276},[4302],{"type":175,"value":279},{"type":170,"tag":239,"props":4304,"children":4305},{"style":270},[4306],{"type":175,"value":294},{"type":170,"tag":171,"props":4308,"children":4309},{},[4310,4312,4317],{"type":175,"value":4311},"在下载文件时，",{"type":170,"tag":235,"props":4313,"children":4315},{"className":4314},[],[4316],{"type":175,"value":4281},{"type":175,"value":4318}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":170,"tag":439,"props":4320,"children":4322},{"id":4321},"开启-dns-预取",[4323],{"type":175,"value":4324},"开启 DNS 预取",{"type":170,"tag":171,"props":4326,"children":4327},{},[4328,4330,4336],{"type":175,"value":4329},"通过设置 ",{"type":170,"tag":235,"props":4331,"children":4333},{"className":4332},[],[4334],{"type":175,"value":4335},"X-DNS-Prefetch-Control",{"type":175,"value":4337}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":170,"tag":171,"props":4339,"children":4340},{},[4341,4343,4350],{"type":175,"value":4342},"至于 DNS Prefetch 具体是如何增强浏览器安全的。.. 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":170,"tag":182,"props":4344,"children":4347},{"href":4345,"rel":4346},"https://github.com/helmetjs/helmet/issues/111",[759],[4348],{"type":175,"value":4349},"Issue",{"type":175,"value":749},{"type":170,"tag":228,"props":4352,"children":4354},{"code":4353,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4355],{"type":170,"tag":235,"props":4356,"children":4357},{"__ignoreMap":163},[4358],{"type":170,"tag":239,"props":4359,"children":4360},{"class":241,"line":242},[4361,4365,4369,4373,4377,4381,4385,4389,4393,4397,4402,4406],{"type":170,"tag":239,"props":4362,"children":4363},{"style":270},[4364],{"type":175,"value":459},{"type":170,"tag":239,"props":4366,"children":4367},{"style":349},[4368],{"type":175,"value":352},{"type":170,"tag":239,"props":4370,"children":4371},{"style":264},[4372],{"type":175,"value":542},{"type":170,"tag":239,"props":4374,"children":4375},{"style":270},[4376],{"type":175,"value":273},{"type":170,"tag":239,"props":4378,"children":4379},{"style":276},[4380],{"type":175,"value":279},{"type":170,"tag":239,"props":4382,"children":4383},{"style":282},[4384],{"type":175,"value":4335},{"type":170,"tag":239,"props":4386,"children":4387},{"style":276},[4388],{"type":175,"value":279},{"type":170,"tag":239,"props":4390,"children":4391},{"style":349},[4392],{"type":175,"value":564},{"type":170,"tag":239,"props":4394,"children":4395},{"style":276},[4396],{"type":175,"value":569},{"type":170,"tag":239,"props":4398,"children":4399},{"style":282},[4400],{"type":175,"value":4401},"on",{"type":170,"tag":239,"props":4403,"children":4404},{"style":276},[4405],{"type":175,"value":279},{"type":170,"tag":239,"props":4407,"children":4408},{"style":270},[4409],{"type":175,"value":294},{"type":170,"tag":408,"props":4411,"children":4413},{"id":4412},"阅读更多",[4414],{"type":175,"value":4412},{"type":170,"tag":171,"props":4416,"children":4417},{},[4418],{"type":175,"value":4419},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":170,"tag":3465,"props":4421,"children":4422},{},[4423],{"type":170,"tag":2730,"props":4424,"children":4425},{},[4426,4428],{"type":175,"value":4427},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":170,"tag":178,"props":4429,"children":4430},{},[4431],{"type":170,"tag":182,"props":4432,"children":4436},{"href":4433,"ariaDescribedBy":4434,"dataFootnoteRef":163,"id":4435},"#user-content-fn-secure-cookie",[186],"user-content-fnref-secure-cookie",[4437],{"type":175,"value":4438},"13",{"type":170,"tag":171,"props":4440,"children":4441},{},[4442,4444,4451,4453,4460],{"type":175,"value":4443},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":170,"tag":182,"props":4445,"children":4448},{"href":4446,"rel":4447},"https://owasp.org/www-project-secure-headers/",[759],[4449],{"type":175,"value":4450},"OWASP Secure Headers Project",{"type":175,"value":4452},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":170,"tag":182,"props":4454,"children":4457},{"href":4455,"rel":4456},"https://infosec.mozilla.org/guidelines/web_security",[759],[4458],{"type":175,"value":4459},"Web Security",{"type":175,"value":4461},"。以下是一些额外的可供探索的页面：",{"type":170,"tag":3465,"props":4463,"children":4464},{},[4465,4475,4485],{"type":170,"tag":2730,"props":4466,"children":4467},{},[4468],{"type":170,"tag":182,"props":4469,"children":4472},{"href":4470,"rel":4471},"https://www.zhihu.com/question/21979782",[759],[4473],{"type":175,"value":4474},"Content Security Policy (CSP) 是什么？",{"type":170,"tag":2730,"props":4476,"children":4477},{},[4478],{"type":170,"tag":182,"props":4479,"children":4482},{"href":4480,"rel":4481},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[759],[4483],{"type":175,"value":4484},"CORS@MDN",{"type":170,"tag":2730,"props":4486,"children":4487},{},[4488],{"type":170,"tag":182,"props":4489,"children":4492},{"href":4490,"rel":4491},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[759],[4493],{"type":175,"value":4494},"OWASP Top 10 2017（RC2）",{"type":170,"tag":4496,"props":4497,"children":4500},"section",{"className":4498,"dataFootnotes":163},[4499],"footnotes",[4501,4508],{"type":170,"tag":408,"props":4502,"children":4505},{"className":4503,"id":186},[4504],"sr-only",[4506],{"type":175,"value":4507},"Footnotes",{"type":170,"tag":2726,"props":4509,"children":4510},{},[4511,4533,4552,4571,4588,4607,4626,4639,4657,4676,4695,4714,4733],{"type":170,"tag":2730,"props":4512,"children":4514},{"id":4513},"user-content-fn-helmet",[4515,4522,4524],{"type":170,"tag":182,"props":4516,"children":4519},{"href":4517,"rel":4518},"https://helmetjs.github.io/",[759],[4520],{"type":175,"value":4521},"HELMET",{"type":175,"value":4523}," ",{"type":170,"tag":182,"props":4525,"children":4530},{"href":4526,"ariaLabel":4527,"className":4528,"dataFootnoteBackref":163},"#user-content-fnref-helmet","Back to reference 1",[4529],"data-footnote-backref",[4531],{"type":175,"value":4532},"↩",{"type":170,"tag":2730,"props":4534,"children":4536},{"id":4535},"user-content-fn-dns-rebinding-1",[4537,4544,4545],{"type":170,"tag":182,"props":4538,"children":4541},{"href":4539,"rel":4540},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[759],[4542],{"type":175,"value":4543},"来自微信外挂的安全风险",{"type":175,"value":4523},{"type":170,"tag":182,"props":4546,"children":4550},{"href":4547,"ariaLabel":4548,"className":4549,"dataFootnoteBackref":163},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4529],[4551],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4553,"children":4555},{"id":4554},"user-content-fn-dns-rebinding-2",[4556,4563,4564],{"type":170,"tag":182,"props":4557,"children":4560},{"href":4558,"rel":4559},"https://github.com/helmetjs/helmet/issues/182",[759],[4561],{"type":175,"value":4562},"GitHub Issue",{"type":175,"value":4523},{"type":170,"tag":182,"props":4565,"children":4569},{"href":4566,"ariaLabel":4567,"className":4568,"dataFootnoteBackref":163},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4529],[4570],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4572,"children":4574},{"id":4573},"user-content-fn-shp",[4575,4580,4581],{"type":170,"tag":182,"props":4576,"children":4578},{"href":4446,"rel":4577},[759],[4579],{"type":175,"value":4450},{"type":175,"value":4523},{"type":170,"tag":182,"props":4582,"children":4586},{"href":4583,"ariaLabel":4584,"className":4585,"dataFootnoteBackref":163},"#user-content-fnref-shp","Back to reference 4",[4529],[4587],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4589,"children":4591},{"id":4590},"user-content-fn-xss-auditor",[4592,4599,4600],{"type":170,"tag":182,"props":4593,"children":4596},{"href":4594,"rel":4595},"https://www.chromestatus.com/feature/5021976655560704",[759],[4597],{"type":175,"value":4598},"XSS Auditor (removed)",{"type":175,"value":4523},{"type":170,"tag":182,"props":4601,"children":4605},{"href":4602,"ariaLabel":4603,"className":4604,"dataFootnoteBackref":163},"#user-content-fnref-xss-auditor","Back to reference 5",[4529],[4606],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4608,"children":4610},{"id":4609},"user-content-fn-delete-xss-auditor",[4611,4618,4619],{"type":170,"tag":182,"props":4612,"children":4615},{"href":4613,"rel":4614},"https://zhuanlan.zhihu.com/p/74288648",[759],[4616],{"type":175,"value":4617},"Google 将删除 Chrome 内置的 XSS 保护",{"type":175,"value":4523},{"type":170,"tag":182,"props":4620,"children":4624},{"href":4621,"ariaLabel":4622,"className":4623,"dataFootnoteBackref":163},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4529],[4625],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4627,"children":4629},{"id":4628},"user-content-fn-referer",[4630,4632],{"type":175,"value":4631},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":170,"tag":182,"props":4633,"children":4637},{"href":4634,"ariaLabel":4635,"className":4636,"dataFootnoteBackref":163},"#user-content-fnref-referer","Back to reference 7",[4529],[4638],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4640,"children":4642},{"id":4641},"user-content-fn-timeend",[4643,4649,4650],{"type":170,"tag":182,"props":4644,"children":4647},{"href":4645,"rel":4646},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[759],[4648],{"type":175,"value":2537},{"type":175,"value":4523},{"type":170,"tag":182,"props":4651,"children":4655},{"href":4652,"ariaLabel":4653,"className":4654,"dataFootnoteBackref":163},"#user-content-fnref-timeend","Back to reference 8",[4529],[4656],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4658,"children":4660},{"id":4659},"user-content-fn-chrome-ct",[4661,4668,4669],{"type":170,"tag":182,"props":4662,"children":4665},{"href":4663,"rel":4664},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[759],[4666],{"type":175,"value":4667},"Chrome 证书透明度（CT）相关政策",{"type":175,"value":4523},{"type":170,"tag":182,"props":4670,"children":4674},{"href":4671,"ariaLabel":4672,"className":4673,"dataFootnoteBackref":163},"#user-content-fnref-chrome-ct","Back to reference 9",[4529],[4675],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4677,"children":4679},{"id":4678},"user-content-fn-ct",[4680,4687,4688],{"type":170,"tag":182,"props":4681,"children":4684},{"href":4682,"rel":4683},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[759],[4685],{"type":175,"value":4686},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":175,"value":4523},{"type":170,"tag":182,"props":4689,"children":4693},{"href":4690,"ariaLabel":4691,"className":4692,"dataFootnoteBackref":163},"#user-content-fnref-ct","Back to reference 10",[4529],[4694],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4696,"children":4698},{"id":4697},"user-content-fn-pdf-reader",[4699,4706,4707],{"type":170,"tag":182,"props":4700,"children":4703},{"href":4701,"rel":4702},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[759],[4704],{"type":175,"value":4705},"Cross Domain Configuration",{"type":175,"value":4523},{"type":170,"tag":182,"props":4708,"children":4712},{"href":4709,"ariaLabel":4710,"className":4711,"dataFootnoteBackref":163},"#user-content-fnref-pdf-reader","Back to reference 11",[4529],[4713],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4715,"children":4717},{"id":4716},"user-content-fn-csp-standard",[4718,4725,4726],{"type":170,"tag":182,"props":4719,"children":4722},{"href":4720,"rel":4721},"https://www.w3.org/TR/CSP/",[759],[4723],{"type":175,"value":4724},"Content Security Policy Level 3",{"type":175,"value":4523},{"type":170,"tag":182,"props":4727,"children":4731},{"href":4728,"ariaLabel":4729,"className":4730,"dataFootnoteBackref":163},"#user-content-fnref-csp-standard","Back to reference 12",[4529],[4732],{"type":175,"value":4532},{"type":170,"tag":2730,"props":4734,"children":4736},{"id":4735},"user-content-fn-secure-cookie",[4737,4744,4745],{"type":170,"tag":182,"props":4738,"children":4741},{"href":4739,"rel":4740},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[759],[4742],{"type":175,"value":4743},"Secure-Cookie",{"type":175,"value":4523},{"type":170,"tag":182,"props":4746,"children":4750},{"href":4747,"ariaLabel":4748,"className":4749,"dataFootnoteBackref":163},"#user-content-fnref-secure-cookie","Back to reference 13",[4529],[4751],{"type":175,"value":4532},{"type":170,"tag":4753,"props":4754,"children":4755},"style",{},[4756],{"type":175,"value":4757},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":297,"depth":297,"links":4759},[4760,4773,4774],{"id":410,"depth":297,"text":413,"children":4761},[4762,4763,4764,4765,4766,4767,4768,4769,4770,4771,4772],{"id":441,"depth":306,"text":444},{"id":516,"depth":306,"text":519},{"id":606,"depth":306,"text":609},{"id":774,"depth":306,"text":774},{"id":932,"depth":306,"text":935},{"id":1943,"depth":306,"text":1946},{"id":2581,"depth":306,"text":2581},{"id":2690,"depth":306,"text":2693},{"id":3321,"depth":306,"text":3324},{"id":4243,"depth":306,"text":4246},{"id":4321,"depth":306,"text":4324},{"id":4412,"depth":297,"text":4412},{"id":186,"depth":297,"text":4507},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[4782,4786],{"_path":4783,"title":4784,"description":4785},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":4787,"title":4788,"description":163},"/_achieved/2020-10/noname","无题",1748756315617]