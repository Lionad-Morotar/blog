[{"data":1,"prerenderedAt":5017},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":393,"/_achieved/2020-08/helmet-and-security-surround":5009},[4,35,86,105,132,138,144,150,387],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"数字化转型","/gists/digital-transformation",{"title":205,"_path":206},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":208,"_path":209},"正则表达式","/gists/eegex",{"title":211,"_path":212},"Emoji","/gists/emoji",{"title":214,"_path":215},"工程","/gists/engineering",{"title":217,"_path":218},"熵","/gists/entropy",{"title":220,"_path":221},"Environment","/gists/environment",{"title":223,"_path":224},"Erlang","/gists/erlang",{"title":226,"_path":227},"逃离塔克夫","/gists/escape-from-tarkov",{"title":229,"_path":230},"ESNext (ES6-ES11)","/gists/esnext",{"title":232,"_path":233},"Eval！","/gists/eval",{"title":235,"_path":236},"Flutter","/gists/flutter",{"title":238,"_path":239},"字体","/gists/font",{"title":241,"_path":242},"JS 函数式编程","/gists/functional",{"title":244,"_path":245},"游戏化","/gists/gamification",{"title":247,"_path":248},"Google C++ Standard","/gists/google-cpp-standard",{"title":250,"_path":251},"双向链接完全体","/gists/graph",{"title":253,"_path":254},"Hardwares","/gists/hardwares",{"title":256,"_path":257},"哈希冲突","/gists/hash-collision",{"title":259,"_path":260},"信息设计","/gists/information-design",{"title":262,"_path":263},"InstantPage","/gists/instant.page",{"title":265,"_path":266},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":268,"_path":269},"KVStore","/gists/key-value-db",{"title":271,"_path":272},"Kubernetes","/gists/kubernetes",{"title":274,"_path":275},"Makefile","/gists/makefile",{"title":277,"_path":278},"Markdown Inline Style","/gists/markdown-nice",{"title":280,"_path":281},"小程序","/gists/miniapp",{"title":283,"_path":284},"减小页面快照体积","/gists/minify-html",{"title":286,"_path":287},"mklink","/gists/mklink",{"title":289,"_path":290},"Mock","/gists/mock",{"title":292,"_path":293},"多人协作系统","/gists/multiplayer",{"title":295,"_path":296},"多端应用","/gists/multy-end-app",{"title":298,"_path":299},"神经科学","/gists/neuroscience",{"title":301,"_path":302},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":304,"_path":305},"PInvoke","/gists/pinvoke",{"title":307,"_path":308},"像素","/gists/pixel",{"title":310,"_path":311},"PowerShell","/gists/powershell",{"title":313,"_path":314},"量子","/gists/quantum",{"title":316,"_path":317},"保持好奇心","/gists/questions",{"title":319,"_path":320},"React Native","/gists/react-native",{"title":322,"_path":323},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":325,"_path":326},"SEO","/gists/seo",{"title":328,"_path":329},"Shader","/gists/shader",{"title":331,"_path":332},"Shape Up","/gists/shape-up",{"title":334,"_path":335},"睡觉","/gists/sleep",{"title":337,"_path":338},"记录奇怪的问题","/gists/solved",{"title":340,"_path":341},"States","/gists/states",{"title":343,"_path":344},"Storage","/gists/storage",{"title":346,"_path":347},"音视频流处理","/gists/stream-cli",{"title":349,"_path":350},"Symbol","/gists/symbol",{"title":352,"_path":353},"系统论","/gists/systems-theory",{"title":355,"_path":356},"Taro","/gists/taro",{"title":358,"_path":359},"任务切片","/gists/task-slice",{"title":361,"_path":362},"技术偏好","/gists/tech-dudge",{"title":364,"_path":365},"Untitled","/gists/untitled",{"title":367,"_path":368},"可变字体","/gists/variable-font",{"title":370,"_path":371},"视觉错觉","/gists/visual-illusion",{"title":373,"_path":374},"SS(SSR)","/gists/vpn",{"title":376,"_path":377},"VS Code 插件开发","/gists/vscode-plugin",{"title":379,"_path":380},"Web Components","/gists/web-components",{"title":382,"_path":383},"Windows","/gists/windows",{"title":385,"_path":386},"查缺补漏","/gists/wrong",{"title":388,"_path":389,"children":390},"我 / About","/hire",[391],{"title":392,"_path":389},"📬 技术简历",{"_path":394,"_dir":395,"_draft":396,"_partial":397,"_locale":398,"title":399,"description":400,"body":401,"_type":5003,"_id":5004,"_source":5005,"_file":5006,"_stem":5007,"_extension":5008},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":402,"children":403,"toc":4986},"root",[404,426,457,462,624,629,637,642,649,673,680,725,737,749,755,818,839,845,905,917,985,999,1004,1064,1089,1123,1132,1158,1164,1201,1942,1962,2169,2175,2200,2243,2251,2807,2812,2860,2896,2904,2916,2922,2946,2953,2976,2981,3211,3230,3542,3547,3553,3592,3602,3667,3679,3687,3692,3724,3736,4440,4461,4469,4475,4535,4547,4553,4566,4579,4638,4643,4648,4667,4690,4723,4980],{"type":405,"tag":406,"props":407,"children":408},"element","p",{},[409,412],{"type":410,"value":411},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":405,"tag":413,"props":414,"children":415},"sup",{},[416],{"type":405,"tag":417,"props":418,"children":423},"a",{"href":419,"ariaDescribedBy":420,"dataFootnoteRef":398,"id":422},"#user-content-fn-helmet",[421],"footnote-label","user-content-fnref-helmet",[424],{"type":410,"value":425},"1",{"type":405,"tag":406,"props":427,"children":428},{},[429,431,442,444,455],{"type":410,"value":430},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":405,"tag":413,"props":432,"children":433},{},[434],{"type":405,"tag":417,"props":435,"children":439},{"href":436,"ariaDescribedBy":437,"dataFootnoteRef":398,"id":438},"#user-content-fn-dns-rebinding-1",[421],"user-content-fnref-dns-rebinding-1",[440],{"type":410,"value":441},"2",{"type":410,"value":443}," 问题，它就无能为力",{"type":405,"tag":413,"props":445,"children":446},{},[447],{"type":405,"tag":417,"props":448,"children":452},{"href":449,"ariaDescribedBy":450,"dataFootnoteRef":398,"id":451},"#user-content-fn-dns-rebinding-2",[421],"user-content-fnref-dns-rebinding-2",[453],{"type":410,"value":454},"3",{"type":410,"value":456},"。不过尽管不是银弹，它确实还是很有效的。",{"type":405,"tag":406,"props":458,"children":459},{},[460],{"type":410,"value":461},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":405,"tag":463,"props":464,"children":468},"pre",{"code":465,"language":466,"meta":398,"className":467,"style":398},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[469],{"type":405,"tag":470,"props":471,"children":472},"code",{"__ignoreMap":398},[473,530,539,565,573],{"type":405,"tag":474,"props":475,"children":478},"span",{"class":476,"line":477},"line",1,[479,485,491,497,503,509,515,521,525],{"type":405,"tag":474,"props":480,"children":482},{"style":481},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[483],{"type":410,"value":484},"const",{"type":405,"tag":474,"props":486,"children":488},{"style":487},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[489],{"type":410,"value":490}," express",{"type":405,"tag":474,"props":492,"children":494},{"style":493},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[495],{"type":410,"value":496}," =",{"type":405,"tag":474,"props":498,"children":500},{"style":499},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[501],{"type":410,"value":502}," require",{"type":405,"tag":474,"props":504,"children":506},{"style":505},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[507],{"type":410,"value":508},"(",{"type":405,"tag":474,"props":510,"children":512},{"style":511},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[513],{"type":410,"value":514},"'",{"type":405,"tag":474,"props":516,"children":518},{"style":517},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[519],{"type":410,"value":520},"express",{"type":405,"tag":474,"props":522,"children":523},{"style":511},[524],{"type":410,"value":514},{"type":405,"tag":474,"props":526,"children":527},{"style":505},[528],{"type":410,"value":529},")\n",{"type":405,"tag":474,"props":531,"children":533},{"class":476,"line":532},2,[534],{"type":405,"tag":474,"props":535,"children":536},{"emptyLinePlaceholder":397},[537],{"type":410,"value":538},"\n",{"type":405,"tag":474,"props":540,"children":542},{"class":476,"line":541},3,[543,547,552,556,560],{"type":405,"tag":474,"props":544,"children":545},{"style":481},[546],{"type":410,"value":484},{"type":405,"tag":474,"props":548,"children":549},{"style":487},[550],{"type":410,"value":551}," app",{"type":405,"tag":474,"props":553,"children":554},{"style":493},[555],{"type":410,"value":496},{"type":405,"tag":474,"props":557,"children":558},{"style":499},[559],{"type":410,"value":490},{"type":405,"tag":474,"props":561,"children":562},{"style":505},[563],{"type":410,"value":564},"()\n",{"type":405,"tag":474,"props":566,"children":568},{"class":476,"line":567},4,[569],{"type":405,"tag":474,"props":570,"children":571},{"emptyLinePlaceholder":397},[572],{"type":410,"value":538},{"type":405,"tag":474,"props":574,"children":576},{"class":476,"line":575},5,[577,582,588,593,597,602,606,610,615,619],{"type":405,"tag":474,"props":578,"children":579},{"style":505},[580],{"type":410,"value":581},"app",{"type":405,"tag":474,"props":583,"children":585},{"style":584},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[586],{"type":410,"value":587},".",{"type":405,"tag":474,"props":589,"children":590},{"style":499},[591],{"type":410,"value":592},"use",{"type":405,"tag":474,"props":594,"children":595},{"style":505},[596],{"type":410,"value":508},{"type":405,"tag":474,"props":598,"children":599},{"style":499},[600],{"type":410,"value":601},"require",{"type":405,"tag":474,"props":603,"children":604},{"style":505},[605],{"type":410,"value":508},{"type":405,"tag":474,"props":607,"children":608},{"style":511},[609],{"type":410,"value":514},{"type":405,"tag":474,"props":611,"children":612},{"style":517},[613],{"type":410,"value":614},"helmet",{"type":405,"tag":474,"props":616,"children":617},{"style":511},[618],{"type":410,"value":514},{"type":405,"tag":474,"props":620,"children":621},{"style":505},[622],{"type":410,"value":623},")())\n",{"type":405,"tag":406,"props":625,"children":626},{},[627],{"type":410,"value":628},"新的响应请求的 Headers 会变成这样：",{"type":405,"tag":463,"props":630,"children":632},{"code":631},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[633],{"type":405,"tag":470,"props":634,"children":635},{"__ignoreMap":398},[636],{"type":410,"value":631},{"type":405,"tag":406,"props":638,"children":639},{},[640],{"type":410,"value":641},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":405,"tag":643,"props":644,"children":646},"h2",{"id":645},"_11-种安全策略",[647],{"type":410,"value":648},"11 种安全策略",{"type":405,"tag":406,"props":650,"children":651},{},[652,654,660,671],{"type":410,"value":653},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":405,"tag":470,"props":655,"children":657},{"className":656},[],[658],{"type":410,"value":659},"OWASP Secure Headers",{"type":405,"tag":413,"props":661,"children":662},{},[663],{"type":405,"tag":417,"props":664,"children":668},{"href":665,"ariaDescribedBy":666,"dataFootnoteRef":398,"id":667},"#user-content-fn-shp",[421],"user-content-fnref-shp",[669],{"type":410,"value":670},"4",{"type":410,"value":672}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":405,"tag":674,"props":675,"children":677},"h3",{"id":676},"移除-x-powered-by",[678],{"type":410,"value":679},"移除 X-Powered-By",{"type":405,"tag":463,"props":681,"children":683},{"code":682,"language":466,"meta":398,"className":467,"style":398},"response.removeHeader('X-Powered-By')\n",[684],{"type":405,"tag":470,"props":685,"children":686},{"__ignoreMap":398},[687],{"type":405,"tag":474,"props":688,"children":689},{"class":476,"line":477},[690,695,699,704,708,712,717,721],{"type":405,"tag":474,"props":691,"children":692},{"style":505},[693],{"type":410,"value":694},"response",{"type":405,"tag":474,"props":696,"children":697},{"style":584},[698],{"type":410,"value":587},{"type":405,"tag":474,"props":700,"children":701},{"style":499},[702],{"type":410,"value":703},"removeHeader",{"type":405,"tag":474,"props":705,"children":706},{"style":505},[707],{"type":410,"value":508},{"type":405,"tag":474,"props":709,"children":710},{"style":511},[711],{"type":410,"value":514},{"type":405,"tag":474,"props":713,"children":714},{"style":517},[715],{"type":410,"value":716},"X-Powered-By",{"type":405,"tag":474,"props":718,"children":719},{"style":511},[720],{"type":410,"value":514},{"type":405,"tag":474,"props":722,"children":723},{"style":505},[724],{"type":410,"value":529},{"type":405,"tag":406,"props":726,"children":727},{},[728,730,735],{"type":410,"value":729},"一些框架会在请求头中添加 ",{"type":405,"tag":470,"props":731,"children":733},{"className":732},[],[734],{"type":410,"value":716},{"type":410,"value":736},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":405,"tag":406,"props":738,"children":739},{},[740,742,747],{"type":410,"value":741},"由于 Express 默认会给响应头增加 ",{"type":405,"tag":470,"props":743,"children":745},{"className":744},[],[746],{"type":410,"value":716},{"type":410,"value":748},"，所以 Helmet 直接把它移除了。",{"type":405,"tag":674,"props":750,"children":752},{"id":751},"移除-mime-嗅探",[753],{"type":410,"value":754},"移除 MIME 嗅探",{"type":405,"tag":463,"props":756,"children":758},{"code":757,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[759],{"type":405,"tag":470,"props":760,"children":761},{"__ignoreMap":398},[762],{"type":405,"tag":474,"props":763,"children":764},{"class":476,"line":477},[765,769,773,778,782,786,791,795,800,805,810,814],{"type":405,"tag":474,"props":766,"children":767},{"style":505},[768],{"type":410,"value":694},{"type":405,"tag":474,"props":770,"children":771},{"style":584},[772],{"type":410,"value":587},{"type":405,"tag":474,"props":774,"children":775},{"style":499},[776],{"type":410,"value":777},"setHeader",{"type":405,"tag":474,"props":779,"children":780},{"style":505},[781],{"type":410,"value":508},{"type":405,"tag":474,"props":783,"children":784},{"style":511},[785],{"type":410,"value":514},{"type":405,"tag":474,"props":787,"children":788},{"style":517},[789],{"type":410,"value":790},"X-Content-Type-Options",{"type":405,"tag":474,"props":792,"children":793},{"style":511},[794],{"type":410,"value":514},{"type":405,"tag":474,"props":796,"children":797},{"style":584},[798],{"type":410,"value":799},",",{"type":405,"tag":474,"props":801,"children":802},{"style":511},[803],{"type":410,"value":804}," '",{"type":405,"tag":474,"props":806,"children":807},{"style":517},[808],{"type":410,"value":809},"nosniff",{"type":405,"tag":474,"props":811,"children":812},{"style":511},[813],{"type":410,"value":514},{"type":405,"tag":474,"props":815,"children":816},{"style":505},[817],{"type":410,"value":529},{"type":405,"tag":406,"props":819,"children":820},{},[821,823,829,831,837],{"type":410,"value":822},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":405,"tag":470,"props":824,"children":826},{"className":825},[],[827],{"type":410,"value":828},"Content-Type",{"type":410,"value":830},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":405,"tag":470,"props":832,"children":834},{"className":833},[],[835],{"type":410,"value":836},"X-Content-Type-Options = nosniff",{"type":410,"value":838}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":405,"tag":674,"props":840,"children":842},{"id":841},"移除-x-xss-protection",[843],{"type":410,"value":844},"移除 X-XSS-Protection",{"type":405,"tag":463,"props":846,"children":848},{"code":847,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('X-XSS-Protection', '0')\n",[849],{"type":405,"tag":470,"props":850,"children":851},{"__ignoreMap":398},[852],{"type":405,"tag":474,"props":853,"children":854},{"class":476,"line":477},[855,859,863,867,871,875,880,884,888,892,897,901],{"type":405,"tag":474,"props":856,"children":857},{"style":505},[858],{"type":410,"value":694},{"type":405,"tag":474,"props":860,"children":861},{"style":584},[862],{"type":410,"value":587},{"type":405,"tag":474,"props":864,"children":865},{"style":499},[866],{"type":410,"value":777},{"type":405,"tag":474,"props":868,"children":869},{"style":505},[870],{"type":410,"value":508},{"type":405,"tag":474,"props":872,"children":873},{"style":511},[874],{"type":410,"value":514},{"type":405,"tag":474,"props":876,"children":877},{"style":517},[878],{"type":410,"value":879},"X-XSS-Protection",{"type":405,"tag":474,"props":881,"children":882},{"style":511},[883],{"type":410,"value":514},{"type":405,"tag":474,"props":885,"children":886},{"style":584},[887],{"type":410,"value":799},{"type":405,"tag":474,"props":889,"children":890},{"style":511},[891],{"type":410,"value":804},{"type":405,"tag":474,"props":893,"children":894},{"style":517},[895],{"type":410,"value":896},"0",{"type":405,"tag":474,"props":898,"children":899},{"style":511},[900],{"type":410,"value":514},{"type":405,"tag":474,"props":902,"children":903},{"style":505},[904],{"type":410,"value":529},{"type":405,"tag":406,"props":906,"children":907},{},[908,910,915],{"type":410,"value":909},"不是应该打开 ",{"type":405,"tag":470,"props":911,"children":913},{"className":912},[],[914],{"type":410,"value":879},{"type":410,"value":916},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":405,"tag":406,"props":918,"children":919},{},[920,922,928,930,941,943,948,950,956,958,969,971,976,978,983],{"type":410,"value":921},"这得追溯回去年的 Chrome 移除 ",{"type":405,"tag":470,"props":923,"children":925},{"className":924},[],[926],{"type":410,"value":927},"XSS Auditor",{"type":410,"value":929},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":405,"tag":413,"props":931,"children":932},{},[933],{"type":405,"tag":417,"props":934,"children":938},{"href":935,"ariaDescribedBy":936,"dataFootnoteRef":398,"id":937},"#user-content-fn-xss-auditor",[421],"user-content-fnref-xss-auditor",[939],{"type":410,"value":940},"5",{"type":410,"value":942},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":405,"tag":470,"props":944,"children":946},{"className":945},[],[947],{"type":410,"value":927},{"type":410,"value":949},"，并开始使用 ",{"type":405,"tag":470,"props":951,"children":953},{"className":952},[],[954],{"type":410,"value":955},"CSP",{"type":410,"value":957}," 等现代标准（更现代的标准）",{"type":405,"tag":413,"props":959,"children":960},{},[961],{"type":405,"tag":417,"props":962,"children":966},{"href":963,"ariaDescribedBy":964,"dataFootnoteRef":398,"id":965},"#user-content-fn-delete-xss-auditor",[421],"user-content-fnref-delete-xss-auditor",[967],{"type":410,"value":968},"6",{"type":410,"value":970},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":405,"tag":470,"props":972,"children":974},{"className":973},[],[975],{"type":410,"value":879},{"type":410,"value":977}," 这个响应头是让浏览器不要再用 ",{"type":405,"tag":470,"props":979,"children":981},{"className":980},[],[982],{"type":410,"value":927},{"type":410,"value":984},"。",{"type":405,"tag":406,"props":986,"children":987},{},[988,990,998],{"type":410,"value":989},"见：",{"type":405,"tag":417,"props":991,"children":995},{"href":992,"rel":993},"https://github.com/OWASP/CheatSheetSeries/issues/376",[994],"nofollow",[996],{"type":410,"value":997},"#376",{"type":410,"value":984},{"type":405,"tag":674,"props":1000,"children":1002},{"id":1001},"禁止页面被嵌套",[1003],{"type":410,"value":1001},{"type":405,"tag":463,"props":1005,"children":1007},{"code":1006,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[1008],{"type":405,"tag":470,"props":1009,"children":1010},{"__ignoreMap":398},[1011],{"type":405,"tag":474,"props":1012,"children":1013},{"class":476,"line":477},[1014,1018,1022,1026,1030,1034,1039,1043,1047,1051,1056,1060],{"type":405,"tag":474,"props":1015,"children":1016},{"style":505},[1017],{"type":410,"value":694},{"type":405,"tag":474,"props":1019,"children":1020},{"style":584},[1021],{"type":410,"value":587},{"type":405,"tag":474,"props":1023,"children":1024},{"style":499},[1025],{"type":410,"value":777},{"type":405,"tag":474,"props":1027,"children":1028},{"style":505},[1029],{"type":410,"value":508},{"type":405,"tag":474,"props":1031,"children":1032},{"style":511},[1033],{"type":410,"value":514},{"type":405,"tag":474,"props":1035,"children":1036},{"style":517},[1037],{"type":410,"value":1038},"X-Frame-Options",{"type":405,"tag":474,"props":1040,"children":1041},{"style":511},[1042],{"type":410,"value":514},{"type":405,"tag":474,"props":1044,"children":1045},{"style":584},[1046],{"type":410,"value":799},{"type":405,"tag":474,"props":1048,"children":1049},{"style":511},[1050],{"type":410,"value":804},{"type":405,"tag":474,"props":1052,"children":1053},{"style":517},[1054],{"type":410,"value":1055},"SAMEORIGIN",{"type":405,"tag":474,"props":1057,"children":1058},{"style":511},[1059],{"type":410,"value":514},{"type":405,"tag":474,"props":1061,"children":1062},{"style":505},[1063],{"type":410,"value":529},{"type":405,"tag":406,"props":1065,"children":1066},{},[1067,1072,1074,1079,1081,1087],{"type":405,"tag":470,"props":1068,"children":1070},{"className":1069},[],[1071],{"type":410,"value":1038},{"type":410,"value":1073}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":405,"tag":470,"props":1075,"children":1077},{"className":1076},[],[1078],{"type":410,"value":1038},{"type":410,"value":1080}," 为 ",{"type":405,"tag":470,"props":1082,"children":1084},{"className":1083},[],[1085],{"type":410,"value":1086},"SameOrigin",{"type":410,"value":1088},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":405,"tag":406,"props":1090,"children":1091},{},[1092,1094,1100,1102,1107,1108,1114,1116,1121],{"type":410,"value":1093},"本来它的值有三种选择，",{"type":405,"tag":470,"props":1095,"children":1097},{"className":1096},[],[1098],{"type":410,"value":1099},"Deny",{"type":410,"value":1101},"、",{"type":405,"tag":470,"props":1103,"children":1105},{"className":1104},[],[1106],{"type":410,"value":1086},{"type":410,"value":1101},{"type":405,"tag":470,"props":1109,"children":1111},{"className":1110},[],[1112],{"type":410,"value":1113},"AllowFrom",{"type":410,"value":1115},"。但 ",{"type":405,"tag":470,"props":1117,"children":1119},{"className":1118},[],[1120],{"type":410,"value":1113},{"type":410,"value":1122}," 因为其兼容性原因，被 Helmet 弃用：",{"type":405,"tag":406,"props":1124,"children":1125},{},[1126],{"type":405,"tag":1127,"props":1128,"children":1131},"img",{"alt":1129,"src":1130},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":405,"tag":406,"props":1133,"children":1134},{},[1135,1137,1142,1144,1150,1152,1157],{"type":410,"value":1136},"此外，可以在 ",{"type":405,"tag":470,"props":1138,"children":1140},{"className":1139},[],[1141],{"type":410,"value":955},{"type":410,"value":1143}," 中设置 ",{"type":405,"tag":470,"props":1145,"children":1147},{"className":1146},[],[1148],{"type":410,"value":1149},"frame-ancestors",{"type":410,"value":1151}," 指令来替代 ",{"type":405,"tag":470,"props":1153,"children":1155},{"className":1154},[],[1156],{"type":410,"value":1038},{"type":410,"value":984},{"type":405,"tag":674,"props":1159,"children":1161},{"id":1160},"移除-referer",[1162],{"type":410,"value":1163},"移除 Referer",{"type":405,"tag":406,"props":1165,"children":1166},{},[1167,1173,1175,1181,1192,1194,1199],{"type":405,"tag":470,"props":1168,"children":1170},{"className":1169},[],[1171],{"type":410,"value":1172},"Referrer-Policy",{"type":410,"value":1174}," 可以控制浏览器请求头的 ",{"type":405,"tag":470,"props":1176,"children":1178},{"className":1177},[],[1179],{"type":410,"value":1180},"Referer",{"type":405,"tag":413,"props":1182,"children":1183},{},[1184],{"type":405,"tag":417,"props":1185,"children":1189},{"href":1186,"ariaDescribedBy":1187,"dataFootnoteRef":398,"id":1188},"#user-content-fn-referer",[421],"user-content-fnref-referer",[1190],{"type":410,"value":1191},"7",{"type":410,"value":1193}," 的显示方式。移除 ",{"type":405,"tag":470,"props":1195,"children":1197},{"className":1196},[],[1198],{"type":410,"value":1180},{"type":410,"value":1200}," 能保护用户的访问记录，防止隐私泄漏。",{"type":405,"tag":463,"props":1202,"children":1204},{"code":1203,"language":466,"meta":398,"className":467,"style":398},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1205],{"type":405,"tag":470,"props":1206,"children":1207},{"__ignoreMap":398},[1208,1239,1248,1270,1278,1298,1307,1328,1337,1358,1367,1388,1397,1418,1427,1448,1457,1478,1487,1496,1505,1566,1640,1671,1684,1693,1736,1745,1780,1813,1867,1912,1925,1934],{"type":405,"tag":474,"props":1209,"children":1210},{"class":476,"line":477},[1211,1215,1220,1224,1229,1234],{"type":405,"tag":474,"props":1212,"children":1213},{"style":481},[1214],{"type":410,"value":484},{"type":405,"tag":474,"props":1216,"children":1217},{"style":487},[1218],{"type":410,"value":1219}," ALLOWED_TOKENS",{"type":405,"tag":474,"props":1221,"children":1222},{"style":493},[1223],{"type":410,"value":496},{"type":405,"tag":474,"props":1225,"children":1226},{"style":493},[1227],{"type":410,"value":1228}," new",{"type":405,"tag":474,"props":1230,"children":1231},{"style":499},[1232],{"type":410,"value":1233}," Set",{"type":405,"tag":474,"props":1235,"children":1236},{"style":505},[1237],{"type":410,"value":1238},"([\n",{"type":405,"tag":474,"props":1240,"children":1241},{"class":476,"line":532},[1242],{"type":405,"tag":474,"props":1243,"children":1245},{"style":1244},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1246],{"type":410,"value":1247},"  // 任何时候都不携带 Referer\n",{"type":405,"tag":474,"props":1249,"children":1250},{"class":476,"line":541},[1251,1256,1261,1265],{"type":405,"tag":474,"props":1252,"children":1253},{"style":511},[1254],{"type":410,"value":1255},"  '",{"type":405,"tag":474,"props":1257,"children":1258},{"style":517},[1259],{"type":410,"value":1260},"no-referrer",{"type":405,"tag":474,"props":1262,"children":1263},{"style":511},[1264],{"type":410,"value":514},{"type":405,"tag":474,"props":1266,"children":1267},{"style":584},[1268],{"type":410,"value":1269},",\n",{"type":405,"tag":474,"props":1271,"children":1272},{"class":476,"line":567},[1273],{"type":405,"tag":474,"props":1274,"children":1275},{"style":1244},[1276],{"type":410,"value":1277},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":405,"tag":474,"props":1279,"children":1280},{"class":476,"line":575},[1281,1285,1290,1294],{"type":405,"tag":474,"props":1282,"children":1283},{"style":511},[1284],{"type":410,"value":1255},{"type":405,"tag":474,"props":1286,"children":1287},{"style":517},[1288],{"type":410,"value":1289},"no-referrer-when-downgrade",{"type":405,"tag":474,"props":1291,"children":1292},{"style":511},[1293],{"type":410,"value":514},{"type":405,"tag":474,"props":1295,"children":1296},{"style":584},[1297],{"type":410,"value":1269},{"type":405,"tag":474,"props":1299,"children":1301},{"class":476,"line":1300},6,[1302],{"type":405,"tag":474,"props":1303,"children":1304},{"style":1244},[1305],{"type":410,"value":1306},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":405,"tag":474,"props":1308,"children":1310},{"class":476,"line":1309},7,[1311,1315,1320,1324],{"type":405,"tag":474,"props":1312,"children":1313},{"style":511},[1314],{"type":410,"value":1255},{"type":405,"tag":474,"props":1316,"children":1317},{"style":517},[1318],{"type":410,"value":1319},"same-origin",{"type":405,"tag":474,"props":1321,"children":1322},{"style":511},[1323],{"type":410,"value":514},{"type":405,"tag":474,"props":1325,"children":1326},{"style":584},[1327],{"type":410,"value":1269},{"type":405,"tag":474,"props":1329,"children":1331},{"class":476,"line":1330},8,[1332],{"type":405,"tag":474,"props":1333,"children":1334},{"style":1244},[1335],{"type":410,"value":1336},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":405,"tag":474,"props":1338,"children":1340},{"class":476,"line":1339},9,[1341,1345,1350,1354],{"type":405,"tag":474,"props":1342,"children":1343},{"style":511},[1344],{"type":410,"value":1255},{"type":405,"tag":474,"props":1346,"children":1347},{"style":517},[1348],{"type":410,"value":1349},"origin",{"type":405,"tag":474,"props":1351,"children":1352},{"style":511},[1353],{"type":410,"value":514},{"type":405,"tag":474,"props":1355,"children":1356},{"style":584},[1357],{"type":410,"value":1269},{"type":405,"tag":474,"props":1359,"children":1361},{"class":476,"line":1360},10,[1362],{"type":405,"tag":474,"props":1363,"children":1364},{"style":1244},[1365],{"type":410,"value":1366},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":405,"tag":474,"props":1368,"children":1370},{"class":476,"line":1369},11,[1371,1375,1380,1384],{"type":405,"tag":474,"props":1372,"children":1373},{"style":511},[1374],{"type":410,"value":1255},{"type":405,"tag":474,"props":1376,"children":1377},{"style":517},[1378],{"type":410,"value":1379},"strict-origin",{"type":405,"tag":474,"props":1381,"children":1382},{"style":511},[1383],{"type":410,"value":514},{"type":405,"tag":474,"props":1385,"children":1386},{"style":584},[1387],{"type":410,"value":1269},{"type":405,"tag":474,"props":1389,"children":1391},{"class":476,"line":1390},12,[1392],{"type":405,"tag":474,"props":1393,"children":1394},{"style":1244},[1395],{"type":410,"value":1396},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":405,"tag":474,"props":1398,"children":1400},{"class":476,"line":1399},13,[1401,1405,1410,1414],{"type":405,"tag":474,"props":1402,"children":1403},{"style":511},[1404],{"type":410,"value":1255},{"type":405,"tag":474,"props":1406,"children":1407},{"style":517},[1408],{"type":410,"value":1409},"origin-when-cross-origin",{"type":405,"tag":474,"props":1411,"children":1412},{"style":511},[1413],{"type":410,"value":514},{"type":405,"tag":474,"props":1415,"children":1416},{"style":584},[1417],{"type":410,"value":1269},{"type":405,"tag":474,"props":1419,"children":1421},{"class":476,"line":1420},14,[1422],{"type":405,"tag":474,"props":1423,"children":1424},{"style":1244},[1425],{"type":410,"value":1426},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":405,"tag":474,"props":1428,"children":1430},{"class":476,"line":1429},15,[1431,1435,1440,1444],{"type":405,"tag":474,"props":1432,"children":1433},{"style":511},[1434],{"type":410,"value":1255},{"type":405,"tag":474,"props":1436,"children":1437},{"style":517},[1438],{"type":410,"value":1439},"strict-origin-when-cross-origin",{"type":405,"tag":474,"props":1441,"children":1442},{"style":511},[1443],{"type":410,"value":514},{"type":405,"tag":474,"props":1445,"children":1446},{"style":584},[1447],{"type":410,"value":1269},{"type":405,"tag":474,"props":1449,"children":1451},{"class":476,"line":1450},16,[1452],{"type":405,"tag":474,"props":1453,"children":1454},{"style":1244},[1455],{"type":410,"value":1456},"  // 所有请求都携带上完整的 Referer\n",{"type":405,"tag":474,"props":1458,"children":1460},{"class":476,"line":1459},17,[1461,1465,1470,1474],{"type":405,"tag":474,"props":1462,"children":1463},{"style":511},[1464],{"type":410,"value":1255},{"type":405,"tag":474,"props":1466,"children":1467},{"style":517},[1468],{"type":410,"value":1469},"unsafe-url",{"type":405,"tag":474,"props":1471,"children":1472},{"style":511},[1473],{"type":410,"value":514},{"type":405,"tag":474,"props":1475,"children":1476},{"style":584},[1477],{"type":410,"value":1269},{"type":405,"tag":474,"props":1479,"children":1481},{"class":476,"line":1480},18,[1482],{"type":405,"tag":474,"props":1483,"children":1484},{"style":1244},[1485],{"type":410,"value":1486},"  // 无策略\n",{"type":405,"tag":474,"props":1488,"children":1490},{"class":476,"line":1489},19,[1491],{"type":405,"tag":474,"props":1492,"children":1493},{"style":511},[1494],{"type":410,"value":1495},"  ''\n",{"type":405,"tag":474,"props":1497,"children":1499},{"class":476,"line":1498},20,[1500],{"type":405,"tag":474,"props":1501,"children":1502},{"style":505},[1503],{"type":410,"value":1504},"])\n",{"type":405,"tag":474,"props":1506,"children":1508},{"class":476,"line":1507},21,[1509,1514,1519,1524,1530,1534,1539,1543,1547,1551,1556,1561],{"type":405,"tag":474,"props":1510,"children":1511},{"style":481},[1512],{"type":410,"value":1513},"function",{"type":405,"tag":474,"props":1515,"children":1516},{"style":499},[1517],{"type":410,"value":1518}," getHeaderValueFromOptions",{"type":405,"tag":474,"props":1520,"children":1521},{"style":584},[1522],{"type":410,"value":1523},"({",{"type":405,"tag":474,"props":1525,"children":1527},{"style":1526},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1528],{"type":410,"value":1529}," policy",{"type":405,"tag":474,"props":1531,"children":1532},{"style":493},[1533],{"type":410,"value":496},{"type":405,"tag":474,"props":1535,"children":1536},{"style":505},[1537],{"type":410,"value":1538}," [",{"type":405,"tag":474,"props":1540,"children":1541},{"style":511},[1542],{"type":410,"value":514},{"type":405,"tag":474,"props":1544,"children":1545},{"style":517},[1546],{"type":410,"value":1260},{"type":405,"tag":474,"props":1548,"children":1549},{"style":511},[1550],{"type":410,"value":514},{"type":405,"tag":474,"props":1552,"children":1553},{"style":505},[1554],{"type":410,"value":1555},"] ",{"type":405,"tag":474,"props":1557,"children":1558},{"style":584},[1559],{"type":410,"value":1560},"})",{"type":405,"tag":474,"props":1562,"children":1563},{"style":584},[1564],{"type":410,"value":1565}," {\n",{"type":405,"tag":474,"props":1567,"children":1569},{"class":476,"line":1568},22,[1570,1575,1580,1584,1589,1593,1598,1602,1607,1611,1616,1621,1626,1630,1635],{"type":405,"tag":474,"props":1571,"children":1572},{"style":481},[1573],{"type":410,"value":1574},"  const",{"type":405,"tag":474,"props":1576,"children":1577},{"style":487},[1578],{"type":410,"value":1579}," tokens",{"type":405,"tag":474,"props":1581,"children":1582},{"style":493},[1583],{"type":410,"value":496},{"type":405,"tag":474,"props":1585,"children":1586},{"style":493},[1587],{"type":410,"value":1588}," typeof",{"type":405,"tag":474,"props":1590,"children":1591},{"style":505},[1592],{"type":410,"value":1529},{"type":405,"tag":474,"props":1594,"children":1595},{"style":493},[1596],{"type":410,"value":1597}," ===",{"type":405,"tag":474,"props":1599,"children":1600},{"style":511},[1601],{"type":410,"value":804},{"type":405,"tag":474,"props":1603,"children":1604},{"style":517},[1605],{"type":410,"value":1606},"string",{"type":405,"tag":474,"props":1608,"children":1609},{"style":511},[1610],{"type":410,"value":514},{"type":405,"tag":474,"props":1612,"children":1613},{"style":493},[1614],{"type":410,"value":1615}," ?",{"type":405,"tag":474,"props":1617,"children":1619},{"style":1618},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1620],{"type":410,"value":1538},{"type":405,"tag":474,"props":1622,"children":1623},{"style":505},[1624],{"type":410,"value":1625},"policy",{"type":405,"tag":474,"props":1627,"children":1628},{"style":1618},[1629],{"type":410,"value":1555},{"type":405,"tag":474,"props":1631,"children":1632},{"style":493},[1633],{"type":410,"value":1634},":",{"type":405,"tag":474,"props":1636,"children":1637},{"style":505},[1638],{"type":410,"value":1639}," policy\n",{"type":405,"tag":474,"props":1641,"children":1643},{"class":476,"line":1642},23,[1644,1649,1653,1658,1662,1667],{"type":405,"tag":474,"props":1645,"children":1646},{"style":505},[1647],{"type":410,"value":1648},"    tokensSeen",{"type":405,"tag":474,"props":1650,"children":1651},{"style":584},[1652],{"type":410,"value":587},{"type":405,"tag":474,"props":1654,"children":1655},{"style":499},[1656],{"type":410,"value":1657},"add",{"type":405,"tag":474,"props":1659,"children":1660},{"style":1618},[1661],{"type":410,"value":508},{"type":405,"tag":474,"props":1663,"children":1664},{"style":505},[1665],{"type":410,"value":1666},"token",{"type":405,"tag":474,"props":1668,"children":1669},{"style":1618},[1670],{"type":410,"value":529},{"type":405,"tag":474,"props":1672,"children":1674},{"class":476,"line":1673},24,[1675,1680],{"type":405,"tag":474,"props":1676,"children":1677},{"style":584},[1678],{"type":410,"value":1679},"  }",{"type":405,"tag":474,"props":1681,"children":1682},{"style":505},[1683],{"type":410,"value":529},{"type":405,"tag":474,"props":1685,"children":1687},{"class":476,"line":1686},25,[1688],{"type":405,"tag":474,"props":1689,"children":1690},{"style":1244},[1691],{"type":410,"value":1692},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":405,"tag":474,"props":1694,"children":1696},{"class":476,"line":1695},26,[1697,1703,1707,1711,1716,1720,1724,1728,1732],{"type":405,"tag":474,"props":1698,"children":1700},{"style":1699},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1701],{"type":410,"value":1702},"  return",{"type":405,"tag":474,"props":1704,"children":1705},{"style":505},[1706],{"type":410,"value":1579},{"type":405,"tag":474,"props":1708,"children":1709},{"style":584},[1710],{"type":410,"value":587},{"type":405,"tag":474,"props":1712,"children":1713},{"style":499},[1714],{"type":410,"value":1715},"join",{"type":405,"tag":474,"props":1717,"children":1718},{"style":505},[1719],{"type":410,"value":508},{"type":405,"tag":474,"props":1721,"children":1722},{"style":511},[1723],{"type":410,"value":514},{"type":405,"tag":474,"props":1725,"children":1726},{"style":517},[1727],{"type":410,"value":799},{"type":405,"tag":474,"props":1729,"children":1730},{"style":511},[1731],{"type":410,"value":514},{"type":405,"tag":474,"props":1733,"children":1734},{"style":505},[1735],{"type":410,"value":529},{"type":405,"tag":474,"props":1737,"children":1739},{"class":476,"line":1738},27,[1740],{"type":405,"tag":474,"props":1741,"children":1742},{"style":505},[1743],{"type":410,"value":1744},"}\n",{"type":405,"tag":474,"props":1746,"children":1748},{"class":476,"line":1747},28,[1749,1753,1758,1762,1767,1771,1776],{"type":405,"tag":474,"props":1750,"children":1751},{"style":481},[1752],{"type":410,"value":1513},{"type":405,"tag":474,"props":1754,"children":1755},{"style":499},[1756],{"type":410,"value":1757}," referrerPolicy",{"type":405,"tag":474,"props":1759,"children":1760},{"style":584},[1761],{"type":410,"value":508},{"type":405,"tag":474,"props":1763,"children":1764},{"style":1526},[1765],{"type":410,"value":1766},"options",{"type":405,"tag":474,"props":1768,"children":1769},{"style":493},[1770],{"type":410,"value":496},{"type":405,"tag":474,"props":1772,"children":1773},{"style":584},[1774],{"type":410,"value":1775}," {})",{"type":405,"tag":474,"props":1777,"children":1778},{"style":584},[1779],{"type":410,"value":1565},{"type":405,"tag":474,"props":1781,"children":1783},{"class":476,"line":1782},29,[1784,1788,1793,1797,1801,1805,1809],{"type":405,"tag":474,"props":1785,"children":1786},{"style":481},[1787],{"type":410,"value":1574},{"type":405,"tag":474,"props":1789,"children":1790},{"style":487},[1791],{"type":410,"value":1792}," headerValue",{"type":405,"tag":474,"props":1794,"children":1795},{"style":493},[1796],{"type":410,"value":496},{"type":405,"tag":474,"props":1798,"children":1799},{"style":499},[1800],{"type":410,"value":1518},{"type":405,"tag":474,"props":1802,"children":1803},{"style":1618},[1804],{"type":410,"value":508},{"type":405,"tag":474,"props":1806,"children":1807},{"style":505},[1808],{"type":410,"value":1766},{"type":405,"tag":474,"props":1810,"children":1811},{"style":1618},[1812],{"type":410,"value":529},{"type":405,"tag":474,"props":1814,"children":1816},{"class":476,"line":1815},30,[1817,1821,1826,1831,1835,1840,1844,1849,1853,1858,1863],{"type":405,"tag":474,"props":1818,"children":1819},{"style":1699},[1820],{"type":410,"value":1702},{"type":405,"tag":474,"props":1822,"children":1823},{"style":481},[1824],{"type":410,"value":1825}," function",{"type":405,"tag":474,"props":1827,"children":1828},{"style":499},[1829],{"type":410,"value":1830}," referrerPolicyMiddleware",{"type":405,"tag":474,"props":1832,"children":1833},{"style":584},[1834],{"type":410,"value":508},{"type":405,"tag":474,"props":1836,"children":1837},{"style":1526},[1838],{"type":410,"value":1839},"_req",{"type":405,"tag":474,"props":1841,"children":1842},{"style":584},[1843],{"type":410,"value":799},{"type":405,"tag":474,"props":1845,"children":1846},{"style":1526},[1847],{"type":410,"value":1848}," res",{"type":405,"tag":474,"props":1850,"children":1851},{"style":584},[1852],{"type":410,"value":799},{"type":405,"tag":474,"props":1854,"children":1855},{"style":1526},[1856],{"type":410,"value":1857}," next",{"type":405,"tag":474,"props":1859,"children":1860},{"style":584},[1861],{"type":410,"value":1862},")",{"type":405,"tag":474,"props":1864,"children":1865},{"style":584},[1866],{"type":410,"value":1565},{"type":405,"tag":474,"props":1868,"children":1870},{"class":476,"line":1869},31,[1871,1876,1880,1884,1888,1892,1896,1900,1904,1908],{"type":405,"tag":474,"props":1872,"children":1873},{"style":505},[1874],{"type":410,"value":1875},"    res",{"type":405,"tag":474,"props":1877,"children":1878},{"style":584},[1879],{"type":410,"value":587},{"type":405,"tag":474,"props":1881,"children":1882},{"style":499},[1883],{"type":410,"value":777},{"type":405,"tag":474,"props":1885,"children":1886},{"style":1618},[1887],{"type":410,"value":508},{"type":405,"tag":474,"props":1889,"children":1890},{"style":511},[1891],{"type":410,"value":514},{"type":405,"tag":474,"props":1893,"children":1894},{"style":517},[1895],{"type":410,"value":1172},{"type":405,"tag":474,"props":1897,"children":1898},{"style":511},[1899],{"type":410,"value":514},{"type":405,"tag":474,"props":1901,"children":1902},{"style":584},[1903],{"type":410,"value":799},{"type":405,"tag":474,"props":1905,"children":1906},{"style":505},[1907],{"type":410,"value":1792},{"type":405,"tag":474,"props":1909,"children":1910},{"style":1618},[1911],{"type":410,"value":529},{"type":405,"tag":474,"props":1913,"children":1915},{"class":476,"line":1914},32,[1916,1921],{"type":405,"tag":474,"props":1917,"children":1918},{"style":499},[1919],{"type":410,"value":1920},"    next",{"type":405,"tag":474,"props":1922,"children":1923},{"style":1618},[1924],{"type":410,"value":564},{"type":405,"tag":474,"props":1926,"children":1928},{"class":476,"line":1927},33,[1929],{"type":405,"tag":474,"props":1930,"children":1931},{"style":584},[1932],{"type":410,"value":1933},"  }\n",{"type":405,"tag":474,"props":1935,"children":1937},{"class":476,"line":1936},34,[1938],{"type":405,"tag":474,"props":1939,"children":1940},{"style":584},[1941],{"type":410,"value":1744},{"type":405,"tag":406,"props":1943,"children":1944},{},[1945,1947,1953,1955,1960],{"type":410,"value":1946},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":405,"tag":470,"props":1948,"children":1950},{"className":1949},[],[1951],{"type":410,"value":1952},"Referrer Policy",{"type":410,"value":1954},"。Meta 标签设置的 ",{"type":405,"tag":470,"props":1956,"children":1958},{"className":1957},[],[1959],{"type":410,"value":1952},{"type":410,"value":1961}," 对整个页面都有效果（但优先级最低）。",{"type":405,"tag":463,"props":1963,"children":1967},{"code":1964,"language":1965,"meta":398,"className":1966,"style":398},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1968],{"type":405,"tag":470,"props":1969,"children":1970},{"__ignoreMap":398},[1971,2036,2104],{"type":405,"tag":474,"props":1972,"children":1973},{"class":476,"line":477},[1974,1979,1985,1991,1996,2001,2006,2010,2015,2019,2023,2027,2031],{"type":405,"tag":474,"props":1975,"children":1976},{"style":584},[1977],{"type":410,"value":1978},"\u003C",{"type":405,"tag":474,"props":1980,"children":1982},{"style":1981},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1983],{"type":410,"value":1984},"meta",{"type":405,"tag":474,"props":1986,"children":1988},{"style":1987},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1989],{"type":410,"value":1990}," name",{"type":405,"tag":474,"props":1992,"children":1993},{"style":584},[1994],{"type":410,"value":1995},"=",{"type":405,"tag":474,"props":1997,"children":1998},{"style":511},[1999],{"type":410,"value":2000},"\"",{"type":405,"tag":474,"props":2002,"children":2003},{"style":517},[2004],{"type":410,"value":2005},"referrer",{"type":405,"tag":474,"props":2007,"children":2008},{"style":511},[2009],{"type":410,"value":2000},{"type":405,"tag":474,"props":2011,"children":2012},{"style":1987},[2013],{"type":410,"value":2014}," content",{"type":405,"tag":474,"props":2016,"children":2017},{"style":584},[2018],{"type":410,"value":1995},{"type":405,"tag":474,"props":2020,"children":2021},{"style":511},[2022],{"type":410,"value":2000},{"type":405,"tag":474,"props":2024,"children":2025},{"style":517},[2026],{"type":410,"value":1349},{"type":405,"tag":474,"props":2028,"children":2029},{"style":511},[2030],{"type":410,"value":2000},{"type":405,"tag":474,"props":2032,"children":2033},{"style":584},[2034],{"type":410,"value":2035}," />\n",{"type":405,"tag":474,"props":2037,"children":2038},{"class":476,"line":532},[2039,2043,2047,2052,2056,2060,2065,2069,2074,2078,2082,2086,2090,2095,2099],{"type":405,"tag":474,"props":2040,"children":2041},{"style":584},[2042],{"type":410,"value":1978},{"type":405,"tag":474,"props":2044,"children":2045},{"style":1981},[2046],{"type":410,"value":417},{"type":405,"tag":474,"props":2048,"children":2049},{"style":1987},[2050],{"type":410,"value":2051}," href",{"type":405,"tag":474,"props":2053,"children":2054},{"style":584},[2055],{"type":410,"value":1995},{"type":405,"tag":474,"props":2057,"children":2058},{"style":511},[2059],{"type":410,"value":2000},{"type":405,"tag":474,"props":2061,"children":2062},{"style":517},[2063],{"type":410,"value":2064},"http://example.com",{"type":405,"tag":474,"props":2066,"children":2067},{"style":511},[2068],{"type":410,"value":2000},{"type":405,"tag":474,"props":2070,"children":2071},{"style":1987},[2072],{"type":410,"value":2073}," referrerpolicy",{"type":405,"tag":474,"props":2075,"children":2076},{"style":584},[2077],{"type":410,"value":1995},{"type":405,"tag":474,"props":2079,"children":2080},{"style":511},[2081],{"type":410,"value":2000},{"type":405,"tag":474,"props":2083,"children":2084},{"style":517},[2085],{"type":410,"value":1349},{"type":405,"tag":474,"props":2087,"children":2088},{"style":511},[2089],{"type":410,"value":2000},{"type":405,"tag":474,"props":2091,"children":2092},{"style":584},[2093],{"type":410,"value":2094},">\u003C/",{"type":405,"tag":474,"props":2096,"children":2097},{"style":1981},[2098],{"type":410,"value":417},{"type":405,"tag":474,"props":2100,"children":2101},{"style":584},[2102],{"type":410,"value":2103},">\n",{"type":405,"tag":474,"props":2105,"children":2106},{"class":476,"line":541},[2107,2111,2115,2119,2123,2127,2131,2135,2140,2144,2148,2153,2157,2161,2165],{"type":405,"tag":474,"props":2108,"children":2109},{"style":584},[2110],{"type":410,"value":1978},{"type":405,"tag":474,"props":2112,"children":2113},{"style":1981},[2114],{"type":410,"value":417},{"type":405,"tag":474,"props":2116,"children":2117},{"style":1987},[2118],{"type":410,"value":2051},{"type":405,"tag":474,"props":2120,"children":2121},{"style":584},[2122],{"type":410,"value":1995},{"type":405,"tag":474,"props":2124,"children":2125},{"style":511},[2126],{"type":410,"value":2000},{"type":405,"tag":474,"props":2128,"children":2129},{"style":517},[2130],{"type":410,"value":2064},{"type":405,"tag":474,"props":2132,"children":2133},{"style":511},[2134],{"type":410,"value":2000},{"type":405,"tag":474,"props":2136,"children":2137},{"style":1987},[2138],{"type":410,"value":2139}," rel",{"type":405,"tag":474,"props":2141,"children":2142},{"style":584},[2143],{"type":410,"value":1995},{"type":405,"tag":474,"props":2145,"children":2146},{"style":511},[2147],{"type":410,"value":2000},{"type":405,"tag":474,"props":2149,"children":2150},{"style":517},[2151],{"type":410,"value":2152},"noreferrer",{"type":405,"tag":474,"props":2154,"children":2155},{"style":511},[2156],{"type":410,"value":2000},{"type":405,"tag":474,"props":2158,"children":2159},{"style":584},[2160],{"type":410,"value":2094},{"type":405,"tag":474,"props":2162,"children":2163},{"style":1981},[2164],{"type":410,"value":417},{"type":405,"tag":474,"props":2166,"children":2167},{"style":584},[2168],{"type":410,"value":2103},{"type":405,"tag":674,"props":2170,"children":2172},{"id":2171},"强制使用-https",[2173],{"type":410,"value":2174},"强制使用 HTTPS",{"type":405,"tag":406,"props":2176,"children":2177},{},[2178,2180,2186,2188,2199],{"type":410,"value":2179},"通过设置请求头的 ",{"type":405,"tag":470,"props":2181,"children":2183},{"className":2182},[],[2184],{"type":410,"value":2185},"Strict-Transport-Security（STS）",{"type":410,"value":2187},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":405,"tag":413,"props":2189,"children":2190},{},[2191],{"type":405,"tag":417,"props":2192,"children":2196},{"href":2193,"ariaDescribedBy":2194,"dataFootnoteRef":398,"id":2195},"#user-content-fn-timeend",[421],"user-content-fnref-timeend",[2197],{"type":410,"value":2198},"8",{"type":410,"value":984},{"type":405,"tag":406,"props":2201,"children":2202},{},[2203,2205,2211,2213,2219,2221,2227,2229,2235,2237,2242],{"type":410,"value":2204},"这个规范本身很好理解，通过 ",{"type":405,"tag":470,"props":2206,"children":2208},{"className":2207},[],[2209],{"type":410,"value":2210},"max-age",{"type":410,"value":2212}," 可以指定倒计时时间；",{"type":405,"tag":470,"props":2214,"children":2216},{"className":2215},[],[2217],{"type":410,"value":2218},"includesSubDomains",{"type":410,"value":2220}," 指定子域的 ",{"type":405,"tag":470,"props":2222,"children":2224},{"className":2223},[],[2225],{"type":410,"value":2226},"HSTS",{"type":410,"value":2228},"；",{"type":405,"tag":470,"props":2230,"children":2232},{"className":2231},[],[2233],{"type":410,"value":2234},"preload",{"type":410,"value":2236}," 指定预加载内容的 ",{"type":405,"tag":470,"props":2238,"children":2240},{"className":2239},[],[2241],{"type":410,"value":2226},{"type":410,"value":984},{"type":405,"tag":463,"props":2244,"children":2246},{"code":2245},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2247],{"type":405,"tag":470,"props":2248,"children":2249},{"__ignoreMap":398},[2250],{"type":410,"value":2245},{"type":405,"tag":463,"props":2252,"children":2254},{"code":2253,"language":466,"meta":398,"className":467,"style":398},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2255],{"type":405,"tag":470,"props":2256,"children":2257},{"__ignoreMap":398},[2258,2320,2347,2420,2483,2520,2527,2580,2620,2627,2659,2690,2738,2782,2793,2800],{"type":405,"tag":474,"props":2259,"children":2260},{"class":476,"line":477},[2261,2265,2270,2274,2279,2283,2289,2294,2299,2303,2308,2312,2316],{"type":405,"tag":474,"props":2262,"children":2263},{"style":481},[2264],{"type":410,"value":484},{"type":405,"tag":474,"props":2266,"children":2267},{"style":487},[2268],{"type":410,"value":2269}," DEFAULT_MAX_AGE",{"type":405,"tag":474,"props":2271,"children":2272},{"style":493},[2273],{"type":410,"value":496},{"type":405,"tag":474,"props":2275,"children":2276},{"style":499},[2277],{"type":410,"value":2278}," String",{"type":405,"tag":474,"props":2280,"children":2281},{"style":505},[2282],{"type":410,"value":508},{"type":405,"tag":474,"props":2284,"children":2286},{"style":2285},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2287],{"type":410,"value":2288},"180",{"type":405,"tag":474,"props":2290,"children":2291},{"style":493},[2292],{"type":410,"value":2293}," *",{"type":405,"tag":474,"props":2295,"children":2296},{"style":2285},[2297],{"type":410,"value":2298}," 24",{"type":405,"tag":474,"props":2300,"children":2301},{"style":493},[2302],{"type":410,"value":2293},{"type":405,"tag":474,"props":2304,"children":2305},{"style":2285},[2306],{"type":410,"value":2307}," 60",{"type":405,"tag":474,"props":2309,"children":2310},{"style":493},[2311],{"type":410,"value":2293},{"type":405,"tag":474,"props":2313,"children":2314},{"style":2285},[2315],{"type":410,"value":2307},{"type":405,"tag":474,"props":2317,"children":2318},{"style":505},[2319],{"type":410,"value":529},{"type":405,"tag":474,"props":2321,"children":2322},{"class":476,"line":532},[2323,2327,2331,2335,2339,2343],{"type":405,"tag":474,"props":2324,"children":2325},{"style":481},[2326],{"type":410,"value":1513},{"type":405,"tag":474,"props":2328,"children":2329},{"style":499},[2330],{"type":410,"value":1518},{"type":405,"tag":474,"props":2332,"children":2333},{"style":584},[2334],{"type":410,"value":508},{"type":405,"tag":474,"props":2336,"children":2337},{"style":1526},[2338],{"type":410,"value":1766},{"type":405,"tag":474,"props":2340,"children":2341},{"style":584},[2342],{"type":410,"value":1862},{"type":405,"tag":474,"props":2344,"children":2345},{"style":584},[2346],{"type":410,"value":1565},{"type":405,"tag":474,"props":2348,"children":2349},{"class":476,"line":541},[2350,2354,2359,2363,2367,2372,2377,2383,2387,2392,2397,2402,2406,2411,2415],{"type":405,"tag":474,"props":2351,"children":2352},{"style":481},[2353],{"type":410,"value":1574},{"type":405,"tag":474,"props":2355,"children":2356},{"style":487},[2357],{"type":410,"value":2358}," directives",{"type":405,"tag":474,"props":2360,"children":2361},{"style":493},[2362],{"type":410,"value":496},{"type":405,"tag":474,"props":2364,"children":2365},{"style":1618},[2366],{"type":410,"value":1538},{"type":405,"tag":474,"props":2368,"children":2369},{"style":511},[2370],{"type":410,"value":2371},"`",{"type":405,"tag":474,"props":2373,"children":2374},{"style":517},[2375],{"type":410,"value":2376},"max-age=",{"type":405,"tag":474,"props":2378,"children":2380},{"style":2379},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2381],{"type":410,"value":2382},"${",{"type":405,"tag":474,"props":2384,"children":2385},{"style":505},[2386],{"type":410,"value":1766},{"type":405,"tag":474,"props":2388,"children":2390},{"style":2389},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2391],{"type":410,"value":587},{"type":405,"tag":474,"props":2393,"children":2394},{"style":505},[2395],{"type":410,"value":2396},"maxAge",{"type":405,"tag":474,"props":2398,"children":2399},{"style":493},[2400],{"type":410,"value":2401}," ||",{"type":405,"tag":474,"props":2403,"children":2404},{"style":487},[2405],{"type":410,"value":2269},{"type":405,"tag":474,"props":2407,"children":2408},{"style":2379},[2409],{"type":410,"value":2410},"}",{"type":405,"tag":474,"props":2412,"children":2413},{"style":511},[2414],{"type":410,"value":2371},{"type":405,"tag":474,"props":2416,"children":2417},{"style":1618},[2418],{"type":410,"value":2419},"]\n",{"type":405,"tag":474,"props":2421,"children":2422},{"class":476,"line":567},[2423,2428,2433,2437,2441,2446,2450,2456,2460,2465,2469,2473,2478],{"type":405,"tag":474,"props":2424,"children":2425},{"style":1699},[2426],{"type":410,"value":2427},"  if",{"type":405,"tag":474,"props":2429,"children":2430},{"style":1618},[2431],{"type":410,"value":2432}," (",{"type":405,"tag":474,"props":2434,"children":2435},{"style":505},[2436],{"type":410,"value":1766},{"type":405,"tag":474,"props":2438,"children":2439},{"style":584},[2440],{"type":410,"value":587},{"type":405,"tag":474,"props":2442,"children":2443},{"style":505},[2444],{"type":410,"value":2445},"includeSubDomains",{"type":405,"tag":474,"props":2447,"children":2448},{"style":493},[2449],{"type":410,"value":1597},{"type":405,"tag":474,"props":2451,"children":2453},{"style":2452},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2454],{"type":410,"value":2455}," undefined",{"type":405,"tag":474,"props":2457,"children":2458},{"style":493},[2459],{"type":410,"value":2401},{"type":405,"tag":474,"props":2461,"children":2462},{"style":505},[2463],{"type":410,"value":2464}," options",{"type":405,"tag":474,"props":2466,"children":2467},{"style":584},[2468],{"type":410,"value":587},{"type":405,"tag":474,"props":2470,"children":2471},{"style":505},[2472],{"type":410,"value":2445},{"type":405,"tag":474,"props":2474,"children":2475},{"style":1618},[2476],{"type":410,"value":2477},") ",{"type":405,"tag":474,"props":2479,"children":2480},{"style":584},[2481],{"type":410,"value":2482},"{\n",{"type":405,"tag":474,"props":2484,"children":2485},{"class":476,"line":575},[2486,2491,2495,2500,2504,2508,2512,2516],{"type":405,"tag":474,"props":2487,"children":2488},{"style":505},[2489],{"type":410,"value":2490},"    directives",{"type":405,"tag":474,"props":2492,"children":2493},{"style":584},[2494],{"type":410,"value":587},{"type":405,"tag":474,"props":2496,"children":2497},{"style":499},[2498],{"type":410,"value":2499},"push",{"type":405,"tag":474,"props":2501,"children":2502},{"style":1618},[2503],{"type":410,"value":508},{"type":405,"tag":474,"props":2505,"children":2506},{"style":511},[2507],{"type":410,"value":514},{"type":405,"tag":474,"props":2509,"children":2510},{"style":517},[2511],{"type":410,"value":2445},{"type":405,"tag":474,"props":2513,"children":2514},{"style":511},[2515],{"type":410,"value":514},{"type":405,"tag":474,"props":2517,"children":2518},{"style":1618},[2519],{"type":410,"value":529},{"type":405,"tag":474,"props":2521,"children":2522},{"class":476,"line":1300},[2523],{"type":405,"tag":474,"props":2524,"children":2525},{"style":584},[2526],{"type":410,"value":1933},{"type":405,"tag":474,"props":2528,"children":2529},{"class":476,"line":1309},[2530,2535,2539,2543,2548,2552,2556,2560,2564,2568,2572,2576],{"type":405,"tag":474,"props":2531,"children":2532},{"style":505},[2533],{"type":410,"value":2534},"  options",{"type":405,"tag":474,"props":2536,"children":2537},{"style":584},[2538],{"type":410,"value":587},{"type":405,"tag":474,"props":2540,"children":2541},{"style":505},[2542],{"type":410,"value":2234},{"type":405,"tag":474,"props":2544,"children":2545},{"style":493},[2546],{"type":410,"value":2547}," &&",{"type":405,"tag":474,"props":2549,"children":2550},{"style":505},[2551],{"type":410,"value":2358},{"type":405,"tag":474,"props":2553,"children":2554},{"style":584},[2555],{"type":410,"value":587},{"type":405,"tag":474,"props":2557,"children":2558},{"style":499},[2559],{"type":410,"value":2499},{"type":405,"tag":474,"props":2561,"children":2562},{"style":1618},[2563],{"type":410,"value":508},{"type":405,"tag":474,"props":2565,"children":2566},{"style":511},[2567],{"type":410,"value":514},{"type":405,"tag":474,"props":2569,"children":2570},{"style":517},[2571],{"type":410,"value":2234},{"type":405,"tag":474,"props":2573,"children":2574},{"style":511},[2575],{"type":410,"value":514},{"type":405,"tag":474,"props":2577,"children":2578},{"style":1618},[2579],{"type":410,"value":529},{"type":405,"tag":474,"props":2581,"children":2582},{"class":476,"line":1330},[2583,2587,2591,2595,2599,2603,2607,2612,2616],{"type":405,"tag":474,"props":2584,"children":2585},{"style":1699},[2586],{"type":410,"value":1702},{"type":405,"tag":474,"props":2588,"children":2589},{"style":505},[2590],{"type":410,"value":2358},{"type":405,"tag":474,"props":2592,"children":2593},{"style":584},[2594],{"type":410,"value":587},{"type":405,"tag":474,"props":2596,"children":2597},{"style":499},[2598],{"type":410,"value":1715},{"type":405,"tag":474,"props":2600,"children":2601},{"style":1618},[2602],{"type":410,"value":508},{"type":405,"tag":474,"props":2604,"children":2605},{"style":511},[2606],{"type":410,"value":514},{"type":405,"tag":474,"props":2608,"children":2609},{"style":517},[2610],{"type":410,"value":2611},"; ",{"type":405,"tag":474,"props":2613,"children":2614},{"style":511},[2615],{"type":410,"value":514},{"type":405,"tag":474,"props":2617,"children":2618},{"style":1618},[2619],{"type":410,"value":529},{"type":405,"tag":474,"props":2621,"children":2622},{"class":476,"line":1339},[2623],{"type":405,"tag":474,"props":2624,"children":2625},{"style":584},[2626],{"type":410,"value":1744},{"type":405,"tag":474,"props":2628,"children":2629},{"class":476,"line":1360},[2630,2634,2639,2643,2647,2651,2655],{"type":405,"tag":474,"props":2631,"children":2632},{"style":481},[2633],{"type":410,"value":1513},{"type":405,"tag":474,"props":2635,"children":2636},{"style":499},[2637],{"type":410,"value":2638}," strictTransportSecurity",{"type":405,"tag":474,"props":2640,"children":2641},{"style":584},[2642],{"type":410,"value":508},{"type":405,"tag":474,"props":2644,"children":2645},{"style":1526},[2646],{"type":410,"value":1766},{"type":405,"tag":474,"props":2648,"children":2649},{"style":493},[2650],{"type":410,"value":496},{"type":405,"tag":474,"props":2652,"children":2653},{"style":584},[2654],{"type":410,"value":1775},{"type":405,"tag":474,"props":2656,"children":2657},{"style":584},[2658],{"type":410,"value":1565},{"type":405,"tag":474,"props":2660,"children":2661},{"class":476,"line":1369},[2662,2666,2670,2674,2678,2682,2686],{"type":405,"tag":474,"props":2663,"children":2664},{"style":481},[2665],{"type":410,"value":1574},{"type":405,"tag":474,"props":2667,"children":2668},{"style":487},[2669],{"type":410,"value":1792},{"type":405,"tag":474,"props":2671,"children":2672},{"style":493},[2673],{"type":410,"value":496},{"type":405,"tag":474,"props":2675,"children":2676},{"style":499},[2677],{"type":410,"value":1518},{"type":405,"tag":474,"props":2679,"children":2680},{"style":1618},[2681],{"type":410,"value":508},{"type":405,"tag":474,"props":2683,"children":2684},{"style":505},[2685],{"type":410,"value":1766},{"type":405,"tag":474,"props":2687,"children":2688},{"style":1618},[2689],{"type":410,"value":529},{"type":405,"tag":474,"props":2691,"children":2692},{"class":476,"line":1390},[2693,2697,2701,2706,2710,2714,2718,2722,2726,2730,2734],{"type":405,"tag":474,"props":2694,"children":2695},{"style":1699},[2696],{"type":410,"value":1702},{"type":405,"tag":474,"props":2698,"children":2699},{"style":481},[2700],{"type":410,"value":1825},{"type":405,"tag":474,"props":2702,"children":2703},{"style":499},[2704],{"type":410,"value":2705}," strictTransportSecurityMiddleware",{"type":405,"tag":474,"props":2707,"children":2708},{"style":584},[2709],{"type":410,"value":508},{"type":405,"tag":474,"props":2711,"children":2712},{"style":1526},[2713],{"type":410,"value":1839},{"type":405,"tag":474,"props":2715,"children":2716},{"style":584},[2717],{"type":410,"value":799},{"type":405,"tag":474,"props":2719,"children":2720},{"style":1526},[2721],{"type":410,"value":1848},{"type":405,"tag":474,"props":2723,"children":2724},{"style":584},[2725],{"type":410,"value":799},{"type":405,"tag":474,"props":2727,"children":2728},{"style":1526},[2729],{"type":410,"value":1857},{"type":405,"tag":474,"props":2731,"children":2732},{"style":584},[2733],{"type":410,"value":1862},{"type":405,"tag":474,"props":2735,"children":2736},{"style":584},[2737],{"type":410,"value":1565},{"type":405,"tag":474,"props":2739,"children":2740},{"class":476,"line":1399},[2741,2745,2749,2753,2757,2761,2766,2770,2774,2778],{"type":405,"tag":474,"props":2742,"children":2743},{"style":505},[2744],{"type":410,"value":1875},{"type":405,"tag":474,"props":2746,"children":2747},{"style":584},[2748],{"type":410,"value":587},{"type":405,"tag":474,"props":2750,"children":2751},{"style":499},[2752],{"type":410,"value":777},{"type":405,"tag":474,"props":2754,"children":2755},{"style":1618},[2756],{"type":410,"value":508},{"type":405,"tag":474,"props":2758,"children":2759},{"style":511},[2760],{"type":410,"value":514},{"type":405,"tag":474,"props":2762,"children":2763},{"style":517},[2764],{"type":410,"value":2765},"Strict-Transport-Security",{"type":405,"tag":474,"props":2767,"children":2768},{"style":511},[2769],{"type":410,"value":514},{"type":405,"tag":474,"props":2771,"children":2772},{"style":584},[2773],{"type":410,"value":799},{"type":405,"tag":474,"props":2775,"children":2776},{"style":505},[2777],{"type":410,"value":1792},{"type":405,"tag":474,"props":2779,"children":2780},{"style":1618},[2781],{"type":410,"value":529},{"type":405,"tag":474,"props":2783,"children":2784},{"class":476,"line":1420},[2785,2789],{"type":405,"tag":474,"props":2786,"children":2787},{"style":499},[2788],{"type":410,"value":1920},{"type":405,"tag":474,"props":2790,"children":2791},{"style":1618},[2792],{"type":410,"value":564},{"type":405,"tag":474,"props":2794,"children":2795},{"class":476,"line":1429},[2796],{"type":405,"tag":474,"props":2797,"children":2798},{"style":584},[2799],{"type":410,"value":1933},{"type":405,"tag":474,"props":2801,"children":2802},{"class":476,"line":1450},[2803],{"type":405,"tag":474,"props":2804,"children":2805},{"style":584},[2806],{"type":410,"value":1744},{"type":405,"tag":674,"props":2808,"children":2810},{"id":2809},"可选用证书透明性策略",[2811],{"type":410,"value":2809},{"type":405,"tag":463,"props":2813,"children":2815},{"code":2814,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('Expect-CT' /* someValue */)\n",[2816],{"type":405,"tag":470,"props":2817,"children":2818},{"__ignoreMap":398},[2819],{"type":405,"tag":474,"props":2820,"children":2821},{"class":476,"line":477},[2822,2826,2830,2834,2838,2842,2847,2851,2856],{"type":405,"tag":474,"props":2823,"children":2824},{"style":505},[2825],{"type":410,"value":694},{"type":405,"tag":474,"props":2827,"children":2828},{"style":584},[2829],{"type":410,"value":587},{"type":405,"tag":474,"props":2831,"children":2832},{"style":499},[2833],{"type":410,"value":777},{"type":405,"tag":474,"props":2835,"children":2836},{"style":505},[2837],{"type":410,"value":508},{"type":405,"tag":474,"props":2839,"children":2840},{"style":511},[2841],{"type":410,"value":514},{"type":405,"tag":474,"props":2843,"children":2844},{"style":517},[2845],{"type":410,"value":2846},"Expect-CT",{"type":405,"tag":474,"props":2848,"children":2849},{"style":511},[2850],{"type":410,"value":514},{"type":405,"tag":474,"props":2852,"children":2853},{"style":1244},[2854],{"type":410,"value":2855}," /* someValue */",{"type":405,"tag":474,"props":2857,"children":2858},{"style":505},[2859],{"type":410,"value":529},{"type":405,"tag":406,"props":2861,"children":2862},{},[2863,2868,2870,2881,2883,2894],{"type":405,"tag":470,"props":2864,"children":2866},{"className":2865},[],[2867],{"type":410,"value":2846},{"type":410,"value":2869}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":405,"tag":413,"props":2871,"children":2872},{},[2873],{"type":405,"tag":417,"props":2874,"children":2878},{"href":2875,"ariaDescribedBy":2876,"dataFootnoteRef":398,"id":2877},"#user-content-fn-chrome-ct",[421],"user-content-fnref-chrome-ct",[2879],{"type":410,"value":2880},"9",{"type":410,"value":2882},"），避免中间人攻击",{"type":405,"tag":413,"props":2884,"children":2885},{},[2886],{"type":405,"tag":417,"props":2887,"children":2891},{"href":2888,"ariaDescribedBy":2889,"dataFootnoteRef":398,"id":2890},"#user-content-fn-ct",[421],"user-content-fnref-ct",[2892],{"type":410,"value":2893},"10",{"type":410,"value":2895},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":405,"tag":463,"props":2897,"children":2899},{"code":2898},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2900],{"type":405,"tag":470,"props":2901,"children":2902},{"__ignoreMap":398},[2903],{"type":410,"value":2898},{"type":405,"tag":406,"props":2905,"children":2906},{},[2907,2909,2914],{"type":410,"value":2908},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":405,"tag":470,"props":2910,"children":2912},{"className":2911},[],[2913],{"type":410,"value":2846},{"type":410,"value":2915}," 就作不上用咯... TODO",{"type":405,"tag":674,"props":2917,"children":2919},{"id":2918},"拒绝来自-pdfflash-的跨域请求",[2920],{"type":410,"value":2921},"拒绝来自 PDF、Flash 的跨域请求",{"type":405,"tag":406,"props":2923,"children":2924},{},[2925,2931,2933,2944],{"type":405,"tag":470,"props":2926,"children":2928},{"className":2927},[],[2929],{"type":410,"value":2930},"X-Permitted-Cross-Domain-Policies",{"type":410,"value":2932}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":405,"tag":413,"props":2934,"children":2935},{},[2936],{"type":405,"tag":417,"props":2937,"children":2941},{"href":2938,"ariaDescribedBy":2939,"dataFootnoteRef":398,"id":2940},"#user-content-fn-pdf-reader",[421],"user-content-fnref-pdf-reader",[2942],{"type":410,"value":2943},"11",{"type":410,"value":2945},"：",{"type":405,"tag":406,"props":2947,"children":2948},{},[2949],{"type":405,"tag":1127,"props":2950,"children":2952},{"alt":2930,"src":2951},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":405,"tag":2954,"props":2955,"children":2956},"ol",{},[2957,2963],{"type":405,"tag":2958,"props":2959,"children":2960},"li",{},[2961],{"type":410,"value":2962},"用户在 A 网站打开了某个 PDF；",{"type":405,"tag":2958,"props":2964,"children":2965},{},[2966,2968,2974],{"type":410,"value":2967},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":405,"tag":470,"props":2969,"children":2971},{"className":2970},[],[2972],{"type":410,"value":2973},"crossdomain.xml",{"type":410,"value":2975}," 文件（策略文件）作为跨域策略应对方案。",{"type":405,"tag":406,"props":2977,"children":2978},{},[2979],{"type":410,"value":2980},"一个策略文件可能长这样：",{"type":405,"tag":463,"props":2982,"children":2984},{"code":2983,"language":1965,"meta":398,"className":1966,"style":398},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2985],{"type":405,"tag":470,"props":2986,"children":2987},{"__ignoreMap":398},[2988,2996,3012,3051,3087,3123,3159,3195],{"type":405,"tag":474,"props":2989,"children":2990},{"class":476,"line":477},[2991],{"type":405,"tag":474,"props":2992,"children":2993},{"style":1244},[2994],{"type":410,"value":2995},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":405,"tag":474,"props":2997,"children":2998},{"class":476,"line":532},[2999,3003,3008],{"type":405,"tag":474,"props":3000,"children":3001},{"style":584},[3002],{"type":410,"value":1978},{"type":405,"tag":474,"props":3004,"children":3005},{"style":1981},[3006],{"type":410,"value":3007},"cross-domain-policy",{"type":405,"tag":474,"props":3009,"children":3010},{"style":584},[3011],{"type":410,"value":2103},{"type":405,"tag":474,"props":3013,"children":3014},{"class":476,"line":541},[3015,3020,3025,3030,3034,3038,3043,3047],{"type":405,"tag":474,"props":3016,"children":3017},{"style":584},[3018],{"type":410,"value":3019},"  \u003C",{"type":405,"tag":474,"props":3021,"children":3022},{"style":1981},[3023],{"type":410,"value":3024},"allow-access-from",{"type":405,"tag":474,"props":3026,"children":3027},{"style":1987},[3028],{"type":410,"value":3029}," domain",{"type":405,"tag":474,"props":3031,"children":3032},{"style":584},[3033],{"type":410,"value":1995},{"type":405,"tag":474,"props":3035,"children":3036},{"style":511},[3037],{"type":410,"value":2000},{"type":405,"tag":474,"props":3039,"children":3040},{"style":517},[3041],{"type":410,"value":3042},"*.taobao.com",{"type":405,"tag":474,"props":3044,"children":3045},{"style":511},[3046],{"type":410,"value":2000},{"type":405,"tag":474,"props":3048,"children":3049},{"style":584},[3050],{"type":410,"value":2035},{"type":405,"tag":474,"props":3052,"children":3053},{"class":476,"line":567},[3054,3058,3062,3066,3070,3074,3079,3083],{"type":405,"tag":474,"props":3055,"children":3056},{"style":584},[3057],{"type":410,"value":3019},{"type":405,"tag":474,"props":3059,"children":3060},{"style":1981},[3061],{"type":410,"value":3024},{"type":405,"tag":474,"props":3063,"children":3064},{"style":1987},[3065],{"type":410,"value":3029},{"type":405,"tag":474,"props":3067,"children":3068},{"style":584},[3069],{"type":410,"value":1995},{"type":405,"tag":474,"props":3071,"children":3072},{"style":511},[3073],{"type":410,"value":2000},{"type":405,"tag":474,"props":3075,"children":3076},{"style":517},[3077],{"type":410,"value":3078},"*.taobao.net",{"type":405,"tag":474,"props":3080,"children":3081},{"style":511},[3082],{"type":410,"value":2000},{"type":405,"tag":474,"props":3084,"children":3085},{"style":584},[3086],{"type":410,"value":2035},{"type":405,"tag":474,"props":3088,"children":3089},{"class":476,"line":575},[3090,3094,3098,3102,3106,3110,3115,3119],{"type":405,"tag":474,"props":3091,"children":3092},{"style":584},[3093],{"type":410,"value":3019},{"type":405,"tag":474,"props":3095,"children":3096},{"style":1981},[3097],{"type":410,"value":3024},{"type":405,"tag":474,"props":3099,"children":3100},{"style":1987},[3101],{"type":410,"value":3029},{"type":405,"tag":474,"props":3103,"children":3104},{"style":584},[3105],{"type":410,"value":1995},{"type":405,"tag":474,"props":3107,"children":3108},{"style":511},[3109],{"type":410,"value":2000},{"type":405,"tag":474,"props":3111,"children":3112},{"style":517},[3113],{"type":410,"value":3114},"*.taobaocdn.com",{"type":405,"tag":474,"props":3116,"children":3117},{"style":511},[3118],{"type":410,"value":2000},{"type":405,"tag":474,"props":3120,"children":3121},{"style":584},[3122],{"type":410,"value":2035},{"type":405,"tag":474,"props":3124,"children":3125},{"class":476,"line":1300},[3126,3130,3134,3138,3142,3146,3151,3155],{"type":405,"tag":474,"props":3127,"children":3128},{"style":584},[3129],{"type":410,"value":3019},{"type":405,"tag":474,"props":3131,"children":3132},{"style":1981},[3133],{"type":410,"value":3024},{"type":405,"tag":474,"props":3135,"children":3136},{"style":1987},[3137],{"type":410,"value":3029},{"type":405,"tag":474,"props":3139,"children":3140},{"style":584},[3141],{"type":410,"value":1995},{"type":405,"tag":474,"props":3143,"children":3144},{"style":511},[3145],{"type":410,"value":2000},{"type":405,"tag":474,"props":3147,"children":3148},{"style":517},[3149],{"type":410,"value":3150},"*.tbcdn.cn",{"type":405,"tag":474,"props":3152,"children":3153},{"style":511},[3154],{"type":410,"value":2000},{"type":405,"tag":474,"props":3156,"children":3157},{"style":584},[3158],{"type":410,"value":2035},{"type":405,"tag":474,"props":3160,"children":3161},{"class":476,"line":1309},[3162,3166,3170,3174,3178,3182,3187,3191],{"type":405,"tag":474,"props":3163,"children":3164},{"style":584},[3165],{"type":410,"value":3019},{"type":405,"tag":474,"props":3167,"children":3168},{"style":1981},[3169],{"type":410,"value":3024},{"type":405,"tag":474,"props":3171,"children":3172},{"style":1987},[3173],{"type":410,"value":3029},{"type":405,"tag":474,"props":3175,"children":3176},{"style":584},[3177],{"type":410,"value":1995},{"type":405,"tag":474,"props":3179,"children":3180},{"style":511},[3181],{"type":410,"value":2000},{"type":405,"tag":474,"props":3183,"children":3184},{"style":517},[3185],{"type":410,"value":3186},"*.alicdn.com",{"type":405,"tag":474,"props":3188,"children":3189},{"style":511},[3190],{"type":410,"value":2000},{"type":405,"tag":474,"props":3192,"children":3193},{"style":584},[3194],{"type":410,"value":2035},{"type":405,"tag":474,"props":3196,"children":3197},{"class":476,"line":1330},[3198,3203,3207],{"type":405,"tag":474,"props":3199,"children":3200},{"style":584},[3201],{"type":410,"value":3202},"\u003C/",{"type":405,"tag":474,"props":3204,"children":3205},{"style":1981},[3206],{"type":410,"value":3007},{"type":405,"tag":474,"props":3208,"children":3209},{"style":584},[3210],{"type":410,"value":2103},{"type":405,"tag":406,"props":3212,"children":3213},{},[3214,3216,3221,3223,3228],{"type":410,"value":3215},"其中，若请求响应头包含了 ",{"type":405,"tag":470,"props":3217,"children":3219},{"className":3218},[],[3220],{"type":410,"value":2930},{"type":410,"value":3222},"，便可指定浏览器针对 ",{"type":405,"tag":470,"props":3224,"children":3226},{"className":3225},[],[3227],{"type":410,"value":2973},{"type":410,"value":3229}," 的应对行为。",{"type":405,"tag":463,"props":3231,"children":3233},{"code":3232,"language":466,"meta":398,"className":467,"style":398},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3234],{"type":405,"tag":470,"props":3235,"children":3236},{"__ignoreMap":398},[3237,3265,3273,3293,3301,3321,3329,3349,3357,3374,3381,3426,3474,3517,3528,3535],{"type":405,"tag":474,"props":3238,"children":3239},{"class":476,"line":477},[3240,3244,3249,3253,3257,3261],{"type":405,"tag":474,"props":3241,"children":3242},{"style":481},[3243],{"type":410,"value":484},{"type":405,"tag":474,"props":3245,"children":3246},{"style":487},[3247],{"type":410,"value":3248}," ALLOWED_PERMITTED_POLICIES",{"type":405,"tag":474,"props":3250,"children":3251},{"style":493},[3252],{"type":410,"value":496},{"type":405,"tag":474,"props":3254,"children":3255},{"style":493},[3256],{"type":410,"value":1228},{"type":405,"tag":474,"props":3258,"children":3259},{"style":499},[3260],{"type":410,"value":1233},{"type":405,"tag":474,"props":3262,"children":3263},{"style":505},[3264],{"type":410,"value":1238},{"type":405,"tag":474,"props":3266,"children":3267},{"class":476,"line":532},[3268],{"type":405,"tag":474,"props":3269,"children":3270},{"style":1244},[3271],{"type":410,"value":3272},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":405,"tag":474,"props":3274,"children":3275},{"class":476,"line":541},[3276,3280,3285,3289],{"type":405,"tag":474,"props":3277,"children":3278},{"style":511},[3279],{"type":410,"value":1255},{"type":405,"tag":474,"props":3281,"children":3282},{"style":517},[3283],{"type":410,"value":3284},"master-only",{"type":405,"tag":474,"props":3286,"children":3287},{"style":511},[3288],{"type":410,"value":514},{"type":405,"tag":474,"props":3290,"children":3291},{"style":584},[3292],{"type":410,"value":1269},{"type":405,"tag":474,"props":3294,"children":3295},{"class":476,"line":567},[3296],{"type":405,"tag":474,"props":3297,"children":3298},{"style":1244},[3299],{"type":410,"value":3300},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":405,"tag":474,"props":3302,"children":3303},{"class":476,"line":575},[3304,3308,3313,3317],{"type":405,"tag":474,"props":3305,"children":3306},{"style":511},[3307],{"type":410,"value":1255},{"type":405,"tag":474,"props":3309,"children":3310},{"style":517},[3311],{"type":410,"value":3312},"by-content-type",{"type":405,"tag":474,"props":3314,"children":3315},{"style":511},[3316],{"type":410,"value":514},{"type":405,"tag":474,"props":3318,"children":3319},{"style":584},[3320],{"type":410,"value":1269},{"type":405,"tag":474,"props":3322,"children":3323},{"class":476,"line":1300},[3324],{"type":405,"tag":474,"props":3325,"children":3326},{"style":1244},[3327],{"type":410,"value":3328},"  // 不使用任何位置的 crossdomain.xml\n",{"type":405,"tag":474,"props":3330,"children":3331},{"class":476,"line":1309},[3332,3336,3341,3345],{"type":405,"tag":474,"props":3333,"children":3334},{"style":511},[3335],{"type":410,"value":1255},{"type":405,"tag":474,"props":3337,"children":3338},{"style":517},[3339],{"type":410,"value":3340},"none",{"type":405,"tag":474,"props":3342,"children":3343},{"style":511},[3344],{"type":410,"value":514},{"type":405,"tag":474,"props":3346,"children":3347},{"style":584},[3348],{"type":410,"value":1269},{"type":405,"tag":474,"props":3350,"children":3351},{"class":476,"line":1330},[3352],{"type":405,"tag":474,"props":3353,"children":3354},{"style":1244},[3355],{"type":410,"value":3356},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":405,"tag":474,"props":3358,"children":3359},{"class":476,"line":1339},[3360,3364,3369],{"type":405,"tag":474,"props":3361,"children":3362},{"style":511},[3363],{"type":410,"value":1255},{"type":405,"tag":474,"props":3365,"children":3366},{"style":517},[3367],{"type":410,"value":3368},"all",{"type":405,"tag":474,"props":3370,"children":3371},{"style":511},[3372],{"type":410,"value":3373},"'\n",{"type":405,"tag":474,"props":3375,"children":3376},{"class":476,"line":1360},[3377],{"type":405,"tag":474,"props":3378,"children":3379},{"style":505},[3380],{"type":410,"value":1504},{"type":405,"tag":474,"props":3382,"children":3383},{"class":476,"line":1369},[3384,3388,3393,3397,3402,3406,3410,3414,3418,3422],{"type":405,"tag":474,"props":3385,"children":3386},{"style":481},[3387],{"type":410,"value":1513},{"type":405,"tag":474,"props":3389,"children":3390},{"style":499},[3391],{"type":410,"value":3392}," xPermittedCrossDomainPolicies",{"type":405,"tag":474,"props":3394,"children":3395},{"style":584},[3396],{"type":410,"value":508},{"type":405,"tag":474,"props":3398,"children":3399},{"style":1526},[3400],{"type":410,"value":3401},"headerValue",{"type":405,"tag":474,"props":3403,"children":3404},{"style":493},[3405],{"type":410,"value":496},{"type":405,"tag":474,"props":3407,"children":3408},{"style":511},[3409],{"type":410,"value":804},{"type":405,"tag":474,"props":3411,"children":3412},{"style":517},[3413],{"type":410,"value":3340},{"type":405,"tag":474,"props":3415,"children":3416},{"style":511},[3417],{"type":410,"value":514},{"type":405,"tag":474,"props":3419,"children":3420},{"style":584},[3421],{"type":410,"value":1862},{"type":405,"tag":474,"props":3423,"children":3424},{"style":584},[3425],{"type":410,"value":1565},{"type":405,"tag":474,"props":3427,"children":3428},{"class":476,"line":1390},[3429,3433,3437,3442,3446,3450,3454,3458,3462,3466,3470],{"type":405,"tag":474,"props":3430,"children":3431},{"style":1699},[3432],{"type":410,"value":1702},{"type":405,"tag":474,"props":3434,"children":3435},{"style":481},[3436],{"type":410,"value":1825},{"type":405,"tag":474,"props":3438,"children":3439},{"style":499},[3440],{"type":410,"value":3441}," xPermittedCrossDomainPoliciesMiddleware",{"type":405,"tag":474,"props":3443,"children":3444},{"style":584},[3445],{"type":410,"value":508},{"type":405,"tag":474,"props":3447,"children":3448},{"style":1526},[3449],{"type":410,"value":1839},{"type":405,"tag":474,"props":3451,"children":3452},{"style":584},[3453],{"type":410,"value":799},{"type":405,"tag":474,"props":3455,"children":3456},{"style":1526},[3457],{"type":410,"value":1848},{"type":405,"tag":474,"props":3459,"children":3460},{"style":584},[3461],{"type":410,"value":799},{"type":405,"tag":474,"props":3463,"children":3464},{"style":1526},[3465],{"type":410,"value":1857},{"type":405,"tag":474,"props":3467,"children":3468},{"style":584},[3469],{"type":410,"value":1862},{"type":405,"tag":474,"props":3471,"children":3472},{"style":584},[3473],{"type":410,"value":1565},{"type":405,"tag":474,"props":3475,"children":3476},{"class":476,"line":1399},[3477,3481,3485,3489,3493,3497,3501,3505,3509,3513],{"type":405,"tag":474,"props":3478,"children":3479},{"style":505},[3480],{"type":410,"value":1875},{"type":405,"tag":474,"props":3482,"children":3483},{"style":584},[3484],{"type":410,"value":587},{"type":405,"tag":474,"props":3486,"children":3487},{"style":499},[3488],{"type":410,"value":777},{"type":405,"tag":474,"props":3490,"children":3491},{"style":1618},[3492],{"type":410,"value":508},{"type":405,"tag":474,"props":3494,"children":3495},{"style":511},[3496],{"type":410,"value":514},{"type":405,"tag":474,"props":3498,"children":3499},{"style":517},[3500],{"type":410,"value":2930},{"type":405,"tag":474,"props":3502,"children":3503},{"style":511},[3504],{"type":410,"value":514},{"type":405,"tag":474,"props":3506,"children":3507},{"style":584},[3508],{"type":410,"value":799},{"type":405,"tag":474,"props":3510,"children":3511},{"style":505},[3512],{"type":410,"value":1792},{"type":405,"tag":474,"props":3514,"children":3515},{"style":1618},[3516],{"type":410,"value":529},{"type":405,"tag":474,"props":3518,"children":3519},{"class":476,"line":1420},[3520,3524],{"type":405,"tag":474,"props":3521,"children":3522},{"style":499},[3523],{"type":410,"value":1920},{"type":405,"tag":474,"props":3525,"children":3526},{"style":1618},[3527],{"type":410,"value":564},{"type":405,"tag":474,"props":3529,"children":3530},{"class":476,"line":1429},[3531],{"type":405,"tag":474,"props":3532,"children":3533},{"style":584},[3534],{"type":410,"value":1933},{"type":405,"tag":474,"props":3536,"children":3537},{"class":476,"line":1450},[3538],{"type":405,"tag":474,"props":3539,"children":3540},{"style":584},[3541],{"type":410,"value":1744},{"type":405,"tag":406,"props":3543,"children":3544},{},[3545],{"type":410,"value":3546},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":405,"tag":674,"props":3548,"children":3550},{"id":3549},"开启-csp",[3551],{"type":410,"value":3552},"开启 CSP",{"type":405,"tag":406,"props":3554,"children":3555},{},[3556,3558,3563,3565,3570,3572,3577,3579,3590],{"type":410,"value":3557},"还记得刚才提到 Chrome 关闭了 ",{"type":405,"tag":470,"props":3559,"children":3561},{"className":3560},[],[3562],{"type":410,"value":927},{"type":410,"value":3564}," 吗？既然不再使用 ",{"type":405,"tag":470,"props":3566,"children":3568},{"className":3567},[],[3569],{"type":410,"value":927},{"type":410,"value":3571},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":405,"tag":470,"props":3573,"children":3575},{"className":3574},[],[3576],{"type":410,"value":955},{"type":410,"value":3578}," 标准",{"type":405,"tag":413,"props":3580,"children":3581},{},[3582],{"type":405,"tag":417,"props":3583,"children":3587},{"href":3584,"ariaDescribedBy":3585,"dataFootnoteRef":398,"id":3586},"#user-content-fn-csp-standard",[421],"user-content-fnref-csp-standard",[3588],{"type":410,"value":3589},"12",{"type":410,"value":3591},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":405,"tag":406,"props":3593,"children":3594},{},[3595,3600],{"type":405,"tag":470,"props":3596,"children":3598},{"className":3597},[],[3599],{"type":410,"value":955},{"type":410,"value":3601}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":405,"tag":463,"props":3603,"children":3605},{"code":3604,"language":1965,"meta":398,"className":1966,"style":398},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3606],{"type":405,"tag":470,"props":3607,"children":3608},{"__ignoreMap":398},[3609],{"type":405,"tag":474,"props":3610,"children":3611},{"class":476,"line":477},[3612,3616,3620,3625,3629,3633,3638,3642,3646,3650,3654,3659,3663],{"type":405,"tag":474,"props":3613,"children":3614},{"style":584},[3615],{"type":410,"value":1978},{"type":405,"tag":474,"props":3617,"children":3618},{"style":1981},[3619],{"type":410,"value":1984},{"type":405,"tag":474,"props":3621,"children":3622},{"style":1987},[3623],{"type":410,"value":3624}," http-equiv",{"type":405,"tag":474,"props":3626,"children":3627},{"style":584},[3628],{"type":410,"value":1995},{"type":405,"tag":474,"props":3630,"children":3631},{"style":511},[3632],{"type":410,"value":2000},{"type":405,"tag":474,"props":3634,"children":3635},{"style":517},[3636],{"type":410,"value":3637},"Content-Security-Policy",{"type":405,"tag":474,"props":3639,"children":3640},{"style":511},[3641],{"type":410,"value":2000},{"type":405,"tag":474,"props":3643,"children":3644},{"style":1987},[3645],{"type":410,"value":2014},{"type":405,"tag":474,"props":3647,"children":3648},{"style":584},[3649],{"type":410,"value":1995},{"type":405,"tag":474,"props":3651,"children":3652},{"style":511},[3653],{"type":410,"value":2000},{"type":405,"tag":474,"props":3655,"children":3656},{"style":517},[3657],{"type":410,"value":3658},"default-src 'self'; img-src https://*; child-src 'none';",{"type":405,"tag":474,"props":3660,"children":3661},{"style":511},[3662],{"type":410,"value":2000},{"type":405,"tag":474,"props":3664,"children":3665},{"style":584},[3666],{"type":410,"value":2035},{"type":405,"tag":406,"props":3668,"children":3669},{},[3670,3672,3677],{"type":410,"value":3671},"一个典型的 ",{"type":405,"tag":470,"props":3673,"children":3675},{"className":3674},[],[3676],{"type":410,"value":955},{"type":410,"value":3678}," 头如下：",{"type":405,"tag":463,"props":3680,"children":3682},{"code":3681},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3683],{"type":405,"tag":470,"props":3684,"children":3685},{"__ignoreMap":398},[3686],{"type":410,"value":3681},{"type":405,"tag":406,"props":3688,"children":3689},{},[3690],{"type":410,"value":3691},"大致来说，CSP 相关以下几种安全行为：",{"type":405,"tag":3693,"props":3694,"children":3695},"ul",{},[3696,3701,3706,3711],{"type":405,"tag":2958,"props":3697,"children":3698},{},[3699],{"type":410,"value":3700},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":405,"tag":2958,"props":3702,"children":3703},{},[3704],{"type":410,"value":3705},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":405,"tag":2958,"props":3707,"children":3708},{},[3709],{"type":410,"value":3710},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":405,"tag":2958,"props":3712,"children":3713},{},[3714,3716,3722],{"type":410,"value":3715},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":405,"tag":470,"props":3717,"children":3719},{"className":3718},[],[3720],{"type":410,"value":3721},"Content-Security-Policy-Report-Only",{"type":410,"value":3723}," Header。",{"type":405,"tag":406,"props":3725,"children":3726},{},[3727,3729,3734],{"type":410,"value":3728},"那么我们看看 Helmet 中默认配置的 ",{"type":405,"tag":470,"props":3730,"children":3732},{"className":3731},[],[3733],{"type":410,"value":955},{"type":410,"value":3735}," 策略：",{"type":405,"tag":463,"props":3737,"children":3739},{"code":3738,"language":466,"meta":398,"className":467,"style":398},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3740],{"type":405,"tag":470,"props":3741,"children":3742},{"__ignoreMap":398},[3743,3763,3771,3818,3826,3870,3878,3907,3915,3993,4001,4044,4052,4112,4120,4165,4173,4217,4225,4233,4241,4249,4298,4306,4384,4392,4400,4408,4433],{"type":405,"tag":474,"props":3744,"children":3745},{"class":476,"line":477},[3746,3750,3755,3759],{"type":405,"tag":474,"props":3747,"children":3748},{"style":481},[3749],{"type":410,"value":484},{"type":405,"tag":474,"props":3751,"children":3752},{"style":487},[3753],{"type":410,"value":3754}," DEFAULT_DIRECTIVES",{"type":405,"tag":474,"props":3756,"children":3757},{"style":493},[3758],{"type":410,"value":496},{"type":405,"tag":474,"props":3760,"children":3761},{"style":584},[3762],{"type":410,"value":1565},{"type":405,"tag":474,"props":3764,"children":3765},{"class":476,"line":532},[3766],{"type":405,"tag":474,"props":3767,"children":3768},{"style":1244},[3769],{"type":410,"value":3770},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":405,"tag":474,"props":3772,"children":3773},{"class":476,"line":541},[3774,3778,3784,3788,3792,3796,3800,3805,3809,3814],{"type":405,"tag":474,"props":3775,"children":3776},{"style":511},[3777],{"type":410,"value":1255},{"type":405,"tag":474,"props":3779,"children":3781},{"style":3780},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3782],{"type":410,"value":3783},"default-src",{"type":405,"tag":474,"props":3785,"children":3786},{"style":511},[3787],{"type":410,"value":514},{"type":405,"tag":474,"props":3789,"children":3790},{"style":584},[3791],{"type":410,"value":1634},{"type":405,"tag":474,"props":3793,"children":3794},{"style":505},[3795],{"type":410,"value":1538},{"type":405,"tag":474,"props":3797,"children":3798},{"style":511},[3799],{"type":410,"value":2000},{"type":405,"tag":474,"props":3801,"children":3802},{"style":517},[3803],{"type":410,"value":3804},"'self'",{"type":405,"tag":474,"props":3806,"children":3807},{"style":511},[3808],{"type":410,"value":2000},{"type":405,"tag":474,"props":3810,"children":3811},{"style":505},[3812],{"type":410,"value":3813},"]",{"type":405,"tag":474,"props":3815,"children":3816},{"style":584},[3817],{"type":410,"value":1269},{"type":405,"tag":474,"props":3819,"children":3820},{"class":476,"line":567},[3821],{"type":405,"tag":474,"props":3822,"children":3823},{"style":1244},[3824],{"type":410,"value":3825},"  // 限制 base 标签的 URI 为源地址\n",{"type":405,"tag":474,"props":3827,"children":3828},{"class":476,"line":575},[3829,3833,3838,3842,3846,3850,3854,3858,3862,3866],{"type":405,"tag":474,"props":3830,"children":3831},{"style":511},[3832],{"type":410,"value":1255},{"type":405,"tag":474,"props":3834,"children":3835},{"style":3780},[3836],{"type":410,"value":3837},"base-uri",{"type":405,"tag":474,"props":3839,"children":3840},{"style":511},[3841],{"type":410,"value":514},{"type":405,"tag":474,"props":3843,"children":3844},{"style":584},[3845],{"type":410,"value":1634},{"type":405,"tag":474,"props":3847,"children":3848},{"style":505},[3849],{"type":410,"value":1538},{"type":405,"tag":474,"props":3851,"children":3852},{"style":511},[3853],{"type":410,"value":2000},{"type":405,"tag":474,"props":3855,"children":3856},{"style":517},[3857],{"type":410,"value":3804},{"type":405,"tag":474,"props":3859,"children":3860},{"style":511},[3861],{"type":410,"value":2000},{"type":405,"tag":474,"props":3863,"children":3864},{"style":505},[3865],{"type":410,"value":3813},{"type":405,"tag":474,"props":3867,"children":3868},{"style":584},[3869],{"type":410,"value":1269},{"type":405,"tag":474,"props":3871,"children":3872},{"class":476,"line":1300},[3873],{"type":405,"tag":474,"props":3874,"children":3875},{"style":1244},[3876],{"type":410,"value":3877},"  // 禁止通过 HTTP 协议加载内容\n",{"type":405,"tag":474,"props":3879,"children":3880},{"class":476,"line":1309},[3881,3885,3890,3894,3898,3903],{"type":405,"tag":474,"props":3882,"children":3883},{"style":511},[3884],{"type":410,"value":1255},{"type":405,"tag":474,"props":3886,"children":3887},{"style":3780},[3888],{"type":410,"value":3889},"block-all-mixed-content",{"type":405,"tag":474,"props":3891,"children":3892},{"style":511},[3893],{"type":410,"value":514},{"type":405,"tag":474,"props":3895,"children":3896},{"style":584},[3897],{"type":410,"value":1634},{"type":405,"tag":474,"props":3899,"children":3900},{"style":505},[3901],{"type":410,"value":3902}," []",{"type":405,"tag":474,"props":3904,"children":3905},{"style":584},[3906],{"type":410,"value":1269},{"type":405,"tag":474,"props":3908,"children":3909},{"class":476,"line":1330},[3910],{"type":405,"tag":474,"props":3911,"children":3912},{"style":1244},[3913],{"type":410,"value":3914},"  // 限制字体加载地址\n",{"type":405,"tag":474,"props":3916,"children":3917},{"class":476,"line":1339},[3918,3922,3927,3931,3935,3939,3943,3947,3951,3955,3959,3964,3968,3972,3976,3981,3985,3989],{"type":405,"tag":474,"props":3919,"children":3920},{"style":511},[3921],{"type":410,"value":1255},{"type":405,"tag":474,"props":3923,"children":3924},{"style":3780},[3925],{"type":410,"value":3926},"font-src",{"type":405,"tag":474,"props":3928,"children":3929},{"style":511},[3930],{"type":410,"value":514},{"type":405,"tag":474,"props":3932,"children":3933},{"style":584},[3934],{"type":410,"value":1634},{"type":405,"tag":474,"props":3936,"children":3937},{"style":505},[3938],{"type":410,"value":1538},{"type":405,"tag":474,"props":3940,"children":3941},{"style":511},[3942],{"type":410,"value":2000},{"type":405,"tag":474,"props":3944,"children":3945},{"style":517},[3946],{"type":410,"value":3804},{"type":405,"tag":474,"props":3948,"children":3949},{"style":511},[3950],{"type":410,"value":2000},{"type":405,"tag":474,"props":3952,"children":3953},{"style":584},[3954],{"type":410,"value":799},{"type":405,"tag":474,"props":3956,"children":3957},{"style":511},[3958],{"type":410,"value":804},{"type":405,"tag":474,"props":3960,"children":3961},{"style":517},[3962],{"type":410,"value":3963},"https:",{"type":405,"tag":474,"props":3965,"children":3966},{"style":511},[3967],{"type":410,"value":514},{"type":405,"tag":474,"props":3969,"children":3970},{"style":584},[3971],{"type":410,"value":799},{"type":405,"tag":474,"props":3973,"children":3974},{"style":511},[3975],{"type":410,"value":804},{"type":405,"tag":474,"props":3977,"children":3978},{"style":517},[3979],{"type":410,"value":3980},"data:",{"type":405,"tag":474,"props":3982,"children":3983},{"style":511},[3984],{"type":410,"value":514},{"type":405,"tag":474,"props":3986,"children":3987},{"style":505},[3988],{"type":410,"value":3813},{"type":405,"tag":474,"props":3990,"children":3991},{"style":584},[3992],{"type":410,"value":1269},{"type":405,"tag":474,"props":3994,"children":3995},{"class":476,"line":1360},[3996],{"type":405,"tag":474,"props":3997,"children":3998},{"style":1244},[3999],{"type":410,"value":4000},"  // 限制嵌入的外部资源\n",{"type":405,"tag":474,"props":4002,"children":4003},{"class":476,"line":1369},[4004,4008,4012,4016,4020,4024,4028,4032,4036,4040],{"type":405,"tag":474,"props":4005,"children":4006},{"style":511},[4007],{"type":410,"value":1255},{"type":405,"tag":474,"props":4009,"children":4010},{"style":3780},[4011],{"type":410,"value":1149},{"type":405,"tag":474,"props":4013,"children":4014},{"style":511},[4015],{"type":410,"value":514},{"type":405,"tag":474,"props":4017,"children":4018},{"style":584},[4019],{"type":410,"value":1634},{"type":405,"tag":474,"props":4021,"children":4022},{"style":505},[4023],{"type":410,"value":1538},{"type":405,"tag":474,"props":4025,"children":4026},{"style":511},[4027],{"type":410,"value":2000},{"type":405,"tag":474,"props":4029,"children":4030},{"style":517},[4031],{"type":410,"value":3804},{"type":405,"tag":474,"props":4033,"children":4034},{"style":511},[4035],{"type":410,"value":2000},{"type":405,"tag":474,"props":4037,"children":4038},{"style":505},[4039],{"type":410,"value":3813},{"type":405,"tag":474,"props":4041,"children":4042},{"style":584},[4043],{"type":410,"value":1269},{"type":405,"tag":474,"props":4045,"children":4046},{"class":476,"line":1390},[4047],{"type":405,"tag":474,"props":4048,"children":4049},{"style":1244},[4050],{"type":410,"value":4051},"  // 限制图片加载地址\n",{"type":405,"tag":474,"props":4053,"children":4054},{"class":476,"line":1399},[4055,4059,4064,4068,4072,4076,4080,4084,4088,4092,4096,4100,4104,4108],{"type":405,"tag":474,"props":4056,"children":4057},{"style":511},[4058],{"type":410,"value":1255},{"type":405,"tag":474,"props":4060,"children":4061},{"style":3780},[4062],{"type":410,"value":4063},"img-src",{"type":405,"tag":474,"props":4065,"children":4066},{"style":511},[4067],{"type":410,"value":514},{"type":405,"tag":474,"props":4069,"children":4070},{"style":584},[4071],{"type":410,"value":1634},{"type":405,"tag":474,"props":4073,"children":4074},{"style":505},[4075],{"type":410,"value":1538},{"type":405,"tag":474,"props":4077,"children":4078},{"style":511},[4079],{"type":410,"value":2000},{"type":405,"tag":474,"props":4081,"children":4082},{"style":517},[4083],{"type":410,"value":3804},{"type":405,"tag":474,"props":4085,"children":4086},{"style":511},[4087],{"type":410,"value":2000},{"type":405,"tag":474,"props":4089,"children":4090},{"style":584},[4091],{"type":410,"value":799},{"type":405,"tag":474,"props":4093,"children":4094},{"style":511},[4095],{"type":410,"value":804},{"type":405,"tag":474,"props":4097,"children":4098},{"style":517},[4099],{"type":410,"value":3980},{"type":405,"tag":474,"props":4101,"children":4102},{"style":511},[4103],{"type":410,"value":514},{"type":405,"tag":474,"props":4105,"children":4106},{"style":505},[4107],{"type":410,"value":3813},{"type":405,"tag":474,"props":4109,"children":4110},{"style":584},[4111],{"type":410,"value":1269},{"type":405,"tag":474,"props":4113,"children":4114},{"class":476,"line":1420},[4115],{"type":405,"tag":474,"props":4116,"children":4117},{"style":1244},[4118],{"type":410,"value":4119},"  // 禁用 object 标签\n",{"type":405,"tag":474,"props":4121,"children":4122},{"class":476,"line":1429},[4123,4127,4132,4136,4140,4144,4148,4153,4157,4161],{"type":405,"tag":474,"props":4124,"children":4125},{"style":511},[4126],{"type":410,"value":1255},{"type":405,"tag":474,"props":4128,"children":4129},{"style":3780},[4130],{"type":410,"value":4131},"object-src",{"type":405,"tag":474,"props":4133,"children":4134},{"style":511},[4135],{"type":410,"value":514},{"type":405,"tag":474,"props":4137,"children":4138},{"style":584},[4139],{"type":410,"value":1634},{"type":405,"tag":474,"props":4141,"children":4142},{"style":505},[4143],{"type":410,"value":1538},{"type":405,"tag":474,"props":4145,"children":4146},{"style":511},[4147],{"type":410,"value":2000},{"type":405,"tag":474,"props":4149,"children":4150},{"style":517},[4151],{"type":410,"value":4152},"'none'",{"type":405,"tag":474,"props":4154,"children":4155},{"style":511},[4156],{"type":410,"value":2000},{"type":405,"tag":474,"props":4158,"children":4159},{"style":505},[4160],{"type":410,"value":3813},{"type":405,"tag":474,"props":4162,"children":4163},{"style":584},[4164],{"type":410,"value":1269},{"type":405,"tag":474,"props":4166,"children":4167},{"class":476,"line":1450},[4168],{"type":405,"tag":474,"props":4169,"children":4170},{"style":1244},[4171],{"type":410,"value":4172},"  // 只从源地址加载脚本\n",{"type":405,"tag":474,"props":4174,"children":4175},{"class":476,"line":1459},[4176,4180,4185,4189,4193,4197,4201,4205,4209,4213],{"type":405,"tag":474,"props":4177,"children":4178},{"style":511},[4179],{"type":410,"value":1255},{"type":405,"tag":474,"props":4181,"children":4182},{"style":3780},[4183],{"type":410,"value":4184},"script-src",{"type":405,"tag":474,"props":4186,"children":4187},{"style":511},[4188],{"type":410,"value":514},{"type":405,"tag":474,"props":4190,"children":4191},{"style":584},[4192],{"type":410,"value":1634},{"type":405,"tag":474,"props":4194,"children":4195},{"style":505},[4196],{"type":410,"value":1538},{"type":405,"tag":474,"props":4198,"children":4199},{"style":511},[4200],{"type":410,"value":2000},{"type":405,"tag":474,"props":4202,"children":4203},{"style":517},[4204],{"type":410,"value":3804},{"type":405,"tag":474,"props":4206,"children":4207},{"style":511},[4208],{"type":410,"value":2000},{"type":405,"tag":474,"props":4210,"children":4211},{"style":505},[4212],{"type":410,"value":3813},{"type":405,"tag":474,"props":4214,"children":4215},{"style":584},[4216],{"type":410,"value":1269},{"type":405,"tag":474,"props":4218,"children":4219},{"class":476,"line":1480},[4220],{"type":405,"tag":474,"props":4221,"children":4222},{"style":1244},[4223],{"type":410,"value":4224},"  // 禁用内联脚本\n",{"type":405,"tag":474,"props":4226,"children":4227},{"class":476,"line":1489},[4228],{"type":405,"tag":474,"props":4229,"children":4230},{"style":1244},[4231],{"type":410,"value":4232},"  // ？这里没能理解\n",{"type":405,"tag":474,"props":4234,"children":4235},{"class":476,"line":1498},[4236],{"type":405,"tag":474,"props":4237,"children":4238},{"style":1244},[4239],{"type":410,"value":4240},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":405,"tag":474,"props":4242,"children":4243},{"class":476,"line":1507},[4244],{"type":405,"tag":474,"props":4245,"children":4246},{"style":1244},[4247],{"type":410,"value":4248},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":405,"tag":474,"props":4250,"children":4251},{"class":476,"line":1568},[4252,4256,4261,4265,4269,4273,4277,4281,4285,4289,4293],{"type":405,"tag":474,"props":4253,"children":4254},{"style":511},[4255],{"type":410,"value":1255},{"type":405,"tag":474,"props":4257,"children":4258},{"style":3780},[4259],{"type":410,"value":4260},"script-src-attr",{"type":405,"tag":474,"props":4262,"children":4263},{"style":511},[4264],{"type":410,"value":514},{"type":405,"tag":474,"props":4266,"children":4267},{"style":584},[4268],{"type":410,"value":1634},{"type":405,"tag":474,"props":4270,"children":4271},{"style":505},[4272],{"type":410,"value":1538},{"type":405,"tag":474,"props":4274,"children":4275},{"style":511},[4276],{"type":410,"value":2000},{"type":405,"tag":474,"props":4278,"children":4279},{"style":517},[4280],{"type":410,"value":4152},{"type":405,"tag":474,"props":4282,"children":4283},{"style":511},[4284],{"type":410,"value":2000},{"type":405,"tag":474,"props":4286,"children":4287},{"style":505},[4288],{"type":410,"value":3813},{"type":405,"tag":474,"props":4290,"children":4291},{"style":584},[4292],{"type":410,"value":799},{"type":405,"tag":474,"props":4294,"children":4295},{"style":505},[4296],{"type":410,"value":4297},"‘\n",{"type":405,"tag":474,"props":4299,"children":4300},{"class":476,"line":1642},[4301],{"type":405,"tag":474,"props":4302,"children":4303},{"style":1244},[4304],{"type":410,"value":4305},"  // 限制样式表加载地址\n",{"type":405,"tag":474,"props":4307,"children":4308},{"class":476,"line":1673},[4309,4313,4318,4322,4326,4330,4334,4338,4342,4346,4350,4354,4358,4362,4367,4372,4376,4380],{"type":405,"tag":474,"props":4310,"children":4311},{"style":511},[4312],{"type":410,"value":1255},{"type":405,"tag":474,"props":4314,"children":4315},{"style":3780},[4316],{"type":410,"value":4317},"style-src",{"type":405,"tag":474,"props":4319,"children":4320},{"style":511},[4321],{"type":410,"value":514},{"type":405,"tag":474,"props":4323,"children":4324},{"style":584},[4325],{"type":410,"value":1634},{"type":405,"tag":474,"props":4327,"children":4328},{"style":505},[4329],{"type":410,"value":1538},{"type":405,"tag":474,"props":4331,"children":4332},{"style":511},[4333],{"type":410,"value":2000},{"type":405,"tag":474,"props":4335,"children":4336},{"style":517},[4337],{"type":410,"value":3804},{"type":405,"tag":474,"props":4339,"children":4340},{"style":511},[4341],{"type":410,"value":2000},{"type":405,"tag":474,"props":4343,"children":4344},{"style":584},[4345],{"type":410,"value":799},{"type":405,"tag":474,"props":4347,"children":4348},{"style":511},[4349],{"type":410,"value":804},{"type":405,"tag":474,"props":4351,"children":4352},{"style":517},[4353],{"type":410,"value":3963},{"type":405,"tag":474,"props":4355,"children":4356},{"style":511},[4357],{"type":410,"value":514},{"type":405,"tag":474,"props":4359,"children":4360},{"style":584},[4361],{"type":410,"value":799},{"type":405,"tag":474,"props":4363,"children":4364},{"style":511},[4365],{"type":410,"value":4366}," \"",{"type":405,"tag":474,"props":4368,"children":4369},{"style":517},[4370],{"type":410,"value":4371},"'unsafe-inline'",{"type":405,"tag":474,"props":4373,"children":4374},{"style":511},[4375],{"type":410,"value":2000},{"type":405,"tag":474,"props":4377,"children":4378},{"style":505},[4379],{"type":410,"value":3813},{"type":405,"tag":474,"props":4381,"children":4382},{"style":584},[4383],{"type":410,"value":1269},{"type":405,"tag":474,"props":4385,"children":4386},{"class":476,"line":1686},[4387],{"type":405,"tag":474,"props":4388,"children":4389},{"style":1244},[4390],{"type":410,"value":4391},"  // 不使用升级协议指令\n",{"type":405,"tag":474,"props":4393,"children":4394},{"class":476,"line":1695},[4395],{"type":405,"tag":474,"props":4396,"children":4397},{"style":1244},[4398],{"type":410,"value":4399},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":405,"tag":474,"props":4401,"children":4402},{"class":476,"line":1738},[4403],{"type":405,"tag":474,"props":4404,"children":4405},{"style":1244},[4406],{"type":410,"value":4407},"  // 所以默认不开启此指令\n",{"type":405,"tag":474,"props":4409,"children":4410},{"class":476,"line":1747},[4411,4415,4420,4424,4428],{"type":405,"tag":474,"props":4412,"children":4413},{"style":511},[4414],{"type":410,"value":1255},{"type":405,"tag":474,"props":4416,"children":4417},{"style":3780},[4418],{"type":410,"value":4419},"upgrade-insecure-requests",{"type":405,"tag":474,"props":4421,"children":4422},{"style":511},[4423],{"type":410,"value":514},{"type":405,"tag":474,"props":4425,"children":4426},{"style":584},[4427],{"type":410,"value":1634},{"type":405,"tag":474,"props":4429,"children":4430},{"style":505},[4431],{"type":410,"value":4432}," []\n",{"type":405,"tag":474,"props":4434,"children":4435},{"class":476,"line":1782},[4436],{"type":405,"tag":474,"props":4437,"children":4438},{"style":584},[4439],{"type":410,"value":1744},{"type":405,"tag":406,"props":4441,"children":4442},{},[4443,4445,4451,4453,4459],{"type":410,"value":4444},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":405,"tag":470,"props":4446,"children":4448},{"className":4447},[],[4449],{"type":410,"value":4450},"CSP 1.0",{"type":410,"value":4452}," 的兼容性，我没有找到最新版本规范（",{"type":405,"tag":470,"props":4454,"children":4456},{"className":4455},[],[4457],{"type":410,"value":4458},"CSP 3.0",{"type":410,"value":4460},"）的兼容性数据 😝。",{"type":405,"tag":406,"props":4462,"children":4463},{},[4464],{"type":405,"tag":1127,"props":4465,"children":4468},{"alt":4466,"src":4467},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":405,"tag":674,"props":4470,"children":4472},{"id":4471},"移除下载文件后的打开按钮",[4473],{"type":410,"value":4474},"移除下载文件后的“打开”按钮",{"type":405,"tag":463,"props":4476,"children":4478},{"code":4477,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('X-Download-Options', 'noopen')\n",[4479],{"type":405,"tag":470,"props":4480,"children":4481},{"__ignoreMap":398},[4482],{"type":405,"tag":474,"props":4483,"children":4484},{"class":476,"line":477},[4485,4489,4493,4497,4501,4505,4510,4514,4518,4522,4527,4531],{"type":405,"tag":474,"props":4486,"children":4487},{"style":505},[4488],{"type":410,"value":694},{"type":405,"tag":474,"props":4490,"children":4491},{"style":584},[4492],{"type":410,"value":587},{"type":405,"tag":474,"props":4494,"children":4495},{"style":499},[4496],{"type":410,"value":777},{"type":405,"tag":474,"props":4498,"children":4499},{"style":505},[4500],{"type":410,"value":508},{"type":405,"tag":474,"props":4502,"children":4503},{"style":511},[4504],{"type":410,"value":514},{"type":405,"tag":474,"props":4506,"children":4507},{"style":517},[4508],{"type":410,"value":4509},"X-Download-Options",{"type":405,"tag":474,"props":4511,"children":4512},{"style":511},[4513],{"type":410,"value":514},{"type":405,"tag":474,"props":4515,"children":4516},{"style":584},[4517],{"type":410,"value":799},{"type":405,"tag":474,"props":4519,"children":4520},{"style":511},[4521],{"type":410,"value":804},{"type":405,"tag":474,"props":4523,"children":4524},{"style":517},[4525],{"type":410,"value":4526},"noopen",{"type":405,"tag":474,"props":4528,"children":4529},{"style":511},[4530],{"type":410,"value":514},{"type":405,"tag":474,"props":4532,"children":4533},{"style":505},[4534],{"type":410,"value":529},{"type":405,"tag":406,"props":4536,"children":4537},{},[4538,4540,4545],{"type":410,"value":4539},"在下载文件时，",{"type":405,"tag":470,"props":4541,"children":4543},{"className":4542},[],[4544],{"type":410,"value":4509},{"type":410,"value":4546}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":405,"tag":674,"props":4548,"children":4550},{"id":4549},"开启-dns-预取",[4551],{"type":410,"value":4552},"开启 DNS 预取",{"type":405,"tag":406,"props":4554,"children":4555},{},[4556,4558,4564],{"type":410,"value":4557},"通过设置 ",{"type":405,"tag":470,"props":4559,"children":4561},{"className":4560},[],[4562],{"type":410,"value":4563},"X-DNS-Prefetch-Control",{"type":410,"value":4565}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":405,"tag":406,"props":4567,"children":4568},{},[4569,4571,4578],{"type":410,"value":4570},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":405,"tag":417,"props":4572,"children":4575},{"href":4573,"rel":4574},"https://github.com/helmetjs/helmet/issues/111",[994],[4576],{"type":410,"value":4577},"Issue",{"type":410,"value":984},{"type":405,"tag":463,"props":4580,"children":4582},{"code":4581,"language":466,"meta":398,"className":467,"style":398},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4583],{"type":405,"tag":470,"props":4584,"children":4585},{"__ignoreMap":398},[4586],{"type":405,"tag":474,"props":4587,"children":4588},{"class":476,"line":477},[4589,4593,4597,4601,4605,4609,4613,4617,4621,4625,4630,4634],{"type":405,"tag":474,"props":4590,"children":4591},{"style":505},[4592],{"type":410,"value":694},{"type":405,"tag":474,"props":4594,"children":4595},{"style":584},[4596],{"type":410,"value":587},{"type":405,"tag":474,"props":4598,"children":4599},{"style":499},[4600],{"type":410,"value":777},{"type":405,"tag":474,"props":4602,"children":4603},{"style":505},[4604],{"type":410,"value":508},{"type":405,"tag":474,"props":4606,"children":4607},{"style":511},[4608],{"type":410,"value":514},{"type":405,"tag":474,"props":4610,"children":4611},{"style":517},[4612],{"type":410,"value":4563},{"type":405,"tag":474,"props":4614,"children":4615},{"style":511},[4616],{"type":410,"value":514},{"type":405,"tag":474,"props":4618,"children":4619},{"style":584},[4620],{"type":410,"value":799},{"type":405,"tag":474,"props":4622,"children":4623},{"style":511},[4624],{"type":410,"value":804},{"type":405,"tag":474,"props":4626,"children":4627},{"style":517},[4628],{"type":410,"value":4629},"on",{"type":405,"tag":474,"props":4631,"children":4632},{"style":511},[4633],{"type":410,"value":514},{"type":405,"tag":474,"props":4635,"children":4636},{"style":505},[4637],{"type":410,"value":529},{"type":405,"tag":643,"props":4639,"children":4641},{"id":4640},"阅读更多",[4642],{"type":410,"value":4640},{"type":405,"tag":406,"props":4644,"children":4645},{},[4646],{"type":410,"value":4647},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":405,"tag":3693,"props":4649,"children":4650},{},[4651],{"type":405,"tag":2958,"props":4652,"children":4653},{},[4654,4656],{"type":410,"value":4655},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":405,"tag":413,"props":4657,"children":4658},{},[4659],{"type":405,"tag":417,"props":4660,"children":4664},{"href":4661,"ariaDescribedBy":4662,"dataFootnoteRef":398,"id":4663},"#user-content-fn-secure-cookie",[421],"user-content-fnref-secure-cookie",[4665],{"type":410,"value":4666},"13",{"type":405,"tag":406,"props":4668,"children":4669},{},[4670,4672,4679,4681,4688],{"type":410,"value":4671},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":405,"tag":417,"props":4673,"children":4676},{"href":4674,"rel":4675},"https://owasp.org/www-project-secure-headers/",[994],[4677],{"type":410,"value":4678},"OWASP Secure Headers Project",{"type":410,"value":4680},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":405,"tag":417,"props":4682,"children":4685},{"href":4683,"rel":4684},"https://infosec.mozilla.org/guidelines/web_security",[994],[4686],{"type":410,"value":4687},"Web Security",{"type":410,"value":4689},"。以下是一些额外的可供探索的页面：",{"type":405,"tag":3693,"props":4691,"children":4692},{},[4693,4703,4713],{"type":405,"tag":2958,"props":4694,"children":4695},{},[4696],{"type":405,"tag":417,"props":4697,"children":4700},{"href":4698,"rel":4699},"https://www.zhihu.com/question/21979782",[994],[4701],{"type":410,"value":4702},"Content Security Policy (CSP) 是什么？",{"type":405,"tag":2958,"props":4704,"children":4705},{},[4706],{"type":405,"tag":417,"props":4707,"children":4710},{"href":4708,"rel":4709},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[994],[4711],{"type":410,"value":4712},"CORS@MDN",{"type":405,"tag":2958,"props":4714,"children":4715},{},[4716],{"type":405,"tag":417,"props":4717,"children":4720},{"href":4718,"rel":4719},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[994],[4721],{"type":410,"value":4722},"OWASP Top 10 2017（RC2）",{"type":405,"tag":4724,"props":4725,"children":4728},"section",{"className":4726,"dataFootnotes":398},[4727],"footnotes",[4729,4736],{"type":405,"tag":643,"props":4730,"children":4733},{"className":4731,"id":421},[4732],"sr-only",[4734],{"type":410,"value":4735},"Footnotes",{"type":405,"tag":2954,"props":4737,"children":4738},{},[4739,4761,4780,4799,4816,4835,4854,4867,4885,4904,4923,4942,4961],{"type":405,"tag":2958,"props":4740,"children":4742},{"id":4741},"user-content-fn-helmet",[4743,4750,4752],{"type":405,"tag":417,"props":4744,"children":4747},{"href":4745,"rel":4746},"https://helmetjs.github.io/",[994],[4748],{"type":410,"value":4749},"HELMET",{"type":410,"value":4751}," ",{"type":405,"tag":417,"props":4753,"children":4758},{"href":4754,"ariaLabel":4755,"className":4756,"dataFootnoteBackref":398},"#user-content-fnref-helmet","Back to reference 1",[4757],"data-footnote-backref",[4759],{"type":410,"value":4760},"↩",{"type":405,"tag":2958,"props":4762,"children":4764},{"id":4763},"user-content-fn-dns-rebinding-1",[4765,4772,4773],{"type":405,"tag":417,"props":4766,"children":4769},{"href":4767,"rel":4768},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[994],[4770],{"type":410,"value":4771},"来自微信外挂的安全风险",{"type":410,"value":4751},{"type":405,"tag":417,"props":4774,"children":4778},{"href":4775,"ariaLabel":4776,"className":4777,"dataFootnoteBackref":398},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4757],[4779],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4781,"children":4783},{"id":4782},"user-content-fn-dns-rebinding-2",[4784,4791,4792],{"type":405,"tag":417,"props":4785,"children":4788},{"href":4786,"rel":4787},"https://github.com/helmetjs/helmet/issues/182",[994],[4789],{"type":410,"value":4790},"GitHub Issue",{"type":410,"value":4751},{"type":405,"tag":417,"props":4793,"children":4797},{"href":4794,"ariaLabel":4795,"className":4796,"dataFootnoteBackref":398},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4757],[4798],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4800,"children":4802},{"id":4801},"user-content-fn-shp",[4803,4808,4809],{"type":405,"tag":417,"props":4804,"children":4806},{"href":4674,"rel":4805},[994],[4807],{"type":410,"value":4678},{"type":410,"value":4751},{"type":405,"tag":417,"props":4810,"children":4814},{"href":4811,"ariaLabel":4812,"className":4813,"dataFootnoteBackref":398},"#user-content-fnref-shp","Back to reference 4",[4757],[4815],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4817,"children":4819},{"id":4818},"user-content-fn-xss-auditor",[4820,4827,4828],{"type":405,"tag":417,"props":4821,"children":4824},{"href":4822,"rel":4823},"https://www.chromestatus.com/feature/5021976655560704",[994],[4825],{"type":410,"value":4826},"XSS Auditor (removed)",{"type":410,"value":4751},{"type":405,"tag":417,"props":4829,"children":4833},{"href":4830,"ariaLabel":4831,"className":4832,"dataFootnoteBackref":398},"#user-content-fnref-xss-auditor","Back to reference 5",[4757],[4834],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4836,"children":4838},{"id":4837},"user-content-fn-delete-xss-auditor",[4839,4846,4847],{"type":405,"tag":417,"props":4840,"children":4843},{"href":4841,"rel":4842},"https://zhuanlan.zhihu.com/p/74288648",[994],[4844],{"type":410,"value":4845},"Google 将删除 Chrome 内置的 XSS 保护",{"type":410,"value":4751},{"type":405,"tag":417,"props":4848,"children":4852},{"href":4849,"ariaLabel":4850,"className":4851,"dataFootnoteBackref":398},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4757],[4853],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4855,"children":4857},{"id":4856},"user-content-fn-referer",[4858,4860],{"type":410,"value":4859},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":405,"tag":417,"props":4861,"children":4865},{"href":4862,"ariaLabel":4863,"className":4864,"dataFootnoteBackref":398},"#user-content-fnref-referer","Back to reference 7",[4757],[4866],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4868,"children":4870},{"id":4869},"user-content-fn-timeend",[4871,4877,4878],{"type":405,"tag":417,"props":4872,"children":4875},{"href":4873,"rel":4874},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[994],[4876],{"type":410,"value":2765},{"type":410,"value":4751},{"type":405,"tag":417,"props":4879,"children":4883},{"href":4880,"ariaLabel":4881,"className":4882,"dataFootnoteBackref":398},"#user-content-fnref-timeend","Back to reference 8",[4757],[4884],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4886,"children":4888},{"id":4887},"user-content-fn-chrome-ct",[4889,4896,4897],{"type":405,"tag":417,"props":4890,"children":4893},{"href":4891,"rel":4892},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[994],[4894],{"type":410,"value":4895},"Chrome 证书透明度（CT）相关政策",{"type":410,"value":4751},{"type":405,"tag":417,"props":4898,"children":4902},{"href":4899,"ariaLabel":4900,"className":4901,"dataFootnoteBackref":398},"#user-content-fnref-chrome-ct","Back to reference 9",[4757],[4903],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4905,"children":4907},{"id":4906},"user-content-fn-ct",[4908,4915,4916],{"type":405,"tag":417,"props":4909,"children":4912},{"href":4910,"rel":4911},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[994],[4913],{"type":410,"value":4914},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":410,"value":4751},{"type":405,"tag":417,"props":4917,"children":4921},{"href":4918,"ariaLabel":4919,"className":4920,"dataFootnoteBackref":398},"#user-content-fnref-ct","Back to reference 10",[4757],[4922],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4924,"children":4926},{"id":4925},"user-content-fn-pdf-reader",[4927,4934,4935],{"type":405,"tag":417,"props":4928,"children":4931},{"href":4929,"rel":4930},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[994],[4932],{"type":410,"value":4933},"Cross Domain Configuration",{"type":410,"value":4751},{"type":405,"tag":417,"props":4936,"children":4940},{"href":4937,"ariaLabel":4938,"className":4939,"dataFootnoteBackref":398},"#user-content-fnref-pdf-reader","Back to reference 11",[4757],[4941],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4943,"children":4945},{"id":4944},"user-content-fn-csp-standard",[4946,4953,4954],{"type":405,"tag":417,"props":4947,"children":4950},{"href":4948,"rel":4949},"https://www.w3.org/TR/CSP/",[994],[4951],{"type":410,"value":4952},"Content Security Policy Level 3",{"type":410,"value":4751},{"type":405,"tag":417,"props":4955,"children":4959},{"href":4956,"ariaLabel":4957,"className":4958,"dataFootnoteBackref":398},"#user-content-fnref-csp-standard","Back to reference 12",[4757],[4960],{"type":410,"value":4760},{"type":405,"tag":2958,"props":4962,"children":4964},{"id":4963},"user-content-fn-secure-cookie",[4965,4972,4973],{"type":405,"tag":417,"props":4966,"children":4969},{"href":4967,"rel":4968},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[994],[4970],{"type":410,"value":4971},"Secure-Cookie",{"type":410,"value":4751},{"type":405,"tag":417,"props":4974,"children":4978},{"href":4975,"ariaLabel":4976,"className":4977,"dataFootnoteBackref":398},"#user-content-fnref-secure-cookie","Back to reference 13",[4757],[4979],{"type":410,"value":4760},{"type":405,"tag":4981,"props":4982,"children":4983},"style",{},[4984],{"type":410,"value":4985},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":398,"searchDepth":532,"depth":532,"links":4987},[4988,5001,5002],{"id":645,"depth":532,"text":648,"children":4989},[4990,4991,4992,4993,4994,4995,4996,4997,4998,4999,5000],{"id":676,"depth":541,"text":679},{"id":751,"depth":541,"text":754},{"id":841,"depth":541,"text":844},{"id":1001,"depth":541,"text":1001},{"id":1160,"depth":541,"text":1163},{"id":2171,"depth":541,"text":2174},{"id":2809,"depth":541,"text":2809},{"id":2918,"depth":541,"text":2921},{"id":3549,"depth":541,"text":3552},{"id":4471,"depth":541,"text":4474},{"id":4549,"depth":541,"text":4552},{"id":4640,"depth":532,"text":4640},{"id":421,"depth":532,"text":4735},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[5010,5014],{"_path":5011,"title":5012,"description":5013},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5015,"title":5016,"description":398},"/_achieved/2020-10/noname","无题",1741604952095]