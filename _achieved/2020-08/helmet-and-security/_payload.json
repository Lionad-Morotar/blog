[{"data":1,"prerenderedAt":5008},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":384,"/_achieved/2020-08/helmet-and-security-surround":5000},[4,35,86,105,132,138,144,150,378],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":205,"_path":206},"正则表达式","/gists/eegex",{"title":208,"_path":209},"Emoji","/gists/emoji",{"title":211,"_path":212},"工程","/gists/engineering",{"title":214,"_path":215},"熵","/gists/entropy",{"title":217,"_path":218},"Environment","/gists/environment",{"title":220,"_path":221},"Erlang","/gists/erlang",{"title":223,"_path":224},"逃离塔克夫","/gists/escape-from-tarkov",{"title":226,"_path":227},"ESNext (ES6-ES11)","/gists/esnext",{"title":229,"_path":230},"Eval！","/gists/eval",{"title":232,"_path":233},"Flutter","/gists/flutter",{"title":235,"_path":236},"字体","/gists/font",{"title":238,"_path":239},"JS 函数式编程","/gists/functional",{"title":241,"_path":242},"游戏化","/gists/gamification",{"title":244,"_path":245},"Google C++ Standard","/gists/google-cpp-standard",{"title":247,"_path":248},"双向链接完全体","/gists/graph",{"title":250,"_path":251},"Hardwares","/gists/hardwares",{"title":253,"_path":254},"哈希冲突","/gists/hash-collision",{"title":256,"_path":257},"信息设计","/gists/information-design",{"title":259,"_path":260},"InstantPage","/gists/instant.page",{"title":262,"_path":263},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":265,"_path":266},"KVStore","/gists/key-value-db",{"title":268,"_path":269},"Kubernetes","/gists/kubernetes",{"title":271,"_path":272},"Makefile","/gists/makefile",{"title":274,"_path":275},"Markdown Inline Style","/gists/markdown-nice",{"title":277,"_path":278},"减小页面快照体积","/gists/minify-html",{"title":280,"_path":281},"mklink","/gists/mklink",{"title":283,"_path":284},"Mock","/gists/mock",{"title":286,"_path":287},"多人协作系统","/gists/multiplayer",{"title":289,"_path":290},"多端应用","/gists/multy-end-app",{"title":292,"_path":293},"神经科学","/gists/neuroscience",{"title":295,"_path":296},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":298,"_path":299},"PInvoke","/gists/pinvoke",{"title":301,"_path":302},"像素","/gists/pixel",{"title":304,"_path":305},"PowerShell","/gists/powershell",{"title":307,"_path":308},"量子","/gists/quantum",{"title":310,"_path":311},"保持好奇心","/gists/questions",{"title":313,"_path":314},"React Native","/gists/react-native",{"title":316,"_path":317},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":319,"_path":320},"SEO","/gists/seo",{"title":322,"_path":323},"Shader","/gists/shader",{"title":325,"_path":326},"Shape Up","/gists/shape-up",{"title":328,"_path":329},"睡觉","/gists/sleep",{"title":331,"_path":332},"记录奇怪的问题","/gists/solved",{"title":334,"_path":335},"States","/gists/states",{"title":337,"_path":338},"Storage","/gists/storage",{"title":340,"_path":341},"音视频流处理","/gists/stream-cli",{"title":343,"_path":344},"Symbol","/gists/symbol",{"title":346,"_path":347},"系统论","/gists/systems-theory",{"title":349,"_path":350},"任务切片","/gists/task-slice",{"title":352,"_path":353},"技术偏好","/gists/tech-dudge",{"title":355,"_path":356},"Untitled","/gists/untitled",{"title":358,"_path":359},"可变字体","/gists/variable-font",{"title":361,"_path":362},"视觉错觉","/gists/visual-illusion",{"title":364,"_path":365},"SS(SSR)","/gists/vpn",{"title":367,"_path":368},"VS Code 插件开发","/gists/vscode-plugin",{"title":370,"_path":371},"Web Components","/gists/web-components",{"title":373,"_path":374},"Windows","/gists/windows",{"title":376,"_path":377},"查缺补漏","/gists/wrong",{"title":379,"_path":380,"children":381},"我 / About","/hire",[382],{"title":383,"_path":380},"📬 技术简历",{"_path":385,"_dir":386,"_draft":387,"_partial":388,"_locale":389,"title":390,"description":391,"body":392,"_type":4994,"_id":4995,"_source":4996,"_file":4997,"_stem":4998,"_extension":4999},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":393,"children":394,"toc":4977},"root",[395,417,448,453,615,620,628,633,640,664,671,716,728,740,746,809,830,836,896,908,976,990,995,1055,1080,1114,1123,1149,1155,1192,1933,1953,2160,2166,2191,2234,2242,2798,2803,2851,2887,2895,2907,2913,2937,2944,2967,2972,3202,3221,3533,3538,3544,3583,3593,3658,3670,3678,3683,3715,3727,4431,4452,4460,4466,4526,4538,4544,4557,4570,4629,4634,4639,4658,4681,4714,4971],{"type":396,"tag":397,"props":398,"children":399},"element","p",{},[400,403],{"type":401,"value":402},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":396,"tag":404,"props":405,"children":406},"sup",{},[407],{"type":396,"tag":408,"props":409,"children":414},"a",{"href":410,"ariaDescribedBy":411,"dataFootnoteRef":389,"id":413},"#user-content-fn-helmet",[412],"footnote-label","user-content-fnref-helmet",[415],{"type":401,"value":416},"1",{"type":396,"tag":397,"props":418,"children":419},{},[420,422,433,435,446],{"type":401,"value":421},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":396,"tag":404,"props":423,"children":424},{},[425],{"type":396,"tag":408,"props":426,"children":430},{"href":427,"ariaDescribedBy":428,"dataFootnoteRef":389,"id":429},"#user-content-fn-dns-rebinding-1",[412],"user-content-fnref-dns-rebinding-1",[431],{"type":401,"value":432},"2",{"type":401,"value":434}," 问题，它就无能为力",{"type":396,"tag":404,"props":436,"children":437},{},[438],{"type":396,"tag":408,"props":439,"children":443},{"href":440,"ariaDescribedBy":441,"dataFootnoteRef":389,"id":442},"#user-content-fn-dns-rebinding-2",[412],"user-content-fnref-dns-rebinding-2",[444],{"type":401,"value":445},"3",{"type":401,"value":447},"。不过尽管不是银弹，它确实还是很有效的。",{"type":396,"tag":397,"props":449,"children":450},{},[451],{"type":401,"value":452},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":396,"tag":454,"props":455,"children":459},"pre",{"code":456,"language":457,"meta":389,"className":458,"style":389},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[460],{"type":396,"tag":461,"props":462,"children":463},"code",{"__ignoreMap":389},[464,521,530,556,564],{"type":396,"tag":465,"props":466,"children":469},"span",{"class":467,"line":468},"line",1,[470,476,482,488,494,500,506,512,516],{"type":396,"tag":465,"props":471,"children":473},{"style":472},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[474],{"type":401,"value":475},"const",{"type":396,"tag":465,"props":477,"children":479},{"style":478},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[480],{"type":401,"value":481}," express",{"type":396,"tag":465,"props":483,"children":485},{"style":484},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[486],{"type":401,"value":487}," =",{"type":396,"tag":465,"props":489,"children":491},{"style":490},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[492],{"type":401,"value":493}," require",{"type":396,"tag":465,"props":495,"children":497},{"style":496},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[498],{"type":401,"value":499},"(",{"type":396,"tag":465,"props":501,"children":503},{"style":502},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[504],{"type":401,"value":505},"'",{"type":396,"tag":465,"props":507,"children":509},{"style":508},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[510],{"type":401,"value":511},"express",{"type":396,"tag":465,"props":513,"children":514},{"style":502},[515],{"type":401,"value":505},{"type":396,"tag":465,"props":517,"children":518},{"style":496},[519],{"type":401,"value":520},")\n",{"type":396,"tag":465,"props":522,"children":524},{"class":467,"line":523},2,[525],{"type":396,"tag":465,"props":526,"children":527},{"emptyLinePlaceholder":388},[528],{"type":401,"value":529},"\n",{"type":396,"tag":465,"props":531,"children":533},{"class":467,"line":532},3,[534,538,543,547,551],{"type":396,"tag":465,"props":535,"children":536},{"style":472},[537],{"type":401,"value":475},{"type":396,"tag":465,"props":539,"children":540},{"style":478},[541],{"type":401,"value":542}," app",{"type":396,"tag":465,"props":544,"children":545},{"style":484},[546],{"type":401,"value":487},{"type":396,"tag":465,"props":548,"children":549},{"style":490},[550],{"type":401,"value":481},{"type":396,"tag":465,"props":552,"children":553},{"style":496},[554],{"type":401,"value":555},"()\n",{"type":396,"tag":465,"props":557,"children":559},{"class":467,"line":558},4,[560],{"type":396,"tag":465,"props":561,"children":562},{"emptyLinePlaceholder":388},[563],{"type":401,"value":529},{"type":396,"tag":465,"props":565,"children":567},{"class":467,"line":566},5,[568,573,579,584,588,593,597,601,606,610],{"type":396,"tag":465,"props":569,"children":570},{"style":496},[571],{"type":401,"value":572},"app",{"type":396,"tag":465,"props":574,"children":576},{"style":575},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[577],{"type":401,"value":578},".",{"type":396,"tag":465,"props":580,"children":581},{"style":490},[582],{"type":401,"value":583},"use",{"type":396,"tag":465,"props":585,"children":586},{"style":496},[587],{"type":401,"value":499},{"type":396,"tag":465,"props":589,"children":590},{"style":490},[591],{"type":401,"value":592},"require",{"type":396,"tag":465,"props":594,"children":595},{"style":496},[596],{"type":401,"value":499},{"type":396,"tag":465,"props":598,"children":599},{"style":502},[600],{"type":401,"value":505},{"type":396,"tag":465,"props":602,"children":603},{"style":508},[604],{"type":401,"value":605},"helmet",{"type":396,"tag":465,"props":607,"children":608},{"style":502},[609],{"type":401,"value":505},{"type":396,"tag":465,"props":611,"children":612},{"style":496},[613],{"type":401,"value":614},")())\n",{"type":396,"tag":397,"props":616,"children":617},{},[618],{"type":401,"value":619},"新的响应请求的 Headers 会变成这样：",{"type":396,"tag":454,"props":621,"children":623},{"code":622},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[624],{"type":396,"tag":461,"props":625,"children":626},{"__ignoreMap":389},[627],{"type":401,"value":622},{"type":396,"tag":397,"props":629,"children":630},{},[631],{"type":401,"value":632},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":396,"tag":634,"props":635,"children":637},"h2",{"id":636},"_11-种安全策略",[638],{"type":401,"value":639},"11 种安全策略",{"type":396,"tag":397,"props":641,"children":642},{},[643,645,651,662],{"type":401,"value":644},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":396,"tag":461,"props":646,"children":648},{"className":647},[],[649],{"type":401,"value":650},"OWASP Secure Headers",{"type":396,"tag":404,"props":652,"children":653},{},[654],{"type":396,"tag":408,"props":655,"children":659},{"href":656,"ariaDescribedBy":657,"dataFootnoteRef":389,"id":658},"#user-content-fn-shp",[412],"user-content-fnref-shp",[660],{"type":401,"value":661},"4",{"type":401,"value":663}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":396,"tag":665,"props":666,"children":668},"h3",{"id":667},"移除-x-powered-by",[669],{"type":401,"value":670},"移除 X-Powered-By",{"type":396,"tag":454,"props":672,"children":674},{"code":673,"language":457,"meta":389,"className":458,"style":389},"response.removeHeader('X-Powered-By')\n",[675],{"type":396,"tag":461,"props":676,"children":677},{"__ignoreMap":389},[678],{"type":396,"tag":465,"props":679,"children":680},{"class":467,"line":468},[681,686,690,695,699,703,708,712],{"type":396,"tag":465,"props":682,"children":683},{"style":496},[684],{"type":401,"value":685},"response",{"type":396,"tag":465,"props":687,"children":688},{"style":575},[689],{"type":401,"value":578},{"type":396,"tag":465,"props":691,"children":692},{"style":490},[693],{"type":401,"value":694},"removeHeader",{"type":396,"tag":465,"props":696,"children":697},{"style":496},[698],{"type":401,"value":499},{"type":396,"tag":465,"props":700,"children":701},{"style":502},[702],{"type":401,"value":505},{"type":396,"tag":465,"props":704,"children":705},{"style":508},[706],{"type":401,"value":707},"X-Powered-By",{"type":396,"tag":465,"props":709,"children":710},{"style":502},[711],{"type":401,"value":505},{"type":396,"tag":465,"props":713,"children":714},{"style":496},[715],{"type":401,"value":520},{"type":396,"tag":397,"props":717,"children":718},{},[719,721,726],{"type":401,"value":720},"一些框架会在请求头中添加 ",{"type":396,"tag":461,"props":722,"children":724},{"className":723},[],[725],{"type":401,"value":707},{"type":401,"value":727},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":396,"tag":397,"props":729,"children":730},{},[731,733,738],{"type":401,"value":732},"由于 Express 默认会给响应头增加 ",{"type":396,"tag":461,"props":734,"children":736},{"className":735},[],[737],{"type":401,"value":707},{"type":401,"value":739},"，所以 Helmet 直接把它移除了。",{"type":396,"tag":665,"props":741,"children":743},{"id":742},"移除-mime-嗅探",[744],{"type":401,"value":745},"移除 MIME 嗅探",{"type":396,"tag":454,"props":747,"children":749},{"code":748,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[750],{"type":396,"tag":461,"props":751,"children":752},{"__ignoreMap":389},[753],{"type":396,"tag":465,"props":754,"children":755},{"class":467,"line":468},[756,760,764,769,773,777,782,786,791,796,801,805],{"type":396,"tag":465,"props":757,"children":758},{"style":496},[759],{"type":401,"value":685},{"type":396,"tag":465,"props":761,"children":762},{"style":575},[763],{"type":401,"value":578},{"type":396,"tag":465,"props":765,"children":766},{"style":490},[767],{"type":401,"value":768},"setHeader",{"type":396,"tag":465,"props":770,"children":771},{"style":496},[772],{"type":401,"value":499},{"type":396,"tag":465,"props":774,"children":775},{"style":502},[776],{"type":401,"value":505},{"type":396,"tag":465,"props":778,"children":779},{"style":508},[780],{"type":401,"value":781},"X-Content-Type-Options",{"type":396,"tag":465,"props":783,"children":784},{"style":502},[785],{"type":401,"value":505},{"type":396,"tag":465,"props":787,"children":788},{"style":575},[789],{"type":401,"value":790},",",{"type":396,"tag":465,"props":792,"children":793},{"style":502},[794],{"type":401,"value":795}," '",{"type":396,"tag":465,"props":797,"children":798},{"style":508},[799],{"type":401,"value":800},"nosniff",{"type":396,"tag":465,"props":802,"children":803},{"style":502},[804],{"type":401,"value":505},{"type":396,"tag":465,"props":806,"children":807},{"style":496},[808],{"type":401,"value":520},{"type":396,"tag":397,"props":810,"children":811},{},[812,814,820,822,828],{"type":401,"value":813},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":396,"tag":461,"props":815,"children":817},{"className":816},[],[818],{"type":401,"value":819},"Content-Type",{"type":401,"value":821},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":396,"tag":461,"props":823,"children":825},{"className":824},[],[826],{"type":401,"value":827},"X-Content-Type-Options = nosniff",{"type":401,"value":829}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":396,"tag":665,"props":831,"children":833},{"id":832},"移除-x-xss-protection",[834],{"type":401,"value":835},"移除 X-XSS-Protection",{"type":396,"tag":454,"props":837,"children":839},{"code":838,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('X-XSS-Protection', '0')\n",[840],{"type":396,"tag":461,"props":841,"children":842},{"__ignoreMap":389},[843],{"type":396,"tag":465,"props":844,"children":845},{"class":467,"line":468},[846,850,854,858,862,866,871,875,879,883,888,892],{"type":396,"tag":465,"props":847,"children":848},{"style":496},[849],{"type":401,"value":685},{"type":396,"tag":465,"props":851,"children":852},{"style":575},[853],{"type":401,"value":578},{"type":396,"tag":465,"props":855,"children":856},{"style":490},[857],{"type":401,"value":768},{"type":396,"tag":465,"props":859,"children":860},{"style":496},[861],{"type":401,"value":499},{"type":396,"tag":465,"props":863,"children":864},{"style":502},[865],{"type":401,"value":505},{"type":396,"tag":465,"props":867,"children":868},{"style":508},[869],{"type":401,"value":870},"X-XSS-Protection",{"type":396,"tag":465,"props":872,"children":873},{"style":502},[874],{"type":401,"value":505},{"type":396,"tag":465,"props":876,"children":877},{"style":575},[878],{"type":401,"value":790},{"type":396,"tag":465,"props":880,"children":881},{"style":502},[882],{"type":401,"value":795},{"type":396,"tag":465,"props":884,"children":885},{"style":508},[886],{"type":401,"value":887},"0",{"type":396,"tag":465,"props":889,"children":890},{"style":502},[891],{"type":401,"value":505},{"type":396,"tag":465,"props":893,"children":894},{"style":496},[895],{"type":401,"value":520},{"type":396,"tag":397,"props":897,"children":898},{},[899,901,906],{"type":401,"value":900},"不是应该打开 ",{"type":396,"tag":461,"props":902,"children":904},{"className":903},[],[905],{"type":401,"value":870},{"type":401,"value":907},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":396,"tag":397,"props":909,"children":910},{},[911,913,919,921,932,934,939,941,947,949,960,962,967,969,974],{"type":401,"value":912},"这得追溯回去年的 Chrome 移除 ",{"type":396,"tag":461,"props":914,"children":916},{"className":915},[],[917],{"type":401,"value":918},"XSS Auditor",{"type":401,"value":920},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":396,"tag":404,"props":922,"children":923},{},[924],{"type":396,"tag":408,"props":925,"children":929},{"href":926,"ariaDescribedBy":927,"dataFootnoteRef":389,"id":928},"#user-content-fn-xss-auditor",[412],"user-content-fnref-xss-auditor",[930],{"type":401,"value":931},"5",{"type":401,"value":933},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":396,"tag":461,"props":935,"children":937},{"className":936},[],[938],{"type":401,"value":918},{"type":401,"value":940},"，并开始使用 ",{"type":396,"tag":461,"props":942,"children":944},{"className":943},[],[945],{"type":401,"value":946},"CSP",{"type":401,"value":948}," 等现代标准（更现代的标准）",{"type":396,"tag":404,"props":950,"children":951},{},[952],{"type":396,"tag":408,"props":953,"children":957},{"href":954,"ariaDescribedBy":955,"dataFootnoteRef":389,"id":956},"#user-content-fn-delete-xss-auditor",[412],"user-content-fnref-delete-xss-auditor",[958],{"type":401,"value":959},"6",{"type":401,"value":961},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":396,"tag":461,"props":963,"children":965},{"className":964},[],[966],{"type":401,"value":870},{"type":401,"value":968}," 这个响应头是让浏览器不要再用 ",{"type":396,"tag":461,"props":970,"children":972},{"className":971},[],[973],{"type":401,"value":918},{"type":401,"value":975},"。",{"type":396,"tag":397,"props":977,"children":978},{},[979,981,989],{"type":401,"value":980},"见：",{"type":396,"tag":408,"props":982,"children":986},{"href":983,"rel":984},"https://github.com/OWASP/CheatSheetSeries/issues/376",[985],"nofollow",[987],{"type":401,"value":988},"#376",{"type":401,"value":975},{"type":396,"tag":665,"props":991,"children":993},{"id":992},"禁止页面被嵌套",[994],{"type":401,"value":992},{"type":396,"tag":454,"props":996,"children":998},{"code":997,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[999],{"type":396,"tag":461,"props":1000,"children":1001},{"__ignoreMap":389},[1002],{"type":396,"tag":465,"props":1003,"children":1004},{"class":467,"line":468},[1005,1009,1013,1017,1021,1025,1030,1034,1038,1042,1047,1051],{"type":396,"tag":465,"props":1006,"children":1007},{"style":496},[1008],{"type":401,"value":685},{"type":396,"tag":465,"props":1010,"children":1011},{"style":575},[1012],{"type":401,"value":578},{"type":396,"tag":465,"props":1014,"children":1015},{"style":490},[1016],{"type":401,"value":768},{"type":396,"tag":465,"props":1018,"children":1019},{"style":496},[1020],{"type":401,"value":499},{"type":396,"tag":465,"props":1022,"children":1023},{"style":502},[1024],{"type":401,"value":505},{"type":396,"tag":465,"props":1026,"children":1027},{"style":508},[1028],{"type":401,"value":1029},"X-Frame-Options",{"type":396,"tag":465,"props":1031,"children":1032},{"style":502},[1033],{"type":401,"value":505},{"type":396,"tag":465,"props":1035,"children":1036},{"style":575},[1037],{"type":401,"value":790},{"type":396,"tag":465,"props":1039,"children":1040},{"style":502},[1041],{"type":401,"value":795},{"type":396,"tag":465,"props":1043,"children":1044},{"style":508},[1045],{"type":401,"value":1046},"SAMEORIGIN",{"type":396,"tag":465,"props":1048,"children":1049},{"style":502},[1050],{"type":401,"value":505},{"type":396,"tag":465,"props":1052,"children":1053},{"style":496},[1054],{"type":401,"value":520},{"type":396,"tag":397,"props":1056,"children":1057},{},[1058,1063,1065,1070,1072,1078],{"type":396,"tag":461,"props":1059,"children":1061},{"className":1060},[],[1062],{"type":401,"value":1029},{"type":401,"value":1064}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":396,"tag":461,"props":1066,"children":1068},{"className":1067},[],[1069],{"type":401,"value":1029},{"type":401,"value":1071}," 为 ",{"type":396,"tag":461,"props":1073,"children":1075},{"className":1074},[],[1076],{"type":401,"value":1077},"SameOrigin",{"type":401,"value":1079},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":396,"tag":397,"props":1081,"children":1082},{},[1083,1085,1091,1093,1098,1099,1105,1107,1112],{"type":401,"value":1084},"本来它的值有三种选择，",{"type":396,"tag":461,"props":1086,"children":1088},{"className":1087},[],[1089],{"type":401,"value":1090},"Deny",{"type":401,"value":1092},"、",{"type":396,"tag":461,"props":1094,"children":1096},{"className":1095},[],[1097],{"type":401,"value":1077},{"type":401,"value":1092},{"type":396,"tag":461,"props":1100,"children":1102},{"className":1101},[],[1103],{"type":401,"value":1104},"AllowFrom",{"type":401,"value":1106},"。但 ",{"type":396,"tag":461,"props":1108,"children":1110},{"className":1109},[],[1111],{"type":401,"value":1104},{"type":401,"value":1113}," 因为其兼容性原因，被 Helmet 弃用：",{"type":396,"tag":397,"props":1115,"children":1116},{},[1117],{"type":396,"tag":1118,"props":1119,"children":1122},"img",{"alt":1120,"src":1121},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":396,"tag":397,"props":1124,"children":1125},{},[1126,1128,1133,1135,1141,1143,1148],{"type":401,"value":1127},"此外，可以在 ",{"type":396,"tag":461,"props":1129,"children":1131},{"className":1130},[],[1132],{"type":401,"value":946},{"type":401,"value":1134}," 中设置 ",{"type":396,"tag":461,"props":1136,"children":1138},{"className":1137},[],[1139],{"type":401,"value":1140},"frame-ancestors",{"type":401,"value":1142}," 指令来替代 ",{"type":396,"tag":461,"props":1144,"children":1146},{"className":1145},[],[1147],{"type":401,"value":1029},{"type":401,"value":975},{"type":396,"tag":665,"props":1150,"children":1152},{"id":1151},"移除-referer",[1153],{"type":401,"value":1154},"移除 Referer",{"type":396,"tag":397,"props":1156,"children":1157},{},[1158,1164,1166,1172,1183,1185,1190],{"type":396,"tag":461,"props":1159,"children":1161},{"className":1160},[],[1162],{"type":401,"value":1163},"Referrer-Policy",{"type":401,"value":1165}," 可以控制浏览器请求头的 ",{"type":396,"tag":461,"props":1167,"children":1169},{"className":1168},[],[1170],{"type":401,"value":1171},"Referer",{"type":396,"tag":404,"props":1173,"children":1174},{},[1175],{"type":396,"tag":408,"props":1176,"children":1180},{"href":1177,"ariaDescribedBy":1178,"dataFootnoteRef":389,"id":1179},"#user-content-fn-referer",[412],"user-content-fnref-referer",[1181],{"type":401,"value":1182},"7",{"type":401,"value":1184}," 的显示方式。移除 ",{"type":396,"tag":461,"props":1186,"children":1188},{"className":1187},[],[1189],{"type":401,"value":1171},{"type":401,"value":1191}," 能保护用户的访问记录，防止隐私泄漏。",{"type":396,"tag":454,"props":1193,"children":1195},{"code":1194,"language":457,"meta":389,"className":458,"style":389},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[1196],{"type":396,"tag":461,"props":1197,"children":1198},{"__ignoreMap":389},[1199,1230,1239,1261,1269,1289,1298,1319,1328,1349,1358,1379,1388,1409,1418,1439,1448,1469,1478,1487,1496,1557,1631,1662,1675,1684,1727,1736,1771,1804,1858,1903,1916,1925],{"type":396,"tag":465,"props":1200,"children":1201},{"class":467,"line":468},[1202,1206,1211,1215,1220,1225],{"type":396,"tag":465,"props":1203,"children":1204},{"style":472},[1205],{"type":401,"value":475},{"type":396,"tag":465,"props":1207,"children":1208},{"style":478},[1209],{"type":401,"value":1210}," ALLOWED_TOKENS",{"type":396,"tag":465,"props":1212,"children":1213},{"style":484},[1214],{"type":401,"value":487},{"type":396,"tag":465,"props":1216,"children":1217},{"style":484},[1218],{"type":401,"value":1219}," new",{"type":396,"tag":465,"props":1221,"children":1222},{"style":490},[1223],{"type":401,"value":1224}," Set",{"type":396,"tag":465,"props":1226,"children":1227},{"style":496},[1228],{"type":401,"value":1229},"([\n",{"type":396,"tag":465,"props":1231,"children":1232},{"class":467,"line":523},[1233],{"type":396,"tag":465,"props":1234,"children":1236},{"style":1235},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1237],{"type":401,"value":1238},"  // 任何时候都不携带 Referer\n",{"type":396,"tag":465,"props":1240,"children":1241},{"class":467,"line":532},[1242,1247,1252,1256],{"type":396,"tag":465,"props":1243,"children":1244},{"style":502},[1245],{"type":401,"value":1246},"  '",{"type":396,"tag":465,"props":1248,"children":1249},{"style":508},[1250],{"type":401,"value":1251},"no-referrer",{"type":396,"tag":465,"props":1253,"children":1254},{"style":502},[1255],{"type":401,"value":505},{"type":396,"tag":465,"props":1257,"children":1258},{"style":575},[1259],{"type":401,"value":1260},",\n",{"type":396,"tag":465,"props":1262,"children":1263},{"class":467,"line":558},[1264],{"type":396,"tag":465,"props":1265,"children":1266},{"style":1235},[1267],{"type":401,"value":1268},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":396,"tag":465,"props":1270,"children":1271},{"class":467,"line":566},[1272,1276,1281,1285],{"type":396,"tag":465,"props":1273,"children":1274},{"style":502},[1275],{"type":401,"value":1246},{"type":396,"tag":465,"props":1277,"children":1278},{"style":508},[1279],{"type":401,"value":1280},"no-referrer-when-downgrade",{"type":396,"tag":465,"props":1282,"children":1283},{"style":502},[1284],{"type":401,"value":505},{"type":396,"tag":465,"props":1286,"children":1287},{"style":575},[1288],{"type":401,"value":1260},{"type":396,"tag":465,"props":1290,"children":1292},{"class":467,"line":1291},6,[1293],{"type":396,"tag":465,"props":1294,"children":1295},{"style":1235},[1296],{"type":401,"value":1297},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":396,"tag":465,"props":1299,"children":1301},{"class":467,"line":1300},7,[1302,1306,1311,1315],{"type":396,"tag":465,"props":1303,"children":1304},{"style":502},[1305],{"type":401,"value":1246},{"type":396,"tag":465,"props":1307,"children":1308},{"style":508},[1309],{"type":401,"value":1310},"same-origin",{"type":396,"tag":465,"props":1312,"children":1313},{"style":502},[1314],{"type":401,"value":505},{"type":396,"tag":465,"props":1316,"children":1317},{"style":575},[1318],{"type":401,"value":1260},{"type":396,"tag":465,"props":1320,"children":1322},{"class":467,"line":1321},8,[1323],{"type":396,"tag":465,"props":1324,"children":1325},{"style":1235},[1326],{"type":401,"value":1327},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":396,"tag":465,"props":1329,"children":1331},{"class":467,"line":1330},9,[1332,1336,1341,1345],{"type":396,"tag":465,"props":1333,"children":1334},{"style":502},[1335],{"type":401,"value":1246},{"type":396,"tag":465,"props":1337,"children":1338},{"style":508},[1339],{"type":401,"value":1340},"origin",{"type":396,"tag":465,"props":1342,"children":1343},{"style":502},[1344],{"type":401,"value":505},{"type":396,"tag":465,"props":1346,"children":1347},{"style":575},[1348],{"type":401,"value":1260},{"type":396,"tag":465,"props":1350,"children":1352},{"class":467,"line":1351},10,[1353],{"type":396,"tag":465,"props":1354,"children":1355},{"style":1235},[1356],{"type":401,"value":1357},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":396,"tag":465,"props":1359,"children":1361},{"class":467,"line":1360},11,[1362,1366,1371,1375],{"type":396,"tag":465,"props":1363,"children":1364},{"style":502},[1365],{"type":401,"value":1246},{"type":396,"tag":465,"props":1367,"children":1368},{"style":508},[1369],{"type":401,"value":1370},"strict-origin",{"type":396,"tag":465,"props":1372,"children":1373},{"style":502},[1374],{"type":401,"value":505},{"type":396,"tag":465,"props":1376,"children":1377},{"style":575},[1378],{"type":401,"value":1260},{"type":396,"tag":465,"props":1380,"children":1382},{"class":467,"line":1381},12,[1383],{"type":396,"tag":465,"props":1384,"children":1385},{"style":1235},[1386],{"type":401,"value":1387},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":396,"tag":465,"props":1389,"children":1391},{"class":467,"line":1390},13,[1392,1396,1401,1405],{"type":396,"tag":465,"props":1393,"children":1394},{"style":502},[1395],{"type":401,"value":1246},{"type":396,"tag":465,"props":1397,"children":1398},{"style":508},[1399],{"type":401,"value":1400},"origin-when-cross-origin",{"type":396,"tag":465,"props":1402,"children":1403},{"style":502},[1404],{"type":401,"value":505},{"type":396,"tag":465,"props":1406,"children":1407},{"style":575},[1408],{"type":401,"value":1260},{"type":396,"tag":465,"props":1410,"children":1412},{"class":467,"line":1411},14,[1413],{"type":396,"tag":465,"props":1414,"children":1415},{"style":1235},[1416],{"type":401,"value":1417},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":396,"tag":465,"props":1419,"children":1421},{"class":467,"line":1420},15,[1422,1426,1431,1435],{"type":396,"tag":465,"props":1423,"children":1424},{"style":502},[1425],{"type":401,"value":1246},{"type":396,"tag":465,"props":1427,"children":1428},{"style":508},[1429],{"type":401,"value":1430},"strict-origin-when-cross-origin",{"type":396,"tag":465,"props":1432,"children":1433},{"style":502},[1434],{"type":401,"value":505},{"type":396,"tag":465,"props":1436,"children":1437},{"style":575},[1438],{"type":401,"value":1260},{"type":396,"tag":465,"props":1440,"children":1442},{"class":467,"line":1441},16,[1443],{"type":396,"tag":465,"props":1444,"children":1445},{"style":1235},[1446],{"type":401,"value":1447},"  // 所有请求都携带上完整的 Referer\n",{"type":396,"tag":465,"props":1449,"children":1451},{"class":467,"line":1450},17,[1452,1456,1461,1465],{"type":396,"tag":465,"props":1453,"children":1454},{"style":502},[1455],{"type":401,"value":1246},{"type":396,"tag":465,"props":1457,"children":1458},{"style":508},[1459],{"type":401,"value":1460},"unsafe-url",{"type":396,"tag":465,"props":1462,"children":1463},{"style":502},[1464],{"type":401,"value":505},{"type":396,"tag":465,"props":1466,"children":1467},{"style":575},[1468],{"type":401,"value":1260},{"type":396,"tag":465,"props":1470,"children":1472},{"class":467,"line":1471},18,[1473],{"type":396,"tag":465,"props":1474,"children":1475},{"style":1235},[1476],{"type":401,"value":1477},"  // 无策略\n",{"type":396,"tag":465,"props":1479,"children":1481},{"class":467,"line":1480},19,[1482],{"type":396,"tag":465,"props":1483,"children":1484},{"style":502},[1485],{"type":401,"value":1486},"  ''\n",{"type":396,"tag":465,"props":1488,"children":1490},{"class":467,"line":1489},20,[1491],{"type":396,"tag":465,"props":1492,"children":1493},{"style":496},[1494],{"type":401,"value":1495},"])\n",{"type":396,"tag":465,"props":1497,"children":1499},{"class":467,"line":1498},21,[1500,1505,1510,1515,1521,1525,1530,1534,1538,1542,1547,1552],{"type":396,"tag":465,"props":1501,"children":1502},{"style":472},[1503],{"type":401,"value":1504},"function",{"type":396,"tag":465,"props":1506,"children":1507},{"style":490},[1508],{"type":401,"value":1509}," getHeaderValueFromOptions",{"type":396,"tag":465,"props":1511,"children":1512},{"style":575},[1513],{"type":401,"value":1514},"({",{"type":396,"tag":465,"props":1516,"children":1518},{"style":1517},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1519],{"type":401,"value":1520}," policy",{"type":396,"tag":465,"props":1522,"children":1523},{"style":484},[1524],{"type":401,"value":487},{"type":396,"tag":465,"props":1526,"children":1527},{"style":496},[1528],{"type":401,"value":1529}," [",{"type":396,"tag":465,"props":1531,"children":1532},{"style":502},[1533],{"type":401,"value":505},{"type":396,"tag":465,"props":1535,"children":1536},{"style":508},[1537],{"type":401,"value":1251},{"type":396,"tag":465,"props":1539,"children":1540},{"style":502},[1541],{"type":401,"value":505},{"type":396,"tag":465,"props":1543,"children":1544},{"style":496},[1545],{"type":401,"value":1546},"] ",{"type":396,"tag":465,"props":1548,"children":1549},{"style":575},[1550],{"type":401,"value":1551},"})",{"type":396,"tag":465,"props":1553,"children":1554},{"style":575},[1555],{"type":401,"value":1556}," {\n",{"type":396,"tag":465,"props":1558,"children":1560},{"class":467,"line":1559},22,[1561,1566,1571,1575,1580,1584,1589,1593,1598,1602,1607,1612,1617,1621,1626],{"type":396,"tag":465,"props":1562,"children":1563},{"style":472},[1564],{"type":401,"value":1565},"  const",{"type":396,"tag":465,"props":1567,"children":1568},{"style":478},[1569],{"type":401,"value":1570}," tokens",{"type":396,"tag":465,"props":1572,"children":1573},{"style":484},[1574],{"type":401,"value":487},{"type":396,"tag":465,"props":1576,"children":1577},{"style":484},[1578],{"type":401,"value":1579}," typeof",{"type":396,"tag":465,"props":1581,"children":1582},{"style":496},[1583],{"type":401,"value":1520},{"type":396,"tag":465,"props":1585,"children":1586},{"style":484},[1587],{"type":401,"value":1588}," ===",{"type":396,"tag":465,"props":1590,"children":1591},{"style":502},[1592],{"type":401,"value":795},{"type":396,"tag":465,"props":1594,"children":1595},{"style":508},[1596],{"type":401,"value":1597},"string",{"type":396,"tag":465,"props":1599,"children":1600},{"style":502},[1601],{"type":401,"value":505},{"type":396,"tag":465,"props":1603,"children":1604},{"style":484},[1605],{"type":401,"value":1606}," ?",{"type":396,"tag":465,"props":1608,"children":1610},{"style":1609},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1611],{"type":401,"value":1529},{"type":396,"tag":465,"props":1613,"children":1614},{"style":496},[1615],{"type":401,"value":1616},"policy",{"type":396,"tag":465,"props":1618,"children":1619},{"style":1609},[1620],{"type":401,"value":1546},{"type":396,"tag":465,"props":1622,"children":1623},{"style":484},[1624],{"type":401,"value":1625},":",{"type":396,"tag":465,"props":1627,"children":1628},{"style":496},[1629],{"type":401,"value":1630}," policy\n",{"type":396,"tag":465,"props":1632,"children":1634},{"class":467,"line":1633},23,[1635,1640,1644,1649,1653,1658],{"type":396,"tag":465,"props":1636,"children":1637},{"style":496},[1638],{"type":401,"value":1639},"    tokensSeen",{"type":396,"tag":465,"props":1641,"children":1642},{"style":575},[1643],{"type":401,"value":578},{"type":396,"tag":465,"props":1645,"children":1646},{"style":490},[1647],{"type":401,"value":1648},"add",{"type":396,"tag":465,"props":1650,"children":1651},{"style":1609},[1652],{"type":401,"value":499},{"type":396,"tag":465,"props":1654,"children":1655},{"style":496},[1656],{"type":401,"value":1657},"token",{"type":396,"tag":465,"props":1659,"children":1660},{"style":1609},[1661],{"type":401,"value":520},{"type":396,"tag":465,"props":1663,"children":1665},{"class":467,"line":1664},24,[1666,1671],{"type":396,"tag":465,"props":1667,"children":1668},{"style":575},[1669],{"type":401,"value":1670},"  }",{"type":396,"tag":465,"props":1672,"children":1673},{"style":496},[1674],{"type":401,"value":520},{"type":396,"tag":465,"props":1676,"children":1678},{"class":467,"line":1677},25,[1679],{"type":396,"tag":465,"props":1680,"children":1681},{"style":1235},[1682],{"type":401,"value":1683},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":396,"tag":465,"props":1685,"children":1687},{"class":467,"line":1686},26,[1688,1694,1698,1702,1707,1711,1715,1719,1723],{"type":396,"tag":465,"props":1689,"children":1691},{"style":1690},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1692],{"type":401,"value":1693},"  return",{"type":396,"tag":465,"props":1695,"children":1696},{"style":496},[1697],{"type":401,"value":1570},{"type":396,"tag":465,"props":1699,"children":1700},{"style":575},[1701],{"type":401,"value":578},{"type":396,"tag":465,"props":1703,"children":1704},{"style":490},[1705],{"type":401,"value":1706},"join",{"type":396,"tag":465,"props":1708,"children":1709},{"style":496},[1710],{"type":401,"value":499},{"type":396,"tag":465,"props":1712,"children":1713},{"style":502},[1714],{"type":401,"value":505},{"type":396,"tag":465,"props":1716,"children":1717},{"style":508},[1718],{"type":401,"value":790},{"type":396,"tag":465,"props":1720,"children":1721},{"style":502},[1722],{"type":401,"value":505},{"type":396,"tag":465,"props":1724,"children":1725},{"style":496},[1726],{"type":401,"value":520},{"type":396,"tag":465,"props":1728,"children":1730},{"class":467,"line":1729},27,[1731],{"type":396,"tag":465,"props":1732,"children":1733},{"style":496},[1734],{"type":401,"value":1735},"}\n",{"type":396,"tag":465,"props":1737,"children":1739},{"class":467,"line":1738},28,[1740,1744,1749,1753,1758,1762,1767],{"type":396,"tag":465,"props":1741,"children":1742},{"style":472},[1743],{"type":401,"value":1504},{"type":396,"tag":465,"props":1745,"children":1746},{"style":490},[1747],{"type":401,"value":1748}," referrerPolicy",{"type":396,"tag":465,"props":1750,"children":1751},{"style":575},[1752],{"type":401,"value":499},{"type":396,"tag":465,"props":1754,"children":1755},{"style":1517},[1756],{"type":401,"value":1757},"options",{"type":396,"tag":465,"props":1759,"children":1760},{"style":484},[1761],{"type":401,"value":487},{"type":396,"tag":465,"props":1763,"children":1764},{"style":575},[1765],{"type":401,"value":1766}," {})",{"type":396,"tag":465,"props":1768,"children":1769},{"style":575},[1770],{"type":401,"value":1556},{"type":396,"tag":465,"props":1772,"children":1774},{"class":467,"line":1773},29,[1775,1779,1784,1788,1792,1796,1800],{"type":396,"tag":465,"props":1776,"children":1777},{"style":472},[1778],{"type":401,"value":1565},{"type":396,"tag":465,"props":1780,"children":1781},{"style":478},[1782],{"type":401,"value":1783}," headerValue",{"type":396,"tag":465,"props":1785,"children":1786},{"style":484},[1787],{"type":401,"value":487},{"type":396,"tag":465,"props":1789,"children":1790},{"style":490},[1791],{"type":401,"value":1509},{"type":396,"tag":465,"props":1793,"children":1794},{"style":1609},[1795],{"type":401,"value":499},{"type":396,"tag":465,"props":1797,"children":1798},{"style":496},[1799],{"type":401,"value":1757},{"type":396,"tag":465,"props":1801,"children":1802},{"style":1609},[1803],{"type":401,"value":520},{"type":396,"tag":465,"props":1805,"children":1807},{"class":467,"line":1806},30,[1808,1812,1817,1822,1826,1831,1835,1840,1844,1849,1854],{"type":396,"tag":465,"props":1809,"children":1810},{"style":1690},[1811],{"type":401,"value":1693},{"type":396,"tag":465,"props":1813,"children":1814},{"style":472},[1815],{"type":401,"value":1816}," function",{"type":396,"tag":465,"props":1818,"children":1819},{"style":490},[1820],{"type":401,"value":1821}," referrerPolicyMiddleware",{"type":396,"tag":465,"props":1823,"children":1824},{"style":575},[1825],{"type":401,"value":499},{"type":396,"tag":465,"props":1827,"children":1828},{"style":1517},[1829],{"type":401,"value":1830},"_req",{"type":396,"tag":465,"props":1832,"children":1833},{"style":575},[1834],{"type":401,"value":790},{"type":396,"tag":465,"props":1836,"children":1837},{"style":1517},[1838],{"type":401,"value":1839}," res",{"type":396,"tag":465,"props":1841,"children":1842},{"style":575},[1843],{"type":401,"value":790},{"type":396,"tag":465,"props":1845,"children":1846},{"style":1517},[1847],{"type":401,"value":1848}," next",{"type":396,"tag":465,"props":1850,"children":1851},{"style":575},[1852],{"type":401,"value":1853},")",{"type":396,"tag":465,"props":1855,"children":1856},{"style":575},[1857],{"type":401,"value":1556},{"type":396,"tag":465,"props":1859,"children":1861},{"class":467,"line":1860},31,[1862,1867,1871,1875,1879,1883,1887,1891,1895,1899],{"type":396,"tag":465,"props":1863,"children":1864},{"style":496},[1865],{"type":401,"value":1866},"    res",{"type":396,"tag":465,"props":1868,"children":1869},{"style":575},[1870],{"type":401,"value":578},{"type":396,"tag":465,"props":1872,"children":1873},{"style":490},[1874],{"type":401,"value":768},{"type":396,"tag":465,"props":1876,"children":1877},{"style":1609},[1878],{"type":401,"value":499},{"type":396,"tag":465,"props":1880,"children":1881},{"style":502},[1882],{"type":401,"value":505},{"type":396,"tag":465,"props":1884,"children":1885},{"style":508},[1886],{"type":401,"value":1163},{"type":396,"tag":465,"props":1888,"children":1889},{"style":502},[1890],{"type":401,"value":505},{"type":396,"tag":465,"props":1892,"children":1893},{"style":575},[1894],{"type":401,"value":790},{"type":396,"tag":465,"props":1896,"children":1897},{"style":496},[1898],{"type":401,"value":1783},{"type":396,"tag":465,"props":1900,"children":1901},{"style":1609},[1902],{"type":401,"value":520},{"type":396,"tag":465,"props":1904,"children":1906},{"class":467,"line":1905},32,[1907,1912],{"type":396,"tag":465,"props":1908,"children":1909},{"style":490},[1910],{"type":401,"value":1911},"    next",{"type":396,"tag":465,"props":1913,"children":1914},{"style":1609},[1915],{"type":401,"value":555},{"type":396,"tag":465,"props":1917,"children":1919},{"class":467,"line":1918},33,[1920],{"type":396,"tag":465,"props":1921,"children":1922},{"style":575},[1923],{"type":401,"value":1924},"  }\n",{"type":396,"tag":465,"props":1926,"children":1928},{"class":467,"line":1927},34,[1929],{"type":396,"tag":465,"props":1930,"children":1931},{"style":575},[1932],{"type":401,"value":1735},{"type":396,"tag":397,"props":1934,"children":1935},{},[1936,1938,1944,1946,1951],{"type":401,"value":1937},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":396,"tag":461,"props":1939,"children":1941},{"className":1940},[],[1942],{"type":401,"value":1943},"Referrer Policy",{"type":401,"value":1945},"。Meta 标签设置的 ",{"type":396,"tag":461,"props":1947,"children":1949},{"className":1948},[],[1950],{"type":401,"value":1943},{"type":401,"value":1952}," 对整个页面都有效果（但优先级最低）。",{"type":396,"tag":454,"props":1954,"children":1958},{"code":1955,"language":1956,"meta":389,"className":1957,"style":389},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1959],{"type":396,"tag":461,"props":1960,"children":1961},{"__ignoreMap":389},[1962,2027,2095],{"type":396,"tag":465,"props":1963,"children":1964},{"class":467,"line":468},[1965,1970,1976,1982,1987,1992,1997,2001,2006,2010,2014,2018,2022],{"type":396,"tag":465,"props":1966,"children":1967},{"style":575},[1968],{"type":401,"value":1969},"\u003C",{"type":396,"tag":465,"props":1971,"children":1973},{"style":1972},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1974],{"type":401,"value":1975},"meta",{"type":396,"tag":465,"props":1977,"children":1979},{"style":1978},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1980],{"type":401,"value":1981}," name",{"type":396,"tag":465,"props":1983,"children":1984},{"style":575},[1985],{"type":401,"value":1986},"=",{"type":396,"tag":465,"props":1988,"children":1989},{"style":502},[1990],{"type":401,"value":1991},"\"",{"type":396,"tag":465,"props":1993,"children":1994},{"style":508},[1995],{"type":401,"value":1996},"referrer",{"type":396,"tag":465,"props":1998,"children":1999},{"style":502},[2000],{"type":401,"value":1991},{"type":396,"tag":465,"props":2002,"children":2003},{"style":1978},[2004],{"type":401,"value":2005}," content",{"type":396,"tag":465,"props":2007,"children":2008},{"style":575},[2009],{"type":401,"value":1986},{"type":396,"tag":465,"props":2011,"children":2012},{"style":502},[2013],{"type":401,"value":1991},{"type":396,"tag":465,"props":2015,"children":2016},{"style":508},[2017],{"type":401,"value":1340},{"type":396,"tag":465,"props":2019,"children":2020},{"style":502},[2021],{"type":401,"value":1991},{"type":396,"tag":465,"props":2023,"children":2024},{"style":575},[2025],{"type":401,"value":2026}," />\n",{"type":396,"tag":465,"props":2028,"children":2029},{"class":467,"line":523},[2030,2034,2038,2043,2047,2051,2056,2060,2065,2069,2073,2077,2081,2086,2090],{"type":396,"tag":465,"props":2031,"children":2032},{"style":575},[2033],{"type":401,"value":1969},{"type":396,"tag":465,"props":2035,"children":2036},{"style":1972},[2037],{"type":401,"value":408},{"type":396,"tag":465,"props":2039,"children":2040},{"style":1978},[2041],{"type":401,"value":2042}," href",{"type":396,"tag":465,"props":2044,"children":2045},{"style":575},[2046],{"type":401,"value":1986},{"type":396,"tag":465,"props":2048,"children":2049},{"style":502},[2050],{"type":401,"value":1991},{"type":396,"tag":465,"props":2052,"children":2053},{"style":508},[2054],{"type":401,"value":2055},"http://example.com",{"type":396,"tag":465,"props":2057,"children":2058},{"style":502},[2059],{"type":401,"value":1991},{"type":396,"tag":465,"props":2061,"children":2062},{"style":1978},[2063],{"type":401,"value":2064}," referrerpolicy",{"type":396,"tag":465,"props":2066,"children":2067},{"style":575},[2068],{"type":401,"value":1986},{"type":396,"tag":465,"props":2070,"children":2071},{"style":502},[2072],{"type":401,"value":1991},{"type":396,"tag":465,"props":2074,"children":2075},{"style":508},[2076],{"type":401,"value":1340},{"type":396,"tag":465,"props":2078,"children":2079},{"style":502},[2080],{"type":401,"value":1991},{"type":396,"tag":465,"props":2082,"children":2083},{"style":575},[2084],{"type":401,"value":2085},">\u003C/",{"type":396,"tag":465,"props":2087,"children":2088},{"style":1972},[2089],{"type":401,"value":408},{"type":396,"tag":465,"props":2091,"children":2092},{"style":575},[2093],{"type":401,"value":2094},">\n",{"type":396,"tag":465,"props":2096,"children":2097},{"class":467,"line":532},[2098,2102,2106,2110,2114,2118,2122,2126,2131,2135,2139,2144,2148,2152,2156],{"type":396,"tag":465,"props":2099,"children":2100},{"style":575},[2101],{"type":401,"value":1969},{"type":396,"tag":465,"props":2103,"children":2104},{"style":1972},[2105],{"type":401,"value":408},{"type":396,"tag":465,"props":2107,"children":2108},{"style":1978},[2109],{"type":401,"value":2042},{"type":396,"tag":465,"props":2111,"children":2112},{"style":575},[2113],{"type":401,"value":1986},{"type":396,"tag":465,"props":2115,"children":2116},{"style":502},[2117],{"type":401,"value":1991},{"type":396,"tag":465,"props":2119,"children":2120},{"style":508},[2121],{"type":401,"value":2055},{"type":396,"tag":465,"props":2123,"children":2124},{"style":502},[2125],{"type":401,"value":1991},{"type":396,"tag":465,"props":2127,"children":2128},{"style":1978},[2129],{"type":401,"value":2130}," rel",{"type":396,"tag":465,"props":2132,"children":2133},{"style":575},[2134],{"type":401,"value":1986},{"type":396,"tag":465,"props":2136,"children":2137},{"style":502},[2138],{"type":401,"value":1991},{"type":396,"tag":465,"props":2140,"children":2141},{"style":508},[2142],{"type":401,"value":2143},"noreferrer",{"type":396,"tag":465,"props":2145,"children":2146},{"style":502},[2147],{"type":401,"value":1991},{"type":396,"tag":465,"props":2149,"children":2150},{"style":575},[2151],{"type":401,"value":2085},{"type":396,"tag":465,"props":2153,"children":2154},{"style":1972},[2155],{"type":401,"value":408},{"type":396,"tag":465,"props":2157,"children":2158},{"style":575},[2159],{"type":401,"value":2094},{"type":396,"tag":665,"props":2161,"children":2163},{"id":2162},"强制使用-https",[2164],{"type":401,"value":2165},"强制使用 HTTPS",{"type":396,"tag":397,"props":2167,"children":2168},{},[2169,2171,2177,2179,2190],{"type":401,"value":2170},"通过设置请求头的 ",{"type":396,"tag":461,"props":2172,"children":2174},{"className":2173},[],[2175],{"type":401,"value":2176},"Strict-Transport-Security（STS）",{"type":401,"value":2178},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":396,"tag":404,"props":2180,"children":2181},{},[2182],{"type":396,"tag":408,"props":2183,"children":2187},{"href":2184,"ariaDescribedBy":2185,"dataFootnoteRef":389,"id":2186},"#user-content-fn-timeend",[412],"user-content-fnref-timeend",[2188],{"type":401,"value":2189},"8",{"type":401,"value":975},{"type":396,"tag":397,"props":2192,"children":2193},{},[2194,2196,2202,2204,2210,2212,2218,2220,2226,2228,2233],{"type":401,"value":2195},"这个规范本身很好理解，通过 ",{"type":396,"tag":461,"props":2197,"children":2199},{"className":2198},[],[2200],{"type":401,"value":2201},"max-age",{"type":401,"value":2203}," 可以指定倒计时时间；",{"type":396,"tag":461,"props":2205,"children":2207},{"className":2206},[],[2208],{"type":401,"value":2209},"includesSubDomains",{"type":401,"value":2211}," 指定子域的 ",{"type":396,"tag":461,"props":2213,"children":2215},{"className":2214},[],[2216],{"type":401,"value":2217},"HSTS",{"type":401,"value":2219},"；",{"type":396,"tag":461,"props":2221,"children":2223},{"className":2222},[],[2224],{"type":401,"value":2225},"preload",{"type":401,"value":2227}," 指定预加载内容的 ",{"type":396,"tag":461,"props":2229,"children":2231},{"className":2230},[],[2232],{"type":401,"value":2217},{"type":401,"value":975},{"type":396,"tag":454,"props":2235,"children":2237},{"code":2236},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2238],{"type":396,"tag":461,"props":2239,"children":2240},{"__ignoreMap":389},[2241],{"type":401,"value":2236},{"type":396,"tag":454,"props":2243,"children":2245},{"code":2244,"language":457,"meta":389,"className":458,"style":389},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2246],{"type":396,"tag":461,"props":2247,"children":2248},{"__ignoreMap":389},[2249,2311,2338,2411,2474,2511,2518,2571,2611,2618,2650,2681,2729,2773,2784,2791],{"type":396,"tag":465,"props":2250,"children":2251},{"class":467,"line":468},[2252,2256,2261,2265,2270,2274,2280,2285,2290,2294,2299,2303,2307],{"type":396,"tag":465,"props":2253,"children":2254},{"style":472},[2255],{"type":401,"value":475},{"type":396,"tag":465,"props":2257,"children":2258},{"style":478},[2259],{"type":401,"value":2260}," DEFAULT_MAX_AGE",{"type":396,"tag":465,"props":2262,"children":2263},{"style":484},[2264],{"type":401,"value":487},{"type":396,"tag":465,"props":2266,"children":2267},{"style":490},[2268],{"type":401,"value":2269}," String",{"type":396,"tag":465,"props":2271,"children":2272},{"style":496},[2273],{"type":401,"value":499},{"type":396,"tag":465,"props":2275,"children":2277},{"style":2276},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2278],{"type":401,"value":2279},"180",{"type":396,"tag":465,"props":2281,"children":2282},{"style":484},[2283],{"type":401,"value":2284}," *",{"type":396,"tag":465,"props":2286,"children":2287},{"style":2276},[2288],{"type":401,"value":2289}," 24",{"type":396,"tag":465,"props":2291,"children":2292},{"style":484},[2293],{"type":401,"value":2284},{"type":396,"tag":465,"props":2295,"children":2296},{"style":2276},[2297],{"type":401,"value":2298}," 60",{"type":396,"tag":465,"props":2300,"children":2301},{"style":484},[2302],{"type":401,"value":2284},{"type":396,"tag":465,"props":2304,"children":2305},{"style":2276},[2306],{"type":401,"value":2298},{"type":396,"tag":465,"props":2308,"children":2309},{"style":496},[2310],{"type":401,"value":520},{"type":396,"tag":465,"props":2312,"children":2313},{"class":467,"line":523},[2314,2318,2322,2326,2330,2334],{"type":396,"tag":465,"props":2315,"children":2316},{"style":472},[2317],{"type":401,"value":1504},{"type":396,"tag":465,"props":2319,"children":2320},{"style":490},[2321],{"type":401,"value":1509},{"type":396,"tag":465,"props":2323,"children":2324},{"style":575},[2325],{"type":401,"value":499},{"type":396,"tag":465,"props":2327,"children":2328},{"style":1517},[2329],{"type":401,"value":1757},{"type":396,"tag":465,"props":2331,"children":2332},{"style":575},[2333],{"type":401,"value":1853},{"type":396,"tag":465,"props":2335,"children":2336},{"style":575},[2337],{"type":401,"value":1556},{"type":396,"tag":465,"props":2339,"children":2340},{"class":467,"line":532},[2341,2345,2350,2354,2358,2363,2368,2374,2378,2383,2388,2393,2397,2402,2406],{"type":396,"tag":465,"props":2342,"children":2343},{"style":472},[2344],{"type":401,"value":1565},{"type":396,"tag":465,"props":2346,"children":2347},{"style":478},[2348],{"type":401,"value":2349}," directives",{"type":396,"tag":465,"props":2351,"children":2352},{"style":484},[2353],{"type":401,"value":487},{"type":396,"tag":465,"props":2355,"children":2356},{"style":1609},[2357],{"type":401,"value":1529},{"type":396,"tag":465,"props":2359,"children":2360},{"style":502},[2361],{"type":401,"value":2362},"`",{"type":396,"tag":465,"props":2364,"children":2365},{"style":508},[2366],{"type":401,"value":2367},"max-age=",{"type":396,"tag":465,"props":2369,"children":2371},{"style":2370},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2372],{"type":401,"value":2373},"${",{"type":396,"tag":465,"props":2375,"children":2376},{"style":496},[2377],{"type":401,"value":1757},{"type":396,"tag":465,"props":2379,"children":2381},{"style":2380},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2382],{"type":401,"value":578},{"type":396,"tag":465,"props":2384,"children":2385},{"style":496},[2386],{"type":401,"value":2387},"maxAge",{"type":396,"tag":465,"props":2389,"children":2390},{"style":484},[2391],{"type":401,"value":2392}," ||",{"type":396,"tag":465,"props":2394,"children":2395},{"style":478},[2396],{"type":401,"value":2260},{"type":396,"tag":465,"props":2398,"children":2399},{"style":2370},[2400],{"type":401,"value":2401},"}",{"type":396,"tag":465,"props":2403,"children":2404},{"style":502},[2405],{"type":401,"value":2362},{"type":396,"tag":465,"props":2407,"children":2408},{"style":1609},[2409],{"type":401,"value":2410},"]\n",{"type":396,"tag":465,"props":2412,"children":2413},{"class":467,"line":558},[2414,2419,2424,2428,2432,2437,2441,2447,2451,2456,2460,2464,2469],{"type":396,"tag":465,"props":2415,"children":2416},{"style":1690},[2417],{"type":401,"value":2418},"  if",{"type":396,"tag":465,"props":2420,"children":2421},{"style":1609},[2422],{"type":401,"value":2423}," (",{"type":396,"tag":465,"props":2425,"children":2426},{"style":496},[2427],{"type":401,"value":1757},{"type":396,"tag":465,"props":2429,"children":2430},{"style":575},[2431],{"type":401,"value":578},{"type":396,"tag":465,"props":2433,"children":2434},{"style":496},[2435],{"type":401,"value":2436},"includeSubDomains",{"type":396,"tag":465,"props":2438,"children":2439},{"style":484},[2440],{"type":401,"value":1588},{"type":396,"tag":465,"props":2442,"children":2444},{"style":2443},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2445],{"type":401,"value":2446}," undefined",{"type":396,"tag":465,"props":2448,"children":2449},{"style":484},[2450],{"type":401,"value":2392},{"type":396,"tag":465,"props":2452,"children":2453},{"style":496},[2454],{"type":401,"value":2455}," options",{"type":396,"tag":465,"props":2457,"children":2458},{"style":575},[2459],{"type":401,"value":578},{"type":396,"tag":465,"props":2461,"children":2462},{"style":496},[2463],{"type":401,"value":2436},{"type":396,"tag":465,"props":2465,"children":2466},{"style":1609},[2467],{"type":401,"value":2468},") ",{"type":396,"tag":465,"props":2470,"children":2471},{"style":575},[2472],{"type":401,"value":2473},"{\n",{"type":396,"tag":465,"props":2475,"children":2476},{"class":467,"line":566},[2477,2482,2486,2491,2495,2499,2503,2507],{"type":396,"tag":465,"props":2478,"children":2479},{"style":496},[2480],{"type":401,"value":2481},"    directives",{"type":396,"tag":465,"props":2483,"children":2484},{"style":575},[2485],{"type":401,"value":578},{"type":396,"tag":465,"props":2487,"children":2488},{"style":490},[2489],{"type":401,"value":2490},"push",{"type":396,"tag":465,"props":2492,"children":2493},{"style":1609},[2494],{"type":401,"value":499},{"type":396,"tag":465,"props":2496,"children":2497},{"style":502},[2498],{"type":401,"value":505},{"type":396,"tag":465,"props":2500,"children":2501},{"style":508},[2502],{"type":401,"value":2436},{"type":396,"tag":465,"props":2504,"children":2505},{"style":502},[2506],{"type":401,"value":505},{"type":396,"tag":465,"props":2508,"children":2509},{"style":1609},[2510],{"type":401,"value":520},{"type":396,"tag":465,"props":2512,"children":2513},{"class":467,"line":1291},[2514],{"type":396,"tag":465,"props":2515,"children":2516},{"style":575},[2517],{"type":401,"value":1924},{"type":396,"tag":465,"props":2519,"children":2520},{"class":467,"line":1300},[2521,2526,2530,2534,2539,2543,2547,2551,2555,2559,2563,2567],{"type":396,"tag":465,"props":2522,"children":2523},{"style":496},[2524],{"type":401,"value":2525},"  options",{"type":396,"tag":465,"props":2527,"children":2528},{"style":575},[2529],{"type":401,"value":578},{"type":396,"tag":465,"props":2531,"children":2532},{"style":496},[2533],{"type":401,"value":2225},{"type":396,"tag":465,"props":2535,"children":2536},{"style":484},[2537],{"type":401,"value":2538}," &&",{"type":396,"tag":465,"props":2540,"children":2541},{"style":496},[2542],{"type":401,"value":2349},{"type":396,"tag":465,"props":2544,"children":2545},{"style":575},[2546],{"type":401,"value":578},{"type":396,"tag":465,"props":2548,"children":2549},{"style":490},[2550],{"type":401,"value":2490},{"type":396,"tag":465,"props":2552,"children":2553},{"style":1609},[2554],{"type":401,"value":499},{"type":396,"tag":465,"props":2556,"children":2557},{"style":502},[2558],{"type":401,"value":505},{"type":396,"tag":465,"props":2560,"children":2561},{"style":508},[2562],{"type":401,"value":2225},{"type":396,"tag":465,"props":2564,"children":2565},{"style":502},[2566],{"type":401,"value":505},{"type":396,"tag":465,"props":2568,"children":2569},{"style":1609},[2570],{"type":401,"value":520},{"type":396,"tag":465,"props":2572,"children":2573},{"class":467,"line":1321},[2574,2578,2582,2586,2590,2594,2598,2603,2607],{"type":396,"tag":465,"props":2575,"children":2576},{"style":1690},[2577],{"type":401,"value":1693},{"type":396,"tag":465,"props":2579,"children":2580},{"style":496},[2581],{"type":401,"value":2349},{"type":396,"tag":465,"props":2583,"children":2584},{"style":575},[2585],{"type":401,"value":578},{"type":396,"tag":465,"props":2587,"children":2588},{"style":490},[2589],{"type":401,"value":1706},{"type":396,"tag":465,"props":2591,"children":2592},{"style":1609},[2593],{"type":401,"value":499},{"type":396,"tag":465,"props":2595,"children":2596},{"style":502},[2597],{"type":401,"value":505},{"type":396,"tag":465,"props":2599,"children":2600},{"style":508},[2601],{"type":401,"value":2602},"; ",{"type":396,"tag":465,"props":2604,"children":2605},{"style":502},[2606],{"type":401,"value":505},{"type":396,"tag":465,"props":2608,"children":2609},{"style":1609},[2610],{"type":401,"value":520},{"type":396,"tag":465,"props":2612,"children":2613},{"class":467,"line":1330},[2614],{"type":396,"tag":465,"props":2615,"children":2616},{"style":575},[2617],{"type":401,"value":1735},{"type":396,"tag":465,"props":2619,"children":2620},{"class":467,"line":1351},[2621,2625,2630,2634,2638,2642,2646],{"type":396,"tag":465,"props":2622,"children":2623},{"style":472},[2624],{"type":401,"value":1504},{"type":396,"tag":465,"props":2626,"children":2627},{"style":490},[2628],{"type":401,"value":2629}," strictTransportSecurity",{"type":396,"tag":465,"props":2631,"children":2632},{"style":575},[2633],{"type":401,"value":499},{"type":396,"tag":465,"props":2635,"children":2636},{"style":1517},[2637],{"type":401,"value":1757},{"type":396,"tag":465,"props":2639,"children":2640},{"style":484},[2641],{"type":401,"value":487},{"type":396,"tag":465,"props":2643,"children":2644},{"style":575},[2645],{"type":401,"value":1766},{"type":396,"tag":465,"props":2647,"children":2648},{"style":575},[2649],{"type":401,"value":1556},{"type":396,"tag":465,"props":2651,"children":2652},{"class":467,"line":1360},[2653,2657,2661,2665,2669,2673,2677],{"type":396,"tag":465,"props":2654,"children":2655},{"style":472},[2656],{"type":401,"value":1565},{"type":396,"tag":465,"props":2658,"children":2659},{"style":478},[2660],{"type":401,"value":1783},{"type":396,"tag":465,"props":2662,"children":2663},{"style":484},[2664],{"type":401,"value":487},{"type":396,"tag":465,"props":2666,"children":2667},{"style":490},[2668],{"type":401,"value":1509},{"type":396,"tag":465,"props":2670,"children":2671},{"style":1609},[2672],{"type":401,"value":499},{"type":396,"tag":465,"props":2674,"children":2675},{"style":496},[2676],{"type":401,"value":1757},{"type":396,"tag":465,"props":2678,"children":2679},{"style":1609},[2680],{"type":401,"value":520},{"type":396,"tag":465,"props":2682,"children":2683},{"class":467,"line":1381},[2684,2688,2692,2697,2701,2705,2709,2713,2717,2721,2725],{"type":396,"tag":465,"props":2685,"children":2686},{"style":1690},[2687],{"type":401,"value":1693},{"type":396,"tag":465,"props":2689,"children":2690},{"style":472},[2691],{"type":401,"value":1816},{"type":396,"tag":465,"props":2693,"children":2694},{"style":490},[2695],{"type":401,"value":2696}," strictTransportSecurityMiddleware",{"type":396,"tag":465,"props":2698,"children":2699},{"style":575},[2700],{"type":401,"value":499},{"type":396,"tag":465,"props":2702,"children":2703},{"style":1517},[2704],{"type":401,"value":1830},{"type":396,"tag":465,"props":2706,"children":2707},{"style":575},[2708],{"type":401,"value":790},{"type":396,"tag":465,"props":2710,"children":2711},{"style":1517},[2712],{"type":401,"value":1839},{"type":396,"tag":465,"props":2714,"children":2715},{"style":575},[2716],{"type":401,"value":790},{"type":396,"tag":465,"props":2718,"children":2719},{"style":1517},[2720],{"type":401,"value":1848},{"type":396,"tag":465,"props":2722,"children":2723},{"style":575},[2724],{"type":401,"value":1853},{"type":396,"tag":465,"props":2726,"children":2727},{"style":575},[2728],{"type":401,"value":1556},{"type":396,"tag":465,"props":2730,"children":2731},{"class":467,"line":1390},[2732,2736,2740,2744,2748,2752,2757,2761,2765,2769],{"type":396,"tag":465,"props":2733,"children":2734},{"style":496},[2735],{"type":401,"value":1866},{"type":396,"tag":465,"props":2737,"children":2738},{"style":575},[2739],{"type":401,"value":578},{"type":396,"tag":465,"props":2741,"children":2742},{"style":490},[2743],{"type":401,"value":768},{"type":396,"tag":465,"props":2745,"children":2746},{"style":1609},[2747],{"type":401,"value":499},{"type":396,"tag":465,"props":2749,"children":2750},{"style":502},[2751],{"type":401,"value":505},{"type":396,"tag":465,"props":2753,"children":2754},{"style":508},[2755],{"type":401,"value":2756},"Strict-Transport-Security",{"type":396,"tag":465,"props":2758,"children":2759},{"style":502},[2760],{"type":401,"value":505},{"type":396,"tag":465,"props":2762,"children":2763},{"style":575},[2764],{"type":401,"value":790},{"type":396,"tag":465,"props":2766,"children":2767},{"style":496},[2768],{"type":401,"value":1783},{"type":396,"tag":465,"props":2770,"children":2771},{"style":1609},[2772],{"type":401,"value":520},{"type":396,"tag":465,"props":2774,"children":2775},{"class":467,"line":1411},[2776,2780],{"type":396,"tag":465,"props":2777,"children":2778},{"style":490},[2779],{"type":401,"value":1911},{"type":396,"tag":465,"props":2781,"children":2782},{"style":1609},[2783],{"type":401,"value":555},{"type":396,"tag":465,"props":2785,"children":2786},{"class":467,"line":1420},[2787],{"type":396,"tag":465,"props":2788,"children":2789},{"style":575},[2790],{"type":401,"value":1924},{"type":396,"tag":465,"props":2792,"children":2793},{"class":467,"line":1441},[2794],{"type":396,"tag":465,"props":2795,"children":2796},{"style":575},[2797],{"type":401,"value":1735},{"type":396,"tag":665,"props":2799,"children":2801},{"id":2800},"可选用证书透明性策略",[2802],{"type":401,"value":2800},{"type":396,"tag":454,"props":2804,"children":2806},{"code":2805,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('Expect-CT' /* someValue */)\n",[2807],{"type":396,"tag":461,"props":2808,"children":2809},{"__ignoreMap":389},[2810],{"type":396,"tag":465,"props":2811,"children":2812},{"class":467,"line":468},[2813,2817,2821,2825,2829,2833,2838,2842,2847],{"type":396,"tag":465,"props":2814,"children":2815},{"style":496},[2816],{"type":401,"value":685},{"type":396,"tag":465,"props":2818,"children":2819},{"style":575},[2820],{"type":401,"value":578},{"type":396,"tag":465,"props":2822,"children":2823},{"style":490},[2824],{"type":401,"value":768},{"type":396,"tag":465,"props":2826,"children":2827},{"style":496},[2828],{"type":401,"value":499},{"type":396,"tag":465,"props":2830,"children":2831},{"style":502},[2832],{"type":401,"value":505},{"type":396,"tag":465,"props":2834,"children":2835},{"style":508},[2836],{"type":401,"value":2837},"Expect-CT",{"type":396,"tag":465,"props":2839,"children":2840},{"style":502},[2841],{"type":401,"value":505},{"type":396,"tag":465,"props":2843,"children":2844},{"style":1235},[2845],{"type":401,"value":2846}," /* someValue */",{"type":396,"tag":465,"props":2848,"children":2849},{"style":496},[2850],{"type":401,"value":520},{"type":396,"tag":397,"props":2852,"children":2853},{},[2854,2859,2861,2872,2874,2885],{"type":396,"tag":461,"props":2855,"children":2857},{"className":2856},[],[2858],{"type":401,"value":2837},{"type":401,"value":2860}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":396,"tag":404,"props":2862,"children":2863},{},[2864],{"type":396,"tag":408,"props":2865,"children":2869},{"href":2866,"ariaDescribedBy":2867,"dataFootnoteRef":389,"id":2868},"#user-content-fn-chrome-ct",[412],"user-content-fnref-chrome-ct",[2870],{"type":401,"value":2871},"9",{"type":401,"value":2873},"），避免中间人攻击",{"type":396,"tag":404,"props":2875,"children":2876},{},[2877],{"type":396,"tag":408,"props":2878,"children":2882},{"href":2879,"ariaDescribedBy":2880,"dataFootnoteRef":389,"id":2881},"#user-content-fn-ct",[412],"user-content-fnref-ct",[2883],{"type":401,"value":2884},"10",{"type":401,"value":2886},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":396,"tag":454,"props":2888,"children":2890},{"code":2889},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2891],{"type":396,"tag":461,"props":2892,"children":2893},{"__ignoreMap":389},[2894],{"type":401,"value":2889},{"type":396,"tag":397,"props":2896,"children":2897},{},[2898,2900,2905],{"type":401,"value":2899},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":396,"tag":461,"props":2901,"children":2903},{"className":2902},[],[2904],{"type":401,"value":2837},{"type":401,"value":2906}," 就作不上用咯... TODO",{"type":396,"tag":665,"props":2908,"children":2910},{"id":2909},"拒绝来自-pdfflash-的跨域请求",[2911],{"type":401,"value":2912},"拒绝来自 PDF、Flash 的跨域请求",{"type":396,"tag":397,"props":2914,"children":2915},{},[2916,2922,2924,2935],{"type":396,"tag":461,"props":2917,"children":2919},{"className":2918},[],[2920],{"type":401,"value":2921},"X-Permitted-Cross-Domain-Policies",{"type":401,"value":2923}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":396,"tag":404,"props":2925,"children":2926},{},[2927],{"type":396,"tag":408,"props":2928,"children":2932},{"href":2929,"ariaDescribedBy":2930,"dataFootnoteRef":389,"id":2931},"#user-content-fn-pdf-reader",[412],"user-content-fnref-pdf-reader",[2933],{"type":401,"value":2934},"11",{"type":401,"value":2936},"：",{"type":396,"tag":397,"props":2938,"children":2939},{},[2940],{"type":396,"tag":1118,"props":2941,"children":2943},{"alt":2921,"src":2942},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":396,"tag":2945,"props":2946,"children":2947},"ol",{},[2948,2954],{"type":396,"tag":2949,"props":2950,"children":2951},"li",{},[2952],{"type":401,"value":2953},"用户在 A 网站打开了某个 PDF；",{"type":396,"tag":2949,"props":2955,"children":2956},{},[2957,2959,2965],{"type":401,"value":2958},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":396,"tag":461,"props":2960,"children":2962},{"className":2961},[],[2963],{"type":401,"value":2964},"crossdomain.xml",{"type":401,"value":2966}," 文件（策略文件）作为跨域策略应对方案。",{"type":396,"tag":397,"props":2968,"children":2969},{},[2970],{"type":401,"value":2971},"一个策略文件可能长这样：",{"type":396,"tag":454,"props":2973,"children":2975},{"code":2974,"language":1956,"meta":389,"className":1957,"style":389},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2976],{"type":396,"tag":461,"props":2977,"children":2978},{"__ignoreMap":389},[2979,2987,3003,3042,3078,3114,3150,3186],{"type":396,"tag":465,"props":2980,"children":2981},{"class":467,"line":468},[2982],{"type":396,"tag":465,"props":2983,"children":2984},{"style":1235},[2985],{"type":401,"value":2986},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":396,"tag":465,"props":2988,"children":2989},{"class":467,"line":523},[2990,2994,2999],{"type":396,"tag":465,"props":2991,"children":2992},{"style":575},[2993],{"type":401,"value":1969},{"type":396,"tag":465,"props":2995,"children":2996},{"style":1972},[2997],{"type":401,"value":2998},"cross-domain-policy",{"type":396,"tag":465,"props":3000,"children":3001},{"style":575},[3002],{"type":401,"value":2094},{"type":396,"tag":465,"props":3004,"children":3005},{"class":467,"line":532},[3006,3011,3016,3021,3025,3029,3034,3038],{"type":396,"tag":465,"props":3007,"children":3008},{"style":575},[3009],{"type":401,"value":3010},"  \u003C",{"type":396,"tag":465,"props":3012,"children":3013},{"style":1972},[3014],{"type":401,"value":3015},"allow-access-from",{"type":396,"tag":465,"props":3017,"children":3018},{"style":1978},[3019],{"type":401,"value":3020}," domain",{"type":396,"tag":465,"props":3022,"children":3023},{"style":575},[3024],{"type":401,"value":1986},{"type":396,"tag":465,"props":3026,"children":3027},{"style":502},[3028],{"type":401,"value":1991},{"type":396,"tag":465,"props":3030,"children":3031},{"style":508},[3032],{"type":401,"value":3033},"*.taobao.com",{"type":396,"tag":465,"props":3035,"children":3036},{"style":502},[3037],{"type":401,"value":1991},{"type":396,"tag":465,"props":3039,"children":3040},{"style":575},[3041],{"type":401,"value":2026},{"type":396,"tag":465,"props":3043,"children":3044},{"class":467,"line":558},[3045,3049,3053,3057,3061,3065,3070,3074],{"type":396,"tag":465,"props":3046,"children":3047},{"style":575},[3048],{"type":401,"value":3010},{"type":396,"tag":465,"props":3050,"children":3051},{"style":1972},[3052],{"type":401,"value":3015},{"type":396,"tag":465,"props":3054,"children":3055},{"style":1978},[3056],{"type":401,"value":3020},{"type":396,"tag":465,"props":3058,"children":3059},{"style":575},[3060],{"type":401,"value":1986},{"type":396,"tag":465,"props":3062,"children":3063},{"style":502},[3064],{"type":401,"value":1991},{"type":396,"tag":465,"props":3066,"children":3067},{"style":508},[3068],{"type":401,"value":3069},"*.taobao.net",{"type":396,"tag":465,"props":3071,"children":3072},{"style":502},[3073],{"type":401,"value":1991},{"type":396,"tag":465,"props":3075,"children":3076},{"style":575},[3077],{"type":401,"value":2026},{"type":396,"tag":465,"props":3079,"children":3080},{"class":467,"line":566},[3081,3085,3089,3093,3097,3101,3106,3110],{"type":396,"tag":465,"props":3082,"children":3083},{"style":575},[3084],{"type":401,"value":3010},{"type":396,"tag":465,"props":3086,"children":3087},{"style":1972},[3088],{"type":401,"value":3015},{"type":396,"tag":465,"props":3090,"children":3091},{"style":1978},[3092],{"type":401,"value":3020},{"type":396,"tag":465,"props":3094,"children":3095},{"style":575},[3096],{"type":401,"value":1986},{"type":396,"tag":465,"props":3098,"children":3099},{"style":502},[3100],{"type":401,"value":1991},{"type":396,"tag":465,"props":3102,"children":3103},{"style":508},[3104],{"type":401,"value":3105},"*.taobaocdn.com",{"type":396,"tag":465,"props":3107,"children":3108},{"style":502},[3109],{"type":401,"value":1991},{"type":396,"tag":465,"props":3111,"children":3112},{"style":575},[3113],{"type":401,"value":2026},{"type":396,"tag":465,"props":3115,"children":3116},{"class":467,"line":1291},[3117,3121,3125,3129,3133,3137,3142,3146],{"type":396,"tag":465,"props":3118,"children":3119},{"style":575},[3120],{"type":401,"value":3010},{"type":396,"tag":465,"props":3122,"children":3123},{"style":1972},[3124],{"type":401,"value":3015},{"type":396,"tag":465,"props":3126,"children":3127},{"style":1978},[3128],{"type":401,"value":3020},{"type":396,"tag":465,"props":3130,"children":3131},{"style":575},[3132],{"type":401,"value":1986},{"type":396,"tag":465,"props":3134,"children":3135},{"style":502},[3136],{"type":401,"value":1991},{"type":396,"tag":465,"props":3138,"children":3139},{"style":508},[3140],{"type":401,"value":3141},"*.tbcdn.cn",{"type":396,"tag":465,"props":3143,"children":3144},{"style":502},[3145],{"type":401,"value":1991},{"type":396,"tag":465,"props":3147,"children":3148},{"style":575},[3149],{"type":401,"value":2026},{"type":396,"tag":465,"props":3151,"children":3152},{"class":467,"line":1300},[3153,3157,3161,3165,3169,3173,3178,3182],{"type":396,"tag":465,"props":3154,"children":3155},{"style":575},[3156],{"type":401,"value":3010},{"type":396,"tag":465,"props":3158,"children":3159},{"style":1972},[3160],{"type":401,"value":3015},{"type":396,"tag":465,"props":3162,"children":3163},{"style":1978},[3164],{"type":401,"value":3020},{"type":396,"tag":465,"props":3166,"children":3167},{"style":575},[3168],{"type":401,"value":1986},{"type":396,"tag":465,"props":3170,"children":3171},{"style":502},[3172],{"type":401,"value":1991},{"type":396,"tag":465,"props":3174,"children":3175},{"style":508},[3176],{"type":401,"value":3177},"*.alicdn.com",{"type":396,"tag":465,"props":3179,"children":3180},{"style":502},[3181],{"type":401,"value":1991},{"type":396,"tag":465,"props":3183,"children":3184},{"style":575},[3185],{"type":401,"value":2026},{"type":396,"tag":465,"props":3187,"children":3188},{"class":467,"line":1321},[3189,3194,3198],{"type":396,"tag":465,"props":3190,"children":3191},{"style":575},[3192],{"type":401,"value":3193},"\u003C/",{"type":396,"tag":465,"props":3195,"children":3196},{"style":1972},[3197],{"type":401,"value":2998},{"type":396,"tag":465,"props":3199,"children":3200},{"style":575},[3201],{"type":401,"value":2094},{"type":396,"tag":397,"props":3203,"children":3204},{},[3205,3207,3212,3214,3219],{"type":401,"value":3206},"其中，若请求响应头包含了 ",{"type":396,"tag":461,"props":3208,"children":3210},{"className":3209},[],[3211],{"type":401,"value":2921},{"type":401,"value":3213},"，便可指定浏览器针对 ",{"type":396,"tag":461,"props":3215,"children":3217},{"className":3216},[],[3218],{"type":401,"value":2964},{"type":401,"value":3220}," 的应对行为。",{"type":396,"tag":454,"props":3222,"children":3224},{"code":3223,"language":457,"meta":389,"className":458,"style":389},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3225],{"type":396,"tag":461,"props":3226,"children":3227},{"__ignoreMap":389},[3228,3256,3264,3284,3292,3312,3320,3340,3348,3365,3372,3417,3465,3508,3519,3526],{"type":396,"tag":465,"props":3229,"children":3230},{"class":467,"line":468},[3231,3235,3240,3244,3248,3252],{"type":396,"tag":465,"props":3232,"children":3233},{"style":472},[3234],{"type":401,"value":475},{"type":396,"tag":465,"props":3236,"children":3237},{"style":478},[3238],{"type":401,"value":3239}," ALLOWED_PERMITTED_POLICIES",{"type":396,"tag":465,"props":3241,"children":3242},{"style":484},[3243],{"type":401,"value":487},{"type":396,"tag":465,"props":3245,"children":3246},{"style":484},[3247],{"type":401,"value":1219},{"type":396,"tag":465,"props":3249,"children":3250},{"style":490},[3251],{"type":401,"value":1224},{"type":396,"tag":465,"props":3253,"children":3254},{"style":496},[3255],{"type":401,"value":1229},{"type":396,"tag":465,"props":3257,"children":3258},{"class":467,"line":523},[3259],{"type":396,"tag":465,"props":3260,"children":3261},{"style":1235},[3262],{"type":401,"value":3263},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":396,"tag":465,"props":3265,"children":3266},{"class":467,"line":532},[3267,3271,3276,3280],{"type":396,"tag":465,"props":3268,"children":3269},{"style":502},[3270],{"type":401,"value":1246},{"type":396,"tag":465,"props":3272,"children":3273},{"style":508},[3274],{"type":401,"value":3275},"master-only",{"type":396,"tag":465,"props":3277,"children":3278},{"style":502},[3279],{"type":401,"value":505},{"type":396,"tag":465,"props":3281,"children":3282},{"style":575},[3283],{"type":401,"value":1260},{"type":396,"tag":465,"props":3285,"children":3286},{"class":467,"line":558},[3287],{"type":396,"tag":465,"props":3288,"children":3289},{"style":1235},[3290],{"type":401,"value":3291},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":396,"tag":465,"props":3293,"children":3294},{"class":467,"line":566},[3295,3299,3304,3308],{"type":396,"tag":465,"props":3296,"children":3297},{"style":502},[3298],{"type":401,"value":1246},{"type":396,"tag":465,"props":3300,"children":3301},{"style":508},[3302],{"type":401,"value":3303},"by-content-type",{"type":396,"tag":465,"props":3305,"children":3306},{"style":502},[3307],{"type":401,"value":505},{"type":396,"tag":465,"props":3309,"children":3310},{"style":575},[3311],{"type":401,"value":1260},{"type":396,"tag":465,"props":3313,"children":3314},{"class":467,"line":1291},[3315],{"type":396,"tag":465,"props":3316,"children":3317},{"style":1235},[3318],{"type":401,"value":3319},"  // 不使用任何位置的 crossdomain.xml\n",{"type":396,"tag":465,"props":3321,"children":3322},{"class":467,"line":1300},[3323,3327,3332,3336],{"type":396,"tag":465,"props":3324,"children":3325},{"style":502},[3326],{"type":401,"value":1246},{"type":396,"tag":465,"props":3328,"children":3329},{"style":508},[3330],{"type":401,"value":3331},"none",{"type":396,"tag":465,"props":3333,"children":3334},{"style":502},[3335],{"type":401,"value":505},{"type":396,"tag":465,"props":3337,"children":3338},{"style":575},[3339],{"type":401,"value":1260},{"type":396,"tag":465,"props":3341,"children":3342},{"class":467,"line":1321},[3343],{"type":396,"tag":465,"props":3344,"children":3345},{"style":1235},[3346],{"type":401,"value":3347},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":396,"tag":465,"props":3349,"children":3350},{"class":467,"line":1330},[3351,3355,3360],{"type":396,"tag":465,"props":3352,"children":3353},{"style":502},[3354],{"type":401,"value":1246},{"type":396,"tag":465,"props":3356,"children":3357},{"style":508},[3358],{"type":401,"value":3359},"all",{"type":396,"tag":465,"props":3361,"children":3362},{"style":502},[3363],{"type":401,"value":3364},"'\n",{"type":396,"tag":465,"props":3366,"children":3367},{"class":467,"line":1351},[3368],{"type":396,"tag":465,"props":3369,"children":3370},{"style":496},[3371],{"type":401,"value":1495},{"type":396,"tag":465,"props":3373,"children":3374},{"class":467,"line":1360},[3375,3379,3384,3388,3393,3397,3401,3405,3409,3413],{"type":396,"tag":465,"props":3376,"children":3377},{"style":472},[3378],{"type":401,"value":1504},{"type":396,"tag":465,"props":3380,"children":3381},{"style":490},[3382],{"type":401,"value":3383}," xPermittedCrossDomainPolicies",{"type":396,"tag":465,"props":3385,"children":3386},{"style":575},[3387],{"type":401,"value":499},{"type":396,"tag":465,"props":3389,"children":3390},{"style":1517},[3391],{"type":401,"value":3392},"headerValue",{"type":396,"tag":465,"props":3394,"children":3395},{"style":484},[3396],{"type":401,"value":487},{"type":396,"tag":465,"props":3398,"children":3399},{"style":502},[3400],{"type":401,"value":795},{"type":396,"tag":465,"props":3402,"children":3403},{"style":508},[3404],{"type":401,"value":3331},{"type":396,"tag":465,"props":3406,"children":3407},{"style":502},[3408],{"type":401,"value":505},{"type":396,"tag":465,"props":3410,"children":3411},{"style":575},[3412],{"type":401,"value":1853},{"type":396,"tag":465,"props":3414,"children":3415},{"style":575},[3416],{"type":401,"value":1556},{"type":396,"tag":465,"props":3418,"children":3419},{"class":467,"line":1381},[3420,3424,3428,3433,3437,3441,3445,3449,3453,3457,3461],{"type":396,"tag":465,"props":3421,"children":3422},{"style":1690},[3423],{"type":401,"value":1693},{"type":396,"tag":465,"props":3425,"children":3426},{"style":472},[3427],{"type":401,"value":1816},{"type":396,"tag":465,"props":3429,"children":3430},{"style":490},[3431],{"type":401,"value":3432}," xPermittedCrossDomainPoliciesMiddleware",{"type":396,"tag":465,"props":3434,"children":3435},{"style":575},[3436],{"type":401,"value":499},{"type":396,"tag":465,"props":3438,"children":3439},{"style":1517},[3440],{"type":401,"value":1830},{"type":396,"tag":465,"props":3442,"children":3443},{"style":575},[3444],{"type":401,"value":790},{"type":396,"tag":465,"props":3446,"children":3447},{"style":1517},[3448],{"type":401,"value":1839},{"type":396,"tag":465,"props":3450,"children":3451},{"style":575},[3452],{"type":401,"value":790},{"type":396,"tag":465,"props":3454,"children":3455},{"style":1517},[3456],{"type":401,"value":1848},{"type":396,"tag":465,"props":3458,"children":3459},{"style":575},[3460],{"type":401,"value":1853},{"type":396,"tag":465,"props":3462,"children":3463},{"style":575},[3464],{"type":401,"value":1556},{"type":396,"tag":465,"props":3466,"children":3467},{"class":467,"line":1390},[3468,3472,3476,3480,3484,3488,3492,3496,3500,3504],{"type":396,"tag":465,"props":3469,"children":3470},{"style":496},[3471],{"type":401,"value":1866},{"type":396,"tag":465,"props":3473,"children":3474},{"style":575},[3475],{"type":401,"value":578},{"type":396,"tag":465,"props":3477,"children":3478},{"style":490},[3479],{"type":401,"value":768},{"type":396,"tag":465,"props":3481,"children":3482},{"style":1609},[3483],{"type":401,"value":499},{"type":396,"tag":465,"props":3485,"children":3486},{"style":502},[3487],{"type":401,"value":505},{"type":396,"tag":465,"props":3489,"children":3490},{"style":508},[3491],{"type":401,"value":2921},{"type":396,"tag":465,"props":3493,"children":3494},{"style":502},[3495],{"type":401,"value":505},{"type":396,"tag":465,"props":3497,"children":3498},{"style":575},[3499],{"type":401,"value":790},{"type":396,"tag":465,"props":3501,"children":3502},{"style":496},[3503],{"type":401,"value":1783},{"type":396,"tag":465,"props":3505,"children":3506},{"style":1609},[3507],{"type":401,"value":520},{"type":396,"tag":465,"props":3509,"children":3510},{"class":467,"line":1411},[3511,3515],{"type":396,"tag":465,"props":3512,"children":3513},{"style":490},[3514],{"type":401,"value":1911},{"type":396,"tag":465,"props":3516,"children":3517},{"style":1609},[3518],{"type":401,"value":555},{"type":396,"tag":465,"props":3520,"children":3521},{"class":467,"line":1420},[3522],{"type":396,"tag":465,"props":3523,"children":3524},{"style":575},[3525],{"type":401,"value":1924},{"type":396,"tag":465,"props":3527,"children":3528},{"class":467,"line":1441},[3529],{"type":396,"tag":465,"props":3530,"children":3531},{"style":575},[3532],{"type":401,"value":1735},{"type":396,"tag":397,"props":3534,"children":3535},{},[3536],{"type":401,"value":3537},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":396,"tag":665,"props":3539,"children":3541},{"id":3540},"开启-csp",[3542],{"type":401,"value":3543},"开启 CSP",{"type":396,"tag":397,"props":3545,"children":3546},{},[3547,3549,3554,3556,3561,3563,3568,3570,3581],{"type":401,"value":3548},"还记得刚才提到 Chrome 关闭了 ",{"type":396,"tag":461,"props":3550,"children":3552},{"className":3551},[],[3553],{"type":401,"value":918},{"type":401,"value":3555}," 吗？既然不再使用 ",{"type":396,"tag":461,"props":3557,"children":3559},{"className":3558},[],[3560],{"type":401,"value":918},{"type":401,"value":3562},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":396,"tag":461,"props":3564,"children":3566},{"className":3565},[],[3567],{"type":401,"value":946},{"type":401,"value":3569}," 标准",{"type":396,"tag":404,"props":3571,"children":3572},{},[3573],{"type":396,"tag":408,"props":3574,"children":3578},{"href":3575,"ariaDescribedBy":3576,"dataFootnoteRef":389,"id":3577},"#user-content-fn-csp-standard",[412],"user-content-fnref-csp-standard",[3579],{"type":401,"value":3580},"12",{"type":401,"value":3582},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":396,"tag":397,"props":3584,"children":3585},{},[3586,3591],{"type":396,"tag":461,"props":3587,"children":3589},{"className":3588},[],[3590],{"type":401,"value":946},{"type":401,"value":3592}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":396,"tag":454,"props":3594,"children":3596},{"code":3595,"language":1956,"meta":389,"className":1957,"style":389},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3597],{"type":396,"tag":461,"props":3598,"children":3599},{"__ignoreMap":389},[3600],{"type":396,"tag":465,"props":3601,"children":3602},{"class":467,"line":468},[3603,3607,3611,3616,3620,3624,3629,3633,3637,3641,3645,3650,3654],{"type":396,"tag":465,"props":3604,"children":3605},{"style":575},[3606],{"type":401,"value":1969},{"type":396,"tag":465,"props":3608,"children":3609},{"style":1972},[3610],{"type":401,"value":1975},{"type":396,"tag":465,"props":3612,"children":3613},{"style":1978},[3614],{"type":401,"value":3615}," http-equiv",{"type":396,"tag":465,"props":3617,"children":3618},{"style":575},[3619],{"type":401,"value":1986},{"type":396,"tag":465,"props":3621,"children":3622},{"style":502},[3623],{"type":401,"value":1991},{"type":396,"tag":465,"props":3625,"children":3626},{"style":508},[3627],{"type":401,"value":3628},"Content-Security-Policy",{"type":396,"tag":465,"props":3630,"children":3631},{"style":502},[3632],{"type":401,"value":1991},{"type":396,"tag":465,"props":3634,"children":3635},{"style":1978},[3636],{"type":401,"value":2005},{"type":396,"tag":465,"props":3638,"children":3639},{"style":575},[3640],{"type":401,"value":1986},{"type":396,"tag":465,"props":3642,"children":3643},{"style":502},[3644],{"type":401,"value":1991},{"type":396,"tag":465,"props":3646,"children":3647},{"style":508},[3648],{"type":401,"value":3649},"default-src 'self'; img-src https://*; child-src 'none';",{"type":396,"tag":465,"props":3651,"children":3652},{"style":502},[3653],{"type":401,"value":1991},{"type":396,"tag":465,"props":3655,"children":3656},{"style":575},[3657],{"type":401,"value":2026},{"type":396,"tag":397,"props":3659,"children":3660},{},[3661,3663,3668],{"type":401,"value":3662},"一个典型的 ",{"type":396,"tag":461,"props":3664,"children":3666},{"className":3665},[],[3667],{"type":401,"value":946},{"type":401,"value":3669}," 头如下：",{"type":396,"tag":454,"props":3671,"children":3673},{"code":3672},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3674],{"type":396,"tag":461,"props":3675,"children":3676},{"__ignoreMap":389},[3677],{"type":401,"value":3672},{"type":396,"tag":397,"props":3679,"children":3680},{},[3681],{"type":401,"value":3682},"大致来说，CSP 相关以下几种安全行为：",{"type":396,"tag":3684,"props":3685,"children":3686},"ul",{},[3687,3692,3697,3702],{"type":396,"tag":2949,"props":3688,"children":3689},{},[3690],{"type":401,"value":3691},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":396,"tag":2949,"props":3693,"children":3694},{},[3695],{"type":401,"value":3696},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":396,"tag":2949,"props":3698,"children":3699},{},[3700],{"type":401,"value":3701},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":396,"tag":2949,"props":3703,"children":3704},{},[3705,3707,3713],{"type":401,"value":3706},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":396,"tag":461,"props":3708,"children":3710},{"className":3709},[],[3711],{"type":401,"value":3712},"Content-Security-Policy-Report-Only",{"type":401,"value":3714}," Header。",{"type":396,"tag":397,"props":3716,"children":3717},{},[3718,3720,3725],{"type":401,"value":3719},"那么我们看看 Helmet 中默认配置的 ",{"type":396,"tag":461,"props":3721,"children":3723},{"className":3722},[],[3724],{"type":401,"value":946},{"type":401,"value":3726}," 策略：",{"type":396,"tag":454,"props":3728,"children":3730},{"code":3729,"language":457,"meta":389,"className":458,"style":389},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3731],{"type":396,"tag":461,"props":3732,"children":3733},{"__ignoreMap":389},[3734,3754,3762,3809,3817,3861,3869,3898,3906,3984,3992,4035,4043,4103,4111,4156,4164,4208,4216,4224,4232,4240,4289,4297,4375,4383,4391,4399,4424],{"type":396,"tag":465,"props":3735,"children":3736},{"class":467,"line":468},[3737,3741,3746,3750],{"type":396,"tag":465,"props":3738,"children":3739},{"style":472},[3740],{"type":401,"value":475},{"type":396,"tag":465,"props":3742,"children":3743},{"style":478},[3744],{"type":401,"value":3745}," DEFAULT_DIRECTIVES",{"type":396,"tag":465,"props":3747,"children":3748},{"style":484},[3749],{"type":401,"value":487},{"type":396,"tag":465,"props":3751,"children":3752},{"style":575},[3753],{"type":401,"value":1556},{"type":396,"tag":465,"props":3755,"children":3756},{"class":467,"line":523},[3757],{"type":396,"tag":465,"props":3758,"children":3759},{"style":1235},[3760],{"type":401,"value":3761},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":396,"tag":465,"props":3763,"children":3764},{"class":467,"line":532},[3765,3769,3775,3779,3783,3787,3791,3796,3800,3805],{"type":396,"tag":465,"props":3766,"children":3767},{"style":502},[3768],{"type":401,"value":1246},{"type":396,"tag":465,"props":3770,"children":3772},{"style":3771},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3773],{"type":401,"value":3774},"default-src",{"type":396,"tag":465,"props":3776,"children":3777},{"style":502},[3778],{"type":401,"value":505},{"type":396,"tag":465,"props":3780,"children":3781},{"style":575},[3782],{"type":401,"value":1625},{"type":396,"tag":465,"props":3784,"children":3785},{"style":496},[3786],{"type":401,"value":1529},{"type":396,"tag":465,"props":3788,"children":3789},{"style":502},[3790],{"type":401,"value":1991},{"type":396,"tag":465,"props":3792,"children":3793},{"style":508},[3794],{"type":401,"value":3795},"'self'",{"type":396,"tag":465,"props":3797,"children":3798},{"style":502},[3799],{"type":401,"value":1991},{"type":396,"tag":465,"props":3801,"children":3802},{"style":496},[3803],{"type":401,"value":3804},"]",{"type":396,"tag":465,"props":3806,"children":3807},{"style":575},[3808],{"type":401,"value":1260},{"type":396,"tag":465,"props":3810,"children":3811},{"class":467,"line":558},[3812],{"type":396,"tag":465,"props":3813,"children":3814},{"style":1235},[3815],{"type":401,"value":3816},"  // 限制 base 标签的 URI 为源地址\n",{"type":396,"tag":465,"props":3818,"children":3819},{"class":467,"line":566},[3820,3824,3829,3833,3837,3841,3845,3849,3853,3857],{"type":396,"tag":465,"props":3821,"children":3822},{"style":502},[3823],{"type":401,"value":1246},{"type":396,"tag":465,"props":3825,"children":3826},{"style":3771},[3827],{"type":401,"value":3828},"base-uri",{"type":396,"tag":465,"props":3830,"children":3831},{"style":502},[3832],{"type":401,"value":505},{"type":396,"tag":465,"props":3834,"children":3835},{"style":575},[3836],{"type":401,"value":1625},{"type":396,"tag":465,"props":3838,"children":3839},{"style":496},[3840],{"type":401,"value":1529},{"type":396,"tag":465,"props":3842,"children":3843},{"style":502},[3844],{"type":401,"value":1991},{"type":396,"tag":465,"props":3846,"children":3847},{"style":508},[3848],{"type":401,"value":3795},{"type":396,"tag":465,"props":3850,"children":3851},{"style":502},[3852],{"type":401,"value":1991},{"type":396,"tag":465,"props":3854,"children":3855},{"style":496},[3856],{"type":401,"value":3804},{"type":396,"tag":465,"props":3858,"children":3859},{"style":575},[3860],{"type":401,"value":1260},{"type":396,"tag":465,"props":3862,"children":3863},{"class":467,"line":1291},[3864],{"type":396,"tag":465,"props":3865,"children":3866},{"style":1235},[3867],{"type":401,"value":3868},"  // 禁止通过 HTTP 协议加载内容\n",{"type":396,"tag":465,"props":3870,"children":3871},{"class":467,"line":1300},[3872,3876,3881,3885,3889,3894],{"type":396,"tag":465,"props":3873,"children":3874},{"style":502},[3875],{"type":401,"value":1246},{"type":396,"tag":465,"props":3877,"children":3878},{"style":3771},[3879],{"type":401,"value":3880},"block-all-mixed-content",{"type":396,"tag":465,"props":3882,"children":3883},{"style":502},[3884],{"type":401,"value":505},{"type":396,"tag":465,"props":3886,"children":3887},{"style":575},[3888],{"type":401,"value":1625},{"type":396,"tag":465,"props":3890,"children":3891},{"style":496},[3892],{"type":401,"value":3893}," []",{"type":396,"tag":465,"props":3895,"children":3896},{"style":575},[3897],{"type":401,"value":1260},{"type":396,"tag":465,"props":3899,"children":3900},{"class":467,"line":1321},[3901],{"type":396,"tag":465,"props":3902,"children":3903},{"style":1235},[3904],{"type":401,"value":3905},"  // 限制字体加载地址\n",{"type":396,"tag":465,"props":3907,"children":3908},{"class":467,"line":1330},[3909,3913,3918,3922,3926,3930,3934,3938,3942,3946,3950,3955,3959,3963,3967,3972,3976,3980],{"type":396,"tag":465,"props":3910,"children":3911},{"style":502},[3912],{"type":401,"value":1246},{"type":396,"tag":465,"props":3914,"children":3915},{"style":3771},[3916],{"type":401,"value":3917},"font-src",{"type":396,"tag":465,"props":3919,"children":3920},{"style":502},[3921],{"type":401,"value":505},{"type":396,"tag":465,"props":3923,"children":3924},{"style":575},[3925],{"type":401,"value":1625},{"type":396,"tag":465,"props":3927,"children":3928},{"style":496},[3929],{"type":401,"value":1529},{"type":396,"tag":465,"props":3931,"children":3932},{"style":502},[3933],{"type":401,"value":1991},{"type":396,"tag":465,"props":3935,"children":3936},{"style":508},[3937],{"type":401,"value":3795},{"type":396,"tag":465,"props":3939,"children":3940},{"style":502},[3941],{"type":401,"value":1991},{"type":396,"tag":465,"props":3943,"children":3944},{"style":575},[3945],{"type":401,"value":790},{"type":396,"tag":465,"props":3947,"children":3948},{"style":502},[3949],{"type":401,"value":795},{"type":396,"tag":465,"props":3951,"children":3952},{"style":508},[3953],{"type":401,"value":3954},"https:",{"type":396,"tag":465,"props":3956,"children":3957},{"style":502},[3958],{"type":401,"value":505},{"type":396,"tag":465,"props":3960,"children":3961},{"style":575},[3962],{"type":401,"value":790},{"type":396,"tag":465,"props":3964,"children":3965},{"style":502},[3966],{"type":401,"value":795},{"type":396,"tag":465,"props":3968,"children":3969},{"style":508},[3970],{"type":401,"value":3971},"data:",{"type":396,"tag":465,"props":3973,"children":3974},{"style":502},[3975],{"type":401,"value":505},{"type":396,"tag":465,"props":3977,"children":3978},{"style":496},[3979],{"type":401,"value":3804},{"type":396,"tag":465,"props":3981,"children":3982},{"style":575},[3983],{"type":401,"value":1260},{"type":396,"tag":465,"props":3985,"children":3986},{"class":467,"line":1351},[3987],{"type":396,"tag":465,"props":3988,"children":3989},{"style":1235},[3990],{"type":401,"value":3991},"  // 限制嵌入的外部资源\n",{"type":396,"tag":465,"props":3993,"children":3994},{"class":467,"line":1360},[3995,3999,4003,4007,4011,4015,4019,4023,4027,4031],{"type":396,"tag":465,"props":3996,"children":3997},{"style":502},[3998],{"type":401,"value":1246},{"type":396,"tag":465,"props":4000,"children":4001},{"style":3771},[4002],{"type":401,"value":1140},{"type":396,"tag":465,"props":4004,"children":4005},{"style":502},[4006],{"type":401,"value":505},{"type":396,"tag":465,"props":4008,"children":4009},{"style":575},[4010],{"type":401,"value":1625},{"type":396,"tag":465,"props":4012,"children":4013},{"style":496},[4014],{"type":401,"value":1529},{"type":396,"tag":465,"props":4016,"children":4017},{"style":502},[4018],{"type":401,"value":1991},{"type":396,"tag":465,"props":4020,"children":4021},{"style":508},[4022],{"type":401,"value":3795},{"type":396,"tag":465,"props":4024,"children":4025},{"style":502},[4026],{"type":401,"value":1991},{"type":396,"tag":465,"props":4028,"children":4029},{"style":496},[4030],{"type":401,"value":3804},{"type":396,"tag":465,"props":4032,"children":4033},{"style":575},[4034],{"type":401,"value":1260},{"type":396,"tag":465,"props":4036,"children":4037},{"class":467,"line":1381},[4038],{"type":396,"tag":465,"props":4039,"children":4040},{"style":1235},[4041],{"type":401,"value":4042},"  // 限制图片加载地址\n",{"type":396,"tag":465,"props":4044,"children":4045},{"class":467,"line":1390},[4046,4050,4055,4059,4063,4067,4071,4075,4079,4083,4087,4091,4095,4099],{"type":396,"tag":465,"props":4047,"children":4048},{"style":502},[4049],{"type":401,"value":1246},{"type":396,"tag":465,"props":4051,"children":4052},{"style":3771},[4053],{"type":401,"value":4054},"img-src",{"type":396,"tag":465,"props":4056,"children":4057},{"style":502},[4058],{"type":401,"value":505},{"type":396,"tag":465,"props":4060,"children":4061},{"style":575},[4062],{"type":401,"value":1625},{"type":396,"tag":465,"props":4064,"children":4065},{"style":496},[4066],{"type":401,"value":1529},{"type":396,"tag":465,"props":4068,"children":4069},{"style":502},[4070],{"type":401,"value":1991},{"type":396,"tag":465,"props":4072,"children":4073},{"style":508},[4074],{"type":401,"value":3795},{"type":396,"tag":465,"props":4076,"children":4077},{"style":502},[4078],{"type":401,"value":1991},{"type":396,"tag":465,"props":4080,"children":4081},{"style":575},[4082],{"type":401,"value":790},{"type":396,"tag":465,"props":4084,"children":4085},{"style":502},[4086],{"type":401,"value":795},{"type":396,"tag":465,"props":4088,"children":4089},{"style":508},[4090],{"type":401,"value":3971},{"type":396,"tag":465,"props":4092,"children":4093},{"style":502},[4094],{"type":401,"value":505},{"type":396,"tag":465,"props":4096,"children":4097},{"style":496},[4098],{"type":401,"value":3804},{"type":396,"tag":465,"props":4100,"children":4101},{"style":575},[4102],{"type":401,"value":1260},{"type":396,"tag":465,"props":4104,"children":4105},{"class":467,"line":1411},[4106],{"type":396,"tag":465,"props":4107,"children":4108},{"style":1235},[4109],{"type":401,"value":4110},"  // 禁用 object 标签\n",{"type":396,"tag":465,"props":4112,"children":4113},{"class":467,"line":1420},[4114,4118,4123,4127,4131,4135,4139,4144,4148,4152],{"type":396,"tag":465,"props":4115,"children":4116},{"style":502},[4117],{"type":401,"value":1246},{"type":396,"tag":465,"props":4119,"children":4120},{"style":3771},[4121],{"type":401,"value":4122},"object-src",{"type":396,"tag":465,"props":4124,"children":4125},{"style":502},[4126],{"type":401,"value":505},{"type":396,"tag":465,"props":4128,"children":4129},{"style":575},[4130],{"type":401,"value":1625},{"type":396,"tag":465,"props":4132,"children":4133},{"style":496},[4134],{"type":401,"value":1529},{"type":396,"tag":465,"props":4136,"children":4137},{"style":502},[4138],{"type":401,"value":1991},{"type":396,"tag":465,"props":4140,"children":4141},{"style":508},[4142],{"type":401,"value":4143},"'none'",{"type":396,"tag":465,"props":4145,"children":4146},{"style":502},[4147],{"type":401,"value":1991},{"type":396,"tag":465,"props":4149,"children":4150},{"style":496},[4151],{"type":401,"value":3804},{"type":396,"tag":465,"props":4153,"children":4154},{"style":575},[4155],{"type":401,"value":1260},{"type":396,"tag":465,"props":4157,"children":4158},{"class":467,"line":1441},[4159],{"type":396,"tag":465,"props":4160,"children":4161},{"style":1235},[4162],{"type":401,"value":4163},"  // 只从源地址加载脚本\n",{"type":396,"tag":465,"props":4165,"children":4166},{"class":467,"line":1450},[4167,4171,4176,4180,4184,4188,4192,4196,4200,4204],{"type":396,"tag":465,"props":4168,"children":4169},{"style":502},[4170],{"type":401,"value":1246},{"type":396,"tag":465,"props":4172,"children":4173},{"style":3771},[4174],{"type":401,"value":4175},"script-src",{"type":396,"tag":465,"props":4177,"children":4178},{"style":502},[4179],{"type":401,"value":505},{"type":396,"tag":465,"props":4181,"children":4182},{"style":575},[4183],{"type":401,"value":1625},{"type":396,"tag":465,"props":4185,"children":4186},{"style":496},[4187],{"type":401,"value":1529},{"type":396,"tag":465,"props":4189,"children":4190},{"style":502},[4191],{"type":401,"value":1991},{"type":396,"tag":465,"props":4193,"children":4194},{"style":508},[4195],{"type":401,"value":3795},{"type":396,"tag":465,"props":4197,"children":4198},{"style":502},[4199],{"type":401,"value":1991},{"type":396,"tag":465,"props":4201,"children":4202},{"style":496},[4203],{"type":401,"value":3804},{"type":396,"tag":465,"props":4205,"children":4206},{"style":575},[4207],{"type":401,"value":1260},{"type":396,"tag":465,"props":4209,"children":4210},{"class":467,"line":1471},[4211],{"type":396,"tag":465,"props":4212,"children":4213},{"style":1235},[4214],{"type":401,"value":4215},"  // 禁用内联脚本\n",{"type":396,"tag":465,"props":4217,"children":4218},{"class":467,"line":1480},[4219],{"type":396,"tag":465,"props":4220,"children":4221},{"style":1235},[4222],{"type":401,"value":4223},"  // ？这里没能理解\n",{"type":396,"tag":465,"props":4225,"children":4226},{"class":467,"line":1489},[4227],{"type":396,"tag":465,"props":4228,"children":4229},{"style":1235},[4230],{"type":401,"value":4231},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":396,"tag":465,"props":4233,"children":4234},{"class":467,"line":1498},[4235],{"type":396,"tag":465,"props":4236,"children":4237},{"style":1235},[4238],{"type":401,"value":4239},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":396,"tag":465,"props":4241,"children":4242},{"class":467,"line":1559},[4243,4247,4252,4256,4260,4264,4268,4272,4276,4280,4284],{"type":396,"tag":465,"props":4244,"children":4245},{"style":502},[4246],{"type":401,"value":1246},{"type":396,"tag":465,"props":4248,"children":4249},{"style":3771},[4250],{"type":401,"value":4251},"script-src-attr",{"type":396,"tag":465,"props":4253,"children":4254},{"style":502},[4255],{"type":401,"value":505},{"type":396,"tag":465,"props":4257,"children":4258},{"style":575},[4259],{"type":401,"value":1625},{"type":396,"tag":465,"props":4261,"children":4262},{"style":496},[4263],{"type":401,"value":1529},{"type":396,"tag":465,"props":4265,"children":4266},{"style":502},[4267],{"type":401,"value":1991},{"type":396,"tag":465,"props":4269,"children":4270},{"style":508},[4271],{"type":401,"value":4143},{"type":396,"tag":465,"props":4273,"children":4274},{"style":502},[4275],{"type":401,"value":1991},{"type":396,"tag":465,"props":4277,"children":4278},{"style":496},[4279],{"type":401,"value":3804},{"type":396,"tag":465,"props":4281,"children":4282},{"style":575},[4283],{"type":401,"value":790},{"type":396,"tag":465,"props":4285,"children":4286},{"style":496},[4287],{"type":401,"value":4288},"‘\n",{"type":396,"tag":465,"props":4290,"children":4291},{"class":467,"line":1633},[4292],{"type":396,"tag":465,"props":4293,"children":4294},{"style":1235},[4295],{"type":401,"value":4296},"  // 限制样式表加载地址\n",{"type":396,"tag":465,"props":4298,"children":4299},{"class":467,"line":1664},[4300,4304,4309,4313,4317,4321,4325,4329,4333,4337,4341,4345,4349,4353,4358,4363,4367,4371],{"type":396,"tag":465,"props":4301,"children":4302},{"style":502},[4303],{"type":401,"value":1246},{"type":396,"tag":465,"props":4305,"children":4306},{"style":3771},[4307],{"type":401,"value":4308},"style-src",{"type":396,"tag":465,"props":4310,"children":4311},{"style":502},[4312],{"type":401,"value":505},{"type":396,"tag":465,"props":4314,"children":4315},{"style":575},[4316],{"type":401,"value":1625},{"type":396,"tag":465,"props":4318,"children":4319},{"style":496},[4320],{"type":401,"value":1529},{"type":396,"tag":465,"props":4322,"children":4323},{"style":502},[4324],{"type":401,"value":1991},{"type":396,"tag":465,"props":4326,"children":4327},{"style":508},[4328],{"type":401,"value":3795},{"type":396,"tag":465,"props":4330,"children":4331},{"style":502},[4332],{"type":401,"value":1991},{"type":396,"tag":465,"props":4334,"children":4335},{"style":575},[4336],{"type":401,"value":790},{"type":396,"tag":465,"props":4338,"children":4339},{"style":502},[4340],{"type":401,"value":795},{"type":396,"tag":465,"props":4342,"children":4343},{"style":508},[4344],{"type":401,"value":3954},{"type":396,"tag":465,"props":4346,"children":4347},{"style":502},[4348],{"type":401,"value":505},{"type":396,"tag":465,"props":4350,"children":4351},{"style":575},[4352],{"type":401,"value":790},{"type":396,"tag":465,"props":4354,"children":4355},{"style":502},[4356],{"type":401,"value":4357}," \"",{"type":396,"tag":465,"props":4359,"children":4360},{"style":508},[4361],{"type":401,"value":4362},"'unsafe-inline'",{"type":396,"tag":465,"props":4364,"children":4365},{"style":502},[4366],{"type":401,"value":1991},{"type":396,"tag":465,"props":4368,"children":4369},{"style":496},[4370],{"type":401,"value":3804},{"type":396,"tag":465,"props":4372,"children":4373},{"style":575},[4374],{"type":401,"value":1260},{"type":396,"tag":465,"props":4376,"children":4377},{"class":467,"line":1677},[4378],{"type":396,"tag":465,"props":4379,"children":4380},{"style":1235},[4381],{"type":401,"value":4382},"  // 不使用升级协议指令\n",{"type":396,"tag":465,"props":4384,"children":4385},{"class":467,"line":1686},[4386],{"type":396,"tag":465,"props":4387,"children":4388},{"style":1235},[4389],{"type":401,"value":4390},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":396,"tag":465,"props":4392,"children":4393},{"class":467,"line":1729},[4394],{"type":396,"tag":465,"props":4395,"children":4396},{"style":1235},[4397],{"type":401,"value":4398},"  // 所以默认不开启此指令\n",{"type":396,"tag":465,"props":4400,"children":4401},{"class":467,"line":1738},[4402,4406,4411,4415,4419],{"type":396,"tag":465,"props":4403,"children":4404},{"style":502},[4405],{"type":401,"value":1246},{"type":396,"tag":465,"props":4407,"children":4408},{"style":3771},[4409],{"type":401,"value":4410},"upgrade-insecure-requests",{"type":396,"tag":465,"props":4412,"children":4413},{"style":502},[4414],{"type":401,"value":505},{"type":396,"tag":465,"props":4416,"children":4417},{"style":575},[4418],{"type":401,"value":1625},{"type":396,"tag":465,"props":4420,"children":4421},{"style":496},[4422],{"type":401,"value":4423}," []\n",{"type":396,"tag":465,"props":4425,"children":4426},{"class":467,"line":1773},[4427],{"type":396,"tag":465,"props":4428,"children":4429},{"style":575},[4430],{"type":401,"value":1735},{"type":396,"tag":397,"props":4432,"children":4433},{},[4434,4436,4442,4444,4450],{"type":401,"value":4435},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":396,"tag":461,"props":4437,"children":4439},{"className":4438},[],[4440],{"type":401,"value":4441},"CSP 1.0",{"type":401,"value":4443}," 的兼容性，我没有找到最新版本规范（",{"type":396,"tag":461,"props":4445,"children":4447},{"className":4446},[],[4448],{"type":401,"value":4449},"CSP 3.0",{"type":401,"value":4451},"）的兼容性数据 😝。",{"type":396,"tag":397,"props":4453,"children":4454},{},[4455],{"type":396,"tag":1118,"props":4456,"children":4459},{"alt":4457,"src":4458},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":396,"tag":665,"props":4461,"children":4463},{"id":4462},"移除下载文件后的打开按钮",[4464],{"type":401,"value":4465},"移除下载文件后的“打开”按钮",{"type":396,"tag":454,"props":4467,"children":4469},{"code":4468,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('X-Download-Options', 'noopen')\n",[4470],{"type":396,"tag":461,"props":4471,"children":4472},{"__ignoreMap":389},[4473],{"type":396,"tag":465,"props":4474,"children":4475},{"class":467,"line":468},[4476,4480,4484,4488,4492,4496,4501,4505,4509,4513,4518,4522],{"type":396,"tag":465,"props":4477,"children":4478},{"style":496},[4479],{"type":401,"value":685},{"type":396,"tag":465,"props":4481,"children":4482},{"style":575},[4483],{"type":401,"value":578},{"type":396,"tag":465,"props":4485,"children":4486},{"style":490},[4487],{"type":401,"value":768},{"type":396,"tag":465,"props":4489,"children":4490},{"style":496},[4491],{"type":401,"value":499},{"type":396,"tag":465,"props":4493,"children":4494},{"style":502},[4495],{"type":401,"value":505},{"type":396,"tag":465,"props":4497,"children":4498},{"style":508},[4499],{"type":401,"value":4500},"X-Download-Options",{"type":396,"tag":465,"props":4502,"children":4503},{"style":502},[4504],{"type":401,"value":505},{"type":396,"tag":465,"props":4506,"children":4507},{"style":575},[4508],{"type":401,"value":790},{"type":396,"tag":465,"props":4510,"children":4511},{"style":502},[4512],{"type":401,"value":795},{"type":396,"tag":465,"props":4514,"children":4515},{"style":508},[4516],{"type":401,"value":4517},"noopen",{"type":396,"tag":465,"props":4519,"children":4520},{"style":502},[4521],{"type":401,"value":505},{"type":396,"tag":465,"props":4523,"children":4524},{"style":496},[4525],{"type":401,"value":520},{"type":396,"tag":397,"props":4527,"children":4528},{},[4529,4531,4536],{"type":401,"value":4530},"在下载文件时，",{"type":396,"tag":461,"props":4532,"children":4534},{"className":4533},[],[4535],{"type":401,"value":4500},{"type":401,"value":4537}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":396,"tag":665,"props":4539,"children":4541},{"id":4540},"开启-dns-预取",[4542],{"type":401,"value":4543},"开启 DNS 预取",{"type":396,"tag":397,"props":4545,"children":4546},{},[4547,4549,4555],{"type":401,"value":4548},"通过设置 ",{"type":396,"tag":461,"props":4550,"children":4552},{"className":4551},[],[4553],{"type":401,"value":4554},"X-DNS-Prefetch-Control",{"type":401,"value":4556}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":396,"tag":397,"props":4558,"children":4559},{},[4560,4562,4569],{"type":401,"value":4561},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":396,"tag":408,"props":4563,"children":4566},{"href":4564,"rel":4565},"https://github.com/helmetjs/helmet/issues/111",[985],[4567],{"type":401,"value":4568},"Issue",{"type":401,"value":975},{"type":396,"tag":454,"props":4571,"children":4573},{"code":4572,"language":457,"meta":389,"className":458,"style":389},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4574],{"type":396,"tag":461,"props":4575,"children":4576},{"__ignoreMap":389},[4577],{"type":396,"tag":465,"props":4578,"children":4579},{"class":467,"line":468},[4580,4584,4588,4592,4596,4600,4604,4608,4612,4616,4621,4625],{"type":396,"tag":465,"props":4581,"children":4582},{"style":496},[4583],{"type":401,"value":685},{"type":396,"tag":465,"props":4585,"children":4586},{"style":575},[4587],{"type":401,"value":578},{"type":396,"tag":465,"props":4589,"children":4590},{"style":490},[4591],{"type":401,"value":768},{"type":396,"tag":465,"props":4593,"children":4594},{"style":496},[4595],{"type":401,"value":499},{"type":396,"tag":465,"props":4597,"children":4598},{"style":502},[4599],{"type":401,"value":505},{"type":396,"tag":465,"props":4601,"children":4602},{"style":508},[4603],{"type":401,"value":4554},{"type":396,"tag":465,"props":4605,"children":4606},{"style":502},[4607],{"type":401,"value":505},{"type":396,"tag":465,"props":4609,"children":4610},{"style":575},[4611],{"type":401,"value":790},{"type":396,"tag":465,"props":4613,"children":4614},{"style":502},[4615],{"type":401,"value":795},{"type":396,"tag":465,"props":4617,"children":4618},{"style":508},[4619],{"type":401,"value":4620},"on",{"type":396,"tag":465,"props":4622,"children":4623},{"style":502},[4624],{"type":401,"value":505},{"type":396,"tag":465,"props":4626,"children":4627},{"style":496},[4628],{"type":401,"value":520},{"type":396,"tag":634,"props":4630,"children":4632},{"id":4631},"阅读更多",[4633],{"type":401,"value":4631},{"type":396,"tag":397,"props":4635,"children":4636},{},[4637],{"type":401,"value":4638},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":396,"tag":3684,"props":4640,"children":4641},{},[4642],{"type":396,"tag":2949,"props":4643,"children":4644},{},[4645,4647],{"type":401,"value":4646},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":396,"tag":404,"props":4648,"children":4649},{},[4650],{"type":396,"tag":408,"props":4651,"children":4655},{"href":4652,"ariaDescribedBy":4653,"dataFootnoteRef":389,"id":4654},"#user-content-fn-secure-cookie",[412],"user-content-fnref-secure-cookie",[4656],{"type":401,"value":4657},"13",{"type":396,"tag":397,"props":4659,"children":4660},{},[4661,4663,4670,4672,4679],{"type":401,"value":4662},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":396,"tag":408,"props":4664,"children":4667},{"href":4665,"rel":4666},"https://owasp.org/www-project-secure-headers/",[985],[4668],{"type":401,"value":4669},"OWASP Secure Headers Project",{"type":401,"value":4671},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":396,"tag":408,"props":4673,"children":4676},{"href":4674,"rel":4675},"https://infosec.mozilla.org/guidelines/web_security",[985],[4677],{"type":401,"value":4678},"Web Security",{"type":401,"value":4680},"。以下是一些额外的可供探索的页面：",{"type":396,"tag":3684,"props":4682,"children":4683},{},[4684,4694,4704],{"type":396,"tag":2949,"props":4685,"children":4686},{},[4687],{"type":396,"tag":408,"props":4688,"children":4691},{"href":4689,"rel":4690},"https://www.zhihu.com/question/21979782",[985],[4692],{"type":401,"value":4693},"Content Security Policy (CSP) 是什么？",{"type":396,"tag":2949,"props":4695,"children":4696},{},[4697],{"type":396,"tag":408,"props":4698,"children":4701},{"href":4699,"rel":4700},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[985],[4702],{"type":401,"value":4703},"CORS@MDN",{"type":396,"tag":2949,"props":4705,"children":4706},{},[4707],{"type":396,"tag":408,"props":4708,"children":4711},{"href":4709,"rel":4710},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[985],[4712],{"type":401,"value":4713},"OWASP Top 10 2017（RC2）",{"type":396,"tag":4715,"props":4716,"children":4719},"section",{"className":4717,"dataFootnotes":389},[4718],"footnotes",[4720,4727],{"type":396,"tag":634,"props":4721,"children":4724},{"className":4722,"id":412},[4723],"sr-only",[4725],{"type":401,"value":4726},"Footnotes",{"type":396,"tag":2945,"props":4728,"children":4729},{},[4730,4752,4771,4790,4807,4826,4845,4858,4876,4895,4914,4933,4952],{"type":396,"tag":2949,"props":4731,"children":4733},{"id":4732},"user-content-fn-helmet",[4734,4741,4743],{"type":396,"tag":408,"props":4735,"children":4738},{"href":4736,"rel":4737},"https://helmetjs.github.io/",[985],[4739],{"type":401,"value":4740},"HELMET",{"type":401,"value":4742}," ",{"type":396,"tag":408,"props":4744,"children":4749},{"href":4745,"ariaLabel":4746,"className":4747,"dataFootnoteBackref":389},"#user-content-fnref-helmet","Back to reference 1",[4748],"data-footnote-backref",[4750],{"type":401,"value":4751},"↩",{"type":396,"tag":2949,"props":4753,"children":4755},{"id":4754},"user-content-fn-dns-rebinding-1",[4756,4763,4764],{"type":396,"tag":408,"props":4757,"children":4760},{"href":4758,"rel":4759},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[985],[4761],{"type":401,"value":4762},"来自微信外挂的安全风险",{"type":401,"value":4742},{"type":396,"tag":408,"props":4765,"children":4769},{"href":4766,"ariaLabel":4767,"className":4768,"dataFootnoteBackref":389},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4748],[4770],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4772,"children":4774},{"id":4773},"user-content-fn-dns-rebinding-2",[4775,4782,4783],{"type":396,"tag":408,"props":4776,"children":4779},{"href":4777,"rel":4778},"https://github.com/helmetjs/helmet/issues/182",[985],[4780],{"type":401,"value":4781},"GitHub Issue",{"type":401,"value":4742},{"type":396,"tag":408,"props":4784,"children":4788},{"href":4785,"ariaLabel":4786,"className":4787,"dataFootnoteBackref":389},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4748],[4789],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4791,"children":4793},{"id":4792},"user-content-fn-shp",[4794,4799,4800],{"type":396,"tag":408,"props":4795,"children":4797},{"href":4665,"rel":4796},[985],[4798],{"type":401,"value":4669},{"type":401,"value":4742},{"type":396,"tag":408,"props":4801,"children":4805},{"href":4802,"ariaLabel":4803,"className":4804,"dataFootnoteBackref":389},"#user-content-fnref-shp","Back to reference 4",[4748],[4806],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4808,"children":4810},{"id":4809},"user-content-fn-xss-auditor",[4811,4818,4819],{"type":396,"tag":408,"props":4812,"children":4815},{"href":4813,"rel":4814},"https://www.chromestatus.com/feature/5021976655560704",[985],[4816],{"type":401,"value":4817},"XSS Auditor (removed)",{"type":401,"value":4742},{"type":396,"tag":408,"props":4820,"children":4824},{"href":4821,"ariaLabel":4822,"className":4823,"dataFootnoteBackref":389},"#user-content-fnref-xss-auditor","Back to reference 5",[4748],[4825],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4827,"children":4829},{"id":4828},"user-content-fn-delete-xss-auditor",[4830,4837,4838],{"type":396,"tag":408,"props":4831,"children":4834},{"href":4832,"rel":4833},"https://zhuanlan.zhihu.com/p/74288648",[985],[4835],{"type":401,"value":4836},"Google 将删除 Chrome 内置的 XSS 保护",{"type":401,"value":4742},{"type":396,"tag":408,"props":4839,"children":4843},{"href":4840,"ariaLabel":4841,"className":4842,"dataFootnoteBackref":389},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4748],[4844],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4846,"children":4848},{"id":4847},"user-content-fn-referer",[4849,4851],{"type":401,"value":4850},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":396,"tag":408,"props":4852,"children":4856},{"href":4853,"ariaLabel":4854,"className":4855,"dataFootnoteBackref":389},"#user-content-fnref-referer","Back to reference 7",[4748],[4857],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4859,"children":4861},{"id":4860},"user-content-fn-timeend",[4862,4868,4869],{"type":396,"tag":408,"props":4863,"children":4866},{"href":4864,"rel":4865},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[985],[4867],{"type":401,"value":2756},{"type":401,"value":4742},{"type":396,"tag":408,"props":4870,"children":4874},{"href":4871,"ariaLabel":4872,"className":4873,"dataFootnoteBackref":389},"#user-content-fnref-timeend","Back to reference 8",[4748],[4875],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4877,"children":4879},{"id":4878},"user-content-fn-chrome-ct",[4880,4887,4888],{"type":396,"tag":408,"props":4881,"children":4884},{"href":4882,"rel":4883},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[985],[4885],{"type":401,"value":4886},"Chrome 证书透明度（CT）相关政策",{"type":401,"value":4742},{"type":396,"tag":408,"props":4889,"children":4893},{"href":4890,"ariaLabel":4891,"className":4892,"dataFootnoteBackref":389},"#user-content-fnref-chrome-ct","Back to reference 9",[4748],[4894],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4896,"children":4898},{"id":4897},"user-content-fn-ct",[4899,4906,4907],{"type":396,"tag":408,"props":4900,"children":4903},{"href":4901,"rel":4902},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[985],[4904],{"type":401,"value":4905},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":401,"value":4742},{"type":396,"tag":408,"props":4908,"children":4912},{"href":4909,"ariaLabel":4910,"className":4911,"dataFootnoteBackref":389},"#user-content-fnref-ct","Back to reference 10",[4748],[4913],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4915,"children":4917},{"id":4916},"user-content-fn-pdf-reader",[4918,4925,4926],{"type":396,"tag":408,"props":4919,"children":4922},{"href":4920,"rel":4921},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[985],[4923],{"type":401,"value":4924},"Cross Domain Configuration",{"type":401,"value":4742},{"type":396,"tag":408,"props":4927,"children":4931},{"href":4928,"ariaLabel":4929,"className":4930,"dataFootnoteBackref":389},"#user-content-fnref-pdf-reader","Back to reference 11",[4748],[4932],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4934,"children":4936},{"id":4935},"user-content-fn-csp-standard",[4937,4944,4945],{"type":396,"tag":408,"props":4938,"children":4941},{"href":4939,"rel":4940},"https://www.w3.org/TR/CSP/",[985],[4942],{"type":401,"value":4943},"Content Security Policy Level 3",{"type":401,"value":4742},{"type":396,"tag":408,"props":4946,"children":4950},{"href":4947,"ariaLabel":4948,"className":4949,"dataFootnoteBackref":389},"#user-content-fnref-csp-standard","Back to reference 12",[4748],[4951],{"type":401,"value":4751},{"type":396,"tag":2949,"props":4953,"children":4955},{"id":4954},"user-content-fn-secure-cookie",[4956,4963,4964],{"type":396,"tag":408,"props":4957,"children":4960},{"href":4958,"rel":4959},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[985],[4961],{"type":401,"value":4962},"Secure-Cookie",{"type":401,"value":4742},{"type":396,"tag":408,"props":4965,"children":4969},{"href":4966,"ariaLabel":4967,"className":4968,"dataFootnoteBackref":389},"#user-content-fnref-secure-cookie","Back to reference 13",[4748],[4970],{"type":401,"value":4751},{"type":396,"tag":4972,"props":4973,"children":4974},"style",{},[4975],{"type":401,"value":4976},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":389,"searchDepth":523,"depth":523,"links":4978},[4979,4992,4993],{"id":636,"depth":523,"text":639,"children":4980},[4981,4982,4983,4984,4985,4986,4987,4988,4989,4990,4991],{"id":667,"depth":532,"text":670},{"id":742,"depth":532,"text":745},{"id":832,"depth":532,"text":835},{"id":992,"depth":532,"text":992},{"id":1151,"depth":532,"text":1154},{"id":2162,"depth":532,"text":2165},{"id":2800,"depth":532,"text":2800},{"id":2909,"depth":532,"text":2912},{"id":3540,"depth":532,"text":3543},{"id":4462,"depth":532,"text":4465},{"id":4540,"depth":532,"text":4543},{"id":4631,"depth":523,"text":4631},{"id":412,"depth":523,"text":4726},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[5001,5005],{"_path":5002,"title":5003,"description":5004},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":5006,"title":5007,"description":389},"/_achieved/2020-10/noname","无题",1742039244892]