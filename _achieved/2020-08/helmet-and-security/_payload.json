[{"data":1,"prerenderedAt":4782},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":158,"/_achieved/2020-08/helmet-and-security-surround":4774},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":165,"body":166,"_type":4768,"_id":4769,"_source":4770,"_file":4771,"_stem":4772,"_extension":4773},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":167,"children":168,"toc":4751},"root",[169,191,222,227,389,394,402,407,414,438,445,490,502,514,520,583,604,610,670,682,750,764,769,829,854,888,897,923,929,966,1707,1727,1934,1940,1965,2008,2016,2572,2577,2625,2661,2669,2681,2687,2711,2718,2741,2746,2976,2995,3307,3312,3318,3357,3367,3432,3444,3452,3457,3489,3501,4205,4226,4234,4240,4300,4312,4318,4331,4344,4403,4408,4413,4432,4455,4488,4745],{"type":170,"tag":171,"props":172,"children":173},"element","p",{},[174,177],{"type":175,"value":176},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":170,"tag":178,"props":179,"children":180},"sup",{},[181],{"type":170,"tag":182,"props":183,"children":188},"a",{"href":184,"ariaDescribedBy":185,"dataFootnoteRef":163,"id":187},"#user-content-fn-helmet",[186],"footnote-label","user-content-fnref-helmet",[189],{"type":175,"value":190},"1",{"type":170,"tag":171,"props":192,"children":193},{},[194,196,207,209,220],{"type":175,"value":195},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":170,"tag":178,"props":197,"children":198},{},[199],{"type":170,"tag":182,"props":200,"children":204},{"href":201,"ariaDescribedBy":202,"dataFootnoteRef":163,"id":203},"#user-content-fn-dns-rebinding-1",[186],"user-content-fnref-dns-rebinding-1",[205],{"type":175,"value":206},"2",{"type":175,"value":208}," 问题，它就无能为力",{"type":170,"tag":178,"props":210,"children":211},{},[212],{"type":170,"tag":182,"props":213,"children":217},{"href":214,"ariaDescribedBy":215,"dataFootnoteRef":163,"id":216},"#user-content-fn-dns-rebinding-2",[186],"user-content-fnref-dns-rebinding-2",[218],{"type":175,"value":219},"3",{"type":175,"value":221},"。不过尽管不是银弹，它确实还是很有效的。",{"type":170,"tag":171,"props":223,"children":224},{},[225],{"type":175,"value":226},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":170,"tag":228,"props":229,"children":233},"pre",{"code":230,"language":231,"meta":163,"className":232,"style":163},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[234],{"type":170,"tag":235,"props":236,"children":237},"code",{"__ignoreMap":163},[238,295,304,330,338],{"type":170,"tag":239,"props":240,"children":243},"span",{"class":241,"line":242},"line",1,[244,250,256,262,268,274,280,286,290],{"type":170,"tag":239,"props":245,"children":247},{"style":246},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[248],{"type":175,"value":249},"const",{"type":170,"tag":239,"props":251,"children":253},{"style":252},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[254],{"type":175,"value":255}," express",{"type":170,"tag":239,"props":257,"children":259},{"style":258},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[260],{"type":175,"value":261}," =",{"type":170,"tag":239,"props":263,"children":265},{"style":264},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[266],{"type":175,"value":267}," require",{"type":170,"tag":239,"props":269,"children":271},{"style":270},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[272],{"type":175,"value":273},"(",{"type":170,"tag":239,"props":275,"children":277},{"style":276},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[278],{"type":175,"value":279},"'",{"type":170,"tag":239,"props":281,"children":283},{"style":282},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[284],{"type":175,"value":285},"express",{"type":170,"tag":239,"props":287,"children":288},{"style":276},[289],{"type":175,"value":279},{"type":170,"tag":239,"props":291,"children":292},{"style":270},[293],{"type":175,"value":294},")\n",{"type":170,"tag":239,"props":296,"children":298},{"class":241,"line":297},2,[299],{"type":170,"tag":239,"props":300,"children":301},{"emptyLinePlaceholder":162},[302],{"type":175,"value":303},"\n",{"type":170,"tag":239,"props":305,"children":307},{"class":241,"line":306},3,[308,312,317,321,325],{"type":170,"tag":239,"props":309,"children":310},{"style":246},[311],{"type":175,"value":249},{"type":170,"tag":239,"props":313,"children":314},{"style":252},[315],{"type":175,"value":316}," app",{"type":170,"tag":239,"props":318,"children":319},{"style":258},[320],{"type":175,"value":261},{"type":170,"tag":239,"props":322,"children":323},{"style":264},[324],{"type":175,"value":255},{"type":170,"tag":239,"props":326,"children":327},{"style":270},[328],{"type":175,"value":329},"()\n",{"type":170,"tag":239,"props":331,"children":333},{"class":241,"line":332},4,[334],{"type":170,"tag":239,"props":335,"children":336},{"emptyLinePlaceholder":162},[337],{"type":175,"value":303},{"type":170,"tag":239,"props":339,"children":341},{"class":241,"line":340},5,[342,347,353,358,362,367,371,375,380,384],{"type":170,"tag":239,"props":343,"children":344},{"style":270},[345],{"type":175,"value":346},"app",{"type":170,"tag":239,"props":348,"children":350},{"style":349},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[351],{"type":175,"value":352},".",{"type":170,"tag":239,"props":354,"children":355},{"style":264},[356],{"type":175,"value":357},"use",{"type":170,"tag":239,"props":359,"children":360},{"style":270},[361],{"type":175,"value":273},{"type":170,"tag":239,"props":363,"children":364},{"style":264},[365],{"type":175,"value":366},"require",{"type":170,"tag":239,"props":368,"children":369},{"style":270},[370],{"type":175,"value":273},{"type":170,"tag":239,"props":372,"children":373},{"style":276},[374],{"type":175,"value":279},{"type":170,"tag":239,"props":376,"children":377},{"style":282},[378],{"type":175,"value":379},"helmet",{"type":170,"tag":239,"props":381,"children":382},{"style":276},[383],{"type":175,"value":279},{"type":170,"tag":239,"props":385,"children":386},{"style":270},[387],{"type":175,"value":388},")())\n",{"type":170,"tag":171,"props":390,"children":391},{},[392],{"type":175,"value":393},"新的响应请求的 Headers 会变成这样：",{"type":170,"tag":228,"props":395,"children":397},{"code":396},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[398],{"type":170,"tag":235,"props":399,"children":400},{"__ignoreMap":163},[401],{"type":175,"value":396},{"type":170,"tag":171,"props":403,"children":404},{},[405],{"type":175,"value":406},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":170,"tag":408,"props":409,"children":411},"h2",{"id":410},"_11-种安全策略",[412],{"type":175,"value":413},"11 种安全策略",{"type":170,"tag":171,"props":415,"children":416},{},[417,419,425,436],{"type":175,"value":418},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":170,"tag":235,"props":420,"children":422},{"className":421},[],[423],{"type":175,"value":424},"OWASP Secure Headers",{"type":170,"tag":178,"props":426,"children":427},{},[428],{"type":170,"tag":182,"props":429,"children":433},{"href":430,"ariaDescribedBy":431,"dataFootnoteRef":163,"id":432},"#user-content-fn-shp",[186],"user-content-fnref-shp",[434],{"type":175,"value":435},"4",{"type":175,"value":437}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":170,"tag":439,"props":440,"children":442},"h3",{"id":441},"移除-x-powered-by",[443],{"type":175,"value":444},"移除 X-Powered-By",{"type":170,"tag":228,"props":446,"children":448},{"code":447,"language":231,"meta":163,"className":232,"style":163},"response.removeHeader('X-Powered-By')\n",[449],{"type":170,"tag":235,"props":450,"children":451},{"__ignoreMap":163},[452],{"type":170,"tag":239,"props":453,"children":454},{"class":241,"line":242},[455,460,464,469,473,477,482,486],{"type":170,"tag":239,"props":456,"children":457},{"style":270},[458],{"type":175,"value":459},"response",{"type":170,"tag":239,"props":461,"children":462},{"style":349},[463],{"type":175,"value":352},{"type":170,"tag":239,"props":465,"children":466},{"style":264},[467],{"type":175,"value":468},"removeHeader",{"type":170,"tag":239,"props":470,"children":471},{"style":270},[472],{"type":175,"value":273},{"type":170,"tag":239,"props":474,"children":475},{"style":276},[476],{"type":175,"value":279},{"type":170,"tag":239,"props":478,"children":479},{"style":282},[480],{"type":175,"value":481},"X-Powered-By",{"type":170,"tag":239,"props":483,"children":484},{"style":276},[485],{"type":175,"value":279},{"type":170,"tag":239,"props":487,"children":488},{"style":270},[489],{"type":175,"value":294},{"type":170,"tag":171,"props":491,"children":492},{},[493,495,500],{"type":175,"value":494},"一些框架会在请求头中添加 ",{"type":170,"tag":235,"props":496,"children":498},{"className":497},[],[499],{"type":175,"value":481},{"type":175,"value":501},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":170,"tag":171,"props":503,"children":504},{},[505,507,512],{"type":175,"value":506},"由于 Express 默认会给响应头增加 ",{"type":170,"tag":235,"props":508,"children":510},{"className":509},[],[511],{"type":175,"value":481},{"type":175,"value":513},"，所以 Helmet 直接把它移除了。",{"type":170,"tag":439,"props":515,"children":517},{"id":516},"移除-mime-嗅探",[518],{"type":175,"value":519},"移除 MIME 嗅探",{"type":170,"tag":228,"props":521,"children":523},{"code":522,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[524],{"type":170,"tag":235,"props":525,"children":526},{"__ignoreMap":163},[527],{"type":170,"tag":239,"props":528,"children":529},{"class":241,"line":242},[530,534,538,543,547,551,556,560,565,570,575,579],{"type":170,"tag":239,"props":531,"children":532},{"style":270},[533],{"type":175,"value":459},{"type":170,"tag":239,"props":535,"children":536},{"style":349},[537],{"type":175,"value":352},{"type":170,"tag":239,"props":539,"children":540},{"style":264},[541],{"type":175,"value":542},"setHeader",{"type":170,"tag":239,"props":544,"children":545},{"style":270},[546],{"type":175,"value":273},{"type":170,"tag":239,"props":548,"children":549},{"style":276},[550],{"type":175,"value":279},{"type":170,"tag":239,"props":552,"children":553},{"style":282},[554],{"type":175,"value":555},"X-Content-Type-Options",{"type":170,"tag":239,"props":557,"children":558},{"style":276},[559],{"type":175,"value":279},{"type":170,"tag":239,"props":561,"children":562},{"style":349},[563],{"type":175,"value":564},",",{"type":170,"tag":239,"props":566,"children":567},{"style":276},[568],{"type":175,"value":569}," '",{"type":170,"tag":239,"props":571,"children":572},{"style":282},[573],{"type":175,"value":574},"nosniff",{"type":170,"tag":239,"props":576,"children":577},{"style":276},[578],{"type":175,"value":279},{"type":170,"tag":239,"props":580,"children":581},{"style":270},[582],{"type":175,"value":294},{"type":170,"tag":171,"props":584,"children":585},{},[586,588,594,596,602],{"type":175,"value":587},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":170,"tag":235,"props":589,"children":591},{"className":590},[],[592],{"type":175,"value":593},"Content-Type",{"type":175,"value":595},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":170,"tag":235,"props":597,"children":599},{"className":598},[],[600],{"type":175,"value":601},"X-Content-Type-Options = nosniff",{"type":175,"value":603}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":170,"tag":439,"props":605,"children":607},{"id":606},"移除-x-xss-protection",[608],{"type":175,"value":609},"移除 X-XSS-Protection",{"type":170,"tag":228,"props":611,"children":613},{"code":612,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-XSS-Protection', '0')\n",[614],{"type":170,"tag":235,"props":615,"children":616},{"__ignoreMap":163},[617],{"type":170,"tag":239,"props":618,"children":619},{"class":241,"line":242},[620,624,628,632,636,640,645,649,653,657,662,666],{"type":170,"tag":239,"props":621,"children":622},{"style":270},[623],{"type":175,"value":459},{"type":170,"tag":239,"props":625,"children":626},{"style":349},[627],{"type":175,"value":352},{"type":170,"tag":239,"props":629,"children":630},{"style":264},[631],{"type":175,"value":542},{"type":170,"tag":239,"props":633,"children":634},{"style":270},[635],{"type":175,"value":273},{"type":170,"tag":239,"props":637,"children":638},{"style":276},[639],{"type":175,"value":279},{"type":170,"tag":239,"props":641,"children":642},{"style":282},[643],{"type":175,"value":644},"X-XSS-Protection",{"type":170,"tag":239,"props":646,"children":647},{"style":276},[648],{"type":175,"value":279},{"type":170,"tag":239,"props":650,"children":651},{"style":349},[652],{"type":175,"value":564},{"type":170,"tag":239,"props":654,"children":655},{"style":276},[656],{"type":175,"value":569},{"type":170,"tag":239,"props":658,"children":659},{"style":282},[660],{"type":175,"value":661},"0",{"type":170,"tag":239,"props":663,"children":664},{"style":276},[665],{"type":175,"value":279},{"type":170,"tag":239,"props":667,"children":668},{"style":270},[669],{"type":175,"value":294},{"type":170,"tag":171,"props":671,"children":672},{},[673,675,680],{"type":175,"value":674},"不是应该打开 ",{"type":170,"tag":235,"props":676,"children":678},{"className":677},[],[679],{"type":175,"value":644},{"type":175,"value":681},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":170,"tag":171,"props":683,"children":684},{},[685,687,693,695,706,708,713,715,721,723,734,736,741,743,748],{"type":175,"value":686},"这得追溯回去年的 Chrome 移除 ",{"type":170,"tag":235,"props":688,"children":690},{"className":689},[],[691],{"type":175,"value":692},"XSS Auditor",{"type":175,"value":694},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":170,"tag":178,"props":696,"children":697},{},[698],{"type":170,"tag":182,"props":699,"children":703},{"href":700,"ariaDescribedBy":701,"dataFootnoteRef":163,"id":702},"#user-content-fn-xss-auditor",[186],"user-content-fnref-xss-auditor",[704],{"type":175,"value":705},"5",{"type":175,"value":707},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":170,"tag":235,"props":709,"children":711},{"className":710},[],[712],{"type":175,"value":692},{"type":175,"value":714},"，并开始使用 ",{"type":170,"tag":235,"props":716,"children":718},{"className":717},[],[719],{"type":175,"value":720},"CSP",{"type":175,"value":722}," 等现代标准（更现代的标准）",{"type":170,"tag":178,"props":724,"children":725},{},[726],{"type":170,"tag":182,"props":727,"children":731},{"href":728,"ariaDescribedBy":729,"dataFootnoteRef":163,"id":730},"#user-content-fn-delete-xss-auditor",[186],"user-content-fnref-delete-xss-auditor",[732],{"type":175,"value":733},"6",{"type":175,"value":735},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":170,"tag":235,"props":737,"children":739},{"className":738},[],[740],{"type":175,"value":644},{"type":175,"value":742}," 这个响应头是让浏览器不要再用 ",{"type":170,"tag":235,"props":744,"children":746},{"className":745},[],[747],{"type":175,"value":692},{"type":175,"value":749},"。",{"type":170,"tag":171,"props":751,"children":752},{},[753,755,763],{"type":175,"value":754},"见：",{"type":170,"tag":182,"props":756,"children":760},{"href":757,"rel":758},"https://github.com/OWASP/CheatSheetSeries/issues/376",[759],"nofollow",[761],{"type":175,"value":762},"#376",{"type":175,"value":749},{"type":170,"tag":439,"props":765,"children":767},{"id":766},"禁止页面被嵌套",[768],{"type":175,"value":766},{"type":170,"tag":228,"props":770,"children":772},{"code":771,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[773],{"type":170,"tag":235,"props":774,"children":775},{"__ignoreMap":163},[776],{"type":170,"tag":239,"props":777,"children":778},{"class":241,"line":242},[779,783,787,791,795,799,804,808,812,816,821,825],{"type":170,"tag":239,"props":780,"children":781},{"style":270},[782],{"type":175,"value":459},{"type":170,"tag":239,"props":784,"children":785},{"style":349},[786],{"type":175,"value":352},{"type":170,"tag":239,"props":788,"children":789},{"style":264},[790],{"type":175,"value":542},{"type":170,"tag":239,"props":792,"children":793},{"style":270},[794],{"type":175,"value":273},{"type":170,"tag":239,"props":796,"children":797},{"style":276},[798],{"type":175,"value":279},{"type":170,"tag":239,"props":800,"children":801},{"style":282},[802],{"type":175,"value":803},"X-Frame-Options",{"type":170,"tag":239,"props":805,"children":806},{"style":276},[807],{"type":175,"value":279},{"type":170,"tag":239,"props":809,"children":810},{"style":349},[811],{"type":175,"value":564},{"type":170,"tag":239,"props":813,"children":814},{"style":276},[815],{"type":175,"value":569},{"type":170,"tag":239,"props":817,"children":818},{"style":282},[819],{"type":175,"value":820},"SAMEORIGIN",{"type":170,"tag":239,"props":822,"children":823},{"style":276},[824],{"type":175,"value":279},{"type":170,"tag":239,"props":826,"children":827},{"style":270},[828],{"type":175,"value":294},{"type":170,"tag":171,"props":830,"children":831},{},[832,837,839,844,846,852],{"type":170,"tag":235,"props":833,"children":835},{"className":834},[],[836],{"type":175,"value":803},{"type":175,"value":838}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":170,"tag":235,"props":840,"children":842},{"className":841},[],[843],{"type":175,"value":803},{"type":175,"value":845}," 为 ",{"type":170,"tag":235,"props":847,"children":849},{"className":848},[],[850],{"type":175,"value":851},"SameOrigin",{"type":175,"value":853},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":170,"tag":171,"props":855,"children":856},{},[857,859,865,867,872,873,879,881,886],{"type":175,"value":858},"本来它的值有三种选择，",{"type":170,"tag":235,"props":860,"children":862},{"className":861},[],[863],{"type":175,"value":864},"Deny",{"type":175,"value":866},"、",{"type":170,"tag":235,"props":868,"children":870},{"className":869},[],[871],{"type":175,"value":851},{"type":175,"value":866},{"type":170,"tag":235,"props":874,"children":876},{"className":875},[],[877],{"type":175,"value":878},"AllowFrom",{"type":175,"value":880},"。但 ",{"type":170,"tag":235,"props":882,"children":884},{"className":883},[],[885],{"type":175,"value":878},{"type":175,"value":887}," 因为其兼容性原因，被 Helmet 弃用：",{"type":170,"tag":171,"props":889,"children":890},{},[891],{"type":170,"tag":892,"props":893,"children":896},"img",{"alt":894,"src":895},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":170,"tag":171,"props":898,"children":899},{},[900,902,907,909,915,917,922],{"type":175,"value":901},"此外，可以在 ",{"type":170,"tag":235,"props":903,"children":905},{"className":904},[],[906],{"type":175,"value":720},{"type":175,"value":908}," 中设置 ",{"type":170,"tag":235,"props":910,"children":912},{"className":911},[],[913],{"type":175,"value":914},"frame-ancestors",{"type":175,"value":916}," 指令来替代 ",{"type":170,"tag":235,"props":918,"children":920},{"className":919},[],[921],{"type":175,"value":803},{"type":175,"value":749},{"type":170,"tag":439,"props":924,"children":926},{"id":925},"移除-referer",[927],{"type":175,"value":928},"移除 Referer",{"type":170,"tag":171,"props":930,"children":931},{},[932,938,940,946,957,959,964],{"type":170,"tag":235,"props":933,"children":935},{"className":934},[],[936],{"type":175,"value":937},"Referrer-Policy",{"type":175,"value":939}," 可以控制浏览器请求头的 ",{"type":170,"tag":235,"props":941,"children":943},{"className":942},[],[944],{"type":175,"value":945},"Referer",{"type":170,"tag":178,"props":947,"children":948},{},[949],{"type":170,"tag":182,"props":950,"children":954},{"href":951,"ariaDescribedBy":952,"dataFootnoteRef":163,"id":953},"#user-content-fn-referer",[186],"user-content-fnref-referer",[955],{"type":175,"value":956},"7",{"type":175,"value":958}," 的显示方式。移除 ",{"type":170,"tag":235,"props":960,"children":962},{"className":961},[],[963],{"type":175,"value":945},{"type":175,"value":965}," 能保护用户的访问记录，防止隐私泄漏。",{"type":170,"tag":228,"props":967,"children":969},{"code":968,"language":231,"meta":163,"className":232,"style":163},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[970],{"type":170,"tag":235,"props":971,"children":972},{"__ignoreMap":163},[973,1004,1013,1035,1043,1063,1072,1093,1102,1123,1132,1153,1162,1183,1192,1213,1222,1243,1252,1261,1270,1331,1405,1436,1449,1458,1501,1510,1545,1578,1632,1677,1690,1699],{"type":170,"tag":239,"props":974,"children":975},{"class":241,"line":242},[976,980,985,989,994,999],{"type":170,"tag":239,"props":977,"children":978},{"style":246},[979],{"type":175,"value":249},{"type":170,"tag":239,"props":981,"children":982},{"style":252},[983],{"type":175,"value":984}," ALLOWED_TOKENS",{"type":170,"tag":239,"props":986,"children":987},{"style":258},[988],{"type":175,"value":261},{"type":170,"tag":239,"props":990,"children":991},{"style":258},[992],{"type":175,"value":993}," new",{"type":170,"tag":239,"props":995,"children":996},{"style":264},[997],{"type":175,"value":998}," Set",{"type":170,"tag":239,"props":1000,"children":1001},{"style":270},[1002],{"type":175,"value":1003},"([\n",{"type":170,"tag":239,"props":1005,"children":1006},{"class":241,"line":297},[1007],{"type":170,"tag":239,"props":1008,"children":1010},{"style":1009},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1011],{"type":175,"value":1012},"  // 任何时候都不携带 Referer\n",{"type":170,"tag":239,"props":1014,"children":1015},{"class":241,"line":306},[1016,1021,1026,1030],{"type":170,"tag":239,"props":1017,"children":1018},{"style":276},[1019],{"type":175,"value":1020},"  '",{"type":170,"tag":239,"props":1022,"children":1023},{"style":282},[1024],{"type":175,"value":1025},"no-referrer",{"type":170,"tag":239,"props":1027,"children":1028},{"style":276},[1029],{"type":175,"value":279},{"type":170,"tag":239,"props":1031,"children":1032},{"style":349},[1033],{"type":175,"value":1034},",\n",{"type":170,"tag":239,"props":1036,"children":1037},{"class":241,"line":332},[1038],{"type":170,"tag":239,"props":1039,"children":1040},{"style":1009},[1041],{"type":175,"value":1042},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":170,"tag":239,"props":1044,"children":1045},{"class":241,"line":340},[1046,1050,1055,1059],{"type":170,"tag":239,"props":1047,"children":1048},{"style":276},[1049],{"type":175,"value":1020},{"type":170,"tag":239,"props":1051,"children":1052},{"style":282},[1053],{"type":175,"value":1054},"no-referrer-when-downgrade",{"type":170,"tag":239,"props":1056,"children":1057},{"style":276},[1058],{"type":175,"value":279},{"type":170,"tag":239,"props":1060,"children":1061},{"style":349},[1062],{"type":175,"value":1034},{"type":170,"tag":239,"props":1064,"children":1066},{"class":241,"line":1065},6,[1067],{"type":170,"tag":239,"props":1068,"children":1069},{"style":1009},[1070],{"type":175,"value":1071},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":170,"tag":239,"props":1073,"children":1075},{"class":241,"line":1074},7,[1076,1080,1085,1089],{"type":170,"tag":239,"props":1077,"children":1078},{"style":276},[1079],{"type":175,"value":1020},{"type":170,"tag":239,"props":1081,"children":1082},{"style":282},[1083],{"type":175,"value":1084},"same-origin",{"type":170,"tag":239,"props":1086,"children":1087},{"style":276},[1088],{"type":175,"value":279},{"type":170,"tag":239,"props":1090,"children":1091},{"style":349},[1092],{"type":175,"value":1034},{"type":170,"tag":239,"props":1094,"children":1096},{"class":241,"line":1095},8,[1097],{"type":170,"tag":239,"props":1098,"children":1099},{"style":1009},[1100],{"type":175,"value":1101},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":170,"tag":239,"props":1103,"children":1105},{"class":241,"line":1104},9,[1106,1110,1115,1119],{"type":170,"tag":239,"props":1107,"children":1108},{"style":276},[1109],{"type":175,"value":1020},{"type":170,"tag":239,"props":1111,"children":1112},{"style":282},[1113],{"type":175,"value":1114},"origin",{"type":170,"tag":239,"props":1116,"children":1117},{"style":276},[1118],{"type":175,"value":279},{"type":170,"tag":239,"props":1120,"children":1121},{"style":349},[1122],{"type":175,"value":1034},{"type":170,"tag":239,"props":1124,"children":1126},{"class":241,"line":1125},10,[1127],{"type":170,"tag":239,"props":1128,"children":1129},{"style":1009},[1130],{"type":175,"value":1131},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":170,"tag":239,"props":1133,"children":1135},{"class":241,"line":1134},11,[1136,1140,1145,1149],{"type":170,"tag":239,"props":1137,"children":1138},{"style":276},[1139],{"type":175,"value":1020},{"type":170,"tag":239,"props":1141,"children":1142},{"style":282},[1143],{"type":175,"value":1144},"strict-origin",{"type":170,"tag":239,"props":1146,"children":1147},{"style":276},[1148],{"type":175,"value":279},{"type":170,"tag":239,"props":1150,"children":1151},{"style":349},[1152],{"type":175,"value":1034},{"type":170,"tag":239,"props":1154,"children":1156},{"class":241,"line":1155},12,[1157],{"type":170,"tag":239,"props":1158,"children":1159},{"style":1009},[1160],{"type":175,"value":1161},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":170,"tag":239,"props":1163,"children":1165},{"class":241,"line":1164},13,[1166,1170,1175,1179],{"type":170,"tag":239,"props":1167,"children":1168},{"style":276},[1169],{"type":175,"value":1020},{"type":170,"tag":239,"props":1171,"children":1172},{"style":282},[1173],{"type":175,"value":1174},"origin-when-cross-origin",{"type":170,"tag":239,"props":1176,"children":1177},{"style":276},[1178],{"type":175,"value":279},{"type":170,"tag":239,"props":1180,"children":1181},{"style":349},[1182],{"type":175,"value":1034},{"type":170,"tag":239,"props":1184,"children":1186},{"class":241,"line":1185},14,[1187],{"type":170,"tag":239,"props":1188,"children":1189},{"style":1009},[1190],{"type":175,"value":1191},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":170,"tag":239,"props":1193,"children":1195},{"class":241,"line":1194},15,[1196,1200,1205,1209],{"type":170,"tag":239,"props":1197,"children":1198},{"style":276},[1199],{"type":175,"value":1020},{"type":170,"tag":239,"props":1201,"children":1202},{"style":282},[1203],{"type":175,"value":1204},"strict-origin-when-cross-origin",{"type":170,"tag":239,"props":1206,"children":1207},{"style":276},[1208],{"type":175,"value":279},{"type":170,"tag":239,"props":1210,"children":1211},{"style":349},[1212],{"type":175,"value":1034},{"type":170,"tag":239,"props":1214,"children":1216},{"class":241,"line":1215},16,[1217],{"type":170,"tag":239,"props":1218,"children":1219},{"style":1009},[1220],{"type":175,"value":1221},"  // 所有请求都携带上完整的 Referer\n",{"type":170,"tag":239,"props":1223,"children":1225},{"class":241,"line":1224},17,[1226,1230,1235,1239],{"type":170,"tag":239,"props":1227,"children":1228},{"style":276},[1229],{"type":175,"value":1020},{"type":170,"tag":239,"props":1231,"children":1232},{"style":282},[1233],{"type":175,"value":1234},"unsafe-url",{"type":170,"tag":239,"props":1236,"children":1237},{"style":276},[1238],{"type":175,"value":279},{"type":170,"tag":239,"props":1240,"children":1241},{"style":349},[1242],{"type":175,"value":1034},{"type":170,"tag":239,"props":1244,"children":1246},{"class":241,"line":1245},18,[1247],{"type":170,"tag":239,"props":1248,"children":1249},{"style":1009},[1250],{"type":175,"value":1251},"  // 无策略\n",{"type":170,"tag":239,"props":1253,"children":1255},{"class":241,"line":1254},19,[1256],{"type":170,"tag":239,"props":1257,"children":1258},{"style":276},[1259],{"type":175,"value":1260},"  ''\n",{"type":170,"tag":239,"props":1262,"children":1264},{"class":241,"line":1263},20,[1265],{"type":170,"tag":239,"props":1266,"children":1267},{"style":270},[1268],{"type":175,"value":1269},"])\n",{"type":170,"tag":239,"props":1271,"children":1273},{"class":241,"line":1272},21,[1274,1279,1284,1289,1295,1299,1304,1308,1312,1316,1321,1326],{"type":170,"tag":239,"props":1275,"children":1276},{"style":246},[1277],{"type":175,"value":1278},"function",{"type":170,"tag":239,"props":1280,"children":1281},{"style":264},[1282],{"type":175,"value":1283}," getHeaderValueFromOptions",{"type":170,"tag":239,"props":1285,"children":1286},{"style":349},[1287],{"type":175,"value":1288},"({",{"type":170,"tag":239,"props":1290,"children":1292},{"style":1291},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1293],{"type":175,"value":1294}," policy",{"type":170,"tag":239,"props":1296,"children":1297},{"style":258},[1298],{"type":175,"value":261},{"type":170,"tag":239,"props":1300,"children":1301},{"style":270},[1302],{"type":175,"value":1303}," [",{"type":170,"tag":239,"props":1305,"children":1306},{"style":276},[1307],{"type":175,"value":279},{"type":170,"tag":239,"props":1309,"children":1310},{"style":282},[1311],{"type":175,"value":1025},{"type":170,"tag":239,"props":1313,"children":1314},{"style":276},[1315],{"type":175,"value":279},{"type":170,"tag":239,"props":1317,"children":1318},{"style":270},[1319],{"type":175,"value":1320},"] ",{"type":170,"tag":239,"props":1322,"children":1323},{"style":349},[1324],{"type":175,"value":1325},"})",{"type":170,"tag":239,"props":1327,"children":1328},{"style":349},[1329],{"type":175,"value":1330}," {\n",{"type":170,"tag":239,"props":1332,"children":1334},{"class":241,"line":1333},22,[1335,1340,1345,1349,1354,1358,1363,1367,1372,1376,1381,1386,1391,1395,1400],{"type":170,"tag":239,"props":1336,"children":1337},{"style":246},[1338],{"type":175,"value":1339},"  const",{"type":170,"tag":239,"props":1341,"children":1342},{"style":252},[1343],{"type":175,"value":1344}," tokens",{"type":170,"tag":239,"props":1346,"children":1347},{"style":258},[1348],{"type":175,"value":261},{"type":170,"tag":239,"props":1350,"children":1351},{"style":258},[1352],{"type":175,"value":1353}," typeof",{"type":170,"tag":239,"props":1355,"children":1356},{"style":270},[1357],{"type":175,"value":1294},{"type":170,"tag":239,"props":1359,"children":1360},{"style":258},[1361],{"type":175,"value":1362}," ===",{"type":170,"tag":239,"props":1364,"children":1365},{"style":276},[1366],{"type":175,"value":569},{"type":170,"tag":239,"props":1368,"children":1369},{"style":282},[1370],{"type":175,"value":1371},"string",{"type":170,"tag":239,"props":1373,"children":1374},{"style":276},[1375],{"type":175,"value":279},{"type":170,"tag":239,"props":1377,"children":1378},{"style":258},[1379],{"type":175,"value":1380}," ?",{"type":170,"tag":239,"props":1382,"children":1384},{"style":1383},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1385],{"type":175,"value":1303},{"type":170,"tag":239,"props":1387,"children":1388},{"style":270},[1389],{"type":175,"value":1390},"policy",{"type":170,"tag":239,"props":1392,"children":1393},{"style":1383},[1394],{"type":175,"value":1320},{"type":170,"tag":239,"props":1396,"children":1397},{"style":258},[1398],{"type":175,"value":1399},":",{"type":170,"tag":239,"props":1401,"children":1402},{"style":270},[1403],{"type":175,"value":1404}," policy\n",{"type":170,"tag":239,"props":1406,"children":1408},{"class":241,"line":1407},23,[1409,1414,1418,1423,1427,1432],{"type":170,"tag":239,"props":1410,"children":1411},{"style":270},[1412],{"type":175,"value":1413},"    tokensSeen",{"type":170,"tag":239,"props":1415,"children":1416},{"style":349},[1417],{"type":175,"value":352},{"type":170,"tag":239,"props":1419,"children":1420},{"style":264},[1421],{"type":175,"value":1422},"add",{"type":170,"tag":239,"props":1424,"children":1425},{"style":1383},[1426],{"type":175,"value":273},{"type":170,"tag":239,"props":1428,"children":1429},{"style":270},[1430],{"type":175,"value":1431},"token",{"type":170,"tag":239,"props":1433,"children":1434},{"style":1383},[1435],{"type":175,"value":294},{"type":170,"tag":239,"props":1437,"children":1439},{"class":241,"line":1438},24,[1440,1445],{"type":170,"tag":239,"props":1441,"children":1442},{"style":349},[1443],{"type":175,"value":1444},"  }",{"type":170,"tag":239,"props":1446,"children":1447},{"style":270},[1448],{"type":175,"value":294},{"type":170,"tag":239,"props":1450,"children":1452},{"class":241,"line":1451},25,[1453],{"type":170,"tag":239,"props":1454,"children":1455},{"style":1009},[1456],{"type":175,"value":1457},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":170,"tag":239,"props":1459,"children":1461},{"class":241,"line":1460},26,[1462,1468,1472,1476,1481,1485,1489,1493,1497],{"type":170,"tag":239,"props":1463,"children":1465},{"style":1464},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1466],{"type":175,"value":1467},"  return",{"type":170,"tag":239,"props":1469,"children":1470},{"style":270},[1471],{"type":175,"value":1344},{"type":170,"tag":239,"props":1473,"children":1474},{"style":349},[1475],{"type":175,"value":352},{"type":170,"tag":239,"props":1477,"children":1478},{"style":264},[1479],{"type":175,"value":1480},"join",{"type":170,"tag":239,"props":1482,"children":1483},{"style":270},[1484],{"type":175,"value":273},{"type":170,"tag":239,"props":1486,"children":1487},{"style":276},[1488],{"type":175,"value":279},{"type":170,"tag":239,"props":1490,"children":1491},{"style":282},[1492],{"type":175,"value":564},{"type":170,"tag":239,"props":1494,"children":1495},{"style":276},[1496],{"type":175,"value":279},{"type":170,"tag":239,"props":1498,"children":1499},{"style":270},[1500],{"type":175,"value":294},{"type":170,"tag":239,"props":1502,"children":1504},{"class":241,"line":1503},27,[1505],{"type":170,"tag":239,"props":1506,"children":1507},{"style":270},[1508],{"type":175,"value":1509},"}\n",{"type":170,"tag":239,"props":1511,"children":1513},{"class":241,"line":1512},28,[1514,1518,1523,1527,1532,1536,1541],{"type":170,"tag":239,"props":1515,"children":1516},{"style":246},[1517],{"type":175,"value":1278},{"type":170,"tag":239,"props":1519,"children":1520},{"style":264},[1521],{"type":175,"value":1522}," referrerPolicy",{"type":170,"tag":239,"props":1524,"children":1525},{"style":349},[1526],{"type":175,"value":273},{"type":170,"tag":239,"props":1528,"children":1529},{"style":1291},[1530],{"type":175,"value":1531},"options",{"type":170,"tag":239,"props":1533,"children":1534},{"style":258},[1535],{"type":175,"value":261},{"type":170,"tag":239,"props":1537,"children":1538},{"style":349},[1539],{"type":175,"value":1540}," {})",{"type":170,"tag":239,"props":1542,"children":1543},{"style":349},[1544],{"type":175,"value":1330},{"type":170,"tag":239,"props":1546,"children":1548},{"class":241,"line":1547},29,[1549,1553,1558,1562,1566,1570,1574],{"type":170,"tag":239,"props":1550,"children":1551},{"style":246},[1552],{"type":175,"value":1339},{"type":170,"tag":239,"props":1554,"children":1555},{"style":252},[1556],{"type":175,"value":1557}," headerValue",{"type":170,"tag":239,"props":1559,"children":1560},{"style":258},[1561],{"type":175,"value":261},{"type":170,"tag":239,"props":1563,"children":1564},{"style":264},[1565],{"type":175,"value":1283},{"type":170,"tag":239,"props":1567,"children":1568},{"style":1383},[1569],{"type":175,"value":273},{"type":170,"tag":239,"props":1571,"children":1572},{"style":270},[1573],{"type":175,"value":1531},{"type":170,"tag":239,"props":1575,"children":1576},{"style":1383},[1577],{"type":175,"value":294},{"type":170,"tag":239,"props":1579,"children":1581},{"class":241,"line":1580},30,[1582,1586,1591,1596,1600,1605,1609,1614,1618,1623,1628],{"type":170,"tag":239,"props":1583,"children":1584},{"style":1464},[1585],{"type":175,"value":1467},{"type":170,"tag":239,"props":1587,"children":1588},{"style":246},[1589],{"type":175,"value":1590}," function",{"type":170,"tag":239,"props":1592,"children":1593},{"style":264},[1594],{"type":175,"value":1595}," referrerPolicyMiddleware",{"type":170,"tag":239,"props":1597,"children":1598},{"style":349},[1599],{"type":175,"value":273},{"type":170,"tag":239,"props":1601,"children":1602},{"style":1291},[1603],{"type":175,"value":1604},"_req",{"type":170,"tag":239,"props":1606,"children":1607},{"style":349},[1608],{"type":175,"value":564},{"type":170,"tag":239,"props":1610,"children":1611},{"style":1291},[1612],{"type":175,"value":1613}," res",{"type":170,"tag":239,"props":1615,"children":1616},{"style":349},[1617],{"type":175,"value":564},{"type":170,"tag":239,"props":1619,"children":1620},{"style":1291},[1621],{"type":175,"value":1622}," next",{"type":170,"tag":239,"props":1624,"children":1625},{"style":349},[1626],{"type":175,"value":1627},")",{"type":170,"tag":239,"props":1629,"children":1630},{"style":349},[1631],{"type":175,"value":1330},{"type":170,"tag":239,"props":1633,"children":1635},{"class":241,"line":1634},31,[1636,1641,1645,1649,1653,1657,1661,1665,1669,1673],{"type":170,"tag":239,"props":1637,"children":1638},{"style":270},[1639],{"type":175,"value":1640},"    res",{"type":170,"tag":239,"props":1642,"children":1643},{"style":349},[1644],{"type":175,"value":352},{"type":170,"tag":239,"props":1646,"children":1647},{"style":264},[1648],{"type":175,"value":542},{"type":170,"tag":239,"props":1650,"children":1651},{"style":1383},[1652],{"type":175,"value":273},{"type":170,"tag":239,"props":1654,"children":1655},{"style":276},[1656],{"type":175,"value":279},{"type":170,"tag":239,"props":1658,"children":1659},{"style":282},[1660],{"type":175,"value":937},{"type":170,"tag":239,"props":1662,"children":1663},{"style":276},[1664],{"type":175,"value":279},{"type":170,"tag":239,"props":1666,"children":1667},{"style":349},[1668],{"type":175,"value":564},{"type":170,"tag":239,"props":1670,"children":1671},{"style":270},[1672],{"type":175,"value":1557},{"type":170,"tag":239,"props":1674,"children":1675},{"style":1383},[1676],{"type":175,"value":294},{"type":170,"tag":239,"props":1678,"children":1680},{"class":241,"line":1679},32,[1681,1686],{"type":170,"tag":239,"props":1682,"children":1683},{"style":264},[1684],{"type":175,"value":1685},"    next",{"type":170,"tag":239,"props":1687,"children":1688},{"style":1383},[1689],{"type":175,"value":329},{"type":170,"tag":239,"props":1691,"children":1693},{"class":241,"line":1692},33,[1694],{"type":170,"tag":239,"props":1695,"children":1696},{"style":349},[1697],{"type":175,"value":1698},"  }\n",{"type":170,"tag":239,"props":1700,"children":1702},{"class":241,"line":1701},34,[1703],{"type":170,"tag":239,"props":1704,"children":1705},{"style":349},[1706],{"type":175,"value":1509},{"type":170,"tag":171,"props":1708,"children":1709},{},[1710,1712,1718,1720,1725],{"type":175,"value":1711},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":170,"tag":235,"props":1713,"children":1715},{"className":1714},[],[1716],{"type":175,"value":1717},"Referrer Policy",{"type":175,"value":1719},"。Meta 标签设置的 ",{"type":170,"tag":235,"props":1721,"children":1723},{"className":1722},[],[1724],{"type":175,"value":1717},{"type":175,"value":1726}," 对整个页面都有效果（但优先级最低）。",{"type":170,"tag":228,"props":1728,"children":1732},{"code":1729,"language":1730,"meta":163,"className":1731,"style":163},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1733],{"type":170,"tag":235,"props":1734,"children":1735},{"__ignoreMap":163},[1736,1801,1869],{"type":170,"tag":239,"props":1737,"children":1738},{"class":241,"line":242},[1739,1744,1750,1756,1761,1766,1771,1775,1780,1784,1788,1792,1796],{"type":170,"tag":239,"props":1740,"children":1741},{"style":349},[1742],{"type":175,"value":1743},"\u003C",{"type":170,"tag":239,"props":1745,"children":1747},{"style":1746},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1748],{"type":175,"value":1749},"meta",{"type":170,"tag":239,"props":1751,"children":1753},{"style":1752},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1754],{"type":175,"value":1755}," name",{"type":170,"tag":239,"props":1757,"children":1758},{"style":349},[1759],{"type":175,"value":1760},"=",{"type":170,"tag":239,"props":1762,"children":1763},{"style":276},[1764],{"type":175,"value":1765},"\"",{"type":170,"tag":239,"props":1767,"children":1768},{"style":282},[1769],{"type":175,"value":1770},"referrer",{"type":170,"tag":239,"props":1772,"children":1773},{"style":276},[1774],{"type":175,"value":1765},{"type":170,"tag":239,"props":1776,"children":1777},{"style":1752},[1778],{"type":175,"value":1779}," content",{"type":170,"tag":239,"props":1781,"children":1782},{"style":349},[1783],{"type":175,"value":1760},{"type":170,"tag":239,"props":1785,"children":1786},{"style":276},[1787],{"type":175,"value":1765},{"type":170,"tag":239,"props":1789,"children":1790},{"style":282},[1791],{"type":175,"value":1114},{"type":170,"tag":239,"props":1793,"children":1794},{"style":276},[1795],{"type":175,"value":1765},{"type":170,"tag":239,"props":1797,"children":1798},{"style":349},[1799],{"type":175,"value":1800}," />\n",{"type":170,"tag":239,"props":1802,"children":1803},{"class":241,"line":297},[1804,1808,1812,1817,1821,1825,1830,1834,1839,1843,1847,1851,1855,1860,1864],{"type":170,"tag":239,"props":1805,"children":1806},{"style":349},[1807],{"type":175,"value":1743},{"type":170,"tag":239,"props":1809,"children":1810},{"style":1746},[1811],{"type":175,"value":182},{"type":170,"tag":239,"props":1813,"children":1814},{"style":1752},[1815],{"type":175,"value":1816}," href",{"type":170,"tag":239,"props":1818,"children":1819},{"style":349},[1820],{"type":175,"value":1760},{"type":170,"tag":239,"props":1822,"children":1823},{"style":276},[1824],{"type":175,"value":1765},{"type":170,"tag":239,"props":1826,"children":1827},{"style":282},[1828],{"type":175,"value":1829},"http://example.com",{"type":170,"tag":239,"props":1831,"children":1832},{"style":276},[1833],{"type":175,"value":1765},{"type":170,"tag":239,"props":1835,"children":1836},{"style":1752},[1837],{"type":175,"value":1838}," referrerpolicy",{"type":170,"tag":239,"props":1840,"children":1841},{"style":349},[1842],{"type":175,"value":1760},{"type":170,"tag":239,"props":1844,"children":1845},{"style":276},[1846],{"type":175,"value":1765},{"type":170,"tag":239,"props":1848,"children":1849},{"style":282},[1850],{"type":175,"value":1114},{"type":170,"tag":239,"props":1852,"children":1853},{"style":276},[1854],{"type":175,"value":1765},{"type":170,"tag":239,"props":1856,"children":1857},{"style":349},[1858],{"type":175,"value":1859},">\u003C/",{"type":170,"tag":239,"props":1861,"children":1862},{"style":1746},[1863],{"type":175,"value":182},{"type":170,"tag":239,"props":1865,"children":1866},{"style":349},[1867],{"type":175,"value":1868},">\n",{"type":170,"tag":239,"props":1870,"children":1871},{"class":241,"line":306},[1872,1876,1880,1884,1888,1892,1896,1900,1905,1909,1913,1918,1922,1926,1930],{"type":170,"tag":239,"props":1873,"children":1874},{"style":349},[1875],{"type":175,"value":1743},{"type":170,"tag":239,"props":1877,"children":1878},{"style":1746},[1879],{"type":175,"value":182},{"type":170,"tag":239,"props":1881,"children":1882},{"style":1752},[1883],{"type":175,"value":1816},{"type":170,"tag":239,"props":1885,"children":1886},{"style":349},[1887],{"type":175,"value":1760},{"type":170,"tag":239,"props":1889,"children":1890},{"style":276},[1891],{"type":175,"value":1765},{"type":170,"tag":239,"props":1893,"children":1894},{"style":282},[1895],{"type":175,"value":1829},{"type":170,"tag":239,"props":1897,"children":1898},{"style":276},[1899],{"type":175,"value":1765},{"type":170,"tag":239,"props":1901,"children":1902},{"style":1752},[1903],{"type":175,"value":1904}," rel",{"type":170,"tag":239,"props":1906,"children":1907},{"style":349},[1908],{"type":175,"value":1760},{"type":170,"tag":239,"props":1910,"children":1911},{"style":276},[1912],{"type":175,"value":1765},{"type":170,"tag":239,"props":1914,"children":1915},{"style":282},[1916],{"type":175,"value":1917},"noreferrer",{"type":170,"tag":239,"props":1919,"children":1920},{"style":276},[1921],{"type":175,"value":1765},{"type":170,"tag":239,"props":1923,"children":1924},{"style":349},[1925],{"type":175,"value":1859},{"type":170,"tag":239,"props":1927,"children":1928},{"style":1746},[1929],{"type":175,"value":182},{"type":170,"tag":239,"props":1931,"children":1932},{"style":349},[1933],{"type":175,"value":1868},{"type":170,"tag":439,"props":1935,"children":1937},{"id":1936},"强制使用-https",[1938],{"type":175,"value":1939},"强制使用 HTTPS",{"type":170,"tag":171,"props":1941,"children":1942},{},[1943,1945,1951,1953,1964],{"type":175,"value":1944},"通过设置请求头的 ",{"type":170,"tag":235,"props":1946,"children":1948},{"className":1947},[],[1949],{"type":175,"value":1950},"Strict-Transport-Security（STS）",{"type":175,"value":1952},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":170,"tag":178,"props":1954,"children":1955},{},[1956],{"type":170,"tag":182,"props":1957,"children":1961},{"href":1958,"ariaDescribedBy":1959,"dataFootnoteRef":163,"id":1960},"#user-content-fn-timeend",[186],"user-content-fnref-timeend",[1962],{"type":175,"value":1963},"8",{"type":175,"value":749},{"type":170,"tag":171,"props":1966,"children":1967},{},[1968,1970,1976,1978,1984,1986,1992,1994,2000,2002,2007],{"type":175,"value":1969},"这个规范本身很好理解，通过 ",{"type":170,"tag":235,"props":1971,"children":1973},{"className":1972},[],[1974],{"type":175,"value":1975},"max-age",{"type":175,"value":1977}," 可以指定倒计时时间；",{"type":170,"tag":235,"props":1979,"children":1981},{"className":1980},[],[1982],{"type":175,"value":1983},"includesSubDomains",{"type":175,"value":1985}," 指定子域的 ",{"type":170,"tag":235,"props":1987,"children":1989},{"className":1988},[],[1990],{"type":175,"value":1991},"HSTS",{"type":175,"value":1993},"；",{"type":170,"tag":235,"props":1995,"children":1997},{"className":1996},[],[1998],{"type":175,"value":1999},"preload",{"type":175,"value":2001}," 指定预加载内容的 ",{"type":170,"tag":235,"props":2003,"children":2005},{"className":2004},[],[2006],{"type":175,"value":1991},{"type":175,"value":749},{"type":170,"tag":228,"props":2009,"children":2011},{"code":2010},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2012],{"type":170,"tag":235,"props":2013,"children":2014},{"__ignoreMap":163},[2015],{"type":175,"value":2010},{"type":170,"tag":228,"props":2017,"children":2019},{"code":2018,"language":231,"meta":163,"className":232,"style":163},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2020],{"type":170,"tag":235,"props":2021,"children":2022},{"__ignoreMap":163},[2023,2085,2112,2185,2248,2285,2292,2345,2385,2392,2424,2455,2503,2547,2558,2565],{"type":170,"tag":239,"props":2024,"children":2025},{"class":241,"line":242},[2026,2030,2035,2039,2044,2048,2054,2059,2064,2068,2073,2077,2081],{"type":170,"tag":239,"props":2027,"children":2028},{"style":246},[2029],{"type":175,"value":249},{"type":170,"tag":239,"props":2031,"children":2032},{"style":252},[2033],{"type":175,"value":2034}," DEFAULT_MAX_AGE",{"type":170,"tag":239,"props":2036,"children":2037},{"style":258},[2038],{"type":175,"value":261},{"type":170,"tag":239,"props":2040,"children":2041},{"style":264},[2042],{"type":175,"value":2043}," String",{"type":170,"tag":239,"props":2045,"children":2046},{"style":270},[2047],{"type":175,"value":273},{"type":170,"tag":239,"props":2049,"children":2051},{"style":2050},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2052],{"type":175,"value":2053},"180",{"type":170,"tag":239,"props":2055,"children":2056},{"style":258},[2057],{"type":175,"value":2058}," *",{"type":170,"tag":239,"props":2060,"children":2061},{"style":2050},[2062],{"type":175,"value":2063}," 24",{"type":170,"tag":239,"props":2065,"children":2066},{"style":258},[2067],{"type":175,"value":2058},{"type":170,"tag":239,"props":2069,"children":2070},{"style":2050},[2071],{"type":175,"value":2072}," 60",{"type":170,"tag":239,"props":2074,"children":2075},{"style":258},[2076],{"type":175,"value":2058},{"type":170,"tag":239,"props":2078,"children":2079},{"style":2050},[2080],{"type":175,"value":2072},{"type":170,"tag":239,"props":2082,"children":2083},{"style":270},[2084],{"type":175,"value":294},{"type":170,"tag":239,"props":2086,"children":2087},{"class":241,"line":297},[2088,2092,2096,2100,2104,2108],{"type":170,"tag":239,"props":2089,"children":2090},{"style":246},[2091],{"type":175,"value":1278},{"type":170,"tag":239,"props":2093,"children":2094},{"style":264},[2095],{"type":175,"value":1283},{"type":170,"tag":239,"props":2097,"children":2098},{"style":349},[2099],{"type":175,"value":273},{"type":170,"tag":239,"props":2101,"children":2102},{"style":1291},[2103],{"type":175,"value":1531},{"type":170,"tag":239,"props":2105,"children":2106},{"style":349},[2107],{"type":175,"value":1627},{"type":170,"tag":239,"props":2109,"children":2110},{"style":349},[2111],{"type":175,"value":1330},{"type":170,"tag":239,"props":2113,"children":2114},{"class":241,"line":306},[2115,2119,2124,2128,2132,2137,2142,2148,2152,2157,2162,2167,2171,2176,2180],{"type":170,"tag":239,"props":2116,"children":2117},{"style":246},[2118],{"type":175,"value":1339},{"type":170,"tag":239,"props":2120,"children":2121},{"style":252},[2122],{"type":175,"value":2123}," directives",{"type":170,"tag":239,"props":2125,"children":2126},{"style":258},[2127],{"type":175,"value":261},{"type":170,"tag":239,"props":2129,"children":2130},{"style":1383},[2131],{"type":175,"value":1303},{"type":170,"tag":239,"props":2133,"children":2134},{"style":276},[2135],{"type":175,"value":2136},"`",{"type":170,"tag":239,"props":2138,"children":2139},{"style":282},[2140],{"type":175,"value":2141},"max-age=",{"type":170,"tag":239,"props":2143,"children":2145},{"style":2144},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2146],{"type":175,"value":2147},"${",{"type":170,"tag":239,"props":2149,"children":2150},{"style":270},[2151],{"type":175,"value":1531},{"type":170,"tag":239,"props":2153,"children":2155},{"style":2154},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2156],{"type":175,"value":352},{"type":170,"tag":239,"props":2158,"children":2159},{"style":270},[2160],{"type":175,"value":2161},"maxAge",{"type":170,"tag":239,"props":2163,"children":2164},{"style":258},[2165],{"type":175,"value":2166}," ||",{"type":170,"tag":239,"props":2168,"children":2169},{"style":252},[2170],{"type":175,"value":2034},{"type":170,"tag":239,"props":2172,"children":2173},{"style":2144},[2174],{"type":175,"value":2175},"}",{"type":170,"tag":239,"props":2177,"children":2178},{"style":276},[2179],{"type":175,"value":2136},{"type":170,"tag":239,"props":2181,"children":2182},{"style":1383},[2183],{"type":175,"value":2184},"]\n",{"type":170,"tag":239,"props":2186,"children":2187},{"class":241,"line":332},[2188,2193,2198,2202,2206,2211,2215,2221,2225,2230,2234,2238,2243],{"type":170,"tag":239,"props":2189,"children":2190},{"style":1464},[2191],{"type":175,"value":2192},"  if",{"type":170,"tag":239,"props":2194,"children":2195},{"style":1383},[2196],{"type":175,"value":2197}," (",{"type":170,"tag":239,"props":2199,"children":2200},{"style":270},[2201],{"type":175,"value":1531},{"type":170,"tag":239,"props":2203,"children":2204},{"style":349},[2205],{"type":175,"value":352},{"type":170,"tag":239,"props":2207,"children":2208},{"style":270},[2209],{"type":175,"value":2210},"includeSubDomains",{"type":170,"tag":239,"props":2212,"children":2213},{"style":258},[2214],{"type":175,"value":1362},{"type":170,"tag":239,"props":2216,"children":2218},{"style":2217},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2219],{"type":175,"value":2220}," undefined",{"type":170,"tag":239,"props":2222,"children":2223},{"style":258},[2224],{"type":175,"value":2166},{"type":170,"tag":239,"props":2226,"children":2227},{"style":270},[2228],{"type":175,"value":2229}," options",{"type":170,"tag":239,"props":2231,"children":2232},{"style":349},[2233],{"type":175,"value":352},{"type":170,"tag":239,"props":2235,"children":2236},{"style":270},[2237],{"type":175,"value":2210},{"type":170,"tag":239,"props":2239,"children":2240},{"style":1383},[2241],{"type":175,"value":2242},") ",{"type":170,"tag":239,"props":2244,"children":2245},{"style":349},[2246],{"type":175,"value":2247},"{\n",{"type":170,"tag":239,"props":2249,"children":2250},{"class":241,"line":340},[2251,2256,2260,2265,2269,2273,2277,2281],{"type":170,"tag":239,"props":2252,"children":2253},{"style":270},[2254],{"type":175,"value":2255},"    directives",{"type":170,"tag":239,"props":2257,"children":2258},{"style":349},[2259],{"type":175,"value":352},{"type":170,"tag":239,"props":2261,"children":2262},{"style":264},[2263],{"type":175,"value":2264},"push",{"type":170,"tag":239,"props":2266,"children":2267},{"style":1383},[2268],{"type":175,"value":273},{"type":170,"tag":239,"props":2270,"children":2271},{"style":276},[2272],{"type":175,"value":279},{"type":170,"tag":239,"props":2274,"children":2275},{"style":282},[2276],{"type":175,"value":2210},{"type":170,"tag":239,"props":2278,"children":2279},{"style":276},[2280],{"type":175,"value":279},{"type":170,"tag":239,"props":2282,"children":2283},{"style":1383},[2284],{"type":175,"value":294},{"type":170,"tag":239,"props":2286,"children":2287},{"class":241,"line":1065},[2288],{"type":170,"tag":239,"props":2289,"children":2290},{"style":349},[2291],{"type":175,"value":1698},{"type":170,"tag":239,"props":2293,"children":2294},{"class":241,"line":1074},[2295,2300,2304,2308,2313,2317,2321,2325,2329,2333,2337,2341],{"type":170,"tag":239,"props":2296,"children":2297},{"style":270},[2298],{"type":175,"value":2299},"  options",{"type":170,"tag":239,"props":2301,"children":2302},{"style":349},[2303],{"type":175,"value":352},{"type":170,"tag":239,"props":2305,"children":2306},{"style":270},[2307],{"type":175,"value":1999},{"type":170,"tag":239,"props":2309,"children":2310},{"style":258},[2311],{"type":175,"value":2312}," &&",{"type":170,"tag":239,"props":2314,"children":2315},{"style":270},[2316],{"type":175,"value":2123},{"type":170,"tag":239,"props":2318,"children":2319},{"style":349},[2320],{"type":175,"value":352},{"type":170,"tag":239,"props":2322,"children":2323},{"style":264},[2324],{"type":175,"value":2264},{"type":170,"tag":239,"props":2326,"children":2327},{"style":1383},[2328],{"type":175,"value":273},{"type":170,"tag":239,"props":2330,"children":2331},{"style":276},[2332],{"type":175,"value":279},{"type":170,"tag":239,"props":2334,"children":2335},{"style":282},[2336],{"type":175,"value":1999},{"type":170,"tag":239,"props":2338,"children":2339},{"style":276},[2340],{"type":175,"value":279},{"type":170,"tag":239,"props":2342,"children":2343},{"style":1383},[2344],{"type":175,"value":294},{"type":170,"tag":239,"props":2346,"children":2347},{"class":241,"line":1095},[2348,2352,2356,2360,2364,2368,2372,2377,2381],{"type":170,"tag":239,"props":2349,"children":2350},{"style":1464},[2351],{"type":175,"value":1467},{"type":170,"tag":239,"props":2353,"children":2354},{"style":270},[2355],{"type":175,"value":2123},{"type":170,"tag":239,"props":2357,"children":2358},{"style":349},[2359],{"type":175,"value":352},{"type":170,"tag":239,"props":2361,"children":2362},{"style":264},[2363],{"type":175,"value":1480},{"type":170,"tag":239,"props":2365,"children":2366},{"style":1383},[2367],{"type":175,"value":273},{"type":170,"tag":239,"props":2369,"children":2370},{"style":276},[2371],{"type":175,"value":279},{"type":170,"tag":239,"props":2373,"children":2374},{"style":282},[2375],{"type":175,"value":2376},"; ",{"type":170,"tag":239,"props":2378,"children":2379},{"style":276},[2380],{"type":175,"value":279},{"type":170,"tag":239,"props":2382,"children":2383},{"style":1383},[2384],{"type":175,"value":294},{"type":170,"tag":239,"props":2386,"children":2387},{"class":241,"line":1104},[2388],{"type":170,"tag":239,"props":2389,"children":2390},{"style":349},[2391],{"type":175,"value":1509},{"type":170,"tag":239,"props":2393,"children":2394},{"class":241,"line":1125},[2395,2399,2404,2408,2412,2416,2420],{"type":170,"tag":239,"props":2396,"children":2397},{"style":246},[2398],{"type":175,"value":1278},{"type":170,"tag":239,"props":2400,"children":2401},{"style":264},[2402],{"type":175,"value":2403}," strictTransportSecurity",{"type":170,"tag":239,"props":2405,"children":2406},{"style":349},[2407],{"type":175,"value":273},{"type":170,"tag":239,"props":2409,"children":2410},{"style":1291},[2411],{"type":175,"value":1531},{"type":170,"tag":239,"props":2413,"children":2414},{"style":258},[2415],{"type":175,"value":261},{"type":170,"tag":239,"props":2417,"children":2418},{"style":349},[2419],{"type":175,"value":1540},{"type":170,"tag":239,"props":2421,"children":2422},{"style":349},[2423],{"type":175,"value":1330},{"type":170,"tag":239,"props":2425,"children":2426},{"class":241,"line":1134},[2427,2431,2435,2439,2443,2447,2451],{"type":170,"tag":239,"props":2428,"children":2429},{"style":246},[2430],{"type":175,"value":1339},{"type":170,"tag":239,"props":2432,"children":2433},{"style":252},[2434],{"type":175,"value":1557},{"type":170,"tag":239,"props":2436,"children":2437},{"style":258},[2438],{"type":175,"value":261},{"type":170,"tag":239,"props":2440,"children":2441},{"style":264},[2442],{"type":175,"value":1283},{"type":170,"tag":239,"props":2444,"children":2445},{"style":1383},[2446],{"type":175,"value":273},{"type":170,"tag":239,"props":2448,"children":2449},{"style":270},[2450],{"type":175,"value":1531},{"type":170,"tag":239,"props":2452,"children":2453},{"style":1383},[2454],{"type":175,"value":294},{"type":170,"tag":239,"props":2456,"children":2457},{"class":241,"line":1155},[2458,2462,2466,2471,2475,2479,2483,2487,2491,2495,2499],{"type":170,"tag":239,"props":2459,"children":2460},{"style":1464},[2461],{"type":175,"value":1467},{"type":170,"tag":239,"props":2463,"children":2464},{"style":246},[2465],{"type":175,"value":1590},{"type":170,"tag":239,"props":2467,"children":2468},{"style":264},[2469],{"type":175,"value":2470}," strictTransportSecurityMiddleware",{"type":170,"tag":239,"props":2472,"children":2473},{"style":349},[2474],{"type":175,"value":273},{"type":170,"tag":239,"props":2476,"children":2477},{"style":1291},[2478],{"type":175,"value":1604},{"type":170,"tag":239,"props":2480,"children":2481},{"style":349},[2482],{"type":175,"value":564},{"type":170,"tag":239,"props":2484,"children":2485},{"style":1291},[2486],{"type":175,"value":1613},{"type":170,"tag":239,"props":2488,"children":2489},{"style":349},[2490],{"type":175,"value":564},{"type":170,"tag":239,"props":2492,"children":2493},{"style":1291},[2494],{"type":175,"value":1622},{"type":170,"tag":239,"props":2496,"children":2497},{"style":349},[2498],{"type":175,"value":1627},{"type":170,"tag":239,"props":2500,"children":2501},{"style":349},[2502],{"type":175,"value":1330},{"type":170,"tag":239,"props":2504,"children":2505},{"class":241,"line":1164},[2506,2510,2514,2518,2522,2526,2531,2535,2539,2543],{"type":170,"tag":239,"props":2507,"children":2508},{"style":270},[2509],{"type":175,"value":1640},{"type":170,"tag":239,"props":2511,"children":2512},{"style":349},[2513],{"type":175,"value":352},{"type":170,"tag":239,"props":2515,"children":2516},{"style":264},[2517],{"type":175,"value":542},{"type":170,"tag":239,"props":2519,"children":2520},{"style":1383},[2521],{"type":175,"value":273},{"type":170,"tag":239,"props":2523,"children":2524},{"style":276},[2525],{"type":175,"value":279},{"type":170,"tag":239,"props":2527,"children":2528},{"style":282},[2529],{"type":175,"value":2530},"Strict-Transport-Security",{"type":170,"tag":239,"props":2532,"children":2533},{"style":276},[2534],{"type":175,"value":279},{"type":170,"tag":239,"props":2536,"children":2537},{"style":349},[2538],{"type":175,"value":564},{"type":170,"tag":239,"props":2540,"children":2541},{"style":270},[2542],{"type":175,"value":1557},{"type":170,"tag":239,"props":2544,"children":2545},{"style":1383},[2546],{"type":175,"value":294},{"type":170,"tag":239,"props":2548,"children":2549},{"class":241,"line":1185},[2550,2554],{"type":170,"tag":239,"props":2551,"children":2552},{"style":264},[2553],{"type":175,"value":1685},{"type":170,"tag":239,"props":2555,"children":2556},{"style":1383},[2557],{"type":175,"value":329},{"type":170,"tag":239,"props":2559,"children":2560},{"class":241,"line":1194},[2561],{"type":170,"tag":239,"props":2562,"children":2563},{"style":349},[2564],{"type":175,"value":1698},{"type":170,"tag":239,"props":2566,"children":2567},{"class":241,"line":1215},[2568],{"type":170,"tag":239,"props":2569,"children":2570},{"style":349},[2571],{"type":175,"value":1509},{"type":170,"tag":439,"props":2573,"children":2575},{"id":2574},"可选用证书透明性策略",[2576],{"type":175,"value":2574},{"type":170,"tag":228,"props":2578,"children":2580},{"code":2579,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('Expect-CT' /* someValue */)\n",[2581],{"type":170,"tag":235,"props":2582,"children":2583},{"__ignoreMap":163},[2584],{"type":170,"tag":239,"props":2585,"children":2586},{"class":241,"line":242},[2587,2591,2595,2599,2603,2607,2612,2616,2621],{"type":170,"tag":239,"props":2588,"children":2589},{"style":270},[2590],{"type":175,"value":459},{"type":170,"tag":239,"props":2592,"children":2593},{"style":349},[2594],{"type":175,"value":352},{"type":170,"tag":239,"props":2596,"children":2597},{"style":264},[2598],{"type":175,"value":542},{"type":170,"tag":239,"props":2600,"children":2601},{"style":270},[2602],{"type":175,"value":273},{"type":170,"tag":239,"props":2604,"children":2605},{"style":276},[2606],{"type":175,"value":279},{"type":170,"tag":239,"props":2608,"children":2609},{"style":282},[2610],{"type":175,"value":2611},"Expect-CT",{"type":170,"tag":239,"props":2613,"children":2614},{"style":276},[2615],{"type":175,"value":279},{"type":170,"tag":239,"props":2617,"children":2618},{"style":1009},[2619],{"type":175,"value":2620}," /* someValue */",{"type":170,"tag":239,"props":2622,"children":2623},{"style":270},[2624],{"type":175,"value":294},{"type":170,"tag":171,"props":2626,"children":2627},{},[2628,2633,2635,2646,2648,2659],{"type":170,"tag":235,"props":2629,"children":2631},{"className":2630},[],[2632],{"type":175,"value":2611},{"type":175,"value":2634}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":170,"tag":178,"props":2636,"children":2637},{},[2638],{"type":170,"tag":182,"props":2639,"children":2643},{"href":2640,"ariaDescribedBy":2641,"dataFootnoteRef":163,"id":2642},"#user-content-fn-chrome-ct",[186],"user-content-fnref-chrome-ct",[2644],{"type":175,"value":2645},"9",{"type":175,"value":2647},"），避免中间人攻击",{"type":170,"tag":178,"props":2649,"children":2650},{},[2651],{"type":170,"tag":182,"props":2652,"children":2656},{"href":2653,"ariaDescribedBy":2654,"dataFootnoteRef":163,"id":2655},"#user-content-fn-ct",[186],"user-content-fnref-ct",[2657],{"type":175,"value":2658},"10",{"type":175,"value":2660},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":170,"tag":228,"props":2662,"children":2664},{"code":2663},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2665],{"type":170,"tag":235,"props":2666,"children":2667},{"__ignoreMap":163},[2668],{"type":175,"value":2663},{"type":170,"tag":171,"props":2670,"children":2671},{},[2672,2674,2679],{"type":175,"value":2673},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":170,"tag":235,"props":2675,"children":2677},{"className":2676},[],[2678],{"type":175,"value":2611},{"type":175,"value":2680}," 就作不上用咯... TODO",{"type":170,"tag":439,"props":2682,"children":2684},{"id":2683},"拒绝来自-pdfflash-的跨域请求",[2685],{"type":175,"value":2686},"拒绝来自 PDF、Flash 的跨域请求",{"type":170,"tag":171,"props":2688,"children":2689},{},[2690,2696,2698,2709],{"type":170,"tag":235,"props":2691,"children":2693},{"className":2692},[],[2694],{"type":175,"value":2695},"X-Permitted-Cross-Domain-Policies",{"type":175,"value":2697}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":170,"tag":178,"props":2699,"children":2700},{},[2701],{"type":170,"tag":182,"props":2702,"children":2706},{"href":2703,"ariaDescribedBy":2704,"dataFootnoteRef":163,"id":2705},"#user-content-fn-pdf-reader",[186],"user-content-fnref-pdf-reader",[2707],{"type":175,"value":2708},"11",{"type":175,"value":2710},"：",{"type":170,"tag":171,"props":2712,"children":2713},{},[2714],{"type":170,"tag":892,"props":2715,"children":2717},{"alt":2695,"src":2716},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":170,"tag":2719,"props":2720,"children":2721},"ol",{},[2722,2728],{"type":170,"tag":2723,"props":2724,"children":2725},"li",{},[2726],{"type":175,"value":2727},"用户在 A 网站打开了某个 PDF；",{"type":170,"tag":2723,"props":2729,"children":2730},{},[2731,2733,2739],{"type":175,"value":2732},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":170,"tag":235,"props":2734,"children":2736},{"className":2735},[],[2737],{"type":175,"value":2738},"crossdomain.xml",{"type":175,"value":2740}," 文件（策略文件）作为跨域策略应对方案。",{"type":170,"tag":171,"props":2742,"children":2743},{},[2744],{"type":175,"value":2745},"一个策略文件可能长这样：",{"type":170,"tag":228,"props":2747,"children":2749},{"code":2748,"language":1730,"meta":163,"className":1731,"style":163},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2750],{"type":170,"tag":235,"props":2751,"children":2752},{"__ignoreMap":163},[2753,2761,2777,2816,2852,2888,2924,2960],{"type":170,"tag":239,"props":2754,"children":2755},{"class":241,"line":242},[2756],{"type":170,"tag":239,"props":2757,"children":2758},{"style":1009},[2759],{"type":175,"value":2760},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":170,"tag":239,"props":2762,"children":2763},{"class":241,"line":297},[2764,2768,2773],{"type":170,"tag":239,"props":2765,"children":2766},{"style":349},[2767],{"type":175,"value":1743},{"type":170,"tag":239,"props":2769,"children":2770},{"style":1746},[2771],{"type":175,"value":2772},"cross-domain-policy",{"type":170,"tag":239,"props":2774,"children":2775},{"style":349},[2776],{"type":175,"value":1868},{"type":170,"tag":239,"props":2778,"children":2779},{"class":241,"line":306},[2780,2785,2790,2795,2799,2803,2808,2812],{"type":170,"tag":239,"props":2781,"children":2782},{"style":349},[2783],{"type":175,"value":2784},"  \u003C",{"type":170,"tag":239,"props":2786,"children":2787},{"style":1746},[2788],{"type":175,"value":2789},"allow-access-from",{"type":170,"tag":239,"props":2791,"children":2792},{"style":1752},[2793],{"type":175,"value":2794}," domain",{"type":170,"tag":239,"props":2796,"children":2797},{"style":349},[2798],{"type":175,"value":1760},{"type":170,"tag":239,"props":2800,"children":2801},{"style":276},[2802],{"type":175,"value":1765},{"type":170,"tag":239,"props":2804,"children":2805},{"style":282},[2806],{"type":175,"value":2807},"*.taobao.com",{"type":170,"tag":239,"props":2809,"children":2810},{"style":276},[2811],{"type":175,"value":1765},{"type":170,"tag":239,"props":2813,"children":2814},{"style":349},[2815],{"type":175,"value":1800},{"type":170,"tag":239,"props":2817,"children":2818},{"class":241,"line":332},[2819,2823,2827,2831,2835,2839,2844,2848],{"type":170,"tag":239,"props":2820,"children":2821},{"style":349},[2822],{"type":175,"value":2784},{"type":170,"tag":239,"props":2824,"children":2825},{"style":1746},[2826],{"type":175,"value":2789},{"type":170,"tag":239,"props":2828,"children":2829},{"style":1752},[2830],{"type":175,"value":2794},{"type":170,"tag":239,"props":2832,"children":2833},{"style":349},[2834],{"type":175,"value":1760},{"type":170,"tag":239,"props":2836,"children":2837},{"style":276},[2838],{"type":175,"value":1765},{"type":170,"tag":239,"props":2840,"children":2841},{"style":282},[2842],{"type":175,"value":2843},"*.taobao.net",{"type":170,"tag":239,"props":2845,"children":2846},{"style":276},[2847],{"type":175,"value":1765},{"type":170,"tag":239,"props":2849,"children":2850},{"style":349},[2851],{"type":175,"value":1800},{"type":170,"tag":239,"props":2853,"children":2854},{"class":241,"line":340},[2855,2859,2863,2867,2871,2875,2880,2884],{"type":170,"tag":239,"props":2856,"children":2857},{"style":349},[2858],{"type":175,"value":2784},{"type":170,"tag":239,"props":2860,"children":2861},{"style":1746},[2862],{"type":175,"value":2789},{"type":170,"tag":239,"props":2864,"children":2865},{"style":1752},[2866],{"type":175,"value":2794},{"type":170,"tag":239,"props":2868,"children":2869},{"style":349},[2870],{"type":175,"value":1760},{"type":170,"tag":239,"props":2872,"children":2873},{"style":276},[2874],{"type":175,"value":1765},{"type":170,"tag":239,"props":2876,"children":2877},{"style":282},[2878],{"type":175,"value":2879},"*.taobaocdn.com",{"type":170,"tag":239,"props":2881,"children":2882},{"style":276},[2883],{"type":175,"value":1765},{"type":170,"tag":239,"props":2885,"children":2886},{"style":349},[2887],{"type":175,"value":1800},{"type":170,"tag":239,"props":2889,"children":2890},{"class":241,"line":1065},[2891,2895,2899,2903,2907,2911,2916,2920],{"type":170,"tag":239,"props":2892,"children":2893},{"style":349},[2894],{"type":175,"value":2784},{"type":170,"tag":239,"props":2896,"children":2897},{"style":1746},[2898],{"type":175,"value":2789},{"type":170,"tag":239,"props":2900,"children":2901},{"style":1752},[2902],{"type":175,"value":2794},{"type":170,"tag":239,"props":2904,"children":2905},{"style":349},[2906],{"type":175,"value":1760},{"type":170,"tag":239,"props":2908,"children":2909},{"style":276},[2910],{"type":175,"value":1765},{"type":170,"tag":239,"props":2912,"children":2913},{"style":282},[2914],{"type":175,"value":2915},"*.tbcdn.cn",{"type":170,"tag":239,"props":2917,"children":2918},{"style":276},[2919],{"type":175,"value":1765},{"type":170,"tag":239,"props":2921,"children":2922},{"style":349},[2923],{"type":175,"value":1800},{"type":170,"tag":239,"props":2925,"children":2926},{"class":241,"line":1074},[2927,2931,2935,2939,2943,2947,2952,2956],{"type":170,"tag":239,"props":2928,"children":2929},{"style":349},[2930],{"type":175,"value":2784},{"type":170,"tag":239,"props":2932,"children":2933},{"style":1746},[2934],{"type":175,"value":2789},{"type":170,"tag":239,"props":2936,"children":2937},{"style":1752},[2938],{"type":175,"value":2794},{"type":170,"tag":239,"props":2940,"children":2941},{"style":349},[2942],{"type":175,"value":1760},{"type":170,"tag":239,"props":2944,"children":2945},{"style":276},[2946],{"type":175,"value":1765},{"type":170,"tag":239,"props":2948,"children":2949},{"style":282},[2950],{"type":175,"value":2951},"*.alicdn.com",{"type":170,"tag":239,"props":2953,"children":2954},{"style":276},[2955],{"type":175,"value":1765},{"type":170,"tag":239,"props":2957,"children":2958},{"style":349},[2959],{"type":175,"value":1800},{"type":170,"tag":239,"props":2961,"children":2962},{"class":241,"line":1095},[2963,2968,2972],{"type":170,"tag":239,"props":2964,"children":2965},{"style":349},[2966],{"type":175,"value":2967},"\u003C/",{"type":170,"tag":239,"props":2969,"children":2970},{"style":1746},[2971],{"type":175,"value":2772},{"type":170,"tag":239,"props":2973,"children":2974},{"style":349},[2975],{"type":175,"value":1868},{"type":170,"tag":171,"props":2977,"children":2978},{},[2979,2981,2986,2988,2993],{"type":175,"value":2980},"其中，若请求响应头包含了 ",{"type":170,"tag":235,"props":2982,"children":2984},{"className":2983},[],[2985],{"type":175,"value":2695},{"type":175,"value":2987},"，便可指定浏览器针对 ",{"type":170,"tag":235,"props":2989,"children":2991},{"className":2990},[],[2992],{"type":175,"value":2738},{"type":175,"value":2994}," 的应对行为。",{"type":170,"tag":228,"props":2996,"children":2998},{"code":2997,"language":231,"meta":163,"className":232,"style":163},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[2999],{"type":170,"tag":235,"props":3000,"children":3001},{"__ignoreMap":163},[3002,3030,3038,3058,3066,3086,3094,3114,3122,3139,3146,3191,3239,3282,3293,3300],{"type":170,"tag":239,"props":3003,"children":3004},{"class":241,"line":242},[3005,3009,3014,3018,3022,3026],{"type":170,"tag":239,"props":3006,"children":3007},{"style":246},[3008],{"type":175,"value":249},{"type":170,"tag":239,"props":3010,"children":3011},{"style":252},[3012],{"type":175,"value":3013}," ALLOWED_PERMITTED_POLICIES",{"type":170,"tag":239,"props":3015,"children":3016},{"style":258},[3017],{"type":175,"value":261},{"type":170,"tag":239,"props":3019,"children":3020},{"style":258},[3021],{"type":175,"value":993},{"type":170,"tag":239,"props":3023,"children":3024},{"style":264},[3025],{"type":175,"value":998},{"type":170,"tag":239,"props":3027,"children":3028},{"style":270},[3029],{"type":175,"value":1003},{"type":170,"tag":239,"props":3031,"children":3032},{"class":241,"line":297},[3033],{"type":170,"tag":239,"props":3034,"children":3035},{"style":1009},[3036],{"type":175,"value":3037},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":170,"tag":239,"props":3039,"children":3040},{"class":241,"line":306},[3041,3045,3050,3054],{"type":170,"tag":239,"props":3042,"children":3043},{"style":276},[3044],{"type":175,"value":1020},{"type":170,"tag":239,"props":3046,"children":3047},{"style":282},[3048],{"type":175,"value":3049},"master-only",{"type":170,"tag":239,"props":3051,"children":3052},{"style":276},[3053],{"type":175,"value":279},{"type":170,"tag":239,"props":3055,"children":3056},{"style":349},[3057],{"type":175,"value":1034},{"type":170,"tag":239,"props":3059,"children":3060},{"class":241,"line":332},[3061],{"type":170,"tag":239,"props":3062,"children":3063},{"style":1009},[3064],{"type":175,"value":3065},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":170,"tag":239,"props":3067,"children":3068},{"class":241,"line":340},[3069,3073,3078,3082],{"type":170,"tag":239,"props":3070,"children":3071},{"style":276},[3072],{"type":175,"value":1020},{"type":170,"tag":239,"props":3074,"children":3075},{"style":282},[3076],{"type":175,"value":3077},"by-content-type",{"type":170,"tag":239,"props":3079,"children":3080},{"style":276},[3081],{"type":175,"value":279},{"type":170,"tag":239,"props":3083,"children":3084},{"style":349},[3085],{"type":175,"value":1034},{"type":170,"tag":239,"props":3087,"children":3088},{"class":241,"line":1065},[3089],{"type":170,"tag":239,"props":3090,"children":3091},{"style":1009},[3092],{"type":175,"value":3093},"  // 不使用任何位置的 crossdomain.xml\n",{"type":170,"tag":239,"props":3095,"children":3096},{"class":241,"line":1074},[3097,3101,3106,3110],{"type":170,"tag":239,"props":3098,"children":3099},{"style":276},[3100],{"type":175,"value":1020},{"type":170,"tag":239,"props":3102,"children":3103},{"style":282},[3104],{"type":175,"value":3105},"none",{"type":170,"tag":239,"props":3107,"children":3108},{"style":276},[3109],{"type":175,"value":279},{"type":170,"tag":239,"props":3111,"children":3112},{"style":349},[3113],{"type":175,"value":1034},{"type":170,"tag":239,"props":3115,"children":3116},{"class":241,"line":1095},[3117],{"type":170,"tag":239,"props":3118,"children":3119},{"style":1009},[3120],{"type":175,"value":3121},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":170,"tag":239,"props":3123,"children":3124},{"class":241,"line":1104},[3125,3129,3134],{"type":170,"tag":239,"props":3126,"children":3127},{"style":276},[3128],{"type":175,"value":1020},{"type":170,"tag":239,"props":3130,"children":3131},{"style":282},[3132],{"type":175,"value":3133},"all",{"type":170,"tag":239,"props":3135,"children":3136},{"style":276},[3137],{"type":175,"value":3138},"'\n",{"type":170,"tag":239,"props":3140,"children":3141},{"class":241,"line":1125},[3142],{"type":170,"tag":239,"props":3143,"children":3144},{"style":270},[3145],{"type":175,"value":1269},{"type":170,"tag":239,"props":3147,"children":3148},{"class":241,"line":1134},[3149,3153,3158,3162,3167,3171,3175,3179,3183,3187],{"type":170,"tag":239,"props":3150,"children":3151},{"style":246},[3152],{"type":175,"value":1278},{"type":170,"tag":239,"props":3154,"children":3155},{"style":264},[3156],{"type":175,"value":3157}," xPermittedCrossDomainPolicies",{"type":170,"tag":239,"props":3159,"children":3160},{"style":349},[3161],{"type":175,"value":273},{"type":170,"tag":239,"props":3163,"children":3164},{"style":1291},[3165],{"type":175,"value":3166},"headerValue",{"type":170,"tag":239,"props":3168,"children":3169},{"style":258},[3170],{"type":175,"value":261},{"type":170,"tag":239,"props":3172,"children":3173},{"style":276},[3174],{"type":175,"value":569},{"type":170,"tag":239,"props":3176,"children":3177},{"style":282},[3178],{"type":175,"value":3105},{"type":170,"tag":239,"props":3180,"children":3181},{"style":276},[3182],{"type":175,"value":279},{"type":170,"tag":239,"props":3184,"children":3185},{"style":349},[3186],{"type":175,"value":1627},{"type":170,"tag":239,"props":3188,"children":3189},{"style":349},[3190],{"type":175,"value":1330},{"type":170,"tag":239,"props":3192,"children":3193},{"class":241,"line":1155},[3194,3198,3202,3207,3211,3215,3219,3223,3227,3231,3235],{"type":170,"tag":239,"props":3195,"children":3196},{"style":1464},[3197],{"type":175,"value":1467},{"type":170,"tag":239,"props":3199,"children":3200},{"style":246},[3201],{"type":175,"value":1590},{"type":170,"tag":239,"props":3203,"children":3204},{"style":264},[3205],{"type":175,"value":3206}," xPermittedCrossDomainPoliciesMiddleware",{"type":170,"tag":239,"props":3208,"children":3209},{"style":349},[3210],{"type":175,"value":273},{"type":170,"tag":239,"props":3212,"children":3213},{"style":1291},[3214],{"type":175,"value":1604},{"type":170,"tag":239,"props":3216,"children":3217},{"style":349},[3218],{"type":175,"value":564},{"type":170,"tag":239,"props":3220,"children":3221},{"style":1291},[3222],{"type":175,"value":1613},{"type":170,"tag":239,"props":3224,"children":3225},{"style":349},[3226],{"type":175,"value":564},{"type":170,"tag":239,"props":3228,"children":3229},{"style":1291},[3230],{"type":175,"value":1622},{"type":170,"tag":239,"props":3232,"children":3233},{"style":349},[3234],{"type":175,"value":1627},{"type":170,"tag":239,"props":3236,"children":3237},{"style":349},[3238],{"type":175,"value":1330},{"type":170,"tag":239,"props":3240,"children":3241},{"class":241,"line":1164},[3242,3246,3250,3254,3258,3262,3266,3270,3274,3278],{"type":170,"tag":239,"props":3243,"children":3244},{"style":270},[3245],{"type":175,"value":1640},{"type":170,"tag":239,"props":3247,"children":3248},{"style":349},[3249],{"type":175,"value":352},{"type":170,"tag":239,"props":3251,"children":3252},{"style":264},[3253],{"type":175,"value":542},{"type":170,"tag":239,"props":3255,"children":3256},{"style":1383},[3257],{"type":175,"value":273},{"type":170,"tag":239,"props":3259,"children":3260},{"style":276},[3261],{"type":175,"value":279},{"type":170,"tag":239,"props":3263,"children":3264},{"style":282},[3265],{"type":175,"value":2695},{"type":170,"tag":239,"props":3267,"children":3268},{"style":276},[3269],{"type":175,"value":279},{"type":170,"tag":239,"props":3271,"children":3272},{"style":349},[3273],{"type":175,"value":564},{"type":170,"tag":239,"props":3275,"children":3276},{"style":270},[3277],{"type":175,"value":1557},{"type":170,"tag":239,"props":3279,"children":3280},{"style":1383},[3281],{"type":175,"value":294},{"type":170,"tag":239,"props":3283,"children":3284},{"class":241,"line":1185},[3285,3289],{"type":170,"tag":239,"props":3286,"children":3287},{"style":264},[3288],{"type":175,"value":1685},{"type":170,"tag":239,"props":3290,"children":3291},{"style":1383},[3292],{"type":175,"value":329},{"type":170,"tag":239,"props":3294,"children":3295},{"class":241,"line":1194},[3296],{"type":170,"tag":239,"props":3297,"children":3298},{"style":349},[3299],{"type":175,"value":1698},{"type":170,"tag":239,"props":3301,"children":3302},{"class":241,"line":1215},[3303],{"type":170,"tag":239,"props":3304,"children":3305},{"style":349},[3306],{"type":175,"value":1509},{"type":170,"tag":171,"props":3308,"children":3309},{},[3310],{"type":175,"value":3311},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":170,"tag":439,"props":3313,"children":3315},{"id":3314},"开启-csp",[3316],{"type":175,"value":3317},"开启 CSP",{"type":170,"tag":171,"props":3319,"children":3320},{},[3321,3323,3328,3330,3335,3337,3342,3344,3355],{"type":175,"value":3322},"还记得刚才提到 Chrome 关闭了 ",{"type":170,"tag":235,"props":3324,"children":3326},{"className":3325},[],[3327],{"type":175,"value":692},{"type":175,"value":3329}," 吗？既然不再使用 ",{"type":170,"tag":235,"props":3331,"children":3333},{"className":3332},[],[3334],{"type":175,"value":692},{"type":175,"value":3336},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":170,"tag":235,"props":3338,"children":3340},{"className":3339},[],[3341],{"type":175,"value":720},{"type":175,"value":3343}," 标准",{"type":170,"tag":178,"props":3345,"children":3346},{},[3347],{"type":170,"tag":182,"props":3348,"children":3352},{"href":3349,"ariaDescribedBy":3350,"dataFootnoteRef":163,"id":3351},"#user-content-fn-csp-standard",[186],"user-content-fnref-csp-standard",[3353],{"type":175,"value":3354},"12",{"type":175,"value":3356},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":170,"tag":171,"props":3358,"children":3359},{},[3360,3365],{"type":170,"tag":235,"props":3361,"children":3363},{"className":3362},[],[3364],{"type":175,"value":720},{"type":175,"value":3366}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":170,"tag":228,"props":3368,"children":3370},{"code":3369,"language":1730,"meta":163,"className":1731,"style":163},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3371],{"type":170,"tag":235,"props":3372,"children":3373},{"__ignoreMap":163},[3374],{"type":170,"tag":239,"props":3375,"children":3376},{"class":241,"line":242},[3377,3381,3385,3390,3394,3398,3403,3407,3411,3415,3419,3424,3428],{"type":170,"tag":239,"props":3378,"children":3379},{"style":349},[3380],{"type":175,"value":1743},{"type":170,"tag":239,"props":3382,"children":3383},{"style":1746},[3384],{"type":175,"value":1749},{"type":170,"tag":239,"props":3386,"children":3387},{"style":1752},[3388],{"type":175,"value":3389}," http-equiv",{"type":170,"tag":239,"props":3391,"children":3392},{"style":349},[3393],{"type":175,"value":1760},{"type":170,"tag":239,"props":3395,"children":3396},{"style":276},[3397],{"type":175,"value":1765},{"type":170,"tag":239,"props":3399,"children":3400},{"style":282},[3401],{"type":175,"value":3402},"Content-Security-Policy",{"type":170,"tag":239,"props":3404,"children":3405},{"style":276},[3406],{"type":175,"value":1765},{"type":170,"tag":239,"props":3408,"children":3409},{"style":1752},[3410],{"type":175,"value":1779},{"type":170,"tag":239,"props":3412,"children":3413},{"style":349},[3414],{"type":175,"value":1760},{"type":170,"tag":239,"props":3416,"children":3417},{"style":276},[3418],{"type":175,"value":1765},{"type":170,"tag":239,"props":3420,"children":3421},{"style":282},[3422],{"type":175,"value":3423},"default-src 'self'; img-src https://*; child-src 'none';",{"type":170,"tag":239,"props":3425,"children":3426},{"style":276},[3427],{"type":175,"value":1765},{"type":170,"tag":239,"props":3429,"children":3430},{"style":349},[3431],{"type":175,"value":1800},{"type":170,"tag":171,"props":3433,"children":3434},{},[3435,3437,3442],{"type":175,"value":3436},"一个典型的 ",{"type":170,"tag":235,"props":3438,"children":3440},{"className":3439},[],[3441],{"type":175,"value":720},{"type":175,"value":3443}," 头如下：",{"type":170,"tag":228,"props":3445,"children":3447},{"code":3446},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3448],{"type":170,"tag":235,"props":3449,"children":3450},{"__ignoreMap":163},[3451],{"type":175,"value":3446},{"type":170,"tag":171,"props":3453,"children":3454},{},[3455],{"type":175,"value":3456},"大致来说，CSP 相关以下几种安全行为：",{"type":170,"tag":3458,"props":3459,"children":3460},"ul",{},[3461,3466,3471,3476],{"type":170,"tag":2723,"props":3462,"children":3463},{},[3464],{"type":175,"value":3465},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":170,"tag":2723,"props":3467,"children":3468},{},[3469],{"type":175,"value":3470},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":170,"tag":2723,"props":3472,"children":3473},{},[3474],{"type":175,"value":3475},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":170,"tag":2723,"props":3477,"children":3478},{},[3479,3481,3487],{"type":175,"value":3480},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":170,"tag":235,"props":3482,"children":3484},{"className":3483},[],[3485],{"type":175,"value":3486},"Content-Security-Policy-Report-Only",{"type":175,"value":3488}," Header。",{"type":170,"tag":171,"props":3490,"children":3491},{},[3492,3494,3499],{"type":175,"value":3493},"那么我们看看 Helmet 中默认配置的 ",{"type":170,"tag":235,"props":3495,"children":3497},{"className":3496},[],[3498],{"type":175,"value":720},{"type":175,"value":3500}," 策略：",{"type":170,"tag":228,"props":3502,"children":3504},{"code":3503,"language":231,"meta":163,"className":232,"style":163},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3505],{"type":170,"tag":235,"props":3506,"children":3507},{"__ignoreMap":163},[3508,3528,3536,3583,3591,3635,3643,3672,3680,3758,3766,3809,3817,3877,3885,3930,3938,3982,3990,3998,4006,4014,4063,4071,4149,4157,4165,4173,4198],{"type":170,"tag":239,"props":3509,"children":3510},{"class":241,"line":242},[3511,3515,3520,3524],{"type":170,"tag":239,"props":3512,"children":3513},{"style":246},[3514],{"type":175,"value":249},{"type":170,"tag":239,"props":3516,"children":3517},{"style":252},[3518],{"type":175,"value":3519}," DEFAULT_DIRECTIVES",{"type":170,"tag":239,"props":3521,"children":3522},{"style":258},[3523],{"type":175,"value":261},{"type":170,"tag":239,"props":3525,"children":3526},{"style":349},[3527],{"type":175,"value":1330},{"type":170,"tag":239,"props":3529,"children":3530},{"class":241,"line":297},[3531],{"type":170,"tag":239,"props":3532,"children":3533},{"style":1009},[3534],{"type":175,"value":3535},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":170,"tag":239,"props":3537,"children":3538},{"class":241,"line":306},[3539,3543,3549,3553,3557,3561,3565,3570,3574,3579],{"type":170,"tag":239,"props":3540,"children":3541},{"style":276},[3542],{"type":175,"value":1020},{"type":170,"tag":239,"props":3544,"children":3546},{"style":3545},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3547],{"type":175,"value":3548},"default-src",{"type":170,"tag":239,"props":3550,"children":3551},{"style":276},[3552],{"type":175,"value":279},{"type":170,"tag":239,"props":3554,"children":3555},{"style":349},[3556],{"type":175,"value":1399},{"type":170,"tag":239,"props":3558,"children":3559},{"style":270},[3560],{"type":175,"value":1303},{"type":170,"tag":239,"props":3562,"children":3563},{"style":276},[3564],{"type":175,"value":1765},{"type":170,"tag":239,"props":3566,"children":3567},{"style":282},[3568],{"type":175,"value":3569},"'self'",{"type":170,"tag":239,"props":3571,"children":3572},{"style":276},[3573],{"type":175,"value":1765},{"type":170,"tag":239,"props":3575,"children":3576},{"style":270},[3577],{"type":175,"value":3578},"]",{"type":170,"tag":239,"props":3580,"children":3581},{"style":349},[3582],{"type":175,"value":1034},{"type":170,"tag":239,"props":3584,"children":3585},{"class":241,"line":332},[3586],{"type":170,"tag":239,"props":3587,"children":3588},{"style":1009},[3589],{"type":175,"value":3590},"  // 限制 base 标签的 URI 为源地址\n",{"type":170,"tag":239,"props":3592,"children":3593},{"class":241,"line":340},[3594,3598,3603,3607,3611,3615,3619,3623,3627,3631],{"type":170,"tag":239,"props":3595,"children":3596},{"style":276},[3597],{"type":175,"value":1020},{"type":170,"tag":239,"props":3599,"children":3600},{"style":3545},[3601],{"type":175,"value":3602},"base-uri",{"type":170,"tag":239,"props":3604,"children":3605},{"style":276},[3606],{"type":175,"value":279},{"type":170,"tag":239,"props":3608,"children":3609},{"style":349},[3610],{"type":175,"value":1399},{"type":170,"tag":239,"props":3612,"children":3613},{"style":270},[3614],{"type":175,"value":1303},{"type":170,"tag":239,"props":3616,"children":3617},{"style":276},[3618],{"type":175,"value":1765},{"type":170,"tag":239,"props":3620,"children":3621},{"style":282},[3622],{"type":175,"value":3569},{"type":170,"tag":239,"props":3624,"children":3625},{"style":276},[3626],{"type":175,"value":1765},{"type":170,"tag":239,"props":3628,"children":3629},{"style":270},[3630],{"type":175,"value":3578},{"type":170,"tag":239,"props":3632,"children":3633},{"style":349},[3634],{"type":175,"value":1034},{"type":170,"tag":239,"props":3636,"children":3637},{"class":241,"line":1065},[3638],{"type":170,"tag":239,"props":3639,"children":3640},{"style":1009},[3641],{"type":175,"value":3642},"  // 禁止通过 HTTP 协议加载内容\n",{"type":170,"tag":239,"props":3644,"children":3645},{"class":241,"line":1074},[3646,3650,3655,3659,3663,3668],{"type":170,"tag":239,"props":3647,"children":3648},{"style":276},[3649],{"type":175,"value":1020},{"type":170,"tag":239,"props":3651,"children":3652},{"style":3545},[3653],{"type":175,"value":3654},"block-all-mixed-content",{"type":170,"tag":239,"props":3656,"children":3657},{"style":276},[3658],{"type":175,"value":279},{"type":170,"tag":239,"props":3660,"children":3661},{"style":349},[3662],{"type":175,"value":1399},{"type":170,"tag":239,"props":3664,"children":3665},{"style":270},[3666],{"type":175,"value":3667}," []",{"type":170,"tag":239,"props":3669,"children":3670},{"style":349},[3671],{"type":175,"value":1034},{"type":170,"tag":239,"props":3673,"children":3674},{"class":241,"line":1095},[3675],{"type":170,"tag":239,"props":3676,"children":3677},{"style":1009},[3678],{"type":175,"value":3679},"  // 限制字体加载地址\n",{"type":170,"tag":239,"props":3681,"children":3682},{"class":241,"line":1104},[3683,3687,3692,3696,3700,3704,3708,3712,3716,3720,3724,3729,3733,3737,3741,3746,3750,3754],{"type":170,"tag":239,"props":3684,"children":3685},{"style":276},[3686],{"type":175,"value":1020},{"type":170,"tag":239,"props":3688,"children":3689},{"style":3545},[3690],{"type":175,"value":3691},"font-src",{"type":170,"tag":239,"props":3693,"children":3694},{"style":276},[3695],{"type":175,"value":279},{"type":170,"tag":239,"props":3697,"children":3698},{"style":349},[3699],{"type":175,"value":1399},{"type":170,"tag":239,"props":3701,"children":3702},{"style":270},[3703],{"type":175,"value":1303},{"type":170,"tag":239,"props":3705,"children":3706},{"style":276},[3707],{"type":175,"value":1765},{"type":170,"tag":239,"props":3709,"children":3710},{"style":282},[3711],{"type":175,"value":3569},{"type":170,"tag":239,"props":3713,"children":3714},{"style":276},[3715],{"type":175,"value":1765},{"type":170,"tag":239,"props":3717,"children":3718},{"style":349},[3719],{"type":175,"value":564},{"type":170,"tag":239,"props":3721,"children":3722},{"style":276},[3723],{"type":175,"value":569},{"type":170,"tag":239,"props":3725,"children":3726},{"style":282},[3727],{"type":175,"value":3728},"https:",{"type":170,"tag":239,"props":3730,"children":3731},{"style":276},[3732],{"type":175,"value":279},{"type":170,"tag":239,"props":3734,"children":3735},{"style":349},[3736],{"type":175,"value":564},{"type":170,"tag":239,"props":3738,"children":3739},{"style":276},[3740],{"type":175,"value":569},{"type":170,"tag":239,"props":3742,"children":3743},{"style":282},[3744],{"type":175,"value":3745},"data:",{"type":170,"tag":239,"props":3747,"children":3748},{"style":276},[3749],{"type":175,"value":279},{"type":170,"tag":239,"props":3751,"children":3752},{"style":270},[3753],{"type":175,"value":3578},{"type":170,"tag":239,"props":3755,"children":3756},{"style":349},[3757],{"type":175,"value":1034},{"type":170,"tag":239,"props":3759,"children":3760},{"class":241,"line":1125},[3761],{"type":170,"tag":239,"props":3762,"children":3763},{"style":1009},[3764],{"type":175,"value":3765},"  // 限制嵌入的外部资源\n",{"type":170,"tag":239,"props":3767,"children":3768},{"class":241,"line":1134},[3769,3773,3777,3781,3785,3789,3793,3797,3801,3805],{"type":170,"tag":239,"props":3770,"children":3771},{"style":276},[3772],{"type":175,"value":1020},{"type":170,"tag":239,"props":3774,"children":3775},{"style":3545},[3776],{"type":175,"value":914},{"type":170,"tag":239,"props":3778,"children":3779},{"style":276},[3780],{"type":175,"value":279},{"type":170,"tag":239,"props":3782,"children":3783},{"style":349},[3784],{"type":175,"value":1399},{"type":170,"tag":239,"props":3786,"children":3787},{"style":270},[3788],{"type":175,"value":1303},{"type":170,"tag":239,"props":3790,"children":3791},{"style":276},[3792],{"type":175,"value":1765},{"type":170,"tag":239,"props":3794,"children":3795},{"style":282},[3796],{"type":175,"value":3569},{"type":170,"tag":239,"props":3798,"children":3799},{"style":276},[3800],{"type":175,"value":1765},{"type":170,"tag":239,"props":3802,"children":3803},{"style":270},[3804],{"type":175,"value":3578},{"type":170,"tag":239,"props":3806,"children":3807},{"style":349},[3808],{"type":175,"value":1034},{"type":170,"tag":239,"props":3810,"children":3811},{"class":241,"line":1155},[3812],{"type":170,"tag":239,"props":3813,"children":3814},{"style":1009},[3815],{"type":175,"value":3816},"  // 限制图片加载地址\n",{"type":170,"tag":239,"props":3818,"children":3819},{"class":241,"line":1164},[3820,3824,3829,3833,3837,3841,3845,3849,3853,3857,3861,3865,3869,3873],{"type":170,"tag":239,"props":3821,"children":3822},{"style":276},[3823],{"type":175,"value":1020},{"type":170,"tag":239,"props":3825,"children":3826},{"style":3545},[3827],{"type":175,"value":3828},"img-src",{"type":170,"tag":239,"props":3830,"children":3831},{"style":276},[3832],{"type":175,"value":279},{"type":170,"tag":239,"props":3834,"children":3835},{"style":349},[3836],{"type":175,"value":1399},{"type":170,"tag":239,"props":3838,"children":3839},{"style":270},[3840],{"type":175,"value":1303},{"type":170,"tag":239,"props":3842,"children":3843},{"style":276},[3844],{"type":175,"value":1765},{"type":170,"tag":239,"props":3846,"children":3847},{"style":282},[3848],{"type":175,"value":3569},{"type":170,"tag":239,"props":3850,"children":3851},{"style":276},[3852],{"type":175,"value":1765},{"type":170,"tag":239,"props":3854,"children":3855},{"style":349},[3856],{"type":175,"value":564},{"type":170,"tag":239,"props":3858,"children":3859},{"style":276},[3860],{"type":175,"value":569},{"type":170,"tag":239,"props":3862,"children":3863},{"style":282},[3864],{"type":175,"value":3745},{"type":170,"tag":239,"props":3866,"children":3867},{"style":276},[3868],{"type":175,"value":279},{"type":170,"tag":239,"props":3870,"children":3871},{"style":270},[3872],{"type":175,"value":3578},{"type":170,"tag":239,"props":3874,"children":3875},{"style":349},[3876],{"type":175,"value":1034},{"type":170,"tag":239,"props":3878,"children":3879},{"class":241,"line":1185},[3880],{"type":170,"tag":239,"props":3881,"children":3882},{"style":1009},[3883],{"type":175,"value":3884},"  // 禁用 object 标签\n",{"type":170,"tag":239,"props":3886,"children":3887},{"class":241,"line":1194},[3888,3892,3897,3901,3905,3909,3913,3918,3922,3926],{"type":170,"tag":239,"props":3889,"children":3890},{"style":276},[3891],{"type":175,"value":1020},{"type":170,"tag":239,"props":3893,"children":3894},{"style":3545},[3895],{"type":175,"value":3896},"object-src",{"type":170,"tag":239,"props":3898,"children":3899},{"style":276},[3900],{"type":175,"value":279},{"type":170,"tag":239,"props":3902,"children":3903},{"style":349},[3904],{"type":175,"value":1399},{"type":170,"tag":239,"props":3906,"children":3907},{"style":270},[3908],{"type":175,"value":1303},{"type":170,"tag":239,"props":3910,"children":3911},{"style":276},[3912],{"type":175,"value":1765},{"type":170,"tag":239,"props":3914,"children":3915},{"style":282},[3916],{"type":175,"value":3917},"'none'",{"type":170,"tag":239,"props":3919,"children":3920},{"style":276},[3921],{"type":175,"value":1765},{"type":170,"tag":239,"props":3923,"children":3924},{"style":270},[3925],{"type":175,"value":3578},{"type":170,"tag":239,"props":3927,"children":3928},{"style":349},[3929],{"type":175,"value":1034},{"type":170,"tag":239,"props":3931,"children":3932},{"class":241,"line":1215},[3933],{"type":170,"tag":239,"props":3934,"children":3935},{"style":1009},[3936],{"type":175,"value":3937},"  // 只从源地址加载脚本\n",{"type":170,"tag":239,"props":3939,"children":3940},{"class":241,"line":1224},[3941,3945,3950,3954,3958,3962,3966,3970,3974,3978],{"type":170,"tag":239,"props":3942,"children":3943},{"style":276},[3944],{"type":175,"value":1020},{"type":170,"tag":239,"props":3946,"children":3947},{"style":3545},[3948],{"type":175,"value":3949},"script-src",{"type":170,"tag":239,"props":3951,"children":3952},{"style":276},[3953],{"type":175,"value":279},{"type":170,"tag":239,"props":3955,"children":3956},{"style":349},[3957],{"type":175,"value":1399},{"type":170,"tag":239,"props":3959,"children":3960},{"style":270},[3961],{"type":175,"value":1303},{"type":170,"tag":239,"props":3963,"children":3964},{"style":276},[3965],{"type":175,"value":1765},{"type":170,"tag":239,"props":3967,"children":3968},{"style":282},[3969],{"type":175,"value":3569},{"type":170,"tag":239,"props":3971,"children":3972},{"style":276},[3973],{"type":175,"value":1765},{"type":170,"tag":239,"props":3975,"children":3976},{"style":270},[3977],{"type":175,"value":3578},{"type":170,"tag":239,"props":3979,"children":3980},{"style":349},[3981],{"type":175,"value":1034},{"type":170,"tag":239,"props":3983,"children":3984},{"class":241,"line":1245},[3985],{"type":170,"tag":239,"props":3986,"children":3987},{"style":1009},[3988],{"type":175,"value":3989},"  // 禁用内联脚本\n",{"type":170,"tag":239,"props":3991,"children":3992},{"class":241,"line":1254},[3993],{"type":170,"tag":239,"props":3994,"children":3995},{"style":1009},[3996],{"type":175,"value":3997},"  // ？这里没能理解\n",{"type":170,"tag":239,"props":3999,"children":4000},{"class":241,"line":1263},[4001],{"type":170,"tag":239,"props":4002,"children":4003},{"style":1009},[4004],{"type":175,"value":4005},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":170,"tag":239,"props":4007,"children":4008},{"class":241,"line":1272},[4009],{"type":170,"tag":239,"props":4010,"children":4011},{"style":1009},[4012],{"type":175,"value":4013},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":170,"tag":239,"props":4015,"children":4016},{"class":241,"line":1333},[4017,4021,4026,4030,4034,4038,4042,4046,4050,4054,4058],{"type":170,"tag":239,"props":4018,"children":4019},{"style":276},[4020],{"type":175,"value":1020},{"type":170,"tag":239,"props":4022,"children":4023},{"style":3545},[4024],{"type":175,"value":4025},"script-src-attr",{"type":170,"tag":239,"props":4027,"children":4028},{"style":276},[4029],{"type":175,"value":279},{"type":170,"tag":239,"props":4031,"children":4032},{"style":349},[4033],{"type":175,"value":1399},{"type":170,"tag":239,"props":4035,"children":4036},{"style":270},[4037],{"type":175,"value":1303},{"type":170,"tag":239,"props":4039,"children":4040},{"style":276},[4041],{"type":175,"value":1765},{"type":170,"tag":239,"props":4043,"children":4044},{"style":282},[4045],{"type":175,"value":3917},{"type":170,"tag":239,"props":4047,"children":4048},{"style":276},[4049],{"type":175,"value":1765},{"type":170,"tag":239,"props":4051,"children":4052},{"style":270},[4053],{"type":175,"value":3578},{"type":170,"tag":239,"props":4055,"children":4056},{"style":349},[4057],{"type":175,"value":564},{"type":170,"tag":239,"props":4059,"children":4060},{"style":270},[4061],{"type":175,"value":4062},"‘\n",{"type":170,"tag":239,"props":4064,"children":4065},{"class":241,"line":1407},[4066],{"type":170,"tag":239,"props":4067,"children":4068},{"style":1009},[4069],{"type":175,"value":4070},"  // 限制样式表加载地址\n",{"type":170,"tag":239,"props":4072,"children":4073},{"class":241,"line":1438},[4074,4078,4083,4087,4091,4095,4099,4103,4107,4111,4115,4119,4123,4127,4132,4137,4141,4145],{"type":170,"tag":239,"props":4075,"children":4076},{"style":276},[4077],{"type":175,"value":1020},{"type":170,"tag":239,"props":4079,"children":4080},{"style":3545},[4081],{"type":175,"value":4082},"style-src",{"type":170,"tag":239,"props":4084,"children":4085},{"style":276},[4086],{"type":175,"value":279},{"type":170,"tag":239,"props":4088,"children":4089},{"style":349},[4090],{"type":175,"value":1399},{"type":170,"tag":239,"props":4092,"children":4093},{"style":270},[4094],{"type":175,"value":1303},{"type":170,"tag":239,"props":4096,"children":4097},{"style":276},[4098],{"type":175,"value":1765},{"type":170,"tag":239,"props":4100,"children":4101},{"style":282},[4102],{"type":175,"value":3569},{"type":170,"tag":239,"props":4104,"children":4105},{"style":276},[4106],{"type":175,"value":1765},{"type":170,"tag":239,"props":4108,"children":4109},{"style":349},[4110],{"type":175,"value":564},{"type":170,"tag":239,"props":4112,"children":4113},{"style":276},[4114],{"type":175,"value":569},{"type":170,"tag":239,"props":4116,"children":4117},{"style":282},[4118],{"type":175,"value":3728},{"type":170,"tag":239,"props":4120,"children":4121},{"style":276},[4122],{"type":175,"value":279},{"type":170,"tag":239,"props":4124,"children":4125},{"style":349},[4126],{"type":175,"value":564},{"type":170,"tag":239,"props":4128,"children":4129},{"style":276},[4130],{"type":175,"value":4131}," \"",{"type":170,"tag":239,"props":4133,"children":4134},{"style":282},[4135],{"type":175,"value":4136},"'unsafe-inline'",{"type":170,"tag":239,"props":4138,"children":4139},{"style":276},[4140],{"type":175,"value":1765},{"type":170,"tag":239,"props":4142,"children":4143},{"style":270},[4144],{"type":175,"value":3578},{"type":170,"tag":239,"props":4146,"children":4147},{"style":349},[4148],{"type":175,"value":1034},{"type":170,"tag":239,"props":4150,"children":4151},{"class":241,"line":1451},[4152],{"type":170,"tag":239,"props":4153,"children":4154},{"style":1009},[4155],{"type":175,"value":4156},"  // 不使用升级协议指令\n",{"type":170,"tag":239,"props":4158,"children":4159},{"class":241,"line":1460},[4160],{"type":170,"tag":239,"props":4161,"children":4162},{"style":1009},[4163],{"type":175,"value":4164},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":170,"tag":239,"props":4166,"children":4167},{"class":241,"line":1503},[4168],{"type":170,"tag":239,"props":4169,"children":4170},{"style":1009},[4171],{"type":175,"value":4172},"  // 所以默认不开启此指令\n",{"type":170,"tag":239,"props":4174,"children":4175},{"class":241,"line":1512},[4176,4180,4185,4189,4193],{"type":170,"tag":239,"props":4177,"children":4178},{"style":276},[4179],{"type":175,"value":1020},{"type":170,"tag":239,"props":4181,"children":4182},{"style":3545},[4183],{"type":175,"value":4184},"upgrade-insecure-requests",{"type":170,"tag":239,"props":4186,"children":4187},{"style":276},[4188],{"type":175,"value":279},{"type":170,"tag":239,"props":4190,"children":4191},{"style":349},[4192],{"type":175,"value":1399},{"type":170,"tag":239,"props":4194,"children":4195},{"style":270},[4196],{"type":175,"value":4197}," []\n",{"type":170,"tag":239,"props":4199,"children":4200},{"class":241,"line":1547},[4201],{"type":170,"tag":239,"props":4202,"children":4203},{"style":349},[4204],{"type":175,"value":1509},{"type":170,"tag":171,"props":4206,"children":4207},{},[4208,4210,4216,4218,4224],{"type":175,"value":4209},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":170,"tag":235,"props":4211,"children":4213},{"className":4212},[],[4214],{"type":175,"value":4215},"CSP 1.0",{"type":175,"value":4217}," 的兼容性，我没有找到最新版本规范（",{"type":170,"tag":235,"props":4219,"children":4221},{"className":4220},[],[4222],{"type":175,"value":4223},"CSP 3.0",{"type":175,"value":4225},"）的兼容性数据 😝。",{"type":170,"tag":171,"props":4227,"children":4228},{},[4229],{"type":170,"tag":892,"props":4230,"children":4233},{"alt":4231,"src":4232},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":170,"tag":439,"props":4235,"children":4237},{"id":4236},"移除下载文件后的打开按钮",[4238],{"type":175,"value":4239},"移除下载文件后的“打开”按钮",{"type":170,"tag":228,"props":4241,"children":4243},{"code":4242,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-Download-Options', 'noopen')\n",[4244],{"type":170,"tag":235,"props":4245,"children":4246},{"__ignoreMap":163},[4247],{"type":170,"tag":239,"props":4248,"children":4249},{"class":241,"line":242},[4250,4254,4258,4262,4266,4270,4275,4279,4283,4287,4292,4296],{"type":170,"tag":239,"props":4251,"children":4252},{"style":270},[4253],{"type":175,"value":459},{"type":170,"tag":239,"props":4255,"children":4256},{"style":349},[4257],{"type":175,"value":352},{"type":170,"tag":239,"props":4259,"children":4260},{"style":264},[4261],{"type":175,"value":542},{"type":170,"tag":239,"props":4263,"children":4264},{"style":270},[4265],{"type":175,"value":273},{"type":170,"tag":239,"props":4267,"children":4268},{"style":276},[4269],{"type":175,"value":279},{"type":170,"tag":239,"props":4271,"children":4272},{"style":282},[4273],{"type":175,"value":4274},"X-Download-Options",{"type":170,"tag":239,"props":4276,"children":4277},{"style":276},[4278],{"type":175,"value":279},{"type":170,"tag":239,"props":4280,"children":4281},{"style":349},[4282],{"type":175,"value":564},{"type":170,"tag":239,"props":4284,"children":4285},{"style":276},[4286],{"type":175,"value":569},{"type":170,"tag":239,"props":4288,"children":4289},{"style":282},[4290],{"type":175,"value":4291},"noopen",{"type":170,"tag":239,"props":4293,"children":4294},{"style":276},[4295],{"type":175,"value":279},{"type":170,"tag":239,"props":4297,"children":4298},{"style":270},[4299],{"type":175,"value":294},{"type":170,"tag":171,"props":4301,"children":4302},{},[4303,4305,4310],{"type":175,"value":4304},"在下载文件时，",{"type":170,"tag":235,"props":4306,"children":4308},{"className":4307},[],[4309],{"type":175,"value":4274},{"type":175,"value":4311}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":170,"tag":439,"props":4313,"children":4315},{"id":4314},"开启-dns-预取",[4316],{"type":175,"value":4317},"开启 DNS 预取",{"type":170,"tag":171,"props":4319,"children":4320},{},[4321,4323,4329],{"type":175,"value":4322},"通过设置 ",{"type":170,"tag":235,"props":4324,"children":4326},{"className":4325},[],[4327],{"type":175,"value":4328},"X-DNS-Prefetch-Control",{"type":175,"value":4330}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":170,"tag":171,"props":4332,"children":4333},{},[4334,4336,4343],{"type":175,"value":4335},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":170,"tag":182,"props":4337,"children":4340},{"href":4338,"rel":4339},"https://github.com/helmetjs/helmet/issues/111",[759],[4341],{"type":175,"value":4342},"Issue",{"type":175,"value":749},{"type":170,"tag":228,"props":4345,"children":4347},{"code":4346,"language":231,"meta":163,"className":232,"style":163},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4348],{"type":170,"tag":235,"props":4349,"children":4350},{"__ignoreMap":163},[4351],{"type":170,"tag":239,"props":4352,"children":4353},{"class":241,"line":242},[4354,4358,4362,4366,4370,4374,4378,4382,4386,4390,4395,4399],{"type":170,"tag":239,"props":4355,"children":4356},{"style":270},[4357],{"type":175,"value":459},{"type":170,"tag":239,"props":4359,"children":4360},{"style":349},[4361],{"type":175,"value":352},{"type":170,"tag":239,"props":4363,"children":4364},{"style":264},[4365],{"type":175,"value":542},{"type":170,"tag":239,"props":4367,"children":4368},{"style":270},[4369],{"type":175,"value":273},{"type":170,"tag":239,"props":4371,"children":4372},{"style":276},[4373],{"type":175,"value":279},{"type":170,"tag":239,"props":4375,"children":4376},{"style":282},[4377],{"type":175,"value":4328},{"type":170,"tag":239,"props":4379,"children":4380},{"style":276},[4381],{"type":175,"value":279},{"type":170,"tag":239,"props":4383,"children":4384},{"style":349},[4385],{"type":175,"value":564},{"type":170,"tag":239,"props":4387,"children":4388},{"style":276},[4389],{"type":175,"value":569},{"type":170,"tag":239,"props":4391,"children":4392},{"style":282},[4393],{"type":175,"value":4394},"on",{"type":170,"tag":239,"props":4396,"children":4397},{"style":276},[4398],{"type":175,"value":279},{"type":170,"tag":239,"props":4400,"children":4401},{"style":270},[4402],{"type":175,"value":294},{"type":170,"tag":408,"props":4404,"children":4406},{"id":4405},"阅读更多",[4407],{"type":175,"value":4405},{"type":170,"tag":171,"props":4409,"children":4410},{},[4411],{"type":175,"value":4412},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":170,"tag":3458,"props":4414,"children":4415},{},[4416],{"type":170,"tag":2723,"props":4417,"children":4418},{},[4419,4421],{"type":175,"value":4420},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":170,"tag":178,"props":4422,"children":4423},{},[4424],{"type":170,"tag":182,"props":4425,"children":4429},{"href":4426,"ariaDescribedBy":4427,"dataFootnoteRef":163,"id":4428},"#user-content-fn-secure-cookie",[186],"user-content-fnref-secure-cookie",[4430],{"type":175,"value":4431},"13",{"type":170,"tag":171,"props":4433,"children":4434},{},[4435,4437,4444,4446,4453],{"type":175,"value":4436},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":170,"tag":182,"props":4438,"children":4441},{"href":4439,"rel":4440},"https://owasp.org/www-project-secure-headers/",[759],[4442],{"type":175,"value":4443},"OWASP Secure Headers Project",{"type":175,"value":4445},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":170,"tag":182,"props":4447,"children":4450},{"href":4448,"rel":4449},"https://infosec.mozilla.org/guidelines/web_security",[759],[4451],{"type":175,"value":4452},"Web Security",{"type":175,"value":4454},"。以下是一些额外的可供探索的页面：",{"type":170,"tag":3458,"props":4456,"children":4457},{},[4458,4468,4478],{"type":170,"tag":2723,"props":4459,"children":4460},{},[4461],{"type":170,"tag":182,"props":4462,"children":4465},{"href":4463,"rel":4464},"https://www.zhihu.com/question/21979782",[759],[4466],{"type":175,"value":4467},"Content Security Policy (CSP) 是什么？",{"type":170,"tag":2723,"props":4469,"children":4470},{},[4471],{"type":170,"tag":182,"props":4472,"children":4475},{"href":4473,"rel":4474},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[759],[4476],{"type":175,"value":4477},"CORS@MDN",{"type":170,"tag":2723,"props":4479,"children":4480},{},[4481],{"type":170,"tag":182,"props":4482,"children":4485},{"href":4483,"rel":4484},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[759],[4486],{"type":175,"value":4487},"OWASP Top 10 2017（RC2）",{"type":170,"tag":4489,"props":4490,"children":4493},"section",{"className":4491,"dataFootnotes":163},[4492],"footnotes",[4494,4501],{"type":170,"tag":408,"props":4495,"children":4498},{"className":4496,"id":186},[4497],"sr-only",[4499],{"type":175,"value":4500},"Footnotes",{"type":170,"tag":2719,"props":4502,"children":4503},{},[4504,4526,4545,4564,4581,4600,4619,4632,4650,4669,4688,4707,4726],{"type":170,"tag":2723,"props":4505,"children":4507},{"id":4506},"user-content-fn-helmet",[4508,4515,4517],{"type":170,"tag":182,"props":4509,"children":4512},{"href":4510,"rel":4511},"https://helmetjs.github.io/",[759],[4513],{"type":175,"value":4514},"HELMET",{"type":175,"value":4516}," ",{"type":170,"tag":182,"props":4518,"children":4523},{"href":4519,"ariaLabel":4520,"className":4521,"dataFootnoteBackref":163},"#user-content-fnref-helmet","Back to reference 1",[4522],"data-footnote-backref",[4524],{"type":175,"value":4525},"↩",{"type":170,"tag":2723,"props":4527,"children":4529},{"id":4528},"user-content-fn-dns-rebinding-1",[4530,4537,4538],{"type":170,"tag":182,"props":4531,"children":4534},{"href":4532,"rel":4533},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[759],[4535],{"type":175,"value":4536},"来自微信外挂的安全风险",{"type":175,"value":4516},{"type":170,"tag":182,"props":4539,"children":4543},{"href":4540,"ariaLabel":4541,"className":4542,"dataFootnoteBackref":163},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4522],[4544],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4546,"children":4548},{"id":4547},"user-content-fn-dns-rebinding-2",[4549,4556,4557],{"type":170,"tag":182,"props":4550,"children":4553},{"href":4551,"rel":4552},"https://github.com/helmetjs/helmet/issues/182",[759],[4554],{"type":175,"value":4555},"GitHub Issue",{"type":175,"value":4516},{"type":170,"tag":182,"props":4558,"children":4562},{"href":4559,"ariaLabel":4560,"className":4561,"dataFootnoteBackref":163},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4522],[4563],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4565,"children":4567},{"id":4566},"user-content-fn-shp",[4568,4573,4574],{"type":170,"tag":182,"props":4569,"children":4571},{"href":4439,"rel":4570},[759],[4572],{"type":175,"value":4443},{"type":175,"value":4516},{"type":170,"tag":182,"props":4575,"children":4579},{"href":4576,"ariaLabel":4577,"className":4578,"dataFootnoteBackref":163},"#user-content-fnref-shp","Back to reference 4",[4522],[4580],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4582,"children":4584},{"id":4583},"user-content-fn-xss-auditor",[4585,4592,4593],{"type":170,"tag":182,"props":4586,"children":4589},{"href":4587,"rel":4588},"https://www.chromestatus.com/feature/5021976655560704",[759],[4590],{"type":175,"value":4591},"XSS Auditor (removed)",{"type":175,"value":4516},{"type":170,"tag":182,"props":4594,"children":4598},{"href":4595,"ariaLabel":4596,"className":4597,"dataFootnoteBackref":163},"#user-content-fnref-xss-auditor","Back to reference 5",[4522],[4599],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4601,"children":4603},{"id":4602},"user-content-fn-delete-xss-auditor",[4604,4611,4612],{"type":170,"tag":182,"props":4605,"children":4608},{"href":4606,"rel":4607},"https://zhuanlan.zhihu.com/p/74288648",[759],[4609],{"type":175,"value":4610},"Google 将删除 Chrome 内置的 XSS 保护",{"type":175,"value":4516},{"type":170,"tag":182,"props":4613,"children":4617},{"href":4614,"ariaLabel":4615,"className":4616,"dataFootnoteBackref":163},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4522],[4618],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4620,"children":4622},{"id":4621},"user-content-fn-referer",[4623,4625],{"type":175,"value":4624},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":170,"tag":182,"props":4626,"children":4630},{"href":4627,"ariaLabel":4628,"className":4629,"dataFootnoteBackref":163},"#user-content-fnref-referer","Back to reference 7",[4522],[4631],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4633,"children":4635},{"id":4634},"user-content-fn-timeend",[4636,4642,4643],{"type":170,"tag":182,"props":4637,"children":4640},{"href":4638,"rel":4639},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[759],[4641],{"type":175,"value":2530},{"type":175,"value":4516},{"type":170,"tag":182,"props":4644,"children":4648},{"href":4645,"ariaLabel":4646,"className":4647,"dataFootnoteBackref":163},"#user-content-fnref-timeend","Back to reference 8",[4522],[4649],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4651,"children":4653},{"id":4652},"user-content-fn-chrome-ct",[4654,4661,4662],{"type":170,"tag":182,"props":4655,"children":4658},{"href":4656,"rel":4657},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[759],[4659],{"type":175,"value":4660},"Chrome 证书透明度（CT）相关政策",{"type":175,"value":4516},{"type":170,"tag":182,"props":4663,"children":4667},{"href":4664,"ariaLabel":4665,"className":4666,"dataFootnoteBackref":163},"#user-content-fnref-chrome-ct","Back to reference 9",[4522],[4668],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4670,"children":4672},{"id":4671},"user-content-fn-ct",[4673,4680,4681],{"type":170,"tag":182,"props":4674,"children":4677},{"href":4675,"rel":4676},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[759],[4678],{"type":175,"value":4679},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":175,"value":4516},{"type":170,"tag":182,"props":4682,"children":4686},{"href":4683,"ariaLabel":4684,"className":4685,"dataFootnoteBackref":163},"#user-content-fnref-ct","Back to reference 10",[4522],[4687],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4689,"children":4691},{"id":4690},"user-content-fn-pdf-reader",[4692,4699,4700],{"type":170,"tag":182,"props":4693,"children":4696},{"href":4694,"rel":4695},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[759],[4697],{"type":175,"value":4698},"Cross Domain Configuration",{"type":175,"value":4516},{"type":170,"tag":182,"props":4701,"children":4705},{"href":4702,"ariaLabel":4703,"className":4704,"dataFootnoteBackref":163},"#user-content-fnref-pdf-reader","Back to reference 11",[4522],[4706],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4708,"children":4710},{"id":4709},"user-content-fn-csp-standard",[4711,4718,4719],{"type":170,"tag":182,"props":4712,"children":4715},{"href":4713,"rel":4714},"https://www.w3.org/TR/CSP/",[759],[4716],{"type":175,"value":4717},"Content Security Policy Level 3",{"type":175,"value":4516},{"type":170,"tag":182,"props":4720,"children":4724},{"href":4721,"ariaLabel":4722,"className":4723,"dataFootnoteBackref":163},"#user-content-fnref-csp-standard","Back to reference 12",[4522],[4725],{"type":175,"value":4525},{"type":170,"tag":2723,"props":4727,"children":4729},{"id":4728},"user-content-fn-secure-cookie",[4730,4737,4738],{"type":170,"tag":182,"props":4731,"children":4734},{"href":4732,"rel":4733},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[759],[4735],{"type":175,"value":4736},"Secure-Cookie",{"type":175,"value":4516},{"type":170,"tag":182,"props":4739,"children":4743},{"href":4740,"ariaLabel":4741,"className":4742,"dataFootnoteBackref":163},"#user-content-fnref-secure-cookie","Back to reference 13",[4522],[4744],{"type":175,"value":4525},{"type":170,"tag":4746,"props":4747,"children":4748},"style",{},[4749],{"type":175,"value":4750},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":297,"depth":297,"links":4752},[4753,4766,4767],{"id":410,"depth":297,"text":413,"children":4754},[4755,4756,4757,4758,4759,4760,4761,4762,4763,4764,4765],{"id":441,"depth":306,"text":444},{"id":516,"depth":306,"text":519},{"id":606,"depth":306,"text":609},{"id":766,"depth":306,"text":766},{"id":925,"depth":306,"text":928},{"id":1936,"depth":306,"text":1939},{"id":2574,"depth":306,"text":2574},{"id":2683,"depth":306,"text":2686},{"id":3314,"depth":306,"text":3317},{"id":4236,"depth":306,"text":4239},{"id":4314,"depth":306,"text":4317},{"id":4405,"depth":297,"text":4405},{"id":186,"depth":297,"text":4500},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[4775,4779],{"_path":4776,"title":4777,"description":4778},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":4780,"title":4781,"description":163},"/_achieved/2020-10/noname","无题",1742958684946]