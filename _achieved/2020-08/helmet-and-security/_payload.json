[{"data":1,"prerenderedAt":4779},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":155,"/_achieved/2020-08/helmet-and-security-surround":4771},[4,35,86,92,119,125,149],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"读书笔记 / Notes","/books",[90],{"title":91,"_path":88},"📕 读书笔记",{"title":93,"_path":94,"children":95},"吉他剧场 / Music","/music",[96,98,101,104,107,110,113,116],{"title":97,"_path":94},"🎸 FingerStyle！",{"title":99,"_path":100},"🌬️ 等待的风","/music/wind",{"title":102,"_path":103},"💕 约定的海洋","/music/ocean",{"title":105,"_path":106},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":108,"_path":109},"🌏 残酷天使的行动纲领","/music/eva",{"title":111,"_path":112},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":114,"_path":115},"🍷 Wu Wei","/music/wu-wei",{"title":117,"_path":118},"🌅 无题","/music/untitled",{"title":120,"_path":121,"children":122},"知识地图 / Maps","/maps",[123],{"title":124,"_path":121},"🏁 知识地图",{"title":126,"_path":127,"children":128},"造物 / Make","/tools",[129,131,134,137,140,143,146],{"title":130,"_path":127},"🧰 工具收集",{"title":132,"_path":133},"📕 博客","/tools/blog",{"title":135,"_path":136},"🥥 Coconut","/tools/coconut",{"title":138,"_path":139},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":141,"_path":142},"🌐 AnySort","/tools/anysort",{"title":144,"_path":145},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":147,"_path":148},"👓 Crapto","/tools/crypto-inline",{"title":150,"_path":151,"children":152},"我 / About","/hire",[153],{"title":154,"_path":151},"📬 技术简历",{"_path":156,"_dir":157,"_draft":158,"_partial":159,"_locale":160,"title":161,"description":162,"body":163,"_type":4765,"_id":4766,"_source":4767,"_file":4768,"_stem":4769,"_extension":4770},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库Helmet的原理，相关MIME嗅探、XSS、CSP、DNS预取等。",{"type":164,"children":165,"toc":4748},"root",[166,188,219,224,386,391,399,404,411,435,442,487,499,511,517,580,601,607,667,679,747,761,766,826,851,885,894,920,926,963,1704,1724,1931,1937,1962,2005,2013,2569,2574,2622,2658,2666,2678,2684,2708,2715,2738,2743,2973,2992,3304,3309,3315,3354,3364,3429,3441,3449,3454,3486,3498,4202,4223,4231,4237,4297,4309,4315,4328,4341,4400,4405,4410,4429,4452,4485,4742],{"type":167,"tag":168,"props":169,"children":170},"element","p",{},[171,174],{"type":172,"value":173},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":167,"tag":175,"props":176,"children":177},"sup",{},[178],{"type":167,"tag":179,"props":180,"children":185},"a",{"href":181,"ariaDescribedBy":182,"dataFootnoteRef":160,"id":184},"#user-content-fn-helmet",[183],"footnote-label","user-content-fnref-helmet",[186],{"type":172,"value":187},"1",{"type":167,"tag":168,"props":189,"children":190},{},[191,193,204,206,217],{"type":172,"value":192},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":167,"tag":175,"props":194,"children":195},{},[196],{"type":167,"tag":179,"props":197,"children":201},{"href":198,"ariaDescribedBy":199,"dataFootnoteRef":160,"id":200},"#user-content-fn-dns-rebinding-1",[183],"user-content-fnref-dns-rebinding-1",[202],{"type":172,"value":203},"2",{"type":172,"value":205}," 问题，它就无能为力",{"type":167,"tag":175,"props":207,"children":208},{},[209],{"type":167,"tag":179,"props":210,"children":214},{"href":211,"ariaDescribedBy":212,"dataFootnoteRef":160,"id":213},"#user-content-fn-dns-rebinding-2",[183],"user-content-fnref-dns-rebinding-2",[215],{"type":172,"value":216},"3",{"type":172,"value":218},"。不过尽管不是银弹，它确实还是很有效的。",{"type":167,"tag":168,"props":220,"children":221},{},[222],{"type":172,"value":223},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":167,"tag":225,"props":226,"children":230},"pre",{"code":227,"language":228,"meta":160,"className":229,"style":160},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[231],{"type":167,"tag":232,"props":233,"children":234},"code",{"__ignoreMap":160},[235,292,301,327,335],{"type":167,"tag":236,"props":237,"children":240},"span",{"class":238,"line":239},"line",1,[241,247,253,259,265,271,277,283,287],{"type":167,"tag":236,"props":242,"children":244},{"style":243},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[245],{"type":172,"value":246},"const",{"type":167,"tag":236,"props":248,"children":250},{"style":249},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[251],{"type":172,"value":252}," express",{"type":167,"tag":236,"props":254,"children":256},{"style":255},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[257],{"type":172,"value":258}," =",{"type":167,"tag":236,"props":260,"children":262},{"style":261},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[263],{"type":172,"value":264}," require",{"type":167,"tag":236,"props":266,"children":268},{"style":267},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[269],{"type":172,"value":270},"(",{"type":167,"tag":236,"props":272,"children":274},{"style":273},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[275],{"type":172,"value":276},"'",{"type":167,"tag":236,"props":278,"children":280},{"style":279},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[281],{"type":172,"value":282},"express",{"type":167,"tag":236,"props":284,"children":285},{"style":273},[286],{"type":172,"value":276},{"type":167,"tag":236,"props":288,"children":289},{"style":267},[290],{"type":172,"value":291},")\n",{"type":167,"tag":236,"props":293,"children":295},{"class":238,"line":294},2,[296],{"type":167,"tag":236,"props":297,"children":298},{"emptyLinePlaceholder":159},[299],{"type":172,"value":300},"\n",{"type":167,"tag":236,"props":302,"children":304},{"class":238,"line":303},3,[305,309,314,318,322],{"type":167,"tag":236,"props":306,"children":307},{"style":243},[308],{"type":172,"value":246},{"type":167,"tag":236,"props":310,"children":311},{"style":249},[312],{"type":172,"value":313}," app",{"type":167,"tag":236,"props":315,"children":316},{"style":255},[317],{"type":172,"value":258},{"type":167,"tag":236,"props":319,"children":320},{"style":261},[321],{"type":172,"value":252},{"type":167,"tag":236,"props":323,"children":324},{"style":267},[325],{"type":172,"value":326},"()\n",{"type":167,"tag":236,"props":328,"children":330},{"class":238,"line":329},4,[331],{"type":167,"tag":236,"props":332,"children":333},{"emptyLinePlaceholder":159},[334],{"type":172,"value":300},{"type":167,"tag":236,"props":336,"children":338},{"class":238,"line":337},5,[339,344,350,355,359,364,368,372,377,381],{"type":167,"tag":236,"props":340,"children":341},{"style":267},[342],{"type":172,"value":343},"app",{"type":167,"tag":236,"props":345,"children":347},{"style":346},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[348],{"type":172,"value":349},".",{"type":167,"tag":236,"props":351,"children":352},{"style":261},[353],{"type":172,"value":354},"use",{"type":167,"tag":236,"props":356,"children":357},{"style":267},[358],{"type":172,"value":270},{"type":167,"tag":236,"props":360,"children":361},{"style":261},[362],{"type":172,"value":363},"require",{"type":167,"tag":236,"props":365,"children":366},{"style":267},[367],{"type":172,"value":270},{"type":167,"tag":236,"props":369,"children":370},{"style":273},[371],{"type":172,"value":276},{"type":167,"tag":236,"props":373,"children":374},{"style":279},[375],{"type":172,"value":376},"helmet",{"type":167,"tag":236,"props":378,"children":379},{"style":273},[380],{"type":172,"value":276},{"type":167,"tag":236,"props":382,"children":383},{"style":267},[384],{"type":172,"value":385},")())\n",{"type":167,"tag":168,"props":387,"children":388},{},[389],{"type":172,"value":390},"新的响应请求的 Headers 会变成这样：",{"type":167,"tag":225,"props":392,"children":394},{"code":393},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[395],{"type":167,"tag":232,"props":396,"children":397},{"__ignoreMap":160},[398],{"type":172,"value":393},{"type":167,"tag":168,"props":400,"children":401},{},[402],{"type":172,"value":403},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":167,"tag":405,"props":406,"children":408},"h2",{"id":407},"_11-种安全策略",[409],{"type":172,"value":410},"11 种安全策略",{"type":167,"tag":168,"props":412,"children":413},{},[414,416,422,433],{"type":172,"value":415},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":167,"tag":232,"props":417,"children":419},{"className":418},[],[420],{"type":172,"value":421},"OWASP Secure Headers",{"type":167,"tag":175,"props":423,"children":424},{},[425],{"type":167,"tag":179,"props":426,"children":430},{"href":427,"ariaDescribedBy":428,"dataFootnoteRef":160,"id":429},"#user-content-fn-shp",[183],"user-content-fnref-shp",[431],{"type":172,"value":432},"4",{"type":172,"value":434}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":167,"tag":436,"props":437,"children":439},"h3",{"id":438},"移除-x-powered-by",[440],{"type":172,"value":441},"移除 X-Powered-By",{"type":167,"tag":225,"props":443,"children":445},{"code":444,"language":228,"meta":160,"className":229,"style":160},"response.removeHeader('X-Powered-By')\n",[446],{"type":167,"tag":232,"props":447,"children":448},{"__ignoreMap":160},[449],{"type":167,"tag":236,"props":450,"children":451},{"class":238,"line":239},[452,457,461,466,470,474,479,483],{"type":167,"tag":236,"props":453,"children":454},{"style":267},[455],{"type":172,"value":456},"response",{"type":167,"tag":236,"props":458,"children":459},{"style":346},[460],{"type":172,"value":349},{"type":167,"tag":236,"props":462,"children":463},{"style":261},[464],{"type":172,"value":465},"removeHeader",{"type":167,"tag":236,"props":467,"children":468},{"style":267},[469],{"type":172,"value":270},{"type":167,"tag":236,"props":471,"children":472},{"style":273},[473],{"type":172,"value":276},{"type":167,"tag":236,"props":475,"children":476},{"style":279},[477],{"type":172,"value":478},"X-Powered-By",{"type":167,"tag":236,"props":480,"children":481},{"style":273},[482],{"type":172,"value":276},{"type":167,"tag":236,"props":484,"children":485},{"style":267},[486],{"type":172,"value":291},{"type":167,"tag":168,"props":488,"children":489},{},[490,492,497],{"type":172,"value":491},"一些框架会在请求头中添加 ",{"type":167,"tag":232,"props":493,"children":495},{"className":494},[],[496],{"type":172,"value":478},{"type":172,"value":498},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":167,"tag":168,"props":500,"children":501},{},[502,504,509],{"type":172,"value":503},"由于 Express 默认会给响应头增加 ",{"type":167,"tag":232,"props":505,"children":507},{"className":506},[],[508],{"type":172,"value":478},{"type":172,"value":510},"，所以 Helmet 直接把它移除了。",{"type":167,"tag":436,"props":512,"children":514},{"id":513},"移除-mime-嗅探",[515],{"type":172,"value":516},"移除 MIME 嗅探",{"type":167,"tag":225,"props":518,"children":520},{"code":519,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[521],{"type":167,"tag":232,"props":522,"children":523},{"__ignoreMap":160},[524],{"type":167,"tag":236,"props":525,"children":526},{"class":238,"line":239},[527,531,535,540,544,548,553,557,562,567,572,576],{"type":167,"tag":236,"props":528,"children":529},{"style":267},[530],{"type":172,"value":456},{"type":167,"tag":236,"props":532,"children":533},{"style":346},[534],{"type":172,"value":349},{"type":167,"tag":236,"props":536,"children":537},{"style":261},[538],{"type":172,"value":539},"setHeader",{"type":167,"tag":236,"props":541,"children":542},{"style":267},[543],{"type":172,"value":270},{"type":167,"tag":236,"props":545,"children":546},{"style":273},[547],{"type":172,"value":276},{"type":167,"tag":236,"props":549,"children":550},{"style":279},[551],{"type":172,"value":552},"X-Content-Type-Options",{"type":167,"tag":236,"props":554,"children":555},{"style":273},[556],{"type":172,"value":276},{"type":167,"tag":236,"props":558,"children":559},{"style":346},[560],{"type":172,"value":561},",",{"type":167,"tag":236,"props":563,"children":564},{"style":273},[565],{"type":172,"value":566}," '",{"type":167,"tag":236,"props":568,"children":569},{"style":279},[570],{"type":172,"value":571},"nosniff",{"type":167,"tag":236,"props":573,"children":574},{"style":273},[575],{"type":172,"value":276},{"type":167,"tag":236,"props":577,"children":578},{"style":267},[579],{"type":172,"value":291},{"type":167,"tag":168,"props":581,"children":582},{},[583,585,591,593,599],{"type":172,"value":584},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":167,"tag":232,"props":586,"children":588},{"className":587},[],[589],{"type":172,"value":590},"Content-Type",{"type":172,"value":592},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":167,"tag":232,"props":594,"children":596},{"className":595},[],[597],{"type":172,"value":598},"X-Content-Type-Options = nosniff",{"type":172,"value":600}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":167,"tag":436,"props":602,"children":604},{"id":603},"移除-x-xss-protection",[605],{"type":172,"value":606},"移除 X-XSS-Protection",{"type":167,"tag":225,"props":608,"children":610},{"code":609,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('X-XSS-Protection', '0')\n",[611],{"type":167,"tag":232,"props":612,"children":613},{"__ignoreMap":160},[614],{"type":167,"tag":236,"props":615,"children":616},{"class":238,"line":239},[617,621,625,629,633,637,642,646,650,654,659,663],{"type":167,"tag":236,"props":618,"children":619},{"style":267},[620],{"type":172,"value":456},{"type":167,"tag":236,"props":622,"children":623},{"style":346},[624],{"type":172,"value":349},{"type":167,"tag":236,"props":626,"children":627},{"style":261},[628],{"type":172,"value":539},{"type":167,"tag":236,"props":630,"children":631},{"style":267},[632],{"type":172,"value":270},{"type":167,"tag":236,"props":634,"children":635},{"style":273},[636],{"type":172,"value":276},{"type":167,"tag":236,"props":638,"children":639},{"style":279},[640],{"type":172,"value":641},"X-XSS-Protection",{"type":167,"tag":236,"props":643,"children":644},{"style":273},[645],{"type":172,"value":276},{"type":167,"tag":236,"props":647,"children":648},{"style":346},[649],{"type":172,"value":561},{"type":167,"tag":236,"props":651,"children":652},{"style":273},[653],{"type":172,"value":566},{"type":167,"tag":236,"props":655,"children":656},{"style":279},[657],{"type":172,"value":658},"0",{"type":167,"tag":236,"props":660,"children":661},{"style":273},[662],{"type":172,"value":276},{"type":167,"tag":236,"props":664,"children":665},{"style":267},[666],{"type":172,"value":291},{"type":167,"tag":168,"props":668,"children":669},{},[670,672,677],{"type":172,"value":671},"不是应该打开 ",{"type":167,"tag":232,"props":673,"children":675},{"className":674},[],[676],{"type":172,"value":641},{"type":172,"value":678},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":167,"tag":168,"props":680,"children":681},{},[682,684,690,692,703,705,710,712,718,720,731,733,738,740,745],{"type":172,"value":683},"这得追溯回去年的 Chrome 移除 ",{"type":167,"tag":232,"props":685,"children":687},{"className":686},[],[688],{"type":172,"value":689},"XSS Auditor",{"type":172,"value":691},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了",{"type":167,"tag":175,"props":693,"children":694},{},[695],{"type":167,"tag":179,"props":696,"children":700},{"href":697,"ariaDescribedBy":698,"dataFootnoteRef":160,"id":699},"#user-content-fn-xss-auditor",[183],"user-content-fnref-xss-auditor",[701],{"type":172,"value":702},"5",{"type":172,"value":704},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":167,"tag":232,"props":706,"children":708},{"className":707},[],[709],{"type":172,"value":689},{"type":172,"value":711},"，并开始使用 ",{"type":167,"tag":232,"props":713,"children":715},{"className":714},[],[716],{"type":172,"value":717},"CSP",{"type":172,"value":719}," 等现代标准（更现代的标准）",{"type":167,"tag":175,"props":721,"children":722},{},[723],{"type":167,"tag":179,"props":724,"children":728},{"href":725,"ariaDescribedBy":726,"dataFootnoteRef":160,"id":727},"#user-content-fn-delete-xss-auditor",[183],"user-content-fnref-delete-xss-auditor",[729],{"type":172,"value":730},"6",{"type":172,"value":732},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":167,"tag":232,"props":734,"children":736},{"className":735},[],[737],{"type":172,"value":641},{"type":172,"value":739}," 这个响应头是让浏览器不要再用 ",{"type":167,"tag":232,"props":741,"children":743},{"className":742},[],[744],{"type":172,"value":689},{"type":172,"value":746},"。",{"type":167,"tag":168,"props":748,"children":749},{},[750,752,760],{"type":172,"value":751},"见：",{"type":167,"tag":179,"props":753,"children":757},{"href":754,"rel":755},"https://github.com/OWASP/CheatSheetSeries/issues/376",[756],"nofollow",[758],{"type":172,"value":759},"#376",{"type":172,"value":746},{"type":167,"tag":436,"props":762,"children":764},{"id":763},"禁止页面被嵌套",[765],{"type":172,"value":763},{"type":167,"tag":225,"props":767,"children":769},{"code":768,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[770],{"type":167,"tag":232,"props":771,"children":772},{"__ignoreMap":160},[773],{"type":167,"tag":236,"props":774,"children":775},{"class":238,"line":239},[776,780,784,788,792,796,801,805,809,813,818,822],{"type":167,"tag":236,"props":777,"children":778},{"style":267},[779],{"type":172,"value":456},{"type":167,"tag":236,"props":781,"children":782},{"style":346},[783],{"type":172,"value":349},{"type":167,"tag":236,"props":785,"children":786},{"style":261},[787],{"type":172,"value":539},{"type":167,"tag":236,"props":789,"children":790},{"style":267},[791],{"type":172,"value":270},{"type":167,"tag":236,"props":793,"children":794},{"style":273},[795],{"type":172,"value":276},{"type":167,"tag":236,"props":797,"children":798},{"style":279},[799],{"type":172,"value":800},"X-Frame-Options",{"type":167,"tag":236,"props":802,"children":803},{"style":273},[804],{"type":172,"value":276},{"type":167,"tag":236,"props":806,"children":807},{"style":346},[808],{"type":172,"value":561},{"type":167,"tag":236,"props":810,"children":811},{"style":273},[812],{"type":172,"value":566},{"type":167,"tag":236,"props":814,"children":815},{"style":279},[816],{"type":172,"value":817},"SAMEORIGIN",{"type":167,"tag":236,"props":819,"children":820},{"style":273},[821],{"type":172,"value":276},{"type":167,"tag":236,"props":823,"children":824},{"style":267},[825],{"type":172,"value":291},{"type":167,"tag":168,"props":827,"children":828},{},[829,834,836,841,843,849],{"type":167,"tag":232,"props":830,"children":832},{"className":831},[],[833],{"type":172,"value":800},{"type":172,"value":835}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":167,"tag":232,"props":837,"children":839},{"className":838},[],[840],{"type":172,"value":800},{"type":172,"value":842}," 为 ",{"type":167,"tag":232,"props":844,"children":846},{"className":845},[],[847],{"type":172,"value":848},"SameOrigin",{"type":172,"value":850},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":167,"tag":168,"props":852,"children":853},{},[854,856,862,864,869,870,876,878,883],{"type":172,"value":855},"本来它的值有三种选择，",{"type":167,"tag":232,"props":857,"children":859},{"className":858},[],[860],{"type":172,"value":861},"Deny",{"type":172,"value":863},"、",{"type":167,"tag":232,"props":865,"children":867},{"className":866},[],[868],{"type":172,"value":848},{"type":172,"value":863},{"type":167,"tag":232,"props":871,"children":873},{"className":872},[],[874],{"type":172,"value":875},"AllowFrom",{"type":172,"value":877},"。但 ",{"type":167,"tag":232,"props":879,"children":881},{"className":880},[],[882],{"type":172,"value":875},{"type":172,"value":884}," 因为其兼容性原因，被 Helmet 弃用：",{"type":167,"tag":168,"props":886,"children":887},{},[888],{"type":167,"tag":889,"props":890,"children":893},"img",{"alt":891,"src":892},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":167,"tag":168,"props":895,"children":896},{},[897,899,904,906,912,914,919],{"type":172,"value":898},"此外，可以在 ",{"type":167,"tag":232,"props":900,"children":902},{"className":901},[],[903],{"type":172,"value":717},{"type":172,"value":905}," 中设置 ",{"type":167,"tag":232,"props":907,"children":909},{"className":908},[],[910],{"type":172,"value":911},"frame-ancestors",{"type":172,"value":913}," 指令来替代 ",{"type":167,"tag":232,"props":915,"children":917},{"className":916},[],[918],{"type":172,"value":800},{"type":172,"value":746},{"type":167,"tag":436,"props":921,"children":923},{"id":922},"移除-referer",[924],{"type":172,"value":925},"移除 Referer",{"type":167,"tag":168,"props":927,"children":928},{},[929,935,937,943,954,956,961],{"type":167,"tag":232,"props":930,"children":932},{"className":931},[],[933],{"type":172,"value":934},"Referrer-Policy",{"type":172,"value":936}," 可以控制浏览器请求头的 ",{"type":167,"tag":232,"props":938,"children":940},{"className":939},[],[941],{"type":172,"value":942},"Referer",{"type":167,"tag":175,"props":944,"children":945},{},[946],{"type":167,"tag":179,"props":947,"children":951},{"href":948,"ariaDescribedBy":949,"dataFootnoteRef":160,"id":950},"#user-content-fn-referer",[183],"user-content-fnref-referer",[952],{"type":172,"value":953},"7",{"type":172,"value":955}," 的显示方式。移除 ",{"type":167,"tag":232,"props":957,"children":959},{"className":958},[],[960],{"type":172,"value":942},{"type":172,"value":962}," 能保护用户的访问记录，防止隐私泄漏。",{"type":167,"tag":225,"props":964,"children":966},{"code":965,"language":228,"meta":160,"className":229,"style":160},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[967],{"type":167,"tag":232,"props":968,"children":969},{"__ignoreMap":160},[970,1001,1010,1032,1040,1060,1069,1090,1099,1120,1129,1150,1159,1180,1189,1210,1219,1240,1249,1258,1267,1328,1402,1433,1446,1455,1498,1507,1542,1575,1629,1674,1687,1696],{"type":167,"tag":236,"props":971,"children":972},{"class":238,"line":239},[973,977,982,986,991,996],{"type":167,"tag":236,"props":974,"children":975},{"style":243},[976],{"type":172,"value":246},{"type":167,"tag":236,"props":978,"children":979},{"style":249},[980],{"type":172,"value":981}," ALLOWED_TOKENS",{"type":167,"tag":236,"props":983,"children":984},{"style":255},[985],{"type":172,"value":258},{"type":167,"tag":236,"props":987,"children":988},{"style":255},[989],{"type":172,"value":990}," new",{"type":167,"tag":236,"props":992,"children":993},{"style":261},[994],{"type":172,"value":995}," Set",{"type":167,"tag":236,"props":997,"children":998},{"style":267},[999],{"type":172,"value":1000},"([\n",{"type":167,"tag":236,"props":1002,"children":1003},{"class":238,"line":294},[1004],{"type":167,"tag":236,"props":1005,"children":1007},{"style":1006},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1008],{"type":172,"value":1009},"  // 任何时候都不携带 Referer\n",{"type":167,"tag":236,"props":1011,"children":1012},{"class":238,"line":303},[1013,1018,1023,1027],{"type":167,"tag":236,"props":1014,"children":1015},{"style":273},[1016],{"type":172,"value":1017},"  '",{"type":167,"tag":236,"props":1019,"children":1020},{"style":279},[1021],{"type":172,"value":1022},"no-referrer",{"type":167,"tag":236,"props":1024,"children":1025},{"style":273},[1026],{"type":172,"value":276},{"type":167,"tag":236,"props":1028,"children":1029},{"style":346},[1030],{"type":172,"value":1031},",\n",{"type":167,"tag":236,"props":1033,"children":1034},{"class":238,"line":329},[1035],{"type":167,"tag":236,"props":1036,"children":1037},{"style":1006},[1038],{"type":172,"value":1039},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":167,"tag":236,"props":1041,"children":1042},{"class":238,"line":337},[1043,1047,1052,1056],{"type":167,"tag":236,"props":1044,"children":1045},{"style":273},[1046],{"type":172,"value":1017},{"type":167,"tag":236,"props":1048,"children":1049},{"style":279},[1050],{"type":172,"value":1051},"no-referrer-when-downgrade",{"type":167,"tag":236,"props":1053,"children":1054},{"style":273},[1055],{"type":172,"value":276},{"type":167,"tag":236,"props":1057,"children":1058},{"style":346},[1059],{"type":172,"value":1031},{"type":167,"tag":236,"props":1061,"children":1063},{"class":238,"line":1062},6,[1064],{"type":167,"tag":236,"props":1065,"children":1066},{"style":1006},[1067],{"type":172,"value":1068},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":167,"tag":236,"props":1070,"children":1072},{"class":238,"line":1071},7,[1073,1077,1082,1086],{"type":167,"tag":236,"props":1074,"children":1075},{"style":273},[1076],{"type":172,"value":1017},{"type":167,"tag":236,"props":1078,"children":1079},{"style":279},[1080],{"type":172,"value":1081},"same-origin",{"type":167,"tag":236,"props":1083,"children":1084},{"style":273},[1085],{"type":172,"value":276},{"type":167,"tag":236,"props":1087,"children":1088},{"style":346},[1089],{"type":172,"value":1031},{"type":167,"tag":236,"props":1091,"children":1093},{"class":238,"line":1092},8,[1094],{"type":167,"tag":236,"props":1095,"children":1096},{"style":1006},[1097],{"type":172,"value":1098},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":167,"tag":236,"props":1100,"children":1102},{"class":238,"line":1101},9,[1103,1107,1112,1116],{"type":167,"tag":236,"props":1104,"children":1105},{"style":273},[1106],{"type":172,"value":1017},{"type":167,"tag":236,"props":1108,"children":1109},{"style":279},[1110],{"type":172,"value":1111},"origin",{"type":167,"tag":236,"props":1113,"children":1114},{"style":273},[1115],{"type":172,"value":276},{"type":167,"tag":236,"props":1117,"children":1118},{"style":346},[1119],{"type":172,"value":1031},{"type":167,"tag":236,"props":1121,"children":1123},{"class":238,"line":1122},10,[1124],{"type":167,"tag":236,"props":1125,"children":1126},{"style":1006},[1127],{"type":172,"value":1128},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":167,"tag":236,"props":1130,"children":1132},{"class":238,"line":1131},11,[1133,1137,1142,1146],{"type":167,"tag":236,"props":1134,"children":1135},{"style":273},[1136],{"type":172,"value":1017},{"type":167,"tag":236,"props":1138,"children":1139},{"style":279},[1140],{"type":172,"value":1141},"strict-origin",{"type":167,"tag":236,"props":1143,"children":1144},{"style":273},[1145],{"type":172,"value":276},{"type":167,"tag":236,"props":1147,"children":1148},{"style":346},[1149],{"type":172,"value":1031},{"type":167,"tag":236,"props":1151,"children":1153},{"class":238,"line":1152},12,[1154],{"type":167,"tag":236,"props":1155,"children":1156},{"style":1006},[1157],{"type":172,"value":1158},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":167,"tag":236,"props":1160,"children":1162},{"class":238,"line":1161},13,[1163,1167,1172,1176],{"type":167,"tag":236,"props":1164,"children":1165},{"style":273},[1166],{"type":172,"value":1017},{"type":167,"tag":236,"props":1168,"children":1169},{"style":279},[1170],{"type":172,"value":1171},"origin-when-cross-origin",{"type":167,"tag":236,"props":1173,"children":1174},{"style":273},[1175],{"type":172,"value":276},{"type":167,"tag":236,"props":1177,"children":1178},{"style":346},[1179],{"type":172,"value":1031},{"type":167,"tag":236,"props":1181,"children":1183},{"class":238,"line":1182},14,[1184],{"type":167,"tag":236,"props":1185,"children":1186},{"style":1006},[1187],{"type":172,"value":1188},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":167,"tag":236,"props":1190,"children":1192},{"class":238,"line":1191},15,[1193,1197,1202,1206],{"type":167,"tag":236,"props":1194,"children":1195},{"style":273},[1196],{"type":172,"value":1017},{"type":167,"tag":236,"props":1198,"children":1199},{"style":279},[1200],{"type":172,"value":1201},"strict-origin-when-cross-origin",{"type":167,"tag":236,"props":1203,"children":1204},{"style":273},[1205],{"type":172,"value":276},{"type":167,"tag":236,"props":1207,"children":1208},{"style":346},[1209],{"type":172,"value":1031},{"type":167,"tag":236,"props":1211,"children":1213},{"class":238,"line":1212},16,[1214],{"type":167,"tag":236,"props":1215,"children":1216},{"style":1006},[1217],{"type":172,"value":1218},"  // 所有请求都携带上完整的 Referer\n",{"type":167,"tag":236,"props":1220,"children":1222},{"class":238,"line":1221},17,[1223,1227,1232,1236],{"type":167,"tag":236,"props":1224,"children":1225},{"style":273},[1226],{"type":172,"value":1017},{"type":167,"tag":236,"props":1228,"children":1229},{"style":279},[1230],{"type":172,"value":1231},"unsafe-url",{"type":167,"tag":236,"props":1233,"children":1234},{"style":273},[1235],{"type":172,"value":276},{"type":167,"tag":236,"props":1237,"children":1238},{"style":346},[1239],{"type":172,"value":1031},{"type":167,"tag":236,"props":1241,"children":1243},{"class":238,"line":1242},18,[1244],{"type":167,"tag":236,"props":1245,"children":1246},{"style":1006},[1247],{"type":172,"value":1248},"  // 无策略\n",{"type":167,"tag":236,"props":1250,"children":1252},{"class":238,"line":1251},19,[1253],{"type":167,"tag":236,"props":1254,"children":1255},{"style":273},[1256],{"type":172,"value":1257},"  ''\n",{"type":167,"tag":236,"props":1259,"children":1261},{"class":238,"line":1260},20,[1262],{"type":167,"tag":236,"props":1263,"children":1264},{"style":267},[1265],{"type":172,"value":1266},"])\n",{"type":167,"tag":236,"props":1268,"children":1270},{"class":238,"line":1269},21,[1271,1276,1281,1286,1292,1296,1301,1305,1309,1313,1318,1323],{"type":167,"tag":236,"props":1272,"children":1273},{"style":243},[1274],{"type":172,"value":1275},"function",{"type":167,"tag":236,"props":1277,"children":1278},{"style":261},[1279],{"type":172,"value":1280}," getHeaderValueFromOptions",{"type":167,"tag":236,"props":1282,"children":1283},{"style":346},[1284],{"type":172,"value":1285},"({",{"type":167,"tag":236,"props":1287,"children":1289},{"style":1288},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1290],{"type":172,"value":1291}," policy",{"type":167,"tag":236,"props":1293,"children":1294},{"style":255},[1295],{"type":172,"value":258},{"type":167,"tag":236,"props":1297,"children":1298},{"style":267},[1299],{"type":172,"value":1300}," [",{"type":167,"tag":236,"props":1302,"children":1303},{"style":273},[1304],{"type":172,"value":276},{"type":167,"tag":236,"props":1306,"children":1307},{"style":279},[1308],{"type":172,"value":1022},{"type":167,"tag":236,"props":1310,"children":1311},{"style":273},[1312],{"type":172,"value":276},{"type":167,"tag":236,"props":1314,"children":1315},{"style":267},[1316],{"type":172,"value":1317},"] ",{"type":167,"tag":236,"props":1319,"children":1320},{"style":346},[1321],{"type":172,"value":1322},"})",{"type":167,"tag":236,"props":1324,"children":1325},{"style":346},[1326],{"type":172,"value":1327}," {\n",{"type":167,"tag":236,"props":1329,"children":1331},{"class":238,"line":1330},22,[1332,1337,1342,1346,1351,1355,1360,1364,1369,1373,1378,1383,1388,1392,1397],{"type":167,"tag":236,"props":1333,"children":1334},{"style":243},[1335],{"type":172,"value":1336},"  const",{"type":167,"tag":236,"props":1338,"children":1339},{"style":249},[1340],{"type":172,"value":1341}," tokens",{"type":167,"tag":236,"props":1343,"children":1344},{"style":255},[1345],{"type":172,"value":258},{"type":167,"tag":236,"props":1347,"children":1348},{"style":255},[1349],{"type":172,"value":1350}," typeof",{"type":167,"tag":236,"props":1352,"children":1353},{"style":267},[1354],{"type":172,"value":1291},{"type":167,"tag":236,"props":1356,"children":1357},{"style":255},[1358],{"type":172,"value":1359}," ===",{"type":167,"tag":236,"props":1361,"children":1362},{"style":273},[1363],{"type":172,"value":566},{"type":167,"tag":236,"props":1365,"children":1366},{"style":279},[1367],{"type":172,"value":1368},"string",{"type":167,"tag":236,"props":1370,"children":1371},{"style":273},[1372],{"type":172,"value":276},{"type":167,"tag":236,"props":1374,"children":1375},{"style":255},[1376],{"type":172,"value":1377}," ?",{"type":167,"tag":236,"props":1379,"children":1381},{"style":1380},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1382],{"type":172,"value":1300},{"type":167,"tag":236,"props":1384,"children":1385},{"style":267},[1386],{"type":172,"value":1387},"policy",{"type":167,"tag":236,"props":1389,"children":1390},{"style":1380},[1391],{"type":172,"value":1317},{"type":167,"tag":236,"props":1393,"children":1394},{"style":255},[1395],{"type":172,"value":1396},":",{"type":167,"tag":236,"props":1398,"children":1399},{"style":267},[1400],{"type":172,"value":1401}," policy\n",{"type":167,"tag":236,"props":1403,"children":1405},{"class":238,"line":1404},23,[1406,1411,1415,1420,1424,1429],{"type":167,"tag":236,"props":1407,"children":1408},{"style":267},[1409],{"type":172,"value":1410},"    tokensSeen",{"type":167,"tag":236,"props":1412,"children":1413},{"style":346},[1414],{"type":172,"value":349},{"type":167,"tag":236,"props":1416,"children":1417},{"style":261},[1418],{"type":172,"value":1419},"add",{"type":167,"tag":236,"props":1421,"children":1422},{"style":1380},[1423],{"type":172,"value":270},{"type":167,"tag":236,"props":1425,"children":1426},{"style":267},[1427],{"type":172,"value":1428},"token",{"type":167,"tag":236,"props":1430,"children":1431},{"style":1380},[1432],{"type":172,"value":291},{"type":167,"tag":236,"props":1434,"children":1436},{"class":238,"line":1435},24,[1437,1442],{"type":167,"tag":236,"props":1438,"children":1439},{"style":346},[1440],{"type":172,"value":1441},"  }",{"type":167,"tag":236,"props":1443,"children":1444},{"style":267},[1445],{"type":172,"value":291},{"type":167,"tag":236,"props":1447,"children":1449},{"class":238,"line":1448},25,[1450],{"type":167,"tag":236,"props":1451,"children":1452},{"style":1006},[1453],{"type":172,"value":1454},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":167,"tag":236,"props":1456,"children":1458},{"class":238,"line":1457},26,[1459,1465,1469,1473,1478,1482,1486,1490,1494],{"type":167,"tag":236,"props":1460,"children":1462},{"style":1461},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1463],{"type":172,"value":1464},"  return",{"type":167,"tag":236,"props":1466,"children":1467},{"style":267},[1468],{"type":172,"value":1341},{"type":167,"tag":236,"props":1470,"children":1471},{"style":346},[1472],{"type":172,"value":349},{"type":167,"tag":236,"props":1474,"children":1475},{"style":261},[1476],{"type":172,"value":1477},"join",{"type":167,"tag":236,"props":1479,"children":1480},{"style":267},[1481],{"type":172,"value":270},{"type":167,"tag":236,"props":1483,"children":1484},{"style":273},[1485],{"type":172,"value":276},{"type":167,"tag":236,"props":1487,"children":1488},{"style":279},[1489],{"type":172,"value":561},{"type":167,"tag":236,"props":1491,"children":1492},{"style":273},[1493],{"type":172,"value":276},{"type":167,"tag":236,"props":1495,"children":1496},{"style":267},[1497],{"type":172,"value":291},{"type":167,"tag":236,"props":1499,"children":1501},{"class":238,"line":1500},27,[1502],{"type":167,"tag":236,"props":1503,"children":1504},{"style":267},[1505],{"type":172,"value":1506},"}\n",{"type":167,"tag":236,"props":1508,"children":1510},{"class":238,"line":1509},28,[1511,1515,1520,1524,1529,1533,1538],{"type":167,"tag":236,"props":1512,"children":1513},{"style":243},[1514],{"type":172,"value":1275},{"type":167,"tag":236,"props":1516,"children":1517},{"style":261},[1518],{"type":172,"value":1519}," referrerPolicy",{"type":167,"tag":236,"props":1521,"children":1522},{"style":346},[1523],{"type":172,"value":270},{"type":167,"tag":236,"props":1525,"children":1526},{"style":1288},[1527],{"type":172,"value":1528},"options",{"type":167,"tag":236,"props":1530,"children":1531},{"style":255},[1532],{"type":172,"value":258},{"type":167,"tag":236,"props":1534,"children":1535},{"style":346},[1536],{"type":172,"value":1537}," {})",{"type":167,"tag":236,"props":1539,"children":1540},{"style":346},[1541],{"type":172,"value":1327},{"type":167,"tag":236,"props":1543,"children":1545},{"class":238,"line":1544},29,[1546,1550,1555,1559,1563,1567,1571],{"type":167,"tag":236,"props":1547,"children":1548},{"style":243},[1549],{"type":172,"value":1336},{"type":167,"tag":236,"props":1551,"children":1552},{"style":249},[1553],{"type":172,"value":1554}," headerValue",{"type":167,"tag":236,"props":1556,"children":1557},{"style":255},[1558],{"type":172,"value":258},{"type":167,"tag":236,"props":1560,"children":1561},{"style":261},[1562],{"type":172,"value":1280},{"type":167,"tag":236,"props":1564,"children":1565},{"style":1380},[1566],{"type":172,"value":270},{"type":167,"tag":236,"props":1568,"children":1569},{"style":267},[1570],{"type":172,"value":1528},{"type":167,"tag":236,"props":1572,"children":1573},{"style":1380},[1574],{"type":172,"value":291},{"type":167,"tag":236,"props":1576,"children":1578},{"class":238,"line":1577},30,[1579,1583,1588,1593,1597,1602,1606,1611,1615,1620,1625],{"type":167,"tag":236,"props":1580,"children":1581},{"style":1461},[1582],{"type":172,"value":1464},{"type":167,"tag":236,"props":1584,"children":1585},{"style":243},[1586],{"type":172,"value":1587}," function",{"type":167,"tag":236,"props":1589,"children":1590},{"style":261},[1591],{"type":172,"value":1592}," referrerPolicyMiddleware",{"type":167,"tag":236,"props":1594,"children":1595},{"style":346},[1596],{"type":172,"value":270},{"type":167,"tag":236,"props":1598,"children":1599},{"style":1288},[1600],{"type":172,"value":1601},"_req",{"type":167,"tag":236,"props":1603,"children":1604},{"style":346},[1605],{"type":172,"value":561},{"type":167,"tag":236,"props":1607,"children":1608},{"style":1288},[1609],{"type":172,"value":1610}," res",{"type":167,"tag":236,"props":1612,"children":1613},{"style":346},[1614],{"type":172,"value":561},{"type":167,"tag":236,"props":1616,"children":1617},{"style":1288},[1618],{"type":172,"value":1619}," next",{"type":167,"tag":236,"props":1621,"children":1622},{"style":346},[1623],{"type":172,"value":1624},")",{"type":167,"tag":236,"props":1626,"children":1627},{"style":346},[1628],{"type":172,"value":1327},{"type":167,"tag":236,"props":1630,"children":1632},{"class":238,"line":1631},31,[1633,1638,1642,1646,1650,1654,1658,1662,1666,1670],{"type":167,"tag":236,"props":1634,"children":1635},{"style":267},[1636],{"type":172,"value":1637},"    res",{"type":167,"tag":236,"props":1639,"children":1640},{"style":346},[1641],{"type":172,"value":349},{"type":167,"tag":236,"props":1643,"children":1644},{"style":261},[1645],{"type":172,"value":539},{"type":167,"tag":236,"props":1647,"children":1648},{"style":1380},[1649],{"type":172,"value":270},{"type":167,"tag":236,"props":1651,"children":1652},{"style":273},[1653],{"type":172,"value":276},{"type":167,"tag":236,"props":1655,"children":1656},{"style":279},[1657],{"type":172,"value":934},{"type":167,"tag":236,"props":1659,"children":1660},{"style":273},[1661],{"type":172,"value":276},{"type":167,"tag":236,"props":1663,"children":1664},{"style":346},[1665],{"type":172,"value":561},{"type":167,"tag":236,"props":1667,"children":1668},{"style":267},[1669],{"type":172,"value":1554},{"type":167,"tag":236,"props":1671,"children":1672},{"style":1380},[1673],{"type":172,"value":291},{"type":167,"tag":236,"props":1675,"children":1677},{"class":238,"line":1676},32,[1678,1683],{"type":167,"tag":236,"props":1679,"children":1680},{"style":261},[1681],{"type":172,"value":1682},"    next",{"type":167,"tag":236,"props":1684,"children":1685},{"style":1380},[1686],{"type":172,"value":326},{"type":167,"tag":236,"props":1688,"children":1690},{"class":238,"line":1689},33,[1691],{"type":167,"tag":236,"props":1692,"children":1693},{"style":346},[1694],{"type":172,"value":1695},"  }\n",{"type":167,"tag":236,"props":1697,"children":1699},{"class":238,"line":1698},34,[1700],{"type":167,"tag":236,"props":1701,"children":1702},{"style":346},[1703],{"type":172,"value":1506},{"type":167,"tag":168,"props":1705,"children":1706},{},[1707,1709,1715,1717,1722],{"type":172,"value":1708},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":167,"tag":232,"props":1710,"children":1712},{"className":1711},[],[1713],{"type":172,"value":1714},"Referrer Policy",{"type":172,"value":1716},"。Meta 标签设置的 ",{"type":167,"tag":232,"props":1718,"children":1720},{"className":1719},[],[1721],{"type":172,"value":1714},{"type":172,"value":1723}," 对整个页面都有效果（但优先级最低）。",{"type":167,"tag":225,"props":1725,"children":1729},{"code":1726,"language":1727,"meta":160,"className":1728,"style":160},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1730],{"type":167,"tag":232,"props":1731,"children":1732},{"__ignoreMap":160},[1733,1798,1866],{"type":167,"tag":236,"props":1734,"children":1735},{"class":238,"line":239},[1736,1741,1747,1753,1758,1763,1768,1772,1777,1781,1785,1789,1793],{"type":167,"tag":236,"props":1737,"children":1738},{"style":346},[1739],{"type":172,"value":1740},"\u003C",{"type":167,"tag":236,"props":1742,"children":1744},{"style":1743},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1745],{"type":172,"value":1746},"meta",{"type":167,"tag":236,"props":1748,"children":1750},{"style":1749},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1751],{"type":172,"value":1752}," name",{"type":167,"tag":236,"props":1754,"children":1755},{"style":346},[1756],{"type":172,"value":1757},"=",{"type":167,"tag":236,"props":1759,"children":1760},{"style":273},[1761],{"type":172,"value":1762},"\"",{"type":167,"tag":236,"props":1764,"children":1765},{"style":279},[1766],{"type":172,"value":1767},"referrer",{"type":167,"tag":236,"props":1769,"children":1770},{"style":273},[1771],{"type":172,"value":1762},{"type":167,"tag":236,"props":1773,"children":1774},{"style":1749},[1775],{"type":172,"value":1776}," content",{"type":167,"tag":236,"props":1778,"children":1779},{"style":346},[1780],{"type":172,"value":1757},{"type":167,"tag":236,"props":1782,"children":1783},{"style":273},[1784],{"type":172,"value":1762},{"type":167,"tag":236,"props":1786,"children":1787},{"style":279},[1788],{"type":172,"value":1111},{"type":167,"tag":236,"props":1790,"children":1791},{"style":273},[1792],{"type":172,"value":1762},{"type":167,"tag":236,"props":1794,"children":1795},{"style":346},[1796],{"type":172,"value":1797}," />\n",{"type":167,"tag":236,"props":1799,"children":1800},{"class":238,"line":294},[1801,1805,1809,1814,1818,1822,1827,1831,1836,1840,1844,1848,1852,1857,1861],{"type":167,"tag":236,"props":1802,"children":1803},{"style":346},[1804],{"type":172,"value":1740},{"type":167,"tag":236,"props":1806,"children":1807},{"style":1743},[1808],{"type":172,"value":179},{"type":167,"tag":236,"props":1810,"children":1811},{"style":1749},[1812],{"type":172,"value":1813}," href",{"type":167,"tag":236,"props":1815,"children":1816},{"style":346},[1817],{"type":172,"value":1757},{"type":167,"tag":236,"props":1819,"children":1820},{"style":273},[1821],{"type":172,"value":1762},{"type":167,"tag":236,"props":1823,"children":1824},{"style":279},[1825],{"type":172,"value":1826},"http://example.com",{"type":167,"tag":236,"props":1828,"children":1829},{"style":273},[1830],{"type":172,"value":1762},{"type":167,"tag":236,"props":1832,"children":1833},{"style":1749},[1834],{"type":172,"value":1835}," referrerpolicy",{"type":167,"tag":236,"props":1837,"children":1838},{"style":346},[1839],{"type":172,"value":1757},{"type":167,"tag":236,"props":1841,"children":1842},{"style":273},[1843],{"type":172,"value":1762},{"type":167,"tag":236,"props":1845,"children":1846},{"style":279},[1847],{"type":172,"value":1111},{"type":167,"tag":236,"props":1849,"children":1850},{"style":273},[1851],{"type":172,"value":1762},{"type":167,"tag":236,"props":1853,"children":1854},{"style":346},[1855],{"type":172,"value":1856},">\u003C/",{"type":167,"tag":236,"props":1858,"children":1859},{"style":1743},[1860],{"type":172,"value":179},{"type":167,"tag":236,"props":1862,"children":1863},{"style":346},[1864],{"type":172,"value":1865},">\n",{"type":167,"tag":236,"props":1867,"children":1868},{"class":238,"line":303},[1869,1873,1877,1881,1885,1889,1893,1897,1902,1906,1910,1915,1919,1923,1927],{"type":167,"tag":236,"props":1870,"children":1871},{"style":346},[1872],{"type":172,"value":1740},{"type":167,"tag":236,"props":1874,"children":1875},{"style":1743},[1876],{"type":172,"value":179},{"type":167,"tag":236,"props":1878,"children":1879},{"style":1749},[1880],{"type":172,"value":1813},{"type":167,"tag":236,"props":1882,"children":1883},{"style":346},[1884],{"type":172,"value":1757},{"type":167,"tag":236,"props":1886,"children":1887},{"style":273},[1888],{"type":172,"value":1762},{"type":167,"tag":236,"props":1890,"children":1891},{"style":279},[1892],{"type":172,"value":1826},{"type":167,"tag":236,"props":1894,"children":1895},{"style":273},[1896],{"type":172,"value":1762},{"type":167,"tag":236,"props":1898,"children":1899},{"style":1749},[1900],{"type":172,"value":1901}," rel",{"type":167,"tag":236,"props":1903,"children":1904},{"style":346},[1905],{"type":172,"value":1757},{"type":167,"tag":236,"props":1907,"children":1908},{"style":273},[1909],{"type":172,"value":1762},{"type":167,"tag":236,"props":1911,"children":1912},{"style":279},[1913],{"type":172,"value":1914},"noreferrer",{"type":167,"tag":236,"props":1916,"children":1917},{"style":273},[1918],{"type":172,"value":1762},{"type":167,"tag":236,"props":1920,"children":1921},{"style":346},[1922],{"type":172,"value":1856},{"type":167,"tag":236,"props":1924,"children":1925},{"style":1743},[1926],{"type":172,"value":179},{"type":167,"tag":236,"props":1928,"children":1929},{"style":346},[1930],{"type":172,"value":1865},{"type":167,"tag":436,"props":1932,"children":1934},{"id":1933},"强制使用-https",[1935],{"type":172,"value":1936},"强制使用 HTTPS",{"type":167,"tag":168,"props":1938,"children":1939},{},[1940,1942,1948,1950,1961],{"type":172,"value":1941},"通过设置请求头的 ",{"type":167,"tag":232,"props":1943,"children":1945},{"className":1944},[],[1946],{"type":172,"value":1947},"Strict-Transport-Security（STS）",{"type":172,"value":1949},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":167,"tag":175,"props":1951,"children":1952},{},[1953],{"type":167,"tag":179,"props":1954,"children":1958},{"href":1955,"ariaDescribedBy":1956,"dataFootnoteRef":160,"id":1957},"#user-content-fn-timeend",[183],"user-content-fnref-timeend",[1959],{"type":172,"value":1960},"8",{"type":172,"value":746},{"type":167,"tag":168,"props":1963,"children":1964},{},[1965,1967,1973,1975,1981,1983,1989,1991,1997,1999,2004],{"type":172,"value":1966},"这个规范本身很好理解，通过 ",{"type":167,"tag":232,"props":1968,"children":1970},{"className":1969},[],[1971],{"type":172,"value":1972},"max-age",{"type":172,"value":1974}," 可以指定倒计时时间；",{"type":167,"tag":232,"props":1976,"children":1978},{"className":1977},[],[1979],{"type":172,"value":1980},"includesSubDomains",{"type":172,"value":1982}," 指定子域的 ",{"type":167,"tag":232,"props":1984,"children":1986},{"className":1985},[],[1987],{"type":172,"value":1988},"HSTS",{"type":172,"value":1990},"；",{"type":167,"tag":232,"props":1992,"children":1994},{"className":1993},[],[1995],{"type":172,"value":1996},"preload",{"type":172,"value":1998}," 指定预加载内容的 ",{"type":167,"tag":232,"props":2000,"children":2002},{"className":2001},[],[2003],{"type":172,"value":1988},{"type":172,"value":746},{"type":167,"tag":225,"props":2006,"children":2008},{"code":2007},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2009],{"type":167,"tag":232,"props":2010,"children":2011},{"__ignoreMap":160},[2012],{"type":172,"value":2007},{"type":167,"tag":225,"props":2014,"children":2016},{"code":2015,"language":228,"meta":160,"className":229,"style":160},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2017],{"type":167,"tag":232,"props":2018,"children":2019},{"__ignoreMap":160},[2020,2082,2109,2182,2245,2282,2289,2342,2382,2389,2421,2452,2500,2544,2555,2562],{"type":167,"tag":236,"props":2021,"children":2022},{"class":238,"line":239},[2023,2027,2032,2036,2041,2045,2051,2056,2061,2065,2070,2074,2078],{"type":167,"tag":236,"props":2024,"children":2025},{"style":243},[2026],{"type":172,"value":246},{"type":167,"tag":236,"props":2028,"children":2029},{"style":249},[2030],{"type":172,"value":2031}," DEFAULT_MAX_AGE",{"type":167,"tag":236,"props":2033,"children":2034},{"style":255},[2035],{"type":172,"value":258},{"type":167,"tag":236,"props":2037,"children":2038},{"style":261},[2039],{"type":172,"value":2040}," String",{"type":167,"tag":236,"props":2042,"children":2043},{"style":267},[2044],{"type":172,"value":270},{"type":167,"tag":236,"props":2046,"children":2048},{"style":2047},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2049],{"type":172,"value":2050},"180",{"type":167,"tag":236,"props":2052,"children":2053},{"style":255},[2054],{"type":172,"value":2055}," *",{"type":167,"tag":236,"props":2057,"children":2058},{"style":2047},[2059],{"type":172,"value":2060}," 24",{"type":167,"tag":236,"props":2062,"children":2063},{"style":255},[2064],{"type":172,"value":2055},{"type":167,"tag":236,"props":2066,"children":2067},{"style":2047},[2068],{"type":172,"value":2069}," 60",{"type":167,"tag":236,"props":2071,"children":2072},{"style":255},[2073],{"type":172,"value":2055},{"type":167,"tag":236,"props":2075,"children":2076},{"style":2047},[2077],{"type":172,"value":2069},{"type":167,"tag":236,"props":2079,"children":2080},{"style":267},[2081],{"type":172,"value":291},{"type":167,"tag":236,"props":2083,"children":2084},{"class":238,"line":294},[2085,2089,2093,2097,2101,2105],{"type":167,"tag":236,"props":2086,"children":2087},{"style":243},[2088],{"type":172,"value":1275},{"type":167,"tag":236,"props":2090,"children":2091},{"style":261},[2092],{"type":172,"value":1280},{"type":167,"tag":236,"props":2094,"children":2095},{"style":346},[2096],{"type":172,"value":270},{"type":167,"tag":236,"props":2098,"children":2099},{"style":1288},[2100],{"type":172,"value":1528},{"type":167,"tag":236,"props":2102,"children":2103},{"style":346},[2104],{"type":172,"value":1624},{"type":167,"tag":236,"props":2106,"children":2107},{"style":346},[2108],{"type":172,"value":1327},{"type":167,"tag":236,"props":2110,"children":2111},{"class":238,"line":303},[2112,2116,2121,2125,2129,2134,2139,2145,2149,2154,2159,2164,2168,2173,2177],{"type":167,"tag":236,"props":2113,"children":2114},{"style":243},[2115],{"type":172,"value":1336},{"type":167,"tag":236,"props":2117,"children":2118},{"style":249},[2119],{"type":172,"value":2120}," directives",{"type":167,"tag":236,"props":2122,"children":2123},{"style":255},[2124],{"type":172,"value":258},{"type":167,"tag":236,"props":2126,"children":2127},{"style":1380},[2128],{"type":172,"value":1300},{"type":167,"tag":236,"props":2130,"children":2131},{"style":273},[2132],{"type":172,"value":2133},"`",{"type":167,"tag":236,"props":2135,"children":2136},{"style":279},[2137],{"type":172,"value":2138},"max-age=",{"type":167,"tag":236,"props":2140,"children":2142},{"style":2141},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2143],{"type":172,"value":2144},"${",{"type":167,"tag":236,"props":2146,"children":2147},{"style":267},[2148],{"type":172,"value":1528},{"type":167,"tag":236,"props":2150,"children":2152},{"style":2151},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2153],{"type":172,"value":349},{"type":167,"tag":236,"props":2155,"children":2156},{"style":267},[2157],{"type":172,"value":2158},"maxAge",{"type":167,"tag":236,"props":2160,"children":2161},{"style":255},[2162],{"type":172,"value":2163}," ||",{"type":167,"tag":236,"props":2165,"children":2166},{"style":249},[2167],{"type":172,"value":2031},{"type":167,"tag":236,"props":2169,"children":2170},{"style":2141},[2171],{"type":172,"value":2172},"}",{"type":167,"tag":236,"props":2174,"children":2175},{"style":273},[2176],{"type":172,"value":2133},{"type":167,"tag":236,"props":2178,"children":2179},{"style":1380},[2180],{"type":172,"value":2181},"]\n",{"type":167,"tag":236,"props":2183,"children":2184},{"class":238,"line":329},[2185,2190,2195,2199,2203,2208,2212,2218,2222,2227,2231,2235,2240],{"type":167,"tag":236,"props":2186,"children":2187},{"style":1461},[2188],{"type":172,"value":2189},"  if",{"type":167,"tag":236,"props":2191,"children":2192},{"style":1380},[2193],{"type":172,"value":2194}," (",{"type":167,"tag":236,"props":2196,"children":2197},{"style":267},[2198],{"type":172,"value":1528},{"type":167,"tag":236,"props":2200,"children":2201},{"style":346},[2202],{"type":172,"value":349},{"type":167,"tag":236,"props":2204,"children":2205},{"style":267},[2206],{"type":172,"value":2207},"includeSubDomains",{"type":167,"tag":236,"props":2209,"children":2210},{"style":255},[2211],{"type":172,"value":1359},{"type":167,"tag":236,"props":2213,"children":2215},{"style":2214},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2216],{"type":172,"value":2217}," undefined",{"type":167,"tag":236,"props":2219,"children":2220},{"style":255},[2221],{"type":172,"value":2163},{"type":167,"tag":236,"props":2223,"children":2224},{"style":267},[2225],{"type":172,"value":2226}," options",{"type":167,"tag":236,"props":2228,"children":2229},{"style":346},[2230],{"type":172,"value":349},{"type":167,"tag":236,"props":2232,"children":2233},{"style":267},[2234],{"type":172,"value":2207},{"type":167,"tag":236,"props":2236,"children":2237},{"style":1380},[2238],{"type":172,"value":2239},") ",{"type":167,"tag":236,"props":2241,"children":2242},{"style":346},[2243],{"type":172,"value":2244},"{\n",{"type":167,"tag":236,"props":2246,"children":2247},{"class":238,"line":337},[2248,2253,2257,2262,2266,2270,2274,2278],{"type":167,"tag":236,"props":2249,"children":2250},{"style":267},[2251],{"type":172,"value":2252},"    directives",{"type":167,"tag":236,"props":2254,"children":2255},{"style":346},[2256],{"type":172,"value":349},{"type":167,"tag":236,"props":2258,"children":2259},{"style":261},[2260],{"type":172,"value":2261},"push",{"type":167,"tag":236,"props":2263,"children":2264},{"style":1380},[2265],{"type":172,"value":270},{"type":167,"tag":236,"props":2267,"children":2268},{"style":273},[2269],{"type":172,"value":276},{"type":167,"tag":236,"props":2271,"children":2272},{"style":279},[2273],{"type":172,"value":2207},{"type":167,"tag":236,"props":2275,"children":2276},{"style":273},[2277],{"type":172,"value":276},{"type":167,"tag":236,"props":2279,"children":2280},{"style":1380},[2281],{"type":172,"value":291},{"type":167,"tag":236,"props":2283,"children":2284},{"class":238,"line":1062},[2285],{"type":167,"tag":236,"props":2286,"children":2287},{"style":346},[2288],{"type":172,"value":1695},{"type":167,"tag":236,"props":2290,"children":2291},{"class":238,"line":1071},[2292,2297,2301,2305,2310,2314,2318,2322,2326,2330,2334,2338],{"type":167,"tag":236,"props":2293,"children":2294},{"style":267},[2295],{"type":172,"value":2296},"  options",{"type":167,"tag":236,"props":2298,"children":2299},{"style":346},[2300],{"type":172,"value":349},{"type":167,"tag":236,"props":2302,"children":2303},{"style":267},[2304],{"type":172,"value":1996},{"type":167,"tag":236,"props":2306,"children":2307},{"style":255},[2308],{"type":172,"value":2309}," &&",{"type":167,"tag":236,"props":2311,"children":2312},{"style":267},[2313],{"type":172,"value":2120},{"type":167,"tag":236,"props":2315,"children":2316},{"style":346},[2317],{"type":172,"value":349},{"type":167,"tag":236,"props":2319,"children":2320},{"style":261},[2321],{"type":172,"value":2261},{"type":167,"tag":236,"props":2323,"children":2324},{"style":1380},[2325],{"type":172,"value":270},{"type":167,"tag":236,"props":2327,"children":2328},{"style":273},[2329],{"type":172,"value":276},{"type":167,"tag":236,"props":2331,"children":2332},{"style":279},[2333],{"type":172,"value":1996},{"type":167,"tag":236,"props":2335,"children":2336},{"style":273},[2337],{"type":172,"value":276},{"type":167,"tag":236,"props":2339,"children":2340},{"style":1380},[2341],{"type":172,"value":291},{"type":167,"tag":236,"props":2343,"children":2344},{"class":238,"line":1092},[2345,2349,2353,2357,2361,2365,2369,2374,2378],{"type":167,"tag":236,"props":2346,"children":2347},{"style":1461},[2348],{"type":172,"value":1464},{"type":167,"tag":236,"props":2350,"children":2351},{"style":267},[2352],{"type":172,"value":2120},{"type":167,"tag":236,"props":2354,"children":2355},{"style":346},[2356],{"type":172,"value":349},{"type":167,"tag":236,"props":2358,"children":2359},{"style":261},[2360],{"type":172,"value":1477},{"type":167,"tag":236,"props":2362,"children":2363},{"style":1380},[2364],{"type":172,"value":270},{"type":167,"tag":236,"props":2366,"children":2367},{"style":273},[2368],{"type":172,"value":276},{"type":167,"tag":236,"props":2370,"children":2371},{"style":279},[2372],{"type":172,"value":2373},"; ",{"type":167,"tag":236,"props":2375,"children":2376},{"style":273},[2377],{"type":172,"value":276},{"type":167,"tag":236,"props":2379,"children":2380},{"style":1380},[2381],{"type":172,"value":291},{"type":167,"tag":236,"props":2383,"children":2384},{"class":238,"line":1101},[2385],{"type":167,"tag":236,"props":2386,"children":2387},{"style":346},[2388],{"type":172,"value":1506},{"type":167,"tag":236,"props":2390,"children":2391},{"class":238,"line":1122},[2392,2396,2401,2405,2409,2413,2417],{"type":167,"tag":236,"props":2393,"children":2394},{"style":243},[2395],{"type":172,"value":1275},{"type":167,"tag":236,"props":2397,"children":2398},{"style":261},[2399],{"type":172,"value":2400}," strictTransportSecurity",{"type":167,"tag":236,"props":2402,"children":2403},{"style":346},[2404],{"type":172,"value":270},{"type":167,"tag":236,"props":2406,"children":2407},{"style":1288},[2408],{"type":172,"value":1528},{"type":167,"tag":236,"props":2410,"children":2411},{"style":255},[2412],{"type":172,"value":258},{"type":167,"tag":236,"props":2414,"children":2415},{"style":346},[2416],{"type":172,"value":1537},{"type":167,"tag":236,"props":2418,"children":2419},{"style":346},[2420],{"type":172,"value":1327},{"type":167,"tag":236,"props":2422,"children":2423},{"class":238,"line":1131},[2424,2428,2432,2436,2440,2444,2448],{"type":167,"tag":236,"props":2425,"children":2426},{"style":243},[2427],{"type":172,"value":1336},{"type":167,"tag":236,"props":2429,"children":2430},{"style":249},[2431],{"type":172,"value":1554},{"type":167,"tag":236,"props":2433,"children":2434},{"style":255},[2435],{"type":172,"value":258},{"type":167,"tag":236,"props":2437,"children":2438},{"style":261},[2439],{"type":172,"value":1280},{"type":167,"tag":236,"props":2441,"children":2442},{"style":1380},[2443],{"type":172,"value":270},{"type":167,"tag":236,"props":2445,"children":2446},{"style":267},[2447],{"type":172,"value":1528},{"type":167,"tag":236,"props":2449,"children":2450},{"style":1380},[2451],{"type":172,"value":291},{"type":167,"tag":236,"props":2453,"children":2454},{"class":238,"line":1152},[2455,2459,2463,2468,2472,2476,2480,2484,2488,2492,2496],{"type":167,"tag":236,"props":2456,"children":2457},{"style":1461},[2458],{"type":172,"value":1464},{"type":167,"tag":236,"props":2460,"children":2461},{"style":243},[2462],{"type":172,"value":1587},{"type":167,"tag":236,"props":2464,"children":2465},{"style":261},[2466],{"type":172,"value":2467}," strictTransportSecurityMiddleware",{"type":167,"tag":236,"props":2469,"children":2470},{"style":346},[2471],{"type":172,"value":270},{"type":167,"tag":236,"props":2473,"children":2474},{"style":1288},[2475],{"type":172,"value":1601},{"type":167,"tag":236,"props":2477,"children":2478},{"style":346},[2479],{"type":172,"value":561},{"type":167,"tag":236,"props":2481,"children":2482},{"style":1288},[2483],{"type":172,"value":1610},{"type":167,"tag":236,"props":2485,"children":2486},{"style":346},[2487],{"type":172,"value":561},{"type":167,"tag":236,"props":2489,"children":2490},{"style":1288},[2491],{"type":172,"value":1619},{"type":167,"tag":236,"props":2493,"children":2494},{"style":346},[2495],{"type":172,"value":1624},{"type":167,"tag":236,"props":2497,"children":2498},{"style":346},[2499],{"type":172,"value":1327},{"type":167,"tag":236,"props":2501,"children":2502},{"class":238,"line":1161},[2503,2507,2511,2515,2519,2523,2528,2532,2536,2540],{"type":167,"tag":236,"props":2504,"children":2505},{"style":267},[2506],{"type":172,"value":1637},{"type":167,"tag":236,"props":2508,"children":2509},{"style":346},[2510],{"type":172,"value":349},{"type":167,"tag":236,"props":2512,"children":2513},{"style":261},[2514],{"type":172,"value":539},{"type":167,"tag":236,"props":2516,"children":2517},{"style":1380},[2518],{"type":172,"value":270},{"type":167,"tag":236,"props":2520,"children":2521},{"style":273},[2522],{"type":172,"value":276},{"type":167,"tag":236,"props":2524,"children":2525},{"style":279},[2526],{"type":172,"value":2527},"Strict-Transport-Security",{"type":167,"tag":236,"props":2529,"children":2530},{"style":273},[2531],{"type":172,"value":276},{"type":167,"tag":236,"props":2533,"children":2534},{"style":346},[2535],{"type":172,"value":561},{"type":167,"tag":236,"props":2537,"children":2538},{"style":267},[2539],{"type":172,"value":1554},{"type":167,"tag":236,"props":2541,"children":2542},{"style":1380},[2543],{"type":172,"value":291},{"type":167,"tag":236,"props":2545,"children":2546},{"class":238,"line":1182},[2547,2551],{"type":167,"tag":236,"props":2548,"children":2549},{"style":261},[2550],{"type":172,"value":1682},{"type":167,"tag":236,"props":2552,"children":2553},{"style":1380},[2554],{"type":172,"value":326},{"type":167,"tag":236,"props":2556,"children":2557},{"class":238,"line":1191},[2558],{"type":167,"tag":236,"props":2559,"children":2560},{"style":346},[2561],{"type":172,"value":1695},{"type":167,"tag":236,"props":2563,"children":2564},{"class":238,"line":1212},[2565],{"type":167,"tag":236,"props":2566,"children":2567},{"style":346},[2568],{"type":172,"value":1506},{"type":167,"tag":436,"props":2570,"children":2572},{"id":2571},"可选用证书透明性策略",[2573],{"type":172,"value":2571},{"type":167,"tag":225,"props":2575,"children":2577},{"code":2576,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('Expect-CT' /* someValue */)\n",[2578],{"type":167,"tag":232,"props":2579,"children":2580},{"__ignoreMap":160},[2581],{"type":167,"tag":236,"props":2582,"children":2583},{"class":238,"line":239},[2584,2588,2592,2596,2600,2604,2609,2613,2618],{"type":167,"tag":236,"props":2585,"children":2586},{"style":267},[2587],{"type":172,"value":456},{"type":167,"tag":236,"props":2589,"children":2590},{"style":346},[2591],{"type":172,"value":349},{"type":167,"tag":236,"props":2593,"children":2594},{"style":261},[2595],{"type":172,"value":539},{"type":167,"tag":236,"props":2597,"children":2598},{"style":267},[2599],{"type":172,"value":270},{"type":167,"tag":236,"props":2601,"children":2602},{"style":273},[2603],{"type":172,"value":276},{"type":167,"tag":236,"props":2605,"children":2606},{"style":279},[2607],{"type":172,"value":2608},"Expect-CT",{"type":167,"tag":236,"props":2610,"children":2611},{"style":273},[2612],{"type":172,"value":276},{"type":167,"tag":236,"props":2614,"children":2615},{"style":1006},[2616],{"type":172,"value":2617}," /* someValue */",{"type":167,"tag":236,"props":2619,"children":2620},{"style":267},[2621],{"type":172,"value":291},{"type":167,"tag":168,"props":2623,"children":2624},{},[2625,2630,2632,2643,2645,2656],{"type":167,"tag":232,"props":2626,"children":2628},{"className":2627},[],[2629],{"type":172,"value":2608},{"type":172,"value":2631}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略",{"type":167,"tag":175,"props":2633,"children":2634},{},[2635],{"type":167,"tag":179,"props":2636,"children":2640},{"href":2637,"ariaDescribedBy":2638,"dataFootnoteRef":160,"id":2639},"#user-content-fn-chrome-ct",[183],"user-content-fnref-chrome-ct",[2641],{"type":172,"value":2642},"9",{"type":172,"value":2644},"），避免中间人攻击",{"type":167,"tag":175,"props":2646,"children":2647},{},[2648],{"type":167,"tag":179,"props":2649,"children":2653},{"href":2650,"ariaDescribedBy":2651,"dataFootnoteRef":160,"id":2652},"#user-content-fn-ct",[183],"user-content-fnref-ct",[2654],{"type":172,"value":2655},"10",{"type":172,"value":2657},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":167,"tag":225,"props":2659,"children":2661},{"code":2660},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2662],{"type":167,"tag":232,"props":2663,"children":2664},{"__ignoreMap":160},[2665],{"type":172,"value":2660},{"type":167,"tag":168,"props":2667,"children":2668},{},[2669,2671,2676],{"type":172,"value":2670},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":167,"tag":232,"props":2672,"children":2674},{"className":2673},[],[2675],{"type":172,"value":2608},{"type":172,"value":2677}," 就作不上用咯... TODO",{"type":167,"tag":436,"props":2679,"children":2681},{"id":2680},"拒绝来自-pdfflash-的跨域请求",[2682],{"type":172,"value":2683},"拒绝来自 PDF、Flash 的跨域请求",{"type":167,"tag":168,"props":2685,"children":2686},{},[2687,2693,2695,2706],{"type":167,"tag":232,"props":2688,"children":2690},{"className":2689},[],[2691],{"type":172,"value":2692},"X-Permitted-Cross-Domain-Policies",{"type":172,"value":2694}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例",{"type":167,"tag":175,"props":2696,"children":2697},{},[2698],{"type":167,"tag":179,"props":2699,"children":2703},{"href":2700,"ariaDescribedBy":2701,"dataFootnoteRef":160,"id":2702},"#user-content-fn-pdf-reader",[183],"user-content-fnref-pdf-reader",[2704],{"type":172,"value":2705},"11",{"type":172,"value":2707},"：",{"type":167,"tag":168,"props":2709,"children":2710},{},[2711],{"type":167,"tag":889,"props":2712,"children":2714},{"alt":2692,"src":2713},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":167,"tag":2716,"props":2717,"children":2718},"ol",{},[2719,2725],{"type":167,"tag":2720,"props":2721,"children":2722},"li",{},[2723],{"type":172,"value":2724},"用户在 A 网站打开了某个 PDF；",{"type":167,"tag":2720,"props":2726,"children":2727},{},[2728,2730,2736],{"type":172,"value":2729},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":167,"tag":232,"props":2731,"children":2733},{"className":2732},[],[2734],{"type":172,"value":2735},"crossdomain.xml",{"type":172,"value":2737}," 文件（策略文件）作为跨域策略应对方案。",{"type":167,"tag":168,"props":2739,"children":2740},{},[2741],{"type":172,"value":2742},"一个策略文件可能长这样：",{"type":167,"tag":225,"props":2744,"children":2746},{"code":2745,"language":1727,"meta":160,"className":1728,"style":160},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2747],{"type":167,"tag":232,"props":2748,"children":2749},{"__ignoreMap":160},[2750,2758,2774,2813,2849,2885,2921,2957],{"type":167,"tag":236,"props":2751,"children":2752},{"class":238,"line":239},[2753],{"type":167,"tag":236,"props":2754,"children":2755},{"style":1006},[2756],{"type":172,"value":2757},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":167,"tag":236,"props":2759,"children":2760},{"class":238,"line":294},[2761,2765,2770],{"type":167,"tag":236,"props":2762,"children":2763},{"style":346},[2764],{"type":172,"value":1740},{"type":167,"tag":236,"props":2766,"children":2767},{"style":1743},[2768],{"type":172,"value":2769},"cross-domain-policy",{"type":167,"tag":236,"props":2771,"children":2772},{"style":346},[2773],{"type":172,"value":1865},{"type":167,"tag":236,"props":2775,"children":2776},{"class":238,"line":303},[2777,2782,2787,2792,2796,2800,2805,2809],{"type":167,"tag":236,"props":2778,"children":2779},{"style":346},[2780],{"type":172,"value":2781},"  \u003C",{"type":167,"tag":236,"props":2783,"children":2784},{"style":1743},[2785],{"type":172,"value":2786},"allow-access-from",{"type":167,"tag":236,"props":2788,"children":2789},{"style":1749},[2790],{"type":172,"value":2791}," domain",{"type":167,"tag":236,"props":2793,"children":2794},{"style":346},[2795],{"type":172,"value":1757},{"type":167,"tag":236,"props":2797,"children":2798},{"style":273},[2799],{"type":172,"value":1762},{"type":167,"tag":236,"props":2801,"children":2802},{"style":279},[2803],{"type":172,"value":2804},"*.taobao.com",{"type":167,"tag":236,"props":2806,"children":2807},{"style":273},[2808],{"type":172,"value":1762},{"type":167,"tag":236,"props":2810,"children":2811},{"style":346},[2812],{"type":172,"value":1797},{"type":167,"tag":236,"props":2814,"children":2815},{"class":238,"line":329},[2816,2820,2824,2828,2832,2836,2841,2845],{"type":167,"tag":236,"props":2817,"children":2818},{"style":346},[2819],{"type":172,"value":2781},{"type":167,"tag":236,"props":2821,"children":2822},{"style":1743},[2823],{"type":172,"value":2786},{"type":167,"tag":236,"props":2825,"children":2826},{"style":1749},[2827],{"type":172,"value":2791},{"type":167,"tag":236,"props":2829,"children":2830},{"style":346},[2831],{"type":172,"value":1757},{"type":167,"tag":236,"props":2833,"children":2834},{"style":273},[2835],{"type":172,"value":1762},{"type":167,"tag":236,"props":2837,"children":2838},{"style":279},[2839],{"type":172,"value":2840},"*.taobao.net",{"type":167,"tag":236,"props":2842,"children":2843},{"style":273},[2844],{"type":172,"value":1762},{"type":167,"tag":236,"props":2846,"children":2847},{"style":346},[2848],{"type":172,"value":1797},{"type":167,"tag":236,"props":2850,"children":2851},{"class":238,"line":337},[2852,2856,2860,2864,2868,2872,2877,2881],{"type":167,"tag":236,"props":2853,"children":2854},{"style":346},[2855],{"type":172,"value":2781},{"type":167,"tag":236,"props":2857,"children":2858},{"style":1743},[2859],{"type":172,"value":2786},{"type":167,"tag":236,"props":2861,"children":2862},{"style":1749},[2863],{"type":172,"value":2791},{"type":167,"tag":236,"props":2865,"children":2866},{"style":346},[2867],{"type":172,"value":1757},{"type":167,"tag":236,"props":2869,"children":2870},{"style":273},[2871],{"type":172,"value":1762},{"type":167,"tag":236,"props":2873,"children":2874},{"style":279},[2875],{"type":172,"value":2876},"*.taobaocdn.com",{"type":167,"tag":236,"props":2878,"children":2879},{"style":273},[2880],{"type":172,"value":1762},{"type":167,"tag":236,"props":2882,"children":2883},{"style":346},[2884],{"type":172,"value":1797},{"type":167,"tag":236,"props":2886,"children":2887},{"class":238,"line":1062},[2888,2892,2896,2900,2904,2908,2913,2917],{"type":167,"tag":236,"props":2889,"children":2890},{"style":346},[2891],{"type":172,"value":2781},{"type":167,"tag":236,"props":2893,"children":2894},{"style":1743},[2895],{"type":172,"value":2786},{"type":167,"tag":236,"props":2897,"children":2898},{"style":1749},[2899],{"type":172,"value":2791},{"type":167,"tag":236,"props":2901,"children":2902},{"style":346},[2903],{"type":172,"value":1757},{"type":167,"tag":236,"props":2905,"children":2906},{"style":273},[2907],{"type":172,"value":1762},{"type":167,"tag":236,"props":2909,"children":2910},{"style":279},[2911],{"type":172,"value":2912},"*.tbcdn.cn",{"type":167,"tag":236,"props":2914,"children":2915},{"style":273},[2916],{"type":172,"value":1762},{"type":167,"tag":236,"props":2918,"children":2919},{"style":346},[2920],{"type":172,"value":1797},{"type":167,"tag":236,"props":2922,"children":2923},{"class":238,"line":1071},[2924,2928,2932,2936,2940,2944,2949,2953],{"type":167,"tag":236,"props":2925,"children":2926},{"style":346},[2927],{"type":172,"value":2781},{"type":167,"tag":236,"props":2929,"children":2930},{"style":1743},[2931],{"type":172,"value":2786},{"type":167,"tag":236,"props":2933,"children":2934},{"style":1749},[2935],{"type":172,"value":2791},{"type":167,"tag":236,"props":2937,"children":2938},{"style":346},[2939],{"type":172,"value":1757},{"type":167,"tag":236,"props":2941,"children":2942},{"style":273},[2943],{"type":172,"value":1762},{"type":167,"tag":236,"props":2945,"children":2946},{"style":279},[2947],{"type":172,"value":2948},"*.alicdn.com",{"type":167,"tag":236,"props":2950,"children":2951},{"style":273},[2952],{"type":172,"value":1762},{"type":167,"tag":236,"props":2954,"children":2955},{"style":346},[2956],{"type":172,"value":1797},{"type":167,"tag":236,"props":2958,"children":2959},{"class":238,"line":1092},[2960,2965,2969],{"type":167,"tag":236,"props":2961,"children":2962},{"style":346},[2963],{"type":172,"value":2964},"\u003C/",{"type":167,"tag":236,"props":2966,"children":2967},{"style":1743},[2968],{"type":172,"value":2769},{"type":167,"tag":236,"props":2970,"children":2971},{"style":346},[2972],{"type":172,"value":1865},{"type":167,"tag":168,"props":2974,"children":2975},{},[2976,2978,2983,2985,2990],{"type":172,"value":2977},"其中，若请求响应头包含了 ",{"type":167,"tag":232,"props":2979,"children":2981},{"className":2980},[],[2982],{"type":172,"value":2692},{"type":172,"value":2984},"，便可指定浏览器针对 ",{"type":167,"tag":232,"props":2986,"children":2988},{"className":2987},[],[2989],{"type":172,"value":2735},{"type":172,"value":2991}," 的应对行为。",{"type":167,"tag":225,"props":2993,"children":2995},{"code":2994,"language":228,"meta":160,"className":229,"style":160},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[2996],{"type":167,"tag":232,"props":2997,"children":2998},{"__ignoreMap":160},[2999,3027,3035,3055,3063,3083,3091,3111,3119,3136,3143,3188,3236,3279,3290,3297],{"type":167,"tag":236,"props":3000,"children":3001},{"class":238,"line":239},[3002,3006,3011,3015,3019,3023],{"type":167,"tag":236,"props":3003,"children":3004},{"style":243},[3005],{"type":172,"value":246},{"type":167,"tag":236,"props":3007,"children":3008},{"style":249},[3009],{"type":172,"value":3010}," ALLOWED_PERMITTED_POLICIES",{"type":167,"tag":236,"props":3012,"children":3013},{"style":255},[3014],{"type":172,"value":258},{"type":167,"tag":236,"props":3016,"children":3017},{"style":255},[3018],{"type":172,"value":990},{"type":167,"tag":236,"props":3020,"children":3021},{"style":261},[3022],{"type":172,"value":995},{"type":167,"tag":236,"props":3024,"children":3025},{"style":267},[3026],{"type":172,"value":1000},{"type":167,"tag":236,"props":3028,"children":3029},{"class":238,"line":294},[3030],{"type":167,"tag":236,"props":3031,"children":3032},{"style":1006},[3033],{"type":172,"value":3034},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":167,"tag":236,"props":3036,"children":3037},{"class":238,"line":303},[3038,3042,3047,3051],{"type":167,"tag":236,"props":3039,"children":3040},{"style":273},[3041],{"type":172,"value":1017},{"type":167,"tag":236,"props":3043,"children":3044},{"style":279},[3045],{"type":172,"value":3046},"master-only",{"type":167,"tag":236,"props":3048,"children":3049},{"style":273},[3050],{"type":172,"value":276},{"type":167,"tag":236,"props":3052,"children":3053},{"style":346},[3054],{"type":172,"value":1031},{"type":167,"tag":236,"props":3056,"children":3057},{"class":238,"line":329},[3058],{"type":167,"tag":236,"props":3059,"children":3060},{"style":1006},[3061],{"type":172,"value":3062},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":167,"tag":236,"props":3064,"children":3065},{"class":238,"line":337},[3066,3070,3075,3079],{"type":167,"tag":236,"props":3067,"children":3068},{"style":273},[3069],{"type":172,"value":1017},{"type":167,"tag":236,"props":3071,"children":3072},{"style":279},[3073],{"type":172,"value":3074},"by-content-type",{"type":167,"tag":236,"props":3076,"children":3077},{"style":273},[3078],{"type":172,"value":276},{"type":167,"tag":236,"props":3080,"children":3081},{"style":346},[3082],{"type":172,"value":1031},{"type":167,"tag":236,"props":3084,"children":3085},{"class":238,"line":1062},[3086],{"type":167,"tag":236,"props":3087,"children":3088},{"style":1006},[3089],{"type":172,"value":3090},"  // 不使用任何位置的 crossdomain.xml\n",{"type":167,"tag":236,"props":3092,"children":3093},{"class":238,"line":1071},[3094,3098,3103,3107],{"type":167,"tag":236,"props":3095,"children":3096},{"style":273},[3097],{"type":172,"value":1017},{"type":167,"tag":236,"props":3099,"children":3100},{"style":279},[3101],{"type":172,"value":3102},"none",{"type":167,"tag":236,"props":3104,"children":3105},{"style":273},[3106],{"type":172,"value":276},{"type":167,"tag":236,"props":3108,"children":3109},{"style":346},[3110],{"type":172,"value":1031},{"type":167,"tag":236,"props":3112,"children":3113},{"class":238,"line":1092},[3114],{"type":167,"tag":236,"props":3115,"children":3116},{"style":1006},[3117],{"type":172,"value":3118},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":167,"tag":236,"props":3120,"children":3121},{"class":238,"line":1101},[3122,3126,3131],{"type":167,"tag":236,"props":3123,"children":3124},{"style":273},[3125],{"type":172,"value":1017},{"type":167,"tag":236,"props":3127,"children":3128},{"style":279},[3129],{"type":172,"value":3130},"all",{"type":167,"tag":236,"props":3132,"children":3133},{"style":273},[3134],{"type":172,"value":3135},"'\n",{"type":167,"tag":236,"props":3137,"children":3138},{"class":238,"line":1122},[3139],{"type":167,"tag":236,"props":3140,"children":3141},{"style":267},[3142],{"type":172,"value":1266},{"type":167,"tag":236,"props":3144,"children":3145},{"class":238,"line":1131},[3146,3150,3155,3159,3164,3168,3172,3176,3180,3184],{"type":167,"tag":236,"props":3147,"children":3148},{"style":243},[3149],{"type":172,"value":1275},{"type":167,"tag":236,"props":3151,"children":3152},{"style":261},[3153],{"type":172,"value":3154}," xPermittedCrossDomainPolicies",{"type":167,"tag":236,"props":3156,"children":3157},{"style":346},[3158],{"type":172,"value":270},{"type":167,"tag":236,"props":3160,"children":3161},{"style":1288},[3162],{"type":172,"value":3163},"headerValue",{"type":167,"tag":236,"props":3165,"children":3166},{"style":255},[3167],{"type":172,"value":258},{"type":167,"tag":236,"props":3169,"children":3170},{"style":273},[3171],{"type":172,"value":566},{"type":167,"tag":236,"props":3173,"children":3174},{"style":279},[3175],{"type":172,"value":3102},{"type":167,"tag":236,"props":3177,"children":3178},{"style":273},[3179],{"type":172,"value":276},{"type":167,"tag":236,"props":3181,"children":3182},{"style":346},[3183],{"type":172,"value":1624},{"type":167,"tag":236,"props":3185,"children":3186},{"style":346},[3187],{"type":172,"value":1327},{"type":167,"tag":236,"props":3189,"children":3190},{"class":238,"line":1152},[3191,3195,3199,3204,3208,3212,3216,3220,3224,3228,3232],{"type":167,"tag":236,"props":3192,"children":3193},{"style":1461},[3194],{"type":172,"value":1464},{"type":167,"tag":236,"props":3196,"children":3197},{"style":243},[3198],{"type":172,"value":1587},{"type":167,"tag":236,"props":3200,"children":3201},{"style":261},[3202],{"type":172,"value":3203}," xPermittedCrossDomainPoliciesMiddleware",{"type":167,"tag":236,"props":3205,"children":3206},{"style":346},[3207],{"type":172,"value":270},{"type":167,"tag":236,"props":3209,"children":3210},{"style":1288},[3211],{"type":172,"value":1601},{"type":167,"tag":236,"props":3213,"children":3214},{"style":346},[3215],{"type":172,"value":561},{"type":167,"tag":236,"props":3217,"children":3218},{"style":1288},[3219],{"type":172,"value":1610},{"type":167,"tag":236,"props":3221,"children":3222},{"style":346},[3223],{"type":172,"value":561},{"type":167,"tag":236,"props":3225,"children":3226},{"style":1288},[3227],{"type":172,"value":1619},{"type":167,"tag":236,"props":3229,"children":3230},{"style":346},[3231],{"type":172,"value":1624},{"type":167,"tag":236,"props":3233,"children":3234},{"style":346},[3235],{"type":172,"value":1327},{"type":167,"tag":236,"props":3237,"children":3238},{"class":238,"line":1161},[3239,3243,3247,3251,3255,3259,3263,3267,3271,3275],{"type":167,"tag":236,"props":3240,"children":3241},{"style":267},[3242],{"type":172,"value":1637},{"type":167,"tag":236,"props":3244,"children":3245},{"style":346},[3246],{"type":172,"value":349},{"type":167,"tag":236,"props":3248,"children":3249},{"style":261},[3250],{"type":172,"value":539},{"type":167,"tag":236,"props":3252,"children":3253},{"style":1380},[3254],{"type":172,"value":270},{"type":167,"tag":236,"props":3256,"children":3257},{"style":273},[3258],{"type":172,"value":276},{"type":167,"tag":236,"props":3260,"children":3261},{"style":279},[3262],{"type":172,"value":2692},{"type":167,"tag":236,"props":3264,"children":3265},{"style":273},[3266],{"type":172,"value":276},{"type":167,"tag":236,"props":3268,"children":3269},{"style":346},[3270],{"type":172,"value":561},{"type":167,"tag":236,"props":3272,"children":3273},{"style":267},[3274],{"type":172,"value":1554},{"type":167,"tag":236,"props":3276,"children":3277},{"style":1380},[3278],{"type":172,"value":291},{"type":167,"tag":236,"props":3280,"children":3281},{"class":238,"line":1182},[3282,3286],{"type":167,"tag":236,"props":3283,"children":3284},{"style":261},[3285],{"type":172,"value":1682},{"type":167,"tag":236,"props":3287,"children":3288},{"style":1380},[3289],{"type":172,"value":326},{"type":167,"tag":236,"props":3291,"children":3292},{"class":238,"line":1191},[3293],{"type":167,"tag":236,"props":3294,"children":3295},{"style":346},[3296],{"type":172,"value":1695},{"type":167,"tag":236,"props":3298,"children":3299},{"class":238,"line":1212},[3300],{"type":167,"tag":236,"props":3301,"children":3302},{"style":346},[3303],{"type":172,"value":1506},{"type":167,"tag":168,"props":3305,"children":3306},{},[3307],{"type":172,"value":3308},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":167,"tag":436,"props":3310,"children":3312},{"id":3311},"开启-csp",[3313],{"type":172,"value":3314},"开启 CSP",{"type":167,"tag":168,"props":3316,"children":3317},{},[3318,3320,3325,3327,3332,3334,3339,3341,3352],{"type":172,"value":3319},"还记得刚才提到 Chrome 关闭了 ",{"type":167,"tag":232,"props":3321,"children":3323},{"className":3322},[],[3324],{"type":172,"value":689},{"type":172,"value":3326}," 吗？既然不再使用 ",{"type":167,"tag":232,"props":3328,"children":3330},{"className":3329},[],[3331],{"type":172,"value":689},{"type":172,"value":3333},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":167,"tag":232,"props":3335,"children":3337},{"className":3336},[],[3338],{"type":172,"value":717},{"type":172,"value":3340}," 标准",{"type":167,"tag":175,"props":3342,"children":3343},{},[3344],{"type":167,"tag":179,"props":3345,"children":3349},{"href":3346,"ariaDescribedBy":3347,"dataFootnoteRef":160,"id":3348},"#user-content-fn-csp-standard",[183],"user-content-fnref-csp-standard",[3350],{"type":172,"value":3351},"12",{"type":172,"value":3353},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":167,"tag":168,"props":3355,"children":3356},{},[3357,3362],{"type":167,"tag":232,"props":3358,"children":3360},{"className":3359},[],[3361],{"type":172,"value":717},{"type":172,"value":3363}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":167,"tag":225,"props":3365,"children":3367},{"code":3366,"language":1727,"meta":160,"className":1728,"style":160},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3368],{"type":167,"tag":232,"props":3369,"children":3370},{"__ignoreMap":160},[3371],{"type":167,"tag":236,"props":3372,"children":3373},{"class":238,"line":239},[3374,3378,3382,3387,3391,3395,3400,3404,3408,3412,3416,3421,3425],{"type":167,"tag":236,"props":3375,"children":3376},{"style":346},[3377],{"type":172,"value":1740},{"type":167,"tag":236,"props":3379,"children":3380},{"style":1743},[3381],{"type":172,"value":1746},{"type":167,"tag":236,"props":3383,"children":3384},{"style":1749},[3385],{"type":172,"value":3386}," http-equiv",{"type":167,"tag":236,"props":3388,"children":3389},{"style":346},[3390],{"type":172,"value":1757},{"type":167,"tag":236,"props":3392,"children":3393},{"style":273},[3394],{"type":172,"value":1762},{"type":167,"tag":236,"props":3396,"children":3397},{"style":279},[3398],{"type":172,"value":3399},"Content-Security-Policy",{"type":167,"tag":236,"props":3401,"children":3402},{"style":273},[3403],{"type":172,"value":1762},{"type":167,"tag":236,"props":3405,"children":3406},{"style":1749},[3407],{"type":172,"value":1776},{"type":167,"tag":236,"props":3409,"children":3410},{"style":346},[3411],{"type":172,"value":1757},{"type":167,"tag":236,"props":3413,"children":3414},{"style":273},[3415],{"type":172,"value":1762},{"type":167,"tag":236,"props":3417,"children":3418},{"style":279},[3419],{"type":172,"value":3420},"default-src 'self'; img-src https://*; child-src 'none';",{"type":167,"tag":236,"props":3422,"children":3423},{"style":273},[3424],{"type":172,"value":1762},{"type":167,"tag":236,"props":3426,"children":3427},{"style":346},[3428],{"type":172,"value":1797},{"type":167,"tag":168,"props":3430,"children":3431},{},[3432,3434,3439],{"type":172,"value":3433},"一个典型的 ",{"type":167,"tag":232,"props":3435,"children":3437},{"className":3436},[],[3438],{"type":172,"value":717},{"type":172,"value":3440}," 头如下：",{"type":167,"tag":225,"props":3442,"children":3444},{"code":3443},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3445],{"type":167,"tag":232,"props":3446,"children":3447},{"__ignoreMap":160},[3448],{"type":172,"value":3443},{"type":167,"tag":168,"props":3450,"children":3451},{},[3452],{"type":172,"value":3453},"大致来说，CSP 相关以下几种安全行为：",{"type":167,"tag":3455,"props":3456,"children":3457},"ul",{},[3458,3463,3468,3473],{"type":167,"tag":2720,"props":3459,"children":3460},{},[3461],{"type":172,"value":3462},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":167,"tag":2720,"props":3464,"children":3465},{},[3466],{"type":172,"value":3467},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":167,"tag":2720,"props":3469,"children":3470},{},[3471],{"type":172,"value":3472},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":167,"tag":2720,"props":3474,"children":3475},{},[3476,3478,3484],{"type":172,"value":3477},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":167,"tag":232,"props":3479,"children":3481},{"className":3480},[],[3482],{"type":172,"value":3483},"Content-Security-Policy-Report-Only",{"type":172,"value":3485}," Header。",{"type":167,"tag":168,"props":3487,"children":3488},{},[3489,3491,3496],{"type":172,"value":3490},"那么我们看看 Helmet 中默认配置的 ",{"type":167,"tag":232,"props":3492,"children":3494},{"className":3493},[],[3495],{"type":172,"value":717},{"type":172,"value":3497}," 策略：",{"type":167,"tag":225,"props":3499,"children":3501},{"code":3500,"language":228,"meta":160,"className":229,"style":160},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3502],{"type":167,"tag":232,"props":3503,"children":3504},{"__ignoreMap":160},[3505,3525,3533,3580,3588,3632,3640,3669,3677,3755,3763,3806,3814,3874,3882,3927,3935,3979,3987,3995,4003,4011,4060,4068,4146,4154,4162,4170,4195],{"type":167,"tag":236,"props":3506,"children":3507},{"class":238,"line":239},[3508,3512,3517,3521],{"type":167,"tag":236,"props":3509,"children":3510},{"style":243},[3511],{"type":172,"value":246},{"type":167,"tag":236,"props":3513,"children":3514},{"style":249},[3515],{"type":172,"value":3516}," DEFAULT_DIRECTIVES",{"type":167,"tag":236,"props":3518,"children":3519},{"style":255},[3520],{"type":172,"value":258},{"type":167,"tag":236,"props":3522,"children":3523},{"style":346},[3524],{"type":172,"value":1327},{"type":167,"tag":236,"props":3526,"children":3527},{"class":238,"line":294},[3528],{"type":167,"tag":236,"props":3529,"children":3530},{"style":1006},[3531],{"type":172,"value":3532},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":167,"tag":236,"props":3534,"children":3535},{"class":238,"line":303},[3536,3540,3546,3550,3554,3558,3562,3567,3571,3576],{"type":167,"tag":236,"props":3537,"children":3538},{"style":273},[3539],{"type":172,"value":1017},{"type":167,"tag":236,"props":3541,"children":3543},{"style":3542},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3544],{"type":172,"value":3545},"default-src",{"type":167,"tag":236,"props":3547,"children":3548},{"style":273},[3549],{"type":172,"value":276},{"type":167,"tag":236,"props":3551,"children":3552},{"style":346},[3553],{"type":172,"value":1396},{"type":167,"tag":236,"props":3555,"children":3556},{"style":267},[3557],{"type":172,"value":1300},{"type":167,"tag":236,"props":3559,"children":3560},{"style":273},[3561],{"type":172,"value":1762},{"type":167,"tag":236,"props":3563,"children":3564},{"style":279},[3565],{"type":172,"value":3566},"'self'",{"type":167,"tag":236,"props":3568,"children":3569},{"style":273},[3570],{"type":172,"value":1762},{"type":167,"tag":236,"props":3572,"children":3573},{"style":267},[3574],{"type":172,"value":3575},"]",{"type":167,"tag":236,"props":3577,"children":3578},{"style":346},[3579],{"type":172,"value":1031},{"type":167,"tag":236,"props":3581,"children":3582},{"class":238,"line":329},[3583],{"type":167,"tag":236,"props":3584,"children":3585},{"style":1006},[3586],{"type":172,"value":3587},"  // 限制 base 标签的 URI 为源地址\n",{"type":167,"tag":236,"props":3589,"children":3590},{"class":238,"line":337},[3591,3595,3600,3604,3608,3612,3616,3620,3624,3628],{"type":167,"tag":236,"props":3592,"children":3593},{"style":273},[3594],{"type":172,"value":1017},{"type":167,"tag":236,"props":3596,"children":3597},{"style":3542},[3598],{"type":172,"value":3599},"base-uri",{"type":167,"tag":236,"props":3601,"children":3602},{"style":273},[3603],{"type":172,"value":276},{"type":167,"tag":236,"props":3605,"children":3606},{"style":346},[3607],{"type":172,"value":1396},{"type":167,"tag":236,"props":3609,"children":3610},{"style":267},[3611],{"type":172,"value":1300},{"type":167,"tag":236,"props":3613,"children":3614},{"style":273},[3615],{"type":172,"value":1762},{"type":167,"tag":236,"props":3617,"children":3618},{"style":279},[3619],{"type":172,"value":3566},{"type":167,"tag":236,"props":3621,"children":3622},{"style":273},[3623],{"type":172,"value":1762},{"type":167,"tag":236,"props":3625,"children":3626},{"style":267},[3627],{"type":172,"value":3575},{"type":167,"tag":236,"props":3629,"children":3630},{"style":346},[3631],{"type":172,"value":1031},{"type":167,"tag":236,"props":3633,"children":3634},{"class":238,"line":1062},[3635],{"type":167,"tag":236,"props":3636,"children":3637},{"style":1006},[3638],{"type":172,"value":3639},"  // 禁止通过 HTTP 协议加载内容\n",{"type":167,"tag":236,"props":3641,"children":3642},{"class":238,"line":1071},[3643,3647,3652,3656,3660,3665],{"type":167,"tag":236,"props":3644,"children":3645},{"style":273},[3646],{"type":172,"value":1017},{"type":167,"tag":236,"props":3648,"children":3649},{"style":3542},[3650],{"type":172,"value":3651},"block-all-mixed-content",{"type":167,"tag":236,"props":3653,"children":3654},{"style":273},[3655],{"type":172,"value":276},{"type":167,"tag":236,"props":3657,"children":3658},{"style":346},[3659],{"type":172,"value":1396},{"type":167,"tag":236,"props":3661,"children":3662},{"style":267},[3663],{"type":172,"value":3664}," []",{"type":167,"tag":236,"props":3666,"children":3667},{"style":346},[3668],{"type":172,"value":1031},{"type":167,"tag":236,"props":3670,"children":3671},{"class":238,"line":1092},[3672],{"type":167,"tag":236,"props":3673,"children":3674},{"style":1006},[3675],{"type":172,"value":3676},"  // 限制字体加载地址\n",{"type":167,"tag":236,"props":3678,"children":3679},{"class":238,"line":1101},[3680,3684,3689,3693,3697,3701,3705,3709,3713,3717,3721,3726,3730,3734,3738,3743,3747,3751],{"type":167,"tag":236,"props":3681,"children":3682},{"style":273},[3683],{"type":172,"value":1017},{"type":167,"tag":236,"props":3685,"children":3686},{"style":3542},[3687],{"type":172,"value":3688},"font-src",{"type":167,"tag":236,"props":3690,"children":3691},{"style":273},[3692],{"type":172,"value":276},{"type":167,"tag":236,"props":3694,"children":3695},{"style":346},[3696],{"type":172,"value":1396},{"type":167,"tag":236,"props":3698,"children":3699},{"style":267},[3700],{"type":172,"value":1300},{"type":167,"tag":236,"props":3702,"children":3703},{"style":273},[3704],{"type":172,"value":1762},{"type":167,"tag":236,"props":3706,"children":3707},{"style":279},[3708],{"type":172,"value":3566},{"type":167,"tag":236,"props":3710,"children":3711},{"style":273},[3712],{"type":172,"value":1762},{"type":167,"tag":236,"props":3714,"children":3715},{"style":346},[3716],{"type":172,"value":561},{"type":167,"tag":236,"props":3718,"children":3719},{"style":273},[3720],{"type":172,"value":566},{"type":167,"tag":236,"props":3722,"children":3723},{"style":279},[3724],{"type":172,"value":3725},"https:",{"type":167,"tag":236,"props":3727,"children":3728},{"style":273},[3729],{"type":172,"value":276},{"type":167,"tag":236,"props":3731,"children":3732},{"style":346},[3733],{"type":172,"value":561},{"type":167,"tag":236,"props":3735,"children":3736},{"style":273},[3737],{"type":172,"value":566},{"type":167,"tag":236,"props":3739,"children":3740},{"style":279},[3741],{"type":172,"value":3742},"data:",{"type":167,"tag":236,"props":3744,"children":3745},{"style":273},[3746],{"type":172,"value":276},{"type":167,"tag":236,"props":3748,"children":3749},{"style":267},[3750],{"type":172,"value":3575},{"type":167,"tag":236,"props":3752,"children":3753},{"style":346},[3754],{"type":172,"value":1031},{"type":167,"tag":236,"props":3756,"children":3757},{"class":238,"line":1122},[3758],{"type":167,"tag":236,"props":3759,"children":3760},{"style":1006},[3761],{"type":172,"value":3762},"  // 限制嵌入的外部资源\n",{"type":167,"tag":236,"props":3764,"children":3765},{"class":238,"line":1131},[3766,3770,3774,3778,3782,3786,3790,3794,3798,3802],{"type":167,"tag":236,"props":3767,"children":3768},{"style":273},[3769],{"type":172,"value":1017},{"type":167,"tag":236,"props":3771,"children":3772},{"style":3542},[3773],{"type":172,"value":911},{"type":167,"tag":236,"props":3775,"children":3776},{"style":273},[3777],{"type":172,"value":276},{"type":167,"tag":236,"props":3779,"children":3780},{"style":346},[3781],{"type":172,"value":1396},{"type":167,"tag":236,"props":3783,"children":3784},{"style":267},[3785],{"type":172,"value":1300},{"type":167,"tag":236,"props":3787,"children":3788},{"style":273},[3789],{"type":172,"value":1762},{"type":167,"tag":236,"props":3791,"children":3792},{"style":279},[3793],{"type":172,"value":3566},{"type":167,"tag":236,"props":3795,"children":3796},{"style":273},[3797],{"type":172,"value":1762},{"type":167,"tag":236,"props":3799,"children":3800},{"style":267},[3801],{"type":172,"value":3575},{"type":167,"tag":236,"props":3803,"children":3804},{"style":346},[3805],{"type":172,"value":1031},{"type":167,"tag":236,"props":3807,"children":3808},{"class":238,"line":1152},[3809],{"type":167,"tag":236,"props":3810,"children":3811},{"style":1006},[3812],{"type":172,"value":3813},"  // 限制图片加载地址\n",{"type":167,"tag":236,"props":3815,"children":3816},{"class":238,"line":1161},[3817,3821,3826,3830,3834,3838,3842,3846,3850,3854,3858,3862,3866,3870],{"type":167,"tag":236,"props":3818,"children":3819},{"style":273},[3820],{"type":172,"value":1017},{"type":167,"tag":236,"props":3822,"children":3823},{"style":3542},[3824],{"type":172,"value":3825},"img-src",{"type":167,"tag":236,"props":3827,"children":3828},{"style":273},[3829],{"type":172,"value":276},{"type":167,"tag":236,"props":3831,"children":3832},{"style":346},[3833],{"type":172,"value":1396},{"type":167,"tag":236,"props":3835,"children":3836},{"style":267},[3837],{"type":172,"value":1300},{"type":167,"tag":236,"props":3839,"children":3840},{"style":273},[3841],{"type":172,"value":1762},{"type":167,"tag":236,"props":3843,"children":3844},{"style":279},[3845],{"type":172,"value":3566},{"type":167,"tag":236,"props":3847,"children":3848},{"style":273},[3849],{"type":172,"value":1762},{"type":167,"tag":236,"props":3851,"children":3852},{"style":346},[3853],{"type":172,"value":561},{"type":167,"tag":236,"props":3855,"children":3856},{"style":273},[3857],{"type":172,"value":566},{"type":167,"tag":236,"props":3859,"children":3860},{"style":279},[3861],{"type":172,"value":3742},{"type":167,"tag":236,"props":3863,"children":3864},{"style":273},[3865],{"type":172,"value":276},{"type":167,"tag":236,"props":3867,"children":3868},{"style":267},[3869],{"type":172,"value":3575},{"type":167,"tag":236,"props":3871,"children":3872},{"style":346},[3873],{"type":172,"value":1031},{"type":167,"tag":236,"props":3875,"children":3876},{"class":238,"line":1182},[3877],{"type":167,"tag":236,"props":3878,"children":3879},{"style":1006},[3880],{"type":172,"value":3881},"  // 禁用 object 标签\n",{"type":167,"tag":236,"props":3883,"children":3884},{"class":238,"line":1191},[3885,3889,3894,3898,3902,3906,3910,3915,3919,3923],{"type":167,"tag":236,"props":3886,"children":3887},{"style":273},[3888],{"type":172,"value":1017},{"type":167,"tag":236,"props":3890,"children":3891},{"style":3542},[3892],{"type":172,"value":3893},"object-src",{"type":167,"tag":236,"props":3895,"children":3896},{"style":273},[3897],{"type":172,"value":276},{"type":167,"tag":236,"props":3899,"children":3900},{"style":346},[3901],{"type":172,"value":1396},{"type":167,"tag":236,"props":3903,"children":3904},{"style":267},[3905],{"type":172,"value":1300},{"type":167,"tag":236,"props":3907,"children":3908},{"style":273},[3909],{"type":172,"value":1762},{"type":167,"tag":236,"props":3911,"children":3912},{"style":279},[3913],{"type":172,"value":3914},"'none'",{"type":167,"tag":236,"props":3916,"children":3917},{"style":273},[3918],{"type":172,"value":1762},{"type":167,"tag":236,"props":3920,"children":3921},{"style":267},[3922],{"type":172,"value":3575},{"type":167,"tag":236,"props":3924,"children":3925},{"style":346},[3926],{"type":172,"value":1031},{"type":167,"tag":236,"props":3928,"children":3929},{"class":238,"line":1212},[3930],{"type":167,"tag":236,"props":3931,"children":3932},{"style":1006},[3933],{"type":172,"value":3934},"  // 只从源地址加载脚本\n",{"type":167,"tag":236,"props":3936,"children":3937},{"class":238,"line":1221},[3938,3942,3947,3951,3955,3959,3963,3967,3971,3975],{"type":167,"tag":236,"props":3939,"children":3940},{"style":273},[3941],{"type":172,"value":1017},{"type":167,"tag":236,"props":3943,"children":3944},{"style":3542},[3945],{"type":172,"value":3946},"script-src",{"type":167,"tag":236,"props":3948,"children":3949},{"style":273},[3950],{"type":172,"value":276},{"type":167,"tag":236,"props":3952,"children":3953},{"style":346},[3954],{"type":172,"value":1396},{"type":167,"tag":236,"props":3956,"children":3957},{"style":267},[3958],{"type":172,"value":1300},{"type":167,"tag":236,"props":3960,"children":3961},{"style":273},[3962],{"type":172,"value":1762},{"type":167,"tag":236,"props":3964,"children":3965},{"style":279},[3966],{"type":172,"value":3566},{"type":167,"tag":236,"props":3968,"children":3969},{"style":273},[3970],{"type":172,"value":1762},{"type":167,"tag":236,"props":3972,"children":3973},{"style":267},[3974],{"type":172,"value":3575},{"type":167,"tag":236,"props":3976,"children":3977},{"style":346},[3978],{"type":172,"value":1031},{"type":167,"tag":236,"props":3980,"children":3981},{"class":238,"line":1242},[3982],{"type":167,"tag":236,"props":3983,"children":3984},{"style":1006},[3985],{"type":172,"value":3986},"  // 禁用内联脚本\n",{"type":167,"tag":236,"props":3988,"children":3989},{"class":238,"line":1251},[3990],{"type":167,"tag":236,"props":3991,"children":3992},{"style":1006},[3993],{"type":172,"value":3994},"  // ？这里没能理解\n",{"type":167,"tag":236,"props":3996,"children":3997},{"class":238,"line":1260},[3998],{"type":167,"tag":236,"props":3999,"children":4000},{"style":1006},[4001],{"type":172,"value":4002},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":167,"tag":236,"props":4004,"children":4005},{"class":238,"line":1269},[4006],{"type":167,"tag":236,"props":4007,"children":4008},{"style":1006},[4009],{"type":172,"value":4010},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":167,"tag":236,"props":4012,"children":4013},{"class":238,"line":1330},[4014,4018,4023,4027,4031,4035,4039,4043,4047,4051,4055],{"type":167,"tag":236,"props":4015,"children":4016},{"style":273},[4017],{"type":172,"value":1017},{"type":167,"tag":236,"props":4019,"children":4020},{"style":3542},[4021],{"type":172,"value":4022},"script-src-attr",{"type":167,"tag":236,"props":4024,"children":4025},{"style":273},[4026],{"type":172,"value":276},{"type":167,"tag":236,"props":4028,"children":4029},{"style":346},[4030],{"type":172,"value":1396},{"type":167,"tag":236,"props":4032,"children":4033},{"style":267},[4034],{"type":172,"value":1300},{"type":167,"tag":236,"props":4036,"children":4037},{"style":273},[4038],{"type":172,"value":1762},{"type":167,"tag":236,"props":4040,"children":4041},{"style":279},[4042],{"type":172,"value":3914},{"type":167,"tag":236,"props":4044,"children":4045},{"style":273},[4046],{"type":172,"value":1762},{"type":167,"tag":236,"props":4048,"children":4049},{"style":267},[4050],{"type":172,"value":3575},{"type":167,"tag":236,"props":4052,"children":4053},{"style":346},[4054],{"type":172,"value":561},{"type":167,"tag":236,"props":4056,"children":4057},{"style":267},[4058],{"type":172,"value":4059},"‘\n",{"type":167,"tag":236,"props":4061,"children":4062},{"class":238,"line":1404},[4063],{"type":167,"tag":236,"props":4064,"children":4065},{"style":1006},[4066],{"type":172,"value":4067},"  // 限制样式表加载地址\n",{"type":167,"tag":236,"props":4069,"children":4070},{"class":238,"line":1435},[4071,4075,4080,4084,4088,4092,4096,4100,4104,4108,4112,4116,4120,4124,4129,4134,4138,4142],{"type":167,"tag":236,"props":4072,"children":4073},{"style":273},[4074],{"type":172,"value":1017},{"type":167,"tag":236,"props":4076,"children":4077},{"style":3542},[4078],{"type":172,"value":4079},"style-src",{"type":167,"tag":236,"props":4081,"children":4082},{"style":273},[4083],{"type":172,"value":276},{"type":167,"tag":236,"props":4085,"children":4086},{"style":346},[4087],{"type":172,"value":1396},{"type":167,"tag":236,"props":4089,"children":4090},{"style":267},[4091],{"type":172,"value":1300},{"type":167,"tag":236,"props":4093,"children":4094},{"style":273},[4095],{"type":172,"value":1762},{"type":167,"tag":236,"props":4097,"children":4098},{"style":279},[4099],{"type":172,"value":3566},{"type":167,"tag":236,"props":4101,"children":4102},{"style":273},[4103],{"type":172,"value":1762},{"type":167,"tag":236,"props":4105,"children":4106},{"style":346},[4107],{"type":172,"value":561},{"type":167,"tag":236,"props":4109,"children":4110},{"style":273},[4111],{"type":172,"value":566},{"type":167,"tag":236,"props":4113,"children":4114},{"style":279},[4115],{"type":172,"value":3725},{"type":167,"tag":236,"props":4117,"children":4118},{"style":273},[4119],{"type":172,"value":276},{"type":167,"tag":236,"props":4121,"children":4122},{"style":346},[4123],{"type":172,"value":561},{"type":167,"tag":236,"props":4125,"children":4126},{"style":273},[4127],{"type":172,"value":4128}," \"",{"type":167,"tag":236,"props":4130,"children":4131},{"style":279},[4132],{"type":172,"value":4133},"'unsafe-inline'",{"type":167,"tag":236,"props":4135,"children":4136},{"style":273},[4137],{"type":172,"value":1762},{"type":167,"tag":236,"props":4139,"children":4140},{"style":267},[4141],{"type":172,"value":3575},{"type":167,"tag":236,"props":4143,"children":4144},{"style":346},[4145],{"type":172,"value":1031},{"type":167,"tag":236,"props":4147,"children":4148},{"class":238,"line":1448},[4149],{"type":167,"tag":236,"props":4150,"children":4151},{"style":1006},[4152],{"type":172,"value":4153},"  // 不使用升级协议指令\n",{"type":167,"tag":236,"props":4155,"children":4156},{"class":238,"line":1457},[4157],{"type":167,"tag":236,"props":4158,"children":4159},{"style":1006},[4160],{"type":172,"value":4161},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版URL的网站，\n",{"type":167,"tag":236,"props":4163,"children":4164},{"class":238,"line":1500},[4165],{"type":167,"tag":236,"props":4166,"children":4167},{"style":1006},[4168],{"type":172,"value":4169},"  // 所以默认不开启此指令\n",{"type":167,"tag":236,"props":4171,"children":4172},{"class":238,"line":1509},[4173,4177,4182,4186,4190],{"type":167,"tag":236,"props":4174,"children":4175},{"style":273},[4176],{"type":172,"value":1017},{"type":167,"tag":236,"props":4178,"children":4179},{"style":3542},[4180],{"type":172,"value":4181},"upgrade-insecure-requests",{"type":167,"tag":236,"props":4183,"children":4184},{"style":273},[4185],{"type":172,"value":276},{"type":167,"tag":236,"props":4187,"children":4188},{"style":346},[4189],{"type":172,"value":1396},{"type":167,"tag":236,"props":4191,"children":4192},{"style":267},[4193],{"type":172,"value":4194}," []\n",{"type":167,"tag":236,"props":4196,"children":4197},{"class":238,"line":1544},[4198],{"type":167,"tag":236,"props":4199,"children":4200},{"style":346},[4201],{"type":172,"value":1506},{"type":167,"tag":168,"props":4203,"children":4204},{},[4205,4207,4213,4215,4221],{"type":172,"value":4206},"最后，我们看兼容性... Caniuse 网站只提供了 ",{"type":167,"tag":232,"props":4208,"children":4210},{"className":4209},[],[4211],{"type":172,"value":4212},"CSP 1.0",{"type":172,"value":4214}," 的兼容性，我没有找到最新版本规范（",{"type":167,"tag":232,"props":4216,"children":4218},{"className":4217},[],[4219],{"type":172,"value":4220},"CSP 3.0",{"type":172,"value":4222},"）的兼容性数据 😝。",{"type":167,"tag":168,"props":4224,"children":4225},{},[4226],{"type":167,"tag":889,"props":4227,"children":4230},{"alt":4228,"src":4229},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":167,"tag":436,"props":4232,"children":4234},{"id":4233},"移除下载文件后的打开按钮",[4235],{"type":172,"value":4236},"移除下载文件后的“打开”按钮",{"type":167,"tag":225,"props":4238,"children":4240},{"code":4239,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('X-Download-Options', 'noopen')\n",[4241],{"type":167,"tag":232,"props":4242,"children":4243},{"__ignoreMap":160},[4244],{"type":167,"tag":236,"props":4245,"children":4246},{"class":238,"line":239},[4247,4251,4255,4259,4263,4267,4272,4276,4280,4284,4289,4293],{"type":167,"tag":236,"props":4248,"children":4249},{"style":267},[4250],{"type":172,"value":456},{"type":167,"tag":236,"props":4252,"children":4253},{"style":346},[4254],{"type":172,"value":349},{"type":167,"tag":236,"props":4256,"children":4257},{"style":261},[4258],{"type":172,"value":539},{"type":167,"tag":236,"props":4260,"children":4261},{"style":267},[4262],{"type":172,"value":270},{"type":167,"tag":236,"props":4264,"children":4265},{"style":273},[4266],{"type":172,"value":276},{"type":167,"tag":236,"props":4268,"children":4269},{"style":279},[4270],{"type":172,"value":4271},"X-Download-Options",{"type":167,"tag":236,"props":4273,"children":4274},{"style":273},[4275],{"type":172,"value":276},{"type":167,"tag":236,"props":4277,"children":4278},{"style":346},[4279],{"type":172,"value":561},{"type":167,"tag":236,"props":4281,"children":4282},{"style":273},[4283],{"type":172,"value":566},{"type":167,"tag":236,"props":4285,"children":4286},{"style":279},[4287],{"type":172,"value":4288},"noopen",{"type":167,"tag":236,"props":4290,"children":4291},{"style":273},[4292],{"type":172,"value":276},{"type":167,"tag":236,"props":4294,"children":4295},{"style":267},[4296],{"type":172,"value":291},{"type":167,"tag":168,"props":4298,"children":4299},{},[4300,4302,4307],{"type":172,"value":4301},"在下载文件时，",{"type":167,"tag":232,"props":4303,"children":4305},{"className":4304},[],[4306],{"type":172,"value":4271},{"type":172,"value":4308}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":167,"tag":436,"props":4310,"children":4312},{"id":4311},"开启-dns-预取",[4313],{"type":172,"value":4314},"开启 DNS 预取",{"type":167,"tag":168,"props":4316,"children":4317},{},[4318,4320,4326],{"type":172,"value":4319},"通过设置 ",{"type":167,"tag":232,"props":4321,"children":4323},{"className":4322},[],[4324],{"type":172,"value":4325},"X-DNS-Prefetch-Control",{"type":172,"value":4327}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":167,"tag":168,"props":4329,"children":4330},{},[4331,4333,4340],{"type":172,"value":4332},"至于 DNS Prefetch 具体是如何增强浏览器安全的... 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":167,"tag":179,"props":4334,"children":4337},{"href":4335,"rel":4336},"https://github.com/helmetjs/helmet/issues/111",[756],[4338],{"type":172,"value":4339},"Issue",{"type":172,"value":746},{"type":167,"tag":225,"props":4342,"children":4344},{"code":4343,"language":228,"meta":160,"className":229,"style":160},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4345],{"type":167,"tag":232,"props":4346,"children":4347},{"__ignoreMap":160},[4348],{"type":167,"tag":236,"props":4349,"children":4350},{"class":238,"line":239},[4351,4355,4359,4363,4367,4371,4375,4379,4383,4387,4392,4396],{"type":167,"tag":236,"props":4352,"children":4353},{"style":267},[4354],{"type":172,"value":456},{"type":167,"tag":236,"props":4356,"children":4357},{"style":346},[4358],{"type":172,"value":349},{"type":167,"tag":236,"props":4360,"children":4361},{"style":261},[4362],{"type":172,"value":539},{"type":167,"tag":236,"props":4364,"children":4365},{"style":267},[4366],{"type":172,"value":270},{"type":167,"tag":236,"props":4368,"children":4369},{"style":273},[4370],{"type":172,"value":276},{"type":167,"tag":236,"props":4372,"children":4373},{"style":279},[4374],{"type":172,"value":4325},{"type":167,"tag":236,"props":4376,"children":4377},{"style":273},[4378],{"type":172,"value":276},{"type":167,"tag":236,"props":4380,"children":4381},{"style":346},[4382],{"type":172,"value":561},{"type":167,"tag":236,"props":4384,"children":4385},{"style":273},[4386],{"type":172,"value":566},{"type":167,"tag":236,"props":4388,"children":4389},{"style":279},[4390],{"type":172,"value":4391},"on",{"type":167,"tag":236,"props":4393,"children":4394},{"style":273},[4395],{"type":172,"value":276},{"type":167,"tag":236,"props":4397,"children":4398},{"style":267},[4399],{"type":172,"value":291},{"type":167,"tag":405,"props":4401,"children":4403},{"id":4402},"阅读更多",[4404],{"type":172,"value":4402},{"type":167,"tag":168,"props":4406,"children":4407},{},[4408],{"type":172,"value":4409},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":167,"tag":3455,"props":4411,"children":4412},{},[4413],{"type":167,"tag":2720,"props":4414,"children":4415},{},[4416,4418],{"type":172,"value":4417},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":167,"tag":175,"props":4419,"children":4420},{},[4421],{"type":167,"tag":179,"props":4422,"children":4426},{"href":4423,"ariaDescribedBy":4424,"dataFootnoteRef":160,"id":4425},"#user-content-fn-secure-cookie",[183],"user-content-fnref-secure-cookie",[4427],{"type":172,"value":4428},"13",{"type":167,"tag":168,"props":4430,"children":4431},{},[4432,4434,4441,4443,4450],{"type":172,"value":4433},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":167,"tag":179,"props":4435,"children":4438},{"href":4436,"rel":4437},"https://owasp.org/www-project-secure-headers/",[756],[4439],{"type":172,"value":4440},"OWASP Secure Headers Project",{"type":172,"value":4442},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":167,"tag":179,"props":4444,"children":4447},{"href":4445,"rel":4446},"https://infosec.mozilla.org/guidelines/web_security",[756],[4448],{"type":172,"value":4449},"Web Security",{"type":172,"value":4451},"。以下是一些额外的可供探索的页面：",{"type":167,"tag":3455,"props":4453,"children":4454},{},[4455,4465,4475],{"type":167,"tag":2720,"props":4456,"children":4457},{},[4458],{"type":167,"tag":179,"props":4459,"children":4462},{"href":4460,"rel":4461},"https://www.zhihu.com/question/21979782",[756],[4463],{"type":172,"value":4464},"Content Security Policy (CSP) 是什么？",{"type":167,"tag":2720,"props":4466,"children":4467},{},[4468],{"type":167,"tag":179,"props":4469,"children":4472},{"href":4470,"rel":4471},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[756],[4473],{"type":172,"value":4474},"CORS@MDN",{"type":167,"tag":2720,"props":4476,"children":4477},{},[4478],{"type":167,"tag":179,"props":4479,"children":4482},{"href":4480,"rel":4481},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[756],[4483],{"type":172,"value":4484},"OWASP Top 10 2017（RC2）",{"type":167,"tag":4486,"props":4487,"children":4490},"section",{"className":4488,"dataFootnotes":160},[4489],"footnotes",[4491,4498],{"type":167,"tag":405,"props":4492,"children":4495},{"className":4493,"id":183},[4494],"sr-only",[4496],{"type":172,"value":4497},"Footnotes",{"type":167,"tag":2716,"props":4499,"children":4500},{},[4501,4523,4542,4561,4578,4597,4616,4629,4647,4666,4685,4704,4723],{"type":167,"tag":2720,"props":4502,"children":4504},{"id":4503},"user-content-fn-helmet",[4505,4512,4514],{"type":167,"tag":179,"props":4506,"children":4509},{"href":4507,"rel":4508},"https://helmetjs.github.io/",[756],[4510],{"type":172,"value":4511},"HELMET",{"type":172,"value":4513}," ",{"type":167,"tag":179,"props":4515,"children":4520},{"href":4516,"ariaLabel":4517,"className":4518,"dataFootnoteBackref":160},"#user-content-fnref-helmet","Back to reference 1",[4519],"data-footnote-backref",[4521],{"type":172,"value":4522},"↩",{"type":167,"tag":2720,"props":4524,"children":4526},{"id":4525},"user-content-fn-dns-rebinding-1",[4527,4534,4535],{"type":167,"tag":179,"props":4528,"children":4531},{"href":4529,"rel":4530},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[756],[4532],{"type":172,"value":4533},"来自微信外挂的安全风险",{"type":172,"value":4513},{"type":167,"tag":179,"props":4536,"children":4540},{"href":4537,"ariaLabel":4538,"className":4539,"dataFootnoteBackref":160},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4519],[4541],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4543,"children":4545},{"id":4544},"user-content-fn-dns-rebinding-2",[4546,4553,4554],{"type":167,"tag":179,"props":4547,"children":4550},{"href":4548,"rel":4549},"https://github.com/helmetjs/helmet/issues/182",[756],[4551],{"type":172,"value":4552},"GitHub Issue",{"type":172,"value":4513},{"type":167,"tag":179,"props":4555,"children":4559},{"href":4556,"ariaLabel":4557,"className":4558,"dataFootnoteBackref":160},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4519],[4560],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4562,"children":4564},{"id":4563},"user-content-fn-shp",[4565,4570,4571],{"type":167,"tag":179,"props":4566,"children":4568},{"href":4436,"rel":4567},[756],[4569],{"type":172,"value":4440},{"type":172,"value":4513},{"type":167,"tag":179,"props":4572,"children":4576},{"href":4573,"ariaLabel":4574,"className":4575,"dataFootnoteBackref":160},"#user-content-fnref-shp","Back to reference 4",[4519],[4577],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4579,"children":4581},{"id":4580},"user-content-fn-xss-auditor",[4582,4589,4590],{"type":167,"tag":179,"props":4583,"children":4586},{"href":4584,"rel":4585},"https://www.chromestatus.com/feature/5021976655560704",[756],[4587],{"type":172,"value":4588},"XSS Auditor (removed)",{"type":172,"value":4513},{"type":167,"tag":179,"props":4591,"children":4595},{"href":4592,"ariaLabel":4593,"className":4594,"dataFootnoteBackref":160},"#user-content-fnref-xss-auditor","Back to reference 5",[4519],[4596],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4598,"children":4600},{"id":4599},"user-content-fn-delete-xss-auditor",[4601,4608,4609],{"type":167,"tag":179,"props":4602,"children":4605},{"href":4603,"rel":4604},"https://zhuanlan.zhihu.com/p/74288648",[756],[4606],{"type":172,"value":4607},"Google 将删除 Chrome 内置的 XSS 保护",{"type":172,"value":4513},{"type":167,"tag":179,"props":4610,"children":4614},{"href":4611,"ariaLabel":4612,"className":4613,"dataFootnoteBackref":160},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4519],[4615],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4617,"children":4619},{"id":4618},"user-content-fn-referer",[4620,4622],{"type":172,"value":4621},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":167,"tag":179,"props":4623,"children":4627},{"href":4624,"ariaLabel":4625,"className":4626,"dataFootnoteBackref":160},"#user-content-fnref-referer","Back to reference 7",[4519],[4628],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4630,"children":4632},{"id":4631},"user-content-fn-timeend",[4633,4639,4640],{"type":167,"tag":179,"props":4634,"children":4637},{"href":4635,"rel":4636},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[756],[4638],{"type":172,"value":2527},{"type":172,"value":4513},{"type":167,"tag":179,"props":4641,"children":4645},{"href":4642,"ariaLabel":4643,"className":4644,"dataFootnoteBackref":160},"#user-content-fnref-timeend","Back to reference 8",[4519],[4646],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4648,"children":4650},{"id":4649},"user-content-fn-chrome-ct",[4651,4658,4659],{"type":167,"tag":179,"props":4652,"children":4655},{"href":4653,"rel":4654},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[756],[4656],{"type":172,"value":4657},"Chrome 证书透明度（CT）相关政策",{"type":172,"value":4513},{"type":167,"tag":179,"props":4660,"children":4664},{"href":4661,"ariaLabel":4662,"className":4663,"dataFootnoteBackref":160},"#user-content-fnref-chrome-ct","Back to reference 9",[4519],[4665],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4667,"children":4669},{"id":4668},"user-content-fn-ct",[4670,4677,4678],{"type":167,"tag":179,"props":4671,"children":4674},{"href":4672,"rel":4673},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[756],[4675],{"type":172,"value":4676},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":172,"value":4513},{"type":167,"tag":179,"props":4679,"children":4683},{"href":4680,"ariaLabel":4681,"className":4682,"dataFootnoteBackref":160},"#user-content-fnref-ct","Back to reference 10",[4519],[4684],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4686,"children":4688},{"id":4687},"user-content-fn-pdf-reader",[4689,4696,4697],{"type":167,"tag":179,"props":4690,"children":4693},{"href":4691,"rel":4692},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[756],[4694],{"type":172,"value":4695},"Cross Domain Configuration",{"type":172,"value":4513},{"type":167,"tag":179,"props":4698,"children":4702},{"href":4699,"ariaLabel":4700,"className":4701,"dataFootnoteBackref":160},"#user-content-fnref-pdf-reader","Back to reference 11",[4519],[4703],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4705,"children":4707},{"id":4706},"user-content-fn-csp-standard",[4708,4715,4716],{"type":167,"tag":179,"props":4709,"children":4712},{"href":4710,"rel":4711},"https://www.w3.org/TR/CSP/",[756],[4713],{"type":172,"value":4714},"Content Security Policy Level 3",{"type":172,"value":4513},{"type":167,"tag":179,"props":4717,"children":4721},{"href":4718,"ariaLabel":4719,"className":4720,"dataFootnoteBackref":160},"#user-content-fnref-csp-standard","Back to reference 12",[4519],[4722],{"type":172,"value":4522},{"type":167,"tag":2720,"props":4724,"children":4726},{"id":4725},"user-content-fn-secure-cookie",[4727,4734,4735],{"type":167,"tag":179,"props":4728,"children":4731},{"href":4729,"rel":4730},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[756],[4732],{"type":172,"value":4733},"Secure-Cookie",{"type":172,"value":4513},{"type":167,"tag":179,"props":4736,"children":4740},{"href":4737,"ariaLabel":4738,"className":4739,"dataFootnoteBackref":160},"#user-content-fnref-secure-cookie","Back to reference 13",[4519],[4741],{"type":172,"value":4522},{"type":167,"tag":4743,"props":4744,"children":4745},"style",{},[4746],{"type":172,"value":4747},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":160,"searchDepth":294,"depth":294,"links":4749},[4750,4763,4764],{"id":407,"depth":294,"text":410,"children":4751},[4752,4753,4754,4755,4756,4757,4758,4759,4760,4761,4762],{"id":438,"depth":303,"text":441},{"id":513,"depth":303,"text":516},{"id":603,"depth":303,"text":606},{"id":763,"depth":303,"text":763},{"id":922,"depth":303,"text":925},{"id":1933,"depth":303,"text":1936},{"id":2571,"depth":303,"text":2571},{"id":2680,"depth":303,"text":2683},{"id":3311,"depth":303,"text":3314},{"id":4233,"depth":303,"text":4236},{"id":4311,"depth":303,"text":4314},{"id":4402,"depth":294,"text":4402},{"id":183,"depth":294,"text":4497},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[4772,4776],{"_path":4773,"title":4774,"description":4775},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":4777,"title":4778,"description":160},"/_achieved/2020-10/noname","无题",1742348687697]