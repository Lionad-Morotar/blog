[{"data":1,"prerenderedAt":4792},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-08/helmet-and-security":161,"/_achieved/2020-08/helmet-and-security-surround":4784},[4,35,92,98,125,131,155],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86,89],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🖌️ Blockies Animation","/maps/_fe-framework/motion/blockies-animation",{"title":45,"_path":46},"🌪️ Tailwind v4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":48,"_path":49},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":51,"_path":52},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":54,"_path":55},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":57,"_path":58},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":60,"_path":61},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":63,"_path":64},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":66,"_path":67},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":69,"_path":70},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":72,"_path":73},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":75,"_path":76},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":78,"_path":79},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":81,"_path":82},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":84,"_path":85},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":87,"_path":88},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":90,"_path":91},"📝 技术博客归档","/articles/archive",{"title":93,"_path":94,"children":95},"读书笔记 / Notes","/books",[96],{"title":97,"_path":94},"📕 读书笔记",{"title":99,"_path":100,"children":101},"吉他剧场 / Music","/music",[102,104,107,110,113,116,119,122],{"title":103,"_path":100},"🎸 FingerStyle！",{"title":105,"_path":106},"🌬️ 等待的风","/music/wind",{"title":108,"_path":109},"💕 约定的海洋","/music/ocean",{"title":111,"_path":112},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":114,"_path":115},"🌏 残酷天使的行动纲领","/music/eva",{"title":117,"_path":118},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":120,"_path":121},"🍷 Wu Wei","/music/wu-wei",{"title":123,"_path":124},"🌅 无题","/music/untitled",{"title":126,"_path":127,"children":128},"知识地图 / Maps","/maps",[129],{"title":130,"_path":127},"🏁 知识地图",{"title":132,"_path":133,"children":134},"造物 / Make","/tools",[135,137,140,143,146,149,152],{"title":136,"_path":133},"🧰 工具收集",{"title":138,"_path":139},"📕 博客","/tools/blog",{"title":141,"_path":142},"🥥 Coconut","/tools/coconut",{"title":144,"_path":145},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":147,"_path":148},"🌐 AnySort","/tools/anysort",{"title":150,"_path":151},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":153,"_path":154},"👓 Crapto","/tools/crypto-inline",{"title":156,"_path":157,"children":158},"我 / About","/hire",[159],{"title":160,"_path":157},"📬 技术简历",{"_path":162,"_dir":163,"_draft":164,"_partial":165,"_locale":166,"title":167,"description":168,"body":169,"_type":4778,"_id":4779,"_source":4780,"_file":4781,"_stem":4782,"_extension":4783},"/_achieved/2020-08/helmet-and-security","2020-08",false,true,"","👹 Helmet & Security","本文简单介绍了安全库 Helmet 的原理，相关 MIME 嗅探、XSS、CSP、DNS 预取等。",{"type":170,"children":171,"toc":4761},"root",[172,194,225,230,392,397,405,410,417,441,448,493,505,517,523,586,607,613,673,685,753,775,780,840,865,898,907,933,939,976,1717,1737,1944,1950,1975,2018,2026,2582,2587,2635,2671,2679,2691,2697,2721,2728,2751,2756,2986,3005,3317,3322,3328,3367,3377,3442,3454,3462,3467,3499,3511,4215,4236,4244,4250,4310,4322,4328,4341,4354,4413,4418,4423,4442,4465,4498,4755],{"type":173,"tag":174,"props":175,"children":176},"element","p",{},[177,180],{"type":178,"value":179},"text","Helmet helps you secure your Express apps by setting various HTTP headers. It's not a silver bullet, but it can help!",{"type":173,"tag":181,"props":182,"children":183},"sup",{},[184],{"type":173,"tag":185,"props":186,"children":191},"a",{"href":187,"ariaDescribedBy":188,"dataFootnoteRef":166,"id":190},"#user-content-fn-helmet",[189],"footnote-label","user-content-fnref-helmet",[192],{"type":178,"value":193},"1",{"type":173,"tag":174,"props":195,"children":196},{},[197,199,210,212,223],{"type":178,"value":198},"Helmet 是一个 Express 中间件，它更改了 HTTP 请求的某些响应头，以告知浏览器使用某种安全策略。Helmet 不能带来绝对的安全，比如针对 DNS Rebinding",{"type":173,"tag":181,"props":200,"children":201},{},[202],{"type":173,"tag":185,"props":203,"children":207},{"href":204,"ariaDescribedBy":205,"dataFootnoteRef":166,"id":206},"#user-content-fn-dns-rebinding-1",[189],"user-content-fnref-dns-rebinding-1",[208],{"type":178,"value":209},"2",{"type":178,"value":211}," 问题，它就无能为力 ",{"type":173,"tag":181,"props":213,"children":214},{},[215],{"type":173,"tag":185,"props":216,"children":220},{"href":217,"ariaDescribedBy":218,"dataFootnoteRef":166,"id":219},"#user-content-fn-dns-rebinding-2",[189],"user-content-fnref-dns-rebinding-2",[221],{"type":178,"value":222},"3",{"type":178,"value":224},"。不过尽管不是银弹，它确实还是很有效的。",{"type":173,"tag":174,"props":226,"children":227},{},[228],{"type":178,"value":229},"仅需数行代码，就可以引入 Helmet 并使用：",{"type":173,"tag":231,"props":232,"children":236},"pre",{"code":233,"language":234,"meta":166,"className":235,"style":166},"const express = require('express')\n\nconst app = express()\n\napp.use(require('helmet')())\n","js","language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai",[237],{"type":173,"tag":238,"props":239,"children":240},"code",{"__ignoreMap":166},[241,298,307,333,341],{"type":173,"tag":242,"props":243,"children":246},"span",{"class":244,"line":245},"line",1,[247,253,259,265,271,277,283,289,293],{"type":173,"tag":242,"props":248,"children":250},{"style":249},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[251],{"type":178,"value":252},"const",{"type":173,"tag":242,"props":254,"children":256},{"style":255},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[257],{"type":178,"value":258}," express",{"type":173,"tag":242,"props":260,"children":262},{"style":261},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[263],{"type":178,"value":264}," =",{"type":173,"tag":242,"props":266,"children":268},{"style":267},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[269],{"type":178,"value":270}," require",{"type":173,"tag":242,"props":272,"children":274},{"style":273},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[275],{"type":178,"value":276},"(",{"type":173,"tag":242,"props":278,"children":280},{"style":279},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[281],{"type":178,"value":282},"'",{"type":173,"tag":242,"props":284,"children":286},{"style":285},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[287],{"type":178,"value":288},"express",{"type":173,"tag":242,"props":290,"children":291},{"style":279},[292],{"type":178,"value":282},{"type":173,"tag":242,"props":294,"children":295},{"style":273},[296],{"type":178,"value":297},")\n",{"type":173,"tag":242,"props":299,"children":301},{"class":244,"line":300},2,[302],{"type":173,"tag":242,"props":303,"children":304},{"emptyLinePlaceholder":165},[305],{"type":178,"value":306},"\n",{"type":173,"tag":242,"props":308,"children":310},{"class":244,"line":309},3,[311,315,320,324,328],{"type":173,"tag":242,"props":312,"children":313},{"style":249},[314],{"type":178,"value":252},{"type":173,"tag":242,"props":316,"children":317},{"style":255},[318],{"type":178,"value":319}," app",{"type":173,"tag":242,"props":321,"children":322},{"style":261},[323],{"type":178,"value":264},{"type":173,"tag":242,"props":325,"children":326},{"style":267},[327],{"type":178,"value":258},{"type":173,"tag":242,"props":329,"children":330},{"style":273},[331],{"type":178,"value":332},"()\n",{"type":173,"tag":242,"props":334,"children":336},{"class":244,"line":335},4,[337],{"type":173,"tag":242,"props":338,"children":339},{"emptyLinePlaceholder":165},[340],{"type":178,"value":306},{"type":173,"tag":242,"props":342,"children":344},{"class":244,"line":343},5,[345,350,356,361,365,370,374,378,383,387],{"type":173,"tag":242,"props":346,"children":347},{"style":273},[348],{"type":178,"value":349},"app",{"type":173,"tag":242,"props":351,"children":353},{"style":352},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[354],{"type":178,"value":355},".",{"type":173,"tag":242,"props":357,"children":358},{"style":267},[359],{"type":178,"value":360},"use",{"type":173,"tag":242,"props":362,"children":363},{"style":273},[364],{"type":178,"value":276},{"type":173,"tag":242,"props":366,"children":367},{"style":267},[368],{"type":178,"value":369},"require",{"type":173,"tag":242,"props":371,"children":372},{"style":273},[373],{"type":178,"value":276},{"type":173,"tag":242,"props":375,"children":376},{"style":279},[377],{"type":178,"value":282},{"type":173,"tag":242,"props":379,"children":380},{"style":285},[381],{"type":178,"value":382},"helmet",{"type":173,"tag":242,"props":384,"children":385},{"style":279},[386],{"type":178,"value":282},{"type":173,"tag":242,"props":388,"children":389},{"style":273},[390],{"type":178,"value":391},")())\n",{"type":173,"tag":174,"props":393,"children":394},{},[395],{"type":178,"value":396},"新的响应请求的 Headers 会变成这样：",{"type":173,"tag":231,"props":398,"children":400},{"code":399},"HTTP/1.1 200 OK\nX-DNS-Prefetch-Control: off\nX-Frame-Options: SAMEORIGIN\nStrict-Transport-Security: max-age=15552000; includeSubDomains\nX-Download-Options: noopen\nX-Content-Type-Options: nosniff\nX-XSS-Protection: 0\n...\n",[401],{"type":173,"tag":238,"props":402,"children":403},{"__ignoreMap":166},[404],{"type":178,"value":399},{"type":173,"tag":174,"props":406,"children":407},{},[408],{"type":178,"value":409},"那么，接收到此响应头之后，浏览器具体会执行哪些操作呢？",{"type":173,"tag":411,"props":412,"children":414},"h2",{"id":413},"_11-种安全策略",[415],{"type":178,"value":416},"11 种安全策略",{"type":173,"tag":174,"props":418,"children":419},{},[420,422,428,439],{"type":178,"value":421},"Helmet 使用了共 11 种安全策略。其中相关的许多 HTTP 头都源于 ",{"type":173,"tag":238,"props":423,"children":425},{"className":424},[],[426],{"type":178,"value":427},"OWASP Secure Headers",{"type":173,"tag":181,"props":429,"children":430},{},[431],{"type":173,"tag":185,"props":432,"children":436},{"href":433,"ariaDescribedBy":434,"dataFootnoteRef":166,"id":435},"#user-content-fn-shp",[189],"user-content-fnref-shp",[437],{"type":178,"value":438},"4",{"type":178,"value":440}," 这个项目。以下我们从简单的请求头开始，看看不同策略的背后相关的安全问题。",{"type":173,"tag":442,"props":443,"children":445},"h3",{"id":444},"移除-x-powered-by",[446],{"type":178,"value":447},"移除 X-Powered-By",{"type":173,"tag":231,"props":449,"children":451},{"code":450,"language":234,"meta":166,"className":235,"style":166},"response.removeHeader('X-Powered-By')\n",[452],{"type":173,"tag":238,"props":453,"children":454},{"__ignoreMap":166},[455],{"type":173,"tag":242,"props":456,"children":457},{"class":244,"line":245},[458,463,467,472,476,480,485,489],{"type":173,"tag":242,"props":459,"children":460},{"style":273},[461],{"type":178,"value":462},"response",{"type":173,"tag":242,"props":464,"children":465},{"style":352},[466],{"type":178,"value":355},{"type":173,"tag":242,"props":468,"children":469},{"style":267},[470],{"type":178,"value":471},"removeHeader",{"type":173,"tag":242,"props":473,"children":474},{"style":273},[475],{"type":178,"value":276},{"type":173,"tag":242,"props":477,"children":478},{"style":279},[479],{"type":178,"value":282},{"type":173,"tag":242,"props":481,"children":482},{"style":285},[483],{"type":178,"value":484},"X-Powered-By",{"type":173,"tag":242,"props":486,"children":487},{"style":279},[488],{"type":178,"value":282},{"type":173,"tag":242,"props":490,"children":491},{"style":273},[492],{"type":178,"value":297},{"type":173,"tag":174,"props":494,"children":495},{},[496,498,503],{"type":178,"value":497},"一些框架会在请求头中添加 ",{"type":173,"tag":238,"props":499,"children":501},{"className":500},[],[502],{"type":178,"value":484},{"type":178,"value":504},"（或 Server） 以标明网站是由哪种框架搭建的，这对宣传框架做了推力。但泄漏框架的版本信息可能带来的问题是，攻击者可以寻找针对该版本的已知漏洞轻松发起攻击。",{"type":173,"tag":174,"props":506,"children":507},{},[508,510,515],{"type":178,"value":509},"由于 Express 默认会给响应头增加 ",{"type":173,"tag":238,"props":511,"children":513},{"className":512},[],[514],{"type":178,"value":484},{"type":178,"value":516},"，所以 Helmet 直接把它移除了。",{"type":173,"tag":442,"props":518,"children":520},{"id":519},"移除-mime-嗅探",[521],{"type":178,"value":522},"移除 MIME 嗅探",{"type":173,"tag":231,"props":524,"children":526},{"code":525,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('X-Content-Type-Options', 'nosniff')\n",[527],{"type":173,"tag":238,"props":528,"children":529},{"__ignoreMap":166},[530],{"type":173,"tag":242,"props":531,"children":532},{"class":244,"line":245},[533,537,541,546,550,554,559,563,568,573,578,582],{"type":173,"tag":242,"props":534,"children":535},{"style":273},[536],{"type":178,"value":462},{"type":173,"tag":242,"props":538,"children":539},{"style":352},[540],{"type":178,"value":355},{"type":173,"tag":242,"props":542,"children":543},{"style":267},[544],{"type":178,"value":545},"setHeader",{"type":173,"tag":242,"props":547,"children":548},{"style":273},[549],{"type":178,"value":276},{"type":173,"tag":242,"props":551,"children":552},{"style":279},[553],{"type":178,"value":282},{"type":173,"tag":242,"props":555,"children":556},{"style":285},[557],{"type":178,"value":558},"X-Content-Type-Options",{"type":173,"tag":242,"props":560,"children":561},{"style":279},[562],{"type":178,"value":282},{"type":173,"tag":242,"props":564,"children":565},{"style":352},[566],{"type":178,"value":567},",",{"type":173,"tag":242,"props":569,"children":570},{"style":279},[571],{"type":178,"value":572}," '",{"type":173,"tag":242,"props":574,"children":575},{"style":285},[576],{"type":178,"value":577},"nosniff",{"type":173,"tag":242,"props":579,"children":580},{"style":279},[581],{"type":178,"value":282},{"type":173,"tag":242,"props":583,"children":584},{"style":273},[585],{"type":178,"value":297},{"type":173,"tag":174,"props":587,"children":588},{},[589,591,597,599,605],{"type":178,"value":590},"浏览器的 MIME 嗅探是指某些浏览器（如 IE8）会根据文件内容，而不是 ",{"type":173,"tag":238,"props":592,"children":594},{"className":593},[],[595],{"type":178,"value":596},"Content-Type",{"type":178,"value":598},"，执行、渲染文件。这可能使攻击者发送的图片等文件中嵌套的脚本代码得到执行。解决方案也很简单，只需用响应头 ",{"type":173,"tag":238,"props":600,"children":602},{"className":601},[],[603],{"type":178,"value":604},"X-Content-Type-Options = nosniff",{"type":178,"value":606}," 告诉浏览器把 MIME 嗅探关闭就完事儿了。",{"type":173,"tag":442,"props":608,"children":610},{"id":609},"移除-x-xss-protection",[611],{"type":178,"value":612},"移除 X-XSS-Protection",{"type":173,"tag":231,"props":614,"children":616},{"code":615,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('X-XSS-Protection', '0')\n",[617],{"type":173,"tag":238,"props":618,"children":619},{"__ignoreMap":166},[620],{"type":173,"tag":242,"props":621,"children":622},{"class":244,"line":245},[623,627,631,635,639,643,648,652,656,660,665,669],{"type":173,"tag":242,"props":624,"children":625},{"style":273},[626],{"type":178,"value":462},{"type":173,"tag":242,"props":628,"children":629},{"style":352},[630],{"type":178,"value":355},{"type":173,"tag":242,"props":632,"children":633},{"style":267},[634],{"type":178,"value":545},{"type":173,"tag":242,"props":636,"children":637},{"style":273},[638],{"type":178,"value":276},{"type":173,"tag":242,"props":640,"children":641},{"style":279},[642],{"type":178,"value":282},{"type":173,"tag":242,"props":644,"children":645},{"style":285},[646],{"type":178,"value":647},"X-XSS-Protection",{"type":173,"tag":242,"props":649,"children":650},{"style":279},[651],{"type":178,"value":282},{"type":173,"tag":242,"props":653,"children":654},{"style":352},[655],{"type":178,"value":567},{"type":173,"tag":242,"props":657,"children":658},{"style":279},[659],{"type":178,"value":572},{"type":173,"tag":242,"props":661,"children":662},{"style":285},[663],{"type":178,"value":664},"0",{"type":173,"tag":242,"props":666,"children":667},{"style":279},[668],{"type":178,"value":282},{"type":173,"tag":242,"props":670,"children":671},{"style":273},[672],{"type":178,"value":297},{"type":173,"tag":174,"props":674,"children":675},{},[676,678,683],{"type":178,"value":677},"不是应该打开 ",{"type":173,"tag":238,"props":679,"children":681},{"className":680},[],[682],{"type":178,"value":647},{"type":178,"value":684},"，以防范 XSS 攻击么，为什么要把它关闭？",{"type":173,"tag":174,"props":686,"children":687},{},[688,690,696,698,709,711,716,718,724,726,737,739,744,746,751],{"type":178,"value":689},"这得追溯回去年的 Chrome 移除 ",{"type":173,"tag":238,"props":691,"children":693},{"className":692},[],[694],{"type":178,"value":695},"XSS Auditor",{"type":178,"value":697},"，准备使用新的 XSS 防护方法这事儿上。“XSS Auditor 已经充满了漏洞”，并且“修复所有信息泄漏已经证明是困难的”。所以就把这玩意儿给废除了 ",{"type":173,"tag":181,"props":699,"children":700},{},[701],{"type":173,"tag":185,"props":702,"children":706},{"href":703,"ariaDescribedBy":704,"dataFootnoteRef":166,"id":705},"#user-content-fn-xss-auditor",[189],"user-content-fnref-xss-auditor",[707],{"type":178,"value":708},"5",{"type":178,"value":710},"。至于程序员们最担心的 Edge，它已经在 18 年去除了 ",{"type":173,"tag":238,"props":712,"children":714},{"className":713},[],[715],{"type":178,"value":695},{"type":178,"value":717},"，并开始使用 ",{"type":173,"tag":238,"props":719,"children":721},{"className":720},[],[722],{"type":178,"value":723},"CSP",{"type":178,"value":725}," 等现代标准（更现代的标准）",{"type":173,"tag":181,"props":727,"children":728},{},[729],{"type":173,"tag":185,"props":730,"children":734},{"href":731,"ariaDescribedBy":732,"dataFootnoteRef":166,"id":733},"#user-content-fn-delete-xss-auditor",[189],"user-content-fnref-delete-xss-auditor",[735],{"type":178,"value":736},"6",{"type":178,"value":738},"。也就是说，应用程序应该尽可能跟着新标准走，而 ",{"type":173,"tag":238,"props":740,"children":742},{"className":741},[],[743],{"type":178,"value":647},{"type":178,"value":745}," 这个响应头是让浏览器不要再用 ",{"type":173,"tag":238,"props":747,"children":749},{"className":748},[],[750],{"type":178,"value":695},{"type":178,"value":752},"。",{"type":173,"tag":174,"props":754,"children":755},{},[756,758,766,768],{"type":178,"value":757},"见：",{"type":173,"tag":185,"props":759,"children":763},{"href":760,"rel":761},"https://github.com/OWASP/CheatSheetSeries/issues/376",[762],"nofollow",[764],{"type":178,"value":765},"#376",{"type":178,"value":767},"、",{"type":173,"tag":185,"props":769,"children":772},{"href":770,"rel":771},"https://nuxt-security.vercel.app/headers/xxssprotection",[762],[773],{"type":178,"value":774},"Nuxt Security X-XSS-Protection",{"type":173,"tag":442,"props":776,"children":778},{"id":777},"禁止页面被嵌套",[779],{"type":178,"value":777},{"type":173,"tag":231,"props":781,"children":783},{"code":782,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('X-Frame-Options', 'SAMEORIGIN')\n",[784],{"type":173,"tag":238,"props":785,"children":786},{"__ignoreMap":166},[787],{"type":173,"tag":242,"props":788,"children":789},{"class":244,"line":245},[790,794,798,802,806,810,815,819,823,827,832,836],{"type":173,"tag":242,"props":791,"children":792},{"style":273},[793],{"type":178,"value":462},{"type":173,"tag":242,"props":795,"children":796},{"style":352},[797],{"type":178,"value":355},{"type":173,"tag":242,"props":799,"children":800},{"style":267},[801],{"type":178,"value":545},{"type":173,"tag":242,"props":803,"children":804},{"style":273},[805],{"type":178,"value":276},{"type":173,"tag":242,"props":807,"children":808},{"style":279},[809],{"type":178,"value":282},{"type":173,"tag":242,"props":811,"children":812},{"style":285},[813],{"type":178,"value":814},"X-Frame-Options",{"type":173,"tag":242,"props":816,"children":817},{"style":279},[818],{"type":178,"value":282},{"type":173,"tag":242,"props":820,"children":821},{"style":352},[822],{"type":178,"value":567},{"type":173,"tag":242,"props":824,"children":825},{"style":279},[826],{"type":178,"value":572},{"type":173,"tag":242,"props":828,"children":829},{"style":285},[830],{"type":178,"value":831},"SAMEORIGIN",{"type":173,"tag":242,"props":833,"children":834},{"style":279},[835],{"type":178,"value":282},{"type":173,"tag":242,"props":837,"children":838},{"style":273},[839],{"type":178,"value":297},{"type":173,"tag":174,"props":841,"children":842},{},[843,848,850,855,857,863],{"type":173,"tag":238,"props":844,"children":846},{"className":845},[],[847],{"type":178,"value":814},{"type":178,"value":849}," 指定了浏览器的 frame、iframe、object、embed 等元素的有效父级作用域。限制 ",{"type":173,"tag":238,"props":851,"children":853},{"className":852},[],[854],{"type":178,"value":814},{"type":178,"value":856}," 为 ",{"type":173,"tag":238,"props":858,"children":860},{"className":859},[],[861],{"type":178,"value":862},"SameOrigin",{"type":178,"value":864},"，可以防止网页被 iframe 等元素嵌套到非同源页面中，预防某些点击劫持攻击。",{"type":173,"tag":174,"props":866,"children":867},{},[868,870,876,877,882,883,889,891,896],{"type":178,"value":869},"本来它的值有三种选择，",{"type":173,"tag":238,"props":871,"children":873},{"className":872},[],[874],{"type":178,"value":875},"Deny",{"type":178,"value":767},{"type":173,"tag":238,"props":878,"children":880},{"className":879},[],[881],{"type":178,"value":862},{"type":178,"value":767},{"type":173,"tag":238,"props":884,"children":886},{"className":885},[],[887],{"type":178,"value":888},"AllowFrom",{"type":178,"value":890},"。但 ",{"type":173,"tag":238,"props":892,"children":894},{"className":893},[],[895],{"type":178,"value":888},{"type":178,"value":897}," 因为其兼容性原因，被 Helmet 弃用：",{"type":173,"tag":174,"props":899,"children":900},{},[901],{"type":173,"tag":902,"props":903,"children":906},"img",{"alt":904,"src":905},"caniuse x-frame-options allow-from","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200816000544.png",[],{"type":173,"tag":174,"props":908,"children":909},{},[910,912,917,919,925,927,932],{"type":178,"value":911},"此外，可以在 ",{"type":173,"tag":238,"props":913,"children":915},{"className":914},[],[916],{"type":178,"value":723},{"type":178,"value":918}," 中设置 ",{"type":173,"tag":238,"props":920,"children":922},{"className":921},[],[923],{"type":178,"value":924},"frame-ancestors",{"type":178,"value":926}," 指令来替代 ",{"type":173,"tag":238,"props":928,"children":930},{"className":929},[],[931],{"type":178,"value":814},{"type":178,"value":752},{"type":173,"tag":442,"props":934,"children":936},{"id":935},"移除-referer",[937],{"type":178,"value":938},"移除 Referer",{"type":173,"tag":174,"props":940,"children":941},{},[942,948,950,956,967,969,974],{"type":173,"tag":238,"props":943,"children":945},{"className":944},[],[946],{"type":178,"value":947},"Referrer-Policy",{"type":178,"value":949}," 可以控制浏览器请求头的 ",{"type":173,"tag":238,"props":951,"children":953},{"className":952},[],[954],{"type":178,"value":955},"Referer",{"type":173,"tag":181,"props":957,"children":958},{},[959],{"type":173,"tag":185,"props":960,"children":964},{"href":961,"ariaDescribedBy":962,"dataFootnoteRef":166,"id":963},"#user-content-fn-referer",[189],"user-content-fnref-referer",[965],{"type":178,"value":966},"7",{"type":178,"value":968}," 的显示方式。移除 ",{"type":173,"tag":238,"props":970,"children":972},{"className":971},[],[973],{"type":178,"value":955},{"type":178,"value":975}," 能保护用户的访问记录，防止隐私泄漏。",{"type":173,"tag":231,"props":977,"children":979},{"code":978,"language":234,"meta":166,"className":235,"style":166},"const ALLOWED_TOKENS = new Set([\n  // 任何时候都不携带 Referer\n  'no-referrer',\n  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n  'no-referrer-when-downgrade',\n  // 同源请求携带 Referer，非同源请求不携带 Referer\n  'same-origin',\n  // 所有请求，Referer 都指向来源的源地址\n  'origin',\n  // 在 origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin',\n  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n  'origin-when-cross-origin',\n  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n  'strict-origin-when-cross-origin',\n  // 所有请求都携带上完整的 Referer\n  'unsafe-url',\n  // 无策略\n  ''\n])\nfunction getHeaderValueFromOptions({ policy = ['no-referrer'] }) {\n  const tokens = typeof policy === 'string' ? [policy] : policy\n    tokensSeen.add(token)\n  })\n  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n  return tokens.join(',')\n}\nfunction referrerPolicy(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function referrerPolicyMiddleware(_req, res, next) {\n    res.setHeader('Referrer-Policy', headerValue)\n    next()\n  }\n}\n",[980],{"type":173,"tag":238,"props":981,"children":982},{"__ignoreMap":166},[983,1014,1023,1045,1053,1073,1082,1103,1112,1133,1142,1163,1172,1193,1202,1223,1232,1253,1262,1271,1280,1341,1415,1446,1459,1468,1511,1520,1555,1588,1642,1687,1700,1709],{"type":173,"tag":242,"props":984,"children":985},{"class":244,"line":245},[986,990,995,999,1004,1009],{"type":173,"tag":242,"props":987,"children":988},{"style":249},[989],{"type":178,"value":252},{"type":173,"tag":242,"props":991,"children":992},{"style":255},[993],{"type":178,"value":994}," ALLOWED_TOKENS",{"type":173,"tag":242,"props":996,"children":997},{"style":261},[998],{"type":178,"value":264},{"type":173,"tag":242,"props":1000,"children":1001},{"style":261},[1002],{"type":178,"value":1003}," new",{"type":173,"tag":242,"props":1005,"children":1006},{"style":267},[1007],{"type":178,"value":1008}," Set",{"type":173,"tag":242,"props":1010,"children":1011},{"style":273},[1012],{"type":178,"value":1013},"([\n",{"type":173,"tag":242,"props":1015,"children":1016},{"class":244,"line":300},[1017],{"type":173,"tag":242,"props":1018,"children":1020},{"style":1019},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1021],{"type":178,"value":1022},"  // 任何时候都不携带 Referer\n",{"type":173,"tag":242,"props":1024,"children":1025},{"class":244,"line":309},[1026,1031,1036,1040],{"type":173,"tag":242,"props":1027,"children":1028},{"style":279},[1029],{"type":178,"value":1030},"  '",{"type":173,"tag":242,"props":1032,"children":1033},{"style":285},[1034],{"type":178,"value":1035},"no-referrer",{"type":173,"tag":242,"props":1037,"children":1038},{"style":279},[1039],{"type":178,"value":282},{"type":173,"tag":242,"props":1041,"children":1042},{"style":352},[1043],{"type":178,"value":1044},",\n",{"type":173,"tag":242,"props":1046,"children":1047},{"class":244,"line":335},[1048],{"type":173,"tag":242,"props":1049,"children":1050},{"style":1019},[1051],{"type":178,"value":1052},"  // 仅当协议降级时不携带 Referer（浏览器默认策略）\n",{"type":173,"tag":242,"props":1054,"children":1055},{"class":244,"line":343},[1056,1060,1065,1069],{"type":173,"tag":242,"props":1057,"children":1058},{"style":279},[1059],{"type":178,"value":1030},{"type":173,"tag":242,"props":1061,"children":1062},{"style":285},[1063],{"type":178,"value":1064},"no-referrer-when-downgrade",{"type":173,"tag":242,"props":1066,"children":1067},{"style":279},[1068],{"type":178,"value":282},{"type":173,"tag":242,"props":1070,"children":1071},{"style":352},[1072],{"type":178,"value":1044},{"type":173,"tag":242,"props":1074,"children":1076},{"class":244,"line":1075},6,[1077],{"type":173,"tag":242,"props":1078,"children":1079},{"style":1019},[1080],{"type":178,"value":1081},"  // 同源请求携带 Referer，非同源请求不携带 Referer\n",{"type":173,"tag":242,"props":1083,"children":1085},{"class":244,"line":1084},7,[1086,1090,1095,1099],{"type":173,"tag":242,"props":1087,"children":1088},{"style":279},[1089],{"type":178,"value":1030},{"type":173,"tag":242,"props":1091,"children":1092},{"style":285},[1093],{"type":178,"value":1094},"same-origin",{"type":173,"tag":242,"props":1096,"children":1097},{"style":279},[1098],{"type":178,"value":282},{"type":173,"tag":242,"props":1100,"children":1101},{"style":352},[1102],{"type":178,"value":1044},{"type":173,"tag":242,"props":1104,"children":1106},{"class":244,"line":1105},8,[1107],{"type":173,"tag":242,"props":1108,"children":1109},{"style":1019},[1110],{"type":178,"value":1111},"  // 所有请求，Referer 都指向来源的源地址\n",{"type":173,"tag":242,"props":1113,"children":1115},{"class":244,"line":1114},9,[1116,1120,1125,1129],{"type":173,"tag":242,"props":1117,"children":1118},{"style":279},[1119],{"type":178,"value":1030},{"type":173,"tag":242,"props":1121,"children":1122},{"style":285},[1123],{"type":178,"value":1124},"origin",{"type":173,"tag":242,"props":1126,"children":1127},{"style":279},[1128],{"type":178,"value":282},{"type":173,"tag":242,"props":1130,"children":1131},{"style":352},[1132],{"type":178,"value":1044},{"type":173,"tag":242,"props":1134,"children":1136},{"class":244,"line":1135},10,[1137],{"type":173,"tag":242,"props":1138,"children":1139},{"style":1019},[1140],{"type":178,"value":1141},"  // 在 origin 的基础上，当协议降级时，不携带 Referer\n",{"type":173,"tag":242,"props":1143,"children":1145},{"class":244,"line":1144},11,[1146,1150,1155,1159],{"type":173,"tag":242,"props":1147,"children":1148},{"style":279},[1149],{"type":178,"value":1030},{"type":173,"tag":242,"props":1151,"children":1152},{"style":285},[1153],{"type":178,"value":1154},"strict-origin",{"type":173,"tag":242,"props":1156,"children":1157},{"style":279},[1158],{"type":178,"value":282},{"type":173,"tag":242,"props":1160,"children":1161},{"style":352},[1162],{"type":178,"value":1044},{"type":173,"tag":242,"props":1164,"children":1166},{"class":244,"line":1165},12,[1167],{"type":173,"tag":242,"props":1168,"children":1169},{"style":1019},[1170],{"type":178,"value":1171},"  // 同源请求时发送完整的 Rerferer，非同源请求只发送来源的源地址\n",{"type":173,"tag":242,"props":1173,"children":1175},{"class":244,"line":1174},13,[1176,1180,1185,1189],{"type":173,"tag":242,"props":1177,"children":1178},{"style":279},[1179],{"type":178,"value":1030},{"type":173,"tag":242,"props":1181,"children":1182},{"style":285},[1183],{"type":178,"value":1184},"origin-when-cross-origin",{"type":173,"tag":242,"props":1186,"children":1187},{"style":279},[1188],{"type":178,"value":282},{"type":173,"tag":242,"props":1190,"children":1191},{"style":352},[1192],{"type":178,"value":1044},{"type":173,"tag":242,"props":1194,"children":1196},{"class":244,"line":1195},14,[1197],{"type":173,"tag":242,"props":1198,"children":1199},{"style":1019},[1200],{"type":178,"value":1201},"  // 在 origin-when-cross-origin 的基础上，当协议降级时，不携带 Referer\n",{"type":173,"tag":242,"props":1203,"children":1205},{"class":244,"line":1204},15,[1206,1210,1215,1219],{"type":173,"tag":242,"props":1207,"children":1208},{"style":279},[1209],{"type":178,"value":1030},{"type":173,"tag":242,"props":1211,"children":1212},{"style":285},[1213],{"type":178,"value":1214},"strict-origin-when-cross-origin",{"type":173,"tag":242,"props":1216,"children":1217},{"style":279},[1218],{"type":178,"value":282},{"type":173,"tag":242,"props":1220,"children":1221},{"style":352},[1222],{"type":178,"value":1044},{"type":173,"tag":242,"props":1224,"children":1226},{"class":244,"line":1225},16,[1227],{"type":173,"tag":242,"props":1228,"children":1229},{"style":1019},[1230],{"type":178,"value":1231},"  // 所有请求都携带上完整的 Referer\n",{"type":173,"tag":242,"props":1233,"children":1235},{"class":244,"line":1234},17,[1236,1240,1245,1249],{"type":173,"tag":242,"props":1237,"children":1238},{"style":279},[1239],{"type":178,"value":1030},{"type":173,"tag":242,"props":1241,"children":1242},{"style":285},[1243],{"type":178,"value":1244},"unsafe-url",{"type":173,"tag":242,"props":1246,"children":1247},{"style":279},[1248],{"type":178,"value":282},{"type":173,"tag":242,"props":1250,"children":1251},{"style":352},[1252],{"type":178,"value":1044},{"type":173,"tag":242,"props":1254,"children":1256},{"class":244,"line":1255},18,[1257],{"type":173,"tag":242,"props":1258,"children":1259},{"style":1019},[1260],{"type":178,"value":1261},"  // 无策略\n",{"type":173,"tag":242,"props":1263,"children":1265},{"class":244,"line":1264},19,[1266],{"type":173,"tag":242,"props":1267,"children":1268},{"style":279},[1269],{"type":178,"value":1270},"  ''\n",{"type":173,"tag":242,"props":1272,"children":1274},{"class":244,"line":1273},20,[1275],{"type":173,"tag":242,"props":1276,"children":1277},{"style":273},[1278],{"type":178,"value":1279},"])\n",{"type":173,"tag":242,"props":1281,"children":1283},{"class":244,"line":1282},21,[1284,1289,1294,1299,1305,1309,1314,1318,1322,1326,1331,1336],{"type":173,"tag":242,"props":1285,"children":1286},{"style":249},[1287],{"type":178,"value":1288},"function",{"type":173,"tag":242,"props":1290,"children":1291},{"style":267},[1292],{"type":178,"value":1293}," getHeaderValueFromOptions",{"type":173,"tag":242,"props":1295,"children":1296},{"style":352},[1297],{"type":178,"value":1298},"({",{"type":173,"tag":242,"props":1300,"children":1302},{"style":1301},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[1303],{"type":178,"value":1304}," policy",{"type":173,"tag":242,"props":1306,"children":1307},{"style":261},[1308],{"type":178,"value":264},{"type":173,"tag":242,"props":1310,"children":1311},{"style":273},[1312],{"type":178,"value":1313}," [",{"type":173,"tag":242,"props":1315,"children":1316},{"style":279},[1317],{"type":178,"value":282},{"type":173,"tag":242,"props":1319,"children":1320},{"style":285},[1321],{"type":178,"value":1035},{"type":173,"tag":242,"props":1323,"children":1324},{"style":279},[1325],{"type":178,"value":282},{"type":173,"tag":242,"props":1327,"children":1328},{"style":273},[1329],{"type":178,"value":1330},"] ",{"type":173,"tag":242,"props":1332,"children":1333},{"style":352},[1334],{"type":178,"value":1335},"})",{"type":173,"tag":242,"props":1337,"children":1338},{"style":352},[1339],{"type":178,"value":1340}," {\n",{"type":173,"tag":242,"props":1342,"children":1344},{"class":244,"line":1343},22,[1345,1350,1355,1359,1364,1368,1373,1377,1382,1386,1391,1396,1401,1405,1410],{"type":173,"tag":242,"props":1346,"children":1347},{"style":249},[1348],{"type":178,"value":1349},"  const",{"type":173,"tag":242,"props":1351,"children":1352},{"style":255},[1353],{"type":178,"value":1354}," tokens",{"type":173,"tag":242,"props":1356,"children":1357},{"style":261},[1358],{"type":178,"value":264},{"type":173,"tag":242,"props":1360,"children":1361},{"style":261},[1362],{"type":178,"value":1363}," typeof",{"type":173,"tag":242,"props":1365,"children":1366},{"style":273},[1367],{"type":178,"value":1304},{"type":173,"tag":242,"props":1369,"children":1370},{"style":261},[1371],{"type":178,"value":1372}," ===",{"type":173,"tag":242,"props":1374,"children":1375},{"style":279},[1376],{"type":178,"value":572},{"type":173,"tag":242,"props":1378,"children":1379},{"style":285},[1380],{"type":178,"value":1381},"string",{"type":173,"tag":242,"props":1383,"children":1384},{"style":279},[1385],{"type":178,"value":282},{"type":173,"tag":242,"props":1387,"children":1388},{"style":261},[1389],{"type":178,"value":1390}," ?",{"type":173,"tag":242,"props":1392,"children":1394},{"style":1393},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1395],{"type":178,"value":1313},{"type":173,"tag":242,"props":1397,"children":1398},{"style":273},[1399],{"type":178,"value":1400},"policy",{"type":173,"tag":242,"props":1402,"children":1403},{"style":1393},[1404],{"type":178,"value":1330},{"type":173,"tag":242,"props":1406,"children":1407},{"style":261},[1408],{"type":178,"value":1409},":",{"type":173,"tag":242,"props":1411,"children":1412},{"style":273},[1413],{"type":178,"value":1414}," policy\n",{"type":173,"tag":242,"props":1416,"children":1418},{"class":244,"line":1417},23,[1419,1424,1428,1433,1437,1442],{"type":173,"tag":242,"props":1420,"children":1421},{"style":273},[1422],{"type":178,"value":1423},"    tokensSeen",{"type":173,"tag":242,"props":1425,"children":1426},{"style":352},[1427],{"type":178,"value":355},{"type":173,"tag":242,"props":1429,"children":1430},{"style":267},[1431],{"type":178,"value":1432},"add",{"type":173,"tag":242,"props":1434,"children":1435},{"style":1393},[1436],{"type":178,"value":276},{"type":173,"tag":242,"props":1438,"children":1439},{"style":273},[1440],{"type":178,"value":1441},"token",{"type":173,"tag":242,"props":1443,"children":1444},{"style":1393},[1445],{"type":178,"value":297},{"type":173,"tag":242,"props":1447,"children":1449},{"class":244,"line":1448},24,[1450,1455],{"type":173,"tag":242,"props":1451,"children":1452},{"style":352},[1453],{"type":178,"value":1454},"  }",{"type":173,"tag":242,"props":1456,"children":1457},{"style":273},[1458],{"type":178,"value":297},{"type":173,"tag":242,"props":1460,"children":1462},{"class":244,"line":1461},25,[1463],{"type":173,"tag":242,"props":1464,"children":1465},{"style":1019},[1466],{"type":178,"value":1467},"  // 多个协议可以通过逗号作兼容性降级（越靠后优先级越高）\n",{"type":173,"tag":242,"props":1469,"children":1471},{"class":244,"line":1470},26,[1472,1478,1482,1486,1491,1495,1499,1503,1507],{"type":173,"tag":242,"props":1473,"children":1475},{"style":1474},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1476],{"type":178,"value":1477},"  return",{"type":173,"tag":242,"props":1479,"children":1480},{"style":273},[1481],{"type":178,"value":1354},{"type":173,"tag":242,"props":1483,"children":1484},{"style":352},[1485],{"type":178,"value":355},{"type":173,"tag":242,"props":1487,"children":1488},{"style":267},[1489],{"type":178,"value":1490},"join",{"type":173,"tag":242,"props":1492,"children":1493},{"style":273},[1494],{"type":178,"value":276},{"type":173,"tag":242,"props":1496,"children":1497},{"style":279},[1498],{"type":178,"value":282},{"type":173,"tag":242,"props":1500,"children":1501},{"style":285},[1502],{"type":178,"value":567},{"type":173,"tag":242,"props":1504,"children":1505},{"style":279},[1506],{"type":178,"value":282},{"type":173,"tag":242,"props":1508,"children":1509},{"style":273},[1510],{"type":178,"value":297},{"type":173,"tag":242,"props":1512,"children":1514},{"class":244,"line":1513},27,[1515],{"type":173,"tag":242,"props":1516,"children":1517},{"style":273},[1518],{"type":178,"value":1519},"}\n",{"type":173,"tag":242,"props":1521,"children":1523},{"class":244,"line":1522},28,[1524,1528,1533,1537,1542,1546,1551],{"type":173,"tag":242,"props":1525,"children":1526},{"style":249},[1527],{"type":178,"value":1288},{"type":173,"tag":242,"props":1529,"children":1530},{"style":267},[1531],{"type":178,"value":1532}," referrerPolicy",{"type":173,"tag":242,"props":1534,"children":1535},{"style":352},[1536],{"type":178,"value":276},{"type":173,"tag":242,"props":1538,"children":1539},{"style":1301},[1540],{"type":178,"value":1541},"options",{"type":173,"tag":242,"props":1543,"children":1544},{"style":261},[1545],{"type":178,"value":264},{"type":173,"tag":242,"props":1547,"children":1548},{"style":352},[1549],{"type":178,"value":1550}," {})",{"type":173,"tag":242,"props":1552,"children":1553},{"style":352},[1554],{"type":178,"value":1340},{"type":173,"tag":242,"props":1556,"children":1558},{"class":244,"line":1557},29,[1559,1563,1568,1572,1576,1580,1584],{"type":173,"tag":242,"props":1560,"children":1561},{"style":249},[1562],{"type":178,"value":1349},{"type":173,"tag":242,"props":1564,"children":1565},{"style":255},[1566],{"type":178,"value":1567}," headerValue",{"type":173,"tag":242,"props":1569,"children":1570},{"style":261},[1571],{"type":178,"value":264},{"type":173,"tag":242,"props":1573,"children":1574},{"style":267},[1575],{"type":178,"value":1293},{"type":173,"tag":242,"props":1577,"children":1578},{"style":1393},[1579],{"type":178,"value":276},{"type":173,"tag":242,"props":1581,"children":1582},{"style":273},[1583],{"type":178,"value":1541},{"type":173,"tag":242,"props":1585,"children":1586},{"style":1393},[1587],{"type":178,"value":297},{"type":173,"tag":242,"props":1589,"children":1591},{"class":244,"line":1590},30,[1592,1596,1601,1606,1610,1615,1619,1624,1628,1633,1638],{"type":173,"tag":242,"props":1593,"children":1594},{"style":1474},[1595],{"type":178,"value":1477},{"type":173,"tag":242,"props":1597,"children":1598},{"style":249},[1599],{"type":178,"value":1600}," function",{"type":173,"tag":242,"props":1602,"children":1603},{"style":267},[1604],{"type":178,"value":1605}," referrerPolicyMiddleware",{"type":173,"tag":242,"props":1607,"children":1608},{"style":352},[1609],{"type":178,"value":276},{"type":173,"tag":242,"props":1611,"children":1612},{"style":1301},[1613],{"type":178,"value":1614},"_req",{"type":173,"tag":242,"props":1616,"children":1617},{"style":352},[1618],{"type":178,"value":567},{"type":173,"tag":242,"props":1620,"children":1621},{"style":1301},[1622],{"type":178,"value":1623}," res",{"type":173,"tag":242,"props":1625,"children":1626},{"style":352},[1627],{"type":178,"value":567},{"type":173,"tag":242,"props":1629,"children":1630},{"style":1301},[1631],{"type":178,"value":1632}," next",{"type":173,"tag":242,"props":1634,"children":1635},{"style":352},[1636],{"type":178,"value":1637},")",{"type":173,"tag":242,"props":1639,"children":1640},{"style":352},[1641],{"type":178,"value":1340},{"type":173,"tag":242,"props":1643,"children":1645},{"class":244,"line":1644},31,[1646,1651,1655,1659,1663,1667,1671,1675,1679,1683],{"type":173,"tag":242,"props":1647,"children":1648},{"style":273},[1649],{"type":178,"value":1650},"    res",{"type":173,"tag":242,"props":1652,"children":1653},{"style":352},[1654],{"type":178,"value":355},{"type":173,"tag":242,"props":1656,"children":1657},{"style":267},[1658],{"type":178,"value":545},{"type":173,"tag":242,"props":1660,"children":1661},{"style":1393},[1662],{"type":178,"value":276},{"type":173,"tag":242,"props":1664,"children":1665},{"style":279},[1666],{"type":178,"value":282},{"type":173,"tag":242,"props":1668,"children":1669},{"style":285},[1670],{"type":178,"value":947},{"type":173,"tag":242,"props":1672,"children":1673},{"style":279},[1674],{"type":178,"value":282},{"type":173,"tag":242,"props":1676,"children":1677},{"style":352},[1678],{"type":178,"value":567},{"type":173,"tag":242,"props":1680,"children":1681},{"style":273},[1682],{"type":178,"value":1567},{"type":173,"tag":242,"props":1684,"children":1685},{"style":1393},[1686],{"type":178,"value":297},{"type":173,"tag":242,"props":1688,"children":1690},{"class":244,"line":1689},32,[1691,1696],{"type":173,"tag":242,"props":1692,"children":1693},{"style":267},[1694],{"type":178,"value":1695},"    next",{"type":173,"tag":242,"props":1697,"children":1698},{"style":1393},[1699],{"type":178,"value":332},{"type":173,"tag":242,"props":1701,"children":1703},{"class":244,"line":1702},33,[1704],{"type":173,"tag":242,"props":1705,"children":1706},{"style":352},[1707],{"type":178,"value":1708},"  }\n",{"type":173,"tag":242,"props":1710,"children":1712},{"class":244,"line":1711},34,[1713],{"type":173,"tag":242,"props":1714,"children":1715},{"style":352},[1716],{"type":178,"value":1519},{"type":173,"tag":174,"props":1718,"children":1719},{},[1720,1722,1728,1730,1735],{"type":178,"value":1721},"其实，在 HTML 中，无论是 Meta、Image、iFrame、Script 或是 Style 标签，都能设置 ",{"type":173,"tag":238,"props":1723,"children":1725},{"className":1724},[],[1726],{"type":178,"value":1727},"Referrer Policy",{"type":178,"value":1729},"。Meta 标签设置的 ",{"type":173,"tag":238,"props":1731,"children":1733},{"className":1732},[],[1734],{"type":178,"value":1727},{"type":178,"value":1736}," 对整个页面都有效果（但优先级最低）。",{"type":173,"tag":231,"props":1738,"children":1742},{"code":1739,"language":1740,"meta":166,"className":1741,"style":166},"\u003Cmeta name=\"referrer\" content=\"origin\" />\n\u003Ca href=\"http://example.com\" referrerpolicy=\"origin\">\u003C/a>\n\u003Ca href=\"http://example.com\" rel=\"noreferrer\">\u003C/a>\n","html","language-html shiki shiki-themes material-theme-lighter github-light github-dark monokai",[1743],{"type":173,"tag":238,"props":1744,"children":1745},{"__ignoreMap":166},[1746,1811,1879],{"type":173,"tag":242,"props":1747,"children":1748},{"class":244,"line":245},[1749,1754,1760,1766,1771,1776,1781,1785,1790,1794,1798,1802,1806],{"type":173,"tag":242,"props":1750,"children":1751},{"style":352},[1752],{"type":178,"value":1753},"\u003C",{"type":173,"tag":242,"props":1755,"children":1757},{"style":1756},"--shiki-light:#E53935;--shiki-default:#22863A;--shiki-dark:#85E89D;--shiki-sepia:#F92672",[1758],{"type":178,"value":1759},"meta",{"type":173,"tag":242,"props":1761,"children":1763},{"style":1762},"--shiki-light:#9C3EDA;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[1764],{"type":178,"value":1765}," name",{"type":173,"tag":242,"props":1767,"children":1768},{"style":352},[1769],{"type":178,"value":1770},"=",{"type":173,"tag":242,"props":1772,"children":1773},{"style":279},[1774],{"type":178,"value":1775},"\"",{"type":173,"tag":242,"props":1777,"children":1778},{"style":285},[1779],{"type":178,"value":1780},"referrer",{"type":173,"tag":242,"props":1782,"children":1783},{"style":279},[1784],{"type":178,"value":1775},{"type":173,"tag":242,"props":1786,"children":1787},{"style":1762},[1788],{"type":178,"value":1789}," content",{"type":173,"tag":242,"props":1791,"children":1792},{"style":352},[1793],{"type":178,"value":1770},{"type":173,"tag":242,"props":1795,"children":1796},{"style":279},[1797],{"type":178,"value":1775},{"type":173,"tag":242,"props":1799,"children":1800},{"style":285},[1801],{"type":178,"value":1124},{"type":173,"tag":242,"props":1803,"children":1804},{"style":279},[1805],{"type":178,"value":1775},{"type":173,"tag":242,"props":1807,"children":1808},{"style":352},[1809],{"type":178,"value":1810}," />\n",{"type":173,"tag":242,"props":1812,"children":1813},{"class":244,"line":300},[1814,1818,1822,1827,1831,1835,1840,1844,1849,1853,1857,1861,1865,1870,1874],{"type":173,"tag":242,"props":1815,"children":1816},{"style":352},[1817],{"type":178,"value":1753},{"type":173,"tag":242,"props":1819,"children":1820},{"style":1756},[1821],{"type":178,"value":185},{"type":173,"tag":242,"props":1823,"children":1824},{"style":1762},[1825],{"type":178,"value":1826}," href",{"type":173,"tag":242,"props":1828,"children":1829},{"style":352},[1830],{"type":178,"value":1770},{"type":173,"tag":242,"props":1832,"children":1833},{"style":279},[1834],{"type":178,"value":1775},{"type":173,"tag":242,"props":1836,"children":1837},{"style":285},[1838],{"type":178,"value":1839},"http://example.com",{"type":173,"tag":242,"props":1841,"children":1842},{"style":279},[1843],{"type":178,"value":1775},{"type":173,"tag":242,"props":1845,"children":1846},{"style":1762},[1847],{"type":178,"value":1848}," referrerpolicy",{"type":173,"tag":242,"props":1850,"children":1851},{"style":352},[1852],{"type":178,"value":1770},{"type":173,"tag":242,"props":1854,"children":1855},{"style":279},[1856],{"type":178,"value":1775},{"type":173,"tag":242,"props":1858,"children":1859},{"style":285},[1860],{"type":178,"value":1124},{"type":173,"tag":242,"props":1862,"children":1863},{"style":279},[1864],{"type":178,"value":1775},{"type":173,"tag":242,"props":1866,"children":1867},{"style":352},[1868],{"type":178,"value":1869},">\u003C/",{"type":173,"tag":242,"props":1871,"children":1872},{"style":1756},[1873],{"type":178,"value":185},{"type":173,"tag":242,"props":1875,"children":1876},{"style":352},[1877],{"type":178,"value":1878},">\n",{"type":173,"tag":242,"props":1880,"children":1881},{"class":244,"line":309},[1882,1886,1890,1894,1898,1902,1906,1910,1915,1919,1923,1928,1932,1936,1940],{"type":173,"tag":242,"props":1883,"children":1884},{"style":352},[1885],{"type":178,"value":1753},{"type":173,"tag":242,"props":1887,"children":1888},{"style":1756},[1889],{"type":178,"value":185},{"type":173,"tag":242,"props":1891,"children":1892},{"style":1762},[1893],{"type":178,"value":1826},{"type":173,"tag":242,"props":1895,"children":1896},{"style":352},[1897],{"type":178,"value":1770},{"type":173,"tag":242,"props":1899,"children":1900},{"style":279},[1901],{"type":178,"value":1775},{"type":173,"tag":242,"props":1903,"children":1904},{"style":285},[1905],{"type":178,"value":1839},{"type":173,"tag":242,"props":1907,"children":1908},{"style":279},[1909],{"type":178,"value":1775},{"type":173,"tag":242,"props":1911,"children":1912},{"style":1762},[1913],{"type":178,"value":1914}," rel",{"type":173,"tag":242,"props":1916,"children":1917},{"style":352},[1918],{"type":178,"value":1770},{"type":173,"tag":242,"props":1920,"children":1921},{"style":279},[1922],{"type":178,"value":1775},{"type":173,"tag":242,"props":1924,"children":1925},{"style":285},[1926],{"type":178,"value":1927},"noreferrer",{"type":173,"tag":242,"props":1929,"children":1930},{"style":279},[1931],{"type":178,"value":1775},{"type":173,"tag":242,"props":1933,"children":1934},{"style":352},[1935],{"type":178,"value":1869},{"type":173,"tag":242,"props":1937,"children":1938},{"style":1756},[1939],{"type":178,"value":185},{"type":173,"tag":242,"props":1941,"children":1942},{"style":352},[1943],{"type":178,"value":1878},{"type":173,"tag":442,"props":1945,"children":1947},{"id":1946},"强制使用-https",[1948],{"type":178,"value":1949},"强制使用 HTTPS",{"type":173,"tag":174,"props":1951,"children":1952},{},[1953,1955,1961,1963,1974],{"type":178,"value":1954},"通过设置请求头的 ",{"type":173,"tag":238,"props":1956,"children":1958},{"className":1957},[],[1959],{"type":178,"value":1960},"Strict-Transport-Security（STS）",{"type":178,"value":1962},"，可以告诉浏览器，这个网站需要使用 HTTPS 而不是 HTTP 协议进行访问。浏览器每接收到这种请求后，会进行倒计时，在计时结束之前都不会将 HTTPS 降级回 HTTP",{"type":173,"tag":181,"props":1964,"children":1965},{},[1966],{"type":173,"tag":185,"props":1967,"children":1971},{"href":1968,"ariaDescribedBy":1969,"dataFootnoteRef":166,"id":1970},"#user-content-fn-timeend",[189],"user-content-fnref-timeend",[1972],{"type":178,"value":1973},"8",{"type":178,"value":752},{"type":173,"tag":174,"props":1976,"children":1977},{},[1978,1980,1986,1988,1994,1996,2002,2004,2010,2012,2017],{"type":178,"value":1979},"这个规范本身很好理解，通过 ",{"type":173,"tag":238,"props":1981,"children":1983},{"className":1982},[],[1984],{"type":178,"value":1985},"max-age",{"type":178,"value":1987}," 可以指定倒计时时间；",{"type":173,"tag":238,"props":1989,"children":1991},{"className":1990},[],[1992],{"type":178,"value":1993},"includesSubDomains",{"type":178,"value":1995}," 指定子域的 ",{"type":173,"tag":238,"props":1997,"children":1999},{"className":1998},[],[2000],{"type":178,"value":2001},"HSTS",{"type":178,"value":2003},"；",{"type":173,"tag":238,"props":2005,"children":2007},{"className":2006},[],[2008],{"type":178,"value":2009},"preload",{"type":178,"value":2011}," 指定预加载内容的 ",{"type":173,"tag":238,"props":2013,"children":2015},{"className":2014},[],[2016],{"type":178,"value":2001},{"type":178,"value":752},{"type":173,"tag":231,"props":2019,"children":2021},{"code":2020},"Strict-Transport-Security:\n    max-age=31536000;\n    includeSubDomains;\n    preload\n",[2022],{"type":173,"tag":238,"props":2023,"children":2024},{"__ignoreMap":166},[2025],{"type":178,"value":2020},{"type":173,"tag":231,"props":2027,"children":2029},{"code":2028,"language":234,"meta":166,"className":235,"style":166},"const DEFAULT_MAX_AGE = String(180 * 24 * 60 * 60)\nfunction getHeaderValueFromOptions(options) {\n  const directives = [`max-age=${options.maxAge || DEFAULT_MAX_AGE}`]\n  if (options.includeSubDomains === undefined || options.includeSubDomains) {\n    directives.push('includeSubDomains')\n  }\n  options.preload && directives.push('preload')\n  return directives.join('; ')\n}\nfunction strictTransportSecurity(options = {}) {\n  const headerValue = getHeaderValueFromOptions(options)\n  return function strictTransportSecurityMiddleware(_req, res, next) {\n    res.setHeader('Strict-Transport-Security', headerValue)\n    next()\n  }\n}\n",[2030],{"type":173,"tag":238,"props":2031,"children":2032},{"__ignoreMap":166},[2033,2095,2122,2195,2258,2295,2302,2355,2395,2402,2434,2465,2513,2557,2568,2575],{"type":173,"tag":242,"props":2034,"children":2035},{"class":244,"line":245},[2036,2040,2045,2049,2054,2058,2064,2069,2074,2078,2083,2087,2091],{"type":173,"tag":242,"props":2037,"children":2038},{"style":249},[2039],{"type":178,"value":252},{"type":173,"tag":242,"props":2041,"children":2042},{"style":255},[2043],{"type":178,"value":2044}," DEFAULT_MAX_AGE",{"type":173,"tag":242,"props":2046,"children":2047},{"style":261},[2048],{"type":178,"value":264},{"type":173,"tag":242,"props":2050,"children":2051},{"style":267},[2052],{"type":178,"value":2053}," String",{"type":173,"tag":242,"props":2055,"children":2056},{"style":273},[2057],{"type":178,"value":276},{"type":173,"tag":242,"props":2059,"children":2061},{"style":2060},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2062],{"type":178,"value":2063},"180",{"type":173,"tag":242,"props":2065,"children":2066},{"style":261},[2067],{"type":178,"value":2068}," *",{"type":173,"tag":242,"props":2070,"children":2071},{"style":2060},[2072],{"type":178,"value":2073}," 24",{"type":173,"tag":242,"props":2075,"children":2076},{"style":261},[2077],{"type":178,"value":2068},{"type":173,"tag":242,"props":2079,"children":2080},{"style":2060},[2081],{"type":178,"value":2082}," 60",{"type":173,"tag":242,"props":2084,"children":2085},{"style":261},[2086],{"type":178,"value":2068},{"type":173,"tag":242,"props":2088,"children":2089},{"style":2060},[2090],{"type":178,"value":2082},{"type":173,"tag":242,"props":2092,"children":2093},{"style":273},[2094],{"type":178,"value":297},{"type":173,"tag":242,"props":2096,"children":2097},{"class":244,"line":300},[2098,2102,2106,2110,2114,2118],{"type":173,"tag":242,"props":2099,"children":2100},{"style":249},[2101],{"type":178,"value":1288},{"type":173,"tag":242,"props":2103,"children":2104},{"style":267},[2105],{"type":178,"value":1293},{"type":173,"tag":242,"props":2107,"children":2108},{"style":352},[2109],{"type":178,"value":276},{"type":173,"tag":242,"props":2111,"children":2112},{"style":1301},[2113],{"type":178,"value":1541},{"type":173,"tag":242,"props":2115,"children":2116},{"style":352},[2117],{"type":178,"value":1637},{"type":173,"tag":242,"props":2119,"children":2120},{"style":352},[2121],{"type":178,"value":1340},{"type":173,"tag":242,"props":2123,"children":2124},{"class":244,"line":309},[2125,2129,2134,2138,2142,2147,2152,2158,2162,2167,2172,2177,2181,2186,2190],{"type":173,"tag":242,"props":2126,"children":2127},{"style":249},[2128],{"type":178,"value":1349},{"type":173,"tag":242,"props":2130,"children":2131},{"style":255},[2132],{"type":178,"value":2133}," directives",{"type":173,"tag":242,"props":2135,"children":2136},{"style":261},[2137],{"type":178,"value":264},{"type":173,"tag":242,"props":2139,"children":2140},{"style":1393},[2141],{"type":178,"value":1313},{"type":173,"tag":242,"props":2143,"children":2144},{"style":279},[2145],{"type":178,"value":2146},"`",{"type":173,"tag":242,"props":2148,"children":2149},{"style":285},[2150],{"type":178,"value":2151},"max-age=",{"type":173,"tag":242,"props":2153,"children":2155},{"style":2154},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F92672",[2156],{"type":178,"value":2157},"${",{"type":173,"tag":242,"props":2159,"children":2160},{"style":273},[2161],{"type":178,"value":1541},{"type":173,"tag":242,"props":2163,"children":2165},{"style":2164},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#F8F8F2",[2166],{"type":178,"value":355},{"type":173,"tag":242,"props":2168,"children":2169},{"style":273},[2170],{"type":178,"value":2171},"maxAge",{"type":173,"tag":242,"props":2173,"children":2174},{"style":261},[2175],{"type":178,"value":2176}," ||",{"type":173,"tag":242,"props":2178,"children":2179},{"style":255},[2180],{"type":178,"value":2044},{"type":173,"tag":242,"props":2182,"children":2183},{"style":2154},[2184],{"type":178,"value":2185},"}",{"type":173,"tag":242,"props":2187,"children":2188},{"style":279},[2189],{"type":178,"value":2146},{"type":173,"tag":242,"props":2191,"children":2192},{"style":1393},[2193],{"type":178,"value":2194},"]\n",{"type":173,"tag":242,"props":2196,"children":2197},{"class":244,"line":335},[2198,2203,2208,2212,2216,2221,2225,2231,2235,2240,2244,2248,2253],{"type":173,"tag":242,"props":2199,"children":2200},{"style":1474},[2201],{"type":178,"value":2202},"  if",{"type":173,"tag":242,"props":2204,"children":2205},{"style":1393},[2206],{"type":178,"value":2207}," (",{"type":173,"tag":242,"props":2209,"children":2210},{"style":273},[2211],{"type":178,"value":1541},{"type":173,"tag":242,"props":2213,"children":2214},{"style":352},[2215],{"type":178,"value":355},{"type":173,"tag":242,"props":2217,"children":2218},{"style":273},[2219],{"type":178,"value":2220},"includeSubDomains",{"type":173,"tag":242,"props":2222,"children":2223},{"style":261},[2224],{"type":178,"value":1372},{"type":173,"tag":242,"props":2226,"children":2228},{"style":2227},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[2229],{"type":178,"value":2230}," undefined",{"type":173,"tag":242,"props":2232,"children":2233},{"style":261},[2234],{"type":178,"value":2176},{"type":173,"tag":242,"props":2236,"children":2237},{"style":273},[2238],{"type":178,"value":2239}," options",{"type":173,"tag":242,"props":2241,"children":2242},{"style":352},[2243],{"type":178,"value":355},{"type":173,"tag":242,"props":2245,"children":2246},{"style":273},[2247],{"type":178,"value":2220},{"type":173,"tag":242,"props":2249,"children":2250},{"style":1393},[2251],{"type":178,"value":2252},") ",{"type":173,"tag":242,"props":2254,"children":2255},{"style":352},[2256],{"type":178,"value":2257},"{\n",{"type":173,"tag":242,"props":2259,"children":2260},{"class":244,"line":343},[2261,2266,2270,2275,2279,2283,2287,2291],{"type":173,"tag":242,"props":2262,"children":2263},{"style":273},[2264],{"type":178,"value":2265},"    directives",{"type":173,"tag":242,"props":2267,"children":2268},{"style":352},[2269],{"type":178,"value":355},{"type":173,"tag":242,"props":2271,"children":2272},{"style":267},[2273],{"type":178,"value":2274},"push",{"type":173,"tag":242,"props":2276,"children":2277},{"style":1393},[2278],{"type":178,"value":276},{"type":173,"tag":242,"props":2280,"children":2281},{"style":279},[2282],{"type":178,"value":282},{"type":173,"tag":242,"props":2284,"children":2285},{"style":285},[2286],{"type":178,"value":2220},{"type":173,"tag":242,"props":2288,"children":2289},{"style":279},[2290],{"type":178,"value":282},{"type":173,"tag":242,"props":2292,"children":2293},{"style":1393},[2294],{"type":178,"value":297},{"type":173,"tag":242,"props":2296,"children":2297},{"class":244,"line":1075},[2298],{"type":173,"tag":242,"props":2299,"children":2300},{"style":352},[2301],{"type":178,"value":1708},{"type":173,"tag":242,"props":2303,"children":2304},{"class":244,"line":1084},[2305,2310,2314,2318,2323,2327,2331,2335,2339,2343,2347,2351],{"type":173,"tag":242,"props":2306,"children":2307},{"style":273},[2308],{"type":178,"value":2309},"  options",{"type":173,"tag":242,"props":2311,"children":2312},{"style":352},[2313],{"type":178,"value":355},{"type":173,"tag":242,"props":2315,"children":2316},{"style":273},[2317],{"type":178,"value":2009},{"type":173,"tag":242,"props":2319,"children":2320},{"style":261},[2321],{"type":178,"value":2322}," &&",{"type":173,"tag":242,"props":2324,"children":2325},{"style":273},[2326],{"type":178,"value":2133},{"type":173,"tag":242,"props":2328,"children":2329},{"style":352},[2330],{"type":178,"value":355},{"type":173,"tag":242,"props":2332,"children":2333},{"style":267},[2334],{"type":178,"value":2274},{"type":173,"tag":242,"props":2336,"children":2337},{"style":1393},[2338],{"type":178,"value":276},{"type":173,"tag":242,"props":2340,"children":2341},{"style":279},[2342],{"type":178,"value":282},{"type":173,"tag":242,"props":2344,"children":2345},{"style":285},[2346],{"type":178,"value":2009},{"type":173,"tag":242,"props":2348,"children":2349},{"style":279},[2350],{"type":178,"value":282},{"type":173,"tag":242,"props":2352,"children":2353},{"style":1393},[2354],{"type":178,"value":297},{"type":173,"tag":242,"props":2356,"children":2357},{"class":244,"line":1105},[2358,2362,2366,2370,2374,2378,2382,2387,2391],{"type":173,"tag":242,"props":2359,"children":2360},{"style":1474},[2361],{"type":178,"value":1477},{"type":173,"tag":242,"props":2363,"children":2364},{"style":273},[2365],{"type":178,"value":2133},{"type":173,"tag":242,"props":2367,"children":2368},{"style":352},[2369],{"type":178,"value":355},{"type":173,"tag":242,"props":2371,"children":2372},{"style":267},[2373],{"type":178,"value":1490},{"type":173,"tag":242,"props":2375,"children":2376},{"style":1393},[2377],{"type":178,"value":276},{"type":173,"tag":242,"props":2379,"children":2380},{"style":279},[2381],{"type":178,"value":282},{"type":173,"tag":242,"props":2383,"children":2384},{"style":285},[2385],{"type":178,"value":2386},"; ",{"type":173,"tag":242,"props":2388,"children":2389},{"style":279},[2390],{"type":178,"value":282},{"type":173,"tag":242,"props":2392,"children":2393},{"style":1393},[2394],{"type":178,"value":297},{"type":173,"tag":242,"props":2396,"children":2397},{"class":244,"line":1114},[2398],{"type":173,"tag":242,"props":2399,"children":2400},{"style":352},[2401],{"type":178,"value":1519},{"type":173,"tag":242,"props":2403,"children":2404},{"class":244,"line":1135},[2405,2409,2414,2418,2422,2426,2430],{"type":173,"tag":242,"props":2406,"children":2407},{"style":249},[2408],{"type":178,"value":1288},{"type":173,"tag":242,"props":2410,"children":2411},{"style":267},[2412],{"type":178,"value":2413}," strictTransportSecurity",{"type":173,"tag":242,"props":2415,"children":2416},{"style":352},[2417],{"type":178,"value":276},{"type":173,"tag":242,"props":2419,"children":2420},{"style":1301},[2421],{"type":178,"value":1541},{"type":173,"tag":242,"props":2423,"children":2424},{"style":261},[2425],{"type":178,"value":264},{"type":173,"tag":242,"props":2427,"children":2428},{"style":352},[2429],{"type":178,"value":1550},{"type":173,"tag":242,"props":2431,"children":2432},{"style":352},[2433],{"type":178,"value":1340},{"type":173,"tag":242,"props":2435,"children":2436},{"class":244,"line":1144},[2437,2441,2445,2449,2453,2457,2461],{"type":173,"tag":242,"props":2438,"children":2439},{"style":249},[2440],{"type":178,"value":1349},{"type":173,"tag":242,"props":2442,"children":2443},{"style":255},[2444],{"type":178,"value":1567},{"type":173,"tag":242,"props":2446,"children":2447},{"style":261},[2448],{"type":178,"value":264},{"type":173,"tag":242,"props":2450,"children":2451},{"style":267},[2452],{"type":178,"value":1293},{"type":173,"tag":242,"props":2454,"children":2455},{"style":1393},[2456],{"type":178,"value":276},{"type":173,"tag":242,"props":2458,"children":2459},{"style":273},[2460],{"type":178,"value":1541},{"type":173,"tag":242,"props":2462,"children":2463},{"style":1393},[2464],{"type":178,"value":297},{"type":173,"tag":242,"props":2466,"children":2467},{"class":244,"line":1165},[2468,2472,2476,2481,2485,2489,2493,2497,2501,2505,2509],{"type":173,"tag":242,"props":2469,"children":2470},{"style":1474},[2471],{"type":178,"value":1477},{"type":173,"tag":242,"props":2473,"children":2474},{"style":249},[2475],{"type":178,"value":1600},{"type":173,"tag":242,"props":2477,"children":2478},{"style":267},[2479],{"type":178,"value":2480}," strictTransportSecurityMiddleware",{"type":173,"tag":242,"props":2482,"children":2483},{"style":352},[2484],{"type":178,"value":276},{"type":173,"tag":242,"props":2486,"children":2487},{"style":1301},[2488],{"type":178,"value":1614},{"type":173,"tag":242,"props":2490,"children":2491},{"style":352},[2492],{"type":178,"value":567},{"type":173,"tag":242,"props":2494,"children":2495},{"style":1301},[2496],{"type":178,"value":1623},{"type":173,"tag":242,"props":2498,"children":2499},{"style":352},[2500],{"type":178,"value":567},{"type":173,"tag":242,"props":2502,"children":2503},{"style":1301},[2504],{"type":178,"value":1632},{"type":173,"tag":242,"props":2506,"children":2507},{"style":352},[2508],{"type":178,"value":1637},{"type":173,"tag":242,"props":2510,"children":2511},{"style":352},[2512],{"type":178,"value":1340},{"type":173,"tag":242,"props":2514,"children":2515},{"class":244,"line":1174},[2516,2520,2524,2528,2532,2536,2541,2545,2549,2553],{"type":173,"tag":242,"props":2517,"children":2518},{"style":273},[2519],{"type":178,"value":1650},{"type":173,"tag":242,"props":2521,"children":2522},{"style":352},[2523],{"type":178,"value":355},{"type":173,"tag":242,"props":2525,"children":2526},{"style":267},[2527],{"type":178,"value":545},{"type":173,"tag":242,"props":2529,"children":2530},{"style":1393},[2531],{"type":178,"value":276},{"type":173,"tag":242,"props":2533,"children":2534},{"style":279},[2535],{"type":178,"value":282},{"type":173,"tag":242,"props":2537,"children":2538},{"style":285},[2539],{"type":178,"value":2540},"Strict-Transport-Security",{"type":173,"tag":242,"props":2542,"children":2543},{"style":279},[2544],{"type":178,"value":282},{"type":173,"tag":242,"props":2546,"children":2547},{"style":352},[2548],{"type":178,"value":567},{"type":173,"tag":242,"props":2550,"children":2551},{"style":273},[2552],{"type":178,"value":1567},{"type":173,"tag":242,"props":2554,"children":2555},{"style":1393},[2556],{"type":178,"value":297},{"type":173,"tag":242,"props":2558,"children":2559},{"class":244,"line":1195},[2560,2564],{"type":173,"tag":242,"props":2561,"children":2562},{"style":267},[2563],{"type":178,"value":1695},{"type":173,"tag":242,"props":2565,"children":2566},{"style":1393},[2567],{"type":178,"value":332},{"type":173,"tag":242,"props":2569,"children":2570},{"class":244,"line":1204},[2571],{"type":173,"tag":242,"props":2572,"children":2573},{"style":352},[2574],{"type":178,"value":1708},{"type":173,"tag":242,"props":2576,"children":2577},{"class":244,"line":1225},[2578],{"type":173,"tag":242,"props":2579,"children":2580},{"style":352},[2581],{"type":178,"value":1519},{"type":173,"tag":442,"props":2583,"children":2585},{"id":2584},"可选用证书透明性策略",[2586],{"type":178,"value":2584},{"type":173,"tag":231,"props":2588,"children":2590},{"code":2589,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('Expect-CT' /* someValue */)\n",[2591],{"type":173,"tag":238,"props":2592,"children":2593},{"__ignoreMap":166},[2594],{"type":173,"tag":242,"props":2595,"children":2596},{"class":244,"line":245},[2597,2601,2605,2609,2613,2617,2622,2626,2631],{"type":173,"tag":242,"props":2598,"children":2599},{"style":273},[2600],{"type":178,"value":462},{"type":173,"tag":242,"props":2602,"children":2603},{"style":352},[2604],{"type":178,"value":355},{"type":173,"tag":242,"props":2606,"children":2607},{"style":267},[2608],{"type":178,"value":545},{"type":173,"tag":242,"props":2610,"children":2611},{"style":273},[2612],{"type":178,"value":276},{"type":173,"tag":242,"props":2614,"children":2615},{"style":279},[2616],{"type":178,"value":282},{"type":173,"tag":242,"props":2618,"children":2619},{"style":285},[2620],{"type":178,"value":2621},"Expect-CT",{"type":173,"tag":242,"props":2623,"children":2624},{"style":279},[2625],{"type":178,"value":282},{"type":173,"tag":242,"props":2627,"children":2628},{"style":1019},[2629],{"type":178,"value":2630}," /* someValue */",{"type":173,"tag":242,"props":2632,"children":2633},{"style":273},[2634],{"type":178,"value":297},{"type":173,"tag":174,"props":2636,"children":2637},{},[2638,2643,2645,2656,2658,2669],{"type":173,"tag":238,"props":2639,"children":2641},{"className":2640},[],[2642],{"type":178,"value":2621},{"type":178,"value":2644}," 响应头可以指定浏览器检测通讯时的证书是否存在于公共 CT 日志（也称作证书透明性策略 ",{"type":173,"tag":181,"props":2646,"children":2647},{},[2648],{"type":173,"tag":185,"props":2649,"children":2653},{"href":2650,"ariaDescribedBy":2651,"dataFootnoteRef":166,"id":2652},"#user-content-fn-chrome-ct",[189],"user-content-fnref-chrome-ct",[2654],{"type":178,"value":2655},"9",{"type":178,"value":2657},"），避免中间人攻击 ",{"type":173,"tag":181,"props":2659,"children":2660},{},[2661],{"type":173,"tag":185,"props":2662,"children":2666},{"href":2663,"ariaDescribedBy":2664,"dataFootnoteRef":166,"id":2665},"#user-content-fn-ct",[189],"user-content-fnref-ct",[2667],{"type":178,"value":2668},"10",{"type":178,"value":2670},"；也可以启动选择性报告，告知 CA 机构部分证书可能不合法，需要被回收。",{"type":173,"tag":231,"props":2672,"children":2674},{"code":2673},"Expect-CT:\n    // 指定浏览器上报证书失效的 URI\n    report-uri=\"\u003Curi>\";\n    // 指定浏览器应当拒绝于违反证书透明性策略的服务端建立连接\n    enforce;\n    // 在此期间，证书透明性策略相关信息可作缓存\n    max-age=\u003Cage>\n",[2675],{"type":173,"tag":238,"props":2676,"children":2677},{"__ignoreMap":166},[2678],{"type":178,"value":2673},{"type":173,"tag":174,"props":2680,"children":2681},{},[2682,2684,2689],{"type":178,"value":2683},"自 2018 年 4 月，Chrome 强制要求所有 TLS 服务器证书都要符合 Chromium CT 政策。由于 Expect-CT 的 maxAge 最大可设置为 39 个月，39 个月之后，也就是 2021 年 6 月，",{"type":173,"tag":238,"props":2685,"children":2687},{"className":2686},[],[2688],{"type":178,"value":2621},{"type":178,"value":2690}," 就作不上用咯。.. TODO",{"type":173,"tag":442,"props":2692,"children":2694},{"id":2693},"拒绝来自-pdfflash-的跨域请求",[2695],{"type":178,"value":2696},"拒绝来自 PDF、Flash 的跨域请求",{"type":173,"tag":174,"props":2698,"children":2699},{},[2700,2706,2708,2719],{"type":173,"tag":238,"props":2701,"children":2703},{"className":2702},[],[2704],{"type":178,"value":2705},"X-Permitted-Cross-Domain-Policies",{"type":178,"value":2707}," 这个非标准标头倒不是那么常见。这得说回 Flash、PDF 等文件中的请求。我们以 Adobe PDF Reader 官网的一张图为例 ",{"type":173,"tag":181,"props":2709,"children":2710},{},[2711],{"type":173,"tag":185,"props":2712,"children":2716},{"href":2713,"ariaDescribedBy":2714,"dataFootnoteRef":166,"id":2715},"#user-content-fn-pdf-reader",[189],"user-content-fnref-pdf-reader",[2717],{"type":178,"value":2718},"11",{"type":178,"value":2720},"：",{"type":173,"tag":174,"props":2722,"children":2723},{},[2724],{"type":173,"tag":902,"props":2725,"children":2727},{"alt":2705,"src":2726},"https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200817134940.png",[],{"type":173,"tag":2729,"props":2730,"children":2731},"ol",{},[2732,2738],{"type":173,"tag":2733,"props":2734,"children":2735},"li",{},[2736],{"type":178,"value":2737},"用户在 A 网站打开了某个 PDF；",{"type":173,"tag":2733,"props":2739,"children":2740},{},[2741,2743,2749],{"type":178,"value":2742},"PDF 中包含了和 B 网站的通讯。这时，客户端判断这是跨域行为，于是请求 B 网站的 ",{"type":173,"tag":238,"props":2744,"children":2746},{"className":2745},[],[2747],{"type":178,"value":2748},"crossdomain.xml",{"type":178,"value":2750}," 文件（策略文件）作为跨域策略应对方案。",{"type":173,"tag":174,"props":2752,"children":2753},{},[2754],{"type":178,"value":2755},"一个策略文件可能长这样：",{"type":173,"tag":231,"props":2757,"children":2759},{"code":2758,"language":1740,"meta":166,"className":1741,"style":166},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n\u003Ccross-domain-policy>\n  \u003Callow-access-from domain=\"*.taobao.com\" />\n  \u003Callow-access-from domain=\"*.taobao.net\" />\n  \u003Callow-access-from domain=\"*.taobaocdn.com\" />\n  \u003Callow-access-from domain=\"*.tbcdn.cn\" />\n  \u003Callow-access-from domain=\"*.alicdn.com\" />\n\u003C/cross-domain-policy>\n",[2760],{"type":173,"tag":238,"props":2761,"children":2762},{"__ignoreMap":166},[2763,2771,2787,2826,2862,2898,2934,2970],{"type":173,"tag":242,"props":2764,"children":2765},{"class":244,"line":245},[2766],{"type":173,"tag":242,"props":2767,"children":2768},{"style":1019},[2769],{"type":178,"value":2770},"\u003C!-- https://www.taobao.com/crossdomain.xml -->\n",{"type":173,"tag":242,"props":2772,"children":2773},{"class":244,"line":300},[2774,2778,2783],{"type":173,"tag":242,"props":2775,"children":2776},{"style":352},[2777],{"type":178,"value":1753},{"type":173,"tag":242,"props":2779,"children":2780},{"style":1756},[2781],{"type":178,"value":2782},"cross-domain-policy",{"type":173,"tag":242,"props":2784,"children":2785},{"style":352},[2786],{"type":178,"value":1878},{"type":173,"tag":242,"props":2788,"children":2789},{"class":244,"line":309},[2790,2795,2800,2805,2809,2813,2818,2822],{"type":173,"tag":242,"props":2791,"children":2792},{"style":352},[2793],{"type":178,"value":2794},"  \u003C",{"type":173,"tag":242,"props":2796,"children":2797},{"style":1756},[2798],{"type":178,"value":2799},"allow-access-from",{"type":173,"tag":242,"props":2801,"children":2802},{"style":1762},[2803],{"type":178,"value":2804}," domain",{"type":173,"tag":242,"props":2806,"children":2807},{"style":352},[2808],{"type":178,"value":1770},{"type":173,"tag":242,"props":2810,"children":2811},{"style":279},[2812],{"type":178,"value":1775},{"type":173,"tag":242,"props":2814,"children":2815},{"style":285},[2816],{"type":178,"value":2817},"*.taobao.com",{"type":173,"tag":242,"props":2819,"children":2820},{"style":279},[2821],{"type":178,"value":1775},{"type":173,"tag":242,"props":2823,"children":2824},{"style":352},[2825],{"type":178,"value":1810},{"type":173,"tag":242,"props":2827,"children":2828},{"class":244,"line":335},[2829,2833,2837,2841,2845,2849,2854,2858],{"type":173,"tag":242,"props":2830,"children":2831},{"style":352},[2832],{"type":178,"value":2794},{"type":173,"tag":242,"props":2834,"children":2835},{"style":1756},[2836],{"type":178,"value":2799},{"type":173,"tag":242,"props":2838,"children":2839},{"style":1762},[2840],{"type":178,"value":2804},{"type":173,"tag":242,"props":2842,"children":2843},{"style":352},[2844],{"type":178,"value":1770},{"type":173,"tag":242,"props":2846,"children":2847},{"style":279},[2848],{"type":178,"value":1775},{"type":173,"tag":242,"props":2850,"children":2851},{"style":285},[2852],{"type":178,"value":2853},"*.taobao.net",{"type":173,"tag":242,"props":2855,"children":2856},{"style":279},[2857],{"type":178,"value":1775},{"type":173,"tag":242,"props":2859,"children":2860},{"style":352},[2861],{"type":178,"value":1810},{"type":173,"tag":242,"props":2863,"children":2864},{"class":244,"line":343},[2865,2869,2873,2877,2881,2885,2890,2894],{"type":173,"tag":242,"props":2866,"children":2867},{"style":352},[2868],{"type":178,"value":2794},{"type":173,"tag":242,"props":2870,"children":2871},{"style":1756},[2872],{"type":178,"value":2799},{"type":173,"tag":242,"props":2874,"children":2875},{"style":1762},[2876],{"type":178,"value":2804},{"type":173,"tag":242,"props":2878,"children":2879},{"style":352},[2880],{"type":178,"value":1770},{"type":173,"tag":242,"props":2882,"children":2883},{"style":279},[2884],{"type":178,"value":1775},{"type":173,"tag":242,"props":2886,"children":2887},{"style":285},[2888],{"type":178,"value":2889},"*.taobaocdn.com",{"type":173,"tag":242,"props":2891,"children":2892},{"style":279},[2893],{"type":178,"value":1775},{"type":173,"tag":242,"props":2895,"children":2896},{"style":352},[2897],{"type":178,"value":1810},{"type":173,"tag":242,"props":2899,"children":2900},{"class":244,"line":1075},[2901,2905,2909,2913,2917,2921,2926,2930],{"type":173,"tag":242,"props":2902,"children":2903},{"style":352},[2904],{"type":178,"value":2794},{"type":173,"tag":242,"props":2906,"children":2907},{"style":1756},[2908],{"type":178,"value":2799},{"type":173,"tag":242,"props":2910,"children":2911},{"style":1762},[2912],{"type":178,"value":2804},{"type":173,"tag":242,"props":2914,"children":2915},{"style":352},[2916],{"type":178,"value":1770},{"type":173,"tag":242,"props":2918,"children":2919},{"style":279},[2920],{"type":178,"value":1775},{"type":173,"tag":242,"props":2922,"children":2923},{"style":285},[2924],{"type":178,"value":2925},"*.tbcdn.cn",{"type":173,"tag":242,"props":2927,"children":2928},{"style":279},[2929],{"type":178,"value":1775},{"type":173,"tag":242,"props":2931,"children":2932},{"style":352},[2933],{"type":178,"value":1810},{"type":173,"tag":242,"props":2935,"children":2936},{"class":244,"line":1084},[2937,2941,2945,2949,2953,2957,2962,2966],{"type":173,"tag":242,"props":2938,"children":2939},{"style":352},[2940],{"type":178,"value":2794},{"type":173,"tag":242,"props":2942,"children":2943},{"style":1756},[2944],{"type":178,"value":2799},{"type":173,"tag":242,"props":2946,"children":2947},{"style":1762},[2948],{"type":178,"value":2804},{"type":173,"tag":242,"props":2950,"children":2951},{"style":352},[2952],{"type":178,"value":1770},{"type":173,"tag":242,"props":2954,"children":2955},{"style":279},[2956],{"type":178,"value":1775},{"type":173,"tag":242,"props":2958,"children":2959},{"style":285},[2960],{"type":178,"value":2961},"*.alicdn.com",{"type":173,"tag":242,"props":2963,"children":2964},{"style":279},[2965],{"type":178,"value":1775},{"type":173,"tag":242,"props":2967,"children":2968},{"style":352},[2969],{"type":178,"value":1810},{"type":173,"tag":242,"props":2971,"children":2972},{"class":244,"line":1105},[2973,2978,2982],{"type":173,"tag":242,"props":2974,"children":2975},{"style":352},[2976],{"type":178,"value":2977},"\u003C/",{"type":173,"tag":242,"props":2979,"children":2980},{"style":1756},[2981],{"type":178,"value":2782},{"type":173,"tag":242,"props":2983,"children":2984},{"style":352},[2985],{"type":178,"value":1878},{"type":173,"tag":174,"props":2987,"children":2988},{},[2989,2991,2996,2998,3003],{"type":178,"value":2990},"其中，若请求响应头包含了 ",{"type":173,"tag":238,"props":2992,"children":2994},{"className":2993},[],[2995],{"type":178,"value":2705},{"type":178,"value":2997},"，便可指定浏览器针对 ",{"type":173,"tag":238,"props":2999,"children":3001},{"className":3000},[],[3002],{"type":178,"value":2748},{"type":178,"value":3004}," 的应对行为。",{"type":173,"tag":231,"props":3006,"children":3008},{"code":3007,"language":234,"meta":166,"className":235,"style":166},"const ALLOWED_PERMITTED_POLICIES = new Set([\n  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n  'master-only',\n  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n  'by-content-type',\n  // 不使用任何位置的 crossdomain.xml\n  'none',\n  // 允许使用任何位置的 crossdomain.xml\n  'all'\n])\nfunction xPermittedCrossDomainPolicies(headerValue = 'none') {\n  return function xPermittedCrossDomainPoliciesMiddleware(_req, res, next) {\n    res.setHeader('X-Permitted-Cross-Domain-Policies', headerValue)\n    next()\n  }\n}\n",[3009],{"type":173,"tag":238,"props":3010,"children":3011},{"__ignoreMap":166},[3012,3040,3048,3068,3076,3096,3104,3124,3132,3149,3156,3201,3249,3292,3303,3310],{"type":173,"tag":242,"props":3013,"children":3014},{"class":244,"line":245},[3015,3019,3024,3028,3032,3036],{"type":173,"tag":242,"props":3016,"children":3017},{"style":249},[3018],{"type":178,"value":252},{"type":173,"tag":242,"props":3020,"children":3021},{"style":255},[3022],{"type":178,"value":3023}," ALLOWED_PERMITTED_POLICIES",{"type":173,"tag":242,"props":3025,"children":3026},{"style":261},[3027],{"type":178,"value":264},{"type":173,"tag":242,"props":3029,"children":3030},{"style":261},[3031],{"type":178,"value":1003},{"type":173,"tag":242,"props":3033,"children":3034},{"style":267},[3035],{"type":178,"value":1008},{"type":173,"tag":242,"props":3037,"children":3038},{"style":273},[3039],{"type":178,"value":1013},{"type":173,"tag":242,"props":3041,"children":3042},{"class":244,"line":300},[3043],{"type":173,"tag":242,"props":3044,"children":3045},{"style":1019},[3046],{"type":178,"value":3047},"  // 只允许使用主策略（即只允许网站根目录的 crossdomain.xml）\n",{"type":173,"tag":242,"props":3049,"children":3050},{"class":244,"line":309},[3051,3055,3060,3064],{"type":173,"tag":242,"props":3052,"children":3053},{"style":279},[3054],{"type":178,"value":1030},{"type":173,"tag":242,"props":3056,"children":3057},{"style":285},[3058],{"type":178,"value":3059},"master-only",{"type":173,"tag":242,"props":3061,"children":3062},{"style":279},[3063],{"type":178,"value":282},{"type":173,"tag":242,"props":3065,"children":3066},{"style":352},[3067],{"type":178,"value":1044},{"type":173,"tag":242,"props":3069,"children":3070},{"class":244,"line":335},[3071],{"type":173,"tag":242,"props":3072,"children":3073},{"style":1019},[3074],{"type":178,"value":3075},"  // 仅当策略文件的响应头 Content-Type 为 text/x-cross-domain-policy 时，策略文件被允许使用\n",{"type":173,"tag":242,"props":3077,"children":3078},{"class":244,"line":343},[3079,3083,3088,3092],{"type":173,"tag":242,"props":3080,"children":3081},{"style":279},[3082],{"type":178,"value":1030},{"type":173,"tag":242,"props":3084,"children":3085},{"style":285},[3086],{"type":178,"value":3087},"by-content-type",{"type":173,"tag":242,"props":3089,"children":3090},{"style":279},[3091],{"type":178,"value":282},{"type":173,"tag":242,"props":3093,"children":3094},{"style":352},[3095],{"type":178,"value":1044},{"type":173,"tag":242,"props":3097,"children":3098},{"class":244,"line":1075},[3099],{"type":173,"tag":242,"props":3100,"children":3101},{"style":1019},[3102],{"type":178,"value":3103},"  // 不使用任何位置的 crossdomain.xml\n",{"type":173,"tag":242,"props":3105,"children":3106},{"class":244,"line":1084},[3107,3111,3116,3120],{"type":173,"tag":242,"props":3108,"children":3109},{"style":279},[3110],{"type":178,"value":1030},{"type":173,"tag":242,"props":3112,"children":3113},{"style":285},[3114],{"type":178,"value":3115},"none",{"type":173,"tag":242,"props":3117,"children":3118},{"style":279},[3119],{"type":178,"value":282},{"type":173,"tag":242,"props":3121,"children":3122},{"style":352},[3123],{"type":178,"value":1044},{"type":173,"tag":242,"props":3125,"children":3126},{"class":244,"line":1105},[3127],{"type":173,"tag":242,"props":3128,"children":3129},{"style":1019},[3130],{"type":178,"value":3131},"  // 允许使用任何位置的 crossdomain.xml\n",{"type":173,"tag":242,"props":3133,"children":3134},{"class":244,"line":1114},[3135,3139,3144],{"type":173,"tag":242,"props":3136,"children":3137},{"style":279},[3138],{"type":178,"value":1030},{"type":173,"tag":242,"props":3140,"children":3141},{"style":285},[3142],{"type":178,"value":3143},"all",{"type":173,"tag":242,"props":3145,"children":3146},{"style":279},[3147],{"type":178,"value":3148},"'\n",{"type":173,"tag":242,"props":3150,"children":3151},{"class":244,"line":1135},[3152],{"type":173,"tag":242,"props":3153,"children":3154},{"style":273},[3155],{"type":178,"value":1279},{"type":173,"tag":242,"props":3157,"children":3158},{"class":244,"line":1144},[3159,3163,3168,3172,3177,3181,3185,3189,3193,3197],{"type":173,"tag":242,"props":3160,"children":3161},{"style":249},[3162],{"type":178,"value":1288},{"type":173,"tag":242,"props":3164,"children":3165},{"style":267},[3166],{"type":178,"value":3167}," xPermittedCrossDomainPolicies",{"type":173,"tag":242,"props":3169,"children":3170},{"style":352},[3171],{"type":178,"value":276},{"type":173,"tag":242,"props":3173,"children":3174},{"style":1301},[3175],{"type":178,"value":3176},"headerValue",{"type":173,"tag":242,"props":3178,"children":3179},{"style":261},[3180],{"type":178,"value":264},{"type":173,"tag":242,"props":3182,"children":3183},{"style":279},[3184],{"type":178,"value":572},{"type":173,"tag":242,"props":3186,"children":3187},{"style":285},[3188],{"type":178,"value":3115},{"type":173,"tag":242,"props":3190,"children":3191},{"style":279},[3192],{"type":178,"value":282},{"type":173,"tag":242,"props":3194,"children":3195},{"style":352},[3196],{"type":178,"value":1637},{"type":173,"tag":242,"props":3198,"children":3199},{"style":352},[3200],{"type":178,"value":1340},{"type":173,"tag":242,"props":3202,"children":3203},{"class":244,"line":1165},[3204,3208,3212,3217,3221,3225,3229,3233,3237,3241,3245],{"type":173,"tag":242,"props":3205,"children":3206},{"style":1474},[3207],{"type":178,"value":1477},{"type":173,"tag":242,"props":3209,"children":3210},{"style":249},[3211],{"type":178,"value":1600},{"type":173,"tag":242,"props":3213,"children":3214},{"style":267},[3215],{"type":178,"value":3216}," xPermittedCrossDomainPoliciesMiddleware",{"type":173,"tag":242,"props":3218,"children":3219},{"style":352},[3220],{"type":178,"value":276},{"type":173,"tag":242,"props":3222,"children":3223},{"style":1301},[3224],{"type":178,"value":1614},{"type":173,"tag":242,"props":3226,"children":3227},{"style":352},[3228],{"type":178,"value":567},{"type":173,"tag":242,"props":3230,"children":3231},{"style":1301},[3232],{"type":178,"value":1623},{"type":173,"tag":242,"props":3234,"children":3235},{"style":352},[3236],{"type":178,"value":567},{"type":173,"tag":242,"props":3238,"children":3239},{"style":1301},[3240],{"type":178,"value":1632},{"type":173,"tag":242,"props":3242,"children":3243},{"style":352},[3244],{"type":178,"value":1637},{"type":173,"tag":242,"props":3246,"children":3247},{"style":352},[3248],{"type":178,"value":1340},{"type":173,"tag":242,"props":3250,"children":3251},{"class":244,"line":1174},[3252,3256,3260,3264,3268,3272,3276,3280,3284,3288],{"type":173,"tag":242,"props":3253,"children":3254},{"style":273},[3255],{"type":178,"value":1650},{"type":173,"tag":242,"props":3257,"children":3258},{"style":352},[3259],{"type":178,"value":355},{"type":173,"tag":242,"props":3261,"children":3262},{"style":267},[3263],{"type":178,"value":545},{"type":173,"tag":242,"props":3265,"children":3266},{"style":1393},[3267],{"type":178,"value":276},{"type":173,"tag":242,"props":3269,"children":3270},{"style":279},[3271],{"type":178,"value":282},{"type":173,"tag":242,"props":3273,"children":3274},{"style":285},[3275],{"type":178,"value":2705},{"type":173,"tag":242,"props":3277,"children":3278},{"style":279},[3279],{"type":178,"value":282},{"type":173,"tag":242,"props":3281,"children":3282},{"style":352},[3283],{"type":178,"value":567},{"type":173,"tag":242,"props":3285,"children":3286},{"style":273},[3287],{"type":178,"value":1567},{"type":173,"tag":242,"props":3289,"children":3290},{"style":1393},[3291],{"type":178,"value":297},{"type":173,"tag":242,"props":3293,"children":3294},{"class":244,"line":1195},[3295,3299],{"type":173,"tag":242,"props":3296,"children":3297},{"style":267},[3298],{"type":178,"value":1695},{"type":173,"tag":242,"props":3300,"children":3301},{"style":1393},[3302],{"type":178,"value":332},{"type":173,"tag":242,"props":3304,"children":3305},{"class":244,"line":1204},[3306],{"type":173,"tag":242,"props":3307,"children":3308},{"style":352},[3309],{"type":178,"value":1708},{"type":173,"tag":242,"props":3311,"children":3312},{"class":244,"line":1225},[3313],{"type":173,"tag":242,"props":3314,"children":3315},{"style":352},[3316],{"type":178,"value":1519},{"type":173,"tag":174,"props":3318,"children":3319},{},[3320],{"type":178,"value":3321},"可见 Helmet 的默认行为很简单，它使应用直接拒绝了来自 PDF、Flash 等非标准客户端的所有的跨域请求。",{"type":173,"tag":442,"props":3323,"children":3325},{"id":3324},"开启-csp",[3326],{"type":178,"value":3327},"开启 CSP",{"type":173,"tag":174,"props":3329,"children":3330},{},[3331,3333,3338,3340,3345,3347,3352,3354,3365],{"type":178,"value":3332},"还记得刚才提到 Chrome 关闭了 ",{"type":173,"tag":238,"props":3334,"children":3336},{"className":3335},[],[3337],{"type":178,"value":695},{"type":178,"value":3339}," 吗？既然不再使用 ",{"type":173,"tag":238,"props":3341,"children":3343},{"className":3342},[],[3344],{"type":178,"value":695},{"type":178,"value":3346},"，那他就迫切需要一种更新的 XSS 防范手段，那就是我们提到的 ",{"type":173,"tag":238,"props":3348,"children":3350},{"className":3349},[],[3351],{"type":178,"value":723},{"type":178,"value":3353}," 标准 ",{"type":173,"tag":181,"props":3355,"children":3356},{},[3357],{"type":173,"tag":185,"props":3358,"children":3362},{"href":3359,"ariaDescribedBy":3360,"dataFootnoteRef":166,"id":3361},"#user-content-fn-csp-standard",[189],"user-content-fnref-csp-standard",[3363],{"type":178,"value":3364},"12",{"type":178,"value":3366},"。CSP 提供了很多限制选项，涉及安全的各个方面，可以有效阻止一些基础的攻击手段。",{"type":173,"tag":174,"props":3368,"children":3369},{},[3370,3375],{"type":173,"tag":238,"props":3371,"children":3373},{"className":3372},[],[3374],{"type":178,"value":723},{"type":178,"value":3376}," 既可以通过响应头指定，也可以通过 HTML 标签指定。",{"type":173,"tag":231,"props":3378,"children":3380},{"code":3379,"language":1740,"meta":166,"className":1741,"style":166},"\u003Cmeta http-equiv=\"Content-Security-Policy\" content=\"default-src 'self'; img-src https://*; child-src 'none';\" />\n",[3381],{"type":173,"tag":238,"props":3382,"children":3383},{"__ignoreMap":166},[3384],{"type":173,"tag":242,"props":3385,"children":3386},{"class":244,"line":245},[3387,3391,3395,3400,3404,3408,3413,3417,3421,3425,3429,3434,3438],{"type":173,"tag":242,"props":3388,"children":3389},{"style":352},[3390],{"type":178,"value":1753},{"type":173,"tag":242,"props":3392,"children":3393},{"style":1756},[3394],{"type":178,"value":1759},{"type":173,"tag":242,"props":3396,"children":3397},{"style":1762},[3398],{"type":178,"value":3399}," http-equiv",{"type":173,"tag":242,"props":3401,"children":3402},{"style":352},[3403],{"type":178,"value":1770},{"type":173,"tag":242,"props":3405,"children":3406},{"style":279},[3407],{"type":178,"value":1775},{"type":173,"tag":242,"props":3409,"children":3410},{"style":285},[3411],{"type":178,"value":3412},"Content-Security-Policy",{"type":173,"tag":242,"props":3414,"children":3415},{"style":279},[3416],{"type":178,"value":1775},{"type":173,"tag":242,"props":3418,"children":3419},{"style":1762},[3420],{"type":178,"value":1789},{"type":173,"tag":242,"props":3422,"children":3423},{"style":352},[3424],{"type":178,"value":1770},{"type":173,"tag":242,"props":3426,"children":3427},{"style":279},[3428],{"type":178,"value":1775},{"type":173,"tag":242,"props":3430,"children":3431},{"style":285},[3432],{"type":178,"value":3433},"default-src 'self'; img-src https://*; child-src 'none';",{"type":173,"tag":242,"props":3435,"children":3436},{"style":279},[3437],{"type":178,"value":1775},{"type":173,"tag":242,"props":3439,"children":3440},{"style":352},[3441],{"type":178,"value":1810},{"type":173,"tag":174,"props":3443,"children":3444},{},[3445,3447,3452],{"type":178,"value":3446},"一个典型的 ",{"type":173,"tag":238,"props":3448,"children":3450},{"className":3449},[],[3451],{"type":178,"value":723},{"type":178,"value":3453}," 头如下：",{"type":173,"tag":231,"props":3455,"children":3457},{"code":3456},"Content-Security-Policy: default-src 'none';\n    script-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    style-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==';\n    img-src 'self';\n    font-src 'nonce-XQY ZwBUm/WV9iQ3PwARLw==' fonts.gstatic.com;\n    object-src 'none';\n    block-all-mixed-content;\n    frame-ancestors 'none';\n",[3458],{"type":173,"tag":238,"props":3459,"children":3460},{"__ignoreMap":166},[3461],{"type":178,"value":3456},{"type":173,"tag":174,"props":3463,"children":3464},{},[3465],{"type":178,"value":3466},"大致来说，CSP 相关以下几种安全行为：",{"type":173,"tag":3468,"props":3469,"children":3470},"ul",{},[3471,3476,3481,3486],{"type":173,"tag":2733,"props":3472,"children":3473},{},[3474],{"type":178,"value":3475},"指定内容有效域：如 script-src 限制了脚本的加载域，用以减少 XSS 攻击。",{"type":173,"tag":2733,"props":3477,"children":3478},{},[3479],{"type":178,"value":3480},"指定协议：使用 block-all-mixed-content 指定浏览器禁止加载 HTTP 内容；通过 upgrade-insecure-requests 指定浏览器将网站的 HTTP 协议升级为 HTTPS；",{"type":173,"tag":2733,"props":3482,"children":3483},{},[3484],{"type":178,"value":3485},"行为安全：通过 sandbox 指令指定浏览器禁止弹出窗口等行为。",{"type":173,"tag":2733,"props":3487,"children":3488},{},[3489,3491,3497],{"type":178,"value":3490},"启用违规报告：通过 report-uri 指定检测到违规行为时发送违规报告到指定地址。此外，如果仅报告而不指定拦截策略，可以仅使用 ",{"type":173,"tag":238,"props":3492,"children":3494},{"className":3493},[],[3495],{"type":178,"value":3496},"Content-Security-Policy-Report-Only",{"type":178,"value":3498}," Header。",{"type":173,"tag":174,"props":3500,"children":3501},{},[3502,3504,3509],{"type":178,"value":3503},"那么我们看看 Helmet 中默认配置的 ",{"type":173,"tag":238,"props":3505,"children":3507},{"className":3506},[],[3508],{"type":178,"value":723},{"type":178,"value":3510}," 策略：",{"type":173,"tag":231,"props":3512,"children":3514},{"code":3513,"language":234,"meta":166,"className":235,"style":166},"const DEFAULT_DIRECTIVES = {\n  // 默认只允许使用本站资源（脚本、图片）\n  'default-src': [\"'self'\"],\n  // 限制 base 标签的 URI 为源地址\n  'base-uri': [\"'self'\"],\n  // 禁止通过 HTTP 协议加载内容\n  'block-all-mixed-content': [],\n  // 限制字体加载地址\n  'font-src': [\"'self'\", 'https:', 'data:'],\n  // 限制嵌入的外部资源\n  'frame-ancestors': [\"'self'\"],\n  // 限制图片加载地址\n  'img-src': [\"'self'\", 'data:'],\n  // 禁用 object 标签\n  'object-src': [\"'none'\"],\n  // 只从源地址加载脚本\n  'script-src': [\"'self'\"],\n  // 禁用内联脚本\n  // ？这里没能理解\n  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n  'script-src-attr': [\"'none'\"],‘\n  // 限制样式表加载地址\n  'style-src': [\"'self'\", 'https:', \"'unsafe-inline'\"],\n  // 不使用升级协议指令\n  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版 URL 的网站，\n  // 所以默认不开启此指令\n  'upgrade-insecure-requests': []\n}\n",[3515],{"type":173,"tag":238,"props":3516,"children":3517},{"__ignoreMap":166},[3518,3538,3546,3593,3601,3645,3653,3682,3690,3768,3776,3819,3827,3887,3895,3940,3948,3992,4000,4008,4016,4024,4073,4081,4159,4167,4175,4183,4208],{"type":173,"tag":242,"props":3519,"children":3520},{"class":244,"line":245},[3521,3525,3530,3534],{"type":173,"tag":242,"props":3522,"children":3523},{"style":249},[3524],{"type":178,"value":252},{"type":173,"tag":242,"props":3526,"children":3527},{"style":255},[3528],{"type":178,"value":3529}," DEFAULT_DIRECTIVES",{"type":173,"tag":242,"props":3531,"children":3532},{"style":261},[3533],{"type":178,"value":264},{"type":173,"tag":242,"props":3535,"children":3536},{"style":352},[3537],{"type":178,"value":1340},{"type":173,"tag":242,"props":3539,"children":3540},{"class":244,"line":300},[3541],{"type":173,"tag":242,"props":3542,"children":3543},{"style":1019},[3544],{"type":178,"value":3545},"  // 默认只允许使用本站资源（脚本、图片）\n",{"type":173,"tag":242,"props":3547,"children":3548},{"class":244,"line":309},[3549,3553,3559,3563,3567,3571,3575,3580,3584,3589],{"type":173,"tag":242,"props":3550,"children":3551},{"style":279},[3552],{"type":178,"value":1030},{"type":173,"tag":242,"props":3554,"children":3556},{"style":3555},"--shiki-light:#E53935;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[3557],{"type":178,"value":3558},"default-src",{"type":173,"tag":242,"props":3560,"children":3561},{"style":279},[3562],{"type":178,"value":282},{"type":173,"tag":242,"props":3564,"children":3565},{"style":352},[3566],{"type":178,"value":1409},{"type":173,"tag":242,"props":3568,"children":3569},{"style":273},[3570],{"type":178,"value":1313},{"type":173,"tag":242,"props":3572,"children":3573},{"style":279},[3574],{"type":178,"value":1775},{"type":173,"tag":242,"props":3576,"children":3577},{"style":285},[3578],{"type":178,"value":3579},"'self'",{"type":173,"tag":242,"props":3581,"children":3582},{"style":279},[3583],{"type":178,"value":1775},{"type":173,"tag":242,"props":3585,"children":3586},{"style":273},[3587],{"type":178,"value":3588},"]",{"type":173,"tag":242,"props":3590,"children":3591},{"style":352},[3592],{"type":178,"value":1044},{"type":173,"tag":242,"props":3594,"children":3595},{"class":244,"line":335},[3596],{"type":173,"tag":242,"props":3597,"children":3598},{"style":1019},[3599],{"type":178,"value":3600},"  // 限制 base 标签的 URI 为源地址\n",{"type":173,"tag":242,"props":3602,"children":3603},{"class":244,"line":343},[3604,3608,3613,3617,3621,3625,3629,3633,3637,3641],{"type":173,"tag":242,"props":3605,"children":3606},{"style":279},[3607],{"type":178,"value":1030},{"type":173,"tag":242,"props":3609,"children":3610},{"style":3555},[3611],{"type":178,"value":3612},"base-uri",{"type":173,"tag":242,"props":3614,"children":3615},{"style":279},[3616],{"type":178,"value":282},{"type":173,"tag":242,"props":3618,"children":3619},{"style":352},[3620],{"type":178,"value":1409},{"type":173,"tag":242,"props":3622,"children":3623},{"style":273},[3624],{"type":178,"value":1313},{"type":173,"tag":242,"props":3626,"children":3627},{"style":279},[3628],{"type":178,"value":1775},{"type":173,"tag":242,"props":3630,"children":3631},{"style":285},[3632],{"type":178,"value":3579},{"type":173,"tag":242,"props":3634,"children":3635},{"style":279},[3636],{"type":178,"value":1775},{"type":173,"tag":242,"props":3638,"children":3639},{"style":273},[3640],{"type":178,"value":3588},{"type":173,"tag":242,"props":3642,"children":3643},{"style":352},[3644],{"type":178,"value":1044},{"type":173,"tag":242,"props":3646,"children":3647},{"class":244,"line":1075},[3648],{"type":173,"tag":242,"props":3649,"children":3650},{"style":1019},[3651],{"type":178,"value":3652},"  // 禁止通过 HTTP 协议加载内容\n",{"type":173,"tag":242,"props":3654,"children":3655},{"class":244,"line":1084},[3656,3660,3665,3669,3673,3678],{"type":173,"tag":242,"props":3657,"children":3658},{"style":279},[3659],{"type":178,"value":1030},{"type":173,"tag":242,"props":3661,"children":3662},{"style":3555},[3663],{"type":178,"value":3664},"block-all-mixed-content",{"type":173,"tag":242,"props":3666,"children":3667},{"style":279},[3668],{"type":178,"value":282},{"type":173,"tag":242,"props":3670,"children":3671},{"style":352},[3672],{"type":178,"value":1409},{"type":173,"tag":242,"props":3674,"children":3675},{"style":273},[3676],{"type":178,"value":3677}," []",{"type":173,"tag":242,"props":3679,"children":3680},{"style":352},[3681],{"type":178,"value":1044},{"type":173,"tag":242,"props":3683,"children":3684},{"class":244,"line":1105},[3685],{"type":173,"tag":242,"props":3686,"children":3687},{"style":1019},[3688],{"type":178,"value":3689},"  // 限制字体加载地址\n",{"type":173,"tag":242,"props":3691,"children":3692},{"class":244,"line":1114},[3693,3697,3702,3706,3710,3714,3718,3722,3726,3730,3734,3739,3743,3747,3751,3756,3760,3764],{"type":173,"tag":242,"props":3694,"children":3695},{"style":279},[3696],{"type":178,"value":1030},{"type":173,"tag":242,"props":3698,"children":3699},{"style":3555},[3700],{"type":178,"value":3701},"font-src",{"type":173,"tag":242,"props":3703,"children":3704},{"style":279},[3705],{"type":178,"value":282},{"type":173,"tag":242,"props":3707,"children":3708},{"style":352},[3709],{"type":178,"value":1409},{"type":173,"tag":242,"props":3711,"children":3712},{"style":273},[3713],{"type":178,"value":1313},{"type":173,"tag":242,"props":3715,"children":3716},{"style":279},[3717],{"type":178,"value":1775},{"type":173,"tag":242,"props":3719,"children":3720},{"style":285},[3721],{"type":178,"value":3579},{"type":173,"tag":242,"props":3723,"children":3724},{"style":279},[3725],{"type":178,"value":1775},{"type":173,"tag":242,"props":3727,"children":3728},{"style":352},[3729],{"type":178,"value":567},{"type":173,"tag":242,"props":3731,"children":3732},{"style":279},[3733],{"type":178,"value":572},{"type":173,"tag":242,"props":3735,"children":3736},{"style":285},[3737],{"type":178,"value":3738},"https:",{"type":173,"tag":242,"props":3740,"children":3741},{"style":279},[3742],{"type":178,"value":282},{"type":173,"tag":242,"props":3744,"children":3745},{"style":352},[3746],{"type":178,"value":567},{"type":173,"tag":242,"props":3748,"children":3749},{"style":279},[3750],{"type":178,"value":572},{"type":173,"tag":242,"props":3752,"children":3753},{"style":285},[3754],{"type":178,"value":3755},"data:",{"type":173,"tag":242,"props":3757,"children":3758},{"style":279},[3759],{"type":178,"value":282},{"type":173,"tag":242,"props":3761,"children":3762},{"style":273},[3763],{"type":178,"value":3588},{"type":173,"tag":242,"props":3765,"children":3766},{"style":352},[3767],{"type":178,"value":1044},{"type":173,"tag":242,"props":3769,"children":3770},{"class":244,"line":1135},[3771],{"type":173,"tag":242,"props":3772,"children":3773},{"style":1019},[3774],{"type":178,"value":3775},"  // 限制嵌入的外部资源\n",{"type":173,"tag":242,"props":3777,"children":3778},{"class":244,"line":1144},[3779,3783,3787,3791,3795,3799,3803,3807,3811,3815],{"type":173,"tag":242,"props":3780,"children":3781},{"style":279},[3782],{"type":178,"value":1030},{"type":173,"tag":242,"props":3784,"children":3785},{"style":3555},[3786],{"type":178,"value":924},{"type":173,"tag":242,"props":3788,"children":3789},{"style":279},[3790],{"type":178,"value":282},{"type":173,"tag":242,"props":3792,"children":3793},{"style":352},[3794],{"type":178,"value":1409},{"type":173,"tag":242,"props":3796,"children":3797},{"style":273},[3798],{"type":178,"value":1313},{"type":173,"tag":242,"props":3800,"children":3801},{"style":279},[3802],{"type":178,"value":1775},{"type":173,"tag":242,"props":3804,"children":3805},{"style":285},[3806],{"type":178,"value":3579},{"type":173,"tag":242,"props":3808,"children":3809},{"style":279},[3810],{"type":178,"value":1775},{"type":173,"tag":242,"props":3812,"children":3813},{"style":273},[3814],{"type":178,"value":3588},{"type":173,"tag":242,"props":3816,"children":3817},{"style":352},[3818],{"type":178,"value":1044},{"type":173,"tag":242,"props":3820,"children":3821},{"class":244,"line":1165},[3822],{"type":173,"tag":242,"props":3823,"children":3824},{"style":1019},[3825],{"type":178,"value":3826},"  // 限制图片加载地址\n",{"type":173,"tag":242,"props":3828,"children":3829},{"class":244,"line":1174},[3830,3834,3839,3843,3847,3851,3855,3859,3863,3867,3871,3875,3879,3883],{"type":173,"tag":242,"props":3831,"children":3832},{"style":279},[3833],{"type":178,"value":1030},{"type":173,"tag":242,"props":3835,"children":3836},{"style":3555},[3837],{"type":178,"value":3838},"img-src",{"type":173,"tag":242,"props":3840,"children":3841},{"style":279},[3842],{"type":178,"value":282},{"type":173,"tag":242,"props":3844,"children":3845},{"style":352},[3846],{"type":178,"value":1409},{"type":173,"tag":242,"props":3848,"children":3849},{"style":273},[3850],{"type":178,"value":1313},{"type":173,"tag":242,"props":3852,"children":3853},{"style":279},[3854],{"type":178,"value":1775},{"type":173,"tag":242,"props":3856,"children":3857},{"style":285},[3858],{"type":178,"value":3579},{"type":173,"tag":242,"props":3860,"children":3861},{"style":279},[3862],{"type":178,"value":1775},{"type":173,"tag":242,"props":3864,"children":3865},{"style":352},[3866],{"type":178,"value":567},{"type":173,"tag":242,"props":3868,"children":3869},{"style":279},[3870],{"type":178,"value":572},{"type":173,"tag":242,"props":3872,"children":3873},{"style":285},[3874],{"type":178,"value":3755},{"type":173,"tag":242,"props":3876,"children":3877},{"style":279},[3878],{"type":178,"value":282},{"type":173,"tag":242,"props":3880,"children":3881},{"style":273},[3882],{"type":178,"value":3588},{"type":173,"tag":242,"props":3884,"children":3885},{"style":352},[3886],{"type":178,"value":1044},{"type":173,"tag":242,"props":3888,"children":3889},{"class":244,"line":1195},[3890],{"type":173,"tag":242,"props":3891,"children":3892},{"style":1019},[3893],{"type":178,"value":3894},"  // 禁用 object 标签\n",{"type":173,"tag":242,"props":3896,"children":3897},{"class":244,"line":1204},[3898,3902,3907,3911,3915,3919,3923,3928,3932,3936],{"type":173,"tag":242,"props":3899,"children":3900},{"style":279},[3901],{"type":178,"value":1030},{"type":173,"tag":242,"props":3903,"children":3904},{"style":3555},[3905],{"type":178,"value":3906},"object-src",{"type":173,"tag":242,"props":3908,"children":3909},{"style":279},[3910],{"type":178,"value":282},{"type":173,"tag":242,"props":3912,"children":3913},{"style":352},[3914],{"type":178,"value":1409},{"type":173,"tag":242,"props":3916,"children":3917},{"style":273},[3918],{"type":178,"value":1313},{"type":173,"tag":242,"props":3920,"children":3921},{"style":279},[3922],{"type":178,"value":1775},{"type":173,"tag":242,"props":3924,"children":3925},{"style":285},[3926],{"type":178,"value":3927},"'none'",{"type":173,"tag":242,"props":3929,"children":3930},{"style":279},[3931],{"type":178,"value":1775},{"type":173,"tag":242,"props":3933,"children":3934},{"style":273},[3935],{"type":178,"value":3588},{"type":173,"tag":242,"props":3937,"children":3938},{"style":352},[3939],{"type":178,"value":1044},{"type":173,"tag":242,"props":3941,"children":3942},{"class":244,"line":1225},[3943],{"type":173,"tag":242,"props":3944,"children":3945},{"style":1019},[3946],{"type":178,"value":3947},"  // 只从源地址加载脚本\n",{"type":173,"tag":242,"props":3949,"children":3950},{"class":244,"line":1234},[3951,3955,3960,3964,3968,3972,3976,3980,3984,3988],{"type":173,"tag":242,"props":3952,"children":3953},{"style":279},[3954],{"type":178,"value":1030},{"type":173,"tag":242,"props":3956,"children":3957},{"style":3555},[3958],{"type":178,"value":3959},"script-src",{"type":173,"tag":242,"props":3961,"children":3962},{"style":279},[3963],{"type":178,"value":282},{"type":173,"tag":242,"props":3965,"children":3966},{"style":352},[3967],{"type":178,"value":1409},{"type":173,"tag":242,"props":3969,"children":3970},{"style":273},[3971],{"type":178,"value":1313},{"type":173,"tag":242,"props":3973,"children":3974},{"style":279},[3975],{"type":178,"value":1775},{"type":173,"tag":242,"props":3977,"children":3978},{"style":285},[3979],{"type":178,"value":3579},{"type":173,"tag":242,"props":3981,"children":3982},{"style":279},[3983],{"type":178,"value":1775},{"type":173,"tag":242,"props":3985,"children":3986},{"style":273},[3987],{"type":178,"value":3588},{"type":173,"tag":242,"props":3989,"children":3990},{"style":352},[3991],{"type":178,"value":1044},{"type":173,"tag":242,"props":3993,"children":3994},{"class":244,"line":1255},[3995],{"type":173,"tag":242,"props":3996,"children":3997},{"style":1019},[3998],{"type":178,"value":3999},"  // 禁用内联脚本\n",{"type":173,"tag":242,"props":4001,"children":4002},{"class":244,"line":1264},[4003],{"type":173,"tag":242,"props":4004,"children":4005},{"style":1019},[4006],{"type":178,"value":4007},"  // ？这里没能理解\n",{"type":173,"tag":242,"props":4009,"children":4010},{"class":244,"line":1273},[4011],{"type":173,"tag":242,"props":4012,"children":4013},{"style":1019},[4014],{"type":178,"value":4015},"  // https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Content-Security-Policy/script-src-attr\n",{"type":173,"tag":242,"props":4017,"children":4018},{"class":244,"line":1282},[4019],{"type":173,"tag":242,"props":4020,"children":4021},{"style":1019},[4022],{"type":178,"value":4023},"  // https://w3c.github.io/webappsec-csp/#directive-script-src-attr\n",{"type":173,"tag":242,"props":4025,"children":4026},{"class":244,"line":1343},[4027,4031,4036,4040,4044,4048,4052,4056,4060,4064,4068],{"type":173,"tag":242,"props":4028,"children":4029},{"style":279},[4030],{"type":178,"value":1030},{"type":173,"tag":242,"props":4032,"children":4033},{"style":3555},[4034],{"type":178,"value":4035},"script-src-attr",{"type":173,"tag":242,"props":4037,"children":4038},{"style":279},[4039],{"type":178,"value":282},{"type":173,"tag":242,"props":4041,"children":4042},{"style":352},[4043],{"type":178,"value":1409},{"type":173,"tag":242,"props":4045,"children":4046},{"style":273},[4047],{"type":178,"value":1313},{"type":173,"tag":242,"props":4049,"children":4050},{"style":279},[4051],{"type":178,"value":1775},{"type":173,"tag":242,"props":4053,"children":4054},{"style":285},[4055],{"type":178,"value":3927},{"type":173,"tag":242,"props":4057,"children":4058},{"style":279},[4059],{"type":178,"value":1775},{"type":173,"tag":242,"props":4061,"children":4062},{"style":273},[4063],{"type":178,"value":3588},{"type":173,"tag":242,"props":4065,"children":4066},{"style":352},[4067],{"type":178,"value":567},{"type":173,"tag":242,"props":4069,"children":4070},{"style":273},[4071],{"type":178,"value":4072},"‘\n",{"type":173,"tag":242,"props":4074,"children":4075},{"class":244,"line":1417},[4076],{"type":173,"tag":242,"props":4077,"children":4078},{"style":1019},[4079],{"type":178,"value":4080},"  // 限制样式表加载地址\n",{"type":173,"tag":242,"props":4082,"children":4083},{"class":244,"line":1448},[4084,4088,4093,4097,4101,4105,4109,4113,4117,4121,4125,4129,4133,4137,4142,4147,4151,4155],{"type":173,"tag":242,"props":4085,"children":4086},{"style":279},[4087],{"type":178,"value":1030},{"type":173,"tag":242,"props":4089,"children":4090},{"style":3555},[4091],{"type":178,"value":4092},"style-src",{"type":173,"tag":242,"props":4094,"children":4095},{"style":279},[4096],{"type":178,"value":282},{"type":173,"tag":242,"props":4098,"children":4099},{"style":352},[4100],{"type":178,"value":1409},{"type":173,"tag":242,"props":4102,"children":4103},{"style":273},[4104],{"type":178,"value":1313},{"type":173,"tag":242,"props":4106,"children":4107},{"style":279},[4108],{"type":178,"value":1775},{"type":173,"tag":242,"props":4110,"children":4111},{"style":285},[4112],{"type":178,"value":3579},{"type":173,"tag":242,"props":4114,"children":4115},{"style":279},[4116],{"type":178,"value":1775},{"type":173,"tag":242,"props":4118,"children":4119},{"style":352},[4120],{"type":178,"value":567},{"type":173,"tag":242,"props":4122,"children":4123},{"style":279},[4124],{"type":178,"value":572},{"type":173,"tag":242,"props":4126,"children":4127},{"style":285},[4128],{"type":178,"value":3738},{"type":173,"tag":242,"props":4130,"children":4131},{"style":279},[4132],{"type":178,"value":282},{"type":173,"tag":242,"props":4134,"children":4135},{"style":352},[4136],{"type":178,"value":567},{"type":173,"tag":242,"props":4138,"children":4139},{"style":279},[4140],{"type":178,"value":4141}," \"",{"type":173,"tag":242,"props":4143,"children":4144},{"style":285},[4145],{"type":178,"value":4146},"'unsafe-inline'",{"type":173,"tag":242,"props":4148,"children":4149},{"style":279},[4150],{"type":178,"value":1775},{"type":173,"tag":242,"props":4152,"children":4153},{"style":273},[4154],{"type":178,"value":3588},{"type":173,"tag":242,"props":4156,"children":4157},{"style":352},[4158],{"type":178,"value":1044},{"type":173,"tag":242,"props":4160,"children":4161},{"class":244,"line":1461},[4162],{"type":173,"tag":242,"props":4163,"children":4164},{"style":1019},[4165],{"type":178,"value":4166},"  // 不使用升级协议指令\n",{"type":173,"tag":242,"props":4168,"children":4169},{"class":244,"line":1470},[4170],{"type":173,"tag":242,"props":4171,"children":4172},{"style":1019},[4173],{"type":178,"value":4174},"  // 据 MDN 介绍，该指令适用于需要重写大量不安全的旧版 URL 的网站，\n",{"type":173,"tag":242,"props":4176,"children":4177},{"class":244,"line":1513},[4178],{"type":173,"tag":242,"props":4179,"children":4180},{"style":1019},[4181],{"type":178,"value":4182},"  // 所以默认不开启此指令\n",{"type":173,"tag":242,"props":4184,"children":4185},{"class":244,"line":1522},[4186,4190,4195,4199,4203],{"type":173,"tag":242,"props":4187,"children":4188},{"style":279},[4189],{"type":178,"value":1030},{"type":173,"tag":242,"props":4191,"children":4192},{"style":3555},[4193],{"type":178,"value":4194},"upgrade-insecure-requests",{"type":173,"tag":242,"props":4196,"children":4197},{"style":279},[4198],{"type":178,"value":282},{"type":173,"tag":242,"props":4200,"children":4201},{"style":352},[4202],{"type":178,"value":1409},{"type":173,"tag":242,"props":4204,"children":4205},{"style":273},[4206],{"type":178,"value":4207}," []\n",{"type":173,"tag":242,"props":4209,"children":4210},{"class":244,"line":1557},[4211],{"type":173,"tag":242,"props":4212,"children":4213},{"style":352},[4214],{"type":178,"value":1519},{"type":173,"tag":174,"props":4216,"children":4217},{},[4218,4220,4226,4228,4234],{"type":178,"value":4219},"最后，我们看兼容性。.. Caniuse 网站只提供了 ",{"type":173,"tag":238,"props":4221,"children":4223},{"className":4222},[],[4224],{"type":178,"value":4225},"CSP 1.0",{"type":178,"value":4227}," 的兼容性，我没有找到最新版本规范（",{"type":173,"tag":238,"props":4229,"children":4231},{"className":4230},[],[4232],{"type":178,"value":4233},"CSP 3.0",{"type":178,"value":4235},"）的兼容性数据 😝。",{"type":173,"tag":174,"props":4237,"children":4238},{},[4239],{"type":173,"tag":902,"props":4240,"children":4243},{"alt":4241,"src":4242},"CSP 兼容性","https://mgear-image.oss-cn-shanghai.aliyuncs.com/image/other/20200815220758.png",[],{"type":173,"tag":442,"props":4245,"children":4247},{"id":4246},"移除下载文件后的打开按钮",[4248],{"type":178,"value":4249},"移除下载文件后的“打开”按钮",{"type":173,"tag":231,"props":4251,"children":4253},{"code":4252,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('X-Download-Options', 'noopen')\n",[4254],{"type":173,"tag":238,"props":4255,"children":4256},{"__ignoreMap":166},[4257],{"type":173,"tag":242,"props":4258,"children":4259},{"class":244,"line":245},[4260,4264,4268,4272,4276,4280,4285,4289,4293,4297,4302,4306],{"type":173,"tag":242,"props":4261,"children":4262},{"style":273},[4263],{"type":178,"value":462},{"type":173,"tag":242,"props":4265,"children":4266},{"style":352},[4267],{"type":178,"value":355},{"type":173,"tag":242,"props":4269,"children":4270},{"style":267},[4271],{"type":178,"value":545},{"type":173,"tag":242,"props":4273,"children":4274},{"style":273},[4275],{"type":178,"value":276},{"type":173,"tag":242,"props":4277,"children":4278},{"style":279},[4279],{"type":178,"value":282},{"type":173,"tag":242,"props":4281,"children":4282},{"style":285},[4283],{"type":178,"value":4284},"X-Download-Options",{"type":173,"tag":242,"props":4286,"children":4287},{"style":279},[4288],{"type":178,"value":282},{"type":173,"tag":242,"props":4290,"children":4291},{"style":352},[4292],{"type":178,"value":567},{"type":173,"tag":242,"props":4294,"children":4295},{"style":279},[4296],{"type":178,"value":572},{"type":173,"tag":242,"props":4298,"children":4299},{"style":285},[4300],{"type":178,"value":4301},"noopen",{"type":173,"tag":242,"props":4303,"children":4304},{"style":279},[4305],{"type":178,"value":282},{"type":173,"tag":242,"props":4307,"children":4308},{"style":273},[4309],{"type":178,"value":297},{"type":173,"tag":174,"props":4311,"children":4312},{},[4313,4315,4320],{"type":178,"value":4314},"在下载文件时，",{"type":173,"tag":238,"props":4316,"children":4318},{"className":4317},[],[4319],{"type":178,"value":4284},{"type":178,"value":4321}," Header 可以指定浏览器移除下载界面中的“打开”按钮。我猜测是因为通过这种方式的“打开”，某些浏览器会将页面上下文注入文件中，使页面容易收到攻击。有了解的朋友欢迎留言。",{"type":173,"tag":442,"props":4323,"children":4325},{"id":4324},"开启-dns-预取",[4326],{"type":178,"value":4327},"开启 DNS 预取",{"type":173,"tag":174,"props":4329,"children":4330},{},[4331,4333,4339],{"type":178,"value":4332},"通过设置 ",{"type":173,"tag":238,"props":4334,"children":4336},{"className":4335},[],[4337],{"type":178,"value":4338},"X-DNS-Prefetch-Control",{"type":178,"value":4340}," 可以打开（或关闭）浏览器的 DNS 预请求功能。据 MDN 介绍，打开后，在图片数量较多的页面，能带来至少 5% 的加载速度提升。",{"type":173,"tag":174,"props":4342,"children":4343},{},[4344,4346,4353],{"type":178,"value":4345},"至于 DNS Prefetch 具体是如何增强浏览器安全的。.. 我暂时没懂。我在 Issue 中问了 Helmet 的作者，他提供了关于 DNS Prefetch 安全性问题的额外的资料。请看这个 ",{"type":173,"tag":185,"props":4347,"children":4350},{"href":4348,"rel":4349},"https://github.com/helmetjs/helmet/issues/111",[762],[4351],{"type":178,"value":4352},"Issue",{"type":178,"value":752},{"type":173,"tag":231,"props":4355,"children":4357},{"code":4356,"language":234,"meta":166,"className":235,"style":166},"response.setHeader('X-DNS-Prefetch-Control', 'on')\n",[4358],{"type":173,"tag":238,"props":4359,"children":4360},{"__ignoreMap":166},[4361],{"type":173,"tag":242,"props":4362,"children":4363},{"class":244,"line":245},[4364,4368,4372,4376,4380,4384,4388,4392,4396,4400,4405,4409],{"type":173,"tag":242,"props":4365,"children":4366},{"style":273},[4367],{"type":178,"value":462},{"type":173,"tag":242,"props":4369,"children":4370},{"style":352},[4371],{"type":178,"value":355},{"type":173,"tag":242,"props":4373,"children":4374},{"style":267},[4375],{"type":178,"value":545},{"type":173,"tag":242,"props":4377,"children":4378},{"style":273},[4379],{"type":178,"value":276},{"type":173,"tag":242,"props":4381,"children":4382},{"style":279},[4383],{"type":178,"value":282},{"type":173,"tag":242,"props":4385,"children":4386},{"style":285},[4387],{"type":178,"value":4338},{"type":173,"tag":242,"props":4389,"children":4390},{"style":279},[4391],{"type":178,"value":282},{"type":173,"tag":242,"props":4393,"children":4394},{"style":352},[4395],{"type":178,"value":567},{"type":173,"tag":242,"props":4397,"children":4398},{"style":279},[4399],{"type":178,"value":572},{"type":173,"tag":242,"props":4401,"children":4402},{"style":285},[4403],{"type":178,"value":4404},"on",{"type":173,"tag":242,"props":4406,"children":4407},{"style":279},[4408],{"type":178,"value":282},{"type":173,"tag":242,"props":4410,"children":4411},{"style":273},[4412],{"type":178,"value":297},{"type":173,"tag":411,"props":4414,"children":4416},{"id":4415},"阅读更多",[4417],{"type":178,"value":4415},{"type":173,"tag":174,"props":4419,"children":4420},{},[4421],{"type":178,"value":4422},"前端安全是一个非常宏大的话题。Hemlet 给你的 Express 应用带来的改进只是其中非常小的一部分内容。比如，它没有提及安全 Cookie 相关内容。",{"type":173,"tag":3468,"props":4424,"children":4425},{},[4426],{"type":173,"tag":2733,"props":4427,"children":4428},{},[4429,4431],{"type":178,"value":4430},"设置安全 Cookie：通过 Set-Cookie 可以指定浏览器设置安全 Cookie，该 Cookie 只能通过 HTTPS 发送至服务器；带 HttpOnly 的 Cookie 将不能被脚本访问；SameSite=Lax 则可以指定某 Cookie 不随跨域请求一起发送。",{"type":173,"tag":181,"props":4432,"children":4433},{},[4434],{"type":173,"tag":185,"props":4435,"children":4439},{"href":4436,"ariaDescribedBy":4437,"dataFootnoteRef":166,"id":4438},"#user-content-fn-secure-cookie",[189],"user-content-fnref-secure-cookie",[4440],{"type":178,"value":4441},"13",{"type":173,"tag":174,"props":4443,"children":4444},{},[4445,4447,4454,4456,4463],{"type":178,"value":4446},"如果你想了解更多关于 HTTP Secure Header 的详细内容，可以参考 ",{"type":173,"tag":185,"props":4448,"children":4451},{"href":4449,"rel":4450},"https://owasp.org/www-project-secure-headers/",[762],[4452],{"type":178,"value":4453},"OWASP Secure Headers Project",{"type":178,"value":4455},"。当然，MDN 上提供了关于前端安全问题更广泛的思路，有时间阔以深入学习一下：",{"type":173,"tag":185,"props":4457,"children":4460},{"href":4458,"rel":4459},"https://infosec.mozilla.org/guidelines/web_security",[762],[4461],{"type":178,"value":4462},"Web Security",{"type":178,"value":4464},"。以下是一些额外的可供探索的页面：",{"type":173,"tag":3468,"props":4466,"children":4467},{},[4468,4478,4488],{"type":173,"tag":2733,"props":4469,"children":4470},{},[4471],{"type":173,"tag":185,"props":4472,"children":4475},{"href":4473,"rel":4474},"https://www.zhihu.com/question/21979782",[762],[4476],{"type":178,"value":4477},"Content Security Policy (CSP) 是什么？",{"type":173,"tag":2733,"props":4479,"children":4480},{},[4481],{"type":173,"tag":185,"props":4482,"children":4485},{"href":4483,"rel":4484},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Access_control_CORS",[762],[4486],{"type":178,"value":4487},"CORS@MDN",{"type":173,"tag":2733,"props":4489,"children":4490},{},[4491],{"type":173,"tag":185,"props":4492,"children":4495},{"href":4493,"rel":4494},"http://www.owasp.org.cn/owasp-project/OWASPTop102017RC2.pdf/view",[762],[4496],{"type":178,"value":4497},"OWASP Top 10 2017（RC2）",{"type":173,"tag":4499,"props":4500,"children":4503},"section",{"className":4501,"dataFootnotes":166},[4502],"footnotes",[4504,4511],{"type":173,"tag":411,"props":4505,"children":4508},{"className":4506,"id":189},[4507],"sr-only",[4509],{"type":178,"value":4510},"Footnotes",{"type":173,"tag":2729,"props":4512,"children":4513},{},[4514,4536,4555,4574,4591,4610,4629,4642,4660,4679,4698,4717,4736],{"type":173,"tag":2733,"props":4515,"children":4517},{"id":4516},"user-content-fn-helmet",[4518,4525,4527],{"type":173,"tag":185,"props":4519,"children":4522},{"href":4520,"rel":4521},"https://helmetjs.github.io/",[762],[4523],{"type":178,"value":4524},"HELMET",{"type":178,"value":4526}," ",{"type":173,"tag":185,"props":4528,"children":4533},{"href":4529,"ariaLabel":4530,"className":4531,"dataFootnoteBackref":166},"#user-content-fnref-helmet","Back to reference 1",[4532],"data-footnote-backref",[4534],{"type":178,"value":4535},"↩",{"type":173,"tag":2733,"props":4537,"children":4539},{"id":4538},"user-content-fn-dns-rebinding-1",[4540,4547,4548],{"type":173,"tag":185,"props":4541,"children":4544},{"href":4542,"rel":4543},"https://xlab.tencent.com/cn/2018/10/23/weixin-cheater-risks/?from=timeline&isappinstalled=0",[762],[4545],{"type":178,"value":4546},"来自微信外挂的安全风险",{"type":178,"value":4526},{"type":173,"tag":185,"props":4549,"children":4553},{"href":4550,"ariaLabel":4551,"className":4552,"dataFootnoteBackref":166},"#user-content-fnref-dns-rebinding-1","Back to reference 2",[4532],[4554],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4556,"children":4558},{"id":4557},"user-content-fn-dns-rebinding-2",[4559,4566,4567],{"type":173,"tag":185,"props":4560,"children":4563},{"href":4561,"rel":4562},"https://github.com/helmetjs/helmet/issues/182",[762],[4564],{"type":178,"value":4565},"GitHub Issue",{"type":178,"value":4526},{"type":173,"tag":185,"props":4568,"children":4572},{"href":4569,"ariaLabel":4570,"className":4571,"dataFootnoteBackref":166},"#user-content-fnref-dns-rebinding-2","Back to reference 3",[4532],[4573],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4575,"children":4577},{"id":4576},"user-content-fn-shp",[4578,4583,4584],{"type":173,"tag":185,"props":4579,"children":4581},{"href":4449,"rel":4580},[762],[4582],{"type":178,"value":4453},{"type":178,"value":4526},{"type":173,"tag":185,"props":4585,"children":4589},{"href":4586,"ariaLabel":4587,"className":4588,"dataFootnoteBackref":166},"#user-content-fnref-shp","Back to reference 4",[4532],[4590],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4592,"children":4594},{"id":4593},"user-content-fn-xss-auditor",[4595,4602,4603],{"type":173,"tag":185,"props":4596,"children":4599},{"href":4597,"rel":4598},"https://www.chromestatus.com/feature/5021976655560704",[762],[4600],{"type":178,"value":4601},"XSS Auditor (removed)",{"type":178,"value":4526},{"type":173,"tag":185,"props":4604,"children":4608},{"href":4605,"ariaLabel":4606,"className":4607,"dataFootnoteBackref":166},"#user-content-fnref-xss-auditor","Back to reference 5",[4532],[4609],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4611,"children":4613},{"id":4612},"user-content-fn-delete-xss-auditor",[4614,4621,4622],{"type":173,"tag":185,"props":4615,"children":4618},{"href":4616,"rel":4617},"https://zhuanlan.zhihu.com/p/74288648",[762],[4619],{"type":178,"value":4620},"Google 将删除 Chrome 内置的 XSS 保护",{"type":178,"value":4526},{"type":173,"tag":185,"props":4623,"children":4627},{"href":4624,"ariaLabel":4625,"className":4626,"dataFootnoteBackref":166},"#user-content-fnref-delete-xss-auditor","Back to reference 6",[4532],[4628],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4630,"children":4632},{"id":4631},"user-content-fn-referer",[4633,4635],{"type":178,"value":4634},"Referer 是 Referrer 的错误拼写，但为了后向兼容，便一直保留下来了。 ",{"type":173,"tag":185,"props":4636,"children":4640},{"href":4637,"ariaLabel":4638,"className":4639,"dataFootnoteBackref":166},"#user-content-fnref-referer","Back to reference 7",[4532],[4641],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4643,"children":4645},{"id":4644},"user-content-fn-timeend",[4646,4652,4653],{"type":173,"tag":185,"props":4647,"children":4650},{"href":4648,"rel":4649},"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/Strict-Transport-Security",[762],[4651],{"type":178,"value":2540},{"type":178,"value":4526},{"type":173,"tag":185,"props":4654,"children":4658},{"href":4655,"ariaLabel":4656,"className":4657,"dataFootnoteBackref":166},"#user-content-fnref-timeend","Back to reference 8",[4532],[4659],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4661,"children":4663},{"id":4662},"user-content-fn-chrome-ct",[4664,4671,4672],{"type":173,"tag":185,"props":4665,"children":4668},{"href":4666,"rel":4667},"https://blog.myssl.com/chrome-certificates-transparency-ct-policy/",[762],[4669],{"type":178,"value":4670},"Chrome 证书透明度（CT）相关政策",{"type":178,"value":4526},{"type":173,"tag":185,"props":4673,"children":4677},{"href":4674,"ariaLabel":4675,"className":4676,"dataFootnoteBackref":166},"#user-content-fnref-chrome-ct","Back to reference 9",[4532],[4678],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4680,"children":4682},{"id":4681},"user-content-fn-ct",[4683,4690,4691],{"type":173,"tag":185,"props":4684,"children":4687},{"href":4685,"rel":4686},"https://mp.weixin.qq.com/s?src=11&timestamp=1597650971&ver=2527&signature=X6agCz5iwHLLw3yQchPE0dhzMC9KfLtQrqUv2DlIochk2oFEfw61w*l1QRf0GXSbzgyve2c0t0YGjDw*n-i6ubwQ9*UgxYglhx5BFEtJSuaEPm99ak-DowM3*0Lx1eNY&new=1",[762],[4688],{"type":178,"value":4689},"HTTPS 证书被伪造了怎么办@ConardLi",{"type":178,"value":4526},{"type":173,"tag":185,"props":4692,"children":4696},{"href":4693,"ariaLabel":4694,"className":4695,"dataFootnoteBackref":166},"#user-content-fnref-ct","Back to reference 10",[4532],[4697],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4699,"children":4701},{"id":4700},"user-content-fn-pdf-reader",[4702,4709,4710],{"type":173,"tag":185,"props":4703,"children":4706},{"href":4704,"rel":4705},"https://www.adobe.com/devnet-docs/acrobatetk/tools/AppSec/xdomain.html",[762],[4707],{"type":178,"value":4708},"Cross Domain Configuration",{"type":178,"value":4526},{"type":173,"tag":185,"props":4711,"children":4715},{"href":4712,"ariaLabel":4713,"className":4714,"dataFootnoteBackref":166},"#user-content-fnref-pdf-reader","Back to reference 11",[4532],[4716],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4718,"children":4720},{"id":4719},"user-content-fn-csp-standard",[4721,4728,4729],{"type":173,"tag":185,"props":4722,"children":4725},{"href":4723,"rel":4724},"https://www.w3.org/TR/CSP/",[762],[4726],{"type":178,"value":4727},"Content Security Policy Level 3",{"type":178,"value":4526},{"type":173,"tag":185,"props":4730,"children":4734},{"href":4731,"ariaLabel":4732,"className":4733,"dataFootnoteBackref":166},"#user-content-fnref-csp-standard","Back to reference 12",[4532],[4735],{"type":178,"value":4535},{"type":173,"tag":2733,"props":4737,"children":4739},{"id":4738},"user-content-fn-secure-cookie",[4740,4747,4748],{"type":173,"tag":185,"props":4741,"children":4744},{"href":4742,"rel":4743},"https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Headers/Set-Cookie",[762],[4745],{"type":178,"value":4746},"Secure-Cookie",{"type":178,"value":4526},{"type":173,"tag":185,"props":4749,"children":4753},{"href":4750,"ariaLabel":4751,"className":4752,"dataFootnoteBackref":166},"#user-content-fnref-secure-cookie","Back to reference 13",[4532],[4754],{"type":178,"value":4535},{"type":173,"tag":4756,"props":4757,"children":4758},"style",{},[4759],{"type":178,"value":4760},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":166,"searchDepth":300,"depth":300,"links":4762},[4763,4776,4777],{"id":413,"depth":300,"text":416,"children":4764},[4765,4766,4767,4768,4769,4770,4771,4772,4773,4774,4775],{"id":444,"depth":309,"text":447},{"id":519,"depth":309,"text":522},{"id":609,"depth":309,"text":612},{"id":777,"depth":309,"text":777},{"id":935,"depth":309,"text":938},{"id":1946,"depth":309,"text":1949},{"id":2584,"depth":309,"text":2584},{"id":2693,"depth":309,"text":2696},{"id":3324,"depth":309,"text":3327},{"id":4246,"depth":309,"text":4249},{"id":4324,"depth":309,"text":4327},{"id":4415,"depth":300,"text":4415},{"id":189,"depth":300,"text":4510},"markdown","content:_achieved:2020-08:helmet-and-security.md","content","_achieved/2020-08/helmet-and-security.md","_achieved/2020-08/helmet-and-security","md",[4785,4789],{"_path":4786,"title":4787,"description":4788},"/_achieved/2020-06/zebra-puzzle","🎃 斑马难题","好了，不卖关子了，我说的就是“斑马难题”。网传斑马难题是爱因斯坦设下的一道谜题，世界上只有 2% 的人能解。不过，对此我深表怀疑... 我们直接看看题目吧，如果实在毫无头绪的话，可以直接跳到文末视频（BiliBili 干杯~ (￣ ▽ ￣)*）。",{"_path":4790,"title":4791,"description":166},"/_achieved/2020-10/noname","无题",1755216249805]