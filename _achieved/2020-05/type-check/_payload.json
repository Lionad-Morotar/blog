[{"data":1,"prerenderedAt":2795},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-05/type-check":158,"/_achieved/2020-05/type-check-surround":2788},[4,35,89,95,122,128,152],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83,86],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🌪️ tailwind4 如何兼容预处理器","/articles/tailwind4-with-sass",{"title":45,"_path":46},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":48,"_path":49},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":51,"_path":52},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":54,"_path":55},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":57,"_path":58},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":60,"_path":61},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":63,"_path":64},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":66,"_path":67},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":69,"_path":70},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":72,"_path":73},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":75,"_path":76},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":78,"_path":79},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":81,"_path":82},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":84,"_path":85},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":87,"_path":88},"📝 技术博客归档","/articles/archive",{"title":90,"_path":91,"children":92},"读书笔记 / Notes","/books",[93],{"title":94,"_path":91},"📕 读书笔记",{"title":96,"_path":97,"children":98},"吉他剧场 / Music","/music",[99,101,104,107,110,113,116,119],{"title":100,"_path":97},"🎸 FingerStyle！",{"title":102,"_path":103},"🌬️ 等待的风","/music/wind",{"title":105,"_path":106},"💕 约定的海洋","/music/ocean",{"title":108,"_path":109},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":111,"_path":112},"🌏 残酷天使的行动纲领","/music/eva",{"title":114,"_path":115},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":117,"_path":118},"🍷 Wu Wei","/music/wu-wei",{"title":120,"_path":121},"🌅 无题","/music/untitled",{"title":123,"_path":124,"children":125},"知识地图 / Maps","/maps",[126],{"title":127,"_path":124},"🏁 知识地图",{"title":129,"_path":130,"children":131},"造物 / Make","/tools",[132,134,137,140,143,146,149],{"title":133,"_path":130},"🧰 工具收集",{"title":135,"_path":136},"📕 博客","/tools/blog",{"title":138,"_path":139},"🥥 Coconut","/tools/coconut",{"title":141,"_path":142},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":144,"_path":145},"🌐 AnySort","/tools/anysort",{"title":147,"_path":148},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":150,"_path":151},"👓 Crapto","/tools/crypto-inline",{"title":153,"_path":154,"children":155},"我 / About","/hire",[156],{"title":157,"_path":154},"📬 技术简历",{"_path":159,"_dir":160,"_draft":161,"_partial":162,"_locale":163,"title":164,"description":163,"body":165,"_type":2782,"_id":2783,"_source":2784,"_file":2785,"_stem":2786,"_extension":2787},"/_achieved/2020-05/type-check","2020-05",false,true,"","🎫 常用类型判断方法的优势及缺陷",{"type":166,"children":167,"toc":2765},"root",[168,176,182,202,207,211,216,221,226,295,300,443,448,461,466,480,493,498,504,509,537,542,565,570,574,579,918,923,931,1037,1042,1071,1076,1081,1303,1308,1335,1340,1345,1350,1363,1368,1373,1583,1588,1609,1613,1618,1911,1916,1921,1926,2054,2059,2305,2310,2455,2460,2465,2573,2578,2583,2643,2651,2656,2661,2666,2671,2689,2694,2699,2704,2759],{"type":169,"tag":170,"props":171,"children":173},"element","h2",{"id":172},"常用判断方法",[174],{"type":175,"value":172},"text",{"type":169,"tag":177,"props":178,"children":179},"p",{},[180],{"type":175,"value":181},"类型判断，在 JavaScript 中是一个很经典的问题了。围绕类型判断，有几种常见的解决方法，下是最常用的三种：",{"type":169,"tag":183,"props":184,"children":185},"ul",{},[186,192,197],{"type":169,"tag":187,"props":188,"children":189},"li",{},[190],{"type":175,"value":191},"typeof",{"type":169,"tag":187,"props":193,"children":194},{},[195],{"type":175,"value":196},"instanceof",{"type":169,"tag":187,"props":198,"children":199},{},[200],{"type":175,"value":201},"Object.prototype.toString.call",{"type":169,"tag":177,"props":203,"children":204},{},[205],{"type":175,"value":206},"我将在此文中根据这几种方法在 ECMAScript 规范下的描述及我们开发时的实际情况，聊聊这几种方法的优劣势所在。",{"type":169,"tag":170,"props":208,"children":209},{"id":191},[210],{"type":175,"value":191},{"type":169,"tag":177,"props":212,"children":213},{},[214],{"type":175,"value":215},"当我还是一个 JS 萌新的时候，我就爱上了 typeof 运算符，因为它的作用正如其名，非常好理解。\n利用 typeof 我们可以轻松判断常见的基础类型，如 Number、String、Boolean 等。",{"type":169,"tag":177,"props":217,"children":218},{},[219],{"type":175,"value":220},"ECMAScript 文档中有对 typeof 这样描述：",{"type":169,"tag":177,"props":222,"children":223},{},[224],{"type":175,"value":225},"$\\it{UnaryExpression} \\quad: \\quad \\bf{typeof} \\quad \\it{UnaryExpression}$",{"type":169,"tag":227,"props":228,"children":229},"ol",{},[230,235,270,281,290],{"type":169,"tag":187,"props":231,"children":232},{},[233],{"type":175,"value":234},"Let val be the result of evaluating UnaryExpression.",{"type":169,"tag":187,"props":236,"children":237},{},[238,240,246,248],{"type":175,"value":239},"If ",{"type":169,"tag":241,"props":242,"children":243},"em",{},[244],{"type":175,"value":245},"Type(val)",{"type":175,"value":247}," is Reference, then\n",{"type":169,"tag":183,"props":249,"children":250},{},[251],{"type":169,"tag":187,"props":252,"children":253},{},[254,255,260,262,268],{"type":175,"value":239},{"type":169,"tag":241,"props":256,"children":257},{},[258],{"type":175,"value":259},"IsUnresolvableReference(val)",{"type":175,"value":261}," is true, return ",{"type":169,"tag":263,"props":264,"children":265},"strong",{},[266],{"type":175,"value":267},"\"undefined\"",{"type":175,"value":269},".",{"type":169,"tag":187,"props":271,"children":272},{},[273,275,280],{"type":175,"value":274},"Let val be ",{"type":169,"tag":241,"props":276,"children":277},{},[278],{"type":175,"value":279},"GetValue(val)",{"type":175,"value":269},{"type":169,"tag":187,"props":282,"children":283},{},[284,289],{"type":169,"tag":241,"props":285,"children":286},{},[287],{"type":175,"value":288},"ReturnIfAbrupt(val)",{"type":175,"value":269},{"type":169,"tag":187,"props":291,"children":292},{},[293],{"type":175,"value":294},"Return a String according to Table Below.",{"type":169,"tag":177,"props":296,"children":297},{},[298],{"type":175,"value":299},"简单来说，就是先判断是不是引用未知，是则返回 'undefined'，不然就根据下表找值。",{"type":169,"tag":301,"props":302,"children":303},"table",{},[304,324],{"type":169,"tag":305,"props":306,"children":307},"thead",{},[308],{"type":169,"tag":309,"props":310,"children":311},"tr",{},[312,319],{"type":169,"tag":313,"props":314,"children":316},"th",{"align":315},"center",[317],{"type":175,"value":318},"类型",{"type":169,"tag":313,"props":320,"children":321},{"align":315},[322],{"type":175,"value":323},"返回",{"type":169,"tag":325,"props":326,"children":327},"tbody",{},[328,341,354,367,380,393,405,417,430],{"type":169,"tag":309,"props":329,"children":330},{},[331,337],{"type":169,"tag":332,"props":333,"children":334},"td",{"align":315},[335],{"type":175,"value":336},"Undefined",{"type":169,"tag":332,"props":338,"children":339},{"align":315},[340],{"type":175,"value":267},{"type":169,"tag":309,"props":342,"children":343},{},[344,349],{"type":169,"tag":332,"props":345,"children":346},{"align":315},[347],{"type":175,"value":348},"Null",{"type":169,"tag":332,"props":350,"children":351},{"align":315},[352],{"type":175,"value":353},"\"object\"",{"type":169,"tag":309,"props":355,"children":356},{},[357,362],{"type":169,"tag":332,"props":358,"children":359},{"align":315},[360],{"type":175,"value":361},"Boolean",{"type":169,"tag":332,"props":363,"children":364},{"align":315},[365],{"type":175,"value":366},"\"boolean\"",{"type":169,"tag":309,"props":368,"children":369},{},[370,375],{"type":169,"tag":332,"props":371,"children":372},{"align":315},[373],{"type":175,"value":374},"Number",{"type":169,"tag":332,"props":376,"children":377},{"align":315},[378],{"type":175,"value":379},"\"number\"",{"type":169,"tag":309,"props":381,"children":382},{},[383,388],{"type":169,"tag":332,"props":384,"children":385},{"align":315},[386],{"type":175,"value":387},"String",{"type":169,"tag":332,"props":389,"children":390},{"align":315},[391],{"type":175,"value":392},"\"string\"",{"type":169,"tag":309,"props":394,"children":395},{},[396,401],{"type":169,"tag":332,"props":397,"children":398},{"align":315},[399],{"type":175,"value":400},"Object (ordinary and does not implement [[Call]])",{"type":169,"tag":332,"props":402,"children":403},{"align":315},[404],{"type":175,"value":353},{"type":169,"tag":309,"props":406,"children":407},{},[408,413],{"type":169,"tag":332,"props":409,"children":410},{"align":315},[411],{"type":175,"value":412},"Object (standard exotic and does not implement [[Call]])",{"type":169,"tag":332,"props":414,"children":415},{"align":315},[416],{"type":175,"value":353},{"type":169,"tag":309,"props":418,"children":419},{},[420,425],{"type":169,"tag":332,"props":421,"children":422},{"align":315},[423],{"type":175,"value":424},"Object (implements [[Call]])",{"type":169,"tag":332,"props":426,"children":427},{"align":315},[428],{"type":175,"value":429},"\"function\"",{"type":169,"tag":309,"props":431,"children":432},{},[433,438],{"type":169,"tag":332,"props":434,"children":435},{"align":315},[436],{"type":175,"value":437},"Object (non-standard exotic and does not implement [[Call]])",{"type":169,"tag":332,"props":439,"children":440},{"align":315},[441],{"type":175,"value":442},"Implementation-defined. Must not be \"undefined\", \"boolean\", \"function\", \"number\", \"symbol\", or \"string\".",{"type":169,"tag":177,"props":444,"children":445},{},[446],{"type":175,"value":447},"这里我们详细说说两点：",{"type":169,"tag":227,"props":449,"children":450},{},[451,456],{"type":169,"tag":187,"props":452,"children":453},{},[454],{"type":175,"value":455},"判断内置对象",{"type":169,"tag":187,"props":457,"children":458},{},[459],{"type":175,"value":460},"typeof null === 'object'",{"type":169,"tag":462,"props":463,"children":464},"h3",{"id":455},[465],{"type":175,"value":455},{"type":169,"tag":177,"props":467,"children":468},{},[469,471,478],{"type":175,"value":470},"Function 作为内置对象，为什么 ",{"type":169,"tag":472,"props":473,"children":475},"code",{"className":474},[],[476],{"type":175,"value":477},"typeof (function a(){})",{"type":175,"value":479}," 的值不为“object”呢？",{"type":169,"tag":177,"props":481,"children":482},{},[483,485,491],{"type":175,"value":484},"其实上面那张表有相应线索，倒数第二条，这是一个特殊判定，“如果对象实现了内部方法[[Call]]” 或 “是 ",{"type":169,"tag":472,"props":486,"children":488},{"className":487},[],[489],{"type":175,"value":490},"Callable",{"type":175,"value":492}," 对象”，那么返回值为“function”。",{"type":169,"tag":177,"props":494,"children":495},{},[496],{"type":175,"value":497},"用 typeof 判断对象太麻烦了，一点儿也不实在。一般情况下，我们会用等下介绍的 Object.prototype.toString 去判断内置对象。",{"type":169,"tag":462,"props":499,"children":501},{"id":500},"typeof-null",[502],{"type":175,"value":503},"typeof null",{"type":169,"tag":177,"props":505,"children":506},{},[507],{"type":175,"value":508},"null 是用来标记“期待指向”的，不是 Object 类型，所以 typeof null === 'object' 是一个程序错误。\n这要追溯到第一版 JavaScript。这版 JS 的实现中，值是存储在 32 位单位中，其中端序最小的 3 位，用来表示值的类型，如下：",{"type":169,"tag":183,"props":510,"children":511},{},[512,517,522,527,532],{"type":169,"tag":187,"props":513,"children":514},{},[515],{"type":175,"value":516},"000：Object",{"type":169,"tag":187,"props":518,"children":519},{},[520],{"type":175,"value":521},"001：Int",{"type":169,"tag":187,"props":523,"children":524},{},[525],{"type":175,"value":526},"010：Double",{"type":169,"tag":187,"props":528,"children":529},{},[530],{"type":175,"value":531},"100：String",{"type":169,"tag":187,"props":533,"children":534},{},[535],{"type":175,"value":536},"110：Boolean",{"type":169,"tag":177,"props":538,"children":539},{},[540],{"type":175,"value":541},"此外，还有两种特殊值：",{"type":169,"tag":183,"props":543,"children":544},{},[545,555],{"type":169,"tag":187,"props":546,"children":547},{},[548,553],{"type":169,"tag":263,"props":549,"children":550},{},[551],{"type":175,"value":552},"undefined",{"type":175,"value":554}," (JSVAL_VOID): $-2^{32}$",{"type":169,"tag":187,"props":556,"children":557},{},[558,563],{"type":169,"tag":263,"props":559,"children":560},{},[561],{"type":175,"value":562},"null",{"type":175,"value":564}," (JSVAL_NULL): 用全为 0 的机器码表示的 NULL 指针（或，一个指向 0 的 Object 类型的值）",{"type":169,"tag":177,"props":566,"children":567},{},[568],{"type":175,"value":569},"也就是说，对程序而言，typeof null 判断类型是根据前三位 0 取得的“object”。这是一个历史遗留问题，有人提出过修复方案，但是怕影响历史遗留代码，修复便被否决了。",{"type":169,"tag":170,"props":571,"children":572},{"id":196},[573],{"type":175,"value":196},{"type":169,"tag":177,"props":575,"children":576},{},[577],{"type":175,"value":578},"内置 instanceof 运算符是用来检测构造函数的 prototype 属性是否存在于某个实例对象的原型链。\n用代码解释要更直观一些：",{"type":169,"tag":580,"props":581,"children":585},"pre",{"className":582,"code":583,"language":584,"meta":163,"style":163},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function Car(make, model, year) {\n  this.make = make\n  this.model = model\n  this.year = year\n}\nconst auto = new Car('Honda', 'Accord', 1998)\n\n// true\nconsole.log((auto.__proto__ === Car.prototype) === auto instanceof Car)\n","js",[586],{"type":169,"tag":472,"props":587,"children":588},{"__ignoreMap":163},[589,648,678,704,730,739,820,829,839],{"type":169,"tag":590,"props":591,"children":594},"span",{"class":592,"line":593},"line",1,[595,601,607,613,619,624,629,633,638,643],{"type":169,"tag":590,"props":596,"children":598},{"style":597},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[599],{"type":175,"value":600},"function",{"type":169,"tag":590,"props":602,"children":604},{"style":603},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[605],{"type":175,"value":606}," Car",{"type":169,"tag":590,"props":608,"children":610},{"style":609},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[611],{"type":175,"value":612},"(",{"type":169,"tag":590,"props":614,"children":616},{"style":615},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[617],{"type":175,"value":618},"make",{"type":169,"tag":590,"props":620,"children":621},{"style":609},[622],{"type":175,"value":623},",",{"type":169,"tag":590,"props":625,"children":626},{"style":615},[627],{"type":175,"value":628}," model",{"type":169,"tag":590,"props":630,"children":631},{"style":609},[632],{"type":175,"value":623},{"type":169,"tag":590,"props":634,"children":635},{"style":615},[636],{"type":175,"value":637}," year",{"type":169,"tag":590,"props":639,"children":640},{"style":609},[641],{"type":175,"value":642},")",{"type":169,"tag":590,"props":644,"children":645},{"style":609},[646],{"type":175,"value":647}," {\n",{"type":169,"tag":590,"props":649,"children":651},{"class":592,"line":650},2,[652,658,662,667,673],{"type":169,"tag":590,"props":653,"children":655},{"style":654},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[656],{"type":175,"value":657},"  this",{"type":169,"tag":590,"props":659,"children":660},{"style":609},[661],{"type":175,"value":269},{"type":169,"tag":590,"props":663,"children":665},{"style":664},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[666],{"type":175,"value":618},{"type":169,"tag":590,"props":668,"children":670},{"style":669},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[671],{"type":175,"value":672}," =",{"type":169,"tag":590,"props":674,"children":675},{"style":664},[676],{"type":175,"value":677}," make\n",{"type":169,"tag":590,"props":679,"children":681},{"class":592,"line":680},3,[682,686,690,695,699],{"type":169,"tag":590,"props":683,"children":684},{"style":654},[685],{"type":175,"value":657},{"type":169,"tag":590,"props":687,"children":688},{"style":609},[689],{"type":175,"value":269},{"type":169,"tag":590,"props":691,"children":692},{"style":664},[693],{"type":175,"value":694},"model",{"type":169,"tag":590,"props":696,"children":697},{"style":669},[698],{"type":175,"value":672},{"type":169,"tag":590,"props":700,"children":701},{"style":664},[702],{"type":175,"value":703}," model\n",{"type":169,"tag":590,"props":705,"children":707},{"class":592,"line":706},4,[708,712,716,721,725],{"type":169,"tag":590,"props":709,"children":710},{"style":654},[711],{"type":175,"value":657},{"type":169,"tag":590,"props":713,"children":714},{"style":609},[715],{"type":175,"value":269},{"type":169,"tag":590,"props":717,"children":718},{"style":664},[719],{"type":175,"value":720},"year",{"type":169,"tag":590,"props":722,"children":723},{"style":669},[724],{"type":175,"value":672},{"type":169,"tag":590,"props":726,"children":727},{"style":664},[728],{"type":175,"value":729}," year\n",{"type":169,"tag":590,"props":731,"children":733},{"class":592,"line":732},5,[734],{"type":169,"tag":590,"props":735,"children":736},{"style":609},[737],{"type":175,"value":738},"}\n",{"type":169,"tag":590,"props":740,"children":742},{"class":592,"line":741},6,[743,748,754,758,763,767,771,777,783,787,791,796,801,805,809,815],{"type":169,"tag":590,"props":744,"children":745},{"style":597},[746],{"type":175,"value":747},"const",{"type":169,"tag":590,"props":749,"children":751},{"style":750},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[752],{"type":175,"value":753}," auto",{"type":169,"tag":590,"props":755,"children":756},{"style":669},[757],{"type":175,"value":672},{"type":169,"tag":590,"props":759,"children":760},{"style":669},[761],{"type":175,"value":762}," new",{"type":169,"tag":590,"props":764,"children":765},{"style":603},[766],{"type":175,"value":606},{"type":169,"tag":590,"props":768,"children":769},{"style":664},[770],{"type":175,"value":612},{"type":169,"tag":590,"props":772,"children":774},{"style":773},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[775],{"type":175,"value":776},"'",{"type":169,"tag":590,"props":778,"children":780},{"style":779},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[781],{"type":175,"value":782},"Honda",{"type":169,"tag":590,"props":784,"children":785},{"style":773},[786],{"type":175,"value":776},{"type":169,"tag":590,"props":788,"children":789},{"style":609},[790],{"type":175,"value":623},{"type":169,"tag":590,"props":792,"children":793},{"style":773},[794],{"type":175,"value":795}," '",{"type":169,"tag":590,"props":797,"children":798},{"style":779},[799],{"type":175,"value":800},"Accord",{"type":169,"tag":590,"props":802,"children":803},{"style":773},[804],{"type":175,"value":776},{"type":169,"tag":590,"props":806,"children":807},{"style":609},[808],{"type":175,"value":623},{"type":169,"tag":590,"props":810,"children":812},{"style":811},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[813],{"type":175,"value":814}," 1998",{"type":169,"tag":590,"props":816,"children":817},{"style":664},[818],{"type":175,"value":819},")\n",{"type":169,"tag":590,"props":821,"children":823},{"class":592,"line":822},7,[824],{"type":169,"tag":590,"props":825,"children":826},{"emptyLinePlaceholder":162},[827],{"type":175,"value":828},"\n",{"type":169,"tag":590,"props":830,"children":832},{"class":592,"line":831},8,[833],{"type":169,"tag":590,"props":834,"children":836},{"style":835},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[837],{"type":175,"value":838},"// true\n",{"type":169,"tag":590,"props":840,"children":842},{"class":592,"line":841},9,[843,848,852,857,862,866,871,876,881,885,890,895,900,905,909,914],{"type":169,"tag":590,"props":844,"children":845},{"style":664},[846],{"type":175,"value":847},"console",{"type":169,"tag":590,"props":849,"children":850},{"style":609},[851],{"type":175,"value":269},{"type":169,"tag":590,"props":853,"children":854},{"style":603},[855],{"type":175,"value":856},"log",{"type":169,"tag":590,"props":858,"children":859},{"style":664},[860],{"type":175,"value":861},"((auto",{"type":169,"tag":590,"props":863,"children":864},{"style":609},[865],{"type":175,"value":269},{"type":169,"tag":590,"props":867,"children":868},{"style":750},[869],{"type":175,"value":870},"__proto__",{"type":169,"tag":590,"props":872,"children":873},{"style":669},[874],{"type":175,"value":875}," ===",{"type":169,"tag":590,"props":877,"children":879},{"style":878},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[880],{"type":175,"value":606},{"type":169,"tag":590,"props":882,"children":883},{"style":609},[884],{"type":175,"value":269},{"type":169,"tag":590,"props":886,"children":887},{"style":750},[888],{"type":175,"value":889},"prototype",{"type":169,"tag":590,"props":891,"children":892},{"style":664},[893],{"type":175,"value":894},") ",{"type":169,"tag":590,"props":896,"children":897},{"style":669},[898],{"type":175,"value":899},"===",{"type":169,"tag":590,"props":901,"children":902},{"style":664},[903],{"type":175,"value":904}," auto ",{"type":169,"tag":590,"props":906,"children":907},{"style":669},[908],{"type":175,"value":196},{"type":169,"tag":590,"props":910,"children":912},{"style":911},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[913],{"type":175,"value":606},{"type":169,"tag":590,"props":915,"children":916},{"style":664},[917],{"type":175,"value":819},{"type":169,"tag":177,"props":919,"children":920},{},[921],{"type":175,"value":922},"我们直接看看规范是怎么定义 instanceof 运算符的：",{"type":169,"tag":177,"props":924,"children":925},{},[926],{"type":169,"tag":263,"props":927,"children":928},{},[929],{"type":175,"value":930},"InstanceofOperator(O, C)",{"type":169,"tag":227,"props":932,"children":933},{},[934,952,970,979,1004,1027],{"type":169,"tag":187,"props":935,"children":936},{},[937,938,943,945,950],{"type":175,"value":239},{"type":169,"tag":241,"props":939,"children":940},{},[941],{"type":175,"value":942},"Type(C)",{"type":175,"value":944}," is not Object, throw a ",{"type":169,"tag":263,"props":946,"children":947},{},[948],{"type":175,"value":949},"TypeError",{"type":175,"value":951}," exception.",{"type":169,"tag":187,"props":953,"children":954},{},[955,957,962,964,969],{"type":175,"value":956},"Let ",{"type":169,"tag":241,"props":958,"children":959},{},[960],{"type":175,"value":961},"instOfHandler",{"type":175,"value":963}," be ",{"type":169,"tag":241,"props":965,"children":966},{},[967],{"type":175,"value":968},"GetMethod(C,@@hasInstance)",{"type":175,"value":269},{"type":169,"tag":187,"props":971,"children":972},{},[973,978],{"type":169,"tag":241,"props":974,"children":975},{},[976],{"type":175,"value":977},"ReturnIfAbrupt(instOfHandler)",{"type":175,"value":269},{"type":169,"tag":187,"props":980,"children":981},{},[982,984,988,990],{"type":175,"value":983},"If instOfHandler is not ",{"type":169,"tag":263,"props":985,"children":986},{},[987],{"type":175,"value":552},{"type":175,"value":989},", then\n",{"type":169,"tag":183,"props":991,"children":992},{},[993],{"type":169,"tag":187,"props":994,"children":995},{},[996,998,1003],{"type":175,"value":997},"Return ",{"type":169,"tag":241,"props":999,"children":1000},{},[1001],{"type":175,"value":1002},"ToBoolean(Call(instOfHandler, C, «O»))",{"type":175,"value":269},{"type":169,"tag":187,"props":1005,"children":1006},{},[1007,1008,1013,1015,1020,1022,1026],{"type":175,"value":239},{"type":169,"tag":241,"props":1009,"children":1010},{},[1011],{"type":175,"value":1012},"IsCallable(C)",{"type":175,"value":1014}," is ",{"type":169,"tag":263,"props":1016,"children":1017},{},[1018],{"type":175,"value":1019},"false",{"type":175,"value":1021},", throw a ",{"type":169,"tag":263,"props":1023,"children":1024},{},[1025],{"type":175,"value":949},{"type":175,"value":951},{"type":169,"tag":187,"props":1028,"children":1029},{},[1030,1031,1036],{"type":175,"value":997},{"type":169,"tag":241,"props":1032,"children":1033},{},[1034],{"type":175,"value":1035},"OrdinaryHasInstance(C, O)",{"type":175,"value":269},{"type":169,"tag":177,"props":1038,"children":1039},{},[1040],{"type":175,"value":1041},"第一条，如果 C 的类型不是对象，那么会抛出类型错误，重现如下：",{"type":169,"tag":580,"props":1043,"children":1045},{"className":582,"code":1044,"language":584,"meta":163,"style":163},";[] instanceof 1\n",[1046],{"type":169,"tag":472,"props":1047,"children":1048},{"__ignoreMap":163},[1049],{"type":169,"tag":590,"props":1050,"children":1051},{"class":592,"line":593},[1052,1057,1062,1066],{"type":169,"tag":590,"props":1053,"children":1054},{"style":609},[1055],{"type":175,"value":1056},";",{"type":169,"tag":590,"props":1058,"children":1059},{"style":664},[1060],{"type":175,"value":1061},"[] ",{"type":169,"tag":590,"props":1063,"children":1064},{"style":669},[1065],{"type":175,"value":196},{"type":169,"tag":590,"props":1067,"children":1068},{"style":811},[1069],{"type":175,"value":1070}," 1\n",{"type":169,"tag":177,"props":1072,"children":1073},{},[1074],{"type":175,"value":1075},"::: danger\nVM1008:1 Uncaught TypeError: Right-hand side of 'instanceof' is not an object\n:::",{"type":169,"tag":177,"props":1077,"children":1078},{},[1079],{"type":175,"value":1080},"第二至第四条，判断 C 是否有内置的 hasInstance 实现，即 Symbol.hasInstance，如果有，则调用此方法。\n也就是说，对复杂类型，我们可以通过 Symbol，自定义 instanceof 运算符的实现，用下列代码举例：",{"type":169,"tag":580,"props":1082,"children":1084},{"className":582,"code":1083,"language":584,"meta":163,"style":163},"class Lionad {\n  static [Symbol.hasInstance](obj) {\n    return obj && obj.isCute\n  }\n}\n\nconsole.log({} instanceof Lionad) // false\nconsole.log({ isCute: true } instanceof Lionad) // true\n",[1085],{"type":169,"tag":472,"props":1086,"children":1087},{"__ignoreMap":163},[1088,1105,1145,1177,1185,1192,1199,1241],{"type":169,"tag":590,"props":1089,"children":1090},{"class":592,"line":593},[1091,1096,1101],{"type":169,"tag":590,"props":1092,"children":1093},{"style":597},[1094],{"type":175,"value":1095},"class",{"type":169,"tag":590,"props":1097,"children":1098},{"style":911},[1099],{"type":175,"value":1100}," Lionad",{"type":169,"tag":590,"props":1102,"children":1103},{"style":609},[1104],{"type":175,"value":647},{"type":169,"tag":590,"props":1106,"children":1107},{"class":592,"line":650},[1108,1114,1119,1123,1128,1132,1137,1141],{"type":169,"tag":590,"props":1109,"children":1111},{"style":1110},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1112],{"type":175,"value":1113},"  static",{"type":169,"tag":590,"props":1115,"children":1116},{"style":664},[1117],{"type":175,"value":1118}," [Symbol",{"type":169,"tag":590,"props":1120,"children":1121},{"style":609},[1122],{"type":175,"value":269},{"type":169,"tag":590,"props":1124,"children":1125},{"style":664},[1126],{"type":175,"value":1127},"hasInstance]",{"type":169,"tag":590,"props":1129,"children":1130},{"style":609},[1131],{"type":175,"value":612},{"type":169,"tag":590,"props":1133,"children":1134},{"style":615},[1135],{"type":175,"value":1136},"obj",{"type":169,"tag":590,"props":1138,"children":1139},{"style":609},[1140],{"type":175,"value":642},{"type":169,"tag":590,"props":1142,"children":1143},{"style":609},[1144],{"type":175,"value":647},{"type":169,"tag":590,"props":1146,"children":1147},{"class":592,"line":680},[1148,1154,1159,1164,1168,1172],{"type":169,"tag":590,"props":1149,"children":1151},{"style":1150},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1152],{"type":175,"value":1153},"    return",{"type":169,"tag":590,"props":1155,"children":1156},{"style":664},[1157],{"type":175,"value":1158}," obj",{"type":169,"tag":590,"props":1160,"children":1161},{"style":669},[1162],{"type":175,"value":1163}," &&",{"type":169,"tag":590,"props":1165,"children":1166},{"style":664},[1167],{"type":175,"value":1158},{"type":169,"tag":590,"props":1169,"children":1170},{"style":609},[1171],{"type":175,"value":269},{"type":169,"tag":590,"props":1173,"children":1174},{"style":664},[1175],{"type":175,"value":1176},"isCute\n",{"type":169,"tag":590,"props":1178,"children":1179},{"class":592,"line":706},[1180],{"type":169,"tag":590,"props":1181,"children":1182},{"style":609},[1183],{"type":175,"value":1184},"  }\n",{"type":169,"tag":590,"props":1186,"children":1187},{"class":592,"line":732},[1188],{"type":169,"tag":590,"props":1189,"children":1190},{"style":609},[1191],{"type":175,"value":738},{"type":169,"tag":590,"props":1193,"children":1194},{"class":592,"line":741},[1195],{"type":169,"tag":590,"props":1196,"children":1197},{"emptyLinePlaceholder":162},[1198],{"type":175,"value":828},{"type":169,"tag":590,"props":1200,"children":1201},{"class":592,"line":822},[1202,1206,1210,1214,1218,1223,1228,1232,1236],{"type":169,"tag":590,"props":1203,"children":1204},{"style":664},[1205],{"type":175,"value":847},{"type":169,"tag":590,"props":1207,"children":1208},{"style":609},[1209],{"type":175,"value":269},{"type":169,"tag":590,"props":1211,"children":1212},{"style":603},[1213],{"type":175,"value":856},{"type":169,"tag":590,"props":1215,"children":1216},{"style":664},[1217],{"type":175,"value":612},{"type":169,"tag":590,"props":1219,"children":1220},{"style":609},[1221],{"type":175,"value":1222},"{}",{"type":169,"tag":590,"props":1224,"children":1225},{"style":669},[1226],{"type":175,"value":1227}," instanceof",{"type":169,"tag":590,"props":1229,"children":1230},{"style":911},[1231],{"type":175,"value":1100},{"type":169,"tag":590,"props":1233,"children":1234},{"style":664},[1235],{"type":175,"value":894},{"type":169,"tag":590,"props":1237,"children":1238},{"style":835},[1239],{"type":175,"value":1240},"// false\n",{"type":169,"tag":590,"props":1242,"children":1243},{"class":592,"line":831},[1244,1248,1252,1256,1260,1265,1271,1276,1282,1287,1291,1295,1299],{"type":169,"tag":590,"props":1245,"children":1246},{"style":664},[1247],{"type":175,"value":847},{"type":169,"tag":590,"props":1249,"children":1250},{"style":609},[1251],{"type":175,"value":269},{"type":169,"tag":590,"props":1253,"children":1254},{"style":603},[1255],{"type":175,"value":856},{"type":169,"tag":590,"props":1257,"children":1258},{"style":664},[1259],{"type":175,"value":612},{"type":169,"tag":590,"props":1261,"children":1262},{"style":609},[1263],{"type":175,"value":1264},"{",{"type":169,"tag":590,"props":1266,"children":1268},{"style":1267},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1269],{"type":175,"value":1270}," isCute",{"type":169,"tag":590,"props":1272,"children":1273},{"style":609},[1274],{"type":175,"value":1275},":",{"type":169,"tag":590,"props":1277,"children":1279},{"style":1278},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1280],{"type":175,"value":1281}," true",{"type":169,"tag":590,"props":1283,"children":1284},{"style":609},[1285],{"type":175,"value":1286}," }",{"type":169,"tag":590,"props":1288,"children":1289},{"style":669},[1290],{"type":175,"value":1227},{"type":169,"tag":590,"props":1292,"children":1293},{"style":911},[1294],{"type":175,"value":1100},{"type":169,"tag":590,"props":1296,"children":1297},{"style":664},[1298],{"type":175,"value":894},{"type":169,"tag":590,"props":1300,"children":1301},{"style":835},[1302],{"type":175,"value":838},{"type":169,"tag":177,"props":1304,"children":1305},{},[1306],{"type":175,"value":1307},"这之后，第五条，如果 C 非 Callable 对象（还记得我们在 typeof 提到的内部方法[[call]]吗，Callable 对象即实现了[[call]]内部方法的对象，比如说某个函数），抛出类型错误，重现如下：",{"type":169,"tag":580,"props":1309,"children":1311},{"className":582,"code":1310,"language":584,"meta":163,"style":163},";[] instanceof []\n",[1312],{"type":169,"tag":472,"props":1313,"children":1314},{"__ignoreMap":163},[1315],{"type":169,"tag":590,"props":1316,"children":1317},{"class":592,"line":593},[1318,1322,1326,1330],{"type":169,"tag":590,"props":1319,"children":1320},{"style":609},[1321],{"type":175,"value":1056},{"type":169,"tag":590,"props":1323,"children":1324},{"style":664},[1325],{"type":175,"value":1061},{"type":169,"tag":590,"props":1327,"children":1328},{"style":669},[1329],{"type":175,"value":196},{"type":169,"tag":590,"props":1331,"children":1332},{"style":664},[1333],{"type":175,"value":1334}," []\n",{"type":169,"tag":177,"props":1336,"children":1337},{},[1338],{"type":175,"value":1339},"::: danger\nVM684:1 Uncaught TypeError: Right-hand side of 'instanceof' is not callable\n:::",{"type":169,"tag":177,"props":1341,"children":1342},{},[1343],{"type":175,"value":1344},"最后，返回调用内置 instanceof 实现的结果。",{"type":169,"tag":177,"props":1346,"children":1347},{},[1348],{"type":175,"value":1349},"不过，需要强调的是，instanceof 也有缺陷存在，主要体现在两个方面：",{"type":169,"tag":227,"props":1351,"children":1352},{},[1353,1358],{"type":169,"tag":187,"props":1354,"children":1355},{},[1356],{"type":175,"value":1357},"判断的依据是原型链",{"type":169,"tag":187,"props":1359,"children":1360},{},[1361],{"type":175,"value":1362},"跨宿主运算",{"type":169,"tag":462,"props":1364,"children":1366},{"id":1365},"依据原型链",[1367],{"type":175,"value":1365},{"type":169,"tag":177,"props":1369,"children":1370},{},[1371],{"type":175,"value":1372},"使用 instanceof 运算符判断对象字面量，会出现另人诧异的结果，见下代码：",{"type":169,"tag":580,"props":1374,"children":1376},{"className":582,"code":1375,"language":584,"meta":163,"style":163},"console.log(\n  'hello world' instanceof String, // false\n  new String('asdf') instanceof String, // true\n  {} instanceof Object, // true\n  [] instanceof Object, // true\n  Object.create(null) instanceof Object // false\n)\n",[1377],{"type":169,"tag":472,"props":1378,"children":1379},{"__ignoreMap":163},[1380,1400,1435,1485,1510,1534,1576],{"type":169,"tag":590,"props":1381,"children":1382},{"class":592,"line":593},[1383,1387,1391,1395],{"type":169,"tag":590,"props":1384,"children":1385},{"style":664},[1386],{"type":175,"value":847},{"type":169,"tag":590,"props":1388,"children":1389},{"style":609},[1390],{"type":175,"value":269},{"type":169,"tag":590,"props":1392,"children":1393},{"style":603},[1394],{"type":175,"value":856},{"type":169,"tag":590,"props":1396,"children":1397},{"style":664},[1398],{"type":175,"value":1399},"(\n",{"type":169,"tag":590,"props":1401,"children":1402},{"class":592,"line":650},[1403,1408,1413,1417,1421,1426,1430],{"type":169,"tag":590,"props":1404,"children":1405},{"style":773},[1406],{"type":175,"value":1407},"  '",{"type":169,"tag":590,"props":1409,"children":1410},{"style":779},[1411],{"type":175,"value":1412},"hello world",{"type":169,"tag":590,"props":1414,"children":1415},{"style":773},[1416],{"type":175,"value":776},{"type":169,"tag":590,"props":1418,"children":1419},{"style":669},[1420],{"type":175,"value":1227},{"type":169,"tag":590,"props":1422,"children":1423},{"style":911},[1424],{"type":175,"value":1425}," String",{"type":169,"tag":590,"props":1427,"children":1428},{"style":609},[1429],{"type":175,"value":623},{"type":169,"tag":590,"props":1431,"children":1432},{"style":835},[1433],{"type":175,"value":1434}," // false\n",{"type":169,"tag":590,"props":1436,"children":1437},{"class":592,"line":680},[1438,1443,1447,1451,1455,1460,1464,1468,1472,1476,1480],{"type":169,"tag":590,"props":1439,"children":1440},{"style":669},[1441],{"type":175,"value":1442},"  new",{"type":169,"tag":590,"props":1444,"children":1445},{"style":603},[1446],{"type":175,"value":1425},{"type":169,"tag":590,"props":1448,"children":1449},{"style":664},[1450],{"type":175,"value":612},{"type":169,"tag":590,"props":1452,"children":1453},{"style":773},[1454],{"type":175,"value":776},{"type":169,"tag":590,"props":1456,"children":1457},{"style":779},[1458],{"type":175,"value":1459},"asdf",{"type":169,"tag":590,"props":1461,"children":1462},{"style":773},[1463],{"type":175,"value":776},{"type":169,"tag":590,"props":1465,"children":1466},{"style":664},[1467],{"type":175,"value":894},{"type":169,"tag":590,"props":1469,"children":1470},{"style":669},[1471],{"type":175,"value":196},{"type":169,"tag":590,"props":1473,"children":1474},{"style":911},[1475],{"type":175,"value":1425},{"type":169,"tag":590,"props":1477,"children":1478},{"style":609},[1479],{"type":175,"value":623},{"type":169,"tag":590,"props":1481,"children":1482},{"style":835},[1483],{"type":175,"value":1484}," // true\n",{"type":169,"tag":590,"props":1486,"children":1487},{"class":592,"line":706},[1488,1493,1497,1502,1506],{"type":169,"tag":590,"props":1489,"children":1490},{"style":609},[1491],{"type":175,"value":1492},"  {}",{"type":169,"tag":590,"props":1494,"children":1495},{"style":669},[1496],{"type":175,"value":1227},{"type":169,"tag":590,"props":1498,"children":1499},{"style":911},[1500],{"type":175,"value":1501}," Object",{"type":169,"tag":590,"props":1503,"children":1504},{"style":609},[1505],{"type":175,"value":623},{"type":169,"tag":590,"props":1507,"children":1508},{"style":835},[1509],{"type":175,"value":1484},{"type":169,"tag":590,"props":1511,"children":1512},{"class":592,"line":732},[1513,1518,1522,1526,1530],{"type":169,"tag":590,"props":1514,"children":1515},{"style":664},[1516],{"type":175,"value":1517},"  [] ",{"type":169,"tag":590,"props":1519,"children":1520},{"style":669},[1521],{"type":175,"value":196},{"type":169,"tag":590,"props":1523,"children":1524},{"style":911},[1525],{"type":175,"value":1501},{"type":169,"tag":590,"props":1527,"children":1528},{"style":609},[1529],{"type":175,"value":623},{"type":169,"tag":590,"props":1531,"children":1532},{"style":835},[1533],{"type":175,"value":1484},{"type":169,"tag":590,"props":1535,"children":1536},{"class":592,"line":741},[1537,1542,1546,1551,1555,1560,1564,1568,1572],{"type":169,"tag":590,"props":1538,"children":1539},{"style":664},[1540],{"type":175,"value":1541},"  Object",{"type":169,"tag":590,"props":1543,"children":1544},{"style":609},[1545],{"type":175,"value":269},{"type":169,"tag":590,"props":1547,"children":1548},{"style":603},[1549],{"type":175,"value":1550},"create",{"type":169,"tag":590,"props":1552,"children":1553},{"style":664},[1554],{"type":175,"value":612},{"type":169,"tag":590,"props":1556,"children":1558},{"style":1557},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1559],{"type":175,"value":562},{"type":169,"tag":590,"props":1561,"children":1562},{"style":664},[1563],{"type":175,"value":894},{"type":169,"tag":590,"props":1565,"children":1566},{"style":669},[1567],{"type":175,"value":196},{"type":169,"tag":590,"props":1569,"children":1570},{"style":911},[1571],{"type":175,"value":1501},{"type":169,"tag":590,"props":1573,"children":1574},{"style":835},[1575],{"type":175,"value":1434},{"type":169,"tag":590,"props":1577,"children":1578},{"class":592,"line":822},[1579],{"type":169,"tag":590,"props":1580,"children":1581},{"style":664},[1582],{"type":175,"value":819},{"type":169,"tag":177,"props":1584,"children":1585},{},[1586],{"type":175,"value":1587},"题外话，上面几行代码还隐式说明了这些问题：",{"type":169,"tag":183,"props":1589,"children":1590},{},[1591],{"type":169,"tag":187,"props":1592,"children":1593},{},[1594,1596,1601,1603],{"type":175,"value":1595},"对于对象字面量 ",{"type":169,"tag":472,"props":1597,"children":1599},{"className":1598},[],[1600],{"type":175,"value":1222},{"type":175,"value":1602}," 有 ",{"type":169,"tag":472,"props":1604,"children":1606},{"className":1605},[],[1607],{"type":175,"value":1608},"({}).__proto__ === Object.prototype",{"type":169,"tag":462,"props":1610,"children":1611},{"id":1362},[1612],{"type":175,"value":1362},{"type":169,"tag":177,"props":1614,"children":1615},{},[1616],{"type":175,"value":1617},"关于跨宿主运算，可以尝试以下代码重现:",{"type":169,"tag":580,"props":1619,"children":1621},{"className":582,"code":1620,"language":584,"meta":163,"style":163},"const iframe = document.createElement('iframe')\ndocument.body.appendChild(iframe)\nxArray = window.frames[window.frames.length - 1].Array\nconst xArr = new xArray(1, 2, 3)\n\nconsole.log(xArr instanceof xArray) // true\nconsole.log(xArr instanceof Array) // false\n",[1622],{"type":169,"tag":472,"props":1623,"children":1624},{"__ignoreMap":163},[1625,1676,1707,1776,1832,1839,1875],{"type":169,"tag":590,"props":1626,"children":1627},{"class":592,"line":593},[1628,1632,1637,1641,1646,1650,1655,1659,1663,1668,1672],{"type":169,"tag":590,"props":1629,"children":1630},{"style":597},[1631],{"type":175,"value":747},{"type":169,"tag":590,"props":1633,"children":1634},{"style":750},[1635],{"type":175,"value":1636}," iframe",{"type":169,"tag":590,"props":1638,"children":1639},{"style":669},[1640],{"type":175,"value":672},{"type":169,"tag":590,"props":1642,"children":1643},{"style":664},[1644],{"type":175,"value":1645}," document",{"type":169,"tag":590,"props":1647,"children":1648},{"style":609},[1649],{"type":175,"value":269},{"type":169,"tag":590,"props":1651,"children":1652},{"style":603},[1653],{"type":175,"value":1654},"createElement",{"type":169,"tag":590,"props":1656,"children":1657},{"style":664},[1658],{"type":175,"value":612},{"type":169,"tag":590,"props":1660,"children":1661},{"style":773},[1662],{"type":175,"value":776},{"type":169,"tag":590,"props":1664,"children":1665},{"style":779},[1666],{"type":175,"value":1667},"iframe",{"type":169,"tag":590,"props":1669,"children":1670},{"style":773},[1671],{"type":175,"value":776},{"type":169,"tag":590,"props":1673,"children":1674},{"style":664},[1675],{"type":175,"value":819},{"type":169,"tag":590,"props":1677,"children":1678},{"class":592,"line":650},[1679,1684,1688,1693,1697,1702],{"type":169,"tag":590,"props":1680,"children":1681},{"style":664},[1682],{"type":175,"value":1683},"document",{"type":169,"tag":590,"props":1685,"children":1686},{"style":609},[1687],{"type":175,"value":269},{"type":169,"tag":590,"props":1689,"children":1690},{"style":664},[1691],{"type":175,"value":1692},"body",{"type":169,"tag":590,"props":1694,"children":1695},{"style":609},[1696],{"type":175,"value":269},{"type":169,"tag":590,"props":1698,"children":1699},{"style":603},[1700],{"type":175,"value":1701},"appendChild",{"type":169,"tag":590,"props":1703,"children":1704},{"style":664},[1705],{"type":175,"value":1706},"(iframe)\n",{"type":169,"tag":590,"props":1708,"children":1709},{"class":592,"line":680},[1710,1715,1720,1725,1729,1734,1738,1743,1747,1752,1757,1762,1767,1771],{"type":169,"tag":590,"props":1711,"children":1712},{"style":664},[1713],{"type":175,"value":1714},"xArray ",{"type":169,"tag":590,"props":1716,"children":1717},{"style":669},[1718],{"type":175,"value":1719},"=",{"type":169,"tag":590,"props":1721,"children":1722},{"style":664},[1723],{"type":175,"value":1724}," window",{"type":169,"tag":590,"props":1726,"children":1727},{"style":609},[1728],{"type":175,"value":269},{"type":169,"tag":590,"props":1730,"children":1731},{"style":664},[1732],{"type":175,"value":1733},"frames[window",{"type":169,"tag":590,"props":1735,"children":1736},{"style":609},[1737],{"type":175,"value":269},{"type":169,"tag":590,"props":1739,"children":1740},{"style":664},[1741],{"type":175,"value":1742},"frames",{"type":169,"tag":590,"props":1744,"children":1745},{"style":609},[1746],{"type":175,"value":269},{"type":169,"tag":590,"props":1748,"children":1749},{"style":750},[1750],{"type":175,"value":1751},"length",{"type":169,"tag":590,"props":1753,"children":1754},{"style":669},[1755],{"type":175,"value":1756}," -",{"type":169,"tag":590,"props":1758,"children":1759},{"style":811},[1760],{"type":175,"value":1761}," 1",{"type":169,"tag":590,"props":1763,"children":1764},{"style":664},[1765],{"type":175,"value":1766},"]",{"type":169,"tag":590,"props":1768,"children":1769},{"style":609},[1770],{"type":175,"value":269},{"type":169,"tag":590,"props":1772,"children":1773},{"style":664},[1774],{"type":175,"value":1775},"Array\n",{"type":169,"tag":590,"props":1777,"children":1778},{"class":592,"line":706},[1779,1783,1788,1792,1796,1801,1805,1810,1814,1819,1823,1828],{"type":169,"tag":590,"props":1780,"children":1781},{"style":597},[1782],{"type":175,"value":747},{"type":169,"tag":590,"props":1784,"children":1785},{"style":750},[1786],{"type":175,"value":1787}," xArr",{"type":169,"tag":590,"props":1789,"children":1790},{"style":669},[1791],{"type":175,"value":672},{"type":169,"tag":590,"props":1793,"children":1794},{"style":669},[1795],{"type":175,"value":762},{"type":169,"tag":590,"props":1797,"children":1798},{"style":603},[1799],{"type":175,"value":1800}," xArray",{"type":169,"tag":590,"props":1802,"children":1803},{"style":664},[1804],{"type":175,"value":612},{"type":169,"tag":590,"props":1806,"children":1807},{"style":811},[1808],{"type":175,"value":1809},"1",{"type":169,"tag":590,"props":1811,"children":1812},{"style":609},[1813],{"type":175,"value":623},{"type":169,"tag":590,"props":1815,"children":1816},{"style":811},[1817],{"type":175,"value":1818}," 2",{"type":169,"tag":590,"props":1820,"children":1821},{"style":609},[1822],{"type":175,"value":623},{"type":169,"tag":590,"props":1824,"children":1825},{"style":811},[1826],{"type":175,"value":1827}," 3",{"type":169,"tag":590,"props":1829,"children":1830},{"style":664},[1831],{"type":175,"value":819},{"type":169,"tag":590,"props":1833,"children":1834},{"class":592,"line":732},[1835],{"type":169,"tag":590,"props":1836,"children":1837},{"emptyLinePlaceholder":162},[1838],{"type":175,"value":828},{"type":169,"tag":590,"props":1840,"children":1841},{"class":592,"line":741},[1842,1846,1850,1854,1859,1863,1867,1871],{"type":169,"tag":590,"props":1843,"children":1844},{"style":664},[1845],{"type":175,"value":847},{"type":169,"tag":590,"props":1847,"children":1848},{"style":609},[1849],{"type":175,"value":269},{"type":169,"tag":590,"props":1851,"children":1852},{"style":603},[1853],{"type":175,"value":856},{"type":169,"tag":590,"props":1855,"children":1856},{"style":664},[1857],{"type":175,"value":1858},"(xArr ",{"type":169,"tag":590,"props":1860,"children":1861},{"style":669},[1862],{"type":175,"value":196},{"type":169,"tag":590,"props":1864,"children":1865},{"style":911},[1866],{"type":175,"value":1800},{"type":169,"tag":590,"props":1868,"children":1869},{"style":664},[1870],{"type":175,"value":894},{"type":169,"tag":590,"props":1872,"children":1873},{"style":835},[1874],{"type":175,"value":838},{"type":169,"tag":590,"props":1876,"children":1877},{"class":592,"line":822},[1878,1882,1886,1890,1894,1898,1903,1907],{"type":169,"tag":590,"props":1879,"children":1880},{"style":664},[1881],{"type":175,"value":847},{"type":169,"tag":590,"props":1883,"children":1884},{"style":609},[1885],{"type":175,"value":269},{"type":169,"tag":590,"props":1887,"children":1888},{"style":603},[1889],{"type":175,"value":856},{"type":169,"tag":590,"props":1891,"children":1892},{"style":664},[1893],{"type":175,"value":1858},{"type":169,"tag":590,"props":1895,"children":1896},{"style":669},[1897],{"type":175,"value":196},{"type":169,"tag":590,"props":1899,"children":1900},{"style":911},[1901],{"type":175,"value":1902}," Array",{"type":169,"tag":590,"props":1904,"children":1905},{"style":664},[1906],{"type":175,"value":894},{"type":169,"tag":590,"props":1908,"children":1909},{"style":835},[1910],{"type":175,"value":1240},{"type":169,"tag":177,"props":1912,"children":1913},{},[1914],{"type":175,"value":1915},"因为 iframe 中的数组实例不是父窗口的 Array 的实例，所以在 xArr 的原型链上是找不到 Array 的，所以结果为 false。",{"type":169,"tag":170,"props":1917,"children":1919},{"id":1918},"objectprototypetostringcall",[1920],{"type":175,"value":201},{"type":169,"tag":177,"props":1922,"children":1923},{},[1924],{"type":175,"value":1925},"一般来说，在业务代码中，我们使用 typeof 和 instanceof 运算符判断变量的类型就足够了。虽然这两种方法都有缺陷，但是我们记住这些常见的容易混淆的地方，避免使用就可以。\n下面要介绍的是一种更精确的方法，一般会用在工具函数或者类库中，如：",{"type":169,"tag":580,"props":1927,"children":1929},{"className":582,"code":1928,"language":584,"meta":163,"style":163},"function isArray(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\nisArray([]) // true\n",[1930],{"type":169,"tag":472,"props":1931,"children":1932},{"__ignoreMap":163},[1933,1962,2030,2037],{"type":169,"tag":590,"props":1934,"children":1935},{"class":592,"line":593},[1936,1940,1945,1949,1954,1958],{"type":169,"tag":590,"props":1937,"children":1938},{"style":597},[1939],{"type":175,"value":600},{"type":169,"tag":590,"props":1941,"children":1942},{"style":603},[1943],{"type":175,"value":1944}," isArray",{"type":169,"tag":590,"props":1946,"children":1947},{"style":609},[1948],{"type":175,"value":612},{"type":169,"tag":590,"props":1950,"children":1951},{"style":615},[1952],{"type":175,"value":1953},"arr",{"type":169,"tag":590,"props":1955,"children":1956},{"style":609},[1957],{"type":175,"value":642},{"type":169,"tag":590,"props":1959,"children":1960},{"style":609},[1961],{"type":175,"value":647},{"type":169,"tag":590,"props":1963,"children":1964},{"class":592,"line":650},[1965,1970,1974,1978,1982,1986,1991,1995,2000,2004,2008,2012,2016,2020,2025],{"type":169,"tag":590,"props":1966,"children":1967},{"style":1150},[1968],{"type":175,"value":1969},"  return",{"type":169,"tag":590,"props":1971,"children":1972},{"style":878},[1973],{"type":175,"value":1501},{"type":169,"tag":590,"props":1975,"children":1976},{"style":609},[1977],{"type":175,"value":269},{"type":169,"tag":590,"props":1979,"children":1980},{"style":750},[1981],{"type":175,"value":889},{"type":169,"tag":590,"props":1983,"children":1984},{"style":609},[1985],{"type":175,"value":269},{"type":169,"tag":590,"props":1987,"children":1988},{"style":664},[1989],{"type":175,"value":1990},"toString",{"type":169,"tag":590,"props":1992,"children":1993},{"style":609},[1994],{"type":175,"value":269},{"type":169,"tag":590,"props":1996,"children":1997},{"style":603},[1998],{"type":175,"value":1999},"call",{"type":169,"tag":590,"props":2001,"children":2002},{"style":1267},[2003],{"type":175,"value":612},{"type":169,"tag":590,"props":2005,"children":2006},{"style":664},[2007],{"type":175,"value":1953},{"type":169,"tag":590,"props":2009,"children":2010},{"style":1267},[2011],{"type":175,"value":894},{"type":169,"tag":590,"props":2013,"children":2014},{"style":669},[2015],{"type":175,"value":899},{"type":169,"tag":590,"props":2017,"children":2018},{"style":773},[2019],{"type":175,"value":795},{"type":169,"tag":590,"props":2021,"children":2022},{"style":779},[2023],{"type":175,"value":2024},"[object Array]",{"type":169,"tag":590,"props":2026,"children":2027},{"style":773},[2028],{"type":175,"value":2029},"'\n",{"type":169,"tag":590,"props":2031,"children":2032},{"class":592,"line":680},[2033],{"type":169,"tag":590,"props":2034,"children":2035},{"style":609},[2036],{"type":175,"value":738},{"type":169,"tag":590,"props":2038,"children":2039},{"class":592,"line":706},[2040,2045,2050],{"type":169,"tag":590,"props":2041,"children":2042},{"style":603},[2043],{"type":175,"value":2044},"isArray",{"type":169,"tag":590,"props":2046,"children":2047},{"style":664},[2048],{"type":175,"value":2049},"([]) ",{"type":169,"tag":590,"props":2051,"children":2052},{"style":835},[2053],{"type":175,"value":838},{"type":169,"tag":177,"props":2055,"children":2056},{},[2057],{"type":175,"value":2058},"那么 Object.prototype.toString 到底能分辨几种类型呢？查阅 ES6 规范文档，可以得到其实现，如下：",{"type":169,"tag":227,"props":2060,"children":2061},{},[2062,2092,2117,2128,2139,2148,2159,2170,2181,2192,2203,2214,2225,2236,2247,2258,2269,2278,2289],{"type":169,"tag":187,"props":2063,"children":2064},{},[2065,2067,2072,2074,2078,2080,2091],{"type":175,"value":2066},"If the ",{"type":169,"tag":263,"props":2068,"children":2069},{},[2070],{"type":175,"value":2071},"this",{"type":175,"value":2073}," value is ",{"type":169,"tag":263,"props":2075,"children":2076},{},[2077],{"type":175,"value":552},{"type":175,"value":2079},", return ",{"type":169,"tag":263,"props":2081,"children":2082},{},[2083,2085,2090],{"type":175,"value":2084},"\"",{"type":169,"tag":590,"props":2086,"children":2087},{},[2088],{"type":175,"value":2089},"object Undefined",{"type":175,"value":2084},{"type":175,"value":269},{"type":169,"tag":187,"props":2093,"children":2094},{},[2095,2096,2100,2101,2105,2106,2116],{"type":175,"value":2066},{"type":169,"tag":263,"props":2097,"children":2098},{},[2099],{"type":175,"value":2071},{"type":175,"value":2073},{"type":169,"tag":263,"props":2102,"children":2103},{},[2104],{"type":175,"value":562},{"type":175,"value":2079},{"type":169,"tag":263,"props":2107,"children":2108},{},[2109,2110,2115],{"type":175,"value":2084},{"type":169,"tag":590,"props":2111,"children":2112},{},[2113],{"type":175,"value":2114},"object Null",{"type":175,"value":2084},{"type":175,"value":269},{"type":169,"tag":187,"props":2118,"children":2119},{},[2120,2122,2127],{"type":175,"value":2121},"Let O be ",{"type":169,"tag":241,"props":2123,"children":2124},{},[2125],{"type":175,"value":2126},"ToObject(this value)",{"type":175,"value":269},{"type":169,"tag":187,"props":2129,"children":2130},{},[2131,2133,2138],{"type":175,"value":2132},"Let isArray be ",{"type":169,"tag":241,"props":2134,"children":2135},{},[2136],{"type":175,"value":2137},"IsArray(O)",{"type":175,"value":269},{"type":169,"tag":187,"props":2140,"children":2141},{},[2142,2147],{"type":169,"tag":241,"props":2143,"children":2144},{},[2145],{"type":175,"value":2146},"ReturnIfAbrupt(isArray)",{"type":175,"value":269},{"type":169,"tag":187,"props":2149,"children":2150},{},[2151,2153,2158],{"type":175,"value":2152},"If isArray is true, let builtinTag be ",{"type":169,"tag":263,"props":2154,"children":2155},{},[2156],{"type":175,"value":2157},"\"Array\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2160,"children":2161},{},[2162,2164,2169],{"type":175,"value":2163},"Else, if O is an exotic String object, let builtinTag be ",{"type":169,"tag":263,"props":2165,"children":2166},{},[2167],{"type":175,"value":2168},"\"String\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2171,"children":2172},{},[2173,2175,2180],{"type":175,"value":2174},"Else, if O has an [[ParameterMap]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2176,"children":2177},{},[2178],{"type":175,"value":2179},"\"Arguments\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2182,"children":2183},{},[2184,2186,2191],{"type":175,"value":2185},"Else, if O has a [[Call]] internal method, let builtinTag be ",{"type":169,"tag":263,"props":2187,"children":2188},{},[2189],{"type":175,"value":2190},"\"Function\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2193,"children":2194},{},[2195,2197,2202],{"type":175,"value":2196},"Else, if O has an [[ErrorData]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2198,"children":2199},{},[2200],{"type":175,"value":2201},"\"Error\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2204,"children":2205},{},[2206,2208,2213],{"type":175,"value":2207},"Else, if O has a [[BooleanData]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2209,"children":2210},{},[2211],{"type":175,"value":2212},"\"Boolean\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2215,"children":2216},{},[2217,2219,2224],{"type":175,"value":2218},"Else, if O has a [[NumberData]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2220,"children":2221},{},[2222],{"type":175,"value":2223},"\"Number\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2226,"children":2227},{},[2228,2230,2235],{"type":175,"value":2229},"Else, if O has a [[DateValue]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2231,"children":2232},{},[2233],{"type":175,"value":2234},"\"Date\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2237,"children":2238},{},[2239,2241,2246],{"type":175,"value":2240},"Else, if O has a [[RegExpMatcher]] internal slot, let builtinTag be ",{"type":169,"tag":263,"props":2242,"children":2243},{},[2244],{"type":175,"value":2245},"\"RegExp\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2248,"children":2249},{},[2250,2252,2257],{"type":175,"value":2251},"Else, let builtinTag be ",{"type":169,"tag":263,"props":2253,"children":2254},{},[2255],{"type":175,"value":2256},"\"Object\"",{"type":175,"value":269},{"type":169,"tag":187,"props":2259,"children":2260},{},[2261,2263,2268],{"type":175,"value":2262},"Let tag be ",{"type":169,"tag":241,"props":2264,"children":2265},{},[2266],{"type":175,"value":2267},"Get(O, @@toStringTag)",{"type":175,"value":269},{"type":169,"tag":187,"props":2270,"children":2271},{},[2272,2277],{"type":169,"tag":241,"props":2273,"children":2274},{},[2275],{"type":175,"value":2276},"ReturnIfAbrupt(tag)",{"type":175,"value":269},{"type":169,"tag":187,"props":2279,"children":2280},{},[2281,2282,2287],{"type":175,"value":239},{"type":169,"tag":241,"props":2283,"children":2284},{},[2285],{"type":175,"value":2286},"Type(tag)",{"type":175,"value":2288}," is not String, let tag be builtinTag.",{"type":169,"tag":187,"props":2290,"children":2291},{},[2292,2294,2304],{"type":175,"value":2293},"Return the String that is the result of concatenating ",{"type":169,"tag":263,"props":2295,"children":2296},{},[2297,2298,2303],{"type":175,"value":2084},{"type":169,"tag":590,"props":2299,"children":2300},{},[2301],{"type":175,"value":2302},"object \"**, tag, and **\"",{"type":175,"value":2084},{"type":175,"value":269},{"type":169,"tag":177,"props":2306,"children":2307},{},[2308],{"type":175,"value":2309},"细数下来，Object.prototype.toString 不仅可以区分 Object、Function、Date、RegExp 等常见对象，它还能区分 Error、Arguments 等，见下代码：",{"type":169,"tag":580,"props":2311,"children":2313},{"className":582,"code":2312,"language":584,"meta":163,"style":163},";(function() {\n  console.log(\n    typeof arguments, // 'object'\n    Object.prototype.toString.call(arguments) // '[object Arguments]'\n  )\n})()\n",[2314],{"type":169,"tag":472,"props":2315,"children":2316},{"__ignoreMap":163},[2317,2341,2361,2384,2434,2442],{"type":169,"tag":590,"props":2318,"children":2319},{"class":592,"line":593},[2320,2324,2328,2332,2337],{"type":169,"tag":590,"props":2321,"children":2322},{"style":609},[2323],{"type":175,"value":1056},{"type":169,"tag":590,"props":2325,"children":2326},{"style":664},[2327],{"type":175,"value":612},{"type":169,"tag":590,"props":2329,"children":2330},{"style":597},[2331],{"type":175,"value":600},{"type":169,"tag":590,"props":2333,"children":2334},{"style":609},[2335],{"type":175,"value":2336},"()",{"type":169,"tag":590,"props":2338,"children":2339},{"style":609},[2340],{"type":175,"value":647},{"type":169,"tag":590,"props":2342,"children":2343},{"class":592,"line":650},[2344,2349,2353,2357],{"type":169,"tag":590,"props":2345,"children":2346},{"style":664},[2347],{"type":175,"value":2348},"  console",{"type":169,"tag":590,"props":2350,"children":2351},{"style":609},[2352],{"type":175,"value":269},{"type":169,"tag":590,"props":2354,"children":2355},{"style":603},[2356],{"type":175,"value":856},{"type":169,"tag":590,"props":2358,"children":2359},{"style":1267},[2360],{"type":175,"value":1399},{"type":169,"tag":590,"props":2362,"children":2363},{"class":592,"line":680},[2364,2369,2375,2379],{"type":169,"tag":590,"props":2365,"children":2366},{"style":669},[2367],{"type":175,"value":2368},"    typeof",{"type":169,"tag":590,"props":2370,"children":2372},{"style":2371},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2373],{"type":175,"value":2374}," arguments",{"type":169,"tag":590,"props":2376,"children":2377},{"style":609},[2378],{"type":175,"value":623},{"type":169,"tag":590,"props":2380,"children":2381},{"style":835},[2382],{"type":175,"value":2383}," // 'object'\n",{"type":169,"tag":590,"props":2385,"children":2386},{"class":592,"line":706},[2387,2392,2396,2400,2404,2408,2412,2416,2420,2425,2429],{"type":169,"tag":590,"props":2388,"children":2389},{"style":878},[2390],{"type":175,"value":2391},"    Object",{"type":169,"tag":590,"props":2393,"children":2394},{"style":609},[2395],{"type":175,"value":269},{"type":169,"tag":590,"props":2397,"children":2398},{"style":750},[2399],{"type":175,"value":889},{"type":169,"tag":590,"props":2401,"children":2402},{"style":609},[2403],{"type":175,"value":269},{"type":169,"tag":590,"props":2405,"children":2406},{"style":664},[2407],{"type":175,"value":1990},{"type":169,"tag":590,"props":2409,"children":2410},{"style":609},[2411],{"type":175,"value":269},{"type":169,"tag":590,"props":2413,"children":2414},{"style":603},[2415],{"type":175,"value":1999},{"type":169,"tag":590,"props":2417,"children":2418},{"style":1267},[2419],{"type":175,"value":612},{"type":169,"tag":590,"props":2421,"children":2422},{"style":2371},[2423],{"type":175,"value":2424},"arguments",{"type":169,"tag":590,"props":2426,"children":2427},{"style":1267},[2428],{"type":175,"value":894},{"type":169,"tag":590,"props":2430,"children":2431},{"style":835},[2432],{"type":175,"value":2433},"// '[object Arguments]'\n",{"type":169,"tag":590,"props":2435,"children":2436},{"class":592,"line":732},[2437],{"type":169,"tag":590,"props":2438,"children":2439},{"style":1267},[2440],{"type":175,"value":2441},"  )\n",{"type":169,"tag":590,"props":2443,"children":2444},{"class":592,"line":741},[2445,2450],{"type":169,"tag":590,"props":2446,"children":2447},{"style":609},[2448],{"type":175,"value":2449},"}",{"type":169,"tag":590,"props":2451,"children":2452},{"style":664},[2453],{"type":175,"value":2454},")()\n",{"type":169,"tag":462,"props":2456,"children":2458},{"id":2457},"如何扩展",[2459],{"type":175,"value":2457},{"type":169,"tag":177,"props":2461,"children":2462},{},[2463],{"type":175,"value":2464},"可以通过 Symbol.toStringTag 对已有对象的内置标签进行修改。这样就可以不需要通过构造函数的方法来分辨程序中不同种类的新对象。如下代码：",{"type":169,"tag":580,"props":2466,"children":2468},{"className":582,"code":2467,"language":584,"meta":163,"style":163},"var a = {}\na[Symbol.toStringTag] = '1234'\nObject.prototype.toString.call(a)\n// >>> \"[object 1234]\"\n",[2469],{"type":169,"tag":472,"props":2470,"children":2471},{"__ignoreMap":163},[2472,2494,2528,2565],{"type":169,"tag":590,"props":2473,"children":2474},{"class":592,"line":593},[2475,2480,2485,2489],{"type":169,"tag":590,"props":2476,"children":2477},{"style":597},[2478],{"type":175,"value":2479},"var",{"type":169,"tag":590,"props":2481,"children":2482},{"style":664},[2483],{"type":175,"value":2484}," a ",{"type":169,"tag":590,"props":2486,"children":2487},{"style":669},[2488],{"type":175,"value":1719},{"type":169,"tag":590,"props":2490,"children":2491},{"style":609},[2492],{"type":175,"value":2493}," {}\n",{"type":169,"tag":590,"props":2495,"children":2496},{"class":592,"line":650},[2497,2502,2506,2511,2515,2519,2524],{"type":169,"tag":590,"props":2498,"children":2499},{"style":664},[2500],{"type":175,"value":2501},"a[Symbol",{"type":169,"tag":590,"props":2503,"children":2504},{"style":609},[2505],{"type":175,"value":269},{"type":169,"tag":590,"props":2507,"children":2508},{"style":664},[2509],{"type":175,"value":2510},"toStringTag] ",{"type":169,"tag":590,"props":2512,"children":2513},{"style":669},[2514],{"type":175,"value":1719},{"type":169,"tag":590,"props":2516,"children":2517},{"style":773},[2518],{"type":175,"value":795},{"type":169,"tag":590,"props":2520,"children":2521},{"style":779},[2522],{"type":175,"value":2523},"1234",{"type":169,"tag":590,"props":2525,"children":2526},{"style":773},[2527],{"type":175,"value":2029},{"type":169,"tag":590,"props":2529,"children":2530},{"class":592,"line":680},[2531,2536,2540,2544,2548,2552,2556,2560],{"type":169,"tag":590,"props":2532,"children":2533},{"style":878},[2534],{"type":175,"value":2535},"Object",{"type":169,"tag":590,"props":2537,"children":2538},{"style":609},[2539],{"type":175,"value":269},{"type":169,"tag":590,"props":2541,"children":2542},{"style":750},[2543],{"type":175,"value":889},{"type":169,"tag":590,"props":2545,"children":2546},{"style":609},[2547],{"type":175,"value":269},{"type":169,"tag":590,"props":2549,"children":2550},{"style":664},[2551],{"type":175,"value":1990},{"type":169,"tag":590,"props":2553,"children":2554},{"style":609},[2555],{"type":175,"value":269},{"type":169,"tag":590,"props":2557,"children":2558},{"style":603},[2559],{"type":175,"value":1999},{"type":169,"tag":590,"props":2561,"children":2562},{"style":664},[2563],{"type":175,"value":2564},"(a)\n",{"type":169,"tag":590,"props":2566,"children":2567},{"class":592,"line":706},[2568],{"type":169,"tag":590,"props":2569,"children":2570},{"style":835},[2571],{"type":175,"value":2572},"// >>> \"[object 1234]\"\n",{"type":169,"tag":462,"props":2574,"children":2576},{"id":2575},"缺陷所在",[2577],{"type":175,"value":2575},{"type":169,"tag":177,"props":2579,"children":2580},{},[2581],{"type":175,"value":2582},"JS 中的对象，按照执行环境来划分可以分为内置对象（Build-In Object）和宿主对象（Host Object），如 Window、History 就是执行环境（浏览器）提供的对象。\n缺陷呢，往往就存在于规范中没有被定义的行为。\n比如，Window 对象的 Symbol.toString 是浏览器定义的行为，而且往往不同浏览器，实现还不一样。",{"type":169,"tag":580,"props":2584,"children":2586},{"className":582,"code":2585,"language":584,"meta":163,"style":163},"Window.toString()\n// [object Window] ?\n// [object Object] ?\n// [object DOMWindow] ?\n// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",[2587],{"type":169,"tag":472,"props":2588,"children":2589},{"__ignoreMap":163},[2590,2611,2619,2627,2635],{"type":169,"tag":590,"props":2591,"children":2592},{"class":592,"line":593},[2593,2598,2602,2606],{"type":169,"tag":590,"props":2594,"children":2595},{"style":664},[2596],{"type":175,"value":2597},"Window",{"type":169,"tag":590,"props":2599,"children":2600},{"style":609},[2601],{"type":175,"value":269},{"type":169,"tag":590,"props":2603,"children":2604},{"style":603},[2605],{"type":175,"value":1990},{"type":169,"tag":590,"props":2607,"children":2608},{"style":664},[2609],{"type":175,"value":2610},"()\n",{"type":169,"tag":590,"props":2612,"children":2613},{"class":592,"line":650},[2614],{"type":169,"tag":590,"props":2615,"children":2616},{"style":835},[2617],{"type":175,"value":2618},"// [object Window] ?\n",{"type":169,"tag":590,"props":2620,"children":2621},{"class":592,"line":680},[2622],{"type":169,"tag":590,"props":2623,"children":2624},{"style":835},[2625],{"type":175,"value":2626},"// [object Object] ?\n",{"type":169,"tag":590,"props":2628,"children":2629},{"class":592,"line":706},[2630],{"type":169,"tag":590,"props":2631,"children":2632},{"style":835},[2633],{"type":175,"value":2634},"// [object DOMWindow] ?\n",{"type":169,"tag":590,"props":2636,"children":2637},{"class":592,"line":732},[2638],{"type":169,"tag":590,"props":2639,"children":2640},{"style":835},[2641],{"type":175,"value":2642},"// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",{"type":169,"tag":177,"props":2644,"children":2645},{},[2646],{"type":169,"tag":263,"props":2647,"children":2648},{},[2649],{"type":175,"value":2650},"(￣ ▽ ￣)\" 害。",{"type":169,"tag":170,"props":2652,"children":2654},{"id":2653},"最后",[2655],{"type":175,"value":2653},{"type":169,"tag":177,"props":2657,"children":2658},{},[2659],{"type":175,"value":2660},"想不到吧，JS 类型判断这个问题居然没有完美的解法，每种解法都有缺陷。",{"type":169,"tag":177,"props":2662,"children":2663},{},[2664],{"type":175,"value":2665},"那么我们平常写代码到底用哪种呢？",{"type":169,"tag":177,"props":2667,"children":2668},{},[2669],{"type":175,"value":2670},"虽然我刚才提到“业务代码可以使用 typeof 或 instanceof，库和工具函数等需要更精准的情况则用 Object.prototype.toString”，但是，这并不是绝对的。\n我们仔细思考一下这三种方法的本质：",{"type":169,"tag":183,"props":2672,"children":2673},{},[2674,2679,2684],{"type":169,"tag":187,"props":2675,"children":2676},{},[2677],{"type":175,"value":2678},"typeof 根据最小三位字节判断变量类型",{"type":169,"tag":187,"props":2680,"children":2681},{},[2682],{"type":175,"value":2683},"instanceof 根据原型链判断",{"type":169,"tag":187,"props":2685,"children":2686},{},[2687],{"type":175,"value":2688},"Object.prototype.toString 主要是根据对象的内置标签（Build-In Tag）判断",{"type":169,"tag":177,"props":2690,"children":2691},{},[2692],{"type":175,"value":2693},"那么熟记这三条规则，写代码时就能游刃有余了。",{"type":169,"tag":177,"props":2695,"children":2696},{},[2697],{"type":175,"value":2698},"感谢看到结尾，如有错误请务必指正，十分感谢。如果喜欢请点赞、投币、关注三连吧！我是 Lionad，爱你萌！",{"type":169,"tag":170,"props":2700,"children":2702},{"id":2701},"阅读更多",[2703],{"type":175,"value":2701},{"type":169,"tag":183,"props":2705,"children":2706},{},[2707,2719,2729,2739,2749],{"type":169,"tag":187,"props":2708,"children":2709},{},[2710],{"type":169,"tag":2711,"props":2712,"children":2716},"a",{"href":2713,"rel":2714},"https://book.douban.com/subject/27133542/",[2715],"nofollow",[2717],{"type":175,"value":2718},"《JavaScript 框架设计》",{"type":169,"tag":187,"props":2720,"children":2721},{},[2722],{"type":169,"tag":2711,"props":2723,"children":2726},{"href":2724,"rel":2725},"https://justjavac.com/javascript/2012/12/23/what-is-javascripts-typeof-operator-used-for.html",[2715],[2727],{"type":175,"value":2728},"JavaScript 的 typeof 的用途",{"type":169,"tag":187,"props":2730,"children":2731},{},[2732],{"type":169,"tag":2711,"props":2733,"children":2736},{"href":2734,"rel":2735},"https://2ality.com/2013/10/typeof-null.html",[2715],[2737],{"type":175,"value":2738},"The history of “typeof null”",{"type":169,"tag":187,"props":2740,"children":2741},{},[2742],{"type":169,"tag":2711,"props":2743,"children":2746},{"href":2744,"rel":2745},"http://www.ecma-international.org/ecma-262/6.0/#sec-typeof-operator",[2715],[2747],{"type":175,"value":2748},"ECMAScript® 2015 Language Specification",{"type":169,"tag":187,"props":2750,"children":2751},{},[2752],{"type":169,"tag":2711,"props":2753,"children":2756},{"href":2754,"rel":2755},"https://juejin.im/post/5b0b9b9051882515773ae714",[2715],[2757],{"type":175,"value":2758},"instanceof 和 typeof 原理",{"type":169,"tag":2760,"props":2761,"children":2762},"style",{},[2763],{"type":175,"value":2764},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":163,"searchDepth":650,"depth":650,"links":2766},[2767,2768,2772,2776,2780,2781],{"id":172,"depth":650,"text":172},{"id":191,"depth":650,"text":191,"children":2769},[2770,2771],{"id":455,"depth":680,"text":455},{"id":500,"depth":680,"text":503},{"id":196,"depth":650,"text":196,"children":2773},[2774,2775],{"id":1365,"depth":680,"text":1365},{"id":1362,"depth":680,"text":1362},{"id":1918,"depth":650,"text":201,"children":2777},[2778,2779],{"id":2457,"depth":680,"text":2457},{"id":2575,"depth":680,"text":2575},{"id":2653,"depth":650,"text":2653},{"id":2701,"depth":650,"text":2701},"markdown","content:_achieved:2020-05:type-check.md","content","_achieved/2020-05/type-check.md","_achieved/2020-05/type-check","md",[2789,2792],{"_path":2790,"title":2791,"description":163},"/_achieved/2020-05/js-module-history","JS 模块化简史",{"_path":2793,"title":2794,"description":163},"/_achieved/2020-06/punctuations","✒️ 关于标点的那些事儿",1742958684977]