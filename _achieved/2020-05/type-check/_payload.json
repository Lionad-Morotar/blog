[{"data":1,"prerenderedAt":3030},["ShallowReactive",2],{"navigation":3,"/_achieved/2020-05/type-check":393,"/_achieved/2020-05/type-check-surround":3023},[4,35,86,105,132,138,144,150,387],{"title":5,"_path":6,"children":7},"心流思绪 / Heart Flows","/flows",[8,11,14,17,20,23,26,29,32],{"title":9,"_path":10},"📕 狮子的书单推荐","/flows/books",{"title":12,"_path":13},"🚝 四十二篇系列","/flows/fourty-two",{"title":15,"_path":16},"🌃 长夜梦","/flows/long-night-dream",{"title":18,"_path":19},"🌌 万物联结与幸福感","/flows/everything",{"title":21,"_path":22},"⌛ 偷取时间","/flows/stealing-time-from-god",{"title":24,"_path":25},"🌆 表达和孤独","/flows/expression-and-loneliness",{"title":27,"_path":28},"🌧️ 我的腼腆","/flows/shy",{"title":30,"_path":31},"🥛 新工作，喝新饮料","/flows/drinking-while-thinking",{"title":33,"_path":34},"📝 心流归档","/flows/archive",{"title":36,"_path":37,"children":38},"技术博客 / Coder","/articles",[39,41,44,47,50,53,56,59,62,65,68,71,74,77,80,83],{"title":40,"_path":37},"🦁 欢迎",{"title":42,"_path":43},"🥞 在 tailwind 中使用现代化 CSS Layers","/articles/tailwind-sass-and-css-layer",{"title":45,"_path":46},"💻 本地部署 Qwen 翻译网页","/articles/local-translator",{"title":48,"_path":49},"🧊 模板解析器轻考古","/articles/micro-templating",{"title":51,"_path":52},"Ⓜ️ Mini CSS Parser","/articles/mini-css-parser",{"title":54,"_path":55},"🚩 向AI咨询前端问题","/articles/use-gpt-learn-complex-frontend",{"title":57,"_path":58},"⛸️ 怎样定制复杂组件的自定义滚动条？","/articles/use-scrollbars",{"title":60,"_path":61},"⚖️ 统一多组件库的层叠顺序","/articles/zindex-manager",{"title":63,"_path":64},"🕷️ 滑动验证码破解思路","/articles/crack-the-slider",{"title":66,"_path":67},"🌟 探秘 CSS 光影效果","/articles/css-light-travel",{"title":69,"_path":70},"🍲 设计模式与 JS 魔法锅","/articles/design-patterns-and-js-magic-pot",{"title":72,"_path":73},"🌐 Anysort：灵活、优雅的多属性排序","/articles/anysort-2th",{"title":75,"_path":76},"💫 CSS 幻术 | 抗锯齿","/articles/css-poaa",{"title":78,"_path":79},"❓ 用纯CSS判断鼠标进入的方向","/articles/css-judge-direction",{"title":81,"_path":82},"📝 你本可以少写些 if-else","/articles/no-more-if-else",{"title":84,"_path":85},"📝 技术博客归档","/articles/archive",{"title":87,"_path":88,"children":89},"造物 / Make","/tools",[90,93,96,99,102],{"title":91,"_path":92},"🥥 Coconut","/tools/coconut",{"title":94,"_path":95},"🧶 网易云音乐歌单排序","/tools/netease-sorter",{"title":97,"_path":98},"🌐 AnySort","/tools/anysort",{"title":100,"_path":101},"⛸️ UseScrollbar","/tools/use-scrollbar",{"title":103,"_path":104},"👓 Crapto","/tools/crypto-inline",{"title":106,"_path":107,"children":108},"吉他剧场 / Music","/music",[109,111,114,117,120,123,126,129],{"title":110,"_path":107},"🎸 FingerStyle！",{"title":112,"_path":113},"🌬️ 等待的风","/music/wind",{"title":115,"_path":116},"💕 约定的海洋","/music/ocean",{"title":118,"_path":119},"🎼 Wings~You are the Hero！","/music/wings-you-are-the-hero",{"title":121,"_path":122},"🌏 残酷天使的行动纲领","/music/eva",{"title":124,"_path":125},"🏔️ 奇跡の山","/music/miracle-mountain",{"title":127,"_path":128},"🍷 Wu Wei","/music/wu-wei",{"title":130,"_path":131},"🌅 无题","/music/untitled",{"title":133,"_path":134,"children":135},"画点什么 / Paint","/paint",[136],{"title":137,"_path":134},"🚧 正在施工",{"title":139,"_path":140,"children":141},"读书笔记 / Notes","/books",[142],{"title":143,"_path":140},"📕 读书笔记",{"title":145,"_path":146,"children":147},"知识地图 / Maps","/maps",[148],{"title":149,"_path":146},"🏁 知识地图",{"title":151,"_path":152,"children":153},"零散的笔记 / Gists","/gists",[154,156,159,162,165,168,171,174,177,180,183,186,189,192,195,198,201,204,207,210,213,216,219,222,225,228,231,234,237,240,243,246,249,252,255,258,261,264,267,270,273,276,279,282,285,288,291,294,297,300,303,306,309,312,315,318,321,324,327,330,333,336,339,342,345,348,351,354,357,360,363,366,369,372,375,378,381,384],{"title":155,"_path":152},"🧊 Gists",{"title":157,"_path":158},"网站的可访问性","/gists/accessibility",{"title":160,"_path":161},"Bit","/gists/bit",{"title":163,"_path":164},"图片模糊","/gists/blur",{"title":166,"_path":167},"渲染相关笔记","/gists/c4d",{"title":169,"_path":170},"CDN 问题记录","/gists/cdn",{"title":172,"_path":173},"消毒剂","/gists/cleaner",{"title":175,"_path":176},"Windows Command","/gists/cmd",{"title":178,"_path":179},"Command","/gists/command",{"title":181,"_path":182},"复杂科学","/gists/complexity-science",{"title":184,"_path":185},"GitHub Copilot","/gists/copilot",{"title":187,"_path":188},"宇宙","/gists/cosmos",{"title":190,"_path":191},"C++","/gists/cpp",{"title":193,"_path":194},"DEPRESSION","/gists/depression",{"title":196,"_path":197},"Developer Experience","/gists/developer-experience",{"title":199,"_path":200},"Device Metrics","/gists/device-metrix",{"title":202,"_path":203},"数字化转型","/gists/digital-transformation",{"title":205,"_path":206},"ECMAScript Language Specification","/gists/ecmascript-specification",{"title":208,"_path":209},"正则表达式","/gists/eegex",{"title":211,"_path":212},"Emoji","/gists/emoji",{"title":214,"_path":215},"工程","/gists/engineering",{"title":217,"_path":218},"熵","/gists/entropy",{"title":220,"_path":221},"Environment","/gists/environment",{"title":223,"_path":224},"Erlang","/gists/erlang",{"title":226,"_path":227},"逃离塔克夫","/gists/escape-from-tarkov",{"title":229,"_path":230},"ESNext (ES6-ES11)","/gists/esnext",{"title":232,"_path":233},"Eval！","/gists/eval",{"title":235,"_path":236},"Flutter","/gists/flutter",{"title":238,"_path":239},"字体","/gists/font",{"title":241,"_path":242},"JS 函数式编程","/gists/functional",{"title":244,"_path":245},"游戏化","/gists/gamification",{"title":247,"_path":248},"Google C++ Standard","/gists/google-cpp-standard",{"title":250,"_path":251},"双向链接完全体","/gists/graph",{"title":253,"_path":254},"Hardwares","/gists/hardwares",{"title":256,"_path":257},"哈希冲突","/gists/hash-collision",{"title":259,"_path":260},"信息设计","/gists/information-design",{"title":262,"_path":263},"InstantPage","/gists/instant.page",{"title":265,"_path":266},"ISUX 遇见大数据可视化系列","/gists/isux-data-visualization",{"title":268,"_path":269},"KVStore","/gists/key-value-db",{"title":271,"_path":272},"Kubernetes","/gists/kubernetes",{"title":274,"_path":275},"Makefile","/gists/makefile",{"title":277,"_path":278},"Markdown Inline Style","/gists/markdown-nice",{"title":280,"_path":281},"小程序","/gists/miniapp",{"title":283,"_path":284},"减小页面快照体积","/gists/minify-html",{"title":286,"_path":287},"mklink","/gists/mklink",{"title":289,"_path":290},"Mock","/gists/mock",{"title":292,"_path":293},"多人协作系统","/gists/multiplayer",{"title":295,"_path":296},"多端应用","/gists/multy-end-app",{"title":298,"_path":299},"神经科学","/gists/neuroscience",{"title":301,"_path":302},"Opinioned Personal Folder","/gists/opinioned-personal-folder",{"title":304,"_path":305},"PInvoke","/gists/pinvoke",{"title":307,"_path":308},"像素","/gists/pixel",{"title":310,"_path":311},"PowerShell","/gists/powershell",{"title":313,"_path":314},"量子","/gists/quantum",{"title":316,"_path":317},"保持好奇心","/gists/questions",{"title":319,"_path":320},"React Native","/gists/react-native",{"title":322,"_path":323},"博客改版碰到的浏览器平滑滚动问题","/gists/scroll",{"title":325,"_path":326},"SEO","/gists/seo",{"title":328,"_path":329},"Shader","/gists/shader",{"title":331,"_path":332},"Shape Up","/gists/shape-up",{"title":334,"_path":335},"睡觉","/gists/sleep",{"title":337,"_path":338},"记录奇怪的问题","/gists/solved",{"title":340,"_path":341},"States","/gists/states",{"title":343,"_path":344},"Storage","/gists/storage",{"title":346,"_path":347},"音视频流处理","/gists/stream-cli",{"title":349,"_path":350},"Symbol","/gists/symbol",{"title":352,"_path":353},"系统论","/gists/systems-theory",{"title":355,"_path":356},"Taro","/gists/taro",{"title":358,"_path":359},"任务切片","/gists/task-slice",{"title":361,"_path":362},"技术偏好","/gists/tech-dudge",{"title":364,"_path":365},"Untitled","/gists/untitled",{"title":367,"_path":368},"可变字体","/gists/variable-font",{"title":370,"_path":371},"视觉错觉","/gists/visual-illusion",{"title":373,"_path":374},"SS(SSR)","/gists/vpn",{"title":376,"_path":377},"VS Code 插件开发","/gists/vscode-plugin",{"title":379,"_path":380},"Web Components","/gists/web-components",{"title":382,"_path":383},"Windows","/gists/windows",{"title":385,"_path":386},"查缺补漏","/gists/wrong",{"title":388,"_path":389,"children":390},"我 / About","/hire",[391],{"title":392,"_path":389},"📬 技术简历",{"_path":394,"_dir":395,"_draft":396,"_partial":397,"_locale":398,"title":399,"description":398,"body":400,"_type":3017,"_id":3018,"_source":3019,"_file":3020,"_stem":3021,"_extension":3022},"/_achieved/2020-05/type-check","2020-05",false,true,"","🎫 常用类型判断方法的优势及缺陷",{"type":401,"children":402,"toc":3000},"root",[403,411,417,437,442,446,451,456,461,530,535,678,683,696,701,715,728,733,739,744,772,777,800,805,809,814,1153,1158,1166,1272,1277,1306,1311,1316,1538,1543,1570,1575,1580,1585,1598,1603,1608,1818,1823,1844,1848,1853,2146,2151,2156,2161,2289,2294,2540,2545,2690,2695,2700,2808,2813,2818,2878,2886,2891,2896,2901,2906,2924,2929,2934,2939,2994],{"type":404,"tag":405,"props":406,"children":408},"element","h2",{"id":407},"常用判断方法",[409],{"type":410,"value":407},"text",{"type":404,"tag":412,"props":413,"children":414},"p",{},[415],{"type":410,"value":416},"类型判断，在 JavaScript 中是一个很经典的问题了。围绕类型判断，有几种常见的解决方法，下是最常用的三种：",{"type":404,"tag":418,"props":419,"children":420},"ul",{},[421,427,432],{"type":404,"tag":422,"props":423,"children":424},"li",{},[425],{"type":410,"value":426},"typeof",{"type":404,"tag":422,"props":428,"children":429},{},[430],{"type":410,"value":431},"instanceof",{"type":404,"tag":422,"props":433,"children":434},{},[435],{"type":410,"value":436},"Object.prototype.toString.call",{"type":404,"tag":412,"props":438,"children":439},{},[440],{"type":410,"value":441},"我将在此文中根据这几种方法在 ECMAScript 规范下的描述及我们开发时的实际情况，聊聊这几种方法的优劣势所在。",{"type":404,"tag":405,"props":443,"children":444},{"id":426},[445],{"type":410,"value":426},{"type":404,"tag":412,"props":447,"children":448},{},[449],{"type":410,"value":450},"当我还是一个 JS 萌新的时候，我就爱上了 typeof 运算符，因为它的作用正如其名，非常好理解。\n利用 typeof 我们可以轻松判断常见的基础类型，如 Number、String、Boolean 等。",{"type":404,"tag":412,"props":452,"children":453},{},[454],{"type":410,"value":455},"ECMAScript 文档中有对 typeof 这样描述：",{"type":404,"tag":412,"props":457,"children":458},{},[459],{"type":410,"value":460},"$\\it{UnaryExpression} \\quad: \\quad \\bf{typeof} \\quad \\it{UnaryExpression}$",{"type":404,"tag":462,"props":463,"children":464},"ol",{},[465,470,505,516,525],{"type":404,"tag":422,"props":466,"children":467},{},[468],{"type":410,"value":469},"Let val be the result of evaluating UnaryExpression.",{"type":404,"tag":422,"props":471,"children":472},{},[473,475,481,483],{"type":410,"value":474},"If ",{"type":404,"tag":476,"props":477,"children":478},"em",{},[479],{"type":410,"value":480},"Type(val)",{"type":410,"value":482}," is Reference, then\n",{"type":404,"tag":418,"props":484,"children":485},{},[486],{"type":404,"tag":422,"props":487,"children":488},{},[489,490,495,497,503],{"type":410,"value":474},{"type":404,"tag":476,"props":491,"children":492},{},[493],{"type":410,"value":494},"IsUnresolvableReference(val)",{"type":410,"value":496}," is true, return ",{"type":404,"tag":498,"props":499,"children":500},"strong",{},[501],{"type":410,"value":502},"\"undefined\"",{"type":410,"value":504},".",{"type":404,"tag":422,"props":506,"children":507},{},[508,510,515],{"type":410,"value":509},"Let val be ",{"type":404,"tag":476,"props":511,"children":512},{},[513],{"type":410,"value":514},"GetValue(val)",{"type":410,"value":504},{"type":404,"tag":422,"props":517,"children":518},{},[519,524],{"type":404,"tag":476,"props":520,"children":521},{},[522],{"type":410,"value":523},"ReturnIfAbrupt(val)",{"type":410,"value":504},{"type":404,"tag":422,"props":526,"children":527},{},[528],{"type":410,"value":529},"Return a String according to Table Below.",{"type":404,"tag":412,"props":531,"children":532},{},[533],{"type":410,"value":534},"简单来说，就是先判断是不是引用未知，是则返回 'undefined'，不然就根据下表找值。",{"type":404,"tag":536,"props":537,"children":538},"table",{},[539,559],{"type":404,"tag":540,"props":541,"children":542},"thead",{},[543],{"type":404,"tag":544,"props":545,"children":546},"tr",{},[547,554],{"type":404,"tag":548,"props":549,"children":551},"th",{"align":550},"center",[552],{"type":410,"value":553},"类型",{"type":404,"tag":548,"props":555,"children":556},{"align":550},[557],{"type":410,"value":558},"返回",{"type":404,"tag":560,"props":561,"children":562},"tbody",{},[563,576,589,602,615,628,640,652,665],{"type":404,"tag":544,"props":564,"children":565},{},[566,572],{"type":404,"tag":567,"props":568,"children":569},"td",{"align":550},[570],{"type":410,"value":571},"Undefined",{"type":404,"tag":567,"props":573,"children":574},{"align":550},[575],{"type":410,"value":502},{"type":404,"tag":544,"props":577,"children":578},{},[579,584],{"type":404,"tag":567,"props":580,"children":581},{"align":550},[582],{"type":410,"value":583},"Null",{"type":404,"tag":567,"props":585,"children":586},{"align":550},[587],{"type":410,"value":588},"\"object\"",{"type":404,"tag":544,"props":590,"children":591},{},[592,597],{"type":404,"tag":567,"props":593,"children":594},{"align":550},[595],{"type":410,"value":596},"Boolean",{"type":404,"tag":567,"props":598,"children":599},{"align":550},[600],{"type":410,"value":601},"\"boolean\"",{"type":404,"tag":544,"props":603,"children":604},{},[605,610],{"type":404,"tag":567,"props":606,"children":607},{"align":550},[608],{"type":410,"value":609},"Number",{"type":404,"tag":567,"props":611,"children":612},{"align":550},[613],{"type":410,"value":614},"\"number\"",{"type":404,"tag":544,"props":616,"children":617},{},[618,623],{"type":404,"tag":567,"props":619,"children":620},{"align":550},[621],{"type":410,"value":622},"String",{"type":404,"tag":567,"props":624,"children":625},{"align":550},[626],{"type":410,"value":627},"\"string\"",{"type":404,"tag":544,"props":629,"children":630},{},[631,636],{"type":404,"tag":567,"props":632,"children":633},{"align":550},[634],{"type":410,"value":635},"Object (ordinary and does not implement [[Call]])",{"type":404,"tag":567,"props":637,"children":638},{"align":550},[639],{"type":410,"value":588},{"type":404,"tag":544,"props":641,"children":642},{},[643,648],{"type":404,"tag":567,"props":644,"children":645},{"align":550},[646],{"type":410,"value":647},"Object (standard exotic and does not implement [[Call]])",{"type":404,"tag":567,"props":649,"children":650},{"align":550},[651],{"type":410,"value":588},{"type":404,"tag":544,"props":653,"children":654},{},[655,660],{"type":404,"tag":567,"props":656,"children":657},{"align":550},[658],{"type":410,"value":659},"Object (implements [[Call]])",{"type":404,"tag":567,"props":661,"children":662},{"align":550},[663],{"type":410,"value":664},"\"function\"",{"type":404,"tag":544,"props":666,"children":667},{},[668,673],{"type":404,"tag":567,"props":669,"children":670},{"align":550},[671],{"type":410,"value":672},"Object (non-standard exotic and does not implement [[Call]])",{"type":404,"tag":567,"props":674,"children":675},{"align":550},[676],{"type":410,"value":677},"Implementation-defined. Must not be \"undefined\", \"boolean\", \"function\", \"number\", \"symbol\", or \"string\".",{"type":404,"tag":412,"props":679,"children":680},{},[681],{"type":410,"value":682},"这里我们详细说说两点：",{"type":404,"tag":462,"props":684,"children":685},{},[686,691],{"type":404,"tag":422,"props":687,"children":688},{},[689],{"type":410,"value":690},"判断内置对象",{"type":404,"tag":422,"props":692,"children":693},{},[694],{"type":410,"value":695},"typeof null === 'object'",{"type":404,"tag":697,"props":698,"children":699},"h3",{"id":690},[700],{"type":410,"value":690},{"type":404,"tag":412,"props":702,"children":703},{},[704,706,713],{"type":410,"value":705},"Function 作为内置对象，为什么 ",{"type":404,"tag":707,"props":708,"children":710},"code",{"className":709},[],[711],{"type":410,"value":712},"typeof (function a(){})",{"type":410,"value":714}," 的值不为“object”呢？",{"type":404,"tag":412,"props":716,"children":717},{},[718,720,726],{"type":410,"value":719},"其实上面那张表有相应线索，倒数第二条，这是一个特殊判定，“如果对象实现了内部方法[[Call]]” 或 “是 ",{"type":404,"tag":707,"props":721,"children":723},{"className":722},[],[724],{"type":410,"value":725},"Callable",{"type":410,"value":727}," 对象”，那么返回值为“function”。",{"type":404,"tag":412,"props":729,"children":730},{},[731],{"type":410,"value":732},"用 typeof 判断对象太麻烦了，一点儿也不实在。一般情况下，我们会用等下介绍的 Object.prototype.toString 去判断内置对象。",{"type":404,"tag":697,"props":734,"children":736},{"id":735},"typeof-null",[737],{"type":410,"value":738},"typeof null",{"type":404,"tag":412,"props":740,"children":741},{},[742],{"type":410,"value":743},"null 是用来标记“期待指向”的，不是 Object 类型，所以 typeof null === 'object' 是一个程序错误。\n这要追溯到第一版 JavaScript。这版 JS 的实现中，值是存储在 32 位单位中，其中端序最小的 3 位，用来表示值的类型，如下：",{"type":404,"tag":418,"props":745,"children":746},{},[747,752,757,762,767],{"type":404,"tag":422,"props":748,"children":749},{},[750],{"type":410,"value":751},"000：Object",{"type":404,"tag":422,"props":753,"children":754},{},[755],{"type":410,"value":756},"001：Int",{"type":404,"tag":422,"props":758,"children":759},{},[760],{"type":410,"value":761},"010：Double",{"type":404,"tag":422,"props":763,"children":764},{},[765],{"type":410,"value":766},"100：String",{"type":404,"tag":422,"props":768,"children":769},{},[770],{"type":410,"value":771},"110：Boolean",{"type":404,"tag":412,"props":773,"children":774},{},[775],{"type":410,"value":776},"此外，还有两种特殊值：",{"type":404,"tag":418,"props":778,"children":779},{},[780,790],{"type":404,"tag":422,"props":781,"children":782},{},[783,788],{"type":404,"tag":498,"props":784,"children":785},{},[786],{"type":410,"value":787},"undefined",{"type":410,"value":789}," (JSVAL_VOID): $-2^{32}$",{"type":404,"tag":422,"props":791,"children":792},{},[793,798],{"type":404,"tag":498,"props":794,"children":795},{},[796],{"type":410,"value":797},"null",{"type":410,"value":799}," (JSVAL_NULL): 用全为 0 的机器码表示的 NULL 指针（或，一个指向 0 的 Object 类型的值）",{"type":404,"tag":412,"props":801,"children":802},{},[803],{"type":410,"value":804},"也就是说，对程序而言，typeof null 判断类型是根据前三位 0 取得的“object”。这是一个历史遗留问题，有人提出过修复方案，但是怕影响历史遗留代码，修复便被否决了。",{"type":404,"tag":405,"props":806,"children":807},{"id":431},[808],{"type":410,"value":431},{"type":404,"tag":412,"props":810,"children":811},{},[812],{"type":410,"value":813},"内置 instanceof 运算符是用来检测构造函数的 prototype 属性是否存在于某个实例对象的原型链。\n用代码解释要更直观一些：",{"type":404,"tag":815,"props":816,"children":820},"pre",{"className":817,"code":818,"language":819,"meta":398,"style":398},"language-js shiki shiki-themes material-theme-lighter github-light github-dark monokai","function Car(make, model, year) {\n  this.make = make\n  this.model = model\n  this.year = year\n}\nconst auto = new Car('Honda', 'Accord', 1998)\n\n// true\nconsole.log((auto.__proto__ === Car.prototype) === auto instanceof Car)\n","js",[821],{"type":404,"tag":707,"props":822,"children":823},{"__ignoreMap":398},[824,883,913,939,965,974,1055,1064,1074],{"type":404,"tag":825,"props":826,"children":829},"span",{"class":827,"line":828},"line",1,[830,836,842,848,854,859,864,868,873,878],{"type":404,"tag":825,"props":831,"children":833},{"style":832},"--shiki-light:#9C3EDA;--shiki-light-font-style:inherit;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[834],{"type":410,"value":835},"function",{"type":404,"tag":825,"props":837,"children":839},{"style":838},"--shiki-light:#6182B8;--shiki-default:#6F42C1;--shiki-dark:#B392F0;--shiki-sepia:#A6E22E",[840],{"type":410,"value":841}," Car",{"type":404,"tag":825,"props":843,"children":845},{"style":844},"--shiki-light:#39ADB5;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[846],{"type":410,"value":847},"(",{"type":404,"tag":825,"props":849,"children":851},{"style":850},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#E36209;--shiki-default-font-style:inherit;--shiki-dark:#FFAB70;--shiki-dark-font-style:inherit;--shiki-sepia:#FD971F;--shiki-sepia-font-style:italic",[852],{"type":410,"value":853},"make",{"type":404,"tag":825,"props":855,"children":856},{"style":844},[857],{"type":410,"value":858},",",{"type":404,"tag":825,"props":860,"children":861},{"style":850},[862],{"type":410,"value":863}," model",{"type":404,"tag":825,"props":865,"children":866},{"style":844},[867],{"type":410,"value":858},{"type":404,"tag":825,"props":869,"children":870},{"style":850},[871],{"type":410,"value":872}," year",{"type":404,"tag":825,"props":874,"children":875},{"style":844},[876],{"type":410,"value":877},")",{"type":404,"tag":825,"props":879,"children":880},{"style":844},[881],{"type":410,"value":882}," {\n",{"type":404,"tag":825,"props":884,"children":886},{"class":827,"line":885},2,[887,893,897,902,908],{"type":404,"tag":825,"props":888,"children":890},{"style":889},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[891],{"type":410,"value":892},"  this",{"type":404,"tag":825,"props":894,"children":895},{"style":844},[896],{"type":410,"value":504},{"type":404,"tag":825,"props":898,"children":900},{"style":899},"--shiki-light:#90A4AE;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[901],{"type":410,"value":853},{"type":404,"tag":825,"props":903,"children":905},{"style":904},"--shiki-light:#39ADB5;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[906],{"type":410,"value":907}," =",{"type":404,"tag":825,"props":909,"children":910},{"style":899},[911],{"type":410,"value":912}," make\n",{"type":404,"tag":825,"props":914,"children":916},{"class":827,"line":915},3,[917,921,925,930,934],{"type":404,"tag":825,"props":918,"children":919},{"style":889},[920],{"type":410,"value":892},{"type":404,"tag":825,"props":922,"children":923},{"style":844},[924],{"type":410,"value":504},{"type":404,"tag":825,"props":926,"children":927},{"style":899},[928],{"type":410,"value":929},"model",{"type":404,"tag":825,"props":931,"children":932},{"style":904},[933],{"type":410,"value":907},{"type":404,"tag":825,"props":935,"children":936},{"style":899},[937],{"type":410,"value":938}," model\n",{"type":404,"tag":825,"props":940,"children":942},{"class":827,"line":941},4,[943,947,951,956,960],{"type":404,"tag":825,"props":944,"children":945},{"style":889},[946],{"type":410,"value":892},{"type":404,"tag":825,"props":948,"children":949},{"style":844},[950],{"type":410,"value":504},{"type":404,"tag":825,"props":952,"children":953},{"style":899},[954],{"type":410,"value":955},"year",{"type":404,"tag":825,"props":957,"children":958},{"style":904},[959],{"type":410,"value":907},{"type":404,"tag":825,"props":961,"children":962},{"style":899},[963],{"type":410,"value":964}," year\n",{"type":404,"tag":825,"props":966,"children":968},{"class":827,"line":967},5,[969],{"type":404,"tag":825,"props":970,"children":971},{"style":844},[972],{"type":410,"value":973},"}\n",{"type":404,"tag":825,"props":975,"children":977},{"class":827,"line":976},6,[978,983,989,993,998,1002,1006,1012,1018,1022,1026,1031,1036,1040,1044,1050],{"type":404,"tag":825,"props":979,"children":980},{"style":832},[981],{"type":410,"value":982},"const",{"type":404,"tag":825,"props":984,"children":986},{"style":985},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#F8F8F2",[987],{"type":410,"value":988}," auto",{"type":404,"tag":825,"props":990,"children":991},{"style":904},[992],{"type":410,"value":907},{"type":404,"tag":825,"props":994,"children":995},{"style":904},[996],{"type":410,"value":997}," new",{"type":404,"tag":825,"props":999,"children":1000},{"style":838},[1001],{"type":410,"value":841},{"type":404,"tag":825,"props":1003,"children":1004},{"style":899},[1005],{"type":410,"value":847},{"type":404,"tag":825,"props":1007,"children":1009},{"style":1008},"--shiki-light:#39ADB5;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1010],{"type":410,"value":1011},"'",{"type":404,"tag":825,"props":1013,"children":1015},{"style":1014},"--shiki-light:#91B859;--shiki-default:#032F62;--shiki-dark:#9ECBFF;--shiki-sepia:#E6DB74",[1016],{"type":410,"value":1017},"Honda",{"type":404,"tag":825,"props":1019,"children":1020},{"style":1008},[1021],{"type":410,"value":1011},{"type":404,"tag":825,"props":1023,"children":1024},{"style":844},[1025],{"type":410,"value":858},{"type":404,"tag":825,"props":1027,"children":1028},{"style":1008},[1029],{"type":410,"value":1030}," '",{"type":404,"tag":825,"props":1032,"children":1033},{"style":1014},[1034],{"type":410,"value":1035},"Accord",{"type":404,"tag":825,"props":1037,"children":1038},{"style":1008},[1039],{"type":410,"value":1011},{"type":404,"tag":825,"props":1041,"children":1042},{"style":844},[1043],{"type":410,"value":858},{"type":404,"tag":825,"props":1045,"children":1047},{"style":1046},"--shiki-light:#F76D47;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1048],{"type":410,"value":1049}," 1998",{"type":404,"tag":825,"props":1051,"children":1052},{"style":899},[1053],{"type":410,"value":1054},")\n",{"type":404,"tag":825,"props":1056,"children":1058},{"class":827,"line":1057},7,[1059],{"type":404,"tag":825,"props":1060,"children":1061},{"emptyLinePlaceholder":397},[1062],{"type":410,"value":1063},"\n",{"type":404,"tag":825,"props":1065,"children":1067},{"class":827,"line":1066},8,[1068],{"type":404,"tag":825,"props":1069,"children":1071},{"style":1070},"--shiki-light:#90A4AE;--shiki-light-font-style:italic;--shiki-default:#6A737D;--shiki-default-font-style:inherit;--shiki-dark:#6A737D;--shiki-dark-font-style:inherit;--shiki-sepia:#88846F;--shiki-sepia-font-style:inherit",[1072],{"type":410,"value":1073},"// true\n",{"type":404,"tag":825,"props":1075,"children":1077},{"class":827,"line":1076},9,[1078,1083,1087,1092,1097,1101,1106,1111,1116,1120,1125,1130,1135,1140,1144,1149],{"type":404,"tag":825,"props":1079,"children":1080},{"style":899},[1081],{"type":410,"value":1082},"console",{"type":404,"tag":825,"props":1084,"children":1085},{"style":844},[1086],{"type":410,"value":504},{"type":404,"tag":825,"props":1088,"children":1089},{"style":838},[1090],{"type":410,"value":1091},"log",{"type":404,"tag":825,"props":1093,"children":1094},{"style":899},[1095],{"type":410,"value":1096},"((auto",{"type":404,"tag":825,"props":1098,"children":1099},{"style":844},[1100],{"type":410,"value":504},{"type":404,"tag":825,"props":1102,"children":1103},{"style":985},[1104],{"type":410,"value":1105},"__proto__",{"type":404,"tag":825,"props":1107,"children":1108},{"style":904},[1109],{"type":410,"value":1110}," ===",{"type":404,"tag":825,"props":1112,"children":1114},{"style":1113},"--shiki-light:#E2931D;--shiki-light-font-style:inherit;--shiki-default:#005CC5;--shiki-default-font-style:inherit;--shiki-dark:#79B8FF;--shiki-dark-font-style:inherit;--shiki-sepia:#66D9EF;--shiki-sepia-font-style:italic",[1115],{"type":410,"value":841},{"type":404,"tag":825,"props":1117,"children":1118},{"style":844},[1119],{"type":410,"value":504},{"type":404,"tag":825,"props":1121,"children":1122},{"style":985},[1123],{"type":410,"value":1124},"prototype",{"type":404,"tag":825,"props":1126,"children":1127},{"style":899},[1128],{"type":410,"value":1129},") ",{"type":404,"tag":825,"props":1131,"children":1132},{"style":904},[1133],{"type":410,"value":1134},"===",{"type":404,"tag":825,"props":1136,"children":1137},{"style":899},[1138],{"type":410,"value":1139}," auto ",{"type":404,"tag":825,"props":1141,"children":1142},{"style":904},[1143],{"type":410,"value":431},{"type":404,"tag":825,"props":1145,"children":1147},{"style":1146},"--shiki-light:#E2931D;--shiki-light-text-decoration:inherit;--shiki-default:#6F42C1;--shiki-default-text-decoration:inherit;--shiki-dark:#B392F0;--shiki-dark-text-decoration:inherit;--shiki-sepia:#A6E22E;--shiki-sepia-text-decoration:underline",[1148],{"type":410,"value":841},{"type":404,"tag":825,"props":1150,"children":1151},{"style":899},[1152],{"type":410,"value":1054},{"type":404,"tag":412,"props":1154,"children":1155},{},[1156],{"type":410,"value":1157},"我们直接看看规范是怎么定义 instanceof 运算符的：",{"type":404,"tag":412,"props":1159,"children":1160},{},[1161],{"type":404,"tag":498,"props":1162,"children":1163},{},[1164],{"type":410,"value":1165},"InstanceofOperator(O, C)",{"type":404,"tag":462,"props":1167,"children":1168},{},[1169,1187,1205,1214,1239,1262],{"type":404,"tag":422,"props":1170,"children":1171},{},[1172,1173,1178,1180,1185],{"type":410,"value":474},{"type":404,"tag":476,"props":1174,"children":1175},{},[1176],{"type":410,"value":1177},"Type(C)",{"type":410,"value":1179}," is not Object, throw a ",{"type":404,"tag":498,"props":1181,"children":1182},{},[1183],{"type":410,"value":1184},"TypeError",{"type":410,"value":1186}," exception.",{"type":404,"tag":422,"props":1188,"children":1189},{},[1190,1192,1197,1199,1204],{"type":410,"value":1191},"Let ",{"type":404,"tag":476,"props":1193,"children":1194},{},[1195],{"type":410,"value":1196},"instOfHandler",{"type":410,"value":1198}," be ",{"type":404,"tag":476,"props":1200,"children":1201},{},[1202],{"type":410,"value":1203},"GetMethod(C,@@hasInstance)",{"type":410,"value":504},{"type":404,"tag":422,"props":1206,"children":1207},{},[1208,1213],{"type":404,"tag":476,"props":1209,"children":1210},{},[1211],{"type":410,"value":1212},"ReturnIfAbrupt(instOfHandler)",{"type":410,"value":504},{"type":404,"tag":422,"props":1215,"children":1216},{},[1217,1219,1223,1225],{"type":410,"value":1218},"If instOfHandler is not ",{"type":404,"tag":498,"props":1220,"children":1221},{},[1222],{"type":410,"value":787},{"type":410,"value":1224},", then\n",{"type":404,"tag":418,"props":1226,"children":1227},{},[1228],{"type":404,"tag":422,"props":1229,"children":1230},{},[1231,1233,1238],{"type":410,"value":1232},"Return ",{"type":404,"tag":476,"props":1234,"children":1235},{},[1236],{"type":410,"value":1237},"ToBoolean(Call(instOfHandler, C, «O»))",{"type":410,"value":504},{"type":404,"tag":422,"props":1240,"children":1241},{},[1242,1243,1248,1250,1255,1257,1261],{"type":410,"value":474},{"type":404,"tag":476,"props":1244,"children":1245},{},[1246],{"type":410,"value":1247},"IsCallable(C)",{"type":410,"value":1249}," is ",{"type":404,"tag":498,"props":1251,"children":1252},{},[1253],{"type":410,"value":1254},"false",{"type":410,"value":1256},", throw a ",{"type":404,"tag":498,"props":1258,"children":1259},{},[1260],{"type":410,"value":1184},{"type":410,"value":1186},{"type":404,"tag":422,"props":1263,"children":1264},{},[1265,1266,1271],{"type":410,"value":1232},{"type":404,"tag":476,"props":1267,"children":1268},{},[1269],{"type":410,"value":1270},"OrdinaryHasInstance(C, O)",{"type":410,"value":504},{"type":404,"tag":412,"props":1273,"children":1274},{},[1275],{"type":410,"value":1276},"第一条，如果 C 的类型不是对象，那么会抛出类型错误，重现如下：",{"type":404,"tag":815,"props":1278,"children":1280},{"className":817,"code":1279,"language":819,"meta":398,"style":398},";[] instanceof 1\n",[1281],{"type":404,"tag":707,"props":1282,"children":1283},{"__ignoreMap":398},[1284],{"type":404,"tag":825,"props":1285,"children":1286},{"class":827,"line":828},[1287,1292,1297,1301],{"type":404,"tag":825,"props":1288,"children":1289},{"style":844},[1290],{"type":410,"value":1291},";",{"type":404,"tag":825,"props":1293,"children":1294},{"style":899},[1295],{"type":410,"value":1296},"[] ",{"type":404,"tag":825,"props":1298,"children":1299},{"style":904},[1300],{"type":410,"value":431},{"type":404,"tag":825,"props":1302,"children":1303},{"style":1046},[1304],{"type":410,"value":1305}," 1\n",{"type":404,"tag":412,"props":1307,"children":1308},{},[1309],{"type":410,"value":1310},"::: danger\nVM1008:1 Uncaught TypeError: Right-hand side of 'instanceof' is not an object\n:::",{"type":404,"tag":412,"props":1312,"children":1313},{},[1314],{"type":410,"value":1315},"第二至第四条，判断 C 是否有内置的 hasInstance 实现，即 Symbol.hasInstance，如果有，则调用此方法。\n也就是说，对复杂类型，我们可以通过 Symbol，自定义 instanceof 运算符的实现，用下列代码举例：",{"type":404,"tag":815,"props":1317,"children":1319},{"className":817,"code":1318,"language":819,"meta":398,"style":398},"class Lionad {\n  static [Symbol.hasInstance](obj) {\n    return obj && obj.isCute\n  }\n}\n\nconsole.log({} instanceof Lionad) // false\nconsole.log({ isCute: true } instanceof Lionad) // true\n",[1320],{"type":404,"tag":707,"props":1321,"children":1322},{"__ignoreMap":398},[1323,1340,1380,1412,1420,1427,1434,1476],{"type":404,"tag":825,"props":1324,"children":1325},{"class":827,"line":828},[1326,1331,1336],{"type":404,"tag":825,"props":1327,"children":1328},{"style":832},[1329],{"type":410,"value":1330},"class",{"type":404,"tag":825,"props":1332,"children":1333},{"style":1146},[1334],{"type":410,"value":1335}," Lionad",{"type":404,"tag":825,"props":1337,"children":1338},{"style":844},[1339],{"type":410,"value":882},{"type":404,"tag":825,"props":1341,"children":1342},{"class":827,"line":885},[1343,1349,1354,1358,1363,1367,1372,1376],{"type":404,"tag":825,"props":1344,"children":1346},{"style":1345},"--shiki-light:#9C3EDA;--shiki-default:#D73A49;--shiki-dark:#F97583;--shiki-sepia:#F92672",[1347],{"type":410,"value":1348},"  static",{"type":404,"tag":825,"props":1350,"children":1351},{"style":899},[1352],{"type":410,"value":1353}," [Symbol",{"type":404,"tag":825,"props":1355,"children":1356},{"style":844},[1357],{"type":410,"value":504},{"type":404,"tag":825,"props":1359,"children":1360},{"style":899},[1361],{"type":410,"value":1362},"hasInstance]",{"type":404,"tag":825,"props":1364,"children":1365},{"style":844},[1366],{"type":410,"value":847},{"type":404,"tag":825,"props":1368,"children":1369},{"style":850},[1370],{"type":410,"value":1371},"obj",{"type":404,"tag":825,"props":1373,"children":1374},{"style":844},[1375],{"type":410,"value":877},{"type":404,"tag":825,"props":1377,"children":1378},{"style":844},[1379],{"type":410,"value":882},{"type":404,"tag":825,"props":1381,"children":1382},{"class":827,"line":915},[1383,1389,1394,1399,1403,1407],{"type":404,"tag":825,"props":1384,"children":1386},{"style":1385},"--shiki-light:#39ADB5;--shiki-light-font-style:italic;--shiki-default:#D73A49;--shiki-default-font-style:inherit;--shiki-dark:#F97583;--shiki-dark-font-style:inherit;--shiki-sepia:#F92672;--shiki-sepia-font-style:inherit",[1387],{"type":410,"value":1388},"    return",{"type":404,"tag":825,"props":1390,"children":1391},{"style":899},[1392],{"type":410,"value":1393}," obj",{"type":404,"tag":825,"props":1395,"children":1396},{"style":904},[1397],{"type":410,"value":1398}," &&",{"type":404,"tag":825,"props":1400,"children":1401},{"style":899},[1402],{"type":410,"value":1393},{"type":404,"tag":825,"props":1404,"children":1405},{"style":844},[1406],{"type":410,"value":504},{"type":404,"tag":825,"props":1408,"children":1409},{"style":899},[1410],{"type":410,"value":1411},"isCute\n",{"type":404,"tag":825,"props":1413,"children":1414},{"class":827,"line":941},[1415],{"type":404,"tag":825,"props":1416,"children":1417},{"style":844},[1418],{"type":410,"value":1419},"  }\n",{"type":404,"tag":825,"props":1421,"children":1422},{"class":827,"line":967},[1423],{"type":404,"tag":825,"props":1424,"children":1425},{"style":844},[1426],{"type":410,"value":973},{"type":404,"tag":825,"props":1428,"children":1429},{"class":827,"line":976},[1430],{"type":404,"tag":825,"props":1431,"children":1432},{"emptyLinePlaceholder":397},[1433],{"type":410,"value":1063},{"type":404,"tag":825,"props":1435,"children":1436},{"class":827,"line":1057},[1437,1441,1445,1449,1453,1458,1463,1467,1471],{"type":404,"tag":825,"props":1438,"children":1439},{"style":899},[1440],{"type":410,"value":1082},{"type":404,"tag":825,"props":1442,"children":1443},{"style":844},[1444],{"type":410,"value":504},{"type":404,"tag":825,"props":1446,"children":1447},{"style":838},[1448],{"type":410,"value":1091},{"type":404,"tag":825,"props":1450,"children":1451},{"style":899},[1452],{"type":410,"value":847},{"type":404,"tag":825,"props":1454,"children":1455},{"style":844},[1456],{"type":410,"value":1457},"{}",{"type":404,"tag":825,"props":1459,"children":1460},{"style":904},[1461],{"type":410,"value":1462}," instanceof",{"type":404,"tag":825,"props":1464,"children":1465},{"style":1146},[1466],{"type":410,"value":1335},{"type":404,"tag":825,"props":1468,"children":1469},{"style":899},[1470],{"type":410,"value":1129},{"type":404,"tag":825,"props":1472,"children":1473},{"style":1070},[1474],{"type":410,"value":1475},"// false\n",{"type":404,"tag":825,"props":1477,"children":1478},{"class":827,"line":1066},[1479,1483,1487,1491,1495,1500,1506,1511,1517,1522,1526,1530,1534],{"type":404,"tag":825,"props":1480,"children":1481},{"style":899},[1482],{"type":410,"value":1082},{"type":404,"tag":825,"props":1484,"children":1485},{"style":844},[1486],{"type":410,"value":504},{"type":404,"tag":825,"props":1488,"children":1489},{"style":838},[1490],{"type":410,"value":1091},{"type":404,"tag":825,"props":1492,"children":1493},{"style":899},[1494],{"type":410,"value":847},{"type":404,"tag":825,"props":1496,"children":1497},{"style":844},[1498],{"type":410,"value":1499},"{",{"type":404,"tag":825,"props":1501,"children":1503},{"style":1502},"--shiki-light:#E53935;--shiki-default:#24292E;--shiki-dark:#E1E4E8;--shiki-sepia:#F8F8F2",[1504],{"type":410,"value":1505}," isCute",{"type":404,"tag":825,"props":1507,"children":1508},{"style":844},[1509],{"type":410,"value":1510},":",{"type":404,"tag":825,"props":1512,"children":1514},{"style":1513},"--shiki-light:#FF5370;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1515],{"type":410,"value":1516}," true",{"type":404,"tag":825,"props":1518,"children":1519},{"style":844},[1520],{"type":410,"value":1521}," }",{"type":404,"tag":825,"props":1523,"children":1524},{"style":904},[1525],{"type":410,"value":1462},{"type":404,"tag":825,"props":1527,"children":1528},{"style":1146},[1529],{"type":410,"value":1335},{"type":404,"tag":825,"props":1531,"children":1532},{"style":899},[1533],{"type":410,"value":1129},{"type":404,"tag":825,"props":1535,"children":1536},{"style":1070},[1537],{"type":410,"value":1073},{"type":404,"tag":412,"props":1539,"children":1540},{},[1541],{"type":410,"value":1542},"这之后，第五条，如果 C 非 Callable 对象（还记得我们在 typeof 提到的内部方法[[call]]吗，Callable 对象即实现了[[call]]内部方法的对象，比如说某个函数），抛出类型错误，重现如下：",{"type":404,"tag":815,"props":1544,"children":1546},{"className":817,"code":1545,"language":819,"meta":398,"style":398},";[] instanceof []\n",[1547],{"type":404,"tag":707,"props":1548,"children":1549},{"__ignoreMap":398},[1550],{"type":404,"tag":825,"props":1551,"children":1552},{"class":827,"line":828},[1553,1557,1561,1565],{"type":404,"tag":825,"props":1554,"children":1555},{"style":844},[1556],{"type":410,"value":1291},{"type":404,"tag":825,"props":1558,"children":1559},{"style":899},[1560],{"type":410,"value":1296},{"type":404,"tag":825,"props":1562,"children":1563},{"style":904},[1564],{"type":410,"value":431},{"type":404,"tag":825,"props":1566,"children":1567},{"style":899},[1568],{"type":410,"value":1569}," []\n",{"type":404,"tag":412,"props":1571,"children":1572},{},[1573],{"type":410,"value":1574},"::: danger\nVM684:1 Uncaught TypeError: Right-hand side of 'instanceof' is not callable\n:::",{"type":404,"tag":412,"props":1576,"children":1577},{},[1578],{"type":410,"value":1579},"最后，返回调用内置 instanceof 实现的结果。",{"type":404,"tag":412,"props":1581,"children":1582},{},[1583],{"type":410,"value":1584},"不过，需要强调的是，instanceof 也有缺陷存在，主要体现在两个方面：",{"type":404,"tag":462,"props":1586,"children":1587},{},[1588,1593],{"type":404,"tag":422,"props":1589,"children":1590},{},[1591],{"type":410,"value":1592},"判断的依据是原型链",{"type":404,"tag":422,"props":1594,"children":1595},{},[1596],{"type":410,"value":1597},"跨宿主运算",{"type":404,"tag":697,"props":1599,"children":1601},{"id":1600},"依据原型链",[1602],{"type":410,"value":1600},{"type":404,"tag":412,"props":1604,"children":1605},{},[1606],{"type":410,"value":1607},"使用 instanceof 运算符判断对象字面量，会出现另人诧异的结果，见下代码：",{"type":404,"tag":815,"props":1609,"children":1611},{"className":817,"code":1610,"language":819,"meta":398,"style":398},"console.log(\n  'hello world' instanceof String, // false\n  new String('asdf') instanceof String, // true\n  {} instanceof Object, // true\n  [] instanceof Object, // true\n  Object.create(null) instanceof Object // false\n)\n",[1612],{"type":404,"tag":707,"props":1613,"children":1614},{"__ignoreMap":398},[1615,1635,1670,1720,1745,1769,1811],{"type":404,"tag":825,"props":1616,"children":1617},{"class":827,"line":828},[1618,1622,1626,1630],{"type":404,"tag":825,"props":1619,"children":1620},{"style":899},[1621],{"type":410,"value":1082},{"type":404,"tag":825,"props":1623,"children":1624},{"style":844},[1625],{"type":410,"value":504},{"type":404,"tag":825,"props":1627,"children":1628},{"style":838},[1629],{"type":410,"value":1091},{"type":404,"tag":825,"props":1631,"children":1632},{"style":899},[1633],{"type":410,"value":1634},"(\n",{"type":404,"tag":825,"props":1636,"children":1637},{"class":827,"line":885},[1638,1643,1648,1652,1656,1661,1665],{"type":404,"tag":825,"props":1639,"children":1640},{"style":1008},[1641],{"type":410,"value":1642},"  '",{"type":404,"tag":825,"props":1644,"children":1645},{"style":1014},[1646],{"type":410,"value":1647},"hello world",{"type":404,"tag":825,"props":1649,"children":1650},{"style":1008},[1651],{"type":410,"value":1011},{"type":404,"tag":825,"props":1653,"children":1654},{"style":904},[1655],{"type":410,"value":1462},{"type":404,"tag":825,"props":1657,"children":1658},{"style":1146},[1659],{"type":410,"value":1660}," String",{"type":404,"tag":825,"props":1662,"children":1663},{"style":844},[1664],{"type":410,"value":858},{"type":404,"tag":825,"props":1666,"children":1667},{"style":1070},[1668],{"type":410,"value":1669}," // false\n",{"type":404,"tag":825,"props":1671,"children":1672},{"class":827,"line":915},[1673,1678,1682,1686,1690,1695,1699,1703,1707,1711,1715],{"type":404,"tag":825,"props":1674,"children":1675},{"style":904},[1676],{"type":410,"value":1677},"  new",{"type":404,"tag":825,"props":1679,"children":1680},{"style":838},[1681],{"type":410,"value":1660},{"type":404,"tag":825,"props":1683,"children":1684},{"style":899},[1685],{"type":410,"value":847},{"type":404,"tag":825,"props":1687,"children":1688},{"style":1008},[1689],{"type":410,"value":1011},{"type":404,"tag":825,"props":1691,"children":1692},{"style":1014},[1693],{"type":410,"value":1694},"asdf",{"type":404,"tag":825,"props":1696,"children":1697},{"style":1008},[1698],{"type":410,"value":1011},{"type":404,"tag":825,"props":1700,"children":1701},{"style":899},[1702],{"type":410,"value":1129},{"type":404,"tag":825,"props":1704,"children":1705},{"style":904},[1706],{"type":410,"value":431},{"type":404,"tag":825,"props":1708,"children":1709},{"style":1146},[1710],{"type":410,"value":1660},{"type":404,"tag":825,"props":1712,"children":1713},{"style":844},[1714],{"type":410,"value":858},{"type":404,"tag":825,"props":1716,"children":1717},{"style":1070},[1718],{"type":410,"value":1719}," // true\n",{"type":404,"tag":825,"props":1721,"children":1722},{"class":827,"line":941},[1723,1728,1732,1737,1741],{"type":404,"tag":825,"props":1724,"children":1725},{"style":844},[1726],{"type":410,"value":1727},"  {}",{"type":404,"tag":825,"props":1729,"children":1730},{"style":904},[1731],{"type":410,"value":1462},{"type":404,"tag":825,"props":1733,"children":1734},{"style":1146},[1735],{"type":410,"value":1736}," Object",{"type":404,"tag":825,"props":1738,"children":1739},{"style":844},[1740],{"type":410,"value":858},{"type":404,"tag":825,"props":1742,"children":1743},{"style":1070},[1744],{"type":410,"value":1719},{"type":404,"tag":825,"props":1746,"children":1747},{"class":827,"line":967},[1748,1753,1757,1761,1765],{"type":404,"tag":825,"props":1749,"children":1750},{"style":899},[1751],{"type":410,"value":1752},"  [] ",{"type":404,"tag":825,"props":1754,"children":1755},{"style":904},[1756],{"type":410,"value":431},{"type":404,"tag":825,"props":1758,"children":1759},{"style":1146},[1760],{"type":410,"value":1736},{"type":404,"tag":825,"props":1762,"children":1763},{"style":844},[1764],{"type":410,"value":858},{"type":404,"tag":825,"props":1766,"children":1767},{"style":1070},[1768],{"type":410,"value":1719},{"type":404,"tag":825,"props":1770,"children":1771},{"class":827,"line":976},[1772,1777,1781,1786,1790,1795,1799,1803,1807],{"type":404,"tag":825,"props":1773,"children":1774},{"style":899},[1775],{"type":410,"value":1776},"  Object",{"type":404,"tag":825,"props":1778,"children":1779},{"style":844},[1780],{"type":410,"value":504},{"type":404,"tag":825,"props":1782,"children":1783},{"style":838},[1784],{"type":410,"value":1785},"create",{"type":404,"tag":825,"props":1787,"children":1788},{"style":899},[1789],{"type":410,"value":847},{"type":404,"tag":825,"props":1791,"children":1793},{"style":1792},"--shiki-light:#39ADB5;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#AE81FF",[1794],{"type":410,"value":797},{"type":404,"tag":825,"props":1796,"children":1797},{"style":899},[1798],{"type":410,"value":1129},{"type":404,"tag":825,"props":1800,"children":1801},{"style":904},[1802],{"type":410,"value":431},{"type":404,"tag":825,"props":1804,"children":1805},{"style":1146},[1806],{"type":410,"value":1736},{"type":404,"tag":825,"props":1808,"children":1809},{"style":1070},[1810],{"type":410,"value":1669},{"type":404,"tag":825,"props":1812,"children":1813},{"class":827,"line":1057},[1814],{"type":404,"tag":825,"props":1815,"children":1816},{"style":899},[1817],{"type":410,"value":1054},{"type":404,"tag":412,"props":1819,"children":1820},{},[1821],{"type":410,"value":1822},"题外话，上面几行代码还隐式说明了这些问题：",{"type":404,"tag":418,"props":1824,"children":1825},{},[1826],{"type":404,"tag":422,"props":1827,"children":1828},{},[1829,1831,1836,1838],{"type":410,"value":1830},"对于对象字面量 ",{"type":404,"tag":707,"props":1832,"children":1834},{"className":1833},[],[1835],{"type":410,"value":1457},{"type":410,"value":1837}," 有 ",{"type":404,"tag":707,"props":1839,"children":1841},{"className":1840},[],[1842],{"type":410,"value":1843},"({}).__proto__ === Object.prototype",{"type":404,"tag":697,"props":1845,"children":1846},{"id":1597},[1847],{"type":410,"value":1597},{"type":404,"tag":412,"props":1849,"children":1850},{},[1851],{"type":410,"value":1852},"关于跨宿主运算，可以尝试以下代码重现:",{"type":404,"tag":815,"props":1854,"children":1856},{"className":817,"code":1855,"language":819,"meta":398,"style":398},"const iframe = document.createElement('iframe')\ndocument.body.appendChild(iframe)\nxArray = window.frames[window.frames.length - 1].Array\nconst xArr = new xArray(1, 2, 3)\n\nconsole.log(xArr instanceof xArray) // true\nconsole.log(xArr instanceof Array) // false\n",[1857],{"type":404,"tag":707,"props":1858,"children":1859},{"__ignoreMap":398},[1860,1911,1942,2011,2067,2074,2110],{"type":404,"tag":825,"props":1861,"children":1862},{"class":827,"line":828},[1863,1867,1872,1876,1881,1885,1890,1894,1898,1903,1907],{"type":404,"tag":825,"props":1864,"children":1865},{"style":832},[1866],{"type":410,"value":982},{"type":404,"tag":825,"props":1868,"children":1869},{"style":985},[1870],{"type":410,"value":1871}," iframe",{"type":404,"tag":825,"props":1873,"children":1874},{"style":904},[1875],{"type":410,"value":907},{"type":404,"tag":825,"props":1877,"children":1878},{"style":899},[1879],{"type":410,"value":1880}," document",{"type":404,"tag":825,"props":1882,"children":1883},{"style":844},[1884],{"type":410,"value":504},{"type":404,"tag":825,"props":1886,"children":1887},{"style":838},[1888],{"type":410,"value":1889},"createElement",{"type":404,"tag":825,"props":1891,"children":1892},{"style":899},[1893],{"type":410,"value":847},{"type":404,"tag":825,"props":1895,"children":1896},{"style":1008},[1897],{"type":410,"value":1011},{"type":404,"tag":825,"props":1899,"children":1900},{"style":1014},[1901],{"type":410,"value":1902},"iframe",{"type":404,"tag":825,"props":1904,"children":1905},{"style":1008},[1906],{"type":410,"value":1011},{"type":404,"tag":825,"props":1908,"children":1909},{"style":899},[1910],{"type":410,"value":1054},{"type":404,"tag":825,"props":1912,"children":1913},{"class":827,"line":885},[1914,1919,1923,1928,1932,1937],{"type":404,"tag":825,"props":1915,"children":1916},{"style":899},[1917],{"type":410,"value":1918},"document",{"type":404,"tag":825,"props":1920,"children":1921},{"style":844},[1922],{"type":410,"value":504},{"type":404,"tag":825,"props":1924,"children":1925},{"style":899},[1926],{"type":410,"value":1927},"body",{"type":404,"tag":825,"props":1929,"children":1930},{"style":844},[1931],{"type":410,"value":504},{"type":404,"tag":825,"props":1933,"children":1934},{"style":838},[1935],{"type":410,"value":1936},"appendChild",{"type":404,"tag":825,"props":1938,"children":1939},{"style":899},[1940],{"type":410,"value":1941},"(iframe)\n",{"type":404,"tag":825,"props":1943,"children":1944},{"class":827,"line":915},[1945,1950,1955,1960,1964,1969,1973,1978,1982,1987,1992,1997,2002,2006],{"type":404,"tag":825,"props":1946,"children":1947},{"style":899},[1948],{"type":410,"value":1949},"xArray ",{"type":404,"tag":825,"props":1951,"children":1952},{"style":904},[1953],{"type":410,"value":1954},"=",{"type":404,"tag":825,"props":1956,"children":1957},{"style":899},[1958],{"type":410,"value":1959}," window",{"type":404,"tag":825,"props":1961,"children":1962},{"style":844},[1963],{"type":410,"value":504},{"type":404,"tag":825,"props":1965,"children":1966},{"style":899},[1967],{"type":410,"value":1968},"frames[window",{"type":404,"tag":825,"props":1970,"children":1971},{"style":844},[1972],{"type":410,"value":504},{"type":404,"tag":825,"props":1974,"children":1975},{"style":899},[1976],{"type":410,"value":1977},"frames",{"type":404,"tag":825,"props":1979,"children":1980},{"style":844},[1981],{"type":410,"value":504},{"type":404,"tag":825,"props":1983,"children":1984},{"style":985},[1985],{"type":410,"value":1986},"length",{"type":404,"tag":825,"props":1988,"children":1989},{"style":904},[1990],{"type":410,"value":1991}," -",{"type":404,"tag":825,"props":1993,"children":1994},{"style":1046},[1995],{"type":410,"value":1996}," 1",{"type":404,"tag":825,"props":1998,"children":1999},{"style":899},[2000],{"type":410,"value":2001},"]",{"type":404,"tag":825,"props":2003,"children":2004},{"style":844},[2005],{"type":410,"value":504},{"type":404,"tag":825,"props":2007,"children":2008},{"style":899},[2009],{"type":410,"value":2010},"Array\n",{"type":404,"tag":825,"props":2012,"children":2013},{"class":827,"line":941},[2014,2018,2023,2027,2031,2036,2040,2045,2049,2054,2058,2063],{"type":404,"tag":825,"props":2015,"children":2016},{"style":832},[2017],{"type":410,"value":982},{"type":404,"tag":825,"props":2019,"children":2020},{"style":985},[2021],{"type":410,"value":2022}," xArr",{"type":404,"tag":825,"props":2024,"children":2025},{"style":904},[2026],{"type":410,"value":907},{"type":404,"tag":825,"props":2028,"children":2029},{"style":904},[2030],{"type":410,"value":997},{"type":404,"tag":825,"props":2032,"children":2033},{"style":838},[2034],{"type":410,"value":2035}," xArray",{"type":404,"tag":825,"props":2037,"children":2038},{"style":899},[2039],{"type":410,"value":847},{"type":404,"tag":825,"props":2041,"children":2042},{"style":1046},[2043],{"type":410,"value":2044},"1",{"type":404,"tag":825,"props":2046,"children":2047},{"style":844},[2048],{"type":410,"value":858},{"type":404,"tag":825,"props":2050,"children":2051},{"style":1046},[2052],{"type":410,"value":2053}," 2",{"type":404,"tag":825,"props":2055,"children":2056},{"style":844},[2057],{"type":410,"value":858},{"type":404,"tag":825,"props":2059,"children":2060},{"style":1046},[2061],{"type":410,"value":2062}," 3",{"type":404,"tag":825,"props":2064,"children":2065},{"style":899},[2066],{"type":410,"value":1054},{"type":404,"tag":825,"props":2068,"children":2069},{"class":827,"line":967},[2070],{"type":404,"tag":825,"props":2071,"children":2072},{"emptyLinePlaceholder":397},[2073],{"type":410,"value":1063},{"type":404,"tag":825,"props":2075,"children":2076},{"class":827,"line":976},[2077,2081,2085,2089,2094,2098,2102,2106],{"type":404,"tag":825,"props":2078,"children":2079},{"style":899},[2080],{"type":410,"value":1082},{"type":404,"tag":825,"props":2082,"children":2083},{"style":844},[2084],{"type":410,"value":504},{"type":404,"tag":825,"props":2086,"children":2087},{"style":838},[2088],{"type":410,"value":1091},{"type":404,"tag":825,"props":2090,"children":2091},{"style":899},[2092],{"type":410,"value":2093},"(xArr ",{"type":404,"tag":825,"props":2095,"children":2096},{"style":904},[2097],{"type":410,"value":431},{"type":404,"tag":825,"props":2099,"children":2100},{"style":1146},[2101],{"type":410,"value":2035},{"type":404,"tag":825,"props":2103,"children":2104},{"style":899},[2105],{"type":410,"value":1129},{"type":404,"tag":825,"props":2107,"children":2108},{"style":1070},[2109],{"type":410,"value":1073},{"type":404,"tag":825,"props":2111,"children":2112},{"class":827,"line":1057},[2113,2117,2121,2125,2129,2133,2138,2142],{"type":404,"tag":825,"props":2114,"children":2115},{"style":899},[2116],{"type":410,"value":1082},{"type":404,"tag":825,"props":2118,"children":2119},{"style":844},[2120],{"type":410,"value":504},{"type":404,"tag":825,"props":2122,"children":2123},{"style":838},[2124],{"type":410,"value":1091},{"type":404,"tag":825,"props":2126,"children":2127},{"style":899},[2128],{"type":410,"value":2093},{"type":404,"tag":825,"props":2130,"children":2131},{"style":904},[2132],{"type":410,"value":431},{"type":404,"tag":825,"props":2134,"children":2135},{"style":1146},[2136],{"type":410,"value":2137}," Array",{"type":404,"tag":825,"props":2139,"children":2140},{"style":899},[2141],{"type":410,"value":1129},{"type":404,"tag":825,"props":2143,"children":2144},{"style":1070},[2145],{"type":410,"value":1475},{"type":404,"tag":412,"props":2147,"children":2148},{},[2149],{"type":410,"value":2150},"因为 iframe 中的数组实例不是父窗口的 Array 的实例，所以在 xArr 的原型链上是找不到 Array 的，所以结果为 false。",{"type":404,"tag":405,"props":2152,"children":2154},{"id":2153},"objectprototypetostringcall",[2155],{"type":410,"value":436},{"type":404,"tag":412,"props":2157,"children":2158},{},[2159],{"type":410,"value":2160},"一般来说，在业务代码中，我们使用 typeof 和 instanceof 运算符判断变量的类型就足够了。虽然这两种方法都有缺陷，但是我们记住这些常见的容易混淆的地方，避免使用就可以。\n下面要介绍的是一种更精确的方法，一般会用在工具函数或者类库中，如：",{"type":404,"tag":815,"props":2162,"children":2164},{"className":817,"code":2163,"language":819,"meta":398,"style":398},"function isArray(arr) {\n  return Object.prototype.toString.call(arr) === '[object Array]'\n}\nisArray([]) // true\n",[2165],{"type":404,"tag":707,"props":2166,"children":2167},{"__ignoreMap":398},[2168,2197,2265,2272],{"type":404,"tag":825,"props":2169,"children":2170},{"class":827,"line":828},[2171,2175,2180,2184,2189,2193],{"type":404,"tag":825,"props":2172,"children":2173},{"style":832},[2174],{"type":410,"value":835},{"type":404,"tag":825,"props":2176,"children":2177},{"style":838},[2178],{"type":410,"value":2179}," isArray",{"type":404,"tag":825,"props":2181,"children":2182},{"style":844},[2183],{"type":410,"value":847},{"type":404,"tag":825,"props":2185,"children":2186},{"style":850},[2187],{"type":410,"value":2188},"arr",{"type":404,"tag":825,"props":2190,"children":2191},{"style":844},[2192],{"type":410,"value":877},{"type":404,"tag":825,"props":2194,"children":2195},{"style":844},[2196],{"type":410,"value":882},{"type":404,"tag":825,"props":2198,"children":2199},{"class":827,"line":885},[2200,2205,2209,2213,2217,2221,2226,2230,2235,2239,2243,2247,2251,2255,2260],{"type":404,"tag":825,"props":2201,"children":2202},{"style":1385},[2203],{"type":410,"value":2204},"  return",{"type":404,"tag":825,"props":2206,"children":2207},{"style":1113},[2208],{"type":410,"value":1736},{"type":404,"tag":825,"props":2210,"children":2211},{"style":844},[2212],{"type":410,"value":504},{"type":404,"tag":825,"props":2214,"children":2215},{"style":985},[2216],{"type":410,"value":1124},{"type":404,"tag":825,"props":2218,"children":2219},{"style":844},[2220],{"type":410,"value":504},{"type":404,"tag":825,"props":2222,"children":2223},{"style":899},[2224],{"type":410,"value":2225},"toString",{"type":404,"tag":825,"props":2227,"children":2228},{"style":844},[2229],{"type":410,"value":504},{"type":404,"tag":825,"props":2231,"children":2232},{"style":838},[2233],{"type":410,"value":2234},"call",{"type":404,"tag":825,"props":2236,"children":2237},{"style":1502},[2238],{"type":410,"value":847},{"type":404,"tag":825,"props":2240,"children":2241},{"style":899},[2242],{"type":410,"value":2188},{"type":404,"tag":825,"props":2244,"children":2245},{"style":1502},[2246],{"type":410,"value":1129},{"type":404,"tag":825,"props":2248,"children":2249},{"style":904},[2250],{"type":410,"value":1134},{"type":404,"tag":825,"props":2252,"children":2253},{"style":1008},[2254],{"type":410,"value":1030},{"type":404,"tag":825,"props":2256,"children":2257},{"style":1014},[2258],{"type":410,"value":2259},"[object Array]",{"type":404,"tag":825,"props":2261,"children":2262},{"style":1008},[2263],{"type":410,"value":2264},"'\n",{"type":404,"tag":825,"props":2266,"children":2267},{"class":827,"line":915},[2268],{"type":404,"tag":825,"props":2269,"children":2270},{"style":844},[2271],{"type":410,"value":973},{"type":404,"tag":825,"props":2273,"children":2274},{"class":827,"line":941},[2275,2280,2285],{"type":404,"tag":825,"props":2276,"children":2277},{"style":838},[2278],{"type":410,"value":2279},"isArray",{"type":404,"tag":825,"props":2281,"children":2282},{"style":899},[2283],{"type":410,"value":2284},"([]) ",{"type":404,"tag":825,"props":2286,"children":2287},{"style":1070},[2288],{"type":410,"value":1073},{"type":404,"tag":412,"props":2290,"children":2291},{},[2292],{"type":410,"value":2293},"那么 Object.prototype.toString 到底能分辨几种类型呢？查阅 ES6 规范文档，可以得到其实现，如下：",{"type":404,"tag":462,"props":2295,"children":2296},{},[2297,2327,2352,2363,2374,2383,2394,2405,2416,2427,2438,2449,2460,2471,2482,2493,2504,2513,2524],{"type":404,"tag":422,"props":2298,"children":2299},{},[2300,2302,2307,2309,2313,2315,2326],{"type":410,"value":2301},"If the ",{"type":404,"tag":498,"props":2303,"children":2304},{},[2305],{"type":410,"value":2306},"this",{"type":410,"value":2308}," value is ",{"type":404,"tag":498,"props":2310,"children":2311},{},[2312],{"type":410,"value":787},{"type":410,"value":2314},", return ",{"type":404,"tag":498,"props":2316,"children":2317},{},[2318,2320,2325],{"type":410,"value":2319},"\"",{"type":404,"tag":825,"props":2321,"children":2322},{},[2323],{"type":410,"value":2324},"object Undefined",{"type":410,"value":2319},{"type":410,"value":504},{"type":404,"tag":422,"props":2328,"children":2329},{},[2330,2331,2335,2336,2340,2341,2351],{"type":410,"value":2301},{"type":404,"tag":498,"props":2332,"children":2333},{},[2334],{"type":410,"value":2306},{"type":410,"value":2308},{"type":404,"tag":498,"props":2337,"children":2338},{},[2339],{"type":410,"value":797},{"type":410,"value":2314},{"type":404,"tag":498,"props":2342,"children":2343},{},[2344,2345,2350],{"type":410,"value":2319},{"type":404,"tag":825,"props":2346,"children":2347},{},[2348],{"type":410,"value":2349},"object Null",{"type":410,"value":2319},{"type":410,"value":504},{"type":404,"tag":422,"props":2353,"children":2354},{},[2355,2357,2362],{"type":410,"value":2356},"Let O be ",{"type":404,"tag":476,"props":2358,"children":2359},{},[2360],{"type":410,"value":2361},"ToObject(this value)",{"type":410,"value":504},{"type":404,"tag":422,"props":2364,"children":2365},{},[2366,2368,2373],{"type":410,"value":2367},"Let isArray be ",{"type":404,"tag":476,"props":2369,"children":2370},{},[2371],{"type":410,"value":2372},"IsArray(O)",{"type":410,"value":504},{"type":404,"tag":422,"props":2375,"children":2376},{},[2377,2382],{"type":404,"tag":476,"props":2378,"children":2379},{},[2380],{"type":410,"value":2381},"ReturnIfAbrupt(isArray)",{"type":410,"value":504},{"type":404,"tag":422,"props":2384,"children":2385},{},[2386,2388,2393],{"type":410,"value":2387},"If isArray is true, let builtinTag be ",{"type":404,"tag":498,"props":2389,"children":2390},{},[2391],{"type":410,"value":2392},"\"Array\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2395,"children":2396},{},[2397,2399,2404],{"type":410,"value":2398},"Else, if O is an exotic String object, let builtinTag be ",{"type":404,"tag":498,"props":2400,"children":2401},{},[2402],{"type":410,"value":2403},"\"String\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2406,"children":2407},{},[2408,2410,2415],{"type":410,"value":2409},"Else, if O has an [[ParameterMap]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2411,"children":2412},{},[2413],{"type":410,"value":2414},"\"Arguments\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2417,"children":2418},{},[2419,2421,2426],{"type":410,"value":2420},"Else, if O has a [[Call]] internal method, let builtinTag be ",{"type":404,"tag":498,"props":2422,"children":2423},{},[2424],{"type":410,"value":2425},"\"Function\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2428,"children":2429},{},[2430,2432,2437],{"type":410,"value":2431},"Else, if O has an [[ErrorData]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2433,"children":2434},{},[2435],{"type":410,"value":2436},"\"Error\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2439,"children":2440},{},[2441,2443,2448],{"type":410,"value":2442},"Else, if O has a [[BooleanData]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2444,"children":2445},{},[2446],{"type":410,"value":2447},"\"Boolean\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2450,"children":2451},{},[2452,2454,2459],{"type":410,"value":2453},"Else, if O has a [[NumberData]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2455,"children":2456},{},[2457],{"type":410,"value":2458},"\"Number\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2461,"children":2462},{},[2463,2465,2470],{"type":410,"value":2464},"Else, if O has a [[DateValue]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2466,"children":2467},{},[2468],{"type":410,"value":2469},"\"Date\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2472,"children":2473},{},[2474,2476,2481],{"type":410,"value":2475},"Else, if O has a [[RegExpMatcher]] internal slot, let builtinTag be ",{"type":404,"tag":498,"props":2477,"children":2478},{},[2479],{"type":410,"value":2480},"\"RegExp\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2483,"children":2484},{},[2485,2487,2492],{"type":410,"value":2486},"Else, let builtinTag be ",{"type":404,"tag":498,"props":2488,"children":2489},{},[2490],{"type":410,"value":2491},"\"Object\"",{"type":410,"value":504},{"type":404,"tag":422,"props":2494,"children":2495},{},[2496,2498,2503],{"type":410,"value":2497},"Let tag be ",{"type":404,"tag":476,"props":2499,"children":2500},{},[2501],{"type":410,"value":2502},"Get(O, @@toStringTag)",{"type":410,"value":504},{"type":404,"tag":422,"props":2505,"children":2506},{},[2507,2512],{"type":404,"tag":476,"props":2508,"children":2509},{},[2510],{"type":410,"value":2511},"ReturnIfAbrupt(tag)",{"type":410,"value":504},{"type":404,"tag":422,"props":2514,"children":2515},{},[2516,2517,2522],{"type":410,"value":474},{"type":404,"tag":476,"props":2518,"children":2519},{},[2520],{"type":410,"value":2521},"Type(tag)",{"type":410,"value":2523}," is not String, let tag be builtinTag.",{"type":404,"tag":422,"props":2525,"children":2526},{},[2527,2529,2539],{"type":410,"value":2528},"Return the String that is the result of concatenating ",{"type":404,"tag":498,"props":2530,"children":2531},{},[2532,2533,2538],{"type":410,"value":2319},{"type":404,"tag":825,"props":2534,"children":2535},{},[2536],{"type":410,"value":2537},"object \"**, tag, and **\"",{"type":410,"value":2319},{"type":410,"value":504},{"type":404,"tag":412,"props":2541,"children":2542},{},[2543],{"type":410,"value":2544},"细数下来，Object.prototype.toString 不仅可以区分 Object、Function、Date、RegExp 等常见对象，它还能区分 Error、Arguments 等，见下代码：",{"type":404,"tag":815,"props":2546,"children":2548},{"className":817,"code":2547,"language":819,"meta":398,"style":398},";(function() {\n  console.log(\n    typeof arguments, // 'object'\n    Object.prototype.toString.call(arguments) // '[object Arguments]'\n  )\n})()\n",[2549],{"type":404,"tag":707,"props":2550,"children":2551},{"__ignoreMap":398},[2552,2576,2596,2619,2669,2677],{"type":404,"tag":825,"props":2553,"children":2554},{"class":827,"line":828},[2555,2559,2563,2567,2572],{"type":404,"tag":825,"props":2556,"children":2557},{"style":844},[2558],{"type":410,"value":1291},{"type":404,"tag":825,"props":2560,"children":2561},{"style":899},[2562],{"type":410,"value":847},{"type":404,"tag":825,"props":2564,"children":2565},{"style":832},[2566],{"type":410,"value":835},{"type":404,"tag":825,"props":2568,"children":2569},{"style":844},[2570],{"type":410,"value":2571},"()",{"type":404,"tag":825,"props":2573,"children":2574},{"style":844},[2575],{"type":410,"value":882},{"type":404,"tag":825,"props":2577,"children":2578},{"class":827,"line":885},[2579,2584,2588,2592],{"type":404,"tag":825,"props":2580,"children":2581},{"style":899},[2582],{"type":410,"value":2583},"  console",{"type":404,"tag":825,"props":2585,"children":2586},{"style":844},[2587],{"type":410,"value":504},{"type":404,"tag":825,"props":2589,"children":2590},{"style":838},[2591],{"type":410,"value":1091},{"type":404,"tag":825,"props":2593,"children":2594},{"style":1502},[2595],{"type":410,"value":1634},{"type":404,"tag":825,"props":2597,"children":2598},{"class":827,"line":915},[2599,2604,2610,2614],{"type":404,"tag":825,"props":2600,"children":2601},{"style":904},[2602],{"type":410,"value":2603},"    typeof",{"type":404,"tag":825,"props":2605,"children":2607},{"style":2606},"--shiki-light:#90A4AE;--shiki-default:#005CC5;--shiki-dark:#79B8FF;--shiki-sepia:#FD971F",[2608],{"type":410,"value":2609}," arguments",{"type":404,"tag":825,"props":2611,"children":2612},{"style":844},[2613],{"type":410,"value":858},{"type":404,"tag":825,"props":2615,"children":2616},{"style":1070},[2617],{"type":410,"value":2618}," // 'object'\n",{"type":404,"tag":825,"props":2620,"children":2621},{"class":827,"line":941},[2622,2627,2631,2635,2639,2643,2647,2651,2655,2660,2664],{"type":404,"tag":825,"props":2623,"children":2624},{"style":1113},[2625],{"type":410,"value":2626},"    Object",{"type":404,"tag":825,"props":2628,"children":2629},{"style":844},[2630],{"type":410,"value":504},{"type":404,"tag":825,"props":2632,"children":2633},{"style":985},[2634],{"type":410,"value":1124},{"type":404,"tag":825,"props":2636,"children":2637},{"style":844},[2638],{"type":410,"value":504},{"type":404,"tag":825,"props":2640,"children":2641},{"style":899},[2642],{"type":410,"value":2225},{"type":404,"tag":825,"props":2644,"children":2645},{"style":844},[2646],{"type":410,"value":504},{"type":404,"tag":825,"props":2648,"children":2649},{"style":838},[2650],{"type":410,"value":2234},{"type":404,"tag":825,"props":2652,"children":2653},{"style":1502},[2654],{"type":410,"value":847},{"type":404,"tag":825,"props":2656,"children":2657},{"style":2606},[2658],{"type":410,"value":2659},"arguments",{"type":404,"tag":825,"props":2661,"children":2662},{"style":1502},[2663],{"type":410,"value":1129},{"type":404,"tag":825,"props":2665,"children":2666},{"style":1070},[2667],{"type":410,"value":2668},"// '[object Arguments]'\n",{"type":404,"tag":825,"props":2670,"children":2671},{"class":827,"line":967},[2672],{"type":404,"tag":825,"props":2673,"children":2674},{"style":1502},[2675],{"type":410,"value":2676},"  )\n",{"type":404,"tag":825,"props":2678,"children":2679},{"class":827,"line":976},[2680,2685],{"type":404,"tag":825,"props":2681,"children":2682},{"style":844},[2683],{"type":410,"value":2684},"}",{"type":404,"tag":825,"props":2686,"children":2687},{"style":899},[2688],{"type":410,"value":2689},")()\n",{"type":404,"tag":697,"props":2691,"children":2693},{"id":2692},"如何扩展",[2694],{"type":410,"value":2692},{"type":404,"tag":412,"props":2696,"children":2697},{},[2698],{"type":410,"value":2699},"可以通过 Symbol.toStringTag 对已有对象的内置标签进行修改。这样就可以不需要通过构造函数的方法来分辨程序中不同种类的新对象。如下代码：",{"type":404,"tag":815,"props":2701,"children":2703},{"className":817,"code":2702,"language":819,"meta":398,"style":398},"var a = {}\na[Symbol.toStringTag] = '1234'\nObject.prototype.toString.call(a)\n// >>> \"[object 1234]\"\n",[2704],{"type":404,"tag":707,"props":2705,"children":2706},{"__ignoreMap":398},[2707,2729,2763,2800],{"type":404,"tag":825,"props":2708,"children":2709},{"class":827,"line":828},[2710,2715,2720,2724],{"type":404,"tag":825,"props":2711,"children":2712},{"style":832},[2713],{"type":410,"value":2714},"var",{"type":404,"tag":825,"props":2716,"children":2717},{"style":899},[2718],{"type":410,"value":2719}," a ",{"type":404,"tag":825,"props":2721,"children":2722},{"style":904},[2723],{"type":410,"value":1954},{"type":404,"tag":825,"props":2725,"children":2726},{"style":844},[2727],{"type":410,"value":2728}," {}\n",{"type":404,"tag":825,"props":2730,"children":2731},{"class":827,"line":885},[2732,2737,2741,2746,2750,2754,2759],{"type":404,"tag":825,"props":2733,"children":2734},{"style":899},[2735],{"type":410,"value":2736},"a[Symbol",{"type":404,"tag":825,"props":2738,"children":2739},{"style":844},[2740],{"type":410,"value":504},{"type":404,"tag":825,"props":2742,"children":2743},{"style":899},[2744],{"type":410,"value":2745},"toStringTag] ",{"type":404,"tag":825,"props":2747,"children":2748},{"style":904},[2749],{"type":410,"value":1954},{"type":404,"tag":825,"props":2751,"children":2752},{"style":1008},[2753],{"type":410,"value":1030},{"type":404,"tag":825,"props":2755,"children":2756},{"style":1014},[2757],{"type":410,"value":2758},"1234",{"type":404,"tag":825,"props":2760,"children":2761},{"style":1008},[2762],{"type":410,"value":2264},{"type":404,"tag":825,"props":2764,"children":2765},{"class":827,"line":915},[2766,2771,2775,2779,2783,2787,2791,2795],{"type":404,"tag":825,"props":2767,"children":2768},{"style":1113},[2769],{"type":410,"value":2770},"Object",{"type":404,"tag":825,"props":2772,"children":2773},{"style":844},[2774],{"type":410,"value":504},{"type":404,"tag":825,"props":2776,"children":2777},{"style":985},[2778],{"type":410,"value":1124},{"type":404,"tag":825,"props":2780,"children":2781},{"style":844},[2782],{"type":410,"value":504},{"type":404,"tag":825,"props":2784,"children":2785},{"style":899},[2786],{"type":410,"value":2225},{"type":404,"tag":825,"props":2788,"children":2789},{"style":844},[2790],{"type":410,"value":504},{"type":404,"tag":825,"props":2792,"children":2793},{"style":838},[2794],{"type":410,"value":2234},{"type":404,"tag":825,"props":2796,"children":2797},{"style":899},[2798],{"type":410,"value":2799},"(a)\n",{"type":404,"tag":825,"props":2801,"children":2802},{"class":827,"line":941},[2803],{"type":404,"tag":825,"props":2804,"children":2805},{"style":1070},[2806],{"type":410,"value":2807},"// >>> \"[object 1234]\"\n",{"type":404,"tag":697,"props":2809,"children":2811},{"id":2810},"缺陷所在",[2812],{"type":410,"value":2810},{"type":404,"tag":412,"props":2814,"children":2815},{},[2816],{"type":410,"value":2817},"JS 中的对象，按照执行环境来划分可以分为内置对象（Build-In Object）和宿主对象（Host Object），如 Window、History 就是执行环境（浏览器）提供的对象。\n缺陷呢，往往就存在于规范中没有被定义的行为。\n比如，Window 对象的 Symbol.toString 是浏览器定义的行为，而且往往不同浏览器，实现还不一样。",{"type":404,"tag":815,"props":2819,"children":2821},{"className":817,"code":2820,"language":819,"meta":398,"style":398},"Window.toString()\n// [object Window] ?\n// [object Object] ?\n// [object DOMWindow] ?\n// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",[2822],{"type":404,"tag":707,"props":2823,"children":2824},{"__ignoreMap":398},[2825,2846,2854,2862,2870],{"type":404,"tag":825,"props":2826,"children":2827},{"class":827,"line":828},[2828,2833,2837,2841],{"type":404,"tag":825,"props":2829,"children":2830},{"style":899},[2831],{"type":410,"value":2832},"Window",{"type":404,"tag":825,"props":2834,"children":2835},{"style":844},[2836],{"type":410,"value":504},{"type":404,"tag":825,"props":2838,"children":2839},{"style":838},[2840],{"type":410,"value":2225},{"type":404,"tag":825,"props":2842,"children":2843},{"style":899},[2844],{"type":410,"value":2845},"()\n",{"type":404,"tag":825,"props":2847,"children":2848},{"class":827,"line":885},[2849],{"type":404,"tag":825,"props":2850,"children":2851},{"style":1070},[2852],{"type":410,"value":2853},"// [object Window] ?\n",{"type":404,"tag":825,"props":2855,"children":2856},{"class":827,"line":915},[2857],{"type":404,"tag":825,"props":2858,"children":2859},{"style":1070},[2860],{"type":410,"value":2861},"// [object Object] ?\n",{"type":404,"tag":825,"props":2863,"children":2864},{"class":827,"line":941},[2865],{"type":404,"tag":825,"props":2866,"children":2867},{"style":1070},[2868],{"type":410,"value":2869},"// [object DOMWindow] ?\n",{"type":404,"tag":825,"props":2871,"children":2872},{"class":827,"line":967},[2873],{"type":404,"tag":825,"props":2874,"children":2875},{"style":1070},[2876],{"type":410,"value":2877},"// [object global] ? (这个尤其为叛徒，第一个字母居然是小写的)\n",{"type":404,"tag":412,"props":2879,"children":2880},{},[2881],{"type":404,"tag":498,"props":2882,"children":2883},{},[2884],{"type":410,"value":2885},"(￣ ▽ ￣)\" 害。",{"type":404,"tag":405,"props":2887,"children":2889},{"id":2888},"最后",[2890],{"type":410,"value":2888},{"type":404,"tag":412,"props":2892,"children":2893},{},[2894],{"type":410,"value":2895},"想不到吧，JS 类型判断这个问题居然没有完美的解法，每种解法都有缺陷。",{"type":404,"tag":412,"props":2897,"children":2898},{},[2899],{"type":410,"value":2900},"那么我们平常写代码到底用哪种呢？",{"type":404,"tag":412,"props":2902,"children":2903},{},[2904],{"type":410,"value":2905},"虽然我刚才提到“业务代码可以使用 typeof 或 instanceof，库和工具函数等需要更精准的情况则用 Object.prototype.toString”，但是，这并不是绝对的。\n我们仔细思考一下这三种方法的本质：",{"type":404,"tag":418,"props":2907,"children":2908},{},[2909,2914,2919],{"type":404,"tag":422,"props":2910,"children":2911},{},[2912],{"type":410,"value":2913},"typeof 根据最小三位字节判断变量类型",{"type":404,"tag":422,"props":2915,"children":2916},{},[2917],{"type":410,"value":2918},"instanceof 根据原型链判断",{"type":404,"tag":422,"props":2920,"children":2921},{},[2922],{"type":410,"value":2923},"Object.prototype.toString 主要是根据对象的内置标签（Build-In Tag）判断",{"type":404,"tag":412,"props":2925,"children":2926},{},[2927],{"type":410,"value":2928},"那么熟记这三条规则，写代码时就能游刃有余了。",{"type":404,"tag":412,"props":2930,"children":2931},{},[2932],{"type":410,"value":2933},"感谢看到结尾，如有错误请务必指正，十分感谢。如果喜欢请点赞、投币、关注三连吧！我是 Lionad，爱你萌！",{"type":404,"tag":405,"props":2935,"children":2937},{"id":2936},"阅读更多",[2938],{"type":410,"value":2936},{"type":404,"tag":418,"props":2940,"children":2941},{},[2942,2954,2964,2974,2984],{"type":404,"tag":422,"props":2943,"children":2944},{},[2945],{"type":404,"tag":2946,"props":2947,"children":2951},"a",{"href":2948,"rel":2949},"https://book.douban.com/subject/27133542/",[2950],"nofollow",[2952],{"type":410,"value":2953},"《JavaScript 框架设计》",{"type":404,"tag":422,"props":2955,"children":2956},{},[2957],{"type":404,"tag":2946,"props":2958,"children":2961},{"href":2959,"rel":2960},"https://justjavac.com/javascript/2012/12/23/what-is-javascripts-typeof-operator-used-for.html",[2950],[2962],{"type":410,"value":2963},"JavaScript 的 typeof 的用途",{"type":404,"tag":422,"props":2965,"children":2966},{},[2967],{"type":404,"tag":2946,"props":2968,"children":2971},{"href":2969,"rel":2970},"https://2ality.com/2013/10/typeof-null.html",[2950],[2972],{"type":410,"value":2973},"The history of “typeof null”",{"type":404,"tag":422,"props":2975,"children":2976},{},[2977],{"type":404,"tag":2946,"props":2978,"children":2981},{"href":2979,"rel":2980},"http://www.ecma-international.org/ecma-262/6.0/#sec-typeof-operator",[2950],[2982],{"type":410,"value":2983},"ECMAScript® 2015 Language Specification",{"type":404,"tag":422,"props":2985,"children":2986},{},[2987],{"type":404,"tag":2946,"props":2988,"children":2991},{"href":2989,"rel":2990},"https://juejin.im/post/5b0b9b9051882515773ae714",[2950],[2992],{"type":410,"value":2993},"instanceof 和 typeof 原理",{"type":404,"tag":2995,"props":2996,"children":2997},"style",{},[2998],{"type":410,"value":2999},"html .light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html.light .shiki span {color: var(--shiki-light);background: var(--shiki-light-bg);font-style: var(--shiki-light-font-style);font-weight: var(--shiki-light-font-weight);text-decoration: var(--shiki-light-text-decoration);}html .default .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .shiki span {color: var(--shiki-default);background: var(--shiki-default-bg);font-style: var(--shiki-default-font-style);font-weight: var(--shiki-default-font-weight);text-decoration: var(--shiki-default-text-decoration);}html .dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html.dark .shiki span {color: var(--shiki-dark);background: var(--shiki-dark-bg);font-style: var(--shiki-dark-font-style);font-weight: var(--shiki-dark-font-weight);text-decoration: var(--shiki-dark-text-decoration);}html .sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}html.sepia .shiki span {color: var(--shiki-sepia);background: var(--shiki-sepia-bg);font-style: var(--shiki-sepia-font-style);font-weight: var(--shiki-sepia-font-weight);text-decoration: var(--shiki-sepia-text-decoration);}",{"title":398,"searchDepth":885,"depth":885,"links":3001},[3002,3003,3007,3011,3015,3016],{"id":407,"depth":885,"text":407},{"id":426,"depth":885,"text":426,"children":3004},[3005,3006],{"id":690,"depth":915,"text":690},{"id":735,"depth":915,"text":738},{"id":431,"depth":885,"text":431,"children":3008},[3009,3010],{"id":1600,"depth":915,"text":1600},{"id":1597,"depth":915,"text":1597},{"id":2153,"depth":885,"text":436,"children":3012},[3013,3014],{"id":2692,"depth":915,"text":2692},{"id":2810,"depth":915,"text":2810},{"id":2888,"depth":885,"text":2888},{"id":2936,"depth":885,"text":2936},"markdown","content:_achieved:2020-05:type-check.md","content","_achieved/2020-05/type-check.md","_achieved/2020-05/type-check","md",[3024,3027],{"_path":3025,"title":3026,"description":398},"/_achieved/2020-05/js-module-history","JS 模块化简史",{"_path":3028,"title":3029,"description":398},"/_achieved/2020-06/punctuations","✒️ 关于标点的那些事儿",1741604952129]